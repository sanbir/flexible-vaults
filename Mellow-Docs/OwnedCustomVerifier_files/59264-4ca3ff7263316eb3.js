"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[53697,59264],{117570:(e,t,i)=>{i.d(t,{L:()=>s,q:()=>a});i(517642),i(658004),i(733853),i(845876),i(432475),i(515024),i(731698),i(898992),i(354520),i(581454);var n=()=>i(188716),r=()=>i(959044),o=()=>i(534177);function a(e){if(!e.isDefined()||!(0,r().aF)(e.getType()))return[];const t=e.getChildNotificationStores(),i=(0,n().Vq)({parentNotification:e.getModel(),childNotifications:t.map((e=>e.getModel())).filter(o().O9)}),a=new Set(i.map((e=>e.id)));return t.filter((e=>a.has(e.id)))}function s(e){return e.map((e=>e.getActivityStore())).filter(o().O9).map((e=>e.getEdits())).flat()}},188716:(e,t,i)=>{i.d(t,{Bn:()=>a,KZ:()=>u,VK:()=>s,Vq:()=>o,WN:()=>p,rB:()=>c,zV:()=>l});i(16280),i(944114),i(57145),i(517642),i(658004),i(733853),i(845876),i(432475),i(515024),i(731698),i(898992),i(354520),i(803949),i(581454);var n=()=>i(496603),r=()=>i(534177);function o({parentNotification:e,childNotifications:t}){return t.filter((t=>!t.getInvalid()&&t.getParentNotificationId()===e.id))}function a({editsInChildNotificationActivities:e,comments:t,actorId:i}){const n=t.filter((e=>{var t;return(null===(t=e.getCreatedByPointer())||void 0===t?void 0:t.id)!==i})),r=new Set(e.filter((e=>"comment-created"===e.type||"suggestion-created"===e.type)).map((e=>e.comment_id))),o=n.filter((e=>e.getAlive()&&r.has(e.id))).sort(((e,t)=>e.getCreatedTime()-t.getCreatedTime()));return o.length>0?o:n}function s(e){return e.toSorted(((e,t)=>{const{isDiscussionResolved:i,comment:n,isDiscussionUnread:r}=e,{isDiscussionResolved:o,comment:a,isDiscussionUnread:s}=t,d=r?1:0,l=s?1:0;if(d-l!=0)return d-l;const c=i?0:1,u=o?0:1;return c-u!=0?c-u:n.getCreatedTime()-a.getCreatedTime()})).map((e=>e.comment))}const d=["commented","block-property-edited"];function l(e){return Boolean(e.getParentNotificationId())&&(0,r().Xk)(d,e.getType())}function c(e){const t={};return e.forEach((e=>{e.filtered_block_schema&&e.property_updates&&Object.entries(e.property_updates).forEach((([i,n])=>{var r;const o=null===(r=e.filtered_block_schema)||void 0===r?void 0:r[i];o&&(t[i]||(t[i]={edits:[],propertySchema:o}),t[i].edits.push({edit:e,diff:n}))}))})),t}function u(e,t){const i=[...e].sort(((e,t)=>(e.edit.timestamp||0)-(t.edit.timestamp||0)));if(0===i.length)throw new Error("No edits in grouped edit provided");let n;const r=i[0],o=i[i.length-1];if(r.diff.before&&o.diff.after)n={before:r.diff.before,after:o.diff.after};else if(!r.diff.before&&o.diff.after)n={before:void 0,after:o.diff.after};else{if(!r.diff.before||o.diff.after)return o.edit;n={before:r.diff.before,after:void 0}}return{...o.edit,property_updates:{[t]:n}}}function p(e){var t;const i=[...e].sort(((e,t)=>(e.edit.timestamp||0)-(t.edit.timestamp||0))),r=[];if(i.length>=2)for(let d=0;d<i.length-1;d++){var o,a,s;const e=i[d],t=i[d+1],l=(null===(o=e.diff.before)||void 0===o?void 0:o.value)??[],c=(null===(a=e.diff.after)||void 0===a?void 0:a.value)??[],u=(null===(s=t.diff.after)||void 0===s?void 0:s.value)??[];(0,n().n4)(l,c)||(0,n().n4)(c,u)||r.push({value:{value:c,spaceId:e.edit.space_id},timestamp:e.edit.timestamp||0})}return r.length>0?{intermediateChanges:r,latestTimestamp:null===(t=r[r.length-1])||void 0===t?void 0:t.timestamp}:void 0}},266945:(e,t,i)=>{i.d(t,{x:()=>p});i(296540);var n=()=>i(590526),r=()=>i(934999),o=()=>i(29037),a=()=>i(895189),s=()=>i(69708),d=()=>i(534177),l=()=>i(792526),c=()=>i(424039),u=i(474848);function p(){const e=(0,n().O$)(c().Iq);switch(e){case"unread_and_read":return(0,u.jsx)(l().A,{message:(0,u.jsx)(s().sA,{defaultMessage:"You’ll be notified here for @mentions, page activity, and more",id:"inbox.filterEmptyState.unreadOrReadMessage"}),title:(0,u.jsx)(s().sA,{defaultMessage:"You’re all caught up",id:"inbox.filterEmptyState.unreadOrReadTitle"}),iconOptions:{icon:o().checkmarkIcon,colorPalette:"blue",colorVariant:"accentPrimary"}});case"unread_only":return(0,u.jsx)(l().A,{message:(0,u.jsx)(s().sA,{defaultMessage:"You’re all caught up—any new unread notifications will appear here",id:"inbox.filterEmptyState.unreadMessage"}),title:(0,u.jsx)(s().sA,{defaultMessage:"No unread notifications",id:"inbox.filterEmptyState.unreadTitle"}),iconOptions:{icon:a().d,colorPalette:"gray",colorVariant:"tertiary"}});case"archived_only":return(0,u.jsx)(l().A,{message:(0,u.jsx)(s().sA,{defaultMessage:"Any inbox updates that you archived will appear here",id:"inbox.filterEmptyState.archivedMessage"}),title:(0,u.jsx)(s().sA,{defaultMessage:"No archived notifications",id:"inbox.filterEmptyState.archivedTitle"}),iconOptions:{icon:r().archiveBoxIcon,colorPalette:"gray",colorVariant:"tertiary"}});case"all_updates":return(0,u.jsx)(l().A,{message:(0,u.jsx)(s().sA,{defaultMessage:"Any activity in the workspace will appear here",id:"inbox.filterEmptyState.allPagesMessage"}),title:(0,u.jsx)(s().sA,{defaultMessage:"No activity in the workspace",id:"inbox.filterEmptyState.allPagesTitle"})});default:(0,d().HB)(e)}}},360576:(e,t,i)=>{i.r(t),i.d(t,{iconDefinition:()=>n,personFillSmallIcon:()=>r});i(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"2.89 1.85 10.22 12.3",svg:(0,i(474848).jsx)("path",{d:"M8 1.85c-.925 0-1.673.382-2.179 1.012-.495.617-.73 1.435-.73 2.29 0 .856.235 1.674.73 2.291.506.63 1.255 1.012 2.18 1.012.924 0 1.672-.382 2.178-1.012.495-.617.73-1.435.73-2.29 0-.856-.235-1.674-.73-2.291C9.673 2.232 8.925 1.85 8 1.85m0 7.403c-2.175 0-4.115 1.06-4.94 2.672-.3.585-.165 1.179.19 1.594.34.396.873.63 1.43.63h6.64c.557 0 1.09-.234 1.43-.63.355-.415.49-1.01.19-1.594-.825-1.612-2.765-2.672-4.94-2.672"})},r=(0,i(340498).wt)("personFillSmall",n,"fillSmall")},393065:(e,t,i)=>{i.d(t,{A:()=>ee});i(944114),i(898992),i(823215),i(354520),i(430670),i(803949),i(581454),i(737550);var n=i(296540),r=()=>i(564884),o=()=>i(907258),a=()=>i(59226),s=()=>i(726637),d=()=>i(484714),l=()=>i(590526),c=()=>i(401497),u=()=>i(79926),p=()=>i(852273),f=()=>i(34179),h=()=>i(498521),m=()=>i(413468),v=()=>i(165358),y=()=>i(188716),g=()=>i(187174),x=()=>i(959044),S=()=>i(69708),b=()=>i(100622),I=()=>i(496603),j=()=>i(763824),w=()=>i(534177),T=()=>i(769864),A=()=>i(132533),C=()=>i(988591),N=()=>i(279922);const _=new(u().O2)("activityNotification",(async()=>await Promise.all([i.e(62475),i.e(3151),i.e(98629),i.e(39986),i.e(47160),i.e(5181),i.e(14388),i.e(31646),i.e(85160),i.e(83149),i.e(7671),i.e(56409)]).then(i.bind(i,127885)))),M=new(u().O2)("groupedNotification",(async()=>await Promise.all([i.e(62475),i.e(3151),i.e(98629),i.e(39986),i.e(47160),i.e(5181),i.e(14388),i.e(31646),i.e(85160),i.e(83149),i.e(7671),i.e(3130)]).then(i.bind(i,251404)))),k=(0,u()._h)(_,(e=>e.ActivityNotification)),U=(0,u()._h)(M,(e=>e.GroupedNotification));var E=()=>i(671432),O=()=>i(21899),R=()=>i(303742),z=()=>i(179534),P=()=>i(424039),q=()=>i(547149),B=()=>i(371015),V=()=>i(117570),L=()=>i(212326),H=()=>i(920498),D=()=>i(711339);const F={};function W(e,t){e in F||(F[e]={measured:!1,startTime:performance.now(),size:t.size,type:t.type})}var G=()=>i(423817),K=()=>i(284371),$=()=>i(38554),Y=i(474848);function X(e){const{groupName:t}=e;switch(t){case"today":return(0,Y.jsx)(S().sA,{id:"InboxTimeGroupHeader.today",defaultMessage:"Today"});case"this_week":return(0,Y.jsx)(S().sA,{id:"InboxTimeGroupHeader.thisWeek",defaultMessage:"This week"});case"last_week":return(0,Y.jsx)(S().sA,{id:"InboxTimeGroupHeader.lastWeek",defaultMessage:"Last week"});case"older":return(0,Y.jsx)(S().sA,{id:"InboxTimeGroupHeader.older",defaultMessage:"Older"});default:(0,w().HB)(t)}}function Z(e){const{groupName:t,shouldStickyHeader:i,actions:n}=e,{isTablet:r}=(0,d().Y0)(),o=(0,$().U)(),a=(0,c().IS)((()=>({headerContainer:{display:"flex",alignItems:"center",paddingTop:3,paddingBottom:3,paddingInlineStart:o?8:16,paddingInlineEnd:o?0:8,color:b().Tj.sidebarSecondaryColor,fontWeight:r?K().Wy.regular:K().Wy.medium,fontSize:r?"15px":"12px",columnGap:8,...i&&{position:"sticky",top:0,backgroundColor:b().Tj.background.primary,zIndex:2,paddingBottom:4,paddingTop:2}},title:{flex:"1 1 auto",minWidth:0},actionsWrapper:{display:"flex",alignItems:"center",justifyContent:"flex-end",columnGap:4,marginInlineEnd:0}})),[i,r,o]);return(0,Y.jsxs)("div",{style:a.headerContainer,children:[(0,Y.jsx)("div",{style:a.title,children:(0,Y.jsx)(X,{groupName:t})}),n?(0,Y.jsx)("div",{style:a.actionsWrapper,children:n}):void 0]})}const J=20;const Q=new class{constructor(){this.state=new Map,this.noOpListener=()=>{}}cacheInboxPointers(e,t,i){const n=this.state.get(t);if(n)for(const r of n)e.defaultRecordCache.inMemoryRecordCache.removeListenerToRecord(r,this.noOpListener),(0,E().N$)({environment:e,pointer:r,userId:e.currentUser.id});for(const r of i)e.defaultRecordCache.inMemoryRecordCache.addListenerToRecord(r,this.noOpListener),(0,E().Ye)({pointer:r,userId:e.currentUser.id});this.state.set(t,i)}getNotificationIds(e){const t=this.state.get(e);if(!t)return;return t.filter((e=>e.table===x()._p)).map((e=>e.id))}};const ee=function(e){const[t,r]=(0,n.useState)(Math.random()),[o,a]=(0,n.useState)(J),s=(0,d().v3)(),c=(0,l().O$)(i(929219).e),u=(0,i(664594).T)();return(0,n.useEffect)((()=>{if(u){const e=I().nF((({value:e})=>{String(e).includes("unreadCount")||r(Math.random())}),1e3),t=(0,i(921997).dp)(u),n=p().Ay.addListener(t,void 0,e,void 0,s);if(n)return()=>{p().Ay.removeListener(n,s)}}}),[u,s]),c?(0,Y.jsx)(oe,{checkpoint:t,type:e.type,empty:e.empty,source:e.source,tab:e.tab,size:o,setSize:a,scrolledToTop:e.isScrolledToTopFromOtherSidebar,renderFirstGroupActions:e.renderFirstGroupActions,isContainerOpen:e.isContainerOpen}):(0,Y.jsx)(ie,{type:e.type})};function te(e){return(0,c().IS)((()=>({placeholder:{...ae(e),paddingTop:s().A.isMobile?64:void 0,minHeight:s().A.isMobile?void 0:220,display:"flex",flexDirection:"column",textAlign:"center",alignItems:"center",justifyContent:"center",fontSize:14,color:b().Tj.text.primary,overflow:"hidden",flex:1}})),[e]).placeholder}function ie({type:e}){const t=te(e);return(0,Y.jsx)("div",{style:t,children:(0,Y.jsx)("div",{children:(0,Y.jsx)(S().sA,{defaultMessage:"Please go online to view your inbox.",id:"notificationInbox.offline.message"})})})}function ne({request:e,error:t,result:i,type:p,empty:g,source:b,tab:j,size:T,setSize:M,scrolledToTop:E,requestType:O,renderFirstGroupActions:R,isContainerOpen:H}){const D=(0,d().v3)(),F=(0,l().O$)(o().AppStoreSidebarSpaceStore),W=(0,c().IS)((()=>({wrapper:{display:"flex",flexDirection:"column",gap:4,width:"100%",flex:1},inlineActionsRow:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:4,paddingInlineStart:8,paddingInlineEnd:8,paddingTop:3,paddingBottom:3}})),[]),K=i??Q.getNotificationIds(O),$=(0,l().O$)(N().Ay),[X,ee]=(0,l().K8)((()=>{if(!K)return[[],[]];const t=[],i=F?K.map((t=>f().T.createChildStore(F,{table:x()._p,id:t,spaceId:e.spaceId}))):[],n=[],r=I().oE(i.map((i=>{if(!i.isDefined())return null;if((0,y().zV)(i.getModel()))return null;if(i.getInvalid())return null;if("mentions"===e.type&&i.getVisited())return null;if("archive"===e.type&&!i.getVisited())return null;const r=i.getActivityStore(),o=null==r?void 0:r.getModel();if(i.isGroupedNotification()){if(i.getChildNotificationStores().every((e=>e.isReady()))){const e=(0,V().q)(i);if(0===e.length)return n.push(i),null;const t=(0,V().L)(e);if("grouped-commented"===i.getType()&&0===t.filter((e=>(0,m().k)(e))).length)return n.push(i),null;if("grouped-block-property-updated"===i.getType()&&0===t.length)return n.push(i),null}}else{if(!r||!r.isReady())return null;if(!o||o.invalid)return n.push(i),null}const a=i.getDiscussionStore();if(null!=a&&a.isReady()&&"none"===(null==a?void 0:a.getRole()))return n.push(i),null;t.push(i.pointer),r&&t.push(r.pointer),a&&t.push(a.pointer);const s=i.getNavigableBlockPointer();return s&&t.push(s),{activity:o,notificationStore:i}}))).sort(((e,t)=>Number(t.notificationStore.getEndTime())-Number(e.notificationStore.getEndTime())));return Q.cacheInboxPointers(D,O,t),[r,n]}),[K,F,D,O,e]),ie=(0,a().X)("inbox_load_more_if_invalid"),ne=(null==K?void 0:K.length)??0,re=ne-ee.length;(0,n.useEffect)((()=>{ie&&re<J&&ne>=T&&M(ne+J)}),[ie,re,ne,T,M]);const oe=(0,l().O$)(P().Iq),se=0===(0,l().K8)((()=>L().Yz(X,e.type).size),[X,e.type]),de=(0,l().K8)((()=>{if(!F||t)return null;if(!K)return null;const e=[];let i=[];const r=L().Ot();let o;return X.forEach((({activity:t,notificationStore:a},s,d)=>{const l=Number(a.getEndTime()),c=r.findIndex((e=>{const{cutoffTime:t}=e;return void 0===t||t<=l}));if(c!==o){const t=r[c].name;e.push((0,Y.jsx)("div",{children:i},`${t}-section-name`));const a=R&&void 0===o?R():void 0;i=[(0,Y.jsxs)(n.Fragment,{children:[1!==e.length?(0,Y.jsx)("div",{style:{height:8}}):void 0,(0,Y.jsx)(Z,{groupName:t,actions:a})]},`${t}-inbox-group-section`)],o=c}if(a.isGroupedNotification())i.push((0,Y.jsx)(C().Z,{index:s,children:(0,Y.jsx)(U,{notificationStore:a,isLast:!1,source:b,tab:j})},a.id));else if(t){const e=a.getValue();e&&i.push((0,Y.jsx)(C().Z,{index:s,children:(0,Y.jsx)(k,{activity:t,rootStore:F,isLast:!1,source:b,tab:j,notification:e})},a.id))}})),e.push((0,Y.jsx)("div",{children:i},"time-grouping")),e}),[F,t,K,X,b,j,R]),le=(0,u().fJ)(_);(0,n.useEffect)((()=>{if(!F)return;!function(e,t,i){const n=e.filter((e=>!e.getRead()));0!==n.length&&(v().log({level:"warning",from:"NotificationInbox",type:"invalidNotificationData",data:{ids:n.map((e=>e.id))}}),q().createAndCommit({userAction:"NotificationUpdates.unreadNotificationNotRendered",environment:i,canUndo:!0,perform:e=>{for(const i of n){const n=i.getModel();n&&B().ZB({notification:n,rootStore:t,transaction:e,read:!0})}}}))}(ee,F,D);const e=X.some((({notificationStore:e})=>!e.getRead()&&!e.getVisited())),t=e&&X.some((({notificationStore:e})=>e.getRead()&&!e.getVisited()));switch(oe){case"unread_and_read":case"unread_only":N().Ay.setState({...$,currentTab:"mentions",isCurrentTabEmpty:se,containsBothReadAndUnreadNotifications:t,containsUnreadNotifications:e,showOnlyUnreadNotifications:"unread_only"===oe,unreadNotificationIds:[]});break;case"archived_only":N().Ay.setState({...$,isCurrentTabEmpty:se,currentTab:"archive"});break;case"all_updates":break;default:(0,w().HB)(oe)}}),[oe,$,se,X,F,D,ee]);const ce=(0,l().K8)((()=>z().A.getUnreadCountForSidebarSpace().mentions),[]),ue=(0,n.useRef)(!1);(0,n.useEffect)((()=>{!ue.current&&"unread_only"===oe&&se&&ce>0&&((0,r().u)({environment:D,event:{eventName:"inbox_unread_filter_empty_with_badge_count",eventProperties:{badge_count:ce}}}),ue.current=!0)}),[oe,se,D,ce]);const pe=te(p),fe=se&&R?R():void 0,he=se?fe?g&&(0,Y.jsxs)("div",{style:W.wrapper,children:[(0,Y.jsx)("div",{style:W.inlineActionsRow,children:fe}),g]}):g:void 0;return!F||t?(0,Y.jsx)("div",{style:pe,children:(0,Y.jsx)(S().sA,{defaultMessage:"Something went wrong.",id:"notificationUpdates.unknownErrorMessage"})}):K&&"resolved"===le.status?(0,Y.jsxs)("div",{style:se?pe:ae(p),children:[he,(0,Y.jsx)(A().X,{children:(0,Y.jsx)("section",{role:"feed",className:"notranslate",children:de})}),(0,Y.jsx)(h().A,{onChange:e=>{if(!(H??(s().A.isMobile||"closed"!==L().I6())))return null;e<200&&ne>=T&&M(ne+J)}})]}):(0,Y.jsx)("div",{style:ae(p),children:(0,Y.jsx)(G().J,{areaHeight:window.innerHeight})})}function re(e){const t=(0,d().v3)();return(0,n.useEffect)((()=>{void 0!==e.requestId&&function(e,t){if(!(e in F))return;const i=F[e];if(i.measured)return;i.measured=!0;const{startTime:n,size:r,type:o}=i;D().default.measure({metricName:"notification_render",startTime:n},{environment:t,data:{size:r,type:o}})}(e.requestId,t)}),[e.requestId,t]),(0,Y.jsx)(Y.Fragment,{children:e.children})}function oe(e){const{type:t,empty:i,source:r,tab:a,size:s,setSize:c,scrolledToTop:u,checkpoint:p,renderFirstGroupActions:f,isContainerOpen:h}=e,m=(0,d().v3)(),{currentUserStore:v,currentSpaceStore:y,currentSpaceViewStore:x,currentUserRootStore:S}=(0,l().K8)((()=>{const{currentUserStore:e,sidebarSpaceStore:t,sidebarSpaceViewStore:i,currentUserRootStore:n}=o().default.state;return{currentUserStore:e,currentSpaceStore:t,currentSpaceViewStore:i,currentUserRootStore:n}}),[]),b="unread_only"===(0,l().O$)(P().Iq),[I,A]=(0,n.useState)(p),C=(0,n.useMemo)((()=>function(e,t){switch(e){case"mentions":return t?"unread_only":"unread_and_read";case"archive":return"archived";default:(0,w().HB)(e)}}(t,b)),[t,b]),[_,M]=(0,g().Yb)((async()=>{if(!v||!y)return null;if((0,R().o)(x)&&S){const e=(0,O().f)({currentUserRootStore:S}).map((e=>e.getSpaceId()));return async function(e){const{environment:t,userId:i,spaceIds:n,size:r,type:o,requestType:a}=e,s=N().Ay.startLoading();W(s,{size:r,type:o});const d=await(0,j().lX)(n,10,(e=>T().callCellCompatibleApi({eventName:"getNotificationLog",environment:t,data:{spaceId:e,size:r,type:a},userId:i,cellNavigation:{spaceId:e}})));N().Ay.endLoading(s);return{notificationIds:d.flatMap((e=>"failed"===e.type?[]:e.data.notificationIds)),requestId:s}}({environment:m,userId:v.id,spaceIds:e,requestType:C,size:s,type:t})}return async function(e){const{environment:t,userId:i,spaceId:n,size:r,type:o,requestType:a}=e,s=N().Ay.startLoading();W(s,{size:r,type:o});const d=await T().callCellCompatibleApi({eventName:"getNotificationLog",environment:t,data:{spaceId:n,size:r,type:a},userId:i,cellNavigation:{spaceId:n}});if(N().Ay.endLoading(s),"failed"===d.type)throw d.error;return{notificationIds:d.data.notificationIds,requestId:s}}({environment:m,userId:v.id,spaceId:y.id,requestType:C,size:s,type:t})}),[y,x,v,S,m,C,s,t],{throttle:1e3});if((0,n.useEffect)((()=>{p!==I&&(M(),A(p))}),[p,I,M]),!v||!y||!_)return null;const k=y.id,U=v.id,{value:E,error:z}=_,q={spaceId:k,userId:U,type:t};return H().setState({request:q,result:null==E?void 0:E.notificationIds}),(0,Y.jsx)(re,{requestId:null==E?void 0:E.requestId,children:(0,Y.jsx)(ne,{type:t,requestType:C,empty:i,source:r,tab:a,size:s,setSize:c,request:q,error:z,result:null==E?void 0:E.notificationIds,scrolledToTop:u,renderFirstGroupActions:f,isContainerOpen:h})})}function ae(e){return{minHeight:s().A.isMobile||"mentions"===e?void 0:"75vh"}}},436525:(e,t,i)=>{i.d(t,{D:()=>u});var n=i(296540),r=()=>i(59226),o=()=>i(484714),a=()=>i(79926),s=()=>i(562984),d=()=>i(742734),l=()=>i(141465),c=i(474848);function u({userStore:e,suppressMouse:t,children:i,spaceStore:u}){const p=(0,n.useRef)(null),f=(0,d().E)({spaceStore:u,viewedUserId:null==e?void 0:e.id}),h=(0,r().X)("prefetch_extended_user_profiles"),m=f&&h,v=(0,a().fJ)(s().u.extendedUserProfileActions,{disabled:!m}),y=(0,o().v3)();(0,n.useEffect)((()=>{m&&"resolved"===v.status&&null!=e&&e.id&&u&&null!=u&&u.userId&&v.value.prefetchExtendedUserProfiles({spaceStore:u,actorUserId:u.userId,viewedUserIds:[e.id]},y)}),[m,null==e?void 0:e.id,u,f,y,v]);const g=(0,n.useCallback)((()=>{p.current&&e&&u&&!t&&l().A.setState({type:"user",store:e,domRect:p.current.getBoundingClientRect(),spaceStore:u})}),[e,u,t]),x=(0,n.useCallback)((()=>{l().A.setState(void 0)}),[]);return e&&f?(0,c.jsx)("div",{ref:p,onMouseEnter:f?g:void 0,onMouseLeave:f?x:void 0,children:i}):i}},453697:(e,t,i)=>{i.d(t,{A:()=>p,n:()=>u});var n=i(296540),r=()=>i(590526),o=()=>i(401497),a=()=>i(849255),s=()=>i(807449),d=()=>i(798880),l=()=>i(100622),c=i(474848);function u(e){return(0,o().IS)((()=>({tooltipTextStyle:{color:l().Tj.text.inverseSecondary},tooltipAvatarContainer:{display:"flex",alignItems:"center",marginInlineEnd:8},tooltipContainer:{display:"flex",flexDirection:"row",padding:"4px 6px",alignItems:"center",...e},tooltipUserInfoContainer:{overflow:"hidden",textOverflow:"ellipsis"}})),[e])}const p=function(e){const{hasTooltip:t,showAvatarInTooltip:p,tooltipHeader:f,style:h,iconStyle:m,isOffline:v,borderStyle:y,avatarShouldShowShadow:g,initialOverrideStyle:x,tooltipOverrideStyle:S,userValue:b,userStore:I,avatar:j,type:w="avatar",delayThreshold:T,hasPersonHoverCard:A,avatarOutlineOffset:C}=e,N=(0,i(69708).tz)(),_=(0,r().O$)(i(907258).AppStoreSidebarSpaceStore),M=(0,i(792485).S)(),k=(0,r().K8)((()=>(0,i(876338).$)(M)??_),[M,_]),U=e.size??18,{initialStyle:E,avatarWrapStyle:O,avatarStyle:R,proxiedImageStyle:z,suspendedUserStyle:P}=(0,o().IS)((()=>({initialStyle:{boxSizing:"content-box",borderRadius:"100%",lineHeight:`${U}px`,width:U,height:U,overflow:"hidden",textAlign:"center",fontSize:Math.max(.4375*U,11),background:l().Tj.popoverBackground,userSelect:"none",WebkitUserSelect:"none",color:l().Tj.icon.secondary,opacity:v?.3:1,isolation:"auto",...m,...x},avatarWrapStyle:{background:l().Tj.background.primary,borderRadius:"100%",boxShadow:g?l().Tj.avatarBoxShadow:"none",outlineWidth:1,outlineStyle:y??"solid",outlineColor:l().Tj.border.secondaryTranslucent,outlineOffset:C??-1,...m},avatarStyle:{borderRadius:"100%",width:U,height:U,display:"flex",alignItems:"center",justifyContent:"center",userSelect:"none",WebkitUserSelect:"none",opacity:v?.3:1,...m},proxiedImageStyle:{width:U,height:U,...m},suspendedUserStyle:{boxSizing:"content-box",borderRadius:"100%",width:U-2,height:U-2,overflow:"hidden",background:l().Tj.suspendedUIUserAvatarBackground,userSelect:"none",WebkitUserSelect:"none",color:l().Tj.text.primary,opacity:v?.3:1,display:"flex",justifyContent:"center",alignItems:"center",...m}})),[x,g,y,v,U,m,C]),{tooltipTextStyle:q,tooltipAvatarContainer:B,tooltipContainer:V,tooltipUserInfoContainer:L}=u(S),H=(0,n.useMemo)((()=>I??(b?i(792071).Bj6.fromValue(d().oo,b):void 0)),[I,b]),D=(0,n.useMemo)((()=>H instanceof a().L?H:k&&H?a().L.createChildStore(k,{id:H.id,table:d().oo}):void 0),[H,k]),F=(0,r().K8)((()=>null==H?void 0:H.getFullName(N)),[H,N]),W=(0,r().K8)((()=>null==H?void 0:H.getDisplayName(N)),[H,N]),G=(0,r().K8)((()=>null==H?void 0:H.getEmail()),[H]),K=(0,r().K8)((()=>null==H?void 0:H.getProfilePhoto()),[H]),$=(0,r().K8)((()=>null==H?void 0:H.getIsSuspended()),[H]),Y=(0,i(742734).E)({spaceStore:k,viewedUserId:null==H?void 0:H.id})&&A,X=()=>e.defaultAvatar??(0,c.jsx)(s().I,{icon:i(360576).personFillSmallIcon,size:"sm",colorVariant:"primary"}),Z=(e,t,n)=>{if(!e)return X();const r={width:"100%",height:"100%",borderRadius:"100%",...n};return(0,c.jsx)(i(738471).A,{alt:t,src:e,enableLoadingShimmer:!0,style:r,placeholderStyle:r})},J=e=>(0,c.jsxs)("div",{style:V,children:[(0,c.jsx)("div",{style:B,children:te()}),(0,c.jsxs)("div",{style:L,children:[H?W:null==j?void 0:j.name,e?void 0:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("br",{}),H?(0,c.jsx)("span",{style:q,children:G}):null!=j&&j.email?(0,c.jsx)("span",{style:q,children:null==j?void 0:j.email}):null]})]})]}),Q=()=>p?J():(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{children:f}),W,(0,c.jsx)("br",{}),H?(0,c.jsx)("span",{style:q,children:G}):void 0]}),ee=e=>{const t=i(634201).PE(e)[0].toUpperCase();return(0,c.jsx)("div",{style:O,children:(0,c.jsx)("div",{style:E,children:(0,c.jsx)("div",{children:t})})})},te=()=>{if(H){if($)return(0,c.jsx)("div",{style:O,children:(0,c.jsx)("div",{style:P,children:(0,c.jsx)(s().I,{icon:i(947086).personSlashIcon,size:U-2,colorVariant:"tertiary"})})});if(K)return(0,c.jsx)("div",{style:R,children:(0,c.jsx)(i(360083).A,{stripGoogleIconQuery:!0,url:K,isAuthenticated:!1,width:Math.max(Number(z.width),120),render:(e,t)=>Z(t,F,O)})});if(F)return ee(F);if(G)return ee(G)}else if(j){if(!j.type&&j.avatarUrl)return(0,c.jsx)("div",{style:O,children:(0,c.jsx)("div",{style:R,children:Z(j.avatarUrl,j.name)})});if(j.name)return ee(j.name);if(j.email)return ee(j.email)}return X()};switch(w){case"avatar":{const e=(0,c.jsx)("div",{style:h,children:te()});return Y&&D&&k?(0,c.jsx)(i(436525).D,{userStore:D,spaceStore:k,children:e}):t?(0,c.jsx)(i(26697).m,{renderTooltip:Q,placement:"bottom",alignment:"start",delayThreshold:T,render:t=>(0,c.jsx)("div",{style:h,"aria-label":W,...t,children:e})}):e}case"avatar-name":case"avatar-name-email":return J("avatar-name"===w);default:(0,i(534177).HB)(w)}}},562984:(e,t,i)=>{i.d(t,{i:()=>o,u:()=>r});var n=()=>i(79926);const r={PersonProfileContainer:new(n().O2)("PersonProfileContainer",(()=>Promise.all([i.e(75134),i.e(71003),i.e(32370),i.e(26264),i.e(80229),i.e(71309),i.e(47431),i.e(14699),i.e(26126),i.e(95576),i.e(77093),i.e(26962),i.e(44632)]).then(i.bind(i,557558)))),extendedUserProfileActions:new(n().O2)("extendedUserProfileActions",(()=>i.e(63717).then(i.bind(i,260513))))},o=(0,n()._h)(r.PersonProfileContainer,(e=>e.PersonProfileContainer))},742734:(e,t,i)=>{i.d(t,{E:()=>a});var n=()=>i(230711),r=()=>i(590526),o=()=>i(304228);function a(e){const{spaceStore:t,viewedUserId:i}=e,a=(0,n().nB)(t),s=(0,n().V_)({spaceStore:t,userId:i});return(0,r().K8)((()=>(0,o().V)({spaceStore:t,actorRole:a,viewedRole:s})),[t,a,s])}},920498:(e,t,i)=>{i.r(t),i.d(t,{getState:()=>o,setState:()=>r});let n={};function r(e){n={...n,...e}}function o(){return n}},947086:(e,t,i)=>{i.r(t),i.d(t,{iconDefinition:()=>n,personSlashIcon:()=>r});i(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.31 2.31 14.13 16.25",svg:(0,i(474848).jsx)("path",{d:"M3.53 2.463a.626.626 0 0 1 .882.067l.032.038q.008.013.018.025l12.687 14.875q.089.101.203.156a.625.625 0 0 1-1.014.72l-.928-1.08a2.4 2.4 0 0 1-1.26.362h-8.3c-.68 0-1.328-.288-1.74-.768-.43-.501-.591-1.217-.23-1.923C4.899 12.945 7.3 11.63 10 11.63q.3 0 .593.021l-1.001-1.166a3.28 3.28 0 0 1-2.267-1.22c-.536-.669-.825-1.532-.886-2.453L3.463 3.345a.626.626 0 0 1 .067-.882M10 12.88c-2.335 0-4.245 1.138-5.007 2.625-.104.203-.071.379.066.54.157.182.449.33.79.33h8.301c.155 0 .3-.032.426-.082l-2.707-3.154a6.8 6.8 0 0 0-1.87-.26M10 2.375c1.137 0 2.055.469 2.675 1.241.607.757.899 1.766.9 2.824 0 1.058-.292 2.067-.9 2.825q-.213.263-.472.477l-.811-.951q.168-.138.307-.309c.392-.487.625-1.2.625-2.042S12.09 4.887 11.7 4.4c-.38-.473-.936-.775-1.7-.775-.762 0-1.32.302-1.7.774a2.4 2.4 0 0 0-.278.44l-.857-1.004q.076-.113.161-.219c.62-.772 1.538-1.241 2.675-1.241"})},r=(0,i(340498).wt)("personSlash",n,"default")},994006:(e,t,i)=>{i.d(t,{A:()=>r});i(296540);var n=i(474848);const r=function(e){const t={marginInlineEnd:e.avatarMarginRight??6,alignSelf:"center"},r={display:"flex",alignItems:"center",minWidth:0,...e.style},o=e.inline?{...t,width:"none",minHeight:"none"}:t,{userStore:a,avatarShouldShowShadow:s,avatarSize:d,hasTooltip:l,tooltipHeader:c,hasPersonHoverCard:u,spaceStore:p}=e,f=(0,i(69708).tz)(),h=(0,i(590526).K8)((()=>null==a?void 0:a.getDisplayName(f)),[a,f]),m=(0,n.jsxs)("div",{style:r,children:[(0,n.jsx)("div",{style:o,children:(0,n.jsx)(i(453697).A,{userStore:a,avatarShouldShowShadow:s,size:d,hasTooltip:l&&!u,hasPersonHoverCard:!1,tooltipHeader:c})}),(0,n.jsx)("div",{className:"notranslate",style:{...i(284371).RC},children:h})]});return u?(0,n.jsx)(i(436525).D,{userStore:a,spaceStore:p,children:m}):m}}}]);