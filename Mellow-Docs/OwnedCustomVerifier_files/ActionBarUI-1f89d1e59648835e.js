"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[32236,40454,92754,97651,99171],{12956:(e,t,o)=>{o.d(t,{u:()=>y});o(296540);var n=()=>o(383036),a=()=>o(26697),i=()=>o(81068),r=()=>o(575143),s=()=>o(662971),l=()=>o(484714),c=()=>o(590526),d=()=>o(283163),u=()=>o(245720),p=()=>o(546926),m=()=>o(890492),g=()=>o(69708),f=()=>o(636714),h=o(474848);function v(e){const{context:t,extensionMenuParent:o,actionMenuListParent:n,popupEvents:a,displayName:i,width:r,initialFocus:s,subActions:v}=e,{isPhone:b}=(0,l().Y0)(),y=(0,p().Tf)();let x;x=b?y?{menuType:p().gu.Modal,onClickLeft:o.close,left:(0,h.jsx)(d().h,{}),enableMobileRefresh:y,paddingTop:10,title:(0,h.jsx)(g().sA,{...i}),...a}:{menuType:p().gu.Modal,right:(0,h.jsx)(g().sA,{...u().W.done}),onClickRight:o.close,...a}:{menuType:p().gu.Popup,width:r??220,...a};const k=(0,c().K8)((()=>v(t)),[t,v]);return(0,h.jsx)(m().A,{...x,children:(0,h.jsx)(f().A,{initialFocus:s??0,context:t,sections:k,onAccept:n.onAccept})})}var b=()=>o(267271);function y(e){const{key:t,displayName:o,displayNameInterpolatedValues:l,subTitle:c,analyticsName:d,validators:u,subActions:p,collapseSubActionsIntoParent:m,hideSubActions:g,svg:f,icon:y,right:x,rightStyle:k,renderTooltip:w,disableTooltip:S,tooltipPlacement:A,width:M,initialFocus:I,clientSkill:C,fuzzySearchKeywordsArray:_,disabled:B,bottomSheetInitialState:j}=e,L=(0,b().Ls)({clientSkill:C,key:`extension ${t}`,displayName:o,displayNameInterpolatedValues:l,analyticsName:d,validators:u,subActions:p,collapseSubActionsIntoParent:m,hideSubActions:g,fuzzySearchKeywordsArray:_,closeParentMenu:!0,disabled:B,action:()=>{},render:(t,l,d)=>(0,h.jsx)(a().m,{render:a=>{var u;const m=null===(u=e.disabled)||void 0===u?void 0:u.call(e,l);return(0,h.jsx)(s().A,{...t,disabled:m,disabledFeedback:m,renderOrigin:(e,t)=>{const o={...(0,n().A)(e,a),title:c?(0,h.jsx)(b().fh,{subTitle:c(l),children:L.displayName}):L.displayName,right:x,rightStyle:k};return f?(0,h.jsx)(r().A,{...o,svg:f,ref:t}):(0,h.jsx)(i().A,{...o,icon:y,ref:t})},onFocus:d.onFocus,renderExtension:(e,t)=>(0,h.jsx)(v,{context:l,extensionMenuParent:t,actionMenuListParent:d,popupEvents:e,displayName:o,width:M,initialFocus:I,subActions:p}),bottomSheetInitialState:j})},renderTooltip:()=>(0,h.jsx)("div",{style:b().FG,children:null==w?void 0:w({context:l,title:L.displayName})}),disableTooltip:!w||(null==S?void 0:S(l)),placement:A})});return L}},24126:(e,t,o)=>{o.d(t,{c:()=>a});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.9 2.75 12.18 14.49",svg:(0,o(474848).jsx)("path",{d:"M12.626 2.768a.625.625 0 0 1 0 1.224l-.126.013h-.125v4.794l3.366 5.159c.893 1.369-.03 3.17-1.623 3.281l-.156.006H6.039c-1.688 0-2.703-1.873-1.78-3.287l3.366-5.157V4.005H7.5a.625.625 0 0 1 0-1.25h5zM8.875 9.173l-.102.156-1.567 2.401h5.589l-1.569-2.403-.101-.156V4.005h-2.25z"})},a=(0,o(340498).wt)("beaker",n,"default")},39421:(e,t,o)=>{o.r(t),o.d(t,{AltTextActionBar:()=>v});var n=o(296540),a=()=>o(484714),i=()=>o(401497),r=()=>o(882722),s=o(474848);const l={viewBox:"0 0 16 16",fittedViewBox:"0.57 4.65 14.86 6.7",svg:(0,s.jsx)("path",{d:"M3.34 4.659a.82.82 0 0 0-.765.533L.614 10.499a.625.625 0 1 0 1.172.434l.519-1.403h2.071l.519 1.403a.625.625 0 1 0 1.172-.434L4.106 5.192a.82.82 0 0 0-.765-.533m0 2.068.574 1.553H2.767zm4.16-2.068a.625.625 0 0 0-.625.625v5.432c0 .345.28.625.625.625h3.018a.625.625 0 0 0 0-1.25H8.126V5.284a.625.625 0 0 0-.625-.625m3.019 0a.625.625 0 1 0 0 1.25h1.515v4.807a.625.625 0 0 0 1.25 0V5.91H14.8a.625.625 0 1 0 0-1.25z"})},c=(0,o(340498).wt)("textAltSmall",l,"small");var d=()=>o(69708),u=()=>o(100622),p=()=>o(580050),m=()=>o(53436),g=()=>o(326496),f=()=>o(893497);const h=(0,d().YK)({altTextTooltipView:{id:"AltTextActionBar.tooltip.viewAltText",defaultMessage:"Click to view alt text"},altTextTooltipEdit:{id:"AltTextActionBar.tooltip.editAltText",defaultMessage:"Click to view and edit alt text"}});function v(e){const{store:t,altText:o,hideActions:l,canEdit:v,canEditNavigableAncestor:b}=e,y=(0,d().tz)(),x=(0,a().v3)(),k=(0,n.useCallback)((()=>{(0,p().a)({blockStore:t,entrypoint:"block_button",environment:x})}),[x,t]),w=(0,i().IS)((()=>({wrapper:{position:"absolute",zIndex:2,bottom:4,insetInlineEnd:4},tooltipText:{overflow:"hidden",textOverflow:"ellipsis"},tooltipSubtext:{color:u().Tj.text.inverseSecondary}})),[]),S=v&&b?h.altTextTooltipEdit:h.altTextTooltipView,A=Boolean(o)&&!l;return(0,s.jsx)(f().L,{visible:A,style:w.wrapper,children:(0,s.jsx)(m().E,{children:(0,s.jsx)(g().e,{className:r().bmm,"aria-label":y.formatMessage(S),onClick:k,tooltipPlacement:"bottom",iconLeading:c,tooltip:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:w.tooltipText,children:o}),(0,s.jsx)("div",{style:w.tooltipSubtext,children:(0,s.jsx)(d().sA,{...S})})]})})})})}},93078:(e,t,o)=>{o.r(t),o.d(t,{AnimatedCodeBlockActionBar:()=>le});var n=o(296540),a=()=>o(726637),i=()=>o(819121),r=()=>o(590526),s=()=>o(401497),l=()=>o(893497),c=(o(581454),()=>o(242422)),d=()=>o(484714),u=()=>o(792485),p=()=>o(985996),m=()=>o(249046),g=()=>o(30537),f=()=>o(250910),h=()=>o(807449),v=()=>o(546926),b=()=>o(890492),y=()=>o(81068),x=()=>o(791177),k=()=>o(736847),w=()=>o(15440),S=()=>o(324254),A=()=>o(449445),M=()=>o(111996),I=()=>o(29037),C=()=>o(476195),_=()=>o(627503),B=()=>o(506290),j=()=>o(692797),L=o(474848);const T={viewBox:"0 0 16 16",fittedViewBox:"3.37 2.12 9.25 11.75",svg:(0,L.jsx)("path",{d:"M5.25 2.125c-1.036 0-1.875.84-1.875 1.875v8c0 1.036.84 1.875 1.875 1.875h5.5c1.036 0 1.875-.84 1.875-1.875V4c0-1.036-.84-1.875-1.875-1.875zM4.625 4c0-.345.28-.625.625-.625h5.5c.345 0 .625.28.625.625v3.375h-6.75zm0 8V8.625h6.75V12c0 .345-.28.625-.625.625h-5.5A.625.625 0 0 1 4.625 12"})},E=(0,o(340498).wt)("rectangleSplit2VerticalSmall",T,"small");var F=()=>o(763884),P=()=>o(979004),D=()=>o(69708),R=()=>o(496603),z=()=>o(534177),N=()=>o(636714),V=()=>o(267271),O=()=>o(914577),K=()=>o(675925),U=()=>o(53436),W=()=>o(326496),H=()=>o(908759),G=()=>o(724015),q=()=>o(419357),Y=()=>o(36590),$=()=>o(496071),Q=()=>o(518489),X=()=>o(260850),Z=()=>o(547149),J=()=>o(535445);const ee=(0,D().YK)({actionBarAriaLabel:{id:"CodeBlockActionBar.ariaLabel",defaultMessage:"Code block action bar"},languageButtonAriaLabel:{id:"CodeBlockLanguageActionBar.language.ariaLabel",defaultMessage:"Open language dropdown"},languageDropdownTitle:{id:"CodeBlockLanguageActionBar.language.dropdown.title",defaultMessage:"Language"},languageDropdownButtonLabel:{id:"CodeBlockLanguageActionBar.language.dropdown.button.label",defaultMessage:"Done"},previewFormatButtonAriaLabel:{id:"CodeBlockLanguageActionBar.previewFormat.ariaLabel",defaultMessage:"Open language preview format dropdown"},previewFormatButtonTooltip:{id:"CodeBlockLanguageActionBar.previewFormat.tooltip",defaultMessage:"Display"},previewFormatCodeAriaLabel:{id:"CodeBlockLanguageActionBar.previewFormat.code.ariaLabel",defaultMessage:"Show only code and hide preview"},previewFormatPreviewAriaLabel:{id:"CodeBlockLanguageActionBar.previewFormat.preview.ariaLabel",defaultMessage:"Show only preview and hide code"},previewFormatSplitAriaLabel:{id:"CodeBlockLanguageActionBar.previewFormat.split.ariaLabel",defaultMessage:"Show code and preview"},copyAriaLabel:{id:"CodeBlockActionBar.copy.ariaLabel",defaultMessage:"Copy code to clipboard"},copyTooltip:{id:"CodeBlockActionBar.copy.tooltip",defaultMessage:"Copy"},captionAriaLabel:{id:"CodeBlockActionBar.caption.ariaLabel",defaultMessage:"Add a caption"},captionTooltip:{id:"CodeBlockActionBar.caption.tooltip",defaultMessage:"Caption"},expandAriaLabel:{id:"CodeBlockActionBar.expand.ariaLabel",defaultMessage:"Expand diagram"},expandTooltip:{id:"CodeBlockActionBar.expand.tooltip",defaultMessage:"Expand diagram"},downloadDiagramAriaLabel:{id:"CodeBlockActionBar.downloadDiagram.ariaLabel",defaultMessage:"Download diagram as JPEG"},downloadDiagramTooltip:{id:"CodeBlockActionBar.downloadDiagram.tooltip",defaultMessage:"Download image"}});function te(e){const{store:t,blockResizerStore:o,language:i,codePreviewFormat:r,canEdit:l,disabled:c,diagramContainer:u}=e,p=(0,D().tz)(),m=(0,d().Y0)(),g=(0,s().eP)(),f=(0,d().v3)(),h=a().A.isMobile&&!m.isTablet,v=(0,J().l)({store:t,blockResizerStore:o}),b=!c&&l,y="more_only"!==v,x=!h&&"more_only"!==v,k=!h&&b&&"all"===v,S=Boolean(u)&&!h&&"all"===v,M=!a().A.isMobile&&!h&&"all"===v,I=(0,n.useCallback)((()=>{if(!u)return;const e=u.querySelector("svg");return e&&e instanceof SVGSVGElement?e:void 0}),[u]),C=(0,n.useCallback)((()=>{const e=I();if(!e)return;const t="dark"===g?"#191919":"#ffffff";return(0,$().l8)({svgElement:e,padding:40,backgroundColor:t})}),[I,g]),_=(0,n.useCallback)((async()=>{const e=C();if(!e)return;const{svgText:t,width:o,height:n}=e,a=(0,$().r1)(t),i="undefined"!=typeof window&&"number"==typeof window.devicePixelRatio?Math.min(2,window.devicePixelRatio):1;return await(0,$().Zu)({svgText:a,width:o,height:n,mimeType:"image/jpeg",quality:.92,pixelRatio:i})}),[C]),B=(0,n.useCallback)((async()=>{try{const e=await _();if(!e)return;(0,$().WN)({blob:e,filename:"diagram.jpg"})}catch{const e=C();if(!e)return;(0,$().WN)({blob:new Blob([e.svgText],{type:"image/svg+xml"}),filename:"diagram.svg"})}}),[_,C]);return(0,L.jsxs)(U().E,{"aria-label":p.formatMessage(ee.actionBarAriaLabel),children:[y?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(oe,{store:t,language:i,canUpdate:b}),(0,L.jsx)(G().b,{}),(0,w().bM)(i)?(0,L.jsx)(ae,{store:t,codePreviewFormat:r}):void 0]}):void 0,S?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(W().e,{"aria-label":p.formatMessage(ee.expandAriaLabel),tooltip:p.formatMessage(ee.expandTooltip),iconLeading:j().W,onClick:()=>{u&&(0,Y().p)({container:u,environment:f,themeMode:g})}}),M?(0,L.jsx)(W().e,{"aria-label":p.formatMessage(ee.downloadDiagramAriaLabel),tooltip:p.formatMessage(ee.downloadDiagramTooltip),iconLeading:A().arrowLineDownSmallIcon,onClick:B}):void 0]}):void 0,x?(0,L.jsx)(re,{store:t}):void 0,k?(0,L.jsx)(se,{store:t}):void 0,(0,L.jsx)(H().h,{store:t})]})}function oe(e){const{store:t,language:o,canUpdate:n}=e,i=(0,D().tz)();return(0,L.jsx)(f().A,{popupType:a().A.isMobile?g().n.BottomSheet:g().n.Popup,originGap:8,disablePopup:!n,renderOrigin:e=>(0,L.jsx)(W().e,{...e,"aria-label":i.formatMessage(ee.languageButtonAriaLabel),disabled:!n,iconTrailing:n?S().arrowChevronSingleDownSmallIcon:void 0,children:o}),render:e=>(0,L.jsx)(ne,{store:t,language:o,onClose:e.close})})}function ne(e){const{store:t,language:o,onClose:i}=e,s=(0,d().v3)(),l=(0,D().tz)(),[m,g]=(0,x().$)(),[f,S]=(0,n.useState)(""),A=(0,n.useCallback)((e=>{S(e.target.value)}),[]),M=(0,n.useCallback)((e=>{Z().createAndCommit({userAction:"CodeBlock.setPersistedLanguage",environment:s,canUndo:!0,perform:o=>{O().IA({blocks:[t],language:e,transaction:o})}}),F().K.set({userId:s.currentUser.id,key:p().j.localLanguagePreferenceKey,value:e})}),[s,t]),C=(0,r().K8)((()=>(0,w().qX)().forGates(c().default)),[]),_=(0,n.useMemo)((()=>{if(f)return 0;const e=C.findIndex((e=>e.name===o));return-1===e?0:e}),[C,f,o]),B=(0,n.useMemo)((()=>(0,R().Ul)(C.map((e=>{const t=l.formatMessage(P().languageModeMessages[e.name]);return{key:e.name,displayName:t,analyticsName:e.name,searchName:e.fuzzySearchKeywords?l.formatMessage(e.fuzzySearchKeywords):void 0,render:n=>(0,L.jsx)(y().A,{...n,title:t,right:e.name===o?(0,L.jsx)(h().I,{icon:I().checkmarkIcon}):void 0}),action:()=>M(e.name),closeParentMenu:!0}})),(e=>{var t;return null===(t=e.displayName)||void 0===t?void 0:t.toLowerCase()}))),[l,M,C,o]),j=(0,n.useMemo)((()=>a().A.isMobile?{menuType:v().gu.Modal,title:(0,L.jsx)(D().sA,{...ee.languageDropdownTitle}),right:(0,L.jsx)(D().sA,{...ee.languageDropdownButtonLabel}),onClickRight:i}:{menuType:v().gu.Popup,width:240,maxHeight:"50vh"}),[i]),T=(0,u().S)();return(0,L.jsx)(b().A,{...j,header:(0,L.jsx)(k().A,{isInput:!0,children:(0,L.jsx)(q().Ay,{value:f,onChange:A,focus:!a().A.isMobile||void 0,placeholder:l.formatMessage(V().AY.searchPlaceholder),focusAfterAnimation:!0,...m})}),children:(0,L.jsx)(N().A,{filter:f,context:{blocks:[],environment:s,publicEditMode:void 0,analyticsFrom:"code_block_language_menu",pageContext:T},sections:[{key:0,render:e=>(0,L.jsx)(k().A,{...e}),actions:B}],initialFocus:_,comboboxProps:g,onAccept:i})})}function ae(e){const{store:t,codePreviewFormat:o}=e,a=(0,D().tz)(),i=(0,d().v3)(),r=(0,n.useCallback)((e=>{O().s9({environment:i,blocks:[t],previewFormat:e})}),[i,t]);return(0,L.jsx)(f().A,{popupType:g().n.Popup,alignmentToOrigin:"center",popupWrapStyle:{borderRadius:6,padding:2},originGap:8,renderOrigin:e=>(0,L.jsx)(W().e,{...e,"aria-label":a.formatMessage(ee.previewFormatButtonAriaLabel),iconLeading:ie(o),tooltip:a.formatMessage(ee.previewFormatButtonTooltip)}),render:e=>{const t=t=>{r(t),e.close()};return(0,L.jsxs)(m().Ye,{alignItems:"center",children:[(0,L.jsx)(W().e,{"aria-label":a.formatMessage(ee.previewFormatCodeAriaLabel),iconLeading:ie("code"),hovered:"code"===o,tooltip:a.formatMessage(V().AY.showOnlyCodeFormat),onClick:()=>t("code")}),(0,L.jsx)(G().b,{}),(0,L.jsx)(W().e,{"aria-label":a.formatMessage(ee.previewFormatPreviewAriaLabel),iconLeading:ie("preview"),hovered:"preview"===o,tooltip:a.formatMessage(V().AY.showCodePreviewFormat),onClick:()=>t("preview")}),(0,L.jsx)(G().b,{}),(0,L.jsx)(W().e,{"aria-label":a.formatMessage(ee.previewFormatSplitAriaLabel),iconLeading:ie("split_view"),hovered:"split_view"===o,tooltip:a.formatMessage(V().AY.showSplitViewFormat),onClick:()=>t("split_view")})]})}})}function ie(e){return"code"===e?C().codeSmallIcon:"preview"===e?B().F:"split_view"===e?E:void(0,z().HB)(e)}function re(e){const{store:t}=e,o=(0,D().tz)(),a=(0,d().v3)(),i=(0,n.useCallback)((()=>{(0,K().o)(a,{action:"copy_text",block_type:"code",from:"code_block_actions"},(async e=>{await O().t({codeBlockStore:t,environment:a}),e()}))}),[a,t]);return(0,L.jsx)(W().e,{"aria-label":o.formatMessage(ee.copyAriaLabel),onClick:i,iconLeading:_().a,tooltip:o.formatMessage(ee.copyTooltip)})}function se(e){const{store:t}=e,o=(0,D().tz)(),a=(0,d().v3)(),i=(0,n.useCallback)((()=>{(0,K().o)(a,{action:"init_edit_caption",block_type:"code",from:"code_block_actions"},(e=>{const o=t.getPropertyStore("caption");(0,Q().h)({environment:a,store:t}),(0,X().z)({store:o}),e()}))}),[a,t]);return(0,L.jsx)(W().e,{"aria-label":o.formatMessage(ee.captionAriaLabel),onClick:i,iconLeading:M().l,tooltip:o.formatMessage(ee.captionTooltip)})}function le(e){const{store:t,blockResizerStore:o,language:c,codePreviewFormat:d,canEdit:u,hovered:p,disabled:m,diagramContainer:g}=e,f=(0,r().K8)((()=>o.state.dragging),[o]),[h,v]=(0,n.useState)(!1),b=(0,n.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,i().p)(t)&&v(!0)}),[]),y=(0,n.useCallback)((()=>{v(!1)}),[]),x=(0,s().IS)((()=>({wrapper:{position:"absolute",zIndex:2,top:4,insetInlineEnd:4}})),[]),k=!f&&(p||h||a().A.isMobile);return(0,L.jsx)(l().L,{skip:a().A.isMobile,visible:k,style:x.wrapper,children:(0,L.jsx)("div",{onFocus:b,onBlur:y,children:(0,L.jsx)(te,{store:t,blockResizerStore:o,language:c,codePreviewFormat:d,canEdit:u,disabled:m,diagramContainer:g})})})}},98205:(e,t,o)=>{o.d(t,{DG:()=>p,Yg:()=>d,Yx:()=>m,_N:()=>u,fY:()=>g,h8:()=>f,wG:()=>c});o(944114),o(898992),o(803949);var n=()=>o(467947),a=()=>o(430896),i=()=>o(31503),r=()=>o(500993),s=()=>o(37165),l=()=>o(131448);const c="forms_add_conditional_logic_tooltip";function d({currentModule:e,nestedModules:t,includePlaceholders:o}){const n=[{currentModule:e,depth:1}],a=[];let i=0;for(;n.length>0;){const e=n.shift();if(!e)continue;const{currentModule:s,depth:l}=e;var r;if(a.push(s),l>i&&(i=l),"formQuestion"===s.type)null===(r=s.conditionalGroups)||void 0===r||r.forEach((e=>{const a=e.children??[];for(const i of a){const e=t[i];e&&("formQuestion"===e.type||o&&"placeholder"===e.type)&&n.push({currentModule:e,depth:l+1})}}))}return{formQuestionDescendants:a,maxDepth:i}}function u(e,t,o){if(!e)return;const n=(0,r().A)(e,t.getModules());if(!n)return;const i=a().c.createChildStore(t,{table:s().lo,id:n.module.formQuestionId,spaceId:t.getSpaceId()??""}).getPropertyId();if(!i)return;const l=o.getSchema()[i],c=null==l?void 0:l.type;return"select"===c||"multi_select"===c||"checkbox"===c?c:void 0}function p({mouseEntered:e,currentQuestionModule:t,modulesByArea:o,featureAvailable:n,inputFocused:a,isDragging:r,showTutorialTooltip:s}){if(void 0===o)return!1;const l=(0,i().Cg)({moduleId:null==t?void 0:t.id,modulesByArea:o}).length>=i().mh,c=(e||s)&&!l&&!a&&!r;return c}function m(e){const{formQuestionId:t,formAddConditionalLogicTooltipStore:o}=e;if(n().A.state.open||!t||!o)return!1;if("multi_select"===e.type){const n=e.optionValue;if(!n||o.state.openTooltip!==g({formQuestionId:t,optionValue:n}))return!1}else if(o.state.openTooltip!==g({formQuestionId:t}))return!1;return l().default.isVisible(c)}function g({formQuestionId:e,optionValue:t}){return t?`fqid:${e} value:${t}`:`fqid:${e}`}function f(e,t){return`${e}:${t}`}},111996:(e,t,o)=>{o.d(t,{l:()=>a});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"2.87 2.12 10.97 11.76",svg:(0,o(474848).jsx)("path",{d:"M4.75 2.125c-1.036 0-1.875.84-1.875 1.875v3.5c0 1.036.84 1.875 1.875 1.875h5.5c1.036 0 1.875-.84 1.875-1.875V4c0-1.036-.84-1.875-1.875-1.875zM4.125 4c0-.345.28-.625.625-.625h5.5c.345 0 .625.28.625.625v3.5c0 .345-.28.625-.625.625h-5.5a.625.625 0 0 1-.625-.625zM3.5 10.375a.625.625 0 1 0 0 1.25h9.72a.625.625 0 1 0 0-1.25zm0 2.25a.625.625 0 1 0 0 1.25h6.84a.625.625 0 1 0 0-1.25z"})},a=(0,o(340498).wt)("captionSmall",n,"small")},148134:(e,t,o)=>{o.d(t,{Y:()=>a});class n extends(()=>o(757695))().Store{getInitialState(){return{open:!1,rect:o(587682).v_}}}const a=new n;(0,o(852832).exposeDebugValue)("ImageEditMenuStore",a)},166913:(e,t,o)=>{o.r(t),o.d(t,{AnimatedCoverImageActionBar:()=>j});var n=o(296540),a=()=>o(590526),i=()=>o(401497),r=()=>o(929219),s=()=>o(893497),l=()=>o(867772),c=()=>o(568365),d=()=>o(59226),u=()=>o(726637),p=()=>o(484714),m=()=>o(784489),g=()=>o(412237),f=()=>o(69708),h=()=>o(754858),v=()=>o(53436),b=()=>o(326496),y=()=>o(724015),x=()=>o(504023),k=()=>o(977872),w=()=>o(46986),S=()=>o(393686),A=o(474848);const M=(0,f().YK)({actionBarAriaLabel:{id:"CoverImageActionBar.ariaLabel",defaultMessage:"Cover image action bar"},generateAriaLabel:{id:"CoverImageActionBar.generateCoverImage.ariaLabel",defaultMessage:"Generate a cover image"},changeAriaLabel:{id:"CoverImageActionBar.changeCoverImage.ariaLabel",defaultMessage:"Update the page cover image"},repositionAriaLabel:{id:"CoverImageActionBar.repositionAriaLabel.ariaLabel",defaultMessage:"Reposition the cover image"},savePositionAriaLabel:{id:"CoverImageActionBar.savePositionAriaLabel.ariaLabel",defaultMessage:"Save the position of the cover image"},cancelPositionAriaLabel:{id:"CoverImageActionBar.cancelPositionAriaLabel.ariaLabel",defaultMessage:"Cancel the position change of the cover image"},generateError:{id:"CoverImageActionBar.generateError",defaultMessage:"Failed to generate cover image. Please try again."}});function I(e){const{store:t,mouseStore:o,...n}=e,i=(0,f().tz)(),r=(0,x().x)(t.id),s=(0,a().K8)((()=>(0,w().Vf)({spaceStore:t.getSpaceStore()})),[t]),l=(0,d().X)("auto_cover_generation");return r?null:(0,A.jsxs)(v().E,{"aria-label":i.formatMessage(M.actionBarAriaLabel),children:[n.isRepositioning?void 0:(0,A.jsxs)(A.Fragment,{children:[s&&l?(0,A.jsx)(C,{store:t,mouseStore:o}):void 0,(0,A.jsx)(_,{store:t,mouseStore:o})]}),u().A.isMobile?void 0:(0,A.jsx)(B,{...n})]})}function C(e){const{store:t,mouseStore:o}=e,a=(0,f().tz)(),i=(0,p().v3)(),r=(0,n.useCallback)((async()=>{const e=t.pointer.spaceId;if(!e)return;const n='Create a museum-quality cover artwork for this Notion page. Just give the artwork, don\'t show the museum. Step 1 — Understand the page: Read the page content and extract 3–5 core themes (concepts, mood, and one key metaphor). Do not quote or depict any proprietary text. Step 2 — Compose for a Notion cover (critical): Format: 16:9 wide banner Composition: strong focal point placed slightly off-center to the right, with generous negative space so page title remains readable Detail: medium detail, no clutter, no tiny busy textures Step 3 — Make it "museum-ready": Create an image that could plausibly hang in a contemporary museum: tasteful, intentional, and art-directed. Choose ONE art direction (pick the best fit for the content): Fine-art oil / acrylic with gallery lighting and subtle brush texture Modernist abstract (color fields, geometric tension, minimal forms) Surrealist conceptual scene (poetic, restrained, not kitschy) Photorealistic still life with dramatic but soft lighting Hard constraints (must follow): No text, letters, UI, watermarks, or logos No screenshots or interface elements.',r=Date.now();h().Rt(i,{source:"page_cover_button",duration_ms:0,status:"start"}),o.reset(),k().P.setBlockState(t.id,{prompt:n,source:"page_cover_button"});try{var s;const o=await h().a6({blockId:t.id,prompt:n,environment:i,spaceId:e,size:{width:1500,height:843},n:1,source:"page_cover_button"}),d=Date.now()-r,u=null==o||null===(s=o.images)||void 0===s?void 0:s[0];if(!o||o.error||!u){var l,c;h().Rt(i,{source:"page_cover_button",duration_ms:d,status:"error",error_code:(null==o||null===(l=o.error)||void 0===l?void 0:l.code)??"no_images",...null!=u&&u.model?{model:u.model}:{}}),k().P.setBlockState(t.id,void 0);const e=null!=o&&null!==(c=o.error)&&void 0!==c&&c.code?h().ys(o.error.code):a.formatMessage(M.generateError);return void(0,m().f)({item:{durationMs:"keep",label:e}})}h().Rt(i,{source:"page_cover_button",duration_ms:d,status:"success",...u.model?{model:u.model}:{}}),k().P.setBlockState(t.id,void 0),await S().A({environment:i,intl:a,store:t,imageUrl:u.url,callback:()=>{}})}catch{const e=Date.now()-r;h().Rt(i,{source:"page_cover_button",duration_ms:e,status:"error",error_code:"exception"}),k().P.setBlockState(t.id,void 0),(0,m().f)({item:{durationMs:"keep",label:a.formatMessage(M.generateError)}})}}),[t,o,a,i]);return(0,A.jsx)(b().e,{"aria-label":a.formatMessage(M.generateAriaLabel),onClick:r,iconLeading:g().aiFaceSmallIcon,children:(0,A.jsx)(f().sA,{id:"CoverImageActionBar.generateCoverImage.label",defaultMessage:"Generate cover"})})}function _(e){const{store:t,mouseStore:o}=e,a=(0,f().tz)(),i=(0,p().v3)(),r=(0,n.useCallback)((e=>{o.reset(),S().W({environment:i,intl:a,store:t,rect:e.currentTarget.getBoundingClientRect(),from:"cover_actions"})}),[i,a,t,o]);return(0,A.jsx)(b().e,{"aria-label":a.formatMessage(M.changeAriaLabel),onClick:r,children:(0,A.jsx)(f().sA,{id:"CoverImageActionBar.changeCoverImage.label",defaultMessage:"Change cover"})})}function B(e){const{isRepositioning:t,imageUrl:o,handleRepositionClick:a,handleSavePositionClick:i,handleCancelClick:r}=e,s=(0,f().tz)(),l=(0,n.useCallback)((e=>a(e,o)),[o,a]);return t?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(b().e,{"aria-label":s.formatMessage(M.savePositionAriaLabel),onClick:i,children:(0,A.jsx)(f().sA,{id:"CoverImageActionBar.savePositionAriaLabel.label",defaultMessage:"Save position"})}),(0,A.jsx)(b().e,{"aria-label":s.formatMessage(M.cancelPositionAriaLabel),onClick:r,children:(0,A.jsx)(f().sA,{id:"CoverImageActionBar.cancelPositionAriaLabel.label",defaultMessage:"Cancel"})})]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(y().b,{}),(0,A.jsx)(b().e,{"aria-label":s.formatMessage(M.repositionAriaLabel),onClick:l,children:(0,A.jsx)(f().sA,{id:"CoverImageActionBar.repositionAriaLabel.label",defaultMessage:"Reposition"})})]})}function j(e){const{store:t,visible:o,paddingLeft:n,paddingRight:d,...u}=e,p=(0,a().O$)(r().e),m=(0,a().K8)((()=>c().M.state.loadingMode),[]),g=(0,i().IS)((()=>({wrapper:{position:"absolute",top:12,insetInlineEnd:12}})),[]);return m===l().pF&&p?(0,A.jsx)(s().L,{visible:o,style:g.wrapper,children:(0,A.jsx)(I,{...u,store:t})}):null}},175882:(e,t,o)=>{o.r(t),o.d(t,{exclamationMarkTriangleSmallIcon:()=>i,iconDefinition:()=>a});o(296540);var n=o(474848);const a={viewBox:"0 0 16 16",fittedViewBox:"1.49 1.87 13.01 11.75",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M7.9 5.281a.625.625 0 0 0-.625.625v2.5a.625.625 0 0 0 1.25 0v-2.5a.625.625 0 0 0-.625-.625m0 4.7a.725.725 0 1 0 0 1.45.725.725 0 0 0 0-1.45"}),(0,n.jsx)("path",{d:"M9.58 2.788c-.702-1.217-2.458-1.217-3.16 0l-4.677 8.1c-.702 1.216.176 2.737 1.58 2.737h9.354c1.405 0 2.283-1.52 1.58-2.738zm-2.078.625a.575.575 0 0 1 .996 0l4.677 8.1a.575.575 0 0 1-.498.862H3.324a.575.575 0 0 1-.498-.863z"})]})},i=(0,o(340498).wt)("exclamationMarkTriangleSmall",a,"small")},207358:(e,t,o)=>{o.r(t),o.d(t,{AnimatedTransclusionActionBar:()=>X});var n=o(296540),a=()=>o(993905),i=()=>o(590526),r=()=>o(401497),s=()=>o(893497),l=(o(898992),o(672577),o(581454),()=>o(314529)),c=()=>o(59226),d=()=>o(908006),u=()=>o(484714),p=()=>o(929219),m=()=>o(128933),g=()=>o(86159),f=()=>o(249046),h=()=>o(250910),v=()=>o(807449),b=()=>o(324254),y=()=>o(607481),x=()=>o(627503),k=()=>o(175882),w=()=>o(433847),S=()=>o(68263),A=()=>o(69708),M=()=>o(884107),I=()=>o(942143),C=()=>o(499764),_=()=>o(232930),B=()=>o(747674),j=()=>o(53436),L=()=>o(326496),T=()=>o(908759),E=()=>o(724015),F=()=>o(996332),P=()=>o(546926),D=()=>o(493552),R=()=>o(890492),z=()=>o(736847),N=()=>o(584262),V=()=>o(566910),O=()=>o(100622),K=()=>o(492414),U=()=>o(255018),W=()=>o(16006),H=()=>o(962036),G=o(474848);function q(e){const{store:t,hasDifferingReadPermissionsFromSource:o}=e,n=(0,i().K8)((()=>t.getNavigableBlockStore()),[t]),a=(0,r().IS)((()=>({permissionsMenuItem:{background:O().Tj.sidebarSecondaryBackground},hideIcon:{marginTop:2}})),[]);return(0,G.jsxs)(R().A,{menuType:P().gu.Popup,width:400,children:[o&&n?(0,G.jsx)(z().A,{style:a.permissionsMenuItem,children:(0,G.jsxs)(f().Ye,{gap:8,style:{padding:"6px 8px"},children:[(0,G.jsx)(v().I,{icon:V().e,size:"sm",colorVariant:"primary",style:a.hideIcon}),(0,G.jsx)(D().D,{styleKey:"captionRegular",style:{flexGrow:1,minWidth:0},children:(0,G.jsx)("span",{style:{overflowWrap:"break-word"},children:(0,G.jsx)(A().sA,{defaultMessage:"Viewership permissions on this page are different from the original page <page></page>. Some users might not have access.",id:"BacklinksMenu.differingPermissionsWarning",values:{page:()=>(0,G.jsx)(Y,{sourceNavigableBlockStore:n})}})})})]})}):void 0,(0,G.jsx)(z().A,{title:(0,G.jsx)(A().sA,{defaultMessage:"Synced to",id:"BacklinksMenu.title"}),children:(0,G.jsx)(U().A,{type:"transclusion_container",store:t,originalTransclusionStore:t,disableArrow:!0})}),(0,G.jsx)(z().A,{topBorder:!0,children:(0,G.jsx)(H().g,{title:(0,G.jsx)(A().sA,{defaultMessage:"Learn more about Synced blocks",id:"BacklinksMenu.learnMore.label"}),href:(0,_().x)("guides.transclusions"),analyticsFrom:"transclusion_container_block"})})]})}function Y(e){const{sourceNavigableBlockStore:t}=e,o=(0,i().K8)((()=>(0,K().Ay)({store:t,fullyQualified:!1,pageVisitSource:N().y8.Breadcrumb})),[t]),n=(0,r().IS)((()=>({link:{color:O().Tj.text.secondary}})),[]);return(0,G.jsx)(F().Q,{underline:!0,inline:!0,href:o,style:n.link,children:(0,G.jsx)(W().A,{store:t,style:{display:"inline"},shouldWrap:!0,maxLength:30})})}const $=(0,A().YK)({actionBarAriaLabel:{id:"TransclusionActionBar.ariaLabel",defaultMessage:"Synced block actions"},backlinksButtonAriaLabel:{id:"TransclusionActionBar.backlinks.ariaLabel",defaultMessage:"Open backlinks"},copyButtonTooltip:{id:"TransclusionActionBar.copy.tooltip",defaultMessage:"Copy synced block"},copySuccessMessage:{defaultMessage:"Copied! Now paste in any page to sync content.",id:"TransclusionActionBar.copy.snackbar"}});function Q(e){const{store:t,referenceStore:o,numberOfBacklinks:a}=e,r=o||t,s=(0,n.useRef)(null),F=(0,u().v3)(),P=(0,A().tz)(),D=(0,n.useCallback)((()=>{(0,B().t)({environment:F,stores:[r]}),(0,l().DO_NOT_USE_trackLegacy)(F,"transclusion_container_open_backlinks",{from:"action_bar"})}),[F,r]),R=(0,c().X)("use_virtual_clipboard_for_programmatic_copies"),z=(0,n.useCallback)((async()=>{if(R)return await(0,I().i)({environment:F,contentStores:[r],parentStore:r,copiedMessageLabel:P.formatMessage($.copySuccessMessage)}),void(0,l().DO_NOT_USE_trackLegacy)(F,"transclusion_container_copy_button");(0,B().t)({environment:F,stores:[r]}),await d().default.afterNextFlush();const e=await M().R.clipboardActions.load(),t=t=>{var o;null===(o=t.stopImmediatePropagation)||void 0===o||o.call(t),e.copy({environment:F,event:t,disableSyncTextSelection:!0,markdownLinkifyIt:void 0})};window.addEventListener("copy",t,{capture:!0,once:!0});const o=s.current;o&&F.device.isSafari?(g().setOnNode(o,F.device),e.triggerBrowserCopy(),g().clear(F)):e.triggerBrowserCopy(),(0,l().DO_NOT_USE_trackLegacy)(F,"transclusion_container_copy_button"),m().D6({label:P.formatMessage($.copySuccessMessage),helpUrl:(0,_().x)("guides.transclusions")}),window.removeEventListener("copy",t,{capture:!0})}),[F,P,s,r,R]),N=(0,i().O$)(p().e),V=(0,i().K8)((()=>{if(!o||!t.canEdit()||!o.canEdit())return!1;const e=(0,C().i0)(t).map((({permissionItem:e})=>e)),n=(0,C().i0)(o).map((({permissionItem:e})=>e)),a=(0,w().ny)(e,n).created.find((e=>!(0,S().P3)(e)));return Boolean(a)}),[o,t]),O=a>0;return(0,G.jsxs)(j().E,{"aria-label":P.formatMessage($.actionBarAriaLabel),children:[(0,G.jsx)(h().A,{popupType:h().z.Popup,onClick:D,originGap:8,disablePopup:!N,renderOrigin:e=>(0,G.jsx)(L().e,{...e,"aria-label":P.formatMessage($.backlinksButtonAriaLabel),disabled:!N,iconLeading:O?y().K:void 0,iconTrailing:N?b().arrowChevronSingleDownSmallIcon:void 0,children:(0,G.jsxs)(f().Ye,{alignItems:"center",gap:4,children:[O?(0,G.jsx)(A().sA,{defaultMessage:"Synced to {numberOfBacklinks, plural, one {{numberOfBacklinks} other page} other {{numberOfBacklinks} other pages}}",id:"TransclusionActionBar.editing.multiple",values:{numberOfBacklinks:a}}):(0,G.jsx)(A().sA,{id:"TransclusionActionBar.editing.none",defaultMessage:"Editing original"}),V?(0,G.jsx)(v().I,{icon:k().exclamationMarkTriangleSmallIcon,size:"sm",colorPalette:"yellow",colorVariant:"accentPrimary"}):void 0]})}),render:()=>(0,G.jsx)(q,{store:t,hasDifferingReadPermissionsFromSource:V})}),(0,G.jsx)(E().b,{}),(0,G.jsx)("span",{ref:s,style:{height:"1px",width:"1px",position:"absolute"}}),(0,G.jsx)(L().e,{"aria-label":P.formatMessage($.copyButtonTooltip),onClick:z,iconLeading:x().a,tooltip:P.formatMessage($.copyButtonTooltip)}),(0,G.jsx)(T().h,{store:r})]})}function X(e){const{visible:t,onShow:o,onHide:n,numberOfBacklinksStore:l,...c}=e,d=(0,i().O$)(l),u=(0,r().IS)((()=>({wrapper:{position:"absolute",zIndex:1,top:-40,insetInlineEnd:-2}})),[]);return(0,G.jsx)(a().s,{allowSelectionWithin:!1,children:(0,G.jsx)(s().L,{visible:t,onShow:o,onHide:n,style:u.wrapper,children:(0,G.jsx)(Q,{...c,numberOfBacklinks:d})})})}},231536:(e,t,o)=>{o.d(t,{Y:()=>r,G:()=>i});var n=()=>o(534177);const a={clipboardActions:o(884107).R.clipboardActions,duplicationActions:o(855801).VI.duplicateActions,formulasModule:o(862292).T.formulas,markdownLinkifyIt:o(659602).g,tinyMceMicrosoftWordPasteFilter:o(335722).S};function i(...e){for(const t of e)a[t].load()}function r(e){const t=a[e].getLoadingState();if("idle"===t.status)i(e);else if("pending"===t.status||"rejected"===t.status);else{if("resolved"===t.status)return t.value;(0,n().HB)(t)}}},240485:(e,t,o)=>{o.r(t),o.d(t,{AnimatedFormBlockActionBar:()=>M});var n=o(296540),a=()=>o(726637),i=()=>o(401497),r=()=>o(893497),s=()=>o(484714),l=()=>o(590526),c=()=>o(584262),d=()=>o(703778),u=()=>o(523389),p=()=>o(69708),m=()=>o(884107),g=()=>o(857783),f=()=>o(53436),h=()=>o(326496),v=()=>o(411421),b=()=>o(908759),y=()=>o(465741),x=o(474848);const k=(0,p().YK)({actionBarAriaLabel:{id:"FormBlockActionBar.ariaLabel",defaultMessage:"Form block actions"},editLabel:{id:"FormBlockActionBar.edit.label",defaultMessage:"Edit form"},linkLabel:{id:"FormBlockActionBar.link.label",defaultMessage:"Copy link to form"}});function w(e){const{store:t,aliasStore:o}=e,n=(0,p().tz)(),i=(0,s().v3)(),r=(0,l().K8)((()=>i.currentUser.id===t.getCreatedById()&&!a().A.isMobile),[i.currentUser.id,t]),c=(0,l().K8)((()=>o.canComment()),[o]);return(0,x.jsxs)(f().E,{"aria-label":n.formatMessage(k.actionBarAriaLabel),children:[r?(0,x.jsx)(S,{store:t}):void 0,c?(0,x.jsx)(v().t,{store:o}):void 0,(0,x.jsx)(A,{store:t}),(0,x.jsx)(b().h,{store:o})]})}function S(e){const{store:t}=e,o=(0,p().tz)(),a=(0,s().v3)(),i=(0,n.useCallback)((()=>{const e=t.getFormBlockParentBlockStore();var o;e&&g().uK({environment:a,store:e,collectionViewId:null===(o=t.getParentStore())||void 0===o?void 0:o.id,pageVisitSource:c().y8.FormEmbed})}),[a,t]);return(0,x.jsx)(h().e,{"aria-label":o.formatMessage(k.editLabel),onClick:i,iconLeading:u().pencilLineSmallIcon,tooltip:o.formatMessage(k.editLabel)})}function A(e){const{store:t}=e,o=(0,p().tz)(),a=(0,s().v3)(),i=(0,n.useCallback)((async()=>{const e=(0,y().px)(t);(await m().R.clipboardActions.load()).copyWithToast(a,e)}),[a,t]);return(0,x.jsx)(h().e,{"aria-label":o.formatMessage(k.linkLabel),onClick:i,iconLeading:d().linkSmallIcon,tooltip:o.formatMessage(k.linkLabel)})}function M(e){const{visible:t,store:o,aliasStore:n}=e,s=(0,i().IS)((()=>({wrapper:{position:"absolute",zIndex:1,top:8,insetInlineEnd:8}})),[]);return(0,x.jsx)(r().L,{skip:a().A.isMobile,visible:t,style:s.wrapper,children:(0,x.jsx)(w,{store:o,aliasStore:n})})}},243331:(e,t,o)=>{o.d(t,{K_:()=>a,Lf:()=>r});var n=()=>o(206267);function a(){return{currentScreen:"none",status:"not_started",isBackendConnected:!1,externalSourceName:void 0,sessionId:n().JW(),analyticsFrom:"unknown",isConnected:!1,isPersonalAuthComplete:!1,isDisconnecting:!1,isLoaded:!1,isNotionMailProhibited:!1}}class i extends(()=>o(757695))().Store{getInitialState(){return a()}}const r=new i;(0,o(852832).exposeDebugValue)("notionMailAIConnectorStore",r)},245720:(e,t,o)=>{o.d(t,{W:()=>n});const n=(0,o(69708).YK)({done:{id:"modal.doneButton",defaultMessage:"Done"},cancel:{id:"modal.cancelButton",defaultMessage:"Cancel"},back:{id:"modal.backButton",defaultMessage:"Back"}})},246679:(e,t,o)=>{o.d(t,{VK:()=>a,gv:()=>r});var n=()=>o(206267);function a(){return{currentScreen:"none",status:"not_started",isBackendConnected:!1,externalSourceName:void 0,sessionId:n().JW(),analyticsFrom:"unknown",isConnected:!1,isPersonalAuthComplete:!1,isDisconnecting:!1,isLoaded:!1,isNotionCalendarProhibited:!1}}class i extends(()=>o(757695))().Store{getInitialState(){return a()}}const r=new i;(0,o(852832).exposeDebugValue)("notionCalendarAIConnectorStore",r)},255018:(e,t,o)=>{o.d(t,{A:()=>_});o(581454);var n=o(296540),a=()=>o(484714),i=()=>o(590526),r=()=>o(757695),s=()=>o(302501),l=()=>o(69708),c=()=>o(726637),d=()=>o(100622),u=()=>o(284371),p=()=>o(499764),m=()=>o(187820),g=()=>o(16006),f=(o(898992),o(354520),o(474848));const h=function({store:e,style:t}){const n=(0,i().K8)((()=>(0,o(371722).f)(e,{includeTeamHomeFeed:!1,includeDataSources:!0}).filter((e=>!(e instanceof o(350013).N)))),[e]);(0,i().K8)((()=>e.isNavigableBlock()),[e])&&n.shift(),n.reverse();const a=n.length;if(0===a)return null;a>2&&n.splice(1,n.length-2);const r=n.map((e=>(0,f.jsx)(y,{store:e},e.id)));a>2&&r.splice(1,0,(0,f.jsx)(b,{}));const l=(0,o(681873).G)(r,(e=>(0,f.jsx)(v,{},e)));return(0,f.jsx)(s().A,{isSecondaryColor:!0,isSmall:!0,style:t,children:l})};function v(){return(0,f.jsx)("span",{style:{paddingInlineStart:4,paddingInlineEnd:4},children:"/"})}function b(){return(0,f.jsx)("span",{children:"..."})}function y({store:e}){return(0,f.jsx)(g().A,{store:e,shouldWrap:!0,maxLength:20})}var x=()=>o(365136);const k=function({currentBlockStore:e,backlinkStore:t,scrollToBlockId:n,discussionId:r,showOriginalToken:s,disableCurrentPageToken:c,disableArrow:m}){const v=(0,a().v3)(),b=(0,i().K8)((()=>!(0,p().X9)(v,e)&&(0,p().X9)(v,t)),[v,e,t]),y=(0,i().O$)(o(907258).AppStoreMainEditorCurrentBlockStore),x=y&&y.id===t.id,k=(0,i().K8)((()=>(0,o(492414).Ay)({store:t,scrollToBlockId:n,discussionId:r,fullyQualified:!0,preferPublicLink:(0,o(466088).w)(v),pageVisitSource:o(584262).y8.LinkInPage})),[t,n,r,v]);return(0,f.jsx)(o(996332).Q,{href:k,external:!1,innerStyle:{paddingInlineStart:8,paddingInlineEnd:16},children:(0,f.jsx)(o(397300).Ay,{childrenStyle:{padding:"4px 2px"},alignment:"center",style:{marginBottom:2,marginInlineEnd:4},right:(0,f.jsxs)(f.Fragment,{children:[s?(0,f.jsx)("div",{style:S(v),children:(0,f.jsx)(l().sA,{defaultMessage:"Original",id:"backlink.originalTokenLabel"})}):void 0,x&&!c?(0,f.jsx)("div",{style:S(v),children:(0,f.jsx)(l().sA,{defaultMessage:"This page",id:"backlink.currentPageTokenLabel"})}):void 0]}),children:(0,f.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[m?void 0:(0,f.jsx)(o(807449).I,{icon:o(607481).K,size:"sm"}),(0,f.jsx)(w,{backlinkStore:t}),(0,f.jsx)(g().A,{store:t,style:{fontWeight:u().Wy.medium,fontSize:u().J.UIRegular.desktop,lineHeight:1.3,borderBottom:`1px solid ${d().Tj.border.primaryTranslucent}`,flexShrink:1}}),(0,f.jsxs)("div",{style:{marginTop:-2,minWidth:0,display:"flex",alignItems:"baseline",flex:"2 0 40%",paddingTop:"0.1em"},children:[(0,f.jsx)(h,{store:t,style:{paddingInlineStart:8}}),(0,f.jsx)(A,{isPrivate:b})]})]})})})};function w({backlinkStore:e}){const t=(0,i().K8)((()=>e.getIcon()),[e]),o=(0,i().K8)((()=>e.isEmptyPage()),[e]),n=(0,i().K8)((()=>(0,m().Te)(e)),[e]);return(0,f.jsx)(m().B6,{disabled:!0,icon:t,iconRecordCategory:n,isEmptyPage:o,size:20,style:{marginInlineStart:4,marginInlineEnd:4}})}function S(e){const{device:t}=e;return{padding:"2px 6px",borderRadius:4,color:d().Tj.text.secondary,background:d().Tj.legacyDefaultSelectColor,fontSize:c().A.isMobile?11:9,lineHeight:t.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em",whiteSpace:"nowrap",marginInlineStart:4}}function A({isPrivate:e}){return e?(0,f.jsx)("div",{style:{paddingInlineEnd:4,marginInlineStart:12},children:(0,f.jsx)(x().Y,{})}):null}const M=10,I=r().Store.createClass(M,{name:"ShowMoreStore"}),C=r().Store.createClass(!1,{name:"HoveredStore"});const _=function({store:e,originalTransclusionStore:t,disableInaccessiblePages:r,headerText:s,disableArrow:c,disableCurrentPageToken:d}){const u=(0,a().v3)(),p=(0,i().uB)(void 0,C),m=(0,i().uB)(void 0,I),g=(0,i().K8)((()=>(0,o(900967).cg)(e,u)),[e,u]),h=(0,n.useCallback)((()=>function(e){e.setState(e.state+M)}(m)),[m]),v=(0,n.useCallback)((()=>function(e){e.setState(!1)}(p)),[p]),b=(0,n.useCallback)((()=>function(e){e.setState(!0)}(p)),[p]),y=(0,i().O$)(m),x=(0,i().K8)((()=>t?t.getNavigableBlockStore():void 0),[t]);if(0===g.backlinks.length&&!t)return null;const w=g.backlinks.length>y,S=g.inaccessibleBacklinkCount>0&&!r;return(0,f.jsxs)("div",{onMouseMove:b,onMouseLeave:v,children:[s?(0,f.jsx)(B,{headerText:s}):void 0,t&&x?(0,f.jsx)(k,{currentBlockStore:e,disableArrow:c,disableCurrentPageToken:d,backlinkStore:x,scrollToBlockId:t.id,showOriginalToken:!0}):void 0,g.backlinks.slice(0,y).map((t=>(0,f.jsx)(k,{currentBlockStore:e,disableArrow:c,disableCurrentPageToken:d,...t},t.backlinkStore.id))),w||S?(0,f.jsx)(o(26697).m,{disableTooltip:w,renderTooltip:()=>(0,f.jsx)(l().sA,{defaultMessage:"Synced in pages that you don’t have access to.",id:"page.backlinks.privatePagesTooltip"}),render:e=>(0,f.jsx)(o(631524).p,{iconLeading:o(589407).ellipsisIcon,colorPalette:"gray",onClick:h,style:{padding:`2px ${c?17:14}px`,width:"100%"},disabled:!w,...e,children:w?(0,f.jsx)(l().sA,{defaultMessage:"{count} more",id:"page.backlinks.more",values:{count:g.backlinks.length-y}}):(0,f.jsx)(l().sA,{id:"page.backlinks.privatePages",defaultMessage:"{count, plural, one {{count} private page} other {{count} private pages}}",values:{count:g.inaccessibleBacklinkCount}})})}):void 0]})};function B({headerText:e}){return(0,f.jsx)("div",{style:{display:"flex"},children:(0,f.jsx)(s().A,{isSmall:!0,style:{marginTop:12,marginBottom:8,marginInlineStart:4,flex:1,paddingInlineStart:8},children:e})})}},283163:(e,t,o)=>{o.d(t,{h:()=>r});o(296540);var n=()=>o(473541),a=()=>o(807449),i=o(474848);function r(){return(0,i.jsx)(a().I,{icon:n().w,size:"lg",colorVariant:"primary"})}},311221:(e,t,o)=>{o.d(t,{B:()=>r,X:()=>i});var n=()=>o(129522),a=()=>o(148134);function i(e){const{blockStore:t}=e,o=n().K.getRect(t);if(!o)return;const i=o.width,r=o.height,s=o.right-i,l=new DOMRect(s,o.top,i,r);a().Y.setState({open:!0,rect:l,blockStore:t})}function r(){a().Y.setState({open:!1,rect:a().Y.state.rect})}},333366:(e,t,o)=>{o.r(t),o.d(t,{AnimatedEmbedBlockActionBar:()=>ke});var n=o(296540),a=()=>o(726637),i=()=>o(590526),r=()=>o(401497),s=()=>o(893497),l=()=>o(148134),c=()=>o(553819),d=()=>o(957690),u=()=>o(484714),p=()=>o(792485),m=()=>o(929219),g=()=>o(249046),f=()=>o(250910),h=()=>o(700500),v=()=>o(522419),b=()=>o(187174),y=()=>o(412237),x=()=>o(340498),k=o(474848);const w={viewBox:"0 0 16 16",fittedViewBox:"1.77 2.17 12.45 11.65",svg:(0,k.jsx)("path",{d:"M2.4 2.175a.625.625 0 1 0 0 1.25h11.2a.625.625 0 1 0 0-1.25zm3.4 2h4.4c1.008 0 1.825.817 1.825 1.825v4a1.825 1.825 0 0 1-1.825 1.825H5.8A1.825 1.825 0 0 1 3.975 10V6c0-1.008.817-1.825 1.825-1.825M5.225 6v4c0 .318.258.575.575.575h4.4a.575.575 0 0 0 .575-.575V6a.575.575 0 0 0-.575-.575H5.8A.575.575 0 0 0 5.225 6M2.4 12.575a.625.625 0 1 0 0 1.25h11.2a.625.625 0 1 0 0-1.25z"})},S=(0,x().wt)("alignCenterSmall",w,"small"),A={viewBox:"0 0 16 16",fittedViewBox:"1.77 2.17 12.45 11.65",directional:!0,svg:(0,k.jsx)("path",{d:"M2.4 2.175a.625.625 0 1 0 0 1.25h11.2a.625.625 0 1 0 0-1.25zm1.2 2A1.825 1.825 0 0 0 1.775 6v4c0 1.008.817 1.825 1.825 1.825H8A1.825 1.825 0 0 0 9.825 10V6A1.825 1.825 0 0 0 8 4.175zM3.025 6c0-.318.258-.575.575-.575H8c.318 0 .575.257.575.575v4a.575.575 0 0 1-.575.575H3.6A.575.575 0 0 1 3.025 10zM2.4 12.575a.625.625 0 1 0 0 1.25h11.2a.625.625 0 1 0 0-1.25z"})},M=(0,x().wt)("alignLeftSmall",A,"small"),I={viewBox:"0 0 16 16",fittedViewBox:"1.77 2.17 12.45 11.65",directional:!0,svg:(0,k.jsx)("path",{d:"M2.4 2.175a.625.625 0 1 0 0 1.25h11.2a.625.625 0 1 0 0-1.25zm5.6 2A1.825 1.825 0 0 0 6.175 6v4c0 1.008.817 1.825 1.825 1.825h4.4A1.825 1.825 0 0 0 14.225 10V6A1.825 1.825 0 0 0 12.4 4.175zM7.425 6c0-.318.257-.575.575-.575h4.4c.318 0 .575.257.575.575v4a.575.575 0 0 1-.575.575H8A.575.575 0 0 1 7.425 10zM2.4 12.575a.625.625 0 1 0 0 1.25h11.2a.625.625 0 1 0 0-1.25z"})},C=(0,x().wt)("alignRightSmall",I,"small");var _=()=>o(8741),B=()=>o(662984),j=()=>o(449445),L=()=>o(111996);const T={viewBox:"0 0 16 16",fittedViewBox:"0 0 16 16",svg:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("g",{clipPath:"url(#clip0_10073_12430)",children:(0,k.jsx)("path",{d:"M4.625 1.6a.625.625 0 0 0-1.25 0v1.775H1.6a.625.625 0 1 0 0 1.25h1.775V10.8c0 1.008.817 1.825 1.825 1.825h6.175V14.4a.625.625 0 1 0 1.25 0v-1.775H14.4a.625.625 0 1 0 0-1.25h-1.775V5.2A1.825 1.825 0 0 0 10.8 3.375H4.625zm0 3.025H10.8c.318 0 .575.258.575.575v6.175H5.2a.575.575 0 0 1-.575-.575z"})}),(0,k.jsx)("defs",{children:(0,k.jsx)("clipPath",{id:"clip0_10073_12430",children:(0,k.jsx)("path",{d:"M0 0h16v16H0z"})})})]})},E=(0,x().wt)("cropSmall",T,"small");var F=()=>o(692797),P=()=>o(69708),D=()=>o(534177),R=()=>o(437219),z=()=>o(50556),N=()=>o(896628),V=()=>o(391214),O=()=>o(675925),K=()=>o(240096),U=()=>o(555102),W=()=>o(383070),H=()=>o(53436),G=()=>o(326496),q=()=>o(411421),Y=()=>o(311221),$=()=>o(440024);const Q=(0,P().YK)({ariaLabel:{id:"ActionBarImageEditButton.ariaLabel",defaultMessage:"Edit with AI"},label:{id:"ActionBarImageEditButton.label",defaultMessage:"Edit with AI"}});function X(e){const{store:t}=e,o=(0,P().tz)(),a=(0,u().v3)(),i=(0,n.useCallback)((()=>{(0,$().I)({environment:a}),Y().X({blockStore:t})}),[a,t]);return(0,k.jsx)(G().e,{"aria-label":o.formatMessage(Q.ariaLabel),onClick:i,iconLeading:y().aiFaceSmallIcon,children:(0,k.jsx)(P().sA,{...Q.label})})}var Z=()=>o(908759),J=()=>o(724015),ee=()=>o(378115),te=()=>o(444796),oe=()=>o(518489),ne=()=>o(673660),ae=()=>o(471266),ie=()=>o(260850),re=()=>o(547149),se=()=>o(46986),le=()=>o(144440);const ce=(0,P().YK)({actionBarAriaLabel:{id:"EmbedBlockActionBar.ariaLabel",defaultMessage:"Block actions"},askAIAriaLabel:{id:"EmbedBlockActionBar.askAI.ariaLabel",defaultMessage:"Ask AI"},alignmentAriaLabel:{id:"EmbedBlockActionBar.alignment.ariaLabel",defaultMessage:"Set block alignment"},alignmentLeftAriaLabel:{id:"EmbedBlockActionBar.alignment.left.ariaLabel",defaultMessage:"Left alignment"},alignmentCenterAriaLabel:{id:"EmbedBlockActionBar.alignment.center.ariaLabel",defaultMessage:"Center alignment"},alignmentRightAriaLabel:{id:"EmbedBlockActionBar.alignment.right.ariaLabel",defaultMessage:"Right alignment"},alignmentTooltip:{id:"EmbedBlockActionBar.alignment.tooltip",defaultMessage:"Alignment"},captionAriaLabel:{id:"EmbedBlockActionBar.caption.ariaLabel",defaultMessage:"Add a caption"},captionTooltip:{id:"EmbedBlockActionBar.caption.tooltip",defaultMessage:"Caption"},cropAriaLabel:{id:"EmbedBlockActionBar.crop.ariaLabel",defaultMessage:"Crop image"},cropTooltip:{id:"EmbedBlockActionBar.crop.tooltip",defaultMessage:"Crop"},expandAriaLabel:{id:"EmbedBlockActionBar.expand.ariaLabel",defaultMessage:"Open block in full screen"},expandTooltip:{id:"EmbedBlockActionBar.expand.tooltip",defaultMessage:"Expand"},downloadAriaLabel:{id:"EmbedBlockActionBar.download.ariaLabel",defaultMessage:"Download file"},downloadTooltip:{id:"EmbedBlockActionBar.download.tooltip",defaultMessage:"Download"},viewOriginalAriaLabel:{id:"EmbedBlockActionBar.viewOriginal.ariaLabel",defaultMessage:"View original media source"},viewOriginalLabel:{id:"EmbedBlockActionBar.viewOriginal.label",defaultMessage:"View original"}});function de(e){const t=(0,P().tz)();return(0,k.jsx)(H().E,{"aria-label":t.formatMessage(ce.actionBarAriaLabel),children:(0,k.jsx)(ue,{...e})})}function ue(e){const{store:t,visibility:o,dimensions:r,location:s,canEdit:l,canEditNavigableAncestor:c,canExpand:g,srcFailedToLoad:f}=e,b=(0,P().tz)(),y=(0,u().WS)(),x=(0,u().v3)(),w=(0,p().S)(),S=(0,i().K8)((()=>(0,se().Vf)({pageContext:w})),[w]),{canComment:A,isExternalObjectInstance:M,blockType:I,originalImageSource:C,pathIsDead:B}=(0,i().K8)((()=>({canComment:t.canComment(),isExternalObjectInstance:t.isExternalObjectInstanceBlockStore(),blockType:t.getType(),originalImageSource:t.getOriginalImageSource(),pathIsDead:t.pathIsDead()})),[t]),j=(0,K().Tf)(),L=(0,i().O$)(m().e),T=le().Ox(s),E=(0,n.useCallback)((()=>{const e=(0,d().WJ)(t);if(!e)return;le().oD(x,{store:e,from:"view_original"});const o=e.getType();o&&R().qU(x,{type:"original",block_type:o,block_id:t.id})}),[x,t]),F=(0,n.useMemo)((()=>{var e;if(!C||"image"!==I)return!1;const t=null===(e=(0,v().QC)(C))||void 0===e?void 0:e.toLowerCase();if("gif"===t||"svg"===t)return!1;const o=(0,v()._J)(C),n=(0,v().JB)(C);return!(!o&&!n)}),[C,I]);if("image"===I&&j)return(0,k.jsx)(ye,{store:t});if("more_only"===o||!("image"!==I||c&&l))return(0,k.jsx)(xe,{store:t,isInComment:T});if(!c)return(0,k.jsx)(G().e,{"aria-label":b.formatMessage(ce.viewOriginalAriaLabel),onClick:E,children:(0,k.jsx)(P().sA,{...ce.viewOriginalLabel})});const{width:D,isPageWidth:z,isFullWidth:N}=r,V=F&&"all"===o&&l&&!y&&!T&&C&&!B&&L&&!f,O=V&&S,U=V&&!O,W=!T&&A&&!y,H=l&&D&&!z&&!N&&!y&&!T,Y=l&&!a().A.isMobile&&!T&&!M,$=!a().A.isMobile&&!T&&"image"===I&&l&&C&&(0,te().AS)(C)&&!B&&L,Q=!a().A.isMobile&&("image"===I||M&&g),Z=L&&!y;return(0,k.jsxs)(k.Fragment,{children:[O?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(X,{store:t}),(0,k.jsx)(J().b,{})]}):U?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(pe,{store:t,source:C}),(0,k.jsx)(J().b,{})]}):void 0,W?(0,k.jsx)(q().t,{store:t}):void 0,H?(0,k.jsx)(me,{store:t}):void 0,Y?(0,k.jsx)(fe,{store:t}):void 0,$?(0,k.jsx)(he,{store:t,source:C}):void 0,Q?(0,k.jsx)(ve,{store:t,type:I,location:s}):void 0,Z?I&&(0,h().bI)(I)?(0,k.jsx)(be,{store:t}):(0,k.jsx)(G().e,{"aria-label":b.formatMessage(ce.viewOriginalAriaLabel),onClick:E,iconLeading:_().arrowDiagonalUpRightSmallIcon,tooltip:b.formatMessage(ce.viewOriginalLabel)}):void 0,(0,k.jsx)(xe,{store:t,isInComment:T})]})}function pe(e){const{store:t}=e,a=(0,P().tz)(),r=(0,u().v3)(),s=(0,se().i7)(),l=(0,i().O$)(U().bX),c=(0,i().K8)((()=>W().zD.shouldShowAttachmentImageButton()),[]),[{value:d}]=(0,b().Yb)((async()=>{const e=await Promise.resolve().then(o.bind(o,650829)),t=await e.assistantDependency.load();return{assistantActions:t.assistantActions,agentActions:t.agentActions}}),[]),p=(0,n.useCallback)((e=>{if(d){if(s){if(!l)return;d.agentActions.openAgentSidebarFromAttachmentBlockSelection({environment:r,selectedAttachmentStore:t,inferenceContext:l})}e.preventDefault(),e.stopPropagation()}}),[r,t,d,l,s]);return d&&c?(0,k.jsx)(G().e,{"aria-label":a.formatMessage(ce.askAIAriaLabel),onClick:p,iconLeading:y().aiFaceSmallIcon,children:(0,k.jsx)(P().sA,{defaultMessage:"Ask AI",id:"EmbedBlockActionBar.askAI.label"})}):null}function me(e){const{store:t}=e,o=(0,P().tz)(),a=(0,u().v3)(),r=(0,i().K8)((()=>{const{block_alignment:e}=t.getFormat();return e||(t.isRootOrDirectChild()?"center":"left")}),[t]),s=(0,n.useCallback)((e=>{const o=t.getType(),n={action:"set_alignment",block_type:o,from:"embed_block_actions"};(0,O().o)(a,n,(n=>{const{serverCommitResult:i}=re().createAndCommit({userAction:"EmbedBlock.handleAlignment",environment:a,canUndo:!0,perform:o=>{N().TP({environment:a,store:t,alignment:e,transaction:o})}});i.then(n);const r=t.getFormat(),s=r.block_alignment,l=r.block_width,c=r.block_height,d=t.isRootOrDirectChild()?"center":"left";o&&R().qU(a,{type:"alignment",block_type:o,block_id:t.id,block_alignment:e,block_height:c,block_width:l,previous_alignment:s,default_alignment:d}),(0,ne().s)()}))}),[a,t]);return(0,k.jsx)(f().A,{popupType:f().z.Popup,alignmentToOrigin:"center",popupWrapStyle:{borderRadius:6,padding:2},originGap:8,renderOrigin:e=>(0,k.jsx)(G().e,{...e,"aria-label":o.formatMessage(ce.alignmentAriaLabel),tooltip:o.formatMessage(ce.alignmentTooltip),iconLeading:ge(r)}),render:e=>{const t=t=>{s(t),e.close()};return(0,k.jsxs)(g().Ye,{alignItems:"center",children:[(0,k.jsx)(G().e,{"aria-label":o.formatMessage(ce.alignmentLeftAriaLabel),iconLeading:M,hovered:"left"===r,onClick:()=>t("left")}),(0,k.jsx)(J().b,{}),(0,k.jsx)(G().e,{"aria-label":o.formatMessage(ce.alignmentCenterAriaLabel),iconLeading:S,hovered:"center"===r,onClick:()=>t("center")}),(0,k.jsx)(J().b,{}),(0,k.jsx)(G().e,{"aria-label":o.formatMessage(ce.alignmentRightAriaLabel),iconLeading:C,hovered:"right"===r,onClick:()=>t("right")})]})}})}function ge(e){return"left"===e?M:"center"===e?S:"right"===e?C:void(0,D().HB)(e)}function fe(e){const{store:t}=e,o=(0,P().tz)(),a=(0,u().v3)(),i=(0,n.useCallback)((()=>{const e=t.getType(),o={action:"init_edit_caption",block_type:e,from:"embed_block_actions"};(0,O().o)(a,o,(e=>{const o=t.getPropertyStore("caption");(0,oe().h)({environment:a,store:t}),(0,ie().z)({store:o}),e()})),e&&R().qU(a,{type:"caption",block_type:e,block_id:t.id})}),[a,t]);return(0,k.jsx)(G().e,{"aria-label":o.formatMessage(ce.captionAriaLabel),onClick:i,iconLeading:L().l,tooltip:o.formatMessage(ce.captionTooltip)})}function he(e){const{store:t,source:o}=e,a=(0,P().tz)(),r=(0,u().v3)(),s=(0,i().K8)((()=>ae().A),[]),l=(0,n.useCallback)((()=>{V().dL(r,[]),s.openModal({blockStore:t,originalSource:o})}),[r,t,s,o]);return(0,k.jsx)(G().e,{"aria-label":a.formatMessage(ce.cropAriaLabel),onClick:l,iconLeading:E,tooltip:a.formatMessage(ce.cropTooltip)})}function ve(e){const{store:t,location:o,type:a}=e,i=(0,P().tz)(),r=(0,u().v3)(),s=(0,n.useCallback)((()=>{const e={action:"full_screen",block_type:a,from:"embed_block_actions"};(0,O().o)(r,e,(e=>{V().iy({environment:r,blockStore:t,blockLocationOfTargetBlock:o,callback:e})})),a&&R().qU(r,{type:"full_screen",block_type:a,block_id:t.id})}),[r,t,a,o]);return(0,k.jsx)(G().e,{"aria-label":i.formatMessage(ce.expandAriaLabel),onClick:s,iconLeading:"image"===a?F().W:B().arrowExpandDiagonalBottomLeftToTopRightSmallIcon,tooltip:i.formatMessage(ce.expandTooltip)})}function be(e){const{store:t}=e,o=(0,P().tz)(),a=(0,u().v3)(),i=(0,n.useCallback)((()=>{const e=t.getType(),o={action:"download",block_type:e,from:"embed_block_actions"};(0,O().o)(a,o,(e=>{le().qI({environment:a,store:t,callback:e})})),e&&R().qU(a,{type:"download",block_type:e,block_id:t.id})}),[a,t]);return(0,k.jsx)(G().e,{"aria-label":o.formatMessage(ce.downloadAriaLabel),onClick:i,iconLeading:j().arrowLineDownSmallIcon,tooltip:o.formatMessage(ce.downloadTooltip)})}function ye(e){const{store:t}=e,o=(0,P().tz)(),a=(0,u().v3)(),i=(0,ee().z)(t),r=(0,n.useCallback)((()=>{const e=t.getType(),o={action:"download",block_type:e,from:"embed_block_actions"};(0,O().o)(a,o,(async e=>{const o=t.getOriginalImageSource();if(!o)return;const n=(0,v().Jt)(o);R().uR(a,{url:o,from:"embedBlockActions"}),await z().KE(a,{url:o,download:!0,downloadName:n,permissionRecord:i}),null==e||e()})),e&&R().qU(a,{type:"download",block_type:e,block_id:t.id})}),[a,t,i]);return(0,k.jsx)(G().e,{"aria-label":o.formatMessage(ce.downloadAriaLabel),onClick:r,iconLeading:j().arrowLineDownSmallIcon,tooltip:o.formatMessage(ce.downloadTooltip)})}function xe(e){const{store:t,isInComment:o}=e;return(0,k.jsx)(Z().h,{actionSectionGroupKey:o?"comment_media":"default",hideFilter:o,store:t})}function ke(e){const{store:t,embedBlockStore:o,blockResizerStore:n,fileUploadState:u,visibility:p,source:m,mediaType:g,...f}=e,h=(0,i().K8)((()=>n.state.dragging),[n]),{focused:v,hovered:b}=(0,i().O$)(o),y=!h&&(v||b||a().A.isMobile),x=(0,i().K8)((()=>t.isType("image")),[t]),w=(0,i().K8)((()=>c().A.getStatus(t.id)),[t.id]),S=(0,i().K8)((()=>{var e;return l().Y.state.open&&(null===(e=l().Y.state.blockStore)||void 0===e?void 0:e.id)===t.id}),[t.id]),A=(0,i().K8)((()=>(0,d().sr)(m,g,t,u)),[u,g,m,t]),M=(0,r().IS)((()=>({wrapper:{position:"absolute",zIndex:2,top:4,insetInlineEnd:4}})),[]);return a().A.isMobile&&x||u&&"uploading"!==w||S||null!=A&&A.hideActions?null:(0,k.jsx)(s().L,{skip:a().A.isMobile,visible:y,style:M.wrapper,children:(0,k.jsx)(de,{...f,store:t,visibility:p,canExpand:Boolean(null==A?void 0:A.renderFullScreen)})})}},338862:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,lockFillSmallIcon:()=>a});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"3.24 1.67 9.51 12.3",svg:(0,o(474848).jsx)("path",{d:"M4.825 4.85a3.175 3.175 0 1 1 6.35 0v1.061a1.95 1.95 0 0 1 1.575 1.914v4.2a1.95 1.95 0 0 1-1.95 1.95H5.2a1.95 1.95 0 0 1-1.95-1.95v-4.2c0-.949.677-1.74 1.575-1.914zm1.1 1.025h4.15V4.85a2.075 2.075 0 0 0-4.15 0zm2.525 4.299a1.05 1.05 0 1 0-.9 0v.976a.45.45 0 0 0 .9 0z"})},a=(0,o(340498).wt)("lockFillSmall",n,"fillSmall")},348869:(e,t,o)=>{o.d(t,{g:()=>s});o(944114);var n=()=>o(792057),a=()=>o(785728),i=()=>o(532659),r=()=>o(769864);async function s(e){const{environment:t,onResponse:o,data:s,userId:l,tracking:c,abortSignal:d}=e,u=await r().callStreamApi({eventName:"runInferenceTranscript",environment:t,data:s,userId:l,tracking:c,abortSignal:d,headers:(0,a().WS)({spaceId:s.spaceId})});if("success"!==u.type)return null!=d&&d.aborted?{error:{message:"Aborted",code:0}}:(n().Qg(u),{error:{message:u.error.message,code:u.status}});const p=[];if(i().hS.is(u.data))for await(const n of u.data){if("error"===n.type)return{error:{message:n.message,code:n.errorCode}};null==o||o(n),p.push(n)}return{value:p}}},365136:(e,t,o)=>{o.d(t,{Y:()=>l});o(296540);var n=()=>o(807449),a=()=>o(26697),i=()=>o(338862),r=()=>o(69708),s=o(474848);function l(){return(0,s.jsx)(a().m,{placement:"top",renderTooltip:()=>(0,s.jsx)(r().sA,{defaultMessage:"Only visible to you",id:"privatePageBadge.tooltip"}),render:e=>(0,s.jsx)("div",{...e,children:(0,s.jsx)(n().I,{icon:i().lockFillSmallIcon,size:"sm",colorPalette:"gray",colorVariant:"secondary",fitToViewBox:"vertical"})})})}},375555:(e,t,o)=>{function n(e,t){const{device:o}=e;o.isAndroid&&t.focus(),t.select()}o.d(t,{G:()=>n})},393686:(e,t,o)=>{o.d(t,{A:()=>v,W:()=>b});o(16280),o(944114);var n=()=>o(726637),a=()=>o(675133),i=()=>o(792057),r=()=>o(896628),s=()=>o(383594),l=()=>o(675925),c=()=>o(892632),d=()=>o(977872),u=()=>o(867772),p=()=>o(547149),m=()=>o(46986),g=()=>o(568365);const f=1500,h=(0,o(69708).YK)({pageCover:{defaultMessage:"Page cover",id:"pageCover.title"},fileTypeCaption:{defaultMessage:"Images wider than {idealImageWidth} pixels work best.",id:"pageCover.fileType.caption"},uploadFailed:{defaultMessage:"Upload failed",id:"pageCover.errorDialogMessage.uploadFailed"},preparing:{defaultMessage:"Preparing...",id:"pageCover.status.preparing"},downloading:{defaultMessage:"Downloading...",id:"pageCover.status.downloading"},embedTitle:{defaultMessage:"Link",id:"pageCover.embedType.title"},embedPlaceholder:{defaultMessage:"Paste an image link…",id:"pageCover.embedType.placeholder"},embedCaption:{defaultMessage:"Works with any image from the web.",id:"pageCover.embedType.caption"},embedSubmit:{defaultMessage:"Submit",id:"pageCover.embedType.buttonText"},downloadingAiImage:{defaultMessage:"Downloading AI image...",id:"pageCover.downloadingAiImage.status"},aiImageGenerateTitle:{id:"pageCover.aiImageGenerate.title",defaultMessage:"Notion AI"},aiImageGenerateCaption:{id:"pageCover.aiImageGenerate.caption",defaultMessage:"Generate a custom image using AI based on your description"},aiImageGenerateButtonText:{id:"pageCover.aiImageGenerate.buttonText",defaultMessage:"Generate Image"},aiImageGenerateInputPlaceholder:{id:"pageCover.aiImageGenerate.inputPlaceholder",defaultMessage:"Generate a pattern, artwork, photo..."}});async function v({environment:e,intl:t,store:o,imageUrl:n,callback:a}){try{var r;g().M.setState({loadingMode:u().Gi,progressText:t.formatMessage(h.downloadingAiImage)});const s=await fetch(n);if(!s.ok)throw new Error(`Failed to download image: ${s.statusText}`);const l=await s.blob(),d=`ai-generated-${Date.now()}.png`,p=new File([l],d,{type:l.type||"image/png"});c().QM({environment:e,file:p,bucket:"secure",record:(null===(r=o.getCoverStore())||void 0===r?void 0:r.pointer)??o.pointer,isFileBlock:!1,reportRichUploadMetrics:!0,onStart:k,onProgress:w,onComplete:t=>{S({environment:e,store:o,url:{originUrl:t},callback:a})},onError:()=>{i().f1(t.formatMessage(h.uploadFailed))}})}catch(s){i().f1(t.formatMessage(h.uploadFailed)),a()}}function b({environment:e,intl:t,store:o,rect:a,from:u}){const g=(0,m().Vf)({spaceStore:o.getSpaceStore()}),b=[{type:"gallery",onChange:({url:t,position:n})=>{(0,l().o)(e,{action:"edit_cover",block_type:"page",from:u},(a=>{x({environment:e,store:o,url:{originUrl:t},position:n,callback:a})}))}},{type:"file",fileUpload:!1,imageUpload:!0,videoUpload:!1,caption:t.formatMessage(h.fileTypeCaption,{idealImageWidth:f}),onUpload:n=>{(0,l().o)(e,{action:"edit_cover",block_type:"page",from:u},(a=>{var r;s().I(),c().QM({environment:e,file:n[0],bucket:"secure",record:(null===(r=o.getCoverStore())||void 0===r?void 0:r.pointer)??o.pointer,isFileBlock:!1,reportRichUploadMetrics:!0,onStart:e=>{s().I(),k(e)},onProgress:w,onComplete:t=>{S({environment:e,store:o,url:{originUrl:t},callback:a})},onError:()=>{i().f1(t.formatMessage(h.uploadFailed))}})}))}},{type:"embed",title:t.formatMessage(h.embedTitle),inputPlaceholder:t.formatMessage(h.embedPlaceholder),caption:t.formatMessage(h.embedCaption),buttonText:t.formatMessage(h.embedSubmit),onChange:t=>{(0,l().o)(e,{action:"edit_cover",block_type:"page",from:u},(n=>{var a;a={environment:e,store:o,url:t,callback:n},y({...a,position:.5}),s().I()}))}},{type:"unsplash",onChange:({url:t,position:n})=>{(0,l().o)(e,{action:"edit_cover",block_type:"page",from:u},(a=>{x({environment:e,store:o,url:{originUrl:t},position:n,callback:a})}))}}];g&&!n().A.isMobile&&b.push({type:"generate",title:t.formatMessage(h.aiImageGenerateTitle),caption:t.formatMessage(h.aiImageGenerateCaption),buttonText:t.formatMessage(h.aiImageGenerateButtonText),inputPlaceholder:t.formatMessage(h.aiImageGenerateInputPlaceholder),defaultAvatar:"/images/assistant_static_face_favicon.png",integration:"ai-image-generator",spaceId:o.pointer.spaceId??"",blockId:o.id,size:{width:1500,height:843},source:"page_cover",n:1,onGenerationStart:({prompt:e})=>{s().I(),d().P.setBlockState(o.id,{prompt:e,source:"page_cover"})},onGenerationEnd:async({url:n})=>{await Promise.resolve(),(0,l().o)(e,{action:"edit_cover",block_type:"page",from:u},(a=>{d().P.setBlockState(o.id,void 0),v({environment:e,intl:t,store:o,imageUrl:n,callback:a})}))},onGenerationError:()=>{d().P.setBlockState(o.id,void 0)}}),s().W(e,{originGap:8,originRect:a,isSmallWidth:!1,popupWidth:540,maxHeight:485,title:t.formatMessage(h.pageCover),onDelete:()=>{!function({environment:e,store:t}){s().I(),p().createAndCommit({userAction:"PageCover.handleDelete",environment:e,canUndo:!0,perform:e=>{r().PT({store:t,transaction:e})}})}({environment:e,store:o})},currentTab:"gallery",tabs:b})}async function y(e){const{environment:t,store:o,url:n,position:i,callback:s}=e,{serverCommitResult:l}=p().createAndCommit({userAction:"PageCover.updatePageCover",environment:t,canUndo:!0,perform:e=>{r().fg({store:o,url:n,position:i||.5,transaction:e})}});await l,s(),g().M.state.loadingMode===u().vS&&g().M.setState({loadingMode:u().Gi,dataURL:g().M.state.dataURL,uploadProgress:t.device.isMobileNative?void 0:100,progressText:a().A.formatMessage(h.downloading)})}function x(e){y(e),n().A.isMobile&&s().I()}function k(e){const{file:t,name:o,size:n}=e;if(g().M.setState({loadingMode:u().Wc,file:t,name:o,size:n}),t.type.indexOf("image")>=0)if(t instanceof File){const e=new FileReader;e.onload=e=>{var t;const o=(null===(t=e.target)||void 0===t?void 0:t.result)??void 0;o&&"string"!=typeof o||g().M.state.loadingMode!==u().Wc||g().M.setState({...g().M.state,loadingMode:u().vS,uploadProgress:0,dataURL:o})},e.readAsDataURL(t)}else g().M.state.loadingMode===u().Wc&&g().M.setState({...g().M.state,loadingMode:u().vS,dataURL:t.dataURL,progressText:a().A.formatMessage(h.preparing)});else g().M.state.loadingMode===u().Wc&&g().M.setState({...g().M.state,loadingMode:u().vS,progressText:a().A.formatMessage(h.preparing)})}function w(e){const{progressPercent:t,progressText:o}=e;g().M.state.loadingMode===u().vS&&g().M.setState({...g().M.state,uploadProgress:t,progressText:o})}function S(e){y({...e,position:.5})}},404783:(e,t,o)=>{o.d(t,{A:()=>a});class n extends(()=>o(757695))().Store{constructor(e,t){super(),this.environment=void 0,this.spaceId=void 0,this.environment=e,this.spaceId=t,this.reset()}getInitialState(){if(!this.environment)return;const e=new(o(221844).A)({name:"DiscussionInputStore",isTemporaryData:!0});return{textStore:new(o(770063).pm)({environment:this.environment,pointer:(0,o(594794).zP)({environment:this.environment,table:o(343666).SN,spaceId:this.spaceId}),path:["text"],recordStoreOptions:{inMemoryRecordCache:e}}),localRecordCache:e,files:[],showAttachFileIntro:!1,renderFileAttachIntro:!1}}isEmpty(){const e=this.state.textStore.getValue();return!e||0===e.length}hasNewLineCharacter(){const e=this.state.textStore.getValue();return o(201980).q4_(e).includes("\n")}}const a=n},405981:(e,t,o)=>{o.d(t,{HR:()=>p,_y:()=>m});var n=()=>o(907258),a=()=>o(675133),i=()=>o(792057),r=()=>o(534177),s=()=>o(878523),l=()=>o(116008),c=()=>o(681634),d=()=>o(938045);const u=(0,o(69708).YK)({discardCommentConfirmationPrompt:{id:"newDiscussionMenu.discardCommentConfirmationDialog.prompt",defaultMessage:"Do you want to discard the comment?"},discardCommentButtonLabel:{id:"newDiscussionMenu.discardCommentConfirmationDialog.discardButton.label",defaultMessage:"Discard"},draftCommentConfirmationPromptTitle:{id:"newDiscussionMenu.draftCommentConfirmationDialogTitle.prompt",defaultMessage:"Finish your draft comment?"},draftCommentConfirmationStartingNewDescription:{id:"newDiscussionMenu.draftCommentConfirmationStartingNewDescription.prompt",defaultMessage:"You have a draft comment that will be lost if you start a new one"},draftCommentConfirmationNavigateAwayPromptDescription:{id:"newDiscussionMenu.draftCommentConfirmationNavigateAwayPromptDescription.prompt",defaultMessage:"You have a draft comment that will be lost if you leave the page"},returnToPageButtonLabel:{id:"newDiscussionMenu.discardCommentConfirmationDialog.returnToPage.label",defaultMessage:"Return to draft"}});function p(e){const{discussionInputStore:t,environment:o,discussionHelpers:n,reason:r}=e;l().A.isComposingNewDiscussion()?m({environment:o,reason:r??"navigating_away"}):n.hasCommentChanged(t)?(s().yO(o),i().ui({message:a().A.formatMessage(u.discardCommentConfirmationPrompt),showCancel:!0,handleCancel:()=>s().Ie(o),keepFocus:!0,items:[{label:a().A.formatMessage(u.discardCommentButtonLabel),color:"red",onAccept:()=>{s().QP(o),(0,c().c)()}}]})):(0,c().c)()}function m(e){const{environment:t}=e;if(!l().A.isDraftCommentOnValidSelection())return;const o=l().A.getDiscussionInputStore();s().yO(t),i().ui({message:a().A.formatMessage(u.draftCommentConfirmationPromptTitle),description:(()=>{switch(e.reason){case"starting_new":return a().A.formatMessage(u.draftCommentConfirmationStartingNewDescription);case"navigating_away":return a().A.formatMessage(u.draftCommentConfirmationNavigateAwayPromptDescription);default:(0,r().HB)(e.reason)}})(),keepFocus:!0,innerStyle:{textAlign:"center"},showCancel:!1,shouldRenderDraftCommentIcon:!0,items:[{label:a().A.formatMessage(u.returnToPageButtonLabel),buttonType:"solid",color:"blue",onAccept:()=>{(0,d().x)({currentBlockStore:n().default.state.mainEditorCurrentBlockStore,discussionInputStore:o,environment:t}),s().Ie(t)}},{label:a().A.formatMessage(u.discardCommentButtonLabel),color:"red",buttonType:"outline",onAccept:()=>{s().QP(t),(0,c().c)()}}]})}},411421:(e,t,o)=>{o.d(t,{t:()=>w});var n=o(296540),a=()=>o(484714),i=()=>o(590526),r=()=>o(396896),s=()=>o(807449),l=()=>o(566531),c=()=>o(575287),d=()=>o(69708),u=()=>o(182641),p=()=>o(36088),m=()=>o(730307),g=()=>o(254131),f=()=>o(555776),h=()=>o(116008),v=()=>o(299545),b=()=>o(440024),y=()=>o(326496),x=o(474848);const k=(0,d().YK)({ariaLabel:{id:"ActionBarCommentButton.ariaLabel",defaultMessage:"Add a new comment"},tooltip:{id:"ActionBarCommentButton.tooltip",defaultMessage:"Comment"}});function w(e){const{store:t}=e,o=(0,d().tz)(),w=(0,a().v3)(),S=(0,i().K8)((()=>v().oC(t,{recursivelyLoadAllDiscussions:!1})),[t]),A=(0,i().K8)((()=>h().A.state.open&&"comment"===h().A.state.content&&h().A.state.blockId===t.id),[t.id]),M=(0,n.useCallback)((()=>{if((0,b().I)({environment:w}),A||0===S)return void(0,m().l)({environment:w,blockStore:t});const e=h().A.state.open&&"comment"===h().A.state.content?h().A.state.discussionInputStore:null;A&&e?(f().A.setActiveWithSource("text_annotation"),(0,p().M)({discussionInputStore:e,environment:w})):u().B4({environment:w,blockStore:t,analyticsFrom:"embed_menu",shouldFocusDiscussion:!0,recursivelyLoadAllDiscussions:!1})}),[w,t,S,A]);return(0,x.jsx)(y().e,{"aria-label":o.formatMessage(k.ariaLabel),onClick:M,relative:!0,tooltip:o.formatMessage(k.tooltip),children:(0,x.jsxs)(r().fI,{gap:2,children:[(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(s().I,{icon:S?c()._:l().w,size:"sm"}),A?(0,x.jsx)(g().l,{color:"yellow"}):void 0]}),S>9?"9+":S>0?S:void 0]})})}},412237:(e,t,o)=>{o.r(t),o.d(t,{aiFaceSmallIcon:()=>i,iconDefinition:()=>a});o(296540);var n=o(474848);const a={viewBox:"0 0 16 16",fittedViewBox:"2.89 1.43 11.63 12.81",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M7.204 1.93a3.47 3.47 0 0 0-4.097.39.625.625 0 1 0 .834.931 2.22 2.22 0 0 1 3.16.202.625.625 0 0 0 .944-.818 3.5 3.5 0 0 0-.84-.705m6.018.976A3.47 3.47 0 0 0 8.463 4.1l-5.077 8.476a.625.625 0 0 0 .437.938l4.41.715a.625.625 0 0 0 .2-1.234l-3.5-.568 4.602-7.685a2.22 2.22 0 0 1 3.822.02.625.625 0 1 0 1.08-.63 3.46 3.46 0 0 0-1.214-1.226m-7.83 2.105a1.094 1.094 0 1 0-.35 2.159 1.094 1.094 0 0 0 .35-2.159"}),(0,n.jsx)("path",{d:"M10.762 5.881a1.093 1.093 0 1 0-.35 2.159 1.093 1.093 0 0 0 .35-2.159"})]})},i=(0,o(340498).wt)("aiFaceSmall",a,"small")},419357:(e,t,o)=>{o.d(t,{Ay:()=>x,KF:()=>y,LG:()=>h,Zf:()=>b,yD:()=>v});var n=o(296540),a=()=>o(484714),i=()=>o(401497),r=()=>o(718827),s=()=>o(695115),l=()=>o(31511),c=()=>o(546926),d=()=>o(424400),u=()=>o(340498),p=()=>o(100622),m=()=>o(496603),g=()=>o(284371),f=o(474848);const h=30,v=28;function b(e){const{icon:t}=e;return t({fill:p().Tj.icon.secondary,width:u().Ev.sm,height:u().Ev.sm,flexGrow:0,flexShrink:0})}function y(e){const t=(0,a().WS)(),o=(0,i().eP)(),n=(0,i().IS)((()=>({outlineButton:{...(0,r().qq)({shape:"default",size:"sm",hasIconOnly:!0,isButtonGapEnabled:!0}),fontWeight:g().Wy.medium,lineHeight:1.2,border:`1px solid ${p().Tj.border.primaryTranslucent}`,background:e.hasBackground?p().Tj.background.primary:void 0},outlineButtonHovered:{background:p().Tj.background.secondary},outlineButtonPressed:{background:(0,r().yZ)({color:p().Tj.background.primary,mode:o})}})),[e.hasBackground,o]);return(0,f.jsx)(s().A,{size:"xs",colorVariant:"primary",...e,ariaLabel:e.ariaLabel,style:{...n.outlineButton,...e.style,height:t?h:v,width:t?h:v},hoveredStyle:n.outlineButtonHovered,pressedStyle:n.outlineButtonPressed})}const x=n.forwardRef((function({preventCaptureArrowShortcuts:e,preventCaptureDeleteWhenEmpty:t,preventCaptureClipboardShortcuts:a,preventCaptureSpacebarWhenEmpty:i,...r},s){const{left:l,right:u,inputLeft:p,inputRight:g,inputRightStyle:h,disableInput:v,inputOuterStyle:b,rightMobileEditLabel:y,mobileKeyboardOnDismiss:x,style:k,value:A,onChange:M,autosize:I,autosizeMinHeight:C,autosizeMaxHeight:_,customElementAttributes:B,disabled:j,format:L,id:T,placeholder:E,type:F,autoFocus:P,focus:D,focusInitial:R,focusAfterAnimation:z,forceShowClearButton:N,ignoreKeyboardMode:V,inputElementAttributes:O,inputStyle:K,isRightLastElementOfInput:U,maxlength:W,min:H,max:G,selectAll:q,showClearButton:Y,suppressFocusRing:$,textarea:Q,textareaSubmitOnEnter:X,onBlur:Z,onCancel:J,onClearButtonClick:ee,onClick:te,onFocus:oe,onKeyDown:ne,onSubmit:ae,...ie}=r,[re,se]=(0,n.useState)((()=>Boolean(D||R)));(0,n.useEffect)((()=>{void 0!==D&&se(D)}),[D]);const le=e?void 0:m().D_,ce=!t||A.length>0?m().D_:void 0,de=a?void 0:m().D_,ue=!i||A.length>0?m().D_:void 0,pe=(0,c().Tf)(),me=(0,n.useContext)(c().xu),ge=(0,n.useRef)(null),fe={value:A,onChange:M,autosize:I,autosizeMinHeight:C,autosizeMaxHeight:_,customElementAttributes:B,disabled:j,format:L,id:T,placeholder:E,type:F,autoFocus:P,focus:D,focusInitial:R,focusAfterAnimation:z,forceShowClearButton:N,ignoreKeyboardMode:V,inputElementAttributes:O,inputStyle:K,isRightLastElementOfInput:U,maxlength:W,min:H,max:G,selectAll:q,showClearButton:Y,suppressFocusRing:$,textarea:Q,textareaSubmitOnEnter:X,onBlur:Z,onCancel:J,onClearButtonClick:ee,onClick:te,onFocus:oe,onKeyDown:ne,onSubmit:ae};return(0,f.jsx)(o(782482).N,{debugName:"InputMenuItem",capture:!0,onUntab:m().D_,onTab:m().D_,onSelectAll:m().D_,onRedo:m().D_,onUndo:m().D_,onToggleBold:m().D_,onToggleItalics:m().D_,onToggleCode:m().D_,onCut:de,onCopy:de,onPaste:de,onKeypress:m().D_,onLeft:le,onRight:le,onDelete:ce,onBackspace:ce,onSpace:ue,children:o(726637).A.isMobile?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(d().Ay,{ref:s,...ie,itemMarginLeft:pe?8:void 0,style:k,title:(0,f.jsx)(S,{ref:ge,left:l,right:u,inputLeft:p,inputRight:g,inputRightStyle:h,disableInput:v,inputOuterStyle:b,rightMobileEditLabel:y,isFocused:re,setIsFocused:se,...fe})}),(0,f.jsx)(o(797324).A,{show:re&&me.menuType!==c().gu.ActionSheet,onDismiss:x,inputRef:ge})]}):(0,f.jsx)(d().Ay,{ref:s,...ie,left:l,right:u,isTokenTitle:!0,title:(0,f.jsx)(w,{ref:ge,disableInput:v,inputOuterStyle:b,inputRight:g,inputRightStyle:h,inputLeft:p,...fe}),style:{paddingTop:4,paddingBottom:4,...k}})})}));function k({rightMobileEditLabel:e,inputRef:t}){const i=(0,a().v3)(),s=(0,n.useCallback)((e=>{e.preventDefault();const n=t.current;n&&(0,o(375555).G)(i,n)}),[i,t]);return(0,f.jsx)(r().Ay,{onClick:s,style:{color:p().Tj.text.secondary},children:e})}const w=n.forwardRef((function(e,t){const{disabled:o,disableInput:n,inputOuterStyle:a,inputRight:i,inputRightStyle:r,inputLeft:s,min:c,textarea:d,...u}=e;return(0,f.jsx)(l().A,{...u,ref:t,disabled:o||n,style:{height:d?void 0:28,padding:"3px 6px",...a},left:s,right:i,rightStyle:r,min:c,textarea:d})})),S=n.forwardRef((function(e,t){const{left:a,right:i,inputLeft:r,inputRight:s,inputRightStyle:c,disableInput:d,inputOuterStyle:u,rightMobileEditLabel:p,isFocused:m,setIsFocused:g,disabled:h,showClearButton:v,onBlur:b,onFocus:y,...x}=e,w=(0,n.useCallback)((e=>{g(!1),b&&b(e)}),[b,g]),S=(0,n.useCallback)((e=>{g(!0),y&&y(e)}),[y,g]),A=(0,n.useRef)(null),M=(0,o(93583).A)(A,t),I=p&&!m?(0,f.jsx)(k,{rightMobileEditLabel:p,inputRef:A}):null;return(0,f.jsx)(l().A,{...x,ref:M,format:"transparent",style:{fontSize:16,...u},onFocus:S,onBlur:w,showClearButton:!1!==v,disabled:h||d,left:r||a,right:I||s||i,rightStyle:c})}))},444796:(e,t,o)=>{o.d(t,{AS:()=>l,EH:()=>c});var n=()=>o(522419),a=()=>o(220719),i=()=>o(691648),r=()=>o(179266);const s=["png","jpg","jpeg","webp","heic","heif"];function l(e){if(!e)return!1;const t=n().QC(e);if(!t)return!1;const o=n()._J(e),a=s.includes(t.toLowerCase());return o&&a}async function c(e,t){const o=e.getOriginalImageSource();if((0,a().o9)(o),!o)return;const n=await(0,r().L)({url:o,isAuthenticated:!0,permissionRecord:e.pointer},t),{imageEditActions:s}=await i().h.load();return s.cropAndUploadImage({store:e,environment:t,proxiedOriginalUrl:n})}},449445:(e,t,o)=>{o.r(t),o.d(t,{arrowLineDownSmallIcon:()=>a,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"2.97 2.12 10.06 11.76",svg:(0,o(474848).jsx)("path",{d:"M8 2.125a.625.625 0 0 0-.625.625v7.128L5.378 7.881a.625.625 0 1 0-.884.884l3.064 3.064c.244.244.64.244.884 0l3.065-3.064a.625.625 0 0 0-.884-.884L8.625 9.878V2.75A.625.625 0 0 0 8 2.125m-4.403 10.5a.625.625 0 1 0 0 1.25h8.806a.625.625 0 1 0 0-1.25z"})},a=(0,o(340498).wt)("arrowLineDownSmall",n,"small")},460957:(e,t,o)=>{o.d(t,{E:()=>r});o(581454);var n=()=>o(201980),a=()=>o(718957),i=()=>o(29554);function r(e){const{multiSelection:t}=e;return(0,a().$W)(t).map((({store:e,selection:t})=>{const o=(0,n().RQ)(e.getValue()),a=(0,n().xbM)(o,t),{tokensInsideRange:r}=(0,n().AI5)(o,a.startIndex,a.endIndex);return(0,i().r4)(r,e)})).join("\n\n")}},465741:(e,t,o)=>{o.d(t,{C0:()=>I,CK:()=>E,Dx:()=>j,Fc:()=>P,Gi:()=>w,Hd:()=>R,KU:()=>z,TW:()=>T,Vm:()=>D,YA:()=>B,d0:()=>x,eb:()=>k,ls:()=>C,mY:()=>A,px:()=>_});o(16280),o(296540);var n=()=>o(590526),a=()=>o(675133),i=()=>o(792057),r=()=>o(732810),s=()=>o(197636),l=()=>o(584262),c=()=>o(31503),d=()=>o(898244),u=()=>o(713998),p=()=>o(69708),m=()=>o(284371),g=()=>o(720665),f=()=>o(390650),h=()=>o(492414),v=()=>o(499764),b=()=>o(98205),y=o(474848);const x=5e3,k=500,w=(0,p().YK)({characterLimitReached:{defaultMessage:"Character limit reached.",id:"form.characterLimitReached"},questionLimitReachedTitle:{defaultMessage:"Question limit reached",id:"form.questionLimitReached.title"},questionLimitReachedSubtitle:{defaultMessage:"Please delete a question before creating a new one.",id:"form.questionLimitReached.subtitle"},questionLimitReachedFullMessage:{defaultMessage:"Question limit reached. Please delete a question before creating a new one.",id:"form.questionLimitReached.fullMessage"}}),S=(0,p().YK)({title:{defaultMessage:"Title",id:"database.questionTypeName.title"},text:{defaultMessage:"Text",id:"database.questionTypeName.text"},number:{defaultMessage:"Number",id:"database.questionTypeName.numberTypeLabel"},url:{defaultMessage:"URL",id:"database.questionTypeName.url"},multi_select:{defaultMessage:"Multiple choice",id:"database.questionTypeName.multi_select"},person:{defaultMessage:"Person",id:"database.questionTypeName.person"},email:{defaultMessage:"Email",id:"database.questionTypeName.email"},phone_number:{defaultMessage:"Phone",id:"database.questionTypeName.phone_number"},date:{defaultMessage:"Date",id:"database.questionTypeName.dateTypeLabel"},file:{defaultMessage:"Files & media",id:"database.questionTypeName.file"},checkbox:{defaultMessage:"Checkbox",id:"database.questionTypeName.checkbox"},relation:{defaultMessage:"Relation",id:"database.questionTypeName.relation"},place:{defaultMessage:"Place",id:"database.questionTypeName.place"}}),A={title:a().A.formatMessage(S.title),text:a().A.formatMessage(S.text),number:a().A.formatMessage(S.number),url:a().A.formatMessage(S.url),multi_select:a().A.formatMessage(S.multi_select),person:a().A.formatMessage(S.person),email:a().A.formatMessage(S.email),phone_number:a().A.formatMessage(S.phone_number),date:a().A.formatMessage(S.date),file:a().A.formatMessage(S.file),checkbox:a().A.formatMessage(S.checkbox),relation:a().A.formatMessage(S.relation),place:a().A.formatMessage(S.place)},M=["relation","person"];function I(e,t){return t?"closed":e?"shared_to_web":"shared_to_space"}function C(e){const{formSharingState:t,isOverBlockLimit:o,spaceName:n}=e;if(o)return(0,y.jsx)(p().sA,{id:"editorFormResponderWarning.overBlockLimit.message",defaultMessage:"You are over the block limit. No new responses can be submitted through this form."});switch(t){case"closed":return(0,y.jsx)(p().sA,{id:"editorFormResponderWarning.closed.message",defaultMessage:"This form is closed. No new responses can be submitted."});case"shared_to_web":return(0,y.jsx)(p().sA,{id:"editorFormResponderWarning.public.message",defaultMessage:"This form is public. Anyone with the link can submit a response."});case"shared_to_space":return(0,y.jsx)(p().sA,{id:"editorFormResponderWarning.internal.message",defaultMessage:"Only members at {spaceName} can fill out this form.",values:{spaceName:n}})}}function _(e,t=!1){return e.getIsFormPublic()?(0,h().Ay)({store:e,preferPublicLink:!0,pageVisitSource:l().y8.FormPublicPage}):(0,h().Ay)({store:e,openInCenterPeek:t,pageVisitSource:l().y8.FormInternalPage})}function B({collectionContextStore:e,propertyId:t,questionId:o,area:n,parentModuleId:a,layoutStore:i}){var r,s;const l=e?(0,f().sl)(e):void 0,c=null==e?void 0:e.collectionViewStore(),d=null==e?void 0:e.collectionStore(),u=null==c?void 0:c.getFormat(),p=null==u||null===(r=u.form_block_pointer)||void 0===r?void 0:r.id,m=null==e||null===(s=e.normalizedSchemaStore.state)||void 0===s||null===(s=s[t])||void 0===s?void 0:s.type;if(!d)throw new Error("Collection store is undefined");return{question_type:m,question_id:o,form_id:p,is_conditional:"form_conditional_modules"===n,parent_question_type:(0,b()._N)(a,i,d),...l??{}}}function j(e){const t=null==e?void 0:e.getFormat().form_layout_pointer;if(t)return s().K.createChildStore(e,t)}const L=new(o(29923).R)({key:"opt_out_form_content_warning",namespace:o(553737).cd,important:!1,trackingType:"preference"});function T(e){const t=L.getState(),o=void 0===t||Date.now()-t>g().nD,n="file"===e.propertyType?(0,y.jsx)(p().sA,{id:"collectionFormHelpers.maybeWarnAboutMaliciousContent.file.message",defaultMessage:"Download file?"}):(0,y.jsx)(p().sA,{id:"collectionFormHelpers.maybeWarnAboutMaliciousContent.url.message",defaultMessage:"Open link?"}),a=(0,y.jsx)(p().sA,{id:"collectionFormHelpers.maybeWarnAboutMaliciousContent.description",defaultMessage:"This content was submitted anonymously. Only proceed if you trust the source."}),r="file"===e.propertyType?(0,y.jsx)(p().sA,{id:"collectionFormHelpers.maybeWarnAboutMaliciousContent.file.confirmLabel",defaultMessage:"Download anyway"}):(0,y.jsx)(p().sA,{id:"collectionFormHelpers.maybeWarnAboutMaliciousContent.url.confirmLabel",defaultMessage:"Open anyway"});o?i().ui({showCancel:!1,showCloseButton:!0,keepFocus:!0,mode:"wide",message:(0,y.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",fontWeight:m().Wy.medium},children:n}),description:(0,y.jsx)("div",{style:{textAlign:"center",fontSize:14},children:a}),items:[{label:r,onAccept:e.onConfirm,color:"red",buttonType:"solid"}],selectionItems:[{key:"opt_out",showBelowButtons:!0,text:(0,y.jsx)("span",{style:{fontWeight:m().Wy.regular},children:(0,y.jsx)(p().sA,{id:"collectionFormHelpers.maybeWarnAboutMaliciousContent.optOut",defaultMessage:"Don’t show again for 24 hours"})}),onSelect:e=>{!0===e?L.setState(Date.now()):L.setState(void 0)}}]}):e.onConfirm()}function E(e){const{environment:t,propertyType:o,propertySchema:n,isPublicForm:a}=e;if(a&&M.includes(o)){if("person"===o)return"invalid_property_type_for_public_form";if("relation"===(null==n?void 0:n.type)){const e=(0,d().Nv)(n);if(e){const o=new(r().m)(t,e);if(o.isDefined()){if(!(0,v().qw)(o))return"related_collection_not_public"}}}}}const F=(0,p().YK)({checkboxYes:{id:"FormResponseSnapshotModal.Checkbox.Yes",defaultMessage:"Yes"},checkboxNo:{id:"FormResponseSnapshotModal.Checkbox.No",defaultMessage:"No"}});function P(e){return"true"===e?a().A.formatMessage(F.checkboxYes):a().A.formatMessage(F.checkboxNo)}function D(e){const{formQuestionStore:t,propertySchema:o}=e;return(0,n().K8)((()=>{const e=null==t?void 0:t.getModel();return!(!e||!o)&&((0,c().Fi)({formQuestionModel:e,propertySchema:o})||"select"===(null==o?void 0:o.type))}),[t,o])}function R(e){const{draftFormBlockStore:t,formQuestionStore:o,propertyId:n,propertySchema:a}=e;if(!t||!n||!a)return;if("multi_select"!==a.type&&"select"!==a.type)return;const i=t.getPropertyValue(n);if("select"===a.type)return(0,u().L3)(i,a.options??[]);const r=o.getModel();if(r&&!(0,c().Fi)({formQuestionModel:r,propertySchema:a}))return;const s=(0,u().o2)(i,a.options??[]);return 1===s.length?s[0]:void 0}function z(e){var t;const{formQuestionStore:o,propertySchema:n}=e;if(n&&(0,d().lx)(n))return(null===(t=o.getPropertyTypeSpecificConfig(n.type))||void 0===t?void 0:t.displayMode)??"list"}},471266:(e,t,o)=>{o.d(t,{A:()=>s});var n=()=>o(917992),a=()=>o(553819);const i={open:!0,isImageLoaded:!1,saveButtonLoading:!1,imageRef:void 0,fixedAspectSelection:void 0,aspectSelectionFlipped:!1,outerContainerSize:void 0,innerContainerSize:void 0};class r extends(()=>o(757695))().Store{getInitialState(){return{open:!1}}openModal(e){const{originalSource:t,blockStore:o}=e,r="uploading"===a().A.getStatus(o.id)&&a().A.getMetadataByBlockId(o.id)||{...n().b,...o.getImageEditMetadata()};this.setState({...i,blockStore:o,originalSource:t,editMetadata:r,cropAspect:"Circle"===r.mask?1:void 0})}setSaveButtonLoading(e){this.state.open&&this.setState({...this.state,saveButtonLoading:e})}closeModal(e){var t;null==e||null===(t=e.onClose)||void 0===t||t.call(e),this.setState({open:!1})}getEditMetadata(){return this.state.open&&this.state.editMetadata||n().b}getIsImageLoaded(){return!!this.state.open&&this.state.isImageLoaded}setIsImageLoaded(e){this.state.open&&this.setState({...this.state,isImageLoaded:!0,imageRef:e})}setCrop(e){if(this.state.open){const t={...this.state.editMetadata,crop:e};this.setState({...this.state,editMetadata:t})}}setMask(e){if(this.state.open)switch(this.setState({...this.state,fixedAspectSelection:void 0,aspectSelectionFlipped:!1}),e){case"None":return void this.setFreeform();case"Circle":return void this.setCircleMask();default:(0,o(534177).HB)(e)}}async setFixedAspectRatio(e,t){if(!this.state.open)return;const{width:o,height:a}=n().oU[e],i=t?a/o:o/a,r=this.state.editMetadata,s=await this.getAspectCrop(r,i);s&&this.setState({...this.state,cropAspect:i,editMetadata:{...r,crop:s,mask:"None"},fixedAspectSelection:e,aspectSelectionFlipped:t})}setFreeform(){if(!this.state.open)return;const e=this.state.editMetadata;this.setState({...this.state,cropAspect:void 0,editMetadata:{...e,mask:"None"}})}async setCircleMask(){if(!this.state.open)return;const e=this.state.editMetadata,t=await this.getAspectCrop(e,1);t&&this.setState({...this.state,cropAspect:1,editMetadata:{crop:t,mask:"Circle"}})}async getAspectCrop(e,t){if(this.state.open){var n;const a=null===(n=this.state.imageRef)||void 0===n?void 0:n.current,i=null==e?void 0:e.crop;if(!a||!i)return;const{makeAspectCrop:r}=await o(691648).h.load();return r(i,t,a.width,a.height)}}resetCrop(){this.state.open&&(this.setCrop(n().b.crop),this.setMask(n().b.mask))}}const s=new r},473541:(e,t,o)=>{o.d(t,{w:()=>a});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"5.87 3.72 7.16 12.56",directional:!0,svg:(0,o(474848).jsx)("path",{d:"M6.131 9.381a.875.875 0 0 0 0 1.238l5.4 5.4a.875.875 0 1 0 1.238-1.238L7.987 10l4.782-4.781A.875.875 0 0 0 11.53 3.98z"})},a=(0,o(340498).wt)("arrowChevronSingleLeftFill",n,"fill")},476195:(e,t,o)=>{o.r(t),o.d(t,{codeSmallIcon:()=>a,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"0.17 1.77 15.66 12.45",svg:(0,o(474848).jsx)("path",{d:"M9.772 1.8a.625.625 0 0 0-.773.428l-3.2 11.2a.625.625 0 1 0 1.202.344l3.2-11.2a.625.625 0 0 0-.43-.773M4.762 4.038a.625.625 0 0 0-.884 0l-3.52 3.52a.625.625 0 0 0 0 .884l3.52 3.52a.625.625 0 1 0 .884-.884L1.684 8l3.078-3.078a.625.625 0 0 0 0-.884m7.36 0a.625.625 0 0 0-.884.884L14.316 8l-3.078 3.078a.625.625 0 0 0 .884.884l3.52-3.52a.625.625 0 0 0 0-.884z"})},a=(0,o(340498).wt)("codeSmall",n,"small")},484127:(e,t,o)=>{o.d(t,{Mi:()=>l,VJ:()=>m,W6:()=>u,ut:()=>d,y5:()=>s,ye:()=>p});o(410838),o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577),o(581454),o(908872),o(737550);var n=()=>o(832443),a=()=>o(252050),i=()=>o(412412);function r(e){const t=[],o=e.matchAll(/\[(step-[^\[\]]*?),(artifact|claim),(\d+)\]/g);for(const n of o){const[,e,o,a]=n;"claim"!==o&&"artifact"!==o||t.push({planKey:e,citationType:o,resourceId:a})}return t}function s(e){let t=1;return e.replace(/\[(step-[^\[\]]*?),(artifact|claim),(\d+)\]/g,((e,o,n,a)=>{const i=encodeURIComponent(o),r=encodeURIComponent(n),s=encodeURIComponent(a),l=encodeURIComponent(",");return`[**[${t++}]**](#citation:${i}${l}${r}${l}${s})`}))}function l(e,t){const o={stepCitations:{...e.stepCitations}};for(const[n,a]of Object.entries(t.stepCitations)){if(!o.stepCitations[n]){o.stepCitations[n]={claims:[...a.claims],artifacts:[...a.artifacts]};continue}const e=new Set(o.stepCitations[n].claims.map((e=>e.id)));for(const i of a.claims)e.has(i.id)||o.stepCitations[n].claims.push(i);const t=new Set(o.stepCitations[n].artifacts.map((e=>e.id)));for(const i of a.artifacts)t.has(i.id)||o.stepCitations[n].artifacts.push(i)}return o}const c={"slack-result":"slack","google-drive-result":"google-drive","helpdoc-result":"helpdoc","github-result":"github","webpage-result":"webpage","jira-result":"jira","microsoft-teams-result":"microsoft-teams","sharepoint-result":"sharepoint"};function d(e,t){const o=[],r=(0,i().BD)(e.value,!1,{parseNoneClosedTags:!0})[0];if("element"!==r.type)return o;for(const l of r.children){if("element"!==l.type)continue;let e;const r=t.mapCounterToKey((0,a().VB)(l.attributes.id));if("element"!==l.type||"page"!==l.tagName&&"block"!==l.tagName){if("element"===l.type&&("slack-result"===l.tagName||"github-result"===l.tagName||"google-drive-result"===l.tagName||"jira-result"===l.tagName||"sharepoint-result"===l.tagName||"microsoft-teams-result"===l.tagName||"webpage"===l.tagName||"helpdoc"===l.tagName)){var s;const t=n().tD.parseAssistantHref(r.key),o="text"===(null===(s=l.children[0])||void 0===s?void 0:s.type)?l.children[0].value:"",a="slack-result"===l.tagName||"microsoft-teams-result"===l.tagName?l.attributes.channel:l.attributes.title;e={citationType:"universal_search",target:c[l.tagName],href:r.key,title:a,text:o,number:Number(l.attributes.id),...t}}}else{const o=t.mapCounterToKey((0,a().VB)(null==l?void 0:l.attributes.id));e={citationType:"notion",pageId:o.key,blockId:"block"===l.tagName?r.key:o.key,number:Number(l.attributes.id)}}o.push({id:l.attributes.id,artifactType:"text",content:(0,i()._o)(l),citationInfo:e})}return o}function u(e){try{const t=[];for(const a in e.stepCitations){const o=e.stepCitations[a];for(const e of o.artifacts||[])e.citationInfo&&t.push(e.citationInfo)}const o=t.length,n={};for(const e of t){if(!e)continue;let t="unknown";"notion"===e.citationType?t="notion":"universal_search"===e.citationType&&(t=e.target||"unknown"),n[t]=(n[t]||0)+1}return{allArtifacts:t,resultsBySource:n,numSearchResults:o}}catch(t){return{allArtifacts:[],resultsBySource:{},numSearchResults:0}}}function p(e,t){try{const c=r(e),d={},u=new Set;for(const e of c){const{planKey:r,citationType:c,resourceId:p}=e;try{var o;if(!r||!c||!p)continue;const e=t.stepCitations[r];if(!e)continue;let l;if("claim"===c){var n,a;const t=null===(n=e.claims)||void 0===n?void 0:n.find((e=>e.id===p));var i;if(null!=t&&null!==(a=t.supportingArtifactIds)&&void 0!==a&&a[0])l=null===(i=e.artifacts)||void 0===i?void 0:i.find((e=>e.id===t.supportingArtifactIds[0]))}else if("artifact"===c){var s;l=null===(s=e.artifacts)||void 0===s?void 0:s.find((e=>e.id===p))}if(null!==(o=l)&&void 0!==o&&o.citationInfo){let e="unknown";"notion"===l.citationInfo.citationType?(e="notion",u.add(l.citationInfo.pageId)):"universal_search"===l.citationInfo.citationType&&(e=l.citationInfo.target||"unknown"),d[e]=(d[e]||0)+1}}catch(l){continue}}return{citationsBySource:d,numCitationsShown:Object.values(d).reduce(((e,t)=>e+t),0),citationPageIds:Array.from(u)}}catch(l){return{citationsBySource:{},numCitationsShown:0,citationPageIds:[]}}}function m(e){const t=e.findLast((e=>"researcher-report"===e.type));return{citationInfo:t&&t.citationInfo?t.citationInfo:{stepCitations:{}},reportContent:(null==t?void 0:t.value)||""}}},506290:(e,t,o)=>{o.d(t,{F:()=>a});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"2.37 2.57 11.25 12.45",svg:(0,o(474848).jsx)("path",{d:"M3.8 2.575c-.787 0-1.425.638-1.425 1.425v.8c0 .787.638 1.425 1.425 1.425h3.575v.95H3.8c-.787 0-1.425.638-1.425 1.425v.8c0 .787.638 1.425 1.425 1.425h3.575v2.046l-.913-.913a.625.625 0 1 0-.884.884l2 2c.244.244.64.244.884 0l2-2a.625.625 0 1 0-.884-.884l-.953.953v-2.086H12.2c.787 0 1.425-.638 1.425-1.425v-.8c0-.787-.638-1.425-1.425-1.425H8.625v-.95H12.2c.787 0 1.425-.638 1.425-1.425V4c0-.787-.638-1.425-1.425-1.425zM3.625 4c0-.097.078-.175.175-.175h8.4c.097 0 .175.078.175.175v.8a.175.175 0 0 1-.175.175H3.8a.175.175 0 0 1-.175-.175zm0 4.6c0-.097.078-.175.175-.175h8.4c.097 0 .175.078.175.175v.8a.175.175 0 0 1-.175.175H3.8a.175.175 0 0 1-.175-.175z"})},a=(0,o(340498).wt)("flowchartSmall",n,"small")},544156:(e,t,o)=>{o.r(t),o.d(t,{AnimatedSimpleTableActionBar:()=>k});var n=o(296540),a=()=>o(726637),i=()=>o(590526),r=()=>o(380745),s=()=>o(893497),l=()=>o(206051),c=()=>o(709219),d=()=>o(484714),u=o(474848);const p={viewBox:"0 0 16 16",fittedViewBox:"0.5 4.54 14.98 6.92",svg:(0,u.jsx)("path",{d:"M4.403 4.73a.625.625 0 0 0-.884 0L.691 7.558a.625.625 0 0 0 0 .884l2.828 2.828a.625.625 0 1 0 .884-.883L2.64 8.625h4.23a.625.625 0 1 0 0-1.25H2.64l1.762-1.761a.625.625 0 0 0 0-.884m8.072 0a.625.625 0 1 0-.884.884l1.762 1.761H9.135a.625.625 0 1 0 0 1.25h4.217l-1.762 1.761a.625.625 0 0 0 .884.884l2.829-2.828a.625.625 0 0 0 0-.884z"})},m=(0,o(340498).wt)("arrowExpandHorizontalSmall",p,"small");var g=()=>o(69708),f=()=>o(326496),h=()=>o(547149),v=()=>o(919878);const b=(0,g().YK)({actionBarAriaLabel:{id:"SimpleTableActionBar.ariaLabel",defaultMessage:"Table action bar"},fullWidthAriaLabel:{id:"SimpleTableActionBar.fullWidthAriaLabel",defaultMessage:"Update block to full width of parent block"}});function y(e){const{store:t,parentWidth:n}=e,a=(0,g().tz)();return(0,u.jsxs)(o(53436).E,{"aria-label":a.formatMessage(b.actionBarAriaLabel),children:[(0,u.jsx)(x,{store:t,parentWidth:n}),(0,u.jsx)(o(908759).h,{store:t})]})}function x(e){const{store:t,parentWidth:o}=e,a=(0,g().tz)(),i=(0,d().v3)(),r=(0,n.useCallback)((()=>{h().createAndCommit({userAction:"SimpleTableActionBar.fitToParentWidth",environment:i,canUndo:!0,perform:e=>{v().tZ({simpleTableStore:t,parentWidth:o,transaction:e})}})}),[i,t,o]);return(0,u.jsx)(f().e,{"aria-label":a.formatMessage(b.fullWidthAriaLabel),onClick:r,iconLeading:m})}function k(e){const{store:t}=e,o=(0,i().K8)((()=>{if(!a().A.isMobile)return!1;if(r().A.state.isKeyboardMode)return!1;const e=c().A.state.isActive&&c().A.state.simpleTableStore===t,o=1===l().default.state.stores.length&&l().default.state.stores[0]===t;return e||o}),[t]);return(0,u.jsx)(s().L,{...e,tag:w,visible:o})}const w=n.forwardRef(((e,t)=>{const{store:n,rootSizeObserver:a,hoverSizeObserver:r,offset:s,style:l}=e,c=(0,i().K8)((()=>{var e;const t=o(836724).T.findScrollToSelectableFromStore(n);return null==t||null===(e=t.getNode())||void 0===e?void 0:e.getBoundingClientRect()}),[n]),d=(0,i().K8)((()=>r.rect.state.width),[r]),p=(0,i().K8)((()=>{const e=(null==c?void 0:c.width)||0,t=a.rect.state.width;return Math.min(e,t,d)+s}),[c,a,d,s]),m=(0,o(401497).IS)((()=>({wrapper:{...l,position:"absolute",zIndex:1,width:0,top:-32,insetInlineStart:p},inner:{position:"absolute",insetInlineEnd:0}})),[p,l]);return c?(0,u.jsx)("div",{style:m.wrapper,ref:t,children:(0,u.jsx)("div",{style:m.inner,children:(0,u.jsx)(y,{store:n,parentWidth:d})})}):null}));w.displayName="SimpleTableActionBarWrapper"},553668:(e,t,o)=>{o.r(t),o.d(t,{MobileActionBar:()=>l});o(296540);var n=()=>o(726637),a=()=>o(401497),i=()=>o(53436),r=()=>o(908759),s=o(474848);function l(e){const t=(0,a().IS)((()=>({wrapper:{zIndex:1,position:"absolute",top:4,insetInlineEnd:4}})),[]);return n().A.isMobile?(0,s.jsx)("div",{style:t.wrapper,children:(0,s.jsx)(i().E,{children:(0,s.jsx)(r().h,{store:e.store})})}):null}},555102:(e,t,o)=>{o.d(t,{BX:()=>I,Jv:()=>A,Kf:()=>k,WM:()=>y,Xd:()=>_,Xw:()=>B,bX:()=>v,uP:()=>w,yQ:()=>C});o(944114),o(898992),o(354520),o(803949),o(581454);var n=()=>o(906745),a=()=>o(242422),i=()=>o(158489),r=()=>o(416504),s=()=>o(179034),l=()=>o(155792),c=()=>o(201980),d=()=>o(534177),u=()=>o(799832),p=()=>o(594794),m=()=>o(460957),g=()=>o(968172),f=()=>o(712505),h=()=>o(718957);const v=new(o(140934).ComputedStore)((()=>{const{sidebarSpaceStore:e,currentUserStore:t,sidebarSpaceViewStore:n,mainEditorCurrentBlockStore:a}=o(907258).default.state;if(e&&t&&n)return{spaceStore:e,userStore:t,spaceViewStore:n,blockStore:a,peekStore:f().default.state.open?f().default.state.targetStore:void 0,workflowStore:(0,o(207214).k)(e.environment)}}),{debugName:"defaultInferenceContextStore"});function b(e){const t={};if(e.isCollectionView()){const o=(0,u().U)(e),n=null==o?void 0:o.collectionViewStore();n&&(t[e.id]=n.id)}else e.getContentStores().forEach((e=>{if(e.isCollectionView()){const o=(0,u().U)(e),n=null==o?void 0:o.collectionViewStore();n&&(t[e.id]=n.id)}}));return t}function y(e){const{environment:t,surface:o,inferenceContext:i,config:s,invokedFromBlockId:c,checklistId:d,checklistStepId:u}=e,{userStore:m,spaceStore:f,spaceViewStore:h,blockStore:v,peekStore:y,workflowStore:x}=i,k=(0,p().Z1)({environment:t,table:l().mS,spaceId:f.id}),w={...v&&v.isCollectionView()?{collectionViewBlockId:v.id,visibleCollectionViewIds:b(v)}:void 0,...v&&!v.isCollectionView()&&"personal_home_page"!==v.getType()&&"daily_brief_reminder"!==o?{blockId:v.id,visibleCollectionViewIds:b(v)}:void 0,...y?{peekBlockId:y.id,visibleCollectionViewIds:b(y)}:void 0,...x?{workflowId:x.id}:void 0},S={};if("workflow"!==s.type||!s.isCustomAgent){const e=h.getSettings(),t=null==e?void 0:e.agent_personalization_settings;var A;if(t)t.name&&(S.agentName=t.name),null!==(A=t.customization_items)&&void 0!==A&&A[0]&&(S.agentAccessory=t.customization_items[0]),t.context_page_id&&(S.context_page_id=t.context_page_id)}if(a().default.checkGate({gateName:"workflows_inference_replay"}))return{id:k,type:"context",value:{timezone:"America/Los_Angeles",userName:"Test User",userEmail:"test@example.com",userId:"test-user-id",spaceName:"Test Space",spaceId:f.id,spaceViewId:h.id,currentDatetime:"2024-01-01T00:00:00.000Z",surface:o,...w,invokedFromBlockId:c,..."onboarding_checklist"===o&&d&&u?{checklistId:d,checklistStepId:u}:{},...S}};const M=a().default.checkGate({gateName:"agent_user_session_context"})?function(e){const{spaceId:t,limit:o=10}=e,n=g().A.getWithoutSubscribing(t);return n.map((({pageId:e,visitedAt:t})=>({pageId:e,visitedAt:t}))).slice(0,o)}({spaceId:f.id}):void 0;return{id:k,type:"context",value:{timezone:(0,r().P)(),userName:m.getName(),userId:m.id,userEmail:m.getEmail(),spaceName:f.getName(),spaceId:f.id,spaceViewId:h.id,currentDatetime:n().DateTime.now().toISO(),surface:o,...w,invokedFromBlockId:c,..."onboarding_checklist"===o&&d&&u?{checklistId:d,checklistStepId:u}:{},...S,recentPageVisits:M}}}function x(e){const{environment:t,spaceStore:o,config:n}=e;return{id:(0,p().Z1)({environment:t,table:l().mS,spaceId:o.id}),type:"config",value:n}}function k(e){const{environment:t,spaceStore:o,value:a,userStore:i}=e,r=S(a);return{id:(0,p().Z1)({environment:t,table:l().mS,spaceId:o.id}),type:"user",value:r,userId:i.id,createdAt:n().DateTime.now().toISO()}}function w(e){const{environment:t,spaceStore:o,actualMessage:a,displayMessage:i,userStore:r}=e,s=S(a)??[],c=S(i);return{id:(0,p().Z1)({environment:t,table:l().mS,spaceId:o.id}),type:"user-injected",actualMessage:s,displayMessage:c,userId:r.id,createdAt:n().DateTime.now().toISO()}}function S(e){if(e)return(0,c().bBR)((0,c().ooo)(e))}function A({environment:e,spaceStore:t,userStore:o,promptType:n,value:a,locale:i,args:r}){return{id:(0,p().Z1)({environment:e,table:l().mS,spaceId:t.id}),type:"agent-prebuilt-prompt",promptType:n,userId:o.id,createdAt:Date.now(),value:a,locale:i,isEdited:!1,args:r}}const M=1200;function I(e){const{environment:t,spaceId:o,pointers:n,selectedBlockStores:a,textSelection:i,blockSelectionContext:r,textSelectionContext:c}=e;let d,u;if(r)d=r;else if(a&&a.length>0){const e=(0,h().BO)(a);e&&(d={type:"blocks",value:a.map((e=>e.pointer)),text:(0,m().E)({mode:"editing",multiSelection:e,forceExtendAnnotations:{}}).slice(0,M)})}if(c?u=c:i&&i.start.store.pointer.table===s().ev&&i.end.store.pointer.table===s().ev&&(u={type:"text",value:{start:{pointer:i.start.store.pointer,index:i.start.index},end:{pointer:i.end.store.pointer,index:i.end.index}},text:(0,m().E)({mode:"editing",multiSelection:i,forceExtendAnnotations:{}}).slice(0,M)}),0!==n.length||d||u)return{id:(0,p().Z1)({environment:t,table:l().mS,spaceId:o}),type:"user-specified-context",value:{pointers:n,blockSelection:d,textSelection:u}}}function C(e){const{activeRecordPointers:t,inactiveRecordPointers:o,environment:n,recordMap:a,spaceStore:r}=e;return{activeRecordPointers:t,inactiveRecordPointers:o,id:(0,p().Z1)({environment:n,spaceId:r.id,table:l().mS}),threadRecordMap:a&&a.getSize()>0?(0,i().he)(a):void 0,type:"agent-integration"}}function _(e){const{environment:t,inferenceContext:o,config:n,addSteps:a,surface:i,invokedFromBlockId:r,checklistId:s,checklistStepId:l}=e,c=[x({environment:t,spaceStore:o.spaceStore,config:n}),y({environment:t,inferenceContext:o,surface:i,config:n,invokedFromBlockId:r,checklistId:s,checklistStepId:l})];return a&&c.push(...a),c.filter(d().O9)}function B(e){const{environment:t,spaceId:o,message:n,notificationType:a="info",metadata:i}=e;return{id:(0,p().Z1)({environment:t,table:l().mS,spaceId:o}),type:"system-notification",message:n,notificationType:a,metadata:i}}},566531:(e,t,o)=>{o.d(t,{w:()=>a});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"2.12 2.57 11.75 11.7",svg:(0,o(474848).jsx)("path",{d:"M4 2.575c-1.036 0-1.875.84-1.875 1.875v5.5c0 1.036.84 1.875 1.875 1.875h.466v1.822a.625.625 0 0 0 1.019.485l2.84-2.307H12c1.036 0 1.875-.84 1.875-1.875v-5.5c0-1.035-.84-1.875-1.875-1.875zM3.375 4.45c0-.345.28-.625.625-.625h8c.345 0 .625.28.625.625v5.5c0 .345-.28.625-.625.625H8.102a.63.63 0 0 0-.394.14l-1.992 1.619V11.2a.625.625 0 0 0-.625-.625H4a.625.625 0 0 1-.625-.625z"})},a=(0,o(340498).wt)("commentSmall",n,"small")},566910:(e,t,o)=>{o.d(t,{e:()=>i});o(296540);var n=o(474848);const a={viewBox:"0 0 20 20",fittedViewBox:"0.97 2.72 18.06 14.56",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M3.893 2.875a.626.626 0 0 1 .79-.02l.092.088.126.146.016.035.072.105 11.273 13.15a.624.624 0 0 1-1.036.678l-1.615-1.884c-1.12.408-2.339.633-3.611.633-3.757 0-7.049-1.946-8.707-4.843l-.155-.283a1.46 1.46 0 0 1 0-1.359l.155-.283c.89-1.554 2.249-2.835 3.898-3.688L3.826 3.757l-.072-.105a.626.626 0 0 1 .14-.777M6.031 6.33c-1.564.744-2.842 1.913-3.653 3.33l-.134.243a.21.21 0 0 0 0 .197l.134.243c1.426 2.49 4.292 4.214 7.622 4.214.958 0 1.877-.144 2.734-.406l-1.1-1.284a3.3 3.3 0 0 1-1.634.438l-.17-.004a3.307 3.307 0 0 1-3.132-3.133l-.004-.17c0-.777.269-1.492.718-2.056zm2.904 3.387q-.037.135-.038.281a1.104 1.104 0 0 0 1.218 1.097zM10 4.194c3.878 0 7.26 2.075 8.862 5.127l.074.164c.125.332.125.7 0 1.032l-.074.163a9.3 9.3 0 0 1-2.987 3.327l-.82-.955c1.15-.764 2.084-1.779 2.7-2.953l.02-.048a.2.2 0 0 0 0-.1l-.02-.049C16.382 7.282 13.438 5.445 10 5.445q-.705 0-1.378.1l-.94-1.098A10.7 10.7 0 0 1 10 4.194"}),(0,n.jsx)("path",{d:"M10.17 6.694a3.307 3.307 0 0 1 3.136 3.303l-.005.17a3.3 3.3 0 0 1-.116.702L9.624 6.713A3 3 0 0 1 10 6.691z"})]})},i=(0,o(340498).wt)("eyeSlash",a,"default")},568365:(e,t,o)=>{o.d(t,{M:()=>n});const n=new(o(867772).Ay)},589407:(e,t,o)=>{o.r(t),o.d(t,{ellipsisIcon:()=>a,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.62 8.62 14.76 2.76",svg:(0,o(474848).jsx)("path",{d:"M4 11.375a1.375 1.375 0 1 0 0-2.75 1.375 1.375 0 0 0 0 2.75m6 0a1.375 1.375 0 1 0 0-2.75 1.375 1.375 0 0 0 0 2.75m6 0a1.375 1.375 0 1 0 0-2.75 1.375 1.375 0 0 0 0 2.75"})},a=(0,o(340498).wt)("ellipsis",n,"default")},607481:(e,t,o)=>{o.d(t,{K:()=>a});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"3.66 3.65 8.68 8.68",directional:!0,svg:(0,o(474848).jsx)("path",{d:"M12.154 3.846a.614.614 0 0 0-.867-.017l-6.374 6.374v-4.6a.625.625 0 1 0-1.25 0v6.11c0 .345.28.624.625.624h6.109a.625.625 0 1 0 0-1.25h-4.6l6.374-6.374a.614.614 0 0 0-.017-.867"})},a=(0,o(340498).wt)("arrowDiagonalDownLeftSmall",n,"small")},627503:(e,t,o)=>{o.d(t,{a:()=>a});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"1.37 1.37 13.25 13.25",svg:(0,o(474848).jsx)("path",{d:"M3.25 1.375c-1.036 0-1.875.84-1.875 1.875v6c0 1.036.84 1.875 1.875 1.875h1.625v1.625c0 1.036.84 1.875 1.875 1.875h6c1.036 0 1.875-.84 1.875-1.875v-6c0-1.036-.84-1.875-1.875-1.875h-1.625V3.25c0-1.036-.84-1.875-1.875-1.875zM2.625 3.25c0-.345.28-.625.625-.625h6c.345 0 .625.28.625.625v1.625H6.75c-1.036 0-1.875.84-1.875 1.875v3.125H3.25a.625.625 0 0 1-.625-.625zm3.5 3.5c0-.345.28-.625.625-.625h6c.345 0 .625.28.625.625v6c0 .345-.28.625-.625.625h-6a.625.625 0 0 1-.625-.625z"})},a=(0,o(340498).wt)("duplicateSmall",n,"small")},636714:(e,t,o)=>{o.d(t,{A:()=>k});o(898992),o(354520),o(581454);var n=o(296540),a=()=>o(590526),i=()=>o(182412),r=()=>o(683021),s=()=>o(498521),l=()=>o(449279),c=()=>o(663639),d=()=>o(922931),u=()=>o(535393),p=()=>o(736847),m=()=>o(452004),g=()=>o(69708),f=()=>o(231536),h=()=>o(671894),v=o(474848);const b=25,y=200,x=o(757695).Store.createClass(b,{name:"limitStore"});function k({topBorder:e,context:t,onAccept:o,onFocus:k,empty:w,keyboardPriority:S,disableKeyboard:A,initialFocus:M,onEmptyEnter:I,comboboxProps:C,useLimit:_,onFilteredSectionsChange:B,filter:j,sections:L,menuListStore:T,resetInitialFocusOnSectionChangeAlways:E,resetFocusOnMouseOut:F,role:P,showNoResultsMessage:D,onFooterEnter:R,filterSections:z,flattenSectionsOnSearch:N,renderItemStyles:V,shouldShowBlockTypeTitle:O}){const K=(0,a().uB)(void 0,x),U=(0,a().uB)(T,m().$),[W,H,G]=(0,a().K8)((()=>{let e=0;const o=(0,h().js)({sections:j&&z?z:L,context:t,query:j||"",shouldShowBlockTypeTitle:O});for(const t of o)e+=t.actions.length;return[_?(0,h().Le)(o,K.state):o,e,o]}),[L,t,j,_,K,z,O]);(0,n.useEffect)((()=>{r().Ay.state.open&&r().rA.setState(0===G.length)}),[G]),(0,n.useEffect)((()=>{null==B||B(W)}),[B,W]);const q=(0,n.useRef)(j),Y=(0,n.useCallback)((e=>{e<y&&K.state<H&&K.setState(K.state+b)}),[K,H]),$=Boolean(N&&j),Q=(0,n.useMemo)((()=>{const e=new Map;for(const t of G)if(t.key!==i().IZ)for(const o of t.actions)e.set(o.key,t.title);return e}),[G]),{menuItemActionMap:X,menuItemSectionKeyMap:Z,menuListSections:J}=(0,n.useMemo)((()=>{const n=new Map,a=new Map,r=W.map((r=>{const s=r.key.toString();return{key:r.key,render:t=>r.render({...t,topBorder:!$&&(0!==t.index||Boolean(e)),title:r.title,hideTitle:$}),items:r.actions.map((e=>{e.lazyDependencyKeys&&(0,f().G)(...e.lazyDependencyKeys);const l={key:e.key,render:(n,a)=>{const l=r.key===i().IZ?Q.get(e.key):r.title,c=$||r.key===i().IZ;return e.render(n,t,{onAccept:(e,t,n)=>{null==o||o(e,t,n,s)},onFocus:a.onFocus,sectionTitle:l,extendItemTitle:c,styles:V})},action:({event:o})=>{e.action(t,o)}};return n.set(l,e),a.set(l,s),l}))}}));return{menuItemActionMap:n,menuItemSectionKeyMap:a,menuListSections:r}}),[W,$,e,Q,t,V,o]);(0,n.useEffect)((()=>{if(j!==q.current&&0===M){q.current=j;if(Boolean(R)&&0===u().i2(J))return d().rd({store:U});U.setState({...U.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}}),[j,M,J,U,R]);const ee=(0,n.useCallback)(((e,n)=>{if(o){const i=X.get(e),r=Z.get(e);if(i){var a;if(null!==(a=i.isDisabled)&&void 0!==a&&a.call(i,t))return;o(i,t,n.event,r,n.index)}}}),[o,t,X,Z]),te=(0,n.useCallback)((e=>{let o;var n;(e.indexLocal&&(o=u().SG(e.indexLocal,J)),e.indexGlobal)&&(o=null===(n=u().e7(e.indexGlobal,J))||void 0===n?void 0:n.item);if(!o)return;const a=X.get(o),i=Z.get(o);a&&(null==k||k(a,t,i))}),[X,Z,k,J,t]);return(0,v.jsxs)(v.Fragment,{children:[Boolean(D)&&0===W.length?(0,v.jsx)(p().A,{children:(0,v.jsx)(l().u,{title:w||(0,v.jsx)(g().sA,{id:"action.search.noResults",defaultMessage:"No results"})})}):void 0,(0,v.jsx)(c().A,{type:c().O.Vertical,role:P,priority:S,store:U,disableKeyboard:A,sections:J,initialFocus:M,onEmptyEnter:I,onAccept:ee,onFocus:te,comboboxProps:C,resetInitialFocusOnSectionChangeAlways:E,resetFocusOnMouseOut:F,onFooterEnter:R}),_?(0,v.jsx)(s().A,{onChange:Y}):void 0]})}},662971:(e,t,o)=>{o.d(t,{A:()=>m});var n=o(296540),a=()=>o(30537);const i=function(){const[e,t]=n.useState({x:0,y:0});return n.useEffect((()=>{const e=e=>{t({x:e.clientX,y:e.clientY})};return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}}),[]),e};var r=o(474848);function s({x:e,mouseX:t}){return t>e?void 0:-Math.max(e-t,10)+"px"}function l({x:e,width:t,mouseX:o}){return o>e?-Math.max(o-(e+t),10)+"px":void 0}function c({x:e,width:t,mouseX:o}){return o>e?`${Math.max(o-(e+t),10)}px`:`${Math.max(e-o,10)}px`}function d({x:e,y:t,height:o,mouseX:n,mouseY:a}){return n>e?`polygon(0% 0%, 0% 100%, 100% ${100*(a-t)/o}%)`:`polygon(100% 0%, 0% ${100*(a-t)/o}%, 100% 100%)`}function u(e){const{x:t=0,y:o=0,height:a=0,width:u=0}=e.el.getBoundingClientRect()||{},{x:p,y:m}=i(),g={x:t,y:o,height:a,width:u,mouseX:p,mouseY:m},f=(0,n.useRef)(null),h=n.useCallback((e=>{if(f.current){f.current.style.pointerEvents="none";const t=document.elementFromPoint(e.clientX,e.clientY);if(f.current.style.pointerEvents="auto",t){const o=new MouseEvent(e.nativeEvent.type,e.nativeEvent);t.dispatchEvent(o)}}}),[]),v={insetInlineEnd:l(g),insetInlineStart:s(g),height:a,width:c(g),clipPath:d(g)};return(0,r.jsx)("div",{ref:f,onClick:h,style:{cursor:"pointer",position:"absolute",pointerEvents:"auto",top:0,...v}})}function p({onClick:e,renderOrigin:t,renderExtension:i,allowOptionalExtensionMenu:s,...l},c){const{disabled:d,disableDefaultClick:p,onFocus:m,focused:g,openOnFocus:f,placementToOrigin:h,alignmentToOrigin:v,disableCloseOnEnter:b,bottomSheetInitialState:y,popupTypeOverride:x}=l,k=(0,o(484714).WS)(),w=(0,o(546926).Tf)(),[S,A]=(0,n.useState)(!1),M=(0,n.useRef)(null),I=(0,n.useRef)(null),C=(0,n.useRef)(null),_=(0,n.useRef)(null),B=(0,n.useCallback)((()=>{C.current&&window.clearTimeout(C.current),_.current&&window.clearTimeout(_.current),C.current=null,_.current=null}),[]),j=(0,n.useCallback)((()=>{B(),d||A(!0)}),[d,B]),L=(0,n.useCallback)((()=>{B(),A(!1)}),[B]),T=(0,n.useCallback)((e=>{B(),S||(e&&e.preventDefault&&e.preventDefault(),C.current=window.setTimeout(j,120))}),[S,B,j]),E=(0,n.useCallback)((()=>{B(),S&&(_.current=window.setTimeout(L,100))}),[S,L,B]),F=(0,n.useCallback)((t=>{m(),j(),s&&(null==e||e(t),L())}),[m,j,s,e,L]),P=(0,n.useCallback)((()=>{T()}),[T]),D=(0,n.useCallback)((()=>{m(),T()}),[m,T]),R=(0,n.useCallback)((e=>{if(o(726637).A.isMobile)return;const t=M.current;S&&t&&!t.contains(e.target)&&L()}),[S,L]),z=(0,n.useCallback)((e=>{13===e.keyCode&&S&&!b&&L()}),[S,L,b]);(0,n.useEffect)((()=>{if(!Boolean(p))return window.addEventListener("click",R),()=>{window.removeEventListener("click",R)}}),[p,R]),(0,n.useEffect)((()=>(window.addEventListener("keydown",z),()=>{window.removeEventListener("keydown",z)})),[z]);const N=(0,n.useRef)(g);(0,n.useEffect)((()=>{f&&!N.current&&g?T():!g&&N.current&&E(),N.current=g}),[g,f,T,E]);const V=(0,o(401497).IS)((()=>({mobilePopupStyle:{borderRadius:12,backgroundColor:o(100622).Tj.background.secondary}})),[]),O={...(0,o(383036).A)({onMouseEnter:P,onClick:F},l),showExtensionArrow:!0};let K=a().n.Popup;return x?K=x:k&&(K=w?a().n.BottomSheet:a().n.SlideUp),(0,r.jsx)(o(782482).N,{debugName:"ExtensionMenuItem",capture:g,onEnter:S?void 0:T,onRight:T,onLeft:S?E:void 0,onEsc:S?E:void 0,children:(0,r.jsx)(o(127833).zD,{popupType:K,bottomSheetInitialState:y,open:S,origin:t(O,c),placementToOrigin:h??"right",alignmentToOrigin:v??"center",originGap:0,disableMouseCapture:!0,preventBlockRenderQueueOnEnter:!0,preventScaleTransition:!k,preventCaptureEsc:!0,ref:M,render:()=>(0,r.jsxs)(r.Fragment,{children:[!k&&I.current?(0,r.jsx)(u,{el:I.current}):null,(0,r.jsx)("div",{ref:I,style:{height:"100%"},children:i({onMouseEnter:D},{close:E})})]}),style:{overflow:"visible",...k&&V.mobilePopupStyle},trapFocus:!0,onDismiss:L})})}const m=n.forwardRef(p)},662984:(e,t,o)=>{o.r(t),o.d(t,{arrowExpandDiagonalBottomLeftToTopRightSmallIcon:()=>a,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"2.46 2.46 11.08 11.08",svg:(0,o(474848).jsx)("path",{d:"M8.912 2.463a.625.625 0 1 0 0 1.25h2.491L8.358 6.758a.625.625 0 1 0 .884.884l3.045-3.045v2.49a.625.625 0 1 0 1.25 0v-4a.625.625 0 0 0-.625-.624zM7.64 8.36a.625.625 0 0 0-.885 0l-3.042 3.043V8.912a.625.625 0 1 0-1.25 0v4c0 .345.28.625.625.625h4a.625.625 0 0 0 0-1.25H4.597l3.042-3.043a.625.625 0 0 0 0-.883"})},a=(0,o(340498).wt)("arrowExpandDiagonalBottomLeftToTopRightSmall",n,"small")},671894:(e,t,o)=>{o.d(t,{hS:()=>x,o2:()=>k,js:()=>b,Le:()=>y,F6:()=>w});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(823215),o(354520),o(581454);var n=()=>o(675133),a=()=>o(69708),i=()=>o(778078),r=()=>o(496603),s=(o(296540),()=>o(736847)),l=()=>o(589407),c=()=>o(12956),d=o(474848);const u=(0,a().YK)({moreOptions:{id:"action.moreOptions",defaultMessage:"More options"}});var p=()=>o(431404),m=()=>o(680288),g=()=>o(129522);const f=25,h=5,v=(0,a().YK)({mixedBlocks:{id:"actionMenuHelpers.mixedBlocks.title",defaultMessage:"{count, plural, one {{count} block} other {{count} blocks}}"}});function b(e){const t=n().A.getIntl(),{sections:o,context:a,query:b,shouldShowBlockTypeTitle:y}=e;let x=b.trim().toLowerCase();x.startsWith("/")&&(x=x.slice(1));const S=k(o,a).map(((e,o)=>{let{actions:n,title:i}=e;const r=n.length-h;if(e.shouldShowMoreOptions&&r>1){const e=function(e){return(0,c().u)({key:"more options",displayName:u.moreOptions,analyticsName:u.moreOptions.defaultMessage,svg:l().ellipsisIcon,validators:[],subActions:()=>[{key:0,title:void 0,render:e=>(0,d.jsx)(s().A,{...e}),actions:e}]})}(n.slice(h));n=[...n.slice(0,h),e]}const f=a.blocks[0];if(f){const e=f.getType();if(y&&e&&0===o){const o=a.blocks.every((t=>t.getType()===e))?(0,p().Z)(e):v.mixedBlocks;if(o){var b;i=t.formatMessage(o,{count:a.blocks.length});const e=null===(b=g().K.findCollectionViewBlockFromStore(f))||void 0===b?void 0:b.collectionContextStore.getViewType();if(e){const t=m().to[e];t&&(i+=` · ${t}`)}}}}return{...e,actions:n,title:i}}));if(!x)return S;const A=function(e){return e.map((e=>({...e,actions:e.actions.map((t=>{const o=t.searchName||t.displayName||"",n=[o,e.searchTitle||e.title||"",o].join(" ");return{...t,searchName:n}}))})))}(function(e,t){const o=[];for(const n of e){const e={...n,actions:[]};for(const a of n.actions)if(w(a,t))if(a.subActions){const i=k(a.subActions(t),t);if(a.hideSubActions){e.actions.push(a);continue}if(a.collapseSubActionsIntoParent){for(const t of i)for(const o of t.actions)e.actions.push(o);continue}const r=i.map((e=>({...e,key:`${n.key} ${a.key} ${e.key}`,title:e.title||a.displayName,searchTitle:[a.searchName||a.displayName,e.searchTitle||e.title].filter(Boolean).join(" ")})));for(const e of r)o.push(e)}else e.actions.push(a);e.actions.length&&o.push(e)}return o}(o,a)),M=[],I=new Map;for(const n of A)for(const e of n.actions)I.set(e,n),M.push(e);const C=(0,i().Ay)(x,M,(e=>e.searchName||""),{minScore:f,getSortScore:e=>-e.score*(e.original.sortScoreMultiplier??1)}),_=new Set(C),B=M.filter((e=>Boolean(e.alwaysShowInSearch)&&!_.has(e))),j=B.filter((e=>"start"===e.alwaysShowInSearch)),L=B.filter((e=>"end"===e.alwaysShowInSearch)),T=r().$z([...j,...C,...L],(e=>{const t=I.get(e);if(t)return t.title})),E=[];for(const n of Object.keys(T)){const e=T[n],t=I.get(e[0]);t&&E.push({...t,actions:e})}return E}function y(e,t){if(!t)return e;let o=0;const n=[];for(const a of e){if(o>=t)break;const e=a.actions.slice(0,t-o);e.length>0&&(o+=e.length,n.push({...a,actions:e}))}return n}function x(e,t){const o=[];for(const n of e){const e=n.actions.filter(t);e.length>0&&o.push({...n,actions:e})}return o}function k(e,t){return x(e,(e=>w(e,t)))}function w(e,t){if(e.validators){return e.validators.every((e=>e(t)))}return!0}},691648:(e,t,o)=>{o.d(t,{h:()=>a,p:()=>i});var n=()=>o(79926);const a=new(n().O2)("imageEdit",(()=>o.e(81074).then(o.bind(o,751229)))),i=(0,n()._h)(a,(e=>e.ImageEditModal))},692797:(e,t,o)=>{o.d(t,{W:()=>i});o(296540);var n=o(474848);const a={viewBox:"0 0 16 16",fittedViewBox:"1.97 1.97 12.46 12.46",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M7.1 4.475a.625.625 0 0 0-.625.625v1.375H5.1a.625.625 0 1 0 0 1.25h1.375V9.1a.625.625 0 0 0 1.25 0V7.725H9.1a.625.625 0 0 0 0-1.25H7.725V5.1a.625.625 0 0 0-.625-.625"}),(0,n.jsx)("path",{d:"M7.1 1.975a5.125 5.125 0 1 0 3.155 9.164l3.107 3.107a.625.625 0 1 0 .884-.884l-3.107-3.107A5.125 5.125 0 0 0 7.1 1.975M3.225 7.1a3.875 3.875 0 1 1 7.75 0 3.875 3.875 0 0 1-7.75 0"})]})},i=(0,o(340498).wt)("magnifyingGlassPlusSmall",a,"small")},703778:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>a,linkSmallIcon:()=>i});o(296540);var n=o(474848);const a={viewBox:"0 0 16 16",fittedViewBox:"1.87 1.87 12.19 12.19",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M12.848 2.8a3.145 3.145 0 0 0-4.448 0L6.918 4.283a.625.625 0 0 0 .884.883l1.482-1.482c.74-.74 1.94-.74 2.68 0l.294.294c.74.74.74 1.94 0 2.68l-1.482 1.483a.625.625 0 1 0 .884.884l1.482-1.482a3.145 3.145 0 0 0 0-4.449z"}),(0,n.jsx)("path",{d:"M10.472 5.47a.625.625 0 0 0-.884 0L5.229 9.83a.625.625 0 1 0 .884.883l4.359-4.359a.625.625 0 0 0 0-.883"}),(0,n.jsx)("path",{d:"M5.167 6.918a.625.625 0 0 0-.884 0L2.8 8.4a3.146 3.146 0 0 0 0 4.448l.294.294a3.145 3.145 0 0 0 4.449 0l1.482-1.482a.625.625 0 0 0-.884-.884L6.66 12.258c-.74.74-1.94.74-2.68 0l-.295-.294c-.74-.74-.74-1.94 0-2.68L5.167 7.8a.625.625 0 0 0 0-.883"})]})},i=(0,o(340498).wt)("linkSmall",a,"small")},724015:(e,t,o)=>{o.d(t,{b:()=>r});o(296540);var n=()=>o(401497),a=()=>o(100622),i=o(474848);function r(){const e=(0,n().IS)((()=>({divider:{width:1,height:16,margin:"0px 4px",background:a().Tj.gray.background.secondary,borderRadius:2}})),[]);return(0,i.jsx)("div",{style:e.divider})}},730307:(e,t,o)=>{o.d(t,{l:()=>m});var n=()=>o(779315),a=()=>o(292985),i=()=>o(161479),r=()=>o(878523),s=()=>o(129522),l=()=>o(404783),c=()=>o(555776),d=()=>o(116008),u=()=>o(36088),p=()=>o(405981);async function m(e){var t;const{environment:o,blockStore:m,rect:g,property_id:f,from:h}=e;if(d().A.hasContent())return void(0,p()._y)({environment:o,reason:"starting_new"});const v=s().K.getRect(m);if(!v)return;const b=new(l().A)(o,(0,i().e)(m.pointer.spaceId)),y=v.width,x=v.height,k=v.right-y;d().A.setState({open:!0,rect:g||new DOMRect(k,v.top,y,x),type:"block",content:"comment",blockStore:m,blockId:m.id,discussionInputStore:b,property_id:f,lastKnownBlockStore:m,from:h}),(0,a().V)({element:null===(t=n().A.UpdateSidebarCommentScroller)||void 0===t?void 0:t.getNode(),environment:o,options:{top:0,behavior:"smooth"}}),c().A.setActiveWithSource("text_annotation"),await(0,u().M)({discussionInputStore:b,environment:o}),r().j4(o,{from:h})}},738508:(e,t,o)=>{o.r(t),o.d(t,{cursorIcon:()=>i,iconDefinition:()=>a});o(296540);var n=o(474848);const a={viewBox:"0 0 20 20",fittedViewBox:"1.25 0 17.5 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("g",{className:"logo-light-mode",children:[(0,n.jsxs)("g",{clipPath:"url(#clip0_16020_205)",children:[(0,n.jsx)("path",{fill:"#757575",d:"m9.995 9.987 8.658 4.999a.6.6 0 0 1-.226.226l-8.092 4.672a.68.68 0 0 1-.68 0l-8.092-4.672a.6.6 0 0 1-.226-.226z"}),(0,n.jsx)("path",{fill:"#525252",d:"M9.995 0v9.987l-8.658 4.999a.6.6 0 0 1-.082-.309v-9.38c0-.22.117-.424.308-.534L9.655.09a.7.7 0 0 1 .34-.09"}),(0,n.jsx)("path",{fill:"#404040",d:"M18.652 4.989a.6.6 0 0 0-.225-.226L10.334.09A.7.7 0 0 0 9.995 0v9.987l8.658 4.999a.6.6 0 0 0 .083-.309v-9.38c0-.11-.03-.216-.083-.308"}),(0,n.jsx)("path",{fill:"#D9D9D9",d:"M18.047 5.339a.29.29 0 0 1 0 .29l-7.859 13.61c-.053.093-.193.055-.193-.05v-8.97a.4.4 0 0 0-.054-.201z"}),(0,n.jsx)("path",{fill:"#fff",d:"m18.047 5.339-8.106 4.68a.4.4 0 0 0-.147-.147L2.027 5.387c-.092-.053-.054-.193.052-.193h15.717c.111 0 .202.06.25.145"})]}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"clip0_16020_205",children:(0,n.jsx)("path",{fill:"#fff",d:"M1.255 0h17.49v20H1.256z"})})})]}),(0,n.jsxs)("g",{className:"logo-dark-mode",children:[(0,n.jsxs)("g",{clipPath:"url(#clip0_16020_213)",children:[(0,n.jsx)("path",{fill:"#6E6E6E",d:"m9.995 9.987 8.658 4.999a.6.6 0 0 1-.226.226l-8.092 4.672a.68.68 0 0 1-.68 0l-8.092-4.672a.6.6 0 0 1-.226-.226z"}),(0,n.jsx)("path",{fill:"#4A4A4A",d:"M9.995 0v9.987l-8.658 4.999a.6.6 0 0 1-.082-.309v-9.38c0-.22.117-.424.308-.534L9.655.09a.7.7 0 0 1 .34-.09"}),(0,n.jsx)("path",{fill:"#383838",d:"M18.652 4.989a.6.6 0 0 0-.225-.226L10.334.09A.7.7 0 0 0 9.995 0v9.987l8.658 4.999a.6.6 0 0 0 .083-.309v-9.38c0-.11-.03-.216-.083-.308"}),(0,n.jsx)("path",{fill:"#C9C9C9",d:"M18.047 5.339a.29.29 0 0 1 0 .29l-7.859 13.61c-.053.093-.193.055-.193-.05v-8.97a.4.4 0 0 0-.054-.201z"}),(0,n.jsx)("path",{fill:"#fff",d:"m18.047 5.339-8.106 4.68a.4.4 0 0 0-.147-.147L2.027 5.387c-.092-.053-.054-.193.052-.193h15.717c.111 0 .202.06.25.145"})]}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"clip0_16020_213",children:(0,n.jsx)("path",{fill:"#fff",d:"M1.255 0h17.49v20H1.256z"})})})]})]})},i=(0,o(340498).wt)("cursor",a,"default")},754858:(e,t,o)=>{o.d(t,{FK:()=>g,Rt:()=>f,a6:()=>b,g7:()=>h,ys:()=>v});o(410838);var n=()=>o(564884),a=()=>o(675133),i=()=>o(878456),r=()=>o(155792),s=()=>o(201980),l=()=>o(348869),c=()=>o(555102),d=()=>o(962753),u=()=>o(594794),p=()=>o(844317);const m=(0,o(69708).YK)({providerError:{id:"aiImage.error.providerError",defaultMessage:"Unable to generate image right now. Please try again."},allProvidersFailed:{id:"aiImage.error.allProvidersFailed",defaultMessage:"Image generation is temporarily unavailable. Please try again later."},invalidModel:{id:"aiImage.error.invalidModel",defaultMessage:"The requested model is not available."},contentPolicyViolation:{id:"aiImage.error.contentPolicyViolation",defaultMessage:"This prompt violates our content policy. Please try a different description."},rateLimitExceeded:{id:"aiImage.error.rateLimitExceeded",defaultMessage:"You’ve reached the limit on image generations. Please try again later."},invalidRequest:{id:"aiImage.error.invalidRequest",defaultMessage:"Invalid request. Please check your input and try again."},defaultError:{id:"aiImage.error.default",defaultMessage:"Failed to generate image. Please try again."}});async function g({environment:e,prompt:t,spaceId:o,size:n,n:a,blockPointer:i}){try{const r=await e.api.callCellCompatibleApi({eventName:"generateAiImage",cellNavigation:{spaceId:o},environment:e,data:{prompt:t,spaceId:o,size:n,n:a,blockPointer:i}});if("failed"===r.type)return null;return r.data}catch(r){return null}}function f(e,t){(0,n().u)({environment:e,event:{eventName:"ai_generate_block_image",eventProperties:t}})}function h(e,t){const o={eventName:"ai_edit_block_image",eventProperties:t};(0,n().u)({environment:e,event:o})}function v(e){switch(e){case"PROVIDER_ERROR":case"PROVIDER_EXCEPTION":return a().A.formatMessage(m.providerError);case"ALL_PROVIDERS_FAILED":return a().A.formatMessage(m.allProvidersFailed);case"INVALID_MODEL":return a().A.formatMessage(m.invalidModel);case"CONTENT_POLICY_VIOLATION":return a().A.formatMessage(m.contentPolicyViolation);case"RATE_LIMIT_EXCEEDED":return a().A.formatMessage(m.rateLimitExceeded);case"INVALID_REQUEST":return a().A.formatMessage(m.invalidRequest);default:return a().A.formatMessage(m.defaultError)}}async function b(e){const{prompt:t,environment:o,spaceId:n,size:m,n:h,source:v,style:b}=e,y=await async function(e){const{environment:t,spaceId:o,prompt:n,source:m,style:g}=e,h=Date.now();f(t,{source:m,duration_ms:0,status:"start"});const v=c().bX.state;if(!v)return;const{spaceStore:b,userStore:y}=v,x=(0,p().getWorkflowAgentConfig)({writerMode:!1,useWebSearch:!0,searchScopes:[],useReadOnlyMode:!0,model:"orange-tart"}),k=g&&"default"!==g?`Create this in a ${g} style: `:"",w=(0,s().x9d)(k+n),S=(0,c().Jv)({environment:t,spaceStore:b,userStore:y,promptType:"generate_image_prompt",value:w,locale:a().A.intl.locale}),A=(0,c().Xd)({environment:t,inferenceContext:v,config:x,addSteps:[S],surface:"ai_block"}),M=(0,u().Z1)({environment:t,table:r().mS,spaceId:o});try{const e=await(0,l().g)({environment:t,data:{transcript:A,traceId:M,spaceId:o,generateTitle:!1,createdSource:"ai_block",isUserInAnySalesAssistedSpace:(0,d().h0)(t),isSpaceSalesAssisted:(0,d().lM)(t,o)}});if(e.error)return void f(t,{source:m,duration_ms:Date.now()-h,status:"error",error_code:"prompt_enhancement_failed"});const n=e.value.findLast((e=>"agent-inference"===e.type));if(!n||"agent-inference"!==n.type)return;const a=(0,i().ie)(n),{value:r}=a;let s="";if("string"==typeof r)s=r;else if(Array.isArray(r))for(const t of r)"text"===t.type&&t.content&&(s+=t.content);const c=s.trim()||void 0;return c&&f(t,{source:m,duration_ms:Date.now()-h,status:"prompt_enhancement_success"}),c}catch(I){return void f(t,{source:m,duration_ms:Date.now()-h,status:"error",error_code:"prompt_enhancement_exception"})}}({environment:o,spaceId:n,prompt:t,source:v,style:b}),x=y??t;return await g({environment:o,prompt:x,spaceId:n,size:m,n:h})}},763765:(e,t,o)=>{o.d(t,{t:()=>a});class n extends(()=>o(757695))().Store{getInitialState(){return{loaded:!1}}USEWITHCAUTION_markStatsigUserFetched(e){const{userId:t,spaceId:o,fetched:n}=e;this.setState({loaded:n,userId:t,spaceId:o})}USEWITHCAUTION_isFetchedForSpaceAndUserId(e){const{spaceId:t,userId:o}=e;return this.state.loaded&&this.state.spaceId===t&&this.state.userId===o}}const a=new n;(0,o(852832).exposeDebugValue)("statsigUserLoadingStatusStore",a)},784489:(e,t,o)=>{o.d(t,{f:()=>s});o(296540);var n=()=>o(69708),a=()=>o(203913),i=()=>o(128933),r=o(474848);function s(e){const{item:t,onDismiss:o}=e;i().D6({...t,right:(0,r.jsx)(a().Ag,{onClick:o??i().N2,children:(0,r.jsx)(n().sA,{id:"snackbar.dismiss.title",defaultMessage:"Dismiss"})})})}},791177:(e,t,o)=>{o.d(t,{$:()=>a});var n=o(296540);function a(){const[e,t]=(0,n.useState)({inputElementAttributes:void 0,suppressFocusRing:!1}),[o,a]=(0,n.useState)(!1),[i,r]=(0,n.useState)(!1);(0,n.useEffect)((()=>{if(o){function e(){r(!1)}function t(e){"ArrowDown"!==e.key&&"ArrowUp"!==e.key||r(!0)}return window.addEventListener("pointerdown",e),window.addEventListener("keydown",t),()=>{window.removeEventListener("pointerdown",e),window.removeEventListener("keydown",t)}}}),[o]);return[(0,n.useMemo)((()=>({inputElementAttributes:e.inputElementAttributes,suppressFocusRing:e.suppressFocusRing&&i,onFocus:()=>{a(!0)},onBlur:()=>{a(!1)}})),[e,i]),(0,n.useMemo)((()=>({setComboboxState:t,isFocusVisible:i,isComboboxFocused:o,onItemHover:()=>{r(!1)}})),[i,o])]}},797324:(e,t,o)=>{o.d(t,{A:()=>f});var n=o(296540),a=()=>o(560520),i=()=>o(484714),r=()=>o(790748),s=()=>o(581010),l=()=>o(69708),c=()=>o(100622),d=()=>o(284371),u=()=>o(396406),p=()=>o(718827),m=()=>o(843798),g=o(474848);function f(e){const{onDismiss:t,inputRef:o}=e,f=(0,i().Y0)(),h=(0,n.useRef)(null),v=f.isMobileNative&&f.isIOS,b=v&&e.show;(0,r().b)(s().A,(()=>({getNode:()=>h.current,isShown:()=>b})),[b]);const y=(0,a().n)(),x=(0,n.useCallback)((()=>{var e;null==o||null===(e=o.current)||void 0===e||e.focus(),t&&t();const n=document.activeElement;n instanceof HTMLElement&&n.blur()}),[o,t]);if(!v)return null;const k=b?-(m().j+y):0;return(0,g.jsx)(u().O,{open:!0,children:(0,g.jsx)("div",{style:{position:"fixed",top:"100vh",width:"100%",height:m().j,display:b?"flex":"none",alignItems:"center",justifyContent:"flex-end",backgroundColor:c().Tj.keyboardDoneBarBackground,transform:`translateY(${k}px)`,transition:b?"ease-out":"ease-in",boxShadow:b?`\n\t\t\t\t\t\t\t\t0 -1px 0 ${c().Tj.border.primaryTranslucent}\n\t\t\t\t\t\t\t`:void 0},ref:h,children:(0,g.jsx)(p().Ay,{style:{display:"flex",alignItems:"center",marginInlineEnd:16,color:c().oZ.blue,fontWeight:d().Wy.semibold},onTouchEnd:()=>{x()},children:(0,g.jsx)(l().sA,{defaultMessage:"Done",id:"mobile.dismissKeyboardBar.button.label"})})})})}},844317:(e,t,o)=>{o.d(t,{getWorkflowAgentConfig:()=>u});var n=()=>o(242422),a=()=>o(81986),i=()=>o(915671);const r=new(o(29923).R)({key:"agent_memory_database_page",namespace:o(553737).Bq,important:!0,trackingType:"preference"});var s=()=>o(604018),l=()=>o(383070),c=()=>o(962753);const d="anthropic-sonnet-alt-no-thinking";function u(e={}){const{searchScopes:t,searchSessionId:o,useWebSearch:u,useReadOnlyMode:m,model:g,isCustomAgent:f,isCustomAgentBuilder:h,workflowId:v,modelFromUser:b,writerMode:y,researchMode:x,environment:k,spaceId:w,useCustomAgentDraft:S,useDraftActorPointer:A}=e,M=void 0===u||u,I=l().zD.isZeroRetentionEnabled(),C=(0,a().MI)((0,a().VD)("custom_agents"),p),_=(0,a().MI)((0,a().VD)("agent_automations"),p),B=(0,a().MI)((0,a().VD)("agent_integrations"),p),j=(0,a().MI)((0,a().VD)("experimental_integrations"),p),L=(0,a().MI)((0,a().VD)("database_agents"),p),T=(0,a().MI)((0,a().VD)("agent_script_agent_advanced"),p),E=(0,a().MI)((0,a().VD)("agent_script_agent"),p),F=(0,a().MI)((0,a().VD)("agent_user_session_context"),p),P=(0,a().MI)((0,a().VD)("agent_thread_tools"),p),D=p("custom_agent_setup_mode_tool"),R=(0,a().MI)((0,a().VD)("agent_create_dashboard"),p),z=(0,a().MI)((0,a().VD)("agent_card_customization"),p),N=(0,a().MI)((0,a().VD)("agent_system_prompt_as_page"),p),V=(0,a().MI)((0,a().VD)("agent_view_notifications_tool_enabled"),p),O=p("agent_revert_tool_enabled"),K=p("sams_specials"),U=p("agent_generate_image")&&!K,W=(0,a().MI)((0,a().VD)("agent_diffs"),p),H=(0,a().MI)((0,a().VD)("agent_create_db_template"),p),G=p("agent_update_page_v2"),q=p("agent_update_page_autofixer"),Y=p("use_update_agent_v2_tools"),$=p("agent_markdown_tree"),Q=p("agent_update_page_tree_diff"),X=p("agent_update_page_tree_diff_metrics"),Z=p("agent_update_page_order_updates"),J=p("agent_support_property_reorder"),ee=r.getState(),te=null==ee?void 0:ee.pageId,oe=void 0!==k&&(0,c().P$)(k,w);let ne;ne=!v&&(!!oe&&(void 0!==m&&m));const ae=!y&&(!I&&M);return{type:"workflow",enableAgentAutomations:_,enableAgentIntegrations:B,enableCustomAgents:C,enableExperimentalIntegrations:j,enableAgentViewNotificationsTool:V,enableAgentRevertTool:O,enableAgentDiffs:W,enableAgentCreateDbTemplate:H,enableCsvAttachmentSupport:!0,enableDatabaseAgents:L,enableAgentThreadTools:P,enableRunAgentTool:P,enableSetupModeTool:D,enableAgentDashboards:R,enableAgentCardCustomization:z,enableSystemPromptAsPage:N,enableUserSessionContext:F,enableScriptAgentAdvanced:!y&&T,enableScriptAgent:!y&&E,...f?{}:{enableAgentGenerateImage:U},agentFollowupVariation:Boolean(y)||Boolean(f)?void 0:(0,c().VA)(),enableAgentTodos:"on"===n().default.getEligibleGroup({experimentId:"ai_product_retention_agent_todos_v2",defaultGroup:"control"}),enableSpeculativeSearch:(0,c().EH)(),enableQueryCalendar:p("agent_query_calendar_tool"),enableQueryMail:p("agent_query_mail_tool"),enableAgentVerification:(0,a().g1)(p),memoryDatabasePageId:te,workflowId:v,availableConnectors:(0,s().wd)(),searchScopes:y?[]:t??i().R2,useWebSearch:ae,useReadOnlyMode:ne,writerMode:Boolean(y),model:y?d:g,searchSessionId:o,modelFromUser:!y&&(b??void 0!==g),isCustomAgent:Boolean(f),isCustomAgentBuilder:Boolean(h),useCustomAgentDraft:Boolean(S),use_draft_actor_pointer:Boolean(A),enableUpdatePageV2Tool:G,enableUpdatePageAutofixer:q,enableUpdateAgentV2Tools:Y,enableUpdatePageMarkdownTree:$,enableUpdatePageTreeDiff:Q,enableUpdatePageOrderUpdates:Z,enableUpdatePageTreeDiffMetrics:X,enableAgentSupportPropertyReorder:J,researchMode:Boolean(x)}}function p(e){return n().default.checkGate({gateName:e})}},867772:(e,t,o)=>{o.d(t,{Ay:()=>l,Gi:()=>i,Wc:()=>n,pF:()=>r,vS:()=>a});const n="loadingLocalImage",a="uploading",i="downloading",r="loaded";class s extends(()=>o(757695))().Store{getInitialState(){return{loadingMode:r}}}const l=s},878456:(e,t,o)=>{o.d(t,{Mt:()=>p,RM:()=>d,dC:()=>s,f_:()=>m,ie:()=>c,q1:()=>r,sQ:()=>g,uF:()=>u});o(410838),o(813451),o(944114),o(898992),o(354520),o(737550);var n=()=>o(534177),a=()=>o(724639),i=()=>o(484127);function r(e){return e.some((e=>"config"===e.type&&"workflow"===e.value.type))}function s(e){return e.some((e=>"config"===e.type&&"researcher"===e.value.type))}const l=/<lang\s+.*?>\s*/g;function c(e){if("string"==typeof e.value)return{...e,value:(t=e.value,t.replace(l,""))};if(Array.isArray(e.value)){const t=e.value.findIndex((e=>"text"===e.type));if(-1===t)return e;let o="";for(const r of e.value.slice(t)){if("text"!==r.type)break;o+=r.content}if(!l.exec(o))return e;let n="",a=t;for(;a<e.value.length;a++){const t=e.value[a];if("text"!==t.type)break;n+=t.content}const i=[...e.value.slice(0,t),{type:"text",content:n.replace(l,"")},...e.value.slice(a)];return"text"===i[0].type&&0===i[0].content.length&&i.shift(),{...e,value:i}}var t;return e}function d(e,t){const o={};for(const n of e)"registered-tool-grouping"===n.type&&(o[n.toolCallId]=n);let r=[...e];if("user"===t.type||"user-injected"===t.type||"error"===t.type||"premium-feature-unavailable"===t.type||"context"===t.type||"title"===t.type||"retry"===t.type||"autocorrect"===t.type||"autocomplete"===t.type||"search-observation"===t.type||"researcher-text-observation"===t.type||"debug-inference"===t.type||"wait"===t.type||"agent-search-query-generation"===t.type||"fast-researcher-plan"===t.type||"fast-researcher-search-results"===t.type||"memory-agent"===t.type||"summarize-transcript"===t.type||"summarize-transcript-record-map"===t.type||"summarize-transcript-error"===t.type||"record-pointers-updated"===t.type||(0,a().P0)(t)||"researcher-agent-group"===t.type||"agent-debug-error"===t.type||"eval-result"===t.type||"attachment"===t.type||"agent-transcript-summary"===t.type||"agent-records-updated"===t.type||"agent-turn-start"===t.type||"agent-record-map"===t.type||"user-specified-context"===t.type||"mention"===t.type||"agent-integration"===t.type||"aiBlockResponse"===t.type||"system-notification"===t.type||"agent-trigger"===t.type||"agent-prebuilt-prompt"===t.type||"agent-route-trigger"===t.type||"workflow-effect-calling"===t.type||"workflow-effect-called"===t.type||"workflow-effect-error"===t.type)r.push({...t});else if("agent-turn-full-record-map"===t.type){const e=r.findLastIndex((e=>e.id===t.id));if(-1!==e&&"agent-turn-full-record-map"===r[e].type){const o=r[e];r[e]={...o,agentRecordMap:t.agentRecordMap,threadRecordMap:t.threadRecordMap,recordVersions:t.recordVersions}}else r.push({...t})}else if("search"===t.type)r=[...r.filter((e=>e.id!==t.id)),{...t}];else if("agent-inference"===t.type||"agent-tool-result"===t.type||"config"===t.type){const e=r.findLastIndex((e=>e.id===t.id));-1!==e?r[e]=t:r.push({...t})}else if("markdown-chat"===t.type){const e=r.findLastIndex((e=>e.id===t.id));if(-1!==e&&"markdown-chat"===r[e].type){const o=r[e];r[e]={...o,value:`${o.value}${t.value}`}}else r.push({...t})}else if("search-chat"===t.type){const e=r.findLastIndex((e=>e.id===t.id));if(-1!==e&&"search-chat"===r[e].type){const o=r[e];r[e]={...o,value:`${o.value}${t.value}`}}else r.push({...t})}else if("fast-researcher-chat"===t.type){const e=r.findLastIndex((e=>e.id===t.id));if(-1!==e&&"fast-researcher-chat"===r[e].type){const o=r[e];r[e]={...o,value:`${o.value}${t.value}`}}else r.push({...t})}else if("setup"===t.type){const e=r.findLastIndex((e=>e.id===t.id));-1!==e&&"setup"===r[e].type?r[e]=t:r.push({...t})}else if("researcher-report"===t.type){const e=r.findLastIndex((e=>e.id===t.id));if(-1!==e&&"researcher-report"===r[e].type){const o=r[e];r[e]={...o,value:`${o.value}${t.value}`,citationInfo:(0,i().Mi)(o.citationInfo,t.citationInfo)}}else r.push({...t})}else if("researcher-agent"===t.type){const e=r.findIndex((e=>e.id===t.id));-1!==e&&"researcher-agent"===r[e].type?r[e]={...r[e],value:Object.assign(r[e].value,t.value),updatedAt:t.updatedAt}:r.push({...t})}else if("researcher-next-steps"===t.type){const e=r.findIndex((e=>e.id===t.id));-1!==e?r[e]={...t}:r.push({...t})}else if("registered-tool-call"===t.type||"registered-tool-output"===t.type||"registered-tool-error"===t.type){let e=o[t.toolCallId];e||(e={id:t.toolCallId,type:"registered-tool-grouping",toolName:t.toolName,toolCallId:t.toolCallId,steps:[]},o[t.toolCallId]=e,r.push(e));const n={...t};e.steps.push(n)}else if("registered-tool-grouping"===t.type)o[t.toolCallId]||(o[t.toolCallId]=t,r.push({...t}));else if("setup-operations"===t.type){const e=r.findLastIndex((e=>e.id===t.id)),o=r[e];(null==o?void 0:o.type)===t.type?r[e]={...o,operations:[...o.operations,...t.operations]}:r.push({...t})}else if("generate-formula"===t.type){const e=r.findLastIndex((e=>e.id===t.id));-1!==e&&"generate-formula"===r[e].type?r[e]={...r[e],value:t.value}:r.push({...t})}else"database-agent-setup"===t.type||"agent-message"===t.type?r.push({...t}):(0,n().HB)(t);return r}const u="inferenceTranscript";function p(e){return"object"==typeof e&&null!==e&&"transcript"in e}function m(e){const t=e.findLast((e=>"config"===e.type));return null==t?void 0:t.value}function g(e){if(e)return"search"===e.type||"workflow"===e.type?e.searchSessionId:void 0}},893497:(e,t,o)=>{o.d(t,{L:()=>s});var n=o(296540),a=()=>o(756117),i=()=>o(401497),r=o(474848);function s(e){const{children:t,style:o,visible:s,onShow:l,onHide:c,...d}=e,u=(0,n.useCallback)((()=>{null==l||l()}),[l]),p=(0,n.useCallback)((()=>{s||null==c||c()}),[s,c]),m=(0,i().IS)((()=>({wrapper:{...o,position:"absolute",pointerEvents:s?"auto":"none",cursor:"default"}})),[o,s]);return(0,r.jsx)(a().A,{...d,visible:s,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onAnimationStart:u,onAnimationEnd:p,style:m.wrapper,children:t})}},908759:(e,t,o)=>{o.d(t,{h:()=>m});var n=o(296540),a=()=>o(484714),i=()=>o(126617),r=()=>o(69708),s=()=>o(901265),l=()=>o(970501),c=()=>o(206051),d=()=>o(326496),u=o(474848);const p=(0,r().YK)({ariaLabel:{id:"ActionBarMoreButton.ariaLabel",defaultMessage:"Open block actions menu"},tooltip:{id:"ActionBarMoreButton.tooltip",defaultMessage:"More"}});function m(e){const{actionSectionGroupKey:t="default",hideFilter:o,store:m,...g}=e,f=(0,a().v3)(),h=(0,r().tz)(),v=(0,n.useCallback)((e=>{(0,l().L)({environment:f,store:m}),s().it({environment:f,stores:c().default.state.stores,left:e.clientX,top:e.clientY,showInput:!o,actionSectionGroupKey:t,analyticsFrom:"block_more_menu"})}),[f,t,o,m]);return(0,u.jsx)(d().e,{...g,"aria-label":h.formatMessage(p.ariaLabel),onClick:v,iconLeading:i().ellipsisSmallIcon,tooltip:h.formatMessage(p.tooltip)})}},917992:(e,t,o)=>{o.d(t,{b:()=>a,oU:()=>n});const n={"1:1":{width:1,height:1},"5:4":{width:5,height:4},"4:3":{width:4,height:3},"7:5":{width:7,height:5},"3:2":{width:3,height:2},"5:3":{width:5,height:3},"16:9":{width:16,height:9}},a={crop:{unit:"%",x:0,y:0,width:100,height:100},mask:"None"}},942143:(e,t,o)=>{o.d(t,{i:()=>f});o(581454);var n=()=>o(60481),a=()=>o(212497),i=()=>o(908006),r=()=>o(128933),s=()=>o(547033),l=()=>o(86159),c=()=>o(201980),d=()=>o(659602),u=()=>o(29554),p=()=>o(747674),m=()=>o(718957),g=()=>o(884107);async function f(e){const{environment:t,contentStores:o,textValue:f,parentStore:h,copiedMessageLabel:v}=e;if(o&&o.length>0){const[e,a]=await Promise.all([g().R.clipboardActions.load(),d().g.load()]),r=o.map((e=>e.getBlockTitleStore())),u=r[0],f=r[r.length-1];if(u&&f){const e=c().AhH(f.getValue()||[]),a=(0,m().hn)({store:u,index:0},{store:f,index:e});(0,s().setMultiSelection)({multiSelection:a}),(0,p().t)({environment:t,stores:o,phase:n().o.Editing,pivot:o[0]})}else(0,p().t)({environment:t,stores:o});await i().default.afterNextFlush(),await async function(e){const{environment:t,clipboardActions:o,markdownLinkifyIt:n}=e;if(!t.device.isSafari)return void(await o.copySelectionToClipboard({environment:t,markdownLinkifyIt:n}));if(!document.queryCommandSupported("copy"))return void(await o.copySelectionToClipboard({environment:t,markdownLinkifyIt:n}));const a=document.createElement("span");a.textContent="​",a.style.position="fixed",a.style.opacity="0",a.style.pointerEvents="none",a.style.userSelect="auto",document.body.appendChild(a);const i=e=>{var a;null===(a=e.stopImmediatePropagation)||void 0===a||a.call(e),o.copy({environment:t,event:e,disableSyncTextSelection:!0,markdownLinkifyIt:n})};try{window.addEventListener("copy",i,{capture:!0,once:!0}),l().setOnNode(a,t.device),o.triggerBrowserCopy()}catch{await o.copySelectionToClipboard({environment:t,markdownLinkifyIt:n})}finally{var r;l().clear(t),window.removeEventListener("copy",i,{capture:!0}),null===(r=a.parentNode)||void 0===r||r.removeChild(a)}}({clipboardActions:e,environment:t,markdownLinkifyIt:a})}else{const e=await(0,a().jd)();await e({environment:t,stringValue:(0,u().r4)(f,h)})}r().D6({label:v})}},962036:(e,t,o)=>{o.d(t,{g:()=>u});o(296540);var n=()=>o(484714),a=()=>o(807449),i=()=>o(493552),r=()=>o(81068),s=()=>o(406533),l=()=>o(284371),c=()=>o(148024),d=o(474848);function u(e){const t=(0,n().v3)();return(0,d.jsx)(r().A,{focused:!1,href:e.href,external:!0,onClick:()=>c().FH(t,{from:e.analyticsFrom}),icon:(0,d.jsx)(a().I,{icon:s().questionMarkCircleIcon,colorVariant:"secondary"}),title:(0,d.jsx)(i().D,{colorPalette:"gray",colorVariant:"secondary",children:e.title}),style:l().RC})}},962753:(e,t,o)=>{o.d(t,{EH:()=>b,FO:()=>h,P$:()=>v,VA:()=>g,h0:()=>d,lM:()=>u,mq:()=>f});o(898992),o(581454),o(737550);var n=()=>o(907258),a=()=>o(242422),i=()=>o(763765),r=()=>o(613848),s=()=>o(496603),l=()=>o(534177),c=()=>o(822789);function d(e){const{currentUserRootStore:t}=n().default.state;if(!t)return!1;const o=t.getSpaceViewStores();return(0,s().oE)(null==o?void 0:o.map((e=>e.getSpaceId()))).map((t=>r().A.getData(e,{spaceId:t,userId:e.currentUser.id}))).some((e=>p(e)))}function u(e,t){return p(r().A.getData(e,{spaceId:t,userId:e.currentUser.id}))}function p(e){switch(null==e?void 0:e.membershipType){case void 0:case"none":case"page_guest":return!1;case"restricted_member":case"member":case"membership_admin":case"owner":return!0===e.is_sales_assisted;default:(0,l().HB)(e)}}function m(e,t){if(!t)return"control";if(u(e,t))return"control";const o=a().default.getEligibleGroup({experimentId:"ai_product_retention_simplified_input",defaultGroup:"control"});return"input"===o||"input_and_ask_mode"===o?o:"control"}function g(){switch(a().default.getEligibleGroup({experimentId:"ai_product_retention_agent_follow_ups",defaultGroup:"control"})){case"button_nudge":return["button","nudge"];case"button_control":return["button","default"];case"nudge":return["nudge"];default:return}}function f(e,t){const o=a().default.checkGate({gateName:"agent_deep_find"}),n=void 0!==t&&u(e,t),r=e.currentUser.id,s=!t||!r||i().t.USEWITHCAUTION_isFetchedForSpaceAndUserId({spaceId:t,userId:r}),l=o||!n&&s&&"on"===a().default.getEligibleGroup({experimentId:"ai_product_retention_deepfind",defaultGroup:"control"}),c=v(e,t);return{agentDeepFindEnabled:l,useReadOnlyMode:l&&c}}function h(e,t){if(t?(0,c().vp)(t):(0,c().hw)())return!0;return"control"!==m(e,t)}function v(e,t){return"input_and_ask_mode"===m(e,t)}function b(){return"on"===a().default.getEligibleGroup({experimentId:"ai_product_retention_agent_speculative_search",defaultGroup:"control"})}}}]);