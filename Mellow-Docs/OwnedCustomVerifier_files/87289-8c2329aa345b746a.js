"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[87289],{101927:(e,t,a)=>{a.d(t,{DE:()=>h,N8:()=>f,NA:()=>u,aD:()=>v,ab:()=>p,c6:()=>S,ie:()=>m,mR:()=>y,q$:()=>g});a(898992),a(737550);var o=()=>a(242422),n=()=>a(239666),r=()=>a(910554),s=()=>a(820559),i=()=>a(195181),l=()=>a(383070),c=()=>a(483730),d=()=>a(255350);function p(){return l().zD.canUseAssistantDebugTools()}function u(){var e;return Boolean(l().zD.showSearchDebugTools()&&(null===(e=s().A.state)||void 0===e?void 0:e.showSearchDebugPanel))}function g(e){var t;const{isWriter:a,onPublicDomain:r}=e,l=function(){const e=o().default.getConfigKey("ai_qna_silent_retry_mode","silentRetrySearchMode");if(e)return e in i().qK?e:void 0}();return{searchScope:(0,d().Ac)(a,r),searchFilters:n().NH,searchOverrides:{launchSilentSearchMode:l,...null===(t=s().A.state)||void 0===t?void 0:t.searchOverrides},retrySearchOverrides:l?{searchMode:l}:void 0}}function y(){var e,t;const a=null===(e=c().default.getActiveSession())||void 0===e?void 0:e.sessionIdFromStoreState,o=null===(t=s().A.state)||void 0===t?void 0:t.queriesSubmittedForTranslationSessionId;return!(!a||!o)&&Boolean(u()&&o.includes(a))}function h(e){var t;if(!p())return;const a=null===(t=s().A.state)||void 0===t?void 0:t.modelOverride;return v(e).some((e=>e===a))?a:void 0}function v(e){return r().A.getData(e,{})??[]}function m(e){if(!p())return;const t=s().A.state;s().A.setState({...t,modelOverride:e})}function f(){var e;return Boolean(p()&&(null===(e=s().A.state)||void 0===e?void 0:e.showDebugBar))}function S(e){return!!s().A.canPersistToLocalStorage()&&(s().A.setState({...s().A.state,showDebugBar:e}),!0)}},195181:(e,t,a)=>{a.d(t,{BG:()=>l,Bg:()=>c,ID:()=>u,Ue:()=>p,Wo:()=>d,qK:()=>i});var o=()=>a(534177);const n="default",r=["esQueryNLastEdited200Pages"],s=["gpt4Rerank","secondPage","notionOnly",...r],i=["default","firstResult","firstTwoResults",...s],l={gpt4Rerank:{experimentalReranker:"gpt4-classify",rerankerConsiderK:40},secondPage:{page:1},notionOnly:{maxVectorSlackResults:0},esQueryNLastEdited200Pages:{maxVectorSlackResults:0,vectorlessSearch:{enable:!0,groupName:"es_query_n_last_edited_200_pages",pageCount:200},disableLimitedQnADarkRead:!0}};function c(e){return!!(0,o().Xk)(s,e)}function d(e){return!!(0,o().Xk)(r,e)}const p=["blendedScore","cohereRelevance","rerankProbability","authorityScore","vectorCosineDistance","xgbScore"];class u extends(()=>a(757695))().Store{constructor(){super()}static create(e){const t=new u;return t.setState(e),t}hasLockAction(){const e=this.state;return Boolean((null==e?void 0:e.committing)||(null==e?void 0:e.evaluating)||(null==e?void 0:e.sampling))}setSearchScope(e){this.update((t=>({...t,searchScope:e})))}setSearchFilters(e){this.update((t=>({...t,searchFilters:e})))}setSearchMode(e){this.update((t=>({...t,searchOverrides:{...t.searchOverrides,searchMode:e}})))}getLaunchSilentSearchMode(){var e,t;return null!==(e=this.state)&&void 0!==e&&e.retrying||null===(t=this.state)||void 0===t||null===(t=t.searchOverrides)||void 0===t?void 0:t.launchSilentSearchMode}getSearchMode(){var e,t,a,o;return(null!==(e=this.state)&&void 0!==e&&e.retrying?(null===(t=this.state.retrySearchOverrides)||void 0===t?void 0:t.searchMode)||(null===(a=this.state.searchOverrides)||void 0===a?void 0:a.searchMode):null===(o=this.state)||void 0===o||null===(o=o.searchOverrides)||void 0===o?void 0:o.searchMode)??n}getSearchModeForNonRetry(){var e;return(null===(e=this.state)||void 0===e||null===(e=e.searchOverrides)||void 0===e?void 0:e.searchMode)??n}getSearchModeForRetry(){var e;return(null===(e=this.state)||void 0===e||null===(e=e.retrySearchOverrides)||void 0===e?void 0:e.searchMode)??n}updateState(e){this.update((t=>({...t,...e})))}}},218602:(e,t,a)=>{function o(e){return`${e.environmentName}-${e.suffix}`}a.d(t,{W:()=>o})},255350:(e,t,a)=>{a.d(t,{Ac:()=>A,D0:()=>T,I9:()=>C,Io:()=>I,JW:()=>k,Nr:()=>x,hX:()=>w,j8:()=>b,tu:()=>M});a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698);var o=()=>a(295633),n=()=>a(959587),r=()=>a(723085),s=()=>a(902006),i=()=>a(992214),l=()=>a(700500),c=()=>a(90023),d=()=>a(416504),p=()=>a(179034),u=()=>a(101628),g=()=>a(854150),y=()=>a(534177),h=()=>a(716500),v=()=>a(486674),m=()=>a(71304),f=()=>a(562031);const S=(0,a(69708).YK)({everythingLabel:{id:"assistantHelpers.getScopeTitle.everything",defaultMessage:"All sources"},notionLabel:{id:"assistantHelpers.getScopeTitle.notion",defaultMessage:"Notion"},notionHelpLabel:{id:"assistantHelpers.getScopeTitle.notionHelp",defaultMessage:"Notion Help Center"},aiKnowledgeLabel:{id:"assistantHelpers.getScopeTitle.aiKnowledge",defaultMessage:"AI knowledge"},currentPageLabel:{id:"assistantHelpers.getScopeTitle.currentPage",defaultMessage:"Current page"}});function w(){return new Set([l().xd.page,l().xd.collectionView,l().xd.collectionViewPage])}const b=new Set([l().xd.factory]);function k(e){const t=e.getType(),a=e.getModel(),o=w(),n=!(null==a||!a.isCollectionView())&&0===a.getCollectionPointers().length;return Boolean(t&&o.has(t)&&!n&&!(0,c().dT)(a))}function I(e){const{searchScope:t,sidebarSpaceStore:a}=e;return"everything"===t.type||"labeler"===t.type||"universal-none"===t.type||"notion-none"===t.type?{type:"everything"}:"teamspace"===t.type?{type:"teamspace",teamStore:r().h.createChildStore(a,{id:t.teamId,table:g().yK,spaceId:a.id})}:"notion"===t.type?{type:"notion"}:"workspace"===t.type||"slackbot"===t.type||"universal-workspace"===t.type?{type:"workspace"}:"page"===t.type?{type:"page",pageStore:o().B.createChildStore(a,{id:t.pageId,table:p().ev,spaceId:a.id})}:"collection"===t.type?{type:"collection",pageStore:o().B.createChildStore(a,{id:t.pageId,table:p().ev,spaceId:a.id}),collectionId:t.collectionId}:"helpdocs"===t.type?{type:"helpdocs"}:"ai-knowledge"===t.type?{type:"ai-knowledge"}:"web"===t.type?{type:"web"}:"site"===t.type?{type:"site",siteStore:n().P.createChildStore(a,{id:t.siteId,table:u().Eu,spaceId:a.id})}:(0,s().SC)(t.type)?t:(0,y().HB)(t.type)}function C(e){const{scopeMenuItem:t,currentSearchScope:a}=e;return"everything"===a.type||"labeler"===a.type||"universal-none"===a.type||"notion-none"===a.type?"everything"===t.type:"notion"===a.type?"notion"===t.type:"workspace"===a.type||"slackbot"===a.type||"universal-workspace"===a.type?"workspace"===t.type:"teamspace"===a.type?"teamspace"===t.type&&t.teamStore.id===a.teamId:"page"===a.type?"page"===t.type&&t.pageStore.id===a.pageId:"collection"===a.type?"collection"===t.type&&t.pageStore.id===a.pageId&&t.collectionId===a.collectionId:"helpdocs"===a.type?"helpdocs"===t.type:"ai-knowledge"===a.type?"ai-knowledge"===t.type:(0,s().SC)(a.type)?t.type===a.type:"web"===a.type?"web"===t.type:"site"===a.type?"site"===t.type&&t.siteStore.id===a.siteId:void(0,y().HB)(a.type)}function T(e){var t;const a=null===(t=e.DANGEROUSLY_INCORRECT_getCollectionPointer())||void 0===t?void 0:t.id;return a?{type:"collection",pageStore:e,collectionId:a}:{type:"page",pageStore:e}}function x(e){const{item:t,intl:a}=e;if("everything"===t.type)return{type:"everything"};if("workspace"===t.type)return{type:"workspace"};if("helpdocs"===t.type)return{type:"helpdocs"};if("ai-knowledge"===t.type)return{type:"ai-knowledge"};if("notion"===t.type)return{type:"notion"};if("teamspace"===t.type)return{type:"teamspace",store:t.teamStore,accessLevel:t.teamStore.getTeamAccessLevel()};if("page"===t.type||"collection"===t.type){var o,n;const e=t.pageStore;return{type:"page",store:e,isCurrentPage:e.id===(null===(o=(0,v().a)())||void 0===o?void 0:o.id),title:(null===(n=e.getModel())||void 0===n?void 0:n.getRenderTitleWithPlaceholder({getRecordModel:e.getRecordModel,userTimeZone:(0,d().P)(),intl:a}))??(0,i().L)(a)}}return"web"===t.type?{type:"web"}:"site"===t.type?{type:"site",siteStore:t.siteStore}:(0,s().SC)(t.type)?{type:t.type}:(0,y().HB)(t.type)}function M(e){const{environment:t,searchScope:a,spaceStore:n,intl:i,showEverythingLabel:l}=e;if("everything"===a.type||"slackbot"===a.type)return l?{scopeTitle:i.formatMessage(S.everythingLabel)}:{scopeTitle:void 0};if("labeler"===a.type||"universal-none"===a.type||"notion-none"===a.type||"site"===a.type)return{scopeTitle:void 0};if("web"===a.type)return{scopeTitle:"Web"};if("notion"===a.type)return{scopeTitle:i.formatMessage(S.notionLabel)};if("helpdocs"===a.type)return{scopeTitle:i.formatMessage(S.notionHelpLabel)};if("ai-knowledge"===a.type)return{scopeTitle:i.formatMessage(S.aiKnowledgeLabel),dontShowPrepositionalCopy:!0};var c;if("workspace"===a.type||"universal-workspace"===a.type)return{scopeTitle:null===(c=n.getModel())||void 0===c?void 0:c.getRenderTitle()};if("teamspace"===a.type){var d;return{scopeTitle:null===(d=r().h.createChildStore(n,{id:a.teamId,table:g().yK,spaceId:n.id}).getModel())||void 0===d?void 0:d.getRenderTitle()}}if("page"===a.type||"collection"===a.type){const e=(0,v().a)();if(e){const t=e.getType();if("page"===a.type&&"page"===t&&e.id===a.pageId)return{scopeTitle:i.formatMessage(S.currentPageLabel),dontShowPrepositionalCopy:!0};if("collection"===a.type&&("collection_view"===t||"collection_view_page"===t)&&e.id===a.pageId)return{scopeTitle:i.formatMessage(S.currentPageLabel),dontShowPrepositionalCopy:!0}}const r=o().B.createChildStore(n,{id:a.pageId,table:p().ev,spaceId:n.id});return{scopeTitle:(0,m().tS)({environment:t,intl:i,store:r})}}if((0,s().SC)(a.type)){const{displayName:e}=(0,h().K)(a.type).getSearchScopeDisplayDetails({searchScope:a});return{scopeTitle:e}}return(0,y().HB)(a.type)}function A(e,t){const a=(0,v().a)();if(a){if(t)return{type:"site",siteId:(0,f().g2)()??""};const o=a.getType();if(e&&"page"===o)return{type:"page",pageId:a.id}}return{type:"everything"}}},459129:(e,t,a)=>{a.d(t,{Ou:()=>h,VZ:()=>m,WB:()=>y,Wd:()=>v,wm:()=>f});a(16280),a(944114),a(581454);var o=()=>a(755531),n=()=>a(792057),r=()=>a(362750),s=()=>a(785728),i=()=>a(155792),l=()=>a(7331),c=()=>a(532659),d=()=>a(498212),p=()=>a(769864),u=()=>a(962753),g=()=>a(594794);function y(e){const{environment:t,feedbackType:a,userComment:o,spaceId:n,traceId:r,type:s,threadId:i,stepId:c,config:d,promptKey:u,failureReasons:g}=e,y={type:s,traceId:r,spaceId:n,feedbackType:a,userComment:o,threadId:i,stepId:c,model:(0,l().kM)(d),promptKey:u,...g&&g.length>0?{failureReasons:g}:{}};p().callCellCompatibleApi({eventName:"saveInferenceTranscriptFeedback",environment:t,data:y,cellNavigation:{spaceId:n}})}async function h(e){const{environment:t,clientStore:a,inference:n,threadId:l}=e,y=a.getOrCreateClientAIChatThreadStore(l),h=y.state.inferenceKeysToAnnotations[n.key],v=a.state.model??"default",m=(0,o().S)();if(!m)throw new Error("No current space store");const f=await p().callStreamApi({eventName:"runInferenceTranscript",environment:t,data:{transcript:[{id:(0,g().Z1)({environment:t,table:i().mS,spaceId:m.id}),type:"config",value:{type:"debug-inference",inference:{...n.value,input:{...n.value.input,...h?{annotation:h}:void 0}},model:v}}],traceId:(0,d().Ay)(),spaceId:m.id,generateTitle:!1,isUserInAnySalesAssistedSpace:(0,u().h0)(t),isSpaceSalesAssisted:(0,u().lM)(t,m.id)},headers:(0,s().WS)({spaceId:m.id})});if("failed"===f.type)throw f.error;const S=[];if(c().hS.is(f.data))for await(const o of f.data)if("debug-inference"===o.type)S.push(o.value),y.setState({...y.state,inferences:y.state.inferences.map((e=>e.key===n.key?{...e,value:{...e.value,expected:(0,r().Zl)(S)}}:e))});else if("error"===o.type)throw o.message}async function v(e){const{environment:t,request:a,memory:r,onChange:l,clientStore:y}=e,h=y.state.model??"default",v=(0,o().S)();if(!v)throw new Error("No current space store");if(!r.feedback)return void n().rG({message:"No feedback found"});const m=await p().callStreamApi({eventName:"runInferenceTranscript",environment:t,data:{transcript:[{id:(0,g().Z1)({environment:t,table:i().mS,spaceId:v.id}),type:"config",value:{type:"memory-agent",request:a,feedback:r.feedback,model:h}}],traceId:(0,d().Ay)(),spaceId:v.id,generateTitle:!1,isUserInAnySalesAssistedSpace:(0,u().h0)(t),isSpaceSalesAssisted:(0,u().lM)(t,v.id)},headers:(0,s().WS)({spaceId:v.id})});if("failed"!==m.type){if(c().hS.is(m.data))for await(const o of m.data)"memory-agent"===o.type?l(o.value):"error"===o.type&&n().rG({message:o.message})}else n().Qg(m)}async function m(e){const{environment:t,request:a,memory:r,onChange:l,clientStore:y}=e,h=y.state.model??"default",v=(0,o().S)();if(!v)throw new Error("No current space store");const m=await p().callStreamApi({eventName:"runInferenceTranscript",environment:t,data:{transcript:[{id:(0,g().Z1)({environment:t,table:i().mS,spaceId:v.id}),type:"config",value:{type:"memory-agent",request:a,memory:r,model:h,testOnly:!0}}],traceId:(0,d().Ay)(),spaceId:v.id,generateTitle:!1,isUserInAnySalesAssistedSpace:(0,u().h0)(t),isSpaceSalesAssisted:(0,u().lM)(t,v.id)},headers:(0,s().WS)({spaceId:v.id})});if("failed"!==m.type){if(c().hS.is(m.data))for await(const o of m.data)"memory-agent"===o.type?l(o.value):"error"===o.type&&n().rG({message:o.message})}else n().Qg(m)}async function f(e){const{environment:t,inference:a,project:o,dataset:r}=e;await p().callApi({eventName:"insertIntoBraintrustDataset",environment:t,data:{project:o,dataset:r,value:a}}),n().rG({message:`Saved to project: ${o}, dataset: ${r}`})}},489776:(e,t,a)=>{a.d(t,{E:()=>y});a(16280);var o=a(296540),n=()=>a(401497),r=()=>a(792057),s=()=>a(631524),i=()=>a(591779),l=()=>a(187174),c=()=>a(69708),d=()=>a(79926);const p={SimpleMonacoWrapper:new(d().O2)("SimpleMonacoWrapper",(async()=>{const[e,t,o]=await Promise.all([a.e(89440).then(a.bind(a,201452)).then((e=>e.default)),a.e(79508).then(a.bind(a,668553)).then((e=>e.loader)),a.e(62989).then(a.bind(a,374353))]);return t.config({monaco:e}),o}))},u=(0,d()._h)(p.SimpleMonacoWrapper,(e=>e.SimpleMonacoWrapper));var g=a(474848);function y(e){const{value:t,onSave:a,disabled:d,language:p="typescript",onFocus:y,onBlur:h,onChange:v,fetchTypescriptImports:m,fillHeight:f}=e,S=(0,o.useRef)(null),[w,b]=o.useState(t),k=(0,i().ZC)(t);o.useEffect((()=>{var e;k===w&&t!==k&&(b(t),null===(e=S.current)||void 0===e||e.setValue(t))}),[w,k,t]);const I=(0,o.useCallback)((()=>{if(w!==t)try{null==a||a(w)}catch(e){console.error(e),e instanceof Error&&r().rG({message:e.message})}}),[a,w,t]),C=(0,o.useCallback)((()=>{var e;b(t),null===(e=S.current)||void 0===e||e.setValue(t)}),[t]),T=(0,o.useCallback)((e=>{b(e??""),null==v||v(e??"")}),[v]),x=(0,o.useCallback)((e=>{S.current=e}),[]),[M,A]=o.useState(void 0);(0,l().Yb)((async()=>{if(m){const e=await m();A(e)}}),[m]);const j=(0,n().IS)((()=>({container:{position:"relative",borderRadius:f?0:8,overflow:"hidden",height:f?"100%":"50vh",display:"flex",flexDirection:"column",minHeight:400},controls:{position:"absolute",top:8,insetInlineEnd:12,display:"flex",gap:8,zIndex:1}})),[f]);return(0,g.jsxs)("div",{style:j.container,children:[t!==w?(0,g.jsxs)("div",{style:j.controls,children:[(0,g.jsx)(s().p,{onClick:C,children:(0,g.jsx)(c().sA,{defaultMessage:"Discard",id:"workflow.monacoCodeBlock.discard"})}),(0,g.jsx)(s().p,{onClick:I,children:(0,g.jsx)(c().sA,{defaultMessage:"Save changes",id:"workflow.monacoCodeBlock.save"})})]}):void 0,(0,g.jsx)(u,{language:p,value:w,disabled:d,onChange:T,onMount:x,onFocus:y,onBlur:h,imports:M})]})}},562936:(e,t,a)=>{a.d(t,{b:()=>d});var o=a(296540),n=()=>a(401497),r=()=>a(807449),s=()=>a(124092),i=()=>a(803960),l=()=>a(100622),c=a(474848);function d(e){var t;const[a,d]=o.useState(e.defaultOpen??!1),p=(0,n().IS)((()=>({wrap:{cursor:"pointer",...e.style},header:{display:"flex",alignItems:"center",gap:8,...!1===e.isToggleEnabled?{whiteSpace:"nowrap",height:28,paddingInlineStart:8,paddingInlineEnd:8}:{},...e.headerStyle},text:{minWidth:0,flexShrink:1,overflow:"hidden",textOverflow:"ellipsis"},content:{cursor:"auto",marginTop:12},icon:{width:16,height:16,fill:l().Tj.icon.primary},chevronDownIcon:{transition:"transform 0.2s ease-in-out",transformOrigin:"center",transform:a?"rotate(0deg)":"rotate(calc(var(--direction, 1) * -90deg))"}})),[e.style,e.headerStyle,a,e.isToggleEnabled]),u=(0,o.useCallback)((()=>d(!a)),[a]),g=(0,c.jsxs)(c.Fragment,{children:[e.left,null===(t=e.icon)||void 0===t?void 0:t.call(e,{...p.icon,...e.iconStyle}),(0,c.jsx)("span",{style:p.text,children:e.label}),(0,c.jsx)("div",{style:{flexGrow:1}}),e.right]});return!1===e.isToggleEnabled?(0,c.jsx)("div",{style:e.style,children:(0,c.jsx)("div",{style:p.header,children:g})}):(0,c.jsxs)("div",{style:p.wrap,children:[(0,c.jsxs)(s().p,{onClick:u,style:p.header,children:[g,(0,c.jsx)(r().I,{icon:i().arrowChevronSingleDownIcon,size:"sm",colorVariant:"secondary",style:p.chevronDownIcon})]}),a?(0,c.jsx)("div",{style:p.content,children:e.children}):void 0]})}},571376:(e,t,a)=>{a.d(t,{O:()=>S,X:()=>w});a(16280);var o=a(296540),n=()=>a(933922),r=()=>a(59226),s=()=>a(484714),i=()=>a(401497),l=()=>a(79926),c=()=>a(792057),d=()=>a(755125),p=()=>a(31511),u=()=>a(631524),g=()=>a(69708),y=()=>a(100622),h=()=>a(354584),v=()=>a(489776),m=a(474848);function f(e){const{value:t,onSave:a,disabled:n,onFocus:r,onBlur:s}=e,[l,d]=o.useState(!1),[h,v]=o.useState(void 0),f=(0,i().IS)((()=>({container:{position:"relative",background:y().Tj.gray.background.primary,padding:16,borderRadius:12},input:{whiteSpace:"pre-wrap",wordWrap:"break-word",fontFamily:"monospace",color:y().Tj.text.primary,margin:0,marginBottom:12,fontSize:12},controls:{position:"absolute",top:8,insetInlineEnd:8,display:"flex",gap:8,zIndex:1}})),[]),w=(0,o.useCallback)((e=>{v(e.target.value)}),[]),b=(0,o.useCallback)((()=>{if(void 0!==h)try{null==a||a(h),v(void 0),d(!1)}catch(e){console.error(e),e instanceof Error&&c().rG({message:e.message})}}),[a,h]),k=(0,o.useCallback)((()=>{v(void 0),d(!1)}),[]),I=(0,o.useCallback)((()=>{d(!0),v(t)}),[t]);return n?(0,m.jsx)(S,{...e}):(0,m.jsxs)("div",{style:f.container,children:[(0,m.jsx)("div",{style:f.controls,children:l?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(u().p,{onClick:k,children:(0,m.jsx)(g().sA,{defaultMessage:"Discard",id:"workflow.codeBlock.discard"})}),(0,m.jsx)(u().p,{onClick:b,children:(0,m.jsx)(g().sA,{defaultMessage:"Save",id:"workflow.codeBlock.save"})})]}):(0,m.jsx)(u().p,{onClick:I,children:(0,m.jsx)(g().sA,{defaultMessage:"Edit",id:"workflow.codeBlock.edit"})})}),l?(0,m.jsx)(p().A,{value:void 0!==h?h:t,onChange:w,textarea:!0,style:f.input,autosize:!0,autosizeMinHeight:80,onFocus:r,onBlur:s}):(0,m.jsx)(S,{...e})]})}function S(e){const{value:t,language:a="typescript",styles:n}=e,{value:r}=(0,l().fJ)(h().y),s=(0,i().IS)((()=>({codeDisplay:{whiteSpace:"pre-wrap",wordWrap:"break-word",userSelect:"text",WebkitUserSelect:"text",cursor:"text",fontFamily:"monospace",margin:0,fontSize:12}})),[]),c=o.useMemo((()=>{if(!r)return t;return r.highlight(t,r.languages[a]||r.languages.javascript,a)}),[r,t,a]),d=(0,o.useCallback)((e=>{e.stopPropagation()}),[]);return(0,m.jsx)("div",{style:{...s.codeDisplay,...n},dangerouslySetInnerHTML:{__html:c},onCopy:d})}function w(e){const t=(0,s().v3)(),[a,i]=(0,o.useState)(!1),l=(0,o.useCallback)((()=>{i(!0),(0,d().clear)({environment:t})}),[t]),c=(0,o.useCallback)((()=>{i(!1)}),[]),p=((0,r().X)("ai_workflows_monaco_code_editor"),!1);return(0,m.jsx)(n().A,{capture:a,debugName:"SimpleCodeBlock",render:()=>p?(0,m.jsx)(v().E,{...e,onFocus:l,onBlur:c}):(0,m.jsx)(f,{...e,onFocus:l,onBlur:c})})}},800204:(e,t,a)=>{a.d(t,{SZ:()=>i,Tn:()=>s,U3:()=>p,ey:()=>g,jm:()=>l,og:()=>u,p9:()=>y,yu:()=>d});a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(898992),a(354520);var o=()=>a(534177),n=()=>a(395797);const r=new Set(["personal-agent","personal"]);function s(e){if(!e)return;const t=e.trim();return t.startsWith("{{")&&t.endsWith("}}")?t.slice(2,-2):t}function i(e){const t=s(e);if(!t)return!1;const a=t.trim().toLowerCase();if(r.has(a))return!0;if(!a.startsWith("agent://"))return!1;const[,o]=a.split("agent://"),n=(null==o?void 0:o.split("/"))??[],i=n[n.length-1];return!!i&&r.has(i)}function l(e){return Boolean((null==e?void 0:e.insufficientPermissions)||(null==e?void 0:e.unclearInstructions)||(null==e?void 0:e.missingCapabilities)||(null==e?void 0:e.other))}const c=["fs.readDir","fs.readFiles","images.generate","calendar.fetchPlaybook","calendar.listCalendars","calendar.listEvents","calendar.listCoworkersEvents","calendar.createEvents","calendar.updateEvents","calendar.cancelEvents","calendar.suggestMeetingTimes","mail.listTools","mail.runTool","mail.getPrompt","cursor.createAgent","cursor.addFollowup","cursor.getAgent","cursor.listRepositories","files.getFileContent","files.getFileName","computer.listMachines","computer.listSecrets","computer.createMachine","computer.destroyMachine","computer.setSecret","computer.terminal","computer.browser","computer.getJobStatus","computer.getJobLogs","computer.viewFileUrl","files.getFileUrl","mail.getPrompt","mail.runTool","mcpServer.getPrompt","mcpServer.listPrompts","mcpServer.listResources","mcpServer.listTools","mcpServer.readResource","mcpServer.runTool","modules.list","modules.create","modules.update","modules.delete","test.getState","notion.createDatabase","notion.updateDatabase","notion.createAgent","notion.loadAgent","notion.loadUser","notion.updateAgent","notion.loadDatabase","notion.loadDataSource","notion.loadPage","notion.viewFileUrl","notion.createPage","notion.updatePage","notion.querySql","notion.queryView","notion.queryThreads","notion.investigateThread","notion.createAndRunThread","notion.getFormulaValue","notion.addCommentToDiscussion","notion.getPageDiscussions","notion.sendNotification","slack.addReactionToMessage","slack.createThreadInChannel","slack.createThreadInDirectMessage","slack.findUserByEmail","slack.getThreadsInChannelSince","slack.getUser","slack.loadMessage","slack.parseSlackUriOrUrl","slack.viewFileUrl","slack.queryChannels","slack.removeReactionFromMessage","slack.replyInThread","slack.search","slack.updateMessage","asana.loadTask","asana.search","box.search","discord.search","github.loadPR","github.loadIssue","github.loadCommit","github.loadFile","github.grepCode","github.lsDirectory","github.search","googleDrive.loadFile","googleDrive.search","gmail.loadThread","gmail.search","gmail.query","googleCalendar.search","googleCalendar.query","jira.loadIssue","jira.search","linear.loadIssue","linear.search","microsoftTeams.viewChannel","microsoftTeams.viewChat","microsoftTeams.loadMessage","microsoftTeams.search","outlook.loadMessage","outlook.loadThread","outlook.search","outlook.query","salesforce.search","sharepoint.loadFile","sharepoint.search","search.autosearch","web.search","web.loadPage","worker.listTools","worker.runTool","workers.list"],d=["search","queryCalendar","queryMail","view","view-version-history","view-notifications","view-database-files","view-channel","view-slack-channel","view-code-repo","create-database","update-database","update-database-data-sources","update-database-views","query-data-sources","update-database-triggers","error","create-pages","update-page","update-page-v2","delete-pages","update-todos","result","revert","toggle-user-integration-tools","update-user-integrations","edit-json","query-agent-threads","investigate-agent-thread","run-agent","enter-setup-mode","exit-setup-mode","create-agent","create-agent-v2","update-agent","update-agent-v2","delete-agent","query-salesforce-tool","list-machines","create-machine","destroy-machine","terminal","browser","callFunction","runScript","summarize-meeting-note","wait","generate-image",...c];function p(e){if("string"!=typeof e)return!1;for(const t of d)if(e===t)return!0;return!!u(e)}function u(e){return!!(0,o().Xk)(c,e)}function g(e){return e.filter((e=>"agent-tool-result"===e.type)).filter((e=>(0,n().I6)(e)))}const y="REJECTED_BY_USER"},820559:(e,t,a)=>{a.d(t,{A:()=>o});const o=new(a(29923).R)({key:"assistantDebugPreferences",namespace:a(553737).Bq,important:!1,trackingType:"preference"})},870054:(e,t,a)=>{a.d(t,{b:()=>r});a(296540);var o=a(474848);const n={viewBox:"0 0 16 16",fittedViewBox:"2.57 0.22 10.86 13.41",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M8.422.408a.625.625 0 0 0-.884 0l-2 2a.625.625 0 1 0 .884.884l.953-.953V8.8a.625.625 0 1 0 1.25 0V2.379l.913.913a.625.625 0 0 0 .884-.884z"}),(0,o.jsx)("path",{d:"M4.4 3.975A1.825 1.825 0 0 0 2.575 5.8v6c0 1.008.817 1.825 1.825 1.825h7.2a1.825 1.825 0 0 0 1.825-1.825v-6A1.825 1.825 0 0 0 11.6 3.975H9.525v1.25H11.6c.318 0 .575.257.575.575v6a.575.575 0 0 1-.575.575H4.4a.575.575 0 0 1-.575-.575v-6c0-.318.257-.575.575-.575h2.075v-1.25z"})]})},r=(0,a(340498).wt)("squareAndArrowUpSmall",n,"small")},910554:(e,t,a)=>{a.d(t,{A:()=>o});const o=new(a(62175).U)((()=>"aiPickableDebugModels"),(async e=>{const t=await e.api.callApi({eventName:"getAiPickableModels",environment:e,data:{}});return"success"===t.type?t.data.models:[]}));a(852832).exposeDebugValue("AiPickableDebugModelsStore",o)},973238:(e,t,a)=>{a.r(t),a.d(t,{arrowInCircleDownIcon:()=>r,iconDefinition:()=>n});a(296540);var o=a(474848);const n={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.26 15.25",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M6.958 10.446a.625.625 0 0 1 .884 0l1.533 1.533V6.513a.625.625 0 1 1 1.25 0v5.466l1.533-1.533a.625.625 0 1 1 .884.883l-2.6 2.6a.625.625 0 0 1-.884 0l-2.6-2.6a.625.625 0 0 1 0-.883"}),(0,o.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},r=(0,a(340498).wt)("arrowInCircleDown",n,"default")}}]);