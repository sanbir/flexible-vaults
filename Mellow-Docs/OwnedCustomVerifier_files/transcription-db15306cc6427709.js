"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[3101,13131,14344,32626],{84671:(e,t,n)=>{n.d(t,{u:()=>o});const o="return-to-writer-button"},89849:(e,t,n)=>{n.r(t),n.d(t,{eyeIcon:()=>r,iconDefinition:()=>i});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"0.96 4.19 18.07 11.62",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M10.17 6.694a3.307 3.307 0 0 1 3.135 3.303l-.005.17a3.305 3.305 0 0 1-3.3 3.137l-.17-.004a3.307 3.307 0 0 1-3.132-3.133l-.004-.17A3.307 3.307 0 0 1 10 6.69zm-.17 2.2a1.104 1.104 0 0 0 0 2.207 1.103 1.103 0 0 0 0-2.207"}),(0,o.jsx)("path",{d:"M10 4.194c3.878 0 7.26 2.075 8.862 5.127l.073.163c.126.333.126.7 0 1.033l-.073.163c-1.602 3.052-4.984 5.126-8.862 5.126-3.757 0-7.049-1.946-8.707-4.843l-.156-.283a1.46 1.46 0 0 1 0-1.359l.156-.283C2.95 6.141 6.243 4.194 10 4.194m0 1.251c-3.33 0-6.196 1.724-7.622 4.214l-.134.243a.21.21 0 0 0 0 .197l.134.243c1.426 2.49 4.292 4.214 7.622 4.214 3.437 0 6.38-1.837 7.756-4.457l.018-.048a.2.2 0 0 0 0-.1l-.018-.049C16.38 7.282 13.437 5.445 10 5.445"})]})},r=(0,n(340498).wt)("eye",i,"default")},112698:(e,t,n)=>{n.d(t,{B:()=>h});n(296540);var o=()=>n(907258),i=()=>n(755531),r=()=>n(726637),a=()=>n(484714),s=()=>n(590526),c=()=>n(401497),l=()=>n(26697),d=()=>n(69708),u=()=>n(100622),p=()=>n(534177),g=()=>n(284371),m=()=>n(824160),f=()=>n(991249),v=n(474848);function h({upsell:e,mobileStyle:t,desktopStyle:n,analyticsName:u,onClick:g,disableTooltip:h}){const y=(0,c().eP)(),b=(0,a().v3)(),{device:_}=b,k=(0,s().K8)((()=>{const{sidebarSpaceStore:e}=o().default.state;return null==e?void 0:e.canAdmin()}),[]);if("none"===e.type)return null;if(_.isMobileNative)return null;const x=(()=>{switch(e.product){case"personal":return(0,v.jsx)(d().sA,{defaultMessage:"Personal Pro",id:"upgradeButton.personal.text"});case"plus":return(0,v.jsx)(d().sA,{defaultMessage:"Plus ↗",id:"upgradeButton.plus.textWithArrow"});case"business":return(0,v.jsx)(d().sA,{defaultMessage:"Business ↗",id:"upgradeButton.business.textWithArrow"});case"enterprise":return(0,v.jsx)(d().sA,{defaultMessage:"Enterprise ↗",id:"upgradeButton.enterprise.textWithArrow"});case"ai":return(0,v.jsx)(d().sA,{defaultMessage:"AI ↗",id:"upgradeButton.ai.textWithArrow"});case"ai_credit_pack":return(0,v.jsx)(d().sA,{defaultMessage:"AI Credit Pack ↗",id:"upgradeButton.ai_credit_pack.textWithArrow"});case"sites_custom_hostnames":return(0,v.jsx)(d().sA,{defaultMessage:"Custom Hostnames ↗",id:"upgradeButton.sites_custom_hostnames.textWithArrow"});default:e.product,(0,p().HB)(e.product)}})();return r().A.isMobile||!k?(0,v.jsx)(m().A,{mobileStyle:t,children:x}):(0,v.jsx)(l().m,{delayThreshold:120,disableTooltip:h,placement:"bottom",renderTooltip:()=>(0,v.jsx)("div",{style:{maxWidth:500},children:(0,v.jsx)(d().sA,{defaultMessage:"Upgrade to use this feature.",id:"premiumFeatureUpgradeButton.upgrade.tooltip"})}),originGap:6,render:t=>(0,v.jsx)(m().A,{desktopStyle:n,innerStyle:S(e.product,y),onClick:t=>function(e,t,n,o,r){f().K(o,{from:t,upsell:n,spaceStore:(0,i().S)()}),r&&r(e)}(t,u,e,b,g),...t,children:x})})}function S(e,t){switch(e){case"plus":case"business":case"enterprise":return{color:u().Tj.blue.text.accentPrimary,background:"light"===t?u().oZ.diffBackground:"rgba(35, 131, 226, 0.2)",fontWeight:g().Wy.medium};default:return{}}}},122406:(e,t,n)=>{n.d(t,{e:()=>i});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"1.68 2.37 17.01 15.26",svg:(0,n(474848).jsx)("path",{d:"M8 2.375c-1.137 0-2.054.47-2.674 1.242-.608.757-.9 1.765-.9 2.824s.292 2.066.9 2.824c.62.772 1.537 1.241 2.674 1.241s2.055-.469 2.675-1.241c.608-.758.9-1.766.9-2.824 0-1.059-.292-2.067-.9-2.824-.62-.773-1.538-1.242-2.675-1.242M5.676 6.441c0-.842.233-1.554.624-2.042.38-.473.937-.774 1.7-.774s1.32.301 1.7.774c.391.488.624 1.2.624 2.042s-.233 1.554-.624 2.041c-.38.473-.937.774-1.7.774s-1.32-.3-1.7-.774c-.391-.487-.624-1.2-.624-2.041M8 11.63c-2.7 0-5.101 1.315-6.12 3.305-.361.706-.199 1.421.23 1.923.412.48 1.06.767 1.74.767h8.3c.68 0 1.328-.287 1.74-.767.429-.502.591-1.217.23-1.923C13.1 12.945 10.7 11.63 8 11.63m-5.007 3.875c.761-1.488 2.672-2.626 5.007-2.626s4.246 1.138 5.007 2.626c.105.204.07.378-.067.54-.156.182-.448.33-.79.33h-8.3c-.342 0-.634-.148-.79-.33-.138-.162-.172-.336-.067-.54m15.493-8.568a.625.625 0 0 1 0 .884L16.807 9.5l1.68 1.68a.625.625 0 1 1-.884.883l-1.68-1.68-1.68 1.68a.625.625 0 0 1-.883-.884L15.04 9.5l-1.68-1.68a.625.625 0 1 1 .884-.883l1.68 1.68 1.678-1.68a.625.625 0 0 1 .884 0"})},i=(0,n(340498).wt)("personXmark",o,"default")},128250:(e,t,n)=>{n.d(t,{P:()=>i});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"3.75 3.75 12.51 12.51",svg:(0,n(474848).jsx)("path",{d:"M14.75 3.75h-9.5a1.5 1.5 0 0 0-1.5 1.5v9.5a1.5 1.5 0 0 0 1.5 1.5h9.5a1.5 1.5 0 0 0 1.5-1.5v-9.5a1.5 1.5 0 0 0-1.5-1.5"})},i=(0,n(340498).wt)("mediaStopFill",o,"fill")},158115:(e,t,n)=>{n.r(t),n.d(t,{arrowChevronSingleRightFillSmallIcon:()=>i,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 16 16",fittedViewBox:"5.54 2.94 5.81 10.11",directional:!0,svg:(0,n(474848).jsx)("path",{d:"M11.13 8.53a.75.75 0 0 0 0-1.06L6.81 3.15a.75.75 0 0 0-1.06 1.06L9.54 8l-3.79 3.79a.75.75 0 0 0 1.06 1.06z"})},i=(0,n(340498).wt)("arrowChevronSingleRightFillSmall",o,"fillSmall")},171333:(e,t,n)=>{n.d(t,{Uj:()=>E,X_:()=>N,ht:()=>U,jS:()=>F,lB:()=>W,x0:()=>D});n(16280),n(18107),n(967357);var o=n(296540),i=()=>n(717137),r=()=>n(484714),a=()=>n(590526),s=()=>n(401497),c=()=>n(79926),l=()=>n(779315),d=()=>n(295633),u=()=>n(680474),p=()=>n(807449),g=()=>n(459683),m=()=>n(378815),f=()=>n(892936),v=()=>n(100622),h=()=>n(209199),S=()=>n(496603),y=()=>n(534177),b=()=>n(783793),_=()=>n(383070),k=()=>n(591197),x=()=>n(109488),w=()=>n(495159),A=()=>n(552871),I=()=>n(525569),M=()=>n(472090),T=()=>n(84671),C=()=>n(286088),B=n(474848);function j(e){return new DOMRect(e.left,e.top,e.width,e.height)}const P=300;function D(e){const{scrollerStore:t,openState:n,children:c,freezePosition:l=!1}=e,u=(0,o.useRef)(null),p=(0,o.useRef)(null),[m,f]=(0,o.useState)(void 0),v=(0,o.useRef)(void 0),{scrollerRef:S,scrollerClientRect:b}=(0,a().K8)((()=>({scrollerRef:t.state.elementRef,scrollerClientRect:t.state.clientRect})),[t]),A=(0,o.useRef)(void 0),T=(0,o.useRef)(void 0),D=(0,o.useRef)(t),R=(0,o.useRef)(!1);D.current!==t&&(v.current=void 0,T.current=void 0,A.current=void 0,R.current=!0,D.current=t);const N=(0,a().K8)((()=>"agentCompletionPopup"===n.type&&n.didTransitionFromPeekToFullPage),[n]);(0,o.useEffect)((()=>{if(N){const e=setTimeout((()=>{I().default.setDidTransitionFromPeekToFullPage(!1),R.current=!0}),P);return()=>clearTimeout(e)}}),[N]);const E=(0,a().K8)((()=>{if(l&&v.current&&!R.current)return v.current;R.current=!1;const e="agentCompletionPopup"===n.type;if(N&&e&&S.current){const e=n.context.origin;if(e instanceof d().B){const t=S.current.querySelector(`[data-block-id="${e.id}"]`);if(t){const e=t.getBoundingClientRect(),n=S.current.getBoundingClientRect(),o=S.current.scrollTop,i={top:e.bottom-n.top+o+8,left:e.left-n.left,width:Math.min(Math.max(e.width,V),z)};return v.current=i,i}}return v.current}const{originRect:t,correspondingOpenState:o}=(()=>{const e=(0,C().Q9)(n);let t=e?(0,w().LB)(e):void 0;if(!t&&A.current){const e=(0,C().Q9)(A.current);let t=e?(0,w().LB)(e):void 0;return t||(t=T.current?j(T.current):void 0),{originRect:t,correspondingOpenState:A.current}}if(!t&&T.current&&(t=j(T.current)),!t&&S.current){const e=n.context.origin;if(e instanceof d().B){const n=S.current.querySelector(`[data-block-id="${e.id}"]`);n&&(t=n.getBoundingClientRect())}}return t&&(T.current=j(t)),{originRect:t,correspondingOpenState:n}})();if(!t||!b||!S.current)return v.current;A.current||(A.current=o);(e=>{const{origin:t,type:n}=e.context;switch(n){case"cursor":return t instanceof d().B&&t.isEmptyEditableBlock();case"blockSelection":case"textSelection":return!1;default:(0,y().HB)(n)}})(o)&&(t.height=0);const i=function(e){const{originRect:t,scrollerRect:n,scrollerScrollTop:o,popupRect:i}=e,r=(null==i?void 0:i.width)??0,a=Math.min(Math.max(t.width,V),z),s=t.bottom-n.top+o+F.top;let c;c=r+F.left+F.right>n.width?F.left:t.left+r>n.right?n.width-r-F.right:(0,h().A1)()?n.right-t.left-r:t.left-n.left;return{top:s,left:c,width:a}}({originRect:t,scrollerRect:S.current.getBoundingClientRect(),scrollerScrollTop:S.current.scrollTop,popupRect:m});return v.current=i,i}),[b,S,m,n,l,N]),O=U(t),W=(0,y().O9)(E);(0,o.useEffect)((()=>{if(O&&W&&u.current)switch(O){case"Page":{const e=new IntersectionObserver((e=>{const[t]=e;t.isIntersecting?k().ZJ.setState({...k().ZJ.state,popupRenderedInPage:!0}):k().ZJ.setState({...k().ZJ.state,popupRenderedInPage:{direction:t.boundingClientRect.top<0?"above":"below",writerRef:u}})}),{root:S.current,threshold:0});return e.observe(u.current),()=>{e.disconnect(),k().ZJ.setState({...k().ZJ.state,popupRenderedInPage:!1})}}case"PeekView":{const e=new IntersectionObserver((e=>{const[t]=e;t.isIntersecting?k().ZJ.setState({...k().ZJ.state,popupRenderedInPeekView:!0}):k().ZJ.setState({...k().ZJ.state,popupRenderedInPeekView:{direction:t.boundingClientRect.top<0?"above":"below",writerRef:u}})}),{root:S.current,threshold:0});return e.observe(u.current),()=>{e.disconnect(),k().ZJ.setState({...k().ZJ.state,popupRenderedInPeekView:!1})}}}}),[O,W,S]),(0,o.useEffect)((()=>{if(!u.current)throw new Error("ref.current is null");const e=new(M().E);let t;return e.rect.addListener((e=>{(0,y().O9)(t)&&cancelAnimationFrame(t),t=requestAnimationFrame((()=>f(e.state)))})),e.observe(u.current),()=>{(0,y().O9)(t)&&cancelAnimationFrame(t),e.destroy()}}),[]);const K=(0,o.useMemo)((()=>"assistantCompletionPopup"===n.type?"results"===n.stage&&n.loading:"agentCompletionPopup"===n.type?"executing"===n.stage:void(0,y().HB)(n)),[n]),{isPhone:H}=(0,r().Y0)(),$=(0,r().v3)(),Y=(0,a().K8)((()=>!H&&_().zD.disableWriterAutoFollow()),[H]),Z=(0,C().B2)({scrollerRef:S,areWeLoading:K,unpauseAfterMs:5e3});(0,o.useEffect)((()=>{null!=E&&E.top&&!K&&u.current&&!Y&&L(u.current,$,{behavior:"smooth",block:"nearest"})}),[null==E?void 0:E.top,K,Y,$]),(0,o.useEffect)((()=>{if(!p.current||!S.current||!K||Z||Y)return;const e=new IntersectionObserver((e=>{var t;!Boolean(null===(t=e.at(0))||void 0===t?void 0:t.isIntersecting)&&u.current&&(0,g().R)({element:u.current,environment:$,options:{behavior:"smooth",block:"end"}})}),{root:S.current,threshold:1});return e.observe(p.current),()=>{e.disconnect()}}),[S,K,Z,Y,$]);const q=(0,o.useMemo)((()=>"assistantCompletionPopup"===n.type?"results"===n.stage&&!n.loading:"agentCompletionPopup"===n.type?"results"===n.stage:void(0,y().HB)(n)),[n]);(0,o.useEffect)((()=>{if(q&&!Y){L.cancel();const e=setTimeout((()=>{u.current&&(0,g().R)({element:u.current,environment:$,options:{behavior:"smooth",block:u.current.getBoundingClientRect().height>window.innerHeight?"end":"nearest"}})}),150);return()=>clearTimeout(e)}}),[q,Y,$]),(0,o.useEffect)((()=>{Z&&L.cancel()}),[Z]);const J=(0,s().IS)((()=>({wrap:{position:"absolute",width:null==E?void 0:E.width,zIndex:113,top:0,insetInlineStart:0,transform:`translate(${((0,h().A1)()?-1:1)*((null==E?void 0:E.left)??0)}px, ${(null==E?void 0:E.top)??0}px)`,transition:"transform 0.1s",scrollMarginTop:K&&!Y?.33*window.innerHeight:50,scrollMarginBottom:K?.33*window.innerHeight:50}})),[E,K,Y]);return(0,B.jsx)(x().A,{capture:!0,render:e=>(0,B.jsx)(i().A,{debugName:"PopupPositioner",capture:!0,allowMenuList:!0,allowEsc:!0,children:(0,B.jsxs)("div",{style:J.wrap,ref:u,...e,children:[E?c:void 0,(0,B.jsx)("div",{ref:p,style:{visibility:"hidden"}})]})})})}function R(e){const{returnToWriterDetails:t}=e,n=(0,A().L)(),i=(0,r().v3)(),a=(0,o.useCallback)((e=>{t.writerRef.current&&(e.stopPropagation(),e.preventDefault(),O(t.writerRef.current,i,{behavior:"smooth",block:"nearest"}))}),[t.writerRef,i]),l=(0,o.useCallback)((e=>{e.stopPropagation(),e.preventDefault()}),[]),d=(0,s().IS)((()=>({container:{position:"absolute",display:"grid",placeItems:"center",insetInlineStart:"50%",transform:"translateX(-50%)",zIndex:1e6,bottom:n},button:{cursor:"pointer",backgroundColor:"black",background:v().Tj.background.accentPrimary,color:v().Tj.text.inversePrimary,borderRadius:36,height:36,padding:4,paddingInlineEnd:10,boxShadow:v().Tj.shadowLG,fontSize:14,display:"flex",alignItems:"center",gap:6}})),[n]),g=(0,o.useMemo)((()=>{switch(t.direction){case"above":return(0,B.jsx)(p().I,{icon:f().arrowStraightUpFillIcon});case"below":return(0,B.jsx)(p().I,{icon:m().arrowStraightDownFillIcon});default:(0,y().HB)(t.direction)}}),[t.direction]),h=(0,o.useMemo)((()=>{switch(t.direction){case"above":case"below":return{transition:{duration:.2,ease:"easeOut"},animate:{opacity:1},exit:{opacity:0},initial:{opacity:0}};default:(0,y().HB)(t.direction)}}),[t.direction]),{value:S}=(0,c().fJ)(u().fM);if(!S)return null;const{motion:_}=S;return(0,B.jsx)("div",{style:d.container,children:(0,B.jsxs)(_.div,{className:T().u,"aria-live":"polite",style:d.button,onClick:a,onMouseDown:l,...h,children:[(0,B.jsx)(b().x,{variant:"small"}),g]})})}function N(e){const{scrollerKey:t}=e,{isPhone:n}=(0,r().Y0)(),o=(0,a().K8)((()=>!n&&_().zD.disableWriterAutoFollow()),[n]),i=(0,a().K8)((()=>{if(!o||!t)return!1;const e=I().default.state;if("agentCompletionPopup"===e.type&&e.didTransitionFromPeekToFullPage)return!1;switch(t){case"Page":return k().ZJ.state.popupRenderedInPage;case"PeekView":return k().ZJ.state.popupRenderedInPeekView;default:(0,y().HB)(t)}}),[t,o]),{value:s}=(0,c().fJ)(u().fM);if(!s)return null;const{AnimatePresence:l}=s;return(0,B.jsx)(l,{children:"object"==typeof i?(0,B.jsx)(R,{returnToWriterDetails:i}):null})}const E=S().sg(((e,t,o)=>{var i;((0,n(490969).H)({element:t,environment:o,options:{top:e,left:0,behavior:"smooth"}}),l().A.MenuScroller)&&(null===(i=l().A.MenuScroller.getNode())||void 0===i||i.scrollTo({top:0}))}),60),L=S().nF(((e,t,n)=>{(0,g().R)({element:e,environment:t,options:n})}),200,{leading:!1}),O=S().sg(((e,t,n)=>{(0,g().R)({element:e,environment:t,options:n})}),100),F={top:4,bottom:6,left:6,right:16},V=500,z=730;function W(e){var t,n;return e===(null===(t=l().A.PageScroller)||void 0===t?void 0:t.getStore())?l().A.PageScroller:e===(null===(n=l().A.PeekViewScroller)||void 0===n?void 0:n.getStore())?l().A.PeekViewScroller:void 0}function U(e){var t,n;return e===(null===(t=l().A.PageScroller)||void 0===t?void 0:t.getStore())?"Page":e===(null===(n=l().A.PeekViewScroller)||void 0===n?void 0:n.getStore())?"PeekView":void 0}},200424:(e,t,n)=>{e.exports=n.p+"9ade71d75a1c0e93.png"},247865:(e,t,n)=>{n.r(t),n.d(t,{showIdleTranscriptionToast:()=>p});var o=()=>n(564884),i=()=>n(907258),r=()=>n(675133),a=()=>n(295633),s=()=>n(252688),c=()=>n(812182),l=()=>n(192359),d=()=>n(116730),u=()=>n(402170);function p(e,t){var n;const{pointer:p}=t,g=i().AppStoreSidebarSpaceStore.state;if(!g)return;const m=a().B.createChildStore(g,p);if(null==m||!m.isTranscriptionBlock()||"transcribing"!==(0,l().by)(m).state)return;const f=(0,l().RW)(null===(n=m.getFormat())||void 0===n?void 0:n.transcription_model);(0,o().u)({environment:e,event:{eventName:"idle_transcription_toast_shown",eventProperties:{block_id:m.id,transcription_model:f}}}),c().Iz({id:"transcription_idle",icon:s().h,iconColorPalette:"gray",iconColorVariant:"inversePrimary",presentationType:"persistent",title:r().A.getIntl().formatMessage({id:"idleTranscriptionToast.title",defaultMessage:"Still there?"}),message:r().A.getIntl().formatMessage({id:"idleTranscriptionToast.message",defaultMessage:"Notion AI is recording your audio but hasn't heard from you in a while."}),onDismiss:()=>{(0,o().u)({environment:e,event:{eventName:"idle_transcription_toast_dismissed",eventProperties:{block_id:m.id,transcription_model:f}}})},actions:{primary:{title:r().A.getIntl().formatMessage({id:"idleTranscriptionToast.action.stop",defaultMessage:"Stop"}),onAction:()=>{(0,u().K)({environment:e,blockStore:m}),(0,d().stopTranscription)({environment:e,blockStore:m,from:"transcription_idle_notification"}),c().UW("transcription_idle_notification"),(0,o().u)({environment:e,event:{eventName:"idle_transcription_toast_stop_button_clicked",eventProperties:{block_id:m.id,transcription_model:f}}})}},secondary:{title:r().A.getIntl().formatMessage({id:"idleTranscriptionToast.action.goToBlock",defaultMessage:"Go to meeting note"}),onAction:()=>{c().UW("transcription_idle_notification"),(0,u().K)({environment:e,blockStore:m}),(0,o().u)({environment:e,event:{eventName:"idle_transcription_toast_navigation_button_clicked",eventProperties:{block_id:m.id,transcription_model:f}}})}}}})}},278141:(e,t,n)=>{n.r(t),n.d(t,{TranscriptionSetupModal:()=>w});n(898992),n(354520),n(581454);var o=n(296540),i=()=>n(564884),r=()=>n(933922),a=()=>n(484714),s=()=>n(590526),c=()=>n(401497),l=()=>n(107975),d=()=>n(807449),u=()=>n(160432),p=()=>n(148307),g=()=>n(187174),m=()=>n(209969),f=()=>n(69708),v=()=>n(100622),h=()=>n(284371),S=()=>n(738471),y=()=>n(232930),b=()=>n(82050),_=()=>n(748197),k=n(474848);const x=(0,f().YK)({transcriptionSetupModal:{id:"transcriptionBlock.transcriptionSetupModal.ariaLabel",defaultMessage:"AI Meeting Notes Setup"},getStarted:{id:"transcriptionBlock.transcriptionSetupModal.getStarted",defaultMessage:"AI Meeting Notes Setup"},setupDescription:{id:"transcriptionBlock.transcriptionSetupModal.setupDescription",defaultMessage:"One-time setup to capture notes effortlessly."},imageAlt:{id:"transcriptionBlock.transcriptionSetupModal.imageAlt",defaultMessage:"AI Meeting Notes setup image"},troubleshootingText:{id:"transcriptionBlock.transcriptionSetupModal.troubleshootingText",defaultMessage:"If you’ve already completed setup but still see this, try these <link>troubleshooting steps</link>"}});function w(){const e=(0,f().tz)(),t=(0,a().Y0)(),n=(0,s().K8)((()=>_().c.state.transcriptionSetupModalOpen&&t.isElectron),[t]);return(0,k.jsx)(l().a,{ariaLabel:e.formatMessage(x.transcriptionSetupModal),open:n,render:()=>(0,k.jsx)(A,{}),transitionAppearance:"none",onDismiss:()=>{_().c.closeTranscriptionSetupModal()}})}function A(){const e=(0,c().IS)((()=>({wrapper:{display:"flex",flexDirection:"column",width:"100%",maxWidth:480,border:`1px solid ${v().Tj.border.secondaryTranslucent}`,borderRadius:12},header:{display:"flex",flexDirection:"column",gap:4,padding:"20px 25px 5px",backgroundColor:v().Tj.background.secondaryTranslucent},title:{display:"flex",flexDirection:"row",alignItems:"center",fontSize:24,fontWeight:600,color:v().Tj.text.primary},description:{marginBottom:15,fontSize:17,lineHeight:"24px",color:v().Tj.text.secondary},troubleshooting:{marginBottom:15,fontSize:14,lineHeight:"20px",color:v().Tj.text.secondary},troubleshootingLink:{color:v().Tj.blue.text.accentPrimary,textDecoration:"none",cursor:"pointer"},body:{display:"flex",flexDirection:"column",gap:8,padding:"25px 25px 20px",borderRadius:12,position:"relative"},controlRowContainerInvertedBorder:{backgroundColor:v().Tj.background.secondaryTranslucent}})),[]),t=(0,a().v3)(),[n]=(0,o.useState)((0,b().xw)()),[s,l]=(0,o.useState)([]),[d,u]=(0,o.useState)(!1),[p]=(0,g().Yb)((async()=>{let e,o=s;const i=n.filter((e=>!s.includes(e.id)));for(const n of i){const i=await n.hasCompleted({environment:t,isConfirmation:!1});i&&!s.includes(n.id)&&(o=[...o,n.id]),i||e||(e=n)}return l(o),e}),[t,n,s]);return(0,o.useEffect)((()=>{if(p.value&&d){const e=setInterval((async()=>{const n=p.value;if(!n)return void clearInterval(e);await n.hasCompleted({environment:t,isConfirmation:!0})&&(l([...s,n.id]),clearInterval(e))}),3e3);return()=>{clearInterval(e)}}}),[p,t,d,s]),(0,k.jsx)(r().A,{capture:!0,allowUndo:!1,allowEsc:!0,allowTabUntab:!1,render:o=>(0,k.jsxs)("div",{...o,style:e.wrapper,children:[(0,k.jsxs)("div",{style:e.header,children:[(0,k.jsx)("div",{style:e.title,children:(0,k.jsx)(f().sA,{...x.getStarted})}),(0,k.jsx)("div",{style:e.description,children:(0,k.jsx)(f().sA,{...x.setupDescription})}),(0,k.jsx)("div",{style:e.troubleshooting,children:(0,k.jsx)(f().sA,{...x.troubleshootingText,values:{link:t=>(0,k.jsx)("a",{href:(0,y().x)("guides.meetingNotes.troubleshootCommonIssues"),target:"_blank",rel:"noopener noreferrer",style:e.troubleshootingLink,children:t})}})})]}),(0,k.jsxs)("div",{style:e.body,children:[(0,k.jsx)("div",{style:{...e.controlRowContainerInvertedBorder,width:"16px",height:"16px",position:"absolute",top:0,insetInlineStart:0,clipPath:"path('M16 0C7.16344 0 0 7.16344 0 16V0H16Z')"}}),(0,k.jsx)("div",{style:{...e.controlRowContainerInvertedBorder,width:"16px",height:"16px",position:"absolute",top:0,insetInlineEnd:0,clipPath:"path('M0 0C8.83656 0 16 7.16344 16 16V0H0Z')"}}),n.map((e=>{var n,o;return(0,k.jsx)(I,{step:e,isCompleted:s.includes(e.id),isFirstIncompleteStep:(null===(o=p.value)||void 0===o?void 0:o.id)===e.id,onAction:()=>{e.action({environment:t,isConfirmation:!1}),(0,i().u)({environment:t,event:{eventName:"transcription_block_setup_modal_action_clicked",eventProperties:{step:e.id}}}),u(!0)}},`${e.id}-${null===(n=p.value)||void 0===n?void 0:n.id}`)}))]})]})})}function I(e){const t=(0,f().tz)(),{step:n,isFirstIncompleteStep:o,onAction:i,isCompleted:r}=e,a=(0,c().IS)((()=>({stepContainer:{display:"flex"},checkIcon:{marginInlineEnd:12,marginTop:3,fill:r?v().Tj.blue.icon.accentPrimary:v().Tj.icon.tertiary},content:{flex:1},stepTitle:{display:"flex",alignItems:"center",fontSize:19,fontWeight:h().Wy.semibold,marginBottom:4,color:r?v().Tj.blue.text.accentPrimary:v().Tj.text.primary},container:{display:"flex",flexDirection:"row",alignContent:"flex-start",alignItems:"flex-start",width:"100%",gap:20},image:{width:"135px",marginTop:8,flexShrink:0,borderRadius:4},description:{display:"flex",flexDirection:"column",marginBottom:5,marginTop:5,color:v().Tj.text.secondary},actionButton:{marginTop:12,alignSelf:"flex-start"}})),[r,o]);return(0,k.jsxs)("div",{style:a.stepContainer,children:[(0,k.jsx)(d().I,{icon:m().checkmarkCircleFillIcon,size:24,style:a.checkIcon}),(0,k.jsxs)("div",{style:a.content,children:[(0,k.jsx)("div",{style:a.stepTitle,children:(0,k.jsx)(f().sA,{...n.title})}),o?(0,k.jsxs)("div",{style:a.container,children:["microphone"===n.id||"system-audio"===n.id?(0,k.jsx)(S().A,{src:p().A.images.aiMeetingNotes.setupPng,alt:t.formatMessage(x.imageAlt),style:a.image,placeholderLoadedStyle:{width:"auto"}}):null,(0,k.jsxs)("div",{style:a.description,children:[(0,k.jsx)(f().sA,{...n.description}),(0,k.jsx)(u().A,{colorPalette:"blue",style:a.actionButton,onClick:i,children:(0,k.jsx)(f().sA,{...n.actionText})})]})]}):null]})]})}},278589:(e,t,n)=>{n.d(t,{N:()=>r});var o=()=>n(534177),i=()=>n(126126);function r(e){return"avatar"===e?i().eQ:"xsmall"===e?18:"xsmall_plus"===e?24:"small"===e?28:"small_plus"===e?32:"medium"===e?36:"medium_plus"===e?44:"medium_large"===e?48:"large"===e?50:"large_plus"===e?64:"xlarge"===e?94:"plans"===e?20:"deep_dive"===e?16:"upsell_banner"===e?74:"personalization_modal"===e?96:(0,o().HB)(e)}},299177:(e,t,n)=>{n.d(t,{A:()=>r});class o extends(()=>n(757695))().Store{getInitialState(){return{}}}const i=new o;n(852832).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",i);const r=i},301578:(e,t,n)=>{n.r(t),n.d(t,{CurrentlyListeningTranscriptionBlockIndicator:()=>_});var o=n(296540),i=()=>n(59226),r=()=>n(484714),a=()=>n(590526),s=()=>n(401497),c=()=>n(718827),l=()=>n(807449),d=()=>n(26697),u=()=>n(831081),p=()=>n(69708),g=()=>n(100622),m=()=>n(577999),f=()=>n(116730),v=()=>n(402170),h=()=>n(541229),S=()=>n(964345),y=()=>n(405689),b=n(474848);function _(){const e=(0,r().v3)(),t=(0,h().R)({includeVisible:!1}),n=(0,a().O$)(m().Y),l=(0,i().X)("in_app_activity_renderer_no_event_transcription"),[u,f]=(0,o.useState)(!1),_=(0,s().IS)((()=>({wrapper:{borderRadius:34,background:g().Tj.background.elevated},container:{display:"flex",alignItems:"center",justifyContent:"center",boxShadow:g().Tj.shadow.outline.md,borderRadius:34,paddingInlineEnd:14,paddingInlineStart:12,height:44,minWidth:100,background:g().Tj.background.elevated,gap:6,transition:"background 0.3s ease-in-out"},hoveredStyle:{background:u?g().Tj.outlinefrontSecondaryButtonPressedBackground:g().Tj.buttonHoveredBackground}})),[u]),x=(0,o.useCallback)((()=>{t&&(0,v().K)({environment:e,blockStore:t})}),[e,t]),w=(0,a().O$)(S().gZ);return t?n||l?null:(0,b.jsx)(d().m,{renderTooltip:()=>u?(0,b.jsx)(p().sA,{defaultMessage:"Stop recording",id:"currentlyListeningTranscriptionBlockIndicator.stopRecording"}):(0,b.jsx)(p().sA,{defaultMessage:"Return to meeting note",id:"currentlyListeningTranscriptionBlockIndicator.returnToTranscription"}),render:e=>(0,b.jsx)("div",{style:_.wrapper,children:(0,b.jsxs)(c().Ay,{...e,style:_.container,hoveredStyle:_.hoveredStyle,onClick:x,children:[(0,b.jsx)(y().t,{fillWidth:!0,fakeSoundwave:!w,rootBlockId:t.id}),(0,b.jsx)(k,{store:t,setIsHovering:f})]})})}):null}function k(e){const{store:t,setIsHovering:n}=e,i=(0,r().v3)(),a=(0,o.useCallback)((()=>{(0,f().stopTranscription)({environment:i,blockStore:t,from:"currently_listening_transcription_block"}),(0,v().K)({environment:i,blockStore:t})}),[i,t]);return(0,b.jsx)(c().Ay,{onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),onClick:a,children:(0,b.jsx)(l().I,{icon:u().U,size:"xxs",fitToViewBox:"all",colorPalette:"red",colorVariant:"accentPrimary"})})}},310947:(e,t,n)=>{n.r(t),n.d(t,{DictationAvatar:()=>S});var o=n(296540),i=()=>n(484714),r=()=>n(590526),a=()=>n(401497),s=()=>n(718827),c=()=>n(26697),l=()=>n(69708),d=()=>n(100622),u=()=>n(23420),p=()=>n(783793),g=()=>n(126126),m=()=>n(673657),f=()=>n(964345),v=n(474848);const h=18;function S({enableClickToScroll:e=!1,rootStore:t,noMarginRight:n=!1,noOutline:S=!1,noTooltip:y=!1}){const b=(0,m().n)(t),_=(0,i().v3)(),k=(0,o.useCallback)((e=>e.border.accentPrimary),[]),x=(0,g().XE)(k,!0),w=(0,a().IS)((()=>({tooltip:{color:d().Tj.text.inverseSecondary,minWidth:150,paddingTop:2,paddingBottom:2,lineHeight:1.3},avatarContainer:{backgroundColor:d().Tj.assistantCornerButtonBackground,display:"flex",alignItems:"center",justifyContent:"center"}})),[]),A=(0,r().O$)(f().b);return!b&&t?null:(0,v.jsx)(c().m,{textWrap:!0,disableTooltip:y,renderTooltip:()=>(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{children:(0,v.jsx)(l().sA,{defaultMessage:"Transcribing your words",id:"topbar.presenceIndicator.dictation.tooltip.description"})}),(0,v.jsx)("div",{style:w.tooltip,children:(0,v.jsx)(l().sA,{defaultMessage:"Click to see where",id:"topbar.presenceIndicator.dictation.tooltip.action"})})]}),render:t=>{const o=(0,v.jsx)("div",{style:{...x.avatarOuterOutline,...S?{outline:"none"}:{},...n?{marginInlineEnd:0}:{},width:h,height:h},children:(0,v.jsx)("div",{style:{...x.avatarBorder,...w.avatarContainer},children:(0,v.jsx)(p().x,{variant:"avatar",shadowVariant:"none"})})});return e&&A?(0,v.jsx)(s().Ay,{...t,onClick:()=>(0,u().B)([A],!0,_),style:x.button,hoveredStyle:x.buttonHovered,pressedStyle:x.buttonPressed,children:o}):(0,v.jsx)("div",{...t,style:{cursor:"default"},children:o})}})}},321172:(e,t,n)=>{n.d(t,{XP:()=>v,T:()=>h,Tk:()=>f});n(898992),n(354520),n(581454),n(296540);var o=()=>n(792057),i=()=>n(179034),r=()=>n(69708),a=()=>n(314529);var s=()=>n(998992),c=()=>n(544198),l=()=>n(380682),d=()=>n(712505),u=()=>n(212640),p=()=>n(538233),g=()=>n(437487),m=n(474848);function f(e){const{environment:t,store:n}=e;g().Ay.reset(),d().default.state.open?u().A.setState({...u().A.state,open:!0}):p().A.setState({...p().A.state,open:!0}),function(e,t){(0,a().DO_NOT_USE_trackLegacy)(e,"open_page_share",t)}(t,{share_menu_session_id:g().Ay.state.sessionId,...n&&n.table===i().ev&&n.isCollectionView()?{collection_view_block_id:n.id,...(0,c().P)(n,{skipPages:!1})}:{}})}function v(e){const{environment:t,store:n}=e;d().default.state.open?u().A.setState({...u().A.state,open:!1}):p().A.setState({...p().A.state,open:!1}),l().A.setState({...l().A.state,siteSettingContentType:"initial"});const{collection_view_block_id:o,collection_view_id:r,collection_id:m,owned_collection_count:f,linked_collection_count:v}=(()=>{if(n&&n.table===i().ev&&n.isCollectionView()){const e=(0,c().P)(n,{skipPages:!1});return{collection_view_block_id:n.id,collection_view_id:(0,s().I)(n,t),collection_id:e.collectionId,owned_collection_count:e.ownedCollectionCount,linked_collection_count:e.linkedCollectionCount}}return{collection_view_block_id:void 0,collection_view_id:void 0,collection_id:void 0,owned_collection_count:void 0,linked_collection_count:void 0}})();!function(e,t){(0,a().DO_NOT_USE_trackLegacy)(e,"close_page_share",t)}(t,{share_menu_session_id:g().Ay.state.sessionId,collection_id:m,collection_view_id:r,collection_view_block_id:o,owned_collection_count:f,linked_collection_count:v})}async function h(e){const{inviteTargetsStore:t}=e,n=(0,m.jsx)(r().sA,{id:"shareMenu.closeInviteDialog.confirmationMessage",defaultMessage:"Your changes have not been saved. Discard changes?"}),i=(0,m.jsx)(r().sA,{id:"shareMenu.closeInviteDialog.confirmationButton.label",defaultMessage:"Yes"}),a=(0,m.jsx)(r().sA,{id:"shareMenu.closeInviteDialog.cancelButton.label",defaultMessage:"Cancel"});if(t.state.inviteTargets.length>0){return(await o().Gh({message:n,acceptLabel:i,cancelLabel:a})).accept}return!1}},332751:(e,t,n)=>{n.d(t,{I:()=>r});var o=()=>n(170722),i=()=>n(369241);function r(){o().A.state.isActive&&(i().A.setState({...i().A.state,open:!1}),o().A.setState({...o().A.state,isActive:!1,isAnimatingClosed:!0}))}},337333:(e,t,n)=>{n.r(t),n.d(t,{TranscriptionBlockSharingButtonPopup:()=>R});n(898992),n(354520),n(581454);var o=n(296540),i=()=>n(135168),r=()=>n(484714),a=()=>n(590526),s=()=>n(401497),c=()=>n(250910),l=()=>n(118307),d=()=>n(420802),u=()=>n(807449),p=()=>n(546926),g=()=>n(160432),m=()=>n(890492),f=()=>n(81068),v=()=>n(424400),h=()=>n(663639),S=()=>n(736847),y=()=>n(89849),b=()=>n(566910),_=()=>n(68263),k=()=>n(69708),x=()=>n(100622),w=()=>n(534177),A=()=>n(579627),I=()=>n(453697),M=()=>n(347160),T=()=>n(499764),C=()=>n(350824),B=()=>n(928074),j=()=>n(711207),P=()=>n(353890),D=n(474848);function R(e){const{users:t,children:n,rolesMap:i}=e,r=(0,o.useMemo)((()=>new(l().A)),[]);return(0,D.jsx)(c().A,{buttonPopupStore:r,popupType:c().z.Popup,originGap:4,alignmentToOrigin:"start",onClick:e=>{e.stopPropagation(),e.preventDefault()},render:()=>(0,D.jsx)(N,{users:t,rolesMap:i,buttonPopupStore:r}),renderOrigin:n})}function N(e){const{users:t,rolesMap:n,buttonPopupStore:c}=e,{store:l}=(0,P().s)(),u=(0,r().v3)(),y=(0,k().tz)(),[b,T]=(0,o.useState)("editor"),[R,N]=(0,o.useState)(t.filter((e=>e.id!==u.currentUser.id&&"none"===(n[e.id]??"none")))),E=(0,a().K8)((()=>!(0,B().Aj)({store:l})),[l]),O=(0,a().K8)((()=>{const e=l.getNavigableBlockStore();return!(null==e||!e.isDefined())&&e.canEditMembership()}),[l]),F=(0,a().K8)((()=>t.filter((e=>e.isDefined()))),[t]),V=(0,o.useCallback)((e=>{const t=R.includes(e);N(t?R.filter((t=>t.id!==e.id)):[...R,e])}),[R]),z=(0,o.useCallback)((e=>{(0,_().PW)(e)&&T(e)}),[T]),W=(0,o.useCallback)((()=>{const e=l.getNavigableBlockStore();if(!e)return;const t=R.map((e=>{const t=e.getModel();if(t)return{type:"existingUser",value:t}})).filter(w().O9);A().eP({environment:u,store:e,inviteTargets:t,inviteRole:b,isOnboarding:!1,invite:{inviteOrigin:"transcription_block"}}),N([]),c.setState({open:!1}),(0,j().FP)({environment:u,store:l})}),[u,l,R,b,c]),U=(0,a().K8)((()=>(0,i().f)(l)),[l]),K=(0,s().IS)((()=>({you:{color:x().Tj.gray.text.accentPrimary}})),[]),H=(0,D.jsx)(S().A,{topBorder:!0,extraPadding:!0,children:(0,D.jsx)(v().Ay,{left:(0,D.jsx)(M().Ay,{table:"block",type:"user_permission",availableRoleItems:C().X5,role:b,onChange:z,upgradeButtonName:"user_permission_item",spaceStore:U}),right:(0,D.jsx)(g().A,{colorPalette:"blue",onClick:W,disabled:0===R.length||!O,children:(0,D.jsx)(k().sA,{id:"transcriptionBlock.calendarAttendeesList.shareButton",defaultMessage:"Share page"})})})}),$=(0,o.useCallback)((()=>[{key:"users",render:e=>(0,D.jsx)(S().A,{...e,title:(0,D.jsx)(k().sA,{id:"transcriptionBlock.attendeeList.eventParticipants.title",defaultMessage:"Event participants"})}),items:F.map((e=>({key:e.id,action:()=>{},render:t=>{const o={displayName:e.getDisplayName(y),email:e.getEmail()},i=n[e.id],r=e.id===u.currentUser.id;return(0,D.jsx)(f().A,{...t,focused:!1,left:(0,D.jsx)(I().A,{userStore:e,size:24,avatarShouldShowShadow:!0}),disabled:r,title:r?(0,D.jsx)(k().sA,{id:"transcriptionBlock.calendarAttendeeList.shareMenu.you",defaultMessage:"{name} <gray>(You)</gray>",values:{name:o.displayName,gray:e=>(0,D.jsx)("span",{style:K.you,children:e})}}):o.displayName,caption:o.email,body:(0,D.jsx)(L,{role:i,hasInaccessiblePermissions:E}),right:r?null:(0,D.jsx)(d().S,{size:16,checked:R.includes(e),style:{marginInlineEnd:8},onClick:()=>{V(e)}}),onClick:()=>{V(e)}})}})))}]),[F,y,n,R,u.currentUser.id,V,K.you,E]);return(0,D.jsx)(m().A,{menuType:p().gu.Popup,maxHeight:"min(448px, 40vh)",footer:H,children:(0,D.jsx)(h().A,{type:h().O.Vertical,sections:$(),initialFocus:void 0,resetFocusOnMouseOut:!0})})}const E=(0,k().YK)({mayHaveAccess:{id:"transcriptionBlock.sharingButtonPopup.mayHaveAccess",defaultMessage:"May have access"}});function L(e){const{role:t,hasInaccessiblePermissions:n}=e,o=(0,k().tz)(),i=t?(0,T().qZ)(t):n?o.formatMessage(E.mayHaveAccess):(0,T().qZ)("none"),r=(0,s().IS)((()=>({row:{display:"flex",alignItems:"center",gap:6,color:"none"===t?x().Tj.red.text.secondary:x().Tj.gray.text.secondary}})),[t]);return(0,D.jsxs)("div",{style:r.row,children:["none"===t?(0,D.jsx)(u().I,{icon:b().e,size:"xxs"}):(0,D.jsx)(u().I,{icon:y().eyeIcon,size:"xxs"}),(0,D.jsx)("div",{children:i})]})}},369241:(e,t,n)=>{n.d(t,{A:()=>o});const o=new(n(118307).A)},370136:(e,t,n)=>{n.d(t,{p:()=>a});var o=()=>n(165358),i=()=>n(763884),r=()=>n(914649);function a(e){const{userId:t,from:n,additionalLogData:a}=e,s=i().K.get({userId:t,key:r().XK});if(s)return i().K.remove({userId:t,key:r().XK}),o().log({level:"info",from:n,type:"localStorageMigrationSuccess",data:{miscDataToConvertToString:{userId:t,previousLocalStorageValue:s,...a}}}),s}},378815:(e,t,n)=>{n.r(t),n.d(t,{arrowStraightDownFillIcon:()=>i,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"3.72 2.12 12.56 15.76",svg:(0,n(474848).jsx)("path",{d:"M10.875 2.924c0-.441-.392-.799-.875-.799s-.875.358-.875.799v11.964L5.219 10.98a.875.875 0 0 0-1.239 1.24l5.4 5.4a.875.875 0 0 0 1.238 0l5.4-5.4a.875.875 0 1 0-1.238-1.238l-3.906 3.907z"})},i=(0,n(340498).wt)("arrowStraightDownFill",o,"fill")},380682:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().Store{getInitialState(){return{siteSettingContentType:"initial"}}}const i=new o},402528:(e,t,n)=>{n.d(t,{D6:()=>O,Jf:()=>j,Zr:()=>D,_:()=>B,bO:()=>E,kO:()=>P,nT:()=>L,p5:()=>F});n(410838),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(672577),n(581454),n(737550);var o=()=>n(564884),i=()=>n(755531),r=()=>n(140934),a=()=>n(675133),s=()=>n(128933),c=()=>n(849829),l=()=>n(295633),d=()=>n(849255),u=()=>n(56268),p=()=>n(584262),g=()=>n(165358),m=()=>n(970412),f=()=>n(769864),v=()=>n(410624),h=()=>n(328194),S=()=>n(854513),y=()=>n(192359),b=()=>n(362075),_=()=>n(966509),k=()=>n(488776),x=()=>n(752860),w=()=>n(321172),A=()=>n(644914),I=()=>n(712505),M=()=>n(402602),T=()=>n(649021);const C=(0,n(69708).YK)({unableToCreateTranscriptionBlockForCalendarEvent:{id:"calendarEventActions.unableToCreateTranscriptionBlockForCalendarEvent",defaultMessage:"A transcription block could not be created for this calendar event."},sharedBlockWithParticipants:{id:"upcomingMeetings.sharedBlockWithParticipants",defaultMessage:"Participants in your workspace have edit access to this page."},sharedBlockWithParticipantsCta:{id:"upcomingMeetings.sharedBlockWithParticipants.cta",defaultMessage:"Manage access"},transcriptionBlockAlreadyExists:{id:"upcomingMeetings.transcriptionBlockAlreadyExists",defaultMessage:"A meeting note already exists for this calendar event."},transcriptionBlockAlreadyStarted:{id:"calendarEventActions.transcriptionBlockAlreadyStarted",defaultMessage:"This meeting is already being transcribed."},transcriptionBlockAlreadyStartedByUser:{id:"calendarEventActions.transcriptionBlockAlreadyStartedByUser",defaultMessage:"{transcriberName} is already transcribing"}});function B(e){const{environment:t,transcriptionBlockStore:n}=e;(0,c().L)({item:{label:a().A.formatMessage(C.sharedBlockWithParticipants)},showButton:!0,buttonText:a().A.formatMessage(C.sharedBlockWithParticipantsCta),onClick:()=>{(0,w().Tk)({environment:t,store:n})}})}async function j(e){const{environment:t,event:n,from:o,parent:r,peekMode:c,method:l}=e;let d=!1;const m=(0,i().S)();if(!m)return{createdNewTranscriptionBlock:!1};let f=await D({event:n,environment:t,spaceStore:m});if(f){(await S().$.load()).navigateToTranscriptionBlock({environment:t,blockStore:f,pageVisitSource:p().y8.UpcomingMeetingCalendarEvent,peekMode:c})}else{if(f=await async function(e){const{environment:t,from:n,event:o,parent:i,peekMode:r}=e,c=(0,M().W)(),l=(await S().$.load()).createAndNavigateToTranscriptionBlock({environment:t,from:n,title:"title_with_event",pageVisitSource:p().y8.UpcomingMeetingCalendarEvent,peekMode:r,calendarEvent:o,...c?{sharedNote:!0}:{},parent:i});return l||(g().log({level:"error",from:"calendarEventActions",type:"unableToCreateTranscriptionBlockForCalendarEvent",data:{miscDataToConvertToString:{eventId:o.id,from:n,parentId:i&&"string"!=typeof i?i.id:i}}}),void s().D6({label:a().A.formatMessage(C.unableToCreateTranscriptionBlockForCalendarEvent)}))}({environment:t,from:o,event:n,parent:r,peekMode:c}),!f)return{createdNewTranscriptionBlock:!1};d=!0}return"side_peek"===c&&await I().default.waitUntil((()=>{var e;return I().default.isSidePeekOpen()&&Boolean(null===(e=I().default.peekTargetStore.state)||void 0===e?void 0:e.isReady())})),"upcoming_meeting_create_meeting_note"!==o||d||s().D6({label:a().A.formatMessage(C.transcriptionBlockAlreadyExists)}),async function(e){const{environment:t,event:n,transcriptionBlockStore:o,createdNewTranscriptionBlock:i}=e;if(!i||!o)return;if(!(0,M().W)())return;o.isReady()||await o.load();const r=(0,u().r)({environment:t,store:o});if(r)return;if(!E(n))return;B({environment:t,transcriptionBlockStore:o})}({environment:t,event:n,createdNewTranscriptionBlock:d,transcriptionBlockStore:f}),(0,_().R)({environment:t,data:{type:"track",payload:{event:"meetingNoteClicked",eventId:n.id,product:"notion",from:o,method:l}}}),{createdNewTranscriptionBlock:d,transcriptionBlockStore:f}}async function P(e){const{environment:t,event:n,from:o,peekMode:i,autoStart:r=!0,method:c}=e,{createdNewTranscriptionBlock:l,transcriptionBlockStore:u}=await j({environment:t,from:o,event:n,peekMode:i,method:c});if(u){if("initial"!==(0,y().by)(u).state){var p;const e=null===(p=u.getModel())||void 0===p||null===(p=p.getFormat().transcription_state_history)||void 0===p?void 0:p.findLast((e=>"transcribing"===e.state));if(e){const n=a().A.getIntl(),o=new(d().L)(t,{id:e.actor_id,table:e.actor_table}).getDisplayName(n);s().D6({label:a().A.formatMessage(C.transcriptionBlockAlreadyStartedByUser,{transcriberName:o})})}else s().D6({label:a().A.formatMessage(C.transcriptionBlockAlreadyStarted)});return{createdNewTranscriptionBlock:l,transcriptionBlockStore:u}}}if(r&&u){const e=await h().w.load();await e.startTranscription({environment:t,blockStore:u,from:o,audioConsentEnabled:(0,b().yz)()})}else if(r){const e=await v().k.load();await e.startTranscribingBlockOnPageFromTrustedSource({environment:t,from:o})}return{createdNewTranscriptionBlock:l,transcriptionBlockStore:u}}async function D(e){const{event:t,spaceStore:n,environment:o}=e,{blockAttachments:i}=t;let r;const a=f().callApi({environment:o,eventName:"getTranscriptionBlockForEvent",data:{eventUid:t.uid,spaceId:n.id}});null!=i&&i.length&&(r=N({event:t,spaceStore:n}));const s=await a;if("failed"===s.type)return r;const c=s.data.transcriptionBlockPointers,l=new Set(c.map((e=>e.id))),d=new Set((null==i?void 0:i.map((e=>e.id)))??[]),u=(0,m()._)(l,d);return 0===u.size||(g().log({level:"warning",from:"maybeGetTranscriptionBlockStoreFromEvent",type:"missingTranscriptionRecordPointer",data:{miscDataToConvertToString:{missingPointers:Array.from(u),verifiedPointers:Array.from(l),localPointers:Array.from(d),eventId:t.id,spaceId:n.id}}}),(0,k().Y)().update((e=>{const o=null==e?void 0:e.events.find((e=>e.accountId===t.accountId&&e.calendarId===t.calendarId&&e.id===t.id));return o?(o.blockAttachments=[...Array.from(u).map((e=>({spaceId:n.id,table:"block",id:e}))),...o.blockAttachments??[]],e):e})),r=N({event:t,spaceStore:n})),r}const R=4e3;async function N(e){var t,n;const{event:o,spaceStore:i,timeoutMs:a=R}=e,s=(null===(t=o.blockAttachments)||void 0===t?void 0:t.map((e=>l().B.createChildStore(i,e))))??[];if(0===s.length)return;const c=new(r().ComputedStore)((()=>(0,T().gw)({event:o,transcriptionBlockStores:s})),{debugName:`getPrimaryTranscriptionBlockStoreFromEvent-${o.uid}`});let d=c.getState();return"LOADING"===d.reason&&(d=await new Promise((e=>{const t=window.setTimeout((()=>{e(void 0),c.removeListener(n)}),a),n=o=>{"LOADING"!==o.getState().reason&&(e(o.getState()),clearTimeout(t),c.removeListener(n))};c.addListener(n)}))),null!==(n=d)&&void 0!==n&&n.primaryTranscriptionBlockStore?d.primaryTranscriptionBlockStore:void 0}function E(e){var t;return null===(t=e.attendees)||void 0===t?void 0:t.some((e=>e.notionUserId&&!e.self))}async function L(e){const{event:t,from:n,environment:i,calendarBotId:r,peekMode:a}=e,s=!(await j({environment:i,from:n,event:t,peekMode:a??"side_peek"})).createdNewTranscriptionBlock,c=function(e){const{from:t,environment:n,eventProperties:o}=e,i=(0,A().KB)(n);switch(t){case"upcoming_meeting":return{eventName:"ai_meetings_tab_upcoming_meetings_event_clicked",eventProperties:o};case"upcoming_meeting_primary_note":return{eventName:"ai_meetings_tab_upcoming_meetings_event_primary_note_clicked",eventProperties:o};case"in_app_meeting_notification_upcoming_stage":return{eventName:"in_app_meeting_notification_upcoming_stage_event_clicked",eventProperties:{...o,is_sidebar_expanded:i}};default:return}}({from:n,environment:i,eventProperties:{calendar_event_id:t.id,has_existing_meeting_note:s}});c&&(0,o().u)({environment:i,event:c}),r&&(0,_().R)({environment:i,data:{type:"track",payload:{event:"meetingNoteOpened",eventId:t.id,calendarId:t.calendarId,from:n,hasExistingNote:s}},botId:r})}async function O(e){const{event:t,from:n,environment:i,calendarBotId:r,peekMode:a}=e,s=!(await P({environment:i,event:t,from:n,peekMode:a??"side_peek"})).createdNewTranscriptionBlock,c=function(e){const{from:t,environment:n,eventProperties:o}=e,i=(0,A().KB)(n);switch(t){case"upcoming_meeting_start_transcribing":return{eventName:"ai_meetings_tab_upcoming_meetings_event_start_transcribing_clicked",eventProperties:o};case"in_app_meeting_notification_upcoming_stage_start_transcribing":return{eventName:"in_app_meeting_notification_upcoming_stage_start_transcribing_clicked",eventProperties:{...o,is_sidebar_expanded:i,from:"primary_transcribe_button"}};case"in_app_meeting_notification_upcoming_stage_join_and_start_transcribing":return{eventName:"in_app_meeting_notification_upcoming_stage_start_transcribing_clicked",eventProperties:{...o,is_sidebar_expanded:i,from:"primary_join_and_transcribe_button"}};case"in_app_meeting_notification_upcoming_stage_start_transcribing_only":return{eventName:"in_app_meeting_notification_upcoming_stage_start_transcribing_clicked",eventProperties:{...o,is_sidebar_expanded:i,from:"dropdown_transcribe_only_button"}};default:return}}({from:n,environment:i,eventProperties:{calendar_event_id:t.id,has_existing_meeting_note:s}});c&&(0,o().u)({environment:i,event:c}),r&&(0,_().R)({environment:i,data:{type:"track",payload:{event:"meetingTranscriptionStarted",eventId:t.id,calendarId:t.calendarId,from:n,hasExistingNote:s}},botId:r})}function F(e){var t,n;const{event:i,from:r,environment:a,calendarBotId:s}=e,c=null===(t=i.conferencing)||void 0===t?void 0:t.providerName,l=function(e){const{from:t,environment:n,eventProperties:o}=e,i=(0,A().KB)(n);switch(t){case"upcoming_meetings":return{eventName:"ai_meetings_tab_upcoming_meetings_event_join_meeting_clicked",eventProperties:o};case"in_app_meeting_notification_upcoming_stage_join_and_transcribe":return{eventName:"in_app_meeting_notification_upcoming_stage_join_meeting_clicked",eventProperties:{...o,is_sidebar_expanded:i,from:"primary_join_and_transcribe_button"}};case"in_app_meeting_notification_upcoming_stage_join_meeting_only":return{eventName:"in_app_meeting_notification_upcoming_stage_join_meeting_clicked",eventProperties:{...o,is_sidebar_expanded:i,from:"dropdown_join_meeting_only_button"}};default:return}}({from:r,environment:a,eventProperties:{calendar_event_id:i.id,conferencing_provider:c}});l&&(0,o().u)({environment:a,event:l}),s&&(0,_().R)({environment:a,data:{type:"track",payload:{event:"joinMeeting",eventId:i.id,calendarId:i.calendarId,conferencingProvider:c,method:r}},botId:s}),null!==(n=i.conferencing)&&void 0!==n&&n.url&&(0,x().L)({environment:a,url:i.conferencing.url})}},402602:(e,t,n)=>{n.d(t,{V:()=>c,W:()=>s});var o=()=>n(907258),i=()=>n(59226),r=()=>n(242422),a=()=>n(590526);function s(){if(!r().default.checkGate({gateName:"meeting_notes_auto_share_setting"}))return!0;const e=o().default.state.sidebarSpaceViewStore,t=null==e?void 0:e.getSettings();return!((null==t?void 0:t.disable_auto_share_meeting_notes)??1)}function c(){const e=(0,i().X)("meeting_notes_auto_share_setting"),t=(0,a().O$)(o().AppStoreSidebarSpaceViewStore);return(0,a().K8)((()=>{if(!e)return!0;const n=null==t?void 0:t.getSettings();return!((null==n?void 0:n.disable_auto_share_meeting_notes)??1)}),[t,e])}},404783:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().Store{constructor(e,t){super(),this.environment=void 0,this.spaceId=void 0,this.environment=e,this.spaceId=t,this.reset()}getInitialState(){if(!this.environment)return;const e=new(n(221844).A)({name:"DiscussionInputStore",isTemporaryData:!0});return{textStore:new(n(770063).pm)({environment:this.environment,pointer:(0,n(594794).zP)({environment:this.environment,table:n(343666).SN,spaceId:this.spaceId}),path:["text"],recordStoreOptions:{inMemoryRecordCache:e}}),localRecordCache:e,files:[],showAttachFileIntro:!1,renderFileAttachIntro:!1}}isEmpty(){const e=this.state.textStore.getValue();return!e||0===e.length}hasNewLineCharacter(){const e=this.state.textStore.getValue();return n(201980).q4_(e).includes("\n")}}const i=o},405981:(e,t,n)=>{n.d(t,{HR:()=>p,_y:()=>g});var o=()=>n(907258),i=()=>n(675133),r=()=>n(792057),a=()=>n(534177),s=()=>n(878523),c=()=>n(116008),l=()=>n(681634),d=()=>n(938045);const u=(0,n(69708).YK)({discardCommentConfirmationPrompt:{id:"newDiscussionMenu.discardCommentConfirmationDialog.prompt",defaultMessage:"Do you want to discard the comment?"},discardCommentButtonLabel:{id:"newDiscussionMenu.discardCommentConfirmationDialog.discardButton.label",defaultMessage:"Discard"},draftCommentConfirmationPromptTitle:{id:"newDiscussionMenu.draftCommentConfirmationDialogTitle.prompt",defaultMessage:"Finish your draft comment?"},draftCommentConfirmationStartingNewDescription:{id:"newDiscussionMenu.draftCommentConfirmationStartingNewDescription.prompt",defaultMessage:"You have a draft comment that will be lost if you start a new one"},draftCommentConfirmationNavigateAwayPromptDescription:{id:"newDiscussionMenu.draftCommentConfirmationNavigateAwayPromptDescription.prompt",defaultMessage:"You have a draft comment that will be lost if you leave the page"},returnToPageButtonLabel:{id:"newDiscussionMenu.discardCommentConfirmationDialog.returnToPage.label",defaultMessage:"Return to draft"}});function p(e){const{discussionInputStore:t,environment:n,discussionHelpers:o,reason:a}=e;c().A.isComposingNewDiscussion()?g({environment:n,reason:a??"navigating_away"}):o.hasCommentChanged(t)?(s().yO(n),r().ui({message:i().A.formatMessage(u.discardCommentConfirmationPrompt),showCancel:!0,handleCancel:()=>s().Ie(n),keepFocus:!0,items:[{label:i().A.formatMessage(u.discardCommentButtonLabel),color:"red",onAccept:()=>{s().QP(n),(0,l().c)()}}]})):(0,l().c)()}function g(e){const{environment:t}=e;if(!c().A.isDraftCommentOnValidSelection())return;const n=c().A.getDiscussionInputStore();s().yO(t),r().ui({message:i().A.formatMessage(u.draftCommentConfirmationPromptTitle),description:(()=>{switch(e.reason){case"starting_new":return i().A.formatMessage(u.draftCommentConfirmationStartingNewDescription);case"navigating_away":return i().A.formatMessage(u.draftCommentConfirmationNavigateAwayPromptDescription);default:(0,a().HB)(e.reason)}})(),keepFocus:!0,innerStyle:{textAlign:"center"},showCancel:!1,shouldRenderDraftCommentIcon:!0,items:[{label:i().A.formatMessage(u.returnToPageButtonLabel),buttonType:"solid",color:"blue",onAccept:()=>{(0,d().x)({currentBlockStore:o().default.state.mainEditorCurrentBlockStore,discussionInputStore:n,environment:t}),s().Ie(t)}},{label:i().A.formatMessage(u.discardCommentButtonLabel),color:"red",buttonType:"outline",onAccept:()=>{s().QP(t),(0,l().c)()}}]})}},441467:(e,t,n)=>{n.d(t,{DZ:()=>F,Ek:()=>K,hN:()=>z,i5:()=>W,of:()=>V});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(672577),n(803949);var o=()=>n(779315),i=()=>n(675133),r=()=>n(489295),a=()=>n(295633),s=()=>n(86159),c=()=>n(292985),l=()=>n(700500),d=()=>n(179034),u=()=>n(197959),p=()=>n(161479),g=()=>n(798880),m=()=>n(201980),f=()=>n(878523),v=()=>n(182641),h=()=>n(383594),S=()=>n(384944),y=()=>n(332751),b=()=>n(538527),_=()=>n(892632),k=()=>n(594794),x=()=>n(299545),w=()=>n(486666),A=()=>n(372154),I=()=>n(718957),M=()=>n(547149),T=()=>n(404783),C=()=>n(555776),B=()=>n(116008),j=()=>n(543225),P=()=>n(59320),D=()=>n(528787),R=()=>n(681634),N=()=>n(583824),E=()=>n(36088),L=()=>n(807060),O=()=>n(405981);const F=(0,n(69708).YK)({emojiPicker:{defaultMessage:"Reaction",id:"ReactionBar.emojiModalMenu.title"},emojiTitle:{id:"recordIcon.emojiTab.title",defaultMessage:"Emoji"}});function V(e){const{environment:t,blockStore:n,multiSelection:o,rect:r,formulasModule:a}=e;let c=r;if(!c){const e=s().get();if(!e)return;c=s().getRect(e)}if(!c)return;const l=c.width,d=c.height,u=c.right-l;B().A.setState({open:!0,rect:new DOMRect(u,c.top,l,d),type:"inline",content:"reaction",blockStore:n,blockId:n.id,multiSelection:o,emoji:void 0}),h().W(t,{originGap:4,originRect:c,popupWidth:w().jv,popupHeight:w().GF,isSmallWidth:!1,title:i().A.formatMessage(F.emojiPicker),currentTab:"emoji",onCancel:()=>B().A.reset(),tabs:[{type:"emoji",title:i().A.formatMessage(F.emojiTitle),hideRandomButton:!0,onChange:e=>{const n=B().A.state;n.open&&"reaction"===n.content&&(B().A.setState({...n,emoji:e}),W({environment:t,formulasModule:a}),h().I())}}]})}async function z(e){var t;const{environment:n,blockStore:i,multiSelection:r,rect:a,from:l,property_id:d}=e;if(B().A.hasContent())return void(0,O()._y)({environment:n,reason:"starting_new"});let u=a;if(!u){const e=s().get();if(!e)return;u=s().getRect(e)}if(!u)return;const g=u.width,m=u.height,v=u.right-g,h=new(T().A)(n,(0,p().e)(i.pointer.spaceId));B().A.setState({open:!0,rect:new DOMRect(v,u.top,g,m),type:"inline",content:"comment",blockStore:i,lastKnownBlockStore:i,blockId:i.id,multiSelection:r,lastEditables:(0,I().$W)(r),discussionInputStore:h,property_id:d,from:l}),(0,c().V)({element:null===(t=o().A.UpdateSidebarCommentScroller)||void 0===t?void 0:t.getNode(),environment:n,options:{top:0,behavior:"smooth"}}),C().A.setActiveWithSource("text_annotation"),y().I(),await(0,E().M)({discussionInputStore:h,environment:n}),f().z0(n,{from:l})}function W(e){const{environment:t,allowActionsWhileCommenting:n,skipOpeningDiscussion:o,formulasModule:i}=e,s=B().A.state;if(s.open){const e="comment"===s.content?s.property_id:void 0,c=B().A.getBlockStore()??B().A.getLastKnownBlockStore();if(B().A.hasContent()&&(!n||c))if("inline"===s.type)M().createAndCommit({userAction:"newDiscussionMenuActions.submitNewDiscussion",environment:t,canUndo:!0,perform:o=>{const i=function(e){const{environment:t,multiSelection:n,transaction:o,allowActionsWhileCommenting:i}=e,{id:s}=t.currentUser;if(!s)return;const c=i?B().A.getLastSelectedEditables():(0,I().$W)(n).filter((({store:e})=>e.table===d().ev));if(!c||0===c.length)return;const p=(0,r().zH)(c[0].store),g=(0,k().Z1)({environment:t,table:u().$Y,spaceId:p.pointer.spaceId}),f=[],v=new Set;c.forEach((({store:e,selection:n},i)=>{v.add(e.id);const s=(0,r().zH)(e);if(!(s instanceof a().B))return;const c=s.getType(),d=s.getFormat();if(c&&(0,l().pD)(c,d))return;let u=e.getValue();const p=m().xbM(u,n);b().Mw({environment:t,store:e,selection:p,annotation:[m().Ifu.Discussion,g],transaction:o}),u=e.getValue();const h=m().Ffo(u,p.startIndex,p.endIndex),S=0===i?[]:[m().Ey_("\n")];f.push(...S,...h)}));const h=(0,I().ZS)({multiSelection:n,filterCommonAncestors:!1,focus:void 0});if(h)for(const r of h.stores){if(v.has(r.id))continue;const e=r.getType(),t=r.getFormat();e&&(0,l().pD)(e,t)||(0,j().B)({blockStore:r,discussionId:g,transaction:o})}return{blockStore:p,context:f,discussionId:g}}({environment:t,multiSelection:s.multiSelection,transaction:o,allowActionsWhileCommenting:n});if(!i)return;const{context:p,blockStore:g,discussionId:v}=i;if("comment"===s.content){const i=s.discussionInputStore.state.textStore.getValue()||[],r=s.discussionInputStore.state.files,{discussionStore:a,commentStore:l}=(0,P().G)({createDiscussionArgs:{type:"default",context:p,property_id:e},blockStore:g,environment:t,transaction:o,commentTextValue:i,files:_().JC(r),discussionId:v});(0,j().B)({transaction:o,blockStore:g,discussionId:v});const{property_type:d,collection_id:u,collection_view_id:m,view_type:h,collection_view_block_id:S}=(0,L().q)(e,c);f().bJ(t,{discussion_id:a.id,discussion_type:a.getType(),comment_id:l.id,parent_block_id:a.getParentId(),from:B().A.state.open&&"comment"===B().A.state.content?B().A.state.from:void 0,property_id:e,property_type:d,collection_view_id:m,view_type:h,collection_id:u,collection_view_block_id:S}),n&&A().A.addNewDiscussionId(v)}else s.emoji&&U({context:p,blockStore:g,environment:t,transaction:o,icon:s.emoji,discussionId:v})},skipUpdatingEditedMetadata:!0});else if("block"===s.type)if("comment"===s.content){const o=s.discussionInputStore.state.textStore.getValue()||[],r=s.discussionInputStore.state.files;n?c&&M().createAndCommit({userAction:"newDiscussionMenuActions.submitNewDiscussion",environment:t,canUndo:!0,perform:n=>{(0,N().i)({environment:t,type:"default",blockStore:c,commentTextValue:o||[],files:r,transaction:n,property_id:e,formulasModule:i})},skipUpdatingEditedMetadata:!0}):M().createAndCommit({userAction:"newDiscussionMenuActions.submitNewDiscussion",environment:t,canUndo:!0,perform:n=>{(0,N().i)({environment:t,type:"default",blockStore:s.blockStore,commentTextValue:o||[],files:r,transaction:n,property_id:e,formulasModule:i})},skipUpdatingEditedMetadata:!0})}else{const e=t.currentUser.id,{emoji:n,blockStore:o}=s,i=x().O3(o,{recursivelyLoadAllDiscussions:!1}).find((e=>e.getReactions().length>0));n&&e&&M().createAndCommit({userAction:"newDiscussionMenuActions.submitNewDefaultDiscussion.addReaction",environment:t,canUndo:!0,perform:r=>{null!=i&&i.isDefined()?D().createReaction({environment:t,transaction:r,store:i,icon:n,currentActorPointer:{table:g().oo,id:e},discussionLocation:"block_menu"}):U({context:void 0,blockStore:o,environment:t,transaction:r,icon:n})},skipUpdatingEditedMetadata:!0})}(0,R().c)();const p=n?c&&c.getAssociatedCollectionStore():s.blockStore.getAssociatedCollectionStore();o||e||!p||v().B4({environment:t,blockStore:n?c??s.blockStore:s.blockStore,shouldFocusDiscussion:!0,analyticsFrom:"db_page_comments",rect:B().A.state.rect,recursivelyLoadAllDiscussions:!1})}}function U(e){const{context:t,blockStore:n,environment:o,transaction:i,icon:r}=e,a=e.discussionId??(0,k().Z1)({environment:o,table:u().$Y,spaceId:n.pointer.spaceId});if(void 0===o.currentUser.id)return;const s=S().vt({environment:o,table:"discussion",args:{type:"default",id:a,parent:n.pointer,context:t,space_id:(0,p().e)(n.pointer.spaceId)},inMemoryRecordCache:n.inMemoryRecordCache,transaction:i});(0,j().B)({transaction:i,blockStore:n,discussionId:s.id});const c={table:g().oo,id:o.currentUser.id};return D().createReaction({environment:o,transaction:i,store:s,icon:r,currentActorPointer:c,discussionLocation:"block_menu"}),s}function K(e){const{environment:t}=e;if(!t.currentUser.id)return;const n=B().A.getPropertyId();if(n){var o;const e=null===(o=B().A.getBlockStore())||void 0===o?void 0:o.getPropertyStore(n);if(e)return{blockStore:e,context:e.getValue()}}const i=B().A.getLastSelectedEditables();if(!i||0===i.length)return;const s=(0,r().zH)(i[0].store),c=[],d=new Set;return i.forEach((({store:e,selection:t},n)=>{d.add(e.id);const o=(0,r().zH)(e);if(!(o instanceof a().B))return;const i=o.getType(),s=o.getFormat();if(i&&(0,l().pD)(i,s))return;const u=e.getValue(),p=m().xbM(u,t),g=m().Ffo(u,p.startIndex,p.endIndex),f=0===n?[]:[m().Ey_("\n")];c.push(...f,...g)})),{blockStore:s,context:c}}},495159:(e,t,n)=>{n.d(t,{LB:()=>l,VT:()=>s,vr:()=>c});var o=()=>n(686131),i=()=>n(295633),r=()=>n(116089),a=()=>n(836724);const s=(0,n(69708).YK)({askAI:{defaultMessage:"Ask AI",id:"id.completions.askAI"},genericHelpMeWrite:{defaultMessage:"{filter}",id:"id.completions.genericHelpMeWrite"},summarize:{defaultMessage:"Summarize",id:"id.completions.summarize"},findActionItems:{defaultMessage:"Find action items",id:"id.completions.findActionItems"},autofillSummary:{defaultMessage:"Summary",id:"id.completions.autofillSummary"},autofillTranslate:{defaultMessage:"Translate",id:"id.completions.autofillTranslate"},autofillExtract:{defaultMessage:"Key info",id:"id.completions.autofillExtract"},autofillCustom:{defaultMessage:"Custom autofill",id:"id.completions.autofillCustom"}}),c={text:{summarize:{name:s.autofillSummary,svg:n(37719).P},translate:{name:s.autofillTranslate,svg:n(877235).textTranslateIcon},extract:{name:s.autofillExtract,svg:n(202017).n},custom:{name:s.autofillCustom,svg:r().x}},select:{select:{name:s.autofillCustom,svg:r().x}},multi_select:{select:{name:s.autofillCustom,svg:r().x}}};function l(e){const{origin:t}=e;return t instanceof i().B?function(e){let t=a().T.findNodeFromStore(e);if(t){if("table"===e.getType()){const e=t.querySelector(`.${o().rb}.notion-table-block`);t=e??t}return t.getBoundingClientRect()}}(t):t instanceof HTMLElement?t.getBoundingClientRect():t}},517288:(e,t,n)=>{n.d(t,{O:()=>l});var o=()=>n(675133),i=()=>n(383594),r=()=>n(486666),a=()=>n(129522),s=()=>n(116008),c=()=>n(441467);function l(e){const{environment:t,blockStore:n,rect:l,skipOpeningDiscussionOnSubmit:d,formulasModule:u}=e,p=l??a().K.getRect(n);if(!p)return;const g=p.width,m=p.height,f=p.right-g;s().A.setState({open:!0,rect:new DOMRect(f,p.top,g,m),type:"block",content:"reaction",blockStore:n,blockId:n.id,emoji:void 0}),i().W(t,{originGap:4,originRect:p,popupWidth:r().jv,popupHeight:r().GF,isSmallWidth:!1,title:o().A.formatMessage(c().DZ.emojiPicker),currentTab:"emoji",onCancel:()=>s().A.reset(),tabs:[{type:"emoji",title:o().A.formatMessage(c().DZ.emojiTitle),hideRandomButton:!0,onChange:e=>{const n=s().A.state;n.open&&"reaction"===n.content&&(s().A.setState({...n,emoji:e}),(0,c().i5)({environment:t,skipOpeningDiscussion:d,formulasModule:u}),i().I())}}]})}},519973:(e,t,n)=>{n.d(t,{N:()=>i,y:()=>o});function o(e){return"Arabic"===e||"Hebrew"===e}const i=(0,n(69708).YK)({English:{id:"transcriptionBlockSettings.language.english.title",defaultMessage:"English"},Simplified_Chinese:{id:"transcriptionBlockSettings.language.simplified_chinese.title",defaultMessage:"Chinese (Simplified)"},Traditional_Chinese:{id:"transcriptionBlockSettings.language.traditional_chinese.title",defaultMessage:"Chinese (Traditional)"},Spanish:{id:"transcriptionBlockSettings.language.spanish.title",defaultMessage:"Spanish"},French:{id:"transcriptionBlockSettings.language.french.title",defaultMessage:"French"},German:{id:"transcriptionBlockSettings.language.german.title",defaultMessage:"German"},Japanese:{id:"transcriptionBlockSettings.language.japanese.title",defaultMessage:"Japanese"},Korean:{id:"transcriptionBlockSettings.language.korean.title",defaultMessage:"Korean"},Portuguese:{id:"transcriptionBlockSettings.language.portuguese.title",defaultMessage:"Portuguese"},Russian:{id:"transcriptionBlockSettings.language.russian.title",defaultMessage:"Russian"},Thai:{id:"transcriptionBlockSettings.language.thai.title",defaultMessage:"Thai"},Vietnamese:{id:"transcriptionBlockSettings.language.vietnamese.title",defaultMessage:"Vietnamese"},Indonesian:{id:"transcriptionBlockSettings.language.indonesian.title",defaultMessage:"Indonesian"},Danish:{id:"transcriptionBlockSettings.language.danish.title",defaultMessage:"Danish"},Finnish:{id:"transcriptionBlockSettings.language.finnish.title",defaultMessage:"Finnish"},Norwegian:{id:"transcriptionBlockSettings.language.norwegian.title",defaultMessage:"Norwegian"},Dutch:{id:"transcriptionBlockSettings.language.dutch.title",defaultMessage:"Dutch"},Swedish:{id:"transcriptionBlockSettings.language.swedish.title",defaultMessage:"Swedish"},Italian:{id:"transcriptionBlockSettings.language.italian.title",defaultMessage:"Italian"},Arabic:{id:"transcriptionBlockSettings.language.arabic.title",defaultMessage:"Arabic"},Hebrew:{id:"transcriptionBlockSettings.language.hebrew.title",defaultMessage:"Hebrew"},Polish:{id:"transcriptionBlockSettings.language.polish.title",defaultMessage:"Polish"}})},528787:(e,t,n)=>{n.r(t),n.d(t,{createReaction:()=>k,toggleReaction:()=>_});n(898992),n(354520),n(672577),n(581454),n(737550);var o=()=>n(770063),i=()=>n(97879),r=()=>n(785082),a=()=>n(343666),s=()=>n(197959),c=()=>n(204384),l=()=>n(161479),d=()=>n(798880),u=()=>n(534177),p=()=>n(878523),g=()=>n(722101),m=()=>n(384944),f=()=>n(279922),v=()=>n(594794),h=()=>n(547149),S=()=>n(741817),y=()=>n(725332),b=()=>n(807060);function _(e){const{discussionLocation:t,environment:n,transaction:a,store:g,icon:m}=e,v=function({store:e,icon:t}){const n=(0,o().G_)(e,e.pointer,"reactions").getValue();if(void 0===n)return;return n.map((t=>{const n=i().L.createChildStore(e,{table:c().ez,id:t,spaceId:(0,l().e)(e.pointer.spaceId)});if(n.isDefined())return n})).filter(u().O9).find((e=>e.getIcon()===t))}({store:g,icon:m});if(void 0===n.currentUser.id)return;const b={table:d().oo,id:n.currentUser.id};return null!=v&&v.isDefined()?function({store:e,actorPointer:t,transaction:n,environment:o,discussionLocation:a}){var c;const l={store:e,actorPointer:t,transaction:n,environment:o,discussionLocation:a},d=e.getParentStore(),u=(null==d?void 0:d.table)===s().$Y?d:null==d?void 0:d.getParentStore(),g=(null===(c=e.getActors())||void 0===c?void 0:c.some((e=>e.id===t.id)))??!1;u&&x(u,d)&&(0,y().U)({transaction:n,discussionStore:u});return g?(function(e){var t,n;const{store:o,actorPointer:a,discussionLocation:c,transaction:l,environment:d}=e;if(!o.isDefined())return;const u=o.getParentStore(),g=(null==u?void 0:u.table)===s().$Y?u:null==u?void 0:u.getParentStore(),m=r().eR.includes(c),v=null==g||null===(t=g.getParentStore())||void 0===t?void 0:t.getNavigableBlockStore(),y=i().L.getUserVisibleReactions(u),b=1===y.length&&1===o.getActors().length&&o.getActors()[0].id===d.currentUser.id;p().fq({environment:d,reaction_value:o.getIcon(),comment_id:o.getParentId(),discussion_id:null==g?void 0:g.id,discussion_type:null==g?void 0:g.getType(),parent_block_id:null==g?void 0:g.getParentId(),parent_collection_id:null==g||null===(n=g.getParentStore())||void 0===n?void 0:n.getParentCollectionIdUpToTwoLevels(),reaction_count:o.getActors().length??0,from:c,...m&&{inbox_session_id:f().Ay.state.sessionId,notification_page_id:null==v?void 0:v.id}});const _=o.getModel();h().applyOperation({transaction:l,store:o,operation:_.ops.removeActor(a)}),b&&u&&u.table===s().$Y&&(0,S().v)({environment:d,discussionStore:u,transaction:l})}(l),"Removed"):(function(e){var t,n;const{store:o,actorPointer:i,discussionLocation:a,transaction:c,environment:l}=e;if(!o.isDefined())return;const d=o.getParentStore(),u=(null==d?void 0:d.table)===s().$Y?d:null==d?void 0:d.getParentStore(),g=r().eR.includes(a),m=null==u||null===(t=u.getParentStore())||void 0===t?void 0:t.getNavigableBlockStore();p().MP({environment:l,reaction_value:o.getIcon(),comment_id:o.getParentId(),discussion_id:null==u?void 0:u.id,discussion_type:null==u?void 0:u.getType(),parent_block_id:null==u?void 0:u.getParentId(),parent_collection_id:null==u||null===(n=u.getParentStore())||void 0===n?void 0:n.getParentCollectionIdUpToTwoLevels(),reaction_count:o.getActors().length??0,from:a,...g&&{inbox_session_id:f().Ay.state.sessionId,notification_page_id:null==m?void 0:m.id}});const v=o.getModel();h().applyOperation({transaction:c,store:o,operation:v.ops.appendActor(i)})}(l),"Added")}({environment:n,store:v,actorPointer:b,transaction:a,discussionLocation:t}):(k({environment:n,transaction:a,store:g,icon:m,currentActorPointer:b,discussionLocation:t}),"Added")}function k({environment:e,transaction:t,store:n,icon:i,currentActorPointer:a,discussionLocation:d}){var u,h;const S=(0,v().JH)({environment:e,table:c().ez,spaceId:(0,l().e)(n.pointer.spaceId)}),_=n.table===s().$Y?n:n.getParentStore(),k=r().eR.includes(d),w=null==_||null===(u=_.getParentStore())||void 0===u?void 0:u.getNavigableBlockStore(),A=null==_?void 0:_.getPropertyId(),I=null==_?void 0:_.getParentStore(),{property_type:M,collection_id:T,collection_view_id:C,view_type:B,collection_view_block_id:j}=(0,b().q)(A,I);p().MP({environment:e,reaction_value:i,comment_id:n.id,discussion_id:null==_?void 0:_.id,discussion_type:null==_?void 0:_.getType(),parent_block_id:null==_?void 0:_.getParentId(),parent_collection_id:null==_||null===(h=_.getParentStore())||void 0===h?void 0:h.getParentCollectionIdUpToTwoLevels(),reaction_count:0,from:d,...k&&{inbox_session_id:f().Ay.state.sessionId,notification_page_id:null==w?void 0:w.id},property_type:M,collection_id:T,collection_view_id:C,view_type:B,collection_view_block_id:j});const P=m().vt({environment:e,table:S.table,args:{id:S.id,spaceId:S.spaceId,commentId:n.id,icon:i,actorPointer:a},inMemoryRecordCache:n.inMemoryRecordCache,transaction:t}),D=(0,o().G_)(n,n.pointer,"reactions");g().BC({parentStore:D,appendStore:P,transaction:t}),_&&x(_,n)&&(0,y().U)({transaction:t,discussionStore:_})}function x(e,t){var n;if(!e||!t||t.table!==a().SN)return!1;const o=null===(n=e.getUserSeenRecordStore())||void 0===n?void 0:n.getLastSeenAt();return!o||o<t.getCreatedTime()}},541229:(e,t,n)=>{n.d(t,{R:()=>c});n(944114),n(581454);var o=()=>n(907258),i=()=>n(590526),r=()=>n(192359),a=()=>n(964345),s=()=>n(748197);function c({includeVisible:e}){return(0,i().K8)((()=>{var t;const n=Object.values(a().Ay.state.passiveBlockMap).map((({rootBlockStore:e})=>e)),i=a().ei.state,c=[];i&&i.isTranscriptionBlock()&&c.push(i);for(const e of n)e.isTranscriptionBlock()&&c.push(e);const l=null===(t=o().default.state.currentUserStore)||void 0===t?void 0:t.id;if(l)for(const o of c){const t=(0,r().by)(o);if(o.pathIsDead()||"transcribing"!==t.state||t.transcriber_id!==l)continue;const n=s().c.getVisibilityStatus(o.id);if(e||!n)return o}}),[e])}},563692:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>o,xMarkFillSmallIcon:()=>i});n(296540);const o={viewBox:"0 0 16 16",fittedViewBox:"3.03 3.03 9.94 9.94",svg:(0,n(474848).jsx)("path",{d:"M12.73 4.33a.75.75 0 1 0-1.06-1.06L8 6.94 4.33 3.27a.75.75 0 1 0-1.06 1.06L6.94 8l-3.67 3.67a.75.75 0 1 0 1.06 1.06L8 9.06l3.67 3.67a.75.75 0 0 0 1.06-1.06L9.06 8z"})},i=(0,n(340498).wt)("xMarkFillSmall",o,"fillSmall")},566910:(e,t,n)=>{n.d(t,{e:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"0.97 2.72 18.06 14.56",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M3.893 2.875a.626.626 0 0 1 .79-.02l.092.088.126.146.016.035.072.105 11.273 13.15a.624.624 0 0 1-1.036.678l-1.615-1.884c-1.12.408-2.339.633-3.611.633-3.757 0-7.049-1.946-8.707-4.843l-.155-.283a1.46 1.46 0 0 1 0-1.359l.155-.283c.89-1.554 2.249-2.835 3.898-3.688L3.826 3.757l-.072-.105a.626.626 0 0 1 .14-.777M6.031 6.33c-1.564.744-2.842 1.913-3.653 3.33l-.134.243a.21.21 0 0 0 0 .197l.134.243c1.426 2.49 4.292 4.214 7.622 4.214.958 0 1.877-.144 2.734-.406l-1.1-1.284a3.3 3.3 0 0 1-1.634.438l-.17-.004a3.307 3.307 0 0 1-3.132-3.133l-.004-.17c0-.777.269-1.492.718-2.056zm2.904 3.387q-.037.135-.038.281a1.104 1.104 0 0 0 1.218 1.097zM10 4.194c3.878 0 7.26 2.075 8.862 5.127l.074.164c.125.332.125.7 0 1.032l-.074.163a9.3 9.3 0 0 1-2.987 3.327l-.82-.955c1.15-.764 2.084-1.779 2.7-2.953l.02-.048a.2.2 0 0 0 0-.1l-.02-.049C16.382 7.282 13.438 5.445 10 5.445q-.705 0-1.378.1l-.94-1.098A10.7 10.7 0 0 1 10 4.194"}),(0,o.jsx)("path",{d:"M10.17 6.694a3.307 3.307 0 0 1 3.136 3.303l-.005.17a3.3 3.3 0 0 1-.116.702L9.624 6.713A3 3 0 0 1 10 6.691z"})]})},r=(0,n(340498).wt)("eyeSlash",i,"default")},577999:(e,t,n)=>{n.d(t,{Y:()=>o});const o=n(757695).Store.createValue(!1,{name:"presentingInAppTranscriptionActivityStore"})},591197:(e,t,n)=>{n.d(t,{VY:()=>s,ZJ:()=>r,u3:()=>a});var o=()=>n(140934);class i extends(()=>n(757695))().Store{getInitialState(){return{popupRenderedInPage:!1,popupRenderedInPeekView:!1}}}const r=new i,a=new(o().ComputedStore)((()=>!1!==r.state.popupRenderedInPage),{debugName:"AssistantWriterRenderedInPageStore"}),s=new(o().ComputedStore)((()=>!1!==r.state.popupRenderedInPeekView),{debugName:"AssistantWriterRenderedInPeekViewStore"})},645266:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().Store{getInitialState(){return{open:!1}}}const i=new o},680474:(e,t,n)=>{n.d(t,{Wx:()=>r,fM:()=>o,sM:()=>i});const o=new(n(79926).O2)("framer-motion",(async()=>await Promise.all([n.e(44711),n.e(53321),n.e(37043)]).then(n.bind(n,301716))));function i(e){return e.useAnimation()}function r(e,...t){return e.useInView(...t)}},730307:(e,t,n)=>{n.d(t,{l:()=>g});var o=()=>n(779315),i=()=>n(292985),r=()=>n(161479),a=()=>n(878523),s=()=>n(129522),c=()=>n(404783),l=()=>n(555776),d=()=>n(116008),u=()=>n(36088),p=()=>n(405981);async function g(e){var t;const{environment:n,blockStore:g,rect:m,property_id:f,from:v}=e;if(d().A.hasContent())return void(0,p()._y)({environment:n,reason:"starting_new"});const h=s().K.getRect(g);if(!h)return;const S=new(c().A)(n,(0,r().e)(g.pointer.spaceId)),y=h.width,b=h.height,_=h.right-y;d().A.setState({open:!0,rect:m||new DOMRect(_,h.top,y,b),type:"block",content:"comment",blockStore:g,blockId:g.id,discussionInputStore:S,property_id:f,lastKnownBlockStore:g,from:v}),(0,i().V)({element:null===(t=o().A.UpdateSidebarCommentScroller)||void 0===t?void 0:t.getNode(),environment:n,options:{top:0,behavior:"smooth"}}),l().A.setActiveWithSource("text_annotation"),await(0,u().M)({discussionInputStore:S,environment:n}),a().j4(n,{from:v})}},741817:(e,t,n)=>{n.d(t,{v:()=>a});var o=()=>n(18387),i=()=>n(299545),r=()=>n(588836);function a(e){const{discussionStore:t,transaction:n}=e,a=i().No(t);a&&(0,r().u)({discussionIds:[t.id],transaction:n,blockStore:a});const s=(0,o().Z)();if(s){const e=i().zo({blockStore:s,transclusionReferences:"recurseInto",childPages:"omit"});for(const o of e){if(a&&o.table===a.table&&o.id===a.id)continue;const e=i().bN(o).getValue();null!=e&&e.includes(t.id)&&(0,r().u)({discussionIds:[t.id],transaction:n,blockStore:o})}}}},777932:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().Store{getInitialState(){return{isDuplicating:!1}}}const i=new o},781919:(e,t,n)=>{n.d(t,{N:()=>p});var o=n(296540),i=()=>n(24796),r=()=>n(593531),a=()=>n(986321),s=()=>n(839897),c=()=>n(81068),l=()=>n(69708),d=()=>n(408543),u=n(474848);function p({source:e,upsell:t,isDisabled:n,title:p,onClickBeforeUpgradeAction:g,postUpgradeCallback:m,hoverRef:f,tooltipMessage:v,tooltipPlacement:h,buttonMenuItemProps:S,display:y="icon",customMessages:b,featureName:_,spaceStore:k}){var x;const w=(0,l().tz)(),{onClick:A,focused:I,...M}=S??{},T=t&&"none"!==t.type,{upgradeEligibility:C,handleClick:B}=(0,d().C)({upsell:t,source:e,onClickBeforeUpgradeAction:g,postUpgradeCallback:m,spaceStore:k}),j=(0,s().e)(C.status),P=(0,o.useMemo)((()=>T?"text"===y?(0,u.jsx)(a().c,{upgradeStatus:C.status,handleClick:B,upsell:t,hoverRef:f,customMessages:b,featureName:_}):(0,u.jsx)(r().c,{upgradeStatus:C.status,handleClick:B,upsell:t,hoverRef:f,showPlanName:!0,customMessages:b,featureName:_}):null),[T,y,C.status,B,t,f,b,_]),D=(0,o.useCallback)((e=>{n||(t&&"none"!==t.type?B():null==A||A(e))}),[n,t,B,A]);return(0,u.jsx)(i().T,{tooltipMessage:n&&t?null===(x=j.disabledTooltip)||void 0===x?void 0:x.call(j,{intl:w,upsell:t}):v,placement:h,children:(0,u.jsx)(c().A,{...M,focused:Boolean(I),title:p({upgradeLabel:P}),onClick:D})})}},783793:(e,t,n)=>{n.d(t,{o:()=>l,x:()=>c});n(296540);var o=()=>n(401497),i=()=>n(100622),r=()=>n(278589),a=()=>n(200424),s=n(474848);function c(e){const{variant:t,imgSource:n,tintColor:a,faceStyle:c,shadowVariant:d="strong",style:u,...p}=e,g=(0,o().IS)((()=>{const e=(0,r().N)(t);return{faceImgWrap:{width:e,height:e,borderRadius:"100%",background:i().Tj.assistantCornerButtonBackground,..."strong"===d&&{boxShadow:e>=90?i().Tj.shadowMDThickerOutline:i().Tj.shadowMD},..."light"===d&&{borderRadius:"50%",boxShadow:e>=90?i().Tj.shadowSMThickerOutline:i().Tj.shadowSM},overflow:"hidden",...u}}}),[t,d,u]);return(0,s.jsx)("div",{...p,children:(0,s.jsx)("div",{style:g.faceImgWrap,children:(0,s.jsx)(l,{imgSource:n,variant:t,tintColor:a,style:c})})})}function l(e){const{imgSource:t,variant:n,tintColor:i,style:c,alt:l,...d}=e,u=(0,r().N)(n),p=t??a(),g=l??"Notion AI face",m=(0,o().IS)((()=>({faceImg:{height:u,width:u,transform:"scaleX(var(--direction, 1))",...c},tintedFace:{height:u,width:u,transform:"scaleX(var(--direction, 1))",backgroundColor:i,WebkitMaskImage:`url(${p})`,maskImage:`url(${p})`,WebkitMaskRepeat:"no-repeat",maskRepeat:"no-repeat",WebkitMaskPosition:"center",maskPosition:"center",WebkitMaskSize:"contain",maskSize:"contain",...c}})),[u,c,i,p]);return void 0!==i?(0,s.jsx)("div",{style:m.tintedFace,role:"img","aria-label":g}):(0,s.jsx)("img",{...d,style:m.faceImg,src:p,alt:g})}},797573:(e,t,n)=>{n.d(t,{B:()=>r,o:()=>i});n(581454);var o=()=>n(402390);function i(e,t){return e.map((e=>r(e,t)))}function r(e,t){const{nameMessage:n,descriptionMessage:i,...r}=e,{rootId:a,previewRootId:s,spaceId:c}=function(e,t){const n=(0,o().H)(t);return e.sources[n]||e.sources[o().q]}(e,t);return{...r,id:n.id,rootId:a,spaceId:c,previewRootId:s,name:t.formatMessage(n),description:i?t.formatMessage(i):void 0}}},810914:(e,t,n)=>{n.r(t),n.d(t,{StopDictationButtonMobile:()=>k,StopDictationMobileBar:()=>x});var o=n(296540),i=()=>n(484714),r=()=>n(363901),a=()=>n(590526),s=()=>n(401497),c=()=>n(21560),l=()=>n(695115),d=()=>n(128250),u=()=>n(69708),p=()=>n(100622),g=()=>n(235921),m=()=>n(111043);var f=()=>n(920329),v=()=>n(110750),h=()=>n(534177),S=()=>n(964345),y=()=>n(594635);var b=()=>n(405689),_=n(474848);function k(){const e=(0,i().v3)(),{isMobileNative:t,isPhone:n}=(0,i().Y0)(),r=(0,a().K8)((()=>{const e=g().A.isOnboarding(),t=c().A.state.open;return e||t}),[]),s=(0,a().K8)((()=>{var e;return!r&&S().Ay.getState().enabled&&!S().Ay.getState().loading&&!(null!==(e=S().Ay.getState().rootBlock)&&void 0!==e&&e.isTranscriptionBlock())}),[r]),l=(0,o.useCallback)((()=>(0,f().stopDictation)({environment:e,from:"mobile_bar_button"})),[e]);return(0,o.useEffect)((()=>{r&&l()}),[r,l]),function(e){const t=(0,a().O$)(y().A);(0,o.useEffect)((()=>{t&&(e(),y().A.reset())}),[t,e])}(l),function(e){const t=(0,i().v3)(),n=(0,a().K8)((()=>{const e=S().kj.state;if(e)return!e.isDictatableBlock()||e.pathIsDead()}),[]),r=(0,a().K8)((()=>!S().Y$.state&&S().gZ.state),[]),s=(0,a().O$)(S().ei),c=(0,o.useRef)(!0),l=(0,a().K8)((()=>(0,v().Xz)(t.TabbedRouterStore.state)),[t]);(0,o.useEffect)((()=>{(0,h().O9)(n)&&n&&e()}),[n,e]),(0,o.useEffect)((()=>{if(r&&(0,h().O9)(s)&&!s.isTranscriptionBlock()){const t=setTimeout((()=>{e()}),250);return()=>{clearTimeout(t)}}}),[r,e,s]),(0,o.useEffect)((()=>{t.device.isMobileNative&&l&&(c.current?c.current=!1:e())}),[t,l,c,e])}(l),s&&t&&n?(0,_.jsx)(x,{handleClick:l}):null}function x(e){const{handleClick:t}=e,n=(0,i().v3)(),c=(0,u().tz)(),g=(0,r().A)(!0);!function(){const{mobileNative:e}=(0,i().v3)();(0,o.useEffect)((()=>(null==e||e.requestKeepScreenOn(!0),()=>{null==e||e.requestKeepScreenOn(!1)})),[e])}();const f=(0,m().o)(),[v,h]=(0,a().K8)((()=>[n.WindowSizeStore.getSafePaddingLeftPx(16),n.WindowSizeStore.getSafePaddingRightPx(16)]),[n.WindowSizeStore]),y=(0,s().IS)((()=>({container:{position:"absolute",width:"100%",bottom:f,minHeight:50,paddingTop:"6px",paddingBottom:"6px",paddingInlineEnd:h,paddingInlineStart:v,border:`1px solid ${p().Tj.border.secondary}`,background:p().Tj.background.primary},dictationButtonStyle:{display:"flex",justifyContent:"space-between",verticalAlign:"center",cursor:"pointer",gridAutoFlow:"column",placeItems:"center",gap:10,alignItems:"center"}})),[f,v,h]),k=(0,a().O$)(S().Di);return(0,_.jsx)("div",{style:{...y.container,zIndex:1e7},...g,children:(0,_.jsxs)("div",{className:"notion-dictation-button",style:{...y.dictationButtonStyle},children:[(0,_.jsx)("div",{style:{maxWidth:480,width:"100%",justifyContent:"center",display:"flex",verticalAlign:"middle"},children:k?(0,_.jsx)(b().t,{fillWidth:!0,rootBlockId:k}):void 0}),(0,_.jsx)(l().A,{variant:"tint",colorPalette:"red",shape:"pill",size:"xl",icon:d().P,onClick:t,ariaLabel:c.formatMessage({id:"stopDictationButtonMobile.ariaLabel",defaultMessage:"Stop dictation"})})]})})}},824160:(e,t,n)=>{n.d(t,{A:()=>l});n(296540);var o=()=>n(726637),i=()=>n(484714),r=()=>n(401497),a=()=>n(718827),s=()=>n(100622),c=n(474848);function l(e){const t=(0,i().Y0)(),n=(0,r().IS)((()=>({sharedStyle:{display:"flex",alignItems:"center",borderRadius:4},innerStyle:{padding:"2px 6px",borderRadius:4,color:s().Tj.text.secondary,background:s().Tj.defaultBadgeBackground,fontSize:o().A.isMobile?11:9,lineHeight:t.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em",whiteSpace:"nowrap"}})),[t.isAndroid]);return o().A.isMobile?(0,c.jsx)(a().Ay,{style:{...n.sharedStyle,...e.mobileStyle},disabled:void 0===e.onClick,children:(0,c.jsx)("div",{style:{...n.innerStyle,...e.innerStyle},children:e.children})}):(0,c.jsx)(a().Ay,{style:{...n.sharedStyle,...e.desktopStyle},disabled:void 0===e.onClick,...e,children:(0,c.jsx)("div",{style:{...n.innerStyle,...e.innerStyle},children:e.children})})}},839754:(e,t,n)=>{n.d(t,{Bi:()=>A,My:()=>w,ZM:()=>M,_M:()=>I,navigateToWorkflowTemplateOnboardingModal:()=>T});n(16280),n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(672577),n(581454);var o=()=>n(907258),i=()=>n(295633),r=()=>n(584262),a=()=>n(663077),s=()=>n(179034),c=()=>n(201980),l=()=>n(749750),d=()=>n(896628),u=()=>n(384944),p=()=>n(857783),g=()=>n(730969),m=()=>n(840153),f=()=>n(339798),v=()=>n(180762),h=()=>n(799832),S=()=>n(111379),y=()=>n(295304),b=()=>n(547149),_=()=>n(373444),k=()=>n(165592),x=()=>n(204067);function w({transaction:e,collectionStore:t,propertyTemplates:n}){var o;const i=(null===(o=t.getParentBlockStore())||void 0===o?void 0:o.getCollectionViewStores().filter((e=>"table"===e.getType())))??[];if(0===i.length)return;const r=[];for(const c of n){const e=(0,x().S1)({collectionStore:t,templateId:c.templateId,instancePointerType:"property"});e&&r.push({property:e.id,visible:!(0,a().Sz)(c),...c.tablePropertyFormat})}if(0!==r.length)for(const a of i){var s;const t=(null===(s=a.getPropertyFormatsStore("table_properties"))||void 0===s?void 0:s.getValue())??[],n=new Set(t.map((e=>e.property))),o=r.filter((e=>!n.has(e.property)));0!==o.length&&d().zA({stores:[a],update:{table_properties:[...t,...o]},transaction:e})}}function A({transaction:e,collectionStore:t,propertyTemplates:n}){const o=[];for(const s of n){const e=(0,x().S1)({collectionStore:t,templateId:s.templateId,instancePointerType:"property"});e&&o.push({property:e.id,visible:!0})}const i=t.getFormat().collection_page_properties??[],r=new Set(i.map((e=>e.property))),a=o.filter((e=>!r.has(e.property)));a.length&&d().zA({stores:[t],update:{collection_page_properties:[...i,...a]},transaction:e})}function I({environment:e,newPageStore:t,result:n}){"accepted_template"!==n.type&&"accepted_empty_collection"!==n.type||b().createAndCommit({environment:e,canUndo:!1,perform:o=>{const r=t.getTitleValue();if(u().zv({store:t,transaction:o,data:{alive:!1}}),"accepted_empty_collection"===n.type&&!(0,c().w9s)(r)){const a=i().B.createChildStore(t,{table:"block",id:n.blockId}).getTitleStore();a&&y().yr({environment:e,transaction:o,tokens:r,index:0,store:a})}const a=t.getParentStore();if((null==a?void 0:a.table)===s().ev){const e=a.getContentIds();u().zv({store:a,transaction:o,data:{content:e.filter((e=>e!==t.id))}})}},userAction:"clean_up_empty_new_page"})}function M({environment:e,userAction:t,result:n,existingCollectionViewBlockStore:o,existingCollectionStore:i}){if("canceled"!==n.type){if("accepted_empty_collection"===n.type&&i){const o=i.getKeyStore("name"),r=(0,c().x9d)(n.newCollectionTitle);o&&b().createAndCommit({userAction:t,environment:e,canUndo:!0,perform:t=>y().R9({environment:e,store:o,transaction:t,value:r})})}if(o){var r;const e=null===(r=(0,h().U)(o))||void 0===r?void 0:r.settingsStore;e&&f().os({collectionSettingsStore:e})}if("accepted_template"===n.type&&null!=o&&o.isCollectionView()&&(null==o||!o.hasSingleSourceAndNoLinkedCollections())){const t=(0,h().U)(o),i=o.getCollectionViewStores().find((e=>{var t;return(null===(t=e.getCollectionStore())||void 0===t?void 0:t.id)===n.collectionId}));if(!t||!i)return;(0,v().t)({environment:e,collectionContextStore:t,collectionViewId:i.id,isFullScreen:t.isFullScreenStore.state,isRootChild:t.isRootChildStore.state,isInPeekRenderer:t.isInPeekRendererStore.state})}}}async function T({environment:e,collectionViewBlockStore:t}){const n=t.id;if(!t.isDefined()){const o=await l().$f({environment:e,blockId:n});if(!o)return;e=await m().T({environment:e,newCurrentUserId:o}),t=new(i().B)(e,{table:s().ev,id:n}),await t.load()}const a=t.getSpaceId();if(!a)throw new Error("Space ID not found for collection block");const c=(0,S().k)(a);if(!c)throw new Error(`Space view not found for space ID: ${a}`);const{sidebarSpaceStore:d}=o().default.state;(null==d?void 0:d.id)!==a&&await(0,g().y)({environment:e,spaceViewStore:c});const u=t.getFormat();if("workflow_template_placeholder"===(null==u?void 0:u.collection_view_sub_type)&&null!=u&&u.placeholder_workflow_template_id&&t.isCollectionView()){const{getCollectionTemplateFromId:n}=await k().t.load(),o=n(u.placeholder_workflow_template_id);if(!o)throw new Error(`Collection template "${u.placeholder_workflow_template_id}" not found`);const{onNavigateToPlaceholderWorkflowTemplateBlock:i}=await _().O.load();i({environment:e,collectionTemplate:o,collectionViewBlockStore:t})}else p().uK({environment:e,store:t,pageVisitSource:r().y8.WorkflowTemplatesDeeplink})}},842351:(e,t,n)=>{n.r(t),n.d(t,{StopDictationListener:()=>k});var o=n(296540),i=()=>n(484714),r=()=>n(590526),a=()=>n(165358),s=()=>n(69708),c=()=>n(534177),l=()=>n(44551),d=()=>n(812182);var u=()=>n(148555),p=()=>n(920329),g=()=>n(116730),m=()=>n(402170),f=()=>n(664594),v=()=>n(300474),h=()=>n(615234),S=()=>n(866515),y=()=>n(964345);var b=()=>n(249696);const _=(0,s().YK)({title:{id:"stopDictationListener.notification.title",defaultMessage:"Meeting note stopped due to inactivity"},body:{id:"stopDictationListener.notification.body",defaultMessage:"Notion AI could not detect your audio for a while"}});function k(){const e=(0,i().v3)(),t=(0,s().tz)(),n=(0,r().K8)((()=>y().Ay.state.tabId),[]),k=(0,r().O$)(y().ei),x=(0,r().K8)((()=>(0,c().O9)(k)&&k.isTranscriptionBlock()),[k]),w=(0,r().K8)((()=>{const e=y().kj.state;if(e&&e.isDefined())return!e.isDictatableBlock()||e.pathIsDead()}),[]),A=!(0,r().O$)(y().Y$);(0,o.useEffect)((()=>{var t,n,o,i;(0,c().O9)(w)&&w&&(a().log({level:"info",from:"stopDictationListener",type:"block_not_dictatable",data:{miscDataToConvertToString:{rootBlockId:null===(t=y().ei.state)||void 0===t?void 0:t.id,dictationBlockId:null===(n=y().kj.state)||void 0===n?void 0:n.id,isDictatableBlock:(null===(o=y().kj.state)||void 0===o?void 0:o.isDictatableBlock())??"undefined",isDictationBlockPathDead:(null===(i=y().kj.state)||void 0===i?void 0:i.pathIsDead())??"undefined"}}}),(0,p().stopDictation)({environment:e,from:"block_not_dictatable"}))}),[w,e]),(0,o.useEffect)((()=>{if(A&&!x){const t=setTimeout((()=>{A||(0,p().stopDictation)({environment:e,from:"block_not_visible"})}),350);return()=>{clearTimeout(t)}}}),[A,x,e]);const I=function(){const e=(0,b().W)(),t=(0,r().O$)(y().ei),n=(0,r().O$)(y().gZ),[i,a]=(0,o.useState)(void 0),s=(0,o.useCallback)((()=>{if(null==t||!t.isTranscriptionBlock())return;const e=y().Ay.state.lastReceivedTranscriptionAt;if(!e)return;const n=Date.now()-e;n>=30*h().Xb?a("should_stop"):n>=Number(3*h().Xb)?a("should_notify"):a(void 0)}),[t]);return(0,o.useEffect)((()=>{n||a(void 0)}),[n]),(0,S().n)(s,20*h().TD,Boolean(e&&t)),i}();return function(){const e=(0,f().T)(),t=(0,v().r)(),n=(0,r().O$)(y().gZ),i=(0,r().O$)(y().Di),s=(0,o.useCallback)((()=>{if(!n||!i)return;const o=y().Ay.state.transcriptionLastSentAt;if(!o)return;const r=Date.now()-o;r>=5*h().TD&&a().log({level:"warning",from:"dictationIdleDetection",type:"idleAudioSending",data:{miscDataToConvertToString:{rootBlockId:i,currentUserId:e,sidebarSpaceId:t,timeSinceLastSentMs:r,isDictationEnabled:n}}})}),[n,i,e,t]);(0,S().n)(s,10*h().TD,Boolean(n))}(),(0,o.useEffect)((()=>{if(!I||null==k||!k.isTranscriptionBlock())return o={id:"transcription_idle"},void(l().electronApi?null===(i=l().electronApi.dismissToastInAllTabs)||void 0===i||i.call(l().electronApi,o):d().UW(o.id));var o,i;if("should_notify"===I&&(0,u().B)(e,{toastId:"transcription_idle",pointer:k.pointer}),"should_stop"===I){(0,g().stopTranscription)({environment:e,blockStore:k,from:"transcription_idle"});new Notification(t.formatMessage(_.title),{body:t.formatMessage(_.body),silent:!1}).addEventListener("click",(()=>{(0,m().N)({environment:e,blockStore:k,tabId:n})}))}}),[I,e,n,k,t]),null}},865060:(e,t,n)=>{n.d(t,{X:()=>p});var o=()=>n(907258),i=()=>n(165358),r=()=>n(229833),a=()=>n(680977),s=()=>n(595345),c=()=>n(547149),l=()=>n(233124),d=()=>n(370136),u=()=>n(899926);function p(e,t){(0,l().K_)(e,{from_language:(0,u().F)(e.currentUser.id),to_language:t,dictation_session_id:(0,s().qY)()});const{currentUserSettingsStore:n}=o().default.state;if(!n)return;const{serverCommitResult:p}=c().createAndCommit({userAction:"setPreferredDictationLanguage",environment:e,canUndo:!1,perform:e=>{(0,a().m)({userSettingsStore:n,transaction:e,data:{preferred_meeting_notes_language:t}})}});p.then((()=>{(0,d().p)({userId:e.currentUser.id,from:"setPreferredDictationLanguage",additionalLogData:{language:t}})})).catch((n=>{i().log({level:"error",from:"setPreferredDictationLanguage",type:"userSettingsTransactionFailed",error:(0,r().convertErrorToLog)(n),data:{miscDataToConvertToString:{userId:e.currentUser.id,attemptedLanguage:t}}})}))}},866515:(e,t,n)=>{n.d(t,{n:()=>i});var o=n(296540);function i(e,t,n){const i=(0,o.useRef)(e),r=(0,o.useRef)(null);(0,o.useEffect)((()=>{i.current=e}),[e]),(0,o.useEffect)((()=>{const e=async()=>{r.current&&(clearTimeout(r.current),r.current=null),n&&(await i.current(),r.current=setTimeout(e,t))};return n&&e(),()=>{r.current&&(clearTimeout(r.current),r.current=null)}}),[n,t])}},888325:(e,t,n)=>{function o(e){return`${e.table}:${e.id}`}n.d(t,{_:()=>o})},892936:(e,t,n)=>{n.r(t),n.d(t,{arrowStraightUpFillIcon:()=>i,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"3.72 2.12 12.56 15.76",svg:(0,n(474848).jsx)("path",{d:"M10.619 2.381a.875.875 0 0 0-1.238 0l-5.4 5.4A.875.875 0 1 0 5.22 9.02l3.906-3.907V17.05c0 .456.392.826.875.826s.875-.37.875-.826V5.112l3.906 3.907A.875.875 0 1 0 16.02 7.78z"})},i=(0,n(340498).wt)("arrowStraightUpFill",o,"fill")},922952:(e,t,n)=>{n.d(t,{u:()=>a});var o=()=>n(295633),i=()=>n(302996),r=()=>n(723085);function a(e){return e instanceof r().h||e instanceof i().SpaceStore||e instanceof o().B}},924281:(e,t,n)=>{n.r(t),n.d(t,{TranscriptionBlockTitle:()=>c});var o=n(296540),i=()=>n(69708),r=n(474848);const a=(0,i().YK)({loadingPlaceholder:{defaultMessage:"Generating title",id:"TranscriptionBlockTitle.loading.placeholder"}});function s(){const{state:e,disabled:t}=(0,n(353890).s)(),o=e.state,s=(0,i().tz)(),c=(0,n(564541).f)();return"calendar-event"===c.type?(0,r.jsx)(n(601493).o,{calendarEvent:c.event}):"title"===c.type?(0,r.jsx)(n(155089).C,{disabled:t||"summarizing"===o}):"summarizing"===c.type?(0,r.jsx)(n(758304).N,{animate:!0,styleKey:"titleLgSemibold",text:s.formatMessage(a.loadingPlaceholder)}):void(0,n(534177).HB)(c)}const c=o.memo(s)},933050:(e,t,n)=>{n.r(t),n.d(t,{DictationBubble:()=>I});n(581454);var o=n(296540),i=()=>n(484714),r=()=>n(590526),a=()=>n(79926),s=()=>n(680474),c=()=>n(496603),l=()=>n(899926),d=()=>n(519973),u=()=>n(52447),p=()=>n(964345),g=()=>n(310947),m=(n(944114),n(898992),n(803949),()=>n(209199)),f=()=>n(534177),v=()=>n(171333),h=()=>n(141333),S=n(474848);function y(e){let t=[];return e.nodeType===Node.TEXT_NODE?t.push(e):e.childNodes.forEach((e=>{t=t.concat(y(e))})),t}function b({scrollerStore:e,blockId:t,isRtlLanguage:n,children:i,framerMotion:a}){const s=(0,r().K8)((()=>e.state.elementRef??{current:null}),[e]),c=(0,h().yE)(s),[l,d]=(0,o.useState)(),[u,g]=(0,o.useState)(),b=(0,v().lB)(e),_=(0,v().ht)(e),k=null==b?void 0:b.getNode(),x=null==k?void 0:k.querySelector(".notion-page-content"),w=null==x?void 0:x.querySelector(`[data-block-id="${t}"]`);(0,o.useEffect)((()=>{if(x){let e;const t=new MutationObserver((t=>{(0,f().O9)(e)&&cancelAnimationFrame(e),e=requestAnimationFrame((()=>d(Date.now())))}));return t.observe(x,{subtree:!0,characterData:!0,childList:!0}),()=>{t.disconnect(),(0,f().O9)(e)&&cancelAnimationFrame(e)}}}),[x]),(0,o.useEffect)((()=>{if(k){let e;const t=new ResizeObserver((()=>{(0,f().O9)(e)&&cancelAnimationFrame(e),e=requestAnimationFrame((()=>d(Date.now())))}));return t.observe(k),()=>{t.disconnect(),(0,f().O9)(e)&&cancelAnimationFrame(e)}}}),[k]),(0,o.useLayoutEffect)((()=>{if(!w||!k){const e=setTimeout((()=>{g(void 0)}),200);return()=>{clearTimeout(e)}}{const e=document.createRange(),t=w.querySelector('[data-content-editable-leaf="true"]')??w,o=y(t),i=k.getBoundingClientRect();if(o.length>0){const t=o[o.length-1];e.selectNodeContents(t),e.collapse(!1);const r=e.getBoundingClientRect(),a=r.top+c-i.top,s=(0,m().A1)(),l=n?r.left:r.right,d=n?(0,m().A1)()?-3:-8:(0,m().A1)()?8:5;let u;u=s?i.right-l-d:l-i.left+d,g({top:a,left:u})}else{const e=t.getBoundingClientRect(),o=window.getComputedStyle(t),r=parseInt(o.paddingTop,10),a=isNaN(r)?0:r,s=parseInt(o.paddingBottom,10),l=isNaN(s)?0:s,d=parseInt(o.paddingLeft,10),u=isNaN(d)?0:d,p=parseInt(o.paddingRight,10),f=isNaN(p)?0:p,v=e.top+a+l+c-i.top;let h;h=(0,m().A1)()?n?i.right-e.right+f:i.right-e.left-u:n?e.right-i.left-f:e.left-i.left+u,g({top:v,left:h})}}}),[w,k,l,c,n]);const A=(0,f().O9)(u);(0,o.useEffect)((()=>{if(_&&A)switch(_){case"Page":return p().Ay.setState({...p().Ay.state,blockRenderedInPage:!0}),()=>{p().Ay.setState({...p().Ay.state,blockRenderedInPage:!1})};case"PeekView":return p().Ay.setState({...p().Ay.state,blockRenderedInPeekView:!0}),()=>{p().Ay.setState({...p().Ay.state,blockRenderedInPeekView:!1})}}}),[_,A]);const I=(0,o.useRef)(null),{motion:M}=a;return u?(0,S.jsx)(M.div,{ref:I,initial:{transform:`translate(${((0,m().A1)()?-1:1)*u.left}px, ${u.top}px)`},animate:{transform:`translate(${((0,m().A1)()?-1:1)*u.left}px, ${u.top}px)`},transition:{duration:.2},style:{display:"block",position:"absolute",top:0,insetInlineStart:3,width:0,height:0,zIndex:112},children:i}):null}function _(e){const{value:t}=(0,a().fJ)(s().fM);return t?(0,S.jsx)(b,{...e,framerMotion:t}):null}var k=()=>n(401497),x=()=>n(100622);function w(e){const{framerMotion:t}=e,{motion:n}=t,i=(0,s().sM)(t);(0,o.useEffect)((()=>{(async()=>{await i.start((e=>({y:[0,-7,0],transition:{duration:.6,delay:.15*e,repeat:1/0,repeatDelay:1,ease:"easeInOut"}})))})()}),[i]);const r=(0,k().IS)((()=>({dotStyle:{width:6,height:6,flexShrink:0,backgroundColor:x().Tj.icon.disabled,borderRadius:"50%"}})),[]);return(0,S.jsx)(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},style:{display:"flex",justifyContent:"center",alignItems:"center",gap:3},children:[...Array(3)].map(((e,t)=>(0,S.jsx)(n.div,{custom:t,animate:i,style:r.dotStyle},t)))})}function A(){const{value:e}=(0,a().fJ)(s().fM);return e?(0,S.jsx)(w,{framerMotion:e}):null}function I({scrollerStore:e}){const t=(0,i().v3)(),n=(0,r().K8)((()=>(0,l().F)(t.currentUser.id)),[t.currentUser.id]),o=(0,d().y)(n),m=(0,r().K8)((()=>{const e=p().Ay.state.block&&p().Ay.state.rootBlock?[{type:"active",rootBlockId:p().Ay.state.rootBlock.id,id:p().Ay.state.block.id}]:[],t=Object.values(p().Ay.state.passiveBlockMap).map((({dictatingBlockStore:e,rootBlockStore:t})=>({type:"passive",rootBlockId:t.id,id:e.id})));return c().hS([...e,...t],"id")}),[],{useDeepEqual:!0}),f=(0,r().O$)(p().Gq),v=(0,r().O$)(p().Mq),h=(0,r().K8)((()=>{const e=p().Ay.state.rootBlock;return!!e&&(0,u().kc)(t,e)}),[t]),{value:y}=(0,a().fJ)(s().fM);if(!y||h)return null;const{AnimatePresence:b}=y;return(0,S.jsx)(S.Fragment,{children:m.map((t=>(0,S.jsx)(_,{blockId:t.id,scrollerStore:e,isRtlLanguage:o,children:(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,direction:o?"rtl":"ltr"},children:[(0,S.jsx)(g().DictationAvatar,{noMarginRight:!0,noOutline:!0,noTooltip:!0}),(0,S.jsx)(b,{children:f||v?(0,S.jsx)("div",{style:{transform:"translateY(3px)"},children:(0,S.jsx)(A,{})}):void 0})]})},t.rootBlockId)))})}},962309:(e,t,n)=>{n.r(t),n.d(t,{StopDictationButton:()=>H});var o=n(296540),i=n(440961),r=()=>n(726637),a=()=>n(205262),s=()=>n(484714),c=()=>n(590526),l=()=>n(401497),d=()=>n(79926),u=()=>n(75435),p=()=>n(718827),g=()=>n(680474),m=()=>n(250910),f=()=>n(118307),v=()=>n(807449),h=()=>n(854705),S=()=>n(100622),y=()=>n(126126),b=()=>n(130119),_=()=>n(712505),k=()=>n(920329),x=()=>n(673657),w=()=>n(964345),A=()=>n(405689),I=(n(581454),()=>n(631524)),M=()=>n(81068),T=()=>n(663639),C=()=>n(736847),B=()=>n(158115),j=()=>n(721479),P=()=>n(284371),D=()=>n(899926),R=()=>n(426175),N=()=>n(524007),E=()=>n(882722),L=()=>n(865060),O=()=>n(74e3),F=n(474848);function V(e){const t=(0,s().v3)(),{parent:n}=e,o=(0,c().K8)((()=>{const e=(0,O().u)(),n=(0,D().F)(t.currentUser.id);return e.findIndex((([e])=>e===n))}),[t.currentUser.id]),i=[{key:"languages",render:e=>(0,F.jsx)(C().A,{...e,topBorder:0!==e.index}),items:(0,c().K8)((()=>(0,O().u)()),[]).map((([e,[o]])=>{const i={key:e,render:e=>(0,F.jsx)(M().A,{...e,title:o}),action:()=>{(0,L().X)(t,e),n.close()}};return i}))}];return(0,F.jsx)("div",{className:E().OLz,style:{display:"flex",flexDirection:"column",minWidth:150,maxWidth:"max-content"},children:(0,F.jsx)(T().A,{type:T().O.Vertical,initialFocus:o,sections:i})})}function z(e){const{languagePopupStore:t}=e,n=(0,s().v3)(),i=(0,c().K8)((()=>(0,D().F)(n.currentUser.id)),[n.currentUser.id]);(0,o.useEffect)((()=>{R().Ay.updateMediaDevices()}),[]);const r=(0,l().IS)((()=>({container:{padding:"8px 0px",display:"flex",flexDirection:"column",alignItems:"flex-start",width:300,gap:8},microphoneText:{marginInlineStart:12,fontSize:12,fontWeight:P().Wy.medium,color:S().Tj.text.secondary},microphoneSection:{display:"flex",flexDirection:"column",width:"100%"},languageText:{fontSize:14,color:S().Tj.text.primary},languageSection:{padding:"0px 14px",display:"flex",alignItems:"center",width:"100%",justifyContent:"space-between"},line:{width:"100%",height:1,backgroundColor:S().Tj.icon.tertiary,opacity:.3},languageButtonStyle:{fontSize:14,display:"flex",alignItems:"center",gap:10,color:S().Tj.text.secondary},helpSection:{padding:"5px 14px",display:"flex",alignItems:"center",justifyContent:"flex-start",gap:4,cursor:"pointer"},helpText:{fontSize:12,color:S().Tj.text.tertiary}})),[]),{value:a}=(0,d().fJ)(g().fM);if(!a)return null;const{motion:u}=a;return(0,F.jsxs)("div",{style:r.container,children:[(0,F.jsxs)("div",{style:r.microphoneSection,children:[(0,F.jsx)("div",{style:r.microphoneText,children:"Microphone"}),(0,F.jsx)(W,{})]}),(0,F.jsx)("div",{style:r.line}),(0,F.jsxs)("div",{style:r.languageSection,children:[(0,F.jsx)("div",{style:r.languageText,children:"Language"}),(0,F.jsx)(m().A,{buttonPopupStore:t,renderOrigin:e=>(0,F.jsxs)(I().p,{style:r.languageButtonStyle,...e,children:[i,(0,F.jsx)(v().I,{icon:B().arrowChevronSingleRightFillSmallIcon,size:"xs",colorVariant:"tertiary"})]}),stopClickPropagation:!0,popupType:m().z.Popup,render:e=>(0,F.jsx)(V,{parent:e})})]}),(0,F.jsx)("div",{style:r.line}),(0,F.jsxs)(u.div,{style:r.helpSection,onClick:()=>window.open("https://www.notion.so/help/audio-dictation","_blank"),variants:{hover:{opacity:.6},tap:{opacity:1}},whileHover:"hover",whileTap:"tap",transition:{duration:.2},children:[(0,F.jsx)(v().I,{icon:j().questionMarkCircleSmallIcon,size:"sm",colorVariant:"tertiary"}),(0,F.jsx)("div",{style:r.helpText,children:"Learn about Dictation"})]})]})}function W(){const e=(0,c().O$)(R().X8),t=(0,c().K8)((()=>R().dc.state.deviceId),[]),n=e.findIndex((e=>e.deviceId===t)),o=[{key:"devices",render:e=>(0,F.jsx)(C().A,{...e,topBorder:0!==e.index}),items:e.map((e=>({key:e.deviceId,render:n=>(0,F.jsx)(M().A,{...n,title:e.label,isChecked:e.deviceId===t}),action:()=>{N().d.setState(e)}})))}];return(0,F.jsx)("div",{style:{display:"flex",flexDirection:"column",width:"100%"},children:(0,F.jsx)(T().A,{type:T().O.Vertical,initialFocus:n,sections:o})})}const U=document.body;function K({rootStore:e,framerMotion:t}){const n=(0,s().WS)(),d=(0,x().n)(e),g=(0,s().v3)(),I=(0,c().K8)((()=>w().Ay.state.audioRecorder),[]),M=(0,c().uB)(void 0,f().A),T=(0,c().uB)(void 0,f().A),C=(0,c().O$)(u().b),B=(0,o.useCallback)((()=>{(0,k().stopDictation)({environment:g,from:"button"})}),[g]),j=(0,o.useCallback)((e=>{null==e||e.stopPropagation(),e&&(0,a().V)(e)||(T.state.open?T.reset():M.state.open?M.reset():M.setState({...M.state,open:!0}))}),[M,T]),[P,D]=(0,o.useState)(!1),R=(0,o.useCallback)((()=>{D(!0)}),[]),N=(0,o.useCallback)((()=>{D(!1)}),[]),[E,L]=(0,o.useState)(!1),O=(0,o.useCallback)((()=>{L(!0)}),[]),V=(0,o.useCallback)((()=>{L(!1)}),[]),W=(0,l().eP)(),K=(0,l().IS)((()=>({dictationButtonStyle:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:25,gap:2,height:24,cursor:"pointer",paddingTop:6,paddingInlineEnd:2,paddingBottom:6,paddingInlineStart:2,backgroundColor:"dark"===W?"#2D2D2D":"#F1F0EF",...(0,b().g)({noDrag:g.device.isElectron&&!C})},downChevronContainer:{display:"flex",alignItems:"center",justifyContent:"center",height:20,width:20,borderRadius:20},redSquare:{width:10,height:10,borderRadius:2,backgroundColor:P?"dark"===W?S().Tj.palette.red[500]:"rgba(191, 67, 64, 1)":"dark"===W?S().Tj.palette.red[700]:S().Tj.palette.red[500]},redSquareContainer:{width:20,height:20,borderRadius:20,display:"flex",alignItems:"center",justifyContent:"center"}})),[g.device.isElectron,C,P,W]),H=(0,o.useMemo)((()=>(0,F.jsx)(v().I,{icon:h().arrowChevronSingleDownFillSmallIcon,size:"xs",colorVariant:E?"secondary":"tertiary"})),[E]),$=(0,c().K8)((()=>{var t;return _().default.isCenterPeekOpen()&&(null===(t=_().default.peekTargetStore.state)||void 0===t?void 0:t.id)!==(null==e?void 0:e.id)}),[null==e?void 0:e.id]),Y=(0,o.useRef)(null),[Z,q]=(0,o.useState)(null);(0,o.useEffect)((()=>{if(!Y.current)return void q(null);const e=Y.current.getBoundingClientRect();q({top:e.top+window.scrollY,left:e.left+window.scrollX})}),[$]);const J=(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(p().Ay,{style:K.redSquareContainer,onClick:B,onMouseEnter:R,onMouseLeave:N,children:(0,F.jsx)("div",{style:K.redSquare})}),e?(0,F.jsx)(A().t,{rootBlockId:null==e?void 0:e.id}):void 0,(0,F.jsx)(p().Ay,{className:"notion-dictation-button-up-chevron",style:K.downChevronContainer,onClick:j,onMouseEnter:O,onMouseLeave:V,children:H})]}),G=(0,y().Uo)({environment:g,isShowingTabBar:C,isShowingInFeed:!1}),{motion:X}=t;return d&&I&&!n?(0,F.jsx)("div",{style:{marginInlineStart:G.marginInlineStart,marginTop:G.marginTop,marginInlineEnd:.5*Number(G.marginInlineStart)*-1},children:(0,F.jsx)(m().A,{buttonPopupStore:M,renderOrigin:()=>(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(X.div,{ref:Y,className:"notion-dictation-button",style:K.dictationButtonStyle,onClick:B,initial:{opacity:0,x:15},animate:{opacity:1,x:0},transition:{duration:.4},children:J}),$?(0,i.createPortal)((0,F.jsx)("div",{className:"notion-dictation-button-duplicate",style:{...K.dictationButtonStyle,position:"fixed",top:(null==Z?void 0:Z.top)||0,insetInlineStart:(null==Z?void 0:Z.left)||0,zIndex:1e7},onClick:B,children:J}),U):void 0]}),stopClickPropagation:!0,popupType:r().A.isMobile?m().z.SlideUp:m().z.Popup,popupWrapStyle:{top:6},render:()=>(0,F.jsx)(z,{languagePopupStore:T})})}):null}function H(e){const{value:t}=(0,d().fJ)(g().fM);return t?(0,F.jsx)(K,{...e,framerMotion:t}):null}},994006:(e,t,n)=>{n.d(t,{A:()=>i});n(296540);var o=n(474848);const i=function(e){const t={marginInlineEnd:e.avatarMarginRight??6,alignSelf:"center"},i={display:"flex",alignItems:"center",minWidth:0,...e.style},r=e.inline?{...t,width:"none",minHeight:"none"}:t,{userStore:a,avatarShouldShowShadow:s,avatarSize:c,hasTooltip:l,tooltipHeader:d,hasPersonHoverCard:u,spaceStore:p}=e,g=(0,n(69708).tz)(),m=(0,n(590526).K8)((()=>null==a?void 0:a.getDisplayName(g)),[a,g]),f=(0,o.jsxs)("div",{style:i,children:[(0,o.jsx)("div",{style:r,children:(0,o.jsx)(n(453697).A,{userStore:a,avatarShouldShowShadow:s,size:c,hasTooltip:l&&!u,hasPersonHoverCard:!1,tooltipHeader:d})}),(0,o.jsx)("div",{className:"notranslate",style:{...n(284371).RC},children:m})]});return u?(0,o.jsx)(n(436525).D,{userStore:a,spaceStore:p,children:f}):f}},998992:(e,t,n)=>{n.d(t,{I:()=>i});var o=()=>n(907258);function i(e,t){if(function(e){return e===o().default.state.mainEditorCurrentBlockStore}(e)){const{RouterStore:e}=t,n=e.state.route;if("page"===n.name)return n.collectionViewId}}}}]);