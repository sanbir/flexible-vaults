"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[66249],{81986:(e,i,t)=>{t.d(i,{MI:()=>r,QT:()=>o,VD:()=>n,g1:()=>a});t(16280),t(898992),t(737550);const o=[{featureGates:["agent_model_picker"],id:"agent_model_picker",label:"Model picker",group:"default"},{featureGates:["agent_transcription"],id:"agent_transcription",label:"Transcription",group:"default"},{featureGates:["agent_multidb_creation"],id:"agent_multidb_creation",label:"Multi-source databases",group:"default"},{featureGates:["custom_agents"],id:"custom_agents",label:"Custom agents",group:"default"},{featureGates:["agent_automations"],id:"agent_automations",label:"Automations",group:"default"},{featureGates:["agent_enable_view_notifications_tool"],id:"agent_view_notifications_tool_enabled",label:"Notifications tool",group:"default"},{featureGates:["agent_simplified_transcript"],id:"agent_simplified_transcript",label:"Simplified transcript",group:"default"},{featureGates:["agent_create_dashboard"],id:"agent_create_dashboard",label:"Dashboards",group:"default"},{featureGates:["agent_card_customization"],id:"agent_card_customization",label:"Card customization",group:"default"},{featureGates:["agent_deep_find"],id:"agent_deep_find",label:"Search all sources with AI",group:"default"},{featureGates:["agent_integrations","workflows_mail_module_available"],id:"agent_integrations",label:"Integrations",group:"default"},{featureGates:["agent_user_session_context"],id:"agent_user_session_context",label:"User session context",group:"default"},{featureGates:["ai_inference_debug_recorder"],id:"ai_inference_debug_recorder",label:"Log Raw Inference Chunks",group:"default"},{featureGates:["agent_diffs"],id:"agent_diffs",label:"Agent diffs",group:"advanced"},{featureGates:["agent_create_db_template"],id:"agent_create_db_template",label:"Create database template",group:"advanced"},{featureGates:["workflows_github_module_available","workflows_mcp_server_module_available"],id:"experimental_integrations",label:"Experimental integrations",group:"advanced"},{featureGates:["agent_thread_tools"],id:"agent_thread_tools",label:"Agent thread tools",group:"advanced"},{featureGates:["agent_system_prompt_as_page"],id:"agent_system_prompt_as_page",label:"System Prompt as Page",group:"advanced"},{featureGates:["agent_script_agent"],id:"agent_script_agent",label:"Script agent",group:"default"},{featureGates:["agent_script_agent_advanced"],id:"agent_script_agent_advanced",label:"Script agent (advanced)",group:"default"},{featureGates:["database_agents"],id:"database_agents",label:"Database agents",group:"advanced"},{featureGates:["ai_data_enrichment"],id:"ai_data_enrichment",label:"AI Data Enrichment",group:"advanced"},{featureGates:["mention_custom_agent_in_personal_agent"],id:"mention_custom_agent_in_personal_agent",label:"Mention Custom Agents in Personal Agent",group:"advanced"},{featureGates:["agent_in_person_property"],id:"agent_in_person_property",label:"Agent in Person Property",group:"advanced"},{featureGates:["future_ai_interfaces"],id:"future_ai_interfaces",label:"Future AI Interfaces",group:"advanced"},{featureGates:["use_parallel_for_search"],id:"use_parallel_for_search",label:"Use Parallel for Search",group:"advanced"},{featureGates:["use_parallel_for_extract_website"],id:"use_parallel_for_extract_website",label:"Use Parallel for Extract Website",group:"advanced"}];o.filter((e=>"agent_model_picker"===e.id||"agent_transcription"===e.id||"custom_agents"===e.id||"agent_automations"===e.id||"agent_integrations"===e.id||"agent_script_agent"===e.id||"agent_script_agent_advanced"===e.id||"agent_multidb_creation"===e.id||"agent_simplified_transcript"===e.id||"agent_in_person_property"===e.id||"agent_create_dashboard"===e.id));function a(e){return e("archive_content")&&e("ai_agent_archive_content")}function r(e,i){return e.featureGates.some((e=>i(e)))}function n(e){const i=o.find((i=>i.id===e));if(!i)throw new Error(`Feature gate group with id ${e} not found`);return i}},112968:(e,i,t)=>{t.d(i,{Pc:()=>r,Ws:()=>d,BH:()=>s,CG:()=>l});t(944114),t(517642),t(658004),t(733853),t(845876),t(432475),t(515024),t(731698),t(898992),t(354520),t(581454),t(737550);var o=()=>t(35530);var a=()=>t(939768);const r="__NONE__";function n(e){return e?e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""):"unknown"}function s(e){if(!e)return"unknown";const i=(0,a().bk)(e);if(!i)return"unknown";let t=i.hostname;if("localhost"===i.hostname&&i.port)t+=`-${i.port}`;else{const e=function(e){if(!e)return;const i=(0,o().qg)(e.toLowerCase());return"tld"in i?i.tld??void 0:void 0}(i.hostname);e&&(t=t.replaceAll(`.${e}`,""))}let r=n(t);r=r.replaceAll("mcp-","").replaceAll("-mcp","-");const s=i.pathname.split("/").filter(Boolean);if(s.length>0&&"mcp"!==s[0]){const e=n(s[0]);e&&!r.includes(e)&&(r+=`-${e}`)}return r}function l(e,i){return`mcp-${e||"unknown"}-${i}`}function d(e){if(!e||0===e.length)return{};const i=e.some((e=>{var i;return!0===(null===(i=e.annotations)||void 0===i?void 0:i.readOnlyHint)})),t=e.some((e=>{var i;return!0!==(null===(i=e.annotations)||void 0===i?void 0:i.readOnlyHint)}));return i&&!t?{runReadToolsAutomatically:!1}:t&&!i?{runWriteToolsAutomatically:!1}:{}}},471636:(e,i,t)=>{t.d(i,{BJ:()=>l,Po:()=>n,lf:()=>r,r6:()=>s});t(898992),t(672577);var o=()=>t(289106),a=()=>t(543322);function r(e,i){const t=(0,a().kM)(e);return i.find((e=>e.email&&(0,a().kM)(e.email)===t))??i[0]}const n={actions:["read"],constraints:void 0},s={actions:["read","write"],constraints:{skipConfirmation:!1}},l={type:"calendar",isSingleton:!1,getModuleDedupeKey:e=>e.type,getToolNamePrefix:()=>"calendar",config:{scopes:["read","write"]},isAvailable:e=>{const{configStep:i,experimentService:t,userId:a,spaceId:r,isCustomAgentContext:n}=e,s=n||i.isCustomAgent?"custom_agent_calendar_module_available":"workflows_calendar_module_available";return t.checkGate({gateName:s,actor:a?{id:a,table:"notion_user"}:o().S,customIDs:{spaceId:r}})},isAvailableForScriptAgent:e=>{const{configStep:i,experimentService:t,userId:a,spaceId:r,isCustomAgentContext:n}=e,s=n||i.isCustomAgent?"custom_agent_calendar_module_available":"workflows_calendar_module_available";return t.checkGate({gateName:s,actor:a?{id:a,table:"notion_user"}:o().S,customIDs:{spaceId:r}})},triggers:{"calendar.event.created":{isTriggerConfigured:e=>{var i;return Boolean(null===(i=e.calendars)||void 0===i?void 0:i.length)},fields:{calendars:{required:()=>!0,isConfigured:e=>{var i;return Boolean(null===(i=e.calendars)||void 0===i?void 0:i.length)}}},triggerDuplicator:({original:e})=>e,versionAvailability:"1.0.0",createDefaultState:()=>({type:"calendar.event.created",calendars:[]})},"calendar.event.updated":{isTriggerConfigured:e=>{var i;return Boolean(null===(i=e.calendars)||void 0===i?void 0:i.length)},fields:{calendars:{required:()=>!0,isConfigured:e=>{var i;return Boolean(null===(i=e.calendars)||void 0===i?void 0:i.length)}}},triggerDuplicator:({original:e})=>e,versionAvailability:"1.0.0",createDefaultState:()=>({type:"calendar.event.updated",calendars:[]})},"calendar.event.canceled":{isTriggerConfigured:e=>{var i;return Boolean(null===(i=e.calendars)||void 0===i?void 0:i.length)},fields:{calendars:{required:()=>!0,isConfigured:e=>{var i;return Boolean(null===(i=e.calendars)||void 0===i?void 0:i.length)}}},triggerDuplicator:({original:e})=>e,versionAvailability:"1.0.0",createDefaultState:()=>({type:"calendar.event.canceled",calendars:[]})}},effects:{"calendar.fetchPlaybook":{versionAvailability:"*"},"calendar.listCalendars":{versionAvailability:"*"},"calendar.listEvents":{versionAvailability:"*"},"calendar.listCoworkersEvents":{versionAvailability:"*"},"calendar.createEvents":{versionAvailability:"*"},"calendar.cancelEvents":{versionAvailability:"*"},"calendar.updateEvents":{versionAvailability:"*"},"calendar.suggestMeetingTimes":{versionAvailability:"*"}},authentication:void 0,createsConnectionForCurrentUser:!0,latestVersion:"1.0.0",stateDuplicator:({original:e})=>{},getModuleConfigurationStatus:e=>"ready",getDescription:e=>e.formatMessage({id:"workflows.modules.calendar.description",defaultMessage:"Manage calendar events connected to Notion Calendar."}),getName:e=>e.formatMessage({id:"workflows.modules.calendar.name",defaultMessage:"Notion Calendar"}),getMessageIfNotValid:(e,i)=>e.formatMessage({id:"workflows.modules.calendar.notConnected",defaultMessage:"Calendar is not connected to {workflowName}"},{workflowName:i}),getDefaultPermissions:e=>{if(null==e||!e.defaultCalendar)return[];const{accountId:i,calendarId:t}=e.defaultCalendar;return[{moduleType:"calendar",type:"accountOrganizationCalendars",identifier:i,actions:["read","readCoworker"]},{moduleType:"calendar",type:"calendar",identifier:`${i}:${t}`,accountId:i,calendarId:t,...s}]},getModuleConfigSection:()=>"connections",getIcon:()=>t(16789).notionCalendarIcon}},543322:(e,i,t)=>{t.d(i,{_J:()=>c,kM:()=>r,ki:()=>u,p$:()=>n,zy:()=>a});t(898992),t(672577),t(737550);var o=()=>t(289106);const a={read:!0,modifyInbox:!0,draft:{enabled:!0,client:"notion_mail"},send:"with_confirmation"};function r(e){const[i,t]=e.toLowerCase().split("@");if(!t)return e.toLowerCase();const o="gmail.com"===t||"googlemail.com"===t;let a=i;o&&(a=a.replace(/\./g,""));const r=a.indexOf("+");-1!==r&&(a=a.substring(0,r));return`${a}@${o?"gmail.com":t}`}function n(e,i){const t=r(e);return i.find((e=>r(e.email)===t))??i[0]}function s(e){return"read"===e?{read:!0,modifyInbox:!1,draft:{enabled:!1,client:"notion_mail"},send:"disallow"}:{read:!0,modifyInbox:!0,draft:{enabled:!0,client:"notion_mail"},send:"with_confirmation"}}function l(e){if(!e)return;const i=e.trim().toLowerCase();return"read"===(t=i)||"write"===t?i:void 0;var t}function d(e){if(e.some((e=>"write"===l(e))))return s("write");return e.some((e=>"read"===l(e)))?s("read"):void 0}function c(e,i){var t;if(null!=e&&null!==(t=e.emailPermissionSettings)&&void 0!==t&&t[i])return e.emailPermissionSettings[i];if(null!=e&&e.emailPermissionSettings){const t=i.trim().toLowerCase();for(const[i,o]of Object.entries(e.emailPermissionSettings))if(i.trim().toLowerCase()===t)return o}if(null!=e&&e.emailScopes){const t=e.emailScopes[i];if(t&&t.length>0){const e=d(t);if(e)return e}const o=i.trim().toLowerCase();for(const[i,a]of Object.entries(e.emailScopes))if(i.trim().toLowerCase()===o&&a&&a.length>0){const e=d(a);if(e)return e}}if(null!=e&&e.scopes&&e.scopes.length>0){const i=d(e.scopes);if(i)return i}return a}const u={type:"mail",isSingleton:!1,getModuleDedupeKey:e=>e.type,getToolNamePrefix:()=>"mail",config:{scopes:["read","write"]},isAvailable:e=>{const{configStep:i,experimentService:t,userId:a,spaceId:r,isCustomAgentContext:n}=e,s=n||i.isCustomAgent?"custom_agent_mail_module_available":"workflows_mail_module_available";return t.checkGate({gateName:s,actor:a?{id:a,table:"notion_user"}:o().S,customIDs:{spaceId:r}})},isAvailableForScriptAgent:e=>{const{configStep:i,experimentService:t,userId:a,spaceId:r,isCustomAgentContext:n}=e,s=n||i.isCustomAgent?"custom_agent_mail_module_available":"workflows_mail_module_available";return t.checkGate({gateName:s,actor:a?{id:a,table:"notion_user"}:o().S,customIDs:{spaceId:r}})},triggers:{"mail.email.received":{isTriggerConfigured:e=>{if("mail.email.received"!==e.type||!Array.isArray(e.emailAccountIds)||0===e.emailAccountIds.length)return!1;if(e.filters&&e.filters.length>0)for(const t of e.filters){var i;if("is_empty"!==t.operator&&"is_not_empty"!==t.operator&&(null===(i=t.value)||void 0===i||null===(i=i.value)||void 0===i||!i.trim()))return!1}return!0},fields:{emailAddresses:{required:()=>!0,isConfigured:e=>Array.isArray(e.emailAccountIds)&&e.emailAccountIds.length>0}},triggerDuplicator:({original:e})=>e,versionAvailability:"1.0.0",createDefaultState:()=>({type:"mail.email.received"}),getTriggerDedupKey:e=>{const i=e.triggerVariables.email.id;return`${e.workflowId}-${i}`}},"mail.email.sent":{isTriggerConfigured:e=>{if("mail.email.sent"!==e.type||!Array.isArray(e.emailAccountIds)||0===e.emailAccountIds.length)return!1;if(e.filters&&e.filters.length>0)for(const t of e.filters){var i;if("is_empty"!==t.operator&&"is_not_empty"!==t.operator&&(null===(i=t.value)||void 0===i||null===(i=i.value)||void 0===i||!i.trim()))return!1}return!0},fields:{emailAddresses:{required:()=>!0,isConfigured:e=>Array.isArray(e.emailAccountIds)&&e.emailAccountIds.length>0}},triggerDuplicator:({original:e})=>e,versionAvailability:"1.0.0",createDefaultState:()=>({type:"mail.email.sent"}),getTriggerDedupKey:e=>{const i=e.triggerVariables.email.id;return`${e.workflowId}-${i}`}},"mail.email.receivedorsent":{isTriggerConfigured:e=>{if("mail.email.receivedorsent"!==e.type||!Array.isArray(e.emailAccountIds)||0===e.emailAccountIds.length)return!1;if(e.filters&&e.filters.length>0)for(const t of e.filters){var i;if("is_empty"!==t.operator&&"is_not_empty"!==t.operator&&(null===(i=t.value)||void 0===i||null===(i=i.value)||void 0===i||!i.trim()))return!1}return!0},fields:{emailAddresses:{required:()=>!0,isConfigured:e=>Array.isArray(e.emailAccountIds)&&e.emailAccountIds.length>0}},triggerDuplicator:({original:e})=>e,versionAvailability:"1.0.0",createDefaultState:()=>({type:"mail.email.receivedorsent"}),getTriggerDedupKey:e=>{const i=e.triggerVariables.email.id;return`${e.workflowId}-${i}`}},"mail.label.applied":{isTriggerConfigured:e=>"mail.label.applied"===e.type&&Array.isArray(e.emailAccountIds)&&e.emailAccountIds.length>0,fields:{emailAddresses:{required:()=>!0,isConfigured:e=>Array.isArray(e.emailAccountIds)&&e.emailAccountIds.length>0},labels:{required:()=>!1,isConfigured:e=>Array.isArray(e.labelNames)&&e.labelNames.length>0}},triggerDuplicator:({original:e})=>e,versionAvailability:"1.0.0",createDefaultState:()=>({type:"mail.label.applied"}),getTriggerDedupKey:e=>{const i=e.triggerVariables.email.id,t=e.triggerVariables.appliedLabel;return`${e.workflowId}-${i}-${t}`}}},effects:{"mail.runTool":{versionAvailability:"*"},"mail.listTools":{versionAvailability:"*"},"mail.getPrompt":{versionAvailability:"*"}},authentication:void 0,createsConnectionForCurrentUser:!0,latestVersion:"1.0.0",stateDuplicator:({original:e})=>{},getModuleConfigurationStatus:e=>"ready",getDescription:e=>e.formatMessage({id:"workflows.modules.mail.description",defaultMessage:"Manage emails connected to Notion Mail."}),getName:e=>e.formatMessage({id:"workflows.modules.mail.name",defaultMessage:"Notion Mail"}),getMessageIfNotValid:(e,i)=>e.formatMessage({id:"workflows.modules.mail.notConnected",defaultMessage:"Mail is not connected to {workflowName}"},{workflowName:i}),getModuleConfigSection:()=>"connections",getIcon:()=>t(705464).notionMailIcon}},735790:(e,i,t)=>{t.d(i,{M:()=>r});t(296540);var o=t(474848);const a={viewBox:"0 0 20 20",fittedViewBox:"2.37 4.25 15.25 11.5",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M3 7.375h6.829a2.501 2.501 0 0 0 4.842 0H17a.625.625 0 1 0 0-1.25h-2.329a2.501 2.501 0 0 0-4.842 0H3a.625.625 0 1 0 0 1.25M12.25 5.5a1.25 1.25 0 1 1 0 2.5 1.25 1.25 0 0 1 0-2.5"}),(0,o.jsx)("path",{fillRule:"evenodd",d:"M7.75 15.75a2.5 2.5 0 0 0 2.421-1.875H17a.625.625 0 1 0 0-1.25h-6.829a2.5 2.5 0 0 0-4.842 0H3a.625.625 0 1 0 0 1.25h2.329A2.5 2.5 0 0 0 7.75 15.75m0-1.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"})]})},r=(0,t(340498).wt)("sliders",a,"default")},760342:(e,i,t)=>{t.d(i,{Ad:()=>u,BI:()=>p,TO:()=>c,UD:()=>n,Z0:()=>l,kw:()=>g,ve:()=>d,yD:()=>f});t(944114),t(898992),t(672577),t(737550);var o=()=>t(534177),a=()=>t(289106),r=()=>t(905470);function n(e,i,t){const{configStep:o,experimentService:r,userId:n,spaceId:s}=e;for(const a of t||[])if(!o[a])return!1;return r.checkGate({actor:n?{id:n,table:"notion_user"}:a().S,customIDs:{spaceId:s},gateName:i})}function s(e,i,t){"enableScriptAgent"===i?"boolean"==typeof t?e.enableScriptAgent=t:delete e.enableScriptAgent:"enableScriptAgentAdvanced"===i&&("boolean"==typeof t?e.enableScriptAgentAdvanced=t:delete e.enableScriptAgentAdvanced)}function l(e){const{workflowData:i,publishedWorkflowData:t}=e;return function(...e){const i={};for(const t of e)if(t)for(const e of(0,o().uv)(t))"enableScriptAgent"!==e&&"enableScriptAgentAdvanced"!==e||s(i,e,t[e]);return(0,o().uv)(i).length>0?i:void 0}(null==t?void 0:t.config_overrides,null==i?void 0:i.config_overrides)}function d(e,i){const t={type:"workflow",workflowId:e,isCustomAgent:!0,enableCustomAgents:!0,enableRunAgentTool:!0,enableAgentAutomations:!0,enableAgentIntegrations:!0,enableExperimentalIntegrations:!0,enableSetupModeTool:null==i?void 0:i.enableSetupModeTool,enableUpdatePageV2Tool:!0,enableUpdatePageTreeDiff:null==i?void 0:i.enableUpdatePageTreeDiff,enableTpmThrottle:!0,enableDatabaseAgents:null==i?void 0:i.enableDatabaseAgents,isDatabaseAgent:null==i?void 0:i.isDatabaseAgent,agentFollowupVariation:void 0,hasMailTrigger:null==i?void 0:i.hasMailTrigger,mailTriggerTypes:null==i?void 0:i.mailTriggerTypes},o=null==i?void 0:i.configOverrides;return o&&void 0!==o.enableScriptAgent&&(t.enableScriptAgent=o.enableScriptAgent),t}const c=!1;function u(e){const i=[{type:"notion"}],t=null==e?void 0:e.find((e=>"notion"===e.type));(0,r().qQ)(null==t?void 0:t.permissions)&&i.push({type:"web"}),(0,r().eR)({permissions:null==t?void 0:t.permissions,defaultIfMissingExplicitPermission:c})&&i.push({type:"helpdocs"});(null==e?void 0:e.some((e=>"slack"===e.type)))&&i.push({type:"slack"});(null==e?void 0:e.some((e=>"github"===e.type)))&&i.push({type:"github"});(null==e?void 0:e.some((e=>"jira"===e.type)))&&i.push({type:"jira"});(null==e?void 0:e.some((e=>"linear"===e.type)))&&i.push({type:"linear"});(null==e?void 0:e.some((e=>"salesforce"===e.type)))&&i.push({type:"salesforce"});(null==e?void 0:e.some((e=>"asana"===e.type)))&&i.push({type:"asana"});(null==e?void 0:e.some((e=>"box"===e.type)))&&i.push({type:"box"});(null==e?void 0:e.some((e=>"discord"===e.type)))&&i.push({type:"discord"});(null==e?void 0:e.some((e=>"googleDrive"===e.type)))&&i.push({type:"google-drive"});(null==e?void 0:e.some((e=>"microsoftTeams"===e.type)))&&i.push({type:"microsoft-teams"});return(null==e?void 0:e.some((e=>"sharepoint"===e.type)))&&i.push({type:"sharepoint"}),i}function g(e){const{publishedModules:i,draftModules:t}=e;return i??t??void 0}function f(e){return(null==e?void 0:e.enableScriptAgent)??!1}function p(e){return"workflow"===(null==e?void 0:e.type)&&e.workflowId&&e.isCustomAgent?e.workflowId:void 0}},818541:(e,i,t)=>{t.d(i,{V:()=>a});t(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"3.87 2.62 12.26 14.76",svg:(0,t(474848).jsx)("path",{d:"M3.875 3.25c0-.345.28-.625.625-.625h4c.345 0 .625.28.625.625v4c0 .345-.28.625-.625.625H7.125v.596c0 .179.126.333.302.368l5.39 1.075c.76.152 1.308.819 1.308 1.594v.617H15.5c.345 0 .625.28.625.625v4c0 .345-.28.625-.625.625h-4a.625.625 0 0 1-.625-.625v-4c0-.345.28-.625.625-.625h1.375v-.617a.375.375 0 0 0-.302-.368l-5.39-1.076a1.625 1.625 0 0 1-1.308-1.593v-.596H4.5a.625.625 0 0 1-.625-.625zm4 3.375v-2.75h-2.75v2.75zm4.25 6.75v2.75h2.75v-2.75z"})},a=(0,t(340498).wt)("connections",o,"default")},905470:(e,i,t)=>{t.d(i,{IN:()=>l,OW:()=>s,eC:()=>d,eR:()=>v,qQ:()=>m,uP:()=>n});t(898992),t(672577),t(737550);var o=()=>t(416504),a=()=>t(273900),r=()=>t(179034);function n(e){return!!e&&function(e){var i;const t=null===(i=e.modules)||void 0===i||null===(i=i.find((e=>"notion"===e.type)))||void 0===i||null===(i=i.state)||void 0===i?void 0:i.ownedByDatabasePropertyIds;if(!t)return{isDatabaseAgent:!1};return{isDatabaseAgent:!0,ownedByDatabasePropertyIds:t}}(e).isDatabaseAgent}const s=["notion.page.created","notion.page.updated","notion.page.deleted","notion.button.pressed","recurrence"],l={type:"notion",isSingleton:!0,getToolNamePrefix:()=>"notion",config:{},latestVersion:"1.0.0",effects:{"notion.sendNotification":{versionAvailability:"*"},"notion.getPageDiscussions":{versionAvailability:"*"},"notion.addCommentToDiscussion":{versionAvailability:"*"},"notion.createDatabase":{versionAvailability:"*"},"notion.loadAgent":{versionAvailability:"*"},"notion.loadUser":{versionAvailability:"*"},"notion.loadDatabase":{versionAvailability:"*"},"notion.loadDataSource":{versionAvailability:"*"},"notion.createAgent":{versionAvailability:"*"},"notion.loadPage":{versionAvailability:"*"},"notion.viewFileUrl":{versionAvailability:"*"},"notion.createPage":{versionAvailability:"*"},"notion.updateDatabase":{versionAvailability:"*"},"notion.updatePage":{versionAvailability:"*"},"notion.updateAgent":{versionAvailability:"*"},"notion.querySql":{versionAvailability:"*"},"notion.queryView":{versionAvailability:"*"},"notion.queryThreads":{versionAvailability:"*"},"notion.investigateThread":{versionAvailability:"*"},"notion.createAndRunThread":{versionAvailability:"*"},"notion.getFormulaValue":{versionAvailability:"*"}},triggers:{recurrence:{isTriggerConfigured:()=>!0,triggerDuplicator:({original:e})=>({...e,scheduleId:void 0}),versionAvailability:"*",createDefaultState:()=>({type:"recurrence",interval:1,timezone:(0,o().P)(),hour:9,minute:0,frequency:"day"})},"notion.page.discussion.comment.added":{isTriggerConfigured:({collectionId:e})=>Boolean(e),fields:{database:{required:()=>!0,isConfigured:({collectionId:e})=>Boolean(e)}},triggerDuplicator:({original:e})=>e,versionAvailability:"*",createDefaultState:()=>({type:"notion.page.discussion.comment.added"})},"notion.page.created":{isTriggerConfigured:({collectionId:e})=>Boolean(e),fields:{database:{required:()=>!0,isConfigured:({collectionId:e})=>Boolean(e)}},triggerDuplicator:({original:e})=>e,versionAvailability:"*",createDefaultState:()=>({type:"notion.page.created"})},"notion.page.updated":{isTriggerConfigured:({collectionId:e})=>Boolean(e),fields:{database:{required:()=>!0,isConfigured:({collectionId:e})=>Boolean(e)}},triggerDuplicator:({original:e})=>e,versionAvailability:"*",createDefaultState:()=>({type:"notion.page.updated"})},"notion.page.deleted":{isTriggerConfigured:({collectionId:e})=>Boolean(e),fields:{database:{required:()=>!0,isConfigured:({collectionId:e})=>Boolean(e)}},triggerDuplicator:({original:e})=>e,versionAvailability:"*",createDefaultState:()=>({type:"notion.page.deleted"})},"notion.database.agent.updated":{isTriggerConfigured:({collectionId:e})=>Boolean(e),fields:{database:{required:()=>!0,isConfigured:({collectionId:e})=>Boolean(e)}},triggerDuplicator:({original:e})=>e,versionAvailability:"*",createDefaultState:()=>({type:"notion.database.agent.updated"})},"notion.agent.mentioned":{isTriggerConfigured:()=>!0,triggerDuplicator:({original:e})=>e,versionAvailability:"*",createDefaultState:()=>({type:"notion.agent.mentioned"}),isSingleton:!0},"notion.button.pressed":{isTriggerConfigured:()=>!0,triggerDuplicator:({original:e})=>e,versionAvailability:"*",createDefaultState:()=>({type:"notion.button.pressed"})}},stateDuplicator:({original:e})=>e,getModuleConfigurationStatus:()=>"ready",getDescription:e=>e.formatMessage({defaultMessage:"This integration provides internal Notion functionality for workflows.",id:"workflow.module.notion.description"}),getName:e=>e.formatMessage({defaultMessage:"Notion",id:"workflow.module.notion.title"}),getModuleConfigSection:()=>"system",getIcon:()=>t(558687).notionIcon,autoGrantPermissions:({module:e,workflow:i,getRecordModel:t,uriContext:o,spaceId:a,instructionUrls:n})=>{let s=e;const l=i.triggers||[],d=i.draft_runtime_actor_pointer??i.runtime_actor_pointer;if("notion"!==s.type)return s;for(const{parsed:f}of n)if("pageOrCollectionViewBlock"===f.type){const e=t({table:r().ev,id:f.id,spaceId:a});if(p({module:s,blockId:f.id,block:e}))continue;const i=e&&g({blockModel:e,runtimeActorPointer:d});null!=e&&e.parent_id&&!i?s=u({module:s,blockId:e.id}):e||i||(s=u({module:s,blockId:f.id}))}else"collection"===f.type&&(s=c({module:s,collectionId:f.collectionId,getRecordModel:t,uriContext:o,spaceId:a,runtimeActorPointer:d}));for(const r of l){const e=r.state;e&&("notion.page.created"!==e.type&&"notion.page.updated"!==e.type&&"notion.page.deleted"!==e.type&&"notion.page.discussion.comment.added"!==e.type||!e.collectionId||(s=c({module:s,collectionId:e.collectionId,getRecordModel:t,uriContext:o,spaceId:a,runtimeActorPointer:d})))}return s}},d=[{key:"hour",trigger:{type:"recurrence",frequency:"hour",interval:1,timezone:(0,o().P)()}},{key:"day",trigger:{type:"recurrence",frequency:"day",interval:1,timezone:(0,o().P)(),hour:9,minute:0}},{key:"week",trigger:{type:"recurrence",frequency:"week",interval:1,timezone:(0,o().P)(),hour:9,minute:0}},{key:"month",trigger:{type:"recurrence",frequency:"month",interval:1,timezone:(0,o().P)(),hour:9,minute:0}},{key:"year",trigger:{type:"recurrence",frequency:"year",interval:1,timezone:(0,o().P)(),hour:9,minute:0}}];function c(e){const{module:i,collectionId:o,getRecordModel:a,spaceId:n,runtimeActorPointer:s}=e;if(p({module:i,blockId:o}))return i;const l=a({table:t(519831).Vl,id:o,spaceId:n}),d=null==l?void 0:l.parent_id;if(d){if(s){const e=a({table:r().ev,id:d,spaceId:n});if(e&&g({blockModel:e,runtimeActorPointer:s}))return i}return u({module:i,blockId:d})}return i}function u(e){var i;const{module:t,blockId:o}=e;if(null===(i=t.permissions)||void 0===i?void 0:i.find((e=>"pageOrCollectionViewBlock"===e.identifier.type&&o===e.identifier.blockId)))return t;const a={moduleType:"notion",type:"notion",identifier:{type:"pageOrCollectionViewBlock",blockId:o},actions:["reader"]};return{...t,permissions:[...t.permissions||[],a]}}function g(e){const{blockModel:i,runtimeActorPointer:t}=e;if(!t)return!1;return i.getPermissionItems().some((e=>function(e){const{permission:i,runtimeActorPointer:t}=e;if(!t)return!1;switch(i.type){case"bot_permission":return"bot"===t.table&&i.bot_id===t.id&&f(i.role);case"space_permission":case"public_permission":return f(i.role);case"space_owner_permission":return"notion_user"===t.table&&f(i.role);case"user_permission":return"notion_user"===t.table&&i.user_id===t.id&&f(i.role);default:return!1}}({permission:e,runtimeActorPointer:t})))}function f(e){return!!e&&(0,a().q_)(e,"reader")}function p(e){var i;const{module:t,blockId:o,block:a}=e;return Boolean(null===(i=t.permissions)||void 0===i?void 0:i.some((e=>function(e){const{permission:i,blockId:t,block:o}=e;if("notion"!==i.type)return!1;if("workspacePublic"===i.identifier.type){if(!o)return!1;return o.getPermissionItems().some((e=>("space_permission"===e.type||"public_permission"===e.type)&&f(e.role)))}if("pageOrCollectionViewBlock"===i.identifier.type&&i.identifier.blockId===t)return i.actions.some((e=>"reader"===e||"comment_only"===e||"read_and_write"===e));return!1}({permission:e,blockId:o,block:a}))))}function m(e){const i=null==e?void 0:e.find((e=>!(!b(e)||"web"!==e.identifier.type)));return!!i&&i.actions.includes("allow")}function v(e){const i=(e.permissions??[]).find((e=>!(!b(e)||"helpdocs"!==e.identifier.type)));return i?i.actions.includes("allow"):e.defaultIfMissingExplicitPermission}function b(e){return"search"===e.type}},915671:(e,i,t)=>{t.d(i,{R2:()=>l,WF:()=>s,bZ:()=>n,rz:()=>d});var o=()=>t(496603),a=()=>t(498212),r=()=>t(905470);function n(){const e=(0,a().Ay)();return{scripts:[],modules:[{id:e,type:"notion",name:"Notion",version:r().IN.latestVersion,permissions:[]}],triggers:[{id:(0,a().Ay)(),moduleId:e,enabled:!0,state:{type:"notion.agent.mentioned"}}]}}function s(e){return(null==e?void 0:e.permissionMode)??"botActor"}const l=[{type:"everything"}];function d(e){for(const i of l)if(o().n4(e,i))return!0;return!1}},934999:(e,i,t)=>{t.r(i),t.d(i,{archiveBoxIcon:()=>r,iconDefinition:()=>a});t(296540);var o=t(474848);const a={viewBox:"0 0 20 20",fittedViewBox:"3.12 3.12 13.75 13.76",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M8 9.875a.625.625 0 1 0 0 1.25h4a.625.625 0 1 0 0-1.25z"}),(0,o.jsx)("path",{d:"M3.125 4.75c0-.897.728-1.625 1.625-1.625h10.5c.898 0 1.625.728 1.625 1.625v1.57c0 .676-.413 1.256-1 1.5v7.43c0 .898-.727 1.625-1.625 1.625h-8.5a1.625 1.625 0 0 1-1.625-1.625V7.82c-.587-.244-1-.824-1-1.5zm11.5 3.195h-9.25v7.305c0 .207.168.375.375.375h8.5a.375.375 0 0 0 .375-.375zm1-1.625V4.75a.375.375 0 0 0-.375-.375H4.75a.375.375 0 0 0-.375.375v1.57c0 .205.164.372.369.375h10.512a.375.375 0 0 0 .369-.375"})]})},r=(0,t(340498).wt)("archiveBox",a,"default")},943641:(e,i,t)=>{t.d(i,{f:()=>a});t(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"0.5 4.12 19 12.13",svg:(0,t(474848).jsx)("path",{d:"M4.5 4.125A2.125 2.125 0 0 0 2.375 6.25v8.25H.5v.75a1 1 0 0 0 1 1h17a1 1 0 0 0 1-1v-.75h-1.875V6.25A2.125 2.125 0 0 0 15.5 4.125zM16.375 14.5H3.625V6.25c0-.483.392-.875.875-.875h11c.483 0 .875.392.875.875z"})},a=(0,t(340498).wt)("laptopComputer",o,"default")},966249:(e,i,t)=>{t.d(i,{r4:()=>L,Tc:()=>H,jK:()=>R,C7:()=>O,sQ:()=>K,Nh:()=>E});var o=()=>t(498212),a=()=>t(534177),r=()=>t(638681),n=()=>t(651784);const s={type:"asana",isSingleton:!0,config:{},authentication:void 0,latestVersion:"1.0.0",triggers:{},effects:{"asana.search":{versionAvailability:"*"},"asana.loadTask":{versionAvailability:"*"}},isAvailable:()=>!1,isAvailableForScriptAgent:()=>!0,stateDuplicator:({original:e})=>e,getModuleConfigurationStatus:()=>"ready",getDescription:e=>e.formatMessage({id:"workflow.module.asana.description",defaultMessage:"Search Asana tasks and projects."}),getName:e=>e.formatMessage({id:"workflow.module.asana.title",defaultMessage:"Asana"}),getModuleConfigSection:()=>"connections",getIcon:()=>t(686452).asanaIcon};const l={type:"box",isSingleton:!0,config:{},authentication:void 0,latestVersion:"1.0.0",triggers:{},effects:{"box.search":{versionAvailability:"*"}},isAvailable:()=>!1,isAvailableForScriptAgent:()=>!0,stateDuplicator:({original:e})=>e,getModuleConfigurationStatus:()=>"ready",getDescription:e=>e.formatMessage({id:"workflow.module.box.description",defaultMessage:"Search Box files."}),getName:e=>e.formatMessage({id:"workflow.module.box.title",defaultMessage:"Box"}),getModuleConfigSection:()=>"connections",getIcon:()=>t(180187).boxIcon};const d={type:"computer",isSingleton:!0,config:{},authentication:void 0,latestVersion:"1.0.0",triggers:{},effects:{"computer.listMachines":{versionAvailability:"*"},"computer.listSecrets":{versionAvailability:"*"},"computer.createMachine":{versionAvailability:"*"},"computer.destroyMachine":{versionAvailability:"*"},"computer.setSecret":{versionAvailability:"*"},"computer.terminal":{versionAvailability:"*"},"computer.browser":{versionAvailability:"*"},"computer.getJobStatus":{versionAvailability:"*"},"computer.getJobLogs":{versionAvailability:"*"},"computer.viewFileUrl":{versionAvailability:"*"}},isAvailable:()=>!1,isAvailableForCustomAgentEditing:()=>!0,isAvailableForScriptAgent:({configStep:e,isCustomAgentContext:i})=>!!i||!0===e.enableScriptAgentAdvanced,stateDuplicator:({original:e})=>e,getModuleConfigurationStatus:()=>"ready",getDescription:e=>e.formatMessage({defaultMessage:"Provision and control remote computers.",id:"workflow.module.computer.description"}),getName:e=>e.formatMessage({defaultMessage:"Computer",id:"workflow.module.computer.title"}),getModuleConfigSection:()=>"system",getIcon:()=>t(943641).f};var c=()=>t(760342);const u={type:"cursor",isSingleton:!0,config:{scopes:{}},authentication:{type:"header",headers:[]},latestVersion:"1.0.0",stateDuplicator:()=>{},getModuleConfigurationStatus:e=>{var i;return null!==(i=e.state)&&void 0!==i&&i.connectionPointer?"ready":"invalid"},getDescription:e=>e.formatMessage({id:"workflows.modules.cursor.description",defaultMessage:"Create and manage AI coding tasks in Cursor."}),getName:()=>"Cursor",getMessageIfNotValid:()=>"Please connect to Cursor",getModuleConfigSection:()=>"connections",getIcon:()=>t(738508).cursorIcon,isAvailable:e=>(0,c().UD)(e,"workflows_cursor_module_available",["enableExperimentalIntegrations"]),isAvailableForScriptAgent:()=>!1,effects:{"cursor.createAgent":{versionAvailability:"*"},"cursor.addFollowup":{versionAvailability:"*"},"cursor.getAgent":{versionAvailability:"*"},"cursor.listRepositories":{versionAvailability:"*"}},triggers:{}};const g={type:"discord",isSingleton:!0,config:{},authentication:void 0,latestVersion:"1.0.0",triggers:{},effects:{"discord.search":{versionAvailability:"*"}},isAvailable:()=>!1,isAvailableForScriptAgent:()=>!0,stateDuplicator:({original:e})=>e,getModuleConfigurationStatus:()=>"ready",getDescription:e=>e.formatMessage({id:"workflow.module.discord.description",defaultMessage:"Search Discord messages."}),getName:e=>e.formatMessage({id:"workflow.module.discord.title",defaultMessage:"Discord"}),getModuleConfigSection:()=>"connections",getIcon:()=>t(948330).discordIcon};const f={type:"files",isSingleton:!0,config:{},authentication:void 0,latestVersion:"1.0.0",triggers:{},effects:{"files.getFileContent":{versionAvailability:"*"},"files.getFileUrl":{versionAvailability:"*"},"files.getFileName":{versionAvailability:"*"}},isAvailable:()=>!1,isAvailableForScriptAgent:()=>!1,stateDuplicator:({original:e})=>e,getModuleConfigurationStatus:()=>"ready",getDescription:e=>e.formatMessage({defaultMessage:"This integration allows working with files in your Workflow.",id:"workflow.module.files.description"}),getName:e=>e.formatMessage({defaultMessage:"Files",id:"workflow.module.files.title"}),getModuleConfigSection:()=>"system",getIcon:()=>t(767499).B};const p={type:"fs",isSingleton:!0,config:{},authentication:void 0,latestVersion:"1.0.0",triggers:{},effects:{"fs.readDir":{versionAvailability:"*"},"fs.readFiles":{versionAvailability:"*"}},isAvailable:()=>!1,isAvailableForScriptAgent:()=>!0,stateDuplicator:({original:e})=>e,getModuleConfigurationStatus:()=>"ready",getDescription:e=>e.formatMessage({id:"workflow.module.fs.description",defaultMessage:"Read-only virtual filesystem access for the script sandbox."}),getName:e=>e.formatMessage({id:"workflow.module.fs.title",defaultMessage:"Filesystem"}),getModuleConfigSection:()=>"system",getIcon:()=>t(934999).archiveBoxIcon};var m=()=>t(481721);const v={type:"github",isSingleton:!0,config:{},authentication:void 0,latestVersion:"1.0.0",triggers:{},effects:{"github.search":{versionAvailability:"*"},"github.grepCode":{versionAvailability:"*"},"github.lsDirectory":{versionAvailability:"*"},"github.loadPR":{versionAvailability:"*"},"github.loadIssue":{versionAvailability:"*"},"github.loadCommit":{versionAvailability:"*"},"github.loadFile":{versionAvailability:"*"}},isAvailable:()=>!1,isAvailableForScriptAgent:()=>!0,stateDuplicator:({original:e})=>e,getModuleConfigurationStatus:()=>"ready",getDescription:e=>e.formatMessage({id:"workflow.module.github.description",defaultMessage:"Search Github issues, pull requests, and code."}),getName:e=>e.formatMessage({id:"workflow.module.github.title",defaultMessage:"Github"}),getModuleConfigSection:()=>"connections",getIcon:()=>m().codeIcon};const b={type:"gmail",isSingleton:!0,config:{},authentication:void 0,latestVersion:"1.0.0",triggers:{},effects:{"gmail.search":{versionAvailability:"*"},"gmail.loadThread":{versionAvailability:"*"},"gmail.query":{versionAvailability:"*"}},isAvailable:()=>!1,isAvailableForScriptAgent:()=>!0,stateDuplicator:({original:e})=>e,getModuleConfigurationStatus:()=>"ready",getDescription:e=>e.formatMessage({id:"workflow.module.gmail.description",defaultMessage:"Search Gmail messages."}),getName:e=>e.formatMessage({id:"workflow.module.gmail.title",defaultMessage:"Gmail"}),getModuleConfigSection:()=>"connections",getIcon:()=>t(407444).gmailIcon};const y={type:"googleCalendar",isSingleton:!0,config:{},authentication:void 0,latestVersion:"1.0.0",triggers:{},effects:{"googleCalendar.search":{versionAvailability:"*"},"googleCalendar.query":{versionAvailability:"*"}},isAvailable:()=>!1,isAvailableForScriptAgent:()=>!0,stateDuplicator:({original:e})=>e,getModuleConfigurationStatus:()=>"ready",getDescription:e=>e.formatMessage({id:"workflow.module.googleCalendar.description",defaultMessage:"Search Google Calendar events."}),getName:e=>e.formatMessage({id:"workflow.module.googleCalendar.title",defaultMessage:"Google Calendar"}),getModuleConfigSection:()=>"connections",getIcon:()=>t(721983).googleCalendarIcon};const A={type:"googleDrive",isSingleton:!0,config:{},authentication:void 0,latestVersion:"1.0.0",triggers:{},effects:{"googleDrive.search":{versionAvailability:"*"},"googleDrive.loadFile":{versionAvailability:"*"}},isAvailable:()=>!1,isAvailableForScriptAgent:()=>!0,stateDuplicator:({original:e})=>e,getModuleConfigurationStatus:()=>"ready",getDescription:e=>e.formatMessage({id:"workflow.module.googleDrive.description",defaultMessage:"Search Google Drive files."}),getName:e=>e.formatMessage({id:"workflow.module.googleDrive.title",defaultMessage:"Google Drive"}),getModuleConfigSection:()=>"connections",getIcon:()=>t(74007).googleDriveIcon};const w={type:"images",isSingleton:!0,config:{},authentication:void 0,latestVersion:"1.0.0",triggers:{},effects:{"images.generate":{versionAvailability:"*"}},isAvailable:()=>!1,isAvailableForScriptAgent:()=>!0,stateDuplicator:({original:e})=>e,getModuleConfigurationStatus:()=>"ready",getDescription:e=>e.formatMessage({id:"workflow.module.images.description",defaultMessage:"Generate images with AI in the script sandbox."}),getName:e=>e.formatMessage({id:"workflow.module.images.title",defaultMessage:"Images"}),getModuleConfigSection:()=>"system",getIcon:()=>t(848392).M};const h={type:"jira",isSingleton:!0,config:{},authentication:void 0,latestVersion:"1.0.0",triggers:{},effects:{"jira.search":{versionAvailability:"*"},"jira.loadIssue":{versionAvailability:"*"}},isAvailable:()=>!1,isAvailableForScriptAgent:()=>!0,stateDuplicator:({original:e})=>e,getModuleConfigurationStatus:()=>"ready",getDescription:e=>e.formatMessage({id:"workflow.module.jira.description",defaultMessage:"Search Jira tickets."}),getName:e=>e.formatMessage({id:"workflow.module.jira.title",defaultMessage:"Jira"}),getModuleConfigSection:()=>"connections",getIcon:()=>t(280746).jiraIcon};const k={type:"linear",isSingleton:!0,config:{},authentication:void 0,latestVersion:"1.0.0",triggers:{},effects:{"linear.search":{versionAvailability:"*"},"linear.loadIssue":{versionAvailability:"*"}},isAvailable:()=>!1,isAvailableForScriptAgent:()=>!0,stateDuplicator:({original:e})=>e,getModuleConfigurationStatus:()=>"ready",getDescription:e=>e.formatMessage({id:"workflow.module.linear.description",defaultMessage:"Search Linear issues."}),getName:e=>e.formatMessage({id:"workflow.module.linear.title",defaultMessage:"Linear"}),getModuleConfigSection:()=>"connections",getIcon:()=>t(648023).linearIcon};var M=()=>t(289106),_=()=>t(798880);function S(e){const{experimentService:i,spaceId:t,userId:o}=e;return i.checkGate({gateName:"workflows_mcp_server_module_available",actor:o?{table:_().oo,id:o}:M().S,customIDs:{spaceId:t}})}const I={type:"mcpServer",config:{},isSingleton:!1,getModuleDedupeKey:e=>{var i;return(null===(i=e.state)||void 0===i?void 0:i.serverUrl)??e.id},getToolNamePrefix:e=>{var i;return`mcp-${(0,t(112968).BH)(null===(i=e.state)||void 0===i?void 0:i.serverUrl)}`},isAvailable:({configStep:e,experimentService:i,userId:t,spaceId:o})=>Boolean(e.enableExperimentalIntegrations&&S({experimentService:i,spaceId:o,userId:t})),isAvailableForScriptAgent:({configStep:e,experimentService:i,userId:t,spaceId:o})=>Boolean(e.enableExperimentalIntegrations&&S({experimentService:i,spaceId:o,userId:t})),authentication:void 0,latestVersion:"1.0.0",stateDuplicator:()=>{},getModuleConfigurationStatus:e=>{var i;return null!==(i=e.state)&&void 0!==i&&i.serverUrl?"ready":"invalid"},triggers:{},effects:{"mcpServer.runTool":{versionAvailability:"*"},"mcpServer.listResources":{versionAvailability:"*"},"mcpServer.readResource":{versionAvailability:"*"},"mcpServer.listPrompts":{versionAvailability:"*"},"mcpServer.getPrompt":{versionAvailability:"*"},"mcpServer.listTools":{versionAvailability:"*"}},getDescription:e=>e.formatMessage({id:"workflows.modules.mcpServer.description",defaultMessage:"Integration with MCP server for AI inference with tools"}),getName:(e,i)=>null!=i&&i.name?i.name:e.formatMessage({id:"workflows.modules.mcpServer.name",defaultMessage:"MCP Server"}),getMessageIfNotValid:(e,i)=>e.formatMessage({id:"workflows.modules.mcpServer.notConnected",defaultMessage:"MCP Server is not configured in {workflowName}"},{workflowName:i}),getModuleConfigSection:()=>"connections",getIcon:()=>t(818541).V};const C={type:"microsoftTeams",isSingleton:!0,config:{},authentication:void 0,latestVersion:"1.0.0",triggers:{},effects:{"microsoftTeams.search":{versionAvailability:"*"},"microsoftTeams.viewChannel":{versionAvailability:"*"},"microsoftTeams.loadMessage":{versionAvailability:"*"},"microsoftTeams.viewChat":{versionAvailability:"*"}},isAvailable:()=>!1,isAvailableForScriptAgent:()=>!0,stateDuplicator:({original:e})=>e,getModuleConfigurationStatus:()=>"ready",getDescription:e=>e.formatMessage({id:"workflow.module.microsoftTeams.description",defaultMessage:"Search Microsoft Teams messages."}),getName:e=>e.formatMessage({id:"workflow.module.microsoftTeams.title",defaultMessage:"Microsoft Teams"}),getModuleConfigSection:()=>"connections",getIcon:()=>t(679132).microsoftTeamsIcon};var D=()=>t(563452);const T={type:"modules",isSingleton:!0,config:{},authentication:void 0,latestVersion:"1.0.0",triggers:{},effects:{"modules.list":{versionAvailability:"*"},"modules.create":{versionAvailability:"*"},"modules.update":{versionAvailability:"*"},"modules.delete":{versionAvailability:"*"}},isAvailable:()=>!1,isAvailableForScriptAgent:({isCustomAgentContext:e})=>!e,stateDuplicator:({original:e})=>e,getModuleConfigurationStatus:()=>"ready",getDescription:e=>e.formatMessage({id:"workflow.module.modules.description",defaultMessage:"Manage agent modules for the personal agent."}),getName:e=>e.formatMessage({id:"workflow.module.modules.title",defaultMessage:"Modules"}),getModuleConfigSection:()=>"system",getIcon:()=>t(735790).M};const x={type:"outlook",isSingleton:!0,config:{},authentication:void 0,latestVersion:"1.0.0",triggers:{},effects:{"outlook.search":{versionAvailability:"*"},"outlook.loadMessage":{versionAvailability:"*"},"outlook.loadThread":{versionAvailability:"*"},"outlook.query":{versionAvailability:"*"}},isAvailable:()=>!1,isAvailableForScriptAgent:()=>!0,stateDuplicator:({original:e})=>e,getModuleConfigurationStatus:()=>"ready",getDescription:e=>e.formatMessage({id:"workflow.module.outlook.description",defaultMessage:"Search Outlook messages."}),getName:e=>e.formatMessage({id:"workflow.module.outlook.title",defaultMessage:"Outlook"}),getModuleConfigSection:()=>"connections",getIcon:()=>t(846585).microsoftOutlookIcon};const N={type:"salesforce",isSingleton:!0,config:{},authentication:void 0,latestVersion:"1.0.0",triggers:{},effects:{"salesforce.search":{versionAvailability:"*"}},isAvailable:()=>!1,isAvailableForScriptAgent:()=>!0,stateDuplicator:({original:e})=>e,getModuleConfigurationStatus:()=>"ready",getDescription:e=>e.formatMessage({id:"workflow.module.salesforce.description",defaultMessage:"Search Salesforce records."}),getName:e=>e.formatMessage({id:"workflow.module.salesforce.title",defaultMessage:"Salesforce"}),getModuleConfigSection:()=>"connections",getIcon:()=>t(769145).salesforceIcon};const P={type:"search",isSingleton:!0,config:{},authentication:void 0,latestVersion:"1.0.0",triggers:{},effects:{"search.autosearch":{versionAvailability:"*"}},isAvailable:()=>!1,isAvailableForScriptAgent:()=>!0,stateDuplicator:({original:e})=>e,getModuleConfigurationStatus:()=>"ready",getDescription:e=>e.formatMessage({id:"workflow.module.search.description",defaultMessage:"Search across Notion and connected sources automatically with generated queries."}),getName:e=>e.formatMessage({id:"workflow.module.search.title",defaultMessage:"Search"}),getModuleConfigSection:()=>"system",getIcon:()=>t(207207).magnifyingGlassIcon};const V={type:"sharepoint",isSingleton:!0,config:{},authentication:void 0,latestVersion:"1.0.0",triggers:{},effects:{"sharepoint.search":{versionAvailability:"*"},"sharepoint.loadFile":{versionAvailability:"*"}},isAvailable:()=>!1,isAvailableForScriptAgent:()=>!0,stateDuplicator:({original:e})=>e,getModuleConfigurationStatus:()=>"ready",getDescription:e=>e.formatMessage({id:"workflow.module.sharepoint.description",defaultMessage:"Search SharePoint files."}),getName:e=>e.formatMessage({id:"workflow.module.sharepoint.title",defaultMessage:"SharePoint"}),getModuleConfigSection:()=>"connections",getIcon:()=>t(692201).microsoftSharePointIcon};t(898992),t(672577);function B(e){var i;return Boolean(null===(i=e.channelIds)||void 0===i?void 0:i.length)||Boolean(e.allChannels)}const F={type:"slack",isSingleton:!0,getToolNamePrefix:()=>"slack",config:{scopes:{local:["app_mentions:read","channels:history","channels:read","chat:write.customize","chat:write","emoji:read","files:read","files:write","groups:history","groups:read","im:history","im:read","im:write","mpim:history","mpim:read","reactions:read","reactions:write","usergroups:read","usergroups:write","users:read.email","users:read","assistant:write"],production:["app_mentions:read","channels:history","channels:read","chat:write.customize","chat:write","emoji:read","reactions:read","reactions:write","usergroups:read","usergroups:write","users:read.email","users:read"]},nonPrivateBotScopes:{local:["app_mentions:read","channels:history","channels:read","chat:write.customize","chat:write","emoji:read","files:read","files:write","reactions:read","reactions:write","usergroups:read","usergroups:write","users:read.email","users:read","assistant:write"],production:["app_mentions:read","channels:history","channels:read","chat:write.customize","chat:write","emoji:read","reactions:read","reactions:write","usergroups:read","usergroups:write","users:read.email","users:read"]}},authentication:{type:"oauth2"},isAvailable:e=>{const{configStep:i,isCustomAgentContext:t}=e;return!(!t&&!i.isCustomAgent)||(0,c().UD)(e,"workflows_slack_module_available",["enableAgentIntegrations"])},latestVersion:"1.0.0",triggers:{"slack.message":{isTriggerConfigured:B,fields:{channels:{required:()=>!0,isConfigured:B}},triggerDuplicator:({original:e})=>({type:e.type}),versionAvailability:"*",createDefaultState:()=>({type:"slack.message"}),getTriggerDedupKey:({workflowId:e,triggerId:i,triggerVariables:t})=>{var o;const a=null===(o=t.message)||void 0===o?void 0:o.id;if(a)return`${e}-${i}-${a}`}},"slack.thread.created":{isTriggerConfigured:B,fields:{channels:{required:()=>!0,isConfigured:B}},triggerDuplicator:({original:e})=>({type:e.type}),versionAvailability:"*",createDefaultState:()=>({type:"slack.thread.created"}),getTriggerDedupKey:({workflowId:e,triggerId:i,triggerVariables:t})=>{var o;const a=null===(o=t.thread)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.id;if(a)return`${e}-${i}-${a}`}},"slack.reaction.added":{isTriggerConfigured:B,fields:{channels:{required:()=>!0,isConfigured:B},reactions:{required:()=>!1,isConfigured:e=>Boolean(e.reactions&&e.reactions.length>0)},from:{required:()=>!1,isConfigured:e=>Boolean(e.from)}},triggerDuplicator:({original:e})=>({type:e.type,reactions:e.reactions,threadIds:e.threadIds,from:e.from}),versionAvailability:"*",createDefaultState:()=>({type:"slack.reaction.added"}),getTriggerDedupKey:({workflowId:e,triggerId:i,triggerVariables:t})=>{var o,a;const r=t.isFollowUpMessage?null===(o=t.thread[0])||void 0===o?void 0:o.id:null===(a=t.message)||void 0===a?void 0:a.id;if(r)return`${e}-${i}-${r}`}},"slack.app.mention":{isTriggerConfigured:B,fields:{channels:{required:()=>!0,isConfigured:B}},triggerDuplicator:({original:e})=>({type:e.type}),versionAvailability:"*",createDefaultState:()=>({type:"slack.app.mention"}),getTriggerDedupKey:({workflowId:e,triggerId:i,triggerVariables:t})=>{var o;const a=null===(o=t.message)||void 0===o?void 0:o.id;if(a)return`${e}-${i}-${a}`}}},effects:{"slack.createThreadInChannel":{versionAvailability:"*"},"slack.createThreadInDirectMessage":{versionAvailability:"*"},"slack.replyInThread":{versionAvailability:"*"},"slack.updateMessage":{versionAvailability:"*"},"slack.addReactionToMessage":{versionAvailability:"*"},"slack.removeReactionFromMessage":{versionAvailability:"*"},"slack.getThreadsInChannelSince":{versionAvailability:"*"},"slack.queryChannels":{versionAvailability:"*"},"slack.getUser":{versionAvailability:"*"},"slack.findUserByEmail":{versionAvailability:"*"},"slack.parseSlackUriOrUrl":{versionAvailability:"*"},"slack.viewFileUrl":{versionAvailability:"*"},"slack.search":{versionAvailability:"*"},"slack.loadMessage":{versionAvailability:"*"}},stateDuplicator:()=>{},getModuleConfigurationStatus:e=>{var i;return null!==(i=e.state)&&void 0!==i&&i.connectionPointer?"ready":"invalid"},getDescription:e=>e.formatMessage({defaultMessage:"Send and read messages from a connected Slack workspace.",id:"workflow.module.slack.description"}),getName:e=>e.formatMessage({defaultMessage:"Slack",id:"workflow.module.slack.title"}),getMessageIfNotValid:(e,i)=>e.formatMessage({defaultMessage:"Slack is not connected to {workflowName}",id:"workflow.module.slack.notConnected"},{workflowName:i}),getDefaultPermissions:()=>[{moduleType:"slack",type:"slack",identifier:"public:*",actions:["read"]},{moduleType:"slack",type:"slack",identifier:"users:*",actions:["read"]}],getAIConfigurableDefaultPermissions:({type:e})=>"workflow"===e?[{identifier:"public:*",actions:["read"]},{identifier:"users:*",actions:["read"]}]:[{identifier:"*",actions:["read","write"]},{identifier:"users:*",actions:["read"]}],getModuleConfigSection:()=>"connections",getIcon:()=>t(888382).slackIcon,autoGrantPermissions:({module:e,workflow:i,uriContext:t})=>{var o;let a=e;const r=i.triggers||[];if("slack"!==a.type)return a;const n=null===(o=a.permissions)||void 0===o?void 0:o.find((e=>{var i;return"public:*"===e.identifier&&(null===(i=e.actions)||void 0===i?void 0:i.includes("read"))}));for(const s of r){const e=s.state;if(e&&("slack.message"===e.type||"slack.app.mention"===e.type||"slack.reaction.added"===e.type||"slack.thread.created"===e.type)&&e.channelIds&&!n)for(const i of e.channelIds)a=G({module:a,channelId:i})}return a}};function G(e){var i;const{module:t,channelId:o}=e;if(null===(i=t.permissions)||void 0===i?void 0:i.find((e=>Array.isArray(e.identifier)?e.identifier.includes(o):e.identifier===o)))return t;const a={moduleType:"slack",type:"slack",identifier:o,actions:["read"]};return{...t,permissions:[...t.permissions||[],a]}}const q={type:"test",isSingleton:!1,config:{},authentication:void 0,latestVersion:"1.0.0",triggers:{},effects:{"test.getState":{versionAvailability:"*"}},isAvailable:()=>!1,isAvailableForScriptAgent:()=>!0,stateDuplicator:({original:e})=>e,getModuleConfigurationStatus:()=>"ready",getDescription:e=>e.formatMessage({id:"workflow.module.test.description",defaultMessage:"Internal test module for validating module workflows."}),getName:e=>e.formatMessage({id:"workflow.module.test.title",defaultMessage:"Test"}),getModuleConfigSection:()=>"system",getIcon:()=>t(24126).c};const $={type:"web",isSingleton:!0,config:{},authentication:void 0,latestVersion:"1.0.0",triggers:{},effects:{"web.search":{versionAvailability:"*"},"web.loadPage":{versionAvailability:"*"}},isAvailable:()=>!1,isAvailableForScriptAgent:()=>!0,stateDuplicator:({original:e})=>e,getModuleConfigurationStatus:()=>"ready",getDescription:e=>e.formatMessage({id:"workflow.module.web.description",defaultMessage:"Search the public web and load page content."}),getName:e=>e.formatMessage({id:"workflow.module.web.title",defaultMessage:"Web"}),getModuleConfigSection:()=>"system",getIcon:()=>t(12193).globeIcon};function j(e){const{experimentService:i,userId:t}=e;return i.checkGate({gateName:"workers",actor:t?{table:_().oo,id:t}:M().S})}const z={type:"worker",isSingleton:!1,getModuleDedupeKey:e=>{var i;return(null===(i=e.state)||void 0===i?void 0:i.workerId)??e.id},config:{},isAvailable:({configStep:e,experimentService:i,userId:t,isCustomAgentContext:o})=>!(!o&&!e.isCustomAgent)&&(!!e.enableExperimentalIntegrations&&(void 0===t||j({experimentService:i,userId:t}))),authentication:void 0,latestVersion:"1.0.0",isAvailableForScriptAgent:()=>!0,stateDuplicator:()=>{},getModuleConfigurationStatus:e=>{var i;return null!==(i=e.state)&&void 0!==i&&i.workerId?"ready":"invalid"},triggers:{},effects:{"worker.listTools":{versionAvailability:"*"},"worker.runTool":{versionAvailability:"*"}},getDescription:e=>e.formatMessage({id:"workflows.modules.workers.description",defaultMessage:"Execute custom worker tools in your workspace"}),getName:e=>e.formatMessage({id:"workflows.modules.workers.name",defaultMessage:"Worker"}),getMessageIfNotValid:(e,i)=>e.formatMessage({id:"workflows.modules.workers.notConfigured",defaultMessage:"Worker is not configured in {workflowName}"},{workflowName:i}),getModuleConfigSection:()=>"connections",getIcon:()=>m().codeIcon},U={type:"workers",isSingleton:!0,config:{},authentication:void 0,latestVersion:"1.0.0",isAvailable:({configStep:e,experimentService:i,userId:t,isCustomAgentContext:o})=>!e.isCustomAgent&&!o&&(!!e.enableExperimentalIntegrations&&(void 0===t||j({experimentService:i,userId:t}))),isAvailableForScriptAgent:({isCustomAgentContext:e})=>!e,triggers:{},effects:{"workers.list":{versionAvailability:"*"}},stateDuplicator:()=>{},getModuleConfigurationStatus:()=>"ready",getDescription:e=>e.formatMessage({id:"workflows.modules.workersMeta.description",defaultMessage:"List available workers in your workspace."}),getName:e=>e.formatMessage({id:"workflows.modules.workersMeta.title",defaultMessage:"Workers"}),getModuleConfigSection:()=>"system",getIcon:()=>m().codeIcon},E={asana:s,box:l,calendar:t(471636).BJ,computer:d,cursor:u,discord:g,fs:p,gmail:b,googleCalendar:y,googleDrive:A,github:v,images:w,files:f,jira:h,linear:k,mail:t(543322).ki,microsoftTeams:C,mcpServer:I,modules:T,notion:t(905470).IN,outlook:x,salesforce:N,search:P,sharepoint:V,slack:F,test:q,web:$,workers:U,worker:z};function R(e){return E[e]}function O(e,i){var t;return null===(t=R(e))||void 0===t?void 0:t.triggers[i]}function L(e){var i;const{type:t,definition:a,id:r,name:n,intl:s,state:l}=e,d=null===(i=a.getDefaultPermissions)||void 0===i?void 0:i.call(a,l),c={type:t,id:r??(0,o().Ay)(),name:n??a.getName(s),version:a.latestVersion,...void 0!==l?{state:l}:{},...void 0!==d?{permissions:d}:{}};return(0,D().yC)(c)}function H(e){for(const i of Object.values(E))if(i)for(const[t,o]of(0,a().WP)(i.triggers))if(t===e)return o}r().union([r().object({optional:{callbackType:r().literals(...n().Bi),moduleSpecific:r().string(),redirectToAuth:r().literal("true"),transcriptId:r().string(),workflowId:r().string()},required:{moduleId:r().string(),spaceId:r().string(),type:r().literal("workflow"),userId:r().string()}}),r().object({optional:{callbackType:r().literals(...n().Bi),moduleSpecific:r().string(),redirectToAuth:r().literal("true")},required:{integrationId:r().string(),spaceId:r().string(),transcriptId:r().string(),type:r().literal("agent"),userId:r().string()}})]);function K(e){const i=R(e);return(null==i?void 0:i.isSingleton)??!0}}}]);