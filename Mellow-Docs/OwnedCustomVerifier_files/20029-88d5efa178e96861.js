"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[20029],{6744:(e,t,n)=>{n.d(t,{B:()=>a});n(18107),n(967357);var o=()=>n(733539);function a(){return Boolean(o().default.state.undoStack.at(-1))}},9402:(e,t,n)=>{n.d(t,{P:()=>a});n(898992),n(737550);var o=()=>n(507395);function a(e){return!!(0,o().q)()||e.blocks.some((e=>e.pathIsDead()))}},21869:(e,t,n)=>{n.d(t,{s:()=>a});var o=()=>n(314529);function a(e,t){(0,o().DO_NOT_USE_trackLegacy)(e,"rich_text_menu_click",t)}},22913:(e,t,n)=>{n.d(t,{H:()=>d,U:()=>c});var o=()=>n(859384),a=()=>n(446290),i=()=>n(440902),l=()=>n(598101),s=()=>n(267271);const r=(0,n(69708).YK)({renameName:{id:"action.rename.name",defaultMessage:"Rename"}}),c=(0,s().Fw)({key:"rename page",displayName:r.renameName,analyticsName:r.renameName.defaultMessage,svg:o().M,validators:[n(730107).I,n(788436).X,i().v,n(49533)._,(0,l().A)(n(868673).a),(0,l().A)(n(606376).l),(0,l().A)(n(59411).k),(0,l().A)(a().d),(0,l().A)((0,n(419286).X)(n(700500).xd.externalObjectInstancePage)),(0,l().A)(n(467294).P),(0,l().A)(n(401665).I),(0,l().A)(n(395763).i),(0,l().A)(n(339425).o),(0,l().A)(n(340814).v),(0,l().A)(n(234347)._)],shortcuts:["rename"],closeParentMenu:!0,action:e=>{const{blocks:t,originRect:o}=e;if(t.length>0)return n(898286).U({blockStore:t[0],originRect:o})}}),d=(0,s().Fw)({key:"rename file",displayName:r.renameName,analyticsName:r.renameName.defaultMessage,svg:o().M,validators:[n(80257).k,i().v,n(158658).p,(0,l().A)(a().d),(0,l().A)((0,n(389456).B)("table"))],shortcuts:["rename"],closeParentMenu:!0,action:e=>{const{blocks:t,originRect:o}=e;if(t.length>0)return n(569577).H({blockStore:t[0],originRect:o})}})},30549:(e,t,n)=>{n.d(t,{G:()=>a});var o=()=>n(747135);function a(){const e=(0,o().F)();return Boolean(null==e?void 0:e.getAssociatedCollectionStore())}},45214:(e,t,n)=>{n.d(t,{l:()=>a});var o=()=>n(700500);function a(e){if(e.blocks&&1===e.blocks.length){const[t]=e.blocks;return t.isType(o().xd.collectionView)}return!1}},49533:(e,t,n)=>{n.d(t,{_:()=>o});n(898992),n(823215);function o(e){return e.blocks.every((e=>e.isNavigableBlock()))}},80257:(e,t,n)=>{n.d(t,{k:()=>a});n(18107),n(967357);var o=()=>n(700500);function a(e){if(e.blocks){const t=e.blocks.at(0);return Boolean(t&&t.isDefined()&&t.getType()===o().xd.file&&t.getProperties().source)}return!1}},154562:(e,t,n)=>{n.d(t,{R5:()=>M,pG:()=>T,Im:()=>w});n(18107),n(967357);var o=()=>n(916580),a=()=>n(77311),i=()=>n(232615),l=()=>n(700500);n(296540);const s={viewBox:"0 0 20 20",fittedViewBox:"3.37 2.37 13.25 15.25",svg:(0,n(474848).jsx)("path",{d:"M5.5 2.375A2.125 2.125 0 0 0 3.375 4.5v5.25c0 1.174.951 2.125 2.125 2.125H13a2.125 2.125 0 0 0 2.125-2.125V4.5A2.125 2.125 0 0 0 13 2.375zM4.625 4.5c0-.483.392-.875.875-.875H13c.483 0 .875.392.875.875v5.25a.875.875 0 0 1-.875.875H5.5a.875.875 0 0 1-.875-.875zm-1.25 9.62c0-.345.28-.625.625-.625h12a.625.625 0 1 1 0 1.25H4a.625.625 0 0 1-.625-.625m0 2.88c0-.345.28-.625.625-.625h8.55a.625.625 0 1 1 0 1.25H4A.625.625 0 0 1 3.375 17"})},r=(0,n(340498).wt)("caption",s,"default");var c=()=>n(231536),d=()=>n(441467),u=()=>n(730307),m=()=>n(930545),p=()=>n(158658),v=()=>n(921333);var g=()=>n(375308),f=()=>n(440902),y=()=>n(419286),k=()=>n(598101),b=()=>n(422155),h=()=>n(129522),A=()=>n(184033),S=()=>n(267271);const N=(0,n(69708).YK)({commentName:{id:"action.comment.name",defaultMessage:"Comment"},captionName:{id:"action.caption.name",defaultMessage:"Caption"},altTextName:{id:"action.altText.name",defaultMessage:"Alt text"},reactName:{id:"action.react.name",defaultMessage:"React"}}),w=(0,S().Fw)({key:"comment",displayName:N.commentName,analyticsName:N.commentName.defaultMessage,svg:n(49621).h,hideFromSlashActionMenu:!0,validators:[m().zp],shortcuts:["comment"],closeParentMenu:!0,lazyDependencyKeys:["formulasModule"],action:({blocks:e,environment:t})=>{const s=(0,c().Y)("formulasModule"),r=e[0],m=null==r?void 0:r.getModel();if(r){const e="editing"===i().default.state.mode&&i().default.state.multiSelection;if(e&&!(0,a().k)(e)&&(e.start.store.id===r.id||null!=m&&m.isType("table")&&"properties"===e.start.store.path[0]&&e.start.store.path[1]&&(r.getFormatStore().getKeyStore("table_block_column_order").getValue()??[]).includes(String(e.start.store.path[1]))))d().hN({environment:t,blockStore:r,multiSelection:e,formulasModule:s});else if(r.isDefined()&&null!=m&&m.isType(l().uP)){const e=r.getTitleStore(),n=e&&(0,A().s)(e);if(e&&n&&n.endIndex>0){const a={startIndex:0,endIndex:n.endIndex};d().hN({environment:t,blockStore:r,multiSelection:(0,o().$U)({store:e,selection:a}),rect:h().K.getRect(r),formulasModule:s})}}else if(r.getAssociatedCollectionStore()){var p;const e=n(299545).oC(r,{recursivelyLoadAllDiscussions:!1}),o=n(57618).A.findBlockPropertyValue(r,"title"),a=null==o||null===(p=o.getNode())||void 0===p?void 0:p.getBoundingClientRect();e>0?n(182641).B4({environment:t,blockStore:r,shouldFocusDiscussion:!0,analyticsFrom:"db_page_comments",rect:a,recursivelyLoadAllDiscussions:!1}):(0,u().l)({environment:t,blockStore:r,rect:a})}else(0,u().l)({environment:t,blockStore:r})}}}),T=(0,S().Fw)({key:"caption",displayName:N.captionName,analyticsName:N.captionName.defaultMessage,svg:r,validators:[p().p,(0,k().A)(g().v),f().v,function(e){if(e.blocks){var t;const n=e.blocks.at(0);return Boolean(null==n||null===(t=n.getModel())||void 0===t?void 0:t.isType(l().IA))}return!1},(0,b().or)([(0,v().i)("source"),(0,v().i)("link"),(0,y().X)("code")])],shortcuts:["caption"],closeParentMenu:!0,track:{actionName:"init_edit_caption"},action:(e,{blocks:t},o)=>{const a=t.at(0);a&&(n(391214).pG(a),e())}}),M=(0,S().Ls)({key:"alt text",displayName:N.altTextName,analyticsName:N.altTextName.defaultMessage,svg:n(941702).Y,validators:[f().v,(0,y().X)(l().xd.image),(0,v().i)("source"),(0,b().or)([(0,v().i)("alt_text"),(0,n(574357).U)([p().p,(0,k().A)(g().v)])])],closeParentMenu:!0,track:{actionName:"init_edit_alt_text"},action:(e,{blocks:t,environment:o},a)=>{const i=t.at(0);i&&((0,n(580050).a)({environment:o,blockStore:i,entrypoint:"block_menu"}),e())}});(0,S().Fw)({key:"react",displayName:N.reactName,analyticsName:N.reactName.defaultMessage,svg:n(546703).r,validators:[p().p,(0,k().A)(g().v),n(792609).Y,(0,k().A)(n(49533)._),m().bn,(0,b().or)([f().v,n(202786).T]),(0,k().A)(n(275143).y),(0,n(963335).S)("block_reactions")],shortcuts:["react"],closeParentMenu:!0,lazyDependencyKeys:["formulasModule"],action:({blocks:e,environment:t})=>{const s=(0,c().Y)("formulasModule"),r=e[0],u=null==r?void 0:r.getModel();if(r){const e="editing"===i().default.state.mode&&i().default.state.multiSelection;if(e&&!(0,a().k)(e)&&(e.start.store.id===r.id||null!=u&&u.isType("table")&&"properties"===e.start.store.path[0]&&e.start.store.path[1]&&(r.getFormatStore().getKeyStore("table_block_column_order").getValue()??[]).includes(String(e.start.store.path[1]))))d().of({environment:t,blockStore:r,multiSelection:e,formulasModule:s});else if(r.isDefined()&&null!=u&&u.isType(l().uP)){const e=r.getTitleStore(),n=e&&(0,A().s)(e);if(e&&n&&n.endIndex>0){const a={startIndex:0,endIndex:n.endIndex};d().of({environment:t,blockStore:r,multiSelection:(0,o().$U)({store:e,selection:a}),rect:h().K.getRect(r),formulasModule:s})}}else(0,n(517288).O)({environment:t,blockStore:r,formulasModule:s})}}})},155963:(e,t,n)=>{function o(e){if(e.blocks&&1===e.blocks.length){const[t]=e.blocks;return t.isCollectionView()}return!1}n.d(t,{K:()=>o})},198365:(e,t,n)=>{n.d(t,{w:()=>o});n(18107),n(967357);function o(e){const t=e.blocks.at(0);return Boolean(null==t?void 0:t.isType("image"))}},201004:(e,t,n)=>{n.d(t,{p:()=>o});n(18107),n(967357);function o(e){const t=e.blocks.at(0);return void 0!==t&&t.isPageBlock()}},209416:(e,t,n)=>{n.d(t,{a:()=>i});n(296540);var o=n(474848);const a={viewBox:"0 0 20 20",fittedViewBox:"2.37 0.99 16.23 16.63",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M12.728 4.015H4.5a.875.875 0 0 0-.875.875v7.5l.005.09a.875.875 0 0 0 .87.784h1.813a.625.625 0 0 1 .625.626v1.838l3.034-2.334a.63.63 0 0 1 .38-.13H15.5l.09-.004a.875.875 0 0 0 .78-.78l.005-.09V6.089l1.247-1.248.003.049v7.5l-.01.216a2.126 2.126 0 0 1-2.115 1.909h-4.935l-3.872 2.977a.625.625 0 0 1-1.005-.495v-2.482H4.5l-.217-.011a2.126 2.126 0 0 1-1.908-2.114v-7.5c0-1.174.951-2.125 2.125-2.125h9.48z"}),(0,o.jsx)("path",{d:"M17.294 1.223a.77.77 0 0 1 1.084 0 .77.77 0 0 1 0 1.083v.012l-7.986 7.987a.87.87 0 0 1-.387.232l-.916.283c-.18.065-.361-.116-.31-.31l.284-.915a1.1 1.1 0 0 1 .232-.387z"})]})},i=(0,n(340498).wt)("commentPencil",a,"default")},222958:(e,t,n)=>{n.d(t,{d:()=>i});var o=()=>n(696746),a=()=>n(486674);function i(){const e=(0,a().a)();return(0,o().lU)(e)}},234347:(e,t,n)=>{n.d(t,{_:()=>o});n(18107),n(967357);function o(e){const t=e.blocks.at(0);return Boolean(null==t?void 0:t.isPeopleCollectionViewPage())}},262559:(e,t,n)=>{n.d(t,{L:()=>p,c:()=>v});var o=()=>n(498212),a=()=>n(497952),i=()=>n(822789),l=()=>n(869562),s=()=>n(644914),r=()=>n(770160),c=()=>n(981475),d=()=>n(703748);function u(e){(0,i().hw)()&&((0,s().KB)(e)||(0,l().setExpand)({environment:e,isExpanded:!0,from:"slippery_slope_add_to_chat",saveDetailsSidebarPreference:!1}))}function m(e){c().globalChatPanelRuntimeStore.update((t=>({...t,selectionContextInsertRequests:[...t.selectionContextInsertRequests??[],{id:(0,o().Ay)(),data:e}]})))}function p(e){const{environment:t,textSelection:n,chatPanelStore:o,source:i}=e,l=(0,r().getIsChatPanelOpen)(t),s=(0,a().hL)(n);s&&(m(s),u(t),!l&&o&&(0,d().openChatPanel)({environment:t,store:o,chatPanelState:{isOpen:!0},source:i}),(0,d().requestUnifiedChatInputFocus)({chatFeatureType:"slippery_slope"}))}function v(e){const{environment:t,selectedBlocks:n,chatPanelStore:o,source:i}=e,l=(0,r().getIsChatPanelOpen)(t),s=(0,a().$c)(n);s&&(m(s),u(t),!l&&o&&(0,d().openChatPanel)({environment:t,store:o,chatPanelState:{isOpen:!0},source:i}),(0,d().requestUnifiedChatInputFocus)({chatFeatureType:"slippery_slope"}))}},306113:(e,t,n)=>{n.d(t,{I:()=>a});n(18107),n(967357);var o=()=>n(700500);function a(e){if(e.blocks){const t=e.blocks.at(0);return Boolean((null==t?void 0:t.isType(o().Ib))&&t.getProperties())}return!1}},333344:(e,t,n)=>{n.d(t,{P:()=>i});var o=()=>n(876338),a=()=>n(272509);function i(e){const t=(0,o().$)(e.pageContext);return(0,a().I)(t)}},333799:(e,t,n)=>{n.d(t,{Q:()=>o});n(898992),n(823215);function o(e){return e.blocks.every((e=>{if(!e.isCollectionView())return!1;const t=e.getCollectionStoreIfSingleSource();return!!t&&t.isExternallyImportedAndSyncedCollection()}))}},340814:(e,t,n)=>{n.d(t,{v:()=>o});n(18107),n(967357);function o(e){const t=e.blocks.at(0);return Boolean(null==t?void 0:t.isPersonProfile())}},348895:(e,t,n)=>{n.d(t,{m:()=>l});var o=()=>n(295633),a=()=>n(700500),i=()=>n(179034);function l(e){if(!e)return!1;if(!e.isType(a().xd.alias))return!1;const t=e.getAliasTargetStore();return Boolean((null==t?void 0:t.isTable(i().ev))&&t instanceof o().B&&t.isType(a().xd.form))}},363019:(e,t,n)=>{n.d(t,{F:()=>y});var o=()=>n(209416),a=()=>n(473227),i=()=>n(930545),l=()=>n(859398),s=()=>n(275143),r=()=>n(375308),c=()=>n(775584),d=()=>n(440902),u=()=>n(598101),m=()=>n(422155),p=()=>n(792609),v=()=>n(202786),g=()=>n(267271);const f=(0,n(69708).YK)({suggestName:{id:"action.suggest.name",defaultMessage:"Suggest edits"}});function y(e){return(0,g().Fw)({key:"suggest",displayName:f.suggestName,analyticsName:f.suggestName.defaultMessage,svg:o().a,hideFromSlashActionMenu:!0,validators:[(0,u().A)(c().F),l().$,(0,u().A)(r().v),p().Y,i()._h,i().bn,(0,m().or)([d().v,v().T]),(0,u().A)(s().y)],shortcuts:["suggest"],closeParentMenu:!0,action:({blocks:t,environment:n})=>{t[0]&&a().tf({environment:n,navigableBlockStore:t[0],mode:"suggest",location:e})}})}},384937:(e,t,n)=>{n.d(t,{G:()=>a});var o=()=>n(747100);function a(e){return o().Gb()}},389456:(e,t,n)=>{n.d(t,{B:()=>a});n(898992),n(823215);var o=()=>n(799832);function a(e,t=!0){return n=>n.blocks.every((n=>{const a=(0,o().U)(n,t),i=null==a?void 0:a.collectionViewStore();return(null==i?void 0:i.getType())===e}))}},393138:(e,t,n)=>{n.d(t,{P:()=>i});n(898992),n(823215);var o=()=>n(486674),a=()=>n(389456);function i(e){return e.blocks.every((()=>!function(){const e=(0,o().a)();return null==e?void 0:e.isCollectionViewPageWithContent()}()||(0,a().B)("page",!1)(e)))}},409076:(e,t,n)=>{n.d(t,{p:()=>i});n(898992),n(823215);var o=()=>n(700500),a=()=>n(519831);function i(e){return e.blocks.every((e=>{const t=e.getModel(),n=e.getRecordStoreUIParent();return Boolean(t&&t.isType(o().Si)&&t.getType()!==o().xd.transclusionContainer&&e.getParentTable()!==a().Vl&&n&&n.id===e.getParentId())}))}},410767:(e,t,n)=>{n.d(t,{z:()=>m});n(18107),n(967357),n(296540);var o=()=>n(700500),a=()=>n(236262),i=()=>n(69708),l=()=>n(574357);n(898992),n(823215);function s(e){if(n(440375).l.state)return!1;if((0,n(507395).q)())return!1;if(e.publicEditMode){const t=e.publicEditMode.permission;return"edit"===t||"comment"===t}return e.blocks.every((e=>"suggest"===n(77246).Uv.getMode(e)&&(!e.pathIsDead()&&(!(0,n(715142).dL)(e)&&e.canComment()))))}var r=()=>n(598101),c=()=>n(422155),d=()=>n(267271),u=n(474848);const m=(0,d().Fw)({key:"delete block",displayName:d().AY.deleteName,analyticsName:d().AY.deleteName.defaultMessage,closeParentMenu:!0,svg:a().trashIcon,shortcuts:["delete","backspace"],validators:[(0,c().or)([(0,l().U)([function(e){return e.blocks.every((e=>{const t=e.getRecordStoreUIParent();return Boolean(t&&e.isDefined()&&e.getParentId()!==t.id)}))},n(125591).e]),(0,l().U)([(0,c().or)([n(929409).S,s]),(0,r().A)(n(776594).x)])]),(0,c().or)([n(158658).p,s]),(0,r().A)((0,l().U)([n(49533)._,s])),(0,r().A)(n(375308).v),(0,r().A)((function(e){var t;const a=null===(t=n(907258).default.state.mainEditorCurrentBlockStore)||void 0===t?void 0:t.id,i=e.blocks.at(0);if(i){const e=i.getType(),t=i.getFormat(),n=i.id;return Boolean(n===a&&(0,o().Db)(e,t))}return!1})),(0,r().A)(n(37402).P),(0,r().A)((0,n(419286).X)(o().xd.externalObjectInstancePage)),(0,r().A)(n(467294).P),n(73330).z,(0,r().A)(n(745658).r),(0,c().or)([n(201004).p,n(155963).K,(0,r().A)((0,n(389456).B)("feed"))])],render:(e,{blocks:t},{styles:o})=>{const l=(0,n(609256).d)(t.at(0));return(0,u.jsx)(n(575143).A,{...e,...o,isRed:!0,svg:a().trashIcon,title:(0,u.jsx)(i().sA,{...d().AY.deleteName}),shortcut:"delete",disabled:l,disabledFeedback:l,tooltipText:l?(0,u.jsx)(i().sA,{...d().AY.cannotDeleteBlockTooltip}):void 0})},track:{actionName:"delete"},action:async(e,{blocks:t,environment:o},a)=>{await n(391214).Af({environment:o,blocks:t,shouldCheckSuggestEdit:!0,callback:e})}})},411960:(e,t,n)=>{n.d(t,{P:()=>a});n(898992),n(672577);var o=()=>n(77246);function a(e){return void 0!==e.blocks.find((e=>(0,o().Or)(o().Uv.getMode(e))))}},414479:(e,t,n)=>{n.d(t,{c:()=>a});n(898992),n(823215);var o=()=>n(18387);function a(e){const t=(0,o().Z)();return!!t&&e.blocks.every((e=>t.uiContains(e)&&t.id!==e.id))}},418731:(e,t,n)=>{n.d(t,{C:()=>a});n(898992),n(823215);var o=()=>n(182106);function a(e){return e.blocks.every((e=>Boolean(o().A.findOutlinerItemFromStore(e))))}},426716:(e,t,n)=>{n.d(t,{$:()=>i});n(898992),n(823215);var o=()=>n(295633),a=()=>n(569797);function i(e){return e.blocks.every((e=>{var t;return Boolean(null===(t=e.recordStoreUIParentStore)||void 0===t?void 0:t.findRecordStoreUIAncestor((e=>e instanceof a().p||e instanceof o().B&&e.isCollectionView())).ancestor)}))}},426928:(e,t,n)=>{n.d(t,{ET:()=>z,NQ:()=>L,kf:()=>T,Sr:()=>F,YO:()=>V,Wq:()=>U,EC:()=>C});var o=()=>n(907258),a=()=>n(726637),i=()=>n(929219),l=()=>n(675133),s=()=>n(584262),r=()=>n(179034),c=()=>n(343666),d=()=>n(222299),u=()=>n(281948),m=(n(898992),n(737550),()=>n(90023));function p(e){return!e.blocks.some((e=>{const t=null==e?void 0:e.getSystemBlockTypeStore().getValue();return(0,m().mi)(t)}))}var v=()=>n(401665),g=()=>n(775584),f=()=>n(440902),y=()=>n(598101),k=()=>n(384937),b=()=>n(492414),h=()=>n(968913),A=()=>n(246766),S=()=>n(712505),N=()=>n(267271);const w=(0,n(69708).YK)({openInFullPage:{id:"action.navigation.openInFullPage",defaultMessage:"Open in full page"},openInSidePeek:{id:"action.navigation.openInSidePeek",defaultMessage:"Open in side peek"},openInNewTab:{id:"action.openInNewTab.name",defaultMessage:"Open in new tab"},openInNewWindow:{id:"action.openInNewWindow.name",defaultMessage:"Open in new window"},openInFullPageShort:{id:"action.navigation.openInFullPageShort",defaultMessage:"Full page"},openInSidePeekShort:{id:"action.navigation.openInSidePeekShort",defaultMessage:"Side peek"},openInNewTabShort:{id:"action.openInNewTab.nameShort",defaultMessage:"New tab"},openInNewWindowShort:{id:"action.openInNewWindow.nameShort",defaultMessage:"New window"}});function T(e){var t;const n=e.blocks[0];if(!n)return!1;if(null!==(t=n.getModel())&&void 0!==t&&t.isNavigableBlock())return!0;if(n.isType("alias")){var o;const e=null===(o=n.getAliasTargetStore())||void 0===o?void 0:o.getModel();if((null==e?void 0:e.table)===r().ev&&null!=e&&e.isNavigableBlock())return!0}return!1}function M(e){return S().default.isSidePeekOpen()}const I=_(!1),x=_(!0);function _(e){return(0,N().Ls)({key:"open in full page",displayName:e?w.openInFullPageShort:w.openInFullPage,analyticsName:e?w.openInFullPageShort.defaultMessage:w.openInFullPage.defaultMessage,svg:n(419942).o,validators:[f().v,T,M],closeParentMenu:!0,action:e=>{const t=e.blocks[0],n=t.getAliasTargetStore()??t;if(n.table===c().SN)return;const o=(0,b().Ay)({store:n,pageVisitSource:s().y8.LinkInPage});(0,A().navigate)({environment:e.environment,url:o})},disabled:e=>{const t=i().A.state.online,n=e.blocks[0].id,o=(0,h().Bd)(n);return!t&&!o},renderTooltip:()=>l().A.formatMessage(N().AY.unavailableOfflineTooltip),disableTooltip:e=>{const t=i().A.state.online,n=e.blocks[0].id,o=(0,h().Bd)(n);return t||o}})}const C=B(!1),P=B(!0);function B(e){return(0,N().Fw)({key:"open side peek",displayName:e?w.openInSidePeekShort:w.openInSidePeek,analyticsName:e?w.openInSidePeekShort.defaultMessage:w.openInSidePeek.defaultMessage,svg:n(177256).A,shortcuts:["openInSidePeek"],validators:[f().v,T,(0,y().A)(g().F),p,(0,y().A)(n(222958).d),(0,y().A)(n(963727).k)],closeParentMenu:!0,action:e=>{var t,i,l;const{route:r}=e.environment.RouterStore.state,d="chat"===r.name,u="agent"===r.name,m="meet"===r.name;let p;"team"===r.name&&(p=r.teamId);if(!((null===(t=o().default.state.mainEditorCurrentBlockStore)||void 0===t?void 0:t.id)||d||u||m||void 0!==p))return;const v=e.blocks[0],g=v.getAliasTargetStore()??v;if(g.table===c().SN)return;const f=v.isInLibraryBlock(),y=null===(i=(0,n(651784).OB)(r))||void 0===i?void 0:i.chatThreadId,k=d?(0,n(172385).EY)({currentRoute:r,pageId:v.id,pageVisitSource:s().y8.AIChat,scrollToBlockId:void 0,isMobile:a().A.isMobile}):u?(0,n(496703).L)({workflowId:r.workflowId,params:{workflowViewType:r.workflowViewType,workflowViewId:r.workflowViewId,workflowPrompt:r.workflowPrompt,chatThreadId:r.chatThreadId,agentChatThreadId:r.agentChatThreadId},peekViewBlockId:v.id,peekModeParam:"s",scrollToBlockId:void 0,pageVisitSource:s().y8.PeekOpen,isMobile:a().A.isMobile}):void 0!==p?(0,n(120739).a)({teamId:p,peekInfo:{peekViewBlockId:v.id,peekMode:"s"},spaceId:null===(l=(0,n(755531).S)())||void 0===l?void 0:l.id}):(0,b().Ay)({store:g,openInSidePeek:!0,peekViewBlockId:g.id,peekMode:"s",pageVisitSource:f?s().y8.LibraryPage:s().y8.PeekOpen,chatThreadId:y});(0,A().navigate)({environment:e.environment,url:k})},disabled:e=>{const t=i().A.state.online,n=e.blocks[0].id,o=(0,h().Bd)(n);return!t&&!o},renderTooltip:()=>l().A.formatMessage(N().AY.unavailableOfflineTooltip),disableTooltip:e=>{const t=i().A.state.online,n=e.blocks[0].id,o=(0,h().Bd)(n);return t||o}})}const F=j(!1),Y=j(!0);function j(e){return(0,N().Fw)({key:"navigate to page in new tab",analyticsName:"Navigate to page in new tab",displayName:e?w.openInNewTabShort:w.openInNewTab,svg:n(955363).arrowDiagonalUpRightIcon,validators:[f().v,T,(0,y().A)(g().F),(0,y().A)(v().I)],shortcuts:["commandShiftEnter"],closeParentMenu:!0,action:({blocks:e,environment:t})=>{const n=e[0].isInLibraryBlock()?s().y8.LibraryPage:s().y8.LinkInPage;if(e[0].isType("alias")){var a;const i=e[0];if(!(null===(a=o().default.state.mainEditorCurrentBlockStore)||void 0===a?void 0:a.id))return;const l=i.getAliasTargetStore()??i;if(l.table===c().SN)return;d().Yf({environment:t,blocks:[l],openInNew:"tab",pageVisitSource:n})}else d().Yf({environment:t,blocks:e,openInNew:"tab",pageVisitSource:n})},disabled:e=>{const t=i().A.state.online,n=e.blocks[0].id,o=(0,h().Bd)(n);return!t&&!o},renderTooltip:()=>l().A.formatMessage(N().AY.unavailableOfflineTooltip),disableTooltip:e=>{const t=i().A.state.online,n=e.blocks[0].id,o=(0,h().Bd)(n);return t||o}})}const R=O(!1);function O(e){return(0,N().Ls)({key:"navigate to page in new window",analyticsName:"Navigate to page in new window",displayName:e?w.openInNewWindowShort:w.openInNewWindow,svg:n(808764).U,validators:[f().v,n(49533)._,n(733637).i,(0,y().A)(n(45214).l),(0,y().A)(g().F),(0,y().A)(v().I)],closeParentMenu:!0,action:({blocks:e,environment:t})=>{d().Yf({environment:t,blocks:e,openInNew:"window",pageVisitSource:s().y8.LinkInPage})},disabled:e=>{const t=i().A.state.online,n=e.blocks[0].id,o=(0,h().Bd)(n);return!t&&!o},renderTooltip:()=>l().A.formatMessage(N().AY.unavailableOfflineTooltip),disableTooltip:e=>{const t=i().A.state.online,n=e.blocks[0].id,o=(0,h().Bd)(n);return t||o}})}const U=[Y,O(!0),x,P],V=[F,R,I,C],L=(0,N().Fw)({key:"go up one page",analyticsName:"Go up one page",displayName:void 0,validators:[k().G],shortcuts:["peekUp"],closeParentMenu:!0,action:()=>u().NQ()}),z=(0,N().Fw)({key:"go down one page",analyticsName:"Go down one page",displayName:void 0,validators:[k().G],shortcuts:["peekDown"],closeParentMenu:!0,action:()=>u().ET()})},440902:(e,t,n)=>{function o(e){return e.blocks&&1===e.blocks.length}n.d(t,{v:()=>o})},443616:(e,t,n)=>{n.d(t,{DX:()=>I,II:()=>T,J1:()=>x,Rw:()=>j,kl:()=>Y,nd:()=>_,qC:()=>C,qW:()=>M});n(581454),n(296540);var o=()=>n(295633),a=()=>n(736847),i=()=>n(100622),l=()=>n(496603),s=()=>n(896628),r=()=>n(906590),c=()=>n(261156),d=()=>n(491073),u=()=>n(418731),m=()=>n(158658),p=()=>n(674065),v=()=>n(393138),g=()=>n(375308),f=()=>n(598101),y=()=>n(27178),k=()=>n(299545),b=()=>n(792609),h=()=>n(77272),A=()=>n(547149),S=()=>n(267271),N=n(474848);const w=(0,n(69708).YK)({lastUsedHighlightTitle:{id:"action.lastUsedHighlight.title",defaultMessage:"Last used"},lastUsedHighlightKeywords:{id:"action.lastUsedHighlight.fuzzySearchKeywords",defaultMessage:"Color last used"},highlightName:{id:"action.highlight.name",defaultMessage:"Highlight"}});function T(e){const{itemRenderer:t}=e;return(0,S().gy)({key:"text color actions",title:S().AY.colorSection,render:e=>(0,N.jsx)(a().A,{...e}),actions:i().N.map((e=>B({blockColor:e,itemRenderer:t})))})}const M=T({itemRenderer:e=>{const{color:t,overrideDisplayName:n,selected:o}=e;return(0,N.jsx)(d().Ay,{...e.menuListItemProps,color:t,overrideDisplayName:n,selected:o})}});function I(e){const{itemRenderer:t}=e;return(0,S().gy)({key:"background color actions",title:S().AY.backgroundSection,overrideSearchTitle:S().AY.backgroundSectionKeywords,render:e=>(0,N.jsx)(a().A,{...e}),actions:i().AQ.map((e=>B({blockColor:e,itemRenderer:t})))})}const x=I({itemRenderer:e=>{const{color:t,overrideDisplayName:n,selected:o}=e;return(0,N.jsx)(d().Ay,{...e.menuListItemProps,color:t,overrideDisplayName:n,selected:o})}}),_=(0,S().gy)({key:"background color selection actions",title:S().AY.backgroundSection,overrideSearchTitle:S().AY.backgroundSectionKeywords,render:e=>(0,N.jsx)(a().A,{...e}),actions:i().AQ.map((e=>F(e)))}),C=(0,S().gy)({key:"text color selection actions",title:S().AY.colorSection,render:e=>(0,N.jsx)(a().A,{...e}),actions:i().N.map((e=>F(e)))});function P(){return[m().p,(0,f().A)(g().v),b().Y,p().M,(0,f().A)(u().C),v().P]}function B(e){const{blockColor:t,overrideKey:n,overrideDisplayName:a,itemRenderer:d}=e,u=a||(0,y().qo)(t),m=(0,S().Ls)({key:`color ${n||t}`,displayName:u,analyticsName:u.defaultMessage,analyticsActionType:"change_block_color",fuzzySearchKeywords:(0,S().Mf)(t),validators:P(),track:{actionName:"set_color"},action:(e,{blocks:n,environment:a},d)=>{r().Q(t);const{serverCommitResult:u}=A().createAndCommit({userAction:"actionRegistry.createBlockColorAction",environment:a,canUndo:!0,perform:e=>{if(1===n.length&&n[0].isFirstBlockInCalloutV2Block()){const e=n[0].getParentStore();e instanceof o().B&&(n=[e])}(0,i().Cg)(t)||(c().Vd({environment:a,annotationKey:"hb",blocks:n,transaction:e}),c().Vd({environment:a,annotationKey:"hf",blocks:n,transaction:e}),s().zA({stores:l().qI(n,(e=>(0,k().zo)({blockStore:e,transclusionReferences:"omit",childPages:"omit"}))),update:{block_color:void 0},transaction:e})),s().zA({stores:n,update:{block_color:t},transaction:e})}});u.then(e)},closeParentMenu:!0,render:(e,{blocks:n})=>{const o=t===(n.length>0?n[0].getFormat().block_color:"default");return d({menuListItemProps:e,color:t,selected:o,overrideDisplayName:m.displayName})},nativeImageReference:({environment:e})=>(0,S().Kg)(e,t,n)});return m}function F(e,t,o){const a=o||(0,y().qo)(e),i=(0,S().Ls)({key:`color ${t||e}`,displayName:a,analyticsName:a.defaultMessage,fuzzySearchKeywords:(0,S().Mf)(e),validators:P(),action:async({blocks:t,environment:o})=>{n(658012).shouldPreserveExistingSelection(o)&&await n(900442).A.clearNativeActionMenuAndRestoreSelectionIfNecessary(),r().Q(e),c().po({environment:o,annotation:["h",e]}),(0,n(21869).s)(o,{action:"h",color:e})},closeParentMenu:!0,render:t=>(0,N.jsx)(d().Ay,{...t,color:e,overrideDisplayName:i.displayName}),nativeImageReference:({environment:n})=>(0,S().Kg)(n,e,t)});return i}const Y=(0,S().gy)({key:"toggle last highlight",title:w.lastUsedHighlightTitle,overrideSearchTitle:w.lastUsedHighlightKeywords,render:e=>(0,N.jsx)(a().A,{...e}),actions:[(0,S().Fw)({key:"toggle highlight action",displayName:w.highlightName,analyticsName:w.highlightName.defaultMessage,validators:P(),shortcuts:["toggleHighlight"],closeParentMenu:!0,track:{actionName:"set_color"},action:(e,{environment:t,blocks:n},o)=>{const a=h().A.getMostRecentlyUsedColor(),{serverCommitResult:i}=A().createAndCommit({userAction:"actionRegistry.toggleLastUsedHighlight",environment:t,canUndo:!0,perform:e=>{const t=l().Si(n.map((e=>{const t=e.getFormat();return t&&t.block_color===a})))?void 0:a;s().zA({stores:n,update:{block_color:t},transaction:e})}});i.then(e)},render:e=>{const t=h().A.getMostRecentlyUsedColor();return(0,N.jsx)(d().Ay,{...e,color:t,shortcuts:["toggleHighlight"]})}})]}),j=(0,n(12956).u)({key:"color section",displayName:S().AY.colorName,analyticsName:S().AY.colorName.defaultMessage,svg:n(933152).M,validators:P(),subActions:()=>[Y,M,x]})},453237:(e,t,n)=>{n.d(t,{a:()=>o});n(18107),n(967357);function o(e){var t;const n=e.blocks.at(0);return Boolean((null==n?void 0:n.isCollectionView())&&((null===(t=n.getCollectionStores())||void 0===t?void 0:t.length)??0)>0)}},460995:(e,t,n)=>{n.d(t,{A:()=>o});n(898992),n(737550);function o(e){return e.blocks.some((e=>e.isCollectionViewPageWithContent()))}},467276:(e,t,n)=>{n.d(t,{p:()=>a});n(898992),n(823215);var o=()=>n(182106);function a(e){return e.blocks.every((e=>{const t=o().A.findOutlinerItemFromStore(e);return Boolean(t&&t.isTopLevelItem&&"shared"===t.type)}))}},491073:(e,t,n)=>{n.d(t,{Ay:()=>p,Kc:()=>u,Nc:()=>d,Yr:()=>c});var o=n(296540),a=()=>n(401497),i=()=>n(81068),l=()=>n(100622),s=()=>n(284371),r=n(474848);function c(e,t){return`inset 0 0 0 ${t?"2px":"1px"} ${e}`}function d(e,t,n){"dark"!==n&&t||"default"!==e&&"default_background"!==e||(e="gray");const o=l().Ld[e];return o?l().Tj[o].border[t?"strong":"primaryTranslucent"]:l().Tj.text.primary}function u(e){const{color:t,selected:n,isHovered:o,overrideStyles:i}=e,u=(0,l().Cg)(t),m=(0,a().eP)(),p=(0,a().DP)(),v=(0,a().IS)((()=>{const e=(0,l().k5)(t,p),a=d(t,n??!1,m);return{icon:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:26,height:26,textAlign:"center",padding:8,margin:0,fontSize:16,borderRadius:6,fontWeight:s().Wy.medium,boxShadow:c(a,n||o),...e,...i}}}),[t,o,i,n,m,p]);return(0,r.jsx)("div",{style:v.icon,"aria-hidden":"true",children:u?"":"A"})}function m(e,t){const s=(0,n(69708).tz)(),[c,d]=(0,o.useState)(!1),{color:m,overrideDisplayName:p,right:v,shortcuts:g,selected:f,shouldShowUpdatedColorPicker:y,desktopTitleStyle:k,iconStyle:b,itemMarginLeft:h,itemMarginRight:A,desktopIconStyle:S,rightStyle:N}=e,w=p||s.formatMessage((0,n(27178).qo)(m)),T=!n(726637).A.isMobile&&g&&g[0],M=(0,a().IS)((()=>y?{tooltipStyle:{display:"inline-block",width:30,padding:0,lineHeight:1},desktopStyleIcon:{position:"absolute"},buttonStyle:{display:"inline-block",width:"100%",height:"100%",margin:0,padding:2,position:"relative"},menuItemStyle:{margin:0,padding:0,gap:0,minHeight:26},disableButtonStyleHoverOrPressed:{background:"transparent"},shortcut:{}}:{shortcut:{color:l().Tj.text.tertiary,fontSize:12,whiteSpace:"nowrap"},tooltipStyle:{},desktopStyleIcon:{},buttonStyle:{},menuItemStyle:{},disableButtonStyleHoverOrPressed:{}}),[y]),I=(0,o.useCallback)((()=>(0,r.jsx)(u,{color:m,selected:f,isHovered:c,overrideStyles:b})),[m,c,f,b]);return y?(0,r.jsx)(n(26697).m,{renderTooltip:()=>(0,r.jsx)("div",{children:w}),render:n=>(0,r.jsx)("div",{style:{...M.tooltipStyle},...n,onMouseEnter:e=>{var t;d(!0),null===(t=n.onMouseEnter)||void 0===t||t.call(n,e)},onMouseLeave:e=>{var t;d(!1),null===(t=n.onMouseLeave)||void 0===t||t.call(n,e)},children:(0,r.jsx)(i().A,{...e,ref:t,icon:I(),style:M.menuItemStyle,itemMarginLeft:h,itemMarginRight:A,hoveredStyle:M.disableButtonStyleHoverOrPressed,pressedStyle:M.disableButtonStyleHoverOrPressed,desktopIconStyle:S||M.desktopStyleIcon,right:v,buttonStyle:M.buttonStyle,desktopTitleStyle:k,rightStyle:N})})}):(0,r.jsx)(i().A,{...e,ref:t,title:w,icon:I(),dontShrinkRight:!0,isChecked:f&&!(v||T),right:v||T&&(0,r.jsx)(n(35392).A,{name:T,style:M.shortcut}),itemMarginLeft:h,itemMarginRight:A,desktopIconStyle:S,desktopTitleStyle:k,rightStyle:N})}const p=o.forwardRef(m)},497952:(e,t,n)=>{n.d(t,{$c:()=>d,hL:()=>c,iR:()=>u});n(898992),n(354520),n(581454);var o=()=>n(179034),a=()=>n(201980),i=()=>n(460957),l=()=>n(718957);const s=40;function r(e){return e.length<=s?e:`${e.slice(0,s).trimEnd()}â€¦`}function c(e){if(e.start.store.pointer.table!==o().ev||e.end.store.pointer.table!==o().ev)return;if(e.start.store.pointer.id===e.end.store.pointer.id&&e.start.store.pointer.spaceId===e.end.store.pointer.spaceId&&e.start.index===e.end.index)return;const t=r((0,i().E)({mode:"editing",multiSelection:e,forceExtendAnnotations:{}}).trim());return t?{type:"text",text:t,start:{id:e.start.store.pointer.id,spaceId:e.start.store.pointer.spaceId,index:e.start.index},end:{id:e.end.store.pointer.id,spaceId:e.end.store.pointer.spaceId,index:e.end.index}}:void 0}function d(e){const t=(0,l().BO)(e);if(!t)return;const n=r((0,i().E)({mode:"editing",multiSelection:t,forceExtendAnnotations:{}}).trim());return n?{type:"blocks",text:n,blocks:e.map((e=>({id:e.pointer.id,spaceId:e.pointer.spaceId})))}:void 0}function u(e){const{currentTextValue:t,data:n,mode:o}=e,i="replaceSameType"===o?function(e){const{textValue:t,kind:n}=e;if(!t||0===t.length)return t;const o=t.filter((e=>{if(!(0,a().qXl)(e))return!0;const t=(0,a().uoE)((0,a().uPN)(e));if(!t)return!0;return(0,a().$sA)(t).type!==n}));return o.length>0?o:void 0}({textValue:t,kind:n.type}):t,l=(0,a().wmz)((0,a().tcA)(n));if("replaceSameType"===o)return[l,(0,a().Ey_)(" "),...i??[]];const s=i??[],r=s[s.length-1],c=void 0===r?"":"string"==typeof r?r:r[0],d=s.length>0&&!/[\s\u00a0]$/.test(c);return[...s,...d?[(0,a().Ey_)(" ")]:[],l,(0,a().Ey_)(" ")]}},557583:(e,t,n)=>{n.d(t,{qV:()=>N,gS:()=>A,KV:()=>h,uK:()=>S});n(898992),n(737550);var o=()=>n(726637),a=()=>n(929219),i=()=>n(675133),l=()=>n(529099),s=()=>n(668346),r=()=>n(555102),c=()=>n(590081),d=()=>n(242422);function u(e,t){return()=>"on"===d().default.getEligibleGroup({experimentId:e,defaultGroup:"control",disableExposureLogging:t})}var m=()=>n(598101);const p={text:!0,bulleted_list:!0,numbered_list:!0,quote:!0,to_do:!0,header:!0,sub_header:!0,sub_sub_header:!0,callout:!0,toggle:!0,table:!0,equation:!0,code:!0,file:!0,pdf:!0,image:!0};var v=()=>n(747674),g=()=>n(907487),f=()=>n(267271);const y=[...g().X,e=>{const{blocks:t}=e;return t.some((t=>{const o=t.getType();return void 0!==o&&(!!(n(383070).zD.isAttachmentUploadEnabledForUser()&&!(0,n(876396).t)(e)||"pdf"!==o&&"file"!==o&&"image"!==o)&&(0,n(534177).O)(p,o))}))}],k=(0,n(69708).YK)({blockSelectionCompletionName:{id:"action.blockSelectionCompletionName.name",defaultMessage:"Ask AI"},openInChatName:{id:"action.openInChat.name",defaultMessage:"Ask AI"},addToChatName:{id:"action.addToChat.name",defaultMessage:"Add to chat"}});async function b(e){const{environment:t,blocks:o}=e,a=await Promise.resolve().then(n.bind(n,650829)),i=await a.assistantDependency.load();if(i.assistantActions.isSelectionValidAttachmentSelection(o)){const e=r().bX.getState();if(!e)return;return void i.agentActions.openAgentSidebarFromAttachmentBlockSelection({environment:t,selectedAttachmentStore:o[0],inferenceContext:e})}const{aiDependency:l}=await Promise.resolve().then(n.bind(n,662453));(await l.load()).completionInitialPromptActions.toggleInitialPrompt({from:"block_action_menu",environment:t})}function h(){const e=(0,s().K)();return(0,f().Fw)({key:"block selection completion",displayName:k.blockSelectionCompletionName,analyticsName:k.blockSelectionCompletionName.defaultMessage,svg:l().aiFaceIcon,shortcuts:e,validators:[...y,(0,m().A)(u("block_action_menu_agent_entrypoint",!0))],hideFromSlashActionMenu:!0,closeParentMenu:!0,action:async(e,t)=>{const{environment:n,blocks:a}=e;o().A.isMobile?window.requestAnimationFrame((()=>{setTimeout((()=>{(0,v().t)({environment:n,stores:a}),b({environment:n,blocks:a})}),0)})):await b({environment:n,blocks:a})},disabled:()=>!a().A.state.online,renderTooltip:()=>i().A.formatMessage(f().AY.unavailableOfflineTooltip),disableTooltip:()=>a().A.state.online})}function A(){const e=(0,s().K)();return(0,f().Fw)({key:"ai prompt menu",analyticsName:"ai_prompt_menu",displayName:void 0,validators:[...g().X,c().O],shortcuts:e,closeParentMenu:!0,action:async({environment:e})=>{const{aiDependency:t}=await Promise.resolve().then(n.bind(n,662453));(await t.load()).completionInitialPromptActions.toggleInitialPrompt({from:"keyboard_shortcut",environment:e})}})}const S=(0,f().Fw)({key:"open in chat",displayName:k.openInChatName,analyticsName:k.openInChatName.defaultMessage,svg:l().aiFaceIcon,validators:[...g().X,u("block_action_menu_agent_entrypoint",!0)],closeParentMenu:!0,shortcuts:["commandJ"],action:({environment:e,blocks:t})=>{const o=t[0];o&&(0,n(703748).openChatPanel)({environment:e,store:o,chatPanelState:{isOpen:!0},source:"block_action_menu"})},disabled:()=>!a().A.state.online,renderTooltip:()=>i().A.formatMessage(f().AY.unavailableOfflineTooltip),disableTooltip:()=>a().A.state.online}),N=(0,f().Ls)({key:"add to chat (block selection)",displayName:k.addToChatName,analyticsName:k.addToChatName.defaultMessage,svg:n(383567).F,validators:[...g().X,()=>(0,n(822789).hw)()],closeParentMenu:!0,hideFromSlashActionMenu:!0,action:({environment:e,blocks:t})=>{const o=t[0];(0,n(262559).c)({environment:e,selectedBlocks:t,chatPanelStore:o,source:"block_action_menu"})},disabled:()=>!a().A.state.online,renderTooltip:()=>i().A.formatMessage(f().AY.unavailableOfflineTooltip),disableTooltip:()=>a().A.state.online})},571157:(e,t,n)=>{n.d(t,{i:()=>i});n(18107),n(967357),n(898992),n(823215);var o=()=>n(598101);const a=(0,n(69708).YK)({fullScreenName:{id:"action.fullScreen.name",defaultMessage:"Full screen"}}),i=(0,n(267271).Fw)({key:"full screen",displayName:a.fullScreenName,analyticsName:a.fullScreenName.defaultMessage,svg:n(261403).R,validators:[n(440902).v,n(306113).I,function(e){return e.blocks.every((e=>{const t=n(129522).K.findBlockFromStoreWithMethod(e,"canRenderFullScreen");return Boolean(t&&t.canRenderFullScreen())}))},(0,o().A)(n(664767).c),(0,o().A)(n(918871).w)],shortcuts:["space"],closeParentMenu:!0,track:{actionName:"full_screen"},action:(e,{environment:t,blocks:o},a)=>{const i=o.at(0);i&&n(391214).iy({environment:t,blockStore:i,callback:e})}})},590081:(e,t,n)=>{n.d(t,{O:()=>a});n(898992),n(823215);var o=()=>n(700500);function a(e){return e.blocks.every((e=>{const t=e.getType(),n=e.getFormat();return(0,o().dY)(t,n)}))}},599364:(e,t,n)=>{n.d(t,{k:()=>p,o:()=>m});var o=()=>n(165358),a=()=>n(742852),i=()=>n(231536),l=()=>n(514779),s=()=>n(395763),r=()=>n(49533),c=()=>n(440902),d=()=>n(598101),u=()=>n(267271);const m=(0,u().Ls)({key:"copy link to page",displayName:u().AY.copyLinkNavigableTypeName,analyticsName:u().AY.copyLinkNavigableTypeName.defaultMessage,svg:a().linkIcon,validators:[l().M,c().v,r()._,(0,d().A)(s().i),(0,d().A)(n(339425).o)],closeParentMenu:!0,track:{actionName:"copy_block_link"},lazyDependencyKeys:["clipboardActions"],action:(e,{environment:t,blocks:n},a)=>{const l=(0,i().Y)("clipboardActions");l?l.copyLinkToBlock({environment:t,blockStore:n[0],callback:e}):o().log({data:{miscDataToConvertToString:{actionKey:"copy link to page"}},from:"copyActionRegistry",level:"info",type:"lazyDependencies:missingClipboardActions"})}}),p=(0,u().Fw)({key:"copy link to block",displayName:u().AY.copyLinkName,analyticsName:u().AY.copyLinkName.defaultMessage,svg:a().linkIcon,shortcuts:["copyLinkToBlock"],validators:[l().M,c().v,(0,d().A)(r()._),(0,d().A)(s().i),(0,d().A)(n(871306).b),(0,d().A)(n(416433).I)],closeParentMenu:!0,track:{actionName:"copy_block_link"},lazyDependencyKeys:["clipboardActions"],action:(e,{environment:t,blocks:n},a)=>{const l=(0,i().Y)("clipboardActions");l?l.copyLinkToBlock({environment:t,blockStore:n[0],callback:e}):o().log({data:{miscDataToConvertToString:{actionKey:"copy link to block"}},from:"copyActionRegistry",level:"info",type:"lazyDependencies:missingClipboardActions"})}})},606376:(e,t,n)=>{n.d(t,{l:()=>o});n(898992),n(737550);function o(e){return e.blocks.length>0&&e.blocks.some((e=>e.isLocked()))}},609256:(e,t,n)=>{function o(e){if(!e)return!1;const t=e.getFormat();if(!t)return!1;const n=t.marketplace_listing_id;return!!n&&n.length>0}n.d(t,{d:()=>o})},611357:(e,t,n)=>{n.d(t,{Lc:()=>v,Zm:()=>p});var o=()=>n(663640),a=(n(898992),n(672577),()=>n(700500)),i=()=>n(129522),l=()=>n(840790);async function s(e){const{environment:t,store:o,callback:s}=e;if(!o.isType(a().J8))throw new(n(416845).yI4)("Unknown transclusion type");const r=o.getRecordStoreUIParent();if(!r||!(0,n(299545).iU)(r))return;const c="transclusion_reference"===o.getType()?o.getTransclusionReferenceTargetStore():o;if(!c)return;const d=function(e){return i().K.find((t=>t.getBlockStore()===e))}(c);if(!d)return;const u="transclusion_container"===o.getType()?d.confirmUnsyncTransclusionContainer:d.confirmUnsyncTransclusionReference,m=await u();if(o.isType("transclusion_container")){const e=(0,n(900967).Ju)(o,t);(0,n(564884).u)({environment:t,event:{eventName:"unsync_transclusion_block",eventProperties:{confirmed:m,is_delete:!1,num_backlinks:e.backlinksCount+e.inaccessibleBacklinkCount}}})}if(!m)return void(null==s||s());const p=(0,n(357625).UT)(t,n(526088).K,{block:{id:o.pointer.id,spaceId:o.getSpaceId()}},{spaceIds:[]});"transclusion_reference"===o.getType()&&l().A.addUnsyncingBlockId(o.id);for await(const a of p)n(973647).Q.isSuccess(a)&&("started"===a.value.status||"succeeded"===a.value.status?null==s||s():"failed"===a.value.status?l().A.removeUnsyncingBlockId(o.id):(0,n(534177).HB)(a.value.status))}var r=()=>n(158658),c=(n(18107),n(967357),()=>n(715142));var d=()=>n(440902),u=()=>n(267271);const m=(0,n(69708).YK)({unsyncTransclusionReferenceName:{id:"action.unsyncTransclusionReference.name",defaultMessage:"Unsync"},unsyncTransclusionReferenceFuzzySearch:{id:"action.unsyncTransclusionReference.fuzzySearchKeywords",defaultMessage:"Unsync ungroup"},unsyncTransclusionContainerName:{id:"action.unsyncTransclusionContainerName.name",defaultMessage:"Unsync all"},unsyncTransclusionContainerFuzzySearch:{id:"action.unsyncTransclusionContainer.fuzzySearchKeywords",defaultMessage:"Unsync all ungroup"}}),p=(0,u().Fw)({key:"unsyncTransclusionReference",displayName:m.unsyncTransclusionReferenceName,analyticsName:m.unsyncTransclusionReferenceName.defaultMessage,fuzzySearchKeywords:m.unsyncTransclusionReferenceFuzzySearch,svg:o().i,validators:[r().p,function(e){if(e.blocks){const t=e.blocks.at(0);if(!t)return!1;if(t.pathIsDead())return!1;if((0,c().dL)(t))return!1;if(t.getType()===a().xd.transclusionReference){const e=t.getTransclusionReferenceTargetStore();return Boolean(e&&e.canEdit())}return!1}return!1},d().v],shortcuts:["ungroup"],closeParentMenu:!0,track:{actionName:"unsync_transclusion_reference"},action:(e,{environment:t,blocks:n},o)=>{s({environment:t,store:n[0],callback:e})}}),v=(0,u().Fw)({key:"unsyncTransclusionContainer",displayName:m.unsyncTransclusionContainerName,analyticsName:m.unsyncTransclusionContainerName.defaultMessage,fuzzySearchKeywords:m.unsyncTransclusionContainerFuzzySearch,svg:o().i,validators:[r().p,function(e){if(e.blocks){const t=e.blocks.at(0);return!!t&&(!t.pathIsDead()&&(!(0,c().dL)(t)&&t.getType()===a().xd.transclusionContainer))}return!1},d().v],shortcuts:["ungroup"],closeParentMenu:!0,track:{actionName:"unsync_transclusion_container"},action:(e,{environment:t,blocks:n},o)=>{s({environment:t,store:n[0],callback:e})}})},638616:(e,t,n)=>{n.d(t,{W:()=>a});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"2.12 3.72 15.76 12.16",directional:!0,svg:(0,n(474848).jsx)("path",{d:"M3.375 12A2.625 2.625 0 0 0 6 14.625h1.42a.625.625 0 1 1 0 1.25H6a3.875 3.875 0 0 1 0-7.75h9.741l-3.333-3.333a.625.625 0 0 1 .884-.884l4.4 4.4a.625.625 0 0 1 0 .884l-4.4 4.4a.625.625 0 0 1-.884-.884l3.333-3.333H6A2.625 2.625 0 0 0 3.375 12"})},a=(0,n(340498).wt)("arrowUTurnUpRight",o,"default")},663640:(e,t,n)=>{n.d(t,{i:()=>a});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"0.12 2.37 19.76 15.26",svg:(0,n(474848).jsx)("path",{d:"m4.897 3.085-.122-.142a.625.625 0 1 0-.95.814l.755.88A7.6 7.6 0 0 0 2.375 10v1.151L1.188 9.964a.625.625 0 1 0-.884.884l2.254 2.254c.244.244.64.244.884 0l2.254-2.254a.625.625 0 1 0-.884-.884l-1.187 1.187V10a6.35 6.35 0 0 1 1.772-4.41l8.258 9.634A6.35 6.35 0 0 1 10 16.375a6.35 6.35 0 0 1-4.338-1.703.625.625 0 0 0-.85.915A7.6 7.6 0 0 0 10 17.626a7.6 7.6 0 0 0 4.472-1.448l.754.88a.625.625 0 0 0 1.041-.67L4.989 3.228a.6.6 0 0 1-.093-.144M16.22 14.411A7.6 7.6 0 0 0 17.625 10V8.849l1.187 1.187a.625.625 0 1 0 .884-.884l-2.254-2.254a.625.625 0 0 0-.884 0l-2.254 2.254a.625.625 0 1 0 .884.884l1.187-1.187V10a6.35 6.35 0 0 1-.998 3.427zM7.435 4.162A6.35 6.35 0 0 1 10 3.625c1.676 0 3.2.646 4.338 1.703a.625.625 0 1 0 .85-.916A7.6 7.6 0 0 0 10 2.375a7.6 7.6 0 0 0-3.409.802z"})},a=(0,n(340498).wt)("arrowCircleLoopSlash",o,"default")},664767:(e,t,n)=>{n.d(t,{c:()=>a});var o=()=>n(232615);function a(){return"editing"===o().default.state.mode}},674065:(e,t,n)=>{n.d(t,{M:()=>i});n(898992),n(823215);var o=()=>n(700500),a=()=>n(519831);function i(e){return e.blocks.every((e=>{const t=null==e?void 0:e.getModel();return Boolean((null==t?void 0:t.isType(o().hc))&&e.getParentTable()!==a().Vl)}))}},730107:(e,t,n)=>{n.d(t,{I:()=>a});var o=()=>n(726637);function a(){return!o().A.isMobile}},733637:(e,t,n)=>{function o({environment:{device:e}}){return e.isNative}n.d(t,{i:()=>o})},747135:(e,t,n)=>{n.d(t,{F:()=>s});var o=()=>n(907258),a=()=>n(878423),i=()=>n(712505),l=()=>n(342);function s(){var e;const t=i().default.state,n=t.open?t.targetStore:o().default.state.mainEditorCurrentBlockStore,s=null===(e=a().A.state.caches[l().oB])||void 0===e?void 0:e.inMemoryRecordCache;return s?null==n?void 0:n.clone(s):n}},772186:(e,t,n)=>{function o(e){return e.blocks&&e.blocks.length>1}n.d(t,{F:()=>o})},774411:(e,t,n)=>{n.d(t,{kl:()=>R,nK:()=>F,yj:()=>Y,lb:()=>L,J8:()=>V,TR:()=>j,As:()=>B});n(296540);var o=()=>n(929219),a=()=>n(675133),i=()=>n(736847),l=()=>n(764781),s=()=>n(855801),r=()=>n(213477),c=()=>n(574357),d=()=>n(776594),u=()=>n(418731),m=()=>n(467276),p=()=>n(158658),v=()=>n(116057),g=()=>n(30549),f=()=>n(9402),y=()=>n(460995),k=()=>n(339425),b=()=>n(333799),h=()=>n(333344),A=()=>n(375308);function S(e){return!(0,n(73330).z)(e)}var N=()=>n(49533),w=()=>n(440902),T=()=>n(453237),M=()=>n(598101),I=()=>n(422155),x=()=>n(957763),_=()=>n(12956),C=()=>n(267271),P=n(474848);const B=(0,C().Fw)({key:"duplicate",displayName:C().AY.duplicateName,analyticsName:C().AY.duplicateName.defaultMessage,svg:l().V,validators:[C().om,(0,M().A)(d().x),(0,M().A)(m().p),(0,M().A)(n(467294).P),(0,I().or)([u().C,(0,M().A)(A().v)]),(0,I().or)([(0,M().A)(T().a),y().A]),(0,M().A)(n(745658).r),...C().uo],shortcuts:["duplicate"],closeParentMenu:!0,track:{actionName:"duplicate"},action:async(e,{blocks:t,environment:n},o)=>{const a=await s().VI.selectableBlockActions.load();await a.duplicateBlocksWithMaybeConfirmation({environment:n,blocks:t,event:o,callback:e,from:"duplicate.to_selection"})},disabled:()=>!o().A.state.online,renderTooltip:()=>a().A.formatMessage(C().AY.unavailableOfflineTooltip),disableTooltip:()=>o().A.state.online}),F=(0,_().u)({key:"duplicateCollection",displayName:C().AY.duplicateName,analyticsName:C().AY.duplicateName.defaultMessage,svg:l().V,width:275,validators:[n(125591).e,(0,M().A)(d().x),(0,M().A)(m().p),(0,I().or)([u().C,(0,M().A)(A().v)]),(0,c().U)([T().a,(0,M().A)(y().A)]),(0,M().A)(b().Q),...C().uo],subActions:()=>[{key:"collection duplication options",render:e=>(0,P.jsx)(i().A,{...e}),actions:Y.actions}]}),Y=(0,C().gy)({key:"duplicate collection actions",title:C().AY.duplicateName,render:e=>(0,P.jsx)(i().A,{...e}),actions:[(0,C().Fw)({key:"duplicate with data",displayName:C().AY.duplicateCollectionWithDataName,analyticsName:"duplicate_with_data",validators:[(0,M().A)(f().P),(0,M().A)(A().v),...C().uo],shortcuts:["duplicate"],closeParentMenu:!0,track:{actionName:"duplicate"},action:async(e,{blocks:t,environment:n},o)=>{const a=await s().VI.selectableBlockActions.load();await a.duplicateBlocksWithMaybeConfirmation({environment:n,blocks:t,duplicateOnlyCollectionSchema:!1,event:o,callback:e,from:"duplicate.to_selection.collection_with_data"})},disabled:()=>!o().A.state.online,renderTooltip:()=>a().A.formatMessage(C().AY.unavailableOfflineTooltip),disableTooltip:()=>o().A.state.online}),(0,C().Fw)({key:"duplicate schema only",displayName:C().AY.duplicateCollectionSchemaOnlyName,analyticsName:"duplicate_schema_only",validators:[(0,M().A)(f().P),(0,M().A)(A().v),...C().uo],shortcuts:["duplicateSchema"],closeParentMenu:!0,track:{actionName:"duplicate"},action:async(e,{blocks:t,environment:n},o)=>{const a=await s().VI.selectableBlockActions.load();await a.duplicateBlocksWithMaybeConfirmation({environment:n,blocks:t,duplicateOnlyCollectionSchema:!0,event:o,callback:e,from:"duplicate.to_selection.collection_schema_only"})},disabled:()=>!o().A.state.online,renderTooltip:()=>a().A.formatMessage(C().AY.unavailableOfflineTooltip),disableTooltip:()=>o().A.state.online})]}),j=(0,C().Fw)({key:"duplicate",displayName:C().AY.duplicateName,analyticsName:C().AY.duplicateName.defaultMessage,svg:l().V,validators:[w().v,v().M,(0,I().or)([(0,M().A)(g().G),n(787281).U]),(0,I().or)([(0,M().A)(T().a),y().A]),...C().uo,(0,M().A)(k().o),(0,M().A)(n(10462).Z)],shortcuts:["duplicate"],closeParentMenu:!0,track:{actionName:"duplicate"},action:(e,{blocks:t,environment:n,pageContext:o},a)=>{D({environment:n,blocks:t,from:"fork_page.to_parent",options:{callback:e,isCollectionDuplication:!1},pageContext:o})},disabled:()=>!o().A.state.online,renderTooltip:()=>a().A.formatMessage(C().AY.unavailableOfflineTooltip),disableTooltip:()=>o().A.state.online}),R=(0,_().u)({key:"duplicateCollection",displayName:C().AY.duplicateName,analyticsName:C().AY.duplicateName.defaultMessage,svg:l().V,width:275,validators:[w().v,v().M,(0,M().A)(b().Q),(0,c().U)([T().a,(0,M().A)(y().A)]),...C().uo],subActions:()=>[{key:"collection duplication options",render:e=>(0,P.jsx)(i().A,{...e}),actions:O.actions}]}),O=(0,C().gy)({key:"duplicate collection actions",title:C().AY.duplicateName,render:e=>(0,P.jsx)(i().A,{...e}),actions:[(0,C().Fw)({key:"duplicate with data",displayName:C().AY.duplicateCollectionWithDataName,analyticsName:"duplicate_with_data",validators:[(0,M().A)(f().P)],shortcuts:["duplicate"],closeParentMenu:!0,track:{actionName:"duplicate"},action:(e,{blocks:t,environment:n,pageContext:o},a)=>{D({environment:n,blocks:t,from:"fork_page.to_parent.collection_with_data",options:{duplicateOnlyCollectionSchema:!1,isCollectionDuplication:!0,callback:e},pageContext:o})},disabled:()=>!o().A.state.online,renderTooltip:()=>a().A.formatMessage(C().AY.unavailableOfflineTooltip),disableTooltip:()=>o().A.state.online}),(0,C().Fw)({key:"duplicate schema only",displayName:C().AY.duplicateCollectionSchemaOnlyName,analyticsName:"duplicate_schema_only",validators:[(0,M().A)(f().P)],shortcuts:["duplicateSchema"],closeParentMenu:!0,track:{actionName:"duplicate"},action:(e,{blocks:t,environment:n,pageContext:o},a)=>{D({environment:n,blocks:t,from:"fork_page.to_parent.collection_schema_only",options:{duplicateOnlyCollectionSchema:!0,isCollectionDuplication:!0,callback:e},pageContext:o})},disabled:()=>!o().A.state.online,renderTooltip:()=>a().A.formatMessage(C().AY.unavailableOfflineTooltip),disableTooltip:()=>o().A.state.online})]}),U=(0,I().or)([(0,c().U)([g().G,C().fp]),(0,c().U)([(0,M().A)(g().G),v().M])]),V=(0,C().Ls)({key:"duplicate into private",displayName:C().AY.duplicateToPrivateName,analyticsName:C().AY.duplicateToPrivateName.defaultMessage,svg:l().V,validators:[(0,M().A)(d().x),N()._,p().p,(0,M().A)(h().P),(0,I().or)([m().p,(0,M().A)(U),S]),(0,I().or)([(0,M().A)(T().a),y().A]),(0,M().A)(k().o)],closeParentMenu:!0,action:async({blocks:e,environment:t},n)=>{await K({environment:t,blocks:e,from:"fork_page.to_private",options:{isCollectionDuplication:!1}})},disabled:()=>!o().A.state.online,renderTooltip:()=>a().A.formatMessage(C().AY.unavailableOfflineTooltip),disableTooltip:()=>o().A.state.online}),L=(0,_().u)({key:"duplicate collection to private",displayName:C().AY.duplicateToPrivateName,analyticsName:C().AY.duplicateToPrivateName.defaultMessage,svg:l().V,width:275,validators:[(0,M().A)(d().x),N()._,p().p,(0,M().A)(h().P),(0,I().or)([m().p,(0,M().A)(v().M),S]),(0,c().U)([T().a,(0,M().A)(y().A)]),(0,M().A)(k().o)],subActions:()=>[{key:"collection duplication options",render:e=>(0,P.jsx)(i().A,{...e}),actions:z.actions}]}),z=(0,C().gy)({key:"duplicate collection to private actions",title:C().AY.duplicateName,render:e=>(0,P.jsx)(i().A,{...e}),actions:[(0,C().Ls)({key:"duplicate with data",displayName:C().AY.duplicateCollectionWithDataName,analyticsName:"duplicate_with_data",validators:[],closeParentMenu:!0,action:async({blocks:e,environment:t,pageContext:n})=>{await K({environment:t,blocks:e,from:"fork_page.to_private.collection_with_data",options:{duplicateOnlyCollectionSchema:!1,isCollectionDuplication:!0}})},disabled:()=>!o().A.state.online,renderTooltip:()=>a().A.formatMessage(C().AY.unavailableOfflineTooltip),disableTooltip:()=>o().A.state.online}),(0,C().Ls)({key:"duplicate schema only",displayName:C().AY.duplicateCollectionSchemaOnlyName,analyticsName:"duplicate_schema_only",validators:[],closeParentMenu:!0,action:async({blocks:e,environment:t,pageContext:n})=>{await K({environment:t,blocks:e,from:"fork_page.to_private.collection_schema_only",options:{duplicateOnlyCollectionSchema:!0,isCollectionDuplication:!0}})},disabled:()=>!o().A.state.online,renderTooltip:()=>a().A.formatMessage(C().AY.unavailableOfflineTooltip),disableTooltip:()=>o().A.state.online})]});function D(e){const{environment:t,blocks:o,options:a,pageContext:i,from:l}=e;if(!(0,x().E)(t,(0,n(876338).$)(i)))return;const s=o[0].getParentStore();"block"!==(null==s?void 0:s.table)&&"team"!==(null==s?void 0:s.table)&&"space"!==(null==s?void 0:s.table)||(0,r().hh)({environment:t,sourceBlocks:o,destination:(0,n(966152).LT)(s),from:l,options:{duplicateOnlyCollectionSchema:null==a?void 0:a.duplicateOnlyCollectionSchema,addCopyName:!0,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0},navigateToTarget:!0,skipUserFacingMessages:!1,duplicateSubtreeGateName:null!=a&&a.isCollectionDuplication?"duplicate_subtree_collection_flows":"duplicate_subtree_basic_flows"}).then((e=>{var t;n(973647).Q.isSuccess(e)&&(null==a||null===(t=a.callback)||void 0===t||t.call(a))}))}async function K(e){const{environment:t,blocks:o,from:a,options:i}=e,l=(0,n(755531).S)();if(!(0,x().E)(t,l))return;const s=n(907258).default.state.sidebarSpaceViewStore;l&&s&&await(0,r().hh)({environment:t,sourceBlocks:o,destination:{type:"space",parent:(0,n(96689).n2)(l.id)},from:a,options:{duplicateOnlyCollectionSchema:null==i?void 0:i.duplicateOnlyCollectionSchema,addCopyName:!1,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0},navigateToTarget:!0,skipUserFacingMessages:!1,duplicateSubtreeGateName:null!=i&&i.isCollectionDuplication?"duplicate_subtree_collection_flows":"duplicate_subtree_basic_flows"})}},775584:(e,t,n)=>{n.d(t,{F:()=>a});var o=()=>n(726637);function a(){return o().A.isMobile}},776594:(e,t,n)=>{n.d(t,{x:()=>a});n(898992),n(823215);var o=()=>n(182106);function a(e){return e.blocks.every((e=>{const t=o().A.findOutlinerItemFromStore(e);return Boolean(t&&t.isTopLevelItem&&"bookmarks"===t.type)}))}},781286:(e,t,n)=>{n.d(t,{J6:()=>c,PA:()=>u,Uc:()=>d,hv:()=>r});var o=()=>n(896628),a=()=>n(129522),i=()=>n(295304),l=()=>n(547149),s=()=>n(958163);function r(e){const{store:t}=e,n=t.getImageHyperlink()||"",o="placeholder"!==n?n:void 0,i=a().K.getRect(t);s().A.setState({open:!0,url:"",type:"image",selectionRect:i,store:t,imageHyperlink:o,focusLinkInput:!0,trapFocus:!0})}function c(){s().A.setState({open:!1,type:"image"})}function d(e){const{url:t,transaction:n}=e,a=s().A.state;if(!a.open)return;const l=i().bS(t);o().zA({stores:[a.store],update:{image_hyperlink:l},transaction:n}),s().A.setState({...a,imageHyperlink:l,url:""})}function u(e){const t=s().A.state;t.open&&(l().createAndCommit({userAction:"imageHyperlink.unlinkImage",environment:e,canUndo:!0,perform:e=>{o().zA({stores:[t.store],update:{image_hyperlink:null},transaction:e})}}),s().A.reset())}},787281:(e,t,n)=>{n.d(t,{U:()=>o});n(898992),n(737550);function o(e){return e.blocks.some((e=>e.isAssociatedCollectionAPageTree()))}},808764:(e,t,n)=>{n.d(t,{U:()=>a});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"2.37 4.12 15.25 11.75",svg:(0,n(474848).jsx)("path",{d:"M2.375 6.25c0-1.174.951-2.125 2.125-2.125h11c1.174 0 2.125.951 2.125 2.125v7.5a2.125 2.125 0 0 1-2.125 2.125h-11a2.125 2.125 0 0 1-2.125-2.125zm1.25 7.5c0 .483.392.875.875.875h11a.875.875 0 0 0 .875-.875V7.5H3.625zm1.008-7.316a.625.625 0 1 0 0-1.25.625.625 0 0 0 0 1.25m2.625-.625a.625.625 0 1 0-1.25 0 .625.625 0 0 0 1.25 0m1.375.625a.625.625 0 1 0 0-1.25.625.625 0 0 0 0 1.25"})},a=(0,n(340498).wt)("browser",o,"default")},809210:(e,t,n)=>{n.d(t,{f:()=>a});n(18107),n(967357);var o=()=>n(733539);function a(){return Boolean(o().default.state.redoStack.at(-1))}},843005:(e,t,n)=>{n.d(t,{c5:()=>R,kR:()=>P,sp:()=>j,DZ:()=>x,t3:()=>B});n(18107),n(967357),n(581454),n(296540);var o=()=>n(736847),a=()=>n(700500),i=()=>n(496603),l=()=>n(534177),s=()=>n(938346),r=()=>n(79926);const c=new(r().O2)("NewPageInMenu",(async()=>Promise.all([n.e(75134),n.e(35530),n.e(9773),n.e(36556),n.e(55373),n.e(36192),n.e(40537),n.e(71562),n.e(96346),n.e(44711),n.e(53321),n.e(51220),n.e(16471),n.e(37353),n.e(37571),n.e(29151),n.e(40118),n.e(50397),n.e(27992),n.e(63452),n.e(66249),n.e(92845),n.e(87249),n.e(79022),n.e(44854),n.e(87017),n.e(34877),n.e(46414),n.e(11676),n.e(61165),n.e(47668),n.e(94522),n.e(44584),n.e(24587),n.e(67494),n.e(3651),n.e(38293),n.e(40992),n.e(88455),n.e(64556),n.e(33893),n.e(91793),n.e(55162),n.e(71003),n.e(32370),n.e(26264),n.e(36437),n.e(50363),n.e(42660),n.e(44590),n.e(55113),n.e(85071),n.e(7914),n.e(25588),n.e(68637),n.e(23640),n.e(72252),n.e(93134),n.e(12452),n.e(52871),n.e(29351),n.e(18825),n.e(71853),n.e(93049),n.e(22582),n.e(18636),n.e(87289),n.e(16060),n.e(34281),n.e(48376),n.e(35279),n.e(80229),n.e(77754),n.e(71309),n.e(74562),n.e(47431),n.e(37384),n.e(13955),n.e(49021),n.e(17729),n.e(45147),n.e(6039),n.e(51761),n.e(13023),n.e(51224),n.e(20592),n.e(43288),n.e(57418),n.e(90609),n.e(31106),n.e(63248),n.e(67728),n.e(88089),n.e(4908),n.e(59264),n.e(31835),n.e(31061)]).then(n.bind(n,141486)))),d=(0,r().jQ)(c,(e=>e.default));var u=()=>n(855801),m=()=>n(574357),p=()=>n(409076),v=()=>n(158658),g=()=>n(664767),f=()=>n(730386),y=()=>n(633207),k=()=>n(772186),b=()=>n(517947),h=()=>n(598101),A=()=>n(471083),S=()=>n(792609),N=()=>n(202786),w=()=>n(547149),T=()=>n(267271),M=n(474848);const I={column_list:!0,transclusion_container:!0},x=(0,n(69708).YK)({turnIntoSection:{id:"action.section.turnInto",defaultMessage:"Turn into"},newPageInName:{id:"action.pageIn.name",defaultMessage:"Page in"},turnIntoMention:{id:"action.turnIntoMention",defaultMessage:"Turn into mention"}}),_=(0,T().Ls)({key:"new page in section",displayName:x.newPageInName,analyticsName:x.newPageInName.defaultMessage,closeParentMenu:!0,svg:n(177148).Y,hideFromSlashActionMenu:!0,validators:[v().p,(0,h().A)(n(375308).v),(0,h().A)((0,n(419286).X)("page")),(0,h().A)(n(918871).w),S().Y,p().p],render:(e,t,n)=>{const{onFocus:o,onAccept:a,extendItemTitle:i,sectionTitle:l}=n;return(0,M.jsx)(d,{...e,title:x.newPageInName,sectionTitle:l??"",showSectionTitle:Boolean(i),blocksToTransform:t.blocks,onFocus:o,onAccept:a?()=>a(_,t,void 0):void 0})},action:e=>{}});function C(){const e=(0,l().uv)(a().Si),t=e.findIndex((e=>"page"===e)),n=e.map((e=>F(e))),o=Object.values(a().sh).map((e=>F(e)));return[...n.slice(0,t+1),_,...n.slice(t+1),...o]}function P(){return(0,T().gy)({key:"turn into actions",title:x.turnIntoSection,render:e=>(0,M.jsx)(o().A,{...e}),actions:C()})}const B=P();function F(e){const t=A().ry[e],n=I[e];return{key:`turn into ${e}`,displayName:t.displayName,analyticsName:t.analyticsName,analyticsActionType:"turn_block_into",searchName:t.searchName,validators:i().oE([v().p,n?void 0:p().p,S().Y,"transclusion_container"===e?(0,m().U)([(0,h().A)(y().u),Y]):void 0,"slide"===e?b().Q:void 0,"header_4"===e||"toggle_format_header_4_block"===e?f().n:void 0,(0,a().ZK)(e)?e=>1===e.blocks.length:void 0,(0,a().nH)(e)?e=>!1:void 0,"column_list"===e?e=>{if(!e.blocks)return!1;const t=e.blocks.length;if(t<2||t>5)return!1;const n=e.blocks[0].getParentBlockStore();if(!n)return!1;const o=e.blocks.map((e=>{const t=e.getParentBlockStore();return(null==t?void 0:t.id)!==n.id?-1:n.getRenderableContentIds().indexOf(e.id)}));for(let a=0;a<o.length;a++)if(a>0&&o[a-1]+1!==o[a])return!1;return!0}:void 0,(0,a().D)(e)?()=>!0:void 0,"mermaid_code_block"===e?()=>!1:void 0]),shortcuts:"transclusion_container"===e?["group"]:void 0,closeParentMenu:!0,action:(0,T().G9)("turn_into",(async(t,{environment:n,blocks:o})=>{const a=await(0,u().zQ)(),{serverCommitResult:i}=w().createAndCommit({userAction:`actionRegistry.turnIntoAction.${e}`,environment:n,canUndo:!0,perform:t=>{a({environment:n,blocks:o,blockType:e,transaction:t})}});i.then(t)})),render:(e,n,o)=>{const{extendItemTitle:a,sectionTitle:i,styles:l}=o,r=j(n,t);return(0,M.jsx)(s().Ay,{...e,...t,title:t.displayName,format:s().og.TurnInto,selected:r,showSectionTitle:Boolean(a),sectionTitle:i??"",desktopTitleStyle:null==l?void 0:l.desktopTitleStyle})},nativeImageReference:()=>(0,T().eW)({thumbnail:t.mobileNativeThumbnail?t.mobileNativeThumbnail():t.thumbnail})}}function Y(e){return!(0,N().T)()||(0,g().c)()&&(0,k().F)(e)}function j(e,t){const n=e.blocks[0];if(!n)return!1;if(n.getType()!==t.blockType)return!1;if((0,a().CN)(t.blockType)){return(n.getFormat().toggleable??!1)===t.key.includes("toggle")}return!0}const R=(0,T().Ls)({key:"turn to mention",displayName:x.turnIntoMention,analyticsName:x.turnIntoMention.defaultMessage,validators:[v().p,n(871306).b],closeParentMenu:!0,svg:n(3284).arrowSquarePathUpDownIcon,action:({blocks:e,environment:t})=>{const o=e.at(0);null!=o&&o.isType(a().xd.alias)&&n(62287).Ff(t,o)}})},859398:(e,t,n)=>{n.d(t,{$:()=>s});n(898992),n(823215);var o=()=>n(440375),a=()=>n(715142),i=()=>n(507395),l=()=>n(411960);function s(e){if(o().l.state)return!1;if((0,i().q)())return!1;if(e.publicEditMode){const t=e.publicEditMode.permission;return"edit"===t||"comment"===t}return!(0,l().P)(e)&&e.blocks.every((e=>!e.pathIsDead()&&(!(0,a().dL)(e)&&e.canComment())))}},868673:(e,t,n)=>{n.d(t,{a:()=>i});n(18107),n(967357);var o=()=>n(747100),a=()=>n(712505);function i(e){var t;const n=e.blocks.at(0);return Boolean(o().Gb()&&(null==n?void 0:n.id)===(null===(t=a().default.peekTargetStore.state)||void 0===t?void 0:t.id))}},871306:(e,t,n)=>{n.d(t,{b:()=>a});n(18107),n(967357);var o=()=>n(348895);function a(e){const t=e.blocks.at(0);return(0,o().m)(t)}},876396:(e,t,n)=>{function o({environment:{device:e}}){return e.isPhone}n.d(t,{t:()=>o})},893306:(e,t,n)=>{n.d(t,{N:()=>g,S:()=>f});n(18107),n(967357),n(296540);var o=n(474848);const a={viewBox:"0 0 20 20",fittedViewBox:"2.5 2.5 15.5 15.5",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M10.61 3.61a3.776 3.776 0 0 1 5.34 0l.367.368a3.776 3.776 0 0 1 0 5.34l-.715.715a4.6 4.6 0 0 0-1.67-.098l1.502-1.501a2.526 2.526 0 0 0 0-3.572l-.368-.367a2.526 2.526 0 0 0-3.572 0L9.641 6.347a.625.625 0 1 1-.883-.883zm-.675 10.323-1.5 1.5a2.525 2.525 0 0 1-3.573 0l-.367-.367a2.526 2.526 0 0 1 0-3.572l1.853-1.853a.625.625 0 1 0-.884-.884L3.61 10.61a3.776 3.776 0 0 0 0 5.34l.367.367a3.776 3.776 0 0 0 5.34 0l.715-.715a4.6 4.6 0 0 1-.098-1.67"}),(0,o.jsx)("path",{d:"M12.98 7.833a.625.625 0 1 0-.885-.884l-5.448 5.448a.625.625 0 0 0 .884.884zM14.5 18a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7m1.969-4.094h-1.375v-1.375a.625.625 0 0 0-1.25 0v1.375h-1.375a.625.625 0 0 0 0 1.25h1.375v1.375a.625.625 0 1 0 1.25 0v-1.375h1.375a.625.625 0 0 0 0-1.25"})]})},i=(0,n(340498).wt)("linkBadgePlus",a,"default");var l=()=>n(158658);function s(e){const t=e.blocks.at(0);return Boolean(null==t?void 0:t.getFormat().image_hyperlink)}var r=()=>n(198365),c=()=>n(375308),d=()=>n(440902),u=()=>n(598101),m=()=>n(781286),p=()=>n(267271);const v=(0,n(69708).YK)({addImageHyperlink:{id:"action.addImageHyperlink",defaultMessage:"Add link to image"},editImageHyperlink:{id:"action.editImageHyperlink",defaultMessage:"Edit link to image"}}),g=(0,p().Fw)({key:"link image",displayName:v.addImageHyperlink,analyticsName:v.addImageHyperlink.defaultMessage,svg:i,validators:[l().p,d().v,r().w,(0,u().A)(c().v),(0,u().A)(s)],shortcuts:["openLinkMenuOrOpenSearch"],closeParentMenu:!0,track:{actionName:"init_edit_link"},action:(e,{blocks:t},n)=>{const o=t.at(0);o&&(m().hv({store:o}),e())}}),f=(0,p().Fw)({key:"link image",displayName:v.editImageHyperlink,analyticsName:v.editImageHyperlink.defaultMessage,svg:n(742852).linkIcon,validators:[l().p,d().v,r().w,(0,u().A)(c().v),s],shortcuts:["openLinkMenuOrOpenSearch"],closeParentMenu:!0,track:{actionName:"init_edit_link"},action:(e,{blocks:t},n)=>{const o=t.at(0);o&&(m().hv({store:o}),e())}})},906590:(e,t,n)=>{n.d(t,{Q:()=>i});n(898992),n(354520);var o=()=>n(77272),a=()=>n(850213);function i(e){const t=o().A.state.recentlyUsedColors.filter((t=>t!==e));t.unshift(e),t.length>5&&t.pop(),o().A.state.recentlyUsedColors=t,a().A.setState([...t])}},918871:(e,t,n)=>{function o({environment:{device:e}}){return e.isMobileNative}n.d(t,{w:()=>o})},921333:(e,t,n)=>{n.d(t,{i:()=>o});n(18107),n(967357);function o(e){return t=>{if(t.blocks){const n=t.blocks.at(0);return Boolean(null==n?void 0:n.getProperties()[e])}return!1}}},929084:(e,t,n)=>{function o({environment:{device:e}}){return e.isElectron}n.d(t,{b:()=>o})},929409:(e,t,n)=>{n.d(t,{S:()=>c});n(898992),n(823215),n(354520);var o=()=>n(907258),a=()=>n(440375),i=()=>n(68263),l=()=>n(499764),s=()=>n(292664),r=()=>n(310526);function c({environment:e,publicEditMode:t,blocks:n}){if(a().l.state)return!1;const{id:c}=e.currentUser;if(!c)return!1;if(l().QT(t))return!1;const d=o().default.state.sidebarSpaceViewStore;return n.every((t=>(0,l().A$)({userId:c,store:t}).filter((({type:e,role:n})=>{if(!n)return!1;const o=t.isCollectionView()||t.isTemplate()?i().lg(n):i().p2(n);return"public_permission"!==e&&o})).length>0&&(l().MI({environment:e,blockStore:t})||(0,s().K)(t)&&(0,r().U)(d))))}},933152:(e,t,n)=>{n.d(t,{M:()=>a});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"2.74 2.66 14.98 14.67",svg:(0,n(474848).jsx)("path",{d:"M5.606 2.669a1.55 1.55 0 0 0-1.55 1.55v.379l-.068-.004h-.694a.55.55 0 0 0 0 1.1h.694l.068-.004v.379c0 .856.694 1.55 1.55 1.55h8.788a1.55 1.55 0 0 0 1.55-1.55v-.375h.3c.207 0 .375.168.375.375v2.023a.375.375 0 0 1-.375.375h-5.319c-.815 0-1.475.66-1.475 1.475v.592a1.55 1.55 0 0 0-1.462 1.547v3.7c0 .856.694 1.55 1.55 1.55h.925a1.55 1.55 0 0 0 1.55-1.55v-3.7a1.55 1.55 0 0 0-1.463-1.547v-.592c0-.207.168-.375.375-.375h5.319c.814 0 1.475-.66 1.475-1.475V6.069c0-.815-.66-1.475-1.475-1.475h-.3v-.375a1.55 1.55 0 0 0-1.55-1.55zm-.3 1.55a.3.3 0 0 1 .3-.3h8.788a.3.3 0 0 1 .3.3v1.85a.3.3 0 0 1-.3.3H5.606a.3.3 0 0 1-.3-.3zm3.932 7.862a.3.3 0 0 1 .3-.3h.925a.3.3 0 0 1 .3.3v3.7a.3.3 0 0 1-.3.3h-.925a.3.3 0 0 1-.3-.3z"})},a=(0,n(340498).wt)("blockColor",o,"default")},938346:(e,t,n)=>{n.d(t,{Ay:()=>A,og:()=>f});var o=n(296540),a=()=>n(590526),i=()=>n(401497),l=()=>n(425946),s=()=>n(100622),r=()=>n(478184),c=()=>n(206051),d=()=>n(301948),u=()=>n(13898),m=()=>n(738471),p=()=>n(515918),v=n(474848);const g=o.lazy((()=>Promise.all([n.e(38293),n.e(18653)]).then(n.bind(n,553666)).then((e=>({default:e.PremiumFeatureBadgeWrapper})))));let f=function(e){return e[e.Insert=0]="Insert",e[e.TurnInto=1]="TurnInto",e}({});function y(e){const{thumbnail:t,iconSize:n}=e,o=(0,i().IS)((()=>({simplifiedThumbnail:{display:"block",width:n,height:n,flexGrow:0,flexShrink:0,background:s().oZ.white}})),[n]),a=(0,r().L)(t)||l().M;return(0,v.jsx)(m().A,{src:a,style:o.simplifiedThumbnail})}function k(e,t){const l=(0,n(484714).v3)(),d="dark"===(0,i().eP)(),u=(0,n(792485).S)(),{description:m,format:p,selected:g,title:k,sectionTitle:b,showSectionTitle:A,thumbnail:S,tooltipPhoto:N,thumbnailPadding:w,isDisabled:T,disabledTooltipMessage:M,shortcut:I,icon:x,desktopTitleStyle:_,blockType:C,integrationId:P}=e,B=p===f.Insert,F=(0,a().K8)((()=>!!T&&T({environment:l,blocks:c().default.state.stores,publicEditMode:void 0,pageContext:u})),[l,T,u]),Y=(0,a().K8)((()=>{if(M)return M({environment:l,blocks:c().default.state.stores,publicEditMode:void 0,pageContext:u})}),[l,M,u]),j=(0,a().K8)((()=>{if(P&&"collection_view"===C)return(0,n(462853).l)(P)}),[P,C]),R=(0,i().IS)((()=>({titleDiv:{display:"flex",alignItems:"center"},shortcut:{color:s().Tj.text.tertiary,fontSize:12,whiteSpace:"nowrap",paddingInlineEnd:2},iconContainer:{display:"flex",alignItems:"center",justifyContent:"center"},icon:{width:20,height:20,fill:s().Tj.icon.primary},title:{marginInlineEnd:6},sectionTitle:{color:s().Tj.text.tertiary,marginInlineEnd:6,...n(284371).RC}})),[20,6]),O=(0,o.useCallback)((()=>(0,v.jsx)(y,{isInsertFormat:B,iconSize:20,thumbnailPadding:w,thumbnail:S})),[S,w,B,20]),{badge:U,...V}=e,L=B&&Boolean(I),z=void 0!==x,D=Boolean(g&&!B),[{value:K}]=(0,n(187174).Yb)((async()=>{const{assistantDependency:e}=await Promise.resolve().then(n.bind(n,650829));return(await e.load()).AssistantFeatureGateStore}),[]),H=(0,a().K8)((()=>{if("ai_block"===C){return(null==K?void 0:K.isAiBlockConfigurationMenuEnabledForUser())??!1?"new":"ai"}return"function"==typeof U?U():U}),[K,C,U]),E=(0,o.useCallback)((e=>(0,v.jsx)(n(81068).A,{...(0,n(383036).A)(e||{},V),desktopTitleStyle:_,ref:t,isChecked:D,right:L?(0,v.jsx)("span",{style:R.shortcut,children:I}):void 0,title:(0,v.jsxs)("div",{style:R.titleDiv,children:[A?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("span",{style:R.title,children:k}),(0,v.jsx)("span",{style:R.sectionTitle,children:"Â·"}),(0,v.jsx)("span",{style:R.sectionTitle,children:b})]}):(0,v.jsx)("span",{style:R.title,children:k}),H&&!D?(0,v.jsx)("span",{style:{marginInlineStart:6},children:(0,v.jsx)(h,{featureName:j,badgeOverride:H,showCheck:D})}):(0,v.jsx)(h,{featureName:j,badgeOverride:H,showCheck:D})]}),icon:z?(0,v.jsx)("div",{style:R.iconContainer,children:x(d)(R.icon)}):O(),disabled:F,disabledFeedback:F})),[V,t,D,R.titleDiv,R.iconContainer,R.icon,k,R.title,O,F,z,x,R.shortcut,I,L,A,b,R.sectionTitle,d,_,j,H]),W=(0,o.useCallback)((()=>{if(F&&Y)return(0,v.jsx)("div",{children:Y});const e=N?(0,r().L)(N):void 0;return(0,v.jsx)(n(103448).A,{imageURL:e,imageWidth:140,imageHeight:100,caption:m})}),[F,N,m,Y]);return n(726637).A.isMobile?E():(0,v.jsx)(n(26697).m,{renderTooltip:W,placement:"right",delayThreshold:0,render:e=>E(e)})}function b({badgeOverride:e,showCheck:t}){return t?null:(0,v.jsxs)(v.Fragment,{children:["new"===e?(0,v.jsx)(p().A,{}):null,"beta"===e?(0,v.jsx)(u().A,{}):null,"alpha"===e?(0,v.jsx)(d().A,{}):null]})}function h({featureName:e,badgeOverride:t,showCheck:n}){return e?(0,v.jsx)(o.Suspense,{fallback:(0,v.jsx)(b,{badgeOverride:t,showCheck:n}),children:(0,v.jsx)(g,{featureName:e,badgeOverride:t,showCheck:n})}):(0,v.jsx)(b,{badgeOverride:t,showCheck:n})}const A=o.forwardRef(k)},941702:(e,t,n)=>{n.d(t,{Y:()=>a});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"0.87 5.97 18.25 8.05",svg:(0,n(474848).jsx)("path",{d:"m5.58 11.757.685 1.855a.625.625 0 0 0 1.172-.434L4.985 6.544a.863.863 0 0 0-1.62 0l-2.45 6.634a.625.625 0 0 0 1.172.434l.686-1.855zm-.463-1.25H3.234l.941-2.548zm4.26-4.527c.345 0 .625.28.625.625v6.165h3.147a.625.625 0 1 1 0 1.25H9.377a.625.625 0 0 1-.625-.625v-6.79c0-.345.28-.625.625-.625m3.147.625c0-.345.28-.625.625-.625h5.35a.625.625 0 1 1 0 1.25h-2.05v6.165a.625.625 0 0 1-1.25 0V7.23h-2.05a.625.625 0 0 1-.625-.625"})},a=(0,n(340498).wt)("textAlt",o,"default")}}]);