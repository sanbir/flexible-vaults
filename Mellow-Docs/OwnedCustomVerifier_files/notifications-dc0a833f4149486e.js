"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[6893,22542,26126,87017],{346:(e,t,n)=>{n.d(t,{MG:()=>g,T1:()=>m,a1:()=>h,dt:()=>y,kg:()=>b,lC:()=>v,n_:()=>f});var i=n(296540),o=()=>n(484714),a=()=>n(590526),r=()=>n(79926),s=()=>n(187174),l=()=>n(941463),d=()=>n(441199),c=()=>n(749687),u=()=>n(737230),p=()=>n(756114);const m=new(r().O2)("PerformanceToolbar",(()=>Promise.all([n.e(23640),n.e(45624)]).then(n.bind(n,688201)))),g=(0,r()._h)(m,(e=>e.PerformanceToolbar)),y=(0,r()._h)(m,(e=>e.PerformanceToolbarSettings));function b(){const e=(0,o().v3)();return(0,a().K8)((()=>(0,p().D)(e,e.RouterStore.state)),[e])}function f(){const e=(0,o().v3)(),t=x("performanceToolbarStore"),n=x("isPerformanceToolbarVisible");return(0,a().K8)((()=>!(!t||!n)&&n(e,e.RouterStore.state,t.state)),[n,e,t])}function v(){const e=x("performanceToolbarStore");return(0,a().K8)((()=>!!e&&e.state.isPerformanceToolbarMounted),[e])}function h(){const e=(0,o().v3)(),t=x("createPerformanceToolbarMouseListeners"),n=x("performanceToolbarStore"),{sidebarExpanded:r,sidebarWidth:s,secondarySidebarExpanded:p,secondarySidebarWidth:m,updateSidebarExpanded:g,updateSidebarWidth:y}=(0,a().K8)((()=>({sidebarExpanded:c().sidebarExpandedStore.state,sidebarWidth:c().sidebarWidthStore.state,secondarySidebarExpanded:d().default.isOpen(),secondarySidebarWidth:l().Ay.getWidth(),updateSidebarExpanded:u().Ay.state.expanded,updateSidebarWidth:u().Ay.state.width})),[]);return(0,i.useEffect)((()=>{if(n&&t)return t(e,(e=>n.update((t=>({...t,isMouseNearPerformanceToolbar:e})))),r,s,p,m,g,y)}),[t,e,n,r,s,p,m,g,y])}function x(e){const t=b(),[{value:n}]=(0,s().Yb)((()=>t?m.load().then((t=>t[e])):Promise.resolve(void 0)),[e,t]);return n}},670:(e,t,n)=>{n.d(t,{Lr:()=>r,PM:()=>o,Ur:()=>a});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);class i extends(()=>n(757695))().Store{getInitialState(){return{duplicatingWorkflowIds:new Set,isDuplicating:!1}}}const o=new i;function a(e){o.update((t=>{const n=new Set(t.duplicatingWorkflowIds);return n.add(e),{duplicatingWorkflowIds:n,isDuplicating:n.size>0}}))}function r(e){o.update((t=>{if(!t.duplicatingWorkflowIds.has(e))return t;const n=new Set(t.duplicatingWorkflowIds);return n.delete(e),{duplicatingWorkflowIds:n,isDuplicating:n.size>0}}))}},6697:(e,t,n)=>{n.d(t,{h:()=>a});var i=()=>n(79926);const o=new(i().O2)("DictationAvatar",(async()=>await Promise.all([n.e(75134),n.e(35530),n.e(9773),n.e(36556),n.e(55373),n.e(36192),n.e(40537),n.e(27992),n.e(63452),n.e(66249),n.e(92845),n.e(87249),n.e(79022),n.e(44854),n.e(87017),n.e(34877),n.e(46414),n.e(11676),n.e(61165),n.e(94522),n.e(44584),n.e(38293),n.e(40992),n.e(88455),n.e(52871),n.e(47160),n.e(49021),n.e(53697),n.e(26126),n.e(6039),n.e(71136),n.e(86341),n.e(29316),n.e(3101)]).then(n.bind(n,310947)))),a=(0,i()._h)(o,(e=>e.DictationAvatar))},20953:(e,t,n)=>{n.d(t,{Z:()=>h});n(898992),n(354520),n(581454);var i=n(296540),o=()=>n(401497),a=()=>n(127833),r=()=>n(30537),s=()=>n(807449),l=()=>n(546926),d=()=>n(890492),c=()=>n(81068),u=()=>n(663639),p=()=>n(736847),m=()=>n(42583),g=()=>n(301608),y=()=>n(69708),b=()=>n(56394),f=()=>n(385226),v=n(474848);function h(e){const t=(0,y().tz)(),n=(0,o().IS)((()=>({popup:{width:125,marginInlineStart:5},pillStyle:{display:"flex",alignItems:"center"}})),[]),{currentFilter:h,hideAllTime:x,hideLast365Days:S}=e,[A,w]=(0,i.useState)(!1),k=g().jf.filter((e=>!x||"all_time"!==e)).filter((e=>!S||"last_365_days"!==e)).map((n=>{const i=()=>{e.onChangeFilter(n),w(!1)};return{key:n,action:()=>{},render:()=>(0,v.jsx)(c().A,{focused:!1,onClick:i,title:t.formatMessage(g().jy[n])})}})),T=(0,v.jsx)(b().A,{on:Boolean(h),wrapStyle:n.pillStyle,icon:(0,v.jsx)(s().I,{icon:m().D,size:"sm",style:{fill:"currentColor"}}),title:t.formatMessage(g().jy[h]),onClick:()=>{w(!0)}}),I=[{key:"filters",items:k,render:e=>(0,v.jsx)(p().A,{...e,title:null,loading:!1})}],j=(0,v.jsx)(d().A,{menuType:l().gu.Popup,header:null,children:(0,v.jsx)(u().A,{type:u().O.Vertical,initialFocus:0,sections:I})});return(0,v.jsx)(f().A,{marginAfter:!1,children:(0,v.jsx)(a().zD,{popupType:r().n.Popup,placementToOrigin:"bottom",alignmentToOrigin:"start",open:A,render:()=>j,onDismiss:()=>w(!1),keepFocus:!0,origin:T,preventScaleTransition:!0,style:n.popup,trapFocus:!0,originGap:8})})}},27455:(e,t,n)=>{n.d(t,{Zp:()=>l,fT:()=>r,v3:()=>s});n(944114);var i=n(296540),o=()=>n(100622),a=n(474848);const r={xxs:4,xs:6,sm:8,md:10,lg:12},s={none:0,sm:12,md:16,lg:20,xl:24},l=i.forwardRef((function(e,t){const{children:i,colorPalette:l,colorVariant:d="primary",borderRadius:c="md",borderVariant:u,padding:p="none",shadowVariant:m}=e,g=(0,n(401497).IS)((()=>{const e=l?o().Tj[l]:o().Tj,t=[];return m&&t.push(o().Tj.shadow.base[m]),u&&t.push(`inset 0 0 0 1px ${e.border[u]}`),{card:{width:"100%",padding:"number"==typeof p?p:s[p],borderRadius:r[c],boxShadow:t.join(", "),background:(0,n(534177).O)(e.background,d)?e.background[d]:e.background.primary}}}),[l,d,c,u,p,m]);return(0,a.jsx)("div",{style:g.card,ref:t,children:i})}))},39341:(e,t,n)=>{n.d(t,{p:()=>o});class i extends(()=>n(757695))().Store{getInitialState(){return{banners:[],totalHeight:0,height:void 0}}setHeight(e){this.update((t=>({...t,height:e})))}}const o=new i},59976:(e,t,n)=>{n.d(t,{b:()=>a});var i=()=>n(79926);const o=new(i().O2)("time-series",(async()=>await Promise.resolve().then(n.bind(n,968526)))),a=(0,i()._h)(o,(e=>e.TimeSeries))},64790:(e,t,n)=>{n.d(t,{$L:()=>u,EV:()=>s,PZ:()=>c,dp:()=>l,xm:()=>d});n(944114);var i=()=>n(798880),o=()=>n(100622),a=()=>n(496603),r=()=>n(720665);function s(e){if(null!=e&&e.blockId)return e.blockId}function l(e,t){const n=e.currentUser.id;return t.userId===n||t.present}function d(e){var t;return(null===(t=e.state.rootStore)||void 0===t?void 0:t.canEdit())??!1}function c(e){const{pageVisitStore:t,presenceStore:n}=e,{remotePresenceData:i}=n.state;let o=[];i&&a().uk(i,(e=>{null!=e&&e.userId&&o.push(e)}));const{pageId:s,lastViewTime:l,lastExitTime:d,totalCount:c,hasMore:u,...p}=t.state;return a().uk(p,(e=>{e.isDefined()&&o.push({userId:e.getUserId(),activityTimestampNearestMinuteMs:(0,r().WY)(e.getVisitedAt()),present:!1})})),o=a().hS(o,(e=>e.userId)),a().Ul(o,(({activityTimestampNearestMinuteMs:e})=>e?-e:0))}function u(e){const{userId:t,theme:n}=e;return(0,i().MF)(t)?o().Tj.icon.secondary:(0,o().Nq)(t,n)}},72307:(e,t,n)=>{n.d(t,{A:()=>i});const i={appCursorListener:{sidebar:1,secondarySidebar:2,editor:3,aiChat:3,marketplace:3,teamHome:3,aiChatSidebar:4}}},75600:(e,t,n)=>{n.d(t,{O:()=>a,t:()=>o});var i=()=>n(79926);const o=(0,i()._h)(new(i().O2)("PeekRenderer",(async()=>{const{default:e}=await Promise.all([n.e(75134),n.e(35530),n.e(9773),n.e(55373),n.e(36192),n.e(71562),n.e(96346),n.e(44711),n.e(53321),n.e(51220),n.e(16471),n.e(37353),n.e(37571),n.e(29151),n.e(40118),n.e(50397),n.e(62475),n.e(3151),n.e(98629),n.e(27992),n.e(63452),n.e(66249),n.e(92845),n.e(87249),n.e(79022),n.e(44854),n.e(87017),n.e(34877),n.e(46414),n.e(11676),n.e(61165),n.e(47668),n.e(94522),n.e(44584),n.e(24587),n.e(67494),n.e(3651),n.e(38293),n.e(40992),n.e(88455),n.e(64556),n.e(33893),n.e(91793),n.e(55162),n.e(71003),n.e(32370),n.e(26264),n.e(36437),n.e(50363),n.e(42660),n.e(44590),n.e(55113),n.e(85071),n.e(7914),n.e(25588),n.e(68637),n.e(23640),n.e(72252),n.e(93134),n.e(12452),n.e(52871),n.e(29351),n.e(18825),n.e(71853),n.e(93049),n.e(22582),n.e(18636),n.e(87289),n.e(16060),n.e(34281),n.e(48376),n.e(35279),n.e(80229),n.e(77754),n.e(71309),n.e(74562),n.e(39986),n.e(47160),n.e(76677),n.e(68609),n.e(15553),n.e(77345),n.e(67720),n.e(37759),n.e(41423),n.e(14699),n.e(21627),n.e(57924),n.e(77777),n.e(17729),n.e(23493),n.e(51240),n.e(20029),n.e(95885),n.e(39438),n.e(54719),n.e(25523),n.e(26962),n.e(43151)]).then(n.bind(n,172342));return{PeekRenderer:e}})),(e=>e.PeekRenderer)),a=(0,i()._h)(new(i().O2)("RestrictedAccess",(async()=>{const{RestrictedAccessComponent:e}=await Promise.all([n.e(22114),n.e(57314)]).then(n.bind(n,260775));return{RestrictedAccessComponent:e}})),(e=>e.RestrictedAccessComponent))},77126:(e,t,n)=>{n.d(t,{j:()=>o});class i extends(()=>n(959180))().A{}const o=new i},87017:(e,t,n)=>{n.r(t),n.d(t,{duplicateBlocks:()=>j,duplicateBlocksWithMaybeConfirmation:()=>I,insertBlockAbove:()=>M,insertBlockAndEdit:()=>P,insertBlockBelow:()=>C,insertTextAbove:()=>B,insertTextBelow:()=>_});n(18107),n(944114),n(967357);var i=()=>n(135168),o=()=>n(908006),a=()=>n(905073),r=()=>n(206267),s=()=>n(496603),l=()=>n(855801),d=()=>n(669548),c=()=>n(822934),u=()=>n(391214),p=()=>n(838256),m=()=>n(962910),g=()=>n(807700),y=()=>n(920836),b=()=>n(3700),f=()=>n(799832),v=()=>n(516430),h=()=>n(471083),x=()=>n(518489),S=()=>n(836724),A=()=>n(206051),w=()=>n(77246),k=()=>n(957763),T=()=>n(547149);async function I(e){const{environment:t,blocks:n,duplicateOnlyCollectionSchema:a,callback:r,from:s}=e;if(!(0,k().E)(t,(0,i().f)(n[0])))return;const d=await l().VI.duplicateActions.load();let u=n;if(1===n.length){const e=await m().rW({environment:t,block:n[0],action:"duplicate"});if("user_canceled"===e)return void(null==r||r());u=e}const p=u.at(0);if(!p)return;const g=(0,f().U)(p);if(g&&(0,b().ls)(p,g))await y().un({blocks:u,environment:t,analyticsFrom:"subitem_duplication",callback:r,collectionContextStore:g});else{const{serverCommitResult:e}=T().createAndCommit({userAction:"actionRegistry.duplicateToSelection",environment:t,canUndo:!0,perform:e=>{j({environment:t,blocks:u,transaction:e,executionTarget:"local",duplicateOnlyCollectionSchema:a,duplicateActions:d,from:s})},transactionTooBigFallback:e=>{j({environment:t,blocks:u,transaction:e,executionTarget:"server",duplicateOnlyCollectionSchema:a,duplicateActions:d,from:s})}});e.then(r)}o().default.afterNextFlush((()=>{(0,c().B)({environment:t})}))}function j(e){const{environment:t,blocks:n,transaction:i,executionTarget:o,lastTopLevelBlockStore:a,preventSetSelection:r,duplicateOnlyCollectionSchema:l,duplicateActions:d,from:c}=e,p=s().$z(n,(e=>e.getFormat().app_id??e.id)),m=[];return s().jJ(p,(e=>{const n=e[0],{blockStores:a}=d.duplicateBlock({environment:t,stores:e,transaction:i,targetSpaceId:n.getSpaceId(),executionTarget:o,from:c,options:{addCopyName:!0,allowRedundancy:!1,deepCopyTransclusionContainers:!n.isTransclusionType(),resolveTemplateVariables:!(0,g().l)(n),duplicateOnlyCollectionSchema:l},skipUserFacingMessages:!1});m.push(...a)})),u().LE({blocksToInsert:m,target:a?[a]:n,environment:t,transaction:i,replaceEmptyTextBlock:!1,preventSetSelection:r}),m}function C(e){const{environment:t,createBlockItem:n,selection:o,transaction:a,analyticsFrom:r,preventSetSelection:s}=e,l=A().default.getCurrentRecordCache(),c=new(p().UF)({environment:t,userFlow:"page"===(null==n?void 0:n.blockType)?"user_flow_create_page":"user_flow_create_block",from:r,succeedOnEnqueue:!0});let m;if((0,k().E)(t,(0,i().f)(o[0]))&&n&&l){const e=d().w({environment:t,createBlockItem:n,transaction:a,inMemoryRecordCache:l,from:r,selection:o});c.track(e.pointer,a),m=u().LE({environment:t,blocksToInsert:[e],target:o,transaction:a,replaceEmptyTextBlock:!1,preventSetSelection:s})[0]}else c.fail("invalid_state");return m}function M(e){const{environment:t,createBlockItem:n,selection:o,transaction:a,analyticsFrom:r,preventSetSelection:s}=e,l=A().default.getCurrentRecordCache();let c;if((0,k().E)(t,(0,i().f)(o[0]))&&n&&l){const e=d().w({environment:t,createBlockItem:n,transaction:a,inMemoryRecordCache:l,from:r,selection:o});c=u().t1({environment:t,blocks:[e],selection:o,transaction:a,preventSetSelection:s})[0]}return c}function P(e){const{environment:t,selection:n,transaction:i}=e,o=C({...e,preventSetSelection:!0});if(o){var a;u().x5({environment:t,insertedStores:[o],isCreated:!0});const e=w().Uv.getMode(o);if("suggest"===e){const e=v().RR(t,i,o);v().tM(i,o,{id:r().JW(),type:"insert",discussionId:e.id}),v().c3({environment:t,transaction:i,discussionStore:e,addModifiedBlockIdsAfter:[o.id]})}"suggest"===e&&null!==(a=o.getNavigableBlockStore({skipCurrent:!0}))&&void 0!==a&&a.isCommentOnly()||u().um({transaction:i,blocks:n})}return o}function _(e){const{blocks:t,transaction:n,environment:i,skipAnalytics:r}=e,s=r?void 0:"text_insert_below",l=C({environment:i,selection:t,createBlockItem:h().ry.text,analyticsFrom:s,transaction:n});return l&&o().default.afterNextFlush((()=>{(0,a().z)({environment:i,blockStore:l,insertedTextBlockLocation:"below",editSelection:x().h,getRectFromStore:S().T.getRectFromStore.bind(S().T)})})),l}function B(e){const{blocks:t,transaction:n,environment:i,skipAnalytics:r}=e,s=r?void 0:"text_insert_below",l=M({environment:i,selection:t,createBlockItem:h().ry.text,analyticsFrom:s,transaction:n});return l&&o().default.afterNextFlush((()=>{(0,a().z)({environment:i,blockStore:l,insertedTextBlockLocation:"above",editSelection:x().h,getRectFromStore:S().T.getRectFromStore.bind(S().T)})})),l}},106702:(e,t,n)=>{n.d(t,{$:()=>a});var i=()=>n(590526);const o=new(n(140934).ComputedStore)((()=>n(907258).default.state.currentUserStore),{debugName:"AppStoreCurrentUserStore"});function a(){return(0,i().O$)(o)}},126126:(e,t,n)=>{n.d(t,{eQ:()=>W,hJ:()=>ne,Ay:()=>z,Uo:()=>X,XE:()=>ee});n(944114),n(898992),n(823215),n(672577),n(581454);var i=n(296540),o=()=>n(484714),a=()=>n(590526),r=()=>n(401497),s=()=>n(929219),l=()=>n(75435),d=()=>n(609679),c=()=>n(849255),u=()=>n(56268),p=()=>n(718827),m=()=>n(631524),g=()=>n(26697),y=()=>n(302501),b=()=>n(869190),f=()=>n(641007),v=()=>n(187174),h=()=>n(798880),x=()=>n(695608),S=()=>n(69708),A=()=>n(100622),w=()=>n(496603),k=()=>n(23420),T=()=>n(488923),I=()=>n(102172),j=()=>n(130119),C=()=>n(6697),M=()=>n(673657),P=()=>n(64790),_=()=>n(869562),B=()=>n(737230),E=()=>n(994006),F=()=>n(453697),U=()=>n(852273);const N=function(e){const t=(0,o().v3)(),a=(0,i.useRef)(),r=(0,n(336811).T)(),s=(0,i.useCallback)((async()=>{if(await n(129286).transactionQueue.awaitRecordTransaction(e.blockStore.pointer),!r.current)return;const i=(0,n(921997).Ws)(e.blockStore.id);a.current=U().Ay.addListener(i,void 0,w().nF((()=>n(466721).updatePageVisits(t,{blockStore:e.blockStore,pageVisitStore:e.pageVisitStore,incremental:!0,limit:e.limit})),1e3),void 0,t)}),[t,r,e.blockStore,e.limit,e.pageVisitStore]),l=(0,i.useCallback)((()=>{a.current&&(U().Ay.removeListener(a.current,t),a.current=void 0)}),[t]);return(0,i.useEffect)((()=>(s(),l)),[s,l]),null};var D=n(474848);const R=5,V=25,O=6,W=22;const z=function({pageVisitStore:e,presenceStore:t,rootStore:i,maxUsers:o}){return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(n(912474).a,{rootStore:i}),(0,D.jsx)(ne,{rootStore:i,pageVisitStore:e,presenceStore:t,maxUsers:o,isShowingInFeed:!1}),(0,D.jsx)(N,{blockStore:i,pageVisitStore:e,limit:1+K(o)+V})]})};function L(e){return w().Ul(e,(e=>e.activityTimestampNearestMinuteMs))}function K(e){return e??R}function H(e,t){return c().L.createChildStore(t,{table:h().oo,id:e})}function X(e){const{environment:t,isShowingTabBar:n,isShowingInFeed:i}=e;return{...(0,j().g)({noDrag:t.device.isElectron&&!n}),display:"flex",alignItems:"center",position:"relative",flexDirection:"row-reverse",marginInlineStart:8,paddingInlineEnd:O,transform:"translateZ(0)",...i&&{maxHeight:54,paddingBottom:12}}}function $(){return{color:A().Tj.text.inverseSecondary,fontSize:10,textTransform:"uppercase",letterSpacing:"0.015em"}}function Y({userData:e,isPresent:t,rootStore:n,isShowingInFeed:i}){const r=(0,o().v3)(),s=(0,S().tz)(),l=r.currentUser.id,c=(0,a().K8)((()=>H(e.userId,n)),[e,n]),u=(0,a().K8)((()=>c.isDefined()),[c]),p=(0,a().K8)((()=>(0,x().c6)(s,c.getModel())),[s,c]),m=(0,a().K8)((()=>c.getEmail()),[c]);if(!u)return null;let g;return t?l!==c.id&&(g=e.blockId&&!i?(0,D.jsx)(S().sA,{defaultMessage:"Viewing now. Click to see where they are.",id:"topbar.presenceIndicator.viewingNowWithLocation.tooltip"}):(0,D.jsx)(S().sA,{defaultMessage:"Viewing now",id:"topbar.presenceIndicator.viewingNow.tooltip"})):l!==c.id&&e.activityTimestampNearestMinuteMs&&(g=(0,D.jsx)(S().sA,{defaultMessage:"Last viewed {timeFromNow}",id:"topbar.presenceIndicator.lastViewedTime.tooltip",values:{timeFromNow:(0,b().v9)(Math.min(e.activityTimestampNearestMinuteMs,Date.now()),d().locale)}})),(0,D.jsxs)("div",{children:[(0,D.jsx)("div",{className:"notranslate",children:p}),(0,D.jsx)("div",{style:{fontWeight:400},children:m}),g?(0,D.jsx)("div",{style:{color:A().Tj.text.inverseSecondary,minWidth:150,paddingTop:2,paddingBottom:2,lineHeight:1.3},children:g}):void 0]})}function q({userData:e,index:t,rootStore:n}){const i=(0,o().v3)(),r=(0,P().dp)(i,e),s=(0,a().K8)((()=>H(e.userId,n)),[e,n]);if(!(0,a().K8)((()=>s.isDefined()),[s]))return null;let l;!r&&e.activityTimestampNearestMinuteMs&&(l=(0,b().v9)(e.activityTimestampNearestMinuteMs,d().locale));const c=(0,D.jsxs)("div",{style:{display:"flex",alignContent:"flex-end",minWidth:140,width:"100%",marginTop:4},children:[(0,D.jsx)(E().A,{userStore:s,avatarSize:18,style:{flexGrow:1},hasPersonHoverCard:!1}),(0,D.jsx)("div",{style:{marginInlineStart:"auto",paddingInlineStart:12,textAlign:"end",flexShrink:1,color:A().Tj.text.inverseSecondary},children:l})]});if(r&&e.blockId){const t=e.blockId;return(0,D.jsx)(p().Ay,{onClick:()=>(0,k().B)([t],!0,i),style:{display:"flex",alignItems:"center"},children:c})}return(0,D.jsx)("div",{style:{display:"flex",alignItems:"center"},children:c})}function G({hiddenUsers:e,hiddenUsersCount:t,hasMore:n,rootStore:i,environment:o}){return(0,D.jsx)(g().m,{allowHover:!0,originGap:7,renderTooltip:o=>(0,D.jsx)(J,{hiddenUsers:e,hiddenUsersCount:t,hasMore:n,rootStore:i,events:o}),render:e=>(0,D.jsx)(Z,{hiddenUsersCount:t,events:e,environment:o,rootStore:i})})}function J({hiddenUsers:e,hiddenUsersCount:t,hasMore:n,rootStore:i,events:a}){const r=(0,o().v3)(),s=[],l=[];for(const o of e)(0,P().dp)(r,o)?s.push(o):l.push(o);const d=l.slice(0,V-s.length),c=t-(s.length+d.length);return(0,D.jsxs)("div",{...a,children:[s.length>0?(0,D.jsxs)("div",{style:{marginBottom:4},children:[(0,D.jsx)(y().A,{style:$(),children:(0,D.jsx)(S().sA,{defaultMessage:"Viewing now",id:"topbar.presenceIndicator.hiddenUsers.viewingNow.tooltip"})}),s.map(((e,t)=>(0,D.jsx)(q,{userData:e,index:t,rootStore:i},t)))]}):void 0,d.length>0?(0,D.jsxs)("div",{style:{marginBottom:4},children:[(0,D.jsx)(y().A,{style:{...$()},children:(0,D.jsx)(S().sA,{defaultMessage:"Last viewed by",id:"topbar.presenceIndicator.hiddenUsers.lastViewedBy.tooltip"})}),d.map(((e,t)=>(0,D.jsx)(q,{userData:e,index:t,rootStore:i},t)))]}):void 0,(0,D.jsx)(Q,{remainingHiddenUsersCount:c,hasMore:n})]})}function Z({hiddenUsersCount:e,events:t,environment:n,rootStore:o}){const a=(0,r().IS)((()=>({origin:{paddingInline:8,marginInlineStart:4,marginInlineEnd:-O-4}})),[]),s=(0,i.useCallback)((()=>{_().handleSidebarButtonClick(n,o,B().tF.Updates,"more_menu"),B().Ay.setState({...B().Ay.state,updatesSubTab:B().VE.Analytics})}),[n,o]);return(0,D.jsx)(m().p,{style:a.origin,size:"sm",shape:"pill",colorPalette:"gray",onClick:s,...t,children:(0,D.jsx)(S().sA,{defaultMessage:"{hiddenUsersCount, plural, one {+{hiddenUsersCount}} other {+{hiddenUsersCount}}}",id:"topbar.presenceIndicator.hiddenUsers.otherCount.message",values:{hiddenUsersCount:e}})})}function Q({hasMore:e,remainingHiddenUsersCount:t}){const n=(0,r().IS)((()=>({message:{marginInlineStart:2,marginTop:2,color:A().Tj.text.inverseSecondary}})),[]);return t>0?(0,D.jsx)("div",{style:n.message,children:e?(0,D.jsx)(S().sA,{defaultMessage:"{remainingVisitorsCount}+ more…",id:"topbarPresence.presenceIndicator.hiddenUsers.evenMoreUsersNotViewing.tooltip",values:{remainingVisitorsCount:t}}):(0,D.jsx)(S().sA,{defaultMessage:"{remainingVisitorsCount} more…",id:"topbarPresence.presenceIndicator.hiddenUsers.moreUsersNotViewing.tooltip",values:{remainingVisitorsCount:t}})}):null}function ee(e,t){const n=(0,r().DP)();return(0,r().IS)((()=>{const i={width:W,height:W,borderRadius:W},o=e(n);return{button:{transition:"all 0.2s ease",transform:"scale(1)"},buttonHovered:{transform:"scale(1.15)",background:"none"},buttonPressed:{transform:"scale(0.9)",background:"none"},uiUserAvatarStyles:{...i},avatarInnerOutline:{...i,outlineStyle:"solid",outlineColor:A().Tj.UIUserAvatarInnerOutline,outlineWidth:.5,outlineOffset:-.5},avatarBorder:t?{...i,outlineStyle:"solid",outlineColor:o,outlineWidth:1.5,outlineOffset:-.5}:{},avatarOuterOutline:{...i,outlineStyle:"solid",outlineColor:t?A().Tj.background.primary:A().Tj.UIUserAvatarIdleOutline,outlineWidth:.5,outlineOffset:t?1:0,backgroundColor:A().Tj.background.primary,marginInlineEnd:-6,position:"relative"},initialColor:{color:t?o:A().Tj.icon.secondary}}}),[e,t,n])}function te(e){const{userData:t,rootStore:n,isShowingInFeed:r=!1}=e,s=(0,o().v3)(),{userId:l}=t,d=(0,P().dp)(s,t),{userStore:c,showAvatar:u}=(0,a().K8)((()=>{if((0,h().MF)(l))return{userStore:f().px,showAvatar:!0};const e=H(l,n);return{userStore:e,showAvatar:(e.isDefined()||(0,h().MF)(e.id))&&!e.getIsSuspended()}}),[l,n]),m=ee((0,i.useCallback)((e=>(0,h().MF)(l)?A().Tj.icon.secondary:l===s.currentUser.id?A().Tj.border.accentPrimary:(0,A().Nq)(l,e)),[s.currentUser.id,l]),d);return u?(0,D.jsx)(g().m,{disableTooltip:r,textWrap:!0,renderTooltip:()=>(0,D.jsx)(Y,{rootStore:n,userData:t,isPresent:d,isShowingInFeed:r}),render:e=>{const n=(0,D.jsx)("div",{style:m.avatarOuterOutline,children:(0,D.jsx)("div",{style:m.avatarBorder,children:(0,D.jsx)(F().A,{iconStyle:m.avatarInnerOutline,userStore:c,style:m.uiUserAvatarStyles,isOffline:!d,size:W,avatarShouldShowShadow:!r,initialOverrideStyle:m.initialColor})})});if(d&&t.blockId){const i=t.blockId;return(0,D.jsx)(p().Ay,{...e,onClick:()=>(0,k().B)([i],!0,s),style:m.button,hoveredStyle:m.buttonHovered,pressedStyle:m.buttonPressed,children:n})}return(0,D.jsx)("div",{...e,children:n})}}):null}function ne(e){const{rootStore:t,pageVisitStore:n,presenceStore:i,maxUsers:r,isShowingInFeed:d}=e,c=(0,o().v3)(),p=c.currentUser.id,[{status:m,value:g}]=(0,v().Yb)((async()=>(0,T().$g)()),[]),y=(0,a().K8)((()=>{var e;if("resolved"===m)return null==g||null===(e=g.getPresencesForBlock(t.id))||void 0===e?void 0:e.find((e=>e.blockId===t.id))}),[g,m,t.id]),b=(0,a().K8)((()=>{const e=c.currentUser.id;if(!e)return;const o=d||(0,P().xm)(i)?(0,P().PZ)({pageVisitStore:n,presenceStore:i}):[];let a=(null==n?void 0:n.state.totalCount)??o.length;const s=[],l=[];for(const t of o)t.userId!==e?(0,P().dp)(c,t)?s.push(t):l.push(t):a--;!(0,u().r)({environment:c,store:t})&&t.isNavigableBlock()&&(0,I().BP)(t,c,c.device)&&"resolved"===m&&null!=y&&y.present&&s.push(y);const p=[...L(s).reverse(),...L(l).reverse()],g=K(r)-1;return{visibleUsers:p.slice(0,g),hiddenUsers:p.slice(g),totalCount:a,hasMore:Boolean(null==n?void 0:n.state.hasMore)}}),[n,i,c,d,r,t,m,y],{useDeepEqual:!0}),{visibleUsers:f,hiddenUsers:x,hiddenUsersCount:S,hasMoreHiddenUsers:A,isEveryUserStoreReady:w}=(0,a().K8)((()=>{if(!p)return{};const{visibleUsers:e=[],hiddenUsers:n=[]}=b??{},i=[p,...e.map((e=>e.userId)),...n.map((e=>e.userId))].map((e=>H(e,t)));return{visibleUsers:e,hiddenUsers:n,hiddenUsersCount:Number(null==b?void 0:b.totalCount)-e.length,hasMoreHiddenUsers:Boolean(null==b?void 0:b.hasMore),isEveryUserStoreReady:i.every((e=>e.isReady()||(0,h().MF)(e.id)))}}),[p,b,t]),k=(0,a().O$)(l().b),j=(0,M().n)(t),_=!(0,a().O$)(s().e);if(!p||!b||!w||_)return null;if(p!==t.userId)return null;if(0===f.length&&0===x.length)return j?(0,D.jsx)("div",{style:X({environment:c,isShowingTabBar:k,isShowingInFeed:d}),children:(0,D.jsx)(C().h,{enableClickToScroll:!0,rootStore:t})}):null;{const e=[...f];return e.reverse(),(0,D.jsxs)("div",{style:X({environment:c,isShowingTabBar:k,isShowingInFeed:d}),children:[S>0?(0,D.jsx)(G,{rootStore:t,hiddenUsers:x,hiddenUsersCount:S,hasMore:A,environment:c}):void 0,e.map((e=>(0,D.jsx)(te,{userData:e,rootStore:t},e.userId))),d?void 0:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(te,{rootStore:t,userData:{userId:p,present:!0}}),(0,D.jsx)(C().h,{enableClickToScroll:!0,rootStore:t})]})]})}}},129852:(e,t,n)=>{n.r(t),n.d(t,{exclamationMarkCircleIcon:()=>a,iconDefinition:()=>o});n(296540);var i=n(474848);const o={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.26 15.25",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M9.875 6.25c.345 0 .625.28.625.625v3.5a.625.625 0 1 1-1.25 0v-3.5c0-.345.28-.625.625-.625m0 7.375a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5"}),(0,i.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},a=(0,n(340498).wt)("exclamationMarkCircle",o,"default")},130119:(e,t,n)=>{function i(e){return"drag"in e&&e.drag?{WebkitAppRegion:"drag"}:"noDrag"in e&&e.noDrag?{WebkitAppRegion:"no-drag"}:{}}n.d(t,{g:()=>i})},132855:(e,t,n)=>{n.r(t),n.d(t,{arrowInCircleUpFillIcon:()=>o,iconDefinition:()=>i});n(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,n(474848).jsx)("path",{d:"M10 17.625a7.625 7.625 0 1 0 0-15.25 7.625 7.625 0 0 0 0 15.25m3.042-8.07a.625.625 0 0 1-.884 0L10.625 8.02v5.466a.625.625 0 1 1-1.25 0V8.021L7.842 9.554a.625.625 0 1 1-.884-.883l2.6-2.6a.625.625 0 0 1 .884 0l2.6 2.6a.625.625 0 0 1 0 .883"})},o=(0,n(340498).wt)("arrowInCircleUpFill",i,"fill")},146594:(e,t,n)=>{n.d(t,{H:()=>a});var i=()=>n(79926);const o=new(i().O2)("UpdateSidebarTabInfo",(async()=>await n.e(21377).then(n.bind(n,722143)))),a=(0,i()._h)(o,(e=>e.UpdateSidebarTabInfo))},182034:(e,t,n)=>{n.d(t,{O:()=>u,e:()=>c});n(898992),n(672577);var i=()=>n(908006),o=()=>n(961232),a=()=>n(878523),r=()=>n(892632),s=()=>n(299545),l=()=>n(77126),d=()=>n(260850);function c(e,t){const n=s().dd(t),i=r().xh(n);e.setState({...e.state,files:i})}async function u(e){const{blockStore:t,pageViewBlockStore:n,environment:r}=e;n?n.setState({...n.state,forceDiscussionOpen:!0}):o().A.openNewPageDiscussionInput(t),a().o2(r,{from:"page_comments"}),await i().default.afterNextFlush();const s=l().j.find((e=>e.getBlockStore().id===t.id)),c=null==s?void 0:s.getInputStore();c&&(0,d().z)({store:c.state.textStore})}},200562:(e,t,n)=>{n.d(t,{z:()=>a});var i=()=>n(79926);const o=new(i().O2)("topbarSidebarButton",(async()=>await n.e(62033).then(n.bind(n,81292)))),a=(0,i()._h)(o,(e=>e.TopbarSidebarButton))},208993:(e,t,n)=>{n.d(t,{W:()=>u});n(296540);var i=()=>n(401497),o=()=>n(699143),a=()=>n(718827),r=()=>n(265060),s=()=>n(493552),l=()=>n(26697),d=()=>n(846523),c=n(474848);function u({tooltipTitle:e,tooltipDescription:t,buttonProps:n,iconSize:i="small",iconColorVariant:a="tertiary",tooltipWidth:u,forceVisibleState:m=!1}){return(0,c.jsx)(l().m,{placement:"top",forceVisibleState:m,style:u?{width:u}:void 0,renderTooltip:()=>(0,c.jsxs)(o().Y1,{gap:2,direction:"vertical",children:[(0,c.jsx)(s().D,{styleKey:"captionMedium",colorVariant:"inversePrimary",children:e}),t?(0,c.jsx)(s().D,{styleKey:"captionRegular",colorVariant:"inverseSecondary",children:t}):null]}),render:e=>(0,c.jsx)(p,{buttonProps:n,...e,children:(0,c.jsx)(r().Q,{iconGroup:d().u,colorVariant:a,variantName:i})}),textWrap:Boolean(u)})}function p({children:e,buttonProps:t,...n}){const o=(0,i().IS)((()=>({button:{borderRadius:2}})),[]);return t?(0,c.jsx)(a().Ay,{style:o.button,...t,...n,children:e}):(0,c.jsx)("span",{...n,children:e})}},212473:(e,t,n)=>{n.r(t),n.d(t,{arrowUpRightSquareIcon:()=>a,iconDefinition:()=>o});n(296540);var i=n(474848);const o={viewBox:"0 0 20 20",fittedViewBox:"3.12 3.12 13.75 13.75",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M7.875 7c0-.345.28-.625.625-.625H13c.345 0 .625.28.625.625v4.5a.625.625 0 1 1-1.25 0V8.509l-5.12 5.12a.625.625 0 1 1-.884-.883l5.12-5.121H8.5A.625.625 0 0 1 7.875 7"}),(0,i.jsx)("path",{d:"M3.125 5.25c0-1.174.951-2.125 2.125-2.125h9.5c1.174 0 2.125.951 2.125 2.125v9.5a2.125 2.125 0 0 1-2.125 2.125h-9.5a2.125 2.125 0 0 1-2.125-2.125zm2.125-.875a.875.875 0 0 0-.875.875v9.5c0 .483.392.875.875.875h9.5a.875.875 0 0 0 .875-.875v-9.5a.875.875 0 0 0-.875-.875z"})]})},a=(0,n(340498).wt)("arrowUpRightSquare",o,"default")},224011:(e,t,n)=>{n.d(t,{A:()=>a});var i=()=>n(20022);class o extends(()=>n(757695))().Store{getInitialState(){return{isFullScreen:window.outerWidth===window.screen.width&&window.outerHeight===window.screen.height}}constructor(){super(),this.updateFromElectronState=async()=>{const e=await i().Y5.get();void 0!==e&&this.setState({isFullScreen:e})},i().Y5.addListener(this.updateFromElectronState),this.updateFromElectronState()}}const a=new o},229907:(e,t,n)=>{n.d(t,{lT:()=>d});n(944114),n(898992),n(823215);var i=()=>n(906745),o=()=>n(720665),a=()=>n(416845);const r=7;function s(e,t){if(void 0===e)return i().DateTime.utc();const n={zone:t||"utc"};return"number"==typeof e?i().DateTime.fromMillis(e,n):i().DateTime.fromISO(e,n)}function l(e,t){const n=t?s(t):i().DateTime.utc(),o=s(e??function(e){const{days:t,endDate:n,startDate:i,timezone:o}=e;if(t<=0)throw new(a().yI4)("Days must be greater than 0");const r=s(n||void 0,o);if(!r.isValid)throw new(a().yI4)(`endDate ${n} is in an invalid format`);const l=i?s(i,o).toMillis():0,d=r.minus({days:t-1}).toMillis();return Math.max(d,l)}({days:r,endDate:t}));if(!o.isValid)throw new(a().yI4)(`startDate ${e} is in an invalid format`);if(!n.isValid)throw new(a().yI4)(`endDate ${t} is in an invalid format`);if(o>n)throw new(a().yI4)(`startDate ${e} => ${o.toISO()} is after endDate ${t} => ${n.toISO()}`);return{startTimestamp:o.toMillis(),endTimestamp:n.toMillis()}}function d(e,t){const{startTimestamp:n,endTimestamp:i}=l(e,t),a=[];let r=n;for(;r<=i;)a.push(s(r,void 0).toISODate()),r+=o().nD;return a}},240865:(e,t,n)=>{n.d(t,{V:()=>a});var i=()=>n(755531),o=()=>n(590526);function a(e){return(0,o().K8)((()=>{var t;return e?e.getMemberCountFromPublicSpaceData()??void 0:(null===(t=(0,i().S)())||void 0===t?void 0:t.getMemberCountFromPublicSpaceData())??void 0}),[e])}},243331:(e,t,n)=>{n.d(t,{K_:()=>o,Lf:()=>r});var i=()=>n(206267);function o(){return{currentScreen:"none",status:"not_started",isBackendConnected:!1,externalSourceName:void 0,sessionId:i().JW(),analyticsFrom:"unknown",isConnected:!1,isPersonalAuthComplete:!1,isDisconnecting:!1,isLoaded:!1,isNotionMailProhibited:!1}}class a extends(()=>n(757695))().Store{getInitialState(){return o()}}const r=new a;(0,n(852832).exposeDebugValue)("notionMailAIConnectorStore",r)},245720:(e,t,n)=>{n.d(t,{W:()=>i});const i=(0,n(69708).YK)({done:{id:"modal.doneButton",defaultMessage:"Done"},cancel:{id:"modal.cancelButton",defaultMessage:"Cancel"},back:{id:"modal.backButton",defaultMessage:"Back"}})},246679:(e,t,n)=>{n.d(t,{VK:()=>o,gv:()=>r});var i=()=>n(206267);function o(){return{currentScreen:"none",status:"not_started",isBackendConnected:!1,externalSourceName:void 0,sessionId:i().JW(),analyticsFrom:"unknown",isConnected:!1,isPersonalAuthComplete:!1,isDisconnecting:!1,isLoaded:!1,isNotionCalendarProhibited:!1}}class a extends(()=>n(757695))().Store{getInitialState(){return o()}}const r=new a;(0,n(852832).exposeDebugValue)("notionCalendarAIConnectorStore",r)},262661:(e,t,n)=>{n.d(t,{i:()=>o});var i=()=>n(130382);function o(e){const t=e.getSettings(),n=null==t?void 0:t.signup_time;return n?(0,i().Mn)(n):null}},266685:(e,t,n)=>{n.d(t,{a:()=>l});n(296540);var i=()=>n(819121),o=()=>n(401497),a=()=>n(451306),r=()=>n(100622),s=n(474848);function l(e){const{disabled:t,checked:n,selectorSize:l}=e,[d,c]=(0,i().A)(),u=function(e){const{checked:t,disabled:n,isFocusVisible:i,selectorSize:a}=e;return(0,o().IS)((()=>({root:{position:"absolute",display:"flex",width:15,height:15,padding:5,margin:1.5,justifyContent:"center",alignItems:"center",gap:8,flexShrink:0,borderRadius:"50%",transition:"background 100ms ease-out",...t?{boxShadow:`0 0 0 1.5px ${n?r().Tj.background.tertiaryTranslucent:r().Tj.blue.background.accentPrimary}`,background:n?r().Tj.background.tertiaryTranslucent:r().Tj.blue.background.accentPrimary}:{boxShadow:`0 0 0 1.5px ${n?r().Tj.background.tertiaryTranslucent:r().Tj.border.strongTranslucent}`,background:r().Tj.background.primary},...i&&{boxShadow:r().Tj.buttonBlueFocusRing}},active:{background:t?r().Tj.blueButtonPressedBackground:r().Tj.buttonHoveredBackground},input:{opacity:0,width:"small"===a?14:18,height:"small"===a?14:18,...n?{pointerEvents:"none"}:{cursor:"pointer"}}})),[t,n,i,a])}({checked:n,disabled:t,isFocusVisible:c,selectorSize:l});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{ref:d,type:"radio",style:u.input,className:"radio-button",...e}),(0,s.jsx)("span",{...(0,a().ow)("custom-radio-button",u.root,t?{}:{pseudoActive:u.active})})]})}},269345:(e,t,n)=>{n.d(t,{_:()=>B});n(296540);var i=()=>n(484714),o=()=>n(590526),a=()=>n(401497),r=()=>n(75435),s=()=>n(127833),l=()=>n(30537),d=()=>n(695115),c=()=>n(26697),u=()=>n(526278),p=()=>n(940563),m=()=>n(617668),g=()=>n(69708),y=()=>n(899963),b=()=>n(109488),f=()=>n(44551),v=()=>n(116749);var h=()=>n(896922),x=()=>n(564704),S=()=>n(800140),A=()=>n(917908),w=()=>n(551253),k=()=>n(712505),T=()=>n(35392),I=n(474848);const j=(0,g().YK)({newTabButton:{id:"desktopTopbarBrowserHistoryButton.newTabButton.label",defaultMessage:"New tab"},goBackButton:{id:"desktopTopbarBrowserHistoryButtons.goBackButton.label",defaultMessage:"Go back"},goForwardButton:{id:"desktopTopbarBrowserHistoryButton.goForwardButton.label",defaultMessage:"Go forward"}});function C(){const e=(0,g().tz)(),t=(0,o().K8)((()=>r().A.state.isTabPositionSupported),[]);return(0,I.jsx)(c().m,{renderTooltip:()=>(0,I.jsxs)("div",{style:{display:"flex"},children:[e.formatMessage(j.newTabButton),(0,I.jsx)(T().A,{name:"newTab",style:{opacity:.5,marginInlineStart:4}})]}),placement:"bottom",alignment:"center",originGap:6,render:n=>(0,I.jsx)(d().A,{ariaLabel:e.formatMessage(j.newTabButton),icon:{icon:m().plusIcon,size:"lg"},colorVariant:"primary",className:"notion-new-tab-button",style:{position:"relative"},onClick:()=>function(e){f().electronApi&&null!==f().electronApi&&void 0!==f().electronApi&&f().electronApi.newTab?f().electronApi.newTab():(0,v().V)({url:"",makeTabActive:!0,position:e?"end":"start"})}(t),...n})})}function M({isNavigationHistorySupported:e}){const t=(0,g().tz)(),n=(0,i().v3)(),a=(0,o().K8)((()=>!A().H.canGoBack()),[]);return(0,I.jsx)(c().m,{renderTooltip:()=>(0,I.jsxs)("div",{style:{display:"flex"},children:[t.formatMessage(j.goBackButton),(0,I.jsx)(T().A,{name:"goBack",style:{opacity:.5,marginInlineStart:4}})]}),placement:"bottom",alignment:"center",originGap:6,render:i=>(0,I.jsx)(d().A,{ariaLabel:t.formatMessage(j.goBackButton),icon:{icon:u().arrowStraightLeftIcon,size:"lg"},colorVariant:"primary",className:"notion-history-back-button",disabled:a,style:{position:"relative",width:24,height:24},onClick:t=>function(e,t,n){y().Lt(t,{type:"back"});const i=e.metaKey||e.ctrlKey;n&&i?(0,x().Y)(t,"back"):(0,h().a)(t)}(t,n,e),onContextMenu:()=>{!a&&e&&w().I.setState({direction:"back",open:!0})},...i})})}function P({isNavigationHistorySupported:e}){const t=(0,g().tz)(),n=(0,i().v3)(),a=(0,o().K8)((()=>!A().H.canGoForward()),[]);return(0,I.jsx)(c().m,{renderTooltip:()=>(0,I.jsxs)("div",{style:{display:"flex"},children:[t.formatMessage(j.goForwardButton),(0,I.jsx)(T().A,{name:"goForward",style:{opacity:.5,marginInlineStart:4}})]}),placement:"bottom",alignment:"center",originGap:6,render:i=>(0,I.jsx)(d().A,{ariaLabel:t.formatMessage(j.goForwardButton),icon:{icon:p().arrowStraightRightIcon,size:"lg"},colorVariant:"primary",className:"notion-history-forward-button",disabled:a,style:{position:"relative",width:24,height:24},onClick:t=>function(e,t,n){y().Lt(t,{type:"forward"});const i=e.metaKey||e.ctrlKey;n&&i?(0,x().Y)(t,"forward"):(0,S().s)(t)}(t,n,e),onContextMenu:()=>{!a&&e&&w().I.setState({direction:"forward",open:!0})},...i})})}function _(e){const{topbarFeatureController:t}=e,n=(0,o().K8)((()=>{var e;return(null===(e=r().A.state.preferences)||void 0===e?void 0:e.isNavigationHistoryEnabled)&&r().A.state.isNavigationHistorySupported}),[]),i=(0,a().IS)((()=>({container:{position:"relative",display:"flex",flexShrink:0,gap:4}})),[]);return(0,I.jsx)(b().A,{capture:!0,render:e=>(0,I.jsxs)("div",{style:i.container,...e,children:[(0,I.jsx)(M,{isNavigationHistorySupported:n}),(0,I.jsx)(P,{isNavigationHistorySupported:n}),t.showNewTabButton?(0,I.jsx)(C,{}):null]})})}function B(e){const{topbarFeatureController:t}=e,{isElectron:n}=(0,i().Y0)(),a=(0,o().O$)(r().b),d=(0,o().K8)((()=>k().default.isCenterPeekOpen()),[]);return!n||a?null:(0,I.jsx)(s().zD,{trapFocus:!1,style:{background:"transparent",borderRadius:0,boxShadow:"none"},origin:(0,I.jsx)(_,{topbarFeatureController:t}),render:()=>(0,I.jsx)(_,{topbarFeatureController:t}),placementToOrigin:"center",alignmentToOrigin:"center",open:d,disableMouseCapture:!0,preventCaptureEsc:!0,preventScaleTransition:!0,preventOpacityTransition:!0,popupType:l().n.Popup})}},367241:(e,t,n)=>{n.r(t),n.d(t,{AnimatedEmojiBadge:()=>Yt().f,GetNotifiedFor:()=>u,InboxActionsMenu:()=>Dt().Ay,InboxNotificationSettingsButton:()=>_t,MobileInboxPopup:()=>Et,NotificationInboxPanelContent:()=>$t,SidebarInboxButton:()=>Rt().SidebarInboxButton,UnreadMentionsBadge:()=>qt().A,UpdateSidebar:()=>rt});var i=n(296540),o=()=>n(590526),a=()=>n(401497),r=()=>n(69708),s=()=>n(100622),l=()=>n(284371),d=()=>n(123021),c=n(474848);function u(e){const{navigableBlockStore:t,from:n,buttonPopupStore:i,style:u}=e,p=(0,o().K8)((()=>t.isPageBlock()),[t]),m=(0,a().IS)((()=>({label:{fontSize:l().J.UIRegular.desktop,color:s().Tj.text.primary,fontWeight:l().Wy.medium},border:{border:`1px solid ${s().Tj.outlineButtonBorder}`,borderRadius:4,marginTop:8}})),[]);return p?(0,c.jsxs)("div",{style:u,children:[(0,c.jsx)("div",{style:m.label,children:(0,c.jsx)(r().sA,{id:"UpdateSidebarTabUpdatesHeader.pageNotificationSettings.label",defaultMessage:"Page notification settings"})}),(0,c.jsx)("div",{style:m.border,children:(0,c.jsx)(d().O,{blockStore:t,from:n,buttonPopupStore:i,renderType:"select"})})]}):null}n(898992),n(737550);var p=()=>n(907258),m=()=>n(884780),g=()=>n(450104),y=()=>n(756117),b=()=>n(484714),f=()=>n(795732),v=()=>n(882722),h=()=>n(463438),x=()=>n(175947),S=()=>n(534177),A=()=>n(899963),w=()=>n(146594),k=()=>n(272509),T=()=>n(517223),I=()=>n(346),j=()=>n(567121),C=()=>n(151838),M=()=>n(326589),P=()=>n(869562),_=()=>n(174422),B=()=>n(644914),E=()=>n(737230),F=()=>n(39341),U=()=>n(712505),N=()=>n(423817),D=()=>n(907595),R=(n(581454),()=>n(906745)),V=()=>n(611648),O=()=>n(779315),W=()=>n(914795),z=()=>n(376254),L=(n(823215),n(354520),n(430670),n(908872),()=>n(968526)),K=()=>n(726637),H=()=>n(609679),X=()=>n(849255),$=()=>n(730240),Y=()=>n(250910),q=()=>n(27455),G=()=>n(396896),J=()=>n(807449),Z=()=>n(98126),Q=()=>n(546926),ee=()=>n(406094),te=()=>n(631524),ne=()=>n(26697),ie=()=>n(302501),oe=()=>n(890492),ae=()=>n(869190),re=()=>n(604995),se=()=>n(324254),le=()=>n(333603),de=()=>n(212727),ce=()=>n(395546),ue=()=>n(721479),pe=()=>n(158469),me=()=>n(72135),ge=()=>n(310442),ye=()=>n(824862),be=()=>n(798880),fe=()=>n(496603),ve=()=>n(821062),he=()=>n(769864),xe=()=>n(466721),Se=()=>n(110886),Ae=()=>n(722267),we=()=>n(59976),ke=()=>n(299545),Te=()=>n(232930),Ie=()=>n(997583),je=()=>n(38554),Ce=()=>n(436525),Me=()=>n(64790),Pe=()=>n(20953),_e=()=>n(256863),Be=()=>n(453697),Ee=()=>n(687110);const Fe=Date.now();function Ue({store:e,spaceId:t,isDisabledForWorkspace:n}){const[l,d]=(0,i.useState)("last_28_days"),[u,m]=(0,i.useState)({state:n?"disabled-for-workspace":"loading"}),g=(0,b().v3)(),y=(0,je().U)(),f=(0,o().K8)((()=>{const{sidebarSpaceStore:e}=p().default.state;return null==e?void 0:e.getName()}),[]),v=(()=>{switch(l){case"last_7_days":return 7;case"last_28_days":return 28;case"last_90_days":return 90;case"all_time":return}})();(0,i.useEffect)((()=>{n||async function(){const n=await he().callApi({eventName:"getPageAnalytics",environment:g,data:{pageId:e.id,spaceId:t,days:v}});if("failed"===n.type)return void m({state:"empty"});const i=n.data.map((({ds:e,total_views:t,unique_views:n})=>({ds:e,values:{total_views:t,unique_views:n}})));i.filter((({ds:e})=>re().C6.isoToUnixMs(e,"UTC")??Fe<=Fe)).every((({values:e})=>0===e.total_views))?m({state:"empty"}):m({state:"loaded",data:i})}()}),[g,e.id,n,t,v]);const h=(0,a().IS)((()=>({fullHeight:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}})),[]);return"loading"===u.state?(0,c.jsx)("div",{style:h.fullHeight,children:(0,c.jsx)(Z().k,{size:"xl"})}):"empty"===u.state?(0,c.jsx)("div",{style:h.fullHeight,children:(0,c.jsx)($e,{heading:(0,c.jsx)(r().sA,{id:"page_analytics.empty.heading",defaultMessage:"No page analytics yet"}),description:(0,c.jsx)(r().sA,{id:"page_analytics.empty.description",defaultMessage:"It may take some time for page view information to appear."})})}):"disabled-for-workspace"===u.state?(0,c.jsx)("div",{style:h.fullHeight,children:(0,c.jsx)($e,{heading:(0,c.jsx)(r().sA,{id:"page_analytics.disabled.heading",defaultMessage:"Page viewership tracking is disabled"}),description:(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:16},children:[f?(0,c.jsx)(r().sA,{id:"page_analytics.disabled.description",defaultMessage:"Page viewership and analytics is turned off for all pages in {name}",values:{name:f}}):(0,c.jsx)(r().sA,{id:"page_analytics.disabled.description.unnamed",defaultMessage:"Page viewership and analytics is turned off for all pages in your space"}),(0,c.jsx)(te().p,{size:"sm",iconLeading:ue().questionMarkCircleSmallIcon,colorPalette:"gray",href:(0,Te().x)("guides.pageAnalytics"),external:!0,children:(0,c.jsx)(r().sA,{id:"page_analytics.disabled.learnMore",defaultMessage:"Learn more"})})]})})}):(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%"},children:[(0,c.jsxs)(G().VP,{grow:1,gap:16,children:[(0,c.jsx)(Re,{store:e,data:u.data,currentFilter:l,onChangeFilter:d}),(0,c.jsx)(Oe,{store:e}),(0,c.jsx)(Xe,{spaceId:t,store:e})]}),y?void 0:(0,c.jsxs)("div",{style:{borderTop:`1px solid ${s().Tj.border.secondaryTranslucent}`,padding:"12px 16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,c.jsx)(Y().A,{renderOrigin:({onClick:e})=>(0,c.jsx)(ee().A,{size:"lg",onClick:e,iconLeading:de().gearIcon,children:(0,c.jsx)(r().sA,{id:"page_analytics.timeseries.settings",defaultMessage:"Settings"})}),popupType:K().A.isMobile?Y().z.SlideUp:Y().z.Popup,render:()=>(0,c.jsx)(oe().A,{menuType:Q().gu.Popup,width:460,children:(0,c.jsx)("div",{style:De,children:(0,c.jsx)(Ee().PageAnalyticsPageOptOut,{store:e})})})}),(0,c.jsx)(te().p,{size:"sm",iconLeading:ue().questionMarkCircleSmallIcon,colorPalette:"gray",href:(0,Te().x)("guides.pageAnalytics"),external:!0,children:(0,c.jsx)(r().sA,{id:"page_analytics.timeseries.learnMore",defaultMessage:"Learn more"})})]})]})}const Ne=175,De={margin:"8px 16px",pointerEvents:"auto",cursor:"default"};function Re(e){const[t,n]=(0,Ie().z)(),{blueLayer:o,yellowLayer:a}=(0,L().useTimeSeriesPalette)(),s=(0,i.useMemo)((()=>{if(0===e.data.length)return Fe;const t=re().C6.isoToUnixMs(e.data[0].ds,"UTC")??Fe;return Math.min(t,Fe)}),[e.data]);return(0,c.jsxs)("div",{children:[(0,c.jsx)(Ve,{store:e.store,data:e.data,currentFilter:e.currentFilter,onChangeFilter:e.onChangeFilter}),(0,c.jsx)("div",{ref:t,style:{...De,marginBottom:0},children:(0,c.jsx)(we().b,{startDate:(0,ae().aD)(s,!0),endDate:(0,ae().aD)(Fe,!0),width:n,height:Ne,data:e.data,layers:[{key:"total_views",...o,renderLabel:e=>(0,c.jsx)(r().sA,{id:"page_analytics.timeseries.total_views",defaultMessage:"{views, plural, one {1 total view} other {{views} total views}}",values:{views:e}})},{key:"unique_views",...a,renderLabel:e=>(0,c.jsx)(r().sA,{id:"page_analytics.timeseries.unique_views",defaultMessage:"{uniqueViews, plural, one {1 unique view} other {{uniqueViews} unique views}}",values:{uniqueViews:e}})}]})})]})}function Ve(e){const t=(0,r().tz)(),n=(0,i.useMemo)((()=>e.data.reduce(((e,{values:t})=>e+t.total_views),0)),[e.data]);return(0,c.jsx)("div",{style:{margin:"14px 16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,c.jsxs)(G().fI,{justifyContent:"space-between",alignItems:"center",grow:1,children:[(0,c.jsxs)(G().fI,{gap:4,children:[(0,c.jsx)(ie().A,{style:{fontWeight:500},children:(0,c.jsx)(r().sA,{id:"page_analytics.timeseries.title",defaultMessage:"Views"})}),(0,c.jsx)(ie().A,{isSecondaryColor:!0,children:(0,c.jsx)(r().sA,{id:"page_analytics.timeseries.totalViews",defaultMessage:"({totalViews} total)",values:{totalViews:(0,me().ZV)(n,"number_with_commas",t)}})})]}),(0,c.jsx)(Pe().Z,{currentFilter:e.currentFilter,onChangeFilter:e.onChangeFilter,hideLast365Days:!0})]})})}function Oe(e){const{store:t}=e,{pageVisitStore:n,presenceStore:a}=(0,o().K8)((()=>({pageVisitStore:p().default.state.pageVisitStore,presenceStore:p().default.state.presenceStore})),[]),s=(0,b().v3)(),l=(0,je().U)();(0,i.useEffect)((()=>{xe().updatePageVisits(s,{blockStore:t,pageVisitStore:n,incremental:!1,limit:xe().STORE_MAX_LIMIT})}),[s,t,n]);const{visitors:d,totalCount:u,hasMore:m}=(0,o().K8)((()=>({visitors:(0,Me().PZ)({pageVisitStore:n,presenceStore:a}),totalCount:n.state.totalCount,hasMore:n.state.hasMore})),[n,a]);if(0===d.length)return null;const g=d.map((({userId:e,activityTimestampNearestMinuteMs:n,onTrustedDomain:i})=>({actorStore:X().L.createChildStore(t,{id:e,table:be().oo}),timestamp:n,onTrustedDomain:i})));return(0,c.jsxs)("div",{style:{...De,display:"flex",flexDirection:"column",gap:12},children:[(0,c.jsx)(ie().A,{style:{fontWeight:500},children:(0,c.jsx)(r().sA,{id:"page_analytics.viewers.title",defaultMessage:"Viewers"})}),l?(0,c.jsx)(q().Zp,{colorPalette:"gray",padding:"md",children:(0,c.jsx)(Ee().PageAnalyticsPageOptOut,{store:t})}):void 0,(0,c.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:(0,c.jsx)(ze,{store:t,actorStores:g,collapsedLabel:(0,c.jsx)(r().sA,{id:"page_analytics.viewers.expand",defaultMessage:"Show more viewers"}),expandedLabel:(0,c.jsx)(r().sA,{id:"page_analytics.viewers.collapse",defaultMessage:"Show less viewers"}),totalCount:u,hasMore:m})})]})}const We=5;function ze(e){const{store:t,actorStores:n,collapsedLabel:o,expandedLabel:a}=e,[s,l]=(0,i.useState)(!0),d=s?n.slice(0,We):n,u=e.totalCount?e.totalCount-d.length:void 0;return(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[d.map((({actorStore:e,timestamp:n,onTrustedDomain:i})=>(0,c.jsx)(Le,{store:t,actorStore:e,timestamp:n,onTrustedDomain:i},e.id))),u&&!s?(0,c.jsx)(ie().A,{isSmall:!0,children:e.hasMore?(0,c.jsx)(r().sA,{id:"page_analytics.viewers.andMorePlus",defaultMessage:"And {count}+ more...",values:{count:u}}):(0,c.jsx)(r().sA,{id:"page_analytics.viewers.andMore",defaultMessage:"And {count} more...",values:{count:u}})}):void 0,n.length>We?(0,c.jsx)("button",{onClick:e=>{e.preventDefault(),l(!s)},style:{background:"none",border:"none",textAlign:"start",padding:0,marginTop:4},children:(0,c.jsxs)(ie().A,{isSecondaryColor:!0,isSmall:!0,style:{display:"flex",gap:3,alignItems:"center"},children:[s?o:a,s?(0,c.jsx)(J().I,{icon:se().arrowChevronSingleDownSmallIcon,size:"xs"}):(0,c.jsx)(J().I,{icon:le().Y,size:"xs"})]})},"toggle"):void 0]})}function Le(e){const{store:t,actorStore:n,timestamp:s,onTrustedDomain:l}=e,d=(0,r().tz)(),u=(0,i.useMemo)((()=>{const e=Date.now();return(0,ae().v9)(Math.min(s??e,e),H().locale)}),[s]),p=(0,o().K8)((()=>n.getDisplayName(d)),[n,d]),m=(0,o().K8)((()=>t.getSpaceStore()),[t]),g=(0,a().IS)((()=>({tooltip:{marginTop:2}})),[]);return(0,c.jsxs)(G().fI,{alignItems:"center",justifyContent:"space-between",children:[(0,c.jsx)(Ce().D,{userStore:n.table===be().oo?n:void 0,spaceStore:m,children:(0,c.jsxs)(G().fI,{gap:4,alignItems:"center",children:[(0,c.jsx)(Ke,{actorStore:n}),(0,c.jsx)(ie().A,{style:{fontWeight:500},children:p})]})}),(0,c.jsxs)(G().fI,{gap:4,children:[(0,c.jsx)(ie().A,{isSecondaryColor:!0,children:s?(0,c.jsx)("span",{title:(0,ae().W_)(s,"medium_with_time",H().locale),children:u}):u}),l?(0,c.jsx)("div",{style:g.tooltip,children:(0,c.jsx)(ne().m,{renderTooltip:()=>(0,c.jsx)(r().sA,{id:"page_analytics.viewers.sharedEmailDomainUser.tooltip.message",defaultMessage:"Shared email domain user"}),render:e=>(0,c.jsx)("div",{...e,children:(0,c.jsx)(J().I,{icon:ce().infoCircleSmallIcon,size:"sm",colorVariant:"secondary"})}),placement:"bottom"})}):void 0]})]})}function Ke(e){const{actorStore:t}=e;return t.table===ye().GP?(0,c.jsx)(_e().A,{botStore:t,size:18}):t.table===be().oo?(0,c.jsx)(Be().A,{userStore:t,size:18}):t.table===ge().yj?(0,c.jsx)(Be().A,{userStore:void 0,size:18}):void(0,S().HB)(t)}function He(e){const{environment:t,store:n,spaceId:a}=e,[,,r]=(0,o().$y)(void 0,Ae().L),[s,l]=(0,i.useState)([]);(0,i.useEffect)((()=>{Se().r(t,{store:r,activityIds:s,spaceId:a,filterActivityTypes:[],filterDateRange:{starting:void 0,ending:void 0},navigableBlockId:n.id})}),[s,r,a,n.id,t]);return(0,o().K8)((()=>{const e=r.state.activityIds;(0,ve().A)(s,e)||l(e);const{sidebarSpaceStore:t}=p().default.state;if(!t)return[];const i=s.map((e=>(0,ke().jA)(t,e,t.id))).flatMap((e=>{const t=e.getValue();return t?"top-level-block-created"!==t.type&&"top-level-block-deleted"!==t.type&&"block-edited"!==t.type?[]:function(e,t){var n;return fe().oE(null===(n=e.edits)||void 0===n?void 0:n.flatMap((e=>{var n;return null===(n=e.authors)||void 0===n?void 0:n.map((n=>({actorStore:(0,$().JQ)({parentStore:t,pointer:n}),timestamp:e.timestamp})))})))}(t,n):[]})),o=fe().Ul(i,"timestamp").reverse();return fe().hS(o,(e=>e.actorStore.id))}),[s,r,n])}function Xe(e){const{spaceId:t,store:n}=e,i=He({environment:(0,b().v3)(),spaceId:t,store:n}),a=(0,o().K8)((()=>{const e=n.getCreatedByPointer(),t=n.getCreatedTime();if(e&&t)return{actorStore:(0,$().JQ)({parentStore:n,pointer:e}),createdTime:t}}),[n]);return(0,c.jsxs)("div",{style:{...De,display:"flex",flexDirection:"column",gap:12},children:[(0,c.jsx)(ie().A,{style:{fontWeight:500},children:(0,c.jsx)(r().sA,{id:"page_analytics.editors.title",defaultMessage:"Editors"})}),a?(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:10,marginBottom:6},children:[(0,c.jsx)(ie().A,{isSmall:!0,isSecondaryColor:!0,style:{fontWeight:500},children:(0,c.jsx)(r().sA,{id:"page_analytics.editors.createdBy",defaultMessage:"Created by"})}),(0,c.jsx)(Le,{store:n,actorStore:a.actorStore,timestamp:a.createdTime})]}):void 0,i.length>0?(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[(0,c.jsx)(ie().A,{isSmall:!0,isSecondaryColor:!0,style:{fontWeight:500},children:(0,c.jsx)(r().sA,{id:"page_analytics.editors.editedBy",defaultMessage:"Recently edited by"})}),(0,c.jsx)(ze,{actorStores:i,store:n,collapsedLabel:(0,c.jsx)(r().sA,{id:"page_analytics.editors.expand",defaultMessage:"Show more editors"}),expandedLabel:(0,c.jsx)(r().sA,{id:"page_analytics.editors.collapse",defaultMessage:"Show less editors"}),totalCount:void 0,hasMore:void 0})]}):void 0]})}function $e(e){const t=(0,a().IS)((()=>({column:{display:"flex",flexDirection:"column"},centered:{textAlign:"center",alignItems:"center",width:250}})),[]);return(0,c.jsx)("div",{style:{...t.column,gap:24},children:(0,c.jsxs)("div",{style:{...t.column,...t.centered,gap:4},children:[(0,c.jsxs)(G().VP,{gap:16,alignItems:"center",children:[(0,c.jsx)(J().I,{icon:pe().f,size:"xl",colorVariant:"secondary"}),(0,c.jsx)(ie().A,{isSecondaryColor:!0,style:{fontSize:16,fontWeight:500},children:e.heading})]}),(0,c.jsx)(ie().A,{isSecondaryColor:!0,style:{whiteSpace:"normal",overflow:"visible"},children:e.description})]})})}function Ye({enablePageAnalytics:e}){const t=(0,o().O$)(p().AppStoreMainEditorCurrentBlockStore),n=(0,o().K8)((()=>{const e=R().DateTime.now().minus({years:1}).valueOf();return!!t&&t.getCreatedTime()<e}),[t]),i=(0,o().O$)(p().AppStoreSidebarSpaceStore),l=(0,o().K8)((()=>!(null!=t&&t.canRead())),[t]),d=(0,o().K8)((()=>{var e;const n=null==t?void 0:t.getModel();return t&&null!=n&&n.isCollectionView()?null===(e=t.getCollectionPointers())||void 0===e?void 0:e.map((e=>e.id)):void 0}),[t]),u=(0,o().K8)((()=>Boolean(null==i?void 0:i.getSettings().disable_page_analytics)),[i]),m=(0,je().U)(),g=(0,a().IS)((()=>({updatesEmptyStyle:{flex:1,display:"flex",justifyContent:"center",flexDirection:"column",textAlign:"center",color:s().Tj.text.secondary,fontSize:14,background:s().Tj.background.primary,marginInlineEnd:0,pointerEvents:"auto",height:"100%"},updatesNotEmptyStyle:{display:"flex",flexDirection:"column",flex:"1 1 0%",background:s().Tj.background.primary,marginInlineEnd:0,pointerEvents:"auto",marginTop:1,height:"100%",paddingBottom:m?64:0}})),[m]),y=(0,o().K8)((()=>E().Ay.state.updatesSubTab),[]);return l?(0,c.jsx)(z().H,{type:V().A.Y,style:g.updatesEmptyStyle,children:(0,c.jsx)("div",{style:{width:200,alignSelf:"center"},children:(0,c.jsx)(r().sA,{id:"updateSidebar.commentContainer.restricted",defaultMessage:"You don’t have permission to view the updates of this restricted page."})})}):i&&t?(0,c.jsxs)(z().H,{type:V().A.Y,ref:e=>{O().A.UpdateSidebarScroller=e},style:g.updatesNotEmptyStyle,children:[e?(0,c.jsx)("div",{style:{display:y===E().VE.Analytics?"block":"none",height:"100%"},children:(0,c.jsx)(Ue,{spaceId:i.id,store:t,isDisabledForWorkspace:u})}):void 0,(0,c.jsx)("div",{style:{display:y===E().VE.Updates?"block":"none"},children:(0,c.jsx)(W().A,{collectionIds:d,navigableBlockStore:t,spaceId:i.id,source:"updates_sidebar",empty:e=>(0,c.jsx)(z().H,{type:V().A.Y,style:g.updatesEmptyStyle,ref:e=>{O().A.UpdateSidebarScroller=e},children:(0,c.jsx)("div",{style:{width:200,alignSelf:"center"},children:e.hasFiltersOn?(0,c.jsx)(r().sA,{id:"updateSidebar.updatesContainer.emptyAfterSearch",defaultMessage:"No updates match the requested filters."}):n?(0,c.jsx)(r().sA,{id:"updateSidebar.updatesContainer.emptyMaybePurged",defaultMessage:"There are no recent updates on this page. Page updates are retained for one year."}):(0,c.jsx)(r().sA,{id:"updateSidebar.updatesContainer.empty",defaultMessage:"No updates on this page yet."})})})},t.id)})]}):null}function qe(){return(0,c.jsx)(r().sA,{id:"updateSidebar.header.updatesLabel",defaultMessage:"Updates"})}function Ge(){return(0,c.jsx)(r().sA,{id:"updateSidebar.header.analyticsLabel",defaultMessage:"Analytics"},"analytics")}const Je="UpdateSidebar";function Ze(e){const t=(0,b().v3)(),{enablePageAnalytics:n,inPeekView:i,noTopMargin:r}=e,d=(0,a().IS)((()=>({updatesHeaderStyle:{position:"relative",pointerEvents:"auto",marginTop:r?0:x().ek(t.device.isElectronMac),width:"100%",background:i?s().Tj.popoverBackground:s().Tj.background.primary,paddingTop:12,paddingInlineEnd:12,paddingBottom:12,paddingInlineStart:16,borderBottom:`1px solid ${s().Tj.border.secondaryTranslucent}`},label:{fontSize:14,color:s().Tj.text.primary,fontWeight:l().Wy.medium,margin:0,padding:0}})),[r,t.device.isElectronMac,i]),u=(0,o().K8)((()=>E().Ay.state.updatesSubTab),[]);return(0,c.jsx)("div",{style:{...d.updatesHeaderStyle,...n?{padding:"0 6px"}:{}},className:v().Kbf,children:n?(0,c.jsx)(h().LZ,{tabs:[(0,c.jsx)(qe,{},"updates"),(0,c.jsx)(Ge,{},"analytics")],selectedIndex:u,onChange:e.onTabChange,style:{...d.label,padding:0,boxShadow:"none"},tabStyle:{padding:"12px 0"},idPrefix:Je}):(0,c.jsx)("h2",{style:d.label,children:(0,c.jsx)(qe,{})})})}const Qe=i.memo((function(e){const{navigableBlockStore:t,timeViewed:n}=e,i=(0,o().K8)((()=>E().Ay.getTabForNewCommentsSidebar()),[]);switch(i){case E().UL.Comments:return(0,c.jsx)(D().R,{timeViewed:n,location:"sidebar"});case E().UL.Updates:case E().UL.Analytics:return(0,c.jsx)(Ye,{enablePageAnalytics:!0});case E().UL.Info:return(0,c.jsx)(w().H,{store:t,context:f().R.Frame,disabled:!1,shownAs:"sidebar"});default:return null}}));var et=()=>n(695115);const tt=i.memo((function(e){const{inPeekView:t,noTopMargin:d}=e,u=(0,b().v3)(),p=(0,b().Y0)(),m=(0,r().tz)(),g=(0,o().K8)((()=>E().Ay.getTabForNewCommentsSidebar()),[]),y=(0,i.useCallback)((e=>E().Ay.update((t=>({...t,...E().Ay.createUpdateForNewCommentsSidebar(e)})))),[]),f=(0,i.useCallback)((()=>{n(883497).A.setState({open:!1})}),[]),S=(0,a().IS)((()=>({updatesHeaderStyle:{position:"relative",pointerEvents:"auto",marginTop:d?0:x().ek(u.device.isElectronMac),paddingTop:4,width:"100%",background:t?s().Tj.popoverBackground:s().Tj.background.primary,paddingInlineEnd:8},label:{fontSize:14,color:s().Tj.text.primary,fontWeight:l().Wy.medium,boxShadow:"none"},tabStyle:{padding:"12px 0"},tabBorderStyle:{insetInlineStart:0,insetInlineEnd:0}})),[d,u.device.isElectronMac,t]),A=(0,a().IS)((()=>({tabSwitcherButton:{display:"flex",alignItems:"center",gap:4,fontWeight:l().Wy.semibold,borderRadius:6,paddingInlineStart:6,paddingInlineEnd:6,paddingTop:4,paddingBottom:4,marginTop:7,marginBottom:7},titleWrapper:{display:"flex",justifyContent:"center",alignItems:"center"},closeButton:{position:"absolute",insetInlineEnd:12,borderRadius:"50%",background:s().Tj.background.tertiaryTranslucent}})),[]);return p.isPhone?(0,c.jsxs)("div",{style:A.titleWrapper,children:[(0,c.jsx)("div",{style:A.tabSwitcherButton,children:(0,c.jsx)(r().sA,{id:"commentsSidebarTabSwitcher.header.discussionsLabel",defaultMessage:"All discussions"})}),(0,c.jsx)(et().A,{icon:n(297813).xMarkFillIcon,onClick:f,style:A.closeButton,ariaLabel:m.formatMessage({id:"commentsSidebarTabSwitcher.header.closeLabel",defaultMessage:"Close"})})]}):(0,c.jsx)("div",{style:S.updatesHeaderStyle,className:v().Kbf,children:(0,c.jsx)(h().LZ,{tabs:[],selectedIndex:g,onChange:y,style:S.label,tabStyle:S.tabStyle,tabBorderStyle:S.tabBorderStyle,idPrefix:Je})})}));function nt(e){const{currentTab:t,navigableBlockStore:n}=e,a=(0,o().K8)((()=>p().default.isInitialRenderComplete()),[]),[r,s]=(0,i.useState)(!1),l=(0,i.useMemo)((()=>Date.now()),[]),d=(0,o().K8)((()=>E().Ay.state.timeOpenedComments),[]),u=void 0!==d?Math.max(l,d):l;if((0,i.useEffect)((()=>{!r&&a&&s(!0)}),[n.id,r,a]),!n||!r)return(0,c.jsx)(N().J,{areaHeight:window.innerHeight});switch(t){case E().tF.Comments:return(0,c.jsx)(Qe,{navigableBlockStore:n,timeViewed:u});case E().tF.Updates:return(0,c.jsx)(Ye,{enablePageAnalytics:e.enablePageAnalytics});case E().tF.Info:return(0,c.jsx)(w().H,{store:n,context:f().R.Frame,disabled:!1,shownAs:"sidebar"});default:return(0,c.jsx)(D().R,{timeViewed:u,location:"sidebar"})}}function it(e){const t=(0,r().tz)(),n=(0,o().K8)((()=>({width:E().Ay.state.width,isAnimating:E().Ay.state.isAnimating,currentTab:E().Ay.state.currentTab})),[]),l=(0,I().n_)(),{shouldLoadSidebarComponents:d,isExpanded:u}=e,p=(0,i.useRef)(null),b=(0,o().K8)((()=>F().p.state.banners.some((e=>"LoggedOutAppBanner"===e.id))?F().p.state.height??0:0),[]),[f,v]=(0,i.useState)(!1);(0,i.useEffect)((()=>{const e=requestAnimationFrame((()=>v(!0)));return()=>cancelAnimationFrame(e)}),[]);const h=(0,a().IS)((()=>({container:{flexGrow:0,flexShrink:0,width:n.width,zIndex:102,borderInlineStart:u?`1px solid ${s().Tj.border.secondaryTranslucent}`:"1px solid rgba(0,0,0,0)",alignSelf:"flex-end",position:"absolute",insetInlineEnd:0,top:b,height:l?`calc(100vh - ${j().ls-b}px)`:`calc(100vh - ${b}px)`,pointerEvents:"none"},wrap:{height:"100%"},content:{position:"absolute",top:0,bottom:0,display:"flex",flexDirection:"column",overflow:"visible",zIndex:102,width:n.width}})),[n.width,u,l,b]);let x;return n.currentTab===E().tF.Comments?x=t.formatMessage({id:"updateSidebar.commentsAriaLabel",defaultMessage:"Page comments"}):n.currentTab===E().tF.Info?x=t.formatMessage({id:"updateSidebar.infoAriaLabel",defaultMessage:"Info"}):n.currentTab===E().tF.Updates?x=t.formatMessage({id:"updateSidebar.updatesAriaLabel",defaultMessage:"Page updates and analytics"}):(0,S().HB)(n.currentTab),d?(0,c.jsx)(y().A,{tag:"aside",visible:u,initial:{translateX:"100%"},animate:{translateX:0},exit:{translateX:"100%"},skip:!f,onAnimationStart:()=>{E().Ay.setState({...E().Ay.state,isAnimating:!0})},onAnimationEnd:()=>{E().Ay.setState({...E().Ay.state,isAnimating:!1})},ref:p,style:h.container,onMouseMove:()=>{n.isAnimating||E().Ay.setState({...E().Ay.state,mouseEntered:!0})},onMouseLeave:()=>{n.isAnimating||E().Ay.setState({...E().Ay.state,mouseEntered:!1})},"aria-hidden":!u||void 0,"aria-label":x,children:(0,c.jsx)("div",{style:h.wrap,children:(0,c.jsx)("div",{style:h.content,children:(0,c.jsx)(m().K,{from:"UpdateSidebar",fallback:({error:e,errorId:t})=>(0,c.jsx)(g().LargeSurfaceRenderError,{error:e,errorId:t}),children:(0,c.jsx)(at,{...e})})})})}):null}function ot({enablePageAnalytics:e,navigableBlockStore:t,onTabChange:n}){const i=(0,b().v3)(),r=(0,o().K8)((()=>E().Ay.state.currentTab),[]),s=(0,a().IS)((()=>({commentsHeaderStyle:{position:"relative",pointerEvents:"auto",marginTop:x().ek(i.device.isElectronMac)}})),[i]);switch(r){case E().tF.Comments:return(0,c.jsx)(tt,{});case E().tF.Updates:return(0,c.jsx)(Ze,{navigableBlockStore:t,enablePageAnalytics:e,onTabChange:n});case E().tF.Info:default:return(0,c.jsx)("div",{style:s.commentsHeaderStyle})}}function at(e){const{isResizerHovered:t,isResizing:n,currentTab:r,expanded:l,updatesSubTab:d}=(0,o().K8)((()=>{const{isResizerHovered:e,isResizing:t,currentTab:n,expanded:i,updatesSubTab:o}=E().Ay.state;return{isResizerHovered:e,isResizing:t,currentTab:n,expanded:i,updatesSubTab:o}}),[]),{currentBlockStore:u}=e,y=(0,b().v3)(),f=(0,i.useRef)(null),x=(0,o().K8)((()=>u.isCollectionView()&&!u.isCollectionViewPageWithContent()?E().tF.Updates:r),[u,r]),S=(0,o().K8)((()=>{const{sidebarSpaceStore:e}=p().default.state;return!(!e||(0,k().I)(e))}),[]),w=i.useCallback((e=>{A().XI(y,{tab:e===E().VE.Updates?"updates":"analytics",origin:U().default.state.open?"peek_view":"page"}),E().Ay.setState({...E().Ay.state,updatesSubTab:e})}),[y]),T=(0,a().IS)((()=>({pane:{display:"flex",flexDirection:"column",height:"100%",position:"relative",pointerEvents:"none",maxHeight:"100%",backgroundColor:r===E().tF.Comments?void 0:"inherit"},resizerStyle:{position:"absolute",top:0,insetInlineStart:-3,bottom:0,insetInlineEnd:0,height:"100vh",width:3,zIndex:-1,display:"block",transition:"box-shadow 300ms ease-in",...(t||n)&&l?{boxShadow:s().Tj.sidebarResizerBoxShadow}:{}},tabpanel:{display:"flex",flexDirection:"column",flex:"1 1 0",overflow:"hidden"}})),[r,t,n,l]),I=d?(0,E().aP)(d):(0,E().J)(x),j=(0,c.jsx)(m().K,{from:`UpdateSidebarContent.${I}`,fallback:({error:e,errorId:t})=>(0,c.jsx)(g().LargeSurfaceRenderError,{error:e,errorId:t}),children:(0,c.jsx)(nt,{navigableBlockStore:u,currentTab:x,enablePageAnalytics:S})});return(0,c.jsxs)("div",{ref:f,style:T.pane,className:v().YDC,children:[(0,c.jsx)("div",{style:T.resizerStyle}),(0,c.jsx)(ot,{enablePageAnalytics:S,navigableBlockStore:u,onTabChange:w}),S?(0,c.jsx)("div",{style:T.tabpanel,role:"tabpanel",id:(0,h().Jy)(Je,x),"aria-labelledby":(0,h().vU)(Je,x),children:j}):j,l?(0,c.jsx)(_().A,{sidebarRef:f,type:"update"}):void 0]})}function rt(e){const{isElectronMac:t,currentBlockStore:n}=e,{canRender:a,isAnimating:r}=(0,o().K8)((()=>({canRender:E().Ay.state.canRender,isAnimating:E().Ay.state.isAnimating})),[]),s=(0,o().O$)(p().AppStoreSidebarSpaceStore),l=(0,i.useMemo)((()=>null==s?void 0:s.clone()),[s]),d=(0,b().v3)(),{isExpanded:u,closeSidebar:m}=(0,o().K8)((()=>({isExpanded:(0,B().Nk)(d),closeSidebar:()=>P().setUpdateExpand({environment:d,isExpanded:!1,from:"close_for_space",saveDetailsSidebarPreference:!0})})),[d]),[g,y]=(0,i.useState)(!1),[f,v]=(0,i.useState)(void 0);(0,i.useEffect)((()=>{(void 0===f||f===n.id)&&u&&(y(!0),v(n.id))}),[f,n,u]);const h=(0,o().K8)((()=>n.getAssociatedCollectionStore()),[n]);if(!(0,o().K8)((()=>{if(!a)return!1;if(l)return!0;if((0,M().g)())return!0;if(!h)return!1;const{count:e}=(0,T().pm)({collectionStore:h});return e>0}),[h,a,l]))return null;const x=()=>(0,c.jsx)(it,{isElectronMac:t,isFullyExpanded:!r,currentBlockStore:n,isExpanded:u,closeSidebar:m,shouldLoadSidebarComponents:g});return l?(0,c.jsx)(C().A,{store:l,droppable:!0,render:x},(null==l?void 0:l.id)||n.id):x()}var st=()=>n(300474),lt=()=>n(755531),dt=()=>n(933922),ct=()=>n(991003),ut=()=>n(201794),pt=()=>n(498521),mt=()=>n(187174),gt=()=>n(879765),yt=()=>n(763824),bt=()=>n(848259),ft=()=>n(279922),vt=()=>n(554413),ht=()=>n(424039),xt=()=>n(371015),St=()=>n(590707),At=()=>n(266945),wt=()=>n(920546),kt=()=>n(885247),Tt=()=>n(340498),It=()=>n(744988),jt=()=>n(900652),Ct=()=>n(624307),Mt=()=>n(404141);function Pt({location:e}){const t=(0,r().tz)(),n=(0,b().v3)(),o=(0,i.useCallback)((()=>{bt().fP(n),K().A.isMobile?Ct().A.setState({open:!0,source:Ct().C.Updates}):(It().A.setState({...It().A.state,open:!1}),Mt().Ay.setState({...Mt().Ay.state,currentTab:"notifications",defaultSubtab:void 0}),Mt().Ay.setState({...Mt().Ay.state,open:!0}))}),[n]),l=(0,jt().zg)(),d=(0,a().IS)((()=>({mobileTopBarIcon:{height:Tt().lD.default,width:Tt().lD.default,fill:s().Tj.text.primary},webUpdatesModalIcon:{width:16,height:16},button:K().A.isMobile?{height:30,width:30}:l.button})),[l.button]);let u;switch(e){case"mobileTopBar":u=d.mobileTopBarIcon;break;case"webUpdatesModal":u=d.webUpdatesModalIcon;break;default:(0,S().HB)(e)}return(0,c.jsx)(ne().m,{renderTooltip:()=>(0,c.jsx)(r().sA,{defaultMessage:"Open notifications settings",id:"updatesModal.openNotifications.tooltip"}),render:e=>(0,c.jsx)(et().A,{style:d.button,icon:de().gearIcon,iconStyle:u,onClick:o,ariaLabel:t.formatMessage({id:"updatesModal.openNotifications.tooltipAriaLabel",defaultMessage:"Open notifications settings button"}),...e})})}const _t=i.memo(Pt);var Bt=()=>n(393065);function Et(e){const t=(0,b().Y0)(),n=(0,b().v3)();(0,i.useEffect)((()=>()=>(bt().L_(n),void xt()._V({environment:n,newTab:"mentions",shouldTrack:!1}))),[n]);const o=(0,a().IS)((()=>({padding:{width:1}})),[]);let r;if(K().A.isMobile){const n="mobileTopBar";r={menuType:Q().gu.Modal,title:(0,c.jsx)(kt().R,{}),width:e.format===vt().Cn.RenderAsPage?"100vw":void 0,renderAsPage:e.format===vt().Cn.RenderAsPage,leftRightButtonStyle:{paddingInlineEnd:14},right:[(0,c.jsx)(_t,{location:n},"InboxNotificationSettingsButton"),(0,c.jsx)("span",{style:o.padding},"paddingSpan2"),(0,c.jsx)(wt().F,{},"InboxFilterButton"),(0,c.jsx)("span",{style:o.padding},"paddingSpan1"),(0,c.jsx)(St().C,{},"InboxEllipsisButton")],left:[(0,c.jsx)(Nt,{},"loading-spinner"),t.isPhone&&(0,ut().T)("supportsNativeHome")&&e.format===vt().Cn.RenderAsPage&&!(0,ut().T)("supportsNativeInbox")?void 0:(0,c.jsx)(J().I,{icon:gt().$,size:"lg"})],onClickLeft:e.onClose,whiteBackground:!0,disableHeaderShadow:!0}}else r={menuType:Q().gu.Popup,height:"auto"};return(0,c.jsxs)(oe().A,{...r,className:v().e3e,children:[(0,c.jsx)(pt().A,{onChange:(e,{offsetFromTop:t})=>{ft().gJ.setState(t<=0)}}),(0,c.jsx)(dt().A,{capture:!0,allowUndo:!0,allowEsc:!0,allowMobileAutoScroll:!0,render:()=>e.format===vt().Cn.RenderAsPage?(0,c.jsx)(Ut,{}):(0,c.jsx)(Ft,{})})]})}function Ft(){const e=(0,st().r)(),t=(0,o().O$)(ht().Iq),n={emptyState:{marginTop:100,cursor:"auto"}};return(0,c.jsx)(c.Fragment,{children:"all_updates"!==t?(0,c.jsx)(Bt().A,{type:"archived_only"===t?"archive":"mentions",source:"notifications_tab",tab:"inbox",empty:(0,c.jsx)("div",{style:n.emptyState,children:(0,c.jsx)(At().x,{})})},t):e&&(0,c.jsx)(W().A,{spaceId:e,source:"notifications_tab",empty:()=>(0,c.jsx)("div",{style:n.emptyState,children:(0,c.jsx)(At().x,{})})},t)})}function Ut(){const e=(0,b().v3)(),[{status:t}]=(0,mt().Yb)((async()=>{await yt().wR(0),await p().default.waitUntil((()=>void 0!==(0,lt().S)()))}),[]);return"pending"===t?null:"resolved"===t?(null===(n=e.mobileNative)||void 0===n||n.markTransitionReady({environment:e,type:"updates"}),(0,c.jsx)(y().A,{initial:{opacity:0},animate:{opacity:1},children:(0,c.jsx)(Ft,{})})):null;var n}function Nt(){const e=(0,o().K8)((()=>void 0!==ft().Ay.state.loadingId),[]),t=(0,ct().A)(e,400,0);return(0,ut().T)("supportsNativeHome")?t?(0,c.jsx)(Z().A,{style:{width:14}}):(0,c.jsx)("div",{style:{width:14}}):null}var Dt=()=>n(965351),Rt=()=>n(84987),Vt=()=>n(150669),Ot=()=>n(718827),Wt=()=>n(105819),zt=()=>n(279047),Lt=()=>n(141333),Kt=()=>n(306474),Ht=()=>n(441199);function Xt(){const e=(0,a().IS)((()=>({button:{display:"flex",justifyContent:"center",alignItems:"center",gap:6,height:36,width:174,position:"absolute",insetInlineStart:"50%",marginInlineStart:-87,bottom:12,zIndex:20,borderRadius:18,background:s().Tj.blue.background.accentPrimary,color:s().Tj.text.inversePrimary,boxShadow:s().Tj.buttonBoxShadow,fontSize:14},hovered:{background:s().Tj.blueButtonHoveredBackground},pressed:{background:s().Tj.blueButtonPressedBackground}})),[]);return(0,c.jsxs)(Ot().Ay,{style:e.button,hoveredStyle:e.hovered,pressedStyle:e.pressed,href:"https://dev.notion.so/notion/346c06d81dbf4cf188bf44fcef6a6a62?v=fa0376c6fb2a40f0b77d68b683f73e5b&pvs=4",external:!0,children:[(0,c.jsx)(J().I,{icon:Wt().pencilLineIcon,size:"sm"}),(0,c.jsx)("div",{children:"Provide Feedback"})]})}function $t(e){const{titleId:t}=e,n=(0,b().Y0)(),i=(0,o().K8)((()=>{const{sidebarSpaceStore:e}=p().default.state;if(e)return e.id}),[]),r=(0,o().K8)((()=>!1),[]),s=(0,o().K8)((()=>jt().n5()),[]),l=(0,o().K8)((()=>Ht().default.state.mode),[]),d=(0,o().O$)(ht().Iq),u=(0,a().IS)((()=>({container:{flexDirection:"column",width:"100%",display:"flex"},scroller:{position:"relative",minHeight:0,display:"flex",flexDirection:"column",flexGrow:1,marginInlineEnd:0,pointerEvents:"auto",width:"100%",..."peek"===l?{}:{minWidth:s}},scrollBorderContainer:{width:n.isPhone?void 0:"calc(100% - 1px)"}})),[s,l,n.isPhone]),m=(0,o().uB)(void 0,Vt().A),g=(0,o().K8)((()=>m.state.elementRef??{current:null}),[m]),y=0===(0,Lt().yE)(g);return(0,c.jsxs)("div",{style:u.container,children:[(0,c.jsx)(Kt().Q,{type:"inbox",titleId:t}),(0,c.jsx)("div",{style:u.scrollBorderContainer,children:(0,c.jsx)(zt().A,{type:"top",scrollerStore:m})}),(0,c.jsxs)(z().H,{type:V().A.Y,style:u.scroller,store:m,children:[(0,c.jsx)(pt().A,{onChange:(e,{offsetFromTop:t})=>{ft().gJ.setState(t<=0)}}),"all_updates"!==d?(0,c.jsx)(Bt().A,{type:"archived_only"===d?"archive":"mentions",source:"notifications_tab",tab:"inbox",empty:(0,c.jsx)(At().x,{}),isScrolledToTopFromOtherSidebar:y},d):i&&(0,c.jsx)(W().A,{spaceId:i,source:"notifications_tab",empty:()=>(0,c.jsx)(At().x,{})},d)]}),r?(0,c.jsx)(Xt,{}):void 0]})}var Yt=()=>n(509659),qt=()=>n(105127)},371231:(e,t,n)=>{n.d(t,{m:()=>d});var i=()=>n(988083),o=()=>n(201794),a=()=>n(232615),r=()=>n(496603);const s=r().sg(((e,t)=>{i().A.setState({...i().A.state,phase:e,estimatedKeyboardWebViewOverlap:t})}),300),l=r().sg(((e,t)=>{i().A.setState({...i().A.state,phase:e,estimatedKeyboardWebViewOverlap:t})}),150);function d(e,t,n){const{device:r,RouterStore:d}=e;if(!(0,o().T)("supportsAlwaysMultiTextSelectionBehavior")){const e="page"===d.state.route.name,i=r.isAndroid&&r.isMobileNative,o="editing"===a().default.state.mode;if(e&&i&&!o)return void s(t,n)}if((0,o().T)("supportsDebouncingKeyboardDuringOnboarding")){const e="onboarding"===d.state.route.name,i=r.isIOS&&r.isMobileNative;if(e&&i)return void l(t,n)}i().A.setState({...i().A.state,phase:t,estimatedKeyboardWebViewOverlap:n})}},435386:(e,t,n)=>{n.d(t,{w:()=>o});var i=()=>n(651784);function o({url:e,config:t}){const n=(0,i().parseRoute)({url:e,baseUrl:t.domainBaseUrl,publicDomainName:t.publicDomainName,isMobile:!1,protocol:t.protocol,currentUrl:void 0});return"page"===n.name?n.blockId:"team"===n.name?n.peekViewBlockId:void 0}},445560:(e,t,n)=>{n.d(t,{X:()=>i});const i=n(757695).Store.createValue({shouldReset:!1},{name:"MobileAssistantMenuStore"})},466721:(e,t,n)=>{n.r(t),n.d(t,{STORE_MAX_LIMIT:()=>S,initializePageVisit:()=>A,updatePageVisits:()=>w});n(898992),n(354520),n(581454);var i=()=>n(907258),o=()=>n(770063),a=()=>n(273648),r=()=>n(90023),s=()=>n(179034),l=()=>n(874852),d=()=>n(559653),c=()=>n(161479),u=()=>n(743246),p=()=>n(496603),m=()=>n(534177),g=()=>n(211716),y=()=>n(499764),b=()=>n(299545),f=()=>n(41161),v=()=>n(129286),h=()=>n(769864);const x=32,S=100;async function A(e,t){await i().default.waitUntilRendered();const{fromPageRefresh:n,blockStore:a,pageVisitStore:p,timestamp:m,type:x}=t,S=e.currentUser.id;if(void 0===S||n)return;t.blockStore.id!==p.state.pageId&&p.setState({...p.getInitialState(),pageId:t.blockStore.id});const A=(0,o().v3)(a,{table:d().F9,id:(0,d().$5)({parent_id:a.id,user_id:S}),spaceId:(0,c().e)(a.pointer.spaceId)}),w=(0,o().v3)(a,{table:l().ou,id:(0,d().$5)({parent_id:a.id,user_id:S}),spaceId:(0,c().e)(a.pointer.spaceId)});if(await v().transactionQueue.awaitRecordTransaction({table:s().ev,id:a.id}),await(0,b().hS)(a),!a.canRead()||(0,y().qb)(e,a,a.getSpaceStore()))return;await A.load(),await w.load();const T=A.getKeyStore("visited_at").getValue(),I=w.getKeyStore("exited_at").getValue(),j=await async function(e,t,n,i,o){const{id:a}=e.currentUser,s=t.id,l=t.getSystemBlockTypeStore().getValue();if((0,r().kR)(l))return{type:"skipped"};const d=t.getParentTable()===u().C0;if(d)return{type:"skipped"};if(a&&"passive"!==o){var c;null==e||null===(c=e.mobileNative)||void 0===c||c.recordPageVisit(a,{blockId:s,spaceId:n,visitedAt:i}),f().A.recordVisit({id:s,systemBlockType:l,type:g().ig.Default,currentUserId:a})}const p=await h().callApi({eventName:"recordPageVisit",environment:e,data:{block:{id:s,spaceId:n},timestamp:i,type:o},headers:{recordId:s,spaceId:n}});return p}(e,a,(0,c().e)(a.pointer.spaceId),m,x);if("skipped"===j.type)return;if("failed"===j.type)return;const C=k({pageVisits:j.data.pageVisits,currentState:p.state,blockStore:a,totalCount:p.state.totalCount,hasMore:void 0});p.state.pageId===a.id&&p.setState({...C,lastViewTime:T,lastExitTime:I})}async function w(e,t){await i().default.waitUntilRendered();const n=e.currentUser.id;if(void 0===n)return;const{blockStore:o,pageVisitStore:a,incremental:r}=t,s=t.limit||x;let l;if(r){const{pageId:e,lastViewTime:t,lastExitTime:i,totalCount:o,hasMore:r,...s}=a.state,d=Object.entries(s).map((([e,t])=>{if(n===e)return;const i=t.getVisitedAt();return void 0!==i?i+1:void 0}));l=p().T9(d.filter(m().O9))}const d=await h().callApi({eventName:"getPageVisitors",environment:e,data:{block:{id:o.id,spaceId:(0,c().e)(o.pointer.spaceId)},sinceTimestamp:l,limit:s,includeTotalCount:t.includeTotalCount},headers:{recordId:o.id,spaceId:(0,c().e)(o.pointer.spaceId)}});if("failed"===d.type)return;const u=k({pageVisits:d.data.pageVisits,blockStore:o,currentState:a.state,totalCount:d.data.totalCount,hasMore:d.data.hasMore});let g;if(Object.keys(u).length<=S)g=u;else{const{pageId:e,lastViewTime:t,lastExitTime:n,totalCount:i,hasMore:o,...a}=u,r=(0,m().WP)(a).map((([e,t])=>[e,t.getVisitedAt()??0]));g={pageId:e,lastViewTime:void 0,lastExitTime:void 0,totalCount:i,hasMore:o};const s=p().Ul(r,(([,e])=>-e)).slice(0,S);for(const[l]of s)g[l]=u[l]}a.state.pageId===u.pageId&&a.setState(g)}function k(e){const{blockStore:t,pageVisits:n,currentState:i,totalCount:o,hasMore:r}=e,s={...i,pageId:t.id,totalCount:o,hasMore:r};for(const l of n){const{id:e,user_id:n}=l;n in s||(s[n]=a()._.createChildStore(t,{table:d().F9,id:e,spaceId:(0,c().e)(t.pointer.spaceId)}))}return s}},471095:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>i,lockFillIcon:()=>o});n(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"3.97 1.95 12.05 15.66",svg:(0,n(474848).jsx)("path",{d:"M6 5.95a4 4 0 1 1 8 0v1.433a2.426 2.426 0 0 1 2.025 2.392v5.4A2.425 2.425 0 0 1 13.6 17.6H6.4a2.425 2.425 0 0 1-2.425-2.425v-5.4c0-1.203.876-2.201 2.025-2.392zm6.75 1.4v-1.4a2.75 2.75 0 1 0-5.5 0v1.4zm-2.2 5.458a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 0 0 1.1 0z"})},o=(0,n(340498).wt)("lockFill",i,"fill")},526278:(e,t,n)=>{n.r(t),n.d(t,{arrowStraightLeftIcon:()=>o,iconDefinition:()=>i});n(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 3.97 15.26 12.06",directional:!0,svg:(0,n(474848).jsx)("path",{d:"M2.411 9.79a.6.6 0 0 1 .147-.232l5.4-5.4a.625.625 0 1 1 .884.884L4.509 9.375H17a.625.625 0 1 1 0 1.25H4.509l4.333 4.333a.625.625 0 1 1-.884.884l-5.4-5.4a.62.62 0 0 1-.147-.651"})},o=(0,n(340498).wt)("arrowStraightLeft",i,"default")},526905:(e,t,n)=>{n.d(t,{b9:()=>p,bS:()=>u,xA:()=>m});n(581454);var i=()=>n(907258),o=()=>n(416504),a=()=>n(763884),r=()=>n(72234),s=()=>n(866805),l=()=>n(547149);const d=144e5,c=new Map;function u(e){return`${e}:user_first_active_today`}function p(e){var t;const n=function(e){let t=c.get(e);return t||(t=new Intl.DateTimeFormat("en-CA",{timeZone:e,year:"numeric",month:"2-digit",day:"2-digit"}),c.set(e,t)),t}((null===(t=i().default.state.currentUserSettingsStore)||void 0===t||null===(t=t.getSettings())||void 0===t?void 0:t.time_zone)??(0,o().P)()),a=n.formatToParts(new Date(e-d)),r=Object.fromEntries(a.map((e=>[e.type,e.value])));return`${r.year??"0000"}-${r.month??"00"}-${r.day??"00"}`}async function m(e){var t;const{environment:o,userId:d,spaceId:c}=e;if(!(0,s().OE)())return!1;const m=Date.now(),g=p(m),y=a().K.get({userId:d,key:u(c)});if((null==y?void 0:y.dateBucket)===g)return!1;const b=await async function(e){const t=i().default.state.sidebarSpaceViewStore;if(t&&t.getSpaceId()===e)return await t.load(),t}(c);if(!b)return!1;const f=b.getSettings();if((null==f?void 0:f.user_daily_first_active_local_date_bucket)===g)return a().K.set({userId:d,key:u(c),value:{dateBucket:g,triggeredAt:f.user_daily_first_active_at_utc??m}}),!1;a().K.set({userId:d,key:u(c),value:{dateBucket:g,triggeredAt:m}});const{maybeUpdateDailyBriefPageIfTemplateUpdated:v}=await Promise.all([n.e(35530),n.e(9773),n.e(55373),n.e(36192),n.e(71562),n.e(96346),n.e(27992),n.e(63452),n.e(66249),n.e(92845),n.e(87249),n.e(79022),n.e(44854),n.e(87017),n.e(34877),n.e(46414),n.e(11676),n.e(61165),n.e(47668),n.e(94522),n.e(44584),n.e(24587),n.e(67494),n.e(3651),n.e(40992),n.e(88455),n.e(33893),n.e(48486),n.e(56351)]).then(n.bind(n,833779));await v({environment:o,spaceViewStore:b});const h=null==f||null===(t=f.agent_personalization_settings)||void 0===t?void 0:t.daily_brief_prompt;if(null==h||!h.tooltip_dismissed_at){const{startDailyBriefChat:e}=await Promise.all([n.e(35530),n.e(9773),n.e(55373),n.e(36192),n.e(71562),n.e(96346),n.e(27992),n.e(63452),n.e(66249),n.e(92845),n.e(87249),n.e(79022),n.e(44854),n.e(87017),n.e(34877),n.e(46414),n.e(11676),n.e(61165),n.e(47668),n.e(94522),n.e(44584),n.e(24587),n.e(67494),n.e(3651),n.e(40992),n.e(88455),n.e(33893),n.e(48486),n.e(73199)]).then(n.bind(n,30154));await e({environment:o,showChatSidebarSource:"daily_brief_reminder",skipOpeningPanel:!0})}return l().createAndCommit({environment:o,userAction:"dailyFirstActivityActions.markTriggered",canUndo:!1,perform:e=>{r().AG(b,e,{user_daily_first_active_local_date_bucket:g,user_daily_first_active_at_utc:m})}}),!0}},529803:(e,t,n)=>{n.d(t,{A:()=>o});class i extends(()=>n(757695))().Store{}const o=new i},539412:(e,t,n)=>{n.d(t,{$y:()=>v,jc:()=>f,x9:()=>b});n(296540);var i=()=>n(564884),o=()=>n(484714),a=()=>n(590526),r=()=>n(212473),s=()=>n(922189),l=()=>n(69708),d=()=>n(209660),c=()=>n(511393),u=()=>n(529803),p=()=>n(780262),m=()=>n(807778),g=()=>n(671812),y=n(474848);function b(){const e=(0,a().K8)((()=>{const{editsBlocked:e}=p().A.state;return e??!1}),[]);return(0,a().K8)((()=>(0,m().Jq)()),[])&&e}function f(){return(0,a().K8)((()=>{var e;const t=u().A.state;return null==t||null===(e=t.data)||void 0===e?void 0:e.invoiceHostedUrl}),[])}function v(){const e=(0,o().v3)(),t=f(),n=(0,a().K8)((()=>{var e;const t=u().A.state;return(null==t||null===(e=t.data)||void 0===e?void 0:e.overdueInvoiceCount)??0}),[]),i=(0,a().K8)((()=>(0,c().h)(e)),[e]),p=function(e,t){if(e)return t>1?(0,y.jsx)(l().sA,{defaultMessage:"Access to Notion is limited because we couldn’t process {overdueInvoiceCount, plural, one {your last payment} other {{overdueInvoiceCount} payments}}.",id:"uncollectibleExperience.uncollectibleExperienceOverlay.multipleInvoicesMessageContent",values:{overdueInvoiceCount:t}}):(0,y.jsx)(l().sA,{defaultMessage:"Access to Notion is limited because we couldn’t process your last payment",id:"uncollectibleExperience.uncollectibleExperienceOverlay.messageContent"});return(0,y.jsx)(l().sA,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberMessageContent",defaultMessage:"Access to Notion is limited"})}(i,n),m=function(e){if(e)return;return(0,y.jsx)(l().sA,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberSecondaryLabel",defaultMessage:"Contact a workspace owner to update your workspace’s payment method"})}(i),b=function(e,t,n){if(t){const i=(0,g().a)(n);return n=>{i&&(h(t,e),i(n))}}return n=>{h(t,e),d().Ow()}}(e,i,t),v=function(e){if(e)return(0,y.jsx)(l().sA,{defaultMessage:"View unpaid invoice",id:"uncollectibleExperience.uncollectibleExperienceOverlay.buttonLabel"});return(0,y.jsx)(l().sA,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberButtonLabel",defaultMessage:"View workspace owner"})}(i);return{clickAction:b,ctaMessage:v,primaryMessage:p,secondaryMessage:m,ctaIcon:i?r().arrowUpRightSquareIcon:s().personCircleFillIcon,tooltipBodyMessage:i?v:m,isWorkspaceOwner:i,overdueInvoiceCount:n}}function h(e,t){(0,i().u)({environment:t,event:{eventName:"subscription_uncollectible_blurred_experience_cta_clicked",eventProperties:{is_workspace_owner:e}}})}},550368:(e,t,n)=>{n.d(t,{a:()=>u});var i=n(296540),o=()=>n(401497),a=()=>n(100622),r=()=>n(534177),s=()=>n(284371),l=()=>n(699143),d=()=>n(493552),c=n(474848);const u=i.forwardRef((function({additionalContent:e,description:t,isDisabled:n,isSelected:r,label:d,name:u,onChange:g,width:y="fill",selectorSize:b="normal",selectAlignXAxis:f="left",selectAlignYAxis:v="center",selectType:h="checkbox",style:x,supportText:S,value:A,colorVariant:w,alignAdditionalContent:k,...T},I){const j=(0,i.useId)(),C=function(e){const{isSelected:t,isDisabled:n,selectAlignYAxis:i,alignAdditionalContent:r}=e;return(0,o().IS)((()=>{const e=t&&!n?a().Tj.blue.border.accentPrimary:a().Tj.border.primary;return{container:{display:"flex",alignItems:r??"center",gap:12,userSelect:"none",paddingTop:9,paddingInlineEnd:16,paddingBottom:10,paddingInlineStart:10,borderRadius:6,border:`1px solid ${e}`,...!n&&{cursor:"pointer"}},title:{fontWeight:s().Wy.medium,fontSize:14,userSelect:"none",lineHeight:18},additionalContentWrapper:{flexShrink:0},selectorWrapper:{display:"flex",..."top"===i?{marginTop:2}:{}},rightAlignSelectorWrapper:{display:"flex"}}}),[t,n,i,r])}({isSelected:r,isDisabled:n,selectAlignYAxis:v,alignAdditionalContent:k}),M=(0,c.jsxs)(l().Y1,{direction:"horizontal",align:"top"===v?"top-left":"center-left",gap:12,width:y,children:[(0,c.jsx)("div",{style:C.selectorWrapper,children:(0,c.jsx)(m,{id:j,selectType:h,name:u,value:A,onChange:g,isSelected:r,selectorSize:b,isDisabled:n,...T})}),(0,c.jsx)(p,{colorVariant:w,description:t,label:d,selectorSize:b,supportText:S,isDisabled:n})]}),P=(0,c.jsxs)(l().Y1,{direction:"horizontal",align:"top"===v?"top-center":"center",gap:12,children:[(0,c.jsx)(p,{colorVariant:w,description:t,label:d,selectorSize:b,supportText:S,isDisabled:n}),(0,c.jsx)("div",{style:{...C.selectorWrapper,...C.rightAlignSelectorWrapper},children:(0,c.jsx)(m,{id:j,selectType:h,name:u,value:A,onChange:g,selectorSize:b,isSelected:r,isDisabled:n,...T})})]}),_=e?(0,c.jsx)("div",{style:C.additionalContentWrapper,children:e}):null;return(0,c.jsx)("label",{ref:I,style:{...C.container,...x},htmlFor:j,children:"left"===f?(0,c.jsxs)(c.Fragment,{children:[M,_]}):(0,c.jsxs)(c.Fragment,{children:[_,P]})})}));function p(e){const{description:t,label:n,supportText:i,selectorSize:o,isDisabled:a,colorVariant:s}=e;let u;return"large"===o?u="pageContentTextBlock":"normal"===o||void 0===o?u="bodySmMedium":"small"===o?u="captionRegular":(0,r().HB)(o),(0,c.jsxs)(l().Y1,{gap:4,children:[(0,c.jsxs)(l().Y1,{gap:2,children:[(0,c.jsx)(d().D,{styleKey:u,colorVariant:s||(a?"disabled":"primary"),children:n}),t?(0,c.jsx)(d().D,{styleKey:"captionRegular",colorVariant:a?"disabled":"secondary",children:t}):null]}),i?(0,c.jsx)(d().D,{styleKey:"captionMedium",colorVariant:"tertiary",children:i}):null]})}function m(e){const{selectType:t,selectorSize:i="normal",id:a,name:s,value:l,onChange:d,isSelected:u,isDisabled:p,...m}=e,g=(0,o().IS)((()=>({checkboxWrapper:{minWidth:18,display:"flex",justifyContent:"center"}})),[]);switch(t){case"radio":return(0,c.jsx)(n(266685).a,{id:a,name:s,value:l,onChange:d,checked:u,disabled:p,selectorSize:i,...m});case"checkbox":return(0,c.jsx)("div",{style:g.checkboxWrapper,children:(0,c.jsx)(n(665290).W,{id:a,name:s,value:l,onChange:d,checked:u,disabled:p,selectorSize:i,...m})});case"none":return null;default:(0,r().HB)(t)}}},551253:(e,t,n)=>{n.d(t,{I:()=>o});class i extends(()=>n(757695))().Store{getInitialState(){return{open:!1,direction:"back"}}}const o=new i},555267:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(296540),o=()=>n(991003),a=()=>n(98126),r=()=>n(100622),s=n(474848);function l({loadingMessage:e}){const t=(0,o().A)(!0,400);return(0,s.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:t?(0,s.jsxs)(i.Fragment,{children:[(0,s.jsx)(a().k,{}),e?(0,s.jsx)("div",{style:{marginInlineStart:8,color:r().Tj.text.secondary},children:e}):void 0]}):void 0})}},557297:(e,t,n)=>{n.d(t,{lz:()=>a,nO:()=>o,wl:()=>r});var i=()=>n(79926);const o={chatSidebar:new(i().O2)("chatSidebar",(()=>Promise.all([n.e(35530),n.e(55373),n.e(36192),n.e(44711),n.e(53321),n.e(67539),n.e(27992),n.e(63452),n.e(66249),n.e(87249),n.e(79022),n.e(34877),n.e(11676),n.e(61165),n.e(94522),n.e(44584),n.e(40992),n.e(88455),n.e(36437),n.e(87289),n.e(18503),n.e(11386),n.e(28463),n.e(2703)]).then(n.bind(n,942646)))),chatSidebarActions:new(i().O2)("chatSidebarActions",(async()=>await Promise.resolve().then(n.bind(n,703748)))),chatSidebarHelpers:new(i().O2)("chatSidebarHelpers",(async()=>await Promise.resolve().then(n.bind(n,770160)))),chatSidebarModeButton:new(i().O2)("chatSidebarModeButton",(async()=>await Promise.all([n.e(75134),n.e(35530),n.e(9773),n.e(55373),n.e(36192),n.e(71562),n.e(96346),n.e(44711),n.e(53321),n.e(51220),n.e(16471),n.e(37353),n.e(37571),n.e(29151),n.e(40118),n.e(50397),n.e(62475),n.e(3151),n.e(98629),n.e(27992),n.e(63452),n.e(66249),n.e(92845),n.e(87249),n.e(79022),n.e(44854),n.e(87017),n.e(34877),n.e(46414),n.e(11676),n.e(61165),n.e(47668),n.e(94522),n.e(44584),n.e(24587),n.e(67494),n.e(3651),n.e(38293),n.e(40992),n.e(88455),n.e(64556),n.e(33893),n.e(91793),n.e(55162),n.e(71003),n.e(32370),n.e(26264),n.e(36437),n.e(50363),n.e(42660),n.e(44590),n.e(55113),n.e(85071),n.e(7914),n.e(25588),n.e(68637),n.e(23640),n.e(72252),n.e(93134),n.e(12452),n.e(52871),n.e(29351),n.e(18825),n.e(71853),n.e(93049),n.e(22582),n.e(18636),n.e(87289),n.e(16060),n.e(34281),n.e(48376),n.e(35279),n.e(80229),n.e(77754),n.e(71309),n.e(74562),n.e(39986),n.e(47431),n.e(47160),n.e(76677),n.e(68609),n.e(15553),n.e(77345),n.e(67720),n.e(37759),n.e(41423),n.e(21627),n.e(57924),n.e(77777),n.e(17729),n.e(23493),n.e(42810),n.e(20741),n.e(16866),n.e(18503),n.e(83271),n.e(33695),n.e(85673),n.e(92926),n.e(94814)]).then(n.bind(n,256499)))),dockedSidebar:new(i().O2)("dockedSidebar",(async()=>await Promise.all([n.e(35530),n.e(55373),n.e(36192),n.e(44711),n.e(53321),n.e(67539),n.e(27992),n.e(63452),n.e(66249),n.e(87249),n.e(79022),n.e(34877),n.e(11676),n.e(61165),n.e(94522),n.e(44584),n.e(40992),n.e(88455),n.e(36437),n.e(87289),n.e(18503),n.e(11386),n.e(28463)]).then(n.bind(n,217609)))),mobileChatModal:new(i().O2)("mobileChatModal",(async()=>await Promise.all([n.e(35530),n.e(55373),n.e(36192),n.e(27992),n.e(63452),n.e(66249),n.e(87249),n.e(79022),n.e(34877),n.e(11676),n.e(61165),n.e(94522),n.e(44584),n.e(40992),n.e(88455),n.e(11386),n.e(63454)]).then(n.bind(n,257819))))},a=(0,i()._h)(o.chatSidebar,(e=>e.ChatSidebar)),r=(0,i()._h)(o.chatSidebarModeButton,(e=>e.ChatSidebarModeButtonPopupContents))},563015:(e,t,n)=>{n.d(t,{SA:()=>d,eJ:()=>b,ew:()=>y,ml:()=>u,rA:()=>m,yI:()=>g,zf:()=>p});n(581454);var i=()=>n(496603),o=()=>n(534177),a=()=>n(708685),r=()=>n(145076),s=()=>n(349835),l=()=>n(239381);function d(e){if("type"in e){if(e.type===s().IA.CalledFunctionOnEmptyValue)return"warning";if(e.type===s().IA.CallingFunctionWithUnknownTarget)return"warning";if(e.type===s().IA.CallingFunctionWithUnknownArgument)return"warning"}return"error"}function c(e){switch(e){case"checkbox":return"boolean";case"number":return"number";case"text":return"text";case"date":return"date";case"array":return"array";case"block":return"block";case"person":return"person";case"select":return"select";case"function":return"function";case"unknown":return"unknown";case"undefined":return"undefined";default:(0,o().HB)(e)}}function u(e){switch(e.type){case s().M9.InvalidCharacter:return{...r().x0.InvalidCharacter,values:{errorCharacter:e.character}};case s().M9.UnclosedStringLiteral:return r().x0.UnclosedStringLiteral;case s().M9.UnclosedComment:return r().x0.UnclosedComment;case s().M9.TokenExpected:return{...r().x0.TokenExpected,values:{expectedToken:e.token}};case s().M9.StringLiteralContainsToken:return r().x0.StringLiteralContainsToken;case s().M9.ExpressionExpected:return r().x0.ExpressionExpected;case s().M9.PropertyTokenOrFunctionExpected:return r().x0.PropertyTokenOrFunctionExpected;case s().M9.EndOfInputExpected:return r().x0.EndOfInputExpected;case s().M9.UnexpectedError:return r().x0.UnexpectedError;case s().M9.TooDeeplyNested:return r().x0.TooDeeplyNested;default:(0,o().HB)(e)}}function p(e){switch(e.type){case s().IA.FunctionCallArgumentWrongType:case s().IA.FunctionCallUnexpectedArgument:return e.argument;default:return e.node}}function m(e,t){let n;switch(t.type){case s().IA.ThisRowTypeNotFound:n=r().Xz.ThisRowTypeNotFound;break;case s().IA.ThisRowNotBlockWithCollection:n=r().Xz.ThisRowNotBlockWithCollection;break;case s().IA.MissingPropertyOnThisRow:n={...r().Xz.MissingPropertyOnThisRow,values:{propertyName:t.property}};break;case s().IA.MissingContextVariable:{const e=(0,l().ix)(t.token)?t.token.contextValueId:t.token.valueId;n={...r().Xz.MissingContextVariable,values:{valueId:e}}}break;case s().IA.MissingBlock:n={...r().Xz.MissingBlock,values:{blockId:t.token.blockId}};break;case s().IA.CallingNotFunction:n={...r().Xz.CallingNotFunction,values:{expressionType:c(t.callee.type.type)}};break;case s().IA.FunctionCallTooFewArguments:n={...r().Xz.FunctionCallTooFewArguments,values:{minNumParameters:t.minNumParameters,functionName:t.libraryFunction.name,numArguments:t.numArguments}};break;case s().IA.FunctionCallUnexpectedArgument:n={...r().Xz.FunctionCallUnexpectedArgument,values:{functionName:t.libraryFunction.name}};break;case s().IA.FunctionCallArgumentWrongType:n={...r().Xz.FunctionCallArgumentWrongType,values:{argumentType:c(t.argument.type.type),functionName:t.libraryFunction.name}};break;case s().IA.CallingFunctionWithUnknownArgument:{const e=Array.isArray(t.expectedParameter.type)?t.expectedParameter.type[0]:t.expectedParameter.type,i="expression"===e.type?"expression":c(e.type);n={...r().Xz.CallingFunctionWithUnknownArgument,values:{functionName:t.libraryFunction.name,expectedType:i}};break}case s().IA.MemberPropertyMismatchCollection:n={...r().Xz.MemberPropertyMismatchCollection,values:{propertyName:t.token.property}};break;case s().IA.MemberPropertyMissing:n={...r().Xz.MemberPropertyMissing,values:{propertyName:t.property}};break;case s().IA.MemberPropertyTargetNotBlock:n=r().Xz.MemberPropertyTargetNotBlock;break;case s().IA.MemberPropertyTypeInvalid:n={...r().Xz.MemberPropertyTypeInvalid,values:{propertyName:t.propertyName,propertyType:t.propertyType}};break;case s().IA.UndefinedIdentifier:n={...r().Xz.UndefinedIdentifier,values:{identifier:t.node.text}};break;case s().IA.InvalidPropCall:n={...r().Xz.InvalidPropCall,values:{propertyName:t.name}};break;case s().IA.InvalidContextCall:n={...r().Xz.InvalidContextCall,values:{variableName:t.name}};break;case s().IA.InvalidVariableCall:n={...r().Xz.InvalidVariableCall,values:{variableName:t.name}};break;case s().IA.UnifiedFunctionCannotFindFunction:n={...r().Xz.UnifiedFunctionCannotFindFunction,values:{functionName:t.name}};break;case s().IA.UnifiedFunctionNoArguments:n={...r().Xz.UnifiedFunctionNoArguments,values:{functionName:t.libraryFunction.name}};break;case s().IA.UnifiedFunctionTargetWrongType:n={...r().Xz.UnifiedFunctionTargetWrongType,values:{functionName:t.libraryFunction.name,targetType:c(t.expression.type.type)}};break;case s().IA.CallingFunctionWithUnknownTarget:{const e=Array.isArray(t.expectedParameter.type)?t.expectedParameter.type[0]:t.expectedParameter.type,i="expression"===e.type?"expression":c(e.type);n={...r().Xz.CallingFunctionWithUnknownTarget,values:{functionName:t.libraryFunction.name,expectedType:i}};break}case s().IA.CannotRelativelyCompareTypes:n={...r().Xz.CannotRelativelyCompareTypes,values:{lhsType:c(t.lhsType.type),rhsType:c(t.rhsType.type)}};break;case s().IA.CannotDoMathOnType:n={...r().Xz.CannotDoMathOnType,values:{lhsType:c(t.lhsType.type),rhsType:c(t.rhsType.type)}};break;case s().IA.UnaryMinusOnNonNumber:n={...r().Xz.UnaryMinusOnNonNumber,values:{type:c(t.expression.type.type)}};break;case s().IA.IdentifierExpected:n=r().Xz.IdentifierExpected;break;case s().IA.FunctionCallExpected:n={...r().Xz.FunctionCallExpected,values:{functionName:t.functionName}};break;case s().IA.RenamedIdentifier:n={...r().Xz.RenamedIdentifier,values:{identifier:t.identifier,renamedTo:t.renamedTo}};break;case s().IA.RemovedFunction:n={...r().Xz.RemovedFunction,values:{functionName:t.functionName,alternative:t.alternative}};break;case s().IA.ContextVariableNotBlockWithCollection:n={...r().Xz.ContextVariableNotBlockWithCollection,values:{valueId:t.token.contextValueId}};break;case s().IA.MissingPropertyOnContextVariable:n={...r().Xz.MissingPropertyOnContextVariable,values:{propertyName:t.property,valueId:t.token.contextValueId}};break;case s().IA.BlockPropertyTypeInvalid:n={...r().Xz.BlockPropertyTypeInvalid,values:{propertyName:t.propertyName}};break;case s().IA.DisallowedReturnType:{const i=t.allowedReturnTypes.map((t=>e.formatMessage((0,a().getHumanReadableType)(t)).toLocaleLowerCase()));n={...r().Xz.DisallowedReturnType,values:{allowedReturnType:e.formatList(i,{style:"long",type:"conjunction"}),allowedReturnTypeCount:t.allowedReturnTypes.length,returnType:e.formatMessage((0,a().getHumanReadableType)(t.returnType)).toLocaleLowerCase()}};break}case s().IA.CrossSpacePropertyNotSupported:n={...r().Xz.CrossSpacePropertyNotSupported};break;case s().IA.CalledFunctionOnEmptyValue:n={...r().Xz.CalledFunctionOnEmptyValue};break;default:(0,o().HB)(t)}return{...n,values:{...n.values,startOffset:t.node.startOffset,endOffset:t.node.endOffset+1}}}function g(e,t){let n;switch(t.type){case s().uW.MissingThisRow:n=r().X8.MissingThisRow;break;case s().uW.MissingSchemaPropertyOnThisRow:n={...r().X8.MissingSchemaPropertyOnThisRow,values:{propertyName:t.property}};break;case s().uW.ThisRowBlockPropertyMismatchCollection:n=r().X8.ThisRowBlockPropertyMismatchCollection;break;case s().uW.MissingContextVariable:n={...r().X8.MissingContextVariable,values:{valueId:t.valueId}};break;case s().uW.IdentifierNotFound:n={...r().X8.IdentifierNotFound,values:{identifier:t.node.text}};break;case s().uW.CannotRelativelyCompareTypes:n={...r().X8.CannotRelativelyCompareTypes,values:{lhsType:c(t.lhsType),rhsType:c(t.rhsType)}};break;case s().uW.CannotDoMathOnType:n={...r().X8.CannotDoMathOnType,values:{valueType:c(t.valueType)}};break;case s().uW.CannotCallNonFunction:n={...r().X8.CannotCallNonFunction,values:{calleeType:c(t.calleeType)}};break;case s().uW.UnifiedFunctionPropertyNotFound:n={...r().X8.UnifiedFunctionPropertyNotFound,values:{functionName:t.node.name}};break;case s().uW.LibraryFunctionExecutionError:const i=t.error instanceof s().x4?t.error:void 0;n=(null==i?void 0:i.info.type)===s().v3.DateInvalidDurationUnit?{...r().gW.DateInvalidDurationUnit,values:{functionName:t.libraryFunction.name,invalidUnit:i.info.invalidUnit}}:(null==i?void 0:i.info.type)===s().v3.CannotUseToNumberOnList?{...r().gW.CannotUseToNumberOnList}:(null==i?void 0:i.info.type)===s().v3.CannotRoundToNonInteger?{...r().gW.CannotRoundToNonInteger,values:{precision:i.info.precision}}:(null==i?void 0:i.info.type)===s().v3.CannotRoundToTooManyDecimalPlaces?{...r().gW.CannotRoundToTooManyDecimalPlaces,values:{precision:i.info.precision}}:(null==i?void 0:i.info.type)===s().v3.NumberFormatInvalid?{...r().gW.NumberFormatInvalid,values:{invalidFormat:i.info.invalidFormat}}:{...r().X8.LibraryFunctionExecutionError,values:{functionName:t.libraryFunction.name}};break;case s().uW.FunctionCallTooFewArguments:n={...r().X8.FunctionCallTooFewArguments,values:{functionName:t.libraryFunction.name}};break;case s().uW.FunctionCallUnexpectedArgument:n={...r().X8.FunctionCallUnexpectedArgument,values:{functionName:t.libraryFunction.name}};break;case s().uW.FunctionCallArgumentWrongType:n={...r().X8.FunctionCallArgumentWrongType,values:{functionName:t.libraryFunction.name,argumentType:c(t.argumentType)}};break;case s().uW.AccessingPropertyOnNonBlock:n=r().X8.AccessingPropertyOnNonBlock;break;case s().uW.MissingDataDependencyBlock:n={...r().X8.MissingDataDependencyBlock,values:{blockId:t.blockPointer.id}};break;case s().uW.MissingDataDependencyPerson:n={...r().X8.MissingDataDependencyPerson,values:{personId:t.personPointer.id}};break;case s().uW.MemberPropertyMismatchCollection:n=r().X8.MemberPropertyMismatchCollection;break;case s().uW.MissingPropertyOnSchemaForMemberProperty:n=r().X8.MissingPropertyOnSchemaForMemberProperty;break;case s().uW.UnaryMinusOnNonNumber:n={...r().X8.UnaryMinusOnNonNumber,values:{expressionType:c(t.expressionType)}};break;case s().uW.UnexpectedRecoveryNode:n=r().X8.UnexpectedRecoveryNode;break;case s().uW.UnexpectedError:n=r().X8.UnexpectedError;break;case s().uW.DepthExceeded:n=r().X8.DepthExceeded;break;case s().uW.CycleDetected:n=r().X8.CycleDetected;break;case s().uW.DownstreamParseFailure:n=r().X8.DownstreamParseFailure;break;case s().uW.MaxEvaluationTimeExceeded:n=r().X8.MaxEvaluationTimeExceeded;break;case s().uW.MissingSchemaPropertyOnCollection:n={...r().X8.MissingSchemaPropertyOnCollection,values:{collectionId:t.collectionId,propertyName:t.property}};break;case s().uW.ContextVariableWrongType:n={...r().X8.ContextVariableWrongType,values:{expectedType:t.expectedType,propertyType:t.resultType,valueId:t.valueId}};break;case s().uW.DisallowedValueType:{const i=t.allowedValueTypes.map((t=>e.formatMessage((0,a().getHumanReadableType)(t)).toLocaleLowerCase()));n={...r().Xz.DisallowedReturnType,values:{allowedValueType:e.formatList(i,{style:"long",type:"conjunction"}),allowedValueTypeCount:t.allowedValueTypes.length,valueType:e.formatMessage((0,a().getHumanReadableValueType)(t.expressionValue)).toLocaleLowerCase()}};break}case s().uW.TotalDependencyLimitExceeded:n={...r().X8.TotalDependencyLimitExceeded,values:{totalLoaded:t.totalLoaded,limit:t.limit}};break;case s().uW.PerFormulaDependencyLimitExceeded:n={...r().X8.PerFormulaDependencyLimitExceeded,values:{perFormulaLoaded:t.perFormulaLoaded,limit:t.limit}};break;default:(0,o().HB)(t)}return(0,l().li)(t)?{...n,values:{...n.values,startOffset:t.node.startOffset,endOffset:t.node.endOffset+1}}:n}function y(e){const t=null==e?void 0:e.values;return[i().cJ(e,"values"),t]}function b(e){return e.type===s().uW.DepthExceeded||e.type===s().uW.CycleDetected||e.type===s().uW.MaxEvaluationTimeExceeded||e.type===s().uW.LibraryFunctionExecutionError}},564704:(e,t,n)=>{n.d(t,{Y:()=>s,x:()=>l});var i=()=>n(917908),o=()=>n(459621),a=()=>n(619553),r=()=>n(414754);function s(e,t){const n="back"===t?-1:1,a=i().H.peekEntry(n);a&&(0,o().x)(e,{url:a.url,position:"after-children"})}function l(e,t,n){const o=function(e){const{entries:t,activeIndex:n}=i().H.getState();if(void 0===n)return;const o=t.findIndex((t=>t.historyId===e));if(-1===o)return;return o-n}(t);if(void 0===o)return;const s=i().H.peekEntry(o);s&&(n?(0,a().B)({environment:e,url:s.url,makeTabActive:!1,position:"after-children",openInNew:n}):(0,r().o)({environment:e,offset:o}))}},567121:(e,t,n)=>{n.d(t,{EG:()=>r,K5:()=>a,RH:()=>o,Yi:()=>s,ls:()=>i});const i=32,o=202,a=1e3,r="Want to add a metric? Look for 'src/client/performanceToolbar/config.ts' in notion-next.",s="To disable the toolbar entirely, go to the 'Experiments' panel and look for the 'performance_debugging_toolbar' flag."},573792:(e,t,n)=>{n.d(t,{DW:()=>l,R1:()=>d,lx:()=>s});var i=()=>n(726637),o=()=>n(418135),a=()=>n(175947),r=()=>n(100622);function s(){return{height:"100%",flexGrow:0,marginInlineEnd:8,fontSize:14,minWidth:0}}function l({environment:e,isShowingTabBar:t,shouldShowSidebar:n,isSidebarExpanded:r,isSecondarySidebarVisible:s,isBrowserFullScreen:l,shouldRenderTemplateGalleryTopbar:d,allowOverflow:c,zoom:u}){const{device:p}=e,m=p.isElectronMac&&(!n||!r&&!s)&&!l&&!t,g=p.isElectronWindows&&!t,y=g&&(!n||!r&&!s);let b=a().ek(p.isElectronMac);return d&&(b=a().Hi),{display:"flex",justifyContent:"space-between",alignItems:"center",overflow:c?"visible":"hidden",height:b,paddingInlineStart:m?(0,o().n$)(u):y?46:i().A.isMobile?4:12,paddingInlineEnd:g?(0,o().yA)(u)+4:i().A.isMobile?4:10}}function d(){return{flex:"none",width:1,height:16,marginInlineStart:8,marginInlineEnd:8,background:r().Tj.border.primaryTranslucent}}},578194:(e,t,n)=>{n.d(t,{r:()=>i});const i=(0,n(583835).Dv)("importEvernote")},595939:(e,t,n)=>{n.d(t,{OY:()=>s,S4:()=>r,Wu:()=>l});var i=()=>n(680074),o=()=>n(547149),a=()=>n(680977);function r(e){const{environment:t,preference:n}=e,r=(0,i().R$)(t);r&&(o().createAndCommit({environment:t,userAction:"userSettingsActions.setContrastPreference",canUndo:!0,cellTarget:"main",perform:e=>{(0,a().m)({userSettingsStore:r,transaction:e,data:{contrast_preference:n}})}}),s(n))}async function s(e){document.body.setAttribute("data-contrast",e);("high"===e||"auto"===e&&window.matchMedia("(prefers-contrast: more)").matches)&&await n.e(76353).then(n.bind(n,811300))}function l(e){const t=(0,i().R$)(e);return(null==t?void 0:t.getSettingsStore().getKeyStore("contrast_preference").getValue())??"auto"}},607567:(e,t,n)=>{n.d(t,{Z:()=>a});n(296540);var i=n(474848);const o={viewBox:"0 0 20 20",fittedViewBox:"2.37 4.12 16.74 14.99",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M4.5 4.125A2.125 2.125 0 0 0 2.375 6.25v7.5c0 1.174.951 2.125 2.125 2.125h5.702a4.7 4.7 0 0 1-.2-1.25H4.5a.875.875 0 0 1-.875-.875V7.5h12.75v2.535a4.7 4.7 0 0 1 1.25.684V6.25A2.125 2.125 0 0 0 15.5 4.125zm.758 1.684a.625.625 0 1 1-1.25 0 .625.625 0 0 1 1.25 0m1.375-.625a.625.625 0 1 1 0 1.25.625.625 0 0 1 0-1.25m2.625.625a.625.625 0 1 1-1.25 0 .625.625 0 0 1 1.25 0"}),(0,i.jsx)("path",{d:"M17.7 16.607a3.625 3.625 0 1 0-.893.878l1.223 1.427a.625.625 0 0 0 .94-.823zM12.375 14.5a2.375 2.375 0 1 1 4.75 0 2.375 2.375 0 0 1-4.75 0"})]})},a=(0,n(340498).wt)("browserMagnifyingGlass",o,"default")},613885:(e,t,n)=>{n.d(t,{k:()=>o});var i=()=>n(726637);function o(e,t){const n=i().A.isMobile?2:3;return t.slice(0,n)}},619553:(e,t,n)=>{n.d(t,{B:()=>r});var i=()=>n(459621),o=()=>n(59145),a=()=>n(441748);function r({openInNew:e,url:t,makeTabActive:n,position:r,isNewPage:s,environment:l}){"tab"===e&&n?(0,o().x)(l,{url:t,position:r,makeTabActive:n,isNewPage:s}):"tab"!==e||n?"window"===e&&(0,a().E)(t):(0,i().x)(l,{url:t,position:r})}},665290:(e,t,n)=>{n.d(t,{W:()=>c});n(296540);var i=()=>n(819121),o=()=>n(401497),a=()=>n(451306),r=()=>n(73956),s=()=>n(100622),l=()=>n(807449),d=n(474848);function c(e){const{selectorSize:t="normal",...n}=e,{disabled:c,checked:u}=n,[p,m]=(0,i().A)(),g=function(e){const{checked:t,disabled:n,isFocusVisible:i,selectorSize:a}=e;return(0,o().IS)((()=>({root:{position:"absolute",display:"flex",width:"large"===a?15:11,height:"large"===a?15:11,margin:1.5,justifyContent:"center",alignItems:"center",flexShrink:0,borderRadius:"large"===a?2:1,transition:"background 100ms ease-out",...t?{boxShadow:`0 0 0 1.5px ${n?s().Tj.background.tertiaryTranslucent:s().Tj.blue.background.accentPrimary}`,background:n?s().Tj.background.tertiaryTranslucent:s().Tj.blue.background.accentPrimary}:{boxShadow:`0 0 0 1.5px ${n?s().Tj.background.tertiaryTranslucent:s().Tj.border.strongTranslucent}`,background:s().Tj.background.primary},...i&&{boxShadow:s().Tj.buttonBlueFocusRing}},active:{background:t?s().Tj.blueButtonPressedBackground:s().Tj.buttonHoveredBackground},input:{opacity:0,width:"large"===a?18:void 0,height:"large"===a?18:void 0,...n?{pointerEvents:"none"}:{cursor:"pointer"}}})),[a,t,n,i])}({checked:u,disabled:c,selectorSize:t,isFocusVisible:m});return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("input",{ref:p,type:"checkbox",style:g.input,...n}),(0,d.jsx)("span",{...(0,a().ow)(g.root,c?{}:{pseudoActive:g.active}),children:u?(0,d.jsx)(l().I,{icon:r().checkmarkFillSmallIcon,colorPalette:"blue",colorVariant:"inversePrimary",size:"large"===t?"xs":"xxs"}):void 0})]})}},669548:(e,t,n)=>{n.d(t,{w:()=>p});n(16280),n(18107),n(967357),n(898992),n(737550);var i=()=>n(907258),o=()=>n(388821),a=()=>n(179034),r=()=>n(37450),s=()=>n(807700),l=()=>n(644854),d=()=>n(544198),c=()=>n(594794),u=()=>n(863168);function p(e){var t,n;const{environment:p,createBlockItem:m,from:g,inMemoryRecordCache:y,transaction:b,selection:f}=e;if(!m.templateRootBlockId||!m.createTemplate)throw new Error("Invalid createBlock item.");const v=(f.length>0?f[0].getSpaceId():void 0)??e.spaceId??(null===(t=i().default.state.mainEditorCurrentBlockStore)||void 0===t?void 0:t.getSpaceId()),h=v?p.idCreator.getSpaceIdCreatorSync(v):void 0,x=f.some((e=>(0,s().l)(e))),S=m.createTemplate(p),{targetBlockStore:A}=(0,l().initializeTemplate)({environment:p,sourceBlockId:m.templateRootBlockId,targetBlockPointer:(0,c().zP)({environment:p,table:a().ev,spaceId:v}),sourceBlockSubtree:(0,o().partialRecordMapToRecordMap)(S),targetRecordCache:y,transaction:b,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!x,spaceIdCreator:h});null===(n=m.postCreateCallback)||void 0===n||n.call(m,A,p,b);const[w]=f;if(u().eY({environment:p,store:A,transaction:b,previousStore:w}),g&&m.blockType){var k;const e=m.collectionViewType,t="full_page"===e,n=0!==f.length?null===(k=f[0])||void 0===k?void 0:k.getParentCollectionIdUpToTwoLevels():void 0;let i,o,a,s;if("chart"===e){var T,I;const e=null===(T=A.getCollectionViewStores())||void 0===T?void 0:T.at(0);i=null==e||null===(I=e.getChartConfig())||void 0===I?void 0:I.type,o=null==e?void 0:e.getChartPlaceholderType()}if("form_editor"===e){var j;const e=null===(j=A.getCollectionViewStores())||void 0===j?void 0:j.at(0),t=null==e?void 0:e.getFormBlockStore();a=null==t?void 0:t.id,s=null==e?void 0:e.id}const{collectionId:l,ownedCollectionCount:c,linkedCollectionCount:u}=(0,d().P)(A,{skipPages:!1}),y={from:g,collection_id:l,owned_collection_count:c,linked_collection_count:u,view_type:"inline"===e||"full_page"===e?"table":e,is_toggleable:m.isToggleable,automation_id:A.getAutomationId(),new_page_id:"page"===m.blockType?A.id:void 0,creating_block_id:A.id,parent_collection_id:n,is_full_screen:t,chart_type:"placeholder"===i?o:i,is_chart_placeholder:"placeholder"===i,form_id:a,view_id:s},b=m.blockType;r().tP(b)?r().vH(p,{...y,type:b,collection_id:l||""}):r().vH(p,{...y,type:b})}return A}},673657:(e,t,n)=>{n.d(t,{n:()=>a});var i=()=>n(590526),o=()=>n(964345);function a(e){return(0,i().K8)((()=>o().gZ.state&&(null==e?void 0:e.id)===o().Di.state),[e])}},687110:(e,t,n)=>{n.r(t),n.d(t,{PageAnalyticsPageOptOut:()=>S,TopbarPageAnalyticsOptOutMenu:()=>x,TopbarPageAnalyticsOptOutMenuStore:()=>h});n(296540);var i=()=>n(664594),o=()=>n(907258),a=()=>n(135168),r=()=>n(726637),s=()=>n(484714),l=()=>n(590526),d=()=>n(127833),c=()=>n(30537),u=()=>n(396896),p=()=>n(416783),m=()=>n(69708),g=()=>n(72234),y=()=>n(232930),b=()=>n(443002),f=()=>n(702723),v=n(474848);const h=n(757695).Store.createValue({isOpen:!1,rect:void 0},{name:"TopbarPageAnalyticsOptOutMenuStore"});function x(){const e=(0,l().K8)((()=>h.state.isOpen),[]),t=(0,l().K8)((()=>h.state.rect),[]),n=(0,l().O$)(o().AppStoreMainEditorCurrentBlockStore);return n?(0,v.jsx)(d().zD,{popupType:r().A.isMobile?c().n.SlideUp:c().n.Popup,alignmentToOrigin:"center",open:e,render:()=>(0,v.jsx)("div",{style:{minWidth:360,padding:16},children:(0,v.jsxs)(u().VP,{gap:16,children:[(0,v.jsx)("div",{style:{fontSize:16,fontWeight:500},children:(0,v.jsx)(m().sA,{id:"TopbarPageAnalyticsOptOutMenu.heading",defaultMessage:"Privacy settings"})}),(0,v.jsx)(S,{store:n})]})}),originRect:t,onDismiss:()=>h.setState({isOpen:!1,rect:void 0})}):null}function S(e){const t=(0,s().v3)(),n=(0,i().T)(),{settings:o,spaceStore:r}=(0,l().K8)((()=>{const i=(0,a().f)(e.store);if(!i||!n)return{settings:void 0,spaceStore:void 0};const o=(0,b().H)({spaceStore:i,userId:n,environment:t});return{settings:null==o?void 0:o.getSettings(),spaceStore:i}}),[e.store,t,n]),d=(0,l().K8)((()=>{const t=null==o?void 0:o.page_analytics_opt_out_list;return null==t?void 0:t.includes(e.store.id)}),[o,e.store.id]);return(0,v.jsx)(f().A,{spaceStore:r,type:"dropdown",alignmentToOrigin:"end",currentOption:d?"do_not_record":"record",options:[{key:"record",label:(0,v.jsx)(m().sA,{id:"page_analytics.opt_out.record",defaultMessage:"Allow"})},{key:"do_not_record",label:(0,v.jsx)(m().sA,{id:"page_analytics.opt_out.do_not_record",defaultMessage:"Don’t allow"})}],onSelectOption:n=>{"do_not_record"===n?g().Oy(t,e.store.id):g().F3(t,e.store.id)},title:(0,v.jsx)(m().sA,{id:"page_analytics.opt_out.title",defaultMessage:"Show your view history"}),caption:(0,v.jsx)(m().sA,{id:"page_analytics.opt_out.caption",defaultMessage:"Page editors can see your view history for this page. <inlinelink>Learn more</inlinelink>.",values:{inlinelink:e=>(0,v.jsx)(p().V,{external:!0,href:(0,y().x)("guides.pageAnalytics"),children:e})}})})}},721253:(e,t,n)=>{n.d(t,{lv:()=>f,C5:()=>y,u7:()=>g,uh:()=>b});var i=()=>n(560198),o=()=>n(267785),a=()=>n(100622);const r="theme";var s=()=>n(534177),l=()=>n(44551);var d=()=>n(20822),c=()=>n(661179);const u=15;function p(e,t){const{ThemeStore:n}=e,{mode:s,usingSystemTheme:d}=t;if(i()._u)return;const c={mode:s};var u,p;n.setState(c),e.mobileNative&&e.mobileNative.setTheme(s,d),u=function(e,t){const n=(0,a().O4)({theme:e});return{mode:e,usingSystemTheme:t,colors:{white:a().oZ.white,blue:a().oZ.blue},borderRadius:4,textColor:n.text.primary,popoverBackgroundColor:n.popoverBackground,popoverBoxShadow:n.shadowMD,inputBoxShadow:n.inputBoxShadow,inputBackgroundColor:n.inputBackground,dividerColor:n.border.primaryTranslucent,shadowOpacity:0}}(s,d),null===l().electronApi||void 0===l().electronApi||null===(p=l().electronApi.setTheme)||void 0===p||p.call(l().electronApi,u);try{localStorage.setItem(r,JSON.stringify(c))}catch(m){(0,o().x)(r,JSON.stringify(c),"ThemeActions",m)}g(s),"dark"===s?(document.body.classList.add("dark"),document.body.classList.add("notion-dark-theme")):(document.body.classList.remove("dark"),document.body.classList.remove("notion-dark-theme"))}const m={scrollbarTrack:{light:"rgba(0, 0, 0, 0)",dark:"rgba(0, 0, 0, 0)"},scrollbarThumb:{light:"#D3D1CB",dark:"rgba(255, 255, 255, 0.2)"}};function g(e){if(0===c().A.state)return;const t=document.getElementById("scroll-properties");t&&(t.innerHTML=`\n\t\t* {\n\t\t\tscrollbar-width: ${u}px;\n\t\t\tscrollbar-color: ${m.scrollbarThumb[e]}  ${m.scrollbarTrack[e]};\n\t\t}\n\t`)}function y(e){d().A.setState(e)}function b(e){const t=f();switch(t){case"dark":case"light":p(e,{mode:t,usingSystemTheme:!1});break;case"system":!async function(e){const{mobileNative:t}=e;let n="light";n=t&&t.api.getTheme?await t.api.getTheme():(0,i().VD)(e),p(e,{mode:n,usingSystemTheme:!0})}(e);break;default:(0,s().HB)(t)}}function f(){const e=d().A.state||"system";return"dark"===(t=e)||"light"===t||"system"===t?t:"system";var t}},756114:(e,t,n)=>{n.d(t,{D:()=>i});function i(e,t){t.route.name;return!1}},763765:(e,t,n)=>{n.d(t,{t:()=>o});class i extends(()=>n(757695))().Store{getInitialState(){return{loaded:!1}}USEWITHCAUTION_markStatsigUserFetched(e){const{userId:t,spaceId:n,fetched:i}=e;this.setState({loaded:i,userId:t,spaceId:n})}USEWITHCAUTION_isFetchedForSpaceAndUserId(e){const{spaceId:t,userId:n}=e;return this.state.loaded&&this.state.spaceId===t&&this.state.userId===n}}const o=new i;(0,n(852832).exposeDebugValue)("statsigUserLoadingStatusStore",o)},786702:(e,t,n)=>{n.d(t,{w:()=>a});var i=()=>n(726637),o=()=>n(435386);function a(e){return(0,o().w)({url:e,config:i().A})}},800140:(e,t,n)=>{n.d(t,{s:()=>a});var i=()=>n(917908),o=()=>n(414754);function a(e){i().H.canGoForward()&&(0,o().o)({environment:e,offset:1})}},803074:(e,t,n)=>{n.d(t,{C4:()=>h,Nf:()=>S,qM:()=>x});n(16280),n(944114),n(898992),n(430670),n(581454);var i=()=>n(726637),o=()=>n(675133),a=()=>n(792057),r=()=>n(732810),s=()=>n(617871),l=()=>n(388693),d=()=>n(519831),c=()=>n(161479),u=()=>n(534177),p=()=>n(594794),m=()=>n(252833),g=()=>n(620791),y=()=>n(769864),b=()=>n(510683),f=()=>n(384944);const v=(0,n(69708).YK)({authError:{defaultMessage:"Auth failed. Please try again or contact Notion support.",id:"database.viewSettings.propertyTypeSection.connected.authFail"},mobileAdminError:{defaultMessage:"Ask your workspace admin to configure the GitHub (Workspace) app in settings to use this feature.",id:"database.viewSettings.propertyTypeSection.connected.mobileAdminError"},mobileError:{defaultMessage:"Please authorize this integration on the desktop app or a browser.",id:"database.viewSettings.propertyTypeSection.connected.mobileError"}});async function h(e,t,n,r){const s=null==t?void 0:t.getSpaceStore();if(!s)return;const l=(0,g().jw)(n.id).length;if(i().A.isMobile&&r&&!l){const e=o().A.formatMessage(v.mobileAdminError);throw a().f1(e),new Error(e)}if(i().A.isMobile&&!r&&!l){const e=o().A.formatMessage(v.mobileError);throw a().f1(e),new Error(e)}if(!l&&r&&s.canAdmin()||!l&&!r)try{await b().Jq({environment:e,integration:n,spaceId:s.id,from:"collection_settings_property_type"})}catch(d){const e=o().A.formatMessage(v.authError);throw a().f1(e),new Error(e)}if(!(0,g().jw)(n.id).length){const e=o().A.formatMessage(v.authError);throw a().f1(e),new Error(e)}}function x(e){const{environment:t,pattern:n,integration:i,parentCollectionStore:o,transaction:a}=e;if(!n.connected_relation_properties)throw new Error("Cannot create a connected relation collection without properties");const s=new(r().m)(t,(0,p().zP)({environment:t,table:d().Vl,spaceId:o.pointer.spaceId})),l={};n.connected_relation_sub_schemas&&(0,u().WP)(n.connected_relation_sub_schemas).map((([e,n])=>{const i=new(r().m)(t,(0,p().zP)({environment:t,table:d().Vl,spaceId:o.pointer.spaceId})),u={bot_id:void 0,external_object_id:void 0,uri:e,integration_id:void 0,is_placeholder:void 0,original_url:void 0,domain:void 0,external_schema:n,sync_state:void 0,pattern_name:void 0},m={id:i.id,version:0,space_id:(0,c().e)(o.pointer.spaceId),parent_table:d().Vl,parent_id:s.id,alive:!0,format:u,schema:{}};l[e]=i.id,f().zv({store:i,data:m,transaction:a})}));const g={id:s.id,version:0,space_id:(0,c().e)(o.pointer.spaceId),parent_table:d().Vl,parent_id:o.id,alive:!0,format:{attributes:[{id:"title",name:"title",type:"inline",format:{type:"title",section:"title"},values:[(0,m().Fe)({pattern:n,integration:i})]}],bot_id:void 0,external_object_id:void 0,uri:`notion://user-defined-collection/${i.id}/${n.name}`,integration_id:i.id,is_placeholder:void 0,original_url:void 0,domain:void 0,external_schema:n.connected_relation_properties,sync_state:void 0,pattern_name:n.name,related_external_object_uris_to_instance_ids:l},schema:{}};return f().zv({store:s,data:g,transaction:a}),s}async function S(e){const{bot:t,connected_relation_properties:n}=e;if(t.integration_id===s().Iy||t.integration_id===s().mn)return await async function(e){var t,n,i;const{environment:o,objectName:a,spaceId:r,bot:s}=e,d=await y().callApi({eventName:"describeSalesforceObject",environment:o,data:{spaceId:r,objectName:a,botId:s.id}});if("success"!==(null==d?void 0:d.type))return{error:l().qh.FAILED_TO_FETCH_SALESFORCE_PROPERTIES};var c,u;if((null===(t=d.data)||void 0===t?void 0:t.responseStatus)===l().qh.REAUTHENTICATION_REQUIRED||(null===(n=d.data)||void 0===n?void 0:n.responseStatus)===l().qh.NO_USER_API_ACCESS)return{error:`${null===(c=d.data)||void 0===c?void 0:c.responseStatus}:${null===(u=d.data)||void 0===u?void 0:u.userType}`};const p=null==d||null===(i=d.data)||void 0===i?void 0:i.properties;if(p){return{value:p.flatMap((e=>{const t=e.custom?e.label:e.relationshipName||e.label;return"User"===e.referenceTo||"Group"===e.referenceTo?[{id:e.name,name:t,isSelected:!1,type:e.type,metadata:e,isAlreadySynced:e.isAlreadySynced,isAdminNotAccessible:e.isAdminNotAccessible},{id:`mapped_${e.name}`,name:`${t} (Notion User)`,isSelected:!1,type:"person",metadata:e,isAlreadySynced:e.isAlreadySynced,isAdminNotAccessible:e.isAdminNotAccessible}]:[{id:"Name"===e.name?"title":e.name,name:"relation"===e.type?t:e.label,isSelected:!1,type:e.type,metadata:e,isAlreadySynced:e.isAlreadySynced,isAdminNotAccessible:e.isAdminNotAccessible}]}))}}return{error:l().qh.NO_PROPERTIES_FOUND}}(e);const i=[],o=n;for(const a in o){const e=o[a];null!=e&&e.name&&null!=e&&e.type&&i.push({id:a,name:e.name,isSelected:!1,type:e.type,metadata:{name:e.name,label:e.name,type:e.type,custom:!1},isAlreadySynced:!1})}return{value:i}}},811558:(e,t,n)=>{var i=n(746518),o=n(439928),a=n(225397),r=Array;i({target:"Array",proto:!0},{with:function(e,t){return o(a(this),r,e,t)}})},824160:(e,t,n)=>{n.d(t,{A:()=>d});n(296540);var i=()=>n(726637),o=()=>n(484714),a=()=>n(401497),r=()=>n(718827),s=()=>n(100622),l=n(474848);function d(e){const t=(0,o().Y0)(),n=(0,a().IS)((()=>({sharedStyle:{display:"flex",alignItems:"center",borderRadius:4},innerStyle:{padding:"2px 6px",borderRadius:4,color:s().Tj.text.secondary,background:s().Tj.defaultBadgeBackground,fontSize:i().A.isMobile?11:9,lineHeight:t.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em",whiteSpace:"nowrap"}})),[t.isAndroid]);return i().A.isMobile?(0,l.jsx)(r().Ay,{style:{...n.sharedStyle,...e.mobileStyle},disabled:void 0===e.onClick,children:(0,l.jsx)("div",{style:{...n.innerStyle,...e.innerStyle},children:e.children})}):(0,l.jsx)(r().Ay,{style:{...n.sharedStyle,...e.desktopStyle},disabled:void 0===e.onClick,...e,children:(0,l.jsx)("div",{style:{...n.innerStyle,...e.innerStyle},children:e.children})})}},846523:(e,t,n)=>{n.d(t,{u:()=>i});const i=(0,n(340498).xh)("questionMarkCircle",{default:{loader:()=>n.e(82106).then(n.bind(n,406533))},small:{loader:()=>n.e(82106).then(n.bind(n,721479))},fill:{loader:()=>n.e(82106).then(n.bind(n,299733))},fillSmall:{loader:()=>n.e(82106).then(n.bind(n,182060))}},["question","query","inquiry","uncertain","unknown","help","circle"])},848565:(e,t,n)=>{n.d(t,{FB:()=>p,JC:()=>g,Ql:()=>m,Wv:()=>a,Yz:()=>s,ds:()=>o,e4:()=>i,eQ:()=>r,im:()=>d,jw:()=>l,k2:()=>u,uG:()=>c});const i=8,o=10,a=8,r=24,s=6,l=1.5,d=(r-l)/2,c=r+s,u=`calc(100% + ${a+(i-s)-c}px)`,p=r+8,m=-16;function g(e,t,n){return t?20:"margin_comments"===e?12:"comment_unfurl"===e&&"start"===n?14:16}},863059:(e,t,n)=>{n.d(t,{Hh:()=>C,Kh:()=>k,Nq:()=>w,U:()=>T,gQ:()=>M,nh:()=>j,u7:()=>I});var i=n(296540),o=()=>n(726637),a=()=>n(484714),r=()=>n(590526),s=()=>n(401497),l=()=>n(75435),d=()=>n(418135),c=()=>n(340498),u=()=>n(175947),p=()=>n(100622),m=()=>n(180252),g=()=>n(614949),y=()=>n(696746),b=()=>n(900652),f=()=>n(441199),v=()=>n(644914),h=()=>n(224011),x=()=>n(150193),S=()=>n(965833);const A=10;function w(){const{isElectronWindows:e}=(0,a().Y0)(),t=(0,r().O$)(l().b),n=(0,r().K8)((()=>l().A.state.zoomFactor||d().rx),[]),s=e&&!t;return(0,i.useMemo)((()=>s?(0,d().yA)(n)+4:o().A.isMobile?4:A),[s,n])}function k({shouldRenderTemplateGalleryTopbar:e}){const t=(0,a().v3)(),n=(0,r().K8)((()=>l().A.state.zoomFactor),[]),s=(0,r().O$)(l().b),c=(0,r().K8)((()=>(0,g().X)(t).shouldShowSidebar),[t]),p=(0,r().K8)((()=>(0,v().KB)(t)),[t]),m=(0,r().K8)((()=>f().default.isPanelPinnedState()),[]),y=(0,r().K8)((()=>h().A.state.isFullScreen),[]),{device:b}=t,x=n||d().rx,S=b.isElectronMac&&(!c||!p&&!m)&&!y&&!s,A=b.isElectronWindows&&!s,w=A&&(!c||!p&&!m);let k=u().ek(b.isElectronMac);e&&(k=u().Hi);return(0,i.useMemo)((()=>({display:"flex",justifyContent:"space-between",alignItems:"center",overflow:"hidden",height:k,paddingInlineStart:S?(0,d().n$)(x):w?46:o().A.isMobile?4:12,paddingInlineEnd:A?(0,d().yA)(x)+4:o().A.isMobile?4:10})),[k,S,x,w,A])}function T({store:e,shouldRenderTemplateGalleryTopbar:t,isBrowserFullScreen:n}){const i=(0,a().v3)(),o=(0,a().Y0)(),c=(0,a().WS)(),g=(0,r().K8)((()=>"meet"===i.RouterStore.state.route.name),[i.RouterStore]),f=(0,r().K8)((()=>((0,y().lU)(e)||g)&&0===x().A.state.banners.length),[e,g]);let h=u().ek(o.isElectronMac);t&&(h=2*u().Hi);const A=(0,r().K8)((()=>b().Z8()),[]),w=(0,r().O$)((0,m().$o)(i)),k=(0,r().K8)((()=>l().A.state.zoomFactor),[]),T=u().pz(o.isElectronMac,n,k||d().rx);return(0,s().IS)((()=>({header:{background:f&&!c?"transparent":p().Tj.background.primary,maxWidth:"100vw",zIndex:100,WebkitUserSelect:"none",userSelect:"none",position:"relative"},container:{width:`calc(100% - ${A}px)`,maxWidth:"100vw",height:h,opacity:w?0:1,transition:`\n\t\t\t\t\t\topacity ${S().L}ms,\n\t\t\t\t\t\tcolor ${S().L}ms\n\t\t\t\t\t`,position:"relative",insetInlineStart:A},electronTopbarSidebarMousePeekArea:{position:"absolute",top:0,bottom:-v().qe,width:`${T}px`}})),[f,c,A,w,h,T])}const I=34,j=28;function C(){return{iconButton:{width:I,height:j,marginInlineEnd:2},icon:{height:c().Ev.lg,width:c().Ev.lg,fill:p().Tj.icon.primary},tabletIcon:{height:c().lD.lg,width:c().lD.lg,fill:p().Tj.icon.primary}}}function M(){return(0,s().IS)(C,[])}},866805:(e,t,n)=>{n.d(t,{Jl:()=>c,Ni:()=>l,OE:()=>d});var i=()=>n(242422),o=()=>n(726637),a=()=>n(534177),r=()=>n(246679),s=()=>n(243331);const l=3;function d(){if(o().A.isMobile)return!1;if(!i().default.checkGate({gateName:"agent_daily_brief"}))return!1;const e="authenticated"===r().gv.state.status,t="authenticated"===s().Lf.state.status;return e&&t}async function c(e={}){var t;const{spaceId:i,environment:o,...r}=e,{UserChatPreferenceLocalStorageStore:s}=await n.e(37342).then(n.bind(n,166442)),{AGENT_MODEL_TYPES:l}=await n.e(27992).then(n.bind(n,365646)),d=i?(null===(t=s.getState())||void 0===t?void 0:t[i])??{}:{},{model:c}=d;let u=c&&(0,a().Xk)(l,c)?c:void 0;if(i&&u){const{getAvailableWorkflowAgentModels:e}=await Promise.all([n.e(27992),n.e(7049)]).then(n.bind(n,676953));e(o,i).has(u)||(u=void 0)}const{getWorkflowAgentConfig:p}=await Promise.all([n.e(35530),n.e(55373),n.e(36192),n.e(27992),n.e(63452),n.e(66249),n.e(87249),n.e(79022),n.e(34877),n.e(32236)]).then(n.bind(n,844317)),m=p({...r,spaceId:i,model:u,useReadOnlyMode:!1}),g=!0;return m.enableUserSessionContext=!0,m.enableQueryCalendar=g,m.enableQueryMail=g,m.enableAgentViewNotificationsTool=g,m.agentFollowupVariation=void 0,m}},877051:(e,t,n)=>{n.d(t,{V:()=>s});var i=n(296540),o=()=>n(907258),a=()=>n(590526),r=()=>n(391400);function s(){const e=(0,i.useRef)(!1),t=(0,a().K8)((()=>o().default.state.renderPhase),[]),n=(0,a().K8)((()=>r().A.state.initialCollectionPendingRenderCount>0),[]);return"rendered"!==t||n||(e.current=!0),!e.current}},905073:(e,t,n)=>{n.d(t,{z:()=>d});var i=()=>n(564884),o=()=>n(757695),a=()=>n(755125),r=()=>n(301809),s=()=>n(206267),l=()=>n(683021);function d(e){const{environment:t,blockStore:n,insertedTextBlockLocation:d,editSelection:c,getRectFromStore:u}=e,p=l().Ay.state;if(c({environment:t,store:n}),(0,r().e)({store:n.getBlockTitleStore()}),!p.open&&!t.device.isPhone){const e=n.getBlockTitleStore(),c=u(n),p=s().JW();c&&(l().Ay.setState({id:p,open:!0,isAddMenu:!0,collapsed:!0,textStore:e,oldTextValue:e.getValue(),oldSelection:{startIndex:0,endIndex:0},selectionRect:c,lettersAtLastResult:0,filter:"",temporaryInputDataStore:o().Store.createValue(void 0,{name:"temporaryInputData"}),insertedTextBlockLocation:d}),(0,a().clear)({environment:t}),(0,r().e)({store:e}),(0,i().u)({environment:t,event:{eventName:"open_slash_menu",eventProperties:{id:p,source:"add_button"}}}))}}},912474:(e,t,n)=>{n.d(t,{a:()=>a});var i=()=>n(79926);const o=new(i().O2)("StopDictationButton",(async()=>await Promise.all([n.e(75134),n.e(35530),n.e(9773),n.e(36556),n.e(55373),n.e(36192),n.e(40537),n.e(27992),n.e(63452),n.e(66249),n.e(92845),n.e(87249),n.e(79022),n.e(44854),n.e(87017),n.e(34877),n.e(46414),n.e(11676),n.e(61165),n.e(94522),n.e(44584),n.e(38293),n.e(40992),n.e(88455),n.e(52871),n.e(47160),n.e(49021),n.e(53697),n.e(26126),n.e(6039),n.e(71136),n.e(86341),n.e(29316),n.e(3101)]).then(n.bind(n,962309)))),a=(0,i()._h)(o,(e=>e.StopDictationButton))},916275:(e,t,n)=>{n.d(t,{P:()=>a});n(16280),n(898992),n(354520),n(672577),n(737550);var i=()=>n(449412);class o extends(()=>n(62175))().U{isModelAvailable(e,t,n){const i=this.getData(e,{spaceId:t});return!!i&&i.some((e=>e.model===n))}isModelDisabled(e,t,n){const i=this.getData(e,{spaceId:t});if(!i)return!1;const o=i.find((e=>e.model===n));return(null==o?void 0:o.isDisabled)??!1}getModelsForMode(e,t,n){const i=this.getData(e,{spaceId:t});if(i)return i.filter((e=>"markdown-chat"===n?void 0!==e.markdownChat:void 0!==e.workflow))}}const a=new o(((e,{spaceId:t})=>`${e.currentUser.id}:${t}`),(async(e,{spaceId:t})=>{const o=e.currentUser.id;try{const a=await e.api.callCellCompatibleApi({eventName:"getAvailableModels",environment:e,cellNavigation:{spaceId:t},data:{spaceId:t}});if("failed"===a.type){const e=(0,n(247584).V4)(a);return void i().O8(new Error(`Failed to fetch available models: ${e}`),{from:"AvailableModelsStore.fetch",type:"api_failed_response",data:{spaceId:t,userId:o,errorMessage:e}})}return 0===a.data.models.length&&i().O8(new Error("Received empty model list from server"),{from:"AvailableModelsStore.fetch",type:"empty_response",data:{spaceId:t,userId:o}}),a.data.models}catch(a){return void i().O8(a,{from:"AvailableModelsStore.fetch",type:"error",data:{spaceId:t,userId:o}})}}),{dontCacheUndefined:!0});(0,n(852832).exposeDebugValue)("availableAiModelsStore",a)},923415:(e,t,n)=>{n.d(t,{S:()=>o});n(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"2.02 4.12 15.96 11.76",svg:(0,n(474848).jsx)("path",{d:"M17.975 15a.875.875 0 0 1-.875.875H2.9a.875.875 0 1 1 0-1.75h14.2c.483 0 .875.392.875.875m0-5a.875.875 0 0 1-.875.875H2.9a.875.875 0 1 1 0-1.75h14.2c.483 0 .875.392.875.875M17.1 5.875a.875.875 0 0 0 0-1.75H2.9a.875.875 0 1 0 0 1.75z"})},o=(0,n(340498).wt)("menuFill",i,"fill")},926586:(e,t,n)=>{n.d(t,{K:()=>p});n(296540);var i=()=>n(590526),o=()=>n(75435),a=()=>n(695115),r=()=>n(182183),s=()=>n(69708),l=()=>n(44551);var d=()=>n(130119),c=n(474848);const u=(0,s().YK)({menu:{defaultMessage:"Menu",id:"topbar.appMenuButton.title"}});function p(){const e=(0,s().tz)();return(0,i().O$)(o().b)?null:(0,c.jsx)(a().A,{style:{position:"absolute",top:"10px",insetInlineStart:"14px",width:24,height:24,zIndex:1e5,...(0,d().g)({noDrag:!0})},colorVariant:"primary",onClick:()=>{var e;null===l().electronApi||void 0===l().electronApi||null===(e=l().electronApi.openAppMenu)||void 0===e||e.call(l().electronApi)},icon:r().notionTintableIcon,ariaLabel:e.formatMessage(u.menu)})}},928213:(e,t,n)=>{n.d(t,{c:()=>r});var i=()=>n(165358),o=()=>n(519831),a=()=>n(769864);async function r(e){const{environment:t,collectionStore:n}=e,r={id:n.id,table:o().Vl,spaceId:n.getSpaceId()},s=await a().callApi({eventName:"suggestRecordKey",environment:t,data:{...r,shouldSetSuccessfullySuggestedRecord:!0}});if("success"===s.type)return s.data.key;i().log({level:"error",from:"collectionAutoIncrementIdActions.suggestRecordKeyResponse",type:"JSONParseError",error:{miscDataString:s.error.message}})}},937199:(e,t,n)=>{n.d(t,{LH:()=>a,Op:()=>o,bi:()=>l,sf:()=>s,v$:()=>r});n(16280);var i=n(296540);const o=(0,i.createContext)(null);function a(){const e=(0,i.useContext)(o);if(!e)throw new Error("usePageLayoutEditorContext must be used inside BaseLayoutEditorContext.Provider");return e}function r(){return(0,i.useContext)(o)}o.displayName="BaseLayoutEditorContext";const s=(0,i.createContext)(null);function l(){const e=(0,i.useContext)(s);if(!e)throw new Error("usePageLayoutEditorContext must be used inside PageLayoutEditorContextProvider");return e}s.displayName="PageLayoutEditorContext"},965351:(e,t,n)=>{n.d(t,{Ay:()=>R,Lk:()=>D,fB:()=>E});n(581454);var i=n(296540),o=()=>n(726637),a=()=>n(484714),r=()=>n(792485),s=()=>n(590526),l=()=>n(401497),d=()=>n(250910),c=()=>n(807449),u=()=>n(695115),p=()=>n(546926),m=()=>n(26697),g=()=>n(302501),y=()=>n(890492),b=()=>n(81068),f=()=>n(663639),v=()=>n(736847),h=()=>n(934999),x=()=>n(454503),S=()=>n(895189),A=()=>n(863522),w=()=>n(340498),k=()=>n(69708),T=()=>n(100622),I=()=>n(534177),j=()=>n(12591),C=()=>n(538075),M=()=>n(547149),P=()=>n(371015),_=n(474848);const B=(0,k().YK)({changePageNotificationSettings:{defaultMessage:"Change page notification settings",id:"inboxActionsMenu.notificationSettings.tooltipMessage"},markUnread:{defaultMessage:"Mark this notification as unread",id:"inboxActionsMenu.markNotificationAsUnread.tooltipMessage"},markRead:{defaultMessage:"Mark this notification as read",id:"inboxActionsMenu.markNotificationAsRead.tooltipMessage"},archive:{defaultMessage:"Archive this notification",id:"inboxActionsMenu.handleArchive.tooltipMessage"},unarchive:{defaultMessage:"Unarchive",id:"inboxActionsMenu.handleUnarchive.tooltipMessage"}}),E=2,F=30-2*(E+1),U=36-2*(E+1);function N(e){const{notification:t,rootStore:r,onArchiveClicked:c,onUnarchiveClicked:p,onMarkAsReadClicked:g,onMarkAsUnreadClicked:y}=e,b=(0,a().v3)(),f=(0,k().tz)(),v=(0,s().K8)((()=>!!t&&(0,n(814388).IF)(t.type)),[t]),I=(0,s().K8)((()=>{const e=null==t?void 0:t.navigable_block_id;if(e)return n(295633).B.createChildStore(r,{table:n(179034).ev,id:e})}),[r,t]),N=(0,s().K8)((()=>null==I?void 0:I.getFollowSettingsKey()),[I]),R=(0,s().K8)((()=>{if(!N)return[];if(!I)return[];return C().H8({followSettingsKey:N,environment:b,blockStore:I,from:"inbox"})}),[N,b,I]),V=v&&R.length>0,O=(0,s().K8)((()=>t.read?A().C:S().d),[t.read]),W=(0,i.useCallback)((e=>{t&&(c(),M().createAndCommit({userAction:"InboxActionsMenu.handleArchive",environment:b,canUndo:!0,perform:e=>{P().s4({notification:t,rootStore:r,transaction:e})}}))}),[b,t,c,r]),z=(0,i.useCallback)((e=>{t&&(p(),M().createAndCommit({userAction:"Activity.handleUnarchive",environment:b,canUndo:!0,perform:e=>{P().JV({notificationId:t.id,visited:!1,rootStore:r,transaction:e})}}))}),[b,t,p,r]),L=(0,i.useCallback)((e=>{t&&(t.read?y():g(),M().createAndCommit({userAction:"InboxActionsMenu.toggleNotificationReadStatus",environment:b,canUndo:!0,perform:e=>{P().ZB({notification:t,rootStore:r,transaction:e,read:!t.read})}}))}),[b,t,g,y,r]),K=(0,i.useCallback)((()=>{N&&I&&t&&n(848259).zP({environment:b,notificationId:t.id,pageId:I.pointer.id,isCurrentlyFollowing:(0,n(518773).A)(N).following,from:"inbox"})}),[b,I,N,t]),H=(0,l().IS)((()=>({container:{display:"flex",gap:1,height:"min-content",padding:E,borderWidth:o().A.isMobile?0:1,borderStyle:"solid",borderColor:T().Tj.border.primary,background:T().Tj.buttonGroupBackground,borderRadius:6,boxShadow:o().A.isMobile?void 0:"0px 2px 4px 0px rgba(22, 29, 27, 0.02)"},button:{height:o().A.isMobile?U:F,width:o().A.isMobile?U:F,borderRadius:4},icon:{fill:T().Tj.icon.secondary,padding:0,width:o().A.isMobile?w().lD.default:w().Ev.default,height:o().A.isMobile?w().lD.default:w().Ev.default}})),[]),X=(0,j().C)();return t.visited?(0,_.jsx)("div",{style:H.container,children:(0,_.jsx)(m().m,{renderTooltip:()=>f.formatMessage(B.unarchive),render:e=>(0,_.jsx)(u().A,{ariaLabel:f.formatMessage(B.unarchive),style:H.button,icon:x().arrowUTurnUpLeftIcon,iconStyle:H.icon,onClick:z,...e})})}):(0,_.jsxs)("div",{style:H.container,children:[V?(0,_.jsx)(m().m,{renderTooltip:()=>(0,_.jsx)(k().sA,{...B.changePageNotificationSettings}),render:e=>(0,_.jsx)(d().A,{style:X.popup,popupType:o().A.isMobile?d().z.SlideUp:d().z.Popup,alignmentToOrigin:"start",placementToOrigin:"bottom",render:e=>(0,_.jsx)(D,{blockStore:I,notification:t,handlers:{handleUnarchive:z,handleArchive:W,toggleNotificationReadStatus:L},closePopup:()=>e.close()}),renderOrigin:t=>(0,_.jsx)(u().A,{ariaLabel:f.formatMessage(B.changePageNotificationSettings),style:H.button,icon:n(104077).r,iconStyle:H.icon,...e,...(0,n(383036).A)(t,{onClick:()=>K()})})})},"pageNotificationSettings"):void 0,(0,_.jsx)(m().m,{renderTooltip:()=>f.formatMessage(t.read?B.markUnread:B.markRead),render:e=>(0,_.jsx)(u().A,{ariaLabel:f.formatMessage(t.read?B.markUnread:B.markRead),style:H.button,icon:O,iconStyle:H.icon,onClick:L,...e})},"markUnread"),(0,_.jsx)(m().m,{renderTooltip:()=>f.formatMessage(B.archive),render:e=>(0,_.jsx)(u().A,{ariaLabel:f.formatMessage(B.archive),style:H.button,icon:h().archiveBoxIcon,iconStyle:H.icon,onClick:W,...e})},"archive")]})}function D(e){const{blockStore:t,notification:n,handlers:i,closePopup:d}=e,{handleArchive:u,handleUnarchive:m,toggleNotificationReadStatus:w}=i,T=(0,a().v3)(),M=(0,k().tz)(),P=(0,s().K8)((()=>null==t?void 0:t.getFollowSettingsKey()),[t]),E=(0,s().K8)((()=>{if(!P)return[];if(!t)return[];return C().H8({followSettingsKey:P,environment:T,blockStore:t,from:"inbox"})}),[P,T,t]),F=(0,j().C)(),U=(0,l().IS)((()=>({iconContainer:{display:"flex",justifyContent:"center",alignItems:"center",...F.icon}})),[F.icon]),N=(0,r().S)(),D=(0,s().K8)((()=>n.read?(0,_.jsx)(c().I,{icon:A().C,size:24}):(0,_.jsx)(c().I,{icon:S().d,size:24})),[n.read]);return(0,_.jsx)(y().A,{menuType:p().gu.Popup,height:o().A.isMobile?"50vh":void 0,minWidth:250,maxWidth:o().A.isMobile?"100vw":void 0,scrollerStyle:F.menuScroller,header:!o().A.isMobile&&(0,_.jsx)(g().A,{style:F.header,isSmall:!o().A.isMobile,isSecondaryColor:!o().A.isMobile,children:(0,_.jsx)(k().sA,{id:"UpdateSidebarTabUpdatesHeader.pageNotificationSettings.label",defaultMessage:"Page notification settings"})}),children:(0,_.jsx)(f().A,{type:f().O.Vertical,sections:[...o().A.isMobile?[{key:"Actions title",render:()=>(0,_.jsx)(g().A,{style:F.header,isSmall:!o().A.isMobile,isSecondaryColor:!o().A.isMobile,children:(0,_.jsx)(k().sA,{id:"inbox.actionsSectionTitle.label",defaultMessage:"Actions"})}),items:[]},{key:"Actions",render:e=>(0,_.jsx)(v().A,{...e,topBorder:!1,style:F.sectionMenuItem}),items:["markAsReadOrUnread","archive"].map(((e,t)=>{const i=t===E.length-1,a=o().A.isMobile&&i;return{key:e,render:t=>"archive"===e?(0,_.jsx)(b().A,{...t,style:{...F.buttonMenuItem,...a&&F.transparentButtonMenuItemBorder},pressedStyle:F.buttonMenuItemPressed,icon:n.visited?(0,_.jsx)(c().I,{icon:x().arrowUTurnUpLeftIcon,style:{...F.icon,padding:3}}):(0,_.jsx)(c().I,{icon:h().archiveBoxIcon,style:F.icon}),title:M.formatMessage(n.visited?B.unarchive:B.archive),titleStyle:F.title}):"markAsReadOrUnread"===e?(0,_.jsx)(b().A,{...t,style:{...F.buttonMenuItem,...a&&F.transparentButtonMenuItemBorder},pressedStyle:F.buttonMenuItemPressed,icon:(0,_.jsx)("div",{style:U.iconContainer,children:D}),title:M.formatMessage(n.read?B.markUnread:B.markRead),titleStyle:F.title}):void(0,I().HB)(e),action:({event:t})=>{"markAsReadOrUnread"===e?w(t):"archive"===e?n.visited?m(t):u(t):(0,I().HB)(e),d()}}}))}]:[],...o().A.isMobile?[{key:"Page notification settings title",render:()=>(0,_.jsx)(g().A,{style:F.subheader,isSmall:!o().A.isMobile,isSecondaryColor:!o().A.isMobile,children:(0,_.jsx)(k().sA,{id:"inbox.notifyMeForSectionTitle.label",defaultMessage:"Page notification settings"})}),items:[]}]:[],{key:"Page notification settings",render:e=>(0,_.jsx)(v().A,{...e,topBorder:!1,style:F.sectionMenuItem}),items:E.map(((e,t)=>{const n=t===E.length-1,i=o().A.isMobile&&n;return{key:e.action.analyticsName,render:t=>(0,_.jsx)(b().A,{...t,style:{...F.buttonMenuItem,...i&&F.transparentButtonMenuItemBorder},pressedStyle:F.buttonMenuItemPressed,title:e.title,titleStyle:F.title,isChecked:e.isSelectedOption}),action:()=>{e.action.action({environment:T,blocks:[],publicEditMode:void 0,analyticsFrom:"inbox_long_press_menu",pageContext:N}),d()}}}))}],initialFocus:void 0,onAccept:()=>d()})})}const R=i.memo(N)},965833:(e,t,n)=>{n.d(t,{L:()=>i});const i=700},970236:(e,t,n)=>{n.d(t,{E:()=>s});n(296540);var i=()=>n(401497),o=()=>n(100622),a=()=>n(284371),r=n(474848);function s(e){const{color:t="gray",style:n,content:s,...l}=e,d=(0,i().IS)((()=>({badge:{alignSelf:"center",padding:"2px 4px",background:o().Tj[t].background.secondaryTranslucent,color:o().Tj[t].text.accentPrimary,borderRadius:4,fontSize:11,fontWeight:a().Wy.medium,lineHeight:1.3,...n}})),[t,n]);return(0,r.jsx)("div",{style:d.badge,...l,children:s})}},976582:(e,t,n)=>{n.d(t,{m:()=>a});var i=n(296540);class o{constructor(e){this.topbarRenderLocation=void 0;const{topbarRenderLocation:t}=e;this.topbarRenderLocation=t}get showNewTabButton(){return{AIChat:!0,DefaultTopbar:!0,Marketplace:!0,PersonProfile:!0,PersonalHome:!0,PersonalHomeScrolled:!0,PublicPage:!0,PublicSharing:!0,TeamHome:!0,TrustedDomainPage:!0,WorkflowEditor:!0,AssistantMenuHeader:!1,Meet:!1}[this.topbarRenderLocation]}get topbarActionsDisplayStyle(){return{PersonalHome:"transparent",PersonalHomeScrolled:"bordered",AIChat:"solid",AssistantMenuHeader:"solid",DefaultTopbar:"solid",Marketplace:"solid",PersonProfile:"solid",PublicPage:"solid",PublicSharing:"solid",TeamHome:"solid",TrustedDomainPage:"solid",WorkflowEditor:"solid",Meet:"solid"}[this.topbarRenderLocation]}get showDesktopAppMenuIconButton(){return{AIChat:!0,AssistantMenuHeader:!1,DefaultTopbar:!1,Marketplace:!1,PersonProfile:!1,PersonalHome:!1,PersonalHomeScrolled:!1,PublicPage:!1,PublicSharing:!1,TeamHome:!1,TrustedDomainPage:!1,WorkflowEditor:!1,Meet:!1}[this.topbarRenderLocation]}}function a(e){const{location:t}=e;return(0,i.useMemo)((()=>new o({topbarRenderLocation:t})),[t])}}}]);