"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[26962],{8633:(e,t,o)=>{o.d(t,{b:()=>l});o(898992),o(354520),o(672577),o(581454),o(296540);var r=()=>o(69708),n=()=>o(284371),i=()=>o(764880),s=()=>o(268809),a=o(474848);function l(e){const{intl:t,authors:o,currentUserId:l,isCondensedFormat:d=!1,fontWeightForAuthorNames:c="semibold",precomputedActorNames:u}=e,p=o.find((e=>e.id===l)),h={fontWeight:c?n().Wy[c]:n().Wy.semibold},f=u??o.filter((e=>e!==p)).map((e=>(0,i().lR)(t,e)));if(l&&p){if(0===f.length)return(0,a.jsx)("span",{children:(0,a.jsx)(r().sA,{...s().U.forOneAuthorCurrentUser})});if(1===f.length)return(0,a.jsx)("span",{children:(0,a.jsx)(r().sA,{...s().U.forTwoAuthorsCurrentUser,values:{firstAuthor:f[0],b:e=>(0,a.jsx)("span",{style:h,children:e})}})});if(2===f.length)return(0,a.jsx)("span",{children:(0,a.jsx)(r().sA,{...s().U.forThreeAuthorsCurrentUser,values:{firstAuthor:f[0],secondAuthor:f[1],b:e=>(0,a.jsx)("span",{style:h,children:e})}})});if(f.length>2){const e=(0,a.jsx)(r().sA,{...s().U.forMoreThanThreeAuthorsCurrentUser,values:{numberOfOtherAuthors:f.length-1,firstAuthor:f[0],b:e=>(0,a.jsx)("span",{style:h,children:e})}});return(0,a.jsx)("span",{children:e})}}else{if(1===f.length)return(0,a.jsx)("span",{children:(0,a.jsx)(r().sA,{...s().U.forOneAuthor,values:{author:f[0],b:e=>(0,a.jsx)("span",{style:h,children:e})}})});if(2===f.length)return d?(0,a.jsx)("span",{children:(0,a.jsx)(r().sA,{...s().U.forTwoAuthorsCondensed,values:{firstAuthor:f[0],secondAuthor:f[1],b:e=>(0,a.jsx)("span",{style:h,children:e})}})}):(0,a.jsx)("span",{children:(0,a.jsx)(r().sA,{...s().U.forTwoAuthors,values:{firstAuthor:f[0],secondAuthor:f[1],b:e=>(0,a.jsx)("span",{style:h,children:e})}})});if(f.length>2){if(d){const e=(0,a.jsx)(r().sA,{...s().U.forMoreThanTwoAuthorsCondensed,values:{numberOfOtherAuthors:f.length-1,firstAuthor:f[0],b:e=>(0,a.jsx)("span",{style:h,children:e})}});return(0,a.jsx)("span",{children:e})}{const e=(0,a.jsx)(r().sA,{...s().U.forMoreThanTwoAuthors,values:{numberOfOtherAuthors:f.length-2,firstAuthor:f[0],secondAuthor:f[1],b:e=>(0,a.jsx)("span",{style:h,children:e})}});return(0,a.jsx)("span",{children:e})}}}return(0,a.jsx)("span",{children:(0,a.jsx)(r().sA,{...s().U.someone})})}},110886:(e,t,o)=>{o.d(t,{X:()=>l,r:()=>d});o(18107),o(967357),o(581454);var r=()=>o(604995),n=()=>o(161479),i=()=>o(769864);const s=20,a=20;async function l(e,t){const{store:o,activityIds:r,spaceId:l,filterActivityTypes:d,filterDateRange:u,navigableBlockId:p,collectionIds:h,authorId:f,source:m}=t,g=r[0],y="person_profile"===m&&f?await i().callApi({eventName:"getRecentActivityFeed",environment:e,data:{spaceId:l,authorId:f,limit:a}}):await i().callApi({eventName:"getActivityLog",environment:e,data:{spaceId:l,navigableBlock:p?{id:p,spaceId:(0,n().e)(void 0)}:void 0,collections:h?h.map((e=>({id:e,spaceId:(0,n().e)(void 0)}))):void 0,endingBeforeId:g,limit:s,activityTypes:d,...c(u),authorId:f}});if("failed"===y.type)throw y.error;const v=y.data.activityIds;o.update((e=>({...e,shouldLoadNewerActivities:!1,activityIds:v.concat(r)})))}async function d(e,t){const{store:o,activityIds:r,spaceId:l,filterActivityTypes:d,filterDateRange:u,navigableBlockId:p,collectionIds:h,authorId:f,source:m}=t,g=r.at(-1),y="person_profile"===m&&f?await i().callApi({eventName:"getRecentActivityFeed",environment:e,data:{spaceId:l,startingAfterId:g,authorId:f,limit:a}}):await i().callApi({eventName:"getActivityLog",environment:e,data:{spaceId:l,navigableBlock:p?{id:p,spaceId:(0,n().e)(void 0)}:void 0,collections:h?h.map((e=>({id:e,spaceId:(0,n().e)(void 0)}))):void 0,startingAfterId:g,limit:s,activityTypes:d,...c(u),authorId:f}});if("failed"===y.type)throw y.error;const v=y.data.activityIds;o.update((e=>({...e,shouldLoadOlderActivities:!1,activityIds:r.concat(v),hasOlderActivities:v.length>0})))}function c(e){var t,o;const n=null!==(t=e.ending)&&void 0!==t&&t.start_date?r().C6.isoToUnixMs(e.ending.start_date):void 0;return{startingAfterTimeMs:null!==(o=e.starting)&&void 0!==o&&o.start_date?r().C6.isoToUnixMs(e.starting.start_date):void 0,endingBeforeTimeMs:n?r().K1({date:n,daysToAdd:1}):void 0}}},132533:(e,t,o)=>{o.d(t,{X:()=>a,l:()=>s});var r=o(296540),n=o(474848);const i={hoveredIndex:null,setHoveredIndex:()=>{}},s=(0,r.createContext)(i);function a(e){const{children:t}=e,[o,i]=(0,r.useState)(null),a=(0,r.useMemo)((()=>({hoveredIndex:o,setHoveredIndex:i})),[o]);return(0,n.jsx)(s.Provider,{value:a,children:t})}s.displayName="InboxNotificationHoverContext"},253447:(e,t,o)=>{o.d(t,{F:()=>n});var r=()=>o(963575);function n(e,t){if(e)return e;switch(t){case"large":return r().A.card.desktop.large.height;case"small":return r().A.card.desktop.small.height;default:return r().A.card.desktop.medium.height}}},268809:(e,t,o)=>{o.d(t,{U:()=>r});const r=(0,o(69708).YK)({forOneAuthorCurrentUser:{id:"authorPhrase.forOneAuthorCurrentUser.label",defaultMessage:"You"},forTwoAuthorsCurrentUser:{id:"authorPhrase.forTwoAuthorsCurrentUser.label",defaultMessage:"<b>{firstAuthor}</b> and you"},forThreeAuthorsCurrentUser:{id:"authorPhrase.forThreeAuthorsCurrentUser.label",defaultMessage:"<b>{firstAuthor}</b>, <b>{secondAuthor}</b>, and you"},forMoreThanThreeAuthorsCurrentUser:{id:"authorPhrase.forMoreThanThreeAuthorsCurrentUser.label",defaultMessage:"{numberOfOtherAuthors, plural, one {<b>{firstAuthor}</b>, you, and {numberOfOtherAuthors} other} other {<b>{firstAuthor}</b>, you, and {numberOfOtherAuthors} others}}"},forOneAuthor:{id:"authorPhrase.forOneAuthor.label",defaultMessage:"<b>{author}</b>"},forTwoAuthorsCondensed:{id:"authorPhrase.forTwoAuthorsCondensed.label",defaultMessage:"<b>{firstAuthor}</b>, <b>{secondAuthor}</b>"},forTwoAuthorsPushNotification:{id:"authorPhrase.forTwoAuthorsPushNotification.label",defaultMessage:"{firstAuthor} and {secondAuthor}"},forTwoAuthors:{id:"authorPhrase.forTwoAuthors.label",defaultMessage:"<b>{firstAuthor}</b> and <b>{secondAuthor}</b>"},forMoreThanTwoAuthorsCondensed:{id:"authorPhrase.forMoreThanTwoAuthorsCondensed.label",defaultMessage:"{numberOfOtherAuthors, plural, one {<b>{firstAuthor}</b>, {numberOfOtherAuthors} other} other {<b>{firstAuthor}</b>, {numberOfOtherAuthors} others}}"},forMoreThanTwoAuthorsPushNotification:{id:"authorPhrase.forMoreThanTwoAuthorsPushNotification.label",defaultMessage:"{numberOfOtherAuthors, plural, one {{firstAuthor} and {numberOfOtherAuthors} other} other {{firstAuthor}, {numberOfOtherAuthors} others}}"},forMoreThanTwoAuthors:{id:"authorPhrase.forMoreThanTwoAuthors.label",defaultMessage:"{numberOfOtherAuthors, plural, =0 {<b>{firstAuthor}</b>, <b>{secondAuthor}</b>} one {<b>{firstAuthor}</b>, <b>{secondAuthor}</b>, and {numberOfOtherAuthors} other} other {<b>{firstAuthor}</b>, <b>{secondAuthor}</b>, and {numberOfOtherAuthors} others}}"},someone:{id:"authorPhrase.someone.label",defaultMessage:"Someone"}})},268933:(e,t,o)=>{o.d(t,{DU:()=>w,G7:()=>j,Ln:()=>A,T9:()=>C,U6:()=>T,bD:()=>I,pN:()=>M});o(18107),o(967357),o(898992),o(430670),o(581454),o(737550);var r=()=>o(907258),n=()=>o(675133),i=()=>o(770063),s=()=>o(295633),a=()=>o(732810),l=()=>o(849255),d=()=>o(764880),c=()=>o(8633),u=()=>o(601813),p=()=>o(179034),h=()=>o(824862),f=()=>o(519831),m=()=>o(197959),g=()=>o(798880),y=()=>o(201980),v=()=>o(220719),x=()=>o(496603),b=()=>o(534177),S=()=>o(499764);function j({actor:e,environment:t}){return e.isBot()?2:t.currentUser.id===e.id?1:0}function A(e){const{edits:t,rootStore:o}=e,r=x().Mp(t.flatMap((e=>e.authors||[])),x().n4),n=x().oE(r.map((e=>C(e,o))));return n.sort(((e,t)=>j({actor:e,environment:o.environment})-j({actor:t,environment:o.environment}))),n}function I(e,t){const{currentUserStore:o}=r().default.state,i=null==o?void 0:o.id;return(0,c().b)({intl:n().A.getIntl(),authors:e,currentUserId:i,fontWeightForAuthorNames:t})}function C(e,t){if(e.table===g().oo){const o=function(e,t){const o=l().L.createChildStore(t,{table:g().oo,id:e});return o.getValue()}(e.id,t);if(o)return(0,d().A7)(o)}else{const o=function(e,t){const o=(0,i().v3)(t,{table:h().GP,id:e});return o.getValue()}(e.id,t);if(o)return(0,d().qt)(o)}}function w(e){const{tab:t,recordId:o,recordType:r,rootStore:n,environment:i}=e;if("all"===t||"personProfile"===t){if(!o)return!1;let e;return"block"===r?e=s().B.createChildStore(n,{table:p().ev,id:o}):"collection"===r?e=a().m.createChildStore(n,{table:f().Vl,id:o}):(0,b().HB)(r),(0,S().X9)(i,e)}return!1}function T(e){const{activity:t,rootStore:o}=e;if("commented"!==t.type)return;const r=o.getRecordModel({table:m().$Y,id:t.discussion_id,spaceId:t.space_id});if(!r)return;const n=M(r);return n?{id:r.id,context:n}:void 0}function M(e){const t=e.getPersistedContext(),o=t?(0,u().l8)({discussionContextData:t,discussionType:(0,v().o9)(e.getType()),discussionId:e.id,intl:n().A.getIntl()}):void 0;if(o)return(0,y().JJ$)(o,(t=>!(0,y().iQL)(t)||(0,y().Orm)(t)===e.id))}},271232:(e,t,o)=>{o.d(t,{t:()=>i});var r=o(296540),n=o(474848);const i=r.memo((function(e){const{coverHeight:t,coverSizeFormat:r,emptyGalleryCoverStyle:i}=e,s=(0,o(401497).IS)((()=>({container:{height:(0,o(253447).F)(t,r),...i}})),[t,r,i]);return(0,n.jsx)("div",{style:s.container})}))},344417:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>r,magnifyingGlassSmallIcon:()=>n});o(296540);const r={viewBox:"0 0 16 16",fittedViewBox:"1.97 1.97 12.46 12.46",svg:(0,o(474848).jsx)("path",{d:"M7.1 1.975a5.125 5.125 0 1 0 3.155 9.164l3.107 3.107a.625.625 0 1 0 .884-.884l-3.107-3.107A5.125 5.125 0 0 0 7.1 1.975M3.225 7.1a3.875 3.875 0 1 1 7.75 0 3.875 3.875 0 0 1-7.75 0"})},n=(0,o(340498).wt)("magnifyingGlassSmall",r,"small")},358006:(e,t,o)=>{o.d(t,{z:()=>s});o(296540);var r=()=>o(79926),n=o(474848);const i=new(r().O2)("CollectionItemCover",(async()=>{const{CollectionItemCover:e}=await o.e(79883).then(o.bind(o,873718));return{CollectionItemCover:e}})),s=(0,r()._h)(i,(e=>e.CollectionItemCover),{renderLoading:(e,t)=>{const{coverHeight:r,coverSizeFormat:i,emptyGalleryCoverStyle:s,showEmptyGalleryCover:a}=t;return a?(0,n.jsx)(o(271232).t,{coverHeight:r,coverSizeFormat:i,emptyGalleryCoverStyle:s}):null}})},375555:(e,t,o)=>{function r(e,t){const{device:o}=e;o.isAndroid&&t.focus(),t.select()}o.d(t,{G:()=>r})},419357:(e,t,o)=>{o.d(t,{Ay:()=>b,KF:()=>x,LG:()=>g,Zf:()=>v,yD:()=>y});var r=o(296540),n=()=>o(484714),i=()=>o(401497),s=()=>o(718827),a=()=>o(695115),l=()=>o(31511),d=()=>o(546926),c=()=>o(424400),u=()=>o(340498),p=()=>o(100622),h=()=>o(496603),f=()=>o(284371),m=o(474848);const g=30,y=28;function v(e){const{icon:t}=e;return t({fill:p().Tj.icon.secondary,width:u().Ev.sm,height:u().Ev.sm,flexGrow:0,flexShrink:0})}function x(e){const t=(0,n().WS)(),o=(0,i().eP)(),r=(0,i().IS)((()=>({outlineButton:{...(0,s().qq)({shape:"default",size:"sm",hasIconOnly:!0,isButtonGapEnabled:!0}),fontWeight:f().Wy.medium,lineHeight:1.2,border:`1px solid ${p().Tj.border.primaryTranslucent}`,background:e.hasBackground?p().Tj.background.primary:void 0},outlineButtonHovered:{background:p().Tj.background.secondary},outlineButtonPressed:{background:(0,s().yZ)({color:p().Tj.background.primary,mode:o})}})),[e.hasBackground,o]);return(0,m.jsx)(a().A,{size:"xs",colorVariant:"primary",...e,ariaLabel:e.ariaLabel,style:{...r.outlineButton,...e.style,height:t?g:y,width:t?g:y},hoveredStyle:r.outlineButtonHovered,pressedStyle:r.outlineButtonPressed})}const b=r.forwardRef((function({preventCaptureArrowShortcuts:e,preventCaptureDeleteWhenEmpty:t,preventCaptureClipboardShortcuts:n,preventCaptureSpacebarWhenEmpty:i,...s},a){const{left:l,right:u,inputLeft:p,inputRight:f,inputRightStyle:g,disableInput:y,inputOuterStyle:v,rightMobileEditLabel:x,mobileKeyboardOnDismiss:b,style:S,value:I,onChange:C,autosize:w,autosizeMinHeight:T,autosizeMaxHeight:M,customElementAttributes:P,disabled:k,format:R,id:B,placeholder:L,type:D,autoFocus:E,focus:U,focusInitial:O,focusAfterAnimation:N,forceShowClearButton:_,ignoreKeyboardMode:K,inputElementAttributes:F,inputStyle:W,isRightLastElementOfInput:z,maxlength:V,min:H,max:G,selectAll:$,showClearButton:Y,suppressFocusRing:Q,textarea:X,textareaSubmitOnEnter:J,onBlur:Z,onCancel:q,onClearButtonClick:ee,onClick:te,onFocus:oe,onKeyDown:re,onSubmit:ne,...ie}=s,[se,ae]=(0,r.useState)((()=>Boolean(U||O)));(0,r.useEffect)((()=>{void 0!==U&&ae(U)}),[U]);const le=e?void 0:h().D_,de=!t||I.length>0?h().D_:void 0,ce=n?void 0:h().D_,ue=!i||I.length>0?h().D_:void 0,pe=(0,d().Tf)(),he=(0,r.useContext)(d().xu),fe=(0,r.useRef)(null),me={value:I,onChange:C,autosize:w,autosizeMinHeight:T,autosizeMaxHeight:M,customElementAttributes:P,disabled:k,format:R,id:B,placeholder:L,type:D,autoFocus:E,focus:U,focusInitial:O,focusAfterAnimation:N,forceShowClearButton:_,ignoreKeyboardMode:K,inputElementAttributes:F,inputStyle:W,isRightLastElementOfInput:z,maxlength:V,min:H,max:G,selectAll:$,showClearButton:Y,suppressFocusRing:Q,textarea:X,textareaSubmitOnEnter:J,onBlur:Z,onCancel:q,onClearButtonClick:ee,onClick:te,onFocus:oe,onKeyDown:re,onSubmit:ne};return(0,m.jsx)(o(782482).N,{debugName:"InputMenuItem",capture:!0,onUntab:h().D_,onTab:h().D_,onSelectAll:h().D_,onRedo:h().D_,onUndo:h().D_,onToggleBold:h().D_,onToggleItalics:h().D_,onToggleCode:h().D_,onCut:ce,onCopy:ce,onPaste:ce,onKeypress:h().D_,onLeft:le,onRight:le,onDelete:de,onBackspace:de,onSpace:ue,children:o(726637).A.isMobile?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(c().Ay,{ref:a,...ie,itemMarginLeft:pe?8:void 0,style:S,title:(0,m.jsx)(A,{ref:fe,left:l,right:u,inputLeft:p,inputRight:f,inputRightStyle:g,disableInput:y,inputOuterStyle:v,rightMobileEditLabel:x,isFocused:se,setIsFocused:ae,...me})}),(0,m.jsx)(o(797324).A,{show:se&&he.menuType!==d().gu.ActionSheet,onDismiss:b,inputRef:fe})]}):(0,m.jsx)(c().Ay,{ref:a,...ie,left:l,right:u,isTokenTitle:!0,title:(0,m.jsx)(j,{ref:fe,disableInput:y,inputOuterStyle:v,inputRight:f,inputRightStyle:g,inputLeft:p,...me}),style:{paddingTop:4,paddingBottom:4,...S}})})}));function S({rightMobileEditLabel:e,inputRef:t}){const i=(0,n().v3)(),a=(0,r.useCallback)((e=>{e.preventDefault();const r=t.current;r&&(0,o(375555).G)(i,r)}),[i,t]);return(0,m.jsx)(s().Ay,{onClick:a,style:{color:p().Tj.text.secondary},children:e})}const j=r.forwardRef((function(e,t){const{disabled:o,disableInput:r,inputOuterStyle:n,inputRight:i,inputRightStyle:s,inputLeft:a,min:d,textarea:c,...u}=e;return(0,m.jsx)(l().A,{...u,ref:t,disabled:o||r,style:{height:c?void 0:28,padding:"3px 6px",...n},left:a,right:i,rightStyle:s,min:d,textarea:c})})),A=r.forwardRef((function(e,t){const{left:n,right:i,inputLeft:s,inputRight:a,inputRightStyle:d,disableInput:c,inputOuterStyle:u,rightMobileEditLabel:p,isFocused:h,setIsFocused:f,disabled:g,showClearButton:y,onBlur:v,onFocus:x,...b}=e,j=(0,r.useCallback)((e=>{f(!1),v&&v(e)}),[v,f]),A=(0,r.useCallback)((e=>{f(!0),x&&x(e)}),[x,f]),I=(0,r.useRef)(null),C=(0,o(93583).A)(I,t),w=p&&!h?(0,m.jsx)(S,{rightMobileEditLabel:p,inputRef:I}):null;return(0,m.jsx)(l().A,{...b,ref:C,format:"transparent",style:{fontSize:16,...u},onFocus:A,onBlur:j,showClearButton:!1!==y,disabled:g||c,left:s||n,right:w||a||i,rightStyle:d})}))},423817:(e,t,o)=>{o.d(t,{J:()=>a});o(581454),o(296540);var r=()=>o(401497),n=()=>o(874832),i=()=>o(100622),s=o(474848);function a(e){let t=Math.floor(e.areaHeight/124);0===t&&(t=1);const o=(0,r().IS)((()=>({skeletonRect:{height:8,borderRadius:4,margin:10,backgroundColor:i().Tj.background.tertiaryTranslucent},skeletonCircle:{display:"flex",width:28,height:28,marginInlineEnd:8,backgroundColor:i().Tj.background.tertiaryTranslucent,borderRadius:20},skeletonSection:{display:"flex",width:"100%",margin:20,flexDirection:"row"}})),[8,10,20]),a=[...Array(t)].map(((e,t)=>(0,s.jsxs)("div",{style:o.skeletonSection,children:[(0,s.jsx)(n().P,{style:o.skeletonCircle}),(0,s.jsxs)("div",{style:{width:"80%"},children:[(0,s.jsx)(n().P,{style:{width:"80%",...o.skeletonRect,marginTop:0}}),(0,s.jsx)(n().P,{style:{width:"50%",...o.skeletonRect}}),(0,s.jsx)(n().P,{style:{width:"60%",...o.skeletonRect}}),(0,s.jsx)(n().P,{style:{width:"50%",...o.skeletonRect}})]})]},t)));return(0,s.jsx)("div",{children:a})}},539174:(e,t,o)=>{o.d(t,{h:()=>n});o(296540);const r={viewBox:"0 0 20 20",fittedViewBox:"3.97 6.37 12.06 6.66",svg:(0,o(474848).jsx)("path",{d:"M10.442 6.558a.625.625 0 0 0-.884 0l-5.4 5.4a.625.625 0 1 0 .884.884L10 7.884l4.958 4.958a.625.625 0 1 0 .884-.884z"})},n=(0,o(340498).wt)("arrowChevronSingleUp",r,"default")},549169:(e,t,o)=>{o.d(t,{Z:()=>a});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(581454);var r=()=>o(230711),n=()=>o(590526),i=()=>o(435761),s=()=>o(981342);function a(e){const{environment:t,spaceStore:o,userId:a,userPermissionGroupIds:l}=e,d=(0,n().K8)((()=>null==o?void 0:o.isReady()),[o]),{spaceUserStore:c,isSpaceUserStoreReady:u}=(0,n().K8)((()=>{const e=(0,r().sE)(o,a);return{spaceUserStore:e,isSpaceUserStoreReady:null==e?void 0:e.isReady()}}),[o,a]),{teams:p,isLoading:h}=function({environment:e,spaceStore:t,spaceUserStore:o,userId:r,userPermissionGroupIds:a}){const{teams:l,isLoading:d}=(0,i().Qs)({spaceStore:t}),c=(0,i().gc)({spaceStore:t,teams:l}),u=(0,n().K8)((()=>{const e=c.filter((e=>e.store.isMemberOrGuest(r,a||new Set,null==o?void 0:o.getModel())));return(0,s().M9)(e).map((e=>e.store))}),[c,a,r,o]);return{teams:u,isLoading:d}}({environment:t,spaceStore:o,spaceUserStore:c,userId:a,userPermissionGroupIds:l});return{teams:p,isLoading:!d||!u||h}}},554413:(e,t,o)=>{o.d(t,{Cn:()=>n,oV:()=>a,tK:()=>s});o(581454);var r=()=>o(534177);let n=function(e){return e[e.Sidebar=0]="Sidebar",e[e.SidebarMobile=1]="SidebarMobile",e[e.TopbarMobile=2]="TopbarMobile",e[e.RenderAsPage=3]="RenderAsPage",e}({});const i=new Map;function s(e,t){i.set(l(e),t)}function a(e){return i.get(l(e))??[]}function l(e){return(0,r().uv)(e).sort().map((t=>{const o=e[t];return JSON.stringify(o)})).join("-")}},557558:(e,t,o)=>{o.r(t),o.d(t,{PersonProfileContainer:()=>Dt});o(944114),o(898992),o(581454),o(737550);var r=o(296540),n=()=>o(564884),i=()=>o(907258),s=()=>o(884780),a=()=>o(701720),l=()=>o(726637),d=()=>o(484714),c=()=>o(943101),u=()=>o(590526),p=()=>o(401497),h=()=>o(611648),f=()=>o(150669),m=()=>o(757695),g=()=>o(795732),y=()=>o(849255),v=()=>o(677610),x=()=>o(493552),b=()=>o(302501),S=()=>o(799954),j=()=>o(571595),A=()=>o(109100),I=()=>o(798880),C=()=>o(69708),w=()=>o(100622),T=()=>o(496603),M=()=>o(806080),P=()=>o(284371),k=()=>o(614699),R=()=>o(376254),B=()=>o(774524),L=()=>o(312310),D=()=>o(9768),E=()=>o(817942),U=()=>o(601726),O=()=>o(660197),N=()=>o(933951),_=()=>o(712505),K=(o(16280),()=>o(106702)),F=()=>o(792057),W=()=>o(874832),z=()=>o(807449),V=()=>o(406094),H=()=>o(584262),G=()=>o(165358),$=()=>o(925695),Y=()=>o(229833),Q=()=>o(579627),X=()=>o(857783),J=()=>o(599412),Z=()=>o(547149),q=o(474848);function ee(e){return e?(0,q.jsx)(C().sA,{id:"PersonProfile.recentActivity.empty.primary.deactivated",defaultMessage:"No activity available"}):(0,q.jsx)(C().sA,{id:"PersonProfile.recentActivity.empty.primary.self",defaultMessage:"No activity yet"})}function te({viewedUserStore:e,isViewedUserDeactivated:t}){const o=(0,C().tz)(),n=(0,d().v3)(),i=(0,K().$)(),{viewedUserName:s,isViewingSelf:a}=(0,u().K8)((()=>({viewedUserName:(null==e?void 0:e.getDisplayName(o))??"",isViewingSelf:(null==i?void 0:i.id)===(null==e?void 0:e.id)})),[e,o,i]),l=!t,c=(0,u().K8)((()=>!Boolean(e)||!Boolean(i)||!Boolean(null==e?void 0:e.isReady())||void 0===t),[e,i,t]),h=(0,r.useCallback)((async()=>{const t=await(0,J().M)({environment:n,from:"person_profile_recent_activity_empty_state",navigateOnCreate:!1,pageVisitSource:H().y8.PersonProfileRecentActivity});if(!t)return F().f1(o.formatMessage({defaultMessage:"Failed to create page. Please try again or contact support if the issue persists",id:"people.profile.createPage.failed"})),void G().log({error:(0,Y().convertErrorToLog)(new Error("Failed to create page from people profile empty state")),from:"ActivityFeedEmptyState",type:"ClientError",level:"error"});!a&&e&&Z().createAndCommit({userAction:"PersonProfile.addCollaboratorToSharedDocument",environment:n,canUndo:!0,perform:o=>{Q().wd({environment:n,store:t,permissionItems:[{type:"user_permission",user_id:e.id,role:"read_and_write"}],transaction:o})}}),X()._U(t),X().uK({environment:n,store:t,showMoveTo:!0,saveParent:!0,pageVisitSource:H().y8.PersonProfileRecentActivity})}),[n,e,a,o]),f=(0,p().IS)((()=>({container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",gap:10,paddingTop:20},textContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:2},descriptionContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:12,maxWidth:300},button:{width:"fit-content"}})),[]);return c?(0,q.jsxs)("div",{style:f.container,children:[(0,q.jsx)(z().I,{size:"xl",icon:$().N,colorPalette:"gray",colorVariant:"tertiary"}),(0,q.jsx)(W().P,{style:{height:12,width:120,borderRadius:6}})]}):(0,q.jsxs)("div",{style:f.container,children:[(0,q.jsx)(z().I,{size:"xl",icon:$().N,colorPalette:"gray",colorVariant:"tertiary"}),(0,q.jsxs)("div",{style:f.textContainer,children:[(0,q.jsx)(x().D,{styleKey:"bodyMedium",children:ee(t??!1)}),l?(0,q.jsxs)("div",{style:f.descriptionContainer,children:[(0,q.jsx)(x().D,{styleKey:"bodyRegular",colorVariant:"secondary",children:a?(0,q.jsx)(C().sA,{id:"PersonProfile.recentActivity.empty.description.self",defaultMessage:"Create your first document"}):(0,q.jsx)(C().sA,{id:"PersonProfile.recentActivity.empty.description.other",defaultMessage:"Start collaborating with {personName} by creating your first document together",values:{personName:s}})}),(0,q.jsx)(V().A,{onClick:h,style:f.button,children:(0,q.jsx)(b().A,{children:a?(0,q.jsx)(C().sA,{id:"PersonProfile.recentActivity.empty.button.self",defaultMessage:"Create a new document"}):(0,q.jsx)(C().sA,{id:"PersonProfile.recentActivity.empty.button.other",defaultMessage:"Create a shared document"})})})]}):null]})]})}o(823215);var oe=()=>o(920198),re=()=>o(450104),ne=()=>o(295633),ie=()=>o(718827),se=()=>o(488715),ae=()=>o(187174),le=()=>o(179034),de=()=>o(534177),ce=()=>o(268933),ue=()=>o(187820),pe=()=>o(16006),he=()=>o(365136),fe=()=>o(815585);function me(e){const{spaceId:t,actorId:o}=e,r=(0,d().v3)(),n=(0,C().tz)(),[{value:i,status:s,error:a}]=(0,ae().Yb)((async()=>{const e=await r.api.callCellCompatibleApi({eventName:"getActorActivities",environment:r,data:{spaceId:t,actorId:o},cellNavigation:{spaceId:t}});if("success"===e.type)return e.data;if("failed"===e.type)throw e.error;(0,de().HB)(e)}),[r,t,o]),l=(0,oe().L)(),c=null==i?void 0:i.actorActivities,h=(0,u().K8)((()=>!c||0===c.length||!!l&&c.every((e=>{const t=ne().B.createChildStore(l,{table:le().ev,id:e.navigableBlockId,spaceId:l.id});return!!t&&t.isReady()}))),[c,l]),f=(0,p().IS)((()=>({container:{fontSize:14,color:w().Tj.text.secondary,backgroundColor:w().Tj.background.primary,borderRadius:12,borderWidth:1,borderStyle:"solid",borderColor:w().Tj.border.secondary,padding:16,boxShadow:w().Tj.shadow.base.diffuse,display:"flex",flexDirection:"column",gap:2},emptyState:{color:w().Tj.text.secondary,fontSize:14,paddingBlock:20,paddingInline:12,textAlign:"center"}})),[]);return"pending"===s||"idle"===s?(0,q.jsx)(ve,{}):a?(0,q.jsx)(re().LargeSurfaceRenderError,{}):null!=i&&i.hidden?(0,q.jsx)("div",{style:f.emptyState,children:n.formatMessage(xe.emptyState)}):c&&0!==c.length?h?(0,q.jsx)("div",{style:f.container,children:c.map((e=>(0,q.jsx)(ge,{activity:e},e.id)))}):(0,q.jsx)(ve,{}):(0,q.jsx)("div",{style:f.emptyState,children:n.formatMessage(xe.emptyState)})}function ge(e){const{activity:t}=e,o=(0,C().tz)(),r=(0,oe().L)(),n=(0,u().K8)((()=>{if(!r)return;const e=ne().B.createChildStore(r,{table:le().ev,id:t.navigableBlockId,spaceId:r.id});return e&&e.isReady()&&e.isNavigableBlock()?e:void 0}),[t.navigableBlockId,r]),i=(0,u().K8)((()=>{if(!n)return;const e=n.getModel();return e?(0,se().Q)({model:e,getRecordModel:n.getRecordModel,pageVisitSource:H().y8.PersonProfileRecentActivity}):void 0}),[n]),s=(0,fe().nl)(t.latestTime,{useUltraCompactFormat:!0}),a=(0,p().IS)((()=>({activityItem:{paddingBlock:4,paddingInline:8,borderRadius:6,display:"flex",alignItems:"center",justifyContent:"space-between"},activityText:{color:w().Tj.text.primary,display:"flex",alignItems:"center",gap:4,flex:1,minWidth:0},actionText:{color:w().Tj.text.secondary,flexShrink:0},timestamp:{fontSize:12,color:w().Tj.text.tertiary,marginInlineStart:8,flexShrink:0}})),[]);return(0,q.jsxs)(ie().Ay,{href:i,style:a.activityItem,children:[(0,q.jsxs)("div",{style:a.activityText,children:[(0,q.jsx)("span",{style:a.actionText,children:be(t.actionTypes,o)}),n?(0,q.jsx)(ye,{blockStore:n,sidebarSpaceStore:r}):null]}),(0,q.jsx)("div",{style:a.timestamp,children:s})]})}function ye(e){const{blockStore:t,sidebarSpaceStore:o}=e,r=(0,d().v3)(),n=(0,u().K8)((()=>{var e;return null==t||null===(e=t.getModel())||void 0===e?void 0:e.getRenderIcon({getRecordModel:t.getRecordModel})}),[t]),i=(0,u().K8)((()=>!!t&&t.isEmptyPage()),[t]),s=(0,u().K8)((()=>(0,ue().Te)(t)),[t]),a=(0,u().K8)((()=>!(!t||!o)&&(0,ce().DU)({recordId:t.id,recordType:"block",tab:"personProfile",rootStore:o,environment:r})),[t,o,r]),l=(0,p().IS)((()=>({container:{display:"flex",alignItems:"center",gap:4,minWidth:0},recordIcon:{flexShrink:0},recordTitle:{color:w().Tj.text.primary,fontWeight:P().Wy.medium,minWidth:0}})),[]);return(0,q.jsxs)("span",{style:l.container,children:[(0,q.jsx)(ue().B6,{disabled:!0,icon:n,iconRecordCategory:s,isEmptyPage:i,size:16,style:l.recordIcon}),(0,q.jsx)(pe().A,{store:t,style:l.recordTitle,underline:!0}),a?(0,q.jsx)(he().Y,{}):null]})}function ve(){const e=(0,p().IS)((()=>({container:{backgroundColor:w().Tj.background.primary,borderRadius:12,borderWidth:1,borderStyle:"solid",borderColor:w().Tj.border.secondary,padding:16,boxShadow:w().Tj.shadow.base.diffuse,display:"flex",flexDirection:"column",gap:2},row:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:8,height:29},content:{height:10,borderRadius:4},timestamp:{width:35,height:10,borderRadius:4,flexShrink:0}})),[]);return(0,q.jsx)("div",{style:e.container,children:["55%","45%","65%","50%","60%"].map(((t,o)=>(0,q.jsxs)("div",{style:e.row,children:[(0,q.jsx)(W().P,{style:{...e.content,width:t}}),(0,q.jsx)(W().P,{style:e.timestamp})]},o)))})}const xe=(0,C().YK)({created:{id:"ActorActivityFeed.action.created",defaultMessage:"Created"},edited:{id:"ActorActivityFeed.action.edited",defaultMessage:"Edited"},commented:{id:"ActorActivityFeed.action.commented",defaultMessage:"Commented on"},createdAndEdited:{id:"ActorActivityFeed.action.createdAndEdited",defaultMessage:"Created and edited"},createdAndCommented:{id:"ActorActivityFeed.action.createdAndCommented",defaultMessage:"Created and commented on"},editedAndCommented:{id:"ActorActivityFeed.action.editedAndCommented",defaultMessage:"Edited and commented on"},createdEditedAndCommented:{id:"ActorActivityFeed.action.createdEditedAndCommented",defaultMessage:"Created, edited, and commented on"},emptyState:{id:"ActorActivityFeed.emptyState",defaultMessage:"No activity in the past 30 days"}});function be(e,t){const o=e.includes("created"),r=e.includes("edited"),n=e.includes("commented");return o&&r&&n?t.formatMessage(xe.createdEditedAndCommented):o&&r?t.formatMessage(xe.createdAndEdited):o&&n?t.formatMessage(xe.createdAndCommented):r&&n?t.formatMessage(xe.editedAndCommented):o?t.formatMessage(xe.created):r?t.formatMessage(xe.edited):n?t.formatMessage(xe.commented):""}var Se=()=>o(388926),je=()=>o(936802),Ae=()=>o(908201),Ie=()=>o(512039),Ce=()=>o(578405);function we(e){const{module:t,personProfileStore:o,showBottomDivider:n}=e,i=(0,d().v3)(),s=(0,p().IS)((()=>({loadingBoxTitle:{width:70,height:24,borderRadius:4},loadingBoxValue:{width:160,height:24,borderRadius:4},loadingBoxContainer:{display:"flex",flexDirection:"column",gap:8,paddingInlineStart:6}})),[]),a=(0,r.useMemo)((()=>new(Ie().B)(i)),[i]),{peopleCollectionStore:l,peopleCollectionBlockStore:c,isPeopleCollectionReady:h}=(0,u().K8)((()=>{const e=o.getAssociatedCollectionStore(),t=null==e?void 0:e.getParentBlockStore();return{peopleCollectionStore:e,peopleCollectionBlockStore:t,isPeopleCollectionReady:null==e?void 0:e.isReady()}}),[o]);return(0,r.useEffect)((()=>{l&&c&&c.isCollectionView()&&a.setContext({type:"collectionPage",collectionStore:l,collectionViewBlockStore:c})}),[l,c,a]),h?(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(Ae().RI,{value:a,children:(0,q.jsx)(Ce().h,{context:g().R.Frame,disabled:!1,store:o,wrapper:e=>(0,q.jsx)("div",{children:e}),layoutModule:t,customization:{neverShowPropertiesElsewhereInLayout:!0,stackPropertyLabelAndValue:!0,disableLastRowBottomPadding:!1,hideEmptyProperties:!1,sortNonEmptyPropertiesFirst:!1,propertyIdsToExclude:(0,je().fD)(),hideAddPropertyButton:!0,disableContainerPadding:!0,disableTopPadding:!0},showDefaultTitle:!1})}),n?(0,q.jsx)(Se().A,{size:1,colorVariant:"secondaryTranslucent"}):null]}):(0,q.jsxs)("div",{style:s.loadingBoxContainer,children:[(0,q.jsx)(W().P,{style:s.loadingBoxTitle,emphasized:!0}),(0,q.jsx)(W().P,{style:s.loadingBoxValue,emphasized:!0})]})}o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);var Te=()=>o(247584),Me=()=>o(250910),Pe=()=>o(803960),ke=()=>o(539174),Re=()=>o(769864),Be=()=>o(196539),Le=()=>o(898808),De=()=>o(981342),Ee=()=>o(549169),Ue=()=>o(568317);function Oe({isIconCircular:e=!1}){const t=(0,Ue()._)(),o=(0,p().IS)((()=>({skeletonIcon:{width:20,height:20,borderRadius:e?"50%":4},skeletonLabel:{width:120,height:16,borderRadius:4}})),[e]);return(0,q.jsxs)("div",{style:t.rowContainer,children:[(0,q.jsx)(W().P,{style:{...o.skeletonIcon}}),(0,q.jsx)(W().P,{style:{...t.rowLabel,...o.skeletonLabel}})]})}function Ne(e){const{icon:t,totalCount:o,message:r,onToggleTruncation:n,maxRowsShownWhenTruncated:i=De().rX}=e,s=(0,C().tz)(),a=Math.max(o-i,0),l=(0,Ue()._)();return(0,q.jsxs)(ie().Ay,{onClick:n,style:l.truncationButton,hoveredStyle:l.hoveredStyle,children:[t,(0,q.jsx)(b().A,{style:l.truncationLabel,isSecondaryColor:!0,children:s.formatMessage(r,{numHidden:a})})]})}const _e=De().rX+1,Ke=(0,C().YK)({teamspacesModuleShowMore:{id:"PersonProfile.teamspacesModule.showMore",defaultMessage:"{numHidden} more teamspaces"},teamspacesModuleShowLess:{id:"PersonProfile.teamspacesModule.showLess",defaultMessage:"Hide {numHidden} teamspaces"}});function Fe(e,t,o){const[{value:r,status:n,error:i}]=(0,ae().Yb)((async()=>async function(e,t,o){if(!o)return;const r=await Re().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:e,data:{spaceId:o,userIds:[t]}});var n;if("success"===r.type)return new Set((null===(n=r.data)||void 0===n||null===(n=n.userToGroupMap)||void 0===n||null===(n=n[t])||void 0===n?void 0:n.map((e=>e.toString())))||[]);throw G().log({level:"error",from:"personProfile.teamspacesModule",type:"getSpacePermissionGroupIdsContainingMembersError",error:{message:(0,Te().V4)(r)||"Error fetching user permission group ids"}}),r.error}(e,t,o)),[e,t,o],{debugName:"personProfile.userToPermissionGroupIds"});return{value:{userPermissionGroupIds:r},isLoading:"resolved"!==n&&"rejected"!==n,error:i}}function We(){const e=(0,Ue()._)();return(0,q.jsx)("div",{style:e.listModule,children:[0,1,2].map((e=>(0,q.jsx)(Oe,{isIconCircular:!1},e)))})}function ze(){const e=(0,Ue()._)();return(0,q.jsx)("div",{style:e.listModule,children:(0,q.jsx)(b().A,{isSecondaryColor:!0,isMultiline:!0,children:(0,q.jsx)(C().sA,{id:"PersonProfile.teamspaces.empty",defaultMessage:"None"})})})}function Ve(e){const{teamStore:t}=e,o=(0,u().K8)((()=>t.isReady()),[t]),r=(0,u().K8)((()=>t.getName()),[t]),n=(0,Ue()._)();return o?(0,q.jsx)(Me().A,{popupType:l().A.isMobile?Me().z.BottomSheet:Me().z.Popup,render:e=>(0,q.jsx)(Be().dX,{teamStore:t,parent:e}),renderOrigin:e=>(0,q.jsxs)(ie().Ay,{style:n.rowContainer,hoveredStyle:n.hoveredStyle,...e,children:[(0,q.jsx)(Le().x,{store:t,disabled:!0,size:20}),(0,q.jsx)(b().A,{showTooltipWhenTruncated:!0,style:n.rowLabel,children:r})]})}):(0,q.jsx)(Oe,{isIconCircular:!1})}function He(e){const{userId:t}=e,o=(0,d().v3)(),n=(0,u().O$)(i().AppStoreSidebarSpaceStore),{teams:s,isLoading:a}=function({environment:e,spaceStore:t,userId:o}){const{value:{userPermissionGroupIds:r},isLoading:n}=Fe(e,o,null==t?void 0:t.id),{teams:i,isLoading:s}=(0,Ee().Z)({environment:e,spaceStore:t,userId:o,userPermissionGroupIds:r});return{teams:i,isLoading:s||n}}({environment:o,spaceStore:n,userId:t}),l=(0,r.useMemo)((()=>s.length>_e),[s]),[c,p]=(0,r.useState)(!0),h=(0,Ue()._)(),f=(0,r.useCallback)((()=>{p(!c)}),[c]);return a?(0,q.jsx)(We,{}):0===s.length?(0,q.jsx)(ze,{}):(0,q.jsxs)("div",{style:h.listModule,children:[s.map(((e,t)=>c&&l&&t>=De().rX?null:(0,q.jsx)(Ve,{teamStore:e},e.id))),l?(0,q.jsx)(Ne,{icon:c?(0,q.jsx)(z().I,{icon:Pe().arrowChevronSingleDownIcon,colorVariant:"secondary"}):(0,q.jsx)(z().I,{icon:ke().h,colorVariant:"secondary"}),totalCount:s.length,message:c?Ke.teamspacesModuleShowMore:Ke.teamspacesModuleShowLess,maxRowsShownWhenTruncated:De().rX,onToggleTruncation:f}):void 0]})}var Ge=()=>o(756117),$e=()=>o(695115),Ye=()=>o(31511),Qe=()=>o(591779),Xe=()=>o(536583),Je=()=>o(344417),Ze=()=>o(888643),qe=()=>o(245241),et=()=>o(615234);var tt=()=>o(201980),ot=()=>o(837622),rt=()=>o(128295),nt=()=>o(358006),it=()=>o(362976),st=()=>o(495576);const at=212,lt=48,dt=28,ct=20;function ut(e){const{store:t}=e,o=(0,u().K8)((()=>null!=t&&t.isDefined()?t:void 0),[t]);return o?(0,q.jsx)(ht,{store:o,onClick:e.onClick}):(0,q.jsx)(pt,{})}function pt(){const e=mt();return(0,q.jsx)("div",{style:e.container,children:(0,q.jsx)(W().P,{style:e.loadingTile})})}function ht(e){const{store:t,onClick:o}=e,r=(0,d().v3)(),n=(0,oe().L)(),i=mt(),{hasCover:s,icon:a,isEmptyPage:l,iconRecordCategory:c}=(0,u().K8)((()=>({hasCover:Boolean(t.getCover()),icon:t.getIcon(),isEmptyPage:t.isEmptyPage(),iconRecordCategory:(0,ue().Te)(t)})),[t]),p=(0,u().K8)((()=>!(!t||!n)&&(0,ce().DU)({recordId:t.id,recordType:"block",tab:"personProfile",rootStore:n,environment:r})),[t,n,r]);return(0,q.jsxs)(ie().Ay,{style:i.container,onClick:o,children:[s?(0,q.jsx)("div",{style:i.coverContainer,children:(0,q.jsx)(st().d,{store:t,disabled:!0,paddingLeft:0,paddingRight:0,height:lt,proxyWidth:300})}):null,(0,q.jsx)(ue().B6,{disabled:!0,icon:a,iconRecordCategory:c,isEmptyPage:l,size:dt,style:i.icon}),(0,q.jsxs)("div",{style:i.titleContainer,children:[(0,q.jsx)(rt().Ay,{store:t,style:i.parentTitle,hideTeam:!1}),(0,q.jsxs)("div",{style:i.titleRow,children:[(0,q.jsx)(pe().A,{shouldWrap:!0,maxLines:2,store:t,style:i.title}),p?(0,q.jsx)(he().Y,{}):null]})]}),(0,q.jsx)(ft,{store:t})]})}function ft(e){const{store:t}=e,o=mt(),r=(0,u().K8)((()=>it().E(t)),[t]);return r&&tt().FAw(r)>=ct?(0,q.jsx)("div",{style:o.contentSummary,children:(0,q.jsx)(ot().A,{textValue:r,parentStore:t,shouldTruncate:!0,clampLines:3})}):(0,q.jsx)(nt().z,{variant:"default",store:t,coverFormat:{type:"page_content"},allowVideoPlayback:!1,contentWrapStyle:o.contentPreview,emptyGalleryCoverStyle:o.emptyContent,showLoadingShimmer:!0,showEmptyGalleryCover:!1,onLoadProxiedImage:()=>{},renderAdditionalBlocks:!0,rendererBlockStyle:o.rendererBlockStyle})}function mt(){return(0,p().IS)((()=>({container:{position:"relative",display:"flex",flexDirection:"column",height:at,overflow:"hidden",contain:"strict",borderRadius:16,backgroundColor:w().Tj.background.primary,border:`1px solid ${w().Tj.border.secondary}`,boxShadow:w().Tj.shadow.base.diffuse},coverContainer:{position:"absolute",top:0,insetInline:0,height:lt,overflow:"hidden",pointerEvents:"none"},icon:{position:"relative",marginTop:32,marginInlineStart:20},titleContainer:{display:"flex",flexDirection:"column",gap:4,marginTop:12,marginInline:20},parentTitle:{fontSize:12,color:w().Tj.text.tertiary,lineHeight:1.4},titleRow:{display:"flex",alignItems:"baseline",gap:4},title:{fontWeight:P().Wy.semibold,fontSize:16,color:w().Tj.text.primary,lineHeight:1.5},contentSummary:{marginInline:20,paddingTop:8,paddingBottom:12,fontSize:12,lineHeight:1.4,color:w().Tj.text.secondary},contentPreview:{marginInline:20,paddingTop:8,paddingBottom:12},emptyContent:{height:16},rendererBlockStyle:{fontSize:13,lineHeight:"18px",color:w().Tj.text.secondary},loadingTile:{position:"absolute",top:0,bottom:0,insetInline:0}})),[])}const gt=(0,C().YK)({title:{id:"PersonProfile.theirPages.title",defaultMessage:"{userName}’s pages"},emptyState:{id:"PersonProfile.theirPages.emptyState",defaultMessage:"Pages created by {userName} will appear here"},noSearchResults:{id:"PersonProfile.theirPages.noSearchResults",defaultMessage:"No pages found"},offlineState:{id:"PersonProfile.theirPages.offlineState",defaultMessage:"Go online to see pages created by {userName}"},searchLabel:{id:"PersonProfile.theirPages.searchButton.tooltip",defaultMessage:"Search"},searchInputPlaceholder:{id:"PersonProfile.theirPages.searchInputPlaceholder",defaultMessage:"Type to search…"}});function yt(e){const{userStore:t,spaceStore:o}=e,n=(0,d().v3)(),[i,s]=(0,r.useState)(""),[a,l]=(0,r.useState)(!1),c=(0,u().K8)((()=>(null==t?void 0:t.getName())??""),[t]),h=(0,Qe().lW)(i,300,((e,t)=>e===t)),f=function({userStore:e,spaceStore:t,searchQuery:o=""}){const r=(0,d().v3)(),[n,i]=(0,u().K8)((()=>null!=e&&e.isDefined()&&null!=t&&t.isDefined()?[e,t]:[]),[e,t]),[s]=(0,ae().Yb)((async()=>{if(!n||!i)return{state:"loading"};const e=await r.api.callCellCompatibleApi({eventName:"search",environment:r,cellNavigation:{spaceId:i.id},data:{type:qe().Vz.BlocksInSpace,query:o,spaceId:i.id,filters:(0,qe().N2)({createdBy:[n.id]}),sort:{field:"lastEdited",direction:"desc"},limit:20,source:"people_profile_their_pages"}});return"failed"===e.type?e.offline?{state:"offline"}:{state:"failed",error:e.error}:{state:"succeeded",pageStores:e.data.results.map((e=>ne().B.createChildStore(n,{id:e.id,table:le().ev,spaceId:i.id})))}}),[r,n,i,o],{throttle:et().TD,debugName:"useFetchUserPages"});return"pending"===s.status||"idle"===s.status?{state:"loading"}:"rejected"===s.status?{state:"failed",error:s.error}:s.value}({userStore:t,spaceStore:o,searchQuery:h});(0,r.useEffect)((()=>{"succeeded"===f.state&&f.pageStores.length>0&&!h&&l(!0)}),[f,h]);const m=(0,r.useCallback)((e=>{X().uK({environment:n,store:e,openInCenterPeek:!0,pageVisitSource:H().y8.PersonProfileRecentActivity})}),[n]),g=(0,p().IS)((()=>({header:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12},title:{marginBottom:0}})),[]);let y;return"loading"===f.state?y=(0,q.jsx)(xt,{children:Array.from({length:9},((e,t)=>(0,q.jsx)(ut,{store:void 0,onClick:M().lQ},t)))}):"offline"===f.state?y=(0,q.jsx)(At,{userName:c}):"failed"===f.state?y=(0,q.jsx)(re().LargeSurfaceRenderError,{error:f.error}):f.pageStores.length>0?(f.state,y=(0,q.jsx)(xt,{children:f.pageStores.map((e=>(0,q.jsx)(ut,{store:e,onClick:()=>m(e)},e.id)))})):(f.state,y=h&&a?(0,q.jsx)(jt,{}):(0,q.jsx)(St,{userName:c})),(0,q.jsxs)("div",{children:[(0,q.jsxs)("div",{style:g.header,children:[(0,q.jsx)(b().A,{isSecondaryColor:!0,style:g.title,children:(0,q.jsx)(C().sA,{...gt.title,values:{userName:c}})}),(0,q.jsx)(vt,{value:i,onChange:s})]}),y]})}function vt(e){const{value:t,onChange:o}=e,n=(0,C().tz)(),[i,s]=(0,r.useState)(!1),a=(0,r.useRef)(null),l=(0,r.useCallback)((()=>{s((e=>!e))}),[]),d=(0,r.useCallback)((()=>{o(""),s(!1)}),[o]),c=(0,r.useCallback)((e=>{o(e.target.value)}),[o]),u=(0,r.useCallback)((e=>{"Escape"===e.key&&d()}),[d]),h=(0,r.useCallback)((e=>{var o;e.relatedTarget instanceof Node&&(null===(o=a.current)||void 0===o?void 0:o.contains(e.relatedTarget))||t||s(!1)}),[t]),f=(0,p().IS)((()=>({container:{display:"flex"},inputWrapper:{display:"flex",alignItems:"center",overflow:"hidden"},input:{fontSize:14,lineHeight:1,paddingInlineEnd:4,color:w().Tj.text.primary}})),[]);return(0,q.jsxs)("div",{style:f.container,ref:a,children:[(0,q.jsx)($e().A,{icon:Je().magnifyingGlassSmallIcon,onClick:l,ariaLabel:n.formatMessage(gt.searchLabel)}),(0,q.jsx)(Ge().A,{visible:i,animate:{width:150,opacity:1},initial:{width:0,opacity:0},exit:{width:0,opacity:0},style:f.inputWrapper,children:(0,q.jsx)(Ye().A,{style:f.input,format:"transparent",value:t,onChange:c,placeholder:n.formatMessage(gt.searchInputPlaceholder),focusInitial:i,showClearButton:!0,onBlur:h,onCancel:d,onClick:Ze().k,onClearButtonClick:d,onKeyDown:u})})]})}function xt(e){const t=(0,r.useRef)(null),o=(0,c().wY)(t),n=Boolean(o&&o.width<600)?2:3,i=(0,p().IS)((()=>({grid:{display:"grid",gridTemplateColumns:`repeat(${n}, 1fr)`,gridTemplateRows:`repeat(auto-fill, ${at}px)`,gap:20}})),[n]);return(0,q.jsx)("div",{ref:t,style:i.grid,children:e.children})}function bt(e){const t=(0,p().IS)((()=>({container:{width:"100%",height:220,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:8,border:`1px solid ${w().Tj.border.secondary}`,borderRadius:16},label:{fontSize:14}})),[]);return(0,q.jsxs)("div",{style:t.container,children:[(0,q.jsx)(z().I,{icon:Xe().d,colorVariant:"tertiary",size:"xl"}),(0,q.jsx)(b().A,{isSecondaryColor:!0,isMultiline:!0,style:t.label,children:e.children})]})}function St(e){const{userName:t}=e;return(0,q.jsx)(bt,{children:(0,q.jsx)(C().sA,{...gt.emptyState,values:{userName:t}})})}function jt(){return(0,q.jsx)(bt,{children:(0,q.jsx)(C().sA,{...gt.noSearchResults})})}function At(e){const{userName:t}=e;return(0,q.jsx)(bt,{children:(0,q.jsx)(C().sA,{...gt.offlineState,values:{userName:t}})})}var It=()=>o(453697),Ct=()=>o(617711),wt=()=>o(272509);var Tt=()=>o(436525);const Mt=De().rX+1,Pt=(0,C().YK)({topCollaboratorsModuleShowMore:{id:"PersonProfile.collaboratorsModule.showMore",defaultMessage:"{numHidden} more collaborators"},topCollaboratorsModuleShowLess:{id:"PersonProfile.collaboratorsModule.showLess",defaultMessage:"Hide {numHidden} collaborators"}});function kt(e){const{userStore:t,spaceStore:o}=e,r=(0,d().v3)(),n=(0,u().K8)((()=>t.isReady()),[t]),i=(0,u().K8)((()=>t.getName()||t.getEmail()),[t]),s=(0,u().K8)((()=>{if(!o)return;const e=r.idCreator.getSpaceIdCreatorSync(o.id);return(0,Ct().o4)({userId:t.id,spaceIdCreator:e,pageVisitSource:H().y8.PersonProfileTopCollaborators})}),[t,r,o]),a=(0,Ue()._)();if(!n)return(0,q.jsx)(Oe,{isIconCircular:!0});const l=(0,q.jsxs)("div",{style:a.avatarAndName,children:[(0,q.jsx)(It().A,{hasPersonHoverCard:!1,userStore:t,size:20}),(0,q.jsx)(b().A,{showTooltipWhenTruncated:!0,style:a.rowLabel,children:i})]});return(0,q.jsx)(ie().Ay,{style:a.rowContainer,hoveredStyle:a.hoveredStyle,href:s,children:(0,q.jsx)(Tt().D,{userStore:t,spaceStore:o,children:l})})}function Rt(){const e=(0,Ue()._)();return(0,q.jsx)("div",{style:e.listModule,children:[0,1,2].map((e=>(0,q.jsx)(Oe,{isIconCircular:!0},e)))})}function Bt(e){const{userId:t,spaceStore:o}=e,{value:n,isLoading:s}=function({userId:e}){const t=(0,d().v3)(),o=(0,u().O$)(i().AppStoreSidebarSpaceStore),[{status:r,error:n,value:s}]=(0,ae().Yb)((async()=>{if(!o)return[];if((0,wt().I)(o))return[];const r=await Re().callApi({eventName:"getSimilarUsers",environment:t,data:{userId:e,spaceId:o.id}});if("failed"===r.type)throw r.error;if(r){const e=r.data.userSimilarity??[];return Object.entries(e).map((([e,t])=>({userStore:y().L.createChildStore(o,{table:I().oo,id:e}),id:e})))}}),[t,e,o]);return void 0===o?{isLoading:!0,error:void 0,value:[]}:{isLoading:"pending"===r||"idle"===r,error:n,value:s}}({userId:t}),a=n&&n.length>Mt,[l,c]=(0,r.useState)(!0),p=(0,r.useCallback)((()=>{c(!l)}),[l]),h=(0,Ue()._)();return s?(0,q.jsx)(Rt,{}):n&&0!==n.length?(0,q.jsxs)("div",{style:h.listModule,children:[n.map(((e,t)=>l&&a&&t>=De().rX?null:(0,q.jsx)(kt,{userStore:e.userStore,spaceStore:o},e.id))),a?(0,q.jsx)(Ne,{icon:l?(0,q.jsx)(z().I,{icon:Pe().arrowChevronSingleDownIcon,colorVariant:"secondary"}):(0,q.jsx)(z().I,{icon:ke().h,colorVariant:"secondary"}),totalCount:n.length,message:l?Pt.topCollaboratorsModuleShowMore:Pt.topCollaboratorsModuleShowLess,maxRowsShownWhenTruncated:De().rX,onToggleTruncation:p}):void 0]}):(0,q.jsx)("div",{style:h.listModule,children:(0,q.jsx)(b().A,{isSecondaryColor:!0,isMultiline:!0,children:(0,q.jsx)(C().sA,{id:"TopCollaboratorsModule.emptyState.message",defaultMessage:"No collaborators yet!"})})})}const Lt={paddingLeft:6};function Dt(e){const{personProfileStore:t}=e,o=(0,u().uB)(void 0,f().A),s=(0,u().K8)((()=>null==t?void 0:t.getSpaceStore()),[t]),a=(0,u().K8)((()=>t.getPersonProfileUserId()),[t]),m=(0,u().O$)(i().AppStoreSidebarSpaceStore),g=(0,u().K8)((()=>{if(m&&a)return y().L.createChildStore(m,{table:I().oo,id:a})}),[m,a]),x=(0,u().K8)((()=>{if(!t.isReady())return;const e=t.getModel();return e?(0,j().dY)({personProfileBlock:e}):void 0}),[t]),b=(0,r.useRef)(null),A=(0,c().wY)(b),C=(0,d().v3)(),M=!l().A.isMobile;(0,r.useEffect)((()=>{"rendered"!==i().default.state.renderPhase&&i().default.setPageRendered()}),[]),(0,r.useEffect)((()=>{(0,n().u)({environment:C,event:{eventName:"person_profile_viewed",eventProperties:{is_own_profile:a===C.currentUser.id}}})}),[C,a]);const P=Boolean(A&&A.width<=_().SIDEPEEK_MIN_WIDTH),{person_profile_page_main:k,person_profile_page_details:B}=(0,N().Qf)({personProfileStore:t}),L=(0,v().y)(),D=k.some((e=>"recentActivity"===e.type)),U=(0,p().IS)((()=>({container:{width:"100%",height:"100%",cursor:"default",backgroundColor:w().Tj.background.primary},left:{display:"flex",flexDirection:"column",gap:"24px",flex:1,maxWidth:"752px",minWidth:_().SIDEPEEK_MIN_WIDTH-96+"px",alignSelf:"flex-start"},right:{width:"252px",minWidth:"252px",height:"min-content",display:"flex",flexDirection:"column",gap:D||P?24:40},content:{display:"flex",flexDirection:P?"column-reverse":"row",gap:P?40:60,marginTop:20,...L?(0,T().Up)(S().dE,"paddingInlineStart","paddingInlineEnd"):{}}})),[D,P,L]);return a&&s?(0,q.jsx)(R().H,{type:h().A.Y,style:U.container,className:"person-profile-content",store:o,children:(0,q.jsxs)(E().Mx,{type:"person-profile",withBottomPadding:!0,children:[(0,q.jsx)(Kt,{store:t,modules:k,isViewedUserDeactivated:x}),(0,q.jsxs)(E().vV,{ref:b,style:U.content,children:[M?(0,q.jsx)("div",{style:U.left,children:(0,q.jsx)(Et,{modules:k,spaceStore:s,userId:a,viewedUserStore:g,isViewedUserDeactivated:x,personProfileStore:t})}):void 0,(0,q.jsx)("div",{style:U.right,children:(0,q.jsx)(Ot,{modules:B,userId:a,spaceStore:s,personProfileStore:t})})]},"main")]})}):null}const Et=r.memo(Ut);function Ut(e){const{spaceStore:t,userId:r,modules:n,viewedUserStore:i,isViewedUserDeactivated:l,personProfileStore:d}=e,c=(0,o(59226).X)("people_activity_feed_redesign");return(0,q.jsx)(q.Fragment,{children:n.map((e=>{switch(e.type){case"recentActivity":return(0,q.jsxs)("div",{children:[(0,q.jsx)(_t,{children:(0,q.jsx)(C().sA,{id:"PersonProfile.recentActivity.title",defaultMessage:"Recent activity"})}),(0,q.jsx)(s().K,{from:"PersonProfileContainer.LeftColumnContent.ActivityUpdates",fallback:e=>(0,q.jsx)(a().d,{...e}),children:c?(0,q.jsx)(me,{spaceId:t.id,actorId:r}):(0,q.jsx)(o(914795).A,{spaceId:t.id,source:"person_profile",authorId:r,empty:()=>(0,q.jsx)(te,{viewedUserStore:i,isViewedUserDeactivated:l})})})]},`${e.id}-${r}`);case"properties":return(0,q.jsx)("div",{children:(0,q.jsx)(s().K,{from:"PersonProfileContainer.LeftColumnContent.PropertiesModule",fallback:e=>(0,q.jsx)(a().d,{...e}),children:(0,q.jsx)(we,{userId:r,module:e,personProfileStore:d,showBottomDivider:!1})})},`${e.id}-${r}`);case"theirPages":return c?(0,q.jsx)("div",{children:(0,q.jsx)(s().K,{from:"PersonProfileContainer.LeftColumnContent.TheirPagesModule",fallback:e=>(0,q.jsx)(a().d,{...e}),children:(0,q.jsx)(yt,{userStore:i,spaceStore:t})})},`${e.id}-${r}`):null;default:return null}}))})}const Ot=r.memo(Nt);function Nt(e){const{userId:t,modules:o,spaceStore:r,personProfileStore:n}=e;return(0,q.jsx)(q.Fragment,{children:o.map((e=>{switch(e.type){case"collaborators":return(0,q.jsx)("div",{style:Lt,children:(0,q.jsxs)(s().K,{from:"PersonProfileContainer.RightColumnContent.TopCollaboratorsModule",fallback:e=>(0,q.jsx)(a().d,{...e}),children:[(0,q.jsx)(_t,{children:(0,q.jsx)(C().sA,{id:"PersonProfile.topCollaborators.title",defaultMessage:"Top collaborators"})}),(0,q.jsx)(Bt,{userId:t,spaceStore:r})]})},`${e.id}-${t}`);case"teamspaces":return(0,q.jsx)("div",{style:Lt,children:(0,q.jsxs)(s().K,{from:"PersonProfileContainer.RightColumnContent.TeamspacesModule",fallback:e=>(0,q.jsx)(a().d,{...e}),children:[(0,q.jsx)(_t,{children:(0,q.jsx)(C().sA,{id:"PersonProfile.teamspaces.title",defaultMessage:"Teamspaces"})}),(0,q.jsx)(He,{userId:t})]})},`${e.id}-${t}`);case"properties":return(0,q.jsx)("div",{children:(0,q.jsx)(s().K,{from:"PersonProfileContainer.RightColumnContent.PropertiesModule",fallback:e=>(0,q.jsx)(a().d,{...e}),children:(0,q.jsx)(we,{userId:t,module:e,personProfileStore:n,showBottomDivider:!0})})},`${e.id}-${t}`);default:return null}}))})}function _t(e){const t=(0,p().IS)((()=>({title:{paddingBottom:8,fontWeight:P().Wy.regular}})),[]);return(0,q.jsx)(b().A,{isSecondaryColor:!0,style:t.title,children:e.children})}function Kt(e){const{store:t,modules:o,isViewedUserDeactivated:r}=e,n=(0,u().K8)((()=>t.isReady()&&t.canEdit()),[t]);return(0,q.jsx)(q.Fragment,{children:o.map((e=>{switch(e.type){case"normalizedTitleWithIcon":return(0,q.jsx)(E().vV,{children:(0,q.jsx)(Ft,{module:e,personProfileStore:t,modules:o,isEditable:n,isViewedUserDeactivated:r})},e.id);case"cover":return(0,q.jsx)(U().f,{store:t,isEditable:n,paddingX:0,pageCoverHeight:k().mv,onMouseEnter:M().lQ,onMouseLeave:M().lQ},e.id);default:return null}}))})}function Ft(e){const{module:t,personProfileStore:o,modules:n,isEditable:i,isViewedUserDeactivated:s}=e,a=(0,D().Jh)({layoutModule:t,area:"page_main",collectionSchema:void 0,collectionStore:void 0,showDetailsPanelToggleButtonBelowTitle:!1,modules:n,context:g().R.Frame}),l=(0,u().K8)((()=>Boolean(null==o?void 0:o.getCover())),[o]),d=m().Store.createValue(!1,{name:"headerFocusStore"}),c=(0,r.useMemo)((()=>{const e=[];return i&&!l&&e.push((0,q.jsx)(L().A,{store:o,style:(0,k().g1)(!0),label:(0,q.jsx)(C().sA,{id:"PageViewBlock.cover.pageCover",defaultMessage:"Add cover"}),from:"person_page_header"},"add-cover")),e}),[i,l,o]),h=(0,v().y)(),f=(0,p().IS)((()=>({subtitle:{marginTop:-12,marginBottom:24,...h?(0,T().Up)(S().dE,"paddingInlineStart","paddingInlineEnd"):{}}})),[h]),y=a((0,q.jsx)(O().H,{store:o,context:g().R.Frame,isEditable:!1,headerControls:(0,q.jsx)(B().A,{store:o,context:g().R.Frame,children:c}),hasCover:l,isInSidePeek:!1,headerFocusStore:d,openMenuOnMount:!1,openMenuOnMountCallback:M().lQ,disabled:!0,collectionContextStore:void 0,shouldShowTemplatePicker:!1,onTitleChange:M().lQ,onTitleEditText:M().lQ,onTitleEsc:M().lQ,onTitleUntab:M().lQ,onTitleTab:M().lQ,handleHeaderMouseEnter:M().lQ,handleHeaderMouseLeave:M().lQ,layoutModule:t}));return s?(0,q.jsxs)(q.Fragment,{children:[y,(0,q.jsx)("div",{style:f.subtitle,children:(0,q.jsx)(x().D,{styleKey:"titleSemibold",colorVariant:"tertiary",children:(0,q.jsx)(C().sA,{...A().S.deactivatedLabel})})})]}):y}},568317:(e,t,o)=>{o.d(t,{_:()=>i,p:()=>s});var r=()=>o(401497),n=()=>o(284371);function i(){return(0,r().IS)((()=>({listModule:{display:"flex",flexDirection:"column",gap:4},truncationButton:{display:"flex",gap:6,alignItems:"center",padding:4,marginInlineStart:-4,flexDirection:"row",flexGrow:0,alignSelf:"flex-start"},truncationLabel:{fontWeight:400},rowContainer:{display:"flex",gap:6,alignItems:"center",padding:4,marginInlineStart:-4,flexGrow:0,alignSelf:"flex-start",maxWidth:"100%"},rowLabel:{fontWeight:400},hoveredStyle:{borderRadius:"6px"},avatarAndName:{display:"flex",gap:6,alignItems:"center"}})),[])}function s(){return(0,r().IS)((()=>({card:{maxWidth:400,minWidth:280,padding:12},bio:{display:"flex",alignItems:"center",gap:12,overflow:"hidden"},bioLink:{overflow:"hidden"},bioRight:{overflow:"hidden",width:"100%"},actionButton:{width:"100%",height:28,fontWeight:n().Wy.medium},profileTitle:{fontWeight:n().Wy.semibold},profileSubtitle:{...n().RC},loadingShimmer:{height:16,borderRadius:6,animation:"500ms ease-in fadein"}})),[])}},722267:(e,t,o)=>{o.d(t,{L:()=>r});class r extends(()=>o(757695))().Store{getInitialState(){return{activityIds:[],shouldLoadNewerActivities:!1,shouldLoadOlderActivities:!0,hasOlderActivities:!0,filterActivityTypes:[],filterDateRange:{starting:void 0,ending:void 0}}}}},791177:(e,t,o)=>{o.d(t,{$:()=>n});var r=o(296540);function n(){const[e,t]=(0,r.useState)({inputElementAttributes:void 0,suppressFocusRing:!1}),[o,n]=(0,r.useState)(!1),[i,s]=(0,r.useState)(!1);(0,r.useEffect)((()=>{if(o){function e(){s(!1)}function t(e){"ArrowDown"!==e.key&&"ArrowUp"!==e.key||s(!0)}return window.addEventListener("pointerdown",e),window.addEventListener("keydown",t),()=>{window.removeEventListener("pointerdown",e),window.removeEventListener("keydown",t)}}}),[o]);return[(0,r.useMemo)((()=>({inputElementAttributes:e.inputElementAttributes,suppressFocusRing:e.suppressFocusRing&&i,onFocus:()=>{n(!0)},onBlur:()=>{n(!1)}})),[e,i]),(0,r.useMemo)((()=>({setComboboxState:t,isFocusVisible:i,isComboboxFocused:o,onItemHover:()=>{s(!1)}})),[i,o])]}},797324:(e,t,o)=>{o.d(t,{A:()=>m});var r=o(296540),n=()=>o(560520),i=()=>o(484714),s=()=>o(790748),a=()=>o(581010),l=()=>o(69708),d=()=>o(100622),c=()=>o(284371),u=()=>o(396406),p=()=>o(718827),h=()=>o(843798),f=o(474848);function m(e){const{onDismiss:t,inputRef:o}=e,m=(0,i().Y0)(),g=(0,r.useRef)(null),y=m.isMobileNative&&m.isIOS,v=y&&e.show;(0,s().b)(a().A,(()=>({getNode:()=>g.current,isShown:()=>v})),[v]);const x=(0,n().n)(),b=(0,r.useCallback)((()=>{var e;null==o||null===(e=o.current)||void 0===e||e.focus(),t&&t();const r=document.activeElement;r instanceof HTMLElement&&r.blur()}),[o,t]);if(!y)return null;const S=v?-(h().j+x):0;return(0,f.jsx)(u().O,{open:!0,children:(0,f.jsx)("div",{style:{position:"fixed",top:"100vh",width:"100%",height:h().j,display:v?"flex":"none",alignItems:"center",justifyContent:"flex-end",backgroundColor:d().Tj.keyboardDoneBarBackground,transform:`translateY(${S}px)`,transition:v?"ease-out":"ease-in",boxShadow:v?`\n\t\t\t\t\t\t\t\t0 -1px 0 ${d().Tj.border.primaryTranslucent}\n\t\t\t\t\t\t\t`:void 0},ref:g,children:(0,f.jsx)(p().Ay,{style:{display:"flex",alignItems:"center",marginInlineEnd:16,color:d().oZ.blue,fontWeight:c().Wy.semibold},onTouchEnd:()=>{b()},children:(0,f.jsx)(l().sA,{defaultMessage:"Done",id:"mobile.dismissKeyboardBar.button.label"})})})})}},803960:(e,t,o)=>{o.r(t),o.d(t,{arrowChevronSingleDownIcon:()=>n,iconDefinition:()=>r});o(296540);const r={viewBox:"0 0 20 20",fittedViewBox:"3.97 6.97 12.06 6.66",svg:(0,o(474848).jsx)("path",{d:"M9.558 13.442c.244.244.64.244.884 0l5.4-5.4a.625.625 0 0 0-.884-.884L10 12.116 5.042 7.158a.625.625 0 1 0-.884.884z"})},n=(0,o(340498).wt)("arrowChevronSingleDown",r,"default")},914795:(e,t,o)=>{o.d(t,{A:()=>Q});o(898992),o(354520),o(581454);var r=o(296540),n=()=>o(907258),i=()=>o(726637),s=()=>o(484714),a=()=>o(590526),l=()=>o(401497),d=()=>o(79926),c=()=>o(929219),u=()=>o(852273),p=()=>o(201794),h=()=>o(498521),f=()=>o(118307),m=()=>o(98126),g=()=>o(187174),y=()=>o(202017),v=()=>o(42583),x=()=>o(921997),b=()=>o(801634),S=()=>o(69708),j=()=>o(100622),A=()=>o(496603),I=()=>o(534177),C=()=>o(720665),w=()=>o(848259);const T=new(d().O2)("activityUpdate",(async()=>await Promise.all([o.e(42660),o.e(5181),o.e(83149),o.e(13319)]).then(o.bind(o,275056))));(0,d()._h)(T,(e=>e.ActivityUpdate));var M=()=>o(299545),P=()=>o(957606),k=()=>o(423817),R=()=>o(554413),B=()=>o(402267),L=()=>o(81068),D=()=>o(297401);class E extends(()=>o(757695))().Store{getInitialState(){return{selectedItems:[]}}}const U=E;var O=()=>o(322976),N=o(474848);const _=function({mode:e,title:t,onChange:o,disabled:n,focused:i,onMenuDismiss:s,items:l,addItemLabel:d,tokenInputPlaceholder:c,resultSectionTitle:u,componentDebugName:p,icon:h,getItemLabel:f,options:m,store:g}){const y=(0,a().uB)(g,U),v=(0,a().O$)(y);return(0,r.useEffect)((()=>{y.setState({selectedItems:l})}),[l,y]),(0,N.jsx)(O().A,{mode:e,hasItemsSelected:v.selectedItems.length>0,title:t,icon:h,items:l,onChange:e=>{o(e)},disabled:n,focused:i,renderFilter:(e,t)=>(0,N.jsx)(W,{getItemLabel:f,item:e,args:t}),renderToken:e=>(0,N.jsx)(F,{item:e}),renderItemForSummary:e=>(0,N.jsx)(K,{item:e}),addItemLabel:d,labelText:{title:t,tokenInputPlaceholder:c,resultSectionTitle:u,componentDebugName:p},performRequest:e=>function({query:e},t){return Promise.resolve(t.filter((t=>t.includes(e))))}(e,m),renderResultMenuItem:(t,o)=>(0,N.jsx)(z,{getItemLabel:f,mode:e,store:y,item:t,props:o}),onMenuDismiss:s})};function K({item:e}){return(0,N.jsx)(N.Fragment,{children:`hello${e}`})}function F({item:e}){return(0,N.jsx)(N.Fragment,{children:e})}function W({item:e,args:t,getItemLabel:o}){const{disabled:r,onRemove:n,onClick:s}=t,a={menuItem:{minHeight:void 0,paddingTop:i().A.isMobile?12:4,paddingBottom:i().A.isMobile?12:4},menuItemTitle:{width:"100%"},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginInlineEnd:12},recordIcon:{marginInlineEnd:4}},l=(0,N.jsx)(D().A,{disabled:r,onClick:n});return(0,N.jsx)(L().A,{title:(null==o?void 0:o(e))||e,disabled:r,focused:!1,right:l,style:a.menuItem,desktopTitleStyle:a.menuItemTitle,onClick:s})}function z({item:e,props:t,getItemLabel:o,mode:n,store:i}){const s=(0,a().uB)(i,U),l=(0,a().K8)((()=>s.state.selectedItems),[s]);return(0,r.createElement)(L().A,{...t,key:e,title:(null==o?void 0:o(e))||e,isChecked:n===O().C.Pill&&l.includes(e)})}var V=()=>o(110886),H=()=>o(132533),G=()=>o(988591),$=()=>o(722267),Y=()=>o(279922);function Q(e){var t;const{spaceId:o,navigableBlockStore:i,collectionIds:m,authorId:y,source:v}=e,b=null==i?void 0:i.id,j=(0,s().v3)(),w=(0,a().uB)(void 0,$().L),B=(0,a().uB)(void 0,f().A),L=(0,l().IS)((()=>({placeholderContent:q()})),[]),D=(0,r.useMemo)((()=>A().nF((e=>function(e,t){t.update((e=>({...e,shouldLoadNewerActivities:!0})))}(0,w)),1e3)),[w]),E=(0,r.useMemo)((()=>C().Hg(D)),[D]);(0,r.useEffect)((()=>{let e,t,o;if(b){const t=(0,x().O$)(b);e=u().Ay.addListener(t,void 0,E,void 0,j)}if(m&&(t=m.map((e=>{const t=(0,x().zB)(e);return u().Ay.addListener(t,void 0,E,void 0,j)})).filter(I().O9)),y){const e=(0,x().Ii)(y);o=u().Ay.addListener(e,void 0,E,void 0,j)}return()=>{if(e&&u().Ay.removeListener(e,j),t)for(const e of t)u().Ay.removeListener(e,j);o&&u().Ay.removeListener(o,j)}}),[m,j,E,b,y]);const U=(0,a().O$)(c().e),O=(0,a().K8)((()=>{const e=w.state;return 0===e.filterActivityTypes.length&&void 0===e.filterDateRange.ending&&void 0===e.filterDateRange.starting}),[w]),_=(0,a().K8)(P().XL,[]),{currentUserStore:K,currentSpaceStore:F}=(0,a().K8)((()=>{const{currentUserStore:e,sidebarSpaceStore:t}=n().default.state;return{currentUserStore:e,currentSpaceStore:t}}),[]),{shouldLoadOlderActivities:W,shouldLoadNewerActivities:z,filterActivityTypes:Q,filterDateRange:J,activityIds:oe,hasOlderActivities:re}=(0,a().O$)(w),ne=(0,d().fJ)(T),[ie]=(0,g().Yb)((async()=>{if(!U||!K||!F)return;const e=Y().Ay.startLoading();z?await V().X(j,{store:w,activityIds:oe,spaceId:o,filterActivityTypes:Q,filterDateRange:J,navigableBlockId:b,collectionIds:m,authorId:y,source:v}):W&&re&&await V().r(j,{store:w,activityIds:oe,spaceId:o,filterActivityTypes:Q,filterDateRange:J,navigableBlockId:b,collectionIds:m,authorId:y,source:v}),Y().Ay.endLoading(e)}),[oe,w,m,F,K,j,Q,J,re,U,b,z,W,o,v,y]),se=ie.error,ae="resolved"===ie.status,le=(0,a().K8)((()=>{if(!K)return[];const e=K.id,t=(0,p().T)("supportsNativeHome"),r={spaceId:o,userId:e,navigableBlockId:b,collectionIds:m,filterDateRange:J,filterActivityTypes:Q,authorId:y},i=t&&0===oe.length&&!ae?R().oV(r):oe;return t&&ae&&R().tK(r,oe),function(e){return A().oE(e.map((e=>function(e){const{currentUserStore:t,sidebarSpaceStore:o}=n().default.state;if(!t||!o)return;const r=(0,M().jA)(o,e,o.id),i=r.getModel();return i&&!i.invalid?i:null}(e))))}(i)}),[oe,m,K,Q,J,y,b,ae,o]);if(!U)return(0,N.jsx)(ee,{});if(!K||!F)return null;const de=0===le.length&&!re&&ae,ce=F;if(se||"rejected"===ne.status)return(0,N.jsx)("div",{style:L.placeholderContent,children:(0,N.jsx)(S().sA,{defaultMessage:"Something went wrong.",id:"activityUpdate.unknownErrorLoadingActivities.message"})});const ue=Boolean(m&&m.length>0);if("resolved"!==ne.status||0===le.length&&!ae)return(0,N.jsxs)("div",{children:[_?(0,N.jsx)(X,{hasCollection:ue,source:v,activityUpdatesStore:w,filterPopupStore:B}):void 0,(0,N.jsx)(k().J,{areaHeight:window.innerHeight})]});const{ActivityUpdate:pe}=ne.value;return(0,N.jsxs)("div",{children:[_?(0,N.jsx)(X,{hasCollection:ue,source:v,activityUpdatesStore:w,filterPopupStore:B}):void 0,(0,N.jsxs)("div",{style:de?L.placeholderContent:Z(),className:de?"":"notranslate",children:[de?null===(t=e.empty)||void 0===t?void 0:t.call(e,{hasFiltersOn:!O}):null,(0,N.jsx)(H().X,{children:(0,N.jsx)("section",{role:"feed",children:le.map(((e,t,o)=>{const r=o.length-1===t,n="notifications_tab"===v?{tab:"all",source:v}:"updates_sidebar"===v?{tab:"pageUpdatesSidebar",source:v}:"person_profile"===v?{tab:"personProfile",source:v}:{tab:"homeTile",source:v};return(0,N.jsx)(G().Z,{index:t,children:(0,N.jsx)(pe,{activity:e,rootStore:ce,isLast:r,tabArgs:n})},e.id)}))})}),(0,N.jsx)(h().A,{onChange:e=>{e<200&&ae&&!W&&re&&(O||le.length>0)&&w.update((e=>({...e,shouldLoadOlderActivities:!0})))},children:!ae&&re?(0,N.jsx)(te,{isPaginated:!0}):null})]})]})}function X(e){const{hasCollection:t,source:o,activityUpdatesStore:r,filterPopupStore:i}=e,{currentUserStore:s,currentSpaceStore:l}=(0,a().K8)((()=>{const{currentUserStore:e,sidebarSpaceStore:t}=n().default.state;return{currentUserStore:e,currentSpaceStore:t}}),[]),d=(0,a().K8)((()=>r.state.filterActivityTypes.length>0||r.state.filterDateRange.ending||r.state.filterDateRange.starting),[r]);return s&&l?(0,N.jsxs)("div",{style:{display:"flex",flexDirection:"row",padding:"12px 10px",width:"100%",gap:6},children:[(0,N.jsx)(J,{hasCollection:t,source:o,filterPopupStore:i,activityUpdatesStore:r}),(0,N.jsx)(se,{source:e.source,activityUpdatesStore:r,filterPopupStore:i}),d?(0,N.jsx)(ie,{source:e.source,activityUpdatesStore:r}):void 0]}):null}function J(e){const{hasCollection:t,source:o,activityUpdatesStore:n,filterPopupStore:i}=e,l=(0,S().tz)(),d=(0,s().v3)(),c=t?b().Fv:b().IP,u=(0,a().uB)(void 0,U),p=(0,a().K8)((()=>n.state.filterActivityTypes),[n]),h=(0,r.useCallback)((()=>{re(i)}),[i]);return(0,N.jsx)(_,{store:u,focused:!1,icon:y().n,options:[...c].sort(),items:p,mode:O().C.Pill,title:(0,N.jsx)(S().sA,{id:"activityUpdates.filterMenu.byType.title",defaultMessage:"Activity type"}),tokenInputPlaceholder:l.formatMessage({id:"activityUpdates.filterMenu.byType.search",defaultMessage:"Search for a type"}),resultSectionTitle:l.formatMessage({id:"activityUpdates.filterMenu.byType.resultSectionTitle",defaultMessage:"Activity Types"}),addItemLabel:l.formatMessage({id:"activityUpdates.filterMenu.byType.addItemLabel",defaultMessage:"Add an activity type"}),componentDebugName:"ActivityUpdatesSearchEditTypesFilter",onChange:e=>ne((()=>n.update((t=>({...t,filterActivityTypes:e,activityIds:[],hasOlderActivities:!0,shouldLoadOlderActivities:!0,shouldLoadNewerActivities:!1})))),d,o,n),onMenuDismiss:h,getItemLabel:e=>e.split("-").map((e=>e.replace(/(^.)/,(e=>e.toUpperCase())))).join(" ")})}function Z(){return{minHeight:i().A.isMobile?void 0:"75vh"}}function q(){return{...Z(),paddingTop:i().A.isMobile?32:void 0,paddingBottom:i().A.isMobile?32:void 0,minHeight:i().A.isMobile?void 0:220,display:"flex",textAlign:"center",alignItems:"center",justifyContent:"center",fontSize:14,color:j().Tj.text.secondary,flexDirection:"column",flex:"1 1 0%"}}function ee(){const e=(0,l().IS)((()=>({offlineMessage:q()})),[]);return(0,N.jsx)("div",{style:e.offlineMessage,children:(0,N.jsx)(S().sA,{defaultMessage:"Please go online to view updates.",id:"activityUpdates.offlineMessage"})})}function te({isPaginated:e}){const t=(0,l().IS)((()=>({spinner:{...q(),minHeight:e?64:220}})),[e]);return(0,N.jsx)("div",{style:t.spinner,children:(0,N.jsx)(m().k,{})})}function oe(e){var t,o;const{filterActivityTypes:r,filterDateRange:n}=e.state;return{activityTypes:r,dateRange:{start:null===(t=n.starting)||void 0===t?void 0:t.start_date,end:null===(o=n.ending)||void 0===o?void 0:o.start_date}}}function re(e){e.setState({...e.state,open:!1})}function ne(e,t,o,r){const n=oe(r);e();const i=oe(r);w().Xl({environment:t,activityUpdatesSource:o,filters:i,prevFilters:n})}function ie({source:e,activityUpdatesStore:t}){const o=(0,s().v3)(),r=(0,l().IS)((()=>({clearButton:{flexGrow:1,textAlign:"end",cursor:"pointer",fontSize:14,color:j().Tj.text.secondary,marginInlineEnd:8}})),[]);return(0,N.jsx)("div",{style:r.clearButton,onClick:()=>ne((()=>t.reset()),o,e,t),children:(0,N.jsx)(S().sA,{defaultMessage:"Clear",id:"activityUpdates.clearFilters"})})}function se({source:e,activityUpdatesStore:t,filterPopupStore:o}){const n=(0,s().v3)(),i=(0,r.useCallback)((()=>re(o)),[o]),l=(0,a().K8)((()=>t.state.filterDateRange),[t]);return(0,N.jsx)(B().A,{mode:O().C.Pill,focused:!1,showButtons:!0,title:(0,N.jsx)(S().sA,{id:"activityUpdates.filterMenu.byDate",defaultMessage:"Date Range"}),icon:v().D,value:l,onMenuDismiss:i,onChange:o=>ne((()=>t.update((e=>({...e,filterDateRange:o,activityIds:[],hasOlderActivities:!0,shouldLoadOlderActivities:!0})))),n,e,t)})}},988591:(e,t,o)=>{o.d(t,{Z:()=>a,v:()=>s});var r=o(296540),n=o(474848);const i=(0,r.createContext)(void 0);function s(){return(0,r.useContext)(i)}function a(e){const{index:t,children:o}=e;return(0,n.jsx)(i.Provider,{value:t,children:o})}i.displayName="NotificationIndexContext"}}]);