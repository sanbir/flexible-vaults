"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[63687],{77295:(e,t,n)=>{n.d(t,{K:()=>a});n(898992),n(823215);var o=()=>n(440375);function a(e){return!o().l.state&&e.blocks.every((e=>e.canAdmin()))}},91765:(e,t,n)=>{n.d(t,{oK:()=>m,qg:()=>p,sB:()=>g});n(898992),n(823215);var o=()=>n(907258),a=()=>n(76549),i=()=>n(804666),r=()=>n(848538),s=()=>n(534177),c=()=>n(799832),l=()=>n(396301),d=()=>n(51967),u=()=>n(292664);function m(e){var t;if(!e.isInLibraryBlock())return;const n=e.getRecordStoreUIRoot();if(!(n instanceof a().Bv))return;const o=null===(t=(0,c().U)(n))||void 0===t||null===(t=t.collectionViewStore())||void 0===t||null===(t=t.getCollectionSource())||void 0===t?void 0:t.type;return o&&(0,i().a0)(o)?o:void 0}function g({environment:e,selectedItems:t}){if(0===t.length)return;const{currentUserSettingsStore:n,sidebarSpaceViewStore:i,sidebarSpaceStore:c}=o().default.state,l=e.currentUser.id,g=m(t[0]);if(!(n&&i&&l&&c&&g&&function(e,t,n,o){switch(e){case"recents":case"teamspaceDirectory":case"libraryExternalPages":case"myMeetings":return!1;case"favorites":return!0;case"private":return t.every((e=>(0,u().K)(e)));case"shared":return t.every((e=>(0,d().B)({store:e,spaceStore:o,userId:n})));default:return(0,s().HB)(e),!1}}(g,t,l,c)))return;const p=a().VF.createChildStore(i,(0,r().i1)({userId:l,spaceId:i.id}));return p?{environment:e,selectedItems:t,userSettingsStore:n,spaceViewStore:i,spaceUserStore:p,libraryViewName:g}:void 0}function p(e){const{currentUserSettingsStore:t}=o().default.state,{sortOption:n}=(0,l().RQ)({type:"private",spaceViewStore:e,userSettingsStore:t}),{sortOption:a}=(0,l().RQ)({type:"shared",spaceViewStore:e,userSettingsStore:t});return{private:n,shared:a}}},111232:(e,t,n)=>{n.d(t,{s:()=>r});n(581454);var o=()=>n(295633),a=()=>n(534177),i=()=>n(722101);function r({modificationType:e,storesToModify:t,spaceViewStore:n,transaction:r}){const s=n.getBookmarkedPagesStore(),c=t.map((e=>o().B.createChildStore(s,e.pointer)));for(const o of c.reverse())"add"===e?i().Hs({parentStore:s,prependStore:o,transaction:r}):"remove"===e?i().TF({parentStore:s,childToRemoveStore:o,transaction:r}):(0,a().HB)(e)}},124524:(e,t,n)=>{n.d(t,{I:()=>u});var o=n(296540),a=()=>n(726637),i=()=>n(401497),r=()=>n(340498),s=()=>n(100622),c=n(474848);const l="M19 6V4C19 2.34315 17.6569 1 16 1V1C14.3431 1 13 2.34315 13 4V8",d="M7 7.5V5.5C7 3.84315 8.34315 2.5 10 2.5V2.5C11.6569 2.5 13 3.84315 13 5.5V7.5";function u({isLocked:e,color:t="primary",size:n="default",style:u}){const m="number"==typeof n?n:a().A.isMobile?r().lD[n]:r().Ev[n],g=(0,o.useRef)(!0),[p,f]=(0,o.useState)(""),v=(0,i().IS)((()=>({icon:{width:m,height:m,stroke:"inherit"===t?"inherit":s().Tj.icon[t],...u,fill:"none"}})),[t,m,u]);return(0,o.useEffect)((()=>{g.current?g.current=!1:f(e?"unlocked-to-locked":"locked-to-unlocked")}),[e]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("style",{children:`\n\t\t\t\t.unlocked-to-locked {\n\t\t\t\t\tanimation-duration: 0.75s;\n\t\t\t\t\tanimation-name: unlocked-to-locked;\n\t\t\t\t\tanimation-fill-mode: forwards;\n\t\t\t\t}\n\n\t\t\t\t.locked-to-unlocked {\n\t\t\t\t\tanimation-duration: 0.75s;\n\t\t\t\t\tanimation-name: locked-to-unlocked;\n\t\t\t\t\tanimation-fill-mode: forwards;\n\t\t\t\t}\n\n\t\t\t\t@keyframes unlocked-to-locked {\n\t\t\t\t\t0% {\n\t\t\t\t\t\td: path("${l}");\n\t\t\t\t\t\ttransition-timing-function: cubic-bezier(0.11, 0, 0.5, 0);\n\t\t\t\t\t}\n\t\t\t\t\t50% {\n\t\t\t\t\t\td: path("M7 6V4C7 2.34315 8.34315 1 10 1V1C11.6569 1 13 2.34315 13 4V8");\n\t\t\t\t\t\ttransition-timing-function: linear;\n\t\t\t\t\t}\n\t\t\t\t\t100% {\n\t\t\t\t\t\td: path("${d}");\n\t\t\t\t\t\ttransition-timing-function: cubic-bezier(0.34, 1.56, 0.64, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t@keyframes locked-to-unlocked {\n\t\t\t\t\t0% {\n\t\t\t\t\t\td: path("${d}");\n\t\t\t\t\t\ttransition-timing-function: cubic-bezier(0.36, 0, 0.66, -0.56);\n\t\t\t\t\t}\n\t\t\t\t\t50% {\n\t\t\t\t\t\td: path("M7 6V4C7 2.34315 8.34315 1 10 1V1C11.6569 1 13 2.34315 13 4V8");\n\t\t\t\t\t\ttransition-timing-function: linear;\n\t\t\t\t\t}\n\t\t\t\t\t100% {\n\t\t\t\t\t\td: path("${l}");\n\t\t\t\t\t\ttransition-timing-function: cubic-bezier(0.5, 1, 0.89, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t`}),(0,c.jsxs)("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:v.icon,children:[(0,c.jsx)("rect",{x:"4.5",y:"8",width:"11",height:"9",rx:"2",strokeWidth:"1.25"}),(0,c.jsx)("circle",{cx:"10",cy:"11.5",r:"0.5",strokeWidth:"1.25"}),(0,c.jsx)("path",{d:"M10 14V11.5",strokeWidth:"1.25",strokeLinecap:"round"}),(0,c.jsx)("path",{className:p,d:e?d:l,strokeWidth:"1.25",strokeLinecap:"round"})]})]})}},163580:(e,t,n)=>{n.d(t,{VT:()=>c,b0:()=>l,gz:()=>d});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(581454);var o=()=>n(907258),a=()=>n(770063),i=()=>n(799288),r=()=>n(45331),s=()=>n(332393);function c(e,t){const n=t.getAlive(),o=(0,i().hu)(t),a=!l(t),s=l(t),c=Boolean(e.currentUser.id===t.getParentId()),d=s&&c&&!(0,r().Y)(t.getIntegrationId());return n&&o&&(d||a)}function l(e){if(!e.getAlive||!(0,i().hu)(e))return!1;const{currentUserRootStore:t}=o().default.state,n=e.getIntegrationId();if(!t||!n)return!1;const r=(0,a().v3)(t,{id:n,table:s().Li}).getKeyStore("type").getValue();return!e.isInternalBot(r?{type:r}:void 0)}function d(e){const{externalIntegrationStoreState:t,integrationId:n}=e;if(!t.loaded)return;const o=t.externalAuthentications.map((({parent_id:e})=>e)),a=new Set(o),r=t.bots.filter((e=>e.alive&&a.has(e.id)&&(0,i().Sd)(e)&&e.integration_id===n));return r.length?r[0]:void 0}},192180:(e,t,n)=>{n.d(t,{O8:()=>V,Yf:()=>B,fS:()=>j});var o=()=>n(726637),a=()=>n(221844),i=()=>n(140934),r=()=>n(770063),s=()=>n(295633),c=()=>n(683021),l=()=>n(730219),d=()=>n(906536),u=()=>n(86159),m=()=>n(700500),g=()=>n(792071),p=()=>n(651784),f=()=>n(179034),v=()=>n(197959),y=()=>n(161479),b=()=>n(201980),k=()=>n(534177),h=()=>n(292167),S=()=>n(437219),A=()=>n(722101),M=()=>n(384944),w=()=>n(666144),I=()=>n(689355),N=()=>n(97270),x=()=>n(299545),C=()=>n(673477),_=()=>n(518489),L=()=>n(295304),T=()=>n(547149),P=()=>n(51317);function B(e){const{environment:t,textStore:n,blockStore:s,url:d,oldTextValue:m,urlSelection:g}=e;if(c().Ay.state.open||N().A.state.open||C().Ay.state.open||I().A.state.open)return!1;const b=u().get();if(!b)return!1;const k=u().getRect(b);if(!k)return!1;const h=(0,p().parseRoute)({url:d,baseUrl:o().A.domainBaseUrl,publicDomainName:o().A.publicDomainName,isMobile:o().A.isMobile,protocol:o().A.protocol,currentUrl:window.location.href});if("page"===h.name&&Boolean(h.discussionId)&&h.discussionId){const e=h.discussionId,o=h.blockId;if(!o)return!1;const c=s.getParentBlockStore();if(!c)return!1;const u=(0,r().v3)(c,{table:f().ev,id:o,spaceId:(0,y().e)(c.pointer.spaceId)}),p=(0,r().v3)(u,{table:v().$Y,id:e,spaceId:(0,y().e)(s.pointer.spaceId)});if("none"===p.getRole())return!1;const b=new(i().ComputedStore)((()=>x().wc(p)[0]),{debugName:"firstCommentStore"}),A=new(a().A)({name:"internalUnfurlingMenuActions.activate",isTemporaryData:!0});t.defaultRecordCache.inMemoryRecordCache.addCacheOverride(A);const M=s.clone(A),w=n.clone(A),I=c.clone(A);return P().A.setState({args:{commentStore:b},stores:{blockStore:s,textStore:n,parentStore:c},temporaryStores:{blockStore:M,textStore:w,parentStore:I},temporaryRecordCache:A,focusedIndex:l().A.Preview,selectionRect:k,oldTextValue:m,open:!0,url:d,urlSelection:g}),S().wQ(t,{url:d}),!0}return!1}function j(e){const{actionType:t,environment:n,commentStore:o,useTempStores:a}=e,i=P().A.state;if(!i.open)return;const{oldTextValue:r}=i,c=a?i.temporaryStores:i.stores,{textStore:u,blockStore:m,parentStore:p}=c,f=n.currentUser.id;if(f){if(a){i.temporaryRecordCache.clearCache();for(const e in i.temporaryStores){const t=i.temporaryStores[e],o={userId:f,pointer:t.pointer},a=n.defaultRecordCache.inMemoryRecordCache.getRecord(o);a?w().PC({environment:n,inMemoryRecordCache:i.temporaryRecordCache,pointer:t.pointer,model:g().Bj6.fromValue(t.pointer.table,a.value),role:a.role,updatePaths:[[]],userId:f,force:!0,debugSource:"setUnfurlType"}):w().oX({environment:n,inMemoryRecordCache:i.temporaryRecordCache,persistedRecordCache:void 0,pointer:t.pointer,userId:f})}}else n.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(i.temporaryRecordCache);switch(t){case l().A.Link:(0,_().h)({environment:n,store:i.stores.blockStore}),(0,d().t)({store:i.stores.textStore,selection:{startIndex:i.urlSelection.endIndex,endIndex:i.urlSelection.endIndex}}),P().A.setState({...i,focusedIndex:l().A.Link});break;case l().A.Mention:if(!o)return;const e=(0,y().e)(u.pointer.spaceId);if(!e)return;const a=o.id;T().createAndCommit({environment:n,userAction:"internalUnfurlingMenuActions.mention",canUndo:!0,perform:t=>{L().R9({environment:n,store:u,value:r,transaction:t}),L().Gf({environment:n,editorMode:"default",store:u,selection:{startIndex:i.urlSelection.startIndex,endIndex:i.urlSelection.startIndex},annotation:b().hiQ(a,e),transaction:t,analyticsFrom:"block"})}}),P().A.setState({...i,focusedIndex:l().A.Mention});break;case l().A.Preview:if(!o)return;T().createAndCommit({environment:n,userAction:"internalUnfurlingMenuActions.preview",canUndo:!0,perform:e=>{L().R9({environment:n,store:u,value:r,transaction:e});const t=x().eK(o);if(!t)return;if(!x().No(t)||!p||!t.getParentId())return;const a=h().s({environment:n,parentBlockStore:p,targetStore:o,transaction:e});if(A().WH({parentStore:p.getContentStore(),insertStore:a,afterStore:m,transaction:e}),0===b().q4_(i.oldTextValue).trim().length){const t=s().B.createChildStore(p.getContentStore(),i.stores.blockStore.pointer);A().TF({parentStore:p.getContentStore(),childToRemoveStore:t,transaction:e})}}}),P().A.setState({...i,focusedIndex:l().A.Preview});break;default:throw(0,k().HB)(t)}a||P().A.setState({open:!1})}}function V(e){var t,n;const{blockStore:o,transaction:a,environment:i}=e,r=o.getType(),s=o.getFormat(),c=o.getSpaceId();if(!o.isDefined()||r!==m().xd.alias||null==s||null===(t=s.alias_pointer)||void 0===t||!t.id)return;const l=[b().wmz(b().hiQ(null==s||null===(n=s.alias_pointer)||void 0===n?void 0:n.id,c))];M().zv({store:o,data:{type:m().xd.text},transaction:a}),M().zv({store:o.getFormatStore(),data:{alias_pointer:null},transaction:a}),L().R9({environment:i,store:o.getBlockTitleStore(),value:l,transaction:a})}},245128:(e,t,n)=>{n.d(t,{A:()=>o});const o=function(e){const{spaceViewStore:t,pageId:n}=e;return!(!t||!n)&&-1!==t.getBookmarkedPageIds().indexOf(n)}},263885:(e,t,n)=>{n.d(t,{A:()=>Vt,$:()=>jt});var o=n(296540),a=()=>n(736847),i=()=>n(69708),r=()=>n(383036),s=()=>n(891317),c=()=>n(675133),l=()=>n(792057),d=()=>n(295633),u=()=>n(457205),m=()=>n(302996),g=()=>n(699143),p=()=>n(807449),f=()=>n(98126),v=()=>n(493552),y=()=>n(26697),b=()=>n(81068),k=()=>n(424400),h=()=>n(449279),S=()=>n(212727),A=()=>n(340498),M=n(474848);const w={viewBox:"0 0 20 20",fittedViewBox:"4.62 1.77 10.75 15.97",svg:(0,M.jsx)("path",{d:"M4.892 4.553a.55.55 0 0 1 .776.06l.222.258.012.017 8.777 10.24a.55.55 0 0 1-.847.7l-1.929-2.25-2.827 3.908a.626.626 0 0 1-1.13-.411l.402-5.5H5.25a.626.626 0 0 1-.507-.99l2.1-2.91-2.01-2.346a.55.55 0 0 1 .059-.776m4.752 6.443-.291 3.974 1.714-2.368-1.425-1.662zm-3.172-.671H9.02q.053 0 .103.01L7.68 8.65zm4.441-8.291a.626.626 0 0 1 1.13.41l-.391 5.51h3.098a.626.626 0 0 1 .506.993l-2.026 2.798-.837-.977 1.134-1.563h-2.474l-.688-.802.275-3.854-1.637 2.265-.837-.976z"})},I=(0,A().wt)("lightningSlash",w,"default");var N=()=>n(858141),x=()=>n(498212),C=()=>n(939768),_=()=>n(427704);function L(e,t){const n=t.trim().toLowerCase(),o=(0,C().d9)(n).replace(/\./g,"-");return o?`${o}-${e}`:e}var T=()=>n(388693),P=()=>n(433847),B=()=>n(179034),j=()=>n(824862),V=()=>n(96689),D=()=>n(100622),R=()=>n(907258),F=()=>n(590526),U=()=>n(770063),z=()=>n(849255),E=()=>n(332393),O=()=>n(798880);const K={createdBy:void 0,authorizedBy:void 0,integrationType:void 0,isYou:!1,creatorEmail:void 0,tagline:void 0,integrationInfo:void 0,isInternal:!0};function q(e){const t=(0,i().tz)(),n=(0,F().K8)((()=>R().default.state.currentUserRootStore),[]);return(0,F().K8)((()=>{var o;if(!e||!n)return K;const a=e.integration_id;if(!a)return K;const i=(0,U().v3)(n,{id:a,table:E().Li}),r=i.getKeyStore("type").getValue(),s=i.getKeyStore("info").getValue(),c=e.created_by_id;let l;if(s&&"tagline"in s&&(l=s.tagline),!c)return{...K,integrationType:r,integrationInfo:s,tagline:l,isInternal:!r||"internal"===r};const d=z().L.createChildStore(n,{id:c,table:O().oo}),u=d.getDisplayName(t),m=d.getEmail(),g=null===(o=R().default.state.currentUserStore)||void 0===o?void 0:o.id,p=d.id===g,f=!r||"internal"===r;return f?{createdBy:u,authorizedBy:void 0,integrationType:r,isYou:p,creatorEmail:m,tagline:l,integrationInfo:s,isInternal:f}:{createdBy:s&&"developer_name"in s?s.developer_name:void 0,authorizedBy:u,integrationType:r,isYou:p,creatorEmail:m,tagline:l,integrationInfo:s,isInternal:f}}),[e,n,t])}var Y=()=>n(401497);function W({mainContent:e,caption:t}){const n=(0,Y().IS)((()=>({container:{display:"flex",flexDirection:"column",alignItems:"flex-start",maxWidth:350,whiteSpace:"normal",padding:8},caption:{marginTop:e?4:0}})),[e]);return(0,M.jsxs)("div",{style:n.container,children:[e?(0,M.jsx)(v().D,{styleKey:"captionMedium",colorVariant:"inversePrimary",children:e}):void 0,t?(0,M.jsx)(v().D,{styleKey:"captionRegular",colorVariant:"inverseSecondary",style:n.caption,children:t}):void 0]})}var H=()=>n(256863);const G=(0,i().YK)({createdBy:{id:"connection.createdBy",defaultMessage:"Created by {name}"},authorizedBy:{id:"botMenuItem.authorizedBy",defaultMessage:"Authorized by {name}"},publicLabel:{id:"botMenuItem.public",defaultMessage:"Public"},selfIndicator:{id:"botMenuItem.youIndicator",defaultMessage:" (You)"},addConnectionLabel:{id:"topbarMoreConnections.addConnection",defaultMessage:"Add connection"},activeConnectionsLabel:{defaultMessage:"Active connections",id:"topbarMenu.subActions.addConnections.activeConnections"},authorizedByLabel:{defaultMessage:"Authorized by {authorizedBy}",id:"topbarMenu.subActions.activeConnection.authorizedBy"},notConnectedLabel:{defaultMessage:"Add a new connection",id:"topbarMenu.subActions.addConnections.addNewConnection"},noConnectionsLabel:{defaultMessage:"None",id:"topbarMenu.subActions.addConnections.none"},capabilitiesLabel:{defaultMessage:"Capabilities",id:"topbar.connectionSection.capabilities.label"}});function X(e,t){const{bot:o,tooltipText:a,...s}=e,c=(0,F().K8)((()=>R().default.state.currentUserRootStore),[]),l=(0,i().tz)(),d=q(o);let u,m;if(d.isInternal){u=d.createdBy?l.formatMessage(G.createdBy,{name:d.createdBy}):void 0;const e=d.createdBy?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("span",{children:u}),(0,M.jsx)("span",{children:d.isYou?(0,M.jsx)(i().sA,{...G.selfIndicator}):void 0})]}):void 0;m=d.creatorEmail||e?(0,M.jsx)(W,{mainContent:e,caption:d.creatorEmail}):void 0}else u=d.authorizedBy?l.formatMessage(G.authorizedBy,{name:d.authorizedBy}):void 0,m=(0,M.jsx)(W,{mainContent:d.tagline,caption:d.authorizedBy?(0,M.jsx)(i().sA,{...G.authorizedBy,values:{name:d.authorizedBy}}):void 0});const g=d.isInternal?void 0:(0,M.jsx)(v().D,{styleKey:"captionRegular",colorVariant:"tertiary",children:(0,M.jsx)(i().sA,{...G.publicLabel})}),p={alignSelf:"flex-start"};if(!o||!c)return null;const f=a||m;return(0,M.jsx)(y().m,{placement:"left",disableTooltip:!f,renderTooltip:()=>f,textWrap:!0,render:e=>(0,M.jsx)(b().A,{...(0,r().A)(s,e),icon:(0,M.jsx)(H().A,{botValue:o}),title:(0,n(799288).Hg)(o),caption:u,right:g,rightStyle:p,ref:t})})}const $=o.forwardRef(X);var Q=()=>n(583690),Z=()=>n(575143),J=()=>n(419357),ee=()=>n(726637),te=()=>n(484714),ne=()=>n(584262),oe=()=>n(857783),ae=()=>n(187820),ie=()=>n(16006);const re=(0,i().YK)({parentPageLabel:{id:"topbar.connectionSection.parentPage.label",defaultMessage:"From"}});function se(e){const{parentBlockStore:t}=e,n=(0,F().K8)((()=>t.getIcon()),[t]),{isParentPageEmpty:a,iconRecordCategory:r}=(0,F().K8)((()=>({isParentPageEmpty:t.isEmptyPage(),iconRecordCategory:(0,ae().Te)(t)})),[t]),s=(0,te().v3)(),[c,l]=(0,o.useState)("transparent"),d=(0,Y().IS)((()=>({container:{display:"flex",alignItems:"center",justifyContent:"flex-start"},textWrapper:ee().A.isMobile?{fontSize:14,paddingInlineStart:4}:{fontSize:12,paddingInlineStart:4},linkButton:{display:"flex",alignItems:"center",padding:2,borderRadius:2,marginInlineStart:2,border:"none",cursor:"pointer",backgroundColor:c,color:D().Tj.text.primary,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},icon:{margin:"0px 2px"},linkButtonHover:{backgroundColor:D().Tj.selectLightGray[100]},linkButtonPressed:{backgroundColor:D().Tj.selectLightGray[200]}})),[c]);return(0,M.jsx)(h().u,{...e,title:(0,M.jsxs)("span",{style:d.container,children:[(0,M.jsx)(i().sA,{...re.parentPageLabel}),(0,M.jsxs)("button",{type:"button",style:d.linkButton,onClick:()=>{oe().uK({environment:s,store:t,pageVisitSource:ne().y8.LinkInPage})},onMouseEnter:()=>{l(d.linkButtonHover.backgroundColor)},onMouseLeave:()=>{l("transparent")},onMouseDown:()=>{l(d.linkButtonPressed.backgroundColor)},onMouseUp:()=>{l(d.linkButtonHover.backgroundColor)},children:[(0,M.jsx)(ae().B6,{disabled:!0,icon:n,isEmptyPage:a,size:12,style:d.icon,iconRecordCategory:r}),(0,M.jsx)(ie().A,{store:t})]})]}),textWrapperStyle:d.textWrapper})}var ce=()=>n(245720),le=()=>n(546926),de=()=>n(890492),ue=()=>n(636714);function me(e){const[t,n]=(0,o.useState)(""),[a,i]=(0,o.useState)(!1),r=(0,o.useCallback)((()=>{n(""),i(!1)}),[]);return{query:t,setQuery:n,userToggledToAddView:a,setUserToggledToAddView:i,resetMenuState:r,inActiveOnlyMode:!a&&e}}var ge=()=>n(662971);const pe=(0,o.forwardRef)((function(e,t){const{context:n,parent:a,isSharedDirectly:r,botStore:s,botPermissionSourcePage:c,originConnectionLabel:l,...d}=e,u=Boolean(s),m=(0,te().v3)(),g=(0,i().tz)(),p=(0,F().O$)(R().AppStoreSidebarSpaceStore),f=n.blocks[0],y=(0,F().K8)((()=>f.canAdmin()&&(null==p?void 0:p.canRead())),[f,p]),k=q((0,F().K8)((()=>s.getModel()),[s])),h=me(u),{resetMenuState:S}=h,A=!k.isInternal,w=k.createdBy?g.formatMessage(G.createdBy,{name:k.createdBy}):void 0,I=k.authorizedBy?g.formatMessage(G.authorizedBy,{name:k.authorizedBy}):void 0;return(0,o.createElement)(ge().A,{...d,style:{minWidth:350},key:s.id,onFocus:a.onFocus,focused:d.focused,openOnFocus:!1,ref:t,placementToOrigin:"left",renderOrigin:e=>(0,M.jsx)(b().A,{...e,title:l,titleStyle:{fontSize:"13px",fontWeight:500},caption:k.isInternal?w:I,captionStyle:{fontSize:"11px"},right:A?(0,M.jsx)(v().D,{styleKey:"captionSmRegular",colorVariant:"tertiary",children:(0,M.jsx)(i().sA,{...G.publicLabel})}):void 0,rightStyle:{alignSelf:"center",marginInlineEnd:"4px"},icon:(0,M.jsx)(H().A,{botStore:s,style:{position:"relative",width:"20px",height:"20px"}})}),renderExtension:(e,t)=>{let o;return o=m.device.isPhone?{menuType:le().gu.Modal,right:(0,M.jsx)(i().sA,{...ce().W.done}),onClickRight:()=>{S(),t.close()},...e}:{menuType:le().gu.Popup,onClickOutside:()=>{S(),t.close()},...e},(0,M.jsx)(de().A,{...o,children:(0,M.jsx)(ue().A,{context:n,initialFocus:0,onAccept:a.onAccept,sections:[fe({isSharedDirectly:r,botCapabilities:s.getCapabilities(),botPermissionSourcePage:c,intl:g}),...y?[ve({isSharedDirectly:r,botId:s.id,botName:s.getName()})]:[],...k.createdBy||k.authorizedBy?[ye({createdBy:k.createdBy,authorizedBy:k.authorizedBy})]:[]]})})}})}));function fe(e){const{isSharedDirectly:t,botCapabilities:n,botPermissionSourcePage:o,intl:i}=e,r=(0,P().MD)(n);return{key:"active connection capabilities section",render:e=>(0,M.jsx)(a().A,{...e,topBorder:!1}),actions:[...t?[]:[Mt(o)],{key:"capabilities",displayName:i.formatMessage(G.capabilitiesLabel),analyticsName:"capabilities",searchName:i.formatMessage(G.capabilitiesLabel),closeParentMenu:!1,action:()=>{},render:e=>{const t=(0,Q().I2)(r);return(0,M.jsx)(k().Ay,{...e,title:(0,M.jsx)(v().D,{styleKey:"captionMedium",colorVariant:"secondary",children:i.formatMessage(G.capabilitiesLabel)}),shouldWrapCaption:!0,style:{paddingInlineStart:12,paddingInlineEnd:12,paddingTop:4,paddingBottom:4},captionStyle:{marginTop:4},caption:(0,M.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:t})})}}]}}function ve(e){const{botId:t,botName:n,isSharedDirectly:o}=e;return{key:"active connection disconnect section",render:e=>(0,M.jsx)(a().A,{...e,topBorderExtendToEdge:!0}),actions:[wt(t,n,o)]}}function ye(e){const{createdBy:t,authorizedBy:n}=e;return{key:"active connection metadata section",render:e=>(0,M.jsx)(a().A,{...e,topBorderExtendToEdge:!0}),actions:[{key:"created by",displayName:t||"",analyticsName:"created_by_label",searchName:G.createdBy.defaultMessage,closeParentMenu:!0,render:()=>(0,M.jsxs)("div",{style:{width:175,display:"flex",flexDirection:"column",alignItems:"start",padding:"8px",gap:4},children:[t?(0,M.jsx)(v().D,{styleKey:"captionRegular",colorVariant:"secondary",children:(0,M.jsx)(i().sA,{...G.createdBy,values:{name:t}})}):void 0,n?(0,M.jsx)(v().D,{styleKey:"captionRegular",colorVariant:"secondary",children:(0,M.jsx)(i().sA,{...G.authorizedBy,values:{name:n}})}):void 0]}),action:()=>{}}]}}n(16280),n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(581454);var be=()=>n(876338),ke=()=>n(792071),he=()=>n(45331),Se=()=>n(534177);function Ae(e){(0,n(314529).DO_NOT_USE_trackLegacy)(e,"open_more_connections_menu")}var Me=()=>n(163580),we=()=>n(511393),Ie=()=>n(106628),Ne=()=>n(882462);const xe=(0,o.forwardRef)((function(e,t){const{context:r,parent:s,alreadyConnectedIntegrationIds:c,alreadyConnectedBotIds:l,originButtonLabel:d,connectedActionsToShow:u,...m}=e,g=r.blocks[0],p=(0,te().v3)(),f=(0,i().tz)(),y=(0,n(792485).S)(),b=(0,F().K8)((()=>(0,be().$)(y)),[y]),k=(0,F().K8)((()=>null==b?void 0:b.getBotSettingsStore().getValue()),[b]),h=(0,o.useMemo)((()=>null!=k&&k.integration_restrictions&&null!=k&&k.integration_approval_statuses?Object.keys(k.integration_approval_statuses):[]),[k]),S=((null==u?void 0:u.length)??0)>0,{query:w,setQuery:I,userToggledToAddView:x,setUserToggledToAddView:C,resetMenuState:_}=me(S),[L,P]=(0,o.useState)({status:"loading"}),B=(0,n(79926).fJ)(Ie().T.searchActions),V=(0,Y().IS)((()=>({rightStyle:{color:D().Tj.text.tertiary,marginInlineEnd:5},botCapabilitiesListContainer:{display:"flex",alignItems:"start",flexDirection:"column",fontSize:n(284371).J.UISmall.desktop},botCapabilitiesList:{display:"flex",flexDirection:"column",border:`1px solid ${D().Tj.border.secondary}`,padding:14,width:"100%",borderRadius:8},botCapabilitiesListTitle:{color:D().Tj.text.secondary,marginBottom:6},dialogIconStyle:{height:A().Ev.xl,width:A().Ev.xl},connectBotDescription:{marginTop:8,color:D().Tj.text.secondary},backArrowStyle:{fill:D().Tj.text.tertiary,height:16,width:16,fontWeight:510}})),[]),[z,O]=(0,n(791177).$)();return(0,o.useEffect)((()=>{if("resolved"!==B.status)return;const e=B.value;const{currentUserRootStore:t}=R().default.state;Promise.all([async function(t){return await e.searchSpaceBots({environment:p,query:t})}(w),async function(e){const t=await Ie().T.searchActions.load();return await t.searchInstallableIntegrations({query:e,environment:p,spaceId:null==b?void 0:b.id,botSettings:k})}(w)]).then((([e,o])=>{const a=new Set,i=function(e){const{alreadyConnectedBotIds:t,alreadyConnectedIntegrationIds:n,botValues:o,environment:a}=e,i=[],{currentUserRootStore:r}=R().default.state;if(!r)throw new Error("currentUserStore not defined");for(const s of o){const e=s.id;let o=!Boolean(s.integration_id);if(s.integration_id){const e=(0,U().v3)(r,{id:s.integration_id,table:E().Li}).getKeyStore("type").getValue();(0,E().SF)(e?{type:e}:void 0)&&(o=!0)}const c=t.has(e)||s.integration_id&&!o&&n.has(s.integration_id),l=ke().Bj6.fromValue(j().GP,s),d=(0,Me().VT)(a,l)||(0,we().h)(a)&&(0,Me().b0)(l);!c&&d&&i.push(s)}return i}({alreadyConnectedBotIds:l,alreadyConnectedIntegrationIds:c,botValues:e,environment:p}).filter((e=>!(0,he().Y)(e.integration_id))).map((e=>{if(e.integration_id&&t){const n=(0,U().v3)(t,{id:e.integration_id,table:E().Li}).getKeyStore("type").getValue();ke().Bj6.fromValue(j().GP,e).isInternalBot(n?{type:n}:void 0)&&a.add(e.integration_id)}return{table:j().GP,value:e}}));let r=o.map((e=>{if(b){const t=n(93676).C.createChildStore(b,{id:e,table:E().Li}),o=t.computeWithRecordValues((({getRecordValueAndSubscribe:e})=>e(t)));if(o&&!(0,T().v_)(o))return{table:E().Li,value:o}}})).filter(Se().O9).filter((e=>!(a.has(e.value.id)||c.has(e.value.id)))).filter((e=>!(0,he().Y)(e.value.id)));if(T().Gk.name.toLowerCase().includes(w.toLowerCase())){const e={table:"legacy_integration",value:T().Gk};r=[...r,e]}const s=[...i,...r].sort(((e,t)=>{var n,o;const a=null===(n=e.value.name)||void 0===n?void 0:n.toLowerCase(),i=null===(o=t.value.name)||void 0===o?void 0:o.toLowerCase();return a&&i?a<i?-1:a>i?1:0:0}));P({results:s,status:"ready"})})).catch((()=>P({status:"error"})))}),[w,b,l,k,h,p,c,g,B.status,B.value]),(0,M.jsx)(ge().A,{...m,renderOrigin:(e,t)=>(0,M.jsx)(Z().A,{...e,ref:t,title:d,svg:N().squareGrid2X2Icon}),renderExtension:(e,t)=>{const o=ee().A.isMobile?{menuType:le().gu.Modal,right:(0,M.jsx)(i().sA,{...ce().W.done}),onClickRight:()=>{_(),t.close()},onCancel:()=>{_(),t.close()},...e}:{menuType:le().gu.Popup,onClickOutside:()=>{_(),t.close},...e},s=ee().A.isMobile?{menuType:le().gu.Modal,topbarStyle:{height:0},onCancel:()=>{_(),t.close}}:{menuType:le().gu.Popup,maxHeight:"16vh",onClickOutside:()=>{_(),t.close},...e},d=Boolean(g.canAdmin()&&(null==b?void 0:b.canRead()));let m=[];const k={key:"add connection row",displayName:f.formatMessage(G.addConnectionLabel),analyticsName:"add_connection_row",searchName:f.formatMessage(G.addConnectionLabel),closeParentMenu:!1,action:()=>{C(!0)},render:e=>(0,M.jsx)(Z().A,{...e,title:f.formatMessage(G.addConnectionLabel),svg:n(617668).plusIcon,svgStyle:{height:A().Ev.xs,width:A().Ev.xs}})};if(!x&&S)m=[Le(u||[],f),{key:"add connection row section",render:e=>(0,M.jsx)(a().A,{...e}),actions:[k]}],m.push(_e({canAdminAndIsMember:d,slackValue:T().Gk,pageContext:y}));else{if(S){const e={key:"back row",displayName:f.formatMessage(G.addConnectionLabel),analyticsName:"back_button",searchName:"back row",closeParentMenu:!1,action:()=>{C(!1),I("")},render:e=>(0,M.jsx)(Z().A,{...e,title:(0,M.jsx)(v().D,{styleKey:"bodySemibold",colorVariant:"primary",children:f.formatMessage(G.addConnectionLabel)}),svg:n(526278).arrowStraightLeftIcon,svgStyle:V.backArrowStyle})};m=[{key:"back row section",render:e=>(0,M.jsx)(a().A,{...e,topBorder:!1}),actions:[e]}]}d&&(m.push(function({query:e,setQuery:t,inputComboboxProps:n}){return{key:"search connections section",render:e=>(0,M.jsx)(a().A,{style:{width:350},...e,isInput:!0,topBorder:!1}),actions:[ft(e,t,n)]}}({query:w,setQuery:I,inputComboboxProps:z})),""===w?m.push(function(e){const{searchResults:t,resultsMenuProps:n,styles:o,onClose:a,intl:i,hasExistingConnections:r,pageContext:s}=e,c=new Set,l="ready"===t.status?t.results.map((e=>"bot"===e.table?(e.value.integration_id&&c.add(e.value.integration_id),bt(e.value,o,a)):xt(e)?(0,Ne().Qi)({spaceStore:(0,be().$)(s)})&&!(0,Ne().yP)()?void 0:ht(e.value):kt(e.value,a))).filter(Se().O9):"loading"===t.status?[pt()]:[vt()];return{key:"search initial connections section",render:e=>(0,M.jsx)(Ce,{...e,resultsMenuProps:n}),title:r?void 0:i.formatMessage(G.notConnectedLabel),actions:[...l]}}({searchResults:L,resultsMenuProps:s,styles:V,onClose:()=>_(),intl:f,hasExistingConnections:l.size+c.size>0,pageContext:y})):m.push(function(e){const{searchResults:t,resultsMenuProps:n,styles:o,onClose:a,pageContext:i}=e;let r;r="error"===t.status?[vt()]:"loading"===t.status?[pt()]:"ready"===t.status&&t.results.length>0?t.results.map((e=>e.table===j().GP?bt(e.value,o,a):xt(e)?(0,Ne().Qi)({spaceStore:(0,be().$)(i)})&&!(0,Ne().yP)()?void 0:ht(e.value):kt(e.value,a))).filter(Se().O9):[yt()];return{key:"connections search results",render:e=>(0,M.jsx)(Ce,{...e,resultsMenuProps:n}),actions:r}}({searchResults:L,resultsMenuProps:s,styles:V,onClose:()=>_(),pageContext:y}))),m.push(_e({canAdminAndIsMember:d,slackValue:T().Gk,includeDeveloperLink:!0,pageContext:y}))}return(0,M.jsx)(de().A,{...o,onClick:e=>{e.stopPropagation()},children:(0,M.jsx)(ue().A,{initialFocus:0,context:r,onAccept:e=>{Ae(p),e.closeParentMenu&&(t.close(),_())},comboboxProps:d?O:void 0,sections:m,resetFocusOnMouseOut:!0})})},onFocus:s.onFocus,focused:m.focused,openOnFocus:!0,ref:t,right:c.size+l.size>0?c.size+l.size:f.formatMessage(G.noConnectionsLabel),rightStyle:V.rightStyle})}));function Ce(e){const{resultsMenuProps:t,...n}=e,i=(0,o.useRef)(null),r=(0,o.useCallback)((()=>{var e;const t=null===(e=i.current)||void 0===e||null===(e=e.querySelector('[role="menuitem"]'))||void 0===e?void 0:e.clientHeight,n=window.innerHeight<600?3:7;i.current&&t&&(i.current.style.maxHeight=n*t+.5*t+"px")}),[]);return(0,o.useEffect)((()=>(r(),window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)})),[r]),(0,M.jsx)(de().A,{...t,innerRef:i,children:(0,M.jsx)(a().A,{...n,isInput:!0,topBorder:!1,style:{margin:0,paddingTop:0,paddingBottom:0}})})}function _e({canAdminAndIsMember:e,slackValue:t,includeDeveloperLink:o,pageContext:r}){const s=(0,Ne().Qi)({spaceStore:(0,be().$)(r)}),l=!(0,Ne().Qi)({spaceStore:(0,be().$)(r)})||(0,Ne().yP)(),d={key:"develop manage integrations",displayName:"Develop or manage integrations",analyticsName:"develop_manage_integrations",searchName:"develop manage integrations",closeParentMenu:!0,action:({environment:e})=>{n(559926).yQ(e,{from:"topbar_connections_menu",href:_().JZ.creatorProfileIntegrations}),window.open(_().JZ.creatorProfileIntegrations,"_blank")},render:e=>(0,M.jsx)(n(552712).N,{...e,href:_().JZ.creatorProfileIntegrations,external:!0,children:(0,M.jsx)(n(631524).p,{iconLeading:{icon:n(955363).arrowDiagonalUpRightIcon,size:"default"},style:{width:"100%"},children:(0,M.jsx)(v().D,{styleKey:"bodyRegular",children:(0,M.jsx)(i().sA,{id:"topbarMoreConnections.developManage",defaultMessage:"Develop integration"})})})})};return{key:"manage connections section",render:e=>(0,M.jsx)(a().A,{...e}),actions:[...!s&&l?[ht(t)]:[],{key:"manage connections",displayName:c().A.formatMessage(mt.manageConnectionsLabel),analyticsName:mt.manageConnectionsLabel.defaultMessage,searchName:mt.manageConnectionsLabel.defaultMessage,closeParentMenu:!0,validators:[De().s,Pe().p,(0,qe().A)(je().F)],render:(e,t,n)=>(0,M.jsx)(Z().A,{...e,title:c().A.formatMessage(mt.manageConnectionsLabel),svg:S().gearIcon}),action:e=>{ut().Ow({currentTab:"connected_apps",openedFrom:"topbar"})}},...o?[d]:[]]}}function Le(e,t){return{key:"existing connections section",title:t.formatMessage(G.activeConnectionsLabel),render:e=>(0,M.jsx)(a().A,{style:{maxHeight:300,overflowY:"auto"},...e}),actions:[...e]}}var Te=()=>n(574357),Pe=()=>n(158658),Be=()=>n(339425),je=()=>n(775584),Ve=()=>n(918871),De=()=>n(946561),Re=()=>n(364859);n(18107),n(967357);function Fe({blocks:e}){var t;const n=e.at(0);if(!n)return!1;const{slackIntegrationStore:o}=(0,Ne().x2)(n);return Boolean(o.isReady()&&!(null!=o&&null!==(t=o.getKeyStore("enabled"))&&void 0!==t&&t.getValue()))}var Ue=()=>n(322769);function ze(){var e;const{sidebarSpaceStore:t}=R().default.state,n=null==t||null===(e=t.getBotSettingsStore())||void 0===e?void 0:e.getValue();return!(0,Ue().az)(n)||Boolean((null==n?void 0:n.integration_approval_statuses)&&n.integration_approval_statuses[T().Jc])}function Ee({blocks:e}){var t;const n=e.at(0);if(!n)return!1;const{blockStore:o,slackIntegrationStore:a}=(0,Ne().x2)(n);return Boolean(a.isReady()&&(null==a||null===(t=a.getKeyStore("enabled"))||void 0===t?void 0:t.getValue())&&o.id!==n.id)}function Oe({blocks:e}){var t;const n=e.at(0);if(!n)return!1;const{blockStore:o,slackIntegrationStore:a}=(0,Ne().x2)(n);return Boolean(a.isReady()&&(null==a||null===(t=a.getKeyStore("enabled"))||void 0===t?void 0:t.getValue())&&o.id===n.id)}function Ke({blocks:e}){var t;const n=e.at(0);return!!n&&Boolean(null===(t=(0,Ne().x2)(n))||void 0===t||null===(t=t.slackIntegrationStore)||void 0===t?void 0:t.isReady())}var qe=()=>n(598101),Ye=()=>n(752860),We=()=>n(547149),He=()=>n(836095),Ge=()=>n(651784),Xe=()=>n(898563),$e=()=>n(61958),Qe=()=>n(384944),Ze=()=>n(725951),Je=()=>n(165529);const et=(0,i().YK)({somethingWentWrong:{defaultMessage:"Something went wrong.",id:"slackActions.dialogError.loginWithSlack.errorMessage"},titleMessage:{defaultMessage:"Slack login",id:"slackActions.loginPopupModal.title"},removeIntegrationMessage:{id:"slackIntegrationButton.removeIntegrationConfirmationDialog.prompt",defaultMessage:"Are you sure you want to remove Slack integration?"},removeIntegrationConfirmationLabel:{id:"slackIntegrationButton.removeIntegrationConfirmationDialog.removeButton.label",defaultMessage:"Remove"}});async function tt({environment:e,blockId:t,intl:n}){Xe().FY(e),await async function(e){const{environment:t,blockId:n,intl:o}=e,a=(0,Ze().LX)(t);let i=(0,Ge().Hs)(ee().A.domainBaseUrl,{blockId:n,authType:a,userId:t.currentUser.id});if(i=a.redirectToAuth?i:await(0,Ze().YN)(t,i),t.device.isElectron)return void(0,He().P)(i);const r=await $e().P(t,{width:530,height:530,url:i,titleMessage:et.titleMessage});if(!r)return void l().f1(o.formatMessage(et.somethingWentWrong));const s=(0,Ge().parseRoute)({url:r,isMobile:ee().A.isMobile,baseUrl:ee().A.domainBaseUrl,publicDomainName:ee().A.publicDomainName,protocol:ee().A.protocol,currentUrl:window.location.href});"slackAuthCallback"===s.name&&(0,Je().K)({route:s,environment:t})}({environment:e,blockId:t,intl:n})}var nt=()=>n(148307),ot=()=>n(888382),at=()=>n(103448);function it(e){return(0,F().K8)((()=>{var t;return{isDefined:e.isDefined(),channel:null===(t=e.getKeyStore("channel").getValue())||void 0===t?void 0:t.replace(/^#/,"")}}),[e])}function rt(){return(0,M.jsx)(at().A,{imageURL:nt().A.images.tooltips.pageUpdates.slackPng,imageHeight:100,caption:(0,M.jsx)(i().sA,{defaultMessage:"Connect a Slack channel to get updates about this page and pages within it.",id:"topbar.updatesButton.slackIntegrationButton.tooltip"})})}function st(){return(0,M.jsx)(at().A,{imageURL:nt().A.images.tooltips.pageUpdates.slackPng,imageHeight:100,caption:(0,M.jsx)(i().sA,{defaultMessage:"Disconnect a Slack channel to stop getting updates about this page and pages within it.",id:"topbar.updatesButton.slackIntegrationButton.disconnectTooltip"})})}const ct=(0,o.forwardRef)((function(e,t){const{blockStore:o,...a}=e,{blockStore:s,slackIntegrationStore:c}=(0,Ne().x2)(o),{isDefined:l,channel:d}=it(c),u=(0,F().K8)((()=>(0,n(492414).Ay)({store:s,pageVisitSource:ne().y8.LinkInPage})),[s]);return l?(0,M.jsx)(y().m,{placement:"left",render:e=>(0,M.jsx)(Z().A,{...(0,r().A)(e,a),svg:ot().slackIcon,title:d,caption:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(i().sA,{defaultMessage:"Based on",id:"topbar.updatesButton.slackIntegrationButton.activeTitle"})," ",(0,M.jsx)(n(416783).V,{href:u,children:(0,M.jsx)(ie().A,{store:s,style:{display:"inline"}})})]}),ref:t}),renderTooltip:st}):null})),lt=(0,o.forwardRef)((function(e,t){const{blockStore:n,...o}=e,a=(0,F().K8)((()=>(0,Ne().x2)(n).slackIntegrationStore),[n]),{isDefined:s,channel:c}=it(a);return s?(0,M.jsx)(y().m,{placement:"left",render:e=>(0,M.jsx)(Z().A,{ref:t,svg:ot().slackIcon,title:c,caption:(0,M.jsx)(i().sA,{defaultMessage:"Connected to Slack channel",id:"topbar.updatesButton.slackIntegrationButton.connectedCaption"}),...(0,r().A)(e,o)}),renderTooltip:st}):null}));var dt=()=>n(908928),ut=()=>n(209660);const mt=(0,i().YK)({connectionLoadingLabel:{id:"topbar.connectionsSection.connectionLoading.label",defaultMessage:"Connections loading…"},connectionSearchPlaceholderLabel:{id:"topbar.connectionsSection.topbarMoreConnectionsSubMenu.label",defaultMessage:"Search for connections..."},connectionSearchErrorLabel:{id:"topbar.connectionsSection.connectionSearchError.label",defaultMessage:"Something went wrong"},connectionNoSearchResultsLabel:{id:"topbar.connectionsSection.noSearchResults.label",defaultMessage:"No results"},connectionSearchResultLabel:{id:"topbar.connectionsSection.connectionSearchResult.label",defaultMessage:"{name}"},slackEmptyLabel:{id:"topbar.connectionSection.slackEmpty.label",defaultMessage:"Slack"},slackConnectedLabel:{id:"topbar.connectionSection.slackConnected.label",defaultMessage:"Connected to Slack channel"},manageConnectionsLabel:{id:"topbar.connectionsSection.manageConnections.label",defaultMessage:"Manage connections"},connectionsLabel:{id:"topbar.connectionsSection.connections.label",defaultMessage:"Connections"},fromParentPageLabel:{id:"topbar.connectionsSection.fromParenPage.label",defaultMessage:"From"},capabilitiesLabel:{id:"topbar.connectionsSection.capabilities.label",defaultMessage:"Capabilities"},disconnectLabel:{id:"topbar.connectionSection.disconnectIntegration.label",defaultMessage:"Disconnect"},disconnectConfirmationLabel:{id:"topbar.connectionSection.disconnectIntegrationConfirmation.label",defaultMessage:"Remove {botName}"},restrictionLabel:{id:"topbar.connectionSection.restrictIntegration.label",defaultMessage:"Restrict"},restrictionConfirmationLabel:{id:"topbar.connectionSection.restrictIntegrationConfirmation.label",defaultMessage:"Are you sure you want to remove this permission and restrict access? This page will no longer share settings from the parent page."},restrictionAcceptLabel:{id:"topbar.connectionSection.restrictAccept.label",defaultMessage:"Restrict access"},connectionLabel:{id:"topbar.connectionSection.connectionIntegration.label",defaultMessage:"{connectionName}"},connectionBotConfirmLabel:{id:"topbar.connectionSection.connectBotConfirmation.label",defaultMessage:"Connect {botName} to this page"},connectionIntegrationConfirmlabel:{id:"topbar.connectionSection.connectIntegrationConfirmation.label",defaultMessage:"{integrationName} is developed by a third party partner and you will be redirected outside of Notion to authorize this connection. Continue?"},botCapabilitiesLabel:{id:"topbar.connectionSection.botCapabilities.label",defaultMessage:"Integration capabilities"},connectionBotConfirmDescription:{id:"topbar.connectionSection.connectionBotConfirmDescription.label",defaultMessage:"This integration will have the following access to this page and all its child pages"},disconnectConfirmationDescription:{id:"topbar.connectionSection.disconnectConfirmationDescription.label",defaultMessage:"This action will remove {botName} from the page. Do you want to continue?"},connectBotAccessRestricted:{id:"topbar.connectionSection.botAccessRestricted.connect.tooltip",defaultMessage:"You can’t connect {botName} to this page. Please ask a workspace owner to enable it."},disconnectBotAccessRestricted:{id:"topbar.connectionSection.botAccessRestricted.disconnect.tooltip",defaultMessage:"You can’t disconnect {botName} from this page. Please ask a workspace owner to disable it."}}),gt=(0,qe().A)((0,Te().U)([je().F,(0,qe().A)((0,Te().U)([n(77295).K,Pe().p]))]));function pt(){return{key:"connections loading",displayName:c().A.formatMessage(mt.connectionLoadingLabel),analyticsName:mt.connectionLoadingLabel.defaultMessage,searchName:mt.connectionLoadingLabel.defaultMessage,closeParentMenu:!1,validators:[De().s,Pe().p,gt],render:e=>(0,M.jsx)(k().Ay,{...e,icon:(0,M.jsx)(f().k,{}),title:c().A.formatMessage(mt.connectionLoadingLabel)}),action:()=>{}}}function ft(e,t,n){return{key:"search connections input",analyticsName:mt.connectionSearchPlaceholderLabel.defaultMessage,displayName:c().A.formatMessage(mt.connectionSearchPlaceholderLabel),searchName:mt.connectionSearchPlaceholderLabel.defaultMessage,closeParentMenu:!1,validators:[De().s,Pe().p,gt],render:()=>(0,M.jsx)(J().Ay,{value:e,onChange:e=>t(e.target.value),placeholder:c().A.formatMessage(mt.connectionSearchPlaceholderLabel),focus:!0,...n}),action:()=>{}}}function vt(){return{key:"connections search error",displayName:c().A.formatMessage(mt.connectionSearchErrorLabel),analyticsName:mt.connectionSearchErrorLabel.defaultMessage,searchName:mt.connectionSearchErrorLabel.defaultMessage,closeParentMenu:!1,validators:[De().s,Pe().p,gt],render:e=>(0,M.jsx)(h().u,{title:c().A.formatMessage(mt.connectionSearchErrorLabel)}),action:()=>{}}}function yt(){return{key:"connections search error",displayName:c().A.formatMessage(mt.connectionNoSearchResultsLabel),analyticsName:mt.connectionNoSearchResultsLabel.defaultMessage,searchName:mt.connectionNoSearchResultsLabel.defaultMessage,closeParentMenu:!1,validators:[De().s,Pe().p,gt],render:e=>(0,M.jsx)(h().u,{title:c().A.formatMessage(mt.connectionNoSearchResultsLabel)}),action:()=>{}}}function bt(e,t,n){const{id:o,name:a}=e,r=c().A.formatMessage(mt.connectionSearchResultLabel,{name:a});return{key:`${o}`,displayName:r,analyticsName:r,searchName:a,closeParentMenu:!1,validators:[De().s,Pe().p,gt],render:(t,n,o)=>{const{canUserModifyPageAccess:a,tooltipText:i}=Nt(n,e.id,e.name,"connect");return(0,M.jsx)($,{...t,bot:e,focused:t.focused,ref:t.ref,tooltipText:i,...a?{disabled:!1}:{disabled:!0,textWrapperStyle:{color:D().oZ.lightTextColor},desktopIconStyle:{fill:D().oZ.lightIconColor},mobileIconStyle:{fill:D().oZ.lightIconColor}}})},action:async o=>{await async function(e,t,n,o,a){const r=[...(0,Q().I2)((0,P().MD)(n.capabilities))],{accept:s}=await l().Gh({icon:(0,M.jsx)(p().I,{icon:N().squareGrid2X2Icon,style:o.dialogIconStyle}),message:(0,M.jsxs)(g().Y1,{gap:24,direction:"vertical",style:{marginBottom:16},children:[(0,M.jsxs)("div",{children:[(0,M.jsx)(v().D,{styleKey:"titleSmSemibold",children:(0,M.jsx)(i().sA,{...mt.connectionBotConfirmLabel,values:{botName:n.name}})}),(0,M.jsx)(v().D,{styleKey:"bodyRegular",style:o.connectBotDescription,children:c().A.formatMessage(mt.connectionBotConfirmDescription)})]}),(0,M.jsx)("div",{children:(0,M.jsxs)("div",{style:o.botCapabilitiesListContainer,children:[(0,M.jsx)(v().D,{styleKey:"captionMedium",style:o.botCapabilitiesListTitle,children:c().A.formatMessage(mt.botCapabilitiesLabel)}),(0,M.jsx)("div",{style:o.botCapabilitiesList,children:(0,M.jsx)(g().Y1,{gap:10,direction:"vertical",children:r})})]})})]}),acceptColor:"blue",mode:"wide"});s&&dt().sK({botValue:n,store:e,environment:t});a&&a();return{accept:s}}(o.blocks[0],o.environment,e,t),n()}}}function kt(e,t){const{id:n,name:o,info:a}=e,i=c().A.formatMessage(mt.connectionLabel,{connectionName:o});return{key:`${n}`,displayName:i,analyticsName:i,searchName:o,closeParentMenu:!1,validators:[De().s,Pe().p,gt,(0,qe().A)(je().F)],render:(e,t,n)=>(0,M.jsx)(b().A,{...e,title:i,icon:(0,M.jsx)("img",{src:a.icon,style:{width:18,height:"auto"},ref:e.ref})}),action:async t=>{e.id!==T().Jc&&await async function(e,t){const{id:n,name:o}=e,{accept:a}=await l().Gh({message:c().A.formatMessage(mt.connectionIntegrationConfirmlabel,{integrationName:o})}),i=function(e,t){if(!(0,x().uj)(e))return`${_().JZ.integrations}/${e}`;const n=L(e,void 0===t?"":t);return`${_().JZ.integrations}/${n}`}(n,o);a&&(0,Ye().L)({environment:t,url:i,targetSelf:!1})}(e,t.environment)}}}function ht(e){const t=c().A.formatMessage(mt.slackEmptyLabel);return{key:"slack empty",displayName:t,analyticsName:mt.slackEmptyLabel.defaultMessage,searchName:t,closeParentMenu:!1,validators:[De().s,Pe().p,ze,Ke,Fe,(0,qe().A)(Ve().w)],render:(n,o,a)=>(0,M.jsx)(y().m,{placement:"left",render:o=>(0,M.jsx)(b().A,{...(0,r().A)(o,n),title:t,icon:(0,M.jsx)("img",{src:e.info.icon,style:{height:18}})}),renderTooltip:rt}),action:async e=>{var t;await tt({environment:e.environment,blockId:null===(t=e.blocks)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.id,intl:c().A.getIntl()})}}}function St(){const e=c().A.formatMessage(mt.slackConnectedLabel);return{key:"slack connected inherited",displayName:e,analyticsName:mt.slackConnectedLabel.defaultMessage,searchName:e,closeParentMenu:!0,validators:[De().s,Pe().p,Ee,(0,qe().A)(Ve().w)],render:(e,t,n)=>(0,M.jsx)(ct,{blockStore:t.blocks[0],...e}),action:()=>{}}}function At(){const e=c().A.formatMessage(mt.slackConnectedLabel);return{key:"slack connected on block",displayName:e,analyticsName:mt.slackConnectedLabel.defaultMessage,searchName:e,closeParentMenu:!0,validators:[De().s,Pe().p,Oe,(0,qe().A)(Ve().w)],render:(e,t,n)=>(0,M.jsx)(lt,{blockStore:t.blocks[0],...e}),action:e=>{const{slackIntegrationStore:t}=(0,Ne().x2)(e.blocks[0]);!function(e,t,n){l().ui({message:n.formatMessage(et.removeIntegrationMessage),showCancel:!0,keepFocus:!0,items:[{label:n.formatMessage(et.removeIntegrationConfirmationLabel),color:"red",onAccept:()=>{Xe().oI(e),We().createAndCommit({userAction:"slackActions.handleRemoveSlackIntegration",environment:e,canUndo:!0,perform:e=>{Qe().zv({store:t,data:{enabled:!1},transaction:e})}})}}]})}(e.environment,t,c().A.getIntl())}}}function Mt(e){const t=c().A.formatMessage(mt.fromParentPageLabel);return{key:"from parent page",displayName:t,analyticsName:t,searchName:t,closeParentMenu:!1,validators:[De().s,Pe().p],action:()=>{},render:(t,{blocks:n})=>{const o=n[0],a=d().B.createChildStore(o,{table:B().ev,id:e.blockId});return(0,M.jsx)(se,{...t,parentBlockStore:a})}}}function wt(e,t,n){const o=c().A.formatMessage(mt.disconnectLabel);return{key:"disconnect integration",displayName:o,analyticsName:o,searchName:mt.disconnectLabel.defaultMessage,closeParentMenu:!1,validators:[De().s,Pe().p],action:async({blocks:o,environment:a})=>{const i=o[0];await async function(e,t,n,o,a){if(a){const{accept:a}=await l().Gh({message:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(v().D,{styleKey:"titleSmSemibold",children:c().A.formatMessage(mt.disconnectConfirmationLabel,{botName:o})}),(0,M.jsx)(v().D,{styleKey:"bodyRegular",colorVariant:"secondary",style:{marginTop:8},children:c().A.formatMessage(mt.disconnectConfirmationDescription,{botName:o})})]})});a&&dt().oG({botId:n,store:e,environment:t})}else await dt().Q0({botId:n,botName:o,store:e,environment:t})}(i,a,e,t,n)},render:(n,a)=>{const{canUserModifyPageAccess:i,tooltipText:r}=Nt(a,e,t,"disconnect");return(0,M.jsx)(Z().A,{...n,svg:I,title:o,tooltipText:r,...i?{disabled:!1}:{disabled:!0,textWrapperStyle:{color:D().oZ.lightTextColor},svgCustomFill:()=>D().Tj.icon.secondary}})}}}function It(e){const{botStore:t,botPermissionSourcePage:n}=e,{id:o}=t,a=t.getName(),i=c().A.formatMessage(mt.connectionLabel,{connectionName:a});return{key:`${o}`,displayName:i,analyticsName:i,searchName:i,closeParentMenu:!1,validators:[De().s,Pe().p,(0,qe().A)(Be().o)],action:()=>{},render:(e,o,a)=>{const r=o.blocks[0].id===n.blockId;return(0,M.jsx)(pe,{...e,context:o,parent:a,isSharedDirectly:r,botStore:t,botPermissionSourcePage:n,originConnectionLabel:i})}}}function Nt(e,t,n,o){let a=e.blocks[0].getSpaceStore();if(!a){const t=e.blocks[0],n=t.getSpaceId();n&&(a=m().SpaceStore.createChildStore(t,{table:V().NX,id:n}))}let i=(0,s().RV)();if(a){i=u().v.createChildStore(a,{table:j().GP,id:t,spaceId:a.id}).getIntegrationManagementPermissions()}const r=i.userCanModifyPageAccess;return{canUserModifyPageAccess:r,tooltipText:r?void 0:c().A.formatMessage("connect"===o?mt.connectBotAccessRestricted:mt.disconnectBotAccessRestricted,{botName:n||"this integration"})}}function xt(e){return"legacy_integration"===e.table&&e.value.id===T().Gk.id}n(823215);var Ct=()=>n(755531),_t=()=>n(68263),Lt=()=>n(310001),Tt=()=>n(499764);function Pt(e){const t=function(e){var t;const n=e.blocks[0],o=(0,Tt().i0)(n).filter((e=>(0,_t().P3)(e.permissionItem)?(e.permissionItem,!0):(e.permissionItem,!1)));if(0===o.length)return{status:"no bots"};const a=new Map,i=null===(t=(0,Ct().S)())||void 0===t?void 0:t.id,r=o.filter((({permissionItem:e})=>(0,x().uj)(e.bot_id))).map((({from:e,permissionItem:t})=>{const o=u().v.createChildStore(n,{table:j().GP,id:t.bot_id,spaceId:i});if("block"===e.table&&!(0,he().Y)(o.getIntegrationId()))return a.set(t.bot_id,e),o})).filter(Se().O9);if(!r.every((e=>e.isReady())))return{status:"loading"};const s=r.filter((t=>t.isDefined()&&Boolean((0,Me().VT)(e.environment,t.getModel()))));if((0,we().h)(e.environment)){const e=s.map((e=>e.getIntegrationId())),t=new Set(e),n=r.filter((e=>!(!e.isDefined()||t.has(e.getIntegrationId())||!Boolean((0,Me().b0)(e.getModel()))||(t.add(e.getIntegrationId()),0))));s.push(...n)}return{status:"ready",botStores:s,botIdToSharedPageIds:a}}(e),{alreadyConnectedBotIds:n,alreadyConnectedIntegrationIds:o,botActionsState:a}=function(e){const{status:t}=e;if("no bots"===t||"loading"===t)return{botActionsState:e,alreadyConnectedIntegrationIds:new Set,alreadyConnectedBotIds:new Set};const{botStores:n,botIdToSharedPageIds:o}=e,a=(0,Lt().R7)(n),i=new Set,r=new Array;for(const s of n.filter(Se().O9)){const e=o.get(s.id);if(!e)continue;const t=It({botStore:s,botPermissionSourcePage:e});r.push(t);const n=s.getIntegrationId();n&&a.has(n)||i.add(s.id)}return{alreadyConnectedIntegrationIds:a,alreadyConnectedBotIds:i,botActionsState:{status:"ready",botActions:r}}}(t),i=function(e,t,n){const o=mt.connectionsLabel,a=c().A.formatMessage(o),i="ready"===(null==n?void 0:n.status)?n.botActions:[];return{key:"add connections action",displayName:a,analyticsName:o.defaultMessage,searchName:o.defaultMessage,closeParentMenu:!1,validators:[De().s,Pe().p,gt,(0,qe().A)(Be().o),(0,qe().A)(Re().q)],action:()=>{},render:(n,o,r)=>(0,M.jsx)(xe,{...n,context:o,parent:r,alreadyConnectedIntegrationIds:e,alreadyConnectedBotIds:t,originButtonLabel:a,connectedActionsToShow:i})}}(o,n,a);return"loading"===a.status?{loadingAction:[pt()],connectedActions:[],searchSubMenu:i}:{loadingAction:[],connectedActions:[],searchSubMenu:i}}const Bt=(0,i().YK)({copyPublicApiObject:{id:"action.copyPublicApiObject",defaultMessage:"Copy API object (Dev)"}}),jt=(0,n(267271).Ls)({key:"copy public API object",displayName:Bt.copyPublicApiObject,analyticsName:Bt.copyPublicApiObject.defaultMessage,validators:[n(440902).v,(0,n(963335).S)("public_api_dev_mode")],closeParentMenu:!1,svg:n(536583).d,action:async({environment:e,blocks:t})=>{const o=await n(769864).callApi({eventName:"getPublicApiObject",environment:e,data:{id:t[0].id}});let a;a="success"===o.type?JSON.stringify(o.data,void 0,2):JSON.stringify(o.error,void 0,2);const[i,r]=await Promise.all([(0,n(692031).r)(),(0,n(212497).jd)()]);await r({stringValue:a,environment:e,copiedMessage:i.copiedPropertyToClipboard})}});function Vt(e){const{loadingAction:t,connectedActions:n,searchSubMenu:o}=Pt(e);return{key:"topbar connections",render:e=>(0,M.jsx)(a().A,{...e,style:{marginTop:1},topBorder:!0}),actions:[...t,...[St(),At()],...n,o,jt]}}},354406:(e,t,n)=>{n.d(t,{LQ:()=>m});n(296540);var o=()=>n(495262),a=()=>n(414479),i=()=>n(9402),r=()=>n(775584),s=()=>n(598101),c=()=>n(267271),l=n(474848);const d=(0,c().Ls)({key:"mobile undo",displayName:c().AY.undoName,analyticsName:c().AY.undoName.defaultMessage,svg:n(454503).arrowUTurnUpLeftIcon,validators:[n(514779).M,r().F,n(6744).B,(0,s().A)(a().c),(0,s().A)(i().P)],closeParentMenu:!0,track:{actionName:"undo"},action:(e,{environment:t},n)=>o().tN({environment:t,preventSelectText:!1,callback:e})}),u=(0,c().Ls)({key:"mobile redo",displayName:c().AY.redoName,analyticsName:c().AY.redoName.defaultMessage,svg:n(638616).W,validators:[r().F,n(809210).f,(0,s().A)(a().c),(0,s().A)(i().P)],closeParentMenu:!0,track:{actionName:"redo"},action:(e,{environment:t},n)=>o().ZS({environment:t,callback:e})}),m=(0,c().gy)({key:"mobile revision actions",render:e=>(0,l.jsx)(n(736847).A,{...e}),actions:[d,u]})},364859:(e,t,n)=>{n.d(t,{q:()=>a});var o=()=>n(311337);function a(e){var t;return(0,o().y)(e.environment,null===(t=e.blocks)||void 0===t?void 0:t[0])}},371513:(e,t,n)=>{n.d(t,{b:()=>a});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"1.62 3.62 16.75 12.75",directional:!0,svg:(0,n(474848).jsx)("path",{d:"M16.25 3.625c1.174 0 2.125.951 2.125 2.125v8.5a2.125 2.125 0 0 1-2.125 2.125H3.75a2.125 2.125 0 0 1-2.125-2.125v-8.5c0-1.174.951-2.125 2.125-2.125zm-12.5 1.25a.875.875 0 0 0-.875.875v8.5c0 .483.392.875.875.875h2.7V4.875zm3.8 10.25h8.7a.875.875 0 0 0 .875-.875v-8.5a.875.875 0 0 0-.875-.875h-8.7z"})},a=(0,n(340498).wt)("sidebarLeft",o,"default")},444796:(e,t,n)=>{n.d(t,{AS:()=>c,EH:()=>l});var o=()=>n(522419),a=()=>n(220719),i=()=>n(691648),r=()=>n(179266);const s=["png","jpg","jpeg","webp","heic","heif"];function c(e){if(!e)return!1;const t=o().QC(e);if(!t)return!1;const n=o()._J(e),a=s.includes(t.toLowerCase());return n&&a}async function l(e,t){const n=e.getOriginalImageSource();if((0,a().o9)(n),!n)return;const o=await(0,r().L)({url:n,isAuthenticated:!0,permissionRecord:e.pointer},t),{imageEditActions:s}=await i().h.load();return s.cropAndUploadImage({store:e,environment:t,proxiedOriginalUrl:o})}},471266:(e,t,n)=>{n.d(t,{A:()=>s});var o=()=>n(917992),a=()=>n(553819);const i={open:!0,isImageLoaded:!1,saveButtonLoading:!1,imageRef:void 0,fixedAspectSelection:void 0,aspectSelectionFlipped:!1,outerContainerSize:void 0,innerContainerSize:void 0};class r extends(()=>n(757695))().Store{getInitialState(){return{open:!1}}openModal(e){const{originalSource:t,blockStore:n}=e,r="uploading"===a().A.getStatus(n.id)&&a().A.getMetadataByBlockId(n.id)||{...o().b,...n.getImageEditMetadata()};this.setState({...i,blockStore:n,originalSource:t,editMetadata:r,cropAspect:"Circle"===r.mask?1:void 0})}setSaveButtonLoading(e){this.state.open&&this.setState({...this.state,saveButtonLoading:e})}closeModal(e){var t;null==e||null===(t=e.onClose)||void 0===t||t.call(e),this.setState({open:!1})}getEditMetadata(){return this.state.open&&this.state.editMetadata||o().b}getIsImageLoaded(){return!!this.state.open&&this.state.isImageLoaded}setIsImageLoaded(e){this.state.open&&this.setState({...this.state,isImageLoaded:!0,imageRef:e})}setCrop(e){if(this.state.open){const t={...this.state.editMetadata,crop:e};this.setState({...this.state,editMetadata:t})}}setMask(e){if(this.state.open)switch(this.setState({...this.state,fixedAspectSelection:void 0,aspectSelectionFlipped:!1}),e){case"None":return void this.setFreeform();case"Circle":return void this.setCircleMask();default:(0,n(534177).HB)(e)}}async setFixedAspectRatio(e,t){if(!this.state.open)return;const{width:n,height:a}=o().oU[e],i=t?a/n:n/a,r=this.state.editMetadata,s=await this.getAspectCrop(r,i);s&&this.setState({...this.state,cropAspect:i,editMetadata:{...r,crop:s,mask:"None"},fixedAspectSelection:e,aspectSelectionFlipped:t})}setFreeform(){if(!this.state.open)return;const e=this.state.editMetadata;this.setState({...this.state,cropAspect:void 0,editMetadata:{...e,mask:"None"}})}async setCircleMask(){if(!this.state.open)return;const e=this.state.editMetadata,t=await this.getAspectCrop(e,1);t&&this.setState({...this.state,cropAspect:1,editMetadata:{crop:t,mask:"Circle"}})}async getAspectCrop(e,t){if(this.state.open){var o;const a=null===(o=this.state.imageRef)||void 0===o?void 0:o.current,i=null==e?void 0:e.crop;if(!a||!i)return;const{makeAspectCrop:r}=await n(691648).h.load();return r(i,t,a.width,a.height)}}resetCrop(){this.state.open&&(this.setCrop(o().b.crop),this.setMask(o().b.mask))}}const s=new r},523773:(e,t,n)=>{n.d(t,{d:()=>a});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"2.4 2.39 15.2 15.86",svg:(0,n(474848).jsx)("path",{d:"m4.897 3.085-.122-.142a.625.625 0 0 0-.95.814l3.18 3.71h-3.98a.625.625 0 0 0-.367 1.13L6.6 11.462l-1.506 4.636a.625.625 0 0 0 .962.699L10 13.932l3.943 2.865a.625.625 0 0 0 .903-.183l1.215 1.418a.625.625 0 1 0 .95-.814l-.495-.576a.6.6 0 0 1-.127-.113l-11.4-13.3a.6.6 0 0 1-.093-.144m.051 5.632h3.129l5.018 5.853.027.085-2.755-2.001a.625.625 0 0 0-.734 0l-2.755 2 1.052-3.237a.625.625 0 0 0-.227-.7zm8.633 2.613 3.762-2.733a.625.625 0 0 0-.367-1.13H12.1L10.594 2.83a.625.625 0 0 0-1.188 0L8.55 5.463l.953 1.112L10 5.046l1.052 3.239a.625.625 0 0 0 .595.432h3.404l-2.287 1.662z"})},a=(0,n(340498).wt)("starSlash",o,"default")},613850:(e,t,n)=>{n.d(t,{G:()=>a});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"4.62 2.37 10.76 15.26",svg:(0,n(474848).jsx)("path",{d:"M4.665 17.22a.625.625 0 0 0 .805.365 7.96 7.96 0 0 0 4.528-4.353 7.94 7.94 0 0 0 4.532 4.353.625.625 0 0 0 .44-1.17 6.69 6.69 0 0 1-4.345-6.268V4.509l2.683 2.683a.625.625 0 0 0 .884-.884l-3.75-3.75a.625.625 0 0 0-.884 0l-3.75 3.75a.625.625 0 1 0 .884.884l2.683-2.683v5.625a6.71 6.71 0 0 1-4.345 6.281.625.625 0 0 0-.365.805"})},a=(0,n(340498).wt)("arrowMergeUp",o,"default")},665589:(e,t,n)=>{n.d(t,{l:()=>a});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"0.79 5.83 18.41 8.34",svg:(0,n(474848).jsx)("path",{d:"M5.393 6.022a.625.625 0 0 1 0 .884L2.924 9.375h5.662a.625.625 0 1 1 0 1.25H2.924l2.469 2.469a.625.625 0 0 1-.884.883L.974 10.442a.625.625 0 0 1 0-.884l3.535-3.536a.625.625 0 0 1 .884 0m6.026 3.353a.625.625 0 1 0 0 1.25h5.648l-2.469 2.469a.625.625 0 1 0 .884.883l3.535-3.535a.625.625 0 0 0 0-.884l-3.535-3.536a.625.625 0 0 0-.884.884l2.469 2.469z"})},a=(0,n(340498).wt)("arrowExpandHorizontal",o,"default")},675002:(e,t,n)=>{n.d(t,{C:()=>i});n(296540);var o=n(474848);const a={viewBox:"0 0 20 20",fittedViewBox:"1.95 1.45 16.59 16.01",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M3.465 6.889a2.865 2.865 0 0 1 4.962-2.865l.244.422a.55.55 0 1 0 .952-.55l-.244-.422a3.965 3.965 0 1 0-6.867 3.965l.244.422a.55.55 0 1 0 .953-.55z"}),(0,o.jsx)("path",{d:"M11.557 5.959a1.75 1.75 0 0 1 1.96.142 1.748 1.748 0 0 1 2.871.23l1.367 2.366a5.84 5.84 0 0 1-8.956 7.27l-4.044-3.624a1.672 1.672 0 0 1 1.64-2.831L4.593 6.39a1.75 1.75 0 1 1 3.03-1.749l1.14 1.975a1.75 1.75 0 0 1 2.29-.22c.134-.172.303-.322.504-.437M6.54 5.266a.5.5 0 0 0-.865.5l3.216 5.57a.625.625 0 0 1-.915.813L6.12 10.76a.42.42 0 0 0-.532.651l4.044 3.624a4.591 4.591 0 0 0 7.04-5.714l-1.367-2.367a.498.498 0 1 0-.864.5l.067.118a.625.625 0 1 1-1.082.625l-.563-.974a.5.5 0 0 0-.865.5l.113.194a.625.625 0 1 1-1.083.625l-.562-.974a.5.5 0 0 0-.865.5l.562.974a.625.625 0 1 1-1.082.625z"})]})},i=(0,n(340498).wt)("handTap",a,"default")},691648:(e,t,n)=>{n.d(t,{h:()=>a,p:()=>i});var o=()=>n(79926);const a=new(o().O2)("imageEdit",(()=>n.e(81074).then(n.bind(n,751229)))),i=(0,o()._h)(a,(e=>e.ImageEditModal))},727722:(e,t,n)=>{n.d(t,{T:()=>S});var o=()=>n(564884),a=()=>n(242422),i=()=>n(675133),r=()=>n(792057),s=()=>n(165358),c=()=>n(416504),l=()=>n(161479),d=()=>n(609316),u=()=>n(559926),m=()=>n(357625),g=()=>n(496414),p=()=>n(892632),f=()=>n(181015),v=()=>n(175167),y=()=>n(191227),b=()=>n(129522),k=()=>n(799832);const h=(0,n(69708).YK)({importingCSV:{id:"databaseViewActions.importingCSV.loadingMessage",defaultMessage:"Importing"},uploadingCSV:{id:"databaseViewActions.uploadingCSV.loadingMessage",defaultMessage:"Uploading"},importFailed:{id:"databaseViewActions.importFailedError.message",defaultMessage:"Import failed."}});function S(e){const{store:t,environment:n,analytics:S}=e,A=(0,k().U)(t),M=null==A?void 0:A.collectionViewBlockStore(),w=null==A?void 0:A.collectionViewStore(),I=null==w?void 0:w.getCollectionStore();if((0,v().v)()){const e=y().A.getOrCreateFlowId();return u().fJ(n,{import_source:"csv",from:S.from,data_source_session_id:S.dataSourceSessionId,data_source_from:S.dataSourceFrom,import_type:"file",flowId:e,userId:n.currentUser.id,spaceId:t.getSpaceId()}),void f().Z({importType:"merge",spaceId:t.getSpaceId(),importLocation:null==I?void 0:I.id,parentId:t.id,parentTable:"block",collectionViewBlockStore:M,analyticsFrom:S.from})}let N;const x={},C=performance.now();p().Bz({environment:n,accept:".csv",bucket:"temporary",spaceId:t.getSpaceId(),onStart:e=>{N=e,g().m({message:h.uploadingCSV})},onCompleteWithToken:e=>{u().eH(n,{from:S.from,import_source:"csv"}),x.uploadTimeTaken=performance.now()-C,x.firstTimeNavigateToCollection=x.uploadTimeTaken,(async(e,o,s)=>{if(g().m({message:h.importingCSV}),!I)return;if(!b().K.findCollectionViewBlockFromStore(t))return;const u=(0,c().P)(),p=m().UT(n,d().V,{importType:"MergeIntoCollection",fileURL:e,fileName:o,collection:{id:I.id,spaceId:(0,l().e)(I.pointer.spaceId)},spaceId:(0,l().e)(I.pointer.spaceId),userTimeZone:u,signedToken:s},{spaceIds:[I.getSpaceId()]}),f=a().default.checkGate({gateName:"csvimport_faster_navigate_to_page_enabled"});let v=!1;for await(const t of p){if(t.error)throw r().f1(i().A.formatMessage(h.importFailed)),g().V(),t.error;!v&&f&&"status"in t.value&&"updated_collection"===t.value.status.message&&(v=!0,g().V())}g().V()})(e[0].fileUrl,N[0].name,e[0].signedToken),x.overallTimeTaken=performance.now()-C;for(const[t,a]of Object.entries(x))(0,o().u)({environment:n,event:{eventName:"import_file_finished",eventProperties:{importUploadType:"csv",importType:"MergeIntoCollection",importLatency:a,importSource:"file",importLatencyType:t,importFileCount:1}}});s().log({level:"info",from:"mergeWithCSV",type:"mergeWithCSVFinished",data:{miscDataToConvertToString:{data:{uploadType:"csv",importType:"MergeIntoCollection",importLatencies:x,importSource:"file",fileNames:[N[0].name]}}}})},onError:e=>{g().V(),r().f1(i().A.formatMessage(h.importFailed))}})}},730219:(e,t,n)=>{n.d(t,{A:()=>a});var o=function(e){return e[e.Preview=0]="Preview",e[e.Mention=1]="Mention",e[e.Link=2]="Link",e}(o||{});const a=o},815912:(e,t,n)=>{n.d(t,{$:()=>r,B:()=>i});var o=()=>n(763884);const a="alwaysShowTextDirectionControls";function i({userId:e,value:t}){o().K.set({userId:e,key:a,value:t})}function r({userId:e}){return Boolean(o().K.get({userId:e,key:a}))}},863687:(e,t,n)=>{n.d(t,{Xv:()=>Kn,_J:()=>Fn,qQ:()=>Rn,SH:()=>To,bH:()=>Po,tA:()=>an,O5:()=>sn,qI:()=>mn,A2:()=>Io,xD:()=>Ro,Bf:()=>Do,fg:()=>xn,Fh:()=>Cn,cy:()=>_n,TD:()=>Nn,wy:()=>En,Zk:()=>zn,oq:()=>jn,b2:()=>cn});n(18107),n(967357),n(898992),n(823215),n(354520),n(430670),n(803949),n(581454),n(737550);var o=n(296540),a=()=>n(907258),i=()=>n(929219),r=()=>n(675133),s=()=>n(985996),c=()=>n(736847),l=()=>n(700500),d=()=>n(651124),u=()=>n(165358),m=()=>n(340498),g=n(474848);const p={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.87 15.25 14.25",svg:(0,g.jsx)("path",{d:"M3 2.875a.625.625 0 1 0 0 1.25h14a.625.625 0 1 0 0-1.25zM5.125 7.5c0-1.174.951-2.125 2.125-2.125h5.5c1.174 0 2.125.951 2.125 2.125v5a2.125 2.125 0 0 1-2.125 2.125h-5.5A2.125 2.125 0 0 1 5.125 12.5zm2.125-.875a.875.875 0 0 0-.875.875v5c0 .483.392.875.875.875h5.5a.875.875 0 0 0 .875-.875v-5a.875.875 0 0 0-.875-.875zM2.375 16.5c0-.345.28-.625.625-.625h14a.625.625 0 1 1 0 1.25H3a.625.625 0 0 1-.625-.625"})},f=(0,m().wt)("alignCenter",p,"default"),v={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.87 15.25 14.25",directional:!0,svg:(0,g.jsx)("path",{d:"M3 2.875a.625.625 0 1 0 0 1.25h14a.625.625 0 1 0 0-1.25zM2.375 7.5c0-1.174.951-2.125 2.125-2.125H10c1.174 0 2.125.951 2.125 2.125v5A2.125 2.125 0 0 1 10 14.625H4.5A2.125 2.125 0 0 1 2.375 12.5zM4.5 6.625a.875.875 0 0 0-.875.875v5c0 .483.392.875.875.875H10a.875.875 0 0 0 .875-.875v-5A.875.875 0 0 0 10 6.625zM2.375 16.5c0-.345.28-.625.625-.625h14a.625.625 0 1 1 0 1.25H3a.625.625 0 0 1-.625-.625"})},y=(0,m().wt)("alignLeft",v,"default"),b={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.87 15.25 14.25",directional:!0,svg:(0,g.jsx)("path",{d:"M3 2.875a.625.625 0 1 0 0 1.25h14a.625.625 0 1 0 0-1.25zM7.875 7.5c0-1.174.951-2.125 2.125-2.125h5.5c1.174 0 2.125.951 2.125 2.125v5a2.125 2.125 0 0 1-2.125 2.125H10A2.125 2.125 0 0 1 7.875 12.5zM10 6.625a.875.875 0 0 0-.875.875v5c0 .483.392.875.875.875h5.5a.875.875 0 0 0 .875-.875v-5a.875.875 0 0 0-.875-.875zM2.375 16.5c0-.345.28-.625.625-.625h14a.625.625 0 1 1 0 1.25H3a.625.625 0 0 1-.625-.625"})},k=(0,m().wt)("alignRight",b,"default");var h=()=>n(775842),S=()=>n(955363),A=()=>n(3284),M=()=>n(202017);const w={viewBox:"0 0 20 20",fittedViewBox:"3.12 3.12 16.38 16.38",svg:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("path",{d:"M3.125 5.25c0-1.174.951-2.125 2.125-2.125h9.5c1.174 0 2.125.951 2.125 2.125v6.233a4.6 4.6 0 0 0-1.25-.068v-4.6H4.375v7.935c0 .483.392.875.875.875h6.165a4.6 4.6 0 0 0 .069 1.25H5.25a2.125 2.125 0 0 1-2.125-2.125z"}),(0,g.jsx)("path",{d:"M9.537 8.843a.694.694 0 1 1-1.389 0 .694.694 0 0 1 1.389 0m-.694 3.009a.694.694 0 1 0 0-1.389.694.694 0 0 0 0 1.389m0 2.315a.695.695 0 1 0 0-1.39.695.695 0 0 0 0 1.39m2.315-4.63a.694.694 0 1 0 0-1.389.694.694 0 0 0 0 1.389m0 2.315a.694.694 0 1 0 0-1.389.694.694 0 0 0 0 1.389m0 2.315a.694.694 0 1 0 0-1.39.694.694 0 0 0 0 1.39m2.314-4.63a.694.694 0 1 0 0-1.389.694.694 0 0 0 0 1.389m-6.944 2.315a.694.694 0 1 0 0-1.389.694.694 0 0 0 0 1.389m0 2.315a.695.695 0 1 0 0-1.39.695.695 0 0 0 0 1.39m6.944-2.315a.694.694 0 1 0 0-1.389.694.694 0 0 0 0 1.389m.053 6.623a3.5 3.5 0 1 1 4.95-4.95 3.5 3.5 0 0 1-4.95 4.95m4.287-.619a.625.625 0 0 0 0-.884L16.84 16l.972-.972a.625.625 0 0 0-.884-.884l-.972.972-.973-.972a.625.625 0 1 0-.883.884l.972.972-.972.972a.625.625 0 0 0 .883.884l.973-.972.972.972c.244.244.64.244.884 0"})]})},I=(0,m().wt)("calendarBadgeX",w,"default");const N={viewBox:"0 0 20 20",fittedViewBox:"3.12 3.12 16.67 15.44",svg:(0,g.jsx)("path",{d:"M14.958 8.587c.332.095.523.44.429.772l-2.5 8.75a.625.625 0 0 1-1.202-.343l2.5-8.75a.625.625 0 0 1 .773-.43m-4.74 1.783a.626.626 0 0 1 .886.885l-2.308 2.307 2.308 2.308a.627.627 0 0 1-.885.885l-2.75-2.75a.626.626 0 0 1 0-.885zm5.75 0a.626.626 0 0 1 .884 0l2.75 2.75a.626.626 0 0 1 0 .885l-2.75 2.75a.626.626 0 0 1-.884-.885l2.307-2.307-2.307-2.308a.627.627 0 0 1 0-.885M14.75 3.125c1.174 0 2.125.951 2.125 2.125v2.972l-1.25-1.204V5.25a.875.875 0 0 0-.875-.875h-9.5a.875.875 0 0 0-.875.875v9.5c0 .483.392.875.875.875h2.071l1.25 1.25H5.25a2.125 2.125 0 0 1-2.125-2.125v-9.5c0-1.174.951-2.125 2.125-2.125z"})},x=(0,m().wt)("copyCode",N,"default"),C={viewBox:"0 0 20 20",fittedViewBox:"1.37 1.37 17.25 17.25",svg:(0,g.jsx)("path",{d:"M5.625 2a.625.625 0 1 0-1.25 0v2.375H2a.625.625 0 1 0 0 1.25h2.375V13.5c0 1.174.951 2.125 2.125 2.125h7.875V18a.625.625 0 1 0 1.25 0v-2.375H18a.625.625 0 1 0 0-1.25h-2.375V6.5A2.125 2.125 0 0 0 13.5 4.375H5.625zm0 3.625H13.5c.483 0 .875.392.875.875v7.875H6.5a.875.875 0 0 1-.875-.875z"})},_=(0,m().wt)("crop",C,"default");var L=()=>n(424139),T=()=>n(742852),P=()=>n(90907);const B={viewBox:"0 0 20 20",fittedViewBox:"1.27 2.85 17.64 14.57",svg:(0,g.jsx)("path",{d:"M1.293 6.583A2.125 2.125 0 0 1 3.12 4.195l9.912-1.321A2.125 2.125 0 0 1 15.418 4.7l.264 1.975h1.103c1.174 0 2.125.951 2.125 2.125v6.5a2.125 2.125 0 0 1-2.125 2.125h-10A2.125 2.125 0 0 1 4.66 15.3v-.465l-.12.016a2.125 2.125 0 0 1-2.388-1.825zm3.367 6.991V8.8c0-1.174.952-2.125 2.125-2.125h7.636l-.242-1.81a.875.875 0 0 0-.983-.752L3.284 5.434a.875.875 0 0 0-.752.983l.86 6.443a.875.875 0 0 0 .982.752zM5.91 8.8v6.5c0 .483.392.875.875.875h10a.875.875 0 0 0 .875-.875V8.8a.875.875 0 0 0-.875-.875h-10a.875.875 0 0 0-.875.875"})},j=(0,m().wt)("rectangleOnRectangleTilt",B,"default");var V=()=>n(763884),D=()=>n(201980),R=()=>n(69708),F=()=>n(496603),U=()=>n(231536),z=()=>n(436696),E=()=>n(914577),O=()=>n(896628),K=()=>n(383594),q=()=>n(384944),Y=()=>n(675925),W=()=>n(144440),H=()=>n(90654),G=()=>n(314638),X=()=>n(339798),$=()=>n(65402),Q=()=>n(799832),Z=()=>n(575143),J=()=>n(375078),ee=()=>n(574357),te=()=>n(426716),ne=()=>n(389456),oe=()=>n(414479);function ae(e){return t=>F().Si(t.blocks,(t=>t&&F().Tn(t.getType)&&t.getType()===e))}var ie=()=>n(418731),re=()=>n(91765);function se(e){const{blocks:t}=e,n=t[0];if(!n)return!1;const o=(0,Q().U)(n);if(!o)return!1;return o.permissionScopesStore.state.canConfigureBlock}var ce=()=>n(158658),le=()=>n(788436),de=()=>n(980914);const ue=(0,n(921333).i)("source");function me(e){return e.blocks.every((e=>{const t=null==e?void 0:e.getModel();return Boolean(null==t?void 0:t.isType(l().XC))}))}var ge=()=>n(713998),pe=()=>n(522419);function fe(e){if(!e.blocks)return!1;const t=e.blocks.at(0),n=t&&t.getProperties().source;if(!n)return!1;const o=ge().MO(n);return!!o&&pe()._J(o)}var ve=()=>n(964179);var ye=()=>n(245128);function be(e){const{sidebarSpaceViewStore:t}=a().default.state,n=e.blocks.at(0);return Boolean(t&&n&&(0,ye().A)({spaceViewStore:t,pageId:n.id}))}var ke=()=>n(155963),he=()=>n(460995),Se=()=>n(129522);var Ae=()=>n(343666);function Me(e){var t;return Boolean((null===(t=e.blocks.at(0))||void 0===t||null===(t=t.getFormat().alias_pointer)||void 0===t?void 0:t.table)===Ae().SN)}var we=()=>n(339425),Ie=()=>n(963335);var Ne=()=>n(929084),xe=()=>n(401665);var Ce=()=>n(80257),_e=()=>n(242422);function Le(e){if(!e.blocks||0===e.blocks.length)return!1;const t=e.blocks[0];if(!(t.isDefined()&&t.isType(l().xd.file)))return!1;const n=t.getProperties().source;if(!n)return!1;const o=(0,ge().MO)(n);if(!o)return!1;const a=_e().default.getConfigKey("file_block_download","force_download_extensions");return!(0,pe().YR)({url:o,forceDownloadExtensions:a})}function Te(e){return e.blocks[0].isFirstBlockInCalloutV2Block()}function Pe(e){return t=>{if(1!==t.blocks.length)return!1;const n=t.blocks.at(0);if(!n)return!1;const o=n.getParentBlockStore(),a=null==o?void 0:o.getContentStores(),i=null==a?void 0:a.map((t=>t.getType()===e));if(!i||0===(null==i?void 0:i.length))return!1;const r=null==a?void 0:a.map((e=>e.id)).indexOf(n.id);return void 0!==r&&(0===r||!i[r-1])}}var Be=()=>n(333344);function je({blocks:e}){return e.some((e=>Boolean(e.isImmediateColumnChild())))}var Ve=()=>n(393138),De=()=>n(45214);var Re=()=>n(375308);function Fe(e){var t;return Boolean(null===(t=e.blocks.at(0))||void 0===t?void 0:t.getFormat().is_placeholder)}var Ue=()=>n(606376),ze=()=>n(514779),Ee=()=>n(306113),Oe=()=>n(775584),Ke=()=>n(918871),qe=()=>n(733637),Ye=()=>n(267956),We=()=>n(440902);function He(e){if(!(0,We().v)(e))return!1;const{publicPageData:t}=Ye().A.state;return Boolean(null==t?void 0:t.isDLSViewer)}var Ge=()=>n(730107);var Xe=()=>n(467294);function $e(e){var t;return 1===e.blocks.length&&(null===(t=e.blocks.at(0))||void 0===t?void 0:t.getType())===l().xd.table}var Qe=()=>n(453237),Ze=()=>n(419286),Je=()=>n(598101),et=()=>n(422155),tt=()=>n(792609),nt=()=>n(755531),ot=()=>n(272509),at=()=>n(963727);function it(e){const t=(0,at().k)(e),n=(0,nt().S)(),o=(0,ot().I)(n);return!(!t||o)&&t}var rt=()=>n(152895),st=()=>n(486666),ct=()=>n(440024),lt=()=>n(111232),dt=()=>n(919878),ut=()=>n(857048),mt=()=>n(522200),gt=()=>n(547149),pt=()=>n(964556),ft=()=>n(975728);var vt=()=>n(12956),yt=()=>n(267271);const bt=(0,R().YK)({buttonEffectTitle:{id:"action.buttonEffect.title",defaultMessage:"Click effect"},confettiTitle:{id:"action.buttonEffect.confettiTitle",defaultMessage:"Confetti"},noneTitle:{id:"action.buttonEffect.noneTitle",defaultMessage:"None"}});function kt(e){return(t,n)=>{const o=n.blocks[0];if(!o.isType(l().xd.button))return;const a=o.getAutomationStore();if(!a||!a.isTriggerType("button"))return;const{serverCommitResult:i}=gt().createAndCommit({userAction:"actionRegistry.setButtonEffectAction",environment:n.environment,canUndo:!0,perform:t=>{q().KY({transaction:t,store:a.getPropertiesStore().getKeyStore("button_effect"),value:e?{type:e}:null})}});i.then(t)}}const ht=(0,o.forwardRef)((function(e,t){const{blockStore:o,buttonEffectType:a,...i}=e,r=(0,n(590526).K8)((()=>{const e=o.getAutomationStore();if(!e)return!1;const t=e.getButtonEffect();return(null==t?void 0:t.type)===a}),[o,a]);return(0,g.jsx)(Z().A,{ref:t,...i,isChecked:r})})),St=(0,yt().gy)({key:"change button effect",render:e=>(0,g.jsx)(c().A,{...e}),actions:[(0,yt().Ls)({key:"button effect confetti",displayName:bt.confettiTitle,analyticsName:bt.confettiTitle.defaultMessage,validators:[],closeParentMenu:!0,track:{actionName:"set_button_effect"},action:kt("confetti"),render:(e,t)=>(0,g.jsx)(ht,{...e,blockStore:t.blocks[0],title:(0,g.jsx)(R().sA,{...bt.confettiTitle}),svg:n(585930).a,buttonEffectType:"confetti"})}),(0,yt().Ls)({key:"button effect none",displayName:bt.noneTitle,analyticsName:bt.noneTitle.defaultMessage,validators:[],closeParentMenu:!0,track:{actionName:"set_button_effect"},action:kt(void 0),render:(e,t)=>(0,g.jsx)(ht,{...e,blockStore:t.blocks[0],title:(0,g.jsx)(R().sA,{...bt.noneTitle}),svg:n(378409).xMarkCircleIcon,buttonEffectType:void 0})})]}),At=(0,vt().u)({key:"change button effect",displayName:bt.buttonEffectTitle,analyticsName:bt.buttonEffectTitle.defaultMessage,svg:n(675002).C,validators:[ce().p,function(e){var t;return Boolean(1===e.blocks.length&&(null===(t=e.blocks.at(0))||void 0===t?void 0:t.isType(l().xd.button)))},(0,Ie().S)("automations_button_confetti_effect")],subActions:()=>[St]});var Mt=()=>n(154562),wt=()=>n(557583),It=()=>n(599364),Nt=()=>n(410767),xt=()=>n(774411),Ct=()=>n(893306),_t=()=>n(354406),Lt=()=>n(37689),Tt=()=>n(426928),Pt=()=>n(22913),Bt=()=>n(363019),jt=()=>n(377114),Vt=()=>n(526278),Dt=()=>n(940563),Rt=()=>n(209199),Ft=()=>n(674065),Ut=()=>n(402390),zt=()=>n(815912);function Et(e){var t;const{environment:n}=e;if(!_e().default.checkGate({gateName:"editor_basic_rtl"}))return!1;if((0,zt().$)({userId:n.currentUser.id}))return!0;const o=a().default.state.currentUserSettingsStore,i=(null==o||null===(t=o.getSettings())||void 0===t?void 0:t.preferred_locale)||Ut().q;return(0,Rt().Vf)(i)}const Ot=(0,R().YK)({textDirectionName:{id:"action.textDirection.name",defaultMessage:"Text direction"},leftToRight:{id:"action.textDirection.ltr",defaultMessage:"Left to right"},rightToLeft:{id:"action.textDirection.rtl",defaultMessage:"Right to left"},auto:{id:"action.textDirection.auto",defaultMessage:"Auto-detect"}});function Kt(){return[ce().p,(0,Je().A)(Re().v),tt().Y,Ft().M,(0,Je().A)(ie().C),Ve().P,Et]}function qt(e){const{textDirection:t,displayName:n,svg:o}=e,a=(0,yt().Ls)({key:`text direction ${t??"auto"}`,displayName:n,analyticsName:n.defaultMessage,analyticsActionType:"change_text_direction",validators:Kt(),track:!1,action:({blocks:e,environment:n})=>{gt().createAndCommit({userAction:"actionRegistry.createTextDirectionAction",environment:n,canUndo:!0,perform:n=>{O().zA({stores:e,update:{block_text_direction:t},transaction:n})}})},closeParentMenu:!0,render:(e,{blocks:n})=>{const i=(n.length>0?n[0].getFormat().block_text_direction:void 0)===t;return(0,g.jsx)(Z().A,{...e,svg:o,title:a.displayName,isChecked:i})}});return a}const Yt=(0,yt().gy)({key:"text direction actions",render:e=>(0,g.jsx)(c().A,{...e}),actions:[qt({textDirection:void 0,displayName:Ot.auto,svg:jt().arrowLeftRightIcon}),qt({textDirection:"ltr",displayName:Ot.leftToRight,svg:(0,Rt().A1)()?Vt().arrowStraightLeftIcon:Dt().arrowStraightRightIcon}),qt({textDirection:"rtl",displayName:Ot.rightToLeft,svg:(0,Rt().A1)()?Dt().arrowStraightRightIcon:Vt().arrowStraightLeftIcon})]}),Wt=(0,vt().u)({key:"text direction section",displayName:Ot.textDirectionName,analyticsName:Ot.textDirectionName.defaultMessage,svg:jt().arrowLeftRightIcon,validators:Kt(),subActions:()=>[Yt]});var Ht=()=>n(611357),Gt=()=>n(843005);const Xt="block menu comment",$t="block menu completion",Qt=(0,R().YK)({fixLegacyTransclusion:{id:"action.fixLegacyTransclusion.name",defaultMessage:"Fix legacy transclusion"},libraryAddToSidebarSection:{id:"action.libraryAddToSidebarSection.name",defaultMessage:"Add to {sectionName} in Sidebar"},libraryAddToSidebarWithoutSectionName:{id:"action.libraryAddToSidebarWithoutSectionName.name",defaultMessage:"Add to Sidebar"},insertBelowName:{id:"action.insertBelow.name",defaultMessage:"Insert below"},simpleTableFitToPageWidth:{id:"action.fitToPageWidth.title",defaultMessage:"Fit to width"},startPresentationName:{id:"action.startPresentation.name",defaultMessage:"Start presentation"},copyDirectLinkName:{id:"action.copyDirectLink.name",defaultMessage:"Copy link to original"},openasPageName:{id:"action.openasPage.name",defaultMessage:"Open as page"},copyLinksName:{id:"action.copyLinks.name",defaultMessage:"Copy links to all"},viewOriginalName:{id:"action.viewOriginal.name",defaultMessage:"View original"},openInBrowserName:{id:"action.openInBrowser.name",defaultMessage:"Open in browser"},downloadName:{id:"action.download.name",defaultMessage:"Download"},replaceName:{id:"action.replace.name",defaultMessage:"Replace"},turnSimpleTableIntoCollection:{id:"action.turnIntoCollection.title",defaultMessage:"Turn into database"},viewAsSpreadsheetPrototype:{id:"action.viewAsSpreadsheetPrototype.title",defaultMessage:"View as spreadsheet"},editPropertyName:{id:"action.editProperty.name",defaultMessage:"Edit property"},clearDateName:{id:"action.clearDate.name",defaultMessage:"Clear date"},turnintoInlineName:{id:"action.turnintoInline.name",defaultMessage:"Turn into inline database"},turnintoPageName:{id:"action.turnintoPage.name",defaultMessage:"Turn into page"},turnCollectionIntoSimpleTable:{id:"action.turnintoSimpleTable.name",defaultMessage:"Turn into simple table"},mergewithCSVName:{id:"action.mergewithCSV.name",defaultMessage:"Merge with CSV"},mergewithCSVCaption:{id:"action.mergewithCSV.caption",defaultMessage:"Header row required"},openIn:{id:"action.openIn.name",defaultMessage:"Open in"},lockDatabaseName:{id:"action.lockDatabaseName.name",defaultMessage:"Lock database"},lockDatabaseViewsName:{id:"action.lockDatabaseViewsName.name",defaultMessage:"Lock views"},lockWikiName:{id:"action.lockWikiName.name",defaultMessage:"Lock wiki"},reloadPreview:{id:"action.reloadPreview",defaultMessage:"Reload preview"},unlockWikiName:{id:"action.unlockWikiName.name",defaultMessage:"Unlock wiki"},turnPreviewIntoMention:{id:"action.turnPreviewIntoMention",defaultMessage:"Turn into mention"},turnBookmarkIntoMention:{id:"action.convertToLinkMention.name",defaultMessage:"Turn into mention"},reloadSyncedPage:{id:"action.reloadSyncedPage",defaultMessage:"Sync page"},addtoFavoritesName:{id:"action.addtoFavorites.name",defaultMessage:"Add to Favorites"},removefromFavoritesName:{id:"action.removefromFavorites.name",defaultMessage:"Remove from Favorites"},editIconName:{id:"action.editIcon.name",defaultMessage:"Edit icon"},addIcon:{id:"action.addIcon.name",defaultMessage:"Add icon"},wrapCodeKeywords:{id:"action.wrapCode.fuzzySearchKeywords",defaultMessage:"Wrap Code"},wrapCodeLabel:{id:"action.wrapCode.label",defaultMessage:"Wrap code"},languageModeName:{id:"action.languageMode.name",defaultMessage:"Language"},formatCodeLabel:{id:"action.formatCode.label",defaultMessage:"Format code"},openInBrowserLabel:{id:"action.openInBrowser.label",defaultMessage:"Open in browser"},workAtNotion:{id:"action.workAtNotion.name",defaultMessage:"Work at Notion"},quoteSizeSection:{id:"action.section.quoteSize",defaultMessage:"Quote size"},quoteSizeDefault:{id:"action.quoteSize.default",defaultMessage:"Default"},quoteSize:{id:"action.quoteSize.name",defaultMessage:"Quote size"},quoteSizeLarge:{id:"action.quoteSize.large",defaultMessage:"Large"},listFormatDefault:{id:"action.listFormat.letters.default",defaultMessage:"Default"},listFormatSection:{id:"action.listFormat.sectionName",defaultMessage:"List format"},listFormat:{id:"action.listFormat.name",defaultMessage:"List format"},listFormatNumbers:{id:"action.listFormat.numbers.name",defaultMessage:"Numbers"},listFormatLetters:{id:"action.listFormat.letters.name",defaultMessage:"Letters"},listFormatRoman:{id:"action.listFormat.letters.roman",defaultMessage:"Roman numerals"},listFormatDisc:{id:"action.listFormat.disc.name",defaultMessage:"Disc"},listFormatCircle:{id:"action.listFormat.circle.name",defaultMessage:"Circle"},listFormatSquare:{id:"action.listFormat.square.name",defaultMessage:"Square"},alignmentName:{id:"action.alignment.name",defaultMessage:"Align"},cropImage:{id:"action.cropImage",defaultMessage:"Crop image"},copyImage:{id:"action.copyImage",defaultMessage:"Copy image"},copyCode:{id:"action.copyCode",defaultMessage:"Copy code"},turnTableIntoDatabaseWarning:{id:"action.turnTableIntoDatabaseWarning",defaultMessage:"All suggestions in the table must be resolved before the table can be turned into a database."},linkToImportModal:{id:"action.linkToImportModal",defaultMessage:"Import data"},propertyVisibilityName:{id:"action.propertyVisibility.name",defaultMessage:"Property visibility"},layoutName:{id:"action.layout.name",defaultMessage:"Layout"}}),Zt=[n(125591).e,(0,Je().A)(n(776594).x),(0,Je().A)(n(467276).p),(0,et().or)([ie().C,(0,Je().A)(Re().v)]),...yt().uo],Jt=(0,yt().Ls)({key:"fixLegacyTransclusion",displayName:Qt.fixLegacyTransclusion,analyticsName:Qt.fixLegacyTransclusion.defaultMessage,svg:h().a,validators:[function(e){return!!(0,n(611191).i)()&&e.blocks.every((e=>{const t=e.getParentId(),n=e.recordStoreUIParentStore,o=null==n?void 0:n.id;return t&&o&&t!==o}))},We().v,...Zt],closeParentMenu:!0,action:async({blocks:e,environment:t})=>{(await n(764061).l.legacyTransclusionActions.load()).fixLegacyTransclusion({environment:t,store:e[0]})}}),en=(0,yt().Ls)({key:"addToSidebarSectionLibrary",displayName:Qt.libraryAddToSidebarWithoutSectionName,contextualDisplayName:({blocks:e})=>{const t=e.length>0?(0,re().oK)(e[0]):void 0;return t?(0,g.jsx)(R().sA,{...Qt.libraryAddToSidebarSection,values:{sectionName:(0,n(804666).Ws)(t,r().A.getIntl())}}):(0,g.jsx)(R().sA,{...Qt.libraryAddToSidebarWithoutSectionName})},analyticsName:Qt.libraryAddToSidebarWithoutSectionName.defaultMessage,svg:n(371513).b,validators:[function({environment:e,blocks:t}){return void 0!==re().sB({selectedItems:t,environment:e})}],closeParentMenu:!0,action:async({blocks:e,environment:t})=>{const o=(0,re().sB)({environment:t,selectedItems:e});o&&await n(985630).V({...o,analyticsFrom:"block_action_menu"})}}),tn=(0,vt().u)({key:"turn into section",displayName:yt().AY.turnIntoName,analyticsName:yt().AY.turnIntoName.defaultMessage,svg:A().arrowSquarePathUpDownIcon,validators:[ce().p,(0,Je().A)(Re().v),n(409076).p,tt().Y,Ve().P],subActions:()=>[{key:0,title:void 0,render:e=>(0,g.jsx)(c().A,{...e}),actions:Gt().t3.actions}]}),nn=(0,yt().Ls)({key:"insert below",displayName:Qt.insertBelowName,analyticsName:Qt.insertBelowName.defaultMessage,svg:n(655923).arrowStraightDownIcon,validators:[ce().p,(0,Je().A)(Re().v),(0,Je().A)(n(491250).p),oe().c,Oe().F],closeParentMenu:!0,action:({blocks:e,environment:t})=>{gt().createAndCommit({userAction:"actionRegistry.insertBelow",environment:t,canUndo:!0,perform:o=>{n(87017).insertTextBelow({environment:t,blocks:e,transaction:o})}})}}),on=(0,yt().Ls)({key:"start presentation",displayName:Qt.startPresentationName,analyticsName:Qt.startPresentationName.defaultMessage,validators:[We().v,(0,Ze().X)(l().xd.slide)],closeParentMenu:!0,svg:n(689825).U,action:({blocks:e})=>{n(447934).V_({slideBlockStore:e[0]})}}),an=(0,yt().Ls)({key:"copy direct link to content housed within block",displayName:Qt.copyDirectLinkName,analyticsName:Qt.copyDirectLinkName.defaultMessage,svg:T().linkIcon,validators:[ze().M,We().v,(0,Je().A)(fe),(0,Je().A)(Ke().w),(0,et().or)([Ee().I,Ce().k,(0,Ze().X)(l().xd.bookmark),(0,Ze().X)(l().xd.externalObjectInstance),(0,Ze().X)(l().xd.externalObjectInstancePage),xe().I,Me]),(0,Je().A)(n(416433).I)],closeParentMenu:!0,track:{actionName:"copy_original_link"},lazyDependencyKeys:["clipboardActions"],action:(e,t,n)=>{const o=(0,U().Y)("clipboardActions");o?o.copyDirectLinkToContent({...t,event:n,callback:e}):u().log({data:{miscDataToConvertToString:{actionKey:"copy direct link to content housed within block"}},from:"blockActionRegistry",level:"info",type:"lazyDependencies:missingClipboardActions"})}}),rn=(0,yt().Ls)({key:"open collection as page",displayName:Qt.openasPageName,analyticsName:Qt.openasPageName.defaultMessage,svg:n(47218).arrowExpandDiagonalBottomLeftToTopRightIcon,validators:[De().l,(0,Je().A)(ie().C),(0,Je().A)((function(e){if(e.blocks&&1===e.blocks.length){const[t]=e.blocks;if(t.isCollectionView()){const e=t.getCollectionStoreIfSingleSource();if(!e)return!1;const o=e.getValue();if(o)return(0,n(107041).SJ)(o)}}return!1}))],closeParentMenu:!0,action:e=>n(391214).mP(e)}),sn=(0,yt().Ls)({key:"copy links to blocks",displayName:Qt.copyLinksName,analyticsName:Qt.copyLinksName.defaultMessage,svg:T().linkIcon,validators:[ze().M,n(772186).F,(0,Je().A)(we().o)],closeParentMenu:!0,track:{actionName:"copy_multiple_block_links"},lazyDependencyKeys:["clipboardActions"],action:(e,t,n)=>{const o=(0,U().Y)("clipboardActions");o?o.copyLinksToBlocks({...t,callback:e}):u().log({data:{miscDataToConvertToString:{actionKey:"copy links to blocks"}},from:"blockActionRegistry",level:"info",type:"lazyDependencies:missingClipboardActions"})}}),cn=(0,yt().Ls)({key:"view original",displayName:Qt.viewOriginalName,analyticsName:Qt.viewOriginalName.defaultMessage,svg:S().arrowDiagonalUpRightIcon,validators:[(0,Je().A)(Ne().b),We().v,(0,et().or)([Ee().I,Le])],closeParentMenu:!0,track:{actionName:"view_original"},action:(e,{blocks:t,environment:n},o)=>{const a=t.at(0);a&&(0,ft().hg)(a)&&W().oD(n,{store:a,from:"view_original",callback:e})},disabled:()=>!i().A.state.online,renderTooltip:()=>r().A.formatMessage(yt().AY.unavailableOfflineTooltip),disableTooltip:()=>i().A.state.online}),ln=(0,yt().Ls)({key:"view in browser",displayName:Qt.openInBrowserName,analyticsName:Qt.openInBrowserName.defaultMessage,svg:S().arrowDiagonalUpRightIcon,validators:[Ne().b,We().v,(0,et().or)([Ee().I,Le])],closeParentMenu:!0,track:{actionName:"view_original"},action:(e,{blocks:t,environment:n},o)=>{const a=t.at(0);a&&(0,ft().hg)(a)&&W().oD(n,{store:a,from:"view_original",callback:e})},disabled:()=>!i().A.state.online,renderTooltip:()=>r().A.formatMessage(yt().AY.unavailableOfflineTooltip),disableTooltip:()=>i().A.state.online}),dn=(0,yt().Ls)({key:"copy image",displayName:Qt.copyImage,analyticsName:Qt.copyImage.defaultMessage,svg:n(764781).V,validators:[We().v,n(198365).w,ue,(0,Je().A)(Oe().F)],closeParentMenu:!0,action:({blocks:e,environment:t})=>{var n;const o={action:"copy_image",block_type:null===(n=e[0])||void 0===n?void 0:n.getType(),from:"embed_block_actions"};(0,Y().o)(t,o,(n=>{W().BL({blockStore:e[0],environment:t}),n()}))},disabled:()=>!i().A.state.online,renderTooltip:()=>r().A.formatMessage(yt().AY.unavailableOfflineTooltip),disableTooltip:()=>i().A.state.online}),un=(0,yt().Ls)({key:"copy code",displayName:Qt.copyCode,closeParentMenu:!0,analyticsName:Qt.copyCode.defaultMessage,svg:x,validators:[We().v,(0,Ze().X)(l().xd.code)],track:{actionName:"copy_code"},action:async(e,{blocks:t,environment:n},o)=>{const a=t[0];await E().t({codeBlockStore:a,environment:n}),e()}}),mn=(0,yt().Ls)({key:"download source",displayName:Qt.downloadName,analyticsName:Qt.downloadName.defaultMessage,svg:n(973238).arrowInCircleDownIcon,validators:[We().v,(0,et().or)([Ce().k,Ee().I]),(0,et().or)([function(e){if(e.blocks){const t=e.blocks.at(0),n=null==t?void 0:t.getType();return Boolean(n&&(0,l().bI)(n))}return!1},fe]),(0,Je().A)(Ke().w)],closeParentMenu:!0,track:{actionName:"download"},action:(e,{blocks:t,environment:n},o)=>{const a=t[0];a&&(0,ft().hg)(a)&&W().qI({environment:n,store:a,callback:e})},disabled:()=>!i().A.state.online,renderTooltip:()=>r().A.formatMessage(yt().AY.unavailableOfflineTooltip),disableTooltip:()=>i().A.state.online}),gn=(0,yt().Ls)({key:"replace source",displayName:Qt.replaceName,analyticsName:Qt.replaceName.defaultMessage,svg:h().a,validators:[ce().p,(0,Je().A)(Re().v),We().v,(0,et().or)([Ce().k,Ee().I])],closeParentMenu:!0,action:({blocks:e})=>{W().wA({store:e[0]})},disabled:()=>!i().A.state.online,renderTooltip:()=>r().A.formatMessage(yt().AY.unavailableOfflineTooltip),disableTooltip:()=>i().A.state.online}),pn=(0,yt().Ls)({key:"view as spreadsheet prototype",displayName:Qt.viewAsSpreadsheetPrototype,analyticsName:Qt.viewAsSpreadsheetPrototype.defaultMessage,svg:n(421559).T,validators:[()=>!1,(0,Ie().S)("spreadsheet_prototype"),ce().p,(0,Je().A)(ve().w),$e,tt().Y,(0,Je().A)(je)],closeParentMenu:!0,action:({blocks:e})=>{const t=e[0];mt().A.setState({...mt().A.getState(),[t.id]:!0})}}),fn=(0,yt().Ls)({key:"link to import modal",displayName:Qt.linkToImportModal,analyticsName:Qt.linkToImportModal.defaultMessage,svg:n(820579).arrowLineDownIcon,validators:[ce().p,(0,Je().A)(ve().w),$e,()=>"db_create_empty_state"===_e().default.getEligibleGroup({experimentId:"adoption_import_entry_point",defaultGroup:"control"})],closeParentMenu:!0,action:({environment:e})=>{n(209660).Ow({currentTab:"imports",openedFrom:"block_action_import"}),(0,n(160475).t)({environment:e,action:"click",from:"block_action_import"});const t=n(191227).A.getOrCreateFlowId();n(559926).kY(e,{from:"block_action_import",flowId:t})}}),vn=(0,yt().Ls)({key:"fit to page width",displayName:Qt.simpleTableFitToPageWidth,analyticsName:Qt.simpleTableFitToPageWidth.defaultMessage,svg:n(665589).l,validators:[$e,ce().p,(0,Je().A)(ve().w),(0,Je().A)(Re().v),tt().Y],closeParentMenu:!0,action:({blocks:e,environment:t})=>gt().createAndCommit({userAction:"actionRegistry.fitSimpleTableToPageWidth",environment:t,canUndo:!0,perform:t=>{const n=e[0];dt().AA({simpleTableStore:n,transaction:t})}})}),yn=(0,yt().Ls)({key:"turn into collection",displayName:Qt.turnSimpleTableIntoCollection,analyticsName:Qt.turnSimpleTableIntoCollection.defaultMessage,svg:A().arrowSquarePathUpDownIcon,validators:[$e,ce().p,(0,Je().A)(ve().w),(0,Je().A)(Re().v),tt().Y,(0,Je().A)(je)],closeParentMenu:!0,action:({blocks:e,environment:t})=>gt().createAndCommit({userAction:"actionRegistry.turnSimpleTableIntoCollection",environment:t,canUndo:!0,perform:o=>{const a=e[0];a.getContentStores().flatMap((e=>{const t=Object.values(e.getProperties()).flat().filter(n(534177).O9);return(0,D().vSn)(t)})).length>0?n(792057).rG({message:(0,g.jsx)(R().sA,{...Qt.turnTableIntoDatabaseWarning})}):(dt().cP({environment:t,simpleTableStore:a,transaction:o}),(0,ct().I)({environment:t}),ut().wr())}})}),bn=[ce().p,(0,Je().A)(Ue().l),te().$,(0,Je().A)(Xe().P),(0,Je().A)(ke().K),Fo];function kn(e){const{property:t,propertySchema:o}=e,a=o.name,r=!i().A.state.online&&(0,n(334684).$)({propertyType:o.type,propertySchema:o,allowAIProperty:!0});return{key:`Edit Property ${a} ${t}`,displayName:a,analyticsName:"Edit property",searchName:a,validators:bn,closeParentMenu:!0,action:({blocks:e,originRect:a,environment:i})=>{"checkbox"===o.type?gt().createAndCommit({userAction:"actionRegistry.createEditPropertyAction",environment:i,canUndo:!0,perform:n=>{H().qS({stores:e,property:t,transaction:n})}}):a&&H().ho({environment:i,store:e[0],additionalStores:e.slice(1),property:t,surface:"page",rect:{...F().VP(a),width:200},preventClearSelection:!0,blockPropertyValueOverlayStore:(0,n(988268).j)(),collectionContextStore:(0,Q().U)(e[0])})},render:e=>(0,g.jsx)(n(26697).m,{disableTooltip:!r,placement:"right",renderTooltip:()=>(0,g.jsx)(R().sA,{id:"collectionAction.editProperty.offlineTooltip",defaultMessage:"Go online to edit property"}),render:t=>(0,g.jsx)(G().G,{...(0,n(383036).A)(t,e),propertySchema:o,format:G().e.Name,disabled:r,disabledFeedback:!0})})}}const hn=(0,vt().u)({key:"edit property",displayName:Qt.editPropertyName,analyticsName:Qt.editPropertyName.defaultMessage,svg:M().n,validators:bn,subActions:({blocks:e})=>{const t=e.at(0);if(!t)return[];const o=(0,Q().U)(t),a=t.getAssociatedCollectionStore();if(!a)return[];const i=(null==o?void 0:o.normalizedSchemaStore.state)??a.getSchema(),r=a.getFormat(),s=(0,n(390066).L)(r,i,void 0,d().jf.Collection);if(!s.collection_page_properties)return[];s.collection_page_properties.unshift({property:"title"});return[{key:0,title:void 0,render:e=>(0,g.jsx)(c().A,{...e}),actions:F().oE(s.collection_page_properties.map((t=>{const o=i[t.property],r=a.getSpaceStore();if(o&&(0,n(680288).g2)({propertySchema:o,property:t.property,blockStores:e,collectionSchema:i,collectionStore:a,spaceStore:r}))return kn({property:t.property,propertySchema:o})})))}]}}),Sn=(0,yt().Ls)({key:"clear date",displayName:Qt.clearDateName,analyticsName:Qt.clearDateName.defaultMessage,svg:I,validators:[ce().p,(0,Je().A)(Re().v),(0,et().or)([(0,ne().B)("timeline"),(0,ne().B)("calendar")])],closeParentMenu:!0,action:({environment:e,blocks:t})=>{const o=(0,Q().U)(t[0]);if(!o)return;const a=null==o?void 0:o.collectionViewStore();if(!a)return;const i=o.normalizedSchemaStore.state;gt().createAndCommit({userAction:"actionRegistry.clearDate",environment:e,canUndo:!0,perform:e=>{n(317406).MQ({stores:t,collectionViewStore:a,schema:i,transaction:e})}})}}),An=(0,yt().Ls)({key:"view collection view inline",displayName:Qt.turnintoInlineName,analyticsName:Qt.turnintoInlineName.defaultMessage,svg:A().arrowSquarePathUpDownIcon,validators:[function(e){if(e.blocks&&1===e.blocks.length){const[t]=e.blocks;return t.isType(l().xd.collectionViewPage)}return!1},(0,Je().A)(ie().C),le().X,(0,Je().A)(ve().w),(0,Je().A)(he().A),Ve().P],closeParentMenu:!0,action:({blocks:e,environment:t})=>gt().createAndCommit({userAction:"actionRegistry.viewCollectionViewInline",environment:t,canUndo:!0,perform:n=>{J().transformBlocks({environment:t,blocks:e,blockType:"collection_view",transaction:n}),(0,ct().I)({environment:t})}})}),Mn=(0,yt().Ls)({key:"view collection view as page",displayName:Qt.turnintoPageName,analyticsName:Qt.turnintoPageName.defaultMessage,svg:A().arrowSquarePathUpDownIcon,validators:[De().l,(0,Je().A)(ie().C),le().X,(0,Je().A)(ve().w),(0,Je().A)(Re().v),(0,Je().A)(xe().I)],closeParentMenu:!0,action:({blocks:e,environment:t})=>gt().createAndCommit({userAction:"actionRegistry.turnCollectionViewIntoCollectionViewPage",environment:t,canUndo:!0,perform:n=>{J().transformBlocks({environment:t,blocks:e,blockType:"collection_view_page",transaction:n})}})}),wn=(0,yt().Ls)({key:"turn into simple table",displayName:Qt.turnCollectionIntoSimpleTable,analyticsName:Qt.turnCollectionIntoSimpleTable.defaultMessage,svg:A().arrowSquarePathUpDownIcon,validators:[De().l,(In="table",e=>{if(e.blocks&&1===e.blocks.length){const[t]=e.blocks,n=Se().K.findCollectionViewBlockFromStore(t);if(n&&"collectionContextStore"in n)return n.collectionContextStore.getViewType()===In}return!1}),function(e){if(e.blocks&&1===e.blocks.length){const[t]=e.blocks;return t.hasSingleSourceAndNoLinkedCollections()}return!1},(0,Je().A)(ie().C),le().X,(0,Je().A)(ve().w),(0,Je().A)(Re().v),function(e){if(e.blocks&&1===e.blocks.length){const[t]=e.blocks;return 1===t.getCollectionViewStores().length}return!1},function(e){if(e.blocks&&1===e.blocks.length){const[t]=e.blocks,n=t.getCollectionStoreIfSingleSource();if(!n)return!1;const o=n.getSchema();return Object.values(o).map((e=>null==e?void 0:e.type)).every((e=>e&&de().gx[e]))}return!0},(0,Je().A)(xe().I)],closeParentMenu:!0,action:async({blocks:e,environment:t})=>{const o=e[0],a=o.isCrdtEnabled(),i=await de().Bp({environment:t,collectionViewBlockStore:o});if(i.some((e=>e.isCrdtEnabled()!==a)))return n(128933).D6({label:a?"Cannot turn database with non-CRDT pages into simple table on CRDT page":"Cannot turn database with CRDT pages into simple table on non-CRDT page"}),void u().log({level:"info",from:"blockActionRegistry",type:"crdt:turnCollectionIntoSimpleTableUseCrdtMismatch",data:{miscDataToConvertToString:{collectionViewBlockUseCrdt:a}}});gt().createAndCommit({userAction:"actionRegistry.turnCollectionIntoSimpleTable",environment:t,canUndo:!0,perform:e=>{dt().GD({environment:t,collectionViewBlockStore:o,pageStores:i,transaction:e}),(0,ct().I)({environment:t}),ut().wr()}})}});var In;const Nn=(0,yt().Ls)({key:"merge with csv",displayName:Qt.mergewithCSVName,analyticsName:Qt.mergewithCSVName.defaultMessage,validators:[ke().K,le().X,n(946561).s,Ge().I,(0,Je().A)(Re().v),(0,Je().A)((function(e){return e.blocks.some((e=>{const{mainEditorCurrentBlockStore:t}=a().default.state,o=Se().K.findCollectionViewBlockFromStore(e),i=o&&"collectionContextStore"in o?o.collectionContextStore:void 0,r=null==i?void 0:i.collectionStore();return!(!i||!r||i.permissionScopesStore.state.canEditContent)||Boolean((null==t?void 0:t.isCollectionView())&&(0,n(457419).S)(t)&&t.uiContains(e)&&t!==e)}))})),(0,Je().A)(n(333799).Q),(0,Je().A)(xe().I),(0,Je().A)(we().o)],closeParentMenu:!0,render:e=>(0,g.jsx)(Z().A,{...e,svg:n(613850).G,title:(0,g.jsx)(R().sA,{...Qt.mergewithCSVName}),tooltipText:(0,g.jsx)(R().sA,{...Qt.mergewithCSVCaption})}),action:({blocks:[e],environment:t})=>{(0,n(727722).T)({environment:t,store:e,analytics:{from:"topbar_more_menu"}})}}),xn=(0,yt().fi)({key:"database lock",displayName:Qt.lockDatabaseName,label:r().A.formatMessage(Qt.lockDatabaseName),renderTooltip:()=>r().A.formatMessage($().D.lockDatabaseMultiSourceTooltip),disableTooltip:e=>e.hasSingleSourceAndNoLinkedCollections(),getSvgIcon:({isChecked:e})=>t=>(0,g.jsx)(n(124524).I,{isLocked:e,style:t}),isChecked:e=>e.isLockedForAllUsers(),validators:[ke().K,Qe().a,(0,Je().A)(he().A),le().X,(0,Je().A)(we().o)],action:(e,t,n)=>q().zv({store:t.getFormatStore(),data:{block_locked:!t.isLockedForAllUsers(),block_locked_by:e.currentUser.id},transaction:n}),afterAction:()=>null}),Cn=(0,yt().fi)({key:"database views lock",displayName:Qt.lockDatabaseViewsName,label:r().A.formatMessage(Qt.lockDatabaseViewsName),renderTooltip:()=>r().A.formatMessage($().D.lockDatabaseViewsTooltip),getSvgIcon:()=>P().lockIcon,isChecked:e=>e.isLockedForAllUsers(),validators:[ke().K,(0,Je().A)(Qe().a),le().X,(0,Je().A)(we().o)],action:(e,t,n)=>q().zv({store:t.getFormatStore(),data:{block_locked:!t.isLockedForAllUsers(),block_locked_by:e.currentUser.id},transaction:n}),afterAction:()=>null}),_n=(0,yt().fi)({key:"wiki lock",displayName:Qt.lockWikiName,label:r().A.formatMessage(Qt.lockWikiName),getSvgIcon:()=>P().lockIcon,isChecked:e=>e.isLockedForAllUsers(),validators:[ke().K,Qe().a,he().A,le().X,(0,Je().A)(we().o)],action:(e,t,n)=>q().zv({store:t.getFormatStore(),data:{block_locked:!t.isLockedForAllUsers(),block_locked_by:e.currentUser.id},transaction:n}),afterAction:()=>null}),Ln=(0,yt().Ls)({key:"wiki unlock",displayName:Qt.unlockWikiName,analyticsName:Qt.unlockWikiName.defaultMessage,svg:n(701751).p,validators:[ke().K,Qe().a,he().A,le().X,Ue().l],closeParentMenu:!1,action:({blocks:e,environment:t})=>{const o=e[0];n(222299).X6({environment:t,store:o,lock:!1})}}),Tn=[We().v,ce().p,(0,Je().A)(Re().v),(0,Je().A)(Be().P)];function Pn(e=!1){return[...Tn,e?(0,et().or)([ae("external_object_instance"),Me]):ae("external_object_instance"),(0,Je().A)(Fe)]}const Bn=(0,yt().Ls)({key:"reload link preview",displayName:Qt.reloadPreview,analyticsName:Qt.reloadPreview.defaultMessage,svg:h().a,validators:Pn(!1),closeParentMenu:!0,action:({environment:e,blocks:t})=>{if(0===t.length)return;const n=t[0];n.isExternalObjectInstanceBlockStore()&&pt().updateExternalObjectInstance({environment:e,from:"page_more_menu",store:n,spaceId:n.getSpaceId()})},disabled:()=>!i().A.state.online,renderTooltip:()=>r().A.formatMessage(yt().AY.unavailableOfflineTooltip),disableTooltip:()=>i().A.state.online}),jn=(0,yt().Ls)({key:"turn preview into mention",displayName:Qt.turnPreviewIntoMention,analyticsName:Qt.turnPreviewIntoMention.defaultMessage,svg:A().arrowSquarePathUpDownIcon,validators:Pn(!0),closeParentMenu:!0,action:({environment:e,blocks:t})=>{0!==t.length&&gt().createAndCommit({userAction:"actionRegistry.turnPreviewIntoMention",environment:e,canUndo:!0,perform:o=>{t[0].isType("alias")?n(192180).O8({environment:e,blockStore:t[0],transaction:o}):pt().transformExternalObjectInstanceBlockIntoMention({environment:e,block:t[0],transaction:o})}})}}),Vn=(0,yt().Ls)({key:"turn bookmark into mention",displayName:Qt.turnBookmarkIntoMention,analyticsName:Qt.turnBookmarkIntoMention.defaultMessage,svg:A().arrowSquarePathUpDownIcon,validators:[ae("bookmark"),...Tn],closeParentMenu:!0,action:(e,t)=>{n(443120).uS({...e,event:t})}});function Dn(e=[]){return(0,yt().Ls)({key:"add to favorites",displayName:Qt.addtoFavoritesName,analyticsName:Qt.addtoFavoritesName.defaultMessage,svg:n(877788).w,validators:[...e,ze().M,n(49533)._,We().v,(0,Je().A)(be),(0,Je().A)(n(9402).P),(0,Je().A)(He),(0,Je().A)((0,ee().U)([it,(0,Je().A)(n(364859).q)])),(0,Je().A)(rt().Y)],closeParentMenu:!0,action:({blocks:e,environment:t})=>{const{sidebarSpaceViewStore:n}=a().default.state;if(n){const o=e[0];gt().createAndCommit({userAction:"actionRegistry.addToFavorites",environment:t,canUndo:!0,perform:e=>{(0,lt().s)({modificationType:"add",spaceViewStore:n,storesToModify:[o],transaction:e})}})}}})}const Rn=Dn([Oe().F]),Fn=Dn();function Un(e=[]){return(0,yt().Ls)({key:"remove from favorites",displayName:Qt.removefromFavoritesName,analyticsName:Qt.removefromFavoritesName.defaultMessage,svg:n(523773).d,validators:[...e,be,We().v,(0,Je().A)(rt().Y)],closeParentMenu:!0,action:({blocks:e,environment:t})=>{const{sidebarSpaceViewStore:n}=a().default.state;if(n){const o=e[0];gt().createAndCommit({userAction:"actionRegistry.removeFromFavorites",environment:t,canUndo:!0,perform:e=>{(0,lt().s)({modificationType:"remove",spaceViewStore:n,storesToModify:[o],transaction:e})}});"favorites"===(0,re().oK)(o)&&(0,ct().I)({environment:t})}}})}const zn=Un([Oe().F]),En=Un(),On=(0,yt().Ls)({key:"reload synced page",displayName:Qt.reloadSyncedPage,analyticsName:Qt.reloadSyncedPage.defaultMessage,svg:h().a,validators:[ce().p,(0,Je().A)(Re().v),(0,Je().A)(Be().P),We().v,ae("external_object_instance_page")],closeParentMenu:!0,action:({environment:e,blocks:t})=>{if(0===t.length)return;const n=t[0];n.isExternalObjectInstancePageBlockStore()&&pt().updateExternalObjectInstance({environment:e,from:"page_more_menu",store:n,spaceId:n.getSpaceId(),bypassCache:!0})},disabled:()=>!i().A.state.online,renderTooltip:()=>r().A.formatMessage(yt().AY.unavailableOfflineTooltip),disableTooltip:()=>i().A.state.online}),Kn=(0,yt().Ls)({key:"add page icon",displayName:Qt.addIcon,svg:L().emojiFaceIcon,analyticsName:Qt.addIcon.defaultMessage,validators:[ce().p,(0,Je().A)(Re().v),(0,Je().A)(we().o),(0,et().or)([me,ke().K]),function(e){return e.blocks.every((e=>!(null!=e&&e.getIcon())))}],closeParentMenu:!0,track:{actionName:"init_edit_icon"},action:(e,t,n)=>{Xn(e,t,n)}}),qn=(0,yt().Ls)({key:"edit icon",displayName:Qt.editIconName,analyticsName:Qt.editIconName.defaultMessage,svg:L().emojiFaceIcon,validators:[ce().p,(0,Je().A)(Re().v),(0,et().or)([me,ke().K,(0,ee().U)([qe().i,Te])])],closeParentMenu:!0,track:{actionName:"init_edit_icon"},action:(e,t,n)=>{Xn(e,t,n)}}),Yn=[ce().p,(0,Je().A)(Ue().l),te().$,(0,et().or)([(0,ne().B)("board"),(0,ne().B)("gallery")]),se,(0,Je().A)(Xe().P),(0,Je().A)(ke().K),Fo],Wn=(0,yt().Ls)({key:"property visibility",displayName:Qt.propertyVisibilityName,analyticsName:Qt.propertyVisibilityName.defaultMessage,validators:Yn,closeParentMenu:!0,action:({blocks:e,environment:t})=>{const n=e.at(0);if(!n)return;const o=(0,Q().U)(n);if(!o)return;const a=o.settingsStore;X().a2({collectionSettingsStore:a,item:{type:"propertyVisibility",timelineViewTab:"timeline"}}),(0,z().X)({environment:t,action:"click_show_hide_properties",collectionContextStore:o,from:"block_more_menu"})},render:e=>(0,g.jsx)(Z().A,{...e,showExtensionArrow:!1,title:r().A.formatMessage(Qt.propertyVisibilityName),svg:n(89849).eyeIcon})}),Hn=[ce().p,(0,Je().A)(Ue().l),te().$,(0,et().or)([(0,ne().B)("board"),(0,ne().B)("gallery")]),se,(0,Je().A)(Xe().P),(0,Je().A)(ke().K),Fo],Gn=(0,yt().Ls)({key:"layout",displayName:Qt.layoutName,analyticsName:Qt.layoutName.defaultMessage,validators:Hn,closeParentMenu:!0,action:({blocks:e,environment:t})=>{const n=e.at(0);if(!n)return;const o=(0,Q().U)(n);if(!o)return;const a=o.settingsStore;X().a2({collectionSettingsStore:a,item:{type:"layout"}}),(0,z().X)({environment:t,action:"click_layout",collectionContextStore:o,from:"block_more_menu"})},render:e=>(0,g.jsx)(Z().A,{...e,showExtensionArrow:!1,title:r().A.formatMessage(Qt.layoutName),svg:j})});function Xn(e,t,o){const{environment:a,originRect:i}=t;let s=t.blocks;if((0,qe().i)(t)&&Te(t)){const e=s[0].getParentStore();e instanceof n(295633).B&&(s=[e])}const c=e=>{var t;return e.isType("button")?null===(t=e.getAutomationStore())||void 0===t?void 0:t.getIconStore():e.getIconStore()},l=(e,t)=>{var o;s.forEach((t=>{(0,Y().o)(a,{action:"edit_icon",block_type:t.getType(),from:"block_more_menu"},(n=>{const o=c(t);if(!o)return;const{serverCommitResult:i}=gt().createAndCommit({userAction:"actionRegistry.editIcon",environment:a,canUndo:!0,perform:t=>{q().KY({store:o,value:e,transaction:t})}});i.then(n)}))})),"url"!==(null===(o=(0,d().WO)(e))||void 0===o?void 0:o.type)&&s.some((e=>e.isType("callout")))&&V().K.set({userId:a.currentUser.id,key:n(492696).c,value:e??""}),t&&t.keepVisible||K().I()},u=s.some((e=>{var t;return e.isType("button")?null===(t=c(e))||void 0===t?void 0:t.getValue():Boolean(e.getIcon())})),m=s.every((e=>e.isType("callout"))),p=[{type:"emoji",title:(0,g.jsx)(R().sA,{defaultMessage:"Emoji",id:"recordIcon.emojiTab.title"}),onChange:l},{type:"icon",title:(0,g.jsx)("div",{style:{display:"flex",gap:4},children:(0,g.jsx)(R().sA,{defaultMessage:"Icons",id:"recordIcon.iconTab.title"})}),onChange:l}];K().W(a,{recordIconLoggingData:{source:"bulk_block_selection"},originGap:4,originRect:i,popupWidth:st().jv,popupHeight:st().GF,isSmallWidth:!1,title:r().A.getIntl().formatMessage({defaultMessage:"Page icon",id:"recordIcon.emojiModalMenu.title"}),onDelete:u?()=>{s.forEach((e=>{const t=c(e);t&&gt().createAndCommit({userAction:"actionRegistry.editIcon",environment:a,canUndo:!0,perform:e=>{q().KY({store:t,value:void 0,transaction:e})}})})),K().I()}:void 0,currentTab:"emoji",isCallout:m,tabs:p,disableClearSelection:!0}),e()}const $n=(0,yt().fi)({key:"code wrap",displayName:Qt.wrapCodeKeywords,label:r().A.formatMessage(Qt.wrapCodeLabel),isChecked:e=>Boolean(e.getFormat().code_wrap),getSvgIcon:()=>n(412975).arrowTurnDownLeftIcon,validators:[We().v,(0,Ze().X)("code"),ce().p,(0,Je().A)(Re().v)],track:{actionName:"set_text_wrap"},action:(e,t,n)=>O().zA({stores:[t],update:{code_wrap:!t.getFormat().code_wrap},transaction:n}),afterAction:(e,t)=>{V().K.set({userId:t.currentUser.id,key:s().j.localCodeWrapPreferenceKey,value:e})}}),Qn=[ce().p,(0,Je().A)(Re().v),oe().c,ae("code"),(0,Je().A)(ie().C)],Zn=(0,yt().gy)({key:"code block languageMode actions",title:Qt.languageModeName,render:e=>(0,g.jsx)(c().A,{...e}),actions:F().Ul((0,n(15440).qX)().__DANGEROUS_MANUALLY_CHECK_GATES.map((e=>{const t=e.featureFlag?[...Qn,(0,Ie().S)(e.featureFlag)]:Qn,o=n(979004).languageModeMessages[e.name];return(0,yt().Ls)({key:`set language ${e.name} action`,displayName:o,analyticsName:`set language ${e.name}`,validators:t,closeParentMenu:!0,fuzzySearchKeywords:e.fuzzySearchKeywords,track:{actionName:"set_language"},action:(t,{environment:n,blocks:o},a)=>{V().K.set({userId:n.currentUser.id,key:s().j.localLanguagePreferenceKey,value:e.name});const{serverCommitResult:i}=gt().createAndCommit({userAction:"actionRegistry.languageModeActions",environment:n,canUndo:!0,perform:t=>{E().IA({language:e.name,blocks:o,transaction:t})}});i.then(t)},render:e=>(0,g.jsx)(n(81068).A,{...e,title:r().A.formatMessage(o)})})})),(e=>{var t;return null===(t=e.displayName)||void 0===t?void 0:t.toLowerCase()}))}),Jn=(0,vt().u)({key:"languageMode section",displayName:Qt.languageModeName,analyticsName:Qt.languageModeName.defaultMessage,svg:n(300985).Z,validators:Qn,subActions:()=>[Zn]}),eo=(0,yt().Ls)({key:"format code",displayName:Qt.formatCodeLabel,closeParentMenu:!0,analyticsName:Qt.formatCodeLabel.defaultMessage,svg:n(200582).m,validators:[(0,Ze().X)("code"),We().v,function(e){const t=e.blocks.at(0);if(!t)return!1;if(!t.isType("code"))return!1;const n=t.getLanguage();return Boolean(n.prettier)},ce().p,(0,Je().A)(Re().v)],action:async({blocks:e,environment:t})=>{const n=e[0];await E().aZ({codeBlockStore:n,environment:t})}}),to=(0,yt().Ls)({key:"open html in browser",displayName:Qt.openInBrowserLabel,closeParentMenu:!0,analyticsName:Qt.openInBrowserLabel.defaultMessage,validators:[We().v,(0,Ze().X)("code"),function(e){const t=e.blocks.at(0);if(!t)return!1;const{language:n}=t.getProperties();return"HTML"===(0,D().q4_)(n)},function(e){return!1}],action:({blocks:e,environment:t})=>{const n=e[0].getTitleValue(),o=(0,D().q4_)(n),a=window.open();a&&a.document.write(o)}}),no=(0,yt().Ls)({key:"work at notion",analyticsName:Qt.workAtNotion.defaultMessage,closeParentMenu:!0,displayName:Qt.workAtNotion,svg:n(481721).codeIcon,validators:[(0,Ze().X)("code"),function({environment:e}){const{sidebarSpaceStore:t}=a().default.state;if(null==t||!t.id)return!1;const o=n(878126).T.getData(e,{spaceId:null==t?void 0:t.id});return"free"===(0,n(795523).AI)(o)}],action:()=>{window&&window.open(n(427704).JZ.careers)}}),oo=[ce().p,(0,Je().A)(Re().v),ae("quote")];function ao(e){return(t,n)=>{V().K.set({userId:n.environment.currentUser.id,key:s().w.localSizePreferenceKey,value:e});const{serverCommitResult:o}=gt().createAndCommit({userAction:"actionRegistry.createQuoteSizeAction",environment:n.environment,canUndo:!0,perform:t=>{O().zA({stores:n.blocks,update:{quote_size:e},transaction:t})}});o.then(t)}}const io=(0,yt().gy)({key:"quote size actions",title:Qt.quoteSizeSection,render:e=>(0,g.jsx)(c().A,{...e}),actions:[(0,yt().Ls)({key:"quote size default",displayName:Qt.quoteSizeDefault,analyticsName:Qt.quoteSizeDefault.defaultMessage,validators:oo,closeParentMenu:!0,track:{actionName:"set_size"},action:ao(void 0)}),(0,yt().Ls)({key:"quote size large",displayName:Qt.quoteSizeLarge,analyticsName:Qt.quoteSizeLarge.defaultMessage,validators:oo,closeParentMenu:!0,track:{actionName:"set_size"},action:ao("large")})]}),ro=(0,vt().u)({key:"quote size",displayName:Qt.quoteSize,analyticsName:Qt.quoteSize.defaultMessage,svg:n(37719).P,validators:oo,subActions:()=>[io]}),so=[ce().p,(0,Je().A)(Re().v),ae("numbered_list"),Pe("numbered_list")],co=[ce().p,(0,Je().A)(Re().v),ae("bulleted_list"),Pe("bulleted_list")],lo=(0,vt().u)({key:"number format",displayName:Qt.listFormat,analyticsName:Qt.listFormat.defaultMessage,svg:M().n,validators:so,subActions:()=>[mo]});function uo(e){return(t,n)=>{const{serverCommitResult:o}=gt().createAndCommit({userAction:"actionRegistry.createListFormatAction",environment:n.environment,canUndo:!0,perform:t=>{O().zA({stores:n.blocks,update:{list_format:e},transaction:t})}});o.then(t)}}const mo=(0,yt().gy)({key:"text color actions",title:Qt.listFormatSection,render:e=>(0,g.jsx)(c().A,{...e}),actions:[(0,yt().Ls)({key:"list format default",displayName:Qt.listFormatDefault,analyticsName:Qt.listFormatDefault.defaultMessage,validators:so,closeParentMenu:!0,track:{actionName:"set_list_format"},action:uo(void 0)}),(0,yt().Ls)({key:"list format numbers",displayName:Qt.listFormatNumbers,analyticsName:Qt.listFormatNumbers.defaultMessage,validators:so,closeParentMenu:!0,track:{actionName:"set_list_format"},action:uo("numbers")}),(0,yt().Ls)({key:"list format letters",displayName:Qt.listFormatLetters,analyticsName:Qt.listFormatLetters.defaultMessage,validators:so,closeParentMenu:!0,track:{actionName:"set_list_format"},action:uo("letters")}),(0,yt().Ls)({key:"list format roman numerals",displayName:Qt.listFormatRoman,analyticsName:Qt.listFormatRoman.defaultMessage,validators:so,closeParentMenu:!0,track:{actionName:"set_list_format"},action:uo("roman")})]});function go(e){return(t,n)=>{const{serverCommitResult:o}=gt().createAndCommit({userAction:"actionRegistry.createBulletListFormatAction",environment:n.environment,canUndo:!0,perform:t=>{O().zA({stores:n.blocks,update:{bullet_list_format:e},transaction:t})}});o.then(t)}}const po=(0,yt().gy)({key:"bullet list format actions",title:Qt.listFormatSection,render:e=>(0,g.jsx)(c().A,{...e}),actions:[(0,yt().Ls)({key:"list format default",displayName:Qt.listFormatDefault,analyticsName:Qt.listFormatDefault.defaultMessage,validators:co,closeParentMenu:!0,track:{actionName:"set_list_format"},action:go(void 0)}),(0,yt().Ls)({key:"list format disc",displayName:Qt.listFormatDisc,analyticsName:Qt.listFormatDisc.defaultMessage,validators:co,closeParentMenu:!0,track:{actionName:"set_list_format"},action:go("disc")}),(0,yt().Ls)({key:"list format circle",displayName:Qt.listFormatCircle,analyticsName:Qt.listFormatCircle.defaultMessage,validators:co,closeParentMenu:!0,track:{actionName:"set_list_format"},action:go("circle")}),(0,yt().Ls)({key:"list format square",displayName:Qt.listFormatSquare,analyticsName:Qt.listFormatSquare.defaultMessage,validators:co,closeParentMenu:!0,track:{actionName:"set_list_format"},action:go("square")})]}),fo=(0,vt().u)({key:"bulleted format",displayName:Qt.listFormat,analyticsName:Qt.listFormat.defaultMessage,svg:M().n,validators:co,subActions:()=>[po]}),vo=[ze().M,ce().p,(0,Je().A)(Re().v),(0,ee().U)([We().v,Ee().I,function({blocks:e}){const t=e.at(0);if(!t)return!1;const n=t.getType(),o=t.getFormat();return Boolean(o.block_width)&&!Boolean(o.block_page_width)&&!Boolean(o.block_full_width)&&Boolean(n&&(0,l().lL)(n))}])],yo=(0,vt().u)({key:"alignment",displayName:Qt.alignmentName,analyticsName:Qt.alignmentName.defaultMessage,svg:y,validators:vo,subActions:()=>[ho]});function bo(e){return(t,n)=>{const{serverCommitResult:o}=gt().createAndCommit({userAction:"actionRegistry.createAlignmentFormatAction",environment:n.environment,canUndo:!0,perform:t=>{if(n.blocks&&n.blocks.length>0)for(const o of n.blocks)O().TP({environment:n.environment,store:o,alignment:e,transaction:t})}});o.then(t)}}const ko=(0,R().YK)({leftAlign:{id:"action.alignment.left.name",defaultMessage:"Left"},centerAlign:{id:"action.alignment.center.name",defaultMessage:"Center"},rightAlign:{id:"action.alignment.right.name",defaultMessage:"Right"}}),ho=(0,yt().gy)({key:"alignment format actions",title:Qt.alignmentName,render:e=>(0,g.jsx)(c().A,{...e}),actions:[(0,yt().Ls)({key:"alignment format left",displayName:ko.leftAlign,analyticsName:"Align left",validators:vo,closeParentMenu:!0,svg:y,track:{actionName:"set_alignment"},action:bo("left")}),(0,yt().Ls)({key:"alignment format center",displayName:ko.centerAlign,analyticsName:"Align center",validators:vo,closeParentMenu:!0,svg:f,track:{actionName:"set_alignment"},action:bo("center")}),(0,yt().Ls)({key:"alignment format right",displayName:ko.rightAlign,analyticsName:"Align right",validators:vo,closeParentMenu:!0,svg:k,track:{actionName:"set_alignment"},action:bo("right")})]}),So=(0,yt().Ls)({key:"edit image",displayName:Qt.cropImage,analyticsName:Qt.cropImage.defaultMessage,svg:_,validators:[ce().p,function(e){const t=e.blocks.at(0);return Boolean((null==t?void 0:t.isType("image"))&&(0,n(444796).AS)(t.getOriginalImageSource()))},Ge().I,(0,Je().A)(Re().v)],closeParentMenu:!0,action:({blocks:e,environment:t})=>{const o=e[0],a=o.getOriginalImageSource();a&&n(471266).A.openModal({blockStore:o,originalSource:a})},disabled:()=>!i().A.state.online,renderTooltip:()=>r().A.formatMessage(yt().AY.unavailableOfflineTooltip),disableTooltip:()=>i().A.state.online}),Ao={key:"block menu primary",render:e=>(0,g.jsx)(c().A,{...e}),shouldShowMoreOptions:!0,actions:[...[...[tn,yn,vn,An,Mn,wn,jn,Vn],n(443616).Rw,Wt,At,qn,Jt,nn],...[gn,dn,mn,Mt().pG,So,yo,Ct().N,Ct().S,Mt().R5,n(571157).i,cn],...[ro],...[fo],...[lo],...[Fn,xn,Pt().U,Nn],...[un,$n,Jn,eo,no,to],...[Ht().Zm,Ht().Lc],...[Bn],...[on],...[Gt().c5],...[Cn,_n,Ln,ln,fn,pn,Pt().H,hn,Sn,On]]},Mo={key:"block menu navigation",render:e=>(0,g.jsx)(c().A,{...e}),actions:[rn,...Tt().YO]},wo={key:"block menu manage",render:e=>(0,g.jsx)(c().A,{...e}),actions:[an,It().k,It().o,sn,xt().As,xt().nK,Lt().tw,Nt().z,n(263885).$]};function Io(){return[_t().LQ,Ao,Mo,wo,{key:Xt,render:e=>(0,g.jsx)(c().A,{...e}),actions:[Mt().Im,(0,Bt().F)("block_action_menu")]},{key:$t,render:e=>(0,g.jsx)(c().A,{...e}),actions:[wt().uK,(0,wt().KV)(),wt().qV]}]}const No=(0,vt().u)({key:"open in (group)",svg:S().arrowDiagonalUpRightIcon,displayName:Qt.openIn,analyticsName:Qt.openIn.defaultMessage,validators:[We().v,(0,Je().A)(Oe().F),Tt().kf],subActions:()=>[{key:0,title:void 0,render:e=>(0,g.jsx)(c().A,{...e}),actions:Tt().Wq}]}),xo={key:"card customization section",title:void 0,render:e=>(0,g.jsx)(c().A,{...e}),actions:[Gn,Wn]},Co={key:"collection menu primary",render:e=>(0,g.jsx)(c().A,{...e}),actions:[Fn,En,qn,hn]},_o={key:"collection menu secondary",render:e=>(0,g.jsx)(c().A,{...e}),actions:[No,Mt().Im]},Lo={key:"collection menu manage",render:e=>(0,g.jsx)(c().A,{...e}),actions:[It().o,sn,xt().As,Lt().tw,Nt().z]},To=[Co,xo,_o,Lo],Po=[Co,Mo,Lo],Bo={key:"library hover menu primary",render:e=>(0,g.jsx)(c().A,{...e}),actions:[Fn,En,en,qn,Pt().U]},jo={key:"library menu navigation",render:e=>(0,g.jsx)(c().A,{...e}),actions:[Tt().Sr,Tt().EC]},Vo={key:"library menu manage",render:e=>(0,g.jsx)(c().A,{...e}),actions:[It().o,sn,Lt().tw,Nt().z]},Do=[Bo,jo,Vo],Ro=[{key:"library bulk actions toolbar menu primary",render:e=>(0,g.jsx)(c().A,{...e}),actions:[Fn,En,qn,Pt().U]},jo,Vo];function Fo(e){return e.blocks.some((e=>e.getAssociatedCollectionStore()))}},882462:(e,t,n)=>{n.d(t,{Qi:()=>m,Z5:()=>p,fb:()=>g,x2:()=>l,yP:()=>u});n(944114);var o=()=>n(242422),a=()=>n(770063),i=()=>n(330361),r=()=>n(617871),s=()=>n(865377),c=()=>n(322769);function l(e){const t=(0,i().g)(e),n=[];for(const o of t)"block"===o.table&&n.push({blockStore:o,slackIntegrationStore:(0,a().v3)(e,{table:s().VY,id:o.id})});for(const{blockStore:o,slackIntegrationStore:a}of n)if(a.isReady()){if(a.getKeyStore("enabled").getValue())return{blockStore:o,slackIntegrationStore:a}}return{blockStore:e,slackIntegrationStore:(0,a().v3)(e,{table:s().VY,id:e.id})}}function d(e){const{spaceStore:t}=e,n=null==t?void 0:t.getBotSettingsStore().getValue();return(0,c().nH)({spaceBotSettings:n,integrationId:r().zG})}function u(){return o().default.checkGate({gateName:"legacy_slack_notifications"})}function m(e){const{spaceStore:t}=e;return d({spaceStore:t})||!1}function g(e){const{spaceStore:t}=e;return d({spaceStore:t})||!1}function p(e){const{spaceStore:t}=e;return!!d({spaceStore:t})&&o().default.checkGate({gateName:"enable_notion_activity_notifications_in_slack"})}},898563:(e,t,n)=>{n.d(t,{C6:()=>f,Eu:()=>d,FY:()=>r,MP:()=>g,YT:()=>l,d2:()=>p,fK:()=>v,lL:()=>c,mH:()=>y,oI:()=>s,sD:()=>u,yS:()=>m});var o=()=>n(314529),a=()=>n(483226),i=()=>n(680074);function r(e){(0,o().DO_NOT_USE_trackLegacy)(e,"add_slack_integration")}function s(e){(0,o().DO_NOT_USE_trackLegacy)(e,"remove_slack_integration")}function c(e,t){(0,o().DO_NOT_USE_trackLegacy)(e,"slack_notification_create",t)}function l(e,t){(0,o().DO_NOT_USE_trackLegacy)(e,"slack_notification_delete",t)}function d(e,t){(0,o().DO_NOT_USE_trackLegacy)(e,"slack_notification_update",t)}function u(e,t){const n=a().AI(),r=i().FX();(0,o().DO_NOT_USE_trackLegacy)(e,"slack_imports_invite_render_invite_popup",{subscription_tier:n,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id})}function m(e,t){const n=a().AI(),r=i().FX();(0,o().DO_NOT_USE_trackLegacy)(e,"slack_imports_invite_click_invite_button",{subscription_tier:n,domain_type:r,invited_user_count:t.invited_user_count,origin:t.origin,invite_token_query:t.inviteTokenQuery,invite_targets:t.inviteTargets,invite_flow_id:t.invite_flow_id})}function g(e,t){const n=a().AI(),r=i().FX();(0,o().DO_NOT_USE_trackLegacy)(e,"slack_imports_invite_completed",{subscription_tier:n,domain_type:r,invited_user_count:t.invited_user_count,is_success:t.is_success,origin:t.origin,invite_flow_id:t.invite_flow_id,error:t.error,invite_stage:t.invite_stage})}function p(e,t){const n=a().AI(),r=i().FX();(0,o().DO_NOT_USE_trackLegacy)(e,"slack_imports_invite_dismiss_popup",{subscription_tier:n,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id})}function f(e,t){const n=a().AI(),r=i().FX();(0,o().DO_NOT_USE_trackLegacy)(e,"slack_imports_invite_click_select_all",{subscription_tier:n,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id,invited_user_count:t.invited_user_count,is_unselect:t.is_unselect,invite_token_query:t.invite_token_query})}function v(e,t){const n=a().AI(),r=i().FX();(0,o().DO_NOT_USE_trackLegacy)(e,"slack_imports_invite_start_slack_integration",{subscription_tier:n,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from})}function y(e,t){const n=a().AI(),r=i().FX();(0,o().DO_NOT_USE_trackLegacy)(e,"slack_imports_invite_complete_slack_integration",{subscription_tier:n,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from,is_success:t.is_success})}},917992:(e,t,n)=>{n.d(t,{b:()=>a,oU:()=>o});const o={"1:1":{width:1,height:1},"5:4":{width:5,height:4},"4:3":{width:4,height:3},"7:5":{width:7,height:5},"3:2":{width:3,height:2},"5:3":{width:5,height:3},"16:9":{width:16,height:9}},a={crop:{unit:"%",x:0,y:0,width:100,height:100},mask:"None"}},946561:(e,t,n)=>{n.d(t,{s:()=>a});var o=()=>n(929219);function a(){return o().A.state.online}},964179:(e,t,n)=>{n.d(t,{w:()=>o});n(898992),n(823215);function o(e){return e.blocks.every((e=>{const t=e.getRecordStoreUIParent();return Boolean(t&&t.canEdit()&&e.isDefined()&&e.getParentId()!==t.id)}))}},985630:(e,t,n)=>{n.d(t,{V:()=>d});var o=()=>n(568891),a=()=>n(534177),i=()=>n(439549),r=()=>n(76726),s=()=>n(427767),c=()=>n(111232),l=()=>n(547149);async function d({userSettingsStore:e,spaceViewStore:t,spaceUserStore:n,selectedItems:d,libraryViewName:u,analyticsFrom:m,environment:g}){switch("teamspaceDirectory"!==u&&"libraryExternalPages"!==u&&(0,r().xN)({environment:g,eventProperties:{from:m,section_type:u,item_count:d.length}}),u){case"favorites":l().createAndCommit({userAction:"libraryBulkRowActions.addToFavorites",environment:g,canUndo:!0,perform:e=>{(0,c().s)({modificationType:"add",spaceViewStore:t,storesToModify:d,transaction:e})}});break;case"shared":case"private":const r="shared"===u?t.getSharedPagesStore():t.getPrivatePagesStore(),m="shared"===u?(0,s().a)({environment:g,spaceViewStore:t,userSettingsStore:e,type:u}).state.visiblePagesStores[0]:void 0;await i().Hu({type:u,environment:g,droppedStores:d,duplicate:!1,duplicateActions:void 0,isDroppingOnFullSection:!1,spaceUserStore:n,isTopLevelItem:!0,droppedDirection:o().bH.Above,targetParentStore:r,targetStore:m});break;case"recents":case"teamspaceDirectory":case"libraryExternalPages":case"myMeetings":break;default:(0,a().HB)(u)}}},988268:(e,t,n)=>{n.d(t,{j:()=>r});var o=()=>n(747100),a=()=>n(543886),i=()=>n(405170);function r(){return o().Gb()?i().A:a().A}}}]);