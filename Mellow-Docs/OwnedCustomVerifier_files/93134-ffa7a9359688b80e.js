"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[93134],{13898:(e,t,a)=>{a.d(t,{A:()=>i});a(296540);var n=()=>a(970236),r=()=>a(69708),o=a(474848);function i(e){return(0,o.jsx)(n().E,{color:"blue",style:e.style,content:(0,o.jsx)(r().sA,{id:"betaBadgeComponent.label",defaultMessage:"Beta"})})}},78080:(e,t,a)=>{a.d(t,{E:()=>g,p:()=>h});var n=()=>a(153321),r=(a(296540),()=>a(401497)),o=()=>a(807449),i=()=>a(406094),s=()=>a(631524),l=()=>a(493552),d=()=>a(995847),c=()=>a(69708),u=()=>a(100622),p=()=>a(554283),m=a(474848);function g(e){const{aiChatFeatureController:t,icon:a,text:g,useSecondaryForeground:y=!1,onClickRemove:v,onClick:f,buttonPopupEvents:x,isDisabled:b}=e,I=(0,c().tz)(),[k,S]=(0,p().B)(),M="agent_mobile"===(null==t?void 0:t.aiChatType)||S,j=(0,r().eP)(),w=(0,r().IS)((()=>({iconArea:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,flexShrink:0},container:{maxWidth:"50%",borderRadius:1e3,height:28,padding:"2px 4px",display:"flex",alignItems:"center",gap:4,outline:"none",position:"relative",pointerEvents:"auto",cursor:f?"pointer":"default",border:`1px solid ${h({themeMode:j,usesElevatedDarkModeBackground:null==t?void 0:t.usesElevatedDarkModeBackground})}`},gradientOverlay:{position:"absolute",insetInlineEnd:0,top:0,bottom:0,width:40,background:`linear-gradient(to right, transparent 0%, ${"dark"===j?null!=t&&t.usesElevatedDarkModeBackground?u().Tj.gray.background.elevated:u().Tj.background.secondary:u().Tj.background.elevated} 30%)`,borderStartStartRadius:0,borderStartEndRadius:1e3,borderEndEndRadius:1e3,borderEndStartRadius:0,zIndex:1,pointerEvents:"none"},textArea:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",minWidth:0,flex:1,paddingInlineEnd:6},removeButtonArea:{position:"absolute",insetInlineEnd:6,width:16,height:16,zIndex:2,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"auto"},removeButton:{width:18,height:18,display:"flex",alignItems:"center",justifyContent:"center",color:u().Tj.text.secondary},removeButtonHovered:{background:"light"===j?"rgba(0, 0, 0, 0.1)":"rgba(255, 255, 255, 0.1)",borderRadius:1e3,color:u().Tj.text.primary}})),[f,null==t?void 0:t.usesElevatedDarkModeBackground,j]);return(0,m.jsxs)(i().A,{style:w.container,hoveredStyle:{background:x?void 0:"none"},ref:k,disabled:b,onClick:b?void 0:f,...x,children:[(0,m.jsx)("div",{style:w.iconArea,children:a}),g?(0,m.jsx)(l().D,{styleKey:"captionRegular",colorVariant:y?"secondary":"accentPrimary",style:w.textArea,children:g}):null,v&&!b?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(n().P.div,{style:w.gradientOverlay,initial:!1,animate:{opacity:M?1:0}}),(0,m.jsx)(n().P.div,{initial:!1,animate:{opacity:M?1:0,visibility:M?"visible":"hidden",scale:M?1:.8},style:w.removeButtonArea,children:(0,m.jsx)(s().p,{style:w.removeButton,hoveredStyle:w.removeButtonHovered,"aria-label":I.formatMessage({id:"unifiedChatContextChip.removeButton.ariaLabel",defaultMessage:"Remove"}),onMouseDown:e=>{e.preventDefault()},onClick:v,children:(0,m.jsx)(o().I,{icon:d().xMarkSmallIcon,size:"xs"})})})]}):void 0]})}function h(e){const{themeMode:t,usesElevatedDarkModeBackground:a}=e;return a&&"dark"===t?u().Tj.border.strong:u().Tj.border.primary}},369393:(e,t,a)=>{a.d(t,{v:()=>i});var n=a(296540);const r=400,o=150;function i(e){const{immediateState:t,isEqual:a=Object.is,openDelayMs:i=r,closeDelayMs:s=o}=e,[l,d]=(0,n.useState)(!1),[c,u]=(0,n.useState)(void 0),p=Boolean(c&&!a(t,c));(0,n.useEffect)((()=>{if(p){const e=setTimeout((()=>{u(void 0)}),s);return()=>clearTimeout(e)}}),[p,s]);const m=Boolean(t&&!a(t,c));(0,n.useEffect)((()=>{if(t&&m){const e=setTimeout((()=>{u(t)}),i);return()=>clearTimeout(e)}}),[t,m,i]);const[g,h]=(0,n.useState)(void 0),y=g??(l?void 0:c),v=(0,n.useCallback)((()=>{h(y)}),[y]),f=(0,n.useCallback)((()=>{h(void 0)}),[]),x=(0,n.useCallback)((()=>{f(),d(!0)}),[f]);return(0,n.useEffect)((()=>{d(!1)}),[c]),{state:y,pinPopup:v,unpinPopup:f,hasBeenHovering:Boolean(t&&a(t,y)),isPinned:Boolean(g),dismissPopup:x}}},393134:(e,t,a)=>{a.d(t,{q:()=>ee});a(944114),a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(898992),a(354520),a(672577),a(581454),a(737550);var n=a(296540),r=()=>a(907258),o=()=>a(726637),i=()=>a(484714),s=()=>a(590526),l=()=>a(401497),d=()=>a(784489),c=()=>a(295633),u=()=>a(718827),p=()=>a(250910),m=()=>a(807449),g=()=>a(695115),h=()=>a(546926),y=()=>a(631524),v=()=>a(890492),f=()=>a(81068),x=()=>a(663639),b=()=>a(736847),I=()=>a(324254),k=()=>a(107023),S=()=>a(340498),M=a(474848);const j={viewBox:"0 0 16 16",fittedViewBox:"2.12 2.97 11.75 11.7",directional:!0,svg:(0,M.jsx)("path",{d:"M4 2.975c-1.036 0-1.875.84-1.875 1.875v5.5c0 1.036.84 1.875 1.875 1.875h3.676l2.84 2.307a.625.625 0 0 0 1.018-.485v-1.822H12c1.036 0 1.875-.84 1.875-1.875v-5.5c0-1.035-.84-1.875-1.875-1.875zM3.375 4.85c0-.345.28-.625.625-.625h8c.345 0 .625.28.625.625v5.5c0 .345-.28.625-.625.625h-1.09a.625.625 0 0 0-.626.625v1.134l-1.992-1.619a.63.63 0 0 0-.394-.14H4a.625.625 0 0 1-.625-.625z"})},w=(0,S().wt)("bubbleRightSmall",j,"small");const B={viewBox:"0 0 16 16",fittedViewBox:"1.29 1.23 13.41 13.54",svg:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("path",{d:"M13.81 9.4a.625.625 0 0 1 .644 1.063l-5.1 3.851a2.246 2.246 0 0 1-2.707 0l-5.101-3.851-.093-.086a.626.626 0 0 1 .738-.978l.109.066 5.1 3.851a.995.995 0 0 0 1.2 0l5.1-3.851z"}),(0,M.jsx)("path",{d:"M6.8 1.579a2.245 2.245 0 0 1 2.552.106l4.443 3.355c.936.707.995 2.07.175 2.858l-.175.15-4.443 3.354c-.8.604-1.904.604-2.705 0L2.205 8.048a1.885 1.885 0 0 1 0-3.008l4.442-3.355zm1.8 1.104a.995.995 0 0 0-1.2 0L2.958 6.037a.636.636 0 0 0 0 1.013L7.4 10.405a.996.996 0 0 0 1.2 0l4.442-3.355L13.1 7a.635.635 0 0 0-.058-.963z"})]})},A=(0,S().wt)("layerMultipleSmall",B,"small"),C={viewBox:"0 0 16 16",fittedViewBox:"0.77 2.91 13.9 10.73",svg:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("path",{d:"M14.465 3.12a.716.716 0 0 0-1.007 0l-.54.538 1.013 1.013.556-.556v-.012a.716.716 0 0 0-.022-.984M6.026 4.134c-.294 0-.585.069-.848.2l-.518.26a.625.625 0 0 0 .56 1.118l.517-.26a.65.65 0 0 1 .289-.068h.071a.576.576 0 0 1 .244 1.098L2.385 8.327a2.786 2.786 0 0 0 1.179 5.31h.062c.755 0 1.48-.3 2.014-.833l.135-.135a.625.625 0 0 0-.884-.884l-.135.135c-.3.3-.706.468-1.13.468h-.062a1.536 1.536 0 0 1-.65-2.928l3.955-1.846a1.826 1.826 0 0 0-.772-3.48z"}),(0,M.jsx)("path",{d:"M13.45 5.152 12.435 4.14 6.81 9.757a1 1 0 0 0-.21.349l-.237.764-.001.003c-.056.21.139.423.353.348l.759-.235a.8.8 0 0 0 .354-.212z"})]})},E=(0,S().wt)("pencilScribbleSmall",C,"small");const P={viewBox:"0 0 16 16",fittedViewBox:"0.97 2.37 14.05 11.25",svg:(0,M.jsx)("path",{d:"M12.625 11.225h.575A1.825 1.825 0 0 0 15.025 9.4V4.2A1.825 1.825 0 0 0 13.2 2.375h-8A1.825 1.825 0 0 0 3.375 4.2v.575H2.8A1.825 1.825 0 0 0 .975 6.6v5.2c0 1.008.817 1.825 1.825 1.825h8a1.825 1.825 0 0 0 1.825-1.825zm-7.425 0h6.175v.575a.575.575 0 0 1-.575.575h-8a.575.575 0 0 1-.575-.575V6.6c0-.318.258-.575.575-.575h.575V9.4c0 1.008.817 1.825 1.825 1.825M4.625 9.4V4.2c0-.318.257-.575.575-.575h8c.318 0 .575.257.575.575v5.2a.575.575 0 0 1-.575.575h-8a.575.575 0 0 1-.575-.575"})},R=(0,S().wt)("rectangleOnRectangleSmall",P,"small");const _={viewBox:"0 0 16 16",fittedViewBox:"1.87 1.87 12.25 12.25",svg:(0,M.jsx)("path",{d:"M8 1.875a6.125 6.125 0 1 0 0 12.25 6.125 6.125 0 0 0 0-12.25M3.125 8a4.876 4.876 0 0 1 4.3-4.841V8c0 .194.098.375.26.482l4.055 2.646A4.875 4.875 0 0 1 3.125 8m5.45-1.012v-3.83a4.87 4.87 0 0 1 3.289 1.87zm3.794 3.177L9.086 8.022l3.368-2.008c.27.607.421 1.279.421 1.986a4.85 4.85 0 0 1-.506 2.165"})},T=(0,S().wt)("viewChartSmall",_,"small");var D=()=>a(179034),z=()=>a(201980),V=()=>a(69708),O=()=>a(100622),L=()=>a(754858),G=()=>a(219348),K=()=>a(761894),F=()=>a(78080),H=()=>a(626001),W=()=>a(13898),q=()=>a(187820),N=()=>a(16006),$=()=>a(729368),X=()=>a(366437),Y=()=>a(483795),U=()=>a(474393);const Z=(0,V().YK)({generateFailed:{id:"aiGenerateInput.error.noResults",defaultMessage:"Failed to generate image. Please try again."},generateRequestError:{id:"aiGenerateInput.error.request",defaultMessage:"An error occurred. Please try again."},submitAriaLabel:{id:"aiGenerateInput.submit.ariaLabel",defaultMessage:"Generate image"},styleDefault:{id:"aiGenerateInput.style.default.v2",defaultMessage:"General"},styleDiagram:{id:"aiGenerateInput.style.diagram",defaultMessage:"Diagram"},styleSlide:{id:"aiGenerateInput.style.slide",defaultMessage:"Slide"},styleChart:{id:"aiGenerateInput.style.chart",defaultMessage:"Chart"},styleInfographic:{id:"aiGenerateInput.style.infographic",defaultMessage:"Infographic"},styleComic:{id:"aiGenerateInput.style.comic",defaultMessage:"Comic"},styleSketch:{id:"aiGenerateInput.style.sketch",defaultMessage:"Sketch"},styleCartoon:{id:"aiGenerateInput.style.cartoon",defaultMessage:"Cartoon"},styleMockup:{id:"aiGenerateInput.style.mockup",defaultMessage:"Mockup"},stylePhoto:{id:"aiGenerateInput.style.photo",defaultMessage:"Photo"},styleModernArt:{id:"aiGenerateInput.style.modernArt",defaultMessage:"Modern Art"},stylePattern:{id:"aiGenerateInput.style.pattern",defaultMessage:"Pattern"}}),J=20,Q={default:{id:"default",messageKey:"styleDefault",icon:a(608145).sparklesSmallIcon},diagram:{id:"diagram",messageKey:"styleDiagram",icon:a(506290).F},slide:{id:"slide",messageKey:"styleSlide",icon:R},chart:{id:"chart",messageKey:"styleChart",icon:T},infographic:{id:"infographic",messageKey:"styleInfographic",icon:A},mockup:{id:"mockup",messageKey:"styleMockup",icon:a(811823).iPhoneSmallIcon},photo:{id:"photo",messageKey:"stylePhoto",icon:a(782798).R},comic:{id:"comic",messageKey:"styleComic",icon:w},sketch:{id:"sketch",messageKey:"styleSketch",icon:E},cartoon:{id:"cartoon",messageKey:"styleCartoon",icon:a(709837).emojiFaceSmallIcon},modern_art:{id:"modern_art",messageKey:"styleModernArt",icon:R},pattern:{id:"pattern",messageKey:"stylePattern",icon:A}};function ee(e){const{aiGeneration:t,expansionState:a}=e,n="collapsible"===a?e.onExpandStart:()=>{},r=!1!==e.showRolloutBadge;return(0,M.jsx)(ae,{aiGeneration:t,expansionState:a,onExpandStart:n,showRolloutBadge:r,styleOptionIds:e.styleOptionIds,placeholder:e.placeholder})}function te(e){const{store:t,onRemove:a}=e,n=(0,s().K8)((()=>{if(!t)return;return{icon:t.getIcon(),iconRecordCategory:(0,q().Te)(t)}}),[t]);return t?(0,M.jsx)(F().E,{isDisabled:!1,icon:n?(0,M.jsx)(q().B6,{disabled:!0,icon:n.icon,isEmptyPage:!1,size:16,iconRecordCategory:n.iconRecordCategory}):null,text:(0,M.jsx)(N().A,{store:t}),onClickRemove:a}):null}function ae(e){const{aiGeneration:t,expansionState:a,onExpandStart:S,showRolloutBadge:j,placeholder:w}=e,B=(0,n.useMemo)((()=>e.styleOptionIds.map((e=>Q[e]))),[e.styleOptionIds]),A=(0,V().tz)(),C=(0,i().v3)(),{store:E,setValue:P}=(0,Y().AI)({initialValue:void 0}),R=n.useRef(null),[_,T]=(0,n.useState)(!1),[F,q]=(0,n.useState)("expanded"===a),[N,ee]=(0,n.useState)("default"),[ae,ne]=(0,n.useState)(!0),re=(0,s().K8)((()=>E.getValue()),[E]),oe=(0,z().w9s)(re),ie=(0,l().eP)(),se=(0,s().O$)(r().AppStoreSidebarSpaceViewStore),le=(0,s().O$)(r().AppStoreSidebarSpaceStore),de=(0,G().DV)(se),ce=(0,s().K8)((()=>{if(!le)return;return c().B.createChildStore(le,{table:D().ev,id:t.blockId,spaceId:t.spaceId}).getNavigableBlockStore()}),[t.blockId,t.spaceId,le]),ue=(0,n.useMemo)((()=>{if(!le)return[];const e=(0,z().moK)(re);if(!e.length)return[];const t=new Set,a=[];for(const n of e)ae&&n.id===(null==ce?void 0:ce.id)||t.has(n.id)||(t.add(n.id),a.push({pointer:n,store:c().B.createChildStore(le,n)}));return a}),[re,ae,null==ce?void 0:ce.id,le]),pe=Boolean(ce)&&ae||ue.length>0,me=(0,n.useCallback)((()=>{ne(!1)}),[]),ge=(0,n.useCallback)((e=>{const t=E.getValue();if(!t)return;let a=!1;const n=t.filter((t=>!(0,H().Bw)(t,e,le??void 0,void 0)||(a=!0,!1)));a&&P(n)}),[E,P,le]),he=(0,l().IS)((()=>({collapsedInputBox:{display:"flex",flexDirection:"row",alignItems:"center",borderRadius:8,border:`1px solid ${O().Tj.border.primary}`,backgroundColor:O().Tj.background.primary,padding:"12px 10px",gap:8,cursor:"pointer",width:"100%"},avatarWrapper:{flexShrink:0},collapsedInputWrapper:{flex:1,display:"flex",alignItems:"center",cursor:"text"},collapsedPlaceholder:{minHeight:20,fontSize:14,lineHeight:"20px",color:O().Tj.text.tertiary,cursor:"text"},betaBadgeWrapper:{flexShrink:0},inputBox:{display:"flex",flexDirection:"column",borderRadius:8,border:_?`2px solid ${O().Tj.blue.icon.accentPrimary}`:`1px solid ${O().Tj.border.primary}`,backgroundColor:O().Tj.background.primary,paddingTop:_?11:12,paddingInlineEnd:_?11:12,paddingBottom:_?6:7,paddingInlineStart:_?11:12,minHeight:120,position:"relative"},inputWrapper:{flex:1,display:"flex",flexDirection:"column",minHeight:0,cursor:"text"},contextChipRow:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:6,marginBottom:10},text:{flex:1,minHeight:20,fontSize:14,lineHeight:"20px",marginBottom:30,marginInlineStart:5},placeholder:{minHeight:20,fontSize:14,lineHeight:"20px"},bottomRow:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginTop:"auto"},leftControls:{display:"flex",alignItems:"center",gap:8,minWidth:0},stylePickerButton:{marginInlineStart:-6},sendButtonWrapper:{display:"flex",alignItems:"center",gap:8},sendButton:{width:J,height:J,borderRadius:30,pointerEvents:"auto",background:O().Tj.blue.icon.accentPrimary},sendButtonIcon:{width:14,height:14,fill:O().Tj.text.inversePrimary},sendButtonHovered:{background:(0,u().i)({color:O().Tj.blue.background.accentPrimary,mode:ie})},sendButtonPressed:{background:(0,u().yZ)({color:O().Tj.blue.background.accentPrimary,mode:ie})}})),[_,ie]),ye=B.find((e=>e.id===N));(0,n.useEffect)((()=>{if(!B.length)return;B.some((e=>e.id===N))||ee(B[0].id)}),[N,B]);const ve=(0,n.useCallback)((async()=>{const e=(0,z().q4_)(re).trim();if(!e)return;L().Rt(C,{source:t.source,status:"submit",interaction_type:"submit",style:N});const a=Date.now();t.onGenerationStart({prompt:e});try{var n;const l=await L().a6({blockId:t.blockId,prompt:e,environment:C,spaceId:t.spaceId,size:t.size,n:t.n??1,source:t.source,style:N}),c=Date.now()-a,u=null==l||null===(n=l.images)||void 0===n?void 0:n[0];if(!l||l.error||!u){var r,o,i,s;L().Rt(C,{source:t.source,duration_ms:c,status:"error",error_code:(null==l||null===(r=l.error)||void 0===r?void 0:r.code)??"no_images",...null!=l&&null!==(o=l.images)&&void 0!==o&&null!==(o=o[0])&&void 0!==o&&o.model?{model:null===(i=l.images[0])||void 0===i?void 0:i.model}:{}}),t.onGenerationError({});const e=null!=l&&null!==(s=l.error)&&void 0!==s&&s.code?L().ys(l.error.code):A.formatMessage(Z.generateFailed);return void(0,d().f)({item:{durationMs:"keep",label:e}})}L().Rt(C,{source:t.source,duration_ms:c,status:"success",...u.model?{model:u.model}:{}}),await t.onGenerationEnd({url:u.url})}catch{t.onGenerationError({});const e=A.formatMessage(Z.generateRequestError);(0,d().f)({item:{durationMs:"keep",label:e}})}}),[re,t,C,A,N]),fe=(0,n.useCallback)((e=>{e.shiftKey||ve()}),[ve]),xe=(0,n.useCallback)((()=>{T(!0)}),[]),be=(0,n.useCallback)((()=>{T(!1)}),[]),Ie=(0,n.useCallback)((()=>{var e;null===(e=R.current)||void 0===e||e.focus()}),[]),ke=(0,n.useCallback)((e=>{var t;e.target!==e.currentTarget||"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),null===(t=R.current)||void 0===t||t.focus())}),[]),Se=(0,n.useCallback)((()=>{"collapsible"===a&&(L().Rt(C,{source:t.source,status:"expand",interaction_type:"expand"}),S(),q(!0),setTimeout((()=>{var e;null===(e=R.current)||void 0===e||e.focus()}),0))}),[a,S,C,t.source]);return(0,n.useEffect)((()=>{var e;"expanded"===a&&(null===(e=R.current)||void 0===e||e.focus())}),[a]),"collapsible"!==a||F?(0,M.jsxs)("div",{style:he.inputBox,children:[(0,M.jsxs)("div",{style:he.inputWrapper,onClick:Ie,onKeyDown:ke,role:"textbox",tabIndex:0,"aria-label":w,children:[pe?(0,M.jsxs)("div",{style:he.contextChipRow,children:[ae?(0,M.jsx)(te,{store:ce,onRemove:ce?me:void 0}):null,ue.map((({pointer:e,store:t})=>(0,M.jsx)(te,{store:t,onRemove:()=>ge(e)},t.id)))]}):null,(0,M.jsx)($().A,{ref:R,placeholder:w,disabled:!1,store:E,style:he.text,placeholderStyle:he.placeholder,pasteBehavior:"inline",disableSlashCommands:!0,disableEmbedMenu:!0,disableEmojiCommands:!0,disableComment:!0,disableSelectAllBlocks:!0,disableSelectionDrag:!0,onEnter:fe,onCommandEnter:ve,onFocus:xe,onBlur:be,disableMobileActionBar:!0,disabledMentionTypes:{reminder:!0,property:!0,user:!0},disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,inPageFind:X().Os.none})]}),(0,M.jsxs)("div",{style:he.bottomRow,children:[(0,M.jsx)("div",{style:he.leftControls,children:(0,M.jsx)(p().A,{popupType:o().A.isMobile?p().z.BottomSheet:p().z.Popup,alignmentToOrigin:"start",placementToOrigin:"top",originGap:4,onOpen:()=>{L().Rt(C,{source:t.source,status:"open_style_menu",interaction_type:"open_style_menu"})},renderOrigin:e=>(0,M.jsx)(y().p,{style:he.stylePickerButton,colorVariant:"secondary",iconLeading:ye?{icon:ye.icon,size:"default",colorVariant:"secondary"}:void 0,iconTrailing:{icon:I().arrowChevronSingleDownSmallIcon,size:"sm",colorVariant:"secondary"},...e,children:ye?A.formatMessage(Z[ye.messageKey]):""}),render:e=>(0,M.jsx)(v().A,{menuType:h().gu.Popup,children:(0,M.jsx)(x().A,{type:x().O.Vertical,initialFocus:B.findIndex((e=>e.id===N)),sections:[{key:"styles",render:e=>(0,M.jsx)(b().A,{...e}),items:B.map((a=>({key:a.id,action:()=>{a.id!==N&&L().Rt(C,{source:t.source,status:"change_style",interaction_type:"change_style",style:a.id}),ee(a.id),e.close()},render:e=>(0,M.jsx)(f().A,{...e,icon:(0,M.jsx)(m().I,{icon:a.icon,size:"default"}),title:A.formatMessage(Z[a.messageKey]),isChecked:N===a.id})})))}]})})})}),(0,M.jsxs)("div",{style:he.sendButtonWrapper,children:[j?(0,M.jsx)(U().m,{}):null,(0,M.jsx)(g().A,{testId:"ai-generate-send-button",icon:k().arrowStraightUpFillSmallIcon,onClick:ve,disabled:oe,style:he.sendButton,iconStyle:he.sendButtonIcon,hoveredStyle:he.sendButtonHovered,pressedStyle:he.sendButtonPressed,size:"lg",ariaLabel:A.formatMessage(Z.submitAriaLabel)})]})]})]}):(0,M.jsxs)("button",{type:"button",style:he.collapsedInputBox,onClick:Se,children:[(0,M.jsx)("div",{style:he.avatarWrapper,children:(0,M.jsx)(K().x,{accessory:de,variant:"xsmall"})}),(0,M.jsx)("div",{style:he.collapsedInputWrapper,children:(0,M.jsx)("span",{style:he.collapsedPlaceholder,children:w})}),(0,M.jsx)("div",{style:he.betaBadgeWrapper,children:(0,M.jsx)(W().A,{})})]})}},474393:(e,t,a)=>{a.d(t,{m:()=>g});var n=a(296540),r=()=>a(401497),o=()=>a(127833),i=()=>a(406094),s=()=>a(493552),l=()=>a(148307),d=()=>a(69708),c=()=>a(13898),u=()=>a(658460),p=()=>a(369393),m=a(474848);function g({badge_click_url:e}){return(0,m.jsx)(h,{href:e})}function h({href:e}){const[t,a]=(0,n.useState)(!1),g=(0,r().eP)(),{state:h,pinPopup:y,unpinPopup:v}=(0,p().v)({immediateState:t||void 0}),f=Boolean(h),x=(0,n.useMemo)((()=>({onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1)})),[]),b=(0,r().IS)((()=>({origin:{cursor:"default"},container:{width:212,display:"flex",flexDirection:"column",alignItems:"flex-start",gap:8,padding:12},avatarSquad:{width:80,height:52,display:"flex",alignItems:"center",position:"relative"},avatarLeft:{width:61,height:40,position:"absolute",insetInlineStart:0},bold:{fontWeight:600}})),[]);return(0,m.jsx)(o().zD,{disableMouseCapture:!0,preventCaptureEsc:!0,preventScaleTransition:!0,preventOpacityTransition:!0,originGap:6,open:f,popupType:o().nl.Popup,alignmentToOrigin:"start",placementToOrigin:"bottom",trapFocus:!1,origin:(0,m.jsx)("div",{...x,style:b.origin,children:e?(0,m.jsx)(u().m,{href:e,type:"beta"}):(0,m.jsx)(c().A,{})}),render:()=>(0,m.jsxs)("div",{style:b.container,onMouseEnter:y,onMouseLeave:v,children:[(0,m.jsx)("div",{style:b.avatarSquad,children:(0,m.jsx)("img",{src:"dark"===g?l().A.images.imageGeneration.faceImageDarkPng:l().A.images.imageGeneration.faceImageLightPng,style:b.avatarLeft,alt:""})}),(0,m.jsx)(s().D,{styleKey:"bodyRegular",children:(0,m.jsx)(d().sA,{id:"imageGenerationRolloutBadge.beta.popupText",defaultMessage:"<b>Try image generation for free during Beta.</b> We’re still finalizing pricing before wider release.",values:{b:e=>(0,m.jsx)("span",{style:b.bold,children:e})}})}),e?(0,m.jsx)(i().A,{href:e,external:!0,children:(0,m.jsx)(d().sA,{id:"imageGenerationRolloutBadge.learnMore",defaultMessage:"Learn more"})}):null]})})}},506290:(e,t,a)=>{a.d(t,{F:()=>r});a(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"2.37 2.57 11.25 12.45",svg:(0,a(474848).jsx)("path",{d:"M3.8 2.575c-.787 0-1.425.638-1.425 1.425v.8c0 .787.638 1.425 1.425 1.425h3.575v.95H3.8c-.787 0-1.425.638-1.425 1.425v.8c0 .787.638 1.425 1.425 1.425h3.575v2.046l-.913-.913a.625.625 0 1 0-.884.884l2 2c.244.244.64.244.884 0l2-2a.625.625 0 1 0-.884-.884l-.953.953v-2.086H12.2c.787 0 1.425-.638 1.425-1.425v-.8c0-.787-.638-1.425-1.425-1.425H8.625v-.95H12.2c.787 0 1.425-.638 1.425-1.425V4c0-.787-.638-1.425-1.425-1.425zM3.625 4c0-.097.078-.175.175-.175h8.4c.097 0 .175.078.175.175v.8a.175.175 0 0 1-.175.175H3.8a.175.175 0 0 1-.175-.175zm0 4.6c0-.097.078-.175.175-.175h8.4c.097 0 .175.078.175.175v.8a.175.175 0 0 1-.175.175H3.8a.175.175 0 0 1-.175-.175z"})},r=(0,a(340498).wt)("flowchartSmall",n,"small")},658460:(e,t,a)=>{a.d(t,{m:()=>d});a(296540);var n=()=>a(401497),r=()=>a(718827),o=()=>a(970236),i=()=>a(69708),s=a(474848);const l=(0,i().YK)({alpha:{id:"linkBadge.alpha",defaultMessage:"Alpha"},beta:{id:"linkBadge.beta",defaultMessage:"Beta"}});function d({href:e,type:t,color:a="blue"}){const d=(0,n().IS)((()=>({button:{borderRadius:4}})),[]);return(0,s.jsx)(r().Ay,{href:e,style:d.button,external:!0,children:(0,s.jsx)(o().E,{color:a,content:(0,s.jsx)(i().sA,{...l[t]})})})}},754858:(e,t,a)=>{a.d(t,{FK:()=>g,Rt:()=>h,a6:()=>f,g7:()=>y,ys:()=>v});a(410838);var n=()=>a(564884),r=()=>a(675133),o=()=>a(878456),i=()=>a(155792),s=()=>a(201980),l=()=>a(348869),d=()=>a(555102),c=()=>a(962753),u=()=>a(594794),p=()=>a(844317);const m=(0,a(69708).YK)({providerError:{id:"aiImage.error.providerError",defaultMessage:"Unable to generate image right now. Please try again."},allProvidersFailed:{id:"aiImage.error.allProvidersFailed",defaultMessage:"Image generation is temporarily unavailable. Please try again later."},invalidModel:{id:"aiImage.error.invalidModel",defaultMessage:"The requested model is not available."},contentPolicyViolation:{id:"aiImage.error.contentPolicyViolation",defaultMessage:"This prompt violates our content policy. Please try a different description."},rateLimitExceeded:{id:"aiImage.error.rateLimitExceeded",defaultMessage:"You’ve reached the limit on image generations. Please try again later."},invalidRequest:{id:"aiImage.error.invalidRequest",defaultMessage:"Invalid request. Please check your input and try again."},defaultError:{id:"aiImage.error.default",defaultMessage:"Failed to generate image. Please try again."}});async function g({environment:e,prompt:t,spaceId:a,size:n,n:r,blockPointer:o}){try{const i=await e.api.callCellCompatibleApi({eventName:"generateAiImage",cellNavigation:{spaceId:a},environment:e,data:{prompt:t,spaceId:a,size:n,n:r,blockPointer:o}});if("failed"===i.type)return null;return i.data}catch(i){return null}}function h(e,t){(0,n().u)({environment:e,event:{eventName:"ai_generate_block_image",eventProperties:t}})}function y(e,t){const a={eventName:"ai_edit_block_image",eventProperties:t};(0,n().u)({environment:e,event:a})}function v(e){switch(e){case"PROVIDER_ERROR":case"PROVIDER_EXCEPTION":return r().A.formatMessage(m.providerError);case"ALL_PROVIDERS_FAILED":return r().A.formatMessage(m.allProvidersFailed);case"INVALID_MODEL":return r().A.formatMessage(m.invalidModel);case"CONTENT_POLICY_VIOLATION":return r().A.formatMessage(m.contentPolicyViolation);case"RATE_LIMIT_EXCEEDED":return r().A.formatMessage(m.rateLimitExceeded);case"INVALID_REQUEST":return r().A.formatMessage(m.invalidRequest);default:return r().A.formatMessage(m.defaultError)}}async function f(e){const{prompt:t,environment:a,spaceId:n,size:m,n:y,source:v,style:f}=e,x=await async function(e){const{environment:t,spaceId:a,prompt:n,source:m,style:g}=e,y=Date.now();h(t,{source:m,duration_ms:0,status:"start"});const v=d().bX.state;if(!v)return;const{spaceStore:f,userStore:x}=v,b=(0,p().getWorkflowAgentConfig)({writerMode:!1,useWebSearch:!0,searchScopes:[],useReadOnlyMode:!0,model:"orange-tart"}),I=g&&"default"!==g?`Create this in a ${g} style: `:"",k=(0,s().x9d)(I+n),S=(0,d().Jv)({environment:t,spaceStore:f,userStore:x,promptType:"generate_image_prompt",value:k,locale:r().A.intl.locale}),M=(0,d().Xd)({environment:t,inferenceContext:v,config:b,addSteps:[S],surface:"ai_block"}),j=(0,u().Z1)({environment:t,table:i().mS,spaceId:a});try{const e=await(0,l().g)({environment:t,data:{transcript:M,traceId:j,spaceId:a,generateTitle:!1,createdSource:"ai_block",isUserInAnySalesAssistedSpace:(0,c().h0)(t),isSpaceSalesAssisted:(0,c().lM)(t,a)}});if(e.error)return void h(t,{source:m,duration_ms:Date.now()-y,status:"error",error_code:"prompt_enhancement_failed"});const n=e.value.findLast((e=>"agent-inference"===e.type));if(!n||"agent-inference"!==n.type)return;const r=(0,o().ie)(n),{value:i}=r;let s="";if("string"==typeof i)s=i;else if(Array.isArray(i))for(const t of i)"text"===t.type&&t.content&&(s+=t.content);const d=s.trim()||void 0;return d&&h(t,{source:m,duration_ms:Date.now()-y,status:"prompt_enhancement_success"}),d}catch(w){return void h(t,{source:m,duration_ms:Date.now()-y,status:"error",error_code:"prompt_enhancement_exception"})}}({environment:a,spaceId:n,prompt:t,source:v,style:f}),b=x??t;return await g({environment:a,prompt:b,spaceId:n,size:m,n:y})}},761894:(e,t,a)=>{a.d(t,{x:()=>d});a(296540);var n=()=>a(401497),r=()=>a(278589),o=()=>a(899086),i=a(474848);const s={"baseball-cap":a(895960),bow:a(363031),cat:a(247983),cherry:a(6444),cowboy:a(406618),crown:a(341914),duck:a(210368),firefighter:a(420116),flower:a(910438),glasses:a(187667),headphone:a(504613),leaf:a(270307),magician:a(416744),mustache:a(324325),paprika:a(18667),pencil:a(326836),propeller:a(133698),"safety-hat":a(602537),scarf:a(244840),"seasonal-bat":a(38073),"seasonal-demon":a(752757),"seasonal-frankenstein":a(903734),"seasonal-pumpkin":a(715096),"seasonal-santa-hat":a(524980),"seasonal-new-year":a(713129)},l={"baseball-cap":a(706502),bow:a(903516),cat:a(835204),cherry:a(109677),cowboy:a(789567),crown:a(135763),duck:a(934997),firefighter:a(566697),flower:a(982911),glasses:a(168501),headphone:a(779594),leaf:a(473332),magician:a(863657),mustache:a(863342),paprika:a(803620),pencil:a(563177),propeller:a(586891),"safety-hat":a(77354),scarf:a(8993),"seasonal-bat":a(963510),"seasonal-demon":a(246934),"seasonal-frankenstein":a(359839),"seasonal-pumpkin":a(453981),"seasonal-santa-hat":a(190421),"seasonal-new-year":a(879830)};function d({accessory:e,variant:t="large",shadowVariant:a,...d}){const c="dark"===(0,n().eP)(),u=(0,r().N)(t),p=Math.round(1.5625*u),m=(0,n().IS)((()=>({container:{position:"relative",width:u,height:u,display:"flex",alignItems:"center",justifyContent:"center"},accessoryOverlay:{position:"absolute",width:p,height:p,objectFit:"contain",pointerEvents:"none",top:"50%",transform:"translate(calc(var(--direction, 1) * -50%), -50%) scaleX(var(--direction, 1))",insetInlineStart:"50%"}})),[u,p]),g=e?(c?l:s)[e]:null;return(0,i.jsx)("div",{...d,children:(0,i.jsxs)("div",{style:m.container,children:[(0,i.jsx)(o().Ax,{variant:t,animationMode:e?"minimal":"normal",shadowVariant:a}),g?(0,i.jsx)("img",{src:g,alt:`${e} accessory`,style:m.accessoryOverlay}):void 0]})})}},784489:(e,t,a)=>{a.d(t,{f:()=>s});a(296540);var n=()=>a(69708),r=()=>a(203913),o=()=>a(128933),i=a(474848);function s(e){const{item:t,onDismiss:a}=e;o().D6({...t,right:(0,i.jsx)(r().Ag,{onClick:a??o().N2,children:(0,i.jsx)(n().sA,{id:"snackbar.dismiss.title",defaultMessage:"Dismiss"})})})}},811823:(e,t,a)=>{a.r(t),a.d(t,{iPhoneSmallIcon:()=>o,iconDefinition:()=>r});a(296540);var n=a(474848);const r={viewBox:"0 0 16 16",fittedViewBox:"4.37 2.12 7.26 11.75",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M7.273 3.675a.575.575 0 1 0 0 1.15h1.454a.575.575 0 0 0 0-1.15zM6.545 10.9a.575.575 0 1 0 0 1.15h2.91a.575.575 0 0 0 0-1.15z"}),(0,n.jsx)("path",{fillRule:"evenodd",d:"M6.25 2.125c-1.036 0-1.875.84-1.875 1.875v8c0 1.036.84 1.875 1.875 1.875h3.5c1.036 0 1.875-.84 1.875-1.875V4c0-1.036-.84-1.875-1.875-1.875zM5.625 4c0-.345.28-.625.625-.625h3.5c.345 0 .625.28.625.625v8c0 .345-.28.625-.625.625h-3.5A.625.625 0 0 1 5.625 12z",clipRule:"evenodd"})]})},o=(0,a(340498).wt)("iPhoneSmall",r,"small")}}]);