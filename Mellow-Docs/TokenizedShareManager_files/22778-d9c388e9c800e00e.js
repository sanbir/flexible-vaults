"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[22778],{154378:(e,t,r)=>{r.d(t,{_G:()=>L,$k:()=>W,w$:()=>Z,H$:()=>G,l9:()=>E,NH:()=>H,jY:()=>O,JI:()=>N,ck:()=>D,i5:()=>Q,EN:()=>J,gc:()=>F,wK:()=>Y});var o=()=>r(906745),i=r(296540),n=()=>r(726637),a=()=>r(401497),l=()=>r(764880),s=()=>r(100594),c=()=>r(901610),u=()=>r(62371),d=()=>r(713998),g=()=>r(534177),p=()=>r(825237),v=()=>r(651124),m=()=>r(792071),y=r(474848);const h=i.memo((function(e){const{size:t,style:r,icon:o,baseUrl:i,getRecordModel:n}=e;return(0,y.jsx)("div",{style:{height:t,width:t,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,verticalAlign:"top",marginTop:1,...r},children:(0,y.jsx)(b,{icon:o,size:t,baseUrl:i,getRecordModel:n})})}));function f(e){return.9*e}function S(e){return.888*e}function b({icon:e,size:t,baseUrl:r,getRecordModel:o}){if(!e)return null;const i=(e,o)=>{const i=p().wY({url:e,baseUrl:r,fullyQualified:!0,permissionRecord:o,width:S(t),userId:void 0});return(0,y.jsx)("img",{alt:"icon",src:i,style:{width:S(t),height:S(t),objectFit:"cover",borderRadius:4,marginTop:1}})},n=(0,v().WO)(e.icon);switch(n.type){case"unicode_emoji":return(0,y.jsx)("div",{style:{fontSize:f(t)},children:n.emoji.unicode});case"custom_emoji":const r=m().xm7.resolveCustomEmojiIcon(e,o);return r?i(r.icon,r.pointer):null;case"app_package_asset":case"notion_icon":case"url":return i(e.icon,e.pointer);default:(0,g().HB)(n)}}var x=()=>r(522419),j=()=>r(216519);const w=function(e){const{botValue:t,avatarSize:r,baseUrl:o,theme:i,style:n}=e;if(null!=t&&t.icon){const a=x().GM(t.icon)?p().x8({url:t.icon,width:e.avatarSize,fullyQualified:!0,stripGoogleIconQuery:!0,baseUrl:o,userId:void 0}):t.icon;return(0,y.jsx)("div",{style:{...(0,j().fo)({theme:i,avatarSize:r}),...n},children:(0,y.jsx)("img",{src:a,style:{display:"block",width:"100%",height:"100%",objectFit:"cover"}})})}if(null!=t&&t.name){const e=t.name[0];return(0,y.jsx)("div",{children:(0,y.jsx)("div",{style:{...(0,j().ws)({theme:i,avatarSize:r}),...n},children:(0,y.jsx)("div",{children:e})})})}return(0,y.jsx)("span",{children:"ðŸ¤–"})};var _=()=>r(888867),M=()=>r(437607);function k(e){const{group:t,getRecordModel:r,size:o=20,baseUrl:i,theme:n,groupIconStyles:a}=e,l={...(0,j().fo)({theme:n,avatarSize:o}),...e.avatarBackground};if(null!=t&&t.icon){const e=(0,v().WO)(t.icon);switch(e.type){case"unicode_emoji":return(0,y.jsx)("div",{style:l,children:(0,y.jsx)("div",{style:{fontSize:.9*o},children:e.emoji.unicode})});case"custom_emoji":const n=(0,M().S4)({spacePermissionGroupId:t.id,spaceId:t.space_id}),s=m().xm7.resolveCustomEmojiIcon({pointer:n,icon:t.icon},r);if(!s)return(0,y.jsx)(C,{groupIconStyles:a});const c=p().wY({url:s.icon,baseUrl:i,fullyQualified:!0,permissionRecord:s.pointer,width:o,userId:void 0});return(0,y.jsx)("div",{style:l,children:(0,y.jsx)("img",{src:c,alt:t.name,style:{display:"block",width:"100%",height:"100%",objectFit:"cover"}})});case"app_package_asset":case"notion_icon":case"url":const u=x().GM(t.icon)?p().x8({url:t.icon,width:o,fullyQualified:!0,stripGoogleIconQuery:!0,baseUrl:i,userId:void 0}):t.icon;return(0,y.jsx)("div",{style:l,children:(0,y.jsx)("img",{src:u,alt:t.name,style:{display:"block",width:"100%",height:"100%",objectFit:"cover"}})});default:(0,g().HB)(e)}}return(0,y.jsx)(C,{groupIconStyles:a})}function C(e){const{groupIconStyles:t}=e;return(0,y.jsx)("div",{style:null==t?void 0:t.iconContainer,children:(0,_().s)(null==t?void 0:t.icon)})}var I=()=>r(597777),A=()=>r(869190),B=()=>r(72135),z=()=>r(379632),R=()=>r(100622),U=()=>r(284371),P=()=>r(934201),T=()=>r(698449),V=()=>r(497577);const W=(0,r(69708).YK)({titlePlaceholder:{defaultMessage:"Untitled",id:"chartLabelFormatHelpers.untitledBlock"}});function F(e,t,r){const o=r?16:20,s=(0,a().IS)((()=>({wrapper:{display:"flex",alignItems:"center",gap:6,minWidth:0},initialStyle:{backgroundColor:R().Tj.background.elevated,border:`1px solid ${R().Tj.border.primary}`,color:R().Tj.text.secondary},avatarStyle:{background:"none"},botStyle:{backgroundColor:R().Tj.background.elevated,border:`1px solid ${R().Tj.border.primary}`,color:R().Tj.text.secondary,fontSize:r?8:10},avatarWrapper:{flexShrink:0},nameWrapper:{minWidth:0,...U().RC}})),[r]),c=(0,V().E)({size:o});return(0,i.useCallback)(((i,a)=>{var u;if(!a)return i.toString();let d,g,p;if(a.actorPointer&&e)if((0,M().I6)(a.actorPointer)){var v;const r=(0,M().S4)({spacePermissionGroupId:a.actorPointer.id,spaceId:a.actorPointer.spaceId});g=e(r),p=(0,T().Pf)({intl:t,groupName:null===(v=g)||void 0===v?void 0:v.name})}else{var h;const r=(0,l().xC)({pointer:a.actorPointer,getRecordModel:e});g=null==r?void 0:r.asActor,p=null===(h=g)||void 0===h?void 0:h.getDisplayName(t)}return p||(p=i||t.formatMessage(m().Fvx.messages.anonymousPlaceholder)),d="space_permission_group"===(null===(u=g)||void 0===u?void 0:u.table)&&e&&g instanceof m().G1c?(0,y.jsx)(k,{group:g,getRecordModel:e,size:o,baseUrl:n().A.domainBaseUrl,theme:(0,R().x0)(),avatarBackground:s.avatarStyle,groupIconStyles:c}):g instanceof m().Fvx&&g.isUser()?(0,y.jsx)(j().Ay,{userValue:g,avatarSize:o,baseUrl:n().A.domainBaseUrl,theme:(0,R().x0)(),fontSize:r?8:10,initialStyle:s.initialStyle,avatarStyle:s.avatarStyle}):g instanceof m().HaY&&g.isBot()?(0,y.jsx)(w,{botValue:g,avatarSize:o,baseUrl:n().A.domainBaseUrl,theme:(0,R().x0)(),style:s.botStyle}):(0,y.jsx)(j().Ay,{userValue:{name:"?"},avatarSize:o,baseUrl:n().A.domainBaseUrl,theme:(0,R().x0)(),fontSize:r?8:10,initialStyle:s.initialStyle,avatarStyle:s.avatarStyle}),z().A.renderToStaticMarkup((0,y.jsxs)("div",{style:s.wrapper,children:[(0,y.jsx)("div",{style:s.avatarWrapper,children:d}),r?(0,y.jsx)("div",{style:s.nameWrapper,children:p}):null]}))}),[e,t,r,s,c,o])}function Y(e,t,r){const o=(0,a().IS)((()=>({wrapper:{display:"flex",alignItems:"center",gap:6,minWidth:0},avatarWrapper:{flexShrink:0},titleWrapper:{minWidth:0,...U().RC}})),[]),l=t.formatMessage(W.titlePlaceholder);return(0,i.useCallback)(((i,a)=>{if(!a||!e)return i.toString()||l;let s;if(a.pagePointer&&e&&(s=e(a.pagePointer)),!s)return i.toString()||l;const c=s.getRenderTitleWithPlaceholder({getRecordModel:e,userTimeZone:r,intl:t}),u=s.getRenderIcon({getRecordModel:e});return z().A.renderToStaticMarkup((0,y.jsxs)("div",{style:o.wrapper,children:[u?(0,y.jsx)("div",{style:o.avatarWrapper,children:(0,y.jsx)(h,{getRecordModel:e,icon:u,size:16,baseUrl:n().A.domainBaseUrl})}):void 0,(0,y.jsx)("div",{style:o.titleWrapper,children:c})]}))}),[e,r,t,l,o.wrapper,o.avatarWrapper,o.titleWrapper])}function D(e){var t,r,o,i;const n="count"===(null===(t=e.aggregation)||void 0===t?void 0:t.aggregator)||"unique"===(null===(r=e.aggregation)||void 0===r?void 0:r.aggregator)?"number":N(e.propertySchema);let a;return a="count"===(null===(o=e.aggregation)||void 0===o?void 0:o.aggregator)||"unique"===(null===(i=e.aggregation)||void 0===i?void 0:i.aggregator)?"precision_0":"precision_from_number_property"===e.numberPrecisionOverride?Q(e.propertySchema):e.numberPrecisionOverride,t=>"string"==typeof t?t:a&&"precision_uncapped"!==a?(0,B().ZV)(t,n,e.intl,"compact",a):(0,B().ZV)(J(t,2),n,e.intl,"compact",void 0)}function O({groupBy:e,dateFormat:t,intl:r}){return(o,i)=>{let n;return n=i?i.name:"string"==typeof o?o:o.toString(),G({dateString:n,dateFormat:t,groupBy:e,intl:r})}}function G({dateString:e,dateFormat:t,groupBy:r,intl:i}){const n=parseInt(e,10);if(isNaN(n))return e;switch(r){case"relative":default:return e;case"day":return(0,A().ZF)({value:{type:"date",start_date:o().DateTime.fromMillis(n).toISODate()},date_format:t||I().vz,allowRelativeDates:!0,intl:i});case"week":case"month":case"year":const a=o().DateTime.fromMillis(n),l={type:r,range:{type:"daterange",start_date:a.toISODate(),end_date:a.plus({[`${r}s`]:1}).minus({days:1}).toISODate()}};return(0,P().nc)({value:l,intl:i})}}function N(e){let t;return("number"===e.type||"formula"===e.type)&&(t=e.number_format),t}function Q(e){return"number"===e.type||"formula"===e.type?e.number_precision:void 0}function H({chartConfig:e,schema:t,highChartsLabel:r,highChartsValue:o,isMultiSeries:i,intl:n,numberPrecisionOverride:a}){let l=r,u=o;if(!e)return{label:l,value:u};const g=e.dataConfig;let p,v,m,y;if(i){if((0,c().m)(e)&&"groups_reducer"===e.dataConfig.type){var h;const r=e.dataConfig;if(p=null===(h=r.aggregationConfig.stackOptions)||void 0===h?void 0:h.groupBy,p){const e=(0,d()._g)({schema:t,property:p.property});e&&(0,s().zn)(e)&&(v=e)}y=r.aggregationConfig.aggregation,"count"!==y.aggregator&&(m=(0,d()._g)({schema:t,property:y.property}))}}else"groups_reducer"===g.type?(p=g.groupBy,v=(0,d()._g)({schema:t,property:g.groupBy.property}),y=g.aggregationConfig.aggregation,"count"!==y.aggregator&&(m=(0,d()._g)({schema:t,property:y.property}))):m=(0,d()._g)({schema:t,property:g.valueProperty});if(l=v?Z({propertySchema:v,groupByFormat:p,aggregation:void 0,highChartsLabel:r,intl:n}):l,u&&"number"==typeof u&&m&&(0,s().JW)(m)){var f,S,b,x;const e="count"===(null===(f=y)||void 0===f?void 0:f.aggregator)||"unique"===(null===(S=y)||void 0===S?void 0:S.aggregator)?"number":N(m),t="count"===(null===(b=y)||void 0===b?void 0:b.aggregator)||"unique"===(null===(x=y)||void 0===x?void 0:x.aggregator)?"precision_0":a??Q(m);u=t&&"precision_uncapped"!==t?(0,B().ZV)(u,e,n,"compact",t):(0,B().ZV)(J(u,2),e,n,"compact")}return{label:l,value:u}}function Z(e){const{propertySchema:t,groupByFormat:r,aggregation:o,highChartsLabel:i,intl:n}=e;if(t&&(0,s().JW)(t)){const e="count"===(null==o?void 0:o.aggregator)||"unique"===(null==o?void 0:o.aggregator)?"number":N(t),r=parseInt(i,10);return isNaN(r)||"percent"===e?i:(0,B().ZV)(r,e,n,"compact")}const a="formula"===(null==r?void 0:r.type)?r.groupBy:r;return t&&(0,s().i8)(t)&&a&&(0,u().Ik)(a)?G({dateString:i,dateFormat:t.date_format,groupBy:a.groupBy,intl:n}):i}const q=1.2,$=2;function L(e){var t,r,o,i;if("count"===(null===(t=e.aggregation)||void 0===t?void 0:t.aggregator)||"unique"===(null===(r=e.aggregation)||void 0===r?void 0:r.aggregator))return!1;return"percent"===N(e.propertySchema)||(void 0!==e.userYAxisMax&&void 0!==e.userYAxisMin&&Math.abs(e.userYAxisMax-e.userYAxisMin)<$||(!!(null!==(o=e.userYAxisMax)&&void 0!==o&&o.toString().includes(".")||null!==(i=e.userYAxisMin)&&void 0!==i&&i.toString().includes("."))||Math.abs(e.dataYAxisMax)<q&&Math.abs(e.dataYAxisMin)<q))}function E(e){return e%1==0?e:e.toFixed(1)}function J(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}},252593:(e,t,r)=>{r.d(t,{B:()=>g,z:()=>d});var o=()=>r(584262),i=()=>r(650829),n=()=>r(806663),a=()=>r(492414),l=()=>r(376049),s=()=>r(246766),c=()=>r(547149),u=()=>r(681445);function d(e){const{collectionContextStore:t,environment:r,originRect:i,intl:a}=e,s=null==t?void 0:t.collectionViewBlockStore(),u=null==t?void 0:t.collectionViewStore();s&&u&&l().ho({environment:r,blocks:[s],originRect:i,moveToContext:"ai_ephemeral_view",isAddTo:!0,isDefaultPrivateLocation:!0,forceShowPrivatePageOption:!0,dontCommitActions:!0,onAccept:async e=>{const{performResult:i}=await c().createAndCommitAsync({environment:r,userAction:"UnlistedCollectionViewMoreButton.handleAddViewToMenuClick",waitForServerCommit:!0,perform:o=>n().Iz({environment:r,collectionViewStore:u,collectionViewBlockStore:s,collectionContextStore:t,acceptMoveToArgs:e,transaction:o,intl:a})});await g({environment:r,blockStore:i,pageVisitSource:o().y8.ChartsDrilldown})}})}async function g(e){const{environment:t,blockStore:r,pageVisitSource:o}=e;if(!r)return;const n=(0,a().Ay)({store:r,pageVisitSource:o});(0,s().navigate)({environment:t,url:n});const{assistantMenuActions:l}=await i().assistantDependency.load();u().Q.close(),await l.closeAssistantRightHandSideMenu({environment:t})}},274375:(e,t,r)=>{r.d(t,{Q:()=>i});r(898992),r(354520),r(672577);var o=()=>r(898244);function i(e,t){const r={property:o().rn,visible:!0,width:276},i={property:t,visible:!0},n=[r,i],a=e.getCollectionViewStores().find((e=>"table"===e.getType())),l=null==a?void 0:a.getFormatStore().getKeyStore("table_properties").getValue();if(!a||!l||0===l.length)return n;const s=l.find((e=>e.property===o().rn))??r;return[s,l.find((e=>e.property===t))??i,...l.filter((e=>e.property!==o().rn&&e.property!==t))]}}}]);