"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[15922],{14228:(e,t,a)=>{a.d(t,{n:()=>r});a(296540);var s=()=>a(69708),n=()=>a(534177),i=a(474848);const o=(0,s().YK)({default:{id:"TeamAccessLevelSwitcher.defaultTeamSpace.title",defaultMessage:"Default"},open:{id:"TeamAccessLevelSwitcher.openTeamspace.title",defaultMessage:"Open"},closed:{id:"TeamAccessLevelSwitcher.closedTeamSpace.title",defaultMessage:"Closed"},private:{id:"TeamAccessLevelSwitcher.privateTeamSpace.title",defaultMessage:"Private"}});function r(e){const{accessKey:t}=e;switch(t){case"default":return(0,i.jsx)(s().sA,{...o.default});case"open":return(0,i.jsx)(s().sA,{...o.open});case"closed":return(0,i.jsx)(s().sA,{...o.closed});case"private":return(0,i.jsx)(s().sA,{...o.private});default:return(0,n().HB)(t)}}},14507:(e,t,a)=>{a.d(t,{A:()=>p,W:()=>g});var s=a(296540),n=()=>a(401497),i=()=>a(874832),o=()=>a(807449),r=()=>a(631524),l=()=>a(493552),d=()=>a(626466),c=()=>a(100622),u=()=>a(148974),m=a(474848);function g({headerText:e,mainText:t,bottom:a,onClick:g,isLoading:p,disabled:h}){const[f,v]=s.useState(!1),y=(0,n().IS)((()=>({loadingMainText:{width:140,borderRadius:4,height:25},loadingBottom:{width:120,borderRadius:4,height:24},container:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",gap:20,width:"100%",padding:16,borderRadius:u().Vq.medium,borderWidth:1,borderStyle:"solid",borderColor:c().Tj.border.secondary,boxShadow:u().vx,height:"auto",flex:"1 1 200px",overflow:"hidden",position:"relative"},containerDark:{background:c().Tj.palette.translucentGray[30],borderColor:c().Tj.border.primary},content:{display:"flex",flexDirection:"column",gap:12,flex:"1 1 auto",minWidth:0,marginInlineEnd:32},textContainer:{display:"flex",flexDirection:"column",gap:8},mainText:{color:c().Tj.palette.gray[900],fontSize:20},iconButton:{display:"flex",justifyContent:"center",alignItems:"center",opacity:.5,borderRadius:"100%",background:f?c().Tj.palette.translucentGray[300]:c().Tj.palette.gray[100],height:20,width:20,flexShrink:0},icon:{padding:4,color:f?c().Tj.palette.gray[800]:c().Tj.icon.primary,transform:"rotate(270deg)"},bottomContainer:{minHeight:28}})),[f]);return(0,m.jsxs)(r().p,{onClick:g,style:y.container,shouldShrink:!0,hoveredStyle:{...y.container,...y.containerDark},pressedStyle:{...y.container,...y.containerDark},onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),disabled:h,children:[(0,m.jsxs)("div",{style:y.content,children:[(0,m.jsxs)("div",{style:y.textContainer,children:[(0,m.jsx)(l().D,{styleKey:"captionRegular",colorVariant:"secondary",children:e}),p?(0,m.jsx)(i().P,{style:y.loadingMainText}):(0,m.jsx)(l().D,{style:y.mainText,styleKey:"titleSemibold",colorVariant:"primary",children:t})]}),(0,m.jsx)("div",{style:y.bottomContainer,children:p?(0,m.jsx)(i().P,{style:y.loadingBottom}):a})]}),h?void 0:(0,m.jsx)("div",{style:y.iconButton,children:(0,m.jsx)(o().I,{icon:d().arrowChevronSingleDownFillIcon,style:y.icon})})]})}const p=g},17281:(e,t,a)=>{a.d(t,{h:()=>o});var s=()=>a(484714),n=()=>a(187174),i=()=>a(769864);function o(e){const t=(0,s().v3)(),[{value:a}]=(0,n().Yb)((async()=>{const a=await i().callApi({eventName:"getMemberEmailDomains",environment:t,data:{spaceId:e}});if("success"===a.type)return a.data.emailDomains;if("failed"===a.type)throw a.error}),[t,e]);return a}},17297:(e,t,a)=>{a.d(t,{m:()=>ge});var s=a(296540),n=()=>a(401497),i=()=>a(493552),o=()=>a(26697),r=(a(581454),()=>a(69708)),l=()=>a(496603),d=()=>a(534177),c=()=>a(423497),u=()=>a(980585),m=()=>a(64939),g=()=>a(624090),p=()=>a(130382),h=()=>a(674741),f=()=>a(165358),v=()=>a(109100),y=()=>a(348564),x=()=>a(179034),b=()=>a(326399),S=()=>a(96689),j=()=>a(854150),A=()=>a(287882),w=()=>a(301608),_=()=>a(939962),M=()=>a(326346),C=a(474848);function T(e){return"workspace"!==e}function k(e){var t,a,s,n,i,o,r;const l={read_content:null===(t=e.capabilities)||void 0===t?void 0:t.read_content,update_content:null===(a=e.capabilities)||void 0===a?void 0:a.update_content,insert_content:null===(s=e.capabilities)||void 0===s?void 0:s.insert_content,read_comment:null===(n=e.capabilities)||void 0===n?void 0:n.read_comment,insert_comment:null===(i=e.capabilities)||void 0===i?void 0:i.insert_comment,user_capabilities:null!==(o=e.capabilities)&&void 0!==o&&o.read_user_with_email?"read_user_including_email":null!==(r=e.capabilities)&&void 0!==r&&r.read_user_without_email?"read_user_excluding_email":"none"};return JSON.stringify(l)}const I=(0,r().YK)({started:{id:"space.spaceContentDuplicationStatus.started",defaultMessage:"Started"},completed:{id:"space.spaceContentDuplicationStatus.completed",defaultMessage:"Completed"},failed:{id:"space.spaceContentDuplicationStatus.failed",defaultMessage:"Failed"}}),N=(0,r().YK)({equallyRestrictive:{defaultMessage:". This is the same as the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_equal"},moreRestrictive:{defaultMessage:". This is more restrictive than the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_more_restrictive"},lessRestrictive:{defaultMessage:". This is less restrictive than the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_less_restrictive"}});function D(e,t){if(void 0!==e&&void 0!==t)return e===t?(0,C.jsx)(r().sA,{...N.equallyRestrictive}):!e&&t?(0,C.jsx)(r().sA,{...N.moreRestrictive}):e&&!t?(0,C.jsx)(r().sA,{...N.lessRestrictive}):void 0}function P(e){return e.name?`“${e.name}“ group`:(0,C.jsx)(r().sA,{...u().D.group})}function E(e){return e.changes.name.oldValue&&e.changes.name.newValue?(0,C.jsx)(r().sA,{defaultMessage:"from “{oldTeamName}” to “{newTeamName}”",id:"auditlog.actionNames.eventColumn.from_old_team_name_to_new_team_name",values:{oldTeamName:e.changes.name.oldValue,newTeamName:e.changes.name.newValue}}):!e.changes.name.oldValue&&e.changes.name.newValue?(0,C.jsx)(r().sA,{defaultMessage:"from some teamspace name to “{newTeamName}”",id:"auditlog.actionNames.eventColumn.from_unknown_team_name_to_new_team_name",values:{newTeamName:e.changes.name.newValue}}):(0,C.jsx)(r().sA,{defaultMessage:"for {teamName}",id:"auditlog.actionNames.eventColumn.for_team_name",values:{teamName:(0,m().if)(e)}})}function B(e){if(e)switch(e){case"owner":return(0,C.jsx)(r().sA,{...u().D.team_owner});case"member":return(0,C.jsx)(r().sA,{...u().D.team_member});case"team_level_guest":return(0,C.jsx)(r().sA,{...u().D.team_level_guest})}return(0,C.jsx)(r().sA,{...u().D.team_member})}function R(e){var t,a,s,n;const i="spaceUserMembership"in e.changes&&null!==(t=e.changes.spaceUserMembership)&&void 0!==t&&t.oldValue?e.changes.spaceUserMembership.oldValue:null===(a=e.changes)||void 0===a||null===(a=a.permission)||void 0===a?void 0:a.oldValue,o="spaceUserMembership"in e.changes&&null!==(s=e.changes.spaceUserMembership)&&void 0!==s&&s.newValue?e.changes.spaceUserMembership.newValue:null===(n=e.changes)||void 0===n||null===(n=n.permission)||void 0===n?void 0:n.newValue;return{oldRole:(0,C.jsx)(r().sA,{...V(i)}),newRole:(0,C.jsx)(r().sA,{...V(o)})}}function V(e){if(!e)return v().S.noAccessLabel;switch(e){case"owner":case"editor":return v().S.workspaceOwnerLabel;case"membership_admin":return v().S.membershipAdminLabel;case"member":case"read_and_write":return v().S.memberLabel;case"restricted_member":return v().S.restrictedMemberLabel;case"page_guest":return v().S.pageGuestLabel;default:return v().S.noAccessLabel}}function L(e){var t;const a=null===(t=e.target)||void 0===t||null===(t=t.page)||void 0===t||null===(t=t.meta)||void 0===t?void 0:t.parent;if(a){var s;if(a.table===x().ev&&null!==(s=a.meta)&&void 0!==s&&null!==(s=s.collection)&&void 0!==s&&s.title)return`“${a.meta.collection.title}“`;if("title"in a)return`“${a.title}“`}return(0,C.jsx)(r().sA,{..._().Qk.anUntitledPage})}function z(e){var t;return null!==(t=e.actor.meta)&&void 0!==t&&t.platform?(0,C.jsx)(r().sA,{defaultMessage:"on {platform}",id:"auditlog.actionNames.eventColumn.logged_in_platform",values:{platform:e.actor.meta.platform}}):""}function F(e){switch(e){case"google":return(0,C.jsx)(r().sA,{defaultMessage:"Google",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.google"});case"email":return(0,C.jsx)(r().sA,{defaultMessage:"temporary passcode",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.email"});case"admin":return(0,C.jsx)(r().sA,{defaultMessage:"Notion support access",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.admin"});case"saml":return(0,C.jsx)(r().sA,{defaultMessage:"SAML SSO",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.saml"});case"apple":return(0,C.jsx)(r().sA,{defaultMessage:"Apple ID",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.apple"});case"microsoft":return(0,C.jsx)(r().sA,{defaultMessage:"Microsoft",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.microsoft"});case"password":case"password-no-mfa":case"password-sms":case"password-totp":case"password-backup-code":return(0,C.jsx)(r().sA,{defaultMessage:"password",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.password"});case"passkey":return(0,C.jsx)(r().sA,{defaultMessage:"passkey",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.passkey"});default:(0,d().HB)(e)}}function O(e){return e.changes.name.oldValue?(0,C.jsx)(r().sA,{defaultMessage:"from “{oldDomain}”",id:"auditlog.actionNames.eventColumn.old_domain",values:{oldDomain:e.changes.name.oldValue}}):""}function U(e,t){return"block"===e.table?(0,C.jsx)(r().sA,{defaultMessage:"{teamName} page {parentPage}",id:"auditlog.actionNames.eventColumn.team_parent_page",values:{teamName:(0,m().nZ)(t),parentPage:W(e)}}):"team"===e.table?(0,m().nZ)(t):void 0}function W(e){return"title"in e?`“${e.title}“`:(0,C.jsx)(r().sA,{..._().Qk.anUntitledPage})}function H(e,t){if(!t)return(0,C.jsx)(r().sA,{..._().Qk.anUntitledPage});const a=t.table;return"space"===a?t.id!==e?(0,C.jsx)(r().sA,{...u().D.otherWorkspace}):T(t.permissionLevel)?(0,C.jsx)(r().sA,{...u().D.private}):(0,C.jsx)(r().sA,{...u().D.thisWorkspace}):"team"===a?(0,m().nZ)(t):"block"===a?null!==(s=t.meta)&&void 0!==s&&null!==(s=s.collection)&&void 0!==s&&s.title?`“${t.meta.collection.title}“`:t.title?`“${t.title}“`:(0,C.jsx)(r().sA,{..._().Qk.anUntitledPage}):void 0;var s}const q=(0,r().YK)({open:{defaultMessage:"Open",id:"auditlog.actionNames.eventColumn.team_privacy_types.open"},closed:{defaultMessage:"Closed",id:"auditlog.actionNames.eventColumn.team_privacy_types.closed"},private:{defaultMessage:"Private",id:"auditlog.actionNames.eventColumn.team_privacy_types.private"},default:{defaultMessage:"Default",id:"auditlog.actionNames.eventColumn.team_privacy_types.default"},unknown:{defaultMessage:"an unknown privacy state",id:"auditlog.actionNames.eventColumn.team_privacy_types.unknown"}});function K(e){return e?(0,C.jsx)(r().sA,{...q[e]}):(0,C.jsx)(r().sA,{...q.unknown})}function G(e){return e.changes.enabled.newValue?(0,C.jsx)(r().sA,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.membership_requests_toggled.disabled"}):(0,C.jsx)(r().sA,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.membership_requests_toggled.enabled"})}function Y(e){return e.changes.enabled.newValue?(0,C.jsx)(r().sA,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.external_membership_requests_toggled.disabled"}):(0,C.jsx)(r().sA,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.external_membership_requests_toggled.enabled"})}function $(e){return"approved"===e.changes.requestStatus.newValue?(0,C.jsx)(r().sA,{defaultMessage:"Approved",id:"auditlog.actionNames.eventColumn.membership_request_resolved.approved"}):(0,C.jsx)(r().sA,{defaultMessage:"Declined",id:"auditlog.actionNames.eventColumn.membership_request_resolved.declined"})}function Q(e){return e.changes.enabled.newValue?(0,C.jsx)(r().sA,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled.disabled"}):(0,C.jsx)(r().sA,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled.enabled"})}function J(e){return e.changes.enabled.newValue?(0,C.jsx)(r().sA,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled.disabled"}):(0,C.jsx)(r().sA,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled.enabled"})}const Z=(0,r().YK)({team_members:{defaultMessage:"any teamspace member",id:"auditlog.actionNames.eventColumn.team_access_level_types.team_members"},team_owners:{defaultMessage:"only teamspace owners",id:"auditlog.actionNames.eventColumn.team_access_level_types.team_owners"},unknown:{defaultMessage:"unknown",id:"auditlog.actionNames.eventColumn.team_access_level_types.unknown"}});function X(e){var t,a,s,n,i,o,v,N,V,W,q,X,te,ae,se,ne,ie,oe,re,le,de,ce,ue,me,ge,pe,he,fe,ve,ye,xe,be,Se,je,Ae,we,_e,Me,Ce,Te,ke,Ie,Ne,De,Pe;const{auditLogEntry:Ee,env:Be,intl:Re}=e;if((0,c().nS)(Ee))return(0,c().ZD)({...e,auditLogEntry:Ee});switch(Ee.actionName){case"page.properties_edited":{const vt=Ee.meta.propertiesUpdated,yt=Ee.meta.propertiesUpdated.map((e=>`“${e.propertyName}“`)).join(", ");return 1===vt.length?(0,C.jsx)(r().sA,{defaultMessage:"Edited property {properties} on {pageName}",id:"auditlog.actionNames.eventColumn.page_properties_edited.single_property",values:{properties:yt,pageName:(0,_().wS)(Ee)}}):(0,C.jsx)(r().sA,{defaultMessage:"Edited properties {properties} on {pageName}",id:"auditlog.actionNames.eventColumn.page_properties_edited.multiple_properties",values:{properties:yt,pageName:(0,_().wS)(Ee)}})}case"page.suggestion.comment.updated":return(0,C.jsx)(r().sA,{defaultMessage:"Edited comment on suggestion on {pageName}",id:"auditlog.actionNames.eventColumn.page.suggestion.comment.updated",values:{pageName:(0,_().wS)(Ee)}});case"page.discussion.comment.updated":return(0,C.jsx)(r().sA,{defaultMessage:"Edited comment on {pageName}",id:"auditlog.actionNames.eventColumn.page.discussion.comment.updated",values:{pageName:(0,_().wS)(Ee)}});case"page_edited":return(0,C.jsx)(r().sA,{defaultMessage:"Edited {pageName}",id:"auditlog.actionNames.eventColumn.page_edited",values:{pageName:(0,_().wS)(Ee)}});case"page_deleted":return Ee.target.page.meta.permanentDeletion?(0,C.jsx)(r().sA,{defaultMessage:"Deleted {pageName} from Trash",id:"auditlog.actionNames.eventColumn.page_permanently_deleted",values:{pageName:(0,_().wS)(Ee)}}):(0,C.jsx)(r().sA,{defaultMessage:"Moved {pageName} to Trash",id:"auditlog.actionNames.eventColumn.page_deleted",values:{pageName:(0,_().wS)(Ee)}});case"page.purged":return(0,C.jsx)(r().sA,{defaultMessage:"Permanently deleted {pageName}",id:"auditlog.actionNames.eventColumn.page.purged",values:{pageName:(0,_().wS)(Ee)}});case"page_restored":return(0,C.jsx)(r().sA,{defaultMessage:"Restored {pageName}{withAdminPerms, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_restored",values:{pageName:(0,_().wS)(Ee),withAdminPerms:(0,m().th)(Ee)}});case"page_exported":return(0,C.jsx)(r().sA,{defaultMessage:"Exported {pageName}",id:"auditlog.actionNames.eventColumn.page_exported",values:{pageName:(0,_().wS)(Ee)}});case"page_moved":{var Ve,Le,ze;const xt=null===(Ve=Ee.changes)||void 0===Ve?void 0:Ve.team,bt=Ee.changes.parent.oldValue,St=Ee.changes.parent.newValue;let jt=H(Ee.spaceId,Ee.changes.parent.oldValue),At=H(Ee.spaceId,Ee.changes.parent.newValue);null!=xt&&xt.oldValue&&null!=xt&&xt.newValue&&bt&&St&&("block"===bt.table||"block"===St.table)?(jt=U(bt,null==xt?void 0:xt.oldValue),At=U(St,null==xt?void 0:xt.newValue)):"space"===(null===(Le=Ee.changes.parent.oldValue)||void 0===Le?void 0:Le.table)&&"space"===(null===(ze=Ee.changes.parent.newValue)||void 0===ze?void 0:ze.table)&&Ee.changes.parent.oldValue.id===Ee.changes.parent.newValue.id&&(T(Ee.changes.parent.oldValue.permissionLevel)||T(Ee.changes.parent.newValue.permissionLevel))&&(jt=T(Ee.changes.parent.oldValue.permissionLevel)?(0,C.jsx)(r().sA,{...u().D.private}):(0,C.jsx)(r().sA,{...u().D.workspaceLevel}),At=T(Ee.changes.parent.newValue.permissionLevel)?(0,C.jsx)(r().sA,{...u().D.private}):(0,C.jsx)(r().sA,{...u().D.workspaceLevel}));const wt=jt?Re.formatMessage({id:"auditLogEntry.changes.page_moved.old_parent",defaultMessage:" from {oldParentName}"},{oldParentName:jt}):"",_t=At?Re.formatMessage({id:"auditLogEntry.changes.page_moved.new_parent",defaultMessage:" to {newParentName}"},{newParentName:At}):"";return(0,C.jsx)(r().sA,{defaultMessage:"Moved {pageName}{oldParentMessage}{newParentMessage}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_moved",values:{pageName:(0,_().wS)(Ee),oldParentMessage:wt,newParentMessage:_t,inSudoMode:(0,_().AJ)(Ee)}})}case"page_permission_updated":return function(e,t){var a,s,n;const i="bot"in t.target,o="space"in t.target,l="team"in t.target,d="group"in t.target,c="user"in t.target&&"guest"===(null===(a=t.target.user.meta)||void 0===a?void 0:a.spaceRole);var u,g;if(i)return(0,C.jsx)(r().sA,{defaultMessage:"Updated permissions of {pageName} for bot {botName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_bot",values:{botName:(0,m().xC)(e,t),oldRole:(0,_().H8)(null===(u=t.changes)||void 0===u||null===(u=u.permission)||void 0===u?void 0:u.oldValue),newRole:(0,_().H8)(null===(g=t.changes)||void 0===g||null===(g=g.permission)||void 0===g?void 0:g.newValue),pageName:(0,_().wS)(t),inSudoMode:(0,_().AJ)(t)}});var p,h,f,v,y,x;if(o)return(0,C.jsx)(r().sA,{defaultMessage:"Updated permissions of {pageName} for everyone in the workspace from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_space",values:{oldRole:(0,_().H8)(null===(p=t.changes)||void 0===p||null===(p=p.permission)||void 0===p?void 0:p.oldValue),newRole:(0,_().H8)(null===(h=t.changes)||void 0===h||null===(h=h.permission)||void 0===h?void 0:h.newValue),pageName:(0,_().wS)(t),inSudoMode:(0,_().AJ)(t)}});if(l)return(0,C.jsx)(r().sA,{defaultMessage:"Updated permissions of {pageName} for {teamName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_team",values:{oldRole:(0,_().H8)(null===(f=t.changes)||void 0===f||null===(f=f.permission)||void 0===f?void 0:f.oldValue),newRole:(0,_().H8)(null===(v=t.changes)||void 0===v||null===(v=v.permission)||void 0===v?void 0:v.newValue),pageName:(0,_().wS)(t),teamName:(0,m().if)(t),inSudoMode:(0,_().AJ)(t)}});if(c)return(0,C.jsx)(r().sA,{defaultMessage:"Updated permissions of {pageName} for guest {guestNameAndEmail} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_guest",values:{guestNameAndEmail:(0,m().xC)(e,t),oldRole:(0,_().H8)(null===(y=t.changes)||void 0===y||null===(y=y.permission)||void 0===y?void 0:y.oldValue),newRole:(0,_().H8)(null===(x=t.changes)||void 0===x||null===(x=x.permission)||void 0===x?void 0:x.newValue),pageName:(0,_().wS)(t),inSudoMode:(0,_().AJ)(t)}});if(d){var b,S;return(0,C.jsx)(r().sA,{defaultMessage:"Updated permissions of {pageName} for group {groupName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_group",values:{groupName:(0,m().xC)(e,t),oldRole:(0,_().H8)(null===(b=t.changes)||void 0===b||null===(b=b.permission)||void 0===b?void 0:b.oldValue),newRole:(0,_().H8)(null===(S=t.changes)||void 0===S||null===(S=S.permission)||void 0===S?void 0:S.newValue),pageName:(0,_().wS)(t),inSudoMode:(0,_().AJ)(t)}})}return(0,C.jsx)(r().sA,{defaultMessage:"Updated permissions of {pageName} for {memberNameAndEmail} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_default",values:{memberNameAndEmail:(0,m().xC)(e,t),oldRole:(0,_().H8)(null===(s=t.changes)||void 0===s||null===(s=s.permission)||void 0===s?void 0:s.oldValue),newRole:(0,_().H8)(null===(n=t.changes)||void 0===n||null===(n=n.permission)||void 0===n?void 0:n.newValue),pageName:(0,_().wS)(t),inSudoMode:(0,_().AJ)(t)}})}(Re,Ee);case"page_created":const qe=(0,y().fS)(Ee);if(null!=qe&&null!==(t=qe.meta)&&void 0!==t&&t.parent){var Fe,Oe,Ue,We;if(qe.meta.parent.table===S().NX)return"private"===(null===(Ue=qe.meta)||void 0===Ue?void 0:Ue.permissionLevel)||"private"===(null===(We=qe.meta)||void 0===We?void 0:We.pageAudience)?(0,C.jsx)(r().sA,{defaultMessage:"Created a private page",id:"auditlog.actionNames.eventColumn.page_created_private"}):(0,C.jsx)(r().sA,{defaultMessage:"Created a page in the workspace",id:"auditlog.actionNames.eventColumn.page_created_workspace"});if((null===(Fe=qe.meta)||void 0===Fe?void 0:Fe.parent.table)===j().yK)return(0,C.jsx)(r().sA,{defaultMessage:"Created a page under {teamName}",id:"auditlog.actionNames.eventColumn.page_created_team",values:{teamName:(0,m().nZ)(qe.meta.parent)}});if((null===(Oe=qe.meta)||void 0===Oe?void 0:Oe.parent.table)===x().ev)return(0,C.jsx)(r().sA,{defaultMessage:"Created a page under {parentPageName}",id:"auditlog.actionNames.eventColumn.page_created_under",values:{parentPageName:L(Ee)}})}return(0,C.jsx)(r().sA,{defaultMessage:"Created a page",id:"auditlog.actionNames.eventColumn.page_created_general"});case"page_shared_to_web":return function(e){var t;if(void 0===e.changes.permission.newValue||"none"===e.changes.permission.newValue)return(0,C.jsx)(r().sA,{defaultMessage:"Disabled sharing {pageName} to web{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_shared_to_web.disabled",values:{pageName:(0,_().wS)(e),inSudoMode:(0,_().AJ)(e)}});return(0,C.jsx)(r().sA,{defaultMessage:"Enabled sharing {pageName} to web{inSudoMode, select, true { using administrator privileges} other {}} with permissions {newRole}",id:"auditlog.actionNames.eventColumn.page_shared_to_web.enabled",values:{pageName:(0,_().wS)(e),inSudoMode:(0,_().AJ)(e),newRole:(0,_().H8)(null===(t=e.changes)||void 0===t||null===(t=t.permission)||void 0===t?void 0:t.newValue)}})}(Ee);case"page.shared_with_email_domain":return function(e){var t;if(void 0===e.changes.permission.newValue||"none"===e.changes.permission.newValue)return(0,C.jsx)(r().sA,{defaultMessage:"Unshared {pageName} with email domains{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_shared_with_email_domain.disabled",values:{pageName:(0,_().wS)(e),inSudoMode:(0,_().AJ)(e)}});return(0,C.jsx)(r().sA,{defaultMessage:"Shared {pageName} with email domains{inSudoMode, select, true { using administrator privileges} other {}} with permissions {newRole}",id:"auditlog.actionNames.eventColumn.page_shared_with_email_domain.enabled",values:{pageName:(0,_().wS)(e),inSudoMode:(0,_().AJ)(e),newRole:(0,_().H8)(null===(t=e.changes)||void 0===t||null===(t=t.permission)||void 0===t?void 0:t.newValue)}})}(Ee);case"login":return function(e,t){var a,s,n;const i=null===(a=e.meta)||void 0===a?void 0:a.authType;return null!==(s=e.actor.meta)&&void 0!==s&&s.countryCode&&i?(0,C.jsx)(r().sA,{id:"auditLog.actionNames.eventColumn.loginWithCityStateAndCountry.withAuthType",defaultMessage:"Logged in {platform} via {loginMethod} in {geolocation}",values:{platform:z(e),geolocation:(0,M().BN)(e,t),loginMethod:F(i)}}):null!==(n=e.actor.meta)&&void 0!==n&&n.countryCode&&!i?(0,C.jsx)(r().sA,{id:"auditLog.actionNames.eventColumn.loginWithCityStateAndCountry",defaultMessage:"Logged in {platform} in {geolocation}",values:{platform:z(e),geolocation:(0,M().BN)(e,t)}}):i?(0,C.jsx)(r().sA,{id:"auditLog.actionNames.eventColumn.loginWithPlatform.withAuthType",defaultMessage:"Logged in {platform} via {loginMethod}",values:{platform:z(e),loginMethod:F(i)}}):(0,C.jsx)(r().sA,{id:"auditLog.actionNames.eventColumn.loginWithPlatform",defaultMessage:"Logged in {platform}",values:{platform:z(e)}})}(Ee,Re);case"allowed_support_access":return(0,C.jsx)(r().sA,{defaultMessage:"Granted support access for {name} until {date}",id:"auditlog.actionNames.allowed_support_access",values:{date:Re.formatDate(Ee.changes.expiresAt),name:Ee.target.user.name}});case"revoked_support_access":return(0,C.jsx)(r().sA,{defaultMessage:"Revoked support access for {name}",id:"auditlog.actionNames.revoked_support_access",values:{name:Ee.target.user.name}});case"preferred_name_changed":return function(e,t){var a;const s=!!e.target&&e.actor.actorId!==(null===(a=e.target)||void 0===a?void 0:a.user.id),n=e.changes.name.oldValue,i=e.changes.name.newValue;if(s){if(n&&i)return(0,C.jsx)(r().sA,{defaultMessage:"Changed {memberNameAndEmail} name from “{oldValue}” to “{newValue}”",id:"auditlog.actionNames.eventColumn.external_preferred_name_changed",values:{memberNameAndEmail:(0,m().xC)(t,e),oldValue:n,newValue:i}});if(!n&&i)return(0,C.jsx)(r().sA,{defaultMessage:"Set {memberNameAndEmail} name to “{newValue}”",id:"auditlog.actionNames.eventColumn.external_preferred_name_changed_to_value",values:{memberNameAndEmail:(0,m().xC)(t,e),newValue:i}});if(n&&!i)return(0,C.jsx)(r().sA,{defaultMessage:"Removed {memberNameAndEmail} name “{oldValue}”",id:"auditlog.actionNames.eventColumn.external_preferred_name_changed_from_value",values:{memberNameAndEmail:(0,m().xC)(t,e),oldValue:n}})}if(n&&i)return(0,C.jsx)(r().sA,{defaultMessage:"Changed name from “{oldValue}” to “{newValue}”",id:"auditlog.actionNames.eventColumn.preferred_name_changed",values:{oldValue:n,newValue:i}});if(!n&&i)return(0,C.jsx)(r().sA,{defaultMessage:"Set name to “{newValue}”",id:"auditlog.actionNames.eventColumn.preferred_name_changed_to_value",values:{newValue:i}});if(n&&!i)return(0,C.jsx)(r().sA,{defaultMessage:"Removed name “{oldValue}”",id:"auditlog.actionNames.eventColumn.preferred_name_changed_from_value",values:{oldValue:n}});return(0,C.jsx)(r().sA,{defaultMessage:"Name was changed",id:"auditlog.actionNames.eventColumn.preferred_name_changed_generic"})}(Ee,Re);case"email_changed":return function(e,t){var a;const s=!!e.target&&e.actor.actorId!==(null===(a=e.target)||void 0===a?void 0:a.user.id);return s?(0,C.jsx)(r().sA,{defaultMessage:"Changed {memberNameAndEmail} email from {oldEmail} to {newEmail}",id:"auditlog.actionNames.eventColumn.external_email_changed",values:{memberNameAndEmail:(0,m().xC)(t,e),oldEmail:e.changes.email.oldValue,newEmail:e.changes.email.newValue}}):(0,C.jsx)(r().sA,{defaultMessage:"Changed email from {oldEmail} to {newEmail}",id:"auditlog.actionNames.eventColumn.email_changed",values:{oldEmail:e.changes.email.oldValue,newEmail:e.changes.email.newValue}})}(Ee,Re);case"picture_changed":return function(e,t){var a;const s=!!e.target&&e.actor.actorId!==(null===(a=e.target)||void 0===a?void 0:a.user.id);return s?(0,C.jsx)(r().sA,{defaultMessage:"Changed {memberNameAndEmail} profile picture",id:"auditlog.actionNames.eventColumn.external_picture_changed",values:{memberNameAndEmail:(0,m().xC)(t,e)}}):(0,C.jsx)(r().sA,{defaultMessage:"Changed profile picture",id:"auditlog.actionNames.eventColumn.picture_changed"})}(Ee,Re);case"member_invited":{const Mt=R(Ee);return(0,C.jsx)(r().sA,{defaultMessage:"Invited {memberNameAndEmail} to the workspace as {newRole}",id:"auditlog.actionNames.eventColumn.member_invited",values:{memberNameAndEmail:(0,m().xC)(Re,Ee),newRole:Mt.newRole}})}case"member_role_updated":{const Ct=R(Ee);return(0,C.jsx)(r().sA,{defaultMessage:"Updated {memberNameAndEmail} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.member_role_updated",values:{memberNameAndEmail:(0,m().xC)(Re,Ee),oldRole:Ct.oldRole,newRole:Ct.newRole}})}case"member_removed":return Ee.actor.actorId===Ee.target.user.id?(0,C.jsx)(r().sA,{defaultMessage:"Left the workspace",id:"auditlog.actionNames.eventColumn.member_left"}):(0,C.jsx)(r().sA,{defaultMessage:"Removed {memberNameAndEmail} from the workspace",id:"auditlog.actionNames.eventColumn.member_removed",values:{memberNameAndEmail:(0,m().xC)(Re,Ee)}});case"guest_removed":return(0,C.jsx)(r().sA,{defaultMessage:"Removed guest {guestNameAndEmail} from the workspace",id:"auditlog.actionNames.eventColumn.guest_removed",values:{guestNameAndEmail:(0,m().xC)(Re,Ee)}});case"file_downloaded":return function(e){return(0,C.jsx)(r().sA,{defaultMessage:"Downloaded {fileName} from {pageName}",id:"auditlog.actionNames.eventColumn.file_downloaded",values:{fileName:ee(e),pageName:(0,_().wS)(e)}})}(Ee);case"invite_link_toggled":return Ee.changes.enabled.newValue?(0,C.jsx)(r().sA,{id:"auditlog.actionNames.eventColumn.inviteLink.enabled",defaultMessage:"Enabled invite link"}):(0,C.jsx)(r().sA,{id:"auditlog.actionNames.eventColumn.inviteLink.disabled",defaultMessage:"Disabled invite link"});case"public_page_sharing_toggled":case"workspace_sidebar_editing_toggled":case"disable_guests_toggled":case"pages_to_other_workspaces_toggled":case"export_toggled":case"page_access_requests_toggled":return(0,c().ez)((0,m().sp)(Ee,Re));case"workspace_name_changed":return(0,C.jsx)(r().sA,{defaultMessage:"Changed workspace name from “{oldValue}” to “{newValue}”",id:"auditlog.actionNames.eventColumn.workspace_name_changed",values:{oldValue:Ee.changes.name.oldValue,newValue:Ee.changes.name.newValue}});case"workspace_domain_changed":return(0,C.jsx)(r().sA,{defaultMessage:"Changed workspace domain {oldValue} to “{newValue}”",id:"auditlog.actionNames.eventColumn.workspace_domain_changed",values:{oldValue:O(Ee),newValue:Ee.changes.name.newValue}});case"workspace_integration_restriction_changed":return function(e){const t=void 0,{oldValue:a,newValue:s}=e.changes.integration_restrictions;if(s===t)return(0,C.jsx)(r().sA,{defaultMessage:"Enabled members installing integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.no_restrictions"});if(a===t&&"approved_only"===s)return(0,C.jsx)(r().sA,{defaultMessage:"Disabled members installing integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.approved_only"});if("approved_or_built_by_notion"===a&&"approved_only"===s)return(0,C.jsx)(r().sA,{defaultMessage:"Disabled auto approval for built-by-Notion integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.disabled_built_by_notion.from_approved_or_built_by_notion"});if("approved_only"===a&&"approved_or_built_by_notion"===s)return(0,C.jsx)(r().sA,{defaultMessage:"Enabled auto approval for built-by-Notion integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.enabled_built_by_notion"});return(0,C.jsx)(r().sA,{defaultMessage:"Changed workspace integration restriction",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.fallback_message"})}(Ee);case"workspace.settings.disallow_webhook_automation_action_toggled":return function(e){const{newValue:t}=e.changes.enabled;if(t)return(0,C.jsx)(r().sA,{defaultMessage:"Disabled using ‘Send webhook’ action in automations",id:"auditlog.actionNames.eventColumn.workspace.settings.disallow_webhook_automation_action_toggled.enabled"});return(0,C.jsx)(r().sA,{defaultMessage:"Enabled using ‘Send webhook’ action in automations",id:"auditlog.actionNames.eventColumn.workspace.settings.disallow_webhook_automation_action_toggled.disabled"})}(Ee);case"allowed_email_domain_added":return(0,C.jsx)(r().sA,{defaultMessage:"Added “{addedValue}” into allowable email domains",id:"auditlog.actionNames.eventColumn.allowed_email_domain_added",values:{addedValue:Ee.changes.domain}});case"allowed_email_domain_removed":return(0,C.jsx)(r().sA,{defaultMessage:"Removed “{removedValue}” from allowable email domains",id:"auditlog.actionNames.eventColumn.allowed_email_domain_removed",values:{removedValue:Ee.changes.domain}});case"public_page_set":return Ee.changes.name.oldValue?(0,C.jsx)(r().sA,{defaultMessage:"Changed public home page from “{oldPage}” to “{newPage}”",id:"auditlog.actionNames.eventColumn.public_page_changed",values:{oldPage:Ee.changes.name.oldValue,newPage:Ee.changes.name.newValue}}):(0,C.jsx)(r().sA,{defaultMessage:"Set “{newPage}” as public home page",id:"auditlog.actionNames.eventColumn.public_page_set",values:{newPage:Ee.changes.name.newValue}});case"idp_metadata_url_updated":case"organization.saml.idp_metadata_url_updated":return Ee.changes.url.oldValue?(0,C.jsx)(r().sA,{defaultMessage:"Changed IDP metadata URL from “{oldValue}” to “{newValue}”",id:"auditlog.actionNames.eventColumn.idp_metadata_url_updated",values:{oldValue:Ee.changes.url.oldValue,newValue:Ee.changes.url.newValue}}):(0,C.jsx)(r().sA,{defaultMessage:"Set IDP metadata URL to “{newValue}”",id:"auditlog.actionNames.eventColumn.idp_metadata_url_set",values:{newValue:Ee.changes.url.newValue}});case"saml_toggled":case"organization.saml.toggled":return Ee.changes.enabled.newValue?(0,C.jsx)(r().sA,{...u().D.saml_enabled}):(0,C.jsx)(r().sA,{...u().D.saml_disabled});case"saml_enforce_toggled":case"organization.saml.enforce_toggled":return Ee.changes.enabled.newValue?(0,C.jsx)(r().sA,{...u().D.saml_enforced}):(0,C.jsx)(r().sA,{...u().D.saml_unenforced});case"automatic_account_creation_toggled":case"organization.saml.automatic_account_creation_toggled":return Ee.changes.enabled.newValue?(0,C.jsx)(r().sA,{...u().D.automatic_account_creation_enabled}):(0,C.jsx)(r().sA,{...u().D.automatic_account_creation_disabled});case"workspace_analytics_toggled":return Ee.changes.enabled.newValue?(0,C.jsx)(r().sA,{...u().D.workspace_analytics_enabled}):(0,C.jsx)(r().sA,{...u().D.workspace_analytics_disabled});case"workspace_creation_set_for_email_domain":case"organization.managed_user_settings.workspace_creation_enum_updated":return function(e,t){const{oldValue:a,newValue:s}=e.changes.workspace_creation;if(!a&&!s)return(0,C.jsx)(r().sA,{defaultMessage:"Changed workspace creation setting",id:"auditlog.actionNames.eventColumn.workspace_creation_set_for_email_domain.fallback_message"});const n=e.changes.workspace_creation.oldValue?t.formatMessage({id:"auditLogEntry.changes.workspaceCreation.beforeSetting",defaultMessage:" from {prevWorkspaceCreationSetting}"},{prevWorkspaceCreationSetting:(0,b().XB)(e.changes.workspace_creation.oldValue,t)}):"",i=e.changes.workspace_creation.newValue?t.formatMessage({id:"auditLogEntry.changes.workspaceCreation.afterSetting",defaultMessage:" to {afterWorkspaceCreationSetting}"},{afterWorkspaceCreationSetting:(0,b().XB)(e.changes.workspace_creation.newValue,t)}):"";return(0,C.jsx)(r().sA,{defaultMessage:"Changed workspace creation setting{before}{after}.",id:"auditlog.actionNames.eventColumn.workspace_creation_set_for_email_domain",values:{before:n,after:i}})}(Ee,Re);case"member_added_to_group":return(0,C.jsx)(r().sA,{defaultMessage:"Added {memberNameAndEmail} to {groupName}",id:"auditlog.actionNames.eventColumn.member_added_to_group",values:{memberNameAndEmail:(0,m().xC)(Re,Ee),groupName:P(Ee.target.group)}});case"member_removed_from_group":return(0,C.jsx)(r().sA,{defaultMessage:"Removed {memberNameAndEmail} from {groupName}",id:"auditlog.actionNames.eventColumn.member_removed_from_group",values:{memberNameAndEmail:(0,m().xC)(Re,Ee),groupName:P(Ee.target.group)}});case"space_transfer_status_changed":return function(e,t){const{oldValue:a,newValue:s}=e.changes.spaceTransferStatus,n=e.target.space.name?t.formatMessage({id:"auditLogEntry.changes.space_transfer_status_changed.space_name",defaultMessage:" for {spaceName}"},{spaceName:e.target.space.name}):"";if(!a&&!s)return(0,C.jsx)(r().sA,{defaultMessage:"Workspace transfer status changed{spaceNameMessage}",id:"auditlog.actionNames.eventColumn.space_transfer_status_changed.fallback_message",values:{spaceNameMessage:n}});if(!s)return(0,C.jsx)(r().sA,{defaultMessage:"Workspace transfer request cleared{spaceNameMessage} from prior status of {oldStatus}",id:"auditlog.actionNames.eventColumn.space_transfer_status_cleared",values:{spaceNameMessage:n,oldStatus:a}});return(0,C.jsx)(r().sA,{defaultMessage:"{newStatus, select, requested {Workspace transfer request initiated{spaceNameMessage}.} started {Workspace transfer started{spaceNameMessage}} completed {Workspace transfer completed{spaceNameMessage}} other {Workspace transfer status change to {newStatus}{spaceNameMessage}}}",id:"auditlog.actionNames.eventColumn.space_transfer_status_changed.newStatus",values:{spaceNameMessage:n,newStatus:s}})}(Ee,Re);case"space_claim_and_upgrade_status_changed":return function(e){const{oldValue:t,newValue:a}=e.changes.claimAndUpgradeStatus,s=(0,C.jsx)(r().sA,{defaultMessage:"Status changed for workspace claim of {workspaceName}",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_changed.fallback_message",values:{workspaceName:e.target.space.name}});if(!t&&!a)return s;if(!a&&"completed"!==t)return(0,C.jsx)(r().sA,{defaultMessage:"Pending workspace claim for {workspaceName} has been cleared from {oldStatus}",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_cleared",values:{workspaceName:e.target.space.name,oldStatus:t}});if("completed"===a)return(0,C.jsx)(r().sA,{defaultMessage:"{workspaceName} has been claimed and upgraded to the Enterprise plan",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_completed",values:{workspaceName:e.target.space.name}});if("requested"===a)return(0,C.jsx)(r().sA,{defaultMessage:"Request to claim and upgrade {workspaceName} has been sent.",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_requested",values:{workspaceName:e.target.space.name}});return s}(Ee);case"space_claim_deletion_status_changed":return function(e){const{oldValue:t,newValue:a}=e.changes.claimDeletionStatus,s=(0,C.jsx)(r().sA,{defaultMessage:"Claimable workspace deletion status change for {spaceName}",id:"auditlog.actionNames.eventColumn.space_claim_deletion_status_changed.fallback_message",values:{spaceName:e.target.space.name}});if(!t&&!a)return s;if(!a||"canceled"===a)return(0,C.jsx)(r().sA,{defaultMessage:"Recovered workspace {spaceName} using Domain Management",id:"auditlog.actionNames.eventColumn.space_claim_deletion.status_cleared",values:{spaceName:e.target.space.name}});return(0,C.jsx)(r().sA,{defaultMessage:"Deleted workspace {spaceName} using Domain Management",id:"auditlog.actionNames.eventColumn.space_claim_deletion.deleted",values:{spaceName:e.target.space.name}})}(Ee);case"organization.domain_claim.claim_and_upgrade_status_updated":return function(e){const{oldValue:t,newValue:a}=e.changes.claimAndUpgradeStatus,s=(0,C.jsx)(r().sA,{defaultMessage:"Status changed for organization’s workspace claim of {workspaceName}",id:"auditlog.actionNames.eventColumn.organization_space_claim_upgrade_status_changed.fallback_message",values:{workspaceName:e.target.space.name}});if(!t&&!a)return s;if(!a&&"completed"!==t)return(0,C.jsx)(r().sA,{defaultMessage:"Pending workspace claim by organization for {workspaceName} has been cleared from {oldStatus}",id:"auditlog.actionNames.eventColumn.organization_space_claim_upgrade_status_cleared",values:{workspaceName:e.target.space.name,oldStatus:t}});if("completed"===a)return(0,C.jsx)(r().sA,{defaultMessage:"{workspaceName} has been successfully claimed by organization.",id:"auditlog.actionNames.eventColumn.organization_space_claim_upgrade_status_completed",values:{workspaceName:e.target.space.name}});if("requested"===a)return(0,C.jsx)(r().sA,{defaultMessage:"Request sent to claim workspace: {workspaceName} for organization.",id:"auditlog.actionNames.eventColumn.organization_space_claim_upgrade_requested",values:{workspaceName:e.target.space.name}});return s}(Ee);case"membership_requests_toggled":return(0,C.jsx)(r().sA,{defaultMessage:"{enabled} allowing members to request adding new members",id:"auditlog.actionNames.eventColumn.membership_requests_toggled",values:{enabled:G(Ee)}});case"external_membership_requests_toggled":return(0,C.jsx)(r().sA,{defaultMessage:"{enabled} allowing external users to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.external_membership_requests_toggled",values:{enabled:Y(Ee)}});case"membership_request_resolved":return(0,C.jsx)(r().sA,{defaultMessage:"{status} request to add {email} to the workspace as a member",id:"auditlog.actionNames.eventColumn.membership_request_resolved",values:{status:$(Ee),email:(0,m().xC)(Re,Ee)}});case"guest_membership_requests_toggled":return(0,C.jsx)(r().sA,{defaultMessage:"{enabled} allowing page guests to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled",values:{enabled:Q(Ee)}});case"team_created":return(0,C.jsx)(r().sA,{defaultMessage:"Created {teamName}",id:"auditlog.actionNames.eventColumn.team_created",values:{teamName:(0,m().if)(Ee)}});case"team_archived":return(0,C.jsx)(r().sA,{defaultMessage:"Archived {teamName}",id:"auditlog.actionNames.eventColumn.team_archived",values:{teamName:(0,m().if)(Ee)}});case"team_default_toggled":return Ee.changes.enabled.newValue?(0,C.jsx)(r().sA,{defaultMessage:"Added {teamName} to the default teamspace list. Workspace members will automatically be added to the teamspace",id:"auditlog.actionNames.eventColumn.team_default_enabled",values:{teamName:(0,m().if)(Ee)}}):(0,C.jsx)(r().sA,{defaultMessage:"Removed {teamName} from the default teamspace list. Workspace members will no longer be automatically added to the teamspace",id:"auditlog.actionNames.eventColumn.team_default_disabled",values:{teamName:(0,m().if)(Ee)}});case"team_public_page_sharing_toggled":return Ee.changes.enabled.newValue?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(r().sA,{defaultMessage:"Disabled members sharing pages under {teamName} publicly",id:"auditlog.actionNames.eventColumn.team_public_page_sharing_disabled",values:{teamName:(0,m().if)(Ee)}}),D((null===(a=Ee.meta)||void 0===a?void 0:a.spacePublicPageSharingDisabled)??(null==Ee?void 0:Ee.spacePublicPageSharingDisabled),Ee.changes.enabled.newValue)]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(r().sA,{defaultMessage:"Enabled members sharing pages under {teamName} publicly",id:"auditlog.actionNames.eventColumn.team_public_page_sharing_enabled",values:{teamName:(0,m().if)(Ee)}}),D((null===(s=Ee.meta)||void 0===s?void 0:s.spacePublicPageSharingDisabled)??(null==Ee?void 0:Ee.spacePublicPageSharingDisabled),Ee.changes.enabled.newValue)]});case"team_export_toggled":return Ee.changes.enabled.newValue?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(r().sA,{defaultMessage:"Disabled export for {teamName}",id:"auditlog.actionNames.eventColumn.team_export_disabled",values:{teamName:(0,m().if)(Ee)}}),D((null===(n=Ee.meta)||void 0===n?void 0:n.spaceExportDisabled)??(null==Ee?void 0:Ee.spaceExportDisabled),Ee.changes.enabled.newValue)]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(r().sA,{defaultMessage:"Enabled export for {teamName}",id:"auditlog.actionNames.eventColumn.team_export_enabled",values:{teamName:(0,m().if)(Ee)}}),D((null===(i=Ee.meta)||void 0===i?void 0:i.spaceExportDisabled)??(null==Ee?void 0:Ee.spaceExportDisabled),Ee.changes.enabled.newValue)]});case"team_sidebar_editing_toggled":return Ee.changes.enabled.newValue?(0,C.jsx)(r().sA,{defaultMessage:"Disabled members changing the sidebar section for {teamName}",id:"auditlog.actionNames.eventColumn.team_sidebar_editing_disabled",values:{teamName:(0,m().if)(Ee)}}):(0,C.jsx)(r().sA,{defaultMessage:"Enabled members changing the sidebar section for {teamName}",id:"auditlog.actionNames.eventColumn.team_sidebar_editing_enabled",values:{teamName:(0,m().if)(Ee)}});case"team_creation_admins_setting_toggled":return Ee.changes.enabled.newValue?(0,C.jsx)(r().sA,{defaultMessage:"Disabled members creating teamspaces",id:"auditlog.actionNames.eventColumn.team_creation_admins_setting_disabled",values:{teamName:(0,m().if)(Ee)}}):(0,C.jsx)(r().sA,{defaultMessage:"Enabled members creating teamspaces",id:"auditlog.actionNames.eventColumn.team_creation_admins_setting_enabled",values:{teamName:(0,m().if)(Ee)}});case"team_guests_toggled":return Ee.changes.enabled.newValue?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(r().sA,{defaultMessage:"Disabled guests for {teamName}",id:"auditlog.actionNames.eventColumn.team_guests_toggled_disabled",values:{teamName:(0,m().if)(Ee)}}),D((null===(o=Ee.meta)||void 0===o?void 0:o.spaceDisableGuests)??Ee.spaceDisableGuests,Ee.changes.enabled.newValue)]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(r().sA,{defaultMessage:"Enabled guests for {teamName}",id:"auditlog.actionNames.eventColumn.team_guests_toggled_enabled",values:{teamName:(0,m().if)(Ee)}}),D((null===(v=Ee.meta)||void 0===v?void 0:v.spaceDisableGuests)??Ee.spaceDisableGuests,Ee.changes.enabled.newValue)]});case"team_name_changed":return(0,C.jsx)(r().sA,{defaultMessage:"Changed teamspace name {oldTeamNameToNewTeamName}",id:"auditlog.actionNames.eventColumn.team_name_changed",values:{oldTeamNameToNewTeamName:E(Ee)}});case"team_description_changed":return(0,C.jsx)(r().sA,{defaultMessage:"Changed description of {teamName}",id:"auditlog.actionNames.eventColumn.team_description_changed",values:{teamName:(0,m().if)(Ee)}});case"team_icon_changed":return(0,C.jsx)(r().sA,{defaultMessage:"Changed icon of {teamName}",id:"auditlog.actionNames.eventColumn.team_icon_changed",values:{teamName:(0,m().if)(Ee)}});case"member_added_to_team":return(0,C.jsx)(r().sA,{defaultMessage:"Invited {memberNameAndEmail} to {teamName} as {teamRole}",id:"auditlog.actionNames.eventColumn.member_added_to_team",values:{memberNameAndEmail:(0,m().xC)(Re,Ee),teamName:(0,m().if)(Ee),teamRole:B(Ee.changes.teamRole.newValue)}});case"group_added_to_team":return(0,C.jsx)(r().sA,{defaultMessage:"Invited {groupName} to {teamName} as teamspace member",id:"auditlog.actionNames.eventColumn.group_added_to_team",values:{groupName:P(Ee.target.group),teamName:(0,m().if)(Ee)}});case"member_removed_from_team":return(0,C.jsx)(r().sA,{defaultMessage:"Removed {memberNameAndEmail} from {teamName}",id:"auditlog.actionNames.eventColumn.member_removed_from_team",values:{memberNameAndEmail:(0,m().xC)(Re,Ee),teamName:(0,m().if)(Ee)}});case"group_removed_from_team":return(0,C.jsx)(r().sA,{defaultMessage:"Removed {groupName} from {teamName}",id:"auditlog.actionNames.eventColumn.group_removed_from_team",values:{groupName:P(Ee.target.group),teamName:(0,m().if)(Ee)}});case"member_joined_team":const Ke=(0,m().if)(Ee),Ge=B(Ee.changes.teamRole.newValue);return(0,_().AJ)(Ee)?(0,C.jsx)(r().sA,{defaultMessage:"Joined {teamName} as {teamRole} using administrator privileges",id:"auditlog.actionNames.eventColumn.member_joined_team_privileged",values:{teamName:Ke,teamRole:Ge}}):(0,C.jsx)(r().sA,{defaultMessage:"Joined {teamName} as {teamRole}",id:"auditlog.actionNames.eventColumn.member_joined_team",values:{teamName:Ke,teamRole:Ge}});case"member_left_team":return(0,C.jsx)(r().sA,{defaultMessage:"Left {teamName}",id:"auditlog.actionNames.eventColumn.member_left_team",values:{teamName:(0,m().if)(Ee)}});case"member_team_role_updated":const Ye=(0,m().xC)(Re,Ee),$e=B(Ee.changes.teamRole.oldValue),Qe=B(Ee.changes.teamRole.newValue),Je=(0,m().if)(Ee);return(0,_().AJ)(Ee)?(0,C.jsx)(r().sA,{defaultMessage:"Updated {memberNameAndEmail} from {oldTeamRole} to {newTeamRole} in {teamName} using administrator privileges",id:"auditlog.actionNames.eventColumn.member_team_role_updated_privileged",values:{memberNameAndEmail:Ye,oldTeamRole:$e,newTeamRole:Qe,teamName:Je}}):(0,C.jsx)(r().sA,{defaultMessage:"Updated {memberNameAndEmail} from {oldTeamRole} to {newTeamRole} in {teamName}",id:"auditlog.actionNames.eventColumn.member_team_role_updated",values:{memberNameAndEmail:Ye,oldTeamRole:$e,newTeamRole:Qe,teamName:Je}});case"team_user_permission_updated":return(0,C.jsx)(r().sA,{defaultMessage:"Updated {userNameOrEmail}’s custom permissions in {teamName} from {oldPermission} to {newPermission}.",id:"auditlog.actionNames.eventColumn.team_user_permission_updated",values:{userNameOrEmail:(0,m().xC)(Re,Ee),oldPermission:(0,_().H8)(Ee.changes.permission.oldValue),newPermission:(0,_().H8)(Ee.changes.permission.newValue),teamName:(0,m().if)(Ee)}});case"team_group_permission_updated":return(0,C.jsx)(r().sA,{defaultMessage:"Updated {groupName}’s custom permissions in {teamName} from {oldPermission} to {newPermission}.",id:"auditlog.actionNames.eventColumn.team_group_permission_updated",values:{groupName:P(Ee.target.group),oldPermission:(0,_().H8)(Ee.changes.permission.oldValue),newPermission:(0,_().H8)(Ee.changes.permission.newValue),teamName:(0,m().if)(Ee)}});case"team_member_default_permission_updated":return(0,C.jsx)(r().sA,{defaultMessage:"Updated default page permissions for teamspace members in {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_member_default_permission_updated",values:{teamName:(0,m().if)(Ee),oldRole:(0,_().H8)(null===(N=Ee.changes)||void 0===N||null===(N=N.permission)||void 0===N?void 0:N.oldValue),newRole:(0,_().H8)(null===(V=Ee.changes)||void 0===V||null===(V=V.permission)||void 0===V?void 0:V.newValue)}});case"team_guest_default_permission_updated":return(0,C.jsx)(r().sA,{defaultMessage:"Updated default page permissions for teamspace guests in {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_guest_default_permission_updated",values:{teamName:(0,m().if)(Ee),oldRole:(0,_().H8)(null===(W=Ee.changes)||void 0===W||null===(W=W.permission)||void 0===W?void 0:W.oldValue),newRole:(0,_().H8)(null===(q=Ee.changes)||void 0===q||null===(q=q.permission)||void 0===q?void 0:q.newValue)}});case"team_workspace_default_permission_updated":return(0,C.jsx)(r().sA,{defaultMessage:"Updated default page permissions for everyone else in the workspace for {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_workspace_default_permission_updated",values:{teamName:(0,m().if)(Ee),oldRole:(0,_().H8)(null===(X=Ee.changes)||void 0===X||null===(X=X.permission)||void 0===X?void 0:X.oldValue),newRole:(0,_().H8)(null===(te=Ee.changes)||void 0===te||null===(te=te.permission)||void 0===te?void 0:te.newValue)}});case"team_privacy_type_changed":return(0,C.jsx)(r().sA,{defaultMessage:"Changed the teamspace privacy type for {teamName} from {oldType} to {newType}",id:"auditlog.actionNames.eventColumn.team_privacy_type_changed",values:{teamName:(0,m().if)(Ee),oldType:K(null===(ae=Ee.changes)||void 0===ae?void 0:ae.teamAccessLevel.oldValue),newType:K(null===(se=Ee.changes)||void 0===se?void 0:se.teamAccessLevel.newValue)}});case"team_invite_access_changed":return(0,C.jsx)(r().sA,{defaultMessage:"Changed who can invite teamspace members to {newType} for {teamName}",id:"auditlog.actionNames.eventColumn.team_invite_access_changed",values:{teamName:(0,m().if)(Ee),newType:(He=null===(ne=Ee.changes)||void 0===ne||null===(ne=ne.teamInviteAccess)||void 0===ne?void 0:ne.newValue,He?(0,C.jsx)(r().sA,{...Z[He]}):(0,C.jsx)(r().sA,{...Z.unknown}))}});case"teams_enabled_for_space":return(0,C.jsx)(r().sA,{defaultMessage:"Enabled teamspaces for {workspaceName}",id:"auditlog.actionNames.eventColumn.teams_enabled_for_space",values:{workspaceName:Ee.target.space.name}});case"private_content_transferred":return(0,C.jsx)(r().sA,{defaultMessage:"Transferred private content from {fromUserName} to {toUserName}",id:"auditLog.actionNames.eventColumn.private_content_transferred",values:{fromUserName:(0,m().q4)(Re,Ee.changes.userPermission.oldValue),toUserName:(0,m().q4)(Re,Ee.changes.userPermission.newValue)}});case"user_analytics_exported":return(0,C.jsx)(r().sA,{id:"auditlogEventFilter.eventColumn.user_analytics_exported",defaultMessage:"Exported user analytics for {daysFilterString}",values:{daysFilterString:Re.formatMessage(w().jy[(null===(ie=Ee.meta)||void 0===ie?void 0:ie.daysFilter)||"last_90_days"]).toLowerCase()}});case"content_analytics_exported":return(0,C.jsx)(r().sA,{id:"auditlogEventFilter.eventColumn.content_analytics_exported",defaultMessage:"Exported content analytics for {daysFilterString}",values:{daysFilterString:Re.formatMessage(w().jy[(null===(oe=Ee.meta)||void 0===oe?void 0:oe.daysFilter)||"last_90_days"]).toLowerCase()}});case"admin_content_search_queried":case"admin_content_search_exported":function Ze(e){return e.join(Re.formatMessage(u().D.adminContentSearchPredicateSplit))}function Xe(e){return"starting"in e&&"ending"in e?`${e.starting} - ${e.ending}`:"starting"in e?`${e.starting} - `:"ending"in e?` - ${e.ending}`:void 0}const et=Ee.searchParameters.query&&Re.formatMessage(u().D.adminContentSearchQuery,{query:Ee.searchParameters.query}),tt=Ee.searchParameters.teamspaces&&Ee.searchParameters.teamspaces.length>0&&Re.formatMessage(u().D.adminContentSearchTeamspaces,{teamspaceCount:Ee.searchParameters.teamspaces.length,teamspaces:Ze(Ee.searchParameters.teamspaces)}),at=Ee.searchParameters.createdBy&&Ee.searchParameters.createdBy.length>0&&Re.formatMessage(u().D.adminContentSearchCreatedBy,{createdBy:Ze(Ee.searchParameters.createdBy)}),st=Ee.searchParameters.sharedWith&&Ee.searchParameters.sharedWith.length>0&&Re.formatMessage(u().D.adminContentSearchSharedWith,{sharedWith:Ze(Ee.searchParameters.sharedWith)}),nt=Ee.searchParameters.audience&&Ee.searchParameters.audience.length>0&&Re.formatMessage(u().D.adminContentSearchAudience,{audience:Ze(Ee.searchParameters.audience)}),it=Ee.searchParameters.createdTime&&Re.formatMessage(u().D.adminContentSearchCreatedTime,{createdTime:Xe(Ee.searchParameters.createdTime)}),ot=Ee.searchParameters.lastEditedTime&&Re.formatMessage(u().D.adminContentSearchLastEditedTime,{lastEditedTime:Xe(Ee.searchParameters.lastEditedTime)}),rt=Ee.searchParameters.deletionStatuses&&Ee.searchParameters.deletionStatuses.length>0&&Re.formatMessage(u().D.adminContentSearchDeletionStatus,{deletionStatuses:Ze(Ee.searchParameters.deletionStatuses.map((e=>Re.formatMessage((0,h().uT)(e))))),deletionStatusesCount:Ee.searchParameters.deletionStatuses.length}),lt=l().oE([et,tt,at,st,nt,it,ot,rt]);if("admin_content_search_queried"===Ee.actionName){if(0===lt.length)return(0,C.jsx)(r().sA,{id:"auditlogEventFilter.eventColumn.admin_content_search_queried.no_filters",defaultMessage:"Ran a content search with no filters"});{const Tt=Ze(lt);return(0,C.jsx)(r().sA,{id:"auditlogEventFilter.eventColumn.admin_content_search_queried",defaultMessage:"Ran a content search with the following criteria: {searchCriteria}",values:{searchCriteria:Tt}})}}if(0===lt.length)return(0,C.jsx)(r().sA,{id:"auditlogEventFilter.eventColumn.admin_content_search_exported.no_filters",defaultMessage:"Exported a content search result with no filters"});{const kt=Ze(lt);return(0,C.jsx)(r().sA,{id:"auditlogEventFilter.eventColumn.admin_content_search_exported",defaultMessage:"Exported a content search result with the following criteria: {searchCriteria}",values:{searchCriteria:kt}})}case"admin_managed_users_log_out_all":case"organization.managed_users.log_out":{const It=Re.formatList(Ee.meta.emailDomains,{type:"conjunction"});return(0,C.jsx)(r().sA,{id:"auditlogEventFilter.eventColumn.admin_managed_users_log_out_all",defaultMessage:"Logged out all managed users with the email domains {emailDomains}",values:{emailDomains:It}})}case"admin_managed_users_log_out_one":case"organization.managed_users.log_out_one":return(0,C.jsx)(r().sA,{defaultMessage:"Logged out {guestNameAndEmail} from all of their active sessions",id:"auditlog.actionNames.eventColumn.admin_managed_users_log_out_one",values:{guestNameAndEmail:(0,m().xC)(Re,Ee)}});case"admin_managed_users_password_cleared_one":case"organization.managed_users.password_cleared_one":return(0,C.jsx)(r().sA,{defaultMessage:"Reset the password and MFA settings for {guestNameAndEmail} and logged them out of their active sessions",id:"auditlog.actionNames.eventColumn.admin_managed_users_password_cleared_one",values:{guestNameAndEmail:(0,m().xC)(Re,Ee)}});case"admin_managed_users_password_cleared":case"organization.managed_users.password_cleared":{const Nt=Re.formatList(Ee.meta.emailDomains,{type:"conjunction"});return(0,C.jsx)(r().sA,{id:"auditlogEventFilter.eventColumn.admin_managed_users_password_cleared",defaultMessage:"Cleared passwords for all users with the email domains {emailDomains}",values:{emailDomains:Nt}})}case"automation_edited":return(0,C.jsx)(r().sA,{id:"auditlog.actionNames.eventColumn.automation_edited",defaultMessage:"Edited {automationType} on {pageTitle}",values:{automationType:(0,m().KE)(Ee.meta.automationType),pageTitle:(0,_().wS)(Ee)}});case"ai_admin_legal_acceptance_toggled":return(0,C.jsx)(r().sA,{defaultMessage:"{enabled} Notion AI for the workspace.",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled",values:{enabled:J(Ee)}});case"workspace.settings.hipaa_compliance_updated":return Ee.changes.enabled.newValue?(0,C.jsx)(r().sA,{defaultMessage:"Enabled HIPAA compliance",id:"auditlog.actionNames.eventColumn.hipaa_compliance_updated.enabled"}):(0,C.jsx)(r().sA,{defaultMessage:"Disabled HIPAA compliance",id:"auditlog.actionNames.eventColumn.hipaa_compliance_updated.disabled"});case"space_consolidation_started":case"space_consolidation_completed":case"space_consolidation_failed":const dt=Ee.spaceId===Ee.meta.spaceConsolidationMetadata.source_space_id,ct=Ee.meta.spaceConsolidationMetadata.source_space_name??Ee.meta.spaceConsolidationMetadata.source_space_id,ut=Ee.meta.spaceConsolidationMetadata.target_space_name??Ee.meta.spaceConsolidationMetadata.target_space_id,mt=Ee.changes.spaceContentDuplicationStatus.newValue;return(0,C.jsx)(r().sA,{defaultMessage:"{status} workspace consolidation {direction} {spaceName}.",id:"auditlog.actionNames.eventColumn.space_consolidation_status_changed",values:{status:mt?(0,C.jsx)(r().sA,{...I[mt]}):"",spaceName:dt?ut:ct,direction:(0,C.jsx)(r().sA,{...dt?u().D.into:u().D.from})}});case"mfa_sms_toggled":return(0,C.jsx)(r().sA,{defaultMessage:"{enabled} SMS MFA on “{value}”",id:"auditlog.actionNames.eventColumn.mfa_sms_toggled",values:{value:null!==(re=Ee.changes)&&void 0!==re&&re.maskedPhoneNumber.oldValue?null===(le=Ee.changes)||void 0===le?void 0:le.maskedPhoneNumber.oldValue:null===(de=Ee.changes)||void 0===de?void 0:de.maskedPhoneNumber.newValue,enabled:null!==(ce=Ee.changes)&&void 0!==ce&&ce.enabled.newValue?"Enabled":"Disabled"}});case"mfa_totp_toggled":return(0,C.jsx)(r().sA,{defaultMessage:"{enabled} TOTP MFA",id:"auditlog.actionNames.eventColumn.mfa_totp_toggled",values:{enabled:null!==(ue=Ee.changes)&&void 0!==ue&&ue.enabled.newValue?"Enabled":"Disabled"}});case"mfa_backup_code_toggled":return(0,C.jsx)(r().sA,{defaultMessage:"{enabled} backup codes for MFA",id:"auditlog.actionNames.eventColumn.mfa_backup_code_toggled",values:{enabled:null!==(me=Ee.changes)&&void 0!==me&&me.enabled.newValue?"Enabled":"Disabled"}});case"user_suspended":return(0,C.jsx)(r().sA,{defaultMessage:"Suspended {userNameAndEmail}",id:"auditLogEntry.user_suspended",values:{userNameAndEmail:(0,m().xC)(Re,Ee)}});case"user_unsuspended":return(0,C.jsx)(r().sA,{defaultMessage:"Reactivated {userNameAndEmail}",id:"auditLogEntry.user_unsuspended",values:{userNameAndEmail:(0,m().xC)(Re,Ee)}});case"user_deleted":return Ee.target?(0,C.jsx)(r().sA,{defaultMessage:"Deleted {userNameAndEmail}",id:"auditLogEntry.user_deleted",values:{userNameAndEmail:(0,m().q4)(Re,Ee.target.user)}}):(0,C.jsx)(r().sA,{...u().D.user_deleted});case"workspace.settings.prevent_granting_support_access_updated":case"organization.managed_user_settings.prevent_granting_support_access_updated":return Ee.changes.enabled.newValue?(0,C.jsx)(r().sA,{defaultMessage:"Disabled managed user members’ ability to grant support access for their account.",id:"auditLogEntry.workspace_domain_settings_prevent_granting_support_access_updated.enabled"}):(0,C.jsx)(r().sA,{defaultMessage:"Enabled managed user members’ ability to grant support access for their account.",id:"auditLogEntry.workspace_domain_settings_prevent_granting_support_access_updated.disabled"});case"workspace.settings.prevent_profile_edits_updated":case"organization.managed_user_settings.prevent_profile_edits_updated":return Ee.changes.enabled.newValue?(0,C.jsx)(r().sA,{defaultMessage:"Disabled managed user members’ ability to edit their profile information.",id:"auditLogEntry.workspace_domain_settings_prevent_profile_edits_updated.enabled"}):(0,C.jsx)(r().sA,{defaultMessage:"Enabled managed user members’ ability to edit their profile information.",id:"auditLogEntry.workspace_domain_settings_prevent_profile_edits_updated.disabled"});case"workspace.settings.external_workspace_access_updated":case"organization.managed_user_settings.external_workspace_access_updated":return Ee.changes.enabled.newValue?(0,C.jsx)(r().sA,{defaultMessage:"Disabled managed user members’ ability to join external workspaces.",id:"auditLogEntry.workspace_domain_settings_external_workspace_access_updated.enabled"}):(0,C.jsx)(r().sA,{defaultMessage:"Enabled managed user members’ ability to join external workspaces.",id:"auditLogEntry.workspace_domain_settings_external_workspace_access_updated.disabled"});case"workspace.settings.delete_from_trash_delay":return void 0!==Ee.changes.valueS.oldValue||void 0!==Ee.changes.valueS.newValue?(0,C.jsx)(r().sA,{defaultMessage:"Changed duration for when pages are deleted from Trash from {oldDuration} to {newDuration}.",id:"auditLogEntry.workspace_settings_delete_from_trash_delay",values:{oldDuration:(0,A().rN)(Ee.changes.valueS.oldValue??g().I4,Re),newDuration:(0,A().rN)(Ee.changes.valueS.newValue??g().I4,Re)}}):(0,C.jsx)(r().sA,{defaultMessage:"Changed duration for when pages are deleted from Trash.",id:"auditLogEntry.workspace_settings_delete_from_trash_delay.generic"});case"workspace.settings.purge_delay":return void 0!==Ee.changes.valueS.oldValue||void 0!==Ee.changes.valueS.newValue?(0,C.jsx)(r().sA,{defaultMessage:"Changed duration for when deleted pages are permanently deleted from {oldDuration} to {newDuration}.",id:"auditLogEntry.workspace_settings_purge_delay",values:{oldDuration:(0,A().rN)(Ee.changes.valueS.oldValue??g().qI,Re),newDuration:(0,A().rN)(Ee.changes.valueS.newValue??g().qI,Re)}}):(0,C.jsx)(r().sA,{defaultMessage:"Changed duration for when deleted pages are permanently deleted.",id:"auditLogEntry.workspace_settings_purge_delay.generic"});case"workspace.settings.custom_session_duration_updated":case"organization.managed_user_settings.custom_session_duration_updated":return void 0!==Ee.changes.valueMs.oldValue&&void 0!==Ee.changes.valueMs.newValue?(0,C.jsx)(r().sA,{defaultMessage:"Changed the session duration for all managed users from {oldDuration} to {newDuration}.",id:"auditLogEntry.workspace_domain_settings_session_duration_updated",values:{oldDuration:(0,p().lH)(Ee.changes.valueMs.oldValue,Re),newDuration:(0,p().lH)(Ee.changes.valueMs.newValue,Re)}}):(0,C.jsx)(r().sA,{defaultMessage:"Changed the session duration for all managed users.",id:"auditLogEntry.workspace_domain_settings_session_duration_updated.disabled"});case"workspace.public_domain.created":return(0,C.jsx)(r().sA,{defaultMessage:"Public domain “{name}” created",id:"auditLogEntry.workspace_public_domain_created",values:{name:Ee.target.publicDomain.domainName}});case"workspace.public_domain.updated":return void 0!==(null===(ge=Ee.changes.name)||void 0===ge?void 0:ge.oldValue)&&void 0!==(null===(pe=Ee.changes.name)||void 0===pe?void 0:pe.newValue)?(0,C.jsx)(r().sA,{defaultMessage:"Changed public domain name from “{oldValue}” to “{newValue}”",id:"auditLogEntry.workspace_public_domain_updated.domain_name",values:{oldValue:Ee.changes.name.oldValue,newValue:Ee.changes.name.newValue}}):void 0===(null===(he=Ee.changes.publicHomePage)||void 0===he?void 0:he.oldValue)&&void 0!==(null===(fe=Ee.changes.publicHomePage)||void 0===fe?void 0:fe.newValue)?(0,C.jsx)(r().sA,{defaultMessage:"Changed public domain add home page “{newValue}”",id:"auditLogEntry.workspace_public_domain_updated.public_home_page.add",values:{newValue:Ee.changes.publicHomePage.newValue}}):void 0!==(null===(ve=Ee.changes.publicHomePage)||void 0===ve?void 0:ve.oldValue)&&void 0!==(null===(ye=Ee.changes.publicHomePage)||void 0===ye?void 0:ye.newValue)?(0,C.jsx)(r().sA,{defaultMessage:"Changed public domain home page from “{oldValue}” to “{newValue}”",id:"auditLogEntry.workspace_public_domain_updated.public_home_page.update",values:{oldValue:Ee.changes.publicHomePage.oldValue,newValue:Ee.changes.publicHomePage.newValue}}):(0,C.jsx)(r().sA,{defaultMessage:"Changed public domain",id:"auditLogEntry.workspace_public_domain_updated.unknown"});case"workspace.public_domain.deleted":return(0,C.jsx)(r().sA,{defaultMessage:"Public domain “{name}” deleted",id:"auditLogEntry.workspace_public_domain_deleted",values:{name:Ee.target.publicDomain.domainName}});case"workspace.custom_emoji.updated":const gt=null===(xe=Ee.changes.name)||void 0===xe?void 0:xe.oldValue,pt=null===(be=Ee.changes.name)||void 0===be?void 0:be.newValue,ht=null===(Se=Ee.changes.url)||void 0===Se?void 0:Se.oldValue,ft=null===(je=Ee.changes.url)||void 0===je?void 0:je.newValue;return void 0!==gt&&void 0!==pt&&void 0!==ht&&void 0!==ft?(0,C.jsx)(r().sA,{defaultMessage:"Changed image and name of custom emoji from “{oldName}” to “{newName}”",id:"auditLogEntry.workspace_custom_emoji_updated.name_image",values:{oldName:gt,newName:pt}}):void 0!==gt&&void 0!==pt?(0,C.jsx)(r().sA,{defaultMessage:"Changed name of custom emoji from “{oldName}” to “{newName}”",id:"auditLogEntry.workspace_custom_emoji_updated.name",values:{oldName:gt,newName:pt}}):void 0!==ht&&void 0!==ft?(0,C.jsx)(r().sA,{defaultMessage:"Changed image of custom emoji “{name}”",id:"auditLogEntry.workspace_custom_emoji_updated.image",values:{name:Ee.target.customEmoji.name}}):(0,C.jsx)(r().sA,{defaultMessage:"Changed custom emoji",id:"auditLogEntry.workspace_custom_emoji_updated.unknown"});case"workspace.custom_emoji.deleted":return(0,C.jsx)(r().sA,{defaultMessage:"Deleted custom emoji “{name}”",id:"auditLogEntry.workspace_custom_emoji_deleted",values:{name:Ee.target.customEmoji.name}});case"integration.created":return(0,C.jsx)(r().sA,{defaultMessage:"Added {botName} to the workspace",id:"auditLogEntry.integration.created",values:{botName:(0,m().Hg)(Re,Ee.meta.bot)}});case"integration.deleted":return(0,C.jsx)(r().sA,{defaultMessage:"Removed {botName} from workspace",id:"auditLogEntry.integration.deleted",values:{botName:(0,m().Hg)(Re,Ee.meta.bot)}});case"page.automation_deleted":return(0,C.jsx)(r().sA,{defaultMessage:"Deleted automation {automationType} from {pageTitle}",id:"auditLogEntry.page.automation_deleted",values:{automationType:(0,m().KE)(Ee.meta.automationType),pageTitle:(0,_().wS)(Ee)}});case"page.file_deleted":return(0,C.jsx)(r().sA,{defaultMessage:"Deleted file {fileName} from {pageTitle}",id:"auditLogEntry.page.file_deleted",values:{fileName:ee(Ee),pageTitle:(0,_().wS)(Ee)}});case"integration.secret_reset":return(0,C.jsx)(r().sA,{defaultMessage:"Reset authentication secret of {botName}",id:"auditLogEntry.integration.secret_reset",values:{botName:(0,m().Hg)(Re,Ee.meta.bot)}});case"integration.settings.updated":return(0,C.jsx)(r().sA,{defaultMessage:"Updated settings of {botName}",id:"auditLogEntry.integration.settings.update",values:{botName:(0,m().Hg)(Re,Ee.meta.bot)}});case"integration.permission.updated":return(0,C.jsx)(r().sA,{defaultMessage:"Updated capabilities of {botName}: {botCapabilities}",id:"auditLogEntry.integration.permission.update",values:{botName:(0,m().Hg)(Re,Ee.meta.bot),botCapabilities:k(Ee.meta.bot)}});case"workspace.external_account_connected":return(0,C.jsx)(r().sA,{defaultMessage:"Connected external/public integration {integrationName}",id:"auditLogEntry.workspace.external_account_connected",values:{integrationName:(0,m().Hg)(Re,Ee.meta.bot)}});case"workspace.external_account_disconnected":return(0,C.jsx)(r().sA,{defaultMessage:"Disconnected external/public integration {integrationName}",id:"auditLogEntry.workspace.external_account_disconnected",values:{integrationName:(0,m().Hg)(Re,Ee.meta.bot)}});case"workspace.integration_added":return(0,C.jsx)(r().sA,{defaultMessage:"Added {integrationName} to the workspace",id:"auditLogEntry.workspace.workspace.integration_added",values:{integrationName:(0,m().Hg)(Re,Ee.meta.bot)}});case"workspace.integration_removed":return(0,C.jsx)(r().sA,{defaultMessage:"Removed {integrationName} from workspace",id:"auditLogEntry.workspace.workspace.integration_removed",values:{integrationName:(0,m().Hg)(Re,Ee.meta.bot)}});case"workspace.integration_webhook_inactivated":return(0,C.jsx)(r().sA,{defaultMessage:"Webhook events for {integrationName} failing",id:"auditLogEntry.workspace.integration_webhook_inactivated",values:{integrationName:(0,m().Hg)(Re,Ee.meta.bot)}});case"workspace.integration_webhook_reactivated":return(0,C.jsx)(r().sA,{defaultMessage:"Webhook events for {integrationName} restored",id:"auditLogEntry.workspace.integration_webhook_reactivated",values:{integrationName:(0,m().Hg)(Re,Ee.meta.bot)}});case"user.settings.analytics_tracking_setting_updated":return(0,C.jsx)(r().sA,{defaultMessage:"{enabledOrDisabled} page view tracking on their user account",id:"auditLogEntry.user.settings.analytics_tracking_setting_updated",values:{enabledOrDisabled:(0,m().ko)(Re,Boolean(null===(Ae=Ee.changes)||void 0===Ae||null===(Ae=Ae.enabled)||void 0===Ae?void 0:Ae.newValue))}});case"workspace.settings.guest_invite_request_setting_updated":return function(e,t){var a;return(0,C.jsx)(r().sA,{defaultMessage:"{enabledOrDisabled} allowing members to request inviting guests",id:"auditLogEntry.workspace.settings.guest_invite_request_setting_updated",values:{enabledOrDisabled:(0,m().ko)(t,Boolean(null===(a=e.changes)||void 0===a||null===(a=a.enabled)||void 0===a?void 0:a.newValue))}})}(Ee,Re);case"workspace.settings.ai_leap_toggled":return function(e,t){var a;return(0,C.jsx)(r().sA,{defaultMessage:"{enabledOrDisabled} Notion AI LEAP (Learning & Early Access Program)",id:"auditLogEntry.workspace.settings.ai_leap_toggled",values:{enabledOrDisabled:(0,m().ko)(t,Boolean(null===(a=e.changes)||void 0===a||null===(a=a.enabled)||void 0===a?void 0:a.newValue))}})}(Ee,Re);case"workspace.guest_invite_request_resolved":return function(e,t){const a=e.changes.requestStatus.newValue;return"approved"===a?(0,C.jsx)(r().sA,{id:"auditLog.actionNames.eventColumn.workspace.guest_invite_request_resolved.approved",defaultMessage:"Approved {requestorNameAndEmail}’s request to add guest {guestNameAndEmail} to {pageTitle}",values:{requestorNameAndEmail:(0,m().q4)(t,e.target.user),guestNameAndEmail:(0,m().q4)(t,e.meta.targetGuest),pageTitle:(0,_().uU)(e.meta.pagesAndRoles[0].page)}}):"rejected"===a?(0,C.jsx)(r().sA,{id:"auditLog.actionNames.eventColumn.workspace.guest_invite_request_resolved.rejected",defaultMessage:"Declined request to add guest {guestNameAndEmail} to {pageTitle}",values:{guestNameAndEmail:(0,m().q4)(t,e.meta.targetGuest),pageTitle:(0,_().uU)(e.meta.pagesAndRoles[0].page)}}):(0,C.jsx)(C.Fragment,{})}(Ee,Re);case"workspace.settings.integration_restrictions.integration_added_to_allowlist":case"workspace.settings.integration_restrictions.integration_removed_from_allowlist":return function(e){if("workspace.settings.integration_restrictions.integration_added_to_allowlist"===e.actionName)return(0,C.jsx)(r().sA,{defaultMessage:"Added {integrationName} to the approved connections list",id:"auditLogEntry.workspace.settings.integration_allowlist_add",values:{integrationName:e.meta.integrationName}});return(0,C.jsx)(r().sA,{defaultMessage:"Removed {integrationName} from the approved connections list",id:"auditLogEntry.workspace.settings.integration_allowlist_remove",values:{integrationName:e.meta.integrationName}})}(Ee);case"workspace_exported":case"public_page_cleared":case"password_changed":case"password_cleared":case"password_set":case"member_joined":case"scim_token_generated":case"scim_token_revoked":case"invite_link_reset":case"idp_metadata_xml_removed":case"idp_metadata_xml_updated":case"organization.created":return(0,C.jsx)(r().sA,{...u().D[Ee.actionName]});case"organization.saml.idp_metadata_xml_removed":return(0,C.jsx)(r().sA,{...u().D.idp_metadata_xml_removed});case"organization.saml.idp_metadata_xml_updated":return(0,C.jsx)(r().sA,{...u().D.idp_metadata_xml_updated});case"organization.owner.added":return(0,C.jsx)(r().sA,{defaultMessage:"Added {ownerNameAndEmail} as an organization owner",id:"auditlogEventFilter.eventColumn.organization.owner.added",values:{ownerNameAndEmail:(0,m().xC)(Re,Ee)}});case"organization.owner.removed":return(0,C.jsx)(r().sA,{defaultMessage:"Removed {ownerNameAndEmail} as an organization owner",id:"auditlogEventFilter.eventColumn.organization.owner.removed",values:{ownerNameAndEmail:(0,m().xC)(Re,Ee)}});case"organization.audit_log_exported":return(0,C.jsx)(r().sA,{id:"auditlogEventFilter.eventColumn.organization.audit_log_exported",defaultMessage:"Exported the organization audit log for last {duration} days",values:{duration:Ee.meta.duration}});case"organization.settings.name_changed":return(0,C.jsx)(r().sA,{id:"auditlogEventFilter.eventColumn.organization.settings.name_changed",defaultMessage:"Changed the organization name from “{oldValue}” to “{newValue}”",values:{oldValue:Ee.changes.name.oldValue,newValue:Ee.changes.name.newValue}});case"organization.workspace.removed":return(0,C.jsx)(r().sA,{id:"auditlogEventFilter.eventColumn.organization.workspace.removed",defaultMessage:"Removed workspace “{workspaceName}” from the organization",values:{workspaceName:Ee.target.space.name}});case"organization.email_domain.verified":return(0,C.jsx)(r().sA,{defaultMessage:"Added a verified email domain “{emailDomain}” to the organization",id:"auditlog.actionNames.eventColumn.organization.email_domain.verified",values:{emailDomain:Ee.changes.domain}});case"organization.email_domain.unverified":return(0,C.jsx)(r().sA,{defaultMessage:"Removed a verified email domain “{emailDomain}” from the organization",id:"auditlog.actionNames.eventColumn.organization.email_domain.unverified",values:{emailDomain:Ee.changes.domain}});case"organization.default_space_settings.disable_guests_toggled":return(0,C.jsx)(r().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for guests",id:"auditlog.actionNames.eventColumn.organization.default_space_settings.disable_guests_toggled",values:{unsetOrEnabledOrDisabled:(0,m().P7)({intl:Re,value:null===(we=Ee.changes)||void 0===we||null===(we=we.enabled)||void 0===we?void 0:we.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.enable_ai_feature_toggled":return(0,C.jsx)(r().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for AI feature",id:"auditlog.actionNames.eventColumn.organization.enable_ai_feature_toggled",values:{unsetOrEnabledOrDisabled:(0,m().P7)({intl:Re,value:null===(_e=Ee.changes)||void 0===_e||null===(_e=_e.enabled)||void 0===_e?void 0:_e.newValue,shouldInvertBoolean:!1})}});case"organization.default_space_settings.disable_page_analytics_toggled":return(0,C.jsx)(r().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for page view tracking for workspace analytics",id:"auditlog.actionNames.eventColumn.organization.disable_page_analytics_toggled",values:{unsetOrEnabledOrDisabled:(0,m().P7)({intl:Re,value:null===(Me=Ee.changes)||void 0===Me||null===(Me=Me.enabled)||void 0===Me?void 0:Me.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_public_access_toggled":return(0,C.jsx)(r().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for members sharing pages publicly",id:"auditlog.actionNames.eventColumn.organization.disable_public_access_toggled",values:{unsetOrEnabledOrDisabled:(0,m().P7)({intl:Re,value:null===(Ce=Ee.changes)||void 0===Ce||null===(Ce=Ce.enabled)||void 0===Ce?void 0:Ce.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_move_to_space_toggled":return(0,C.jsx)(r().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for moving or duplicating pages to other workspaces",id:"auditlog.actionNames.eventColumn.organization.disable_move_to_space_toggled",values:{unsetOrEnabledOrDisabled:(0,m().P7)({intl:Re,value:null===(Te=Ee.changes)||void 0===Te||null===(Te=Te.enabled)||void 0===Te?void 0:Te.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_export_toggled":return(0,C.jsx)(r().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for exporting pages",id:"auditlog.actionNames.eventColumn.organization.disable_export_toggled",values:{unsetOrEnabledOrDisabled:(0,m().P7)({intl:Re,value:null===(ke=Ee.changes)||void 0===ke||null===(ke=ke.enabled)||void 0===ke?void 0:ke.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_membership_requests_toggled":return(0,C.jsx)(r().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for allowing members to request adding new members",id:"auditlog.actionNames.eventColumn.organization.disable_membership_requests_toggled",values:{unsetOrEnabledOrDisabled:(0,m().P7)({intl:Re,value:null===(Ie=Ee.changes)||void 0===Ie||null===(Ie=Ie.enabled)||void 0===Ie?void 0:Ie.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.disable_guest_membership_requests_toggled":return(0,C.jsx)(r().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for allowing page guests to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.organization.disable_guest_membership_requests_toggled",values:{unsetOrEnabledOrDisabled:(0,m().P7)({intl:Re,value:null===(Ne=Ee.changes)||void 0===Ne||null===(Ne=Ne.enabled)||void 0===Ne?void 0:Ne.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.enable_guest_invite_requests_toggled":return(0,C.jsx)(r().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for allowing members to request inviting guests",id:"auditlog.actionNames.eventColumn.organization.enable_guest_invite_requests_toggled",values:{unsetOrEnabledOrDisabled:(0,m().P7)({intl:Re,value:null===(De=Ee.changes)||void 0===De||null===(De=De.enabled)||void 0===De?void 0:De.newValue,shouldInvertBoolean:!1})}});case"organization.default_space_settings.disable_external_membership_requests_toggled":return(0,C.jsx)(r().sA,{defaultMessage:"{unsetOrEnabledOrDisabled} organization setting for allowing external users to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.organization.disable_external_membership_requests_toggled",values:{unsetOrEnabledOrDisabled:(0,m().P7)({intl:Re,value:null===(Pe=Ee.changes)||void 0===Pe||null===(Pe=Pe.enabled)||void 0===Pe?void 0:Pe.newValue,shouldInvertBoolean:!0})}});case"organization.default_space_settings.integration_restriction_updated":return function(e){const t=void 0,{newValue:a}=e.changes.integration_restrictions;if(a===t)return(0,C.jsx)(r().sA,{defaultMessage:"Updated organization integrations setting: workspaces may have their own integration restrictions",id:"auditlog.actionNames.eventColumn.organization.default_space_settings.integration_restriction_updated.undefined"});switch(a){case"no_restrictions":return(0,C.jsx)(r().sA,{defaultMessage:"Updated organization integrations setting: allowing members to install all integrations",id:"auditlog.actionNames.eventColumn.organization.default_space_settings.integration_restriction_updated.no_restrictions"});case"approved_only":return(0,C.jsx)(r().sA,{defaultMessage:"Updated organization integrations setting: allowing members to install only approved integrations",id:"auditlog.actionNames.eventColumn.organization.default_space_settings.integration_restriction_updated.approved_only"});case"approved_or_built_by_notion":return(0,C.jsx)(r().sA,{defaultMessage:"Updated organization integrations setting: allowing members to install only approved and Notion-built integrations",id:"auditlog.actionNames.eventColumn.organization.default_space_settings.integration_restriction_updated.approved_or_built_by_notion"});default:(0,d().HB)(a)}}(Ee);case"form_response.created":return(0,C.jsx)(r().sA,{defaultMessage:"New form submission for {formName} created",id:"auditLogEntry.workspace_form_submission_created",values:{formName:(0,_().$T)(Ee)}});case"form.created":return(0,C.jsx)(r().sA,{defaultMessage:"Created form",id:"auditLogEntry.workspace_form_created"});case"form.content.updated":return(0,C.jsx)(r().sA,{defaultMessage:"Edited form {formName}",id:"auditLogEntry.workspace_form_edited",values:{formName:(0,_().$T)(Ee)}});case"page.viewed.by_shared_email_domain_user":return(0,C.jsx)(r().sA,{defaultMessage:"{pageName} viewed by user on shared email domain",id:"auditLogEntry.page_viewed_by_shared_email_domain_user",values:{pageName:(0,_().wS)(Ee)}});default:if("local"!==Be)return f().log({level:"error",from:"auditLogEvent",type:"AuditLogEvent",data:{miscDataToConvertToString:{data:Ee}}}),(0,C.jsx)(C.Fragment,{});(0,d().HB)(Ee)}var He}function ee(e){const{name:t,extension:a}=e.target.file;return t?`“${t}“`:a?(0,C.jsx)(r().sA,{...u().D.a_file_with_extension,values:{extension:a}}):(0,C.jsx)(r().sA,{...u().D.a_file})}var te=()=>a(344417),ae=()=>a(53436),se=()=>a(326496),ne=()=>a(907258),ie=()=>a(590526),oe=()=>a(770063),re=()=>a(295633),le=()=>a(552712),de=()=>a(584262),ce=()=>a(100622),ue=()=>a(492414);function me(e){const{pageAuditLogEntry:t}=e,{table:a,id:s,meta:i}=t.target.page||{},o=(0,n().IS)((()=>({link:{display:"inline",color:ce().Tj.text.secondary,textDecoration:"underline"}})),[]),r=(0,ie().K8)((()=>{const{sidebarSpaceStore:e}=ne().default.state;return null!=i&&i.parent&&e?(0,oe().v3)(e,i.parent):e}),[i]),l=(0,ie().K8)((()=>s&&a&&r?re().B.createChildStore(r,{id:s,table:a}):null),[r,s,a]),d=(0,ie().K8)((()=>l?(0,ue().Ay)({store:l,pageVisitSource:de().y8.AuditLog}):null),[l]);return d?(0,C.jsxs)(C.Fragment,{children:["“",(0,C.jsx)(le().N,{style:o.link,external:!0,href:d,children:(0,_().wS)(t,{noQuotes:!0})}),"“"]}):(0,C.jsx)(C.Fragment,{children:(0,_().wS)(t)})}function ge(e){var t;const{auditLogEntry:a,id:l,isRelatedFilterActive:d=!1,isRelatedFilterEnabled:c=!1,onRequestRelatedFilter:u}=e,[m,g]=(0,s.useState)(""),[p,h]=(0,s.useState)(!1),f=(0,r().tz)(),v=(0,n().IS)((()=>({container:{display:"flex",alignItems:"center",width:"100%",position:"relative"},buttonOverlay:{position:"absolute",top:"50%",insetInlineEnd:0,transform:"translateY(-50%)",display:"flex",alignItems:"center",justifyContent:"center",width:28,height:28,pointerEvents:"none"}})),[]);(0,s.useEffect)((()=>{const e=document.getElementById(l);g((null==e?void 0:e.textContent)||"")}),[l]);const y=null===(t=a.requestMetadata)||void 0===t||null===(t=t.rootRequestContextId)||void 0===t?void 0:t.requestId,x=c&&!d&&Boolean(y)&&p,b=()=>{var e;if(!u||!y)return;const t=m&&m.length>0?m:null===(e=document.getElementById(l))||void 0===e?void 0:e.textContent;u(y,t||"")};return(0,C.jsx)(o().m,{style:{whiteSpace:"normal"},delayThreshold:80,renderTooltip:()=>(0,C.jsx)(he,{text:m,auditLogEntry:a}),placement:"bottom",render:e=>(0,C.jsxs)("div",{style:v.container,...e,onMouseEnter:t=>{var a;null===(a=e.onMouseEnter)||void 0===a||a.call(e,t),h(!0)},onMouseLeave:t=>{var a;null===(a=e.onMouseLeave)||void 0===a||a.call(e,t),h(!1)},onFocus:t=>{var a;null===(a=e.onFocus)||void 0===a||a.call(e,t),h(!0)},onBlur:t=>{var a;null===(a=e.onBlur)||void 0===a||a.call(e,t),h(!1)},children:[(0,C.jsx)(i().D,{styleKey:"bodyRegular",colorVariant:"primary",textOverflow:"ellipsis",id:l,children:(0,C.jsx)(pe,{auditLogEntry:a,env:"production",intl:f})}),x?(0,C.jsx)("div",{style:{...v.buttonOverlay,pointerEvents:p?"auto":"none"},children:(0,C.jsx)(ae().E,{size:"sm",children:(0,C.jsx)(se().e,{iconLeading:te().magnifyingGlassSmallIcon,onClick:b})})}):null]})})}function pe(e){const{auditLogEntry:t,env:a,intl:s}=e;return X({auditLogEntry:t,env:a,intl:s,options:{renderPageName:e=>(0,C.jsx)(me,{pageAuditLogEntry:e})}})}function he(e){var t,a;const{auditLogEntry:s,text:n}=e,i=(0,r().tz)(),o=(0,M().aj)({auditLogEntry:s,intl:i}),l=(0,M().Bb)({auditLogEntry:s,intl:i});return(0,C.jsxs)("div",{children:[n,null!==(t=s.actor.meta)&&void 0!==t&&t.ipAddress?(0,C.jsx)("div",{children:(0,C.jsx)(r().sA,{defaultMessage:"IP address: {ip}",values:{ip:null===(a=s.actor.meta)||void 0===a?void 0:a.ipAddress},id:"auditLogSettings.metadata.ipAddress"})}):void 0,(0,C.jsx)("div",{children:(0,M().BN)(s,i)}),o?(0,C.jsx)(r().sA,{id:"auditLogColumnEvent.tooltip.audienceMessage",defaultMessage:"Page audience: {audience}",values:{audience:o}}):void 0,l?(0,C.jsx)(r().sA,{id:"auditLogColumnEvent.tooltip.audienceMessage.forms",defaultMessage:"Form audience: {audience}",values:{audience:l}}):void 0]})}},19676:(e,t,a)=>{a.d(t,{i:()=>o,y:()=>r});var s=()=>a(340498),n=()=>a(100622),i=()=>a(284371);function o(e){const{isInHomeWidget:t,isInDashboardWidget:a,isFeedbackButton:o,isMobile:r,isInDashboardBuildMode:l}=e,d=(a||t)&&!r;return{button:{display:"flex",alignItems:"center",fontSize:14,padding:6,...o?{height:d?24:28,color:n().Tj.text.tertiary,fill:n().Tj.icon.tertiary}:d?{height:24,width:24}:{height:r?32:28,width:r?32:28},...o?{color:n().Tj.text.tertiary,fill:n().Tj.icon.tertiary}:{color:l?n().Tj.blue.text.secondary:n().Tj.text.secondary,fill:l?n().Tj.blue.icon.secondary:n().Tj.icon.secondary},fontWeight:i().Wy.regular,lineHeight:1,borderRadius:6},icon:{width:r?s().Ev.default:s().Ev.sm,height:r?s().Ev.default:s().Ev.sm,fill:l?n().Tj.blue.icon.secondary:n().Tj.icon.secondary}}}function r(){return{display:"flex",alignItems:"center",fontSize:14,height:28,padding:6,color:n().Tj.icon.secondary,fontWeight:i().Wy.regular,lineHeight:1,borderRadius:6}}},20953:(e,t,a)=>{a.d(t,{Z:()=>x});a(898992),a(354520),a(581454);var s=a(296540),n=()=>a(401497),i=()=>a(127833),o=()=>a(30537),r=()=>a(807449),l=()=>a(546926),d=()=>a(890492),c=()=>a(81068),u=()=>a(663639),m=()=>a(736847),g=()=>a(42583),p=()=>a(301608),h=()=>a(69708),f=()=>a(56394),v=()=>a(385226),y=a(474848);function x(e){const t=(0,h().tz)(),a=(0,n().IS)((()=>({popup:{width:125,marginInlineStart:5},pillStyle:{display:"flex",alignItems:"center"}})),[]),{currentFilter:x,hideAllTime:b,hideLast365Days:S}=e,[j,A]=(0,s.useState)(!1),w=p().jf.filter((e=>!b||"all_time"!==e)).filter((e=>!S||"last_365_days"!==e)).map((a=>{const s=()=>{e.onChangeFilter(a),A(!1)};return{key:a,action:()=>{},render:()=>(0,y.jsx)(c().A,{focused:!1,onClick:s,title:t.formatMessage(p().jy[a])})}})),_=(0,y.jsx)(f().A,{on:Boolean(x),wrapStyle:a.pillStyle,icon:(0,y.jsx)(r().I,{icon:g().D,size:"sm",style:{fill:"currentColor"}}),title:t.formatMessage(p().jy[x]),onClick:()=>{A(!0)}}),M=[{key:"filters",items:w,render:e=>(0,y.jsx)(m().A,{...e,title:null,loading:!1})}],C=(0,y.jsx)(d().A,{menuType:l().gu.Popup,header:null,children:(0,y.jsx)(u().A,{type:u().O.Vertical,initialFocus:0,sections:M})});return(0,y.jsx)(v().A,{marginAfter:!1,children:(0,y.jsx)(i().zD,{popupType:o().n.Popup,placementToOrigin:"bottom",alignmentToOrigin:"start",open:j,render:()=>C,onDismiss:()=>A(!1),keepFocus:!0,origin:_,preventScaleTransition:!0,style:a.popup,trapFocus:!0,originGap:8})})}},28119:(e,t,a)=>{a.d(t,{TD:()=>i,YS:()=>o});var s=()=>a(79926);const n={ConfirmHIPAAModal:new(s().O2)("ConfirmHIPAAModal",(async()=>a.e(77761).then(a.bind(a,116217)))),HIPAASuccessModal:new(s().O2)("HIPAASuccessModal",(async()=>a.e(50568).then(a.bind(a,222660))))},i=(0,s()._h)(n.ConfirmHIPAAModal,(e=>e.ConfirmHIPAAModal)),o=(0,s()._h)(n.HIPAASuccessModal,(e=>e.HIPAASuccessModal))},43450:(e,t,a)=>{a.d(t,{R:()=>i});var s=()=>a(484714),n=()=>a(590526);function i(e){const t=(0,s().v3)();return(0,n().K8)((()=>{const a=t.currentUser.id;return!!(e&&e.isDefined()&&a)&&Boolean(e.canAdmin())}),[t.currentUser.id,e])}},46413:(e,t,a)=>{a.d(t,{D:()=>i});var s=()=>a(348564),n=()=>a(118685);class i extends n().f{getInitialState(){return{categorySelections:{page:n().o.All,space:n().o.All,team:n().o.All,account:n().o.All,form:n().o.All,collection:n().o.All},categoryToggleOpen:{page:!0,space:!0,team:!0,account:!0,form:!0,collection:!0},searchQuery:void 0,actionSelections:(0,a(534177).s8)(s().D$,(()=>!0)),isMenuOpen:!1,renderOrder:[{category:"page",orderedActions:s().Dj.page},{category:"space",orderedActions:s().Dj.space},{category:"account",orderedActions:s().Dj.account},{category:"team",orderedActions:s().Dj.team},{category:"form",orderedActions:s().Dj.form},{category:"collection",orderedActions:s().Dj.collection}]}}}},53523:(e,t,a)=>{a.d(t,{Z:()=>m});a(296540);var s=()=>a(590526),n=()=>a(609679),i=()=>a(869190),o=()=>a(798880),r=()=>a(69708),l=()=>a(534177),d=()=>a(625383),c=()=>a(6208),u=a(474848);function m({pageStatus:e,lastEditedTime:t,lastEditedByPointer:a,movedToTrashTime:m,deletedFromTrashTime:g}){const p=(0,c().y)(null==a?void 0:a.id),h=(0,s().K8)((()=>{if("alive"===e)return(0,u.jsx)(r().sA,{id:"adminContentSearchTab.pagesTable.lastEditedTime.tooltip.lastEdited",defaultMessage:"Last edited by {name} on {time}",values:{name:p,time:(0,i().W_)(t,"month_day_time",n().locale)}});if((0,l().O9)(g)){return!(null==a||!a.id)&&(0,o().O5)(a.id)?(0,u.jsx)(r().sA,{id:"adminContentSearchTab.pagesTable.lastEditedTime.tooltip.autoDeletedFromTrash",defaultMessage:"Automatically deleted from Trash on {time}",values:{time:(0,i().W_)(g,"month_day_time",n().locale)}}):(0,u.jsx)(r().sA,{id:"adminContentSearchTab.pagesTable.lastEditedTime.tooltip.deletedFromTrash",defaultMessage:"Deleted from Trash by {name} on {time}",values:{name:p,time:(0,i().W_)(g,"month_day_time",n().locale)}})}return(0,l().O9)(m)?(0,u.jsx)(r().sA,{id:"adminContentSearchTab.pagesTable.lastEditedTime.tooltip.movedToTrash",defaultMessage:"Moved to Trash by {name} on {time}",values:{name:p,time:(0,i().W_)(m,"month_day_time",n().locale)}}):void 0}),[g,a,t,m,e,p]);return(0,u.jsx)(d().d,{dateTs:t,tooltip:h})}},54321:(e,t,a)=>{a.d(t,{T:()=>n,n:()=>i});a(581454);var s=()=>a(803418);let n=function(e){return e.Loading="loading",e.ManagedUser="managed-user",e.OrganizationSpaceScimBot="organization-space-scim-bot",e.OrganizationWorkspace="organization-workspace",e.OrganizationGroup="organization-group",e.OrganizationGroupMember="organization-group-member",e.OrganizationGroupPage="organization-group-page",e.OrganizationGuest="organization-guest",e.OrganizationMember="organization-member",e.OrganizationClaimableWorkspace="organization-claimable-workspace",e.OrganizationEmailDomain="organization-email-domain",e.SingleUserGroup="single-user-group",e.SingleUserWorkspace="single-user-workspace",e.OrganizationLegalHold="organization-legal-hold",e.OrganizationIPRestriction="organization-ip-restriction",e.SingleLegalHoldMemberUser="single-legal-hold-member-user",e.SingleLegalHoldMemberGuest="single-legal-hold-member-guest",e.SingleLegalHoldMemberDeletedUser="single-legal-hold-member-deleted-user",e.SingleLegalHoldPage="single-legal-hold-page",e.SingleWorkspaceTeam="workspace-team",e.SingleWorkspaceGuest="workspace-guest",e.AIAnalyticsUsersRow="ai-analytics-users",e.AIAnalyticsTopPagesRow="ai-analytics-top-pages",e.AIAnalyticsWorkflowsRow="ai-analytics-workflows",e.AnalyticsMemberViewsRow="analytics-member-view",e.AnalyticsPageViewsRow="analytics-page-views",e.SingleLegalHoldExport="single-legal-hold-export",e.OrganizationEKMRequests="organization-ekm-requests",e}({});function i(e){return new Array(e??s().q).fill(0).map(((e,t)=>({id:`loading-${t}`,isClickable:!1,type:n.Loading})))}},55025:(e,t,a)=>{a.d(t,{I:()=>p,W8:()=>c,Zl:()=>d,_E:()=>g,pi:()=>u,rn:()=>r,t3:()=>l});a(898992),a(581454),a(908872);var s=()=>a(59226),n=()=>a(301608),i=()=>a(406944),o=()=>a(526920);function r(e){if(e===n().Ax)return{color:i().O.gray[0],fillColor:(0,o().tm)({color:i().O.gray[0],hideLineFillArea:!1})};const t=n().LP.indexOf(e),a=i().O.colorful,s=a.length;return{color:a[t%s],fillColor:(0,o().tm)({color:a[t%s],hideLineFillArea:!1})}}function l(){return(0,s().X)("ai_analytics_space")}function d(){return(0,s().X)("ai_analytics_space_ga")}function c(){return(0,s().X)("ai_analytics_custom_agents")}function u({intl:e,productFilter:t,isGroupingByProduct:a}){return(a&&t===n().zh?n().B3:[t]).map((t=>({name:e.formatMessage((0,n().YF)(t)),type:"area",data:[],...r(t)})))}const m={yAxisMin:0,yAxisMax:4};function g({dateRange:e}){const{xAxisMin:t,xAxisMax:a}=function({dateRange:e}){const t=(0,n().mW)(e);return 0===t.length?{}:{xAxisMin:new Date(t[0]).getTime(),xAxisMax:new Date(t[t.length-1]).getTime()}}({dateRange:e}),{yAxisMin:s,yAxisMax:i}=m;return{xAxisMin:t,xAxisMax:a,yAxisMin:s,yAxisMax:i}}function p({series:e,dateRange:t,productFilter:a,name:s}){const i=(0,n().mW)(t),o=e.reduce(((e,t)=>(e[t.ds]=t,e)),{});return i.map((e=>{const t=o[e];return t?{x:new Date(t.ds).getTime(),y:t.values[a],name:s,isValueNull:!1}:{x:new Date(e).getTime(),y:0,name:s,isValueNull:!0}}))}},59976:(e,t,a)=>{a.d(t,{b:()=>i});var s=()=>a(79926);const n=new(s().O2)("time-series",(async()=>await Promise.resolve().then(a.bind(a,968526)))),i=(0,s()._h)(n,(e=>e.TimeSeries))},68204:(e,t,a)=>{a.d(t,{H:()=>p,K:()=>h});var s=a(296540),n=()=>a(484714),i=()=>a(792057),o=()=>a(631524),r=()=>a(26697),l=()=>a(863330),d=()=>a(69708),c=()=>a(534177),u=()=>a(908928),m=a(474848);const g=(0,d().YK)({failedCreatingNewScimToken:{id:"scimTokenSettings.error.failedCreatingNewScimToken",defaultMessage:"Failed to create a new SCIM token, please try again later."}});async function p({environment:e,spaceStore:t,userStore:a}){const{botStore:s,transactionPromise:n}=u().gI({environment:e,spaceStore:t,name:"SCIM",userId:a.id,membershipType:"bot_owner",type:"scim"});return await n,s.id}function h(e){const t=(0,d().tz)(),[a,u]=(0,s.useState)(!1),h=(0,n().v3)();const f=a||"Able"!==e.tokenCreationAbility,v=(0,m.jsx)(o().p,{colorPalette:f?"gray":"blue",disabled:f,iconLeading:{icon:l().plusSmallIcon,size:"sm"},onClick:async function(){u(!0);try{const t=await p({...e,environment:h});e.onNewScimToken(t)}catch(a){i().f1(t.formatMessage(g.failedCreatingNewScimToken))}u(!1)},children:(0,m.jsx)(d().sA,{id:"scimTokenSettings.NewSCIMTokenButton.title",defaultMessage:"Add token"})});let y;switch(e.tokenCreationAbility){case"Able":return v;case"Undefined":y=(0,m.jsx)(d().sA,{defaultMessage:"Not able to create a new SCIM token right now. Please try again later.",id:"scimTokenSettings.NewSCIMTokenButton.unableToCreateTokenMessage.undefined"});break;case"SpaceHasExistingToken":y=(0,m.jsx)(d().sA,{defaultMessage:"To create a new SCIM token, please revoke the existing token.",id:"scimTokenSettings.NewSCIMTokenButton.unableToCreateTokenMessage.spaceHasLegacyToken"});break;case"UserHasExistingToken":y=(0,m.jsx)(d().sA,{defaultMessage:"You already have a registered SCIM token. To create a new one, please revoke the token created by you.",id:"scimTokenSettings.NewSCIMTokenButton.unableToCreateTokenMessage.userHasExistingToken"});break;default:(0,c().HB)(e.tokenCreationAbility)}return(0,m.jsx)(r().m,{textWrap:!1,renderTooltip:()=>y,placement:"right",render:e=>(0,m.jsx)("div",{...e,style:{paddingInlineStart:"4px"},children:v})})}},76590:(e,t,a)=>{a.d(t,{$s:()=>g,AW:()=>f,G4:()=>y,Jv:()=>l,Jy:()=>r,PH:()=>p,TJ:()=>d,Tm:()=>m,Wt:()=>h,Y5:()=>c,kJ:()=>v,lP:()=>u,n_:()=>i,wy:()=>o});var s=()=>a(314529),n=()=>a(564884);function i(e,t){(0,s().DO_NOT_USE_trackLegacy)(e,"overview_analytics_filter_change",t)}function o(e,t){(0,s().DO_NOT_USE_trackLegacy)(e,"user_analytics_engagement_timerange_filter_change",t)}function r(e,t){(0,s().DO_NOT_USE_trackLegacy)(e,"user_analytics_table_filter_change",t)}function l(e,t){(0,s().DO_NOT_USE_trackLegacy)(e,"user_analytics_table_sort_change",t)}function d(e,t){(0,s().DO_NOT_USE_trackLegacy)(e,"user_analytics_export_requested",t)}function c(e,t){(0,s().DO_NOT_USE_trackLegacy)(e,"content_analytics_engagement_timerange_filter_change",t)}function u(e,t){(0,s().DO_NOT_USE_trackLegacy)(e,"content_analytics_export_requested",t)}function m(e,t){(0,s().DO_NOT_USE_trackLegacy)(e,"content_analytics_table_filter_change",t)}function g(e,t){(0,s().DO_NOT_USE_trackLegacy)(e,"content_analytics_table_timerange_filter_change",t)}function p(e,t){(0,s().DO_NOT_USE_trackLegacy)(e,"content_analytics_table_sort_change",t)}function h(e,t){(0,s().DO_NOT_USE_trackLegacy)(e,"workspace_analytics_tab_click",t)}function f(e,t){const a=Date.now(),s=t.analytics_tab_session_time_start?a-t.analytics_tab_session_time_start:void 0;(0,n().u)({environment:e,event:{eventName:"workspace_analytics_tab_exit",eventProperties:{tab:t.tab,surface:t.surface,analytics_tab_session_id:t.analytics_tab_session_id,analytics_tab_session_time_duration:s,analytics_tab_session_time_end:a,settings_session_id:t.settings_session_id}}})}function v(e,t){(0,s().DO_NOT_USE_trackLegacy)(e,"search_analytics_table_timerange_filter_change",t)}function y(e,t){(0,s().DO_NOT_USE_trackLegacy)(e,"search_analytics_table_sort_change",t)}},76974:(e,t,a)=>{a.d(t,{x:()=>o});a(16280);var s=()=>a(165358),n=()=>a(547149),i=()=>a(924344);function o(e,t){if(!t)throw s().log({level:"error",from:"spaceActions",type:"setHIPAACompliancyData",error:{message:"Couldn't find a SpaceStore."}}),new Error;const a=e.currentUser.id;if(!a)throw s().log({level:"error",from:"spaceActions",type:"setHIPAACompliancyData",error:{message:"No User"}}),new Error;const o={last_edited_time:Date.now(),last_edited_by_id:a};n().createAndCommit({userAction:"spaceActions.setHIPAACompliancyData",environment:e,canUndo:!0,perform:e=>{(0,i().R)(t,e,{hipaa_compliancy_data:o})}})}},83842:(e,t,a)=>{a.r(t),a.d(t,{AccessLevelSection:()=>le,SidebarCreateTeamModal:()=>me,TeamDescriptionRow:()=>te,TeamIconAndNameRow:()=>ne});a(581454);var s=a(296540),n=()=>a(755531),i=()=>a(265618),o=()=>a(782482),r=()=>a(726637),l=()=>a(484714),d=()=>a(590526),c=()=>a(401497),u=()=>a(107975),m=()=>a(723085),g=()=>a(574359),p=()=>a(741615),h=()=>a(718827),f=()=>a(396896),v=()=>a(807449),y=()=>a(31511),x=()=>a(98126),b=()=>a(302501),S=()=>a(148307),j=()=>a(737693),A=()=>a(995847),w=()=>a(505412),_=()=>a(69708),M=()=>a(100622),C=()=>a(496603),T=()=>a(534177),k=()=>a(284371),I=()=>a(946141),N=()=>a(15144),D=()=>a(453697),P=()=>a(101919),E=()=>a(957606),B=()=>a(456663),R=()=>a(205618),V=()=>a(465960),L=()=>a(664594),z=()=>a(300474),F=()=>a(907258),O=()=>a(483226),U=()=>a(160432),W=()=>a(213525),H=()=>a(475355),q=()=>a(51781),K=()=>a(812941),G=a(474848);function Y(){const e=(0,l().v3)(),{currentSpaceStore:t,spaceViewStore:a}=(0,d().K8)((()=>({currentSpaceStore:(0,n().S)(),spaceViewStore:F().default.state.sidebarSpaceViewStore})),[]),i=(0,z().r)(),o=(0,L().T)(),r=(0,p().lh)({spaceId:i}),u=(0,d().O$)(B().A),g=(0,E().Gt)(r),h=function(){const e=(0,d().K8)((()=>O().El()&&!B().A.state.isDefault),[]),t=B().o.Team,a=B().o.Members;return e?[t,a]:[t]}(),{screen:f,pageNumber:v,teamId:y}=u,x=""===u.name||u.name.length>w().Q||u.description.length>w().z,b=(0,c().IS)((()=>({box:{justifyContent:"space-between",alignItems:"center",display:"flex",width:"100%",paddingTop:22},button:{marginInlineStart:8},learnMoreLink:{overflow:"hidden"}})),[]),S=(0,s.useCallback)(((a,s)=>{t&&function({pageOrder:e,pageNumber:t,teamId:a,currentSpaceStore:s,environment:n,from:i}){const o=t+1;if(o<=e.length)B().A.update((t=>({...t,loading:!1,screen:e[o-1],pageNumber:o})));else if(a){const e=m().h.createChildStore(s,{table:"team",id:a,spaceId:s.id});V().L0({environment:n,teamStore:e,shouldScroll:!0}),V().lJ({environment:n,from:i,teamStore:e})}}({pageOrder:h,pageNumber:v,teamId:s||y,currentSpaceStore:t,environment:e,from:a})}),[t,e,v,h,y]),j=C().sg((async()=>{if(!t||!a||!o)return;let s=y;switch(f){case B().o.Team:s=await async function({spaceStore:e,userId:t,environment:a,shouldShowZeroTeamsExperience:s,sidebarCreateTeamModalStoreState:n}){var i;const{name:o,description:r,icon:l,flowId:d,accessLevel:c,isDefault:u}=n,m=await(0,q().getActiveTeamsMetadataForUserInSpace)({userId:t,spaceStore:e,environment:a});if(!(await(0,W().d$)({teamName:o,teamMetadata:m})))return;let g;B().A.update((e=>({...e,loading:!0}))),g=s?await H().oH({environment:a,name:o,description:r,icon:l,flowId:d,trackCreateTeamComplete:!0}):await H().gj({environment:a,name:o,description:r,icon:l,accessLevel:c,isDefault:u,flowId:d,createTeamHome:!0});if(!g)return;const p=null===(i=g)||void 0===i?void 0:i.id;return B().A.update((e=>({...e,teamId:p}))),p}({spaceStore:t,userId:o,environment:e,shouldShowZeroTeamsExperience:g,sidebarCreateTeamModalStoreState:u});break;case B().o.Members:break;default:(0,T().HB)(f)}s?S("success",s):B().A.update((e=>({...e,loading:!1})))}),1e3,{leading:!0,trailing:!1}),A=(0,s.useCallback)(j,[j]);return(0,G.jsxs)("div",{style:b.box,children:[(0,G.jsx)(K().A,{containerStyle:b.learnMoreLink,helpCenterLocation:"bestPractices",analyticsFrom:"teams_learn_more_sidebar_create_team_modal"}),(0,G.jsx)("div",{style:{display:"inline-flex"},children:(0,G.jsx)(U().A,{colorPalette:"blue",size:"lg",onClick:A,disabled:x,style:b.button,children:(0,G.jsx)(_().sA,{id:"sidebarCreateTeamModal.footer.createTeam",defaultMessage:"Create teamspace"})})})]})}var $=()=>a(144707),Q=()=>a(284331),J=()=>a(898808);const Z={userSelect:"none",WebkitUserSelect:"none",position:"relative",padding:"22px 26px"},X={createTeamContainer:{...Z,width:480},addMembersContainer:{...Z,width:500},full:{width:"100%"}},ee=(0,_().YK)({teamNamePlaceholder:{id:"sidebarCreateTeamModal.teamScreen.namePlaceholder",defaultMessage:"Acme Labs"},teamDescriptionPlaceholder:{id:"sidebarCreateTeamModal.teamScreen.descriptionPlaceholder",defaultMessage:"Details about your teamspace"}});function te({hasMarginTop:e=!0}){const t=(0,_().tz)(),{description:a,isDescriptionTooLong:s}=(0,d().K8)((()=>{const e=B().A.state.description;return{description:e,isDescriptionTooLong:e.length>w().z}}),[]),n=t.formatMessage(i().q.team_description_too_long,{maxTeamDescriptionLength:w().z});return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(P().A,{hasMarginTop:e,children:(0,G.jsx)(_().sA,{id:"sidebarCreateTeamModal.teamScreen.teamDescriptionLabel",defaultMessage:"Description"})}),(0,G.jsxs)(f().VP,{gap:4,grow:1,children:[(0,G.jsx)(y().A,{value:a,placeholder:t.formatMessage(ee.teamDescriptionPlaceholder),textarea:!0,onChange:e=>{B().A.update((t=>({...t,description:e.target.value})))},errorOutline:s}),s?(0,G.jsx)(N().R,{id:"team-description-too-long",error:n}):void 0]})]})}function ae(e){return(0,G.jsx)("div",{id:e.titleAriaId,style:{fontSize:18,fontWeight:k().Wy.semibold},children:(()=>{switch(e.screen){case B().o.Team:return(0,G.jsx)(_().sA,{id:"sidebarCreateTeamModal.teamTitle.label",defaultMessage:"Create a new teamspace"});case B().o.Members:return(0,G.jsx)(_().sA,{id:"sidebarCreateTeamModal.membersTitle.label",defaultMessage:"Add people"});default:(0,T().HB)(e.screen)}})()})}function se(e){const t=(0,l().v3)(),{screen:a,teamId:n}=(0,d().K8)((()=>{const{screen:e,teamId:t}=B().A.state;return{screen:e,teamId:t}}),[]),i=(0,s.useCallback)(((e,a)=>{V().lJ({environment:t,from:a,teamStore:e})}),[t]);switch(a){case B().o.Team:return(0,G.jsx)(oe,{titleAriaId:e.titleAriaId,descriptionAriaId:e.descriptionAriaId,parentSpaceStore:e.parentSpaceStore});case B().o.Members:return n?(0,G.jsx)(de,{teamId:n,onCompleted:e=>{i(e,"success")},onCanceled:e=>{i(e,"dismiss_button")}}):null;default:(0,T().HB)(a)}}function ne({parentSpaceStore:e,hasMarginTop:t=!0,inputStyles:a}){const s=(0,_().tz)(),o=(0,d().K8)((()=>e??(0,n().S)()),[e]),{icon:r,name:l,nameTooLong:u}=(0,d().K8)((()=>{const{icon:e,name:t}=B().A.state;return{icon:e,name:t,nameTooLong:t.length>w().Q}}),[]),m=s.formatMessage(i().q.team_name_too_long,{maxTeamNameLength:w().Q}),g=(0,c().IS)((()=>({container:{display:"inline-flex",width:"100%",verticalAlign:"middle"},icon:{marginInlineEnd:8,marginTop:1}})),[]);if(!o)return null;const p=r?{icon:r,pointer:{table:"space",id:o.id}}:void 0;return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(P().A,{hasMarginTop:t,children:(0,G.jsx)(_().sA,{id:"sidebarCreateTeamModal.teamScreen.teamNameLabel",defaultMessage:"Icon & name"})}),(0,G.jsxs)("div",{style:g.container,children:[(0,G.jsx)(J().x,{icon:p,size:26,style:g.icon,onChange:e=>{B().A.update((t=>({...t,icon:e})))},iconLoggingData:{recordTable:"team",source:"team_creation"},parentSpaceStore:e}),(0,G.jsxs)(f().VP,{gap:4,grow:1,children:[(0,G.jsx)(y().A,{style:a,value:l,placeholder:s.formatMessage(ee.teamNamePlaceholder),onChange:e=>{B().A.update((t=>({...t,name:e.target.value})))},preventSafariAutofill:!0}),u?(0,G.jsx)(N().R,{id:"team-name-too-long",error:m}):void 0]})]})]})}function ie(e){const t=(0,c().IS)((()=>({description:{marginTop:3,marginBottom:26}})),[]);return(0,G.jsx)(b().A,{id:e.descriptionAriaId,isMultiline:!0,isSmall:!0,isSecondaryColor:!0,style:t.description,children:(()=>{switch(e.screen){case B().o.Team:return(0,G.jsx)(_().sA,{id:"sidebarCreateTeamModal.teamDescription.label",defaultMessage:"Teamspaces are where your team organizes pages, permissions, and members"});case B().o.Members:return null;default:(0,T().HB)(e.screen)}})()})}function oe(e){const t=(0,l().v3)(),{open:a,from:n,flowId:i}=(0,d().K8)((()=>{const e=B().A.state;return{open:e.open,from:e.open?e.from:void 0,flowId:e.flowId}}),[]);return(0,s.useEffect)((()=>{a&&n&&I().H8(t,{from:n,flowId:i})}),[]),(0,G.jsxs)("div",{style:X.createTeamContainer,children:[(0,G.jsx)(ae,{titleAriaId:e.titleAriaId,screen:B().o.Team}),(0,G.jsx)(ie,{descriptionAriaId:e.descriptionAriaId,screen:B().o.Team}),(0,G.jsxs)("div",{style:X.full,children:[(0,G.jsx)(ne,{parentSpaceStore:e.parentSpaceStore}),(0,G.jsx)(te,{}),(0,G.jsx)(le,{parentSpaceStore:e.parentSpaceStore})]}),(0,G.jsx)(Y,{})]})}function re(){const e=(0,d().K8)((()=>B().A.state.loading),[]),t=(0,c().IS)((()=>({spinner:{width:"100%",height:"100%",backgroundColor:M().Tj.modalUnderlayBackground,position:"absolute",top:0,insetInlineStart:0}})),[]);return(0,G.jsx)(G.Fragment,{children:e?(0,G.jsx)("div",{style:t.spinner,children:(0,G.jsx)(x().A,{style:{position:"absolute",top:"50%",insetInlineStart:"50%"}})}):void 0})}function le({parentSpaceStore:e,hasMarginTop:t=!0}){const a=(0,c().IS)((()=>({openAccessMessage:{fontSize:13,color:M().Tj.text.secondary,marginTop:20,lineHeight:1.4,display:"flex"},iconContainer:{marginInlineEnd:8}})),[]),s=(0,p().lh)({spaceId:null==e?void 0:e.id}),i=(0,E().Gt)(s),o=(0,l().v3)(),r=(0,d().K8)((()=>{const t=e??(0,n().S)();return t?(0,g().G)(o,t):"this workspace"}),[o,e]),{accessLevel:u,isDefault:m}=(0,d().K8)((()=>{const{accessLevel:e,isDefault:t}=B().A.state;return{accessLevel:e,isDefault:t}}),[]);return i?(0,G.jsxs)("div",{style:a.openAccessMessage,children:[(0,G.jsx)("div",{style:a.iconContainer,children:(0,G.jsx)(v().I,{icon:j().V,size:"lg",colorVariant:"secondary"})}),(0,G.jsx)(_().sA,{id:"sidebarCreateTeamModal.teamScreen.openAccessLabel",defaultMessage:"Everyone at {spaceName} and new members will have access to this teamspace",values:{spaceName:r}})]}):(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(P().A,{hasMarginTop:t,children:(0,G.jsx)(_().sA,{id:"sidebarCreateTeamModal.teamScreen.permissionsLabel",defaultMessage:"Permissions"})}),(0,G.jsx)($().u,{currentAccessLevel:u,currentIsDefault:m,onChange:(e,t)=>{t?B().A.update((e=>({...e,accessLevel:"open",isDefault:t}))):B().A.update((a=>({...a,accessLevel:e,isDefault:t})))},parentSpaceStore:e})]})}function de(e){const t=(0,l().v3)(),a=(0,d().uB)(void 0,R().A);(0,d().K8)((()=>{const{defaultInviteTargets:e,flowId:t}=B().A.state;a.setState({...a.state,flowId:t}),e&&a.setState({...a.state,inviteTargets:e})}),[a]);const s=(0,d().K8)((()=>e.parentSpaceStore??(0,n().S)()),[e.parentSpaceStore]);if(!s)return null;const i=m().h.createChildStore(s,{table:"team",id:e.teamId,spaceId:s.id});return(0,G.jsx)("div",{style:X.full,children:(0,G.jsx)("div",{style:X.addMembersContainer,children:(0,G.jsx)(Q().A,{teamStore:i,permissionsInviteStore:a,isNewlyCreatedTeam:!0,onSubmitSuccessful:()=>{e.onCompleted(i),V().L0({environment:t,teamStore:i,shouldScroll:!0})},onDismiss:()=>{e.onCanceled(i)}})})})}const ce=[S().A.images.avatars.avatar1Png,S().A.images.avatars.avatar2Png,S().A.images.avatars.avatar3Png];function ue({handleModalClose:e}){const t=(0,c().IS)((()=>({container:{borderStartStartRadius:5,borderStartEndRadius:5,background:M().Tj.inputBackground,boxShadow:M().Tj.inputBoxShadow},header:{display:"flex",padding:14,fontWeight:k().Wy.medium},avatarGroup:{display:"flex",width:"100",marginInlineStart:4,alignSelf:"center"},avatar:{marginInlineStart:-4},message:{paddingInlineStart:14,paddingInlineEnd:14},closeButton:{zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:M().Tj.buttonHoveredBackground,width:20,height:20,padding:4},closeButtonHover:{background:M().Tj.buttonPressedBackground}})),[]);return(0,G.jsx)("div",{style:t.container,children:(0,G.jsxs)("div",{style:t.header,children:[(0,G.jsx)("div",{style:t.avatarGroup,children:ce.map(((e,a)=>(0,G.jsx)(D().A,{avatarShouldShowShadow:!0,style:t.avatar,size:28,avatar:{avatarUrl:e}},a)))}),(0,G.jsx)(b().A,{style:t.message,isMultiline:!0,isSmall:!0,children:(0,G.jsx)(_().sA,{id:"sidebarCreateTeamModal.teamScreen.firstTeamHeader",defaultMessage:"Create your first teamspace to start using Notion with your teammates"})}),(0,G.jsx)(h().Ay,{onClick:e,style:t.closeButton,hoveredStyle:t.closeButtonHover,children:(0,G.jsx)(v().I,{icon:A().xMarkSmallIcon,size:"sm",colorVariant:"secondary"})})]})})}function me(e){const t=(0,l().v3)(),a=(0,s.useId)(),i=(0,s.useId)(),m=(0,c().IS)((()=>({modal:{maxWidth:500,borderRadius:5,overflow:"visible"},closeButton:{position:"absolute",top:14,insetInlineEnd:14,zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:M().Tj.buttonHoveredBackground,width:20,height:20},closeButtonHover:{background:M().Tj.buttonPressedBackground},wrapper:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",userSelect:"none",WebkitUserSelect:"none"}})),[]),g=(0,s.useCallback)((e=>{V().lJ({environment:t,from:e})}),[t]),{open:f,loading:y,screen:x}=(0,d().K8)((()=>{const{open:e,loading:t,screen:a}=B().A.state;return{open:e,loading:t,screen:a}}),[]),b=(0,d().K8)((()=>(null==e?void 0:e.parentSpaceStore)??(0,n().S)()),[null==e?void 0:e.parentSpaceStore]),S=(0,p().lh)({spaceId:null==b?void 0:b.id}),j=(0,E().Gt)(S),w=(0,s.useRef)(j);return(0,s.useEffect)((()=>{y||(w.current=j&&x===B().o.Team)}),[y,x,j]),f?(0,G.jsx)(u().a,{ariaLabelledBy:a,ariaDescribedBy:i,open:f,innerStyle:m.modal,onDismiss:()=>{g("modal")},render:()=>(0,G.jsxs)("div",{style:{height:"100%"},children:[r().A.isMobile?void 0:w.current?(0,G.jsx)(ue,{handleModalClose:()=>{g("close_button")}}):(0,G.jsx)(h().Ay,{onClick:()=>{g("close_button")},style:m.closeButton,hoveredStyle:m.closeButtonHover,children:(0,G.jsx)(v().I,{icon:A().xMarkSmallIcon,size:"xs",colorVariant:"secondary"})}),(0,G.jsx)("div",{style:m.wrapper,children:(0,G.jsx)(o().N,{debugName:"SidebarCreateTeamModal",capture:!0,onBackspace:C().D_,onLeft:C().D_,onRight:C().D_,onSelectAll:C().D_,onRedo:C().D_,onUndo:C().D_,onCut:C().D_,onCopy:C().D_,onPaste:C().D_,onKeypress:C().D_,onDelete:C().D_,onTab:C().D_,children:(0,G.jsx)(se,{titleAriaId:a,descriptionAriaId:i,parentSpaceStore:b})})}),(0,G.jsx)(re,{})]})}):null}},84593:(e,t,a)=>{a.d(t,{G0:()=>C,V$:()=>k,VX:()=>T});a(898992),a(354520),a(672577),a(581454),a(737550);var s=a(296540),n=()=>a(590526),i=()=>a(401497),o=()=>a(498521),r=()=>a(546926),l=()=>a(631524),d=()=>a(160432),c=()=>a(493552),u=()=>a(302501),m=()=>a(890492),g=()=>a(81068),p=()=>a(663639),h=()=>a(736847),f=()=>a(784892),v=()=>a(69708),y=()=>a(100622),x=()=>a(496603),b=()=>a(534177),S=()=>a(284371),j=()=>a(567865),A=()=>a(881690),w=()=>a(297780),_=()=>a(892205),M=a(474848);function C(e){const{pillTitle:t,selectedItem:a,items:s,shouldHidePrefix:n,selectionRequired:i}=e,o=s.find((e=>(0,x().n4)(e.value,a)));return(0,M.jsx)(j().zr,{...e,renderMenu:e=>(0,M.jsx)(N,{...e,pillTitle:t,selectionRequired:i}),pillTitle:(0,M.jsx)("div",{style:{maxWidth:300,overflow:"hidden",textOverflow:"ellipsis"},children:n?o?o.shortTitle:t:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("span",{style:Boolean(o)?{fontWeight:S().Wy.medium}:void 0,children:t}),Boolean(o)?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("span",{children:": "}),(0,M.jsx)("span",{children:null==o?void 0:o.shortTitle})]}):void 0]})})})}function T(e){const{pillTitle:t}=e,[a,n]=(0,s.useState)(e.selectedItems);return(0,M.jsx)(I,{...e,tempSelectedItems:a,setTempSelectedItems:n,renderMenu:e=>(0,M.jsx)(N,{...e,pillTitle:t})})}function k(e){const{pillTitle:t,pageSize:a,searchPlaceholder:n,items:i}=e,[o,r]=(0,s.useState)(e.selectedItems),[l,d]=(0,s.useState)("");return(0,M.jsx)(I,{...e,tempSelectedItems:o,setTempSelectedItems:r,onToggleSelected:()=>d(""),renderMenu:e=>(0,M.jsx)(D,{...e,items:i,pageSize:a,pillTitle:t,searchPlaceholder:n,tempSelectedItems:o,setTempSelectedItems:r,query:l,setQuery:d})})}function I(e){const{pillTitle:t,selectedItems:a,items:s,renderMenu:n,tempSelectedItems:i,setTempSelectedItems:o}=e;let r;if(1===a.length){const e=s.find((e=>(0,x().n4)(e.value,a[0])));r=(null==e?void 0:e.shortTitle)||(null==e?void 0:e.title)}else a.length>1&&(r=(0,M.jsx)(v().sA,{id:"settingsConsoleFilterPill.numSelected",defaultMessage:"{count} selected",values:{count:a.length}}));return(0,M.jsx)(j().m1,{...e,tempSelectedItems:i,setTempSelectedItems:o,renderMenu:n,pillTitle:(0,M.jsxs)("div",{children:[(0,M.jsx)("span",{style:Boolean(r)?{fontWeight:S().Wy.medium}:void 0,children:t}),Boolean(r)?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("span",{children:": "}),(0,M.jsx)("span",{children:r})]}):void 0]})})}function N({items:e,toggleSelectedItem:t,renderItemOptionIcon:a,menuListStore:s,clearSelection:n,pillTitle:i,selectAll:u,shouldUseCheck:f,selectionRequired:y,onSubmit:x,handleScroll:b,renderSearchInput:S}){const j=P(),A={key:"menuOptions",items:e.length?e.map((e=>({key:e.key,action:()=>t(e.value),render:t=>(0,M.jsx)(g().A,{...t,icon:f?void 0:a(e.value),title:e.title,caption:e.caption,shouldWrapCaption:e.wrapCaption,dontShrinkTitle:e.dontShrinkTitle,hoveredStyle:j.hoveredItem,right:f?a(e.value):(0,M.jsx)(c().D,{colorVariant:"tertiary",children:e.count})})}))):[_().v8],render:e=>(0,M.jsx)(h().A,{...e,title:null,loading:!1})};return(0,M.jsxs)("div",{style:j.container,children:[(0,M.jsxs)(h().A,{topBorder:!1,style:j.header,children:[(0,M.jsx)(c().D,{styleKey:"captionMedium",colorVariant:"tertiary",children:i}),u?(0,M.jsx)("div",{style:j.buttonContainer,children:(0,M.jsx)(l().p,{onClick:u,colorPalette:"blue",size:"xs",children:(0,M.jsx)(v().sA,{id:"settingsConsoleFilterPill.selectAllButton",defaultMessage:"Select all"})})}):void 0]}),S?S():void 0,(0,M.jsxs)(m().A,{menuType:r().gu.Popup,header:null,maxHeight:250,width:320,children:[(0,M.jsx)(p().A,{type:p().O.Vertical,store:s,initialFocus:void 0,sections:[A]}),b?(0,M.jsx)(o().A,{onChange:b}):void 0]}),(0,M.jsxs)(h().A,{topBorder:!0,style:j.footer,children:[y?(0,M.jsx)("div",{}):(0,M.jsx)(l().p,{onClick:n,style:j.clearButton,children:(0,M.jsx)(v().sA,{id:"settingsConsoleFilterPill.clearButton",defaultMessage:"Clear"})}),(0,M.jsx)(d().A,{colorPalette:"blue",onClick:x,children:(0,M.jsx)(v().sA,{id:"core.baseFilterPill.doneButton",defaultMessage:"Apply"})})]})]})}function D(e){const{items:t,pageSize:a,searchPlaceholder:i,tempSelectedItems:o,setTempSelectedItems:r,query:l,setQuery:d}=e,c=P(),m=(0,s.useMemo)((()=>l?t.filter((e=>e.searchTerms.some((e=>e.includes(l.toLowerCase()))))):t),[l,t]),g=(0,s.useCallback)((e=>{d(e.target.value)}),[d]),[p,h]=(0,s.useState)(a),v=(0,s.useMemo)((()=>a?m.slice(0,p):m),[m,p,a]);const y=(0,n().K8)((()=>o.map((e=>{const a=t.find((t=>(0,x().n4)(t.value,e)));if(a)return(0,M.jsx)(A().A,{isSingle:!0,format:f().NY.Inline,style:c.tokenContainer,showRemoveButton:!0,onClickRemove:()=>{const e=o.filter((e=>!(0,x().n4)(e,a.value)));r(e)},value:(0,M.jsxs)("div",{style:c.tokenContents,children:[a.tokenIcon,(0,M.jsx)(u().A,{children:a.shortTitle})]}),backgroundColor:a.tokenColor},a.key)})).filter(b().O9)),[o,r,c,t]);return(0,M.jsx)(N,{...e,toggleSelectedItem:t=>{e.toggleSelectedItem(t),d("")},items:v,handleScroll:function(e){a&&p&&e<5&&p<m.length&&h(p+a)},renderSearchInput:()=>(0,M.jsx)(w().A,{focus:!0,value:l,style:c.search,placeholder:i??"",onChange:g,onRemoveLastToken:()=>{const e=o.slice(0,-1);r(e)},tokens:y})})}function P(){return(0,i().IS)((()=>({container:{padding:"8px 0 6px"},header:{paddingTop:0,paddingInlineEnd:8,paddingBottom:6,paddingInlineStart:12,justifyContent:"space-between",display:"flex",alignItems:"center",flexDirection:"row"},icon:{width:12,marginInlineEnd:6,fill:"currentColor"},buttonContainer:{display:"flex",alignItems:"center"},check:{width:16,height:16,color:y().Tj.text.tertiary},footer:{paddingTop:8,paddingInlineEnd:8,paddingBottom:2,paddingInlineStart:8,justifyContent:"space-between",display:"flex",flexDirection:"row"},clearButton:{fontWeight:S().Wy.medium},search:{margin:"4px auto",width:"95%",maxHeight:200,overflowY:"auto"},tokenContents:{display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:4},tokenContainer:{marginTop:0,marginInlineEnd:6,marginBottom:6,marginInlineStart:0,height:20},hoveredItem:{background:y().Tj.buttonHoveredBackground}})),[])}},85582:(e,t,a)=>{a.d(t,{$E:()=>f,MC:()=>g,Rv:()=>h,dU:()=>p});a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698);var s=a(296540),n=()=>a(590526),i=()=>a(624090),o=()=>a(515358),r=()=>a(920495),l=()=>a(287882),d=()=>a(69708),c=()=>a(534177),u=()=>a(860814),m=a(474848);function g({spaceStore:e,selectedPageStatus:t,setSelectedPageStatus:a,onMenuClose:o}){const l=(0,d().tz)(),c=new Set(["alive","in_trash","deleted_from_trash"]),{currentDeleteFromTrashDelayInSeconds:g,currentPurgeDelayInSeconds:v}=(0,n().K8)((()=>({currentDeleteFromTrashDelayInSeconds:(0,i().XX)(e.getModel())/1e3,currentPurgeDelayInSeconds:(0,i().NA)(e.getModel())/1e3})),[e]),y=(0,s.useMemo)((()=>h({currentDeleteFromTrashDelayInSeconds:g,currentPurgeDelayInSeconds:v,intl:l})),[g,v,l]);return(0,m.jsx)(u().A,{pillIcon:r().pageIcon,allOptions:c,selectedOptions:t,setSelectedOption:a,setPillTitleStringToActiveSelection:!0,onMenuClose:o,getFormattedStringTitle:p,getFormattedStringCaption:y,getPillTitle:f})}function p(e){switch(e){case"alive":return(0,m.jsx)(d().sA,{...o().o.alive});case"in_trash":return(0,m.jsx)(d().sA,{...o().o.trash});case"deleted_from_trash":return(0,m.jsx)(d().sA,{...o().o.retained});default:(0,c().HB)(e)}}function h(e){return function(t){switch(t){case"alive":return null;case"in_trash":return(0,m.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.caption.trash",defaultMessage:"Trashed pages are automatically deleted after {duration}",values:{duration:(0,l().rN)(e.currentDeleteFromTrashDelayInSeconds,e.intl)}});case"deleted_from_trash":return(0,m.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.caption.internal",defaultMessage:"Pages deleted from Trash are retained for {duration}",values:{duration:(0,l().rN)(e.currentPurgeDelayInSeconds,e.intl)}});default:(0,c().HB)(t)}}}function f(e){if(0===e.length)return(0,m.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.default",defaultMessage:"Page status"});const t=e.includes("alive"),a=e.includes("in_trash"),s=e.includes("deleted_from_trash");return t?a&&s?(0,m.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.allStatusSelected",defaultMessage:"All pages"}):a||s?(0,m.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.inactiveStatusWithActive",defaultMessage:"Include {trashSelected, select, true {Trash} other {retained pages}}",values:{trashSelected:a}}):(0,m.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.activeOnly",defaultMessage:"Active pages"}):a&&s?(0,m.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.inactiveOnly",defaultMessage:"Inactive pages"}):(0,m.jsx)(d().sA,{id:"adminContentSearchTab.pagesTable.filters.pageStatus.pillTitle.singleInactiveStatus",defaultMessage:"{trashSelected, select, true {Trash} other {Retained pages}} only",values:{trashSelected:a}})}},85592:(e,t,a)=>{a.d(t,{p:()=>n});var s=()=>a(388821);function n(e){const{recordMapWithRoleJson:t}=e,a=s().RecordMapWithRole.create(t),n=s().RecordMapWithRole.create();for(const{pointer:s,model:i}of a)i&&n.setModelAndRole(s,i,"editor");return n}},86168:(e,t,a)=>{a.r(t),a.d(t,{heartIcon:()=>n,iconDefinition:()=>s});a(296540);const s={viewBox:"0 0 20 20",fittedViewBox:"2.39 2.87 15.21 14.76",svg:(0,a(474848).jsx)("path",{d:"M10.016 17.634a.6.6 0 0 1-.142-.017.5.5 0 0 1-.177-.054C9.399 17.41 2.4 13.721 2.4 7.73c0-2.27 1.251-4.16 3.114-4.704 1.587-.462 3.246.161 4.486 1.64 1.24-1.478 2.9-2.101 4.485-1.64C16.348 3.569 17.6 5.46 17.6 7.73c0 5.992-6.999 9.681-7.297 9.834a.6.6 0 0 1-.287.07m-3.45-13.51q-.353 0-.702.101C4.54 4.611 3.65 6.019 3.65 7.729c0 4.613 5.104 7.851 6.35 8.573 1.246-.722 6.35-3.96 6.35-8.573 0-1.71-.89-3.118-2.214-3.504-1.287-.375-2.637.31-3.61 1.833-.229.36-.823.36-1.053 0-.796-1.248-1.846-1.934-2.908-1.934"})},n=(0,a(340498).wt)("heart",s,"default")},109367:(e,t,a)=>{a.d(t,{o:()=>d});a(581454);var s=a(296540),n=()=>a(484714),i=()=>a(590526),o=()=>a(295633),r=()=>a(179034),l=()=>a(335260);function d({blockIds:e}){const t=(0,n().v3)(),{organizationOwnerRecordCache:a}=(0,s.useContext)(l().N);return(0,i().K8)((()=>e.map((e=>new(o().B)(t,{table:r().ev,id:e},{inMemoryRecordCache:a})))),[t,e,a])}},112772:(e,t,a)=>{a.d(t,{o:()=>m});a(296540);var s=()=>a(590526),n=()=>a(401497),i=()=>a(807449),o=()=>a(176412),r=()=>a(69708),l=()=>a(100622),d=()=>a(898808),c=()=>a(566468),u=a(474848);function m({teamStore:e,iconSize:t=24,useThinTitle:a,showMemberCount:m,memberCountOverride:g}){const p=(0,n().IS)((()=>({hiddenTeamName:{color:l().Tj.text.tertiary}})),[]),[h,f]=(0,s().K8)((()=>[null==e?void 0:e.getName(),null==e?void 0:e.getRawMembership().length]),[e]);return h?(0,u.jsx)(c().s7,{useThinTitle:a,icon:e?(0,u.jsx)(d().x,{disabled:!0,store:e,size:t}):void 0,title:h,byline:m&&void 0!==f?(0,u.jsx)(r().sA,{id:"baseTable.teamCell.memberCount",defaultMessage:"{numMembers, plural, one {# member} other {# members}}",values:{numMembers:g??f}}):null}):(0,u.jsx)(c().s7,{useThinTitle:a,icon:(0,u.jsx)(i().I,{icon:o().L,size:t-4,colorVariant:"tertiary"}),title:(0,u.jsx)("span",{style:p.hiddenTeamName,children:(0,u.jsx)(r().sA,{id:"baseTable.teamCell.hiddenTeam",defaultMessage:"Hidden"})})})}},118685:(e,t,a)=>{a.d(t,{f:()=>i,o:()=>n});a(898992),a(354520),a(672577),a(803949);var s=()=>a(534177);let n=function(e){return e.All="All",e.Partial="Partial",e.None="None",e}({});class i extends(()=>a(757695))().Store{getAllActionNames(){return(0,s().uv)(this.state.actionSelections)}getSelectedActionNames(){return this.getAllActionNames().filter((e=>this.state.actionSelections[e]))}hasActionNameSelected(){const e=this.getAllActionNames(),t=this.getSelectedActionNames();return t.length>0&&t.length!==e.length}updateSearchQuery(e){this.setState({...this.state,searchQuery:e})}toggleCategorySelection(e){const t=e.category;this.setState({...this.state,categoryToggleOpen:{...this.state.categoryToggleOpen,[t]:!this.state.categoryToggleOpen[t]}})}selectCategorySelection(e){const t=e.category,a=this.state.categorySelections[t],s=a===n.None||a===n.Partial?n.All:n.None,i=s===n.All,o={...this.state.actionSelections},r=this.state.renderOrder.find((e=>e.category===t));r&&(r.orderedActions.forEach((e=>{o[e]=i})),this.setState({...this.state,actionSelections:o,categorySelections:{...this.state.categorySelections,[r.category]:s}}))}selectActionName(e,t){const a=this.state.actionSelections[e],s={...this.state.actionSelections,[e]:!a},i=t.orderedActions.filter((e=>s[e])).length,o=0===i?n.None:i===t.orderedActions.length?n.All:n.Partial;this.setState({...this.state,actionSelections:s,categorySelections:{...this.state.categorySelections,[t.category]:o}})}clearAllSelections(){const e=this.getBulkUpdateNextActionSelectionState((0,s().uv)(this.state.actionSelections),!1),t=this.getBulkUpdateNextCategorySelectionState((0,s().uv)(this.state.categorySelections),n.None);this.setState({...this.state,actionSelections:e,categorySelections:t})}getBulkUpdateNextCategorySelectionState(e,t){const a={...this.state.categorySelections};return e.forEach((e=>{a[e]=t})),a}getBulkUpdateNextActionSelectionState(e,t){const a={...this.state.actionSelections};return e.forEach((e=>{a[e]=t})),a}}},118849:(e,t,a)=>{a.d(t,{u:()=>f});a(296540);var s=()=>a(726637),n=()=>a(484714),i=()=>a(590526),o=()=>a(401497),r=()=>a(26697),l=()=>a(979340),d=()=>a(69708),c=()=>a(100622),u=()=>a(534177),m=()=>a(284371),g=()=>a(824160),p=()=>a(991249),h=a(474848);function f({subscriptionTier:e,mobileStyle:t,desktopStyle:a,analyticsName:f,onClick:v,disableTooltip:y,tooltipContent:x,spaceStore:b}){const S=(0,o().eP)(),j=(0,n().v3)(),{device:A}=j,w=(0,i().K8)((()=>null==b?void 0:b.canAdmin()),[b]),_=(0,i().K8)((()=>function(e,t){switch(e){case"plus":case"business":case"enterprise":return{color:c().Tj.blue.text.accentPrimary,background:"light"===t?c().oZ.diffBackground:"rgba(35, 131, 226, 0.2)",fontWeight:m().Wy.medium};default:return{}}}(e,S)),[e,S]);if(A.isMobileNative)return null;let M;return"personal"===e?M=(0,h.jsx)(d().sA,{defaultMessage:"Personal Pro",id:"upgradeButton.personal.text"}):(0,l().$P)(e)?M=(0,h.jsx)(d().sA,{defaultMessage:"Plus ↗",id:"upgradeButton.plus.textWithArrow"}):(0,l().tL)(e)?M=(0,h.jsx)(d().sA,{defaultMessage:"Business ↗",id:"upgradeButton.business.textWithArrow"}):(0,l().OX)(e)?M=(0,h.jsx)(d().sA,{defaultMessage:"Enterprise ↗",id:"upgradeButton.enterprise.textWithArrow"}):(0,u().HB)(e),s().A.isMobile||!w?(0,h.jsx)(g().A,{mobileStyle:t,children:M}):(0,h.jsx)(r().m,{delayThreshold:120,disableTooltip:y,placement:"bottom",renderTooltip:()=>(0,h.jsx)("div",{style:{maxWidth:500},children:x?(0,h.jsx)(d().sA,{defaultMessage:"{tooltipText}",id:"upgradeButton.upgrade.custom.tooltip",values:{tooltipText:x}}):(0,h.jsx)(d().sA,{defaultMessage:"Upgrade to use this feature.",id:"upgradeButton.upgrade.tooltip"})}),originGap:6,render:t=>(0,h.jsx)(g().A,{desktopStyle:a,innerStyle:_,onClick:t=>function(e,t,a,s,n,i){p().K(s,{from:t,upsell:{type:"product",product:a,limit:{type:"none"},trialability:"none"},spaceStore:n}),i&&i(e)}(t,f,e,j,b,v),...t,children:M})})}},126061:(e,t,a)=>{a.d(t,{r:()=>w});a(296540);var s=()=>a(692031),n=()=>a(212497),i=()=>a(484714),o=()=>a(590526),r=()=>a(401497),l=()=>a(118307),d=()=>a(807449),c=()=>a(546926),u=()=>a(890492),m=()=>a(81068),g=()=>a(663639),p=()=>a(736847),h=()=>a(584262),f=()=>a(955363),v=()=>a(742852),y=()=>a(69708),x=()=>a(100622),b=()=>a(492414),S=()=>a(752860),j=()=>a(465672),A=a(474848);function w({blockStore:e}){const t=(0,i().v3)(),a=(0,o().uB)(void 0,l().A),w=(0,r().IS)((()=>({changePermissionsIcon:{height:18,width:18,color:x().Tj.icon.primary,fill:"currentColor"},openLinkIcon:{transform:"rotate(-45deg)"}})),[]);const _={key:"actions",render:e=>(0,A.jsx)(p().A,{...e}),items:[{key:"copy-link",render:e=>(0,A.jsx)(m().A,{...e,icon:(0,A.jsx)(d().I,{icon:v().linkIcon,size:"sm",colorVariant:"primary"}),title:(0,A.jsx)(y().sA,{id:"adminContentSearchTab.pagesTable.page.actions.copyLink",defaultMessage:"Copy link to page"})}),action:async function(){const i=(0,b().Ay)({store:e,pageVisitSource:h().y8.CopyLink}),[o,r]=await Promise.all([(0,s().r)(),(0,n().jd)()]);await r({environment:t,stringValue:i,copiedMessage:o.copiedLinkToClipboard}),a.setState({open:!1})}},{key:"open-page-in-new-tab",render:e=>(0,A.jsx)(m().A,{...e,icon:(0,A.jsx)(d().I,{icon:f().arrowDiagonalUpRightIcon,size:"sm",colorVariant:"primary",style:w.openLinkIcon}),title:(0,A.jsx)(y().sA,{id:"adminContentSearchTab.pagesTable.page.actions.openLink",defaultMessage:"Open in new tab"})}),action:function(){const s=(0,b().Ay)({store:e,pageVisitSource:h().y8.LinkInPage});(0,S().L)({environment:t,url:s}),a.setState({open:!1})}}]},M=(0,y().tz)();return(0,A.jsx)(j().j,{originAriaLabel:M.formatMessage({id:"pageCellActions.aliveOrInTrash.iconButton.ariaLabel",defaultMessage:"More actions for page"}),popupStore:a,render:()=>(0,A.jsx)(u().A,{menuType:c().gu.Popup,width:248,children:(0,A.jsx)(g().A,{type:g().O.Vertical,initialFocus:void 0,sections:[_]})}),useShareMenuStyles:!1})}},144707:(e,t,a)=>{a.d(t,{u:()=>M});a(898992),a(672577),a(581454),a(296540);var s=()=>a(664594),n=()=>a(300474),i=()=>a(726637),o=()=>a(383036),r=()=>a(590526),l=()=>a(401497),d=()=>a(250910),c=()=>a(807449),u=()=>a(546926),m=()=>a(26697),g=()=>a(890492),p=()=>a(81068),h=()=>a(663639),f=()=>a(736847),v=()=>a(854705),y=()=>a(158115),x=()=>a(100622),b=()=>a(645109),S=()=>a(528093),j=()=>a(920769),A=()=>a(43450),w=()=>a(449304),_=a(474848);function M({currentAccessLevel:e,currentIsDefault:t=!1,onChange:a,teamStore:M,disabledWithRightChevron:C=!1,style:T,parentSpaceStore:k}){const I=(0,s().T)(),N=(0,A().R)(M),D=(0,j().O)(),P=(0,l().IS)((()=>({chevron:{marginInlineStart:3,marginInlineEnd:3},selectedButton:{width:"100%",margin:0,paddingTop:4,paddingBottom:4,border:`1px solid ${x().Tj.outlineButtonBorder}`,...T},icon:{alignSelf:"center",marginTop:0}})),[T]),E=(0,r().K8)((()=>(null==M?void 0:M.isDefault())??t),[M,t]),B=E?"default":e,R=(0,n().r)(),V=(0,S()._)({spaceId:R,userId:I,name:"private_teamspaces"}),L=(0,w().Z)({teamStore:M,onChange:a,isDefault:E,parentSpaceStore:k,privateTeamspacesFeatureAvailability:V});return(0,_.jsx)(d().A,{popupType:i().A.isMobile?d().z.SlideUp:d().z.Popup,renderOrigin:e=>{const t=L.find((e=>e.key===B));if(!t)return null;const a=t.disableAllOptionsTooltip,s=C||Boolean(a)||Boolean(M)&&!N;return(0,_.jsx)(m().m,{placement:"bottom",alignment:"start",disableTooltip:!a||!N,renderTooltip:()=>a,style:{width:350},textWrap:!0,render:a=>(0,_.jsx)(p().A,{...(0,o().A)(e,a),title:t.title,caption:t.caption,icon:t.icon({fill:t.iconColor}),desktopIconStyle:P.icon,disabled:s,right:C?(0,_.jsx)(c().I,{icon:y().arrowChevronSingleRightFillSmallIcon,size:"xxs",colorVariant:"tertiary",style:P.chevron}):s?void 0:(0,_.jsx)(c().I,{icon:v().arrowChevronSingleDownFillSmallIcon,size:"xxs",colorVariant:"tertiary",style:P.chevron}),focused:!1,shouldWrapCaption:!0,buttonStyle:P.selectedButton})})},placementToOrigin:"bottom",alignmentToOrigin:"start",sameWidthAsOrigin:!0,render:e=>{const t=[{key:"access levels",render:e=>(0,_.jsx)(f().A,{...e,topBorder:0!==e.index}),items:L.map((t=>{const a=t.key===B;return{key:t.key,render:e=>(0,_.jsx)(m().m,{placement:"top",disableTooltip:!t.tooltip,renderTooltip:()=>t.tooltip,render:s=>(0,_.jsx)(p().A,{...(0,o().A)(e,s),title:t.title,caption:t.caption,icon:t.icon({fill:t.iconColor}),desktopIconStyle:P.icon,isChecked:a,disabled:t.disabled,shouldWrapCaption:!0})}),action:()=>{t.onSelect(),e.close()}}}))},...D?[{key:"try private teamspaces",render:()=>(0,_.jsx)(b().c,{openedFrom:"business_trial_private_teamspaces_upsell",styleOverrides:{margin:"4px 12px 12px 12px"}}),items:[]}]:[]];return(0,_.jsx)(g().A,{menuType:u().gu.Popup,children:(0,_.jsx)(h().A,{type:h().O.Vertical,initialFocus:void 0,sections:t})})}})}},155712:(e,t,a)=>{a.d(t,{a:()=>m});a(296540);var s=()=>a(401497),n=()=>a(807449),i=()=>a(302501),o=()=>a(416845),r=()=>a(69708),l=()=>a(100622),d=()=>a(284371),c=()=>a(298697),u=a(474848);function m({icon:e,iconSize:t,textStyles:a,style:m,title:g,byline:p,loading:h,error:f}){const v=function(e,t){return(0,s().IS)((()=>({title:{fontWeight:d().Wy.medium,fontSize:16,maxWidth:"100%"},byline:{fontSize:d().J.UISmall.desktop,marginTop:4},textContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",overflow:"hidden",...e},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:8},container:{height:"100%",flex:1,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",border:`1px solid ${l().Tj.outlineButtonBorder}`,borderRadius:4,padding:12,gap:8,...t},loadingTitle:{display:"block",width:"40%"},loadingByline:{display:"block",width:"60%",marginTop:8,marginBottom:8},errorTitle:{textAlign:"center",color:l().oZ.red}})),[e,t])}(a,m);return h?(0,u.jsx)("div",{style:v.container,children:(0,u.jsxs)("div",{style:v.textContainer,children:[(0,u.jsx)("div",{style:v.loadingTitle,children:(0,u.jsx)(c().A,{paragraphs:[{lineHeight:18,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:0}]})}),p?(0,u.jsx)("div",{style:v.loadingByline,children:(0,u.jsx)(c().A,{paragraphs:[{lineHeight:14,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:0}]})}):null]})}):f?(0,u.jsx)("div",{style:v.container,children:(0,u.jsx)("div",{style:v.titleContainer,children:(0,u.jsx)(i().A,{style:v.errorTitle,children:(0,o().op4)(f)?f.message:(0,u.jsx)(r().sA,{id:"spaceAnalytics.basicErrorMessage",defaultMessage:"Something went wrong.{br}Try refreshing the page.",values:{br:(0,u.jsx)("br",{})}})})})}):(0,u.jsxs)("div",{style:v.container,children:[e?(0,u.jsx)(n().I,{icon:e,size:t??"lg",colorVariant:"tertiary"}):null,(0,u.jsxs)("div",{style:v.textContainer,children:[(0,u.jsx)(i().A,{style:v.title,showTooltipWhenTruncated:!0,children:g}),p?(0,u.jsx)(i().A,{style:v.byline,isMultiline:!0,children:p}):null]})]})}},174150:(e,t,a)=>{a.d(t,{w:()=>n});var s=()=>a(401497);function n(){return(0,s().IS)((()=>({tableHeader:{position:"relative",display:"flex",flexDirection:"row"},leftContent:{display:"flex",flex:"auto",flexWrap:"wrap",justifyContent:"flex-start",rowGap:4,alignItems:"flex-start",width:"100%",margin:"0 auto 12px",paddingTop:4},rightContent:{display:"flex",flex:1,justifyContent:"flex-end",alignItems:"flex-start",width:"100%",margin:"0 auto 12px",minHeight:28,gap:8},filters:{display:"flex",flexDirection:"row",flexWrap:"wrap",width:"100%"},multiSelect:{position:"relative"},search:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%",margin:"0 auto 12px"},actionContainer:{position:"relative",display:"flex",flexDirection:"row",gap:8}})),[])}},184546:(e,t,a)=>{a.d(t,{p:()=>C});a(944114),a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(581454);var s=a(296540),n=()=>a(59226),i=()=>a(221844),o=()=>a(223116),r=()=>a(484714),l=()=>a(295633),d=()=>a(732810),c=()=>a(436604),u=()=>a(179034),m=()=>a(519831),g=()=>a(445120),p=()=>a(319625),h=()=>a(496603),f=()=>a(534177),v=()=>a(769864),y=()=>a(904671),x=()=>a(30731),b=()=>a(314529);var S=()=>a(85592);const j=20,A={query:"",createdBy:[],sharedWith:void 0,audience:[],lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},teamIds:[],pageStatus:["alive"]},w={...A,audience:["shared_externally","shared_internally","shared_to_web"]},_={filters:A,recordStores:[],numPagesLoaded:0,hasNextPage:!0,paginationToken:void 0,loading:!1,error:void 0,shouldReRunSearch:!1,showSuggestions:!0},M={..._,filters:w};function C({spaceStore:e,userStore:t,hasUserConfirmedAcknowledgement:a,organizationId:A}){const w=(0,n().X)("enabled_bev_default_audience_filter")?M:_,C=(0,r().v3)(),[T,k]=(0,s.useState)(w),I=(0,s.useRef)(w.filters),N=(0,s.useRef)(e.id),D=(0,s.useCallback)((async({restartSearch:s,ignoreFilterComparison:n})=>{if(!a)return;if(!n&&h().n4(T.filters,I.current)&&e.id===N.current)return;I.current=T.filters,N.current=e.id;let r=T.loading,m=T.error,f=T.hasNextPage,y=T.numPagesLoaded,w=T.paginationToken;if(s&&(k((e=>({..._,showSuggestions:e.showSuggestions,filters:e.filters}))),r=_.loading,m=_.error,f=_.hasNextPage,y=_.numPagesLoaded,w=_.paginationToken),f&&!r&&!m){k((e=>({...e,showSuggestions:!1,loading:!0})));try{const a=await v().callApi({eventName:"adminContentSearch",environment:C,data:{spaceId:e.id,organizationId:A,sort:{field:"relevance",direction:"desc"},limit:j,paginationToken:w,query:T.filters.query,audience:T.filters.audience,lastEditedTime:(0,x().ES)(T.filters.lastEditedTime),createdTime:(0,x().ES)(T.filters.createdTime),createdBy:T.filters.createdBy,sharedWith:T.filters.sharedWith,teamspaceIds:T.filters.teamIds,deletionStatuses:T.filters.pageStatus},headers:{[c().B3]:e.id}});if("failed"===a.type)throw a.error;!function(e,t){(0,b().DO_NOT_USE_trackLegacy)(e,"admin_content_search_analytics_queried",t)}(C,{filters:T.filters,pageNumber:y});const s=a.data.paginationToken,n=a.data.recordPointers,r=(0,S().p)({recordMapWithRoleJson:a.data.recordMap}),m=new(i().A)({name:o().a9,data:new(g().UserRecordMap)({[t.id]:r})});m.addCacheFallback(C.defaultRecordCache.inMemoryRecordCache),k((e=>{const t=[],a=new Set(e.recordStores.map((e=>e.id)));for(const s of n)if(!a.has(s.id)){const e={inMemoryRecordCache:m};t.push(s.table===u().ev?new(l().B)(C,s,e):new(d().m)(C,s,e))}const i=(0,h().hS)([...e.recordStores,...t],(e=>e.id));return{...e,recordStores:i,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:s,hasNextPage:Boolean(s)}}))}catch(M){const e=(0,p().A)(M);k((t=>({...t,loading:!1,error:e})))}}}),[C,A,e,t,a,T.filters,T.loading,T.error,T.hasNextPage,T.numPagesLoaded,T.paginationToken]);(0,s.useEffect)((()=>{T.shouldReRunSearch&&(k((e=>({...e,shouldReRunSearch:!1}))),D({restartSearch:!0,ignoreFilterComparison:!1}))}),[T.shouldReRunSearch,D]);const P=(0,s.useCallback)((async()=>{T.shouldReRunSearch||await D({restartSearch:!1,ignoreFilterComparison:!0})}),[T.shouldReRunSearch,D]),E=(0,s.useCallback)((async e=>{await D({restartSearch:!0,ignoreFilterComparison:e||!1})}),[D]),B=(0,s.useCallback)(((e,t)=>{!function(e,t){(0,b().DO_NOT_USE_trackLegacy)(e,"admin_content_search_analytics_filter_change",t)}(C,{newFilters:e}),k((a=>({...a,filters:{...a.filters,...e},...null!=t&&t.runSearchAfter?{shouldReRunSearch:null==t?void 0:t.runSearchAfter}:void 0})))}),[C]),R=(0,s.useCallback)((async t=>{if(t.table!==u().ev&&t.table!==m().Vl)return;const a=await async function({environment:e,recordId:t,recordTable:a,spaceStore:s}){const n=a===u().ev?{recordPointer:{id:t,table:u().ev,spaceId:s.id}}:{recordPointer:{id:t,table:m().Vl,spaceId:s.id}},i=await v().callApi({eventName:"getPrivateRecordInfo",environment:e,data:n});if("failed"===i.type)return;if(a===u().ev)return y().lE({environment:e,recordId:t,recordTable:u().ev,privateRecordCacheName:o().a9,ancestorData:i.data,spaceId:s.id});if(a===m().Vl)return y().lE({environment:e,recordId:t,recordTable:m().Vl,privateRecordCacheName:o().a9,ancestorData:i.data,spaceId:s.id});(0,f().HB)(a)}({environment:C,recordId:t.id,recordTable:t.table===u().ev?u().ev:m().Vl,spaceStore:e});a?k((e=>{const s=[];for(const n of e.recordStores)n.id===t.id?(a instanceof l().B||a instanceof d().m)&&!a.pathHasPurgedDeletedPermission()&&s.push(a):s.push(n);return{...e,recordStores:s,loading:!1,error:void 0}})):await D({restartSearch:!0,ignoreFilterComparison:!1})}),[C,e,D]);return{showSuggestions:T.showSuggestions,filters:T.filters,recordStores:T.recordStores,loading:T.loading,error:T.error,hasNextPage:T.hasNextPage,loadNextPage:P,runNewSearch:E,setFilters:B,refreshSearchResult:R}}},194763:(e,t,a)=>{a.d(t,{A:()=>n});class s extends(()=>a(757695))().Store{getInitialState(){return{name:"",emailDomains:[]}}getValueForSpace(e){if(e.isDefined())return{name:e.getName()||"",emailDomains:e.getEmailDomains()}}}const n=s},194977:(e,t,a)=>{a.d(t,{t:()=>g});var s=a(296540),n=()=>a(484714),i=()=>a(401497),o=()=>a(406094),r=()=>a(69708),l=()=>a(656144),d=()=>a(746423),c=()=>a(314529);var u=a(474848);const m=(0,r().YK)({exportButton:{id:"adminContentSearchTab.export",defaultMessage:"Export results"}});function g({spaceId:e,organizationId:t,filters:a,disabled:g,shouldUseIconButton:p}){const[h,f]=(0,s.useState)(!1),v=(0,n().v3)(),y=g||h,x=(0,i().IS)((()=>({button:{opacity:y?.5:1}})),[y]);async function b(){f(!0),function(e,t){(0,c().DO_NOT_USE_trackLegacy)(e,"admin_content_search_analytics_export_requested",t)}(v,{filters:a}),await l().Lw(v,{spaceId:e,organizationId:t,filters:a}),f(!1)}return p?(0,u.jsx)(d().K,{onClick:b,disabled:y}):(0,u.jsx)(o().A,{size:"lg",style:x.button,disabled:y,onClick:b,children:(0,u.jsx)(r().sA,{...m.exportButton})})}},198039:(e,t,a)=>{a.d(t,{q:()=>tt});var s=a(296540),n=()=>a(69708),i=()=>a(781804),o=()=>a(874832),r=()=>a(396896),l=()=>a(807449),d=()=>a(493552),c=()=>a(824375),u=()=>a(301608),m=()=>a(364354),g=()=>a(250910),p=()=>a(695115),h=()=>a(546926),f=()=>a(890492),v=()=>a(736847),y=()=>a(457056),x=()=>a(489538),b=()=>a(508700),S=()=>a(828973),j=()=>a(35091),A=a(474848);function w({whatToShow:e,onWhatToShowChange:t,isGroupingByProduct:a,onGroupByChange:i,showWhatToShow:o,showGroupBy:r}){const l=(0,n().tz)(),d=(0,s.useMemo)((()=>[{key:M,type:"button",title:(0,A.jsx)(n().sA,{...k(M)})},{key:_,type:"button",title:(0,A.jsx)(n().sA,{...k(_)})}]),[]);return(0,A.jsx)(g().A,{popupType:g().z.Popup,placementToOrigin:"bottom",alignmentToOrigin:"end",originGap:6,renderOrigin:e=>(0,A.jsx)(p().A,{icon:b().T,ariaLabel:l.formatMessage(C.settingsTitle),...e}),render:()=>(0,A.jsxs)(f().A,{menuType:h().gu.Popup,width:280,children:[(0,A.jsx)(v().A,{title:l.formatMessage(C.settingsTitle),disableDesktopPadding:!0,desktopStyle:{marginBottom:0}}),o&&e?(0,A.jsx)(S().A,{icon:y().o,title:l.formatMessage(C.whatToShow),selectedKey:e,options:d,onChange:e=>{null==t||t(e)}}):null,r?(0,A.jsx)(j().A,{icon:x().o,iconStyle:{height:18},title:l.formatMessage(C.groupBy),switcherProps:{on:a},onClick:()=>{i(!a)}}):null]})})}const _="totalActions",M="actionsPerUser",C=(0,n().YK)({settingsTitle:{defaultMessage:"Chart settings",id:"analytics.ai.chartSettings.settingsTitle"},whatToShow:{defaultMessage:"What to show",id:"analytics.ai.chartSettings.whatToShow"},groupBy:{defaultMessage:"Group by AI feature",id:"analytics.ai.chartSettings.groupBy.aiFeature"}}),T=(0,n().YK)({totalActions:{defaultMessage:"Total actions",id:"analytics.ai.chartSettings.whatToShow.total"},actionsPerUser:{defaultMessage:"Actions per user",id:"analytics.ai.chartSettings.whatToShow.perUser"}});function k(e){return T[e]}var I=()=>a(401497);const N={viewBox:"0 0 20 20",fittedViewBox:"4.41 4.41 11.16 11.16",directional:!0,svg:(0,A.jsx)("path",{d:"M5.468 4.584c-.23-.23-.616-.22-.86.024s-.255.63-.024.86l8.857 8.857H7.313a.625.625 0 1 0 0 1.25h7.637c.345 0 .625-.28.625-.625V7.313a.625.625 0 1 0-1.25 0v6.128z"})};(0,a(340498).wt)("arrowDiagonalDownRight",N,"default");function D({dateRange:e,productFilter:t}){const a=(0,n().tz)();return(0,A.jsxs)(r().VP,{alignItems:"center",children:[t!==u().zh?(0,A.jsx)(d().D,{colorVariant:"secondary",children:(0,A.jsx)(n().sA,{id:"spaceAnalytics.aiAnalytics.metricsChange.forProduct",defaultMessage:"for {product}",values:{product:a.formatMessage((0,u().YF)(t))}})}):null,(0,A.jsx)(d().D,{colorVariant:"secondary",children:(0,A.jsx)(n().sA,{id:"spaceAnalytics.aiAnalytics.metricsChange.timePeriod.forProduct",defaultMessage:"in the last {dateRange} days",values:{dateRange:u().tx[e]}})})]})}function P({valueText:e,valueSuffix:t,icon:a}){const{shortShimmer:s}=(0,m().Z)();return(0,A.jsxs)(r().fI,{gap:8,alignItems:"center",children:[(0,A.jsx)(l().I,{icon:a,size:"lg",colorPalette:"blue",colorVariant:"tertiary"}),void 0===e?(0,A.jsx)(o().P,{style:s}):(0,A.jsxs)(d().D,{styleKey:"titleLgSemibold",colorPalette:"blue",colorVariant:"accentPrimary",children:[e,t]})]})}a(581454);var E=()=>a(261403),B=()=>a(84593);const R=u().zh;function V(e){const{currentFilter:t,onChangeFilter:a}=e,s=u().LP.map((e=>({key:e,value:e,title:(0,A.jsx)(n().sA,{...(0,u().YF)(e)}),shortTitle:(0,A.jsx)(n().sA,{...(0,u().YF)(e)}),wrapCaption:!1})));return(0,A.jsx)(B().G0,{pillTitle:(0,A.jsx)(n().sA,{id:"aiAnalytics.filters.product.title",defaultMessage:"Product"}),pillIcon:E().R,selectedItem:t,setSelectedItem:e=>{a(e??R)},items:s,shouldUseCheck:!0,selectionRequired:!0})}function L(){return(0,I().IS)((()=>({container:{width:"100%"},body:{display:"flex",gap:12,width:"100%"},leftColumn:{display:"flex",flexGrow:3,flexShrink:1,minWidth:"300px"},rightColumn:{flexGrow:1,flexShrink:1,minWidth:"160px",display:"flex",flexDirection:"column",justifyContent:"center"},fullHeightCard:{height:"100%"}})),[])}var z=()=>a(760379),F=()=>a(55025),O=(a(898992),a(908872),()=>a(590526)),U=()=>a(72135),W=()=>a(406944),H=()=>a(246732),q=()=>a(264503),K=()=>a(526920),G=()=>a(532564),Y=()=>a(505776),$=()=>a(609679),Q=()=>a(869190),J=()=>a(379632),Z=()=>a(100622),X=()=>a(496603),ee=()=>a(284371),te=()=>a(851770);function ae({point:e,intl:t,tooltipStyles:a}){var s;const n=e.color??e.series.color,i=e.series.name,o=(0,U().ZV)(e.y??void 0,"compact",t),r=""===i?t.formatMessage(se.empty):i;return(0,A.jsxs)("div",{style:a.row,children:[(0,A.jsxs)("div",{style:a.rowLeftContainer,children:[(0,A.jsx)("div",{style:{...a.square,backgroundColor:(0,te().SG)(n)}}),(0,A.jsx)("div",{style:a.rowLeft,children:r})]}),(0,A.jsx)("span",{style:a.rowRight,children:null!==(s=e.point)&&void 0!==s&&s.isValueNull?t.formatMessage(se.noData):o})]})}const se=(0,n().YK)({empty:{defaultMessage:"Empty",id:"analyticsChart.chart.tooltip.empty"},noData:{defaultMessage:"No data",id:"analyticsChart.chart.tooltip.noData"},noDataForThisDate:{defaultMessage:"No data for this date",id:"analyticsChart.chart.tooltip.noDataForThisDate"}});function ne(e){const{seriesData:t,xAxisTitle:a,yAxisTitle:i,tooltipFooterText:o,yAxisMin:r,yAxisMax:l,xAxisMin:d,xAxisMax:c}=e,u=(0,n().tz)(),m=(0,O().uB)(void 0,Y().A),g=function({footerText:e}){const t=(0,n().tz)(),a=(0,te().n9)(!1),i=(0,I().IS)((()=>({headerStyle:{fontSize:"12px",color:Z().Tj.text.secondary,padding:"15px",paddingBottom:"0px",fontWeight:ee().Wy.medium},footerStyle:{fontSize:"12px",color:Z().Tj.text.secondary,padding:"15px",paddingTop:"0px"}})),[]),o=(0,s.useMemo)((()=>({useHTML:!0,shadow:!1,borderWidth:0,backgroundColor:void 0,outside:!1,stickOnContact:!1,hideDelay:100})),[]);return(0,s.useMemo)((()=>({...o,shared:!0,formatter(){const s=this.points??[],n=X().Si(s,(e=>{var t;return null===(t=e.point)||void 0===t?void 0:t.isValueNull}));return J().A.renderToStaticMarkup((0,A.jsxs)("div",{style:a.defaultContainer,children:["number"==typeof this.x?(0,A.jsx)("div",{style:i.headerStyle,children:(0,Q().W_)(this.x,"medium",$().locale,"UTC")}):void 0,(0,A.jsx)("div",{style:a.scrollContainer,children:n?null:s.map((e=>(0,A.jsx)(ae,{point:e,intl:t,tooltipStyles:a},e.key)))}),n||e?(0,A.jsx)("div",{style:i.footerStyle,children:n?t.formatMessage(se.noDataForThisDate):e}):void 0]}))}})),[o,t,a,i,e])}({footerText:o}),p=W().O.colorful,h=p.length,f=t.map(((e,t)=>({...e,color:e.color??p[t%h],fillColor:e.fillColor??(0,K().tm)({color:p[t%h],hideLineFillArea:!1})})));return(0,A.jsx)(G().Z,{value:m,children:(0,A.jsx)(H().AxisChart,{chartDisplayContext:"workspace_analytics",tooltipOptions:g,onLoadEventHandler:()=>{},columnStacking:"normal",seriesData:f,xAxisType:"datetime",showHorizontalGridLines:!0,xAxisTitle:a,yAxisTitle:i,userYAxisMin:r,userYAxisMax:l,xAxisMin:d,xAxisMax:c,yLabelFormatter:e=>(0,U().ZV)(e,e>9999?"compact":"number",u),timezone:"UTC",xLabelFormatter:e=>new Date(e).toLocaleDateString(u.locale,{month:"numeric",day:"numeric",timeZone:"UTC"}),axisType:"line",dataLabelsEnabled:!1,loadingProps:{isInitialLoading:!1,isThrottledLoading:!1,initialLoadingSvg:()=>(0,A.jsx)(q().z,{chartType:"line",showCopy:!1})},weightColorValue:!1,hasData:Boolean(t.length),onLegendItemClick:e=>!1})})}function ie({dateRange:e,aiActionsAnalytics:t,productFilter:a,isGroupingByProduct:i,whatToShow:o}){const r=(0,n().tz)(),l=(0,s.useMemo)((()=>{const s=(null==t?void 0:t.actionsTimeSeries)??[];if(0===s.length)return[];const n=a===u().zh?u().B3:[a];if(i&&a===u().zh){const t=n.map((t=>{const a=r.formatMessage((0,u().YF)(t));return{name:a,type:"area",data:(0,F().I)({series:s,dateRange:e,productFilter:t,name:a}),...(0,F().rn)(t)}}));if(o!==_)return t;const a=r.formatMessage((0,u().YF)(u().Ax)),i={name:a,type:"area",data:s.map((e=>{const t=e.values[u().zh],s=u().B3.reduce(((t,a)=>t+e.values[a]),0);return{x:new Date(e.ds).getTime(),y:t-s,name:a,isValueNull:!1}})),...(0,F().rn)(u().Ax)};return[...t,i]}const l=r.formatMessage((0,u().YF)(a));return[{name:l,type:"area",data:(0,F().I)({series:s,dateRange:e,productFilter:a,name:l}),...(0,F().rn)(a)}]}),[e,null==t?void 0:t.actionsTimeSeries,r,a,i,o]),d=r.formatMessage(oe.date),c=o===M?r.formatMessage(oe.actionsPerUser):r.formatMessage(oe.actions),m=(0,u().is)(e)?"last_7_days":"last_1_day",g=o===M?r.formatMessage(oe.tooltipFooterPerUser,{lookbackPeriod:r.formatMessage(u().Yr[m])}):r.formatMessage(oe.tooltipFooter,{lookbackPeriod:r.formatMessage(u().Yr[m])}),p=l.length>0,h=(0,s.useMemo)((()=>(0,F()._E)({dateRange:e})),[e]),f=p?{xAxisMin:h.xAxisMin,xAxisMax:h.xAxisMax}:h,v=(0,s.useMemo)((()=>p?l:(0,F().pi)({intl:r,productFilter:a,isGroupingByProduct:i})),[p,l,r,a,i]);return(0,A.jsx)(ne,{tooltipFooterText:g,seriesData:v,xAxisTitle:d,yAxisTitle:c,yAxisMin:0,...f})}const oe=(0,n().YK)({date:{id:"aiAnalyticsActionsChart.xAxisLabel",defaultMessage:"Date"},actions:{id:"aiAnalyticsActionsChart.yAxisLabel",defaultMessage:"Actions"},actionsPerUser:{id:"aiAnalyticsActionsChart.yAxisLabel.perUser",defaultMessage:"Actions per user"},tooltipFooter:{id:"aiAnalyticsActionsChart.tooltip.footer",defaultMessage:"AI actions in the {lookbackPeriod}"},tooltipFooterPerUser:{id:"aiAnalyticsActionsChart.tooltip.footer.perUser",defaultMessage:"AI actions per active user in the {lookbackPeriod}"}});var re=()=>a(484714),le=()=>a(187174),de=()=>a(534177),ce=()=>a(769864);function ue({spaceStore:e,dateRange:t,surface:a}){const{shortShimmer:g}=(0,m().Z)(),p=L(),h=(0,i().mI)(),f=(0,F().Zl)(),[v,y]=(0,s.useState)(u().zh),[x,b]=(0,s.useState)(!1),[S,j]=(0,s.useState)(_),C=(0,z().r)({surface:a,view:"ai_actions"}),T=(0,s.useCallback)((e=>{j(e),C({customization:"chart_settings_what_to_show",what_to_show_chosen:e===_?"total_actions":e===M?"actions_per_user":void 0})}),[C]),k=(0,s.useCallback)((e=>{b(e),C({customization:"chart_settings_group_by",group_by_on:e})}),[C]),I=(0,s.useCallback)((e=>{y(e),C({customization:"product_filter_changed",product_chosen:e})}),[C]),N=S===M?u().Wg:u().UQ,{aiActionsAnalytics:E}=function({spaceId:e,dateRange:t,timeSeriesType:a}){const s=(0,re().v3)(),[{status:n,value:i},o]=(0,le().Yb)((async()=>{if(!e)return;const n=await ce().callApi({eventName:"getAIActionsAnalytics",environment:s,data:{spaceId:e,dateRange:t,timeSeriesType:a}});if("success"===n.type)return n.data;if("failed"===n.type)throw n.error;return(0,de().HB)(n)}),[s,e,t,a]);return{loading:"pending"===n,aiActionsAnalytics:i,refetch:o}}({spaceId:e.id,dateRange:t,timeSeriesType:N}),B=void 0===E,R=null==E?void 0:E.totalActionsPerProductCount,O=f?null==R?void 0:R[v]:null==R?void 0:R[u().zh];return(0,A.jsxs)("div",{style:p.container,children:[(0,A.jsx)(r().fI,{alignItems:"center",justifyContent:"space-between",width:"100%",children:(0,A.jsx)(r().fI,{children:(0,A.jsx)(V,{currentFilter:v,onChangeFilter:I})})}),(0,A.jsxs)("div",{style:p.body,children:[(0,A.jsx)("div",{style:p.leftColumn,children:(0,A.jsxs)("div",{style:h.container,children:[(0,A.jsxs)(r().fI,{alignItems:"center",justifyContent:"space-between",width:"100%",children:[(0,A.jsxs)(r().fI,{gap:4,alignItems:"center",children:[(0,A.jsx)(l().I,{icon:c().sparklesIcon,size:"sm"}),(0,A.jsx)(d().D,{styleKey:"bodyMedium",children:S===M?(0,A.jsx)(n().sA,{id:"spaceAnalytics.aiAnalytics.aiActions.aiActionsChart.perUserTitle",defaultMessage:"AI actions per user"}):(0,A.jsx)(n().sA,{id:"spaceAnalytics.aiAnalytics.aiActions.aiActionsChart.title",defaultMessage:"AI actions"})})]}),(0,A.jsx)(w,{whatToShow:S,onWhatToShowChange:T,isGroupingByProduct:x,onGroupByChange:k,showWhatToShow:!0,showGroupBy:!0})]}),(0,A.jsx)("div",{style:{width:"100%"},children:(0,A.jsx)(ie,{aiActionsAnalytics:E,dateRange:t,spaceId:e.id,productFilter:v,isGroupingByProduct:x,whatToShow:S})})]})}),(0,A.jsx)("div",{style:p.rightColumn,children:(0,A.jsx)("div",{style:{...h.container,...p.fullHeightCard},children:(0,A.jsx)(i().YQ,{title:(0,A.jsx)("div",{style:h.title,children:S===M?(0,A.jsx)(n().sA,{id:"spaceAnalytics.aiAnalytics.aiActions.totalAIActionsPerUser.title",defaultMessage:"Average AI actions per user"}):(0,A.jsx)(n().sA,{id:"spaceAnalytics.aiAnalytics.aiActions.totalAIActions.title",defaultMessage:"Total AI actions"})}),content:B?(0,A.jsx)(o().P,{style:g}):(0,A.jsx)(P,{icon:c().sparklesIcon,valueText:null==O?void 0:O.toLocaleString()}),byline:(0,A.jsx)(D,{dateRange:t,productFilter:f?v:u().zh}),alignItems:"center"})})})]})]})}var me=()=>a(26697),ge=()=>a(835607),pe=()=>a(690197),he=()=>a(232930);function fe({dateRange:e,productFilter:t,isGroupingByProduct:a,aiMembersAnalytics:i}){const o=(0,n().tz)(),r=(0,s.useMemo)((()=>{const s=(null==i?void 0:i.membersTimeSeries)??[];if(0===s.length)return[];const n=t===u().zh?u().B3:[t];if(a&&t===u().zh)return n.map((t=>{const a=o.formatMessage((0,u().YF)(t));return{name:a,type:"area",data:(0,F().I)({series:s,dateRange:e,productFilter:t,name:a}),...(0,F().rn)(t)}}));const r=o.formatMessage((0,u().YF)(t));return[{name:r,type:"area",data:(0,F().I)({series:s,dateRange:e,productFilter:t,name:r}),...(0,F().rn)(t)}]}),[null==i?void 0:i.membersTimeSeries,o,t,a,e]),l=o.formatMessage(ve.date),d=o.formatMessage(ve.members),c=(0,u().is)(e)?"last_7_days":"last_1_day",m=o.formatMessage(ve.tooltipFooter,{lookbackPeriod:o.formatMessage(u().Yr[c])}),g=r.length>0,p=(0,s.useMemo)((()=>(0,F()._E)({dateRange:e})),[e]),h=g?{xAxisMin:p.xAxisMin,xAxisMax:p.xAxisMax}:p,f=(0,s.useMemo)((()=>g?r:(0,F().pi)({intl:o,productFilter:t,isGroupingByProduct:a})),[g,r,o,t,a]);return(0,A.jsx)(ne,{tooltipFooterText:m,seriesData:f,xAxisTitle:l,yAxisTitle:d,...h})}const ve=(0,n().YK)({date:{id:"aiAnalyticsMembersChart.xAxisLabel",defaultMessage:"Date"},members:{id:"aiAnalyticsMembersChart.yAxisLabel",defaultMessage:"Members"},tooltipFooter:{id:"aiAnalyticsMembersChart.tooltip.footer",defaultMessage:"Active AI members in the {lookbackPeriod}"}});function ye({spaceStore:e,dateRange:t,surface:a}){const[g,p]=(0,s.useState)(u().zh),[h,f]=(0,s.useState)(!1),v=(0,F().Zl)(),y=(0,z().r)({surface:a,view:"ai_members"}),x=(0,s.useCallback)((e=>{f(e),y({customization:"chart_settings_group_by",group_by_on:e})}),[y]),b=(0,s.useCallback)((e=>{p(e),y({customization:"product_filter_changed",product_chosen:e})}),[y]),S=L(),j=(0,i().mI)(),{shortShimmer:_}=(0,m().Z)(),{loading:M,aiMembersAnalytics:C}=function({spaceId:e,dateRange:t}){const a=(0,re().v3)(),[{status:s,value:n},i]=(0,le().Yb)((async()=>{if(!e)return;const s=await ce().callApi({eventName:"getAIMembersAnalytics",environment:a,data:{spaceId:e,dateRange:t}});if("success"===s.type)return s.data;if("failed"===s.type)throw s.error;return(0,de().HB)(s)}),[a,e,t]);return{loading:"pending"===s,aiMembersAnalytics:n,refetch:i}}({spaceId:e.id,dateRange:t}),T=null==C?void 0:C.totalActiveAIMembersPerProductCount,k=v?null==T?void 0:T[g]:null==T?void 0:T[u().zh],I=null==C?void 0:C.allActiveMembers;return(0,A.jsxs)("div",{style:S.container,children:[(0,A.jsx)(r().fI,{alignItems:"center",justifyContent:"space-between",width:"100%",children:(0,A.jsx)(r().fI,{children:(0,A.jsx)(V,{currentFilter:g,onChangeFilter:b})})}),(0,A.jsxs)("div",{style:S.body,children:[(0,A.jsx)("div",{style:S.leftColumn,children:(0,A.jsxs)("div",{style:j.container,children:[(0,A.jsxs)(r().fI,{alignItems:"center",justifyContent:"space-between",width:"100%",children:[(0,A.jsxs)(r().fI,{gap:4,alignItems:"center",children:[(0,A.jsx)(l().I,{icon:ge().F,size:"sm"}),(0,A.jsx)(d().D,{styleKey:"bodyMedium",children:(0,A.jsx)(n().sA,{id:"spaceAnalytics.aiAnalytics.aiMembers.aiMembersChart.title",defaultMessage:"Active AI members"})})]}),(0,A.jsx)(w,{isGroupingByProduct:h,onGroupByChange:x,showWhatToShow:!1,showGroupBy:!0})]}),(0,A.jsx)("div",{style:{width:"100%"},children:(0,A.jsx)(fe,{dateRange:t,productFilter:g,isGroupingByProduct:h,aiMembersAnalytics:C})})]})}),(0,A.jsxs)("div",{style:S.rightColumn,children:[(0,A.jsx)("div",{style:{...j.container,...S.fullHeightCard},children:(0,A.jsx)(i().YQ,{title:(0,A.jsx)(n().sA,{id:"spaceAnalytics.aiAnalytics.aiMembers.totalActive.title",defaultMessage:"Active AI members"}),content:M?(0,A.jsx)(o().P,{style:_}):(0,A.jsx)(P,{icon:ge().F,valueText:null==k?void 0:k.toLocaleString()}),byline:(0,A.jsx)(D,{dateRange:t,productFilter:v?g:u().zh}),alignItems:"center"})}),(0,A.jsx)("div",{style:{...j.container,...S.fullHeightCard},children:(0,A.jsx)(i().YQ,{title:(0,A.jsx)(n().sA,{id:"spaceAnalytics.aiAnalytics.aiMembers.adoptionRate.title",defaultMessage:"AI utilization"}),content:M?(0,A.jsx)(o().P,{style:_}):(0,A.jsx)(P,{icon:c().sparklesIcon,valueText:void 0!==I&&I>0&&void 0!==k?Math.round(k/I*100).toLocaleString():void 0,valueSuffix:"%"}),byline:(0,A.jsx)(D,{dateRange:t,productFilter:v?g:u().zh}),alignItems:"center",badge:(0,A.jsx)(me().m,{placement:"bottom",render:e=>(0,A.jsx)(pe().A,{...e,href:(0,he().x)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq"}),renderTooltip:()=>(0,A.jsx)(n().sA,{id:"spaceAnalytics.aiAnalytics.aiMembers.adoptionRate.tooltip",defaultMessage:"The percentage of active workspace members who have used AI in the workspace"})})})})]})]})]})}a(18107),a(967357);var xe=()=>a(656144),be=()=>a(746423),Se=()=>a(698785),je=()=>a(909692),Ae=()=>a(174150),we=()=>a(193620),_e=(a(672577),()=>a(74351)),Me=()=>a(940148),Ce=()=>a(302501),Te=()=>a(566468),ke=()=>a(449539),Ie=()=>a(54321),Ne=()=>a(109367),De=()=>a(274800);const Pe=[{id:"page",headerTitle:(0,A.jsx)(n().sA,{...u().Gg.page}),renderCell:e=>e.type===Ie().T.Loading?(0,A.jsx)(Te().mf,{containerStyles:{width:200}}):(0,A.jsx)(a(860864).EB,{store:e.blockStore,rightIcon:(0,A.jsx)(a(126061).r,{blockStore:e.blockStore})}),widthData:{width:320,maxWidth:320},sortable:!1},{id:"distinctUserCount",headerTitle:(0,A.jsx)(n().sA,{...u().Gg.distinctUserCount}),renderCell:e=>e.type===Ie().T.Loading?(0,A.jsx)(Te().mf,{containerStyles:{width:100}}):(0,A.jsx)(Ce().A,{children:e.distinctUserCount.toLocaleString()}),widthData:{widthPercent:25,minWidth:120},sortable:!1},{id:"totalCitationCount",headerTitle:(0,A.jsx)(n().sA,{...u().Gg.totalCitationCount}),renderCell:e=>e.type===Ie().T.Loading?(0,A.jsx)(Te().mf,{containerStyles:{width:100}}):(0,A.jsx)(Ce().A,{children:e.totalCitationCount.toLocaleString()}),widthData:{widthPercent:25,minWidth:120},sortable:!1},{id:"location",headerTitle:(0,A.jsx)(n().sA,{...u().Gg.location}),renderCell:e=>e.type===Ie().T.Loading?(0,A.jsx)(Te().mf,{containerStyles:{width:140}}):(0,A.jsx)(a(803662).E,{blockStore:e.blockStore,teamStore:e.teamStore}),widthData:{width:140},sortable:!1},{id:"createdBy",headerTitle:(0,A.jsx)(De().k,{message:u().Gg.createdBy}),renderCell:e=>{if(e.type===Ie().T.Loading)return(0,A.jsx)(Te().mf,{containerStyles:{width:100}});const t=e.createdById;return t?(0,A.jsx)(a(698385).T,{store:e.blockStore,actorPointers:[{table:a(798880).oo,id:t}]}):null},widthData:{width:140},sortable:!1},{id:"createdTime",headerTitle:(0,A.jsx)(De().k,{message:u().Gg.createdTime}),renderCell:e=>e.type===Ie().T.Loading?(0,A.jsx)(Te().mf,{containerStyles:{width:100}}):e.createdTime?(0,A.jsx)(a(625383).d,{dateTs:e.createdTime}):null,widthData:{width:100},sortable:!1}];function Ee({spaceStore:e,pages:t,loadMoreMethod:a,loading:i}){const o=(0,s.useMemo)((()=>(0,Me().rC)({columnRenderInfo:Pe,containerMarginTop:0})),[]),r=(0,Ne().o)({blockIds:(null==t?void 0:t.map((e=>e.pageId)))??[]}),l=(0,O().K8)((()=>i?(0,Ie().n)():(null==r?void 0:r.map((a=>{const s=null==t?void 0:t.find((e=>e.pageId===a.id));return{id:a.id,type:Ie().T.AIAnalyticsTopPagesRow,isClickable:!1,blockStore:a,createdTime:a.canRead()?a.getCreatedTime():void 0,createdById:a.canRead()?a.getCreatedById():void 0,teamStore:(0,_e().U)(a),distinctUserCount:(null==s?void 0:s.distinctUserCount)??0,totalCitationCount:(null==s?void 0:s.totalCitationCount)??0,spaceStore:e}})))??[]),[r,t,i,e]);return(0,A.jsx)(Me().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,setStickyHeaderRow:!0,columnRenderInfo:Pe,rows:l,renderNoRowsComponent:()=>(0,A.jsx)(ke().p,{icon:void 0,title:(0,A.jsx)(n().sA,{id:"aiAnalytics.topPages.empty",defaultMessage:"No pages found"}),byline:(0,A.jsx)(n().sA,{id:"aiAnalytics.topPages.empty.byline",defaultMessage:"There are no pages that match your filters"})}),styles:o,showRowBorders:!0,loadMoreMethod:a,extendToFullScreen:{rightPaddingPx:0,extendTableToFullWidthOffsetPx:0}})}var Be=()=>a(335260);function Re({spaceStore:e,organizationId:t,dateRange:a,surface:o}){const r=(0,F().Zl)(),[l,d]=(0,s.useState)(""),c=(0,re().v3)(),m=(0,n().tz)(),g=[{id:"distinctUserCount",name:m.formatMessage(u().Gg.distinctUserCount),type:"number"},{id:"totalCitationCount",name:m.formatMessage(u().Gg.totalCitationCount),type:"number"}],[p,h]=(0,s.useState)(void 0),[f,v]=(0,s.useState)(),[y,x]=(0,s.useState)(!1),b=f??(p?[Ve(p)]:[]),{loading:S,pages:j,loadMoreMethod:w}=function({spaceId:e,organizationId:t,dateRange:a,query:n,limit:i=10,sort:o}){const r=(0,re().v3)(),{updateCacheWithRecordMap:l}=(0,s.useContext)(Be().N),[d,c]=(0,s.useState)(void 0),[u,m]=(0,s.useState)([]);(0,s.useEffect)((()=>{c(void 0),m([])}),[e,a,n,i,o]);const[{value:g,status:p}]=(0,le().Yb)((async()=>{const s=await ce().callApi({eventName:"getAITopPagesAnalytics",environment:r,data:{spaceId:e,organizationId:t,dateRange:a,sort:o,query:n,cursor:u.at(-1),limit:i}});if("success"===s.type)return c(s.data.nextCursor),l(s),s.data;if("failed"===s.type)throw s.error}),[r,e,a,n,u,i,o,t,l]),h=(0,s.useMemo)((()=>({type:"pages",hasPrevPage:u.length>0,hasNextPage:Boolean(d),currentPage:u.length+1,finalPage:null!=g&&g.totalCount&&i?Math.max(1,Math.ceil(g.totalCount/i)):void 0,onLoadPrevious:()=>{c(u.at(-1)),m((e=>e.slice(0,-1)))},onLoadNext:()=>{d&&(m((e=>[...e,d])),c(void 0))}})),[d,u,null==g?void 0:g.totalCount,i]);return{loading:"pending"===p,pages:null==g?void 0:g.pages,loadMoreMethod:h}}({spaceId:e.id,organizationId:t,dateRange:a,query:l,limit:10,sort:p}),_=(0,Ae().w)(),M=L(),C=(0,z().r)({surface:o,view:"ai_top_pages"}),T=(0,s.useCallback)((e=>{x(!1),v(void 0);const t=e.at(0),a=t?function(e){return{field:"totalCitationCount"===e.propertyId?"total_citation_count":"distinct_user_count",direction:"descending"===e.direction?"desc":"asc"}}(t):void 0;h(a),C({customization:"sort_table",sorted_by:a?a.field:void 0})}),[C]),k=(0,s.useCallback)((e=>{d(e),h(void 0),C({customization:"search_table"})}),[C]),[I,N]=(0,s.useState)(!1);return r?(0,A.jsxs)("div",{style:M.container,children:[(0,A.jsxs)("div",{style:{..._.actionContainer,marginInline:0},children:[(0,A.jsx)("div",{style:_.filters,children:(0,A.jsx)(je().e,{isMenuOpen:y,setIsMenuOpen:x,sortProperties:g,onApply:T,currentSorts:b,preventMultipleSorts:!0})}),(0,A.jsxs)("div",{style:_.rightContent,children:[(0,A.jsx)(Se().x,{sortProperties:g,appliedSorts:p?[Ve(p)]:void 0,openSortPillMenu:e=>{e&&v([{propertyId:e,direction:"descending"}]),x(!0)}}),(0,A.jsx)(we().nv,{mode:we().Ke.AnimatedSearchButton,query:l,setQueryFilter:k}),(0,A.jsx)(be().K,{onClick:async()=>{N(!0),await xe().SP(c,{spaceId:e.id,organizationId:t,dateRange:a}),N(!1)},disabled:I||S})]})]}),(0,A.jsx)(i().YQ,{title:void 0,content:(0,A.jsx)(Ee,{spaceStore:e,pages:j,loadMoreMethod:w,loading:S}),byline:void 0,fullWidth:!0})]}):null}function Ve(e){return{propertyId:"total_citation_count"===e.field?"totalCitationCount":"distinctUserCount",direction:"desc"===e.direction?"descending":"ascending"}}a(944114);var Le=()=>a(430949);const ze={id:"user",headerTitle:(0,A.jsx)(n().sA,{...u().lF.user}),renderCell:e=>e.type===Ie().T.Loading?(0,A.jsx)(Le().a_,{}):(0,A.jsx)(Le()._H,{userId:e.userId,showEmailByline:!0}),widthData:{widthPercent:75,minWidth:275},sortable:!1,shouldShowSortTooltip:!1},Fe={id:"aiActions",headerTitle:(0,A.jsx)(n().sA,{...u().lF.aiActions}),renderCell:e=>e.type===Ie().T.Loading?(0,A.jsx)(Te().mf,{containerStyles:{width:100}}):(0,A.jsx)(Ce().A,{children:e.actionCount.toLocaleString()}),widthData:{widthPercent:25,minWidth:120},sortable:!1,shouldShowSortTooltip:!1};function Oe({users:e,loadMoreMethod:t,loading:a}){const i=s.useMemo((()=>[ze,Fe]),[]),o=(0,s.useMemo)((()=>(0,Me().rC)({columnRenderInfo:i,containerMarginTop:0})),[i]),r=(0,s.useMemo)((()=>{if(a)return(0,Ie().n)();return(e??[]).map((e=>({type:Ie().T.AIAnalyticsUsersRow,id:e.userId,isClickable:!1,userId:e.userId,actionCount:e.actionCount})))}),[e,a]);return(0,A.jsx)(Me().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,columnRenderInfo:i,rows:r,renderNoRowsComponent:()=>(0,A.jsx)(ke().p,{icon:void 0,title:(0,A.jsx)(n().sA,{id:"aiAnalytics.usersTable.empty",defaultMessage:"No users found"}),byline:(0,A.jsx)(n().sA,{id:"aiAnalytics.usersTable.empty.byline",defaultMessage:"There are no users that match your filters"})}),styles:o,showRowBorders:!0,loadMoreMethod:t,extendToFullScreen:{rightPaddingPx:0,extendTableToFullWidthOffsetPx:0}})}function Ue({spaceStore:e,dateRange:t,surface:a,organizationId:o}){const l=(0,F().Zl)(),d=(0,re().v3)(),[c,m]=(0,s.useState)(u().zh),[g,p]=(0,s.useState)(""),h=(0,n().tz)(),f=(0,z().r)({surface:a,view:"ai_users"}),v=[{id:"aiActions",name:h.formatMessage(u().lF.aiActions),type:"number"}];l&&v.push({id:"user",name:h.formatMessage(u().lF.user),type:"text"});const[y,x]=(0,s.useState)(void 0),[b,S]=(0,s.useState)(),[j,w]=(0,s.useState)(!1),_=b??(y?[We(y)]:[]),{loading:M,users:C,loadMoreMethod:T}=function({spaceId:e,dateRange:t,productFilter:a,query:n,limit:i=10,sort:o}){const r=(0,re().v3)(),[l,d]=(0,s.useState)(void 0),[c,u]=(0,s.useState)([]);(0,s.useEffect)((()=>{d(void 0),u([])}),[e,t,a,n,i,o]);const[{value:m,status:g}]=(0,le().Yb)((async()=>{const s=await ce().callApi({eventName:"getAIUsersAnalytics",environment:r,data:{spaceId:e,dateRange:t,sort:o,query:n,filters:a?{product:a}:void 0,cursor:c.at(-1),limit:i}});if("success"===s.type)return d(s.data.nextCursor),s.data;if("failed"===s.type)throw s.error}),[r,e,t,a,n,c,i,o]),p=(0,s.useMemo)((()=>({type:"pages",hasPrevPage:c.length>0,hasNextPage:Boolean(l),currentPage:c.length+1,finalPage:null!=m&&m.totalCount&&i?Math.max(1,Math.ceil(m.totalCount/i)):void 0,onLoadPrevious:()=>{d(c.at(-1)),u((e=>e.slice(0,-1)))},onLoadNext:()=>{l&&(u((e=>[...e,l])),d(void 0))}})),[l,c,null==m?void 0:m.totalCount,i]);return{loading:"pending"===g,users:null==m?void 0:m.users,loadMoreMethod:p}}({spaceId:e.id,dateRange:t,productFilter:c===u().zh?void 0:c,query:g,limit:10,sort:y}),k=(0,s.useCallback)((e=>{m(e),f({customization:"product_filter_changed",product_chosen:e})}),[f]),I=(0,s.useCallback)((e=>{p(e),x(void 0),f({customization:"search_table"})}),[f]),N=(0,s.useCallback)((e=>{w(!1),S(void 0);const t=e.at(0),a=t?function(e){return{field:"aiActions"===e.propertyId?"action_count":"user",direction:"descending"===e.direction?"desc":"asc"}}(t):void 0;x(a),f({customization:"sort_table",sorted_by:a?a.field:void 0})}),[f]),[D,P]=(0,s.useState)(!1),E=(0,Ae().w)(),B=L();return(0,A.jsxs)("div",{style:B.container,children:[(0,A.jsxs)("div",{style:{...E.actionContainer,marginInline:0},children:[(0,A.jsxs)("div",{style:E.filters,children:[(0,A.jsx)(je().e,{isMenuOpen:j,setIsMenuOpen:w,sortProperties:v,onApply:N,currentSorts:_,preventMultipleSorts:!0}),(0,A.jsx)(r().fI,{children:(0,A.jsx)(V,{currentFilter:c,onChangeFilter:k})})]}),(0,A.jsxs)("div",{style:E.rightContent,children:[(0,A.jsx)(Se().x,{sortProperties:v,appliedSorts:y?[We(y)]:void 0,openSortPillMenu:e=>{e&&S([{propertyId:e,direction:"descending"}]),w(!0)}}),l?(0,A.jsx)(we().nv,{mode:we().Ke.AnimatedSearchButton,query:g,setQueryFilter:I}):null,(0,A.jsx)(be().K,{onClick:async()=>{P(!0),await xe().Je(d,{spaceId:e.id,organizationId:o,dateRange:t,product:c===u().zh?void 0:c}),P(!1)},disabled:D||M})]})]}),(0,A.jsx)(i().YQ,{title:void 0,content:(0,A.jsx)(Oe,{users:C,loadMoreMethod:T,loading:M}),byline:void 0,fullWidth:!0})]})}function We(e){return{propertyId:"action_count"===e.field?"aiActions":"user",direction:"desc"===e.direction?"descending":"ascending"}}var He=()=>a(350013),qe=()=>a(743246),Ke=()=>a(81068),Ge=()=>a(663639),Ye=()=>a(584262),$e=()=>a(496703);function Qe({workflowId:e}){const t=(0,re().v3)(),s=(0,O().uB)(void 0,a(118307).A),i=(0,I().IS)((()=>({openLinkIcon:{transform:"rotate(-45deg)"}})),[]);const o={key:"actions",render:e=>(0,A.jsx)(v().A,{...e}),items:[{key:"copy-link",render:e=>(0,A.jsx)(Ke().A,{...e,icon:(0,A.jsx)(l().I,{icon:a(742852).linkIcon,size:"sm",colorVariant:"primary"}),title:(0,A.jsx)(n().sA,{id:"aiAnalytics.workflowsTable.workflow.actions.copyLink",defaultMessage:"Copy link to agent"})}),action:async function(){const n=(0,$e().L)({workflowId:e,pageVisitSource:Ye().y8.CopyLink,baseUrl:a(726637).A.domainBaseUrl,params:{}}),[i,o]=await Promise.all([(0,a(692031).r)(),(0,a(212497).jd)()]);await o({environment:t,stringValue:n,copiedMessage:i.copiedLinkToClipboard}),s.setState({open:!1})}},{key:"open-agent-in-new-tab",render:e=>(0,A.jsx)(Ke().A,{...e,icon:(0,A.jsx)(l().I,{icon:a(955363).arrowDiagonalUpRightIcon,size:"sm",colorVariant:"primary",style:i.openLinkIcon}),title:(0,A.jsx)(n().sA,{id:"aiAnalytics.workflowsTable.workflow.actions.openLink",defaultMessage:"Open in new tab"})}),action:function(){const n=(0,$e().L)({workflowId:e,pageVisitSource:Ye().y8.LinkInPage,params:{}});(0,a(752860).L)({environment:t,url:n}),s.setState({open:!1})}}]},r=(0,n().tz)();return(0,A.jsx)(a(465672).j,{originAriaLabel:r.formatMessage({id:"aiAnalytics.workflowsTable.workflow.actions.ariaLabel",defaultMessage:"More actions for agent"}),popupStore:s,render:()=>(0,A.jsx)(f().A,{menuType:h().gu.Popup,width:248,children:(0,A.jsx)(Ge().A,{type:Ge().O.Vertical,initialFocus:void 0,sections:[o]})}),useShareMenuStyles:!1})}const Je=[{id:"workflow",headerTitle:(0,A.jsx)(n().sA,{...u().pm.workflow}),renderCell:e=>e.type===Ie().T.Loading?(0,A.jsx)(Te().mf,{containerStyles:{width:200}}):(0,A.jsx)(a(111251).p,{store:e.workflowStore,rightIcon:(0,A.jsx)(Qe,{workflowId:e.workflowStore.id}),serverName:e.workflowData.name,serverIcon:e.workflowData.icon}),widthData:{widthPercent:40,minWidth:200},sortable:!1,shouldShowSortTooltip:!1},{id:"aiActions",headerTitle:(0,A.jsx)(n().sA,{...u().pm.aiActions}),renderCell:e=>e.type===Ie().T.Loading?(0,A.jsx)(Te().mf,{containerStyles:{width:100}}):(0,A.jsx)(Ce().A,{children:e.workflowData.actionCount.toLocaleString()}),widthData:{widthPercent:30,minWidth:120},sortable:!1,shouldShowSortTooltip:!1},{id:"createdBy",headerTitle:(0,A.jsx)(n().sA,{...u().pm.createdBy}),renderCell:e=>e.type===Ie().T.Loading?(0,A.jsx)(Te().mf,{containerStyles:{width:100}}):e.createdById?(0,A.jsx)(Le()._H,{userId:e.createdById,useThinTitle:!1}):void 0,widthData:{widthPercent:30,minWidth:140},sortable:!1,shouldShowSortTooltip:!1}];function Ze({spaceStore:e,workflows:t,loadMoreMethod:a,loading:i}){const o=(0,re().v3)(),r=(0,s.useMemo)((()=>(0,Me().rC)({columnRenderInfo:Je,containerMarginTop:0})),[]),l=(0,O().K8)((()=>i?(0,Ie().n)():(null==t?void 0:t.map((t=>{const a=new(He().N)(o,{table:qe().C0,id:t.workflowId,spaceId:e.id});return{id:t.workflowId,type:Ie().T.AIAnalyticsWorkflowsRow,isClickable:!1,workflowStore:a,workflowData:t,createdById:a.getCreatedById()??t.createdById}})))??[]),[t,i,o,e.id]);return(0,A.jsx)(Me().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,columnRenderInfo:Je,rows:l,renderNoRowsComponent:()=>(0,A.jsx)(ke().p,{icon:void 0,title:(0,A.jsx)(n().sA,{id:"aiAnalytics.workflowsTable.empty",defaultMessage:"No agents found"}),byline:(0,A.jsx)(n().sA,{id:"aiAnalytics.workflowsTable.empty.byline",defaultMessage:"There are no agents that match your filters"})}),styles:r,showRowBorders:!0,loadMoreMethod:a,extendToFullScreen:{rightPaddingPx:0,extendTableToFullWidthOffsetPx:0}})}function Xe({spaceStore:e,dateRange:t,surface:a,organizationId:o}){const r=(0,F().W8)(),l=(0,n().tz)(),[d,c]=(0,s.useState)(""),m=(0,z().r)({surface:a,view:"ai_workflows"}),g=[{id:"workflow",name:l.formatMessage(u().pm.workflow),type:"text"},{id:"aiActions",name:l.formatMessage(u().pm.aiActions),type:"number"}],[p,h]=(0,s.useState)(void 0),[f,v]=(0,s.useState)(),[y,x]=(0,s.useState)(!1),b=f??(p?[et(p)]:[]),{loading:S,workflows:j,loadMoreMethod:w}=function({spaceId:e,organizationId:t,dateRange:a,query:n,limit:i=10,sort:o}){const r=(0,re().v3)(),[l,d]=(0,s.useState)(void 0),[c,u]=(0,s.useState)([]);(0,s.useEffect)((()=>{d(void 0),u([])}),[e,a,n,i,o]);const[{value:m,status:g}]=(0,le().Yb)((async()=>{const s=await r.api.callApi({eventName:"getAIWorkflowsAnalytics",environment:r,data:{spaceId:e,organizationId:t,dateRange:a,sort:o,query:n,cursor:c.at(-1),limit:i}});if("success"===s.type)return d(s.data.nextCursor),s.data;if("failed"===s.type)throw s.error}),[r,e,a,n,c,i,o,t]),p=(0,s.useMemo)((()=>({type:"pages",hasPrevPage:c.length>0,hasNextPage:Boolean(l),currentPage:c.length+1,finalPage:null!=m&&m.totalCount&&i?Math.max(1,Math.ceil(m.totalCount/i)):void 0,onLoadPrevious:()=>{d(c.at(-1)),u((e=>e.slice(0,-1)))},onLoadNext:()=>{l&&(u((e=>[...e,l])),d(void 0))}})),[l,c,null==m?void 0:m.totalCount,i]);return{loading:"pending"===g,workflows:null==m?void 0:m.workflows,loadMoreMethod:p}}({spaceId:e.id,organizationId:o,dateRange:t,query:d,limit:10,sort:p}),_=(0,s.useCallback)((e=>{c(e),h(void 0),m({customization:"search_table"})}),[m]),M=(0,s.useCallback)((e=>{x(!1),v(void 0);const t=e.at(0),a=t?function(e){return{field:"aiActions"===e.propertyId?"action_count":"workflow",direction:"descending"===e.direction?"desc":"asc"}}(t):void 0;h(a),m({customization:"sort_table",sorted_by:a?a.field:void 0})}),[m]),C=(0,Ae().w)(),T=L();return r?(0,A.jsxs)("div",{style:T.container,children:[(0,A.jsxs)("div",{style:{...C.actionContainer,marginInline:0},children:[(0,A.jsx)("div",{style:C.filters,children:(0,A.jsx)(je().e,{isMenuOpen:y,setIsMenuOpen:x,sortProperties:g,onApply:M,currentSorts:b,preventMultipleSorts:!0})}),(0,A.jsxs)("div",{style:C.rightContent,children:[(0,A.jsx)(Se().x,{sortProperties:g,appliedSorts:p?[et(p)]:void 0,openSortPillMenu:e=>{e&&v([{propertyId:e,direction:"descending"}]),x(!0)}}),(0,A.jsx)(we().nv,{mode:we().Ke.AnimatedSearchButton,query:d,setQueryFilter:_})]})]}),(0,A.jsx)(i().YQ,{title:void 0,content:(0,A.jsx)(Ze,{spaceStore:e,workflows:j,loadMoreMethod:w,loading:S}),byline:void 0,fullWidth:!0})]}):null}function et(e){return{propertyId:"action_count"===e.field?"aiActions":"workflow",direction:"desc"===e.direction?"descending":"ascending"}}function tt({spaceStore:e,dateRange:t,organizationId:a,surface:s}){const o=(0,F().Zl)(),r=(0,F().W8)();return(0,A.jsxs)("div",{children:[(0,A.jsx)(i().XY,{title:(0,A.jsx)(n().sA,{id:"spaceAnalytics.aiAnalytics.aiMembers.title",defaultMessage:"AI members"}),byline:(0,A.jsx)(n().sA,{id:"spaceAnalytics.aiAnalytics.aiMembers.description",defaultMessage:"Tracks how many unique members actively use AI in the workspace"}),content:(0,A.jsx)(ye,{spaceStore:e,dateRange:t,surface:s})}),(0,A.jsx)(i().XY,{title:(0,A.jsx)(n().sA,{id:"spaceAnalytics.aiAnalytics.aiActions.title",defaultMessage:"AI actions"}),byline:(0,A.jsx)(n().sA,{id:"spaceAnalytics.aiAnalytics.aiActions.description",defaultMessage:"Tracks the total number of AI actions taken across the workspace"}),content:(0,A.jsx)(ue,{spaceStore:e,dateRange:t,surface:s})}),(0,A.jsx)(i().XY,{title:(0,A.jsx)(n().sA,{id:"spaceAnalytics.aiAnalytics.aiUsers.title.section",defaultMessage:"All workspace members"}),byline:(0,A.jsx)(n().sA,{id:"spaceAnalytics.aiAnalytics.aiUsers.description",defaultMessage:"Members and their attributed AI usage"}),content:(0,A.jsx)(Ue,{spaceStore:e,dateRange:t,surface:s,organizationId:a})}),o?(0,A.jsx)(i().XY,{title:(0,A.jsx)(n().sA,{id:"spaceAnalytics.aiAnalytics.topPages.title.section",defaultMessage:"Top AI pages"}),byline:(0,A.jsx)(n().sA,{id:"spaceAnalytics.aiAnalytics.topPages.description",defaultMessage:"Pages most frequently returned by AI responses"}),content:(0,A.jsx)(Re,{spaceStore:e,dateRange:t,surface:s,organizationId:a})}):null,r?(0,A.jsx)(i().XY,{title:(0,A.jsx)(n().sA,{id:"spaceAnalytics.aiAnalytics.customAgents.title",defaultMessage:"Custom agents"}),byline:(0,A.jsx)(n().sA,{id:"spaceAnalytics.aiAnalytics.customAgents.description",defaultMessage:"Agents created in your workspace and their AI usage"}),content:(0,A.jsx)(Xe,{spaceStore:e,dateRange:t,surface:s,organizationId:a})}):null]})}},204486:(e,t,a)=>{a.d(t,{Zy:()=>H,PD:()=>q});var s=a(296540),n=()=>a(564884),i=()=>a(664594),o=()=>a(300474),r=()=>a(907258),l=()=>a(755531),d=()=>a(484714),c=()=>a(590526),u=()=>a(401497),m=()=>a(741615),g=()=>a(148297),p=()=>a(699143),h=()=>a(249046),f=()=>a(807449),v=()=>a(265060),y=()=>a(406094),x=()=>a(493552),b=()=>a(529099),S=()=>a(86168),j=()=>a(962750),A=()=>a(483869),w=()=>a(795523),_=()=>a(706021),M=()=>a(69708),C=()=>a(100622),T=()=>a(191197),k=()=>a(209660),I=()=>a(680977),N=()=>a(843014),D=()=>a(240865),P=()=>a(300789),E=()=>a(51367),B=()=>a(547149),R=()=>a(19575),V=()=>a(991249),L=()=>a(807778),z=()=>a(528093),F=()=>a(979340),O=()=>a(803025);var U=()=>a(898255),W=a(474848);function H({currentSettingsTab:e}){const t=(0,d().v3)(),a=(0,u().IS)((()=>({aiIcon:{width:16,height:16,color:C().Tj.purple.icon.accentPrimary},buttonStyle:{display:"flex",paddingTop:0,paddingInlineEnd:12,paddingBottom:0,paddingInlineStart:10,justifyContent:"center",alignItems:"center",gap:6,borderRadius:6,border:`1px solid ${C().Tj.border.primary}`,backgroundColor:C().Tj.background.secondary},stickyContainer:{position:"sticky",bottom:0,zIndex:1,borderTop:`1px solid ${C().Tj.border.secondary}`,backgroundColor:C().Tj.background.secondary,maxHeight:"65px"}})),[]),r=(0,o().r)(),g=(0,i().T)(),h=(0,m()._3)({spaceId:r}),j=function(){const e=(0,O().q)(),t=(0,o().r)(),a=(0,m().lh)({spaceId:t}),s=(0,D().V)()??1;return"sales_eligible"===e&&(a&&(0,w().Fq)(a)&&!(0,F().sP)((0,w().AI)(a))||s>5)}(),T=(0,D().V)(),[I,E]=s.useState(!1);(0,s.useEffect)((()=>{void 0===h||I||E(!0)}),[h,I]);const B=(0,c().K8)((()=>(0,L().VJ)({memberCount:T,billingData:h,environment:t})),[T,h,t])&&"settings"!==e;(0,s.useEffect)((()=>{B&&(0,U().DW)(t)}),[B,t]);const H=(0,z()._)({name:"ai_usage",amount:"unknown",spaceId:r,userId:g}),q=function(e){return void 0!==e&&!(0,w().TB)(e)&&(0,w().Gm)(e)}(h)&&!(0,_().e2)(H)&&!["plans","billing"].includes(e),K=s.useMemo((()=>I?B?{onClick:()=>{r&&(0,n().u)({environment:t,event:{eventName:"click_refer_a_friend",eventProperties:{space_id:r}}}),k().Ow({currentTab:"settings"}),(0,P().wK)(t,["share_referral_link_notification_tooltip"])},text:(0,W.jsx)(M().sA,{id:"referralSettingsButton.cta.text",defaultMessage:"Refer a friend"}),icon:(0,W.jsx)(f().I,{icon:S().heartIcon,size:16})}:j?{onClick:()=>(0,R().lK)({openedFrom:"settings_sidebar"}),text:(0,W.jsx)(M().sA,{id:"settingsUpsellButton.contactSales",defaultMessage:"Chat with Sales"}),icon:(0,W.jsx)(v().Q,{iconGroup:A().z,colorVariant:"primary",variantName:"default"})}:void 0!==(null==H?void 0:H.upsell)&&q?{onClick:()=>{(0,V().K)(t,{from:"ai_upsell_settings",upsell:H.upsell,spaceStore:(0,l().S)()})},text:(0,W.jsx)(M().sA,{...N().D.getNotionAI}),icon:(0,W.jsx)(f().I,{icon:b().aiFaceIcon,size:"sm"})}:null:null),[I,j,q,null==H?void 0:H.upsell,t,B,r]);return K?(0,W.jsx)(p().Y1,{direction:"vertical",padding:16,align:"center-left",style:a.stickyContainer,children:(0,W.jsxs)(y().A,{size:"lg",onClick:K.onClick,style:a.buttonStyle,children:[K.icon,(0,W.jsx)(x().D,{styleKey:"bodyMedium",children:K.text})]})}):null}function q(e){const{origin:t}=e,a=(0,d().v3)(),n=(0,c().O$)(r().AppStoreCurrentUserSettingsStore);(0,s.useEffect)((()=>{n&&function(e,t){const{userSettingsStore:a}=t;B().createAndCommit({environment:e,userAction:"ShareReferralLinkNotificationTooltip.setShareReferralLinkNotificationSeenAtToCurrentTimestamp",canUndo:!0,perform:e=>{(0,I().m)({userSettingsStore:a,transaction:e,data:{share_referral_link_notification_seen_at:Date.now()}})}})}(a,{userSettingsStore:n}),T().i(a,{from:"share_referral_link_notification"})}),[a,n]),(0,s.useEffect)((()=>{E().DL(a,{callout_key:"share_referral_link_notification_tooltip",placement_key:"Tooltip"})}),[a]);const i=(0,s.useCallback)((()=>{P().a(a,"share_referral_link_notification_tooltip"),T().z(a,{from:"share_referral_link_notification"}),E().Sq(a,{callout_key:"share_referral_link_notification_tooltip",dismiss_type:"tooltip_dismiss",placement_key:"Tooltip"})}),[a]);return(0,W.jsx)(g().k,{style:{width:270},showPointer:!1,pointerOffset:8,origin:t,placementToOrigin:"bottom",alignmentToOrigin:"center",header:(0,W.jsxs)(h().wt,{gap:8,children:[(0,W.jsx)(f().I,{icon:j().heartSmallIcon,size:16}),(0,W.jsx)(M().sA,{id:"ShareReferralLinkNotificationTooltip.header",defaultMessage:"Share your unique referral link"})]}),content:(0,W.jsx)(x().D,{colorPalette:"gray",colorVariant:"inverseSecondary",children:(0,W.jsx)(M().sA,{id:"ShareReferralLinkNotificationTooltip.content",defaultMessage:"Refer 3 people to Notion this month and get the Plus plan 50% off for one year"})}),onCloseClick:i})}},205618:(e,t,a)=>{a.d(t,{A:()=>n});class s extends(()=>a(757695))().Store{getInitialState(){return{modalOpen:!1,tokenQuery:"",inviteTargets:[],inviteRole:"member",table:a(854150).yK,isFocused:!0,flowId:void 0,inputFocus:"invitee",emailMessage:""}}}const n=s},207240:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Z,getBlockExportTypeTitle:()=>X,getBlockIncludeContentsTitle:()=>ee,getCollectionViewExportTypeTitle:()=>te});a(581454);var s=a(296540),n=()=>a(755531),i=()=>a(717137),o=()=>a(726637),r=()=>a(383036),l=()=>a(484714),d=()=>a(590526),c=()=>a(991003),u=()=>a(929219),m=()=>a(249046),g=()=>a(118307),p=()=>a(31511),h=()=>a(546926),f=()=>a(631524),v=()=>a(160432),y=()=>a(493552),x=()=>a(287188),b=()=>a(302501),S=()=>a(890492),j=()=>a(81068),A=()=>a(663639),w=()=>a(736847),_=()=>a(942715),M=()=>a(148307),C=()=>a(522419),T=()=>a(72135),k=()=>a(161479),I=()=>a(96689),N=()=>a(69708),D=()=>a(100622),P=()=>a(496603),E=()=>a(890434),B=()=>a(327165),R=()=>a(103448),V=()=>a(668766),L=()=>a(656144),z=()=>a(991249),F=()=>a(643908),O=()=>a(704658),U=()=>a(908375),W=()=>a(820089),H=a(474848);const q=["pdf","html","markdown"],K=["currentView","all"],G=1;function Y(e){return e>.1&&e<2}const $=["everything","no_files"],Q=(0,N().YK)({dialogLabel:{id:"exportModal.dialogLabel",defaultMessage:"Export"},tooltipTitle:{defaultMessage:"Upgrade to export the workspace as PDFs",id:"exportModal.workspacePdfUpgradeTooltip.title"},tooltipCaption:{defaultMessage:"Creates a zip file containing all pages in the workspace as PDF files.",id:"exportModal.workspacePdfUpgradeTooltip.caption"}});function J({value:e,onChange:t}){const a=(0,N().tz)(),n=s.useCallback((e=>{const s=e.target.value,n=(0,T().sA)(s)||(0,V().q)(s,a);let i;"object"==typeof n?i="percent"===n.format?n.value:n.value/100:"number"==typeof n&&(i=n/100),void 0!==i&&t(i)}),[t,a]),[o,r]=s.useState(!1),l=s.useMemo((()=>(0,T().ZV)(Math.round(100*e),"number",a)),[e,a]);return(0,H.jsx)(i().A,{debugName:"ExportModal",capture:o,children:(0,H.jsx)(p().A,{value:l,onChange:n,onFocus:()=>r(!0),onBlur:()=>r(!1),style:{width:60},inputStyle:{textAlign:"end"}})})}const Z=function(){const e=(0,N().tz)(),t=(0,d().uB)(void 0,g().A),n=(0,d().uB)(void 0,g().A),i=(0,d().uB)(void 0,g().A),o=(0,d().uB)(void 0,g().A),r=(0,s.useCallback)((()=>(0,H.jsx)(ye,{includeContentsPopupStore:o,exportTypePopupStore:i,pdfFormatPopupStore:n,collectionViewExportTypePopupStore:t})),[o,i,n,t]),l=(0,d().K8)((()=>W().Ay.state.open),[]);return(0,H.jsx)(a(560729).A,{ariaLabel:e.formatMessage(Q.dialogLabel),onDismiss:oe,render:r,isOpen:l})};function X(e){switch(e){case"pdf":return(0,H.jsx)(N().sA,{id:"exportModal.exportFormatButton.pdf.label",defaultMessage:"PDF"});case"markdown":return(0,H.jsx)(N().sA,{id:"exportModal.exportFormatButton.markdownAndCSV.label",defaultMessage:"Markdown & CSV"});case"html":return(0,H.jsx)(N().sA,{id:"exportModal.exportFormatButton.html.label",defaultMessage:"HTML"})}}function ee(e){switch(e){case"everything":return(0,H.jsx)(N().sA,{id:"exportModal.includeContentTypes.everything.label",defaultMessage:"Everything"});case"no_files":return(0,H.jsx)(N().sA,{id:"exportModal.includeContentTypes.no_files.label",defaultMessage:"No files or images"})}}function te(e){switch(e){case"all":return(0,H.jsx)(N().sA,{id:"exportModal.includeDatabases.all.label.defaultView",defaultMessage:"Default View"});case"currentView":return(0,H.jsx)(N().sA,{id:"exportModal.includeDatabases.currentView.label",defaultMessage:"Current view"})}}function ae(e){switch(e){case"Letter":return(0,H.jsx)(N().sA,{id:"exportModal.pageFormatButton.letter.label",defaultMessage:"Letter"});case"A3":return(0,H.jsx)(N().sA,{id:"exportModal.pageFormatButton.a3.label",defaultMessage:"A3"});case"A4":return(0,H.jsx)(N().sA,{id:"exportModal.pageFormatButton.a4.label",defaultMessage:"A4"});case"Legal":return(0,H.jsx)(N().sA,{id:"exportModal.pageFormatButton.legal.label",defaultMessage:"Legal"});case"Tabloid":return(0,H.jsx)(N().sA,{id:"exportModal.pageFormatButton.tabloid.label",defaultMessage:"Tabloid"})}}function se(){const e=W().Ay.state;return e.open&&(0,W().xt)(e)?void 0===e.exportOptions.scale?G:e.exportOptions.scale:G}function ne(){return Y(se())}function ie(){return(0,H.jsx)("div",{style:{width:320,padding:24,fontSize:14,color:D().Tj.text.secondary},children:(0,H.jsx)(N().sA,{defaultMessage:"Please go online to export.",id:"exportModal.offlineMessage.description"})})}function oe(){L()._3()}function re(e){const t=W().Ay.state,a=(0,n().S)();if(t.open){if((0,W().xt)(t)&&!L().Dd(e))return void z().K(e,{from:"export_modal",upsell:{type:"product",product:"enterprise",limit:{type:"none"},trialability:"none"},spaceStore:a});L().z_(e,{...t,recursive:!t.recursive})}}function le(e){if(!ne())return;const t=W().Ay.state;t.open&&(L()._3(),void 0===t.exportOptions.flattenExportFiletree&&e.device.isWindows&&(t.exportOptions.flattenExportFiletree=!0),t.root.table===I().NX?L().P_(e,{spaceId:t.root.id,exportOptions:t.exportOptions,shouldExportComments:t.shouldExportComments}):L().UP(e,{block:{id:t.root.id,spaceId:(0,k().e)(t.root.spaceId)},recursive:t.recursive,exportOptions:t.exportOptions,shouldExportComments:t.shouldExportComments}))}function de(e,t,a,s){const i=W().Ay.state,o=i.open&&"pdf"===e&&"space"===i.root.table&&!L().Dd(s)&&"business",r=o?{type:"product",product:o,limit:{type:"none"},trialability:"none"}:void 0,l=(0,n().S)();return{key:e,action:()=>{t.close(),r?z().K(s,{from:"export_modal",upsell:r,spaceStore:l}):function(e,t,a){const s=W().Ay.state;if(!s.open)return;const{exportOptions:n}=s;if(e===n.exportType)return;let i;i="pdf"===e?{...n,exportType:"pdf",pdfFormat:L().id(t)}:{...n,exportType:e},L().z_(a,{...s,exportOptions:i})}(e,a,s)},render:t=>{const{onClick:a,key:s,...n}=t;return r?(0,H.jsx)(ce,{...t,upsell:r,exportType:e}):(0,H.jsx)(j().A,{...n,title:X(e),onClick:a})}}}function ce({onClick:e,key:t,upsell:a,exportType:i,...o}){const r=s.useRef(null),l=(0,N().tz)(),d=(0,n().S)();return(0,H.jsx)(U().c,{upsell:a,showTooltip:!0,source:"export_modal",spaceStore:d,tooltipProps:{placement:"left",content:(0,H.jsx)(R().A,{imageURL:M().A.images.tooltips.upsells.exportPdfSubpagesPng,imageWidth:240,imageHeight:100,title:l.formatMessage(Q.tooltipTitle),caption:l.formatMessage(Q.tooltipCaption)})},children:()=>(0,H.jsx)("div",{ref:r,children:(0,H.jsx)(j().A,{...o,title:X(i),right:(0,H.jsx)(O().UpgradeButton,{display:"icon",upsell:a,source:"export_modal",showPlanName:!0,iconAlignment:"right",hoverRef:r,spaceStore:d}),onClick:e})})},t)}function ue(e,t,a){return{key:e,action:()=>{t.close(),function(e,t){const a=W().Ay.state;a.open&&L().z_(t,{...a,exportOptions:{...a.exportOptions,includeContents:e}})}(e,a)},render:t=>(0,H.jsx)(j().A,{...t,title:ee(e)})}}function me(e,t,a){return{key:e,action:()=>{t.close(),function(e,t){const a=W().Ay.state;a.open&&L().z_(t,{...a,exportOptions:{...a.exportOptions,collectionViewExportType:e}})}(e,a)},render:t=>(0,H.jsx)(j().A,{...t,title:te(e)})}}function ge(e,t,a){return{key:e,action:()=>{t.close(),function(e,t){const a=W().Ay.state;a.open&&(0,W().xt)(a)&&L().z_(t,{...a,exportOptions:{...a.exportOptions,pdfFormat:e}})}(e,a)},render:t=>(0,H.jsx)(j().A,{...t,title:ae(e)})}}function pe(){const e=(0,l().v3)(),t=(0,d().K8)((()=>se()),[]),a=(0,c().A)(!0,500,100);return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",height:32},children:[(0,H.jsx)(b().A,{style:{color:D().Tj.text.tertiary},children:(0,H.jsx)(N().sA,{id:"exportModal.pageScale.description",defaultMessage:"Scale percent"})}),(0,H.jsx)(J,{value:t,onChange:t=>function(e,t){const a=W().Ay.state;a.open&&(0,W().xt)(a)&&L().z_(t,{...a,exportOptions:{...a.exportOptions,scale:e}})}(t,e)})]}),!Y(t)&&a?(0,H.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:32,padding:"4px 0"},children:(0,H.jsx)(b().A,{isSmall:!0,isMultiline:!0,style:{color:D().Tj.red.text.accentPrimary},children:(0,H.jsx)(N().sA,{id:"exportModal.pageScale.invalidScaleError",defaultMessage:"Scale percent must be a number between 10 and 200"})})}):void 0]})}function he({modalState:e,includeContentsPopupStore:t,exportTypePopupStore:a,pdfFormatPopupStore:s,collectionViewExportTypePopupStore:i}){const r=(0,l().v3)(),c=(0,d().uB)(i,g().A),u=(0,d().uB)(s,g().A),m=(0,d().uB)(a,g().A),p=(0,d().uB)(t,g().A),{currentUser:h}=r,y=(0,d().K8)((()=>(0,W().xt)(e)&&!L().Dd(r)&&"business"),[e,r]),x=r.device.isWindows,b=(0,d().K8)((()=>ne()),[]),S=(0,d().K8)((()=>te(e.exportOptions.collectionViewExportType||"currentView")),[e]),j=(0,d().K8)((()=>(0,n().S)()),[]);return(0,H.jsxs)("div",{style:{width:320,padding:24,fontSize:14},children:[(0,H.jsx)(_().A,{isMenuItem:o().A.isMobile,buttonPopupStore:m,label:(0,H.jsx)(N().sA,{id:"exportModal.exportFormat.description",defaultMessage:"Export format"}),selectedTitle:X(e.exportOptions.exportType),renderMenuSections:e=>[{key:"exportType",render:e=>(0,H.jsx)(w().A,{...e}),items:q.map((t=>de(t,e,h.id,r)))}]}),e.exportOptions.collectionViewExportType?(0,H.jsx)(_().A,{isMenuItem:o().A.isMobile,buttonPopupStore:c,label:(0,H.jsx)(N().sA,{id:"exportModal.includeDatabases.description",defaultMessage:"Include databases"}),selectedTitle:S,renderMenuSections:e=>[{key:"exportCollection",render:e=>(0,H.jsx)(w().A,{...e}),items:K.map((t=>me(t,e,r)))}]}):void 0,(0,H.jsx)(_().A,{isMenuItem:o().A.isMobile,buttonPopupStore:p,label:(0,H.jsx)(N().sA,{id:"exportModal.includeContents.description",defaultMessage:"Include content"}),selectedTitle:ee(e.exportOptions.includeContents||"everything"),renderMenuSections:e=>[{key:"includeContents",render:e=>(0,H.jsx)(w().A,{...e}),items:$.map((t=>ue(t,e,r)))}]}),(0,W().xt)(e)?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(_().A,{isMenuItem:o().A.isMobile,buttonPopupStore:u,label:(0,H.jsx)(N().sA,{id:"exportModal.pageFormat.description",defaultMessage:"Page format"}),selectedTitle:ae(e.exportOptions.pdfFormat),renderMenuSections:e=>[{key:"isoPaperFormats",render:e=>(0,H.jsx)(w().A,{...e}),items:C().yC.map((t=>ge(t,e,r)))},{key:"otherPaperFormats",render:e=>(0,H.jsx)(w().A,{topBorder:!0,...e}),items:C().hj.map((t=>ge(t,e,r)))}]}),(0,H.jsx)(pe,{})]}):void 0,"space"!==e.root.table?(0,H.jsx)(fe,{spaceStore:j,upsellTier:y,modalState:e}):void 0,(0,H.jsx)(E().A,{title:(0,H.jsx)(N().sA,{id:"exportModal.flattenExportFiletree.description",defaultMessage:"Create folders for subpages"}),subtitle:"",style:{color:D().Tj.text.tertiary,fontSize:14,display:"flex",alignItems:"center",marginInlineEnd:"auto",height:32},on:void 0===e.exportOptions.flattenExportFiletree?!x:!e.exportOptions.flattenExportFiletree,disabled:!e.recursive,onChange:()=>function(e){const t=W().Ay.state;t.open&&L().z_(e,{...t,exportOptions:{...t.exportOptions,flattenExportFiletree:!t.exportOptions.flattenExportFiletree}})}(r)}),"html"===e.exportOptions.exportType?(0,H.jsx)(E().A,{title:(0,H.jsx)(N().sA,{id:"exportModal.shouldExportComments.description",defaultMessage:"Export comments"}),subtitle:"",style:{color:D().Tj.text.tertiary,fontSize:14,display:"flex",alignItems:"center",marginInlineEnd:"auto",height:32},on:e.shouldExportComments,onChange:()=>function(e){const t=W().Ay.state;t.open&&L().z_(e,{...t,shouldExportComments:!t.shouldExportComments})}(r)}):null,(0,H.jsxs)("div",{style:{display:"flex",alignItems:"center",marginTop:16},children:[(0,H.jsx)(f().p,{colorPalette:"gray",style:{marginInlineStart:"auto",marginInlineEnd:8},onClick:oe,children:(0,H.jsx)(N().sA,{defaultMessage:"Cancel",id:"exportModal.cancelButton.label"})}),(0,H.jsx)(v().A,{colorPalette:"blue",onClick:()=>le(r),disabled:!b,children:(0,H.jsx)(N().sA,{defaultMessage:"Export",id:"exportModal.exportButton.label"})})]})]})}function fe(e){const{upsellTier:t,modalState:a,spaceStore:n}=e,i=(0,l().v3)(),o=t?{type:"product",product:t,limit:{type:"none"},trialability:"none"}:void 0,r=s.useRef(null);return(0,H.jsxs)(m().Ye,{alignItems:"center",justifyContent:"space-between",style:{height:32},children:[(0,H.jsx)(y().D,{colorVariant:"tertiary",styleKey:"body",children:(0,H.jsx)(N().sA,{defaultMessage:"Include subpages",id:"exportModal.includeSubpages.label"})}),o?(0,H.jsx)(U().c,{upsell:o,source:"export_modal",showTooltip:!0,spaceStore:n,tooltipProps:{placement:"right",showTitle:!1,showIcon:!1,maxWidth:260,content:(0,H.jsx)(R().A,{imageURL:M().A.images.tooltips.upsells.exportPdfSubpagesPng,imageWidth:240,imageHeight:100,title:(0,H.jsx)(N().sA,{defaultMessage:"Upgrade to include subpages in PDF exports",id:"exportModal.pdfSubpageUpgradeTooltip.title"}),caption:(0,H.jsx)(N().sA,{defaultMessage:"Creates a zip file containing all the pages nested inside the current page as PDF files.",id:"exportModal.pdfSubpageUpgradeTooltip.caption"})})},children:()=>(0,H.jsx)("div",{ref:r,children:(0,H.jsx)(O().UpgradeButton,{upsell:o,source:"export_modal",display:"icon",showPlanName:!0,iconAlignment:"right",hoverRef:r,spaceStore:n})})}):(0,H.jsx)(x().A,{on:a.recursive,disabled:!1,onClick:()=>re(i)})]})}function ve({modalState:e,exportTypePopupStore:t,pdfFormatPopupStore:a}){const s=(0,l().v3)(),i={menuType:h().gu.Modal,title:(0,H.jsx)(N().sA,{id:"exportModal.title",defaultMessage:"Export"}),right:(0,H.jsx)(N().sA,{id:"exportModal.closeButton.label",defaultMessage:"Close"}),onClickRight:oe},c=(0,d().K8)((()=>function(e,t,a,s){const{currentUser:i}=t,l=(0,n().S)();return P().oE([{key:"export type",render:({ref:s,...n})=>(0,H.jsx)(_().A,{...n,isMenuItem:o().A.isMobile,buttonPopupStore:a,label:(0,H.jsx)(N().sA,{defaultMessage:"Export format",id:"exportModal.exportFormat.description"}),selectedTitle:X(e.exportOptions.exportType),renderMenuSections:e=>[{key:"exportType",render:e=>(0,H.jsx)(w().A,{...e}),items:q.map((a=>de(a,e,i.id,t)))}]}),action:()=>{a.setState({open:!0})}},(0,W().xt)(e)&&{key:"pdf format",render:({ref:a,...n})=>(0,H.jsx)(_().A,{...n,isMenuItem:o().A.isMobile,buttonPopupStore:s,label:(0,H.jsx)(N().sA,{defaultMessage:"Page format",id:"exportModal.pageFormat.description"}),selectedTitle:ae(e.exportOptions.pdfFormat),renderMenuSections:e=>[{key:"isoPaperFormats",render:e=>(0,H.jsx)(w().A,{...e}),items:C().yC.map((a=>ge(a,e,t)))},{key:"otherPaperFormats",render:e=>(0,H.jsx)(w().A,{topBorder:!0,...e}),items:C().hj.map((a=>ge(a,e,t)))}]}),action:()=>{s.setState({open:!0})}},"space"!==e.root.table&&{key:"recursive",render:({onClick:a,key:s,...n})=>{const i=(0,W().xt)(e)&&!L().Dd(t)&&"business";return(0,H.jsx)(F().F,{spaceStore:l,requireUpgradeToTier:i,analyticsName:"export_modal",onClick:a,render:(t,a)=>{const s=(0,r().A)(n,t);return(0,H.jsx)(j().A,{...s,title:(0,H.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,H.jsx)(N().sA,{defaultMessage:"Include subpages",id:"exportModal.includeSubpages.label"})," ",a?(0,H.jsx)("div",{style:{marginInlineStart:8},children:a}):void 0]}),right:(0,H.jsx)(x().A,{...s,on:e.recursive,disabled:Boolean(i)})})},renderUpgradeTooltip:()=>(0,H.jsx)(R().A,{imageURL:M().A.images.tooltips.upsells.exportPdfSubpagesPng,imageWidth:240,imageHeight:100,title:(0,H.jsx)(N().sA,{defaultMessage:"Upgrade to include subpages in PDF exports",id:"exportModal.pdfSubpageUpgradeTooltip.title"}),caption:(0,H.jsx)(N().sA,{defaultMessage:"Creates a zip file containing all the pages nested inside the current page as PDF files.",id:"exportModal.pdfSubpageUpgradeTooltip.caption"})}),tooltipPlacement:"left",upgradeButtonDesktopStyle:{marginTop:2}},s)},action:()=>re(t)}])}(e,s,t,a)),[s,t,e,a]);return(0,H.jsx)(S().A,{...i,children:(0,H.jsx)(A().A,{type:A().O.Vertical,initialFocus:void 0,sections:[{key:"exportOptions",render:e=>(0,H.jsx)(w().A,{...e}),items:c},{key:"actions",render:({children:e,...t})=>(0,H.jsx)(w().A,{...t,children:e}),items:[{key:"submit",render:e=>{const{onClick:t,...a}=e;return(0,H.jsx)(B().A,{...a,onClick:t||(()=>le(s)),disabled:!ne(),title:(0,H.jsx)(N().sA,{id:"exportModal.exportButton.label",defaultMessage:"Export"})})},action:()=>le(s)}]}]})})}function ye({includeContentsPopupStore:e,exportTypePopupStore:t,pdfFormatPopupStore:a,collectionViewExportTypePopupStore:s}){const n=(0,d().O$)(u().e),i=(0,d().O$)(W().Ay);return n?i.open?o().A.isMobile?(0,H.jsx)(ve,{exportTypePopupStore:t,pdfFormatPopupStore:a,modalState:i}):(0,H.jsx)(he,{includeContentsPopupStore:e,exportTypePopupStore:t,pdfFormatPopupStore:a,collectionViewExportTypePopupStore:s,modalState:i}):null:(0,H.jsx)(ie,{})}},229907:(e,t,a)=>{a.d(t,{lT:()=>d});a(944114),a(898992),a(823215);var s=()=>a(906745),n=()=>a(720665),i=()=>a(416845);const o=7;function r(e,t){if(void 0===e)return s().DateTime.utc();const a={zone:t||"utc"};return"number"==typeof e?s().DateTime.fromMillis(e,a):s().DateTime.fromISO(e,a)}function l(e,t){const a=t?r(t):s().DateTime.utc(),n=r(e??function(e){const{days:t,endDate:a,startDate:s,timezone:n}=e;if(t<=0)throw new(i().yI4)("Days must be greater than 0");const o=r(a||void 0,n);if(!o.isValid)throw new(i().yI4)(`endDate ${a} is in an invalid format`);const l=s?r(s,n).toMillis():0,d=o.minus({days:t-1}).toMillis();return Math.max(d,l)}({days:o,endDate:t}));if(!n.isValid)throw new(i().yI4)(`startDate ${e} is in an invalid format`);if(!a.isValid)throw new(i().yI4)(`endDate ${t} is in an invalid format`);if(n>a)throw new(i().yI4)(`startDate ${e} => ${n.toISO()} is after endDate ${t} => ${a.toISO()}`);return{startTimestamp:n.toMillis(),endTimestamp:a.toMillis()}}function d(e,t){const{startTimestamp:a,endTimestamp:s}=l(e,t),i=[];let o=a;for(;o<=s;)i.push(r(o,void 0).toISODate()),o+=n().nD;return i}},230357:(e,t,a)=>{a.d(t,{A:()=>r,_:()=>l});a(581454),a(814603),a(147566),a(198721);var s=()=>a(604995),n=()=>a(348564),i=()=>a(30731);class o extends(()=>a(757695))().Store{getInitialState(){return{pageNum:1,pageSize:10,timeRange:{},actors:[],actions:[],sortOrder:n().K7.CreatedNewest,rootRequestId:void 0}}}const r=new o;function l(e){const{timeRange:t,actors:a,actions:o,sortOrder:r,rootRequestId:l}=e,d=new URLSearchParams;return t.starting&&d.append("starting",`${s().C6.toUnixMs(t.starting)}`),t.ending&&d.append("ending",`${s().C6.toUnixMs(t.ending)}`),(null==a?void 0:a.length)>0&&d.append("actors",a.map(i().Ht).join(",")),(null==o?void 0:o.length)>0&&d.append("actions",o.join(",")),d.append("sort",`${r||n().K7.CreatedNewest}`),l&&d.append("root_request_id",l),d.toString()}},258079:(e,t,a)=>{a.d(t,{X:()=>P,j:()=>D});a(944114),a(898992),a(354520),a(672577),a(581454);var s=a(296540),n=()=>a(590526),i=()=>a(401497),o=()=>a(127833),r=()=>a(30537),l=()=>a(807449),d=()=>a(546926),c=()=>a(631524),u=()=>a(160432),m=()=>a(302501),g=()=>a(890492),p=()=>a(81068),h=()=>a(663639),f=()=>a(736847),v=()=>a(452004),y=()=>a(784892),x=()=>a(737693),b=()=>a(69708),S=()=>a(100622),j=()=>a(534177),A=()=>a(56394),w=()=>a(484595),_=()=>a(881690),M=()=>a(297780),C=()=>a(957606),T=()=>a(385226),k=()=>a(898808),I=a(474848);const N=(0,b().YK)({placeholder:{id:"adminContentSearchTab.pagesTable.filters.teams.placeholder",defaultMessage:"Search for teamspaces..."}});function D({selectedTeamIds:e,setSelectedTeamIds:t,onMenuClose:a,teamStores:D}){const E=(0,b().tz)(),B=(0,n().uB)(void 0,v().$),R=(0,i().IS)((()=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center"},optionAvatar:{marginInlineEnd:4},pillContainer:{marginTop:0,marginInlineEnd:6,marginBottom:6,marginInlineStart:0,background:S().Tj.legacyDefaultSelectColor,height:20},pillContents:{display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:4},pillText:{marginInlineStart:4},container:{padding:"6px 0 6px"},input:{margin:"4px auto",width:"95%"},footer:{paddingTop:8,paddingInlineEnd:8,paddingBottom:2,paddingInlineStart:8,justifyContent:"space-between",display:"flex",flexDirection:"row"},icon:{width:16,fill:"currentColor"},teamIcon:{marginInlineEnd:8},optionTitle:{display:"block"},noResultsMessage:{width:"100%",margin:"8px 12px"},optionCaption:{display:"block",color:S().Tj.text.secondary,fontSize:12,lineHeight:"15px"}})),[]),[V,L]=(0,s.useState)(!1),[z,F]=(0,s.useState)(""),O=(0,n().K8)((()=>[...D].sort(C().XE)),[D]),U=(0,n().K8)((()=>e.map((e=>D.find((t=>t.id===e)))).filter(j().O9)),[D,e]);function W(){L(!1),F(""),a()}function H(){F(""),t([])}function q(a){const s=e.includes(a)?[]:[a];t(s),F("")}const K=(0,s.useCallback)((e=>{F(e.target.value)}),[]),G=(0,n().K8)((()=>U.map((a=>{const s=a.getName();return(0,I.jsx)(_().A,{isSingle:!0,format:y().NY.Inline,showRemoveButton:!0,onClickRemove:()=>{const s=e.filter((e=>e!==a.id));t(s)},style:R.pillContainer,value:(0,I.jsxs)("div",{style:R.pillContents,children:[(0,I.jsx)(k().x,{disabled:!0,store:a,size:16}),(0,I.jsx)(m().A,{style:R.pillText,children:s})]})},a.id)}))),[U,e,t,R]);const Y=(0,I.jsx)(A().A,{on:e.length>0,icon:(0,I.jsx)(l().I,{icon:x().V}),title:(0,I.jsx)(b().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.title",defaultMessage:"Teamspace"}),onClick:()=>L(!0)});return(0,I.jsx)(T().A,{children:(0,I.jsx)(o().zD,{popupType:r().n.Popup,placementToOrigin:"bottom",alignmentToOrigin:"start",open:V,render:function(){const t=[];for(const n of O){const a=n.getName(),s=n.getTeamAccessLevel(),i=n.isDefault();a&&a.toLocaleLowerCase().includes(z)&&t.push({key:n.id,action:()=>q(n.id),render:t=>(0,I.jsx)(p().A,{...t,icon:(0,I.jsx)(w().A,{isSelected:e.includes(n.id)}),focused:!1,title:(0,I.jsxs)("div",{style:R.optionContainer,children:[(0,I.jsx)(k().x,{disabled:!0,store:n,size:24,style:R.teamIcon}),(0,I.jsxs)("div",{style:{paddingTop:4,paddingBottom:4},children:[(0,I.jsx)(m().A,{style:R.optionTitle,children:a}),(0,I.jsx)(m().A,{style:R.optionCaption,children:P(s,i)})]})]})})})}const a={key:"no-results",action:()=>{},render:e=>(0,I.jsx)(m().A,{isSecondaryColor:!0,style:R.noResultsMessage,...e,children:(0,I.jsx)(b().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.noResultsMessage",defaultMessage:"No results found"})})},s={key:"teamOptions",items:t.length>0?t:[a],render:e=>(0,I.jsx)(f().A,{...e,title:null,loading:!1})};return(0,I.jsxs)("div",{style:R.container,children:[(0,I.jsx)(M().A,{focus:!0,value:z,style:R.input,placeholder:E.formatMessage(N.placeholder),onChange:K,onRemoveLastToken:H,tokens:G}),(0,I.jsx)(g().A,{menuType:d().gu.Popup,header:null,maxHeight:250,width:300,children:(0,I.jsx)(h().A,{type:h().O.Vertical,store:B,initialFocus:0,sections:[s]})}),(0,I.jsxs)(f().A,{topBorder:!0,style:R.footer,children:[(0,I.jsx)(c().p,{onClick:H,children:(0,I.jsx)(b().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.clearButton",defaultMessage:"Clear"})}),(0,I.jsx)(u().A,{colorPalette:"blue",onClick:W,children:(0,I.jsx)(b().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.doneButton",defaultMessage:"Done"})})]})]})},onDismiss:W,keepFocus:!0,origin:Y,preventScaleTransition:!0})})}function P(e,t){if(t)return(0,I.jsx)(b().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.default",defaultMessage:"Default"});switch(e){case"private":return(0,I.jsx)(b().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.private",defaultMessage:"Private"});case"closed":return(0,I.jsx)(b().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.closed",defaultMessage:"Closed"});case"open":return(0,I.jsx)(b().sA,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.open",defaultMessage:"Open"});default:(0,j().HB)(e)}}},264154:(e,t,a)=>{a.d(t,{l:()=>s});const s=(0,a(340498).xh)("arrowChevronSingleDown",{default:{loader:()=>a.e(95737).then(a.bind(a,803960))},small:{loader:()=>a.e(95737).then(a.bind(a,324254))},fill:{loader:()=>a.e(95737).then(a.bind(a,626466))},fillSmall:{loader:()=>a.e(95737).then(a.bind(a,854705))}},["chevron","down","arrow","direction","downward"])},274800:(e,t,a)=>{a.d(t,{Q:()=>C,k:()=>T});a(898992),a(672577),a(581454);var s=a(296540),n=()=>a(590526),i=()=>a(401497),o=()=>a(74351),r=()=>a(98126),l=()=>a(940148),d=()=>a(302501),c=()=>a(798880),u=()=>a(301608),m=()=>a(69708),g=()=>a(625383),p=()=>a(515153),h=()=>a(698385),f=()=>a(444179),v=a(474848);const y=(0,m().YK)({views:{id:"workspaceAnalytics.contentTab.contentTable.viewsColumn.tooltip",defaultMessage:"Number of times users have viewed the page"},uniqueViews:{id:"workspaceAnalytics.contentTab.contentTable.uniqueViewsColumn.tooltip",defaultMessage:"Total number of users that have viewed page in the selected period"}}),x={id:"page",headerTitle:(0,v.jsx)(T,{message:u().bo.page}),renderCell:e=>(0,v.jsx)(a(860864).EB,{store:e.navigableBlockStore,rightIcon:(0,v.jsx)(a(126061).r,{blockStore:e.navigableBlockStore})}),widthData:{width:320,maxWidth:320},sortable:!1},b={id:"location",headerTitle:(0,v.jsx)(m().sA,{id:"settings.workspaceAnalytics.contentTab.allPages.table.location.name",defaultMessage:"Location"}),renderCell:e=>(0,v.jsx)(a(803662).E,{blockStore:e.navigableBlockStore,teamStore:e.teamStore}),widthData:{width:140},sortable:!1},S={id:"audience",headerTitle:(0,v.jsx)(T,{message:u().bo.audience}),renderCell:e=>(0,v.jsx)(d().A,{children:(0,a(638597).Z)(e.audience)}),widthData:{width:140},sortable:!1},j={id:"views",headerTitle:(0,v.jsx)(f().Z,{tooltipMessageDescriptor:y.views,columnHeader:u().bo.allViews}),renderCell:e=>(0,v.jsx)(d().A,{children:e.views.toLocaleString()}),widthData:{width:100},sortable:!0},A={id:"uniqueViews",headerTitle:(0,v.jsx)(f().Z,{tooltipMessageDescriptor:y.uniqueViews,columnHeader:u().bo.uniqueViews}),renderCell:e=>(0,v.jsx)(d().A,{children:e.uniqueViews.toLocaleString()}),widthData:{width:100},sortable:!0},w={id:"createdBy",headerTitle:(0,v.jsx)(T,{message:u().bo.createdBy}),renderCell:e=>e.createdById?(0,v.jsx)(h().T,{store:e.navigableBlockStore,actorPointers:e.createdById?[{table:c().oo,id:e.createdById}]:[]}):null,widthData:{width:140},sortable:!1},_={id:"createdTime",headerTitle:(0,v.jsx)(T,{message:u().bo.createdAt}),renderCell:e=>e.createdTime?(0,v.jsx)(g().d,{dateTs:e.createdTime}):null,widthData:{width:100},sortable:!1},M=[x,j,A,b,S,{id:"lastEditedBy",headerTitle:(0,v.jsx)(T,{message:u().bo.lastEditedBy}),renderCell:e=>e.lastEditedById?(0,v.jsx)(h().T,{store:e.navigableBlockStore,actorPointers:e.lastEditedById?[{table:c().oo,id:e.lastEditedById}]:[]}):null,widthData:{width:140},sortable:!1},{id:"lastEditedTime",headerTitle:(0,v.jsx)(T,{message:u().bo.lastEditedAt}),renderCell:e=>e.lastEditedTime?(0,v.jsx)(g().d,{dateTs:e.lastEditedTime}):null,widthData:{width:100},sortable:!1},w,_];function C({navigableBlockStores:e,analyticsByPageId:t,runNewSearch:a,sort:c,setSort:u,loadNextPage:g,loading:h,error:f}){const y=(0,n().K8)((()=>e.map((e=>{var a,s,n;return{id:e.id,isClickable:!1,navigableBlockStore:e,teamStore:(0,o().U)(e),views:(null===(a=t.get(e.id))||void 0===a?void 0:a.pageViews)||0,uniqueViews:(null===(s=t.get(e.id))||void 0===s?void 0:s.uniquePageViews)||0,createdTime:e.canRead()?e.getCreatedTime():void 0,lastEditedTime:e.canRead()?e.getLastEditedTime():void 0,createdById:e.getCreatedById(),lastEditedById:e.getLastEditedById(),audience:(null===(n=t.get(e.id))||void 0===n?void 0:n.audience)||"private"}}))),[e,t]),x=(0,s.useMemo)((()=>function(e){const t=M.find((t=>"pageViews"===e.field&&"views"===t.id||"uniquePageViews"===e.field&&"uniqueViews"===t.id)),a=t?{column:t,sortAscending:"asc"===e.direction}:void 0;return a}(c)),[c]),b=(0,s.useMemo)((()=>(0,l().rC)({columnRenderInfo:M,containerMarginTop:0})),[]),S=(0,i().IS)((()=>({emptyQuery:{marginTop:15,marginBottom:40,textAlign:"center"},loadingSpinner:{margin:"24px auto 24px"}})),[]);return f?(0,v.jsx)(p().t,{error:f,runNewSearch:a}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(l().WE,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:500,columnRenderInfo:M,rows:y,sortState:x,onSortStateChanged:e=>{u(function(e){const t="views"===e.column.id?"pageViews":"uniquePageViews",a=e.sortAscending?"asc":"desc";return{field:t,direction:a}}(e))},loadMoreMethod:{type:"scroll",onLoadMore:g},renderNoRowsComponent:()=>(0,v.jsx)(d().A,{isSmall:!0,style:S.emptyQuery,children:h||0!==e.length?void 0:(0,v.jsx)(m().sA,{id:"settings.workspaceAnalytics.contentTab.allPages.table.empty",defaultMessage:"No pages found with your query."})}),styles:b}),h?(0,v.jsx)(r().A,{style:S.loadingSpinner}):null]})}function T({message:e}){const t=(0,m().tz)();return(0,v.jsx)(v.Fragment,{children:t.formatMessage(e)})}},278223:(e,t,a)=>{a.d(t,{E:()=>i});var s=()=>a(706024),n=()=>a(17981);async function i(e){const{environment:t,spaceStore:a,spaceBasicSettingsStore:i,securitySettingsStore:o}=e,{name:r,emailDomains:l}=i.state;await Promise.all([(0,n().Y)({environment:t,spaceStore:a,name:r,emailDomains:l}),o?s().V(t,{spaceStore:a,securitySettingsState:o.state}):Promise.resolve()])}},284230:(e,t,a)=>{a.d(t,{A:()=>D});a(18107),a(944114),a(967357),a(898992),a(354520),a(581454),a(908872),a(737550);var s=a(296540),n=()=>a(726637),i=()=>a(484714),o=()=>a(590526),r=()=>a(401497),l=()=>a(127833),d=()=>a(30537),c=()=>a(546926),u=()=>a(160432),m=()=>a(352321),g=()=>a(26697),p=()=>a(890492),h=()=>a(663639),f=()=>a(736847),v=()=>a(784892),y=()=>a(69708),x=()=>a(100622),b=()=>a(778078),S=()=>a(496603);function j(e,t){return{state:t,metadata:e}}class A extends(()=>a(757695))().Store{getInitialState(){return{showAutoCompletePopup:!1,defaultTeams:{}}}addedAndCurrentTeams(){return Object.values(this.state.defaultTeams).filter((({state:e})=>"current-default"===e||"add-default"===e))}addedTeams(){return Object.values(this.state.defaultTeams).filter((({state:e})=>"add-default"===e))}removedTeams(){return Object.values(this.state.defaultTeams).filter((({state:e})=>"remove-default"===e))}}const w=new A;function _({teamMetadata:e}){var t;return null===(t=w.state.defaultTeams[e.id])||void 0===t?void 0:t.state}function M(e,t){const a=w.state,s={...a.defaultTeams};t?s[e.id]=j(e,t):delete s[e.id],w.setState({...a,defaultTeams:s})}var C=()=>a(852711),T=()=>a(881690),k=()=>a(51781),I=()=>a(898808),N=a(474848);function D({immediateUpdate:e,spaceStore:t,onUpdate:a,tokenStyle:v,headerStyle:A,unarchivedTeamsMetadata:T,description:I,isOrgOwner:D}){const V=(0,y().tz)(),L=(0,i().v3)(),[z,F]=(0,s.useState)(!1),O=(0,o().uB)(w),[U,W]=(0,s.useState)(""),H=(0,o().K8)((()=>O.addedTeams()),[O]),q=(0,o().K8)((()=>O.removedTeams()),[O]),K=(0,o().K8)((()=>O.addedAndCurrentTeams()),[O]),G=(0,o().K8)((()=>T.reduce(((e,t)=>(e[t.id]=t.title,e)),{})),[T]),Y=(0,s.useMemo)((()=>T.filter((e=>e.isDefaultTeam))),[T]);(0,s.useEffect)((()=>{!function(e){const t=w.state,a=e.reduce(((e,t)=>(e[t.id]=j(t,"current-default"),e)),{});w.setState({...t,defaultTeams:a})}(Y)}),[Y]);let $=null;0===T.length?$=(0,N.jsx)(y().sA,{id:"teamsWorkspaceSettings.defaultTeams.updateButton.noUnarchivedTeamsExist",defaultMessage:"Create your first teamspace to set a default"}):0===H.length&&0===q.length?$=(0,N.jsx)(y().sA,{id:"teamsWorkspaceSettings.defaultTeams.updateButton.noChangesToExistingDefaultTeams",defaultMessage:"Current selection already matches existing default teams"}):0===K.length&&($=(0,N.jsx)(y().sA,{id:"teamsWorkspaceSettings.defaultTeams.updateButton.atLeastOneDefaultTeamMustBeSelected",defaultMessage:"At least one default team must be selected"}));const Q=e=>{F(!0),a({addedTeams:e.addedTeams,removedTeams:e.removedTeams}),F(!1)},J=t=>{!function({teamMetadata:e}){M(e,"add-default"===_({teamMetadata:e})?null:"remove-default")}({teamMetadata:t}),e&&Q({addedTeams:[],removedTeams:[j(t,"remove-default")]})},Z=t=>{!function({teamMetadata:e}){M(e,"remove-default"===_({teamMetadata:e})?"current-default":"add-default")}({teamMetadata:t}),O.update((e=>({...e,showAutoCompletePopup:!1}))),e&&Q({addedTeams:[j(t,"add-default")],removedTeams:[]}),W("")},X=L.currentUser.id,ee=(0,o().K8)((()=>X?T.filter((e=>{if(K.some((t=>t.metadata.id===e.id)))return!1;if("open"!==e.accessLevel)return!1;if(D)return!0;return(0,k().getTeamStore)({teamId:e.id,spaceStore:t}).canAdmin()})):[]),[X,T,D,K,t]),te=(0,b().Ay)(U,ee,(e=>G[e.id]??"")),ae=[];te.length>0&&U.length>0&&ae.push({key:"default-teams-list",render:e=>(0,N.jsx)(f().A,{...e,title:(0,N.jsx)(y().sA,{id:"defaultTeamsInput.defaultTeamList.title",defaultMessage:"Teamspaces"}),loading:!1}),items:te.map((e=>({key:e.id,render:a=>(0,N.jsx)(C().A,{...a,teamStore:(0,k().getTeamStore)({teamId:e.id,spaceStore:t})}),action:()=>Z(e)})))});const se=(0,o().K8)((()=>O.state.showAutoCompletePopup&&ae.length>0),[O,ae.length]),ne=(0,r().IS)((()=>({defaultTeamsHeader:{fontSize:14,marginBottom:2,...A},inputAndButtonContainer:{paddingTop:12,display:"flex"},inputContainer:{flexGrow:1},tokenInputMenu:{borderRadius:se?B:E,margin:0},menuList:{maxHeight:300,border:`1px solid ${x().Tj.border.secondaryTranslucent}`,borderTop:0,borderRadius:R},updateButton:{marginInlineStart:10,height:35}})),[se,A]);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{style:ne.defaultTeamsHeader,children:(0,N.jsx)(y().sA,{id:"teamsWorkspaceSettings.defaultTeams.title",defaultMessage:"Default teamspaces"})}),I,(0,N.jsxs)("div",{style:ne.inputAndButtonContainer,children:[(0,N.jsx)("div",{style:ne.inputContainer,children:(0,N.jsx)(l().zD,{popupType:d().n.Popup,placementToOrigin:"bottom",sameWidthAsOrigin:!0,open:se,borderRadius:R,onDismiss:()=>O.update((e=>({...e,showAutoCompletePopup:!1}))),origin:(0,N.jsx)(m().Ay,{disabled:z||0===T.length,style:ne.tokenInputMenu,focusInitial:n().A.isMobile,focusAfterAnimation:!0,format:m().le.Share,inputDivStyle:{alignItems:"center"},value:U,onChange:e=>{O.update((e=>({...e,showAutoCompletePopup:!0}))),W(e.target.value)},type:"default-teams",tokens:K.map((e=>(0,N.jsx)(P,{teamMetadata:e.metadata,onClickRemove:J,style:v,hideRemoveButton:1===K.length,spaceStore:t},e.metadata.id))),placeholder:V.formatMessage({id:"teamsWorkspaceSettings.defaultTeams.inputPlaceholder",defaultMessage:"Select a default teamspace..."}),onRemoveLastToken:()=>{const e=K.at(-1);e&&J(e.metadata)},onEmptySubmit:S().D_,showBorder:!0}),render:()=>(0,N.jsx)(p().A,{menuType:c().gu.Popup,tokenInputHeader:!0,disableHeaderBorder:!0,children:(0,N.jsx)("div",{style:ne.menuList,children:(0,N.jsx)(h().A,{type:h().O.Vertical,initialFocus:0,sections:ae})})}),trapFocus:!1})}),e?void 0:(0,N.jsx)(g().m,{placement:"top",alignment:"center",disableTooltip:null===$,renderTooltip:()=>$,style:{width:180},textWrap:!0,render:e=>(0,N.jsx)(u().A,{colorPalette:"blue",...e,style:ne.updateButton,disabled:null!==$||z,size:"lg",onClick:()=>Q({addedTeams:H,removedTeams:q}),children:(0,N.jsx)(y().sA,{id:"teamsWorkspaceSettings.updateButton.label.2",defaultMessage:"Update"})})})]})]})}function P(e){const{teamMetadata:t,onClickRemove:a,style:s,hideRemoveButton:i,spaceStore:r}=e,l=(0,o().K8)((()=>t.title),[t]);return(0,N.jsx)(T().A,{showRemoveButton:!i,isSingle:!1,format:n().A.isMobile?v().NY.Large:v().NY.Medium,style:{marginInlineStart:6,...s},onClickRemove:()=>a(t),value:(0,N.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,N.jsx)(I().x,{disabled:!0,teamMetadata:t,size:14,style:{marginInlineEnd:4},parentSpaceStore:r}),l]})})}const E=3,B=`${E}px ${E}px 0 0`,R=`0 0 ${E}px ${E}px`},284331:(e,t,a)=>{a.d(t,{A:()=>E});a(898992),a(354520),a(581454),a(737550);var s=a(296540),n=()=>a(692031),i=()=>a(212497),o=()=>a(484714),r=()=>a(590526),l=()=>a(401497),d=()=>a(128933),c=()=>a(98126),u=()=>a(406094),m=()=>a(631524),g=()=>a(160432),p=()=>a(26697),h=()=>a(302501),f=()=>a(742852),v=()=>a(703778),y=()=>a(69708),x=()=>a(284371),b=()=>a(946141),S=()=>a(542056),j=()=>a(79926);const A=new(j().O2)("teamPermissionsInvite",(async()=>await Promise.all([a.e(75134),a.e(35530),a.e(9773),a.e(36556),a.e(55373),a.e(36192),a.e(40537),a.e(71562),a.e(96346),a.e(44711),a.e(53321),a.e(51220),a.e(16471),a.e(37353),a.e(37571),a.e(29151),a.e(40118),a.e(50397),a.e(62475),a.e(3151),a.e(98629),a.e(22926),a.e(22900),a.e(42838),a.e(85128),a.e(49889),a.e(20108),a.e(46174),a.e(27992),a.e(63452),a.e(66249),a.e(92845),a.e(87249),a.e(79022),a.e(44854),a.e(34877),a.e(46414),a.e(11676),a.e(61165),a.e(47668),a.e(94522),a.e(44584),a.e(24587),a.e(67494),a.e(3651),a.e(38293),a.e(40992),a.e(88455),a.e(64556),a.e(33893),a.e(91793),a.e(55162),a.e(71003),a.e(32370),a.e(26264),a.e(36437),a.e(50363),a.e(42660),a.e(44590),a.e(55113),a.e(85071),a.e(7914),a.e(25588),a.e(68637),a.e(23640),a.e(72252),a.e(93134),a.e(12452),a.e(52871),a.e(29351),a.e(18825),a.e(71853),a.e(93049),a.e(22582),a.e(18636),a.e(87289),a.e(16060),a.e(34281),a.e(48376),a.e(35279),a.e(80229),a.e(77754),a.e(71309),a.e(74562),a.e(39986),a.e(47431),a.e(47160),a.e(76677),a.e(68609),a.e(37384),a.e(15553),a.e(77345),a.e(67720),a.e(37759),a.e(41423),a.e(13955),a.e(42056),a.e(14699),a.e(57924),a.e(5181),a.e(3261),a.e(19456),a.e(17729),a.e(45147),a.e(65375),a.e(32116),a.e(94995),a.e(98339),a.e(51240),a.e(82641),a.e(20029),a.e(68395),a.e(81803),a.e(96654),a.e(68643),a.e(32625),a.e(63687),a.e(95885),a.e(27083),a.e(78999),a.e(11424),a.e(40119),a.e(54742),a.e(38946),a.e(90880),a.e(49175),a.e(8852),a.e(5331),a.e(92924),a.e(71381),a.e(1947),a.e(96385),a.e(80326),a.e(53352),a.e(2373),a.e(5315),a.e(995),a.e(76690),a.e(60713),a.e(31106),a.e(63248),a.e(54719),a.e(48570),a.e(78862),a.e(54234),a.e(85160),a.e(15381),a.e(50525),a.e(15922),a.e(77651),a.e(51204),a.e(34974),a.e(58672),a.e(95103),a.e(58071),a.e(75681)]).then(a.bind(a,500844)))),w=(0,j()._h)(A,(e=>e.TeamPermissionsInvite));var _=()=>a(47373),M=()=>a(743260),C=()=>a(957606),T=()=>a(406999),k=a(474848);const I={button:{height:32},multiButtonContainer:{width:"100%",paddingTop:12,display:"flex",justifyContent:"space-between"},singleButtonContainer:{width:"100%",paddingTop:12,display:"flex",justifyContent:"right"},containerLeftAligned:{display:"flex",alignItems:"left",justifyContent:"left",flexDirection:"column",userSelect:"none",WebkitUserSelect:"none",width:"100%"},titleAndIcon:{paddingBottom:18,alignItems:"center",display:"flex"},addMembersTo:{minWidth:"25%"},icon:{paddingInlineEnd:3,paddingInlineStart:3},teamName:{paddingInlineEnd:10,fontWeight:x().Wy.medium,...x().RC,maxWidth:250},full:{width:"100%"},inviteInput:{zIndex:1},submitTooltip:{minWidth:250},subtitle:{paddingTop:16,position:"relative",zIndex:-1}};function N({isLoading:e,isNewlyCreatedTeam:t,onDismiss:a,onSubmit:s,inviteTargets:n,inviteRole:i,canEditSpaceMembership:o,membershipRequestsDisabled:l,spaceAllowedDomains:d,hasTeamGuestsMatchAllowedDomain:m,restrictedMembersDisabled:h}){var f;const v=n.length>0,x=n.filter((e=>(0,M().yi)(e))).length,b=(0,r().K8)((()=>n.some(M().dV)),[n]),S=(0,r().K8)((()=>"owner"===i&&!(0,C().TI)()),[i]),j=b&&(h||S),A=x>0&&l&&!o,w=(0,r().K8)((()=>(0,_().Qd)()&&"team_level_guest"===i&&n.some((e=>"group"===e.type||"existingUser"===e.type&&"none"!==e.membershipType&&"page_guest"!==e.membershipType))),[i,n]),T=w||A||m||j;if(e)return(0,k.jsx)(g().A,{colorPalette:"blue",style:{...I.button,minWidth:80},disabled:!0,children:(0,k.jsx)(c().A,{onDarkBackground:!0})});if(t&&!v)return(0,k.jsx)(u().A,{size:"lg",style:I.button,onClick:a,disabled:e,children:(0,k.jsx)(y().sA,{id:"teamPermissionsInviteOverlay.inviteModal.skipForNow",defaultMessage:"Skip for now"})});const N=h?(0,k.jsx)(y().sA,{id:"teamPermissionsInviteOverlay.inviteModal.addRestrictedMembers",defaultMessage:"Cannot add restricted members as teamspace members. Remove them to continue."}):(0,k.jsx)(y().sA,{id:"teamPermissionsInviteOverlay.inviteModal.addRestrictedMembersAsOwner",defaultMessage:"Cannot add restricted members as teamspace owners. Remove them or add them as members instead."}),D=w?(0,k.jsx)(y().sA,{id:"teamPermissionsInviteOverlay.inviteModal.addNMembers.memberOrGroupInvitedAsTeamGuestTooltip",defaultMessage:"Cannot add space members or groups as teamspace guests. Remove them to continue."}):m?(0,k.jsx)(y().sA,{id:"teamPermissionsInviteOverlay.inviteModal.addNMembers.hasTeamGuestsMatchAllowedDomain",defaultMessage:"Cannot add users with {emailDomains} as teamspace guests. Remove them to continue.",values:{emailDomains:null==d||null===(f=d.map((e=>`@${e}`)))||void 0===f?void 0:f.join(", ")}}):j?N:null;return(0,k.jsx)(p().m,{textWrap:!0,style:I.submitTooltip,disableTooltip:!D,renderTooltip:()=>D,render:t=>(0,k.jsx)(g().A,{colorPalette:"blue",style:I.button,onClick:s,disabled:!v||e||T,...t,children:(0,k.jsx)(y().sA,{id:"teamPermissionsInviteOverlayV2.inviteButton.label",defaultMessage:"Invite"})})})}function D({inviteTargets:e,workspaceName:t,canEditSpaceMembership:a,membershipRequestsDisabled:s,isFreeTier:n,inviteRole:i,hasTeamGuestsMatchAllowedDomain:o,restrictedMembersDisabled:l,restrictedMembersDisabledForTeam:d}){const c=(0,r().K8)((()=>e.some(M().dV)),[e]),u=(0,r().K8)((()=>(0,C().TI)()),[]);if(void 0===a)return null;if(!e||0===e.length)return null;const m=e.filter(T().eL).filter(M().yi).map((e=>e.value.email));if(c){if(l)return d?(0,k.jsx)(h().A,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:(0,k.jsx)(y().sA,{id:"TeamPermissionsInviteOverlayV2.restrictedMembersDisabledForTeam.subtitle",defaultMessage:"Restricted members cannot be added to this teamspace."})}):(0,k.jsx)(h().A,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:(0,k.jsx)(y().sA,{id:"TeamPermissionsInviteOverlayV2.restrictedMembersDisabled.subtitle",defaultMessage:"You do not have permission to add restricted members to this teamspace."})});if("owner"===i&&!u)return(0,k.jsx)(h().A,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:(0,k.jsx)(y().sA,{id:"TeamPermissionsInviteOverlayV2.restrictedMemberAsOwner.subtitle",defaultMessage:"Restricted members cannot be added as teamspace owners."})})}if(!m||0===m.length)return null;const g=e=>(0,k.jsx)("b",{children:e}),p=t??"this workspace";return a?n?(0,k.jsx)(h().A,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:1===m.length?(0,k.jsx)(y().sA,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipSingularOwner.subtitle",defaultMessage:"<b>{guestEmail}</b> will be added to {workspaceName} as a workspace owner.",values:{guestEmail:m[0],workspaceName:p,b:g}}):(0,k.jsx)(y().sA,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipPluralOwners.subtitle",defaultMessage:"<b>{numberOfOtherEmails, plural, one {{firstGuest} and {secondGuest}} other {{firstGuest} and {numberOfOtherEmails} more}}</b> will be added to {workspaceName} as workspace owners.",values:{firstGuest:m[0],secondGuest:m[1],numberOfOtherEmails:m.length-1,workspaceName:p,b:g}})}):"team_level_guest"===i?o?null:(0,k.jsx)(h().A,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:1===m.length?(0,k.jsx)(y().sA,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipSingular.teamGuest.subtitle",defaultMessage:"<b>{guestEmail}</b> will be added to {workspaceName} as a billed teamspace guest.",values:{guestEmail:m[0],workspaceName:p,b:g}}):(0,k.jsx)(y().sA,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipPlural.teamGuest.subtitle",defaultMessage:"<b>{numberOfOtherEmails, plural, one {{firstGuest} and {secondGuest}} other {{firstGuest} and {numberOfOtherEmails} more}}</b> will be added to {workspaceName} as billed teamspace guests.",values:{firstGuest:m[0],secondGuest:m[1],numberOfOtherEmails:m.length-1,workspaceName:p,b:g}})}):(0,k.jsx)(h().A,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:1===m.length?(0,k.jsx)(y().sA,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipSingular.subtitle",defaultMessage:"<b>{guestEmail}</b> will be added to {workspaceName} as a billed workspace member.",values:{guestEmail:m[0],workspaceName:p,b:g}}):(0,k.jsx)(y().sA,{id:"TeamPermissionsInviteOverlayV2.addSpaceMembershipPlural.subtitle",defaultMessage:"<b>{numberOfOtherEmails, plural, one {{firstGuest} and {secondGuest}} other {{firstGuest} and {numberOfOtherEmails} more}}</b> will be added to {workspaceName} as billed workspace members.",values:{firstGuest:m[0],secondGuest:m[1],numberOfOtherEmails:m.length-1,workspaceName:p,b:g}})}):s?(0,k.jsx)(h().A,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:(0,k.jsx)(y().sA,{id:"TeamPermissionsInviteOverlayV2.requestSpaceMembershipDisabled.subtitle",defaultMessage:"You can’t add workspace guests to a teamspace. Ask your admin to add them as workspace members first."})}):(0,k.jsx)(h().A,{isSecondaryColor:!0,isMultiline:!0,isSmall:!0,children:1===m.length?(0,k.jsx)(y().sA,{id:"TeamPermissionsInviteOverlayV2.requestSpaceMembershipSingular.subtitle",defaultMessage:"Request will be sent to your admin to add <b>{guestEmail}</b> as a member to {workspaceName}.",values:{guestEmail:m[0],workspaceName:p,b:g}}):(0,k.jsx)(y().sA,{id:"TeamPermissionsInviteOverlayV2.requestSpaceMembershipPlural.subtitle",defaultMessage:"Request will be sent to your admin to add <b>{numberOfOtherEmails, plural, one {{firstGuest} and {secondGuest}} other {{firstGuest} and {numberOfOtherEmails} more}}</b> as members to {workspaceName}.",values:{firstGuest:m[0],secondGuest:m[1],numberOfOtherEmails:m.length-1,workspaceName:p,b:g}})})}function P(e){const{teamStore:t,isSmall:a}=e,s=(0,o().v3)(),r=(0,l().IS)((()=>({button:{marginInlineEnd:5,marginInlineStart:5,height:32,fontSize:a?12:14}})),[a]);return(0,k.jsx)(m().p,{onClick:async()=>{const[e,a]=await Promise.all([(0,n().r)(),(0,i().jd)()]);a({environment:s,stringValue:(0,C().TP)(t.id),copiedMessage:e.copiedLinkToClipboard}),b().lY(s,{store:t})},iconLeading:a?{icon:v().linkSmallIcon,size:"sm"}:f().linkIcon,style:r.button,colorPalette:"blue",children:a?(0,k.jsx)(y().sA,{id:"teamPermissionsInviteOverlay.copyLinkCondensedButton.label",defaultMessage:"Copy link"}):(0,k.jsx)(y().sA,{id:"teamPermissionsInviteOverlay.copyLinkButton.label",defaultMessage:"Copy invite link"})})}const E=function({teamStore:e,permissionsInviteStore:t,isNewlyCreatedTeam:n,onSubmitSuccessful:i,onDismiss:l}){const c=(0,o().v3)(),{teamName:u,workspaceName:m,canEditSpaceMembership:g,membershipRequestsDisabled:p,spaceAllowedDomains:h,restrictedMembersDisabledForTeam:f}=(0,r().K8)((()=>{const{sidebarSpaceStore:t}=a(907258).default.state;return{teamName:e.getName(),workspaceName:null==t?void 0:t.getName(),canEditSpaceMembership:null==t?void 0:t.canEditMembership(),membershipRequestsDisabled:null==t?void 0:t.getDisableMembershipRequests(),spaceAllowedDomains:null==t?void 0:t.getEmailDomains(),restrictedMembersDisabledForTeam:e.getDisableRestrictedMembers()}}),[e]),v=(0,a(230711).U2)(),x=(0,r().K8)((()=>{if(f)return!0;const t=e.getSpaceStore(),s=null==v?void 0:v.getMembershipType();return!t||!s||!(0,a(259524)._X)({roleThatCanAddRestrictedMembersToTeamspaces:t.getSetting("roles_that_can_add_restricted_members_to_teamspaces"),spaceUserRole:s,isTeamOwner:e.canAdmin()})}),[e,v,f]);(0,s.useEffect)((()=>()=>{n&&a(465960).L0({environment:c,teamStore:e,shouldScroll:!0})}),[n,e,c]);const[b,j]=(0,s.useState)(!1),A=(0,r().K8)((()=>t.state.inviteTargets),[t]),T=(0,r().K8)((()=>t.state.inviteTargets.length),[t]),E=(0,r().K8)((()=>t.state.inviteRole),[t]),B=(0,r().K8)((()=>a(483226).dL()),[]),R=(0,r().K8)((()=>!(null==h||!h.length||"team_level_guest"!==E||!(0,_().Qd)())&&A.some((e=>"group"!==e.type&&(0,a(842599).Wy)(h,e.value.email)))),[h,E,A]),V=(0,r().K8)((()=>!B&&!(0,C().FQ)(e)),[e,B]),L=async()=>{if(j(!0),T>0){const a=t.state.inviteTargets,{success:s}=await S().l5({environment:c,targetStore:e,permissionsInviteStore:t,inviteOrigin:"team_invite_overlay"});if(void 0!==g)if(s){const t=(0,M().c3)({inviteTargets:a,recordStore:e,canEditSpaceMembership:g});if(!t)return;setTimeout((()=>{d().D6({label:t})}))}else setTimeout((()=>{d().D6({label:(0,k.jsx)(y().sA,{id:"TeamPermissionsInviteOverlay.inviteMembersFailure.message",defaultMessage:"Failed to send invites"})})}))}S().Oo({permissionsInviteStore:t}),j(!1),null==i||i()};return(0,k.jsx)("div",{className:a(882722).jnS,style:{...I.full},children:(0,k.jsxs)("div",{style:I.containerLeftAligned,children:[(0,k.jsxs)("div",{style:I.titleAndIcon,children:[(0,k.jsx)("div",{style:I.addMembersTo,children:(0,k.jsx)(y().sA,{id:"TeamPermissionsInviteOverlayV2.membersTitle.label",defaultMessage:"Invite people to"})}),(0,k.jsx)("div",{style:I.icon,children:(0,k.jsx)(a(898808).x,{disabled:!0,store:e,size:20})}),(0,k.jsx)(a(404905).j,{style:I.teamName,children:u})]}),(0,k.jsxs)("div",{style:I.inviteInput,children:[(0,k.jsx)(w,{teamStore:e,permissionsInviteStore:t,onEmptySubmit:L}),(0,k.jsx)("div",{style:I.subtitle,children:(0,k.jsx)(D,{inviteTargets:A,workspaceName:m,canEditSpaceMembership:g,membershipRequestsDisabled:p,restrictedMembersDisabled:x,restrictedMembersDisabledForTeam:f,isFreeTier:B,inviteRole:E,hasTeamGuestsMatchAllowedDomain:R})})]}),(0,k.jsx)("div",{style:V?I.multiButtonContainer:I.singleButtonContainer,children:(0,k.jsxs)("div",{style:V?I.multiButtonContainer:{},children:[V?(0,k.jsx)(P,{teamStore:e}):void 0,(0,k.jsx)(N,{isLoading:b,onSubmit:L,onDismiss:()=>{S().Oo({permissionsInviteStore:t}),null==l||l()},isNewlyCreatedTeam:n,inviteTargets:A,inviteRole:E,canEditSpaceMembership:g,membershipRequestsDisabled:p,spaceAllowedDomains:h,hasTeamGuestsMatchAllowedDomain:R,restrictedMembersDisabled:x})]})})]})})}},286387:(e,t,a)=>{a.d(t,{H:()=>h});a(296540);var s=()=>a(401497),n=()=>a(675133),i=()=>a(396896),o=()=>a(807449),r=()=>a(631524),l=()=>a(302501),d=()=>a(721479),c=()=>a(158469),u=()=>a(69708),m=()=>a(232930),g=a(474848);const p=(0,u().YK)({emptyAnalyticsHeading:{id:"workspaceAnalyticsTabs.empty.heading",defaultMessage:"No workspace analytics in the last 90 days"},emptyAnalyticsDescription:{id:"workspaceAnalyticsTabs.empty.description",defaultMessage:"It may take some time for workspace analytics information to appear."},disabledAnalyticsHeading:{id:"workspaceAnalyticsTabs.disabled.heading",defaultMessage:"Analytics are disabled"},disabledAnalyticsDescription:{id:"workspaceAnalyticsTabs.disabled.description",defaultMessage:"An admin has turned off page view recording for {name}.{br}This information will not be available in your workspace settings or on individual pages."},disabledAnalyticsDescriptionNoSpaceName:{id:"workspaceAnalyticsTabs.disabled.description.unnamed",defaultMessage:"An admin has turned off page view recording for this space.{br}This information will not be available in your workspace settings or on individual pages."}});function h(e){const t=(0,s().IS)((()=>({outerDiv:{display:"flex",flexDirection:"column",justifyContent:"center",height:"80%",gap:24},innerDiv:{display:"flex",flexDirection:"column",textAlign:"center",alignItems:"center",gap:4},header:{fontSize:16,fontWeight:500}})),[]),{type:a,spaceName:h}=e,f=function(e,t){switch(e){case"empty":return{heading:n().A.formatMessage(p.emptyAnalyticsHeading),description:n().A.formatMessage(p.emptyAnalyticsDescription)};case"disabled":const e=t?(0,g.jsx)(u().sA,{...p.disabledAnalyticsDescription,values:{name:t,br:(0,g.jsx)("br",{})}}):(0,g.jsx)(u().sA,{...p.disabledAnalyticsDescriptionNoSpaceName,values:{br:(0,g.jsx)("br",{})}});return{heading:n().A.formatMessage(p.disabledAnalyticsHeading),description:e}}}(a,h);return(0,g.jsx)("div",{style:t.outerDiv,children:(0,g.jsxs)("div",{style:t.innerDiv,children:[(0,g.jsxs)(i().VP,{gap:16,alignItems:"center",children:[(0,g.jsx)(o().I,{icon:c().f,size:"xl",colorVariant:"secondary"}),(0,g.jsx)(l().A,{isSecondaryColor:!0,style:t.header,children:f.heading})]}),(0,g.jsx)(l().A,{isSecondaryColor:!0,children:f.description}),(0,g.jsx)(r().p,{href:(0,m().x)("guides.workspaceAnalytics"),external:!0,size:"sm",iconLeading:d().questionMarkCircleSmallIcon,colorPalette:"gray",children:(0,g.jsx)(u().sA,{id:"workspaceAnalyticsTabs.disabled.learnMore",defaultMessage:"Learn more"})})]})})}},298506:(e,t,a)=>{a.d(t,{g:()=>s});const s="space-id"},305448:(e,t,a)=>{a.d(t,{D:()=>d});a(581454);var s=a(296540),n=()=>a(401497),i=()=>a(631524),o=()=>a(493552),r=()=>a(100622),l=a(474848);function d({breadcrumbs:e,headerRight:t,children:a}){const d=(0,n().IS)((()=>({container:{margin:"0 auto"},top:{padding:"14px 16px",border:0,borderBottom:`1px solid ${r().Tj.border.secondary}`,display:"flex",alignItems:"center",justifyContent:"space-between",position:"sticky",top:0,backgroundColor:r().Tj.background.primary,zIndex:10},breadcrumb:{display:"flex",justifyContent:"flex-start",width:"fit-content",alignItems:"center",gap:8},content:{padding:"14px 16px"}})),[]);return(0,l.jsxs)("div",{style:d.container,children:[(0,l.jsxs)("div",{style:d.top,children:[(0,l.jsx)("div",{style:d.breadcrumb,children:e.map(((e,t)=>{let a;return 0!==t&&(a=(0,l.jsx)(o().D,{styleKey:"bodyRegular",colorVariant:"disabled",as:"span",children:"/"})),(0,l.jsxs)(s.Fragment,{children:[a,(0,l.jsx)(i().p,{onClick:e.onClick,colorPalette:Boolean(e.onClick)?"gray":void 0,disabled:!e.onClick,children:e.message})]},`breadcrumb-${t}`)}))}),t]}),(0,l.jsx)("div",{style:d.content,children:a})]})}},307212:(e,t,a)=>{a.d(t,{Jb:()=>d,OJ:()=>h,fP:()=>v,i_:()=>f});a(898992),a(354520),a(581454);var s=()=>a(944949),n=()=>a(849255),i=()=>a(416845),o=()=>a(436604),r=()=>a(798880),l=()=>a(769864);const d="last_90_days",c={field:"last_active",direction:"desc"};async function u(e){const{environment:t,filter:a,spaceId:s,currentSpaceId:n,usersTabData:i}=e,o=null==i?void 0:i.dailyUsersData;return o&&a===(null==i?void 0:i.graphFilter)&&n===s?o:m({environment:t,spaceId:s,filter:a})}async function m(e){const{environment:t,spaceId:a,filter:s}=e,n=await l().callApi({eventName:"getDailyUsersAnalytics",environment:t,data:{spaceId:a,activeWindow:"all_time"===s||"last_365_days"===s?"last_90_days":s},headers:{[o().B3]:a}});return"failed"===n.type?n.body:n.data}async function g(e){const{environment:t,filter:a,sort:s,spaceStore:n,currentSpaceId:i,usersTabData:o}=e,r=null==o?void 0:o.tableFilter,l=null==o?void 0:o.userTableSort;return null!=o&&o.usersAndStats&&r===a&&l&&l.direction===s.direction&&l.field===s.field&&i===n.id?o.usersAndStats:p({environment:t,filter:a,sort:s,spaceStore:n})}async function p(e){const{environment:t,filter:a,sort:s,spaceStore:i}=e,d=await l().callApi({eventName:"loadWorkspaceAnalyticsUsers",environment:t,data:{spaceId:i.id,filters:{timeRange:a},sort:s},headers:{[o().B3]:i.id}});return"failed"===d.type?d.body:d.data.users.map((e=>({stats:e,userStore:n().L.createChildStore(i,{table:r().oo,id:e.userId})})))}async function h(e){const{environment:t,spaceStore:a,currentTab:s,currentSpaceId:n,usersTabData:o,setState:r,graphFilter:l,tableFilter:m}=e,p=await async function(e){const{environment:t,spaceStore:a,currentSpaceId:s,usersTabData:n,graphFilter:o,tableFilter:r}=e,l=o||(null==n?void 0:n.graphFilter)||d,m=r||(null==n?void 0:n.tableFilter)||d,p=(null==n?void 0:n.userTableSort)||c,[h,f]=await Promise.all([u({environment:t,filter:l,spaceId:a.id,currentSpaceId:s,usersTabData:n}),g({environment:t,filter:m,sort:p,spaceStore:a,currentSpaceId:s,usersTabData:n})]),v=(0,i().OwV)(h)||!h?[]:h,y=(0,i().OwV)(f)||!f?[]:f;return{graphFilter:l,tableFilter:m,userTableSort:p,dailyUsersError:(0,i().OwV)(h)?h:void 0,dailyUsersData:v,usersAndStatsError:(0,i().OwV)(f)?f:void 0,usersAndStats:y}}({environment:t,spaceStore:a,currentSpaceId:n,usersTabData:o,graphFilter:l,tableFilter:m});r({currentSpaceId:a.id,currentTab:s,usersTabData:p})}async function f(e){const{environment:t,spaceStore:a}=e,s=e.nextGraphFilter||d,n=e.nextTableFilter||d,o=e.nextSort||c,[r,l]=await Promise.all([m({environment:t,filter:s,spaceId:a.id}),p({environment:t,filter:n,sort:o,spaceStore:a})]),u=(0,i().OwV)(r)||!r?[]:r,g=(0,i().OwV)(l)||!l?[]:l;return{graphFilter:s,tableFilter:n,userTableSort:o,dailyUsersError:(0,i().OwV)(r)?r:void 0,dailyUsersData:u,usersAndStatsError:(0,i().OwV)(l)?l:void 0,usersAndStats:g}}function v(e,t){if((0,i().vP6)(e)){const a=(0,s().D)(t,e);if(a)return a}return t.formatMessage({defaultMessage:"Failed to retrieve analytics. Try refreshing and reopening the settings.",id:"workspaceAnalytics.usersTab.refershUserAnalytics.defaultFailed"})}},312607:(e,t,a)=>{a.d(t,{A:()=>E});a(944114),a(898992),a(908872);var s=a(296540),n=()=>a(242422),i=()=>a(590526),o=()=>a(401497),r=()=>a(420802),l=()=>a(807449),d=()=>a(31511),c=()=>a(546926),u=()=>a(631524),m=()=>a(160432),g=()=>a(302501),p=()=>a(890492),h=()=>a(81068),f=()=>a(663639),v=()=>a(736847),y=()=>a(423497);const x={audit_log_aes_event_read:["page.automation_deleted","workspace.integration_added","workspace.integration_removed"],audit_log_guest_membership_request:["guest_membership_requests_toggled"],...y().gu};y().Ql,y().nm;var b=()=>a(326346),S=()=>a(200582),j=()=>a(69708),A=()=>a(100622),w=()=>a(778078),_=()=>a(496603),M=()=>a(534177),C=()=>a(56394),T=()=>a(47373),k=()=>a(134217),I=()=>a(606273),N=a(474848);const D={page:(0,N.jsx)(j().sA,{id:"auditlogEventFilter.categoryName.page",defaultMessage:"Page"}),space:(0,N.jsx)(j().sA,{id:"auditlogEventFilter.categoryName.workspace",defaultMessage:"Workspace"}),team:(0,N.jsx)(j().sA,{id:"auditlogEventFilter.categoryName.team",defaultMessage:"Teamspace"}),account:(0,N.jsx)(j().sA,{id:"auditlogEventFilter.categoryName.account",defaultMessage:"Account"}),organization:(0,N.jsx)(j().sA,{id:"auditlogEventFilter.categoryName.organization",defaultMessage:"Organization"}),form:(0,N.jsx)(j().sA,{id:"auditlogEventFilter.categoryName.form",defaultMessage:"Form"}),collection:(0,N.jsx)(j().sA,{id:"auditlogEventFilter.categoryName.collection",defaultMessage:"Data source"})};function P({totalNumEventsForCategory:e,numSelectedForCategory:t,category:a,categoryOpen:s,shouldShowCount:n,onCategoryClick:i,onCategoryToggleClick:l,...d}){const c=(0,o().IS)((()=>({textWrapperStyle:{margin:0},title:{margin:0,display:"flex",alignItems:"center"},categoryText:{marginInlineStart:8,fontWeight:600},categorySubHeader:{marginInlineStart:6},toggleButton:{marginInlineStart:2,marginInlineEnd:2}})),[]);let u,m;return u=n?e===t?(0,N.jsx)(j().sA,{id:"auditlogEventFilter.allEventsSelected",defaultMessage:"({totalNum} events)",values:{totalNum:e}}):(0,N.jsx)(j().sA,{id:"auditlogEventFilter.numEventsSelected",defaultMessage:"({numSelected} of {totalNum} events selected)",values:{numSelected:t,totalNum:e}}):null,m=e===t||0!==t&&"partial",(0,N.jsx)(h().A,{...d,className:"notranslate",textWrapperStyle:c.textWrapperStyle,focused:!1,title:(0,N.jsxs)("div",{style:c.title,children:[(0,N.jsx)(I().f,{style:c.toggleButton,open:s,onClick:l,isSidebar:!1,fill:!1,icon:"chevron"}),(0,N.jsx)(r().S,{checked:m,size:14,onClick:i}),(0,N.jsx)(g().A,{style:c.categoryText,children:D[a]}),(0,N.jsx)(g().A,{isSecondaryColor:!0,style:c.categorySubHeader,children:u})]})})}const E=function({onChange:e,lastSelectionStore:t,componentStore:n}){const o=(0,i().uB)(void 0,a(452004).$),r=(0,i().K8)((()=>n.state.isMenuOpen),[n]),l=(0,s.useCallback)((()=>(0,N.jsx)(U,{onChange:e,componentStore:n,lastSelectionStore:t,menuListStore:o})),[e,n,t,o]),d=(0,s.useCallback)((()=>function(e,t){e.setState({...e.state,actionSelections:{...t.state.actionSelections}}),F(!1,e)}(n,t)),[n,t]),c=V(),u=(0,N.jsx)(j().sA,{id:"auditlogEventFilter.title",defaultMessage:"Event"}),m=(0,N.jsx)(O,{componentStore:n,title:u});return(0,N.jsx)(a(385226).A,{marginAfter:!1,children:(0,N.jsx)(a(127833).zD,{popupType:a(30537).n.Popup,placementToOrigin:"bottom",alignmentToOrigin:"start",open:r,render:l,onDismiss:d,keepFocus:!0,origin:m,preventScaleTransition:!0,style:c.popup})})};function B(e){var t;return _().oE([e.key,null===(t=e.localizedActionName)||void 0===t?void 0:t.toLowerCase()]).join(" ")}function R({totalNumSelected:e,totalNumEvents:t}){const a=(0,o().IS)((()=>({container:{background:A().oZ.diffBackground,color:A().oZ.diffTextColor,paddingInline:6,margin:8,marginBottom:0,borderRadius:4,fontWeight:510,width:"fit-content"}})),[]);return(0,N.jsx)(g().A,{style:a.container,children:(0,N.jsx)(j().sA,{id:"auditLogEventFilter.selectedPill",defaultMessage:"{totalNumSelected} of {totalNumEvents} selected",values:{totalNumSelected:e,totalNumEvents:t}})})}function V(){return{container:{width:460},searchInput:{padding:8,borderEndStartRadius:0,borderEndEndRadius:0,boxShadow:"none",borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:A().Tj.border.secondaryTranslucent},popup:{paddingBottom:8}}}function L(e){const{renderGroup:t,shouldShowCount:a,totalNumEventsForCategory:s,numSelectedForCategory:n,componentStore:i}=e,o=t.category,r=()=>{i.toggleCategorySelection(t)},l=()=>{i.selectCategorySelection(t)};return{key:o,action:r,render:e=>(0,N.jsx)(P,{totalNumEventsForCategory:s,numSelectedForCategory:n,category:o,categoryOpen:i.state.categoryToggleOpen[o],shouldShowCount:a,onCategoryToggleClick:r,onCategoryClick:l,...e}),localizedActionName:null,actionName:null}}function z(e){const{actionName:t,renderGroup:a,componentStore:s,intl:n}=e,i=()=>{s.selectActionName(t,a)},o=n.formatMessage(b().T0[t]);return{key:t,action:i,render:e=>(0,N.jsx)(h().A,{...e,icon:(0,N.jsx)(r().S,{checked:s.state.actionSelections[t],size:14,onClick:i}),focused:!1,title:o,className:"notranslate",style:{paddingInlineStart:32},textWrapperStyle:{marginInlineStart:4}}),actionName:t,localizedActionName:o}}function F(e,t){t.setState({...t.state,isMenuOpen:e})}function O({title:e,componentStore:t}){const a=(0,i().K8)((()=>t.hasActionNameSelected()),[t]);return(0,N.jsx)(C().A,{on:a,icon:(0,N.jsx)(l().I,{icon:S().m,fitToViewBox:"horizontal"}),title:(0,N.jsx)("span",{children:e}),onClick:()=>{F(!0,t)}})}function U({onChange:e,componentStore:t,lastSelectionStore:a,menuListStore:o}){const r=(0,j().tz)(),l=(0,s.useCallback)((e=>function(e,t){t.updateSearchQuery(e.target.value)}(e,t)),[t]),g=V(),h=(0,i().K8)((()=>[...(0,M().WP)(x).reduce(((e,[t,a])=>n().default.checkGate({gateName:t})?e:[...e,...a]),[]),...(0,T().Qd)()?[]:["team_guest_default_permission_updated"],...(0,k().dW)()?[]:["guest_membership_requests_toggled"],"page.shared_with_email_domain"]),[]),{actionSelections:y,categoryToggleOpen:b,renderOrder:S,searchQuery:A}=(0,i().K8)((()=>{const{actionSelections:e,categoryToggleOpen:a,renderOrder:s,searchQuery:n}=t.state;return{actionSelections:e,categoryToggleOpen:a,renderOrder:s,searchQuery:n}}),[t]),_=[];let C=0,I=0;for(const s of S){const e=s.category,a=[];let n=0;for(const i of s.orderedActions)h.includes(i)||(a.push(z({actionName:i,renderGroup:s,intl:r,componentStore:t})),y[i]&&n++);if(0!==a.length&&(C+=n,I+=a.length,_.push(L({renderGroup:s,shouldShowCount:!Boolean(A),totalNumEventsForCategory:a.length,numSelectedForCategory:n,componentStore:t})),b[e]))if(A){const e=(0,w().Ay)(A,a,B);_.push(...e)}else _.push(...a)}const D={key:"results",items:_,render:e=>(0,N.jsx)(v().A,{...e,title:null,loading:!1})};return(0,N.jsxs)("div",{style:g.container,children:[(0,N.jsx)(d().A,{style:g.searchInput,placeholder:r.formatMessage({id:"auditlogEventFilter.searchPlaceholder",defaultMessage:"Search for an event"}),onChange:l,value:A,showClearButton:!0}),A?(0,N.jsx)(R,{totalNumSelected:C,totalNumEvents:I}):void 0,(0,N.jsx)(p().A,{menuType:c().gu.Popup,header:null,maxHeight:356,children:(0,N.jsx)(f().A,{type:f().O.Vertical,store:o,initialFocus:0,sections:[D]})}),(0,N.jsxs)(v().A,{topBorder:!0,style:{paddingTop:8,paddingInlineEnd:8,paddingBottom:2,paddingInlineStart:8,justifyContent:"space-between",display:"flex",flexDirection:"row"},children:[(0,N.jsx)(u().p,{onClick:()=>{!function(e){e.clearAllSelections()}(t)},children:(0,N.jsx)(j().sA,{id:"auditlogEventFilter.clearButton",defaultMessage:"Clear"})}),(0,N.jsx)(m().A,{colorPalette:"blue",onClick:()=>{!function(e,t,a){const s=t.getAllActionNames(),n=t.getSelectedActionNames();e(s.length===n.length?[]:n),0===n.length&&t.reset(),a.setState({...a.state,actionSelections:{...t.state.actionSelections}}),F(!1,t)}(e,t,a)},children:(0,N.jsx)(j().sA,{id:"auditlogEventFilter.applyButton",defaultMessage:"Apply"})})]})]})}},315412:(e,t,a)=>{a.d(t,{p:()=>m});a(296540);var s=()=>a(401497),n=()=>a(807449),i=()=>a(31511),o=()=>a(493552),r=()=>a(26697),l=()=>a(406533),d=()=>a(284371),c=()=>a(841040),u=a(474848);function m(e){const t=(0,s().IS)((()=>({labelContainer:{display:"inline-flex",alignItems:"center",marginBottom:8},container:{position:"relative",width:"100%"},input:{padding:"6px 10px"},textBelowInput:{marginTop:6},helpIcon:{marginInlineStart:4},inputContainer:{display:"flex",alignItems:"center"},inputElementWithCopyButton:{width:"calc(100% - 24px)",...d().RC},inputElementWhenMultiline:{minHeight:94},copyButton:{position:"absolute",insetInlineEnd:4,height:"fit-content"}})),[]);return(0,u.jsxs)("div",{style:t.container,children:[(0,u.jsxs)("div",{style:t.labelContainer,children:[(0,u.jsx)(o().D,{styleKey:"captionMedium",colorVariant:"secondary",children:e.labelMessage}),e.helpMessage?(0,u.jsx)(r().m,{renderTooltip:()=>e.helpMessage,render:e=>(0,u.jsx)("span",{...e,children:(0,u.jsx)(n().I,{icon:l().questionMarkCircleIcon,size:"xs",colorVariant:"tertiary",style:t.helpIcon})})}):void 0]}),(0,u.jsxs)("div",{style:t.inputContainer,children:[(0,u.jsx)(i().A,{textarea:e.multiline,value:e.value,placeholder:e.placeholder,disabled:e.disabled,onChange:e.onChange,onBlur:e.onBlur,style:t.input,inputStyle:{...e.onCopyClick?t.inputElementWithCopyButton:void 0,...e.multiline?t.inputElementWhenMultiline:void 0}}),e.onCopyClick?(0,u.jsx)(c().lz,{onCopyClick:e.onCopyClick,isHovered:!0,containerStyles:t.copyButton}):null]}),e.secondaryMessage?(0,u.jsx)(o().D,{styleKey:"captionRegular",colorVariant:"secondary",style:t.textBelowInput,children:e.secondaryMessage}):null,e.errorMessage?(0,u.jsx)(o().D,{styleKey:"captionRegular",colorPalette:"red",colorVariant:"accentPrimary",style:t.textBelowInput,children:e.errorMessage}):null]})}},326480:(e,t,a)=>{a.d(t,{r:()=>je});a(898992),a(354520),a(581454);var s=a(296540),n=()=>a(590526),i=()=>a(295633),o=()=>a(732810),r=()=>a(74351),l=()=>a(396896),d=()=>a(98126),c=()=>a(940148),u=()=>a(302501),m=()=>a(69708),g=()=>a(534177),p=()=>a(625383),h=()=>a(991221),f=()=>a(484714),v=()=>a(401497),y=()=>a(807449),x=()=>a(631524),b=()=>a(160432),S=()=>a(493552),j=()=>a(525884),A=()=>a(90907),w=()=>a(72234),_=()=>a(232930),M=()=>a(752860),C=()=>a(314529);var T=a(474848);function k(){const e=(0,f().v3)(),t=(0,v().IS)((()=>({container:{marginTop:48,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:16},disclaimer:{textAlign:"center",width:432}})),[]),a=(0,s.useCallback)((()=>{!function(e){(0,C().DO_NOT_USE_trackLegacy)(e,"admin_content_search_analytics_acknowledge_confirm")}(e),w().dK(e)}),[e]);return(0,T.jsxs)("div",{style:t.container,children:[(0,T.jsx)(y().I,{icon:A().lockIcon,size:"xl",colorVariant:"secondary"}),(0,T.jsx)(S().D,{styleKey:"bodyLgMedium",colorVariant:"primary",children:(0,T.jsx)(m().sA,{id:"adminContentSearchTab.pagesTable.acknowledgement.disclaimerTitle",defaultMessage:"Before using this feature"})}),(0,T.jsx)("span",{style:t.disclaimer,children:(0,T.jsx)(S().D,{styleKey:"bodyRegular",colorVariant:"secondary",children:(0,T.jsx)(m().sA,{id:"adminContentSearchTab.pagesTable.acknowledgement.disclaimer",defaultMessage:"As a workspace owner, you can use content search to find pages that you don’t have access to, including the private pages of other workspace members. Consult with your organization’s legal department on how to use this feature. Actions taken here will be recorded in the audit log."})})}),(0,T.jsxs)(l().VP,{gap:8,width:195,children:[(0,T.jsx)(b().A,{colorPalette:"blue",onClick:a,children:(0,T.jsx)(m().sA,{id:"adminContentSearchTab.pagesTable.acknowledgement.confirm",defaultMessage:"Acknowledge"})}),(0,T.jsx)(x().p,{style:{justifyContent:"center"},colorPalette:"gray",onClick:()=>{const t=(0,_().x)("adminContentSearch");(0,M().L)({environment:e,url:t})},iconLeading:j().infoCircleIcon,children:(0,T.jsx)(m().sA,{id:"adminContentSearchTab.pagesTable.acknowledgement.learnMore",defaultMessage:"Learn more"})})]})]})}var I=()=>a(515153),N=()=>a(406094),D=()=>a(940563),P=()=>a(100622),E=()=>a(284371),B=()=>a(726295);function R({filters:e,setFilters:t}){const a=(0,v().IS)((()=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},title:{margin:"12px auto",fontWeight:E().Wy.medium,fontSize:16},description:{fontWeight:E().Wy.regular,fontSize:14,color:P().Tj.text.tertiary,textAlign:"center",maxWidth:386,margin:"0 auto 16px"},suggestion:{width:"100%",maxWidth:440,justifyContent:"space-between"},filterContainer:{marginInlineStart:4,display:"flex",alignItems:"center",justifyContent:"center"}})),[]);return(0,T.jsxs)("div",{style:a.container,children:[(0,T.jsx)("h1",{style:a.title,children:(0,T.jsx)(m().sA,{id:"adminContentSearchTab.pagesTable.suggestions.title",defaultMessage:"Search pages in your workspace"})}),(0,T.jsx)("p",{style:a.description,children:(0,T.jsx)(m().sA,{id:"adminContentSearchTab.pagesTable.suggestions.description",defaultMessage:"Use filters to find pages with specific sharing and permissions settings, such as:"})}),(0,T.jsxs)(l().VP,{gap:12,children:[(0,T.jsx)(N().A,{size:"xl",colorPalette:"gray",onClick:function(){t({query:"",lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},audience:["shared_externally"],teamIds:[]},{runSearchAfter:!0})},iconTrailing:D().arrowStraightRightIcon,style:a.suggestion,children:(0,T.jsx)(l().fI,{alignItems:"center",children:(0,T.jsx)(m().sA,{id:"adminContentSearchTab.pagesTable.suggestions.sharedToWeb",defaultMessage:"Search for pages <filter></filter>",values:{filter:()=>(0,T.jsx)("div",{style:a.filterContainer,children:(0,T.jsx)(B().tE,{setPillTitleStringToActiveSelection:!0,selectedAudience:["shared_externally"]})})}})})}),(0,T.jsx)(N().A,{size:"xl",colorPalette:"gray",onClick:function(){t({query:"",lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},audience:["shared_to_web"],teamIds:[]},{runSearchAfter:!0})},iconTrailing:D().arrowStraightRightIcon,style:a.suggestion,children:(0,T.jsx)(l().fI,{alignItems:"center",children:(0,T.jsx)(m().sA,{id:"adminContentSearchTab.pagesTable.suggestions.sharedToWeb",defaultMessage:"Search for pages <filter></filter>",values:{filter:()=>(0,T.jsx)("div",{style:a.filterContainer,children:(0,T.jsx)(B().tE,{setPillTitleStringToActiveSelection:!0,selectedAudience:["shared_to_web"]})})}})})})]})]})}var V=()=>a(970236),L=()=>a(26697),z=()=>a(624090),F=()=>a(287882),O=()=>a(720665);function U({deletionStatus:e,store:t}){const s=(0,v().IS)((()=>({grayBadge:{width:"fit-content",whiteSpace:"nowrap",display:"flex",flexDirection:"row"},trashIcon:{marginInlineEnd:2}})),[]),{deleteFromTrashDelayMs:i,purgeDelayMs:o}=(0,n().K8)((()=>{const e=t.getSpaceStore();return{deleteFromTrashDelayMs:(0,z().XX)(null==e?void 0:e.getModel()),purgeDelayMs:(0,z().NA)(null==e?void 0:e.getModel())}}),[t]),r=(0,n().K8)((()=>{if("in_trash"===e)return(0,z().BT)(t.pointer,t.getRecordModel)}),[t,e]),l=(0,n().K8)((()=>{if("deleted_from_trash"===e)return(0,z().uZ)(t.pointer,t.getRecordModel)}),[t,e]),d=(0,a(501497).S6)();switch(e){case"alive":return null;case"in_trash":return Date.now()>=(0,z().vw)({movedToTrashTime:r,deleteFromTrashDelayMs:i,cdrrDeletionEnabledTimestamp:d})?(0,T.jsx)(W,{deleteFromTrashDelaySeconds:i/O().TD,purgeDelaySeconds:o/O().TD,deletionStatus:e}):(0,T.jsx)(V().E,{style:s.grayBadge,content:(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("div",{children:(0,T.jsx)(y().I,{icon:a(236262).trashIcon,size:"xxs",style:s.trashIcon})}),(0,T.jsx)(m().sA,{id:"adminContentSearch.deletionStatusBadge.trash",defaultMessage:"In Trash"})]})});case"deleted_from_trash":return Date.now()>=(l??z().mZ)+o?(0,T.jsx)(W,{deleteFromTrashDelaySeconds:i/O().TD,purgeDelaySeconds:o/O().TD,deletionStatus:e}):(0,T.jsx)(V().E,{style:s.grayBadge,content:(0,T.jsx)(m().sA,{id:"adminContentSearch.deletionStatusBadge.retained",defaultMessage:"Retained"})});default:(0,g().HB)(e)}}function W(e){const{deletionStatus:t,deleteFromTrashDelaySeconds:a,purgeDelaySeconds:s}=e,n=(0,m().tz)(),i=(0,v().IS)((()=>({redBadge:{color:P().Tj.red.text.accentPrimary,backgroundColor:P().Tj.red.background.tertiaryTranslucent,width:"fit-content",whiteSpace:"nowrap"},secondaryTooltip:{color:P().Tj.text.inverseSecondary}})),[]);return"in_trash"===t?(0,T.jsx)(L().m,{renderTooltip:()=>(0,T.jsx)(m().sA,{id:"adminContentSearch.pageStatusBadge.deletionPending.trash.tooltip",defaultMessage:"<primary>We are processing the deletion from Trash</primary><secondary>This page is past {duration} in Trash</secondary>",values:{primary:e=>(0,T.jsx)("div",{children:e}),secondary:e=>(0,T.jsx)("div",{style:i.secondaryTooltip,children:e}),duration:(0,F().rN)(a,n)}}),placement:"bottom",render:e=>(0,T.jsx)("div",{...e,children:(0,T.jsx)(V().E,{style:i.redBadge,content:(0,T.jsx)(m().sA,{id:"adminContentSearch.pageStatusBadge.trash.deletionPending",defaultMessage:"Deleted from Trash soon"})})})}):"deleted_from_trash"===t?(0,T.jsx)(L().m,{renderTooltip:()=>(0,T.jsx)(m().sA,{id:"adminContentSearch.pageStatusBadge.deletionPending.perm.tooltip",defaultMessage:"<primary>Will be permanently deleted soon </primary> <secondary>Retained pages are permanently deleted after {duration}</secondary>",values:{primary:e=>(0,T.jsx)("div",{children:e}),secondary:e=>(0,T.jsx)("div",{style:i.secondaryTooltip,children:e}),duration:(0,F().rN)(s,n)}}),placement:"bottom",render:e=>(0,T.jsx)("div",{...e,children:(0,T.jsx)(V().E,{style:i.redBadge,content:(0,T.jsx)(m().sA,{id:"adminContentSearch.pageStatusBadge.perm.deletionPending",defaultMessage:"Permanently deleted soon"})})})}):null}var H=()=>a(118307),q=()=>a(546926),K=()=>a(890492),G=()=>a(663639),Y=()=>a(179034),$=()=>a(482707),Q=()=>a(114871),J=()=>a(437487),Z=()=>a(454354),X=()=>a(201059),ee=()=>a(465672),te=()=>a(349977);function ae(e){const{deletionStatus:t,store:a,refreshSearchResult:s}=e;switch(t){case"alive":case"in_trash":return(0,T.jsx)(se,{deletionStatus:t,store:a,refreshSearchResult:s});case"deleted_from_trash":return(0,T.jsx)(ne,{deletionStatus:t,store:a,getValidDeletedPermissions:e.getValidDeletedPermissions,refreshSearchResult:s});default:(0,g().HB)(t)}}function se({store:e,deletionStatus:t,refreshSearchResult:a}){const o=(0,m().tz)(),r=(0,n().uB)(void 0,H().A),l=(0,f().v3)(),d=(0,n().uB)(void 0,Z().A),c=(0,n().uB)(void 0,Q().Ay),[u,p]=(0,s.useState)(!1);(0,s.useEffect)((()=>{const t=e instanceof i().B?e:e.getParentStore(),a=t instanceof i().B?t:void 0;d.setState({...d.state,privatePageStore:a,changePermissionsEnabled:!0,loading:!1,error:void 0})}),[e,d]);const h=[(0,te().j9)({environment:l,deletionStatus:t,popupStore:r,store:e,handleOpenPermissionsMenu:()=>p(!0),onRestoreOrDeletePage:a,from:"adminContentSearch"}),(0,te().CT)({environment:l,deletionStatus:t,popupStore:r,store:e,onRestoreOrDeletePage:a,from:"adminContentSearch"})].filter(g().O9);return(0,T.jsx)(ee().j,{onClose:()=>{p(!1),J().Ay.reset()},originAriaLabel:o.formatMessage({id:"pageCellActions.aliveOrInTrash.iconButton.ariaLabel",defaultMessage:"More actions for page"}),popupStore:r,render:()=>u&&e.table===Y().ev?(0,T.jsx)($().k,{store:e,sudoModeStore:d,inviteTargetsStore:c,location:"admin_content_search",impliedPermissionOverrideIntent:!0}):(0,T.jsx)(K().A,{menuType:q().gu.Popup,width:248,children:(0,T.jsx)(G().A,{type:G().O.Vertical,initialFocus:void 0,sections:h})}),useShareMenuStyles:u})}function ne({store:e,getValidDeletedPermissions:t,refreshSearchResult:a}){const s=(0,f().v3)();return(0,T.jsx)(X().V,{environment:s,store:e,includeNonRestoreActions:!0,getValidDeletedPermissions:t,onRestoreOrDeletePage:a,from:"adminContentSearch"})}var ie=()=>a(566468),oe=()=>a(920198);function re({deletedFromTrashTime:e}){const t=function(){const e=(0,oe().L)();return(0,n().K8)((()=>{const t=null==e?void 0:e.getModel();return(0,z().NA)(t)}),[e])}();if((0,g().O9)(e)){const a=e+t;return a>Date.now()?(0,T.jsx)(p().d,{dateTs:a,omitTooltip:!0}):(0,T.jsx)(L().m,{render:e=>(0,T.jsx)("div",{...e,children:(0,T.jsx)(ie().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,T.jsx)(m().sA,{defaultMessage:"N/A",id:"adminContentSearchTab.pagesTable.deletedTimeCell.notAvailable"})})}),renderTooltip:()=>(0,T.jsx)(m().sA,{defaultMessage:"This page is in process of being permanently deleted",id:"adminContentSearchTab.pagesTable.deletedTimeCell.beingPurged.tooltip"})})}return(0,T.jsx)(ie().s7,{useThinTitle:!0,useSecondaryColorTitle:!0,title:(0,T.jsx)(m().sA,{defaultMessage:"N/A",id:"adminContentSearchTab.pagesTable.deletedTimeCell.notAvailable"})})}var le=()=>a(698385);const de={id:"page",headerTitle:(0,T.jsx)(m().sA,{id:"adminContentSearchTab.pagesTable.page.name",defaultMessage:"Page"}),renderCell:e=>(0,T.jsx)(a(860864).EB,{store:"collection"===e.type?e.collectionStore:e.pageStore,rightIcon:(0,T.jsx)(ae,{store:"collection"===e.type?e.collectionStore:e.pageStore,deletionStatus:e.deletionStatus,getValidDeletedPermissions:e.filterDeletedPermissions,refreshSearchResult:e.refreshSearchResult}),inlineTitleContent:(0,T.jsx)(U,{deletionStatus:e.deletionStatus,store:"collection"===e.type?e.collectionStore:e.pageStore})}),widthData:{width:320,maxWidth:320},sortable:!1},ce={id:"location",headerTitle:(0,T.jsx)(m().sA,{id:"adminContentSearchTab.pagesTable.location.name",defaultMessage:"Location"}),renderCell:e=>(0,T.jsx)(a(803662).E,{blockStore:"collection"===e.type?e.parentBlockStore:e.pageStore,teamStore:e.teamStore}),widthData:{width:140},sortable:!1},ue={id:"createdTime",headerTitle:(0,T.jsx)(m().sA,{id:"adminContentSearchTab.pagesTable.createdTime.name",defaultMessage:"Created on"}),renderCell:e=>e.createdTime?(0,T.jsx)(p().d,{dateTs:e.createdTime}):void 0,widthData:{width:140},sortable:!1},me={id:"lastEditedTime",headerTitle:(0,T.jsx)(m().sA,{id:"adminContentSearchTab.pagesTable.lastEditedTime.name",defaultMessage:"Last edited on"}),renderCell:e=>e.lastEditedTime?(0,T.jsx)(a(53523).Z,{lastEditedTime:e.lastEditedTime,lastEditedByPointer:e.lastEditedByPointer,deletedFromTrashTime:e.deletedFromTrashTime,movedToTrashTime:e.movedToTrashTime,pageStatus:e.deletionStatus}):void 0,widthData:{width:140},sortable:!1},ge={id:"createdBy",headerTitle:(0,T.jsx)(m().sA,{id:"adminContentSearchTab.pagesTable.createdBy.name",defaultMessage:"Created by"}),renderCell:e=>e.createdByPointer?(0,T.jsx)(le().T,{store:"page"===e.type?e.pageStore:e.collectionStore,actorPointers:[e.createdByPointer]}):null,widthData:{width:140},sortable:!1},pe={id:"lastEditedBy",headerTitle:(0,T.jsx)(m().sA,{id:"adminContentSearchTab.pagesTable.lastEditedBy.name",defaultMessage:"Last edited by"}),renderCell:e=>e.lastEditedByPointer?(0,T.jsx)(le().T,{store:"page"===e.type?e.pageStore:e.collectionStore,actorPointers:[e.lastEditedByPointer]}):null,widthData:{width:140},sortable:!1};function he({blockStore:e}){const t=(0,n().O$)(a(907258).AppStoreSidebarSpaceStore);return t?(0,T.jsx)(a(638597).b,{blockStore:e,spaceStore:t}):null}const fe={id:"audience",headerTitle:(0,T.jsx)(m().sA,{id:"adminContentSearchTab.pagesTable.audience.name",defaultMessage:"Audience"}),renderCell:e=>(0,T.jsx)(he,{blockStore:"collection"===e.type?e.parentBlockStore:e.pageStore}),widthData:{width:140},sortable:!1},ve={id:"sharedWith",headerTitle:(0,T.jsx)(m().sA,{id:"adminContentSearchTab.pagesTable.sharedWith.name",defaultMessage:"Shared with"}),renderCell:e=>(0,T.jsx)(a(651089).o,{blockStore:"collection"===e.type?e.parentBlockStore:e.pageStore}),widthData:{width:140},sortable:!1},ye={id:"retainedUntil",headerTitle:(0,T.jsx)(m().sA,{id:"adminContentSearchTab.pagesTable.retainedUntil.name",defaultMessage:"Retained until"}),renderCell:e=>(0,T.jsx)(re,{deletedFromTrashTime:e.deletedFromTrashTime}),widthData:{width:140},sortable:!1},xe={id:"pageStatus",headerTitle:(0,T.jsx)(m().sA,{id:"adminContentSearchTab.pagesTable.pageStatus.name",defaultMessage:"Page status"}),renderCell:e=>(0,T.jsx)(a(468628).u,{pageStatus:e.deletionStatus}),widthData:{width:140},sortable:!1},be=[de,ce,fe,ve,pe,me,ge,ue],Se=[de,ce,xe,ye,fe,ve,pe,me,ge,ue];function je({loading:e,error:t,loadNextPage:a,hasNextPage:p,filters:f,setFilters:v,recordStores:y,showSuggestions:x,runNewSearch:b,hasUserConfirmedAcknowledgement:S,refreshSearchResult:j,shouldShowLoadMore:A}){const w=S&&!e&&!x,_=S&&!x,M=(0,h().T)(),C=(0,s.useMemo)((()=>f.pageStatus.includes("deleted_from_trash")||f.pageStatus.includes("in_trash")||0===f.pageStatus.length),[f.pageStatus]),N=C?Se:be,D=(0,n().K8)((()=>y.map((e=>{if(!(e instanceof i().B||e instanceof o().m))return;const t=C&&e.pathIsDead()?e.pathHasDeletedPermission()?"deleted_from_trash":"in_trash":"alive",a={isClickable:!1,teamStore:(0,r().U)(e),deletionStatus:t,movedToTrashTime:e.getMovedToTrashTime(),deletedFromTrashTime:"deleted_from_trash"===t?e.getDeletedFromTrashAt():void 0,filterDeletedPermissions:"deleted_from_trash"===t?M:void 0,refreshSearchResult:j};if(e instanceof o().m){const t=e.getParentBlockStore();if(!t)return;return{...a,id:e.id,type:"collection",collectionStore:e,parentBlockStore:t,lastEditedTime:e.getLastEditedTimeOrBlockFallback(),lastEditedByPointer:e.getLastEditedByPointerOrBlockFallback(),createdTime:e.getCreatedTimeOrBlockFallback(),createdByPointer:e.getCreatedByPointerOrBlockFallback()}}if(e instanceof i().B)return{...a,id:e.id,type:"page",pageStore:e,lastEditedTime:e.getLastEditedTime(),lastEditedByPointer:e.getLastEditedByPointer(),createdTime:e.getCreatedTime(),createdByPointer:e.getCreatedByPointer()};(0,g().HB)(e)})).filter(g().O9)),[y,C,M,j]),P=(0,s.useMemo)((()=>(0,c().rC)({columnRenderInfo:N,containerMarginTop:0})),[N]);return t?(0,T.jsx)(I().t,{runNewSearch:b,error:t}):S?x&&0===D.length?(0,T.jsx)(R,{filters:f,setFilters:v}):(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(c().WE,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:A?void 0:400,columnRenderInfo:N,rows:D,loadMoreMethod:_?A?{type:"button",onLoadMore:a,hasNextPage:p}:{type:"scroll",onLoadMore:a}:void 0,renderNoRowsComponent:()=>(0,T.jsx)(u().A,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"},children:w?(0,T.jsx)(m().sA,{id:"adminContentSearchTab.pagesTable.empty",defaultMessage:"No pages found with your query."}):void 0}),styles:P}),e?(0,T.jsx)(l().fI,{justifyContent:"center",children:(0,T.jsx)(d().A,{style:{margin:"24px auto 24px"}})}):null]}):(0,T.jsx)(k,{})}},334013:(e,t,a)=>{a.d(t,{A:()=>f});a(898992),a(354520),a(581454);var s=a(296540),n=()=>a(590526),i=()=>a(401497),o=()=>a(127833),r=()=>a(352321),l=()=>a(842599),d=()=>a(69708),c=()=>a(534177),u=()=>a(417555),m=()=>a(743260),g=()=>a(406999),p=a(474848);function h(e){const{permissionsInviteStore:t}=e,a=(0,d().tz)(),o=(0,n().K8)((()=>{const{inputFocus:e}=t.state;return"invitee"===e}),[t]),h=(0,n().K8)((()=>t.state.tokenQuery),[t]),f=(0,n().K8)((()=>t.state.inviteTargets.filter(g().eL).filter(g().eL)),[t]),v=(0,n().K8)((()=>t.state.inviteRole),[t]),y=(0,s.useCallback)((e=>{const{newInviteTargets:a,newInputValue:s,inputFocus:n}=e;t.setState({...t.state,inviteTargets:a,inviteRole:v,...(0,c().O9)(s)&&{tokenQuery:s},...(0,c().O9)(n)&&{inputFocus:n}})}),[v,t]),x=(0,s.useCallback)((e=>{const a=e.target.value,{extractedEmails:s,newInputValue:n}=(0,l().Ct)(a),i=s.map((e=>({type:"newUser",value:{email:e},source:"email"}))).filter((e=>!(0,m().mQ)({target:e,permissionsInviteStore:t}))).filter(g().eL),o=[...f,...i];y({newInviteTargets:o,newInputValue:n,inputFocus:"invitee"})}),[f,t,y]),b=(0,s.useCallback)((e=>{const t=f.filter((t=>t!==e));y({newInviteTargets:t})}),[f,y]),S=(0,s.useCallback)((()=>{const e=f.slice(0,-1);y({newInviteTargets:e})}),[f,y]),j=(0,i().IS)((()=>({tokenMenuItem:{borderRadius:6,padding:"6px 8px"}})),[]),A=f.map((e=>(0,p.jsx)(u().A,{target:e,onClickRemove:b},e.value.id)));return(0,p.jsx)(r().Ay,{focusInitial:!0,focus:o,showBorder:!0,format:r().le.Select,tokenWrapStyle:{gap:4},value:h,onChange:x,onRemoveLastToken:S,type:"email",placeholder:a.formatMessage({id:"spacePermissionsInviteEmailSection.tokenInput.placeholder",defaultMessage:"Search names or emails"}),tokens:A,focusAfterAnimation:!0,style:j.tokenMenuItem})}const f=function(e){const{permissionsInviteStore:t,disableAutoFocus:r,showCurrentUser:d}=e,c=(0,a(920198).L)(),u=e.parentStore||c,f=(0,n().K8)((()=>{var e;return"invitee"===(null===(e=t.state)||void 0===e?void 0:e.inputFocus)}),[t]),v=(0,s.useCallback)((()=>{const e=t.state.tokenQuery.trim();if((0,l().DT)(e)){const a=t.state.inviteTargets.filter(g().eL).filter(g().eL),s=t.state.inviteRole,n={type:"newUser",value:{email:e},source:"email"};if(!(0,m().mQ)({target:n,permissionsInviteStore:t})){const e=[...a,n];t.setState({...t.state,inviteTargets:e,inviteRole:s,tokenQuery:""})}}t.setState({...t.state,inputFocus:"none"})}),[t]),y=(0,s.useCallback)((e=>{t.setState({...t.state,inputFocus:"invitee"}),e.stopPropagation()}),[t]);(0,s.useEffect)((()=>{r||t.setState({...t.state,inputFocus:"invitee"})}),[t,r]);const x=(0,i().IS)((()=>({origin:{display:"flex",flexDirection:"column",width:"100%",gap:8,padding:2}})),[]);return u?(0,p.jsx)(o().zD,{trapFocus:!1,placementToOrigin:"bottom",alignmentToOrigin:"start",originGap:10,open:f,popupType:o().nl.Popup,sameWidthAsOrigin:!0,disableMouseCapture:!0,enableOutsideClickDismiss:!0,onDismiss:v,render:()=>(0,p.jsx)(a(897537).A,{permissionsInviteStore:t,store:u,shouldShowGroups:!1,sectionRenderLimit:4,membersOnly:!1,disableInvitedUsers:!1,hideCurrentUser:!d,hideTitle:!0,defaultUserTitle:"name_and_email_unless_right",performSearchRequest:e.performSearchRequest}),origin:(0,p.jsx)("div",{style:x.origin,onClick:y,children:(0,p.jsx)(h,{permissionsInviteStore:t})})}):null}},335260:(e,t,a)=>{a.d(t,{$:()=>u,N:()=>c});a(898992),a(354520),a(581454);var s=a(296540),n=()=>a(907258),i=()=>a(221844),o=()=>a(484714),r=()=>a(388821),l=()=>a(534177),d=a(474848);const c=(0,s.createContext)({organizationOwnerRecordCache:void 0,updateCacheWithRecordMap:e=>{},updateCacheWithRecordMaps:e=>{}});function u({children:e}){const t=(0,o().v3)(),[a,i]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{const e=g(t);i(e)}),[t]);const u=(0,s.useCallback)((e=>{var a;const s=null===(a=n().default.state.currentUserStore)||void 0===a?void 0:a.id;if(!s||!e.data.organizationOwnerRecordMap)return;if(!e.data.organizationOwnerRecordMap)return;const o=r().RecordMap.create(e.data.organizationOwnerRecordMap);i((e=>m({environment:t,currentUserId:s,prevCache:e,recordMap:o})))}),[t]),p=(0,s.useCallback)((e=>{var a;const s=null===(a=n().default.state.currentUserStore)||void 0===a?void 0:a.id;if(!s)return;const o=e.map((e=>{if(e.data.organizationOwnerRecordMap&&e.data.organizationOwnerRecordMap)return r().RecordMap.create(e.data.organizationOwnerRecordMap)})).filter(l().O9),d=r().RecordMap.merge(o);i((e=>m({environment:t,currentUserId:s,prevCache:e,recordMap:d})))}),[t]);return a?(0,d.jsx)(c.Provider,{value:{organizationOwnerRecordCache:a,updateCacheWithRecordMap:u,updateCacheWithRecordMaps:p},children:e}):null}function m(e){const{environment:t,currentUserId:a,prevCache:s,recordMap:n}=e;if(!s)return g(t);for(const{pointer:i,model:o}of n)s.setModelAndRole({pointer:i,userId:a},o,"editor");return g(t,s.data)}function g(e,t){const a=new(i().A)({name:"organizationSettingsConsoleCache",data:t});return a.addCacheFallback(e.defaultRecordCache.inMemoryRecordCache),a}c.displayName="OrganizationCacheContext"},355049:(e,t,a)=>{a.d(t,{E:()=>E});a(944114),a(898992),a(354520),a(581454);var s=a(296540),n=()=>a(564884),i=()=>a(300474),o=()=>a(692031),r=()=>a(212497),l=()=>a(484714),d=()=>a(852507),c=()=>a(401497),u=()=>a(394888),m=()=>a(699143),g=()=>a(249046),p=()=>a(89002),h=()=>a(807449),f=()=>a(493552),v=()=>a(352321),y=()=>a(784892),x=()=>a(842599),b=()=>a(742852),S=()=>a(69708),j=()=>a(100622),A=()=>a(241021),w=()=>a(838239),_=()=>a(881690),M=()=>a(726637);function C(e){return e?`${M().A.domainBaseUrl}/signup/referral/${e.referral_code}`:"Error copying the invite link."}var T=()=>a(898255),k=()=>a(550729),I=a(474848);function N(){const e=B();return(0,I.jsx)(w().Y,{iconAndTitle:(0,I.jsx)(f().D,{styleKey:"titleSmSemibold",colorVariant:"primary",style:e.alignment,children:(0,I.jsx)(S().sA,{id:"referrals.inviteModal.title",defaultMessage:"Send referrals"})}),description:(0,I.jsx)(f().D,{styleKey:"bodyRegular",colorVariant:"secondary",style:e.alignment,children:(0,I.jsx)(S().sA,{id:"referrals.inviteModal.description",defaultMessage:"Type or paste in emails, separated by commas. Your referrals will need to sign up with a business email to redeem their offer"})})})}function D({query:e,focus:t,tokens:a,onQueryChange:n,onKeyDown:i,onFocus:o,onRemoveLastToken:r,onRemoveToken:l}){const d=B(),c=(0,s.useCallback)((()=>a.map((e=>(0,I.jsx)(_().A,{showRemoveButton:!0,onClickRemove:()=>l(e.key),isSingle:!0,format:y().NY.Medium,value:e.value,shouldShrink:!0},e.key)))),[a,l]);return(0,I.jsxs)(m().Y1,{gap:8,direction:"vertical",children:[(0,I.jsx)(f().D,{styleKey:"captionMedium",colorVariant:"secondary",children:(0,I.jsx)(S().sA,{id:"referrals.inviteModal.emailAddresses.label",defaultMessage:"Email addresses"})}),(0,I.jsx)(v().Ay,{focus:t,focusInitial:!1,format:v().le.Share,showBorder:!0,onRemoveLastToken:r,value:e,onChange:n,onClick:o,onKeyDown:i,placeholder:"Invite people by email",tokens:c(),tokenWrapStyle:d.tokensContainer,inputStyle:d.textInput,style:d.inputContainer})]})}function P({onCopyLink:e,onSendInvite:t}){const a=[{buttonType:"primary",label:(0,I.jsx)(S().sA,{id:"referrals.inviteModal.sendInvite",defaultMessage:"Send invite"}),onClick:t}],s=[{buttonType:"secondary",baseStyleOverride:{margin:"0 0 0 -8px"},label:(0,I.jsxs)(g().Ye,{alignItems:"center",gap:6,style:{marginInlineStart:-4},children:[(0,I.jsx)(h().I,{icon:b().linkIcon,colorPalette:"blue",colorVariant:"accentPrimary"}),(0,I.jsx)(f().D,{colorPalette:"blue",colorVariant:"secondary",children:(0,I.jsx)(S().sA,{id:"referrals.inviteModal.copyLink",defaultMessage:"Copy link"})})]}),onClick:e}];return(0,I.jsx)(A().a,{layout:"horizontal-space-between",primaryButtons:a,secondaryButtons:s,secondaryButtonTooltip:(0,I.jsx)(S().sA,{id:"referrals.inviteModal.copyLinkTooltip",defaultMessage:"You can also copy and share this special link"})})}function E({isOpen:e,onClose:t,source:a}){const c=B(),m=(0,l().v3)(),[g,h]=(0,s.useState)(""),[f,v]=(0,s.useState)(!1),{tokens:y,addEmailToken:b,removeToken:S,removeLastToken:j}=function(){const[e,t]=(0,s.useState)([]);return{tokens:e,addEmailToken:(0,s.useCallback)((e=>{const a=e.trim();return!(!a||!(0,x().DT)(a)||(t((e=>[...e,{key:`email-${Date.now()}`,value:a}])),0))}),[]),removeToken:(0,s.useCallback)((e=>{t((t=>t.filter((t=>t.key!==e))))}),[]),removeLastToken:(0,s.useCallback)((()=>{t((e=>e.slice(0,-1)))}),[])}}(),A=(0,k().z)("get_or_create"),w=(0,i().r)();(0,d().w)((()=>{w&&e&&(0,n().u)({environment:m,event:{eventName:"referral_invite_modal_opened",eventProperties:{space_id:w,path:a}}})}));const _=(0,s.useCallback)((e=>{"Enter"===e.key&&g.trim()&&(e.preventDefault(),b(g)&&h(""))}),[g,b]),M=(0,s.useCallback)((e=>{const t=e.target.value;if(t.endsWith(",")||t.endsWith(" ")){const e=t.slice(0,-1);if(b(e))return void h("")}h(t)}),[b]),E=(0,s.useCallback)((()=>{v(!0)}),[]),R=(0,s.useCallback)((async()=>{const[e,t]=await Promise.all([(0,o().r)(),(0,r().jd)()]);t({environment:m,stringValue:C(A),copiedMessage:e.copiedLinkToClipboard}),w&&(0,n().u)({environment:m,event:{eventName:"click_copy_link_referral",eventProperties:{space_id:w,path:a}}})}),[m,A,w,a]),V=(0,s.useCallback)((async()=>{const e=y.map((e=>e.value));g.trim()&&b(g)&&(e.push(g.trim()),h("")),w&&(0,n().u)({environment:m,event:{eventName:"send_invite_referral_emails",eventProperties:{space_id:w,email_count:e.length,path:a}}}),await(0,T().J7)({environment:m,emails:e,referralEntry:A}),t()}),[m,y,A,t,b,g,h,w,a]),L=(0,s.useCallback)((()=>(0,I.jsx)(p().t,{sizeRange:c.sizeRange,header:(0,I.jsx)(N,{}),children:(0,I.jsx)(D,{query:g,focus:f,tokens:y,onQueryChange:M,onKeyDown:_,onFocus:E,onRemoveLastToken:j,onRemoveToken:S}),footer:(0,I.jsx)(P,{onCopyLink:R,onSendInvite:V})})),[c.sizeRange,g,f,y,M,_,E,j,S,R,V]);return(0,I.jsx)(u().s,{isOpen:e,onClosed:t,showCloseIcon:!0,onDismiss:t,render:L})}function B(){return(0,c().IS)((()=>({alignment:{alignItems:"flex-start",textAlign:"start",width:"100%"},sizeRange:{minWidth:460,maxWidth:500,minHeight:200,maxHeight:void 0},textInput:{color:j().Tj.text.primary},tokensContainer:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:4,overflowY:"auto"},inputContainer:{minHeight:56,padding:"8px 12px"}})),[])}},360007:(e,t,a)=>{a.d(t,{S:()=>l,i:()=>d});a(296540);var s=()=>a(287188),n=()=>a(69708),i=()=>a(881575),o=()=>a(547149),r=a(474848);function l({isEnabled:e,onToggle:t,disabled:a}){return(0,r.jsx)(i().y,{title:(0,r.jsx)(n().sA,{id:"identityAndProvisioning.scim.suppressScimInviteEmails.title",defaultMessage:"Suppress invite emails from SCIM provisioning"}),byline:(0,r.jsx)(n().sA,{id:"identityAndProvisioning.scim.suppressScimInviteEmails.message",defaultMessage:"Control if users will receive invite emails when provisioned by SCIM to workspaces and groups"}),item:(0,r.jsx)(s().A,{on:e,onClick:t,disabled:a})})}function d({environment:e,areScimInviteEmailsSuppressed:t,spaceStore:a}){o().createAndCommit({userAction:"ScimSection.SuppressScimInviteEmailsSetting",environment:e,canUndo:!0,perform:e=>{o().applyOperation({store:a,operation:{pointer:a.pointer,path:["settings","are_scim_invite_emails_suppressed"],command:"set",args:t},transaction:e})}})}},366951:(e,t,a)=>{a.d(t,{A:()=>n});a(296540);var s=a(474848);const n=function(){return(0,s.jsx)("div",{style:{},children:(0,s.jsx)(a(298697).A,{paragraphs:[{lineHeight:40,lineMargin:5,sectionWidths:[100],repeat:8,sectionMargin:10}]})})}},378941:(e,t,a)=>{a.d(t,{J7:()=>u,XC:()=>g,hs:()=>m});a(898992),a(354520),a(581454);var s=()=>a(700511),n=()=>a(165358),i=()=>a(792071),o=()=>a(277816),r=()=>a(798880),l=()=>a(229833),d=()=>a(534177),c=()=>a(769864);function u({trustedDomainIds:e,spaceStore:t}){return e.map((e=>{const a=s().L.createChildStore(t,{table:o().A,id:e,spaceId:t.id});if(a.canRead())return a})).filter(d().O9)}async function m({environment:e,spaceId:t,currentUserId:a,organizationId:s}){const i=await c().callApi({eventName:"getTrustedDomainsNumberOfMembers",environment:e,data:{spaceId:t,organizationId:s},userId:a});return"failed"===i.type?(n().rateLimitedLog({from:"trustedDomainHelpers",level:"error",type:"getTrustedDomainsNumberOfMembersForSpaceFailed",spaceId:t,actor:a?{id:a,table:r().oo}:void 0,error:(0,l().convertErrorToLog)(i.error)}),[]):i.data.results}async function g({environment:e,spaceId:t}){const a=await c().callApi({eventName:"getTrustedDomainsForSpace",environment:e,data:{spaceId:t}});if("success"!==a.type)return[];return a.data.results.filter((e=>e.domain_link_sharing_enabled)).map((e=>i().Bj6.fromValue(o().A,e)))}},387964:(e,t,a)=>{a.d(t,{S:()=>i});a(296540);var s=a(474848);const n={viewBox:"0 0 20 20",fittedViewBox:"3.42 3.97 12.16 12.06",directional:!0,svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{d:"M3.608 10.442a.625.625 0 0 1 0-.884l5.4-5.4a.625.625 0 0 1 .884.884L4.934 10l4.958 4.958a.625.625 0 1 1-.884.884z"}),(0,s.jsx)("path",{d:"m14.508 4.158-5.4 5.4a.625.625 0 0 0 0 .884l5.4 5.4a.625.625 0 1 0 .884-.884L10.434 10l4.958-4.958a.625.625 0 1 0-.884-.884"})]})},i=(0,a(340498).wt)("arrowChevronDoubleBackward",n,"default")},404302:(e,t,a)=>{a.d(t,{p:()=>s});const s=["private","shared_internally","shared_externally","shared_to_web"]},430949:(e,t,a)=>{a.d(t,{_H:()=>f,a_:()=>v});a(296540);var s=()=>a(484714),n=()=>a(590526),i=()=>a(401497),o=()=>a(849255),r=()=>a(940148),l=()=>a(798880),d=()=>a(69708),c=()=>a(100622),u=()=>a(284371),m=()=>a(566468),g=()=>a(453697),p=a(474848);const h=28;function f({userId:e,showEmailByline:t,badge:a,isNotMultiSelectable:f,rightContent:y,overrides:x,useThinTitle:b=!0}){const S=(0,d().tz)(),j=(0,s().v3)(),A=(0,i().IS)((()=>({iconStyle:{color:c().Tj.text.tertiary,fontWeight:u().Wy.medium}})),[]),w=(0,n().K8)((()=>{const t=new(o().L)(j,{table:l().oo,id:e});return{userStore:t,isReady:t.isReady(),userName:t.getDisplayName(S),email:t.getEmail()}}),[j,e,S]);return null!=w&&w.isReady?(0,p.jsx)(m().s7,{useThinTitle:b,useSecondaryColorTitle:!Boolean(w.userName),badge:a,title:(null==x?void 0:x.name)??w.userName,byline:t?(null==x?void 0:x.email)??w.email:void 0,rightContent:y,icon:(0,p.jsx)(g().A,{size:h,userStore:w.userStore,iconStyle:A.iconStyle}),summaryStyles:{paddingBlock:8,overflow:"hidden"},containerStyles:{width:f?"100%":`calc(100% - ${r().Gr}px)`}}):(0,p.jsx)(v,{})}function v(e){const t=(0,i().IS)((()=>({icon:{borderRadius:"100%",height:e.iconSize??h,width:e.iconSize??h,marginInlineStart:-4,...e.iconStyles},title:{width:120}})),[e.iconSize,e.iconStyles]);return(0,p.jsx)(m().mf,{includeIcon:!0,iconStyles:t.icon,titleStyles:t.title})}},436860:(e,t,a)=>{a.d(t,{N:()=>G,A:()=>K});a(581454);var s=a(296540),n=()=>a(968526),i=()=>a(484714),o=()=>a(590526),r=()=>a(401497),l=()=>a(26697),d=()=>a(302501),c=()=>a(301608),u=()=>a(69708),m=()=>a(100622),g=()=>a(284371),p=()=>a(76590),h=()=>a(298697),f=()=>a(690197),v=()=>a(59976),y=()=>a(232930),x=()=>a(997583),b=()=>a(307212),S=()=>a(714953),j=()=>a(286387),A=()=>a(661923),w=()=>a(249117),_=()=>a(655546),M=()=>a(155712),C=()=>a(20953),T=()=>a(550848),k=a(474848);const I=640;function N({data:e,loading:t,error:a,daysFilter:s,setDaysFilter:n}){const i=(0,u().tz)(),[o,m]=(0,x().z)(),p=(0,r().IS)((()=>({title:{fontWeight:g().Wy.medium,fontSize:16,marginBlock:"8px 4px",display:"flex",alignItems:"center"},container:{display:"flex",flexDirection:"column",gap:16},helpInfo:{marginInlineStart:4},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},summaryCard:{height:70},cardContainer:{justifyContent:"flex-start",gap:18},cardTextContainer:{alignItems:"flex-start"}})),[]),{activeMembersCount:h,previousActiveMembersCount:v,activeGuestsCount:b,previousActiveGuestsCount:S}=e;return(0,k.jsxs)("div",{style:p.container,ref:o,children:[(0,k.jsxs)("div",{style:p.titleContainer,children:[(0,k.jsxs)(d().A,{style:p.title,children:[(0,k.jsx)(u().sA,{id:"settings.workspaceAnalytics.usersTab.userEngagement.title",defaultMessage:"User engagement"}),(0,k.jsx)(l().m,{placement:"bottom",render:e=>(0,k.jsx)(f().A,{...e,href:(0,y().x)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:p.helpInfo}),renderTooltip:()=>"all_time"!==s?(0,k.jsx)(u().sA,{id:"settings.workspaceAnalytics.usersTab.userEngagement.tooltip.lastDays",defaultMessage:"Active members and guests have viewed at least one page within the {dateRange}",values:{dateRange:i.formatMessage(c().Yr[s])}}):(0,k.jsx)(u().sA,{id:"settings.workspaceAnalytics.usersTab.userEngagement.tooltip.allTime",defaultMessage:"Active members and guests have viewed at least one page in the workspace"})})]}),(0,k.jsx)(C().Z,{currentFilter:s,onChangeFilter:n,hideAllTime:!0})]}),(0,k.jsxs)(w().xA,{gap:16,children:[(0,k.jsx)(w().LX,{row:1,col:1,children:(0,k.jsx)(M().a,{style:p.summaryCard,loading:t,error:a,title:(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.activeMembersCount",defaultMessage:"{activeMembersCount} active members",values:{activeMembersCount:(0,k.jsx)(_()._,{abbreviateNumber:m<I,num:h})}}),byline:void 0!==v?(0,k.jsx)(T().Z,{userType:"members",daysFilter:s,count:h,previousCount:v}):null})}),(0,k.jsx)(w().LX,{row:1,col:2,children:(0,k.jsx)(M().a,{style:p.summaryCard,loading:t,error:a,title:(0,k.jsx)(u().sA,{id:"workspaceAnalytics.overview.userEngagement.activeGuestsCount",defaultMessage:"{activeGuestsCount} active guests",values:{activeGuestsCount:(0,k.jsx)(_()._,{abbreviateNumber:m<I,num:b})}}),byline:void 0!==S?(0,k.jsx)(T().Z,{userType:"guests",daysFilter:s,count:b,previousCount:S}):null})})]})]})}a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(898992),a(354520);var D=()=>a(230711),P=()=>a(907258),E=()=>a(675133),B=()=>a(940148),R=()=>a(187174),V=()=>a(848538),L=()=>a(769864),z=()=>a(444179);const F=(0,u().YK)({page_views:{id:"workspaceAnalytics.usersTab.usersTable.pageViews.tooltip",defaultMessage:"Total number of page views for the user across all pages in the workspace"},page_edits:{id:"workspaceAnalytics.usersTab.usersTable.pageEdits.tooltip",defaultMessage:"Total number of page edits for the user across all pages in the workspace"}}),O=(0,u().YK)({user:{id:"spaceAnalyticsUsersTab.column.user",defaultMessage:"User"},page_views:{id:"spaceAnalyticsUsersTab.column.pageViews",defaultMessage:"Page views"},page_edits:{id:"spaceAnalyticsUsersTab.column.pageEdits",defaultMessage:"Page edits"},last_active:{id:"spaceAnalyticsUsersTab.column.lastActive",defaultMessage:"Last active"},teams:{id:"spaceAnalyticsUsersTab.column.teams",defaultMessage:"Teamspaces"}}),U={user:{id:"user",renderCell:function(e){const{userStore:t,role:n}=e,i=(0,r().IS)((()=>({container:{height:52}})),[]);(0,s.useEffect)((()=>{t.load()}),[t]);return(0,o().K8)((()=>t.isReady()),[t])?(0,k.jsx)(a(735230).A,{containerStyle:i.container,actorStore:t,spaceRole:n&&(0,V().jM)(n)}):(0,k.jsx)(a(116477).a,{})},headerTitle:E().A.formatMessage(O.user),widthData:{width:100},sortable:!1},page_views:{id:"page_views",renderCell:function(e){const{page_views:t}=e;if(void 0===t)return(0,k.jsx)(l().m,{placement:"bottom",render:e=>(0,k.jsx)("div",{...e,children:(0,k.jsx)(a(807449).I,{icon:a(566910).e,colorVariant:"tertiary"})}),renderTooltip:e=>(0,k.jsx)(u().sA,{id:"spaceAnalyticsUsersTab.optedOutUser.icon.tooltip",defaultMessage:"User has disabled page view tracking"})});return(0,k.jsx)(d().A,{children:t})},headerTitle:(0,k.jsx)(z().Z,{tooltipMessageDescriptor:F.page_views,columnHeader:O.page_views}),widthData:{width:80},sortable:!0},page_edits:{id:"page_edits",renderCell:function(e){const{page_edits:t}=e;return(0,k.jsx)(d().A,{children:t})},headerTitle:(0,k.jsx)(z().Z,{tooltipMessageDescriptor:F.page_edits,columnHeader:O.page_edits}),widthData:{width:80},sortable:!0},last_active:{id:"last_active",renderCell:function(e){const t=e.last_active;let s;s=t?(0,k.jsx)(a(625383).d,{dateTs:t}):(0,k.jsx)(d().A,{isSecondaryColor:!0,children:(0,k.jsx)(u().sA,{id:"settings.workspaceAnalytics.usersTab.userTable.lastActiveTimestamp.noLastActive",defaultMessage:"No activity"})});return(0,k.jsx)("div",{children:s})},headerTitle:E().A.formatMessage(O.last_active),widthData:{width:50},sortable:!0},teams:{id:"teams",renderCell:function(e){const{teamStores:t,userStore:s,role:n,userPermissionGroupIds:i,spaceStore:o}=e;if(!n)return(0,k.jsx)(d().A,{children:(0,k.jsx)(u().sA,{id:"settings.workspaceAnalytics.usersTab.teamsColumn.guest",defaultMessage:"None"})});return(0,k.jsx)(a(37625).Ay,{spaceStore:o,teamStores:t,memberId:s.id,userPermissionGroupIds:i})},headerTitle:E().A.formatMessage(O.teams),widthData:{width:50},sortable:!1}};const W=(0,a(534177).uv)(U).map((e=>U[e])),H=25;function q(e){const t=(0,i().v3)(),[a,n]=(0,s.useState)(H),{teamStores:l,usersAndStats:g,filter:h,onUserTabFilterChange:f,usersAndStatsError:v,spaceStore:y}=e,{userRoles:x,spaceId:b}=(0,o().K8)((()=>{const{sidebarSpaceStore:e}=P().default.state,t=g.map((e=>e.userStore.id)),a=null==e?void 0:e.id,s={};for(const n of t){const t=(0,D().sE)(e,n),a=null==t?void 0:t.getMembershipType();if(a&&"none"!==a&&"page_guest"!==a){const e=(0,V().C4)(a);s[n]=e}}return{userRoles:s,spaceId:a}}),[g]),[{value:S}]=(0,R().Yb)((async()=>{if(void 0===b)return{};const e=await L().callCellCompatibleApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:t,data:{spaceId:b,userIds:g.map((e=>e.userStore.id))},cellNavigation:{cellId:void 0,spaceId:b}});return"success"===e.type?e.data.userToGroupMap:{}}),[t,b,g],{debugName:"userToPermissionGroupIds",debounce:300,throttle:1e3}),[j,A]=(0,s.useState)({column:U.last_active,sortAscending:!1}),w=(0,s.useCallback)((e=>{p().Jv(t,{column:e.column.id,isAscending:e.sortAscending}),A(e)}),[A,t]),_=g.map((({userStore:e,stats:t})=>({id:t.userId,userStore:e,teamStores:l,isClickable:!1,last_active:t.lastActive,page_views:t.numPageViews,page_edits:t.numPageEdits,role:x[t.userId],userPermissionGroupIds:new Set((null==S?void 0:S[t.userId])||[]),spaceStore:y}))).sort(function(e){switch(e.column.id){case"last_active":return(t,a)=>(0,c().mj)(t.last_active,a.last_active,e.sortAscending);case"page_views":return(t,a)=>(0,c().xV)(t.page_views,a.page_views,e.sortAscending);case"page_edits":return(t,a)=>e.sortAscending?t.page_edits-a.page_edits:a.page_edits-t.page_edits;default:return(e,t)=>0}}(j)),M=(0,s.useMemo)((()=>_.slice(0,a)),[_,a]),T=(0,r().IS)((()=>({error:{color:m().oZ.red},dateFilterPill:{display:"flex",marginTop:10,marginBottom:15,flexFlow:"row",alignItems:"center"},timeFilterDescription:{marginInlineEnd:5}})),[]);const I=(0,s.useCallback)((e=>{p().Jy(t,{daysFilter:e}),f({tableFilter:e})}),[t,f]),N=(0,s.useMemo)((()=>(0,B().rC)({columnRenderInfo:W,containerMarginTop:0})),[]);return(0,k.jsxs)(k.Fragment,{children:[v?(0,k.jsx)(d().A,{isMultiline:!1,style:T.error,children:v}):void 0,(0,k.jsxs)("div",{style:T.dateFilterPill,children:[(0,k.jsx)(d().A,{isSecondaryColor:!0,style:T.timeFilterDescription,children:(0,k.jsx)(u().sA,{id:"workspaceAnalytics.timeFilter.description",defaultMessage:"Views and edits from"})}),(0,k.jsx)(C().Z,{currentFilter:h,onChangeFilter:I,hideAllTime:!0})]}),(0,k.jsx)(B().WE,{allowHorizontalScroll:!0,hideHeaderRowPadding:!0,setStickyHeaderRow:!0,maxHeight:500,sortState:j,onSortStateChanged:w,columnRenderInfo:W,rows:M,renderNoRowsComponent:()=>(0,k.jsx)("div",{children:"N/A"}),styles:N,loadMoreMethod:{type:"scroll",onLoadMore:function(){a<g.length&&n(a+H)}}})]})}function K({spaceStore:e,teamStores:t,usersTabData:a,onUserTabFilterChange:n,userEngagement:m}){var h,v;const w=(0,u().tz)(),[_,M]=(0,x().z)(),C=(0,r().IS)((()=>({container:{display:"flex",flexDirection:"column",gap:16},sectionTitle:{fontWeight:g().Wy.medium,fontSize:16},sectionTitleLeft:{marginBlock:"8px 4px",marginBottom:5,display:"flex",alignItems:"center"},helpInfo:{marginInlineStart:4},tableHeader:{marginTop:20,flexDirection:"row",display:"flex",justifyContent:"space-between",alignItems:"end"}})),[]),T=(0,i().v3)(),I=(0,s.useCallback)((e=>{p().wy(T,{daysFilter:e});n({graphFilter:"all_time"===e?"last_90_days":e}),m.setDaysFilter(e)}),[n,m,T]),D=(0,o().K8)((()=>e.getName()),[e]);if("NotFoundError"===(null==a||null===(h=a.usersAndStatsError)||void 0===h?void 0:h.name)||"NotFoundError"===(null===(v=m.error)||void 0===v?void 0:v.name))return(0,k.jsx)(j().H,{type:"empty",spaceName:D});const P=Math.floor(M-8);return(0,k.jsxs)("div",{style:C.container,children:[(0,k.jsx)(N,{data:m.data,loading:m.loading,error:m.error,daysFilter:m.daysFilter,setDaysFilter:I}),(0,k.jsx)(G,{usersTabData:a,daysFilter:m.daysFilter,intl:w,containerRef:_,widthOfGraph:P}),(0,k.jsxs)("div",{style:C.tableHeader,children:[(0,k.jsxs)("div",{style:C.sectionTitleLeft,children:[(0,k.jsx)(d().A,{style:C.sectionTitle,children:(0,k.jsx)(u().sA,{id:"settings.workspaceAnalytics.usersTab.allUsers.title",defaultMessage:"All members in Notion"})}),(0,k.jsx)(l().m,{placement:"bottom",render:e=>(0,k.jsx)(f().A,{...e,href:(0,y().x)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:C.helpInfo}),renderTooltip:()=>a&&"all_time"!==a.tableFilter?(0,k.jsx)(u().sA,{id:"settings.workspaceAnalytics.allMembers.tooltip.lastDays",defaultMessage:"Per member workspace activity over the {dateRange}",values:{dateRange:w.formatMessage(c().Yr[a.tableFilter])}}):(0,k.jsx)(u().sA,{id:"settings.workspaceAnalytics.allMembers.tooltip.allTime",defaultMessage:"All time per member workspace activity"})})]}),a?(0,k.jsx)(S().L,{analyticsType:A().e.Users,filters:{daysFilter:a.tableFilter}}):null]}),a?(0,k.jsx)(q,{spaceStore:e,teamStores:t,filter:a.tableFilter,usersAndStats:a.usersAndStats,onUserTabFilterChange:n,usersAndStatsError:a.usersAndStatsError&&b().fP(a.usersAndStatsError,w)}):null]})}function G({usersTabData:e,daysFilter:t,containerRef:a,widthOfGraph:s,intl:n,displayBoxStyle:i,graphTitleStyle:o}){return(0,k.jsx)(Y,{style:i,children:(0,k.jsx)("div",{ref:a,children:e?(0,k.jsx)($,{width:s,dailyUsersData:e.dailyUsersData,userEngagementDaysFilter:t,daysFilter:e.graphFilter,dailyUsersError:e.dailyUsersError&&b().fP(e.dailyUsersError,n),graphTitleStyle:o}):(0,k.jsx)(Q,{})})})}function Y(e){const t=(0,r().IS)((()=>({border:{borderRadius:4,overflow:"hidden",border:`1px solid ${m().Tj.border.secondaryTranslucent}`,backgroundColor:m().Tj.background.primary,color:m().Tj.text.primary,padding:20,...e.style}})),[e.style]);return(0,k.jsx)("div",{style:t.border,children:e.children})}function $(e){const t=(0,u().tz)(),{width:a,dailyUsersData:i,userEngagementDaysFilter:p,daysFilter:h,dailyUsersError:x}=e,b=(0,r().IS)((()=>({graphHeader:{marginBottom:10,display:"flex",justifyContent:"space-between"},graphTitle:{fontSize:g().J.UIRegular.desktop,fontWeight:"bolder",display:"flex",alignItems:"center",height:24,...e.graphTitleStyle},helpInfo:{marginInlineStart:4},emptyGraphBody:{textAlign:"center",paddingTop:50,paddingBottom:50},error:{color:m().oZ.red},graphSubLabel:{paddingTop:4,color:"grey"}})),[e.graphTitleStyle]),{blueLayer:S}=(0,n().useTimeSeriesPalette)(),j=(0,o().K8)((()=>{if(0===i.length)return;return{startDate:i[0].ds,endDate:i[i.length-1].ds}}),[i]),A=(0,s.useMemo)((()=>i.map((e=>({ds:e.ds,values:{active_members:e.active_members||0}})))),[i]);let w;return w=!j||i.length<3?(0,k.jsx)("div",{style:b.emptyGraphBody,children:(0,k.jsx)(d().A,{isSecondaryColor:!0,children:(0,k.jsx)(u().sA,{id:"workspaceAnalytics.usersOverTime.emptyGraph",defaultMessage:"Not enough data to display graph"})})}):(0,k.jsx)(v().b,{startDate:j.startDate,endDate:j.endDate,width:a,data:A,height:300,layers:[{key:"active_members",...S,renderLabel:e=>(0,k.jsx)(u().sA,{id:"workspaceAnalytics.usersOverTime.activeMembers",defaultMessage:"{activeMembers, plural, one {1 active member} other {{activeMembers} active members}}",values:{activeMembers:e}})}],renderTooltipSubLabel:()=>(0,k.jsx)("div",{style:b.graphSubLabel,children:(0,k.jsx)(u().sA,{id:"workspaceAnalytics.usersOverTime.activeMembers.sublabel",defaultMessage:"Viewed a page in the {dateRange}",values:{dateRange:t.formatMessage(c().Yr[h])}})})}),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{style:b.graphHeader,children:(0,k.jsxs)(d().A,{style:b.graphTitle,children:[(0,k.jsx)(u().sA,{id:"workspaceAnalytics.membersOverTime.title",defaultMessage:"Active members over time"}),"all_time"===p?(0,k.jsx)(l().m,{placement:"bottom",render:e=>(0,k.jsx)(f().A,{...e,href:(0,y().x)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:b.helpInfo}),renderTooltip:()=>(0,k.jsx)(u().sA,{id:"settings.workspaceAnalytics.membersOverTime.allTimeTooltip",defaultMessage:"All Time selection shows members who have viewed a page in the last 90 days."})}):void 0]})}),x?(0,k.jsx)(d().A,{isMultiline:!1,style:b.error,children:x}):void 0,w]})}function Q(){return(0,k.jsxs)("div",{children:[(0,k.jsx)(h().A,{paragraphs:[{lineHeight:18,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:0}]}),(0,k.jsx)(h().A,{paragraphs:[{lineHeight:300,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:12}]})]})}},438139:(e,t,a)=>{a.d(t,{Co:()=>sa,Sr:()=>ga});var s=a(296540),n=()=>a(664594),i=()=>a(300474),o=()=>a(920198),r=()=>a(907258),l=()=>a(59226),d=()=>a(242422),c=()=>a(484714),u=()=>a(852507),m=()=>a(590526),g=()=>a(401497),p=()=>a(609679),h=()=>a(295633),f=()=>a(574359),v=()=>a(741615),y=()=>a(983610),x=()=>a(699143),b=()=>a(695115),S=()=>a(31511),j=()=>a(406094),A=()=>a(160432),w=()=>a(26697),_=()=>a(302501),M=()=>a(584262),C=()=>a(179034),T=()=>a(69708),k=()=>a(100622),I=()=>a(209199),N=()=>a(966505),D=()=>a(745638),P=()=>a(769864),E=()=>a(920093),B=()=>a(384944),R=()=>a(706024);const V=(0,a(583835).Dv)("deleteSpace");var L=()=>a(357625),z=()=>a(496414);const F=(0,T().YK)({deletingWorkspace:{id:"spaceActions.deleteSpace.deletingWorkspace",defaultMessage:"Deleting workspace…"}});var O=()=>a(185631);var U=()=>a(76974),W=()=>a(278223),H=()=>a(223034),q=()=>a(249117),K=()=>a(187820),G=()=>a(656144),Y=()=>a(208993),$=()=>a(702723),Q=a(474848);function J(e){const{activeExportsStoreState:t,spaceStore:a,handleExportClick:s}=e,n=(0,m().K8)((()=>null==a?void 0:a.getName()),[a]),i=(0,T().tz)();return(0,Q.jsx)($().A,{spaceStore:a,type:"custom",title:(0,Q.jsxs)(x().Y1,{direction:"horizontal",gap:2,align:"center-left",children:[i.formatMessage(Z.workspaceContent),(0,Q.jsx)(Y().W,{tooltipTitle:i.formatMessage(Z.tooltipTitle)})]}),caption:i.formatMessage(Z.description,{spaceName:n}),customButton:(0,Q.jsx)(j().A,{size:"md",onClick:s,disabled:Boolean(t.count),children:i.formatMessage(Z.exportButton)})})}const Z=(0,T().YK)({workspaceContent:{id:"spaceBasicSettings.exportContentSettingsItem.title",defaultMessage:"Workspace content"},tooltipTitle:{id:"spaceBasicSettings.exportContentSettingsItem.tooltipTitle",defaultMessage:"Learn More"},description:{id:"spaceBasicSettings.exportContentSection.description",defaultMessage:"Export all pages in {spaceName} as HTML, Markdown, CSV or PDF"},exportButton:{id:"spaceBasicSettings.exportContentSection.button",defaultMessage:"Export"}}),X=function({handleExportClick:e}){const t=(0,m().O$)(r().AppStoreSidebarSpaceStore),n=(0,m().O$)(a(47131).A),i=(0,c().v3)();return(0,s.useEffect)((()=>{G().X({environment:i,spaceId:null==t?void 0:t.id})}),[null==t?void 0:t.id,i]),(0,Q.jsx)(J,{activeExportsStoreState:n,spaceStore:t,handleExportClick:e})};var ee=()=>a(690197);a(581454);function te(){return(navigator.languages?navigator.languages.map((e=>e.toLowerCase())):navigator.language?[navigator.language.toLowerCase()]:navigator.userLanguage?[navigator.userLanguage.toLowerCase()]:[]).map((e=>e.split("-")[0]))}const ae=["ar","az","he","fa","ur"];const se=function(e){const{style:t,translations:a}=e,s=te();for(const n of s){const e=a[n];if(e){const a=ae.includes(n);return(0,Q.jsx)("div",{style:{...a&&{direction:"rtl"},...t},children:e})}}return null};var ne=()=>a(843878),ie=()=>a(8178),oe=()=>a(726637),re=()=>a(30537),le=()=>a(250910),de=()=>a(118307),ce=()=>a(807449),ue=()=>a(493552),me=()=>a(373009),ge=()=>a(324254),pe=()=>a(534177),he=()=>a(843224),fe=()=>a(579627),ve=()=>a(857783),ye=()=>a(185544),xe=()=>a(211716),be=()=>a(404141),Se=()=>a(547149),je=()=>a(258285),Ae=(a(898992),a(354520),()=>a(98126)),we=()=>a(81068),_e=()=>a(663639),Me=()=>a(736847),Ce=()=>a(187174),Te=()=>a(344417),ke=()=>a(617668),Ie=()=>a(305390),Ne=()=>a(696746),De=()=>a(106628);const Pe=3;function Ee(e){const{spaceStore:t,initialFocus:a,disabled:n,onPageSelect:i,onPageCreate:o}=e,[r,l]=(0,s.useState)(""),d=(0,g().IS)((()=>({wrapper:{width:250}})),[]),c=(0,s.useCallback)((e=>{i(e)}),[i]);return(0,Q.jsxs)("div",{style:d.wrapper,children:[(0,Q.jsx)(Be,{initialFocus:a,disabled:n,query:r,setQuery:l}),(0,Q.jsx)(Re,{query:r,onSelection:c,onCreateNew:o,spaceStore:t})]})}function Be(e){const{initialFocus:t,disabled:a,query:n,setQuery:i}=e,o=(0,T().tz)(),r=(0,g().IS)((()=>({wrapper:{paddingInline:12,paddingTop:8},input:{paddingInlineStart:4}})),[]),l=(0,s.useCallback)((e=>{i(e.target.value)}),[i]);return(0,Q.jsx)("div",{style:r.wrapper,children:(0,Q.jsx)(S().A,{type:"text",focusInitial:t,disabled:a,onChange:l,format:"small",style:r.input,value:n,left:(0,Q.jsx)(ce().I,{icon:Te().magnifyingGlassSmallIcon,size:"sm"}),placeholder:o.formatMessage({id:"spaceBasicSettings.gettingStarted.searchPlaceholder",defaultMessage:"Filter…"})})})}function Re(e){const{query:t,onSelection:a,onCreateNew:n,spaceStore:i}=e,o=(0,T().tz)(),r=(0,c().v3)(),[{value:l,status:d}]=(0,Ce().Yb)((async()=>(await De().T.searchActions.load()).searchPagesInSpace({environment:r,query:t,limit:20,spaceId:i.id,requireEditPermissions:!1,excludeTemplates:!0,peopleBlocksToInclude:"none",source:"relation_menu",boostRecentlyViewedPages:!1,spaceStore:i,filterOverrides:{includePublicPagesWithoutExplicitAccess:!1,requireEditPermissions:!1}})),[t,r,i]),u=(0,s.useMemo)((()=>({key:"create-template",render:e=>(0,Q.jsx)(we().A,{...e,ignoreLocalHoverState:!1,focused:!1,title:o.formatMessage({id:"spaceBasicSettings.gettingStarted.createPage",defaultMessage:"Create new page"}),icon:(0,Q.jsx)(ce().I,{icon:ke().plusIcon}),mobileIconStyle:{flex:"0 0 auto"}}),action:n})),[o,n]),g=(0,m().K8)((()=>{if("idle"===d||"pending"===d)return[{key:"results-loading-spinner",render:()=>(0,Q.jsx)(Ae().k,{}),action:()=>{}}];if(!l||0===l.results.length)return[{key:"empty-results",render:()=>(0,Q.jsx)(_().A,{isSmall:!0,style:{paddingInlineStart:8,paddingTop:4,paddingBottom:4},children:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.gettingStarted.noResults",defaultMessage:"No pages found"})}),action:()=>{}}];const e=l.results.filter((e=>{const t=new(h().B)(r,{table:C().ev,id:e.id,spaceId:e.spaceId});return!(0,Ne().lU)(t.getParentBlockStore())})).map((e=>{const t=new(h().B)(r,{table:C().ev,id:e.id,spaceId:e.spaceId});return{key:e.id,render:e=>(0,Q.jsx)(Ie().A,{store:t,...e}),action:()=>{a(e.id)}}}));return""===t?e.splice(0,Pe):e}),[r,l,a,d,t]);return(0,Q.jsx)(_e().A,{type:_e().O.Vertical,sections:[{key:"getting-started-search-results",render:e=>(0,Q.jsx)(Me().A,{...e}),items:g},{key:"getting-started-create-new",render:e=>(0,Q.jsx)(Me().A,{...e,topBorder:!0}),items:[u]}],initialFocus:void 0})}const Ve=(0,T().YK)({block_limit:{id:"spaceBasicSettings.gettingStartedPage.error.tooLarge",defaultMessage:"This page is too big to be used as a template. Please reduce the number of blocks, or select a smaller page."},page_permissions:{id:"spaceBasicSettings.gettingStartedPage.error.pagePermissions",defaultMessage:"Not everyone in the workspace can view your selected page. Please update the page permissions from the page’s Share menu."},user_permissions:{id:"spaceBasicSettings.gettingStartedPage.error.userPermissions",defaultMessage:"You do not have permissions to change this."}});function Le(e){const t=(0,T().tz)(),{spaceStore:a,spaceViewStore:n,gettingStartedPageStore:i,gettingStartedPageErrors:o}=e,r=(0,c().v3)(),l=(0,m().uB)(void 0,de().A),[d,u]=(0,s.useState)(o.length?t.formatMessage(Ve[o[0]]):void 0),g=(0,s.useCallback)((async()=>{he().Sg(r,{from:"settings_create"});const e=Se().createAndCommit({userAction:"customGettingStarted.createDuplicatablePage",environment:r,canUndo:!0,perform:e=>({newPage:ye().IT({environment:r,spaceStore:a,spaceViewStore:n,parent:"none",prepend:!0,title:t.formatMessage({id:"customGettingStartedPage.newPage.placeholderTitle",defaultMessage:"Welcome to {space}!"},{space:a.getName()??"Notion"}),transaction:e})})});await e.serverCommitResult;const{newPage:s}=e.performResult;if(!s)return;const i=Se().createAndCommit({userAction:"customGettingStarted.createDuplicatablePage",environment:r,canUndo:!1,perform:e=>{fe().wd({environment:r,store:s,permissionItems:[{type:"space_permission",role:"reader"}],transaction:e})}});await i.serverCommitResult,je().a({environment:r,spaceStore:a,pageId:s.id,from:"settings"}),he().bx(r,{cleared:!1,from:"settings_create"}),e.performResult.newPage&&ve().uK({environment:r,store:e.performResult.newPage,visitType:xe().ig.Link,pageVisitSource:M().y8.Create}),be().Ay.reset()}),[t,r,a,n]),p=(0,s.useCallback)((async e=>{e&&he().Sg(r,{from:"settings"});const s=await je().x({environment:r,spaceStore:a,pageId:e,from:"settings"});if(s.success)return u(void 0),void l.reset();switch(s.error){case"block_limit":case"page_permissions":case"user_permissions":return void u(t.formatMessage(Ve[s.error]));case"unknown":return void u(t.formatMessage({id:"spaceBasicSettings.gettingStartedPage.error.generic",defaultMessage:"An error occurred, please try again."}));default:(0,pe().HB)(s.error)}}),[r,a,t,u,l]),h=(0,s.useCallback)((()=>{je().a({environment:r,spaceStore:a,pageId:void 0,from:"settings"})}),[r,a]),f=(0,s.useCallback)((e=>(0,Q.jsx)(j().A,{onClick:()=>e.onClick(),children:(0,Q.jsxs)(x().Y1,{direction:"horizontal",gap:8,align:"center",children:[i?(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(K().B6,{disabled:!0,icon:i.getIcon(),iconRecordCategory:"pageBlock",isEmptyPage:!1,size:16}),i.getTitleValue()]}):(0,Q.jsx)(T().sA,{defaultMessage:"Select page",id:"customGettingStartedPageSelector.selectPage"}),(0,Q.jsx)(ce().I,{icon:ge().arrowChevronSingleDownSmallIcon,size:"sm"})]})})),[i]);return(0,Q.jsxs)(x().Y1,{direction:"vertical",gap:8,children:[(0,Q.jsxs)(x().Y1,{direction:"horizontal",gap:8,align:"center-left",children:[(0,Q.jsx)(le().A,{popupType:oe().A.isMobile?re().n.BottomSheet:re().n.Popup,placementToOrigin:"bottom",alignmentToOrigin:"start",render:()=>(0,Q.jsx)(Ee,{spaceStore:a,initialFocus:!0,onPageSelect:p,onPageCreate:g,disabled:!1}),renderOrigin:f,originGap:4,buttonPopupStore:l}),i?(0,Q.jsx)(me().E,{size:"sm",onClick:h,children:(0,Q.jsx)(T().sA,{defaultMessage:"Reset to default",id:"customGettingStartedPageSelector.resetPage"})}):null]}),d?(0,Q.jsx)(ue().D,{styleKey:"caption",colorPalette:"red",colorVariant:"accentPrimary",children:d}):void 0]})}var ze=()=>a(709062),Fe=()=>a(232930),Oe=()=>a(5813),Ue=()=>a(564884),We=()=>a(350005),He=()=>a(427704),qe=()=>a(284371),Ke=()=>a(204486),Ge=()=>a(131448),Ye=()=>a(72563),$e=()=>a(179030);function Qe({onClick:e}){const t=(0,c().v3)(),a=(0,i().r)();return(0,u().w)((()=>{a&&((0,Ue().u)({environment:t,event:{eventName:"referral_offer_banner_viewed",eventProperties:{space_id:a}}}),(0,Ue().u)({environment:t,event:{eventName:"offer_viewed",eventProperties:{offer_campaign:"referral_50",entrypoint:"referral_offer_banner"}}}))})),(0,Q.jsx)($e().l,{display:"inline-compact",label:"You've referred 3 friends to Notion, get 50% off Plus now",actions:[{label:"Redeem offer",onClick:e}],tint:"gray",staticIcon:Ye().priceTagFillIcon,iconColor:"blue"})}const Je=(0,T().YK)({title:{id:"spaceBasicSettings.workspaceReferralSection.title",defaultMessage:"Referrals"},subtitle:{id:"spaceBasicSettings.workspaceReferralSection.subtitle",defaultMessage:"Share Notion with others"},tooltip:{id:"spaceBasicSettings.workspaceReferralSection.tooltip",defaultMessage:"Share Notion with new users. Redeem your offer when your referrals complete sign-up. Click to learn more."},caption:{id:"spaceBasicSettings.workspaceReferralSection.caption",defaultMessage:"Refer 3 people to Notion and get 50% off Plus for 12 months"},redemptionCounter:{id:"spaceBasicSettings.workspaceReferralSection.redemptionCounter",defaultMessage:"{count, plural, =0{0/3 redemptions} one{1/3 redemptions} =2{2/3 redemptions} =3{3/3 redemptions} other{# redemptions}}"},shareButtonLabel:{id:"spaceBasicSettings.workspaceReferralSection.share.button.label",defaultMessage:"Share"},tooltipBody:{id:"spaceBasicSettings.workspaceReferralSection.tooltip.body",defaultMessage:"Click to learn more about eligibility."}});function Ze({onShareClick:e,onClaimClick:t,canClaimReferralOffer:a,referralEntry:n}){const i=(0,g().IS)((()=>({settingsItem:{paddingBottom:24},questionMarkCircleIcon:{width:16,height:16,fontWeight:qe().Wy.medium,fill:k().Tj.gray.text.primary},tooltipBody:{color:k().Tj.text.inverseSecondary}})),[]),[o,r]=(0,s.useState)(0);(0,s.useEffect)((()=>{r((0,We().Nw)(n))}),[n,null==n?void 0:n.redeemed_spaces]);const l=(0,s.useRef)(null),d=(0,m().K8)((()=>Ge().default.isVisible("share_referral_link_notification_tooltip")),[]),c=(0,g().IS)((()=>({button:{boxShadow:d?k().Tj.buttonBlueFocusRing:void 0}})),[d]);return(0,Q.jsxs)("div",{style:{...i.settingsItem},children:[(0,Q.jsx)(ie().A,{large:!0,divider:"full",style:{paddingTop:12},children:(0,Q.jsx)(T().sA,{...Je.title})}),(0,Q.jsxs)(x().Y1,{gap:16,direction:"vertical",children:[a?(0,Q.jsx)(Qe,{onClick:t}):null,(0,Q.jsxs)(x().Y1,{direction:"horizontal",children:[(0,Q.jsxs)(x().Y1,{direction:"vertical",gap:3,children:[(0,Q.jsx)(x().Y1,{direction:"horizontal",gap:8,children:(0,Q.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,Q.jsx)(ue().D,{styleKey:"bodyRegular",colorVariant:"primary",children:(0,Q.jsx)(T().sA,{...Je.subtitle})}),(0,Q.jsx)(w().m,{textWrap:!0,style:{minWidth:250},placement:"top",renderTooltip:()=>(0,Q.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:4},children:[(0,Q.jsx)("div",{children:(0,Q.jsx)(T().sA,{...Je.tooltip})}),(0,Q.jsx)("div",{style:i.tooltipBody,children:(0,Q.jsx)(T().sA,{...Je.tooltipBody})})]}),render:e=>(0,Q.jsx)("div",{...e,children:(0,Q.jsx)(ee().A,{href:He().JZ.notionPlusReferralTerms,analyticsFrom:"space_settings"})})})]})}),(0,Q.jsx)(ue().D,{styleKey:"captionRegular",colorVariant:"secondary",children:(0,Q.jsx)(T().sA,{...Je.caption})})]}),(0,Q.jsxs)(x().Y1,{gap:16,direction:"horizontal",align:"center-right",width:"hug",children:[(0,Q.jsx)(ue().D,{styleKey:"captionRegular",colorVariant:"secondary",children:(0,Q.jsx)(T().sA,{...Je.redemptionCounter,values:{count:o}})}),d?(0,Q.jsx)(Ke().PD,{origin:l}):void 0,(0,Q.jsx)(A().A,{colorPalette:"blue",size:"lg",onClick:()=>e(),ref:l,style:c.button,children:(0,Q.jsx)(T().sA,{...Je.shareButtonLabel})})]})]})]})]})}function Xe({}){const e=(0,a(550729).z)("fetch_only"),[t,n]=(0,s.useState)(!1),[i,r]=(0,s.useState)(0),l=(0,c().v3)(),d=(0,o().L)(),m=(0,v()._3)({spaceId:null==d?void 0:d.id});return(0,u().w)((()=>{(0,a(898255).DW)(l)})),(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(Ze,{canClaimReferralOffer:(0,We().zj)(e),onShareClick:()=>{r((e=>e+1)),n(!0)},onClaimClick:()=>{(0,a(6313).F)({environment:l,spaceStore:d,billingData:m,product:"plus",from:"referral_settings_banner",offer:(0,a(166386).Pz)("referral_50")}),null!=d&&d.id&&(0,Ue().u)({environment:l,event:{eventName:"click_redeem_referral_offer",eventProperties:{space_id:d.id}}})},referralEntry:e}),(0,Q.jsx)(a(355049).E,{isOpen:t,onClose:()=>{n(!1),a(300789).a(l,"referral_announcement")},source:"referral_settings"},i)]})}var et=()=>a(760183),tt=()=>a(28119),at=()=>a(303742),st=()=>a(592674),nt=()=>a(132813),it=()=>a(194763),ot=()=>a(528093),rt=()=>a(134217);const lt=(0,T().YK)({title:{id:"spacePermissionsSettings.people.peopleActivity.title",defaultMessage:"Recent activity on profile"},byline:{id:"spacePermissionsSettings.people.peopleActivity.byline",defaultMessage:"Show recently created, edited, and commented pages on the profile page"}});function dt({spaceStore:e,isLocked:t}){const a=(0,c().v3)(),s=(0,m().K8)((()=>Boolean(e.getSetting("hide_people_activity"))),[e]);return(0,Q.jsx)($().A,{spaceStore:e,title:(0,Q.jsx)(T().sA,{...lt.title}),caption:(0,Q.jsx)(T().sA,{...lt.byline}),type:"toggle",isOn:!s,onToggle:()=>{t||function({environment:e,spaceStore:t,newValue:a}){Se().createAndCommit({userAction:"SpacePermissionsSettings.HidePeopleActivitySetting",environment:e,canUndo:!0,perform:e=>{Se().applyOperation({store:t,operation:{pointer:t.pointer,path:["settings","hide_people_activity"],command:"set",args:a},transaction:e})}})}({environment:a,spaceStore:e,newValue:!s})},isLocked:t,lockedTooltip:t?(0,ze().C_)():void 0})}function ct({spaceStore:e,organizationOverrides:t}){const n=(0,a(789180).Ul)({spaceStore:e}),i=(0,g().IS)((()=>({settingsItem:{paddingBottom:24}})),[]);if(!n.hoverCard&&!n.directory&&!n.activity)return null;const o=Boolean(t.disable_people_hover_card),r=Boolean(t.disable_people_directory);return(0,Q.jsxs)(s.Fragment,{children:[(0,Q.jsx)(ie().A,{large:!0,divider:"full",style:{paddingTop:12},children:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.general.peopleSection.title",defaultMessage:"People"})}),n.directory?(0,Q.jsx)("div",{style:i.settingsItem,children:(0,Q.jsx)(a(610236).VZ,{spaceStore:e,isLocked:r})}):null,n.activity?(0,Q.jsx)("div",{style:i.settingsItem,children:(0,Q.jsx)(dt,{spaceStore:e,isLocked:!1})}):null,n.hoverCard?(0,Q.jsx)("div",{style:i.settingsItem,children:(0,Q.jsx)(a(784673).O,{spaceStore:e,isLocked:o})}):null]})}var ut=()=>a(822789),mt=()=>a(465031);function gt({spaceStore:e,spaceViewStore:t}){const n=(0,c().v3)(),i=(0,T().tz)(),o=(0,m().K8)((()=>(0,at().o)(t)),[t]),r=(0,m().K8)((()=>!t.getNotionAppsHidden()),[t]),l=(0,s.useCallback)((()=>{void 0!==r&&function(e,t){t?mt().sh(e):mt().nQ(e)}(n,!r)}),[n,r]),d=(0,g().IS)((()=>({container:{paddingBottom:0},settingsItem:{paddingBottom:24}})),[]),u=(0,m().K8)((()=>(0,ut().SP)()),[]),p=(0,m().K8)((()=>(0,ut().XM)(t,u)),[t,u]),h=(0,s.useCallback)((()=>{const e=!p;Se().createAndCommit({environment:n,userAction:"SidebarSettings.toggleSlipperySlope",canUndo:!0,perform:s=>{a(72234).AG(t,s,{slippery_slope_is_enabled:e})}}),a(944584).trackSlipperySlopePreferenceToggled({environment:n,slipperySlopeEnabled:e,from:"preferences"})}),[n,p,t]);return o?null:(0,Q.jsxs)("div",{style:d.container,children:[(0,Q.jsx)(ie().A,{large:!0,divider:"full",style:{paddingTop:12},children:(0,Q.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6},children:[(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.sidebar.section.title",defaultMessage:"Sidebar"}),(0,Q.jsx)(w().m,{placement:"right",style:{width:240},textWrap:!0,renderTooltip:()=>(0,Q.jsx)(ue().D,{styleKey:"captionMedium",colorVariant:"inversePrimary",children:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.sidebar.section.tooltip",defaultMessage:"Changes toggled will only apply for you on this workspace"})}),render:e=>(0,Q.jsx)("span",{...e,style:{display:"flex",alignItems:"center"},children:(0,Q.jsx)(ce().I,{icon:a(721479).questionMarkCircleSmallIcon,size:"sm",colorVariant:"tertiary"})})})]})}),"control"!==u?(0,Q.jsx)("div",{style:d.settingsItem,children:(0,Q.jsx)($().A,{type:"toggle",spaceStore:e,title:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.sidebar.slipperySlope.toggle.title",defaultMessage:"New sidebar experience"}),caption:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.sidebar.slipperySlope.toggle.description",defaultMessage:"Redesigned to keep your pages, meetings, and AI within reach."}),isOn:p,onToggle:h,isLocked:!1,badge:(0,Q.jsx)(a(301948).A,{style:{marginInlineStart:4}})})}):null,(0,Q.jsx)("div",{style:d.settingsItem,children:(0,Q.jsx)($().A,{type:"toggle",spaceStore:e,title:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.sidebar.notionApps.toggle.title",defaultMessage:"Notion Apps section"}),caption:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.sidebar.notionApps.toggle.description",defaultMessage:"Show Notion apps like Mail and Calendar in your sidebar."}),isOn:!1!==r,onToggle:l,isLocked:void 0===r,lockedTooltip:void 0===r?i.formatMessage({id:"spaceBasicSettings.sidebar.notionApps.toggle.disabledTooltip",defaultMessage:"Sidebar settings are unavailable without an active workspace."}):void 0})})]})}var pt=()=>a(718827),ht=()=>a(249046),ft=()=>a(127833),vt=()=>a(265060),yt=()=>a(546926),xt=()=>a(890492),bt=()=>a(784892),St=()=>a(264154),jt=()=>a(733816),At=()=>a(701751),wt=()=>a(84262),_t=()=>a(965597),Mt=()=>a(778078),Ct=()=>a(496603),Tt=()=>a(881690),kt=()=>a(297780),It=()=>a(17281),Nt=()=>a(79926);const Dt={WorkspaceDiscoveryAdminSetting:new(Nt().O2)("WorkspaceDiscoveryAdminSetting",(async()=>a.e(51799).then(a.bind(a,770790))))},Pt=(0,Nt()._h)(Dt.WorkspaceDiscoveryAdminSetting,(e=>e.WorkspaceDiscoveryAdminSetting));var Et=()=>a(988770),Bt=()=>a(378941),Rt=()=>a(560729),Vt=()=>a(388926),Lt=()=>a(396896),zt=()=>a(631524),Ft=()=>a(12193),Ot=()=>a(995847),Ut=()=>a(939768);const Wt=(0,T().YK)({closeModalAriaLabel:{id:"requestMembershipCustomizationUrlButton.closeModalAriaLabel",defaultMessage:"Close request membership customization modal"}});function Ht(e){const t=(0,T().tz)(),a=(0,c().v3)(),{spaceStore:n,isOpen:i,onDismiss:o}=e,[r,l]=(0,s.useState)(""),[d,u]=(0,s.useState)(!1),m=(0,s.useCallback)((e=>""===e||(0,Ut().AY)(e)),[]);(0,s.useEffect)((()=>{l(n.getSettings().request_membership_customization_redirect_url||"")}),[n]);const p=(0,g().IS)((()=>({modal:{maxWidth:500,paddingTop:20,fontSize:14,borderRadius:10},cancelButton:{position:"absolute",top:"10px",insetInlineEnd:"10px"},title:{margin:"10px 0"},errorText:{color:k().Tj.red.text.accentPrimary,fontSize:12},button:{padding:"6px 12px"},icon:{color:k().Tj.text.secondary},header:{padding:"0px 20px",maxWidth:300}})),[]),h=(0,s.useCallback)((async e=>{await P().callApi({eventName:"updateSpaceTrustedDomainSettings",environment:a,data:{spaceId:n.id,newRequestMembershipCustomizationRedirectUrl:e}})}),[a,n]);return(0,Q.jsx)(Rt().A,{innerStyle:p.modal,isOpen:i,onDismiss:o,render:()=>(0,Q.jsxs)(Lt().VP,{alignItems:"center",children:[(0,Q.jsx)(b().A,{icon:Ot().xMarkSmallIcon,onClick:o,style:p.cancelButton,ariaLabel:t.formatMessage(Wt.closeModalAriaLabel)}),(0,Q.jsx)(ie().A,{large:!0,style:p.header,children:(0,Q.jsxs)(Lt().VP,{alignItems:"center",children:[(0,Q.jsx)("div",{children:(0,Q.jsx)(ce().I,{icon:Ft().globeIcon,size:36,style:p.icon})}),(0,Q.jsx)(ue().D,{styleKey:"titleSmSemibold",colorVariant:"primary",style:p.title,children:(0,Q.jsx)(T().sA,{id:"requestMembershipCustomizationUrlButton.title",defaultMessage:"Customize request access link"})}),(0,Q.jsx)(ue().D,{styleKey:"bodyRegular",colorVariant:"secondary",style:{textAlign:"center"},children:(0,Q.jsx)(T().sA,{id:"requestMembershipCustomizationUrlButton.byline",defaultMessage:"Customize the destination when users request to join workspace"})})]})}),(0,Q.jsxs)(Lt().VP,{alignItems:"start",gap:4,marginTop:24,paddingInlineStart:20,paddingInlineEnd:20,children:[(0,Q.jsx)(ue().D,{styleKey:"captionMedium",colorVariant:"secondary",style:{marginBottom:6},children:(0,Q.jsx)(T().sA,{id:"requestMembershipCustomizationUrlButton.input.label",defaultMessage:"Custom URL"})}),(0,Q.jsx)(S().A,{type:"text",value:r,onChange:e=>{const t=e.target.value;l(t),u(!m(t))},focusInitial:!0}),d?(0,Q.jsx)("div",{style:{...p.errorText},children:(0,Q.jsx)(T().sA,{id:"requestMembershipCustomizationUrlButton.invalidUrl",defaultMessage:"Invalid URL"})}):null,(0,Q.jsx)(ue().D,{styleKey:"captionRegular",colorVariant:"secondary",style:{marginTop:6,textAlign:"start",marginBottom:14},children:(0,Q.jsx)(T().sA,{id:"requestMembershipCustomizationUrlButton.input.hint",defaultMessage:"Users will be redirected to this URL when they request to join workspace."})})]}),(0,Q.jsx)(Vt().A,{size:20}),(0,Q.jsxs)(Lt().fI,{justifyContent:"flex-end",gap:12,paddingInlineStart:20,paddingInlineEnd:20,paddingBottom:12,width:"100%",children:[(0,Q.jsx)(me().E,{style:p.button,onClick:o,children:(0,Q.jsx)(T().sA,{defaultMessage:"Cancel",id:"requestMembershipCustomizationUrlButton.cancel.label"})}),(0,Q.jsx)(A().A,{colorPalette:"blue",style:p.button,onClick:async()=>{await h(r),o()},disabled:!m(r),children:(0,Q.jsx)(T().sA,{defaultMessage:"Save action",id:"requestMembershipCustomizationUrlButton.save.label"})})]})]})})}function qt(e){const{spaceStore:t}=e,[a,n]=(0,s.useState)(!1);return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(zt().p,{colorPalette:"blue",style:{marginInlineEnd:"16px"},onClick:()=>n(!0),children:(0,Q.jsx)(T().sA,{defaultMessage:"Customize",id:"requestMembershipCustomizationUrlButton.customizeAction.label"})}),(0,Q.jsx)(Ht,{spaceStore:t,isOpen:a,onDismiss:()=>n(!1)})]})}const Kt=(0,T().YK)({allowedEmailDomainsInputPlaceholder:{id:"spaceBasicSettings.allowedEmailDomainsSection.emailDomainInput.placeholder",defaultMessage:"Type an email domain…"}});function Gt(e){const{spaceStore:t}=e,a=(0,c().v3)(),i=(0,m().K8)((()=>t.canAdmin()),[t]),o=(0,n().T)(),r=(0,m().uB)(e.spaceBasicSettingsStore,it().A),l=(0,m().uB)(e.securitySettingsStore,nt().A);(0,u().l)((()=>{const e=r.getValueForSpace(t),a=l.getValueForSpace(t);e&&r.setState(e),a&&l.setState(a)}));const[d]=(0,Ce().Yb)((async()=>({trustedDomainNumMembers:i?await(0,Bt().hs)({environment:a,spaceId:t.id,currentUserId:o}):[]})),[a,t,o,i]),g=(0,m().K8)((()=>{if("resolved"!==d.status)return[];const e=d.value.trustedDomainNumMembers.map((e=>e.trustedDomain.id));return(0,Bt().J7)({trustedDomainIds:e,spaceStore:t})}),[t,d]),p=(0,m().K8)((()=>Ct().oE(g.filter((e=>e.getDomainLinkSharingEnabled())).map((e=>e.getEmailDomain())))),[g]),h=(0,m().K8)((()=>rt().vl(a)),[a]),f=(0,m().K8)((()=>r.state.emailDomains.length>0),[r]),v=Xt();return i&&(h||f)?(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(Yt,{}),(0,Q.jsxs)(s.Fragment,{children:[(0,Q.jsxs)("div",{style:v.settingsItem,children:[(0,Q.jsx)(ie().A,{children:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.allowedEmailDomainsSection.title",defaultMessage:"Allowed email domains"})}),(0,Q.jsx)($t,{spaceStore:t,spaceBasicSettingsStore:r,trustedEmailDomains:p}),(0,Q.jsx)(_().A,{isSmall:!0,isMultiline:!0,style:{marginTop:4,marginBottom:4},children:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.allowedEmailDomainsSection.emailDomainInput.caption",defaultMessage:"Anyone with email addresses at these domains can automatically join your workspace."})})]}),f?(0,Q.jsx)(Qt,{spaceStore:t,trustedDomainsState:d}):void 0,f?(0,Q.jsx)(Pt,{spaceStore:t}):void 0]})]}):null}function Yt(){return(0,Q.jsx)(ie().A,{large:!0,divider:"full",style:{paddingTop:12},children:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.trustedDomainsSection.subtitle",defaultMessage:"Trusted domain access"})})}function $t({spaceStore:e,spaceBasicSettingsStore:t,trustedEmailDomains:a}){const n=(0,T().tz)(),i=(0,c().v3)(),[o,r]=(0,s.useState)(""),l=(0,m().K8)((()=>t.state.emailDomains),[t]),d=(0,m().K8)((()=>e.canAdmin()),[e]),u=(0,It().h)(e.id),g=(0,m().K8)((()=>rt().vl(i)),[i]),p=(0,s.useCallback)((e=>{r(e.target.value)}),[]);return(0,Q.jsx)(ft().zD,{popupType:oe().A.isMobile?re().n.BottomSheet:re().n.Popup,sameWidthAsOrigin:!0,open:o.length>0,trapFocus:!1,origin:(0,Q.jsx)(kt().A,{placeholder:n.formatMessage(Kt.allowedEmailDomainsInputPlaceholder),value:o,onChange:p,readOnly:!d||!g,onRemoveLastToken:()=>{const e=l.slice(0,l.length-1);t.setState({...t.state,emailDomains:e})},tokens:l.map((e=>(0,Q.jsx)(Tt().A,{showRemoveButton:!0,isSingle:!1,format:bt().NY.Medium,onClickRemove:()=>{const a=l.filter((t=>t!==e));t.setState({...t.state,emailDomains:a})},value:e},e)))}),render:()=>{const e=o.trim(),s=(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.allowedEmailDomainsSection.emailDomainsDropdown.placeholder",defaultMessage:"Type an email domain…"}),n=(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.allowedEmailDomainsSection.emailDomainsDropdown.placeholderNoResults",defaultMessage:"Type an email domain of a member of this workspace…"}),i=(u??[]).filter((e=>!l.includes(e)&&!a.includes(e))),d=(0,Mt().Ay)(e,(0,Ct().oE)(i),(e=>e)).map(((e,a)=>({key:a,render:t=>(0,Q.jsx)(we().A,{...t,title:e}),action:()=>{const a=[...l,e];t.setState({...t.state,emailDomains:a}),r("")}})));let c;return c=oe().A.isMobile?{menuType:yt().gu.ActionSheet}:{menuType:yt().gu.Popup,width:"100%"},(0,Q.jsx)(xt().A,{...c,children:(0,Q.jsx)(_e().A,{type:_e().O.Vertical,initialFocus:d.length>0?0:void 0,sections:[{key:0,render:e=>(0,Q.jsx)(Me().A,{...e,disableDesktopPadding:!0,title:d.length>0?s:n}),items:d}]})})},onDismiss:()=>{r("")}})}function Qt({spaceStore:e,trustedDomainsState:t}){var a;const n=(0,c().v3)(),i=(0,ot()._)({name:"domain_settings",spaceId:e.id,userId:null===(a=n.currentUser)||void 0===a?void 0:a.id}),o=null==i?void 0:i.upsell,r=(0,m().K8)((()=>e.getName()),[e]),l=(0,m().K8)((()=>(0,_t().ko)(e.getModel())),[e]),u=(0,m().K8)((()=>(0,_t().Hm)(e.getModel())),[e]),g=(0,m().K8)((()=>d().default.checkGate({gateName:"domain_link_sharing_redesign_override",disableExposureLogging:!0})),[]),p=(0,s.useCallback)((async t=>{const{newDomainLinkSharingValue:a,newJoinSpaceMethod:s}=t;await P().callApi({eventName:"updateSpaceTrustedDomainSettings",environment:n,data:{spaceId:e.id,newDomainLinkSharingValue:a,newJoinSpaceMethod:s}})}),[n,e]),h=(0,s.useCallback)((async()=>{await p({newDomainLinkSharingValue:!u})}),[p,u]),f=Xt();if("resolved"!==t.status||!l)return null;if(g){const t=(0,Et().N)({messages:ea,values:{spaceName:r}});return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)("div",{style:f.settingsItem,children:(0,Q.jsx)($().A,{spaceStore:e,disabled:!(0,wt().e2)(i),upsellOptions:o?{upsell:o,analyticsName:"trusted_domain_item",customMessages:t}:void 0,title:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.trustedDomainsSection.allowShareWithTrustedDomains.title",defaultMessage:"Enable organization-wide access for pages shared with this workspace"}),caption:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.trustedDomainsSection.allowShareWithTrustedDomains.description",defaultMessage:"Allow teammates with trusted email domains who aren’t workspace members to access pages shared with “Everyone at {spaceName}”",values:{spaceName:r}}),type:"toggle",isOn:u,onToggle:h})}),(0,Q.jsx)(Jt,{spaceStore:e,updateJoinSpaceMethod:p})]})}return null}function Jt(e){var t;const{spaceStore:a,updateJoinSpaceMethod:n}=e,i=(0,c().v3)(),o=(0,ot()._)({name:"domain_settings",spaceId:a.id,userId:null===(t=i.currentUser)||void 0===t?void 0:t.id}),r=null==o?void 0:o.upsell,l=(0,m().K8)((()=>a.getSettings().join_space_method),[a]),d="request_to_join"===l,u=(0,s.useCallback)((async e=>{await n({newJoinSpaceMethod:e})}),[n]),p=Xt(),h=(0,g().IS)((()=>({settingsItem:{width:"65%"},menuButton:{paddingTop:4,paddingBottom:4,paddingInlineEnd:8,paddingInlineStart:8,display:"flex",alignItems:"center",gap:4},menuButtonHovered:{borderRadius:4}})),[]);return(0,Q.jsx)("div",{style:p.settingsItem,children:(0,Q.jsx)($().A,{spaceStore:a,disabled:!(0,wt().e2)(o),upsellOptions:r?{upsell:r,analyticsName:"trusted_domain_item",customMessages:ta}:void 0,title:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.trustedDomainsSection.joinSpaceMethodMenu.title",defaultMessage:"Teammates with trusted email domains can join as a member"}),caption:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.trustedDomainsSection.joinSpaceMethodMenu.description",defaultMessage:"Allow teammates with trusted email domains to join this workspace"}),descriptionStyle:h.settingsItem,type:"custom",customButton:(0,Q.jsxs)(ht().Ye,{alignItems:"center",children:[d&&(0,wt().e2)(o)?(0,Q.jsx)(qt,{spaceStore:a}):void 0,(0,Q.jsx)(le().A,{popupType:le().z.Popup,placementToOrigin:"bottom",alignmentToOrigin:"end",disabled:!(0,wt().e2)(o),renderOrigin:e=>(0,Q.jsxs)(pt().Ay,{...e,disabled:!(0,wt().e2)(o),style:h.menuButton,hoveredStyle:h.menuButtonHovered,children:[(0,Q.jsx)(Zt,{joinSpaceMethod:l,disabled:!(0,wt().e2)(o)}),(0,Q.jsx)(vt().Q,{iconGroup:St().l,variantName:"small",colorVariant:(0,wt().e2)(o)?"secondary":"tertiary"})]}),render:e=>(0,Q.jsx)(xt().A,{menuType:yt().gu.Popup,children:(0,Q.jsx)(_e().A,{type:_e().O.Vertical,initialFocus:0,sections:[{key:"join-methods",render:e=>(0,Q.jsx)(Me().A,{...e}),items:[{key:"click_to_join",render:e=>(0,Q.jsx)(we().A,{...e,icon:(0,Q.jsx)(ce().I,{icon:At().p}),title:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.trustedDomainsSection.joinSpaceMethodMenu.clickToJoinDescription",defaultMessage:"Join automatically"}),isChecked:!l||"click_to_join"===l}),action:async()=>{await u("click_to_join"),e.close()}},{key:"request_to_join",render:e=>(0,Q.jsx)(we().A,{...e,title:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.trustedDomainsSection.joinSpaceMethodMenu.requestToJoinDescription",defaultMessage:"Request to join"}),icon:(0,Q.jsx)(ce().I,{icon:jt().o}),isChecked:"request_to_join"===l}),action:async()=>{await u("request_to_join"),e.close()}}]}]})})})]})})})}function Zt(e){const{joinSpaceMethod:t,disabled:a}=e;let s;return t&&"click_to_join"!==t?"request_to_join"===t?s=(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.trustedDomainsSection.joinSpaceMethodMenu.requestToJoinDescription",defaultMessage:"Request to join"}):"disabled"===t&&(s=(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.trustedDomainsSection.joinSpaceMethodMenu.disabledDescription",defaultMessage:"No access"})):s=(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.trustedDomainsSection.joinSpaceMethodMenu.clickToJoinDescription",defaultMessage:"Join automatically"}),(0,Q.jsx)(ue().D,{styleKey:"bodyRegular",colorVariant:a?"tertiary":"secondary",children:s})}function Xt(){return(0,g().IS)((()=>({settingsItem:{paddingBottom:24}})),[])}const ea=(0,T().YK)({eligible_to_purchase:{id:"trustedDomainOrgWideAccessMessages.eligibleToPurchase",defaultMessage:"<highlight>Upgrade</highlight> to allow users with trusted email domains to access shared pages without workspace membership"},eligible_for_trial:{id:"trustedDomainOrgWideAccessMessages.eligibleForTrial",defaultMessage:"<highlight>Start trial</highlight> to allow users with trusted email domains to access shared pages without workspace membership"},sales_eligible:{id:"trustedDomainOrgWideAccessMessages.salesEligible",defaultMessage:"<highlight>Contact sales</highlight> to allow users with trusted email domains to access shared pages without workspace membership"},sales_assisted:{id:"trustedDomainOrgWideAccessMessages.salesAssisted",defaultMessage:"<highlight>Contact sales</highlight> to allow users with trusted email domains to access shared pages without workspace membership"},eligible_to_request:{id:"trustedDomainOrgWideAccessMessages.eligibleToRequest",defaultMessage:"<highlight>Request access</highlight> to allow users with trusted email domains to access shared pages without workspace membership"},request_pending:{id:"trustedDomainOrgWideAccessMessages.requestPending",defaultMessage:"<highlight>Requested</highlight> to allow users with trusted email domains to access shared pages without workspace membership"}}),ta=(0,T().YK)({eligible_to_purchase:{id:"trustedDomainJoinMethodMessages.eligibleToPurchase",defaultMessage:"<highlight>Upgrade</highlight> to let users with trusted email domains join without requesting access"},eligible_for_trial:{id:"trustedDomainJoinMethodMessages.eligibleForTrial",defaultMessage:"<highlight>Start trial</highlight> to let users with trusted email domains join without requesting access"},sales_eligible:{id:"trustedDomainJoinMethodMessages.salesEligible",defaultMessage:"<highlight>Contact sales</highlight> to let users with trusted email domains join without requesting access"},sales_assisted:{id:"trustedDomainJoinMethodMessages.salesAssisted",defaultMessage:"<highlight>Contact sales</highlight> to let users with trusted email domains join without requesting access"},eligible_to_request:{id:"trustedDomainJoinMethodMessages.eligibleToRequest",defaultMessage:"<highlight>Request access</highlight> to let users with trusted email domains join without requesting access"},request_pending:{id:"trustedDomainJoinMethodMessages.requestPending",defaultMessage:"<highlight>Requested</highlight> to let users with trusted email domains join without requesting access"}});const aa=(0,T().YK)({nameInputPlaceholder:{id:"spaceBasicSettings.nameInput.placeholder",defaultMessage:"e.g. company name"},workspaceIdCopied:{id:"spaceBasicSettings.workspaceId.copied",defaultMessage:"Workspace ID copied to clipboard"},activateHIPAAButton:{id:"spaceBasicSettings.hipaaCompliance.activateButton.label",defaultMessage:"Activate"},deactivateHIPAAButton:{id:"spaceBasicSettings.hipaaCompliance.deactivateButton.label",defaultMessage:"Deactivate"}}),sa=s.memo((function(e){const{spaceStore:t,organizationOverrides:i,billingData:o}=e,d=(0,c().v3)(),{canAdminSpaceStore:p,spaceId:h}=(0,m().K8)((()=>({canAdminSpaceStore:t.canAdmin(),spaceId:t.id})),[t]),f=(0,n().T)(),y=(0,m().uB)(e.spaceBasicSettingsStore,it().A),x=(0,m().uB)(e.securitySettingsStore,nt().A),b=(0,m().K8)((()=>(0,a(272509).I)(t)),[t]),S=(0,a(789586).P)({name:"hipaa_compliance",spaceId:h,userId:f});(0,u().l)((()=>{const e=y.getValueForSpace(t),a=x.getValueForSpace(t);e&&y.setState(e),a&&x.setState(a)}));const A=(0,l().X)("notion_ai_workspace_settings"),w=(0,m().K8)((()=>!A&&(0,H().LR)({spaceStore:t,billingData:o})),[t,A,o]),_=(0,m().K8)((()=>!A&&(0,a(592420).Q)(d)),[d,A]),M=S&&p,C=(0,m().K8)((()=>p&&!t.getDisableExport()),[p,t]),k=(0,a(240865).V)()??1,I=(0,m().O$)(r().AppStoreSidebarSpaceViewStore),D=(0,l().X)("adoption_sidebar_footer_revamp"),P=(0,m().K8)((()=>!(0,at().o)(r().default.state.sidebarSpaceViewStore)&&(b||k>1)),[b,k]),E=(0,m().K8)((()=>!(_||w||M||C||P||p)),[_,w,M,C,P,p]),B=(0,g().IS)((()=>({dangerZoneContainer:{display:"flex",flexWrap:"wrap",gap:"16px 12px"},gap:{height:12},setupInformationHeader:{paddingTop:E?0:36}})),[E]),R=ba(),V=(0,v()._3)({spaceId:h}),L=(0,m().K8)((()=>(0,a(807778).VJ)({memberCount:k,billingData:V,environment:d})),[V,k,d]);return(0,Q.jsxs)(ne().Ay,{controlRow:p&&(0,Q.jsx)(xa,{spaceStore:t,spaceBasicSettingsStore:y,securitySettingsStore:x}),controlRowPaddingTopBottom:14,children:[p?(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(ma,{}),(0,Q.jsx)(ia,{spaceStore:t,spaceBasicSettingsStore:y}),(0,Q.jsx)(oa,{spaceStore:t,spaceBasicSettingsStore:y}),L?(0,Q.jsx)(Xe,{}):null]}):void 0,I&&p?(0,Q.jsx)(ra,{spaceStore:t,spaceViewStore:I,spaceBasicSettingsStore:y}):void 0,I&&D?(0,Q.jsx)(gt,{spaceStore:t,spaceViewStore:I}):void 0,_||w||M?(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(ua,{}),_?(0,Q.jsx)("div",{style:R.settingsItem,children:(0,Q.jsx)(H().aV,{billingData:o,spaceStore:t})}):void 0,w?(0,Q.jsx)("div",{style:R.settingsItem,children:(0,Q.jsx)(H().Iu,{securitySettingsStore:x,spaceStore:t})}):void 0,M?(0,Q.jsx)(ha,{spaceStore:t,securitySettingsStore:x,spaceBasicSettingsStore:y}):void 0]}):void 0,p?(0,Q.jsx)(Gt,{spaceStore:t,spaceBasicSettingsStore:y,securitySettingsStore:x}):void 0,C||p?(0,Q.jsx)(ie().A,{large:!0,divider:"full",style:{paddingTop:12},children:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.export.subtitle",defaultMessage:"Export"})}):void 0,C?(0,Q.jsx)("div",{style:R.settingsItem,children:(0,Q.jsx)(X,{handleExportClick:()=>function(e){const{environment:t,spaceId:a}=e;if(!a)return;G().Ss({environment:t,root:{table:"space",id:a,spaceId:a},isCollectionViewExportTypeSupported:!0})}({environment:d,spaceId:h})})}):void 0,p?(0,Q.jsx)(da,{}):void 0,p?(0,Q.jsx)(la,{spaceStore:t,spaceBasicSettingsStore:y,organizationOverrides:i}):void 0,(0,Q.jsx)(ct,{spaceStore:t,organizationOverrides:i}),P||p?(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(ie().A,{large:!0,divider:"full",style:{paddingTop:12},children:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.dangerousSettingsSection.title",defaultMessage:"Danger zone"})}),(0,Q.jsxs)("div",{style:B.dangerZoneContainer,children:[P?(0,Q.jsx)(j().A,{size:"lg",colorPalette:"red",onClick:()=>function(e,t){const{currentUserSettingsStore:s}=r().default.state;s&&a(792057).ui({message:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.leaveWorkspaceConfirmationDialog.prompt",defaultMessage:"Are you sure you want to leave the {workspaceName} workspace?",values:{workspaceName:e.getName()}}),showCancel:!0,keepFocus:!0,items:[{label:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.leaveWorkspaceConfirmationDialog.leaveButton.label",defaultMessage:"Leave"}),color:"red",onAccept:async()=>{await a(507379).ev({environment:t,spaceId:e.id,userSettingsStore:s})&&(N().dp(t),be().Ay.setState({...be().Ay.state,open:!1}))}}]})}(t,d),children:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.dangerousSettingsSection.leaveWorkspaceButton.label",defaultMessage:"Leave workspace"})}):void 0,p?(0,Q.jsx)(va,{spaceStore:e.spaceStore}):void 0]})]}):void 0,p?(0,Q.jsxs)(s.Fragment,{children:[(0,Q.jsx)("div",{style:B.gap}),(0,Q.jsx)(ee().A,{title:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.dangerousSettingsSection.deleteWorkspaceHelpButton.caption",defaultMessage:"Learn about deleting workspaces."}),href:(0,Fe().x)("guides.deleteWorkspace"),analyticsFrom:"space_settings"})]}):void 0,(0,Q.jsx)("div",{style:B.setupInformationHeader,children:(0,Q.jsx)(ie().A,{large:!0,divider:"full",children:(0,Q.jsx)(T().sA,{id:"securitySAMLSettings.SetupInformationSection.workspaceId",defaultMessage:"Workspace ID"})})}),(0,Q.jsx)(na,{spaceStore:e.spaceStore})]})}));function na(e){const{spaceStore:t}=e,s=(0,c().v3)(),n=(0,T().tz)(),i=(0,g().IS)((()=>({labelContainer:{height:"100%",display:"flex",alignItems:"center"},contentContainer:{height:"100%",display:"flex",alignItems:"center",justifyContent:"flex-end",gap:8}})),[]);return(0,Q.jsxs)(q().xA,{gap:8,children:[(0,Q.jsx)(q().LX,{row:1,col:1,children:(0,Q.jsx)("div",{style:i.labelContainer,children:(0,Q.jsx)(_().A,{isSmall:!0,isMultiline:!0,children:(0,Q.jsx)(T().sA,{id:"securitySAMLSettings.SetupInformationSection.workspaceId",defaultMessage:"Workspace ID"})})})}),(0,Q.jsx)(q().LX,{row:1,col:2,children:(0,Q.jsxs)("div",{style:i.contentContainer,children:[(0,Q.jsx)(_().A,{isSmall:!0,isMultiline:!0,children:t.id}),(0,Q.jsx)(w().m,{renderTooltip:()=>n.formatMessage({id:"securitySAMLSettings.SetupInformationSection.workspaceId.copyTooltip",defaultMessage:"Click to copy ID"}),render:e=>(0,Q.jsx)(b().A,{...e,icon:a(764781).V,ariaLabel:n.formatMessage({id:"securitySAMLSettings.SetupInformationSection.workspaceId.copyTooltip",defaultMessage:"Click to copy ID"}),onClick:async()=>{(await(0,a(212497).jd)())({environment:s,stringValue:t.id,copiedMessage:aa.workspaceIdCopied})}})})]})})]})}function ia({spaceStore:e,spaceBasicSettingsStore:t}){const n=(0,T().tz)(),i=(0,m().K8)((()=>t.state.name),[t]),o=(0,s.useCallback)((e=>{t.setState({...t.state,name:e.target.value})}),[t]),r=(0,g().IS)((()=>({label:{marginTop:4}})),[]),l=ba();return(0,Q.jsxs)("div",{style:l.settingsItem,children:[(0,Q.jsx)(ie().A,{children:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.workspaceNameSection.title",defaultMessage:"Name"})}),(0,Q.jsx)(S().A,{value:i,placeholder:n.formatMessage(aa.nameInputPlaceholder),readOnly:!1,onChange:o,maxlength:a(96689).zX}),(0,Q.jsx)(_().A,{isSmall:!0,isMultiline:!0,style:r.label,children:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.workspaceNameSection.nameInput.caption",defaultMessage:"You can use your organization or company name. Keep it simple."})})]})}function oa({spaceStore:e,spaceBasicSettingsStore:t}){const a=(0,c().v3)(),n=(0,m().K8)((()=>e.getIcon()),[e]),i=(0,m().K8)((()=>t.state.name),[t]),o=(0,m().K8)((()=>({recordTable:e.table,source:"workspace_settings"})),[e]),r=(0,s.useCallback)((t=>{Se().createAndCommit({userAction:"SpaceBasicSettings.handleRecordIconChange",environment:a,canUndo:!0,perform:a=>{B().KY({store:e.getIconStore(),value:t,transaction:a})}})}),[a,e]),l=(0,g().IS)((()=>({iconContainer:{width:72,height:72,border:`1px solid ${k().Tj.border.secondaryTranslucent}`,borderRadius:6,display:"flex",justifyContent:"center",alignItems:"center"},label:{marginTop:8}})),[]),d=ba();return(0,Q.jsxs)("div",{style:d.settingsItem,children:[(0,Q.jsx)(ie().A,{children:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.workspaceIconSection.title",defaultMessage:"Icon"})}),(0,Q.jsx)("div",{style:l.iconContainer,children:(0,Q.jsx)(K().B6,{bucket:"public",disabled:!1,icon:n,iconRecordCategory:"workspace",isEmptyPage:!1,title:i,size:64,iconLoggingData:o,onChange:r})}),(0,Q.jsx)(_().A,{isSmall:!0,isMultiline:!0,style:l.label,children:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.workspaceIconSection.caption",defaultMessage:"Upload an image or pick an emoji. It will show up in your sidebar and notifications."})})]})}function ra({spaceStore:e,spaceViewStore:t}){const a=(0,s.useRef)(null),n=(0,m().K8)((()=>(0,O().i)(e)),[e]),i=(0,m().K8)((()=>function(e){var t;const a=(0,O().i)(e);return a?(null===(t=e.getSetting("getting_started_template_errors"))||void 0===t?void 0:t[a])??[]:[]}(e)),[e]),o=(0,m().K8)((()=>"on"===d().default.getEligibleGroup({experimentId:"adoption_custom_workspace_getting_started_page",defaultGroup:"control"})),[]),r=(0,m().K8)((()=>n?h().B.createChildStore(e,{table:C().ev,id:n}):void 0),[e,n]),l=(0,m().K8)((()=>e.canAdmin()),[e]),c=(0,m().K8)((()=>be().Ay.state.highlightedSetting===be().rF.GettingStartedPageSetting),[]),u=(0,g().IS)((()=>({container:{...c?{backgroundColor:k().Tj.background.secondary,marginInlineStart:-1*(0,ne().AL)(!1),marginInlineEnd:-1*(0,ne().AL)(!1),paddingInlineStart:(0,ne().AL)(!1),paddingInlineEnd:(0,ne().AL)(!1),marginTop:12,marginBottom:12,paddingTop:12,paddingBottom:24,borderRadius:6}:{marginBottom:24},display:"flex",flexDirection:"column",gap:12}})),[c]);return(0,s.useEffect)((()=>{if(c&&a.current){const e=setTimeout((()=>{var e;null===(e=a.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center"})}),200);return()=>clearTimeout(e)}}),[c]),l&&o?(0,Q.jsxs)("div",{ref:a,style:u.container,children:[(0,Q.jsxs)("div",{children:[(0,Q.jsx)(ie().A,{large:!0,divider:"full",style:{paddingTop:12},children:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.gettingStarted.subtitle",defaultMessage:"Custom landing page"})}),(0,Q.jsx)(_().A,{isSmall:!0,isMultiline:!0,children:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.gettingStarted.description",defaultMessage:"When a new workspace member joins, a copy of this page will automatically be installed in their Private section."})})]}),(0,Q.jsx)("div",{children:(0,Q.jsx)(Le,{spaceStore:e,spaceViewStore:t,gettingStartedPageStore:r,gettingStartedPageErrors:i})})]}):null}function la({spaceStore:e,spaceBasicSettingsStore:t,organizationOverrides:n}){const i=(0,c().v3)(),o=(0,m().K8)((()=>e.getSettings().disable_page_analytics),[e]),r=Boolean(n.disable_page_analytics),l=(0,m().K8)((()=>t.state.name),[t]),d=(0,s.useCallback)((()=>{if(r)return;const t=!o;Se().createAndCommit({userAction:"SpaceBasicSettings.analyticsSettings.onSelectOption",environment:i,canUndo:!0,perform:a=>{B().zv({store:e,data:{settings:{...e.getSettings(),disable_page_analytics:t}},transaction:a})}}),(0,a(314529).DO_NOT_USE_trackLegacy)(i,t?"page_analytics_workspace_opt_out":"page_analytics_workspace_opt_in")}),[o,i,r,e]),u=(0,g().IS)((()=>({toggleContainer:{display:"flex",gap:12,flexDirection:"column"}})),[]),p=ba();return(0,Q.jsxs)(s.Fragment,{children:[(0,Q.jsx)(ie().A,{large:!0,divider:"full",style:{paddingTop:12},children:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.analytics.title",defaultMessage:"Analytics"})}),(0,Q.jsxs)("div",{style:{...u.toggleContainer,...p.settingsItem},children:[(0,Q.jsx)($().A,{spaceStore:e,title:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.analytics.settings.title",defaultMessage:"Save and display page view analytics"}),caption:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.analytics.settings.description",defaultMessage:"People with edit or full access will be able to see how many views a page has. If this is turned off, page views will not be stored for all pages in {workspaceName}.",values:{workspaceName:l}}),type:"toggle",isOn:!o,isLocked:r,lockedTooltip:(0,ze().C_)(),onToggle:d}),(0,Q.jsx)(ee().A,{title:(0,Q.jsx)(T().sA,{defaultMessage:"Learn about workspace analytics.",id:"spaceBasicSettings.workspaceAnalytics.helpButton.caption"}),href:(0,Fe().x)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq"})]})]})}function da(){const e=(0,c().v3)(),t=(0,T().tz)(),r=(0,i().r)(),l=(0,o().L)(),d=(0,n().T)(),u=(0,ot()._)({name:"export_members",spaceId:r,userId:d}),g=(0,a(176983).J)(l),p=(0,m().K8)((()=>g&&"available"===(null==u?void 0:u.type)),[g,u]),h=(0,s.useCallback)((()=>{!function(e){const{spaceStore:t,intl:a,environment:s}=e;if(!t||!t.canAdmin())return;G().xi(s,{spaceStore:t,intl:a})}({spaceStore:l,intl:t,environment:e})}),[e,t,l]),f=ba();return(0,Q.jsx)("div",{style:f.settingsItem,children:(0,Q.jsx)(ca,{featureAvailavailability:u,canExport:p,handleClick:h})})}function ca(e){const t=(0,o().L)(),{featureAvailavailability:a,canExport:s,handleClick:n}=e;return(0,Q.jsx)($().A,{spaceStore:t,type:"custom",title:(0,Q.jsxs)(x().Y1,{direction:"horizontal",gap:2,align:"center-left",children:[(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.exportMembersSettingsItem.title",defaultMessage:"Members"}),(0,Q.jsx)(Y().W,{tooltipTitle:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.exportMembersSettingsItem.tooltipTitle",defaultMessage:"Learn More"}),buttonProps:{external:!0,href:(0,Fe().x)("guides.exportMembers")}})]}),upsellOptions:null!=a&&a.upsell?{upsell:a.upsell,analyticsName:"space_export_members",customMessages:Sa}:void 0,disabled:!s,customButton:(0,Q.jsx)("div",{style:{display:"flex"},children:(0,Q.jsx)(j().A,{size:"lg",disabled:!s,onClick:n,children:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.exportMembersSettingsItem.exportAsCSVButton.label",defaultMessage:"Export members as CSV"})})})})}function ua(){return(0,Q.jsx)(ie().A,{large:!0,divider:"full",style:{paddingTop:12},children:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.feature.subtitle",defaultMessage:"Feature settings"})})}function ma(){return(0,Q.jsx)(ie().A,{large:!0,divider:"full",children:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.title",defaultMessage:"Workspace settings"})})}async function ga(e,t,a,s,n){const{currentUserSettingsStore:i}=r().default.state;if(!i)return;const o=(0,f().G)(a,e)||t.formatMessage({defaultMessage:"Untitled workspace",id:"spaceBasicSettings.deleteWorkspace.untitledWorkspace.placeholder"}),l=(0,I().vL)(p().locale)?(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.deleteWorkspaceConfirmationDialog.prompt",defaultMessage:"This action cannot be undone. This will permanently delete the workspace, including all pages and files. Please type the name of the workspace to confirm."}):(0,Q.jsx)(Q.Fragment,{children:(0,Q.jsx)(se,{translations:{es:"Esta acción no se puede deshacer. Esto eliminará permanentemente el espacio de trabajo, incluidas todas las páginas y archivos. Por favor escriba el nombre del espacio de trabajo para confirmar.",ru:"Это действие не может быть отменено. Это навсегда удалит рабочее пространство, включая все страницы и файлы. Пожалуйста, введите название рабочей области для подтверждения.",zh:"此操作无法撤消。 这将永久删除工作区，包括所有页面和文件。 请输入要确认的工作空间的名称。",de:"Diese Aktion kann nicht rückgängig gemacht werden. Dadurch wird der Arbeitsbereich einschließlich aller Seiten und Dateien dauerhaft gelöscht. Bitte geben Sie den Namen des Arbeitsbereichs zur Bestätigung ein.",fr:"Cette action ne peut pas être annulée. Cela supprimera définitivement l'espace de travail, y compris toutes les pages et tous les fichiers. Veuillez saisir le nom de l'espace de travail pour confirmer.",ja:"この操作を元に戻すことはできません。 これにより、すべてのページとファイルを含むワークスペースが完全に削除されます。 確認するワークスペースの名前を入力してください。",it:"Questa azione non può essere annullata. Questo eliminerà definitivamente l'area di lavoro, incluse tutte le pagine e i file. Digita il nome dell'area di lavoro per confermare.",pt:"Essa ação não pode ser desfeita. Isso excluirá permanentemente o espaço de trabalho, incluindo todas as páginas e arquivos. Por favor, digite o nome do espaço de trabalho para confirmar.",nl:"Deze actie kan niet ongedaan gemaakt worden. Hiermee wordt de werkruimte permanent verwijderd, inclusief alle pagina's en bestanden. Typ de naam van de werkruimte om te bevestigen.",pl:"Tego działania nie można cofnąć. Spowoduje to trwałe usunięcie obszaru roboczego, w tym wszystkich stron i plików. Wpisz nazwę obszaru roboczego, aby potwierdzić.",sv:"Den här åtgärden kan inte ångras. Detta tar bort arbetsytan permanent, inklusive alla sidor och filer. Vänligen skriv in arbetsplatsens namn för att bekräfta.",uk:"Цю дію не можна скасувати. Це дозволить остаточно видалити робочу область, включаючи всі сторінки та файли. Введіть назву робочої області для підтвердження.",no:"Denne handlingen kan ikke fortrykkes. Dette vil permanent slette arbeidsområdet, inkludert alle sider og filer. Vennligst skriv navnet på arbeidsområdet for å bekrefte.",tr:"Bu işlem geri alınamaz. Bu, tüm sayfaları ve dosyaları içeren çalışma alanını kalıcı olarak siler. Lütfen onaylamak için çalışma alanının adını yazın.",cs:"Tuto akci nelze vrátit zpět. Tím se trvale odstraní pracovní prostor včetně všech stránek a souborů. Zadejte prosím název pracovního prostoru, který chcete potvrdit.",vi:"Hành động này không thể được hoàn tác. Điều này sẽ xóa vĩnh viễn không gian làm việc, bao gồm tất cả các trang và tệp. Vui lòng nhập tên của không gian làm việc để xác nhận.",da:"Denne handling kan ikke fortrydes. Dette vil permanent slette arbejdsområdet, inklusive alle sider og filer. Indtast navnet på arbejdsområdet for at bekræfte.",hu:"Ez a művelet nem visszavonható. Ez véglegesen törli a munkaterületet, beleértve az összes oldalt és fájlt. Kérjük, írja be a munkaterület nevét a megerősítéshez.",ar:"لا يمكن التراجع عن هذا الإجراء. سيؤدي ذلك إلى حذف مساحة العمل كليا ، بما يشمل جميع الصفحات والملفات. يرجى كتابة اسم مساحة العمل للتأكيد.",th:"การกระทำนี้ไม่สามารถยกเลิกได้ นี่จะเป็นการลบพื้นที่ทำงานอย่างถาวรรวมถึงหน้าและไฟล์ทั้งหมด โปรดพิมพ์ชื่อของพื้นที่ทำงานเพื่อยืนยัน",he:"לא ניתן לבטל פעולה זו. פעולה זו תמחק לצמיתות את סביבת העבודה, כולל כל הדפים והקבצים. הקלד את שם מרחב העבודה כדי לאשר.",fi:"Tätä toimintoa ei voi peruuttaa. Tämä poistaa työtilan pysyvästi, mukaan lukien kaikki sivut ja tiedostot. Vahvista kirjoittamalla työtilan nimi.",id:"Tindakan ini tidak bisa dibatalkan. Ini akan secara permanen menghapus ruang kerja, termasuk semua halaman dan file. Silakan ketik nama ruang kerja untuk mengonfirmasi."}})});await E().h({title:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.deleteWorkspaceConfirmationDialog.title",defaultMessage:"Delete this entire workspace permanently?"}),message:l,acceptLabel:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.deleteWorkspaceConfirmationDialog.deleteWorkspaceButton.label",defaultMessage:"Permanently delete workspace"}),requiredInputValue:o})&&(!async function(e){const{environment:t,spaceId:a,organizationId:s,onDelete:n}=e;z().m({message:F.deletingWorkspace});try{const{value:e}=await(0,L().UT)(t,V,{spaceId:a,source:"user_initiated_deletion",organizationId:s},{spaceIds:[]}).next();if(e.error)throw e.error;await n()}finally{z().V()}}({environment:a,spaceId:e.id,onDelete:s,organizationId:n}),N().db(a),be().Ay.setState({...be().Ay.state,open:!1}))}function pa(){be().Ay.setState({...be().Ay.state,open:!1}),et().A.setState(et().A.getInitialState())}function ha({spaceStore:e,securitySettingsStore:t,spaceBasicSettingsStore:s}){const n=(0,g().IS)((()=>({title:{display:"flex",alignItems:"center",gap:8}})),[]),i=ba();return(0,Q.jsx)("div",{style:i.settingsItem,children:(0,Q.jsx)($().A,{spaceStore:e,type:"custom",title:(0,Q.jsxs)("div",{style:n.title,children:[(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.hipaaCompliance.label",defaultMessage:"HIPAA Compliance"}),(0,Q.jsx)(ee().A,{href:(0,Fe().x)("guides.hipaaCompliancy"),analyticsFrom:"space_settings"})]}),caption:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.hipaaCompliance.description",defaultMessage:"Store and process Protected Health Information (PHI) by enabling HIPAA compliance. By enabling HIPAA compliance, you are agreeing to Notion’s <inlinelink>Business Associate Agreement</inlinelink>",values:{inlinelink:e=>(0,Q.jsx)(a(416783).V,{href:(0,Fe().x)("guides.hipaaBAA"),external:!0,onClick:e=>e.stopPropagation(),children:e})}}),customButton:(0,Q.jsx)(fa,{spaceStore:e,securitySettingsStore:t})})})}function fa({spaceStore:e,securitySettingsStore:t}){const a=(0,c().v3)(),n=(0,m().K8)((()=>(0,Oe().A)(e)),[e]),[i,o]=s.useState(n),[r,l]=s.useState(!1),[d,u]=s.useState(!1),g=(0,s.useCallback)((()=>async function({securitySettingsStore:e,spaceStore:t,environment:a,isGoingToDisableHIPAACompliancy:s,openModal:n,closeModal:i}){i(),e.setState({...e.state,zeroRetentionEnabled:!e.state.zeroRetentionEnabled}),R().V(a,{spaceStore:t,securitySettingsState:e.state}),(0,U().x)(a,t),n(),await P().callApi({eventName:"sendHIPAACompliancyUpdate",environment:a,data:{spaceId:t.id,isDisablingHIPAA:s}})}({securitySettingsStore:t,spaceStore:e,environment:a,isGoingToDisableHIPAACompliancy:i,openModal:()=>u(!0),closeModal:()=>l(!1)})),[a,t,e,i]);return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(tt().YS,{isOpen:d,hasDisabledHIPAACompliancy:i,onClose:()=>u(!1)}),(0,Q.jsx)(tt().TD,{isOpen:r,onClose:()=>l(!1),onConfirmDecision:g,isDisablingHIPAACompliancy:i}),(0,Q.jsx)(j().A,{size:"lg",onClick:()=>{l(!0),o(t.state.zeroRetentionEnabled)},children:(0,Q.jsx)(T().sA,{...n?aa.deactivateHIPAAButton:aa.activateHIPAAButton})})]})}function va({spaceStore:e}){const t=(0,c().v3)(),n=(0,T().tz)(),i=(0,l().X)("reauth_on_user_and_workspace_deletion"),[o,d]=s.useState(!1),[u,g]=s.useState(!1),p=(0,m().K8)((()=>r().default.state.currentUserRootStore),[]),h=(0,m().O$)(r().AppStoreCurrentUserSettingsStore),f=(0,v()._3)({spaceId:e.id}),y=(0,a(106702).$)(),x=(0,m().K8)((()=>(null==y?void 0:y.getEmail())||""),[y]),b=(0,s.useCallback)((async()=>{p&&h&&(await a(666144).sy({environment:t,inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,pointer:{table:a(294712).GD,id:p.id},userId:t.currentUser.id}),(0,a(117484).t)({environment:t,userRootStore:p,ignoreSpaceId:e.id,userSettingsStore:h,pageVisitSource:M().y8.SwitchSpace}))}),[t,p,h,e.id]),S=(0,s.useCallback)((async()=>{g(!1),await ya({environment:t,spaceStore:e,intl:n,showDowngradeModal:()=>d(!0),onDelete:b})}),[t,e,n,b]),A=(0,s.useCallback)((()=>{g(!1)}),[]),w=(0,s.useCallback)((async()=>{i?g(!0):await ya({environment:t,spaceStore:e,intl:n,showDowngradeModal:()=>d(!0),onDelete:b})}),[i,t,e,n,b]);return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(a(661537).P,{open:u,userEmail:x,onAuthorized:S,onDismiss:A,useCase:"delete_workspace"}),o?(0,Q.jsx)(a(469776).S4,{billingData:f,isOpen:o,onClose:()=>d(!1),onConfirmDelete:async()=>await ga(e,n,t,b),spaceStore:e}):null,(0,Q.jsx)(j().A,{size:"lg",colorPalette:"red",onClick:w,children:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.dangerousSettingsSection.deleteWorkspaceButton.label",defaultMessage:"Delete entire workspace"})})]})}async function ya(e){const{environment:t,spaceStore:a,intl:s,showDowngradeModal:n,onDelete:i}=e,o=y().subscriptionDataStoreInstance.state,r=rt().RJ(o);(0,D().H)(t),r?n():await ga(a,s,t,i)}function xa({spaceStore:e,spaceBasicSettingsStore:t,securitySettingsStore:a}){const n=(0,c().v3)(),i=(0,s.useCallback)((()=>async function(e,t,a,s){await(0,W().E)({environment:e,spaceStore:t,spaceBasicSettingsStore:a,securitySettingsStore:s}),et().A.setState(et().A.getInitialState()),be().Ay.setState({...be().Ay.state,open:!1}),st().A.resetData(e,{spaceId:t.id})}(n,e,t,a)),[n,e,t,a]);return(0,Q.jsxs)("div",{style:{display:"flex"},children:[(0,Q.jsx)(A().A,{colorPalette:"blue",size:"lg",onClick:i,disabled:!1,children:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.updateButton.label",defaultMessage:"Update"})}),(0,Q.jsx)(j().A,{size:"lg",style:{marginInlineStart:12},onClick:pa,children:(0,Q.jsx)(T().sA,{id:"spaceBasicSettings.cancelButton.label",defaultMessage:"Cancel"})})]})}function ba(){return(0,g().IS)((()=>({settingsItem:{paddingBottom:24}})),[])}const Sa=(0,T().YK)({eligible_to_purchase:{id:"spaceBasicSettings.exportMembersSection.upgradeMessages.eligibleToPurchase",defaultMessage:"<highlight>Upgrade</highlight> to get a list of members and guests in your workspace"},eligible_for_trial:{id:"spaceBasicSettings.exportMembersSection.upgradeMessages.eligibleForTrial",defaultMessage:"<highlight>Start trial</highlight> to get a list of members and guests in your workspace"},sales_eligible:{id:"spaceBasicSettings.exportMembersSection.upgradeMessages.salesEligible",defaultMessage:"<highlight>Contact sales</highlight> to get a list of members and guests in your workspace"},sales_assisted:{id:"spaceBasicSettings.exportMembersSection.upgradeMessages.salesAssisted",defaultMessage:"<highlight>Contact sales</highlight> to get a list of members and guests in your workspace"},eligible_to_request:{id:"spaceBasicSettings.exportMembersSection.upgradeMessages.eligibleToRequest",defaultMessage:"<highlight>Request</highlight> to get a list of members and guests in your workspace"},request_pending:{id:"spaceBasicSettings.exportMembersSection.upgradeMessages.requestPending",defaultMessage:"<highlight>Requested</highlight> to get a list of members and guests in your workspace"}})},444179:(e,t,a)=>{a.d(t,{Z:()=>o});a(296540);var s=()=>a(26697),n=()=>a(69708),i=a(474848);function o(e){const t=(0,n().tz)(),{tooltipMessageDescriptor:a,columnHeader:o}=e;return(0,i.jsx)(s().m,{placement:"top",renderTooltip:e=>(0,i.jsx)("div",{...e,children:(0,i.jsx)(n().sA,{...a})}),render:e=>(0,i.jsx)("div",{...e,children:t.formatMessage(o)})})}},449304:(e,t,a)=>{a.d(t,{Z:()=>x});a(296540);var s=()=>a(920198),n=()=>a(135168),i=()=>a(484714),o=()=>a(590526),r=()=>a(401497),l=()=>a(574359),d=()=>a(340498),c=()=>a(706021),u=()=>a(468006),m=()=>a(69708),g=()=>a(100622),p=()=>a(408543),h=()=>a(704658),f=()=>a(14228),v=()=>a(976519),y=a(474848);function x({teamStore:e,isDefault:t,onChange:a=(()=>{}),parentSpaceStore:x,privateTeamspacesFeatureAvailability:S}){const j=(0,s().L)(),A=(0,i().v3)(),w=(0,v().q)({teamId:null==e?void 0:e.id,spaceStore:x??j}),_=(0,o().K8)((()=>x||(e?(0,n().f)(e):j)),[x,e,j]),{handleClick:M}=(0,p().C)({upsell:null==S?void 0:S.upsell,source:"team_security_settings",spaceStore:_}),C=(0,o().K8)((()=>(null==_?void 0:_.canAdmin())??!1),[_]),T=(0,o().K8)((()=>{if(_)return(0,l().G)(A,_)}),[A,_]),k=(0,r().IS)((()=>({icon:{width:d().Ev.default,height:d().Ev.default},iconContainer:{width:d().Ev.default,height:d().Ev.default,display:"flex",justifyContent:"center",alignItems:"center",marginInlineStart:5,marginInlineEnd:5}})),[]),I=(0,y.jsx)(f().n,{accessKey:"default"}),N=(0,y.jsx)(f().n,{accessKey:"open"}),D=(0,y.jsx)(f().n,{accessKey:"closed"}),P=(0,y.jsx)(f().n,{accessKey:"private"}),E="dark"===(0,r().eP)()?g().oZ.uiLightGray:g().oZ.black,B=[{key:"open",icon:e=>(0,y.jsx)("div",{style:k.iconContainer,children:(0,u().Pf)("open")({...e,...k.icon})}),iconColor:E,level:N,title:N,caption:(0,y.jsx)(m().sA,{id:"CreateTeamspaceMenu.openTeamspace.caption",defaultMessage:"Anyone can see and join this teamspace"}),disabled:!1,onSelect:()=>a("open",!1)},{key:"closed",icon:e=>(0,y.jsx)("div",{style:k.iconContainer,children:(0,u().Pf)("closed")({...e,...k.icon})}),iconColor:E,level:D,title:D,caption:(0,y.jsx)(m().sA,{id:"CreateTeamspaceMenu.closedTeamspace.caption",defaultMessage:"Anyone can see this teamspace but not join"}),disabled:!1,onSelect:()=>a("closed",!1)},{key:"private",icon:e=>(0,y.jsx)("div",{style:k.iconContainer,children:(0,u().Pf)("private")({...e,...k.icon})}),iconColor:E,level:P,title:(0,c().Pd)(S)?(0,y.jsx)(b,{title:P,badge:(0,y.jsx)(h().UpgradeButton,{display:"icon",upsell:S.upsell,source:"private_teamspaces",spaceStore:_})}):P,caption:(0,y.jsx)(m().sA,{id:"CreateTeamspaceMenu.privateTeamspace.caption",defaultMessage:"Only members can see that this teamspace exists"}),disabled:(0,c().Pd)(S)&&!C,tooltip:void 0,onSelect:()=>{(0,c().Pd)(S)?M():a("private",!1)}}];if(t||C){const e=t&&(!C||w),s={key:"default",icon:e=>(0,y.jsx)("div",{style:k.iconContainer,children:(0,u().Pf)("default")({...e,...k.icon})}),iconColor:E,level:I,title:I,caption:(0,y.jsx)(m().sA,{id:"CreateTeamspaceMenu.defaultTeamspace.caption",defaultMessage:"Everyone at {spaceName} must be a member",values:{spaceName:T}}),disabled:!1,disableAllOptionsTooltip:e?C?(0,y.jsx)(m().sA,{id:"TeamAccessLevelSwitcher.closeOrPrivateTeamspace.disabledTooltipOnlyDefaultTeam",defaultMessage:"Add another default teamspace to change teamspace permissions."}):(0,y.jsx)(m().sA,{id:"TeamAccessLevelSwitcher.defaultTeamspace.disabledTooltipNonAdmin",defaultMessage:"You can’t change this setting because you are not a workspace admin"}):void 0,onSelect:()=>a("open",!0)};B.unshift(s)}return B}function b({title:e,badge:t}){const a=(0,r().IS)((()=>({container:{display:"flex",flexWrap:"wrap",alignItems:"center"},badge:{marginInlineStart:5}})),[]);return(0,y.jsxs)("div",{style:a.container,children:[e,(0,y.jsx)("div",{style:a.badge,children:t})]})}},449539:(e,t,a)=>{a.d(t,{p:()=>d});var s=a(296540),n=()=>a(756117),i=()=>a(401497),o=()=>a(493552),r=()=>a(100622),l=a(474848);function d(e){const{icon:t,title:a,byline:d}=e,[c,u]=(0,s.useState)(!1);(0,s.useEffect)((()=>{const e=setTimeout((()=>u(!0)),100);return()=>clearTimeout(e)}),[]);const m=(0,i().IS)((()=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:8,margin:"52px auto"},icon:{color:r().Tj.icon.secondary,fill:r().Tj.icon.secondary,height:36,width:36}})),[]);return(0,l.jsxs)(n().A,{animate:{opacity:c?1:0},initial:{opacity:0},style:m.container,children:[t?t(m.icon):null,(0,l.jsx)(o().D,{styleKey:"titleSmSemibold",colorVariant:"secondary",children:a}),(0,l.jsx)(o().D,{styleKey:"bodyRegular",colorVariant:"tertiary",children:d})]})}},458118:(e,t,a)=>{a.d(t,{N:()=>C});var s=a(296540),n=()=>a(692031),i=()=>a(212497),o=()=>a(726637),r=()=>a(484714),l=()=>a(401497),d=()=>a(394888),c=()=>a(89002),u=()=>a(807449),m=()=>a(416783),g=()=>a(15936),p=()=>a(564766),h=()=>a(69708),f=()=>a(232930),v=()=>a(898568),y=(a(581454),()=>a(631524)),x=()=>a(493552),b=()=>a(26697),S=()=>a(406533),j=()=>a(484595),A=a(474848);function w(e){const t=(0,l().IS)((()=>({labelContainer:{display:"inline-flex",alignItems:"center",marginBottom:8},container:{position:"relative",width:"100%"},textBelowInput:{marginTop:6},helpIcon:{marginInlineStart:4},inputContainer:{display:"flex",alignItems:"center",gap:8},radioOption:{display:"flex",alignItems:"center"}})),[]);return(0,A.jsxs)("div",{style:t.container,children:[(0,A.jsxs)("div",{style:t.labelContainer,children:[(0,A.jsx)(x().D,{styleKey:"captionMedium",colorVariant:"secondary",children:e.labelMessage}),e.helpMessage?(0,A.jsx)(b().m,{renderTooltip:()=>e.helpMessage,render:e=>(0,A.jsx)("span",{...e,children:(0,A.jsx)(u().I,{icon:S().questionMarkCircleIcon,size:"xs",colorVariant:"tertiary",style:t.helpIcon})})}):void 0]}),(0,A.jsx)("div",{style:t.inputContainer,children:e.items.map((a=>(0,A.jsxs)(y().p,{style:t.radioOption,onClick:a.onClick,children:[(0,A.jsx)(j().A,{isSelected:e.selectedItem===a.value}),(0,A.jsx)(x().D,{styleKey:"bodyRegular",colorVariant:"primary",children:a.label})]},a.id)))}),e.secondaryMessage?(0,A.jsx)(x().D,{styleKey:"captionRegular",colorVariant:"secondary",style:t.textBelowInput,children:e.secondaryMessage}):null]})}var _=()=>a(315412),M=function(e){return e.MetadataUrl="metadataUrl",e.MetadataXml="metadataXml",e}(M||{});function C({saveButtonText:e,samlConfig:t,loading:a,onSave:y,onDismiss:x,headerByline:b}){const S=(0,r().v3)(),j=(0,h().tz)(),[C,k]=(0,s.useState)(null!=t&&t.idpMetadata?M.MetadataXml:M.MetadataUrl),[I,N]=(0,s.useState)(null==t?void 0:t.idpMetadataUrl),[D,P]=(0,s.useState)(null==t?void 0:t.idpMetadata),[E,B]=(0,s.useState)(void 0),[R,V]=(0,s.useState)(void 0),L=(0,l().IS)((()=>({byline:{paddingInline:32},container:{width:v().J2,display:"flex",flexDirection:"column",gap:v().gA,overflowY:"auto"}})),[]),z=t?(0,p().zW)(null==t?void 0:t.id,o().A.domainBaseUrl):null,F=(0,p().Hw)(o().A.domainBaseUrl),O=(0,s.useCallback)((async e=>{if(!e)return;const[t,a]=await Promise.all([(0,n().r)(),(0,i().jd)()]);a({environment:S,stringValue:e,copiedMessage:t.copiedLinkToClipboard})}),[S]),U=[{id:"metadataUrl",value:M.MetadataUrl,label:"URL",onClick:()=>k(M.MetadataUrl)},{id:"metadataXml",value:M.MetadataXml,label:"Metadata XML",onClick:()=>k(M.MetadataXml)}];async function W(){switch(C){case M.MetadataUrl:return void("valid"===(0,p().vU)(I??"").type?await y({metadataUrl:I}):B((0,p().vU)(I??"")));case M.MetadataXml:"valid"===(0,p().$W)(D??"").type?await y({metadataXml:D}):V((0,p().$W)(D??""))}}return(0,A.jsx)(d().s,{isOpen:!0,onDismiss:x,areaConstraint:{width:{type:"fixed",length:v().NF}},render:({sizeRange:t})=>(0,A.jsx)(c().t,{sizeRange:t,header:(0,A.jsx)(v().rQ,{icon:(0,A.jsx)(u().I,{icon:g().checkmarkShieldIcon,size:"xl",colorVariant:"secondary"}),title:(0,A.jsx)(h().sA,{id:"organization.general.saml.settings.configure.modal.title",defaultMessage:"Set up SAML SSO"}),byline:(0,A.jsx)("div",{style:L.byline,children:b||(0,A.jsx)(h().sA,{id:"organization.general.saml.settings.configure.modal.byline",defaultMessage:"Allow organization members to log into Notion through your identity provider (IDP). <guidelink>Learn more</guidelink>",values:{guidelink:e=>(0,A.jsx)(m().V,{hoverColor:"blue",href:(0,f().x)("guides.samlSettings"),external:!0,children:e})}})})}),footer:(0,A.jsx)(v().jl,{primaryText:e??(0,A.jsx)(h().sA,{id:"organization.general.saml.settings.configure.modal.primaryAction",defaultMessage:"Save"}),primaryAction:W,primaryDisabled:a,secondaryText:(0,A.jsx)(h().sA,{id:"organization.general.saml.settings.configure.modal.cancelAction",defaultMessage:"Cancel"}),secondaryAction:x}),children:(0,A.jsxs)("div",{style:L.container,children:[z?(0,A.jsx)(_().p,{disabled:!0,onCopyClick:()=>O(z),value:z,placeholder:"https://notion.so/sso/saml/...",labelMessage:j.formatMessage({id:"organization.general.saml.settings.configure.modal.urlInput.label",defaultMessage:"Assertion Consumer Service (ACS) URL"}),secondaryMessage:j.formatMessage({id:"organization.general.saml.settings.configure.modal.urlInput.secondary",defaultMessage:"Add this URL to your IDP’s SAML SSO configuration"})}):null,F?(0,A.jsx)(_().p,{disabled:!0,onCopyClick:()=>O(F),value:F,placeholder:"https://notion.so/sso/saml/",labelMessage:j.formatMessage({id:"organization.general.saml.settings.configure.modal.entityIdInput.label",defaultMessage:"SAML SSO Entity ID"})}):null,(0,A.jsx)(w,{items:U,selectedItem:C,labelMessage:j.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.label",defaultMessage:"Setup method"})}),C===M.MetadataUrl?(0,A.jsx)(_().p,{value:I,onChange:e=>N(e.target.value),onBlur:()=>B((0,p().vU)(I??"")),placeholder:"https://...",labelMessage:j.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.url.value.label",defaultMessage:"URL"}),secondaryMessage:j.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.url.value.secondary",defaultMessage:"Paste the URL from your IDP"}),errorMessage:E?T(E,j):void 0}):C===M.MetadataXml?(0,A.jsx)(_().p,{multiline:!0,value:D,onChange:e=>P(e.target.value),onBlur:()=>V((0,p().$W)(D??"")),placeholder:'<md:EntityDescriptor entityID="...',labelMessage:j.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.xml.value.label",defaultMessage:"Metadata XML"}),secondaryMessage:j.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.xml.value.secondary",defaultMessage:"Paste the XML from your IDP"}),errorMessage:R?T(R,j):void 0}):null]})})})}function T(e,t){if("valid"!==e.type)switch(e.reason){case"empty":return t.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.value.error.empty",defaultMessage:"You cannot leave this field empty"});case"signed_request":return t.formatMessage({id:"organization.general.saml.settings.configure.modal.setupMethod.value.error.signedRequest",defaultMessage:"Requests cannot be signed"})}}},461197:(e,t,a)=>{a.d(t,{N:()=>f});a(581454),a(296540);var s=()=>a(590526),n=()=>a(401497),i=()=>a(302501),o=()=>a(69708),r=()=>a(100622),l=()=>a(534177),d=()=>a(284371),c=()=>a(298697),u=()=>a(187820),m=()=>a(16006),g=()=>a(453697),p=()=>a(898808),h=a(474848);function f({title:e,items:t,loading:a,error:s,titleStyle:o,containerStyle:l}){const c=(0,n().IS)((()=>({title:{alignSelf:"center",maxWidth:"100%",fontWeight:d().Wy.semibold,marginBottom:8,...d().RC},container:{flex:1,display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",height:"100%",width:"100%",border:`1px solid ${r().Tj.outlineButtonBorder}`,borderRadius:4,padding:12,overflow:"hidden"}})),[]);return(0,h.jsxs)("div",{style:{...c.container,...l},children:[(0,h.jsx)(i().A,{style:{...c.title,...o},showTooltipWhenTruncated:!0,children:e}),a?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(y,{}),(0,h.jsx)(y,{}),(0,h.jsx)(y,{}),(0,h.jsx)(y,{}),(0,h.jsx)(y,{})]}):s?(0,h.jsx)(x,{}):t.map(((e,t)=>(0,h.jsx)(v,{item:e},t)))]})}function v({item:e}){const{store:t,caption:a}=e,n=(0,o().tz)(),r=b(),d=(0,s().K8)((()=>{switch(t.table){case"block":return(0,h.jsxs)("div",{style:r.nameAndIconContainer,children:[(0,h.jsx)(u().B6,{icon:t.getIcon(),iconRecordCategory:(0,u().Te)(t),size:18,isEmptyPage:!1,disabled:!0}),(0,h.jsx)(m().A,{store:t})]});case"notion_user":return(0,h.jsxs)("div",{style:r.nameAndIconContainer,children:[(0,h.jsx)(g().A,{userStore:t,size:18}),(0,h.jsx)(i().A,{children:t.getDisplayName(n)})]});case"team":const e=t.getName();return(0,h.jsxs)("div",{style:r.nameAndIconContainer,children:[(0,h.jsx)(p().x,{disabled:!0,store:t,size:20}),(0,h.jsx)(i().A,{children:e})]});default:(0,l().HB)(t)}}),[t,r.nameAndIconContainer,n]);return(0,h.jsxs)("div",{style:r.container,children:[(0,h.jsx)(i().A,{style:r.label,children:d}),(0,h.jsx)("div",{style:r.caption,children:(0,h.jsx)(i().A,{isSecondaryColor:!0,isSmall:!0,children:a})})]})}function y(){const e=b();return(0,h.jsxs)("div",{style:e.container,children:[(0,h.jsx)(i().A,{style:e.label,children:(0,h.jsx)(c().A,{paragraphs:[{lineHeight:14,lineMargin:3,sectionWidths:[80],repeat:0,sectionMargin:2}]})}),(0,h.jsx)("div",{style:e.loadingCaption,children:(0,h.jsx)(c().A,{paragraphs:[{lineHeight:14,lineMargin:3,sectionWidths:[80],repeat:0,sectionMargin:2}]})})]})}function x(){const e=b();return(0,h.jsx)("div",{style:e.container,children:(0,h.jsx)(i().A,{style:e.errorLabel,children:(0,h.jsx)(o().sA,{id:"spaceAnalytics.basicErrorMessage",defaultMessage:"Something went wrong.{br}Try refreshing the page.",values:{br:(0,h.jsx)("br",{})}})})})}function b(){return(0,n().IS)((()=>({container:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingBlock:4,gap:4},nameAndIconContainer:{display:"flex",flexDirection:"row",justifyContent:"flex-start",gap:8,alignItems:"center",width:"100%"},label:{width:"100%"},caption:{display:"flex",justifyContent:"center",alignItems:"center"},loadingCaption:{display:"block",width:"50%"},errorLabel:{width:"100%",textAlign:"center",color:r().oZ.red}})),[])}},465031:(e,t,a)=>{a.d(t,{G6:()=>o,nQ:()=>r,sh:()=>l});var s=()=>a(907258),n=()=>a(72234),i=()=>a(547149);function o({environment:e,notionApps:t}){const a=s().default.state.sidebarSpaceViewStore;a&&i().createAndCommit({userAction:"sidebarNotionAppsActions.moveNotionApp",environment:e,canUndo:!0,cellTarget:"main",perform:e=>{n().AG(a,e,{...a.getSettings(),notion_apps:{order:t}})}})}function r(e){const t=s().default.state.sidebarSpaceViewStore;t&&i().createAndCommit({userAction:"sidebarNotionAppsActions.hideNotionAppsSection",environment:e,canUndo:!0,perform:e=>{const a=t.getNotionAppsOrder();n().AG(t,e,{notion_apps:{hidden:!0,order:a}})}})}function l(e){const t=s().default.state.sidebarSpaceViewStore;t&&i().createAndCommit({userAction:"sidebarNotionAppsActions.showNotionAppsSection",environment:e,canUndo:!0,perform:e=>{const a=t.getNotionAppsOrder();n().AG(t,e,{notion_apps:{hidden:!1,order:a}})}})}},468628:(e,t,a)=>{a.d(t,{u:()=>r});a(296540);var s=()=>a(69708),n=()=>a(534177),i=()=>a(566468),o=a(474848);function r({pageStatus:e}){return(0,o.jsx)(i().s7,{useThinTitle:!0,title:l(e)})}function l(e){switch(e){case"alive":return(0,o.jsx)(s().sA,{id:"adminContentSearchTab.pagesTable.pageStatusCell.active",defaultMessage:"Active"});case"in_trash":return(0,o.jsx)(s().sA,{id:"adminContentSearchTab.pagesTable.pageStatusCell.trash",defaultMessage:"In Trash"});case"deleted_from_trash":return(0,o.jsx)(s().sA,{id:"adminContentSearchTab.pagesTable.pageStatusCell.retained",defaultMessage:"Retained"});default:(0,n().HB)(e)}}},483869:(e,t,a)=>{a.d(t,{z:()=>s});const s=(0,a(340498).xh)("paperPlane",{default:{loader:()=>a.e(5857).then(a.bind(a,808936))},small:{loader:()=>a.e(5857).then(a.bind(a,18350))},fill:{loader:()=>a.e(5857).then(a.bind(a,59442))},fillSmall:{loader:()=>a.e(5857).then(a.bind(a,691393))}},["send","fly","flight","email","inbox","outbox"])},501497:(e,t,a)=>{a.d(t,{RC:()=>l,S6:()=>d,tD:()=>c});var s=()=>a(242422),n=()=>a(590526),i=()=>a(624090),o=()=>a(869190),r=()=>a(604995);function l(){return s().default.getConfigKey("permanently_delete_tree_queue_task_override","cdrr_enabled_timestamp_override")??i().mu}function d(){return(0,n().K8)((()=>l()),[])}function c(e,t,a){const s=(0,r().AA)(e,t);if((0,r().ak)(s)){const e=s.end.diff(s.start),t=e.as("year");if(t>=1)return(0,o().up)({years:Math.round(t)},a);const n=e.as("days");if(n>=1&&n<=45)return(0,o().up)({days:Math.round(n)},a);const i=e.as("months");if(i>=1)return(0,o().up)({months:Math.round(i)},a);if(n>=1)return(0,o().up)({days:Math.round(n)},a);const r=e.as("hours");if(r>=1)return(0,o().up)({hours:Math.round(r)},a);const l=e.as("minutes");return(0,o().up)({minutes:Math.round(l)},a)}return""}},505412:(e,t,a)=>{a.d(t,{Q:()=>s,z:()=>n});const s=80,n=200},508700:(e,t,a)=>{a.d(t,{T:()=>n});a(296540);const s={viewBox:"0 0 16 16",fittedViewBox:"1.62 2.87 12.76 10.25",svg:(0,a(474848).jsx)("path",{d:"M2.25 5.531h5.692a2.126 2.126 0 0 0 4.116 0h1.692a.625.625 0 1 0 0-1.25H12a2.126 2.126 0 0 0-4 0H2.25a.625.625 0 1 0 0 1.25M10 4.125a.875.875 0 1 1 0 1.75.875.875 0 0 1 0-1.75m-4 9c.921 0 1.706-.586 2-1.406h5.75a.625.625 0 0 0 0-1.25H8.058a2.126 2.126 0 0 0-4.116 0H2.25a.625.625 0 1 0 0 1.25H4a2.13 2.13 0 0 0 2 1.406m0-1.25a.875.875 0 1 1 0-1.75.875.875 0 0 1 0 1.75"})},n=(0,a(340498).wt)("slidersSmall",s,"small")},515153:(e,t,a)=>{a.d(t,{t:()=>u});a(296540);var s=()=>a(401497),n=()=>a(807449),i=()=>a(406094),o=()=>a(129852),r=()=>a(69708),l=()=>a(100622),d=()=>a(284371),c=a(474848);function u({runNewSearch:e,error:t}){const a=(0,s().IS)((()=>({container:{marginTop:48,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},title:{margin:"8px auto",fontWeight:d().Wy.medium,fontSize:16},description:{fontWeight:d().Wy.regular,fontSize:14,lineHeight:1.3,color:l().Tj.text.tertiary,textAlign:"center",width:328,margin:"0 auto 16px"},errorMessage:{borderRadius:4,background:l().Tj.background.secondaryTranslucent,fontFamily:d().Tf.mono,fontSize:12,color:l().Tj.text.tertiary,padding:"18px 24px",margin:"0 auto 12px"},errorButton:{width:195,margin:"8px auto 0",textAlign:"center"}})),[]);return(0,c.jsxs)("div",{style:a.container,children:[(0,c.jsx)(n().I,{icon:o().exclamationMarkCircleIcon,size:"xl",colorPalette:"red",colorVariant:"accentPrimary"}),(0,c.jsx)("h1",{style:a.title,children:(0,c.jsx)(r().sA,{id:"adminContentSearchTab.pagesTable.error.title",defaultMessage:"Something went wrong"})}),(0,c.jsx)("p",{style:a.description,children:(0,c.jsx)(r().sA,{id:"adminContentSearchTab.pagesTable.error.description",defaultMessage:"Something went wrong when we were loading the results. Try to run your search again."})}),null,(0,c.jsx)(i().A,{size:"lg",style:a.errorButton,onClick:()=>e(!0),children:(0,c.jsx)(r().sA,{id:"adminContentSearchTab.pagesTable.error.confirm",defaultMessage:"Retry"})})]})}},515358:(e,t,a)=>{a.d(t,{o:()=>i,p:()=>n});var s=()=>a(69708);const n=(0,s().YK)({private:{id:"adminContentSearchTab.pagesTable.audienceCell.private",defaultMessage:"Private"},sharedExternally:{id:"adminContentSearchTab.pagesTable.audienceCell.sharedExternally",defaultMessage:"Shared externally"},sharedInternally:{id:"adminContentSearchTab.pagesTable.audienceCell.sharedInternally",defaultMessage:"Shared internally"},publishedToWeb:{id:"adminContentSearchTab.pagesTable.audienceCell.publishedToWeb",defaultMessage:"Published to web"}}),i=(0,s().YK)({alive:{id:"adminContentSearchTab.pagesTable.filters.pageStatus.label.active",defaultMessage:"Active pages"},trash:{id:"adminContentSearchTab.pagesTable.filters.pageStatus.label.inTrash",defaultMessage:"In Trash"},retained:{id:"adminContentSearchTab.pagesTable.filters.pageStatus.label.retainedPages",defaultMessage:"Retained pages"}})},542564:(e,t,a)=>{a.d(t,{L:()=>r});a(898992),a(581454),a(941795);var s=a(296540),n=()=>a(401497),i=()=>a(388926),o=a(474848);function r({children:e}){const t=(0,n().IS)((()=>({container:{display:"flex",flexDirection:"column",gap:16,width:"100%",paddingTop:14}})),[]),a=s.Children.toArray(e);return(0,o.jsx)("div",{style:t.container,children:a.map(((e,t)=>(0,o.jsxs)(s.Fragment,{children:[e,t<a.length-1?(0,o.jsx)(i().A,{colorVariant:"secondary",size:1}):void 0]},t)))})}},550729:(e,t,a)=>{a.d(t,{z:()=>l});var s=a(296540),n=()=>a(920198),i=()=>a(484714),o=()=>a(615234);var r=()=>a(898255);function l(e){var t;const a=(0,i().v3)(),[l,d]=(0,s.useState)(void 0),c=null===(t=(0,n().L)())||void 0===t?void 0:t.id,u=o().Xb,m=(0,s.useCallback)((async t=>{const s=await(0,r().aj)({environment:a,spaceId:t,type:e});s&&d(s)}),[a,e]);return function(e,t){const a=(0,s.useRef)(),n=(0,s.useRef)(null),[i,o]=(0,s.useState)(t),r=(0,s.useCallback)((()=>o((e=>null===e?t:null))),[t]);function l(){var e;null===(e=a.current)||void 0===e||e.call(a)}const d=(0,s.useCallback)((()=>{n.current&&clearInterval(n.current)}),[]),c=(0,s.useCallback)((()=>{d(),n.current=setInterval(l,t)}),[d,t]);(0,s.useEffect)((()=>{a.current=e}),[e]),(0,s.useEffect)((()=>(n.current&&clearInterval(n.current),null!==i&&(n.current=setInterval(l,i)),d)),[i,d])}((()=>{m(c)}),u),(0,s.useEffect)((()=>{m(c)}),[m,c]),l}},550848:(e,t,a)=>{a.d(t,{Z:()=>B,R:()=>E});a(898992),a(354520),a(581454);var s=a(296540),n=()=>a(484714),i=()=>a(590526),o=()=>a(401497),r=()=>a(723085),l=()=>a(849255),d=()=>a(807449),c=()=>a(26697),u=()=>a(302501),m=a(474848);const g={viewBox:"0 0 16 16",fittedViewBox:"3.65 3.65 8.68 8.69",directional:!0,svg:(0,m.jsx)("path",{d:"M4.708 3.824c-.235-.235-.621-.22-.862.022-.241.24-.257.627-.022.862l6.38 6.38H5.602a.625.625 0 1 0 0 1.25h6.11c.345 0 .624-.28.624-.626v-6.11a.625.625 0 1 0-1.25 0v4.601z"})},p=(0,a(340498).wt)("arrowDiagonalDownRightSmall",g,"small");var h=()=>a(8741),f=()=>a(854150),v=()=>a(798880),y=()=>a(301608),x=()=>a(69708),b=()=>a(100622),S=()=>a(534177),j=()=>a(284371),A=()=>a(76590),w=()=>a(249117),_=()=>a(690197),M=()=>a(655546),C=()=>a(232930),T=()=>a(997583),k=()=>a(335260),I=()=>a(461197),N=()=>a(155712),D=()=>a(20953);const P=640;function E({data:e,loading:t,error:a,daysFilter:d,setDaysFilter:g}){const p=(0,x().tz)(),h=(0,n().v3)(),{activeMembersCount:b,previousActiveMembersCount:S,activeGuestsCount:E,previousActiveGuestsCount:R,topTeamspaces:V,topViewers:L,topEditors:z}=e,F=(0,o().IS)((()=>({title:{fontWeight:j().Wy.medium,fontSize:16,marginBlock:"8px 4px",display:"flex",alignItems:"center"},helpInfo:{marginInlineStart:4},container:{display:"flex",flexDirection:"column",gap:16},summaryCard:{minHeight:70},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16}})),[]),[O,U]=(0,T().z)(),{organizationOwnerRecordCache:W}=(0,s.useContext)(k().N),H=(0,s.useCallback)((e=>{"all_time"===e&&(e="last_365_days"),A().n_(h,{filter:"user_engagement",daysFilter:e}),g(e)}),[h,g]),q=(0,i().K8)((()=>V.map((({teamspaceId:e,pageViews:t})=>({store:new(r().h)(h,{id:e,table:f().yK},{inMemoryRecordCache:W}),caption:(0,m.jsx)(x().sA,{id:"workspaceAnalytics.overview.userEngagement.caption.pageViews",defaultMessage:"{pageViews} views",values:{pageViews:(0,m.jsx)(M()._,{abbreviateNumber:!0,num:t})}})}))).filter((e=>e.store.canRead())).slice(0,5)),[h,V,W]),K=(0,i().K8)((()=>L.map((({userId:e,pageViews:t})=>({store:new(l().L)(h,{id:e,table:v().oo}),caption:(0,m.jsx)(x().sA,{id:"workspaceAnalytics.overview.userEngagement.caption.pageView",defaultMessage:"{pageViews} views",values:{pageViews:(0,m.jsx)(M()._,{abbreviateNumber:!0,num:t})}})}))).slice(0,5)),[h,L]),G=(0,i().K8)((()=>z.map((({userId:e,pageEdits:t})=>({store:new(l().L)(h,{id:e,table:v().oo}),caption:(0,m.jsx)(x().sA,{id:"workspaceAnalytics.overview.userEngagement.caption.pageEdits",defaultMessage:"{pageEdits} edits",values:{pageEdits:(0,m.jsx)(M()._,{abbreviateNumber:!0,num:t})}})}))).slice(0,5)),[h,z]);return(0,m.jsxs)("div",{style:F.container,ref:O,children:[(0,m.jsxs)("div",{style:F.titleContainer,children:[(0,m.jsxs)(u().A,{style:F.title,children:[(0,m.jsx)(x().sA,{id:"workspaceAnalytics.overview.userEngagement.title",defaultMessage:"User engagement"}),(0,m.jsx)(c().m,{placement:"bottom",render:e=>(0,m.jsx)(_().A,{...e,href:(0,C().x)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:F.helpInfo}),renderTooltip:()=>"all_time"!==d?(0,m.jsx)(x().sA,{id:"settings.workspaceAnalytics.overviewTab.userEngagement.tooltip.lastDays",defaultMessage:"Active members and guests have viewed at least one page within the {dateRange}",values:{dateRange:p.formatMessage(y().Yr[d])}}):(0,m.jsx)(x().sA,{id:"settings.workspaceAnalytics.overviewTab.userEngagement.tooltip.allTime",defaultMessage:"Active members and guests have viewed at least one page in the workspace"})})]}),(0,m.jsx)(D().Z,{currentFilter:d,onChangeFilter:H,hideAllTime:!0})]}),(0,m.jsxs)(w().xA,{gap:16,children:[(0,m.jsx)(w().LX,{row:1,col:1,children:(0,m.jsx)(N().a,{style:F.summaryCard,loading:t,error:a,title:(0,m.jsx)(x().sA,{id:"workspaceAnalytics.overview.userEngagement.activeMembersCount",defaultMessage:"{activeMembersCount} active members",values:{activeMembersCount:(0,m.jsx)(M()._,{abbreviateNumber:U<P,num:b})}}),byline:void 0!==S?(0,m.jsx)(B,{userType:"members",daysFilter:d,count:b,previousCount:S}):null})}),(0,m.jsx)(w().LX,{row:1,col:2,children:(0,m.jsx)(N().a,{style:F.summaryCard,loading:t,error:a,title:(0,m.jsx)(x().sA,{id:"workspaceAnalytics.overview.userEngagement.activeGuestsCount",defaultMessage:"{activeGuestsCount} active guests",values:{activeGuestsCount:(0,m.jsx)(M()._,{abbreviateNumber:U<P,num:E})}}),byline:void 0!==R?(0,m.jsx)(B,{userType:"guests",daysFilter:d,count:E,previousCount:R}):null})})]}),(0,m.jsxs)(w().xA,{gap:16,children:[(0,m.jsx)(w().LX,{row:1,col:1,children:(0,m.jsx)(I().N,{loading:t,error:a,title:(0,m.jsx)(x().sA,{id:"workspaceAnalytics.overview.userEngagement.activeTeamspaces",defaultMessage:"Most active teamspaces"}),items:q})}),(0,m.jsx)(w().LX,{row:1,col:2,children:(0,m.jsx)(I().N,{loading:t,error:a,title:(0,m.jsx)(x().sA,{id:"workspaceAnalytics.overview.userEngagement.activeViewers",defaultMessage:"Most active viewers"}),items:K})}),(0,m.jsx)(w().LX,{row:1,col:3,children:(0,m.jsx)(I().N,{loading:t,error:a,title:(0,m.jsx)(x().sA,{id:"workspaceAnalytics.overview.userEngagement.activeEditors",defaultMessage:"Most active editors"}),items:G})})]})]})}function B({userType:e,daysFilter:t,count:a,previousCount:s}){const n=0===a&&0===s?0:Math.round((a-s)/s*100);let i;i=n===1/0?function(e,t,a){if("all_time"===a)return(0,m.jsx)(x().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.none",defaultMessage:"No changes yet"});return"guests"===e?(0,m.jsx)(x().sA,{id:"workspaceAnalytics.overview.userEngagement.changeFromZero.summaryByline.guests.positive",defaultMessage:"{changeValue} more guests than previous {numberOfDays} days",values:{changeValue:t.toLocaleString(),numberOfDays:y().Eb[a].toLocaleString()}}):(0,m.jsx)(x().sA,{id:"workspaceAnalytics.overview.userEngagement.changeFromZero.summaryByline.members.positive",defaultMessage:"{changeValue} more members than previous {numberOfDays} days",values:{changeValue:t.toLocaleString(),numberOfDays:y().Eb[a].toLocaleString()}})}(e,a,t):function(e,t){switch(t){case"all_time":return 0===e?(0,m.jsx)(x().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.none",defaultMessage:"No changes yet"}):e>0?(0,m.jsx)(x().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.positive",defaultMessage:"{changeInPercentage}% more since the start",values:{changeInPercentage:Math.abs(e)}}):(0,m.jsx)(x().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.allTime.negative",defaultMessage:"{changeInPercentage}% less since the start",values:{changeInPercentage:Math.abs(e)}});case"last_90_days":return 0===e?(0,m.jsx)(x().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_90_days.none",defaultMessage:"No changes in previous 90 days"}):e>0?(0,m.jsx)(x().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_90_days.positive",defaultMessage:"{changeInPercentage}% more than previous 90 days",values:{changeInPercentage:Math.abs(e)}}):(0,m.jsx)(x().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_90_days.negative",defaultMessage:"{changeInPercentage}% less than previous 90 days",values:{changeInPercentage:Math.abs(e)}});case"last_365_days":return 0===e?(0,m.jsx)(x().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_365_days.none",defaultMessage:"No changes in previous 365 days"}):e>0?(0,m.jsx)(x().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_365_days.positive",defaultMessage:"{changeInPercentage}% more than previous 365 days",values:{changeInPercentage:Math.abs(e)}}):(0,m.jsx)(x().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_365_days.negative",defaultMessage:"{changeInPercentage}% less than previous 365 days",values:{changeInPercentage:Math.abs(e)}});case"last_28_days":return 0===e?(0,m.jsx)(x().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_28_days.none",defaultMessage:"No changes in previous 28 days"}):e>0?(0,m.jsx)(x().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_28_days.positive",defaultMessage:"{changeInPercentage}% more than previous 28 days",values:{changeInPercentage:Math.abs(e)}}):(0,m.jsx)(x().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_28_days.negative",defaultMessage:"{changeInPercentage}% less than previous 28 days",values:{changeInPercentage:Math.abs(e)}});case"last_7_days":return 0===e?(0,m.jsx)(x().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_7_days.none",defaultMessage:"No changes in previous 7 days"}):e>0?(0,m.jsx)(x().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_7_days.positive",defaultMessage:"{changeInPercentage}% more than previous 7 days",values:{changeInPercentage:Math.abs(e)}}):(0,m.jsx)(x().sA,{id:"workspaceAnalytics.overview.userEngagement.summaryByline.last_7_days.negative",defaultMessage:"{changeInPercentage}% less than previous 7 days",values:{changeInPercentage:Math.abs(e)}});default:(0,S().HB)(t)}}(n,t);const r=n>0?(0,m.jsx)(d().I,{icon:h().arrowDiagonalUpRightSmallIcon,size:"xs"}):n<0?(0,m.jsx)(d().I,{icon:p,size:"xs"}):void 0,l=(0,o().IS)((()=>({text:{color:n>0?b().Tj.palette.green[500]:n<0?b().Tj.palette.red[500]:b().Tj.text.tertiary,display:"flex",alignItems:"center",gap:4}})),[n]);return(0,m.jsxs)("span",{style:l.text,children:[r,i]})}},588264:(e,t,a)=>{a.d(t,{Y:()=>b});var s=a(296540),n=()=>a(590526),i=()=>a(401497),o=()=>a(394888),r=()=>a(699143),l=()=>a(89002),d=()=>a(31511),c=()=>a(493552),u=()=>a(835470),m=()=>a(69708),g=()=>a(100622),p=()=>a(920093),h=()=>a(350188),f=()=>a(241021),v=()=>a(838239),y=()=>a(227358),x=a(474848);function b(){const e=(0,n().O$)(h().A);return e.open?(0,x.jsx)(S,{state:e}):null}function S({state:e}){const[t,a]=s.useState(null),[n,h]=s.useState(""),[b,S]=s.useState(!1),j=(w=Boolean(t),(0,i().IS)((()=>({input:{padding:"10px, 8px",width:"100%",height:36,background:g().Tj.background.secondary,borderRadius:6,border:`1px solid ${w?g().Tj.red.border.strong:g().Tj.border.primary}`,...w?{boxShadow:g().Tj.inputRedFocusRing}:{boxShadow:"none"}}})),[w]));var w;const{title:_,message:M,acceptLabel:C,requiredInputValue:T,content:k,width:I,secondStageModal:N}=e,D=s.useCallback((()=>{A(T,n)?void 0!==N?S(!0):p().V({didConfirm:!0}):a((0,x.jsx)(m().sA,{id:"confirmDialogInput.incorrectInputError.message",defaultMessage:"Please type “{requiredInputValue}” to continue",values:{requiredInputValue:T}}))}),[n,T,N]),P=s.useCallback((()=>{p().V({didConfirm:!0})}),[]);return(0,x.jsx)(o().s,{isOpen:!0,onDismiss:()=>p().V({didConfirm:!1}),areaConstraint:{height:{type:"unlimited",scroll:"allow"},width:{type:"fixed",length:I??420}},render:()=>(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(l().t,{showDismissButton:!1,header:(0,x.jsx)(v().Y,{iconAndTitle:(0,x.jsx)(y().Z,{iconGroup:u().F,iconColorPalette:"red",iconColorVariant:"accentPrimary",title:_}),description:M}),footer:(0,x.jsx)(f().a,{layout:"vertical",primaryButtons:[{buttonType:"destructive",label:C,onClick:D}],secondaryButtons:[{buttonType:"dismiss"}]}),children:(0,x.jsxs)(r().Y1,{gap:12,padding:2,children:[k,(0,x.jsxs)(r().Y1,{gap:4,children:[(0,x.jsx)(d().A,{style:j.input,value:n,onChange:e=>{a(void 0),h(e.target.value)},placeholder:T,onSubmit:D}),t?(0,x.jsx)(c().D,{styleKey:"captionRegular",colorPalette:"red",colorVariant:"accentPrimary",children:t}):null]})]})}),(0,x.jsx)(o().s,{isOpen:b,onDismiss:()=>S(!1),areaConstraint:{height:{type:"unlimited",scroll:"allow"},width:{type:"fixed",length:I??420}},render:()=>(0,x.jsx)(l().t,{showDismissButton:!1,header:(0,x.jsx)(v().Y,{iconAndTitle:(0,x.jsx)(y().Z,{iconGroup:u().F,iconColorPalette:"red",iconColorVariant:"accentPrimary",title:null==N?void 0:N.title}),description:null==N?void 0:N.message}),footer:(0,x.jsx)(f().a,{layout:"vertical",primaryButtons:[{buttonType:"destructive",label:C,onClick:P}],secondaryButtons:[{buttonType:"dismiss"}]})})})]})})}function j(e){return e.trim().replace(/\s+/g," ")}function A(e,t){return 0===j(e).localeCompare(j(t),void 0,{sensitivity:"base",usage:"search"})}},610236:(e,t,a)=>{a.d(t,{H1:()=>m,VZ:()=>g});a(296540);var s=()=>a(484714),n=()=>a(590526),i=()=>a(69708),o=()=>a(661920),r=()=>a(702723),l=()=>a(709062),d=()=>a(712505),c=()=>a(547149),u=a(474848);const m=(0,i().YK)({title:{id:"spacePermissionsSettings.people.peopleDirectory.title",defaultMessage:"People directory"},byline:{id:"spacePermissionsSettings.people.peopleDirectory.byline",defaultMessage:"Enable the people directory and profile pages in Notion"}});(0,i().YK)({title:{id:"spacePermissionsSettings.people.peopleProfile.title",defaultMessage:"Profiles"},byline:{id:"spacePermissionsSettings.people.peopleProfile.byline",defaultMessage:"Enable user profiles"}});function g({spaceStore:e,isLocked:t}){const a=(0,s().v3)(),g=(0,n().K8)((()=>Boolean(e.getSetting("disable_people_directory"))),[e]);return(0,u.jsx)(r().A,{spaceStore:e,title:(0,u.jsx)(i().sA,{...m.title}),caption:(0,u.jsx)(i().sA,{...m.byline}),type:"toggle",isOn:!g,onToggle:()=>{if(t)return;const s=!g;!function({environment:e,spaceStore:t,newValue:a}){c().createAndCommit({userAction:"SpacePermissionsSettings.DisablePeopleDirectorySetting",environment:e,canUndo:!0,perform:e=>{c().applyOperation({store:t,operation:{pointer:t.pointer,path:["settings","disable_people_directory"],command:"set",args:a},transaction:e})}})}({environment:a,spaceStore:e,newValue:s});const n=d().default.peekTargetStore.state,i=(null==n?void 0:n.isPersonProfile())||(null==n?void 0:n.isPeopleCollectionViewPage());s&&n&&i&&o().nJ(a)},isLocked:t,lockedTooltip:t?(0,l().C_)():void 0})}},617842:(e,t,a)=>{a.d(t,{M:()=>i});a(296540);var s=()=>a(631524),n=a(474848);function i(e){const{children:t,disabled:a,onClick:i}=e;return(0,n.jsx)(s().p,{onClick:i,disabled:a,style:{justifyContent:"center",marginInlineStart:6},...a?{colorVariant:"tertiary"}:{colorPalette:"blue"},children:t})}},638597:(e,t,a)=>{a.d(t,{Z:()=>g,b:()=>m});var s=a(296540),n=()=>a(590526),i=()=>a(834051),o=()=>a(515358),r=()=>a(433847),l=()=>a(69708),d=()=>a(534177),c=()=>a(566468),u=a(474848);function m({blockStore:e,spaceStore:t,useSecondaryColorTitle:a}){const[o,l]=(0,s.useState)(),d=(0,n().K8)((()=>{const t=(0,i().E)(e);return r().wD(t)}),[e]);(0,s.useEffect)((()=>{!async function(){if(!t)return;const e=await r().x8({spaceId:t.getSpaceId(),inheritedPermissionItemsForPage:d,loadRecordModel:t.loadRecordModel});l(e)}()}),[t,d]);const m=(0,s.useMemo)((()=>{if(o)return g(o)}),[o]);return(0,u.jsx)(c().s7,{useSecondaryColorTitle:a,useThinTitle:!0,title:m})}function g(e){switch(e){case"private":return(0,u.jsx)(l().sA,{...o().p.private});case"shared_internally":return(0,u.jsx)(l().sA,{...o().p.sharedInternally});case"shared_externally":return(0,u.jsx)(l().sA,{...o().p.sharedExternally});case"shared_to_web":return(0,u.jsx)(l().sA,{...o().p.publishedToWeb});default:(0,d().HB)(e)}}},641920:(e,t,a)=>{a.d(t,{A:()=>o});var s=()=>a(401497),n=()=>a(100622),i=()=>a(284371);function o(){return(0,s().IS)((()=>({linkButton:{fontWeight:i().Wy.medium,fontSize:i().J.UIRegular.desktop,color:n().Tj.text.secondary},tableHeader:{background:n().Tj.background.primary},tableHeaderForModal:{background:n().Tj.background.elevated},tableRow:{background:n().Tj.background.primary},tableRowForModal:{background:n().Tj.background.elevated},roundAvatarBorder:{borderStyle:"solid",borderColor:n().Tj.white,borderWidth:2,borderRadius:"100%"}})),[])}},643908:(e,t,a)=>{a.d(t,{F:()=>d});a(296540);var s=()=>a(383036),n=()=>a(484714),i=()=>a(26697),o=()=>a(991249),r=()=>a(118849),l=a(474848);function d(e){const t=(0,n().v3)(),{render:a,spaceStore:d,requireUpgradeToTier:c,analyticsName:u,renderUpgradeTooltip:m,onUpgradeClick:g,alwaysAllowClick:p,tooltipPlacement:h,upgradeButtonDesktopStyle:f,upgradeButtonMobileStyle:v}=e;let y,{onClick:x,renderTooltip:b}=e;return c&&(y=(0,l.jsx)(r().u,{subscriptionTier:c,analyticsName:u,desktopStyle:{display:"inline-block",pointerEvents:"none",...f},mobileStyle:{display:"inline-block",pointerEvents:"none",...v},spaceStore:d}),p||(x=e=>{o().K(t,{from:u,upsell:{type:"product",product:c,limit:{type:"none"},trialability:"none"},spaceStore:d}),g&&g(e)},b=m)),(0,l.jsx)(i().m,{renderTooltip:b||(()=>null),render:e=>a((0,s().A)(e,{onClick:x}),y),disableTooltip:!b,placement:h})}},652399:(e,t,a)=>{a.d(t,{A:()=>j});a(296540);var s=()=>a(484714),n=()=>a(590526),i=()=>a(675133),o=()=>a(792057),r=()=>a(127833),l=()=>a(30537),d=()=>a(546926),c=()=>a(160432),u=()=>a(26697),m=()=>a(890492),g=()=>a(81068),p=()=>a(663639),h=()=>a(736847),f=()=>a(69708),v=()=>a(656144);class y extends(()=>a(757695))().Store{getInitialState(){return{open:!1}}}const x=new y;var b=a(474848);const S=(0,f().YK)({30:{id:"auditLogCSV.menu.30days",defaultMessage:"Last 30 days"},60:{id:"auditLogCSV.menu.60days",defaultMessage:"Last 60 days"},90:{id:"auditLogCSV.menu.90days",defaultMessage:"Last 90 days"},365:{id:"auditLogCSV.menu.365days",defaultMessage:"Last 1 year"},Export:{id:"auditLogCSV.menu.export",defaultMessage:"Export"}});function j({parentStore:e}){const t=(0,f().tz)(),a=(0,n().K8)((()=>x.state.open),[]);return(0,b.jsx)(r().zD,{popupType:l().n.Popup,open:a,placementToOrigin:"bottom",alignmentToOrigin:"end",originGap:4,disableMouseCapture:!0,disableContentScroll:!0,keepFocus:!1,render:()=>(0,b.jsx)(C,{parentStore:e}),onDismiss:w,enableOutsideClickDismiss:!0,origin:(0,b.jsx)(u().m,{renderTooltip:()=>(0,b.jsx)(f().sA,{id:"auditLogCSV.popup.tooltip",defaultMessage:"Click for options to export the Audit Log in CSV form"}),render:e=>(0,b.jsx)(c().A,{colorPalette:"blue",size:"lg",onClick:()=>{return e=!a,void x.setState({open:e});var e},...e,children:t.formatMessage(S.Export)})})})}function A(e,t,a){v().uU(e,{targetPointer:a.pointer,exportOptions:{duration:t}})}function w(){x.setState({open:!1})}function _(e,t,a){return{key:e,render:()=>(0,b.jsx)(g().A,{focused:!1,title:i().A.formatMessage(S[e]),onClick:()=>{w(),A(t,e,a)}}),action:()=>{}}}function M(e,t,a){return{key:e,render:()=>(0,b.jsx)(g().A,{focused:!1,title:i().A.formatMessage(S[e]),onClick:()=>{o().ui({message:(0,b.jsx)(f().sA,{id:"auditLogCSV.menu.365days.prompt",defaultMessage:"Are you sure you want to export a one year CSV? You can’t repeat this action while this is processing in the background."}),showCancel:!0,keepFocus:!0,items:[{label:(0,b.jsx)(f().sA,{id:"AuditLogCSV.exportConfirmationDialog.label",defaultMessage:"Export"}),color:"blue",onAccept:()=>{w(),A(t,e,a)}}]})}}),action:()=>{}}}function C({parentStore:e}){const t=(0,s().v3)(),a=[_(30,t,e),_(60,t,e),_(90,t,e),M(365,t,e)];return(0,b.jsx)(m().A,{menuType:d().gu.Popup,children:(0,b.jsx)(p().A,{type:p().O.Vertical,sections:[{key:"results",render:e=>(0,b.jsx)(h().A,{...e}),items:a}],initialFocus:0})})}},655546:(e,t,a)=>{a.d(t,{_:()=>r});a(296540);var s=()=>a(26697),n=()=>a(402390),i=()=>a(69708),o=a(474848);function r({num:e,abbreviateNumber:t}){const a=(0,i().tz)(),r=(0,n().H)(a),l=e.toLocaleString(r),d=Intl.NumberFormat(r,{notation:"compact",maximumFractionDigits:1}).format(e);return t?(0,o.jsx)(s().m,{placement:"bottom",render:e=>(0,o.jsx)("span",{...e,children:d}),renderTooltip:()=>l}):(0,o.jsx)("span",{children:l})}},661923:(e,t,a)=>{a.d(t,{A:()=>i,e:()=>s});let s=function(e){return e.Overview="overview",e.Users="users",e.Content="content",e.Search="search",e.AI="ai",e}({});class n extends(()=>a(757695))().Store{getInitialState(){return{}}shouldRefreshState(e){const t=this.getState();return e!==t.currentSpaceId||!(t.currentTab!==s.Users||t.usersTabData&&t.usersTabData.usersAndStats)}}const i=new n},685272:(e,t,a)=>{a.d(t,{t:()=>l});a(581454),a(296540);var s=()=>a(453697),n=()=>a(641920),i=()=>a(345521),o=()=>a(761402),r=a(474848);function l(e){const{users:t,totalMemberCount:a,showTooltip:l,isLoading:d}=e,c=(0,n().A)(),u=t.map((e=>({renderAvatar:()=>(0,r.jsx)(s().A,{userStore:e,size:i().tR,avatarShouldShowShadow:!1,hasTooltip:l,iconStyle:{fontSize:12,outlineOffset:0},delayThreshold:0,showAvatarInTooltip:!0},e.id)})));return(0,r.jsx)(i().Qp,{avatarStyles:c.roundAvatarBorder,avatars:u,totalCount:a,renderOverflowTooltip:l?()=>(0,r.jsx)(o().A,{userStores:t}):void 0,isLoading:d})}},698385:(e,t,a)=>{a.d(t,{T:()=>d});a(898992),a(354520),a(581454),a(296540);var s=()=>a(590526),n=()=>a(849255),i=()=>a(798880),o=()=>a(534177),r=()=>a(317131),l=a(474848);function d({store:e,actorPointers:t,isClickable:a}){const d=(0,s().K8)((()=>t.map((t=>t.table!==i().oo?void 0:n().L.createChildStore(e,t))).filter(o().O9)),[e,t]);return(0,l.jsx)(r().l,{userStores:d,isClickable:a})}},698785:(e,t,a)=>{a.d(t,{x:()=>v});var s=a(296540),n=()=>a(726637),i=()=>a(401497),o=()=>a(127833),r=()=>a(250910),l=()=>a(695115),d=()=>a(26697),c=()=>a(582684),u=()=>a(69708),m=()=>a(100622),g=()=>a(396223),p=()=>a(19676),h=()=>a(935665),f=a(474848);function v(e){const t=(0,u().tz)(),{appliedSorts:a,openSortPillMenu:v}=e,[y,x]=(0,s.useState)(!1),b=Boolean(null==a?void 0:a.length),S=function({hasSort:e}){return(0,i().IS)((()=>({iconStyle:{width:21,height:void 0,fill:e?m().Tj.blue.icon.accentPrimary:m().Tj.icon.secondary},buttonStyle:{...(0,p().i)({isInHomeWidget:!1,isInDashboardWidget:!1,isMobile:n().A.isMobile}).button,marginInlineEnd:4}})),[e])}({hasSort:b}),j=(0,s.useCallback)((()=>{b?v():x(!0)}),[x,v,b]),A=t.formatMessage(g().CL.menuTitle);return(0,f.jsx)(o().zD,{popupType:r().z.Popup,open:y,origin:(0,f.jsx)(d().m,{renderTooltip:()=>A,render:e=>(0,f.jsx)(l().A,{...e,ariaLabel:A,icon:c().arrowUpDownIcon,iconStyle:S.iconStyle,style:S.buttonStyle,onClick:j})}),onDismiss:()=>x(!1),originGap:4,render:()=>(0,f.jsx)(h().J,{...e,currentSorts:a,onClick:e=>{v(e),x(!1)}})})}},714953:(e,t,a)=>{a.d(t,{K:()=>p,L:()=>g});var s=a(296540),n=()=>a(300474),i=()=>a(484714),o=()=>a(406094),r=()=>a(69708),l=()=>a(534177),d=()=>a(76590),c=()=>a(656144),u=()=>a(661923),m=a(474848);function g(e){const{style:t,analyticsType:a,filters:l,disabled:d}=e,c=(0,i().v3)(),[u,g]=(0,s.useState)(!1),h=(0,n().r)(),f=d||u;return(0,m.jsx)(o().A,{size:"lg",style:t,disabled:f,onClick:async function(){h&&(g(!0),await p({environment:c,spaceId:h,analyticsType:a,filters:l}),g(!1))},children:(0,m.jsx)(r().sA,{id:"spaceAnalytics.usersTab.export",defaultMessage:"Export as CSV"})})}async function p(e){const{environment:t,spaceId:a,organizationId:s,analyticsType:n,filters:i}=e;if(a)switch(n){case u().e.Users:d().TJ(t,{daysFilter:i.daysFilter}),await c().aC(t,{spaceId:a,organizationId:s,daysFilter:i.daysFilter});break;case u().e.Content:d().lP(t,{filters:i}),await c().QF(t,{spaceId:a,organizationId:s,filters:i});break;default:(0,l().HB)(n)}}},724481:(e,t,a)=>{a.d(t,{C:()=>p,_:()=>g});var s=a(296540),n=()=>a(230711),i=()=>a(484714),o=()=>a(590526),r=()=>a(187174),l=()=>a(436604),d=()=>a(534177),c=()=>a(769864),u=()=>a(335260);const m={activeMembersCount:0,previousActiveMembersCount:0,activeGuestsCount:0,previousActiveGuestsCount:0,topTeamspaces:[],topViewers:[],topEditors:[]};function g({spaceStore:e,userId:t,isOrganizationOwner:a}){const[n,i]=(0,s.useState)("last_90_days");return{...p({spaceStore:e,userId:t,isOrganizationOwner:a,daysFilter:n}),daysFilter:n,setDaysFilter:i}}function p({spaceStore:e,userId:t,isOrganizationOwner:a,daysFilter:g}){const p=(0,i().v3)(),{updateCacheWithRecordMap:h}=(0,s.useContext)(u().N),f=(0,o().K8)((()=>Boolean(e&&t&&(0,n().dp)(e,t).isWorkspaceOwner())),[e,t]),[{status:v,value:y,error:x}]=(0,r().Yb)((async()=>{if(!t||!(a||f))return m;const s=await c().callApi({eventName:"getUserEngagementAnalytics",environment:p,data:{spaceId:e.id,daysFilter:g},headers:{[l().B3]:e.id}});switch(s.type){case"success":return h(s),{activeMembersCount:s.data.activeMembersCount,previousActiveMembersCount:s.data.previousActiveMembersCount,activeGuestsCount:s.data.activeGuestsCount,previousActiveGuestsCount:s.data.previousActiveGuestsCount,topTeamspaces:s.data.topTeamspaces,topViewers:s.data.topViewers,topEditors:s.data.topEditors};case"failed":throw s.body;default:(0,d().HB)(s)}}),[p,t,e.id,g,f,a,h]);return{data:(0,s.useMemo)((()=>y||m),[y]),loading:"pending"===v||"idle"===v,error:x}}},726295:(e,t,a)=>{a.d(t,{Ry:()=>c,b0:()=>m,j:()=>u,tE:()=>d});a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(296540);var s=()=>a(835607),n=()=>a(404302),i=()=>a(69708),o=()=>a(534177),r=()=>a(860814),l=a(474848);function d({audienceValues:e,selectedAudience:t,setSelectedAudience:a,onMenuClose:i,setPillTitleStringToActiveSelection:o}){return(0,l.jsx)(r().A,{allOptions:e?new Set(e):new Set(n().p),getFormattedStringCaption:m,getFormattedStringTitle:u,getPillTitle:c,selectedOptions:t,setSelectedOption:a,pillIcon:s().F,onMenuClose:i,setPillTitleStringToActiveSelection:o})}function c(e){return e[0]?u(e[0]):(0,l.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.title",defaultMessage:"Audience"})}function u(e){switch(e){case"private":return(0,l.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.label.private",defaultMessage:"Private"});case"shared_externally":return(0,l.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.label.external",defaultMessage:"Shared externally"});case"shared_internally":return(0,l.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.label.internal",defaultMessage:"Shared internally"});case"shared_to_web":return(0,l.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.label.publishedToWeb",defaultMessage:"Shared to web"});default:(0,o().HB)(e)}}function m(e){switch(e){case"private":return(0,l.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.private",defaultMessage:"Pages that only a single workspace member has access to."});case"shared_externally":return(0,l.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.external",defaultMessage:"Pages that are shared with guests or connections."});case"shared_internally":return(0,l.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.internal",defaultMessage:"Pages that are shared with other workspace members."});case"shared_to_web":return(0,l.jsx)(i().sA,{id:"adminContentSearchTab.pagesTable.filters.audience.caption.publishedToWeb",defaultMessage:"Pages that are available for anyone to see on the web."});default:(0,o().HB)(e)}}},745638:(e,t,a)=>{a.d(t,{H:()=>n});var s=()=>a(314529);function n(e){(0,s().DO_NOT_USE_trackLegacy)(e,"delete_workspace_click")}},746423:(e,t,a)=>{a.d(t,{K:()=>d});a(296540);var s=()=>a(401497),n=()=>a(695115),i=()=>a(820579),o=()=>a(69708),r=()=>a(100622),l=a(474848);function d(e){const t=(0,o().tz)(),a=(0,s().IS)((()=>({icon:{width:21,height:void 0,fill:r().Tj.text.secondary},button:{display:"flex",alignItems:"center",fontSize:14,height:28,width:28,padding:6,color:r().Tj.text.secondary,fill:r().Tj.icon.secondary,lineHeight:1,borderRadius:4}})),[]);return(0,l.jsx)(n().A,{ariaLabel:t.formatMessage({id:"organization.shared.table.exportButton.label",defaultMessage:"Export content"}),icon:i().arrowLineDownIcon,iconStyle:a.icon,style:a.button,onClick:e.onClick,disabled:e.disabled,disabledFeedback:e.disabled,disableBackground:e.disabled})}},760183:(e,t,a)=>{a.d(t,{A:()=>n});class s extends(()=>a(757695))().Store{getInitialState(){return{displaySummary:!0,openDropdown:!1,query:""}}}const n=new s},760379:(e,t,a)=>{a.d(t,{r:()=>d});var s=a(296540),n=()=>a(564884),i=()=>a(484714),o=()=>a(590526),r=()=>a(404141),l=()=>a(661923);function d({surface:e,view:t}){const a=(0,i().v3)(),d=(0,o().K8)((()=>r().Ay.state.sessionId),[]),c=(0,o().K8)((()=>l().A.state.analyticsTabSessionId),[]);return(0,s.useCallback)((s=>{(0,n().u)({environment:a,event:{eventName:"ai_analytics_customize_view",eventProperties:{analytics_tab_session_id:c,settings_session_id:d,surface:e,view:t,...s}}})}),[c,d,a,e,t])}},761402:(e,t,a)=>{a.d(t,{A:()=>n});a(581454),a(296540);var s=a(474848);const n=function({userStores:e,permissionGroups:t}){const n=(0,a(401497).IS)((()=>({container:{display:"flex",flexDirection:"column",gap:4}})),[]);return(0,s.jsxs)("div",{style:n.container,children:[e.map((e=>(0,s.jsx)(a(453697).A,{userStore:e,type:"avatar-name-email",size:a(345521).tR,avatarShouldShowShadow:!1,hasTooltip:!1,iconStyle:{fontSize:12}},e.id))),null==t?void 0:t.map((e=>(0,s.jsx)(a(254234).h,{permissionGroup:e,type:"avatar-name-count"},e.group.group_id)))]})}},781804:(e,t,a)=>{a.d(t,{Cn:()=>g,XY:()=>m,YQ:()=>p,mI:()=>h});a(296540);var s=()=>a(401497),n=()=>a(396896),i=()=>a(807449),o=()=>a(631524),r=()=>a(493552),l=()=>a(626466),d=()=>a(100622),c=()=>a(148974),u=a(474848);function m({title:e,byline:t,content:a}){const n=(0,s().IS)((()=>({container:{margin:"40px auto"},content:{marginTop:16,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}})),[]);return(0,u.jsxs)("div",{style:n.container,children:[(0,u.jsx)(r().D,{styleKey:"titleSmSemibold",as:"h2",children:e}),t?(0,u.jsx)(r().D,{styleKey:"body",colorPalette:"gray",colorVariant:"secondary",children:t}):void 0,(0,u.jsx)("div",{style:n.content,children:a})]})}function g({title:e,badge:t,byline:a,content:n,rightContent:c,onClick:m,disabled:g,...f}){const v=h(),y=(0,s().IS)((()=>({rightContent:{display:"flex",flexDirection:"row",flexShrink:0,justifyContent:"center",alignItems:"center",gap:12},secondaryText:{margin:0,padding:0,textWrap:"wrap"},iconButton:{display:"flex",justifyContent:"center",alignItems:"center",opacity:.5,borderRadius:"100%",background:d().Tj.palette.gray[100],height:20,width:20},icon:{padding:4,transform:"rotate(270deg)"}})),[]),x=(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(p,{disabled:g,title:e,content:n,byline:a,badge:t,alignItems:"flex-start"}),(0,u.jsxs)("div",{style:y.rightContent,children:[c?(0,u.jsx)(r().D,{style:y.secondaryText,styleKey:"bodySmRegular",colorVariant:"secondary",as:"p",children:c}):void 0,void 0===m?null:(0,u.jsx)("div",{style:y.iconButton,children:(0,u.jsx)(i().I,{icon:l().arrowChevronSingleDownFillIcon,colorVariant:"primary",style:y.icon})})]})]});return void 0===m?(0,u.jsx)("div",{style:v.container,children:x}):(0,u.jsx)(o().p,{style:v.container,onClick:m,hoveredStyle:{...v.container,...v.containerDark},pressedStyle:{...v.container,...v.containerDark},disabled:g,disabledFeedback:g,...f,children:x})}function p({disabled:e,title:t,content:a,byline:i,badge:o,alignItems:l="flex-start",fullWidth:d=!1}){const c=(0,s().IS)((()=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:l,gap:6,flex:"1 1 200px",width:d?"100%":void 0,opacity:e?.5:1},title:{margin:0,padding:0,textWrap:"wrap"},secondaryText:{margin:0,padding:0,textWrap:"wrap"},content:{padding:"2px 0 6px",width:d?"100%":void 0}})),[l,d,e]);return(0,u.jsxs)("div",{style:c.container,children:[(0,u.jsxs)(n().fI,{alignItems:"center",children:[(0,u.jsx)(r().D,{style:c.title,styleKey:"bodyMedium",children:t}),o]}),a?(0,u.jsx)("div",{style:c.content,children:a}):null,(0,u.jsx)(r().D,{style:c.secondaryText,styleKey:"bodySmRegular",colorVariant:"secondary",children:i})]})}function h(){return(0,s().IS)((()=>({container:{margin:"6px auto",display:"flex",flexDirection:"row",flexWrap:"wrap",gap:12,alignItems:"center",justifyContent:"space-between",width:"100%",height:"fit-content",padding:"12px 16px",borderRadius:8,borderWidth:1,borderStyle:"solid",borderColor:d().Tj.border.secondary,boxShadow:c().vx},containerDark:{background:d().Tj.palette.translucentGray[30],borderColor:d().Tj.border.primary},title:{textAlign:"center"}})),[])}},784673:(e,t,a)=>{a.d(t,{O:()=>u,y:()=>c});a(296540);var s=()=>a(484714),n=()=>a(590526),i=()=>a(69708),o=()=>a(702723),r=()=>a(709062),l=()=>a(547149),d=a(474848);const c=(0,i().YK)({title:{id:"spacePermissionsSettings.people.peopleHoverCard.title",defaultMessage:"Hover cards"},byline:{id:"spacePermissionsSettings.people.peopleHoverCard.byline",defaultMessage:"Show information on hover over name"}});function u({spaceStore:e,isLocked:t}){const a=(0,s().v3)(),u=(0,n().K8)((()=>Boolean(e.getSetting("disable_people_hover_card"))),[e]);return(0,d.jsx)(o().A,{spaceStore:e,title:(0,d.jsx)(i().sA,{...c.title}),caption:(0,d.jsx)(i().sA,{...c.byline}),type:"toggle",isOn:!u,onToggle:()=>{t||function({environment:e,spaceStore:t,newValue:a}){l().createAndCommit({userAction:"SpacePermissionsSettings.DisablePeopleHoverCardSetting",environment:e,canUndo:!0,perform:e=>{l().applyOperation({store:t,operation:{pointer:t.pointer,path:["settings","disable_people_hover_card"],command:"set",args:a},transaction:e})}})}({environment:a,spaceStore:e,newValue:!u})},isLocked:t,lockedTooltip:t?(0,r().C_)():void 0})}},803418:(e,t,a)=>{a.d(t,{O:()=>n,q:()=>s});const s=20,n=25},803662:(e,t,a)=>{a.d(t,{E:()=>h});a(898992),a(354520),a(296540);var s=()=>a(590526),n=()=>a(834051),i=()=>a(807449),o=()=>a(471095),r=()=>a(888867),l=()=>a(433847),d=()=>a(68263),c=()=>a(69708),u=()=>a(566468),m=()=>a(112772),g=a(474848),p=function(e){return e.Shared="shared",e.Private="private",e.Hidden="hidden",e}(p||{});function h({blockStore:e,teamStore:t}){const a=(0,s().K8)((()=>{const t=(0,n().E)(e),a=(0,l().wD)(t),s=a.filter((e=>!(0,d().T6)(e)));return 1===s.length&&(0,d().B2)(s[0])?p.Private:a.length>0?p.Shared:p.Hidden}),[e]);return t?(0,g.jsx)(m().o,{useThinTitle:!0,teamStore:t}):function(){switch(a){case p.Shared:return(0,g.jsx)(u().s7,{useThinTitle:!0,icon:(0,g.jsx)(i().I,{icon:r().s,colorVariant:"tertiary"}),title:(0,g.jsx)(c().sA,{id:"adminContentSearchTab.pagesTable.locationCell.shared",defaultMessage:"Shared"})});case p.Hidden:case p.Private:return(0,g.jsx)(u().s7,{useThinTitle:!0,icon:(0,g.jsx)(i().I,{icon:o().lockFillIcon,colorVariant:"tertiary"}),title:(0,g.jsx)(c().sA,{id:"adminContentSearchTab.pagesTable.locationCell.private",defaultMessage:"Private"})})}}()}},812941:(e,t,a)=>{a.d(t,{A:()=>m});a(296540);var s=()=>a(401497),n=()=>a(404905),i=()=>a(69708),o=()=>a(534177),r=()=>a(690197),l=()=>a(232930),d=a(474848);function c(e){switch(e){case"bestPractices":return(0,l().x)("guides.teamspacesLearnMore");case"workspaceOwnerGuide":return(0,l().x)("guides.teamspacesWorkspaceOwner");case"settingsAndPermissions":return(0,l().x)("guides.teamspacesSettingsAndPermissions");default:return(0,o().HB)(e)}}function u(e){return e||(0,d.jsx)(n().j,{children:(0,d.jsx)(i().sA,{defaultMessage:"Learn about teamspaces",id:"teamsLearnMoreLink"})})}function m({onClick:e,message:t,helpCenterLocation:a,analyticsFrom:n,containerStyle:i}){const o=(0,s().IS)((()=>({button:{maxWidth:"100%"}})),[]);return(0,d.jsx)("div",{style:i,children:(0,d.jsx)(r().A,{buttonStyle:o.button,title:u(t),analyticsFrom:n,href:c(a),onClick:e})})}},813323:(e,t,a)=>{a.d(t,{z:()=>r});a(296540);var s=()=>a(401497),n=()=>a(736847),i=()=>a(69708),o=a(474848);function r(e){const t=(0,s().IS)((()=>({container:{paddingBlock:4}})),[]);return(0,o.jsx)(n().A,{title:e.hideTitle?void 0:(0,o.jsx)(i().sA,{id:"inviteUserModal.searchDropdown.selectPersonTitle",defaultMessage:"Select a person"}),style:t.container,...e})}},829351:(e,t,a)=>{a.d(t,{V:()=>c});a(296540);var s=()=>a(401497),n=()=>a(609679),i=()=>a(26697),o=()=>a(302501),r=()=>a(869190),l=()=>a(69708),d=a(474848);function c(e){const{auditLogEntry:t,id:a}=e,c=(0,s().IS)((()=>({container:{display:"block",width:"100%"}})),[]);return(0,d.jsx)(i().m,{renderTooltip:()=>(0,d.jsx)("div",{style:{display:"flex",flexDirection:"column",fontVariantNumeric:"tabular-nums"},children:(0,d.jsx)("div",{children:(0,d.jsx)(l().sA,{id:"auditLogSettings.timeTooltip.utcTime",defaultMessage:"UTC: {time}",values:{time:(0,r().qV)(t.serverTimestamp)}})})}),render:e=>(0,d.jsx)("div",{id:a,style:c.container,children:(0,d.jsx)(o().A,{isSecondaryColor:!0,...e,children:(0,r().W_)(t.serverTimestamp,"medium_with_time",n().locale)})}),placement:"bottom"})}},841040:(e,t,a)=>{a.d(t,{DZ:()=>A,lz:()=>j,xF:()=>b});var s=a(296540),n=()=>a(692031),i=()=>a(212497),o=()=>a(484714),r=()=>a(590526),l=()=>a(401497),d=()=>a(128933),c=()=>a(849255),u=()=>a(695115),m=()=>a(26697),g=()=>a(302501),p=()=>a(951105),h=()=>a(798880),f=()=>a(69708),v=()=>a(100622),y=()=>a(566468),x=a(474848);function b(e){const t="userId"in e?e.userId:void 0,a="email"in e?e.email:void 0,u=(0,o().v3)(),m=(0,f().tz)(),[p,v]=(0,s.useState)(!1),b=(0,y().f0)({useThinTitle:!0,containerStyles:{width:"auto"},iconSize:34,icon:(0,x.jsx)("div",{})}),w=(0,l().IS)((()=>({...b,container:{cursor:"pointer",...b.container,...e.styles}})),[b,e.styles]),_=(0,r().K8)((()=>{if(t){const e=new(c().L)(u,{table:h().oo,id:t});return{userStore:e,isReady:e.isReady(),userEmail:e.getEmail()}}}),[u,t]),M=t?null==_?void 0:_.userEmail:a;return null!=_&&_.isReady||a?(0,x.jsxs)("div",{style:w.container,onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),children:[(0,x.jsx)("div",{style:w.summaryContainer,children:(0,x.jsx)(g().A,{isSecondaryColor:!0,style:w.name,showTooltipWhenTruncated:!0,children:M})}),(0,x.jsx)(j,{onCopyClick:async function(e){if(e.stopPropagation(),!M)return void d().D6({label:m.formatMessage(A.toastFailedToCopy)});const[t,a]=await Promise.all([(0,n().r)(),(0,i().jd)()]);await a({stringValue:M,environment:u,copiedMessage:t.copiedPropertyToClipboard}),d().D6({label:m.formatMessage(A.toastSuccessfulCopy)})},isHovered:p})]}):(0,x.jsx)(S,{})}function S(){return(0,x.jsx)(y().mf,{})}function j({onCopyClick:e,isHovered:t,containerStyles:a,size:s=20}){const n=(0,f().tz)().formatMessage(A.copy),i=(0,l().IS)((()=>({container:{display:"flex",background:v().Tj.background.elevated,padding:2,boxShadow:v().Tj.shadowSM,borderRadius:6,marginInlineStart:8,marginInlineEnd:2,visibility:t?"visible":"hidden",...a},buttonStyle:{height:s,width:s,boxShadow:"none"},iconStyle:{color:v().Tj.text.secondary,fill:v().Tj.text.secondary}})),[t,s,a]);return(0,x.jsx)(m().m,{renderTooltip:()=>n,render:t=>(0,x.jsx)("div",{style:i.container,...t,children:(0,x.jsx)(u().A,{onClick:e,ariaLabel:n,hasBackground:!0,icon:p().k,showShadow:!0,iconStyle:i.iconStyle,style:i.buttonStyle})})})}const A=(0,f().YK)({copy:{defaultMessage:"Copy to Clipboard",id:"baseTable.emailCell.copyButton.copyToClipboard"},toastFailedToCopy:{defaultMessage:"Failed to copy",id:"baseTable.emailCell.copyButton.failedToCopy"},toastSuccessfulCopy:{defaultMessage:"Copied email to clipboard",id:"baseTable.emailCell.copyButton.successfulCopy"}})},851770:(e,t,a)=>{a.d(t,{JD:()=>b,SG:()=>A,n9:()=>S});a(898992),a(354520),a(581454);var s=a(296540),n=()=>a(590526),i=()=>a(401497),o=()=>a(901610),r=()=>a(713998),l=()=>a(202017),d=()=>a(379632),c=()=>a(69708),u=()=>a(100622),m=()=>a(406944),g=()=>a(806080),p=()=>a(106412),h=()=>a(705876),f=()=>a(154378),v=a(474848);const y=(0,c().YK)({noData:{defaultMessage:"No data",id:"database.chart.multipleSeriesTooltip.noData"},empty:{defaultMessage:"Empty",id:"database.chart.tooltip.empty"},clickToViewData:{defaultMessage:"Click to view data",id:"database.chart.tooltip.clickToViewData"},clickToViewDetails:{defaultMessage:"Click to view details",id:"database.chart.tooltip.clickToViewDetails"}}),x=43;function b(e){var t,a;const{chartConfig:i,schema:l,seriesData:u,isClickable:m}=e,x=(0,c().tz)(),b=S(m),w=(0,s.useMemo)((()=>x.formatMessage(y.noData)),[x]),_=null===(t=(0,p().Zp)())||void 0===t?void 0:t.disableContentPointerEvents,M=(0,s.useMemo)((()=>({useHTML:!0,shadow:!1,borderWidth:0,backgroundColor:void 0,outside:!1,stickOnContact:!0,hideDelay:100,enabled:!_})),[_]),C=(0,n().K8)((()=>"donut"===(null==i?void 0:i.type)),[null==i?void 0:i.type]),T=(0,n().K8)((()=>"results_reducer"===(null==i?void 0:i.dataConfig.type)?x.formatMessage(y.clickToViewDetails):x.formatMessage(y.clickToViewData)),[null==i?void 0:i.dataConfig.type,x]),k=(0,n().K8)((()=>{var e;return("bar"===(null==i?void 0:i.type)||"column"===(null==i?void 0:i.type))&&("groups_reducer"===i.dataConfig.type&&(!!i.dataConfig.aggregationConfig.stackOptions&&"percent"===(null===(e=i.chartFormat)||void 0===e?void 0:e.axisGroupStyle)))}),[i]),I=(0,n().K8)((()=>{var e,t;if("precision_from_number_property"===(null==i||null===(e=i.chartFormat)||void 0===e?void 0:e.numberPrecisionOverride)){const e=null==i?void 0:i.dataConfig;if(!e||"results_reducer"!==e.type)return;const t=(0,r()._g)({schema:l,property:e.valueProperty});return t?(0,f().i5)(t):void 0}return null==i||null===(t=i.chartFormat)||void 0===t?void 0:t.numberPrecisionOverride}),[null==i||null===(a=i.chartFormat)||void 0===a?void 0:a.numberPrecisionOverride,null==i?void 0:i.dataConfig,l]),N=(0,s.useMemo)((()=>({...M,formatter(){const e=this.color??this.series.color;h().U.setCurrentTooltipPoint(this.point);const{label:t,value:a}=(0,f().NH)({chartConfig:i,schema:l,highChartsLabel:this.point.name,highChartsValue:"originalY"in this.point&&(0,g().Et)(this.point.originalY)?this.point.originalY:this.point.y,isMultiSeries:!1,intl:x,numberPrecisionOverride:I});let s="";C&&this.point.percentage&&(s=` (${(0,f().l9)(this.point.percentage)}%)`);const n=""===t?x.formatMessage(y.empty):t;return d().A.renderToStaticMarkup((0,v.jsxs)("div",{style:b.defaultContainer,children:[(0,v.jsx)("div",{style:b.containerSingleSeries,children:(0,v.jsxs)("div",{style:b.row,children:[(0,v.jsxs)("div",{style:b.rowLeftContainer,children:[(0,v.jsx)("div",{style:{...b.square,backgroundColor:A(e)}}),(0,v.jsx)("div",{style:b.rowLeft,children:n})]}),(0,v.jsxs)("div",{style:b.rowRight,children:[a,s]})]})}),m?(0,v.jsx)(j,{label:T,styles:b}):null]}))}})),[M,i,l,x,I,C,b,m,T]),D=(0,s.useMemo)((()=>({...M,shared:!0,formatter(){var e;const t=null===(e=this.points)||void 0===e?void 0:e.filter((e=>!(null==e||!e.y)&&0!==e.y));h().U.setCurrentTooltipPoint(this.point);("line"===this.series.type||"area"===this.series.type||"areaspline"===this.series.type)&&(null==t||t.sort(((e,t)=>((null==t?void 0:t.y)??0)-((null==e?void 0:e.y)??0))));let a=this.point.name;if(i&&(0,o().m)(i)&&"groups_reducer"===i.dataConfig.type){const e=i.dataConfig,t=e.groupBy,s=(0,r()._g)({schema:l,property:e.groupBy.property});s&&(a=(0,f().w$)({propertySchema:s,groupByFormat:t,aggregation:i.dataConfig.aggregationConfig.aggregation,highChartsLabel:this.point.name,intl:x}))}return t&&0!==t.length?d().A.renderToStaticMarkup((0,v.jsxs)("div",{style:b.defaultContainer,children:[(0,v.jsxs)("div",{style:b.scrollContainer,children:[(0,v.jsx)("div",{style:b.header,children:a}),t.map((e=>{const t=e.color??e.series.color,{label:a,value:s}=(0,f().NH)({chartConfig:i,schema:l,highChartsLabel:e.series.name,highChartsValue:"originalY"in e&&(0,g().Et)(e.originalY)?e.originalY:e.y??void 0,isMultiSeries:!0,intl:x,numberPrecisionOverride:I});let n="";k&&e.percentage&&(n=` (${(0,f().l9)(e.percentage)}%)`);const o=""===a?x.formatMessage(y.empty):a;return(0,v.jsxs)("div",{style:b.row,children:[(0,v.jsxs)("div",{style:b.rowLeftContainer,children:[(0,v.jsx)("div",{style:{...b.square,backgroundColor:A(t)}}),(0,v.jsx)("div",{style:b.rowLeft,children:o})]}),(0,v.jsxs)("span",{style:b.rowRight,children:[s,n]})]},e.key)}))]}),m?(0,v.jsx)(j,{label:T,styles:b}):null]})):d().A.renderToStaticMarkup((0,v.jsxs)("div",{style:b.defaultContainer,children:[(0,v.jsxs)("div",{style:b.scrollContainer,children:[(0,v.jsx)("div",{style:b.header,children:a}),(0,v.jsx)("div",{style:{...b.row,...b.noData},children:w})]}),m?(0,v.jsx)(j,{label:T,styles:b}):null]}))}})),[M,i,b,l,x,w,I,k,m,T]);return u?1===u.length?N:D:M}function S(e){return(0,i().IS)((()=>({defaultContainer:{border:`1px solid ${u().Tj.palette.gray[100]}`,borderRadius:"8px",backgroundColor:u().Tj.background.elevated,maxHeight:"375px",maxWidth:"300px",width:"max-content",overflow:"hidden",pointerEvents:"auto",boxShadow:"0px 2px 4px rgb(0, 0, 0, 0.1)"},scrollContainer:{overflow:"auto",padding:"12px",maxHeight:e?375-x+"px":"375px"},clickToSeeDataContainer:{padding:"12px",display:"flex",gap:"6px",alignItems:"center"},clickToSeeDataSeparator:{border:"none",borderTop:`1px solid ${u().Tj.border.secondary}`,margin:"0 12px"},clickToSeeDataIcon:{width:"14px",height:"14px",color:u().Tj.text.tertiary},clickToSeeDataText:{color:u().Tj.text.tertiary,fontSize:"12px",lineHeight:"16px"},containerSingleSeries:{padding:"10px 12px"},header:{fontSize:"12px",paddingBottom:"7px",color:u().Tj.text.primary,overflowX:"hidden",whiteSpace:"normal",display:"block"},row:{fontSize:"12px",lineHeight:"18px",textAlign:"start",display:"flex",justifyContent:"space-between",gap:"16px"},square:{height:"8px",width:"8px",minWidth:"8px",borderRadius:"1px",borderWidth:"0px",margin:"0 3px",verticalAlign:"top",display:"inline-block"},rowLeft:{display:"inline-block",color:u().Tj.text.secondary,overflowX:"hidden",whiteSpace:"normal"},rowLeftContainer:{display:"inline-flex",alignItems:"center",gap:"6px"},rowRight:{color:u().Tj.text.tertiary},noData:{color:u().Tj.text.secondary}})),[e])}function j(e){const{label:t,styles:a}=e;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("hr",{style:a.clickToSeeDataSeparator}),(0,v.jsxs)("div",{style:a.clickToSeeDataContainer,children:[(0,l().n)(a.clickToSeeDataIcon),(0,v.jsx)("div",{style:a.clickToSeeDataText,children:t})]})]})}function A(e){const t=m().O.colorful[0];return e?"string"==typeof e?e:"pattern"in e?e.pattern.backgroundColor??t:t:t}},881575:(e,t,a)=>{a.d(t,{c:()=>g,y:()=>m});a(581454);var s=a(296540),n=()=>a(401497),i=()=>a(388926),o=()=>a(396896),r=()=>a(493552),l=()=>a(100622),d=a(474848);const c=24,u=12;function m({title:e,titleId:t,byline:a,bylineId:s,item:i,onClick:m,padding:g,itemStyles:p,bylineStyles:h,styles:f,badge:v,shouldHighlight:y}){const x=(0,n().IS)((()=>({settingContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:g,cursor:m?"pointer":"default",position:"relative"},settingLeft:{flex:3,display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",gap:6},settingRight:{flex:1,display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"flex-start"},highlight:{height:`calc(100% + ${u}px)`,width:`calc(100% + ${c}px)`,insetInlineStart:`-${c/2}px`,position:"absolute",backgroundColor:l().Tj.buttonHoveredBackground},byline:{lineHeight:"18px",...h}})),[g,m,h]),b={...x.settingContainer,...f};return(0,d.jsxs)("div",{style:b,...m?{onClick:m,role:"button",tabIndex:0}:{},children:[(0,d.jsxs)("div",{style:x.settingLeft,children:[(0,d.jsxs)(o().fI,{alignItems:"center",children:[(0,d.jsx)(r().D,{id:t,styleKey:"bodyMedium",colorVariant:"primary",children:e}),v]}),a?(0,d.jsx)(r().D,{id:s,styleKey:"bodySmRegular",colorVariant:"secondary",style:x.byline,children:a}):void 0]}),(0,d.jsx)("div",{style:{...x.settingRight,...p},children:i}),y?(0,d.jsx)("div",{style:x.highlight}):void 0]})}function g(e){const{items:t}=e,a=(0,n().IS)((()=>({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:16,width:"100%"}})),[]);return(0,d.jsx)("div",{style:a.container,children:t.map(((e,a)=>(0,d.jsxs)(s.Fragment,{children:[e,a<t.length-1?(0,d.jsx)(i().A,{colorVariant:"secondary",size:1}):null]},a)))})}},890434:(e,t,a)=>{a.d(t,{A:()=>i});a(296540);var s=a(474848);function n({title:e,subtitle:t,on:n,onChange:i,disabled:o,style:r}){const l=(0,a(401497).IS)((()=>({container:{display:"flex",alignItems:"center",width:"100%"},title:{fontSize:14,marginInlineEnd:8,flexGrow:1}})),[]);return(0,s.jsxs)("div",{style:{...l.container,...r},children:[(0,s.jsxs)("div",{style:l.title,children:[e,(0,s.jsx)(a(302501).A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"95%"},children:t})]}),(0,s.jsx)(a(287188).A,{on:n,disabled:o,onClick:i})]})}n.defaultProps={disabled:!1,style:{}};const i=n},890494:(e,t,a)=>{a.d(t,{A:()=>r});a(296540);var s=()=>a(401497),n=()=>a(100622),i=()=>a(284371),o=a(474848);function r(e){const t=(0,s().eP)(),a=(0,s().IS)((()=>({numberCircleBaseStyle:{display:"flex",flexShrink:0,borderRadius:"100%",backgroundColor:e.isHighlighted?n().Tj.palette.uiBlue[600]:e.isLightBlueHighlighted?n().Tj.blue.background.primaryTranslucent:"dark"===t?n().Tj.palette.gray[300]:n().Tj.palette.gray[75],width:20,height:20,color:e.isHighlighted?"white":e.isLightBlueHighlighted?n().Tj.blue.text.accentPrimary:n().Tj.palette.gray[600],textAlign:"center",alignItems:"center",justifyContent:"center",fontWeight:i().Wy.semibold,fontSize:"10px"}})),[e.isHighlighted,e.isLightBlueHighlighted,t]);return(0,o.jsx)("div",{style:{...a.numberCircleBaseStyle,...e.style},children:e.number})}},896198:(e,t,a)=>{a.d(t,{o:()=>b});var s=a(296540),n=()=>a(401497),i=()=>a(127833),o=()=>a(30537),r=()=>a(807449),l=()=>a(493552),d=()=>a(81068),c=()=>a(424400),u=()=>a(736847),m=()=>a(344417),g=()=>a(259476),p=()=>a(69708),h=()=>a(56394),f=()=>a(30731),v=a(474848);const y=(0,p().YK)({relatedHeader:{id:"auditlog.relatedFilter.header",defaultMessage:"Related to"},removeFilter:{id:"auditlog.relatedFilter.remove",defaultMessage:"Remove filter"},removeFilterAria:{id:"auditlog.relatedFilter.remove.aria",defaultMessage:"Remove related request filter"}}),x=16;function b(e){const{eventText:t,onRemove:a}=e,b=(0,p().tz)(),[S,j]=(0,s.useState)(!1),A=(0,s.useMemo)((()=>(0,f().Jv)({eventText:t,intl:b,maxLength:x})),[t,b]),w=(0,n().IS)((()=>({panel:{width:"max-content",maxWidth:400,minWidth:280}})),[]),_=(0,v.jsx)(h().A,{on:!0,icon:(0,v.jsx)(r().I,{icon:m().magnifyingGlassSmallIcon,size:"sm"}),title:(0,v.jsx)("span",{children:A}),hideChevron:!1,onClick:()=>j((e=>!e))});return(0,v.jsx)(i().zD,{popupType:o().n.Popup,open:S,origin:_,onDismiss:()=>j(!1),placementToOrigin:"bottom",alignmentToOrigin:"start",keepFocus:!0,trapFocus:!0,preventScaleTransition:!0,render:()=>(0,v.jsxs)("div",{style:w.panel,children:[(0,v.jsx)(c().Ay,{caption:(0,v.jsx)(l().D,{styleKey:"captionRegular",colorVariant:"tertiary",children:(0,v.jsx)(p().sA,{...y.relatedHeader})}),body:(0,v.jsx)(l().D,{styleKey:"bodySmRegular",colorVariant:"primary",children:t})}),(0,v.jsx)(u().A,{topBorder:!0,children:(0,v.jsx)(d().A,{focused:!1,onClick:()=>{a(),j(!1)},icon:(0,v.jsx)(r().I,{icon:g().trashSmallIcon,size:"sm"}),title:(0,v.jsx)(l().D,{styleKey:"bodySmRegular",colorVariant:"primary",children:(0,v.jsx)(p().sA,{...y.removeFilter})}),role:"menuitem","aria-label":b.formatMessage(y.removeFilterAria)})})]})})}},897537:(e,t,a)=>{a.d(t,{A:()=>N});a(944114),a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(898992),a(354520),a(672577),a(581454),a(296540);var s=()=>a(295633),n=()=>a(732810),i=()=>a(970236),o=()=>a(807449),r=()=>a(81068),l=()=>a(449279),d=()=>a(663639),c=()=>a(842599),u=()=>a(733816),m=()=>a(792071),g=()=>a(848538),p=()=>a(798880),h=()=>a(69708),f=()=>a(534177),v=()=>a(284371),y=()=>a(358075),x=()=>a(743260),b=()=>a(299545),S=()=>a(957606),j=()=>a(813323),A=()=>a(231704),w=a(474848);function _(){return(0,w.jsx)(i().E,{content:(0,w.jsx)(h().sA,{id:"spaceUserMembershipType.member",defaultMessage:"Member"})})}var M=()=>a(313171);const C=(0,h().YK)({invited_page:{id:"PermissionsInviteSearchRequest.userTooltip.invited_page",defaultMessage:"{userNameAndEmail} is invited to this page already"},invited_database:{id:"PermissionsInviteSearchRequest.userTooltip.invite_database",defaultMessage:"{userNameAndEmail} is invited to this database already"},invited_space:{id:"PermissionsInviteSearchRequest.userTooltip.invited_space",defaultMessage:"{userNameAndEmail} is invited to this workspace already"},invited_team:{id:"PermissionsInviteSearchRequest.userTooltip.invited_team",defaultMessage:"{userNameAndEmail} is invited to this teamspace already"},not_in_space:{id:"PermissionsInviteSearchRequest.userTooltip.admin",defaultMessage:"Click to invite {userNameAndEmail}"}}),T=(0,h().YK)({workspaceOwnerTooltip:{id:"inviteUserModal.userRole.workspaceOwnerBadge.tooltip",defaultMessage:"{ userNameAndEmail} is a workspace owner in this workspace"},membershipAdminTooltip:{id:"inviteUserModal.userRole.membershipAdminBadge.tooltip",defaultMessage:"{ userNameAndEmail} is a membership admin in this workspace"},memberTooltip:{id:"inviteUserModal.userRole.memberBadge.tooltip",defaultMessage:"{ userNameAndEmail} is a member in this workspace"},restrictedMemberTooltip:{id:"inviteUserModal.userRole.restrictedMemberBadge.tooltip",defaultMessage:"{ userNameAndEmail} is a restricted member in this workspace"},guestTooltip:{id:"inviteUserModal.userRole.guest.tooltip",defaultMessage:"{ userNameAndEmail} is a guest in this workspace"}});function k(e,t){return e.filter(((e,a)=>a<t))}function I(e){const{membershipType:t,intl:a,userNameAndEmail:s}=e;switch(t){case"owner":return{tooltip:a.formatMessage(T.workspaceOwnerTooltip,{userNameAndEmail:s}),userTypeToken:(0,w.jsx)(y().l,{role:t})};case"membership_admin":return{tooltip:a.formatMessage(T.membershipAdminTooltip,{userNameAndEmail:s}),userTypeToken:(0,w.jsx)(y().l,{role:t})};case"member":return{tooltip:a.formatMessage(T.memberTooltip,{userNameAndEmail:s}),userTypeToken:(0,w.jsx)(_,{})};case"restricted_member":return{tooltip:a.formatMessage(T.restrictedMemberTooltip,{userNameAndEmail:s}),userTypeToken:(0,w.jsx)(M().L,{})};case"page_guest":return{tooltip:a.formatMessage(T.guestTooltip,{userNameAndEmail:s}),userTypeToken:(0,w.jsx)(A().w,{labelType:t})};default:(0,f().HB)(t)}}const N=function(e){const{store:t,shouldShowGroups:f,sectionRenderLimit:y,membersOnly:A,hideCurrentUser:_,disableInvitedUsers:T,guestsMustBeRequested:N,hideTitle:D,defaultUserTitle:P,performSearchRequest:E}=e,[B,R,V]=(0,a(590526).$y)(e.permissionsInviteStore),L=(0,a(484714).v3)(),z=(0,h().tz)(),{tokenQuery:F}=B,O=(0,a(792485).S)(),U="invitee",W={request:F,performRequest:e=>E?E({query:e,limit:10,environment:L}):a(542056).hQ({query:e,sectionLimit:{userLimit:10,groupLimit:f?10:0,importContactLimit:0},membersOnly:A,environment:L,intl:z,pageContext:O}),render:(e,A,E)=>{if(e)return(0,w.jsx)(j().z,{loading:!E,hideTitle:D,children:(0,w.jsx)(l().u,{title:(0,w.jsx)(h().sA,{id:"inviteUserModal.searchInput.errorMessage",defaultMessage:"Something went wrong"})})});const R=A&&{...A,inviteUsers:A.inviteUsers.filter((e=>!(0,x().mQ)({permissionsInviteStore:V,target:e})&&(!_||e.value.id!==L.currentUser.id))),importedContacts:(0,x().GZ)(A.inviteUsers,A.importedContacts)},O=R&&(null==F?void 0:F.length)>0,{inviteUsers:W,inviteGroups:H,importedContacts:q=[]}=O?R:(0,x().Es)({currentInviteActors:R,permissionsInviteStore:V,targetStore:t}),K=[...k(W,y),...k(q,10)].map(((e,l)=>{const d="newUser"===e.type?e.value.email:e.value.id,c=(0,x().vP)(e),f=Boolean(O&&(0,x().VF)({permissionsInviteStore:V,userTarget:e,targetStore:t}));return{key:d,render:l=>{const{tooltip:d,userTypeToken:v}=function(e){const{userTarget:t,targetStore:a,isInvited:o,membershipType:r,intl:l}=e,d="newUser"===t.type?null:m().Bj6.fromValue(p().oo,t.value),c=null==d?void 0:d.id,u=null==d?void 0:d.getDisplayName(l),f=t.value.email,v=u&&u!==f?`${u} (${f})`:f??l.formatMessage({id:"userTypeTooltip.generalPerson",defaultMessage:"This person"});if((0,b().$R)(a)&&c){const e=a.getTeamRoleForUser(c,new Set);if(e&&"none"!==e){const t=l.formatMessage(S().Y7[e].label);return{tooltip:l.formatMessage(C.invited_team,{userNameAndEmail:v}),userTypeToken:(0,w.jsx)(i().E,{content:(0,w.jsx)(h().sA,{id:"inviteUserModal.teamspaceRole.memberBadge.label",defaultMessage:"{teamRoleMessage}",values:{teamRoleMessage:t}})})}}return(0,g().P)(r)||(0,g().GN)(r)?I({userNameAndEmail:v,membershipType:r,intl:l}):{tooltip:void 0,userTypeToken:void 0}}if(o)return{tooltip:(0,b().Yu)(a)?l.formatMessage(C.invited_space,{userNameAndEmail:v}):a instanceof s().B?l.formatMessage(C.invited_page,{userNameAndEmail:v}):a instanceof n().m?l.formatMessage(C.invited_database,{userNameAndEmail:v}):l.formatMessage(C.invited_team,{userNameAndEmail:v}),userTypeToken:(0,w.jsx)(i().E,{content:(0,w.jsx)(h().sA,{id:"inviteUserModal.userRole.invitedBadge.label",defaultMessage:"Invited"})})};if("none"===r)return{tooltip:l.formatMessage(C.not_in_space,{userNameAndEmail:v}),userTypeToken:void 0};return I({userNameAndEmail:v,membershipType:r,intl:l})}({userTarget:e,targetStore:t,membershipType:c,isInvited:f,intl:z});return"existingUser"===e.type?(0,w.jsx)(a(457688).A,{...l,actor:(0,a(764880).A7)(e.value),right:v,tooltip:d,tooltipPlacement:"bottom",disabled:T&&f,defaultUserTitle:P}):(0,w.jsx)(a(26697).m,{placement:"bottom",alignment:"start",textWrap:!0,render:t=>(0,w.jsx)(r().A,{...l,...t,icon:(0,w.jsx)(o().I,{icon:u().o}),right:v,title:e.value.email.trim(),disabled:T&&f}),disableTooltip:!d,renderTooltip:()=>d})},action:()=>{if(T&&f)return;const t={...e,..."existingUser"===e.type&&{membershipType:c}};a(134696).kH(L,{subscription_tier:(0,a(483226).AI)(),invite_token_query:F,selected_user_token:e,selected_user_token_rank:l,from:"permission_invite"}),V.setState({...B,inviteTargets:[...B.inviteTargets,t],tokenQuery:"",inputFocus:U})}}})),G=k(H,y).map((e=>{const{value:t}=e;return{key:t.id,render:s=>{const n=(0,x().dV)(e)?(0,w.jsx)(M().L,{}):void 0;return(0,w.jsx)(a(862139)._,{group:t,menuListItemProps:s,right:n})},action:()=>{V.setState({...B,inviteTargets:[...B.inviteTargets,e],tokenQuery:"",inputFocus:U})}}})),Y=[];if(K.length>0&&Y.push({key:"user results",render:e=>(0,w.jsx)(j().z,{...e,loading:!E,hideTitle:D}),items:K}),f&&G.length>0&&Y.push({key:"group results",render:e=>(0,w.jsx)(a(736847).A,{...e,title:(0,w.jsx)(h().sA,{id:"inviteUserModal.searchDropdown.selectGroupTitle",defaultMessage:"Select a group"}),loading:!E}),items:G}),0===Y.length){const e=(0,c().qh)(B.tokenQuery);if((0,c().DT)(e)){const s={type:"newUser",value:{email:e},source:"email"},n=(0,x().mQ)({target:s,permissionsInviteStore:V});if(!n)return;if(n)return(0,w.jsx)(j().z,{loading:!E,hideTitle:D,children:(0,w.jsx)(l().u,{title:(0,w.jsx)(h().sA,{id:"inviteUserModal.userAlreadyInvitedMessage",defaultMessage:"Already inviting {user}.",values:{user:(0,w.jsx)("span",{style:{fontWeight:v().Wy.bold},children:(0,x().Sk)({intl:z,target:n})})}})})});const i=(A&&A.inviteUsers||[]).find((t=>"existingUser"===t.type&&t.value.email===e));if(i&&"existingUser"===i.type&&(0,x().wF)({store:t,target:i}))return(0,w.jsx)(j().z,{loading:!E,hideTitle:D,children:(0,w.jsx)(l().u,{title:(0,w.jsx)(h().sA,{id:"inviteUserModal.userAlreadyHasPermissionMessage",defaultMessage:"{user} already has permission.",values:{user:(0,w.jsx)("span",{style:{fontWeight:v().Wy.bold},children:(0,a(695608).c6)(z,i.value)})}})})})}else{if(!B.tokenQuery)return null;Y.push({key:"user results",render:e=>(0,w.jsx)(j().z,{...e,loading:!E,hideTitle:D,title:N?(0,w.jsx)(h().sA,{id:"inviteUserModal.searchDropdown.requestPeople",defaultMessage:"Keep typing to request inviting an email"}):(0,w.jsx)(h().sA,{id:"inviteUserModal.searchDropdown.addPeople",defaultMessage:"Keep typing to invite email"})}),items:[{key:B.tokenQuery,render:e=>(0,w.jsx)(r().A,{icon:(0,w.jsx)(o().I,{icon:u().o}),title:B.tokenQuery,...e}),action:()=>{}}]})}}return(0,w.jsx)(d().A,{type:d().O.Vertical,initialFocus:F.length>0?0:void 0,sections:Y})}};return(0,w.jsx)(a(251126).A,{...W})}},909692:(e,t,a)=>{a.d(t,{e:()=>L});a(898992),a(672577);var s=a(296540),n=()=>a(401497),i=()=>a(127833),o=()=>a(250910),r=()=>a(807449),l=()=>a(378815),d=()=>a(892936),c=()=>a(582684),u=()=>a(69708),m=()=>a(56394),g=(a(354520),a(581454),()=>a(546926)),p=()=>a(493552),h=()=>a(890492),f=()=>a(81068),v=()=>a(736847),y=()=>a(617668),x=()=>a(236262),b=()=>a(534177),S=()=>a(271205),j=()=>a(424400),A=()=>a(835195),w=()=>a(748259),_=()=>a(396223),M=()=>a(55043),C=()=>a(933117),T=()=>a(272630),k=()=>a(935665),I=a(474848);function N({sort:e,sortProperties:t,onChange:a,currentSorts:s}){const i=(0,n().IS)((()=>({sortRow:{display:"flex",alignItems:"center",flexGrow:1,whiteSpace:"nowrap"},section:{paddingTop:8,paddingInlineEnd:0,paddingBottom:0,paddingInlineStart:8,width:"100%"}})),[]);if(!e)return null;return(0,I.jsx)(v().A,{extraTopPadding:!0,style:i.section,children:(0,I.jsx)(j().Ay,{showDragHandle:!0,title:(0,I.jsxs)("div",{style:i.sortRow,children:[(0,I.jsx)(P,{currentPropertyId:e.propertyId,sortProperties:t,currentSorts:s,onChange:a}),(0,I.jsx)(D,{sort:e,currentSorts:s,onChange:a})]}),right:(0,I.jsx)(w().B,{onDeleteClick:()=>{const t=s.filter((({propertyId:t})=>t!==(null==e?void 0:e.propertyId)));a(t)}}),rightStyle:{marginInlineEnd:19}})})}function D({sort:e,onChange:t,currentSorts:a}){const s=(0,u().tz)(),n=e.direction;return(0,I.jsx)(C().A,{menuTitle:s.formatMessage(_().CL.menuTitle),items:[...A().FU],selectedItem:n,onSelect:s=>{const n=a.map((t=>t.propertyId===e.propertyId?{...t,direction:s}:t));t(n)},getKey:e=>e,renderItem:e=>(0,I.jsx)(f().A,{title:_().bL[e.value],...e}),renderOrigin:e=>(0,I.jsx)(T().A,{...e,placeholder:s.formatMessage(_().CL.emptyPlaceholder),title:n&&_().bL[n],desktopStyle:{opacity:1}})},"direction")}function P({currentPropertyId:e,sortProperties:t,currentSorts:a,onChange:s}){const n=t.find((t=>t.id===e));return n?(0,I.jsx)(o().A,{popupType:o().z.Popup,renderOrigin:e=>(0,I.jsx)(M().A,{...e,disabled:a.length===t.length,propertySchema:n,textWrapperStyle:{opacity:1}}),render:({close:n})=>(0,I.jsx)(k().J,{onClick:t=>{(t=>{const n=a.map((a=>a.propertyId===e?{propertyId:t,direction:a.direction}:a));s(n)})(t),n()},currentSorts:a,sortProperties:t})}):null}function E({sortProperties:e,currentSorts:t,onChange:a,preventMultipleSorts:s}){const n=t.map((e=>e.propertyId));return(0,I.jsxs)(h().A,{menuType:g().gu.Popup,minWidth:320,children:[(0,I.jsx)(S().Ay,{direction:"vertical",keys:n,renderKey:s=>(0,I.jsx)(N,{sortProperties:e,onChange:a,currentSorts:t,sort:t.find((e=>e.propertyId===s))}),onDrop:e=>function(e,t,a){const s=e.map((e=>a.find((t=>t.propertyId===e)))).filter(b().O9);t(s)}(e,a,t)}),(0,I.jsxs)(v().A,{children:[s?null:(0,I.jsx)(B,{sortProperties:e,currentSorts:t,onChange:a}),(0,I.jsx)(R,{currentSorts:t,onChange:a})]})]})}function B({sortProperties:e,currentSorts:t,onChange:a}){const s=V();if(!(t.length<e.length))return null;return(0,I.jsx)(o().A,{popupType:i().nl.Popup,renderOrigin:e=>(0,I.jsx)(f().A,{focused:!1,icon:(0,I.jsx)(r().I,{icon:y().plusIcon,colorVariant:"secondary",style:s.icon}),title:(0,I.jsx)(p().D,{colorVariant:"secondary",children:(0,I.jsx)(u().sA,{id:"database.viewSettings.sortTab.newSort",defaultMessage:"Add sort"})}),...e}),render:({close:s})=>(0,I.jsx)(k().J,{sortProperties:e,currentSorts:t,onClick:e=>{a([...t,{propertyId:e,direction:"ascending"}]),s()}})})}function R({currentSorts:e,onChange:t}){const a=V();return e.length>0?(0,I.jsx)(f().A,{focused:!1,icon:(0,I.jsx)(r().I,{icon:x().trashIcon,colorVariant:"secondary",style:a.icon}),title:(0,I.jsx)(p().D,{colorVariant:"secondary",children:(0,I.jsx)(u().sA,{id:"database.viewSettings.sortTab.deleteAllSorts",defaultMessage:"Delete sort"})}),onClick:()=>t([])}):null}function V(){return(0,n().IS)((()=>({icon:{width:24,height:16,marginInlineEnd:-2}})),[])}function L(e){const{currentSorts:t,isMenuOpen:a,setIsMenuOpen:g,sortProperties:p,onApply:h,preventMultipleSorts:f}=e,v=(0,n().IS)((()=>({sortDirectionIcon:{width:12,height:22,fill:"currentColor"},multiSortIcon:{width:16,height:22,fill:"currentColor"},empty:{height:24}})),[]),[y,x]=(0,s.useState)(t.length?t:void 0),b=y??t;let S,j;if(1===b.length){var A;const e=b[0];S="ascending"===e.direction?(0,I.jsx)(r().I,{icon:d().arrowStraightUpFillIcon,style:v.sortDirectionIcon}):(0,I.jsx)(r().I,{icon:l().arrowStraightDownFillIcon,style:v.sortDirectionIcon}),j=null===(A=p.find((t=>t.id===e.propertyId)))||void 0===A?void 0:A.name}else S=(0,I.jsx)(r().I,{icon:c().arrowUpDownIcon,style:v.multiSortIcon}),j=(0,I.jsx)(u().sA,{defaultMessage:"{sortCount} sorts",id:"settingsConsoleSortButton.multiSorts.label",values:{sortCount:b.length}});const w=b.length||a?(0,I.jsx)(m().A,{on:b.length>0,icon:S,title:j,onClick:()=>g(!0)}):(0,I.jsx)("div",{style:v.empty});return(0,I.jsx)(i().zD,{popupType:o().z.Popup,open:a,origin:w,onDismiss:()=>{h(b),x(void 0),g(!1)},originGap:4,render:()=>(0,I.jsx)(E,{...e,preventMultipleSorts:b.length>0&&f,onChange:x,currentSorts:b})})}},935665:(e,t,a)=>{a.d(t,{J:()=>c});a(898992),a(354520),a(581454),a(737550),a(296540);var s=()=>a(546926),n=()=>a(890492),i=()=>a(663639),o=()=>a(736847),r=()=>a(534177),l=()=>a(314638),d=a(474848);function c({sortProperties:e,onClick:t,currentSorts:a}){const c=e.map((e=>{if(null==a?void 0:a.some((({propertyId:t})=>t===e.id)))return;return{key:e.name,render:t=>(0,d.jsx)(l().G,{...t,propertySchema:e,format:l().e.Name}),action:()=>t(e.id)}})).filter(r().O9);return c.length?(0,d.jsx)(n().A,{menuType:s().gu.Popup,children:(0,d.jsx)(i().A,{type:i().O.Vertical,initialFocus:void 0,sections:[{key:"properties",render:e=>(0,d.jsx)(o().A,{...e}),items:c}]})}):null}},962750:(e,t,a)=>{a.r(t),a.d(t,{heartSmallIcon:()=>n,iconDefinition:()=>s});a(296540);const s={viewBox:"0 0 16 16",fittedViewBox:"1.79 2.17 12.41 12.06",svg:(0,a(474848).jsx)("path",{d:"M8.013 14.232a.6.6 0 0 1-.138-.015.5.5 0 0 1-.175-.055c-.241-.124-5.905-3.11-5.905-7.979 0-1.872 1.038-3.433 2.581-3.883C5.403 2 6.826 2.206 8 3.537 9.175 2.206 10.597 2 11.624 2.3c1.544.45 2.581 2.011 2.581 3.883 0 4.869-5.664 7.855-5.905 7.98a.6.6 0 0 1-.287.07M5.25 3.425q-.263 0-.523.075c-1.006.293-1.682 1.372-1.682 2.683 0 3.552 3.877 6.08 4.955 6.714 1.078-.634 4.955-3.162 4.955-6.714 0-1.311-.676-2.39-1.682-2.683-.973-.283-2 .245-2.746 1.414a.625.625 0 0 1-1.054 0c-.613-.961-1.415-1.49-2.223-1.49"})},n=(0,a(340498).wt)("heartSmall",s,"small")},965022:(e,t,a)=>{a.d(t,{n:()=>r});var s=()=>a(314709),n=()=>a(675133),i=()=>a(792057),o=()=>a(534177);async function r({onRequest:e,onSuccess:t}){const a=await e();switch(a.type){case"success":t&&await t(a);break;case"failed":i().f1((0,s().H)(n().A.getIntl(),a));break;default:(0,o().HB)(a)}}},965597:(e,t,a)=>{a.d(t,{Hb:()=>n,Hm:()=>o,ko:()=>i});a(898992),a(354520),a(581454);var s=()=>a(979340);function n({space:e,trustedDomains:t,enableTrustedDomainPermissionRedesign:a}){return e&&i(e)?a?(0,s().OX)(e.subscription_tier)?(t||[]).filter((e=>e.getDomainLinkSharingEnabled())).map((e=>e.getEmailDomain())):e.getEmailDomains():(t||[]).filter((e=>e.getDomainLinkSharingEnabled())).map((e=>e.getEmailDomain())):[]}function i(e){return Boolean(e&&(0,s().jR)(e.subscription_tier))}function o(e){return!(!e||!i(e))&&(!(0,s().OX)(e.subscription_tier)||(e.getSettings().domain_link_sharing_enabled??!0))}},970381:(e,t,a)=>{a.d(t,{A:()=>W});var s=a(296540),n=()=>a(590526),i=()=>a(401497),o=()=>a(26697),r=()=>a(302501),l=()=>a(591779),d=()=>a(301608),c=()=>a(69708),u=()=>a(284371),m=()=>a(690197),g=()=>a(232930),p=()=>a(20953),h=()=>a(286387),f=(a(16280),a(944114),a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(581454),()=>a(314709)),v=()=>a(484714),y=()=>a(416845),x=()=>a(436604),b=()=>a(496603),S=()=>a(76590),j=()=>a(769864);const A={field:"num_searches",direction:"desc"},w=a(307212).Jb,_={sort:A,timeRange:w,searchAnalyticsDataList:[],numPagesLoaded:0,paginationToken:void 0,hasNextPage:!0,loading:!1,error:void 0,shouldReRunSearch:!1};a(898992),a(354520);var M=()=>a(675133),C=()=>a(396896),T=()=>a(98126),k=()=>a(493552),I=()=>a(940148),N=()=>a(81068),D=()=>a(736847),P=()=>a(942715),E=()=>a(534177),B=()=>a(515153),R=()=>a(444179),V=a(474848);const L=(0,c().YK)({numSearches:{id:"workspaceAnalytics.searchTab.searchTable.searches.tooltip",defaultMessage:"Number of times users in the workspace have searched the query"},numUniqueUsers:{id:"workspaceAnalytics.searchTab.searchTable.uniqueSearches.tooltip",defaultMessage:"Total number of users that have searched the query"},ctr:{id:"workspaceAnalytics.searchTab.searchTable.ctr.tooltip",defaultMessage:"Percentage of times users have opened page from results of this query"}}),z=(0,c().YK)({queryText:{id:"spaceAnalyticsSearchTable.column.query",defaultMessage:"Query"},numSearches:{id:"spaceAnalyticsSearchTable.column.searches",defaultMessage:"Searches"},numUniqueUsers:{id:"spaceAnalyticsSearchTable.column.uniqueSearches",defaultMessage:"Unique searches"},ctr:{id:"spaceAnalyticsSearchTable.column.ctr",defaultMessage:"Click-through rate"}});function F({searchAnalyticsDataList:e,runNewSearch:t,sort:a,setSort:n,loadNextPage:o,loading:l,error:u,dateFilterProps:m}){const g=(0,s.useMemo)((()=>function(e){const{dateFilterProps:t}=e;return{queryText:{id:"queryText",headerTitle:(0,V.jsxs)(C().fI,{gap:8,alignItems:"center",children:[M().A.formatMessage(z.queryText),t?(0,V.jsx)(U,{currentFilter:t.currentFilter,onChangeFilter:t.onChangeFilter}):null]}),renderCell:e=>(0,V.jsx)(r().A,{children:e.queryText}),widthData:{width:200,maxWidth:300},sortable:!1},numSearches:{id:"numSearches",headerTitle:(0,V.jsx)(R().Z,{tooltipMessageDescriptor:L.numSearches,columnHeader:z.numSearches}),renderCell:e=>(0,V.jsx)(O,{value:e.numSearches}),widthData:{width:120,maxWidth:120},sortable:!0},numUniqueUsers:{id:"numUniqueUsers",headerTitle:(0,V.jsx)(R().Z,{tooltipMessageDescriptor:L.numUniqueUsers,columnHeader:z.numUniqueUsers}),renderCell:e=>(0,V.jsx)(O,{value:e.numUniqueUsers}),widthData:{width:120,maxWidth:120},sortable:!0},ctr:{id:"ctr",headerTitle:(0,V.jsx)(R().Z,{tooltipMessageDescriptor:L.ctr,columnHeader:z.ctr}),renderCell:e=>(0,V.jsx)(O,{value:Math.round(1e3*e.ctr)/1e3,isPercentage:!0}),widthData:{width:120,maxWidth:120},sortable:!0}}}({dateFilterProps:m})),[m]),p=(0,E().uv)(g).map((e=>g[e])),h=(0,s.useMemo)((()=>e.map((e=>({id:e.queryText,isClickable:!1,...e})))),[e]),f=(0,s.useMemo)((()=>function(e,t){const a=d().tV[t.field];if(!a)return;const s=e[a];return{column:s,sortAscending:"asc"===t.direction}}(g,a)),[g,a]),v=(0,s.useMemo)((()=>(0,I().rC)({columnRenderInfo:p,containerMarginTop:0})),[p]),y=(0,i().IS)((()=>({emptyQuery:{marginTop:15,marginBottom:40,textAlign:"center"},tableContainer:{textAlign:"center",marginBlock:24}})),[]);return u?(0,V.jsx)(B().t,{error:u,runNewSearch:t}):(0,V.jsxs)("div",{style:y.tableContainer,children:[(0,V.jsx)(I().WE,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:500,columnRenderInfo:p,rows:h,sortState:f,onSortStateChanged:e=>{n(function(e){const t=d().Bt[e.column.id],a=e.sortAscending?"asc":"desc";if(!t)return{field:"num_searches",direction:a};return{field:t,direction:a}}(e))},loadMoreMethod:{type:"scroll",onLoadMore:o},renderNoRowsComponent:()=>(0,V.jsx)(r().A,{isSmall:!0,style:y.emptyQuery,children:l||0!==e.length?void 0:(0,V.jsx)(c().sA,{id:"settings.workspaceAnalytics.searchTable.table.empty",defaultMessage:"No search query analytics to display."})}),styles:v}),l?(0,V.jsx)(T().k,{}):null]})}function O({value:e,isPercentage:t}){const a=(0,i().IS)((()=>({centered:{width:"100%",textAlign:"center"}})),[]),s=t?`${e}%`:e;return(0,V.jsx)(r().A,{style:a.centered,children:s})}function U(e){const t=(0,c().tz)();return(0,V.jsx)(P().A,{selectedTitle:(0,V.jsx)(k().D,{styleKey:"captionRegular",children:t.formatMessage(d().jy[e.currentFilter])}),renderMenuSections:a=>[{key:"day_filter_selector",render:e=>(0,V.jsx)(D().A,{...e}),items:d().jf.filter((e=>"all_time"!==e&&"last_365_days"!==e)).map((s=>({key:s,action:()=>{},render:()=>(0,V.jsx)(N().A,{focused:!1,onClick:()=>{e.onChangeFilter(s),a.close()},title:(0,V.jsx)(k().D,{styleKey:"captionRegular",children:t.formatMessage(d().jy[s])})})})))}]})}function W(e){const t=(0,c().tz)(),{spaceStore:a,hideHeader:M=!1}=e,C=(0,i().IS)((()=>({header:{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",marginBottom:16},sectionTitle:{fontWeight:u().Wy.semibold,fontSize:16,display:"flex",alignItems:"center"},helpInfo:{marginInlineStart:4}})),[]),T=(0,s.useRef)(!1),{searchAnalyticsDataList:k,timeRange:I,sort:N,loading:D,error:P,loadNextPage:E,runNewSearch:B,setTimeRange:R,setSort:L}=function({spaceStore:e}){const t=(0,v().v3)(),[a,n]=(0,s.useState)(_),i=(0,s.useRef)(A),o=(0,s.useRef)(w),r=(0,c().tz)(),l=(0,s.useCallback)((async({fetchFromFirstPage:s,ignoreSearchInputComparison:r})=>{const l=!b().n4(a.sort,i.current)||!b().n4(a.timeRange,o.current);if(!r&&!l)return;i.current=a.sort,o.current=a.timeRange;let d=a.loading,c=a.error,u=a.hasNextPage,m=a.paginationToken;if(s&&(n((e=>({..._,timeRange:e.timeRange,sort:e.sort}))),d=_.loading,c=_.error,u=_.hasNextPage,m=_.paginationToken),!u||d)return;if(c)return;n((e=>({...e,loading:!0})));const g=await j().callApi({eventName:"loadSearchAnalytics",environment:t,data:{spaceId:e.id,sort:a.sort,timeRange:a.timeRange,startCursor:m},headers:{[x().B3]:e.id}});if("failed"===g.type)return void n((e=>({...e,loading:!1,error:g})));const p=g.data.results;n((e=>{const t=[],a=new Set(e.searchAnalyticsDataList.map((e=>e.queryText)));for(const n of p){const e=n.queryText;a.has(e)||(t.push(n),a.add(e))}const s=[...e.searchAnalyticsDataList,...t];return{...e,searchAnalyticsDataList:s,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:g.data.nextCursor,hasNextPage:Boolean(g.data.nextCursor)}}))}),[t,e,a.sort,a.timeRange,a.loading,a.error,a.hasNextPage,a.paginationToken]);(0,s.useEffect)((()=>{a.shouldReRunSearch&&(n((e=>({...e,shouldReRunSearch:!1}))),l({fetchFromFirstPage:!0,ignoreSearchInputComparison:!1}))}),[a.shouldReRunSearch,l]);const d=(0,s.useCallback)((async()=>{a.shouldReRunSearch||await l({fetchFromFirstPage:!1,ignoreSearchInputComparison:!0})}),[a.shouldReRunSearch,l]),u=(0,s.useCallback)((async e=>{await l({fetchFromFirstPage:!0,ignoreSearchInputComparison:e||!1})}),[l]),m=(0,s.useCallback)((e=>{"all_time"!==e&&"last_365_days"!==e&&(n((t=>({...t,timeRange:e,shouldReRunSearch:!0}))),S().kJ(t,{daysFilter:e}))}),[t]),g=(0,s.useCallback)((e=>{n((t=>({...t,sort:e,shouldReRunSearch:!0}))),S().G4(t,{column:e.field,isAscending:"asc"===e.direction})}),[t]),p=(0,s.useMemo)((()=>{if(a.error)return 404===a.error.status?new(y().m_B)({message:(0,f().H)(r,a.error)}):new Error((0,f().H)(r,a.error))}),[a.error,r]);return{...a,error:p,loadNextPage:d,runNewSearch:u,setTimeRange:m,setSort:g}}({spaceStore:a}),z=(0,l().ZC)(a.id),O=(0,s.useMemo)((()=>void 0!==z&&a.id!==z),[a.id,z]);(0,s.useEffect)((()=>{T.current&&!O||(B(!0),T.current=!0)}),[B,O]);const U=(0,n().K8)((()=>a.getName()),[a]);return"NotFoundError"===(null==P?void 0:P.name)?(0,V.jsx)(h().H,{type:"empty",spaceName:U}):(0,V.jsxs)(V.Fragment,{children:[M?null:(0,V.jsxs)("div",{style:C.header,children:[(0,V.jsxs)(r().A,{style:C.sectionTitle,children:[(0,V.jsx)(c().sA,{id:"settings.workspaceAnalytics.searchTab.searchQueries.title",defaultMessage:"Search queries"}),(0,V.jsx)(o().m,{placement:"bottom",render:e=>(0,V.jsx)(m().A,{...e,href:(0,g().x)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:C.helpInfo}),renderTooltip:()=>(0,V.jsx)(c().sA,{id:"settings.workspaceAnalytics.searchTab.searchQueries.tooltip",defaultMessage:"Displays popular search queries in the workspace from the {dateRange}",values:{dateRange:t.formatMessage(d().Yr[I])}})})]}),(0,V.jsx)(p().Z,{currentFilter:I,onChangeFilter:R,hideAllTime:!0,hideLast365Days:!0})]}),(0,V.jsx)(F,{searchAnalyticsDataList:k,runNewSearch:B,sort:N,setSort:L,loadNextPage:E,loading:D,error:P,dateFilterProps:M?{currentFilter:I,onChangeFilter:R}:void 0})]})}},976519:(e,t,a)=>{a.d(t,{q:()=>i});a(898992),a(354520);var s=()=>a(590526),n=()=>a(435761);function i(e){const{teamId:t,spaceStore:a}=e,{teams:i}=(0,n().Qs)({spaceStore:a});return(0,s().K8)((()=>{if(!t)return!1;const e=i.filter((e=>e.isDefaultTeam));return 1===e.length&&e[0].id===t}),[t,i])}},992211:(e,t,a)=>{a.d(t,{M:()=>u,g:()=>m});var s=a(296540),n=()=>a(484714),i=()=>a(187174),o=()=>a(436604),r=()=>a(534177),l=()=>a(769864),d=()=>a(335260);const c={pageViews:0,uniquePageViews:0,pagesCreated:0,pageEdits:0,topPages:[]};function u({spaceId:e}){const[t,a]=(0,s.useState)("last_90_days");return{...m({spaceId:e,daysFilter:t}),daysFilter:t,setDaysFilter:a}}function m({spaceId:e,daysFilter:t}){const a=(0,n().v3)(),{updateCacheWithRecordMap:u}=(0,s.useContext)(d().N),[{status:m,value:g,error:p}]=(0,i().Yb)((async()=>{const s=await l().callApi({eventName:"getContentEngagementAnalytics",environment:a,data:{spaceId:e,daysFilter:t},headers:{[o().B3]:e}});switch("success"===s.type&&u(s),s.type){case"success":return{pageViews:s.data.pageViews,uniquePageViews:s.data.uniquePageViews,pagesCreated:s.data.pagesCreated,pageEdits:s.data.pageEdits,topPages:s.data.topPages};case"failed":throw s.body;default:(0,r().HB)(s)}}),[a,e,t,u]);return{data:(0,s.useMemo)((()=>g||c),[g]),loading:"pending"===m||"idle"===m,error:p}}}}]);