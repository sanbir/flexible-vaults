"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[2373],{54565:(e,t,a)=>{a.d(t,{A:()=>d});a(898992),a(354520),a(581454);var i=a(296540),o=()=>a(44551);function n(e){o().electronApi&&o().electronApi.snackbarReady&&o().electronApi.snackbarReady(e)}var r=()=>a(100622),l=a(474848);function s(){const[e,t]=(0,i.useReducer)(((e,t)=>{switch(t.type){case"push":return[...e.map((e=>({...e,isAnimatingOut:!0}))),{item:t.item,isAnimatingOut:!1}];case"delete":return e.filter((e=>e.item.key!==t.key));case"clear":return e.map((e=>({...e,isAnimatingOut:!0})));default:return e}}),[]);(0,i.useEffect)((()=>(n(!0),()=>{n(!1)})),[]),(0,i.useEffect)((()=>{const e=new(a(140934).ComputedStore)((()=>a(94484).Ay.state.currentItem),{debugName:"currentItemStore"});let i=null;function o(){const a=e.state;a&&i!==a.key?(t({type:"push",item:a}),i=a.key):a||t({type:"clear"})}return e.addListener(o),()=>{e.removeListener(o)}}),[]);const o=(0,i.useMemo)((()=>{const t=e.filter((e=>!e.isAnimatingOut));return t.length>0?t[t.length-1]:void 0}),[e]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{role:"status","aria-live":"polite",style:a(115512).Qg,children:o?o.item.label:void 0}),(0,l.jsx)(a(396406).O,{open:e.length>0,zIndex:201,children:e.map((e=>(0,i.createElement)(c,{...e,key:e.item.key,dispatch:t})))})]})}const d=i.memo(s),c=i.memo((function({dispatch:e,isAnimatingOut:t,item:o}){const n=(0,a(552871).L)(),s=(0,i.useCallback)((()=>{e({type:"delete",key:o.key})}),[e,o.key]),d=(0,i.useRef)(t);(0,i.useEffect)((()=>{if(!d.current&&t){const e=setTimeout(s,270);return()=>{s(),clearTimeout(e)}}d.current=t}),[t,s]);const c=o.position??"bottom",p="top"===c?{top:24}:{bottom:n};return(0,l.jsx)("div",{style:{...p,position:"fixed",insetInlineStart:0,width:"100%",display:"flex",zIndex:1e6,padding:4,pointerEvents:"none"},children:(0,l.jsxs)("div",{style:{background:r().Tj.background.accentPrimary,color:r().Tj.text.inversePrimary,borderRadius:8,padding:"11px 16px",boxShadow:r().Tj.shadowLG,margin:"0 auto",fontSize:14,display:"flex",alignItems:"center",pointerEvents:"auto",...o.style,animationName:`snackbar-slide-in-${c}`,animationDuration:"270ms",animationTimingFunction:"ease",transitionProperty:"transform, opacity",transitionDuration:"270ms",transitionTimingFunction:"ease",transform:t?"scale(0.95)":"scale(1)",opacity:t?0:1},onTransitionEnd:t?s:void 0,children:[o.label,o.helpUrl?(0,l.jsx)(a(996332).Q,{href:o.helpUrl,external:!0,style:{marginInlineStart:8,width:16,height:16},children:(0,l.jsx)(a(807449).I,{icon:a(721479).questionMarkCircleSmallIcon,size:"sm",colorVariant:"inverseSecondary"})}):void 0,(0,l.jsx)("div",{style:{marginInlineStart:4,marginInlineEnd:-4},children:o.right})]})})}))},69660:(e,t,a)=>{a.r(t),a.d(t,{accept:()=>R,close:()=>P,loadAndDuplicatePageTemplate:()=>B,openWithItem:()=>_,previewItem:()=>j,setTemplateVisited:()=>E});a(16280),a(581454);var i=()=>a(564884),o=()=>a(907258),n=()=>a(242422),r=()=>a(726637),l=()=>a(675133),s=()=>a(74351),d=()=>a(584262),c=()=>a(763884),p=()=>a(388821),u=()=>a(160568),m=()=>a(769864),v=()=>a(384944),f=()=>a(666144),g=()=>a(857783),b=()=>a(185544),y=()=>a(59110),h=()=>a(949653),S=()=>a(645266),A=()=>a(440024),k=()=>a(869562),I=()=>a(316189),C=()=>a(547149),T=()=>a(393284),w=()=>a(127581);const x="LastViewedTemplateId",M=(0,a(69708).YK)({clientCopyError:{defaultMessage:"Client copy could not be created.",id:"spaceActions.createGettingStartedPage.copyNotCreated.error"}});function _(e){const{environment:t,item:a,createNewPage:i,isPrivate:o,disablePointerEvents:n,isCheckout:r=!1}=e;(0,A().I)({environment:t}),w().A.setState({open:!0,item:a,createNewPage:i,isPrivate:o,isLoading:!1,disablePointerEvents:n,isCheckout:r}),c().K.set({userId:t.currentUser.id,key:x,value:a.rootId}),u().Xq(t,{template_id:(0,T().dY)(a),from:i?"sidebar":"newPage"})}function j({templateItem:e,currentUserId:t}){const a=w().A.state.item;w().A.setState({...w().A.state,item:e}),a!==e&&c().K.set({userId:t,key:x,value:e.rootId})}function P(e){w().A.setState({item:w().A.state.item,open:!1}),(0,A().I)({environment:e})}async function R(e){const{acceptFrom:t,item:a,environment:i,spaceStore:l,initializeStore:c,...p}=e;w().A.state.open&&w().A.setState({...w().A.state,isLoading:!0}),n().default.checkGate({gateName:"mobile_keep_template_gallery_open"})&&S().A.state.open&&S().A.setState({open:!1});const m=c?{...{...p,item:a,environment:i,spaceStore:l},initializeStore:c,type:"inExistingStore",useMinimalTemplates:!1,from:"page_template_modal"}:{...{...p,item:a,environment:i,spaceStore:l},type:"inSpace",useMinimalTemplates:!1,from:"page_template_modal"};let v=!1;const f=Date.now();let b;try{var y;b=await(0,I().o)(m),v=!0;const e=null===(y=o().default.state.mainEditorCurrentBlockStore)||void 0===y?void 0:y.id;!b||e&&e===b.id||g().uK({environment:i,store:b,pageVisitSource:d().y8.Create,showMoveTo:!0}),P(i),r().A.isMobile&&(k().close(),S().A.setState({open:!1}))}finally{var h;const o=Date.now()-f,n=e.initializeStore?(0,s().U)(e.initializeStore):void 0,r=e.initializeStore?!n:e.isPrivate;u().BX(i,{destination:r?"private":"team",template_block_id:a.rootId,template_duplication_duration_ms:o,team_id:null==n?void 0:n.id,created_page_id:null===(h=b)||void 0===h?void 0:h.id}),u().hB(i,{from:"mobileApp",success:v,context:t,template_block_id:a.rootId,target_space_id:l.id,template_duplication_duration_ms:o,public_template_name:a.name,template_id:a.id})}}async function B(e){const{environment:t,initializeStore:a,item:o,isPrivate:n,useMinimalTemplates:r,spaceStore:s,spaceViewStore:d}=e,c=r?o.rootId:o.previewRootId,u=await m().callCellCompatibleApi({eventName:"loadBlockSubtree",environment:t,data:{block:{id:c,spaceId:o.spaceId},shallow:!1},cellNavigation:{spaceId:o.spaceId}});let v;"success"===u.type&&(v=p().RecordMapWithRole.create(u.data.subtreeRecordMap));const g="pageTemplateModalActions.loadAndDuplicatePageTemplate",{performResult:S}=C().createAndCommit({userAction:g,environment:t,canUndo:!0,perform:e=>{const i=a||b().IT({environment:t,spaceStore:s,spaceViewStore:d,parent:n?"private":"none",loading:!0,transaction:e});f()._O({environment:t,inMemoryRecordCache:i.inMemoryRecordCache,recordMap:v,debugSource:g});const o=(0,y().loadLocalSubtree)({environment:t,blockId:c,inMemoryRecordCache:i.inMemoryRecordCache,options:{allowCopyCollections:!0,requireFullSubtree:!1,skipTransclusionContainerChildren:!1,allowCopyExternalObjectInstances:!0}}).recordMap;if(!o)throw new Error(l().A.getIntl().formatMessage(M.clientCopyError));return(0,h().localDuplicate)({environment:t,sourceBlockId:c,targetBlockPointer:i.pointer,sourceBlockSubtree:o,targetInMemoryRecordCache:i.inMemoryRecordCache,transaction:e,from:"load_and_duplicate_page_template",options:{allowRedundancy:!0,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0}}),i}}),A=((null==S?void 0:S.getCollectionPointers())??[]).map((e=>e.id));return(0,i().u)({environment:t,event:{eventName:"create_app_templates",eventProperties:{target_page_ids:[S.id],template_label:o.name,collection_ids:A}}}),S}function E(e){const{item:t,transaction:a,spaceViewStore:i}=e;if(i){const e=i.getVisitedTemplateIds();if(e.indexOf(t.rootId)<0){const o=e.concat([t.rootId]);v().zv({store:i,data:{visited_templates:o},transaction:a})}}}},98749:(e,t,a)=>{a.r(t),a.d(t,{CloseTemplatesPopupComponent:()=>Se,default:()=>ce});var i=()=>a(222926),o=a(296540),n=()=>a(907258),r=()=>a(726637),l=()=>a(484714),s=()=>a(590526),d=()=>a(401497),c=()=>a(792057),p=()=>a(128933),u=()=>a(718827),m=()=>a(735038),v=()=>a(695115),f=()=>a(98126),g=()=>a(292119),b=()=>a(879765),y=()=>a(599813),h=()=>a(340498),S=()=>a(69708),A=()=>a(100622),k=()=>a(209199),I=()=>a(284371),C=()=>a(182641),T=()=>a(37546),w=()=>a(202106);function x(){return"web-mobile"===(0,l().Y0)().deviceType}var M=()=>a(345737),_=()=>a(78219),j=()=>a(396990),P=()=>a(712505),R=()=>a(370441),B=()=>a(69660),E=()=>a(127581),U=()=>a(757695);class D extends U().Store{getInitialState(){return{inMemoryRecordCache:new(a(221844).A)({name:"TemplateRecordCacheStore"})}}}a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(581454);var V=()=>a(110525),z=()=>a(795732),L=()=>a(770063),O=()=>a(295633),N=()=>a(849255),$=()=>a(388821),q=()=>a(651784),F=()=>a(179034),H=()=>a(824862),G=()=>a(798880),K=()=>a(201980),W=()=>a(769864),Y=()=>a(367263),J=()=>a(539801),Z=()=>a(648526),Q=()=>a(614699),X=()=>a(376254),ee=()=>a(122001),te=()=>a(151838),ae=()=>a(459572);class ie extends U().Store{getInitialState(){return{}}}const oe=ie;var ne=a(474848);const re=function({style:e,disabled:t,disablePointerEvents:i,previewRootId:d,previewSpaceId:c,isPaidTemplate:p,userHasAcquiredTemplate:u,templateRecordCacheStore:m}){const v=(0,l().v3)(),f=(0,s().uB)(m,D),g=(0,s().uB)(void 0,oe),b=(0,s().O$)(a(929219).e),y=(0,o.useCallback)(((a,o)=>(0,ne.jsx)(se,{err:a,store:o,style:e,disabled:t,disablePointerEvents:i,isPaidTemplate:p,userHasAcquiredTemplate:u,pageTemplatePreviewStore:g})),[e,t,i,g,p,u]),h=(0,o.useCallback)((e=>{const{rootId:a,spaceId:i}=e;return async function(e,t,a,i,o){if(o){return new(O().B)(a,{table:F().ev,id:e})}const r=await W().callCellCompatibleApi({eventName:"loadBlockSubtree",environment:a,data:{block:{id:e,spaceId:t},shallow:!1},cellNavigation:{spaceId:t}});if("failed"===r.type)throw r.error;const{sidebarSpaceStore:l}=n().default.state,{inMemoryRecordCache:s}=i.state;s.clearCache(),s.isTemplatePreview=!0;const d=new Set,c=new Set,p=$().RecordMapWithRole.create(r.data.subtreeRecordMap);for(const n of p){const{pointer:e,model:t,role:i}=n;if(!i)return;if(s.setModelAndRole({pointer:e,userId:a.currentUser.id},t,"editor"),(null==t?void 0:t.table)===F().ev){const e=t.getProperties();for(const t of Object.keys(e)){const a=(0,K().Fbh)(e[t]);for(const e of a)d.add(e);const i=(0,K().jgW)(e[t]);for(const e of i)c.add(e)}t.created_by_table&&t.created_by_id&&(t.created_by_table===G().oo?d.add(t.created_by_id):c.add(t.created_by_id)),t.last_edited_by_table&&t.last_edited_by_id&&(t.last_edited_by_table===G().oo?d.add(t.last_edited_by_id):c.add(t.last_edited_by_id))}}const u=await Promise.all(Array.from(d).map((async e=>{if(l){const t=N().L.createChildStore(l,{table:G().oo,id:e});await t.load();return t.getValue()}{const t=await(0,Y().e)(a,{pointer:{table:G().oo,id:e},userId:a.currentUser.id,version:-1});return t&&t.value}})));for(const n of u)n&&s.setRecord({pointer:{table:G().oo,id:n.id},userId:a.currentUser.id},{role:"reader",value:n});const m=await Promise.all(Array.from(c).map((async e=>{if(l){const t=(0,L().v3)(l,{table:H().GP,id:e,spaceId:l.id});await t.load();return t.getValue()}{const t=await(0,Y().e)(a,{pointer:{table:H().GP,id:e},userId:a.currentUser.id,version:-1});return t&&t.value}})));for(const n of m)n&&s.setRecord({pointer:{table:H().GP,id:n.id,spaceId:n.space_id},userId:a.currentUser.id},{role:"reader",value:n});const{currentUserStore:v}=n().default.state;v&&(await v.load(),s.setRecord({pointer:v.pointer,userId:a.currentUser.id},{role:"editor",value:v.getValue()}));const f=new(O().B)(a,{table:F().ev,id:e},{inMemoryRecordCache:s});return f}(a,i,v,f,t)}),[v,f,t]),A=(0,o.useCallback)((e=>function(e,t,a){const i=(0,q().parseRoute)({url:e,isMobile:r().A.isMobile,baseUrl:r().A.domainBaseUrl,publicDomainName:r().A.publicDomainName,protocol:r().A.protocol,currentUrl:window.location.href});"page"===i.name&&(i.peekViewBlockId?a.setState({...a.state,navigatedRootId:i.peekViewBlockId}):a.setState({...a.state,navigatedRootId:i.blockId}))}(e,0,g)),[v,g]);return b?(0,ne.jsx)(V().B,{value:A,children:(0,ne.jsx)(a(251126).A,{request:{rootId:d,spaceId:c},performRequest:h,render:y})}):(0,ne.jsx)(V().B,{value:A,children:(0,ne.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",...e},children:(0,ne.jsx)(a(302501).A,{isSmall:!0,children:(0,ne.jsx)(S().sA,{defaultMessage:"Please go online to view this template.",id:"pageTemplatePreview.offline.message"})})})})};function le(e){const{device:t}=e;return{flex:1,...t.isSafari&&{zIndex:1}}}function se({store:e,style:t,disabled:a,disablePointerEvents:i,isPaidTemplate:n,userHasAcquiredTemplate:r,pageTemplatePreviewStore:d}){const c=(0,l().v3)(),u=(0,l().Y0)(),m=(0,s().uB)(d,oe),v=(0,s().K8)((()=>m.state.navigatedRootId),[m]),g=x(),b=(0,s().K8)((()=>e&&(0,ee().f)({environment:c,store:e})),[c,e]),y=(0,J().x)();if((0,o.useEffect)((()=>{n&&!g&&p().D6({label:(0,ne.jsx)(S().sA,{defaultMessage:"Purchase is unavailable on this platform",id:"pageTemplatePreview.paidTemplate.message"}),durationMs:"keep"})}),[c,n,g,r]),e&&b){let o;return o=v?O().B.createChildStore(e,{table:F().ev,id:v}):e,(0,ne.jsx)("div",{style:t,children:(0,ne.jsx)(te().A,{store:o,isDefaultContainer:!0,droppable:!0,render:({selectableEvents:e,selectableHoverMenuOverlay:t})=>(0,ne.jsx)(X().H,{style:le(c),type:b,store:ae().A,preventType:y,...e,children:i?(0,ne.jsxs)("section",{inert:"",children:[t,(0,ne.jsx)(Q().Ay,{store:o,context:z().R.InAppTemplatePreview,paddingBottom:(0,Q().Wj)(u),disabled:a})]}):(0,ne.jsxs)(ne.Fragment,{children:[t,(0,ne.jsx)(Q().Ay,{store:o,context:z().R.InAppTemplatePreview,paddingBottom:(0,Q().Wj)(u),disabled:a})]})},o.id)},o.id)})}return(0,ne.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",...t},children:(0,ne.jsx)(f().A,{legacySize:Z().K})})}const de={width:"100%",flexGrow:1,flexShrink:1,display:"flex",flexDirection:"column",overflow:"hidden"};const ce=function(){const e=(0,l().v3)(),t=(0,s().uB)(void 0,D),i=(0,o.useCallback)((()=>fe(e,t)),[e,t]),d=(0,o.useCallback)((()=>(0,ne.jsx)(be,{templateRecordCacheStore:t})),[t]),c=(0,s().O$)(E().A),p=(0,s().O$)(n().AppStoreSidebarSpaceViewStore);return(0,o.useEffect)((()=>{c.open&&p&&a(547149).createAndCommit({userAction:"PageTemplateModal.willMountOrUpdate",environment:e,canUndo:!0,perform:e=>{B().setTemplateVisited({item:c.item,spaceViewStore:p,transaction:e})}})}),[p,e,c.item,c.open]),r().A.isMobile?(0,ne.jsx)(a(127833).zD,{open:c.open,render:d,forceFullScreenSlideUp:!0,onDismiss:i,popupType:a(30537).n.SlideUp}):null};function pe(){return new Promise(((e,t)=>{c().ui({message:(0,ne.jsx)(S().sA,{id:"pageTemplateModal.modifiedTemplateDialog.prompt",defaultMessage:"It looks like youâ€™ve modified the template. Would you like to save your edits?"}),showCancel:!1,keepFocus:!0,items:[{label:(0,ne.jsx)(S().sA,{id:"pageTemplateModal.modifiedTemplateDialog.saveButton.label",defaultMessage:"Save edits"}),onAccept:()=>{e(!0)}},{label:(0,ne.jsx)(S().sA,{id:"pageTemplateModal.modifiedTemplateDialog.discardEditsButton.label",defaultMessage:"Discard"}),color:"red",onAccept:()=>{e(!1)}}]})}))}function ue(e){B().close(e),C().xl()}function me({modalState:e,templateRecordCacheStore:t}){var a,i;const o=(0,s().uB)(t,D);return(0,ne.jsx)(re,{disablePointerEvents:e.disablePointerEvents,previewRootId:e.item.previewRootId,previewSpaceId:e.item.spaceId,isPaidTemplate:Boolean(null===(a=e.item.marketplaceTemplateMetadata)||void 0===a?void 0:a.isPaidTemplate),userHasAcquiredTemplate:Boolean(null===(i=e.item.marketplaceTemplateMetadata)||void 0===i?void 0:i.userHasAcquiredTemplate),style:de,templateRecordCacheStore:o,disabled:!0},e.item.previewRootId)}function ve(e,t,a,i){const{inMemoryRecordCache:o}=a.state,r=E().A.state,{sidebarSpaceViewStore:l,sidebarSpaceStore:s,mainEditorCurrentBlockStore:d}=n().default.state;if(r.open&&l&&s){const a=d&&d.isEmptyPage()?d:void 0,n=P().default.state.open&&P().default.state.targetStore&&P().default.state.targetStore.isEmptyPage()?P().default.state.targetStore:void 0;B().accept({environment:t,item:r.item,spaceStore:s,spaceViewStore:l,useRecordCache:e?o:void 0,initializeStore:r.createNewPage?void 0:a||n,isPrivate:r.isPrivate,acceptFrom:r.createNewPage?"sidebar":"newPage",isEmailShared:i})}}async function fe(e,t){const{inMemoryRecordCache:a}=t.state;if(p().N2(),a.appliedTransaction){await pe()?ve(!0,e,t):ue(e)}else ue(e)}async function ge(e,t,a){var i,o,n,r;const{inMemoryRecordCache:l}=t.state;if(l.appliedTransaction){return void ve(!!(await pe()),e,t)}const s=null===(i=E().A.state.item)||void 0===i||null===(i=i.marketplaceTemplateMetadata)||void 0===i?void 0:i.isPaidTemplate,d=null===(o=E().A.state.item)||void 0===o||null===(o=o.marketplaceTemplateMetadata)||void 0===o?void 0:o.marketplaceListingId,c=null===(n=E().A.state.item)||void 0===n||null===(n=n.marketplaceTemplateMetadata)||void 0===n?void 0:n.userHasAcquiredTemplate,p=null===(r=E().A.state.item)||void 0===r?void 0:r.id;if(E().A.state.open&&s&&d&&p&&!c)return M().A.setState({...M().A.state,from:"mobileApp",marketplaceListingId:d,templateId:p}),void E().A.setState({...E().A.state,isCheckout:!0});!c&&s||ve(!1,e,t,a)}function be({templateRecordCacheStore:e}){var t,a,r,c,u;const v=(0,l().v3)(),b=(0,S().tz)(),y=(0,d().DP)(),h=x(),A=(0,s().K8)((()=>{var e;return(null===(e=n().default.state)||void 0===e||null===(e=e.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.preferred_locale)||k().q}),[]),I=(0,s().K8)((()=>_().A.state.duplicationStatus),[]),C=(0,s().O$)(E().A),P=null===(t=C.item)||void 0===t||null===(t=t.marketplaceTemplateMetadata)||void 0===t?void 0:t.creator,B=null===(a=C.item)||void 0===a||null===(a=a.marketplaceTemplateMetadata)||void 0===a?void 0:a.emailCaptureType,U="duplicating"===I,D=Boolean(null===(r=C.item)||void 0===r||null===(r=r.marketplaceTemplateMetadata)||void 0===r?void 0:r.isPaidTemplate),V=null===(c=C.item)||void 0===c||null===(c=c.marketplaceTemplateMetadata)||void 0===c?void 0:c.paidTemplatePrice,z=Boolean(null===(u=C.item)||void 0===u||null===(u=u.marketplaceTemplateMetadata)||void 0===u?void 0:u.userHasAcquiredTemplate),L=(0,o.useCallback)((()=>{if("required"!==B&&"optional"!==B)return ge(v,e);j().A.open({creator:P,emailRequirement:B,onSubmit:async t=>{await ge(v,e,t)}})}),[v,B,P,e]),O=(0,o.useCallback)((()=>fe(v,e)),[v,e]),N=(0,o.useCallback)((()=>{p().N2(),E().A.state.open&&E().A.setState({...E().A.state,isCheckout:!1}),M().A.setState({...M().A.state,isModalOpen:!1,from:void 0,marketplaceListingId:void 0,templateId:void 0,creatorId:void 0,customerId:void 0})}),[]),$=(0,w().IT)(y,A);return C.open?(0,ne.jsx)(m().s,{title:C.isCheckout?(0,ne.jsx)(S().sA,{defaultMessage:"Complete checkout",id:"pageTemplateModal.mobileModal.checkoutTitle"}):void 0,left:C.isCheckout?(0,ne.jsx)(he,{handleClick:N}):(0,ne.jsx)(Se,{handleClick:O,style:{marginInlineStart:20}}),right:C.isLoading?(0,ne.jsx)(f().A,{style:{marginInlineEnd:40}}):C.isCheckout?null:(0,ne.jsx)(ye,{handleClick:L,isDisabled:U||D&&!h,label:z?(0,ne.jsx)(S().sA,{id:"inApp.marketplace.template.addAgain",defaultMessage:"Add again"}):D&&V?(0,ne.jsx)(S().sA,{id:"inApp.marketplace.template.buyTemplate",defaultMessage:"Buy for <money></money>",values:{money:()=>(0,ne.jsx)(g().v,{cost:{amount:100*V,currencyCode:"USD"},intl:b,trailingZeroDisplay:"auto"})}}):void 0}),shouldRenderLeftDirectly:!0,shouldRenderRightDirectly:!0,onCancel:O,disableHeaderShadow:!0,forceFullScreenSlideUp:!0,children:C.isCheckout?(0,ne.jsx)(i().Elements,{stripe:(0,R().getStripe)(),options:$,children:(0,ne.jsx)(T().l,{})}):(0,ne.jsx)(me,{templateRecordCacheStore:e,modalState:C})}):null}function ye({handleClick:e,isDisabled:t,label:a}){const i=(0,d().IS)((()=>({doneButton:{display:"flex",alignItems:"center",height:34,paddingInlineStart:14,paddingInlineEnd:14,marginInlineEnd:20,fontWeight:I().Wy.medium,color:t?A().Tj.text.secondary:A().Tj.text.primary,background:A().Tj.background.tertiaryTranslucent,borderRadius:17}})),[t]);return(0,ne.jsx)(u().Ay,{style:i.doneButton,onClick:e,disabled:t,children:a||(0,ne.jsx)(S().sA,{defaultMessage:"Use template",id:"pageTemplateModal.mobileModal.useTemplateButton.label"})})}function he({handleClick:e}){const t=(0,S().tz)(),a=(0,d().IS)((()=>({iconButton:{borderRadius:17,width:34,height:34,marginInlineStart:20}})),[]);return(0,ne.jsx)(v().A,{icon:b().$,style:a.iconButton,colorVariant:"primary",onClick:e,ariaLabel:t.formatMessage({defaultMessage:"Back",id:"pageTemplateModal.mobileModal.checkout.backButton.label"})})}function Se({handleClick:e,style:t,disabled:a}){const i=(0,S().tz)(),o={background:A().Tj.background.tertiaryTranslucent,borderRadius:17,width:34,height:34,...t};return(0,ne.jsx)(v().A,{disabled:a,icon:y().xMarkIcon,iconStyle:{width:h().Ev.default,height:h().Ev.default},style:o,colorVariant:"primary",onClick:e,ariaLabel:i.formatMessage({defaultMessage:"Close",id:"pageTemplateModal.mobileModal.closeButton.label"})})}},293821:(e,t,a)=>{a.d(t,{C:()=>i});const i=(0,a(340498).xh)("magnifyingGlass",{default:{loader:()=>a.e(42022).then(a.bind(a,207207))},small:{loader:()=>a.e(42022).then(a.bind(a,344417))},fill:{loader:()=>a.e(42022).then(a.bind(a,454803))},fillSmall:{loader:()=>a.e(42022).then(a.bind(a,555082))}},["magnifying","glass","search","zoom","explore"])},393284:(e,t,a)=>{a.d(t,{$Y:()=>p,Px:()=>c,Up:()=>s,dY:()=>d});a(898992),a(354520);var i=()=>a(726637),o=()=>a(609679),n=()=>a(836028),r=()=>a(427704),l=()=>a(939768);function s(e){const t=window.location.href;return l().O$(t,{tg:e.templateGalleryItem})}function d(e){let t;return e instanceof n().s?t=e.getBlockId():"type"in e?(e.type,t=e.template.rootId):t=e.rootId,t}function c(e){const t=o().locale&&"en-us"!==o().locale.toLocaleLowerCase()?`/${o().locale.toLowerCase()}`:"",a=void 0!==e?`${t}${r().JZ.templates}/${encodeURIComponent(e)}`:`${t}${r().JZ.templates}`;return`${i().A.domainBaseUrl}${a}`}function p(e){if(!e)return"";try{const a=JSON.parse(e);if("text"===a.content[0].content[0].nodeType){var t;const e=(null==a||null===(t=a.content)||void 0===t||null===(t=t[0])||void 0===t||null===(t=t.content)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.value)||"";return e.replace(/^(#{2,6})\s+/gm,"# ")}}catch(a){return""}}},459572:(e,t,a)=>{a.d(t,{A:()=>i});const i=new(a(150669).A)}}]);