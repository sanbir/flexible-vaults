"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[71381],{8364:(e,t,s)=>{s.d(t,{x:()=>L});s(944114),s(517642),s(658004),s(733853),s(845876),s(432475),s(515024),s(731698),s(898992),s(354520),s(581454),s(737550);var i=s(296540),n=()=>s(564884),o=()=>s(230711),a=()=>s(484714),r=()=>s(590526),d=()=>s(401497),l=()=>s(365917),c=()=>s(849255),u=()=>s(290247),p=()=>s(874832),g=()=>s(416783),m=()=>s(940148),h=()=>s(302501),f=()=>s(617871),S=()=>s(165358),y=()=>s(591779),b=()=>s(798880),x=()=>s(69708),v=()=>s(100622),w=()=>s(496603),A=()=>s(229833),j=()=>s(763824),M=()=>s(534177),k=()=>s(769864),C=()=>s(339907),I=()=>s(477293),_=()=>s(549200),T=()=>s(698415),P=()=>s(177711),R=s(474848);const D=25;var N=function(e){return e.Contact="contact",e.Loading="loading",e}(N||{});const B={id:"user",widthData:{width:30},headerTitle:(0,R.jsx)(x().sA,{id:"peopleSectionContactsTab.name",defaultMessage:"User"}),sortable:!0,renderCell:e=>{if(e.type===N.Loading)return(0,R.jsx)(s(116477).a,{});const t=e.email.length>30,i=()=>(0,R.jsx)(s(453697).A,{size:32,type:"avatar-name-email",...e.userStore?{userStore:e.userStore}:{avatar:{name:e.name,email:e.email,avatarUrl:e.profilePhoto}}});return t?(0,R.jsx)("div",{style:{display:"flex",alignItems:"center",gap:8},children:(0,R.jsx)(s(26697).m,{renderTooltip:()=>(0,R.jsx)("div",{children:e.email}),placement:"right",alignment:"center",render:t=>(0,R.jsx)("div",{"aria-label":e.email,...t,children:i()})})}):i()}},E={id:"teamspaces",widthData:{width:20},headerTitle:(0,R.jsx)(x().sA,{id:"peopleSectionContactsTab.teamspaces",defaultMessage:"Teamspaces"}),sortable:!1,renderCell:e=>{if(e.type===N.Loading)return(0,R.jsx)(p().P,{});const t=e.userId,i=e.spacePermissionGroupIds;return t&&i?(0,R.jsx)(s(377085).o,{userId:t,userPermissionGroupIds:i}):(0,R.jsx)(x().sA,{id:"peopleSectionContactsTab.teamspaces.none",defaultMessage:"None"})}};const O={id:"source",widthData:{width:10},headerTitle:(0,R.jsx)(x().sA,{id:"peopleSectionContactsTab.source",defaultMessage:"Source"}),sortable:!1,renderCell:e=>{if(e.type===N.Loading)return(0,R.jsx)(p().P,{});const{sourceDisplay:t,iconGroup:i}=function(e){switch(e){case"slack":return{sourceDisplay:"Slack",iconGroup:C().jJ};case"google":return{sourceDisplay:"Google",iconGroup:C().mt};case"microsoft":return{sourceDisplay:"Microsoft",iconGroup:C().gs};case"guest":return{sourceDisplay:"Guest",iconGroup:void 0};default:return{sourceDisplay:e,iconGroup:void 0}}}(e.source);return(0,R.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:4},children:[i?(0,R.jsx)(s(265060).Q,{style:{width:16,height:16},iconGroup:i,variantName:"default"}):void 0,t]})}},q={id:"role",widthData:{width:40,minWidth:100},headerTitle:(0,R.jsx)(x().sA,{id:"peopleSectionContactsTab.role",defaultMessage:"Role"}),sortable:!1,renderCell:e=>{if(e.type===N.Loading)return(0,R.jsx)(p().P,{});if(e.spaceMembershipType){var t;if("page_guest"===e.spaceMembershipType&&null!==(t=e.userStore)&&void 0!==t&&t.getOnboardingCompleted())return(0,R.jsx)(x().sA,{id:"peopleSectionContactsTab.role.guest",defaultMessage:"Guest"});if("none"!==e.spaceMembershipType){const{label:t}=(0,s(910322).BL)({membershipType:e.spaceMembershipType,isRemovable:!1,isCurrentUser:!1});return(0,R.jsx)(x().sA,{...t})}}return e.isInvited?(0,R.jsx)(x().sA,{id:"peopleSectionContactsTab.role.invited",defaultMessage:"Invited"}):(0,R.jsx)(x().sA,{id:"peopleSectionContactsTab.role.not_invited",defaultMessage:"Not invited"})}},U=[...Array(10)].map(((e,t)=>({type:N.Loading,id:`loading-${t}`,isClickable:!1})));function L(e){const t=(0,a().v3)(),{spaceStore:s}=e,[p,C]=(0,i.useState)(!1),[L,V]=(0,i.useState)({column:B,sortAscending:!0}),[F,z]=(0,i.useState)([]),[G,K]=(0,i.useState)({contacts:[],invites:[]}),[W,H]=(0,i.useState)(!0),{googleContactsAuthentications:$,slackAuthentications:Y,microsoftContactsAuthentications:Q}=(0,r().K8)((()=>({googleContactsAuthentications:l().A.externalAuthentications.state.filter((e=>e.integration_id===f().E8)),slackAuthentications:l().A.completeSlackAuthentications.state,microsoftContactsAuthentications:l().A.externalAuthentications.state.filter((e=>e.integration_id===f().LF))})),[]),Z=(0,r().K8)((()=>P().A.getState().searchQuery),[]),[X,J]=(0,i.useState)(0),ee=(0,y().lW)(Z,250,((e,t)=>e===t));(0,i.useEffect)((()=>{J(0),z([])}),[ee]),(0,i.useEffect)((()=>{!async function(){if(!s)return;const e=[...$.map((e=>({botId:e.id,importContactType:"google"}))),...Y.map((e=>({botId:e.id,importContactType:"slack"}))),...Q.map((e=>({botId:e.id,importContactType:"microsoft"})))];e.length>0&&await(0,_().b)({bots:e,spaceId:s.id,environment:t}),C(!0)}()}),[t,s,$,Y,Q]),(0,i.useEffect)((()=>{!async function(){var e;if(H(!0),!s||!p)return p&&H(!1),{contacts:[],invites:[]};const i=[],n=[],o=await k().callApi({eventName:"searchContacts",environment:t,data:{spaceId:s.id,importContactType:"all",includeUserId:!0,includeNonNotionUsers:!0,query:ee}}).catch((e=>{S().log({level:"error",from:"PeopleSectionContactsTab",type:"searchContacts",error:(0,A().convertErrorToLog)(e)})}));if("success"===(null==o?void 0:o.type)&&null!==(e=o.data)&&void 0!==e&&e.contacts){const{column:e,sortAscending:t}=L,s=(0,w().Ul)(o.data.contacts,(s=>"source"===e.id?t?s.type:`z${s.type}`:"user"===e.id?t?s.name:`z${s.name}`:""));i.push(...s)}if(i.length>0){var a;const e=await k().callApi({eventName:"getInvitesForInvitees",environment:t,data:{spaceId:s.id,inviteeIds:i.map((e=>e.user_id)).filter(M().O9)}}).catch((e=>{S().log({level:"error",from:"PeopleSectionContactsTab",type:"getInvitesForInvitees",error:(0,A().convertErrorToLog)(e)})}));"success"===(null==e?void 0:e.type)&&null!==(a=e.data)&&void 0!==a&&a.invites&&n.push(...e.data.invites)}const r={contacts:i,invites:n};K(r),0===r.contacts.length&&0===r.invites.length&&H(!1)}()}),[t,s,p,L,Y,ee,$]),(0,i.useEffect)((()=>{if(!G.contacts.length)return;(async()=>{H(!0);const e=G.contacts.slice(X*D,(X+1)*D),i=await(0,j().lX)(e,D,(async(e,i)=>{let n,a,r,d,l=!1,p=new Set;var g,m,h;e.user_id&&(n=new(c().L)(t,{table:b().oo,id:e.user_id}),a=(0,o().dp)(s,e.user_id),r=null===(g=a)||void 0===g?void 0:g.getMembershipTypeAsRoleOrNone(),d=null===(m=a)||void 0===m?void 0:m.getMembershipType(),l=G.invites.some((t=>t.invitee_id===e.user_id)),p=u()._.getSpacePermissionGroupIds({userId:e.user_id,spaceId:s.id}));n&&await(null===(h=n)||void 0===h?void 0:h.waitUntil((()=>{var e,t;return(null===(e=n)||void 0===e?void 0:e.isDefined())&&(null===(t=n)||void 0===t?void 0:t.isReady())})));return{id:`${e.type}-${e.email}`,email:e.email,name:e.name||e.email,source:e.type,userId:e.user_id,profilePhoto:e.profile_photo,isClickable:!1,spaceStore:s,type:N.Contact,userStore:n,spaceRole:r,spaceMembershipType:d,isInvited:l,spacePermissionGroupIds:p}}));z((e=>{if(0===X)return i;const t=new Set(e.map((e=>e.id))),s=i.filter((e=>!t.has(e.id)));return[...e,...s]})),H(!1)})()}),[G,X,s,t]);const te=(0,i.useCallback)((e=>{V(e),z((t=>{const{column:s,sortAscending:i}=e;return(0,w().Ul)(t,(e=>"source"===s.id?i?e.source:`z${e.source}`:"user"===s.id?i?e.name:`z${e.name}`:""))}))}),[]),se=(0,r().K8)((()=>s.isTeamsEnabled()),[s]),ie=(0,i.useMemo)((()=>se?[B,E,q,O]:[B,q,O]),[se]),ne=(0,d().IS)((()=>({titleContainer:{display:"flex",alignItems:"center",gap:6,alignSelf:"stretch",fontSize:"14px",fontStyle:"normal",fontWeight:510,minHeight:30,paddingTop:10},titleNumber:{color:v().Tj.text.tertiary},emptyMessage:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",borderBottom:`1px solid ${v().Tj.border.primary}`,color:v().Tj.text.secondary,fontSize:14,fontWeight:400,textAlign:"center"},connectLink:{textDecoration:"underline",display:"inline-block",margin:"0 4px"}})),[]),oe="control"!==(0,I().r)("microsoft_contacts_import"),ae=(0,i.useCallback)((e=>(0,R.jsx)(g().V,{style:ne.connectLink,onClick:()=>{(0,n().u)({environment:t,event:{eventName:"open_import_contacts_dropdown",eventProperties:{source:"contacts_tab_empty_state"}}}),T().F.openImportDropdown({shouldAddMembers:!1})},children:e})),[t,ne.connectLink]),re=(0,i.useCallback)((()=>{J((e=>e+1))}),[]),de=(X+1)*D<G.contacts.length,le=(0,i.useMemo)((()=>W&&0===F.length?U:F),[W,F]),ce=(0,i.useMemo)((()=>(0,m().rC)({columnRenderInfo:ie,containerMarginTop:0})),[ie]);return(0,R.jsx)("div",{children:(0,R.jsx)(m().WE,{allowHorizontalScroll:!0,setStickyHeaderRow:!0,columnRenderInfo:ie,rows:le,styles:ce,showRowBorders:!0,hideHeaderRowPadding:!0,sortState:L,onSortStateChanged:te,renderNoRowsComponent:()=>(0,R.jsx)(h().A,{isSmall:!0,style:ne.emptyMessage,children:oe?(0,R.jsx)(x().sA,{id:"peopleSectionContactsTab.empty.microsoftEnabled",defaultMessage:"No contacts found. <connectlink>Connect your accounts</connectlink> to import contacts.",values:{connectlink:ae}}):(0,R.jsx)(x().sA,{id:"peopleSectionContactsTab.empty",defaultMessage:"No contacts found. <connectlink>Connect your Google or Slack account</connectlink> to import contacts.",values:{connectlink:ae}})}),loadMoreMethod:{type:"button",onLoadMore:re,hasNextPage:de}})})}},14321:(e,t,s)=>{s.r(t),s.d(t,{iconDefinition:()=>i,personKeyFillSmallIcon:()=>n});s(296540);const i={viewBox:"0 0 16 16",fittedViewBox:"2.82 1.77 12.31 13.96",svg:(0,s(474848).jsx)("path",{d:"M8 1.775c-.947 0-1.717.392-2.237 1.04-.508.633-.747 1.47-.747 2.338s.239 1.704.747 2.337c.52.648 1.29 1.04 2.237 1.04s1.717-.392 2.237-1.04c.508-.633.748-1.47.748-2.337 0-.869-.24-1.705-.748-2.338-.52-.648-1.29-1.04-2.237-1.04m0 7.403c-2.197 0-4.166 1.07-5.007 2.713a1.48 1.48 0 0 0 .2 1.676c.356.414.91.658 1.487.658h6.053v-1.44a3.42 3.42 0 0 1-1.115-3.407A6.6 6.6 0 0 0 8 9.178m7.125.997c0 .854-.492 1.593-1.208 1.949v1.072l-.725.846.725.845-.967.846-.967-.846v-2.763a2.175 2.175 0 1 1 3.142-1.949m-1.617-.483a.558.558 0 1 0-1.116 0 .558.558 0 0 0 1.116 0"})},n=(0,s(340498).wt)("personKeyFillSmall",i,"fillSmall")},26440:(e,t,s)=>{s.d(t,{w:()=>o});s(296540);var i=s(474848);const n={viewBox:"0 0 20 20",fittedViewBox:"0.12 2.37 17.51 15.26",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M3.442 13.102a.625.625 0 0 1-.884 0L.304 10.848a.625.625 0 0 1 .884-.884l1.187 1.187V10a7.625 7.625 0 1 1 2.303 5.46.625.625 0 1 1 .872-.895A6.375 6.375 0 1 0 3.625 10v1.151l1.187-1.187a.625.625 0 1 1 .884.884z"}),(0,i.jsx)("path",{d:"M9.375 5.725a.625.625 0 0 1 1.25 0v3.65H13.6a.625.625 0 0 1 0 1.25H10A.625.625 0 0 1 9.375 10z"})]})},o=(0,s(340498).wt)("clockArrowBack",n,"default")},30580:(e,t,s)=>{s.d(t,{Y:()=>i,b:()=>n});s(581454);class i extends(()=>s(757695))().Store{getInitialState(){return{step:"backupCodesUninitialized"}}}class n extends(()=>s(658921))()._{constructor(e,t){super(e,"backupCodes"),this.service=void 0,this.service=t}backupCodesInitialSetup(e){if(!this.checkStep("backupCodesUninitialized"))return;const{onLoadingComplete:t,onComplete:s}=e;this.store.setState({step:"backupCodesLoading"}),this.doCreateBackupCodes({forceRecreate:!1,onComplete:s,onLoadingComplete:t}).catch(this.handleUnexpectedError)}backupCodesShowCreate(){this.checkStep("backupCodesUninitialized")&&this.store.setState({step:"backupCodesRegenerateCodes"})}backupCodesRegenerateCodes(){this.checkStep("backupCodesRegenerateCodes")&&(this.store.setState({step:"backupCodesRegenerateCodes",isLoading:!0}),this.doCreateBackupCodes({forceRecreate:!0,onComplete:()=>{},onLoadingComplete:()=>{}}).catch(this.handleUnexpectedError))}exit(){this.store.setState({step:"backupCodesUninitialized"})}async doCreateBackupCodes(e){const{forceRecreate:t,onComplete:i,onLoadingComplete:n}=e,o=await this.withStep(["backupCodesLoading","backupCodesRegenerateCodes"],(()=>this.service.createBackupCodes(t)));if(!o)return;const{result:a}=o;if("already-exists"===a.status)i();else{const e=function(e){const t=s(675133).A.getIntl(),i=t.formatMessage({id:"mfa.backupCodes.downloadableTextFile.title",defaultMessage:"Notion Backup Codes"}),n=t.formatMessage({id:"mfa.backupCodes.downloadableTextFile.createdAt",defaultMessage:"Created at {createdAt}"},{createdAt:`${new Date}`}),o=t.formatMessage({id:"mfa.backupCodes.downloadableTextFile.warningMessage",defaultMessage:"Please store these in a secure location and mark off codes as they are used."}),a=`${i}\n${n}\n\n${e.map(s(219505).H).join("\n")}\n\n${o}\n`;return encodeURIComponent(a)}(a.backupCodes);this.store.setState({step:"backupCodesShowCodes",backupCodes:a.backupCodes,mfaSettingId:a.mfaSettingId,backupCodesFile:e}),n()}}}},43016:(e,t,s)=>{s.d(t,{z:()=>i});const i=(0,s(340498).xh)("microsoft",{default:{loader:()=>s.e(72423).then(s.bind(s,12678))}})},84161:(e,t,s)=>{s.d(t,{S:()=>c});s(944114),s(296540);var i=()=>s(529099),n=()=>s(26440),o=()=>s(133043),a=()=>s(920495),r=()=>s(69708),d=()=>s(957606),l=s(474848);function c(){const e=[];return(0,d().$H)()&&e.push({key:"personal_home",label:(0,l.jsx)(r().sA,{id:"pageOnAppStoreSetting.home.label",defaultMessage:"Home"}),icon:o().P}),e.push({key:"last_visited_page",label:(0,l.jsx)(r().sA,{id:"pageOnAppStoreSetting.lastVisitedPage.label",defaultMessage:"Last visited page"}),icon:n().w},{key:"first_page",label:(0,l.jsx)(r().sA,{id:"pageOnAppStoreSetting.firstPage.label",defaultMessage:"Top page in sidebar"}),icon:a().pageIcon},{key:"notion_ai",label:(0,l.jsx)(r().sA,{id:"pageOnAppStoreSetting.notionAi.label",defaultMessage:"Notion AI"}),icon:i().aiFaceIcon}),e}},109113:(e,t,s)=>{s.d(t,{H:()=>n});var i=()=>s(367049);function n(){return(0,i().V)()}},124617:(e,t,s)=>{s.d(t,{u:()=>n});var i=()=>s(314529);function n(e,t){const s=t.name,n="args"in t?t.args:void 0;(0,i().DO_NOT_USE_trackLegacy)(e,s,n)}},143066:(e,t,s)=>{s.d(t,{w:()=>_s,Q:()=>hs});s(944114),s(898992),s(354520),s(672577),s(581454);var i=s(296540),n=()=>s(664594),o=()=>s(230711),a=()=>s(484714),r=()=>s(590526),d=()=>s(401497),l=()=>s(792057),c=()=>s(849255),u=()=>s(741615),p=()=>s(983610),g=()=>s(718827),m=()=>s(250910),h=()=>s(388926),f=()=>s(396896),S=()=>s(807449),y=()=>s(695115),b=()=>s(416783),x=()=>s(31511),v=()=>s(98126),w=()=>s(546926),A=()=>s(406094),j=()=>s(631524),M=()=>s(160432),k=()=>s(493552),C=()=>s(26697),I=()=>s(302501),_=()=>s(890492),T=()=>s(81068),P=()=>s(663639),R=()=>s(736847),D=()=>s(187174),N=()=>s(383567),B=()=>s(906380),E=()=>s(911259),O=()=>s(126617),q=()=>s(35588),U=()=>s(344417),L=()=>s(920495),V=()=>s(888867),F=()=>s(922189),z=()=>s(252953),G=()=>s(792071),K=()=>s(437607),W=()=>s(848538),H=()=>s(798880),$=()=>s(795523),Y=()=>s(84262),Q=()=>s(706021),Z=()=>s(69708),X=()=>s(100622),J=()=>s(778078),ee=()=>s(496603),te=()=>s(534177),se=()=>s(284371),ie=()=>s(701763),ne=()=>s(769864),oe=()=>s(496414),ae=()=>s(209660),re=()=>s(205224),de=()=>s(380030);var le=()=>s(179030),ce=()=>s(404905),ue=()=>s(668250),pe=()=>s(698449),ge=()=>s(169626),me=()=>s(187820),he=()=>s(297872),fe=s(474848);function Se({spaceStore:e,groupIds:t,onGroupClick:s}){const i=(0,Z().tz)(),n=(0,d().IS)((()=>({title:{color:0===t.length?X().Tj.text.tertiary:void 0},untitled:{color:X().Tj.text.tertiary}})),[t]),o=(0,r().K8)((()=>t.map((t=>({key:t,render:s=>{const o=ge().h.getGroupData(t);if(!o)return null;const a=pe().Pf({intl:i,groupName:o.group.name});return(0,fe.jsx)(T().A,{icon:(0,fe.jsx)(me().B6,{disabled:!0,icon:o.group.icon&&e?{pointer:e.pointer,icon:o.group.icon}:void 0,size:18,isEmptyPage:!1,title:a,defaultIcon:(0,fe.jsx)(S().I,{icon:ue().R,size:18,colorVariant:"secondary"})}),title:(0,fe.jsx)(I().A,{style:o.group.name?void 0:n.untitled,children:(0,fe.jsx)(ce().j,{style:{maxWidth:200},children:a})}),caption:(0,fe.jsx)(Z().sA,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"groupsDropdownForMember.numMembers",values:{numMembers:o.memberCount}}),inline:!0,...s})},action:s})))),[t,i,s,e,n.untitled]);return(0,fe.jsx)(he().ED,{title:(0,fe.jsx)(I().A,{style:n.title,children:t&&0!==t.length?(0,fe.jsx)(Z().sA,{id:"groupsDropdownForMember.groupsCount.label",defaultMessage:"{numberOfGroups, plural, one {{numberOfGroups} group} other {{numberOfGroups} groups}}",values:{numberOfGroups:t.length}}):(0,fe.jsx)(Z().sA,{id:"groupsDropdownForMember.groupsCountNone.label",defaultMessage:"None"})}),items:o,disabled:!t||0===t.length})}var ye=()=>s(874099),be=()=>s(907258),xe=()=>s(699143),ve=()=>s(733816),we=()=>s(718191),Ae=()=>s(271476),je=()=>s(132813),Me=()=>s(547149),ke=()=>s(8178),Ce=()=>s(508490),Ie=()=>s(709438),_e=()=>s(317182),Te=()=>s(128933),Pe=()=>s(869190),Re=()=>s(604995),De=()=>s(842599),Ne=()=>s(416504),Be=()=>s(854705),Ee=()=>s(158115),Oe=()=>s(736414),qe=()=>s(746970),Ue=()=>s(994006),Le=()=>s(453697),Ve=()=>s(312788),Fe=()=>s(295633),ze=()=>s(996332),Ge=()=>s(584262),Ke=()=>s(433847),We=()=>s(179034),He=()=>s(492414),$e=()=>s(16006);function Ye(e){const{navigate:t}=(0,i.useContext)(Ve().E),{pageAndRole:s,environment:n,intl:o}=e,a=(0,d().IS)((()=>({title:{marginInlineStart:2},role:{marginInlineStart:4},linkContainer:{display:"inline-flex",alignItems:"center"}})),[]),l=(0,r().K8)((()=>new(Fe().B)(n,{table:We().ev,id:s.id})),[n,s.id]),c=(0,r().K8)((()=>{var e;return null===(e=l.getModel())||void 0===e?void 0:e.getRenderIcon({getRecordModel:l.getRecordModel})}),[l]),u=(0,r().K8)((()=>(0,me().Te)(l)),[l]),p=(0,r().K8)((()=>(0,He().Ay)({store:l,pageVisitSource:Ge().y8.LinkInPage})),[l]);return(0,fe.jsxs)(ze().Q,{style:a.linkContainer,onClick:()=>{t({environment:n,url:p,openInNew:"tab"})},children:[(0,fe.jsx)(me().B6,{icon:c,iconRecordCategory:u,size:16,isEmptyPage:!1,disabled:!0}),(0,fe.jsx)("b",{children:(0,fe.jsx)($e().A,{style:a.title,store:l})}),(0,fe.jsx)(I().A,{style:a.role,isSecondaryColor:!0,children:`(${o.formatMessage((0,Ke().an)(s.role,We().ev)).toLocaleLowerCase()})`})]})}function Qe(e){const{store:t,request:s}=e,{forActor:n,accessRequest:o,createdByActorsWithReason:l}=s,c=(0,a().v3)(),u=(0,d().IS)((()=>({actionButtons:{display:"flex",alignItems:"center",gap:12},requestMetadata:{minWidth:0,marginInlineStart:10,marginInlineEnd:6},tooltip:{marginBottom:2},tooltipHeader:{color:X().Tj.text.inverseSecondary,fontSize:10,textTransform:"uppercase",letterSpacing:"0.015em",marginBottom:2},requestBody:{marginInlineStart:38,marginTop:8}})),[]),p=(0,Z().tz)(),g=(0,r().K8)((()=>n.__IM_SORRY__getValue()),[n]),m=(0,ee().hS)(l.map((({actor:e})=>e)),(e=>e.id)),h=(0,r().K8)((()=>o.getType()),[o]),f=(0,r().K8)((()=>s.createdByActorsWithReason.filter((({reason:e})=>Boolean(e))).map((e=>`${e.actor.getDisplayName(p)} · ${e.reason}`))),[s,p]),S=(0,r().K8)((()=>{var e;return o.isGuestInviteRequest()||o.isRestrictedMemberInviteRequest()?null===(e=o.getAttributes())||void 0===e||null===(e=e.permission_records_and_roles)||void 0===e?void 0:e[0]:void 0}),[o]),y=(0,r().K8)((()=>{if(!o.isGuestInviteRequest())return;const e=(0,De().qh)(n.email),s=e&&(0,De().zN)(e);return s?t.getEmailDomains().find((e=>e===s)):void 0}),[o,n,t]),b=(0,r().K8)((()=>o.created_time),[o]),x=(0,i.useCallback)((async()=>{if(o.isGuestInviteRequest()){(await qe().aV({environment:c,requests:[o],status:"approved",from:"requests_center"})).failedUsers.length>0?Te().D6({label:(0,fe.jsx)(Z().sA,{id:"spaceSettingsRequestRow.requestRowActions.toast.approveGuestInvite.failure",defaultMessage:"Failed to invite {actorEmail} as a guest",values:{actorEmail:n.email}})}):Te().D6({label:(0,fe.jsx)(Z().sA,{id:"spaceSettingsRequestRow.requestRowActions.toast.approveGuestInvite.success",defaultMessage:"Invited {actorEmail} as guest",values:{actorEmail:n.email}})})}else if(o.isRestrictedMemberInviteRequest()){(await qe().xR({environment:c,requests:[o],status:"approved",from:"requests_center"})).failedUsers.length>0?Te().D6({label:(0,fe.jsx)(Z().sA,{id:"spaceSettingsRequestRow.requestRowActions.toast.approveRestrictedMemberInvite.failure",defaultMessage:"Failed to grant access to {actorEmail}",values:{actorEmail:n.email}})}):Te().D6({label:(0,fe.jsx)(Z().sA,{id:"spaceSettingsRequestRow.requestRowActions.toast.approveRestrictedMemberInvite.success",defaultMessage:"Granted access to {actorEmail}",values:{actorEmail:n.email}})})}else if(o.isSpaceMembershipRequest()){(await qe().p4({environment:c,store:t,requests:[o],status:"approved",from:"requests_center"})).failedUsers.length>0?Te().D6({label:(0,fe.jsx)(Z().sA,{id:"spaceSettingsRequestRow.requestRowActions.toast.approveSpaceMembership.failure",defaultMessage:"Failed to add {actorEmail} as a member",values:{actorEmail:n.email}})}):Te().D6({label:(0,fe.jsx)(Z().sA,{id:"spaceSettingsRequestRow.requestRowActions.toast.approveSpaceMembership.success",defaultMessage:"Added {actorEmail} as a member",values:{actorEmail:n.email}})})}}),[o,c,n,t]),v=(0,i.useCallback)((()=>{o.isGuestInviteRequest()?qe().aV({environment:c,requests:[o],status:"rejected",from:"requests_center"}):o.isRestrictedMemberInviteRequest()?qe().xR({environment:c,requests:[o],status:"rejected",from:"requests_center"}):o.isSpaceMembershipRequest()&&qe().p4({environment:c,store:t,requests:[o],status:"rejected",from:"requests_center"})}),[o,c,t]);if(!s||!n||!g)return null;const w=Re().KQ(b,(0,Ne().P)()),M=(0,Pe().ZF)({value:w,date_format:"relative",userTimeZone:(0,Ne().P)(),intl:p,allowRelativeDates:!0}),k=f.length>0||(0,te().O9)(S);return(0,fe.jsxs)("div",{style:{width:"100%"},children:[(0,fe.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,fe.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,fe.jsx)(et,{forActor:g,type:h}),(0,fe.jsxs)("div",{style:u.requestMetadata,children:[(0,fe.jsx)(Je,{type:h,forActor:g}),(0,fe.jsxs)(I().A,{isSmall:!0,children:[(0,fe.jsx)(C().m,{renderTooltip:()=>(0,fe.jsxs)("div",{style:u.tooltip,children:[(0,fe.jsx)(I().A,{style:u.tooltipHeader,children:(0,fe.jsx)(Z().sA,{defaultMessage:"Requested by",id:"spaceSettingsRequests.requestRowAction.requestedByMoreThanTwo.tooltip"})}),m.map((e=>(0,fe.jsx)(st,{actor:e},e.id)))]}),render:e=>(0,fe.jsx)("span",{...e,children:(0,fe.jsx)(tt,{request:s,createdByActors:m})}),disableTooltip:0===m.length})," · ",M]})]})]}),(0,fe.jsxs)("div",{style:u.actionButtons,children:[(0,fe.jsx)(j().p,{colorPalette:"gray",onClick:v,children:(0,fe.jsx)(Z().sA,{defaultMessage:"Decline",id:"spaceSettingsRequests.requestRowAction.declineButton.label"})}),(0,fe.jsx)(C().m,{render:e=>(0,fe.jsx)(A().A,{size:"lg",colorPalette:"blue",onClick:x,...e,children:(0,fe.jsx)(Z().sA,{defaultMessage:"Approve",id:"spaceSettingsRequests.requestRowAction.acceptButton.label"})}),renderTooltip:()=>(0,fe.jsx)("div",{style:{width:300},children:(0,fe.jsx)(Z().sA,{defaultMessage:"This user will automatically be added to the workspace when approved since {domain} is an allowed email domain",id:"spaceSettingsRequests.requestRowAction.allowedEmailDomain.tooltip",values:{domain:y}})}),disableTooltip:!y,textWrap:!0,placement:"bottom"})]})]}),k?(0,fe.jsxs)("div",{style:u.requestBody,children:[S?(0,fe.jsx)(Ye,{pageAndRole:S,environment:c,intl:p}):void 0,f.length>0?(0,fe.jsx)(Xe,{reasonMessages:f}):void 0]}):void 0]})}function Ze(e){return(0,fe.jsx)("b",{children:e})}function Xe(e){const{reasonMessages:t}=e,[s,n]=(0,i.useState)(!1),o=(0,d().IS)((()=>({viewReasonsToggle:{paddingInlineStart:2,paddingInlineEnd:2,borderRadius:2,display:"inline-flex",alignItems:"center",gap:2},reasonMessageBody:{marginTop:2}})),[]);return(0,fe.jsxs)(fe.Fragment,{children:[(0,fe.jsxs)(g().Ay,{style:o.viewReasonsToggle,onClick:()=>n(!s),children:[(0,fe.jsx)(I().A,{isSmall:!0,children:(0,fe.jsx)(Z().sA,{id:"spaceSettingsRequests.requestRowAction.viewReasonsButton.label",defaultMessage:"View reasons"})}),s?(0,fe.jsx)(S().I,{icon:Be().arrowChevronSingleDownFillSmallIcon,size:"xs",colorVariant:"tertiary"}):(0,fe.jsx)(S().I,{icon:Ee().arrowChevronSingleRightFillSmallIcon,size:"xs",colorVariant:"tertiary"})]}),s?(0,fe.jsx)("div",{style:o.reasonMessageBody,children:t.map(((e,t)=>(0,fe.jsx)("div",{children:e},t)))}):void 0]})}function Je(e){const{forActor:t,type:s}=e,i=(0,d().IS)((()=>({title:{display:"flex",gap:4},semibold:{fontWeight:se().Wy.semibold}})),[]),n="guest_invite_request"===s?(0,fe.jsx)(Z().sA,{id:"spaceSettingsRequests.requestRow.title.guestInviteRequest",defaultMessage:"Invite {actorEmail} as a guest",values:{actorEmail:(0,fe.jsx)("span",{style:i.semibold,children:t.email})}}):"restricted_member_invite_request"===s?(0,fe.jsx)(Z().sA,{id:"spaceSettingsRequests.requestRow.title.restrictedMemberInviteRequest",defaultMessage:"Allow {actorEmail} to view page",values:{actorEmail:(0,fe.jsx)("span",{style:i.semibold,children:t.email})}}):(0,fe.jsx)(Z().sA,{id:"spaceSettingsRequests.requestRow.title.membershipRequest",defaultMessage:"Add {actorEmail} as a member",values:{actorEmail:(0,fe.jsx)("span",{style:i.semibold,children:t.email})}});return(0,fe.jsx)("div",{style:i.title,children:(0,fe.jsx)(I().A,{className:"notranslate",children:n})})}function et(e){const{type:t,forActor:s}=e,i=(0,d().IS)((()=>({avatarWrapper:{borderRadius:"100%",background:X().Tj.palette.gray[75],width:28,height:28,display:"flex",alignItems:"center",justifyContent:"center"}})),[]);return"guest_invite_request"===t||"restricted_member_invite_request"===t?(0,fe.jsx)("div",{style:i.avatarWrapper,children:(0,fe.jsx)(S().I,{icon:Oe().inviteMemberFillSmallIcon,size:"sm",colorVariant:"secondary"})}):(0,fe.jsx)(Le().A,{userValue:s,size:28,borderStyle:"dashed"})}function tt(e){const{createdByActors:t,request:s}=e,i=(0,Z().tz)(),n=(0,r().K8)((()=>t.filter((e=>e.email!==s.forActor.email))),[s,t]),o=(0,r().K8)((()=>{var e;return null===(e=t[0])||void 0===e?void 0:e.getDisplayName(i)}),[t,i]),a=(0,r().K8)((()=>{var e;return null===(e=t[1])||void 0===e?void 0:e.getDisplayName(i)}),[t,i]),d=(0,r().K8)((()=>{var e;return null===(e=n[0])||void 0===e?void 0:e.getDisplayName(i)}),[n,i]),l=n.length!==t.length;return 0===t.length?(0,fe.jsx)(Z().sA,{defaultMessage:"Requested by <b>{actorName}</b>",id:"spaceSettingsRequests.requestRowAction.requestedBySingular.v2",values:{actorName:i.formatMessage(G().Fvx.messages.deletedUser),b:Ze}}):1===t.length?l?(0,fe.jsx)(Z().sA,{defaultMessage:"Guest self request",id:"spaceSettingsRequests.requestRowAction.requestedBySingularGuestSelfRequest"}):(0,fe.jsx)(Z().sA,{defaultMessage:"Requested by <b>{actorName}</b>",id:"spaceSettingsRequests.requestRowAction.requestedBySingular.v2",values:{actorName:o,b:Ze}}):l?(0,fe.jsx)(Z().sA,{defaultMessage:"{numberOfOtherActors, plural, one {Guest self request and requested by <b>{secondActorName}</b>} other {Guest self request and requested by <b>{numberOfOtherActors}</b> more}}",id:"spaceSettingsRequests.requestRowAction.requestedByPluralIncludingGuestSelfRequest.v2",values:{secondActorName:d,numberOfOtherActors:n.length,b:Ze}}):(0,fe.jsx)(Z().sA,{defaultMessage:"{numberOfOtherActors, plural, one {Requested by {firstActorName} and {secondActorName}} other {Requested by {firstActorName} and {numberOfOtherActors} more}}",id:"spaceSettingsRequests.requestRowAction.requestedByPlural.v2",values:{firstActorName:o,secondActorName:a,numberOfOtherActors:t.length-1}})}function st({actor:e}){const t=(0,a().v3)(),s=(0,d().IS)((()=>({component:{display:"flex",justifyContent:"space-between",marginBottom:4},email:{marginInlineStart:5}})),[]),i=(0,r().K8)((()=>e.email),[e]),n=new(c().L)(t,e.pointer);return(0,fe.jsxs)("div",{style:s.component,children:[(0,fe.jsx)(Ue().A,{avatarSize:18,userStore:n,hasPersonHoverCard:!1}),(0,fe.jsx)("div",{style:s.email,children:i})]},e.id)}function it(e){const{spaceStore:t,accessRequestRenderValues:s,lastOpenedRequestCenterTime:i}=e,n=(0,r().K8)((()=>s.filter((e=>"pending"===e.accessRequest.status)).sort(((e,t)=>t.accessRequest.created_time-e.accessRequest.created_time))),[s]),o=(0,d().IS)((()=>({requestColumn:{width:"100%"},zeroStateContainer:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:6,padding:40,color:X().Tj.text.secondary,borderStyle:"solid",borderColor:X().Tj.border.secondaryTranslucent,borderWidth:1,borderRadius:4}})),[]),a={key:"request",header:void 0,style:o.requestColumn};return 0===n.length?(0,fe.jsxs)("div",{style:o.zeroStateContainer,children:[(0,fe.jsx)(S().I,{icon:ve().o,colorPalette:"gray",colorVariant:"secondary"}),(0,fe.jsx)(Z().sA,{id:"spaceSettingsRequests.emptyRequests.message",defaultMessage:"No invite requests yet"})]}):(0,fe.jsx)(_e().A,{hideHeader:!0,columns:[a],rows:n.map(((e,s)=>({key:`request${s.toString()}`,columns:[(0,fe.jsx)(nt,{request:e,lastOpenedRequestCenterTime:i,spaceStore:t},e.accessRequest.id)]})))})}function nt({request:e,lastOpenedRequestCenterTime:t,spaceStore:s}){const i=(0,r().K8)((()=>t<e.accessRequest.created_time),[t,e.accessRequest]);return(0,fe.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[i?(0,fe.jsx)("div",{style:{marginInlineStart:-18,marginInlineEnd:10},children:(0,fe.jsx)(Ie().m,{size:8})}):void 0,(0,fe.jsx)(Qe,{store:s,request:e})]},e.accessRequest.id)}function ot(e){const{spaceStore:t,accessRequestRenderValues:s}=e,n=(0,a().v3)(),[o,l]=(0,i.useState)(Date.now()),c=(0,r().uB)(void 0,je().A),{organizationOverrides:u}=(0,Ae().n)({spaceId:t.id}),p=(0,r().K8)((()=>s?s.filter((e=>"pending"===e.accessRequest.status)).length:0),[s]),g=(0,r().K8)((()=>t.canAdmin()),[t]),m=(0,d().IS)((()=>({errorContainer:{display:"flex",justifyContent:"center",alignItems:"center",padding:40,color:X().Tj.text.secondary},settingHeader:{fontSize:16,fontWeight:se().Wy.medium},requestCount:{color:X().Tj.text.tertiary}})),[]);(0,i.useEffect)((()=>{const{sidebarSpaceViewStore:e}=be().default.state;if(!e)return;const t=e.getKeyStore("settings").getKeyStore("last_opened_request_center").getValue();t&&l(t),Me().createAndCommit({userAction:"SpaceSettingsRequests.updateLastOpened",environment:n,canUndo:!0,perform:t=>{Me().applyOperation({store:e,operation:{pointer:e.pointer,path:["settings","last_opened_request_center"],command:"set",args:Date.now()},transaction:t})}})}),[]);const h=(0,i.useCallback)((()=>g||!c?null:(0,fe.jsx)(xe().Y1,{gap:12,style:{marginBottom:12},children:(0,fe.jsx)(we().B,{readOnly:!0,spaceStore:t,securitySettingsStore:c,organizationOverrides:u})})),[g,c,t,u]);return s?(0,fe.jsxs)(fe.Fragment,{children:[g?(0,fe.jsx)(Ce().c,{icon:ve().o,title:(0,fe.jsx)(Z().sA,{id:"spaceSettingsRequest.deeplinkCard.title",defaultMessage:"Change request settings in the <bold>Security</bold> tab",values:{bold:e=>(0,fe.jsx)("span",{style:{fontWeight:se().Wy.semibold},children:e})}}),deeplinkTab:{currentTab:"security",defaultSubtab:"members_and_guests"}}):null,h(),(0,fe.jsxs)(ke().A,{divider:"none",large:!0,style:m.settingHeader,children:[(0,fe.jsx)(Z().sA,{id:"spaceSettingsRequest.title",defaultMessage:"Requests"}),(0,fe.jsx)("span",{children:" "}),(0,fe.jsx)("span",{style:m.requestCount,children:p>0?p:void 0})]}),(0,fe.jsx)(it,{spaceStore:t,accessRequestRenderValues:s,lastOpenedRequestCenterTime:o})]}):(0,fe.jsx)("div",{style:m.errorContainer,children:(0,fe.jsx)(at,{})})}function at(){return(0,fe.jsx)(Z().sA,{defaultMessage:"Something went wrong.",id:"spaceSettingsRequests.unknownErrorMessage"})}var rt=()=>s(792361),dt=()=>s(280838),lt=(s(517642),s(658004),s(733853),s(845876),s(432475),s(515024),s(731698),()=>s(792485)),ct=()=>s(636714),ut=()=>s(957606),pt=()=>s(435761),gt=()=>s(632709),mt=()=>s(465960),ht=()=>s(898808),ft=()=>s(419357),St=()=>s(305390);const yt=(0,Z().YK)({filterTeams:{defaultMessage:"Filter teamspaces…",id:"teamsDropdownForMember.filterForTeams.placeholder"}});function bt(e){const{navigate:t}=(0,i.useContext)(Ve().E),{teamGuestPageIds:s}=e,n=(0,a().v3)(),o=(0,r().O$)(be().AppStoreSidebarSpaceStore);if(!o)return null;if(0===s.length)return null;const d=[{key:"pages",render:e=>(0,fe.jsx)(R().A,{...e}),items:s.map((e=>{const s=Fe().B.createChildStore(o,{table:We().ev,id:e}),i={key:e,render:e=>(0,fe.jsx)(St().A,{...e,store:s,placeholder:(0,fe.jsx)(Z().sA,{id:"guestPagesPopup.privatePagePlaceholder",defaultMessage:"Private page"})}),action:()=>{const s=Fe().B.createChildStore(o,{table:We().ev,id:e}),i=(0,He().Ay)({store:s,fullyQualified:!1,pageVisitSource:Ge().y8.LinkInPage});t({environment:n,url:i,openInNew:"tab"})}};return i}))}],l={menuType:w().gu.Popup,minWidth:300,maxWidth:350,maxHeight:300,header:(0,fe.jsx)(I().A,{isSmall:!0,style:{color:X().oZ.regularTextColor,marginInlineStart:15,marginInlineEnd:15,paddingTop:6},children:(0,fe.jsx)(Z().sA,{id:"guestpagesforteamguest.header",defaultMessage:"Pages"})})};return(0,fe.jsx)(_().A,{...l,children:(0,fe.jsx)(P().A,{type:P().O.Vertical,initialFocus:void 0,sections:d})})}function xt(e){const t=(0,Z().tz)(),s=(0,a().v3)(),[n,o]=(0,i.useState)(""),l=(0,i.useCallback)((e=>mt().F2({environment:s,teamId:e,tab:gt().p.Members,from:"teams_dropdown_for_team_guest"})),[s]),c=(0,d().IS)((()=>({teamMenuItem:{fontWeight:400,maxWidth:180}})),[]),u=(0,lt().S)(),p=(0,r().K8)((()=>[{key:"teams for team guest",render:e=>(0,fe.jsx)(R().A,{...e}),actions:e.teamStores.map((e=>{const t={key:e.id,displayName:e.getName(),analyticsName:e.getName()||"team_unknown",searchName:e.getName(),render:t=>{var s;return(0,fe.jsx)(T().A,{icon:(0,fe.jsx)(ht().x,{disabled:!0,store:e}),title:(0,fe.jsx)(I().A,{style:c.teamMenuItem,children:e.getName()}),caption:(0,fe.jsx)(Z().sA,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"teamsDropdownForMember.numMembers",values:{numMembers:(null===(s=(0,ut().PF)({teamStore:e}))||void 0===s?void 0:s.totalMembersAndGuestsCount)??0}}),inline:!0,...t})},action:()=>{l(e.id)},closeParentMenu:!1};return t}))}]),[e.teamStores,c.teamMenuItem,l]),g=(0,fe.jsx)(R().A,{isInput:!0,children:(0,fe.jsx)(ft().Ay,{value:n,onChange:(0,i.useCallback)((e=>{o(e.target.value)}),[]),focus:!0,focusAfterAnimation:!0,placeholder:t.formatMessage(yt.filterTeams)})}),m={menuType:w().gu.Popup,maxWidth:350,maxHeight:300,header:e.teamStores.length>5?g:void 0};return(0,fe.jsx)(_().A,{...m,children:(0,fe.jsx)(ct().A,{filter:n,context:{blocks:[],environment:s,publicEditMode:void 0,pageContext:u},initialFocus:0,sections:p})})}const vt=function(e){const{teamGuestId:t,teamGuestPageIds:i}=e,n=(0,r().O$)(be().AppStoreSidebarSpaceStore),{teams:o}=(0,pt().Qs)({spaceStore:n}),a=(0,pt().gc)({spaceStore:n,teams:o}).map((e=>e.store)),l=(0,r().K8)((()=>a.filter((e=>e.isMemberOrGuest(t,new Set)))),[a,t]),c=(0,d().IS)((()=>({button:{marginInlineEnd:8},noTeams:{marginInlineEnd:8,color:X().Tj.text.tertiary}})),[]),u=l.length??0;return(0,fe.jsx)(m().A,{popupType:m().z.Popup,renderOrigin:e=>(0,fe.jsx)(j().p,{disabled:0===u,style:0===u?c.noTeams:c.button,...e,iconTrailing:u>0?{icon:s(324254).arrowChevronSingleDownSmallIcon,colorVariant:"tertiary",size:"xs"}:void 0,children:0===u?(0,fe.jsx)(Z().sA,{id:"teamsDropdownForTeamGuest.teamsCountNone.label",defaultMessage:"No access"}):(0,fe.jsx)(Z().sA,{id:"teamsDropdownForMember.teamsCount.label",defaultMessage:"{numberOfTeams, plural, one {{numberOfTeams} teamspace} other {{numberOfTeams} teamspaces}}",values:{numberOfTeams:u}})}),render:()=>(0,fe.jsxs)(fe.Fragment,{children:[(0,fe.jsx)(xt,{teamStores:l}),(0,fe.jsx)(h().A,{size:"100%"}),(0,fe.jsx)(bt,{teamGuestPageIds:i})]})})};var wt=()=>s(606273),At=()=>s(347930),jt=()=>s(785606),Mt=()=>s(47373),kt=()=>s(499764),Ct=()=>s(232930),It=()=>s(176983),_t=()=>s(637573),Tt=()=>s(240865),Pt=()=>s(118789),Rt=()=>s(656144),Dt=()=>s(562866),Nt=()=>s(317025),Bt=()=>s(971736),Et=()=>s(322976),Ot=()=>s(735230),qt=()=>s(687111),Ut=()=>s(8364),Lt=()=>s(238838),Vt=()=>s(965511),Ft=()=>s(177711),zt=()=>s(775281),Gt=()=>s(590977),Kt=()=>s(406999),Wt=()=>s(973189),Ht=()=>s(404141),$t=()=>s(19575),Yt=()=>s(726637),Qt=()=>s(148024),Zt=()=>s(752860),Xt=()=>s(704658);function Jt({style:e,icon:t,title:s,caption:i,from:n,upsell:o,spaceStore:r,learnMoreRoute:d}){const l=(0,a().v3)();return(0,fe.jsxs)("section",{style:ts(l,e),children:[(0,fe.jsx)(ss,{icon:t}),(0,fe.jsx)(es,{title:s}),(0,fe.jsx)(is,{caption:i}),(0,fe.jsx)(os,{from:n,upsell:o,learnMoreRoute:d,spaceStore:r})]})}function es({title:e}){return(0,fe.jsx)("header",{style:{fontWeight:se().Wy.semibold},children:e})}function ts(e,t){return{...t,fontSize:14,...!Yt().A.isMobile&&{maxWidth:340}}}function ss({icon:e}){return e?e({width:32,height:"auto",fill:X().Tj.icon.secondary,marginBottom:8}):null}function is({caption:e}){return(0,fe.jsx)("p",{style:{color:X().Tj.text.secondary,marginTop:4,marginBottom:16},children:e})}function ns({from:e,learnMoreRoute:t}){const s=(0,a().v3)();return(0,fe.jsx)(A().A,{size:"lg",onClick:()=>function(e,t,s){(0,Zt().L)({environment:s,url:(0,Ct().x)(t)}),Qt().FH(s,{from:e})}(e,t,s),children:(0,fe.jsx)(Z().sA,{defaultMessage:"Learn more",id:"upsellCallout.learnMoreButton.text"})})}function os({from:e,upsell:t,learnMoreRoute:s,spaceStore:i}){return(0,fe.jsxs)("footer",{style:{display:"flex",flexWrap:"wrap",gap:"8px 12px"},children:[(0,fe.jsx)(Xt().UpgradeButton,{upsell:t,display:"primary",source:e,spaceStore:i}),(0,fe.jsx)(ns,{from:e,learnMoreRoute:s})]})}var as=()=>s(789586),rs=()=>s(528093),ds=()=>s(134217),ls=()=>s(314907),cs=()=>s(803025),us=()=>s(334992);const ps={maxWidth:275,borderRadius:30},gs={marginTop:8};function ms({icon:e,countLabel:t,count:s,isTransferring:i,spaceStore:n,onTransfer:o,onCountClick:a}){return(0,fe.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,fe.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,fe.jsx)(S().I,{icon:e,size:"default",colorVariant:"secondary"}),a?(0,fe.jsx)(j().p,{onClick:a,children:(0,fe.jsx)(k().D,{styleKey:"body",colorVariant:"secondary",children:t})}):(0,fe.jsx)(k().D,{styleKey:"body",colorVariant:"secondary",children:t})]}),s>0?i?(0,fe.jsx)(bs,{}):(0,fe.jsxs)("div",{style:{position:"relative"},children:[(0,fe.jsxs)(A().A,{children:[(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.reprovision.transferButton",defaultMessage:"Transfer"}),(0,fe.jsx)(S().I,{icon:B().arrowChevronSingleRightSmallIcon,size:"xs"})]}),(0,fe.jsx)("div",{style:{position:"absolute",top:0,insetInlineStart:0,insetInlineEnd:0,bottom:0,opacity:0,pointerEvents:"auto"},children:(0,fe.jsx)(Bt().A,{mode:Et().C.Button,title:"",parentStore:n,userIds:[],onChange:e=>{const t=e[0];t&&o(t)},focused:!1})})]}):void 0]})}function hs(e){const{spaceStore:t,currentTab:s,inviteLinkCode:n,guests:o,spacePermissionsSettingsStore:a,recentlyRemovedMembersStore:r,accessRequestRenderValues:d}=e;return(0,i.useEffect)((()=>()=>{Ft().A.setState({...Ft().A.state,searchQuery:void 0})}),[]),s===Wt().d.Members?(0,fe.jsx)(Ds,{spaceStore:t,inviteLinkCode:n,spacePermissionsSettingsStore:a}):s===Wt().d.Guests?(0,fe.jsx)(Ns,{spaceStore:t,spacePermissionsSettingsStore:a,recentlyRemovedMembersStore:r,guests:o}):s===Wt().d.Groups?(0,fe.jsx)(Is,{spaceStore:t,spacePermissionsSettingsStore:a}):s===Wt().d.Reprovisioning?(0,fe.jsx)(fs,{spaceStore:t}):s===Wt().d.Requests?(0,fe.jsx)(ot,{spaceStore:t,accessRequestRenderValues:d}):s===Wt().d.Contacts?(0,fe.jsx)(Ut().x,{spaceStore:t}):void(0,te().HB)(s)}function fs({spaceStore:e}){const t=(0,d().IS)((()=>({label:{width:"80%"}})),[]);return(0,fe.jsxs)(fe.Fragment,{children:[(0,fe.jsx)(I().A,{isMultiline:!0,style:t.label,children:(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.reprovisioningTab.workspaceOwner.caption",defaultMessage:"View users that were previously part of the workspace in the past 30 days. Only workspace owners can see this."})}),(0,fe.jsx)(I().A,{isMultiline:!0,style:t.label,children:(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.reprovisioningTab.workspaceOwner.caption.disclaimer",defaultMessage:"Only users who had private pages will appear here."})}),(0,fe.jsx)(h().A,{size:24,isHidden:!0}),(0,fe.jsx)(Ss,{spaceStore:e})]})}function Ss({spaceStore:e}){const t=(0,a().v3)(),s=(0,Z().tz)(),n=(0,rs()._)({name:"custom_agents",spaceId:e.id,userId:void 0}),o="available"===(null==n?void 0:n.type),[r,d]=(0,i.useState)([]),[u,p]=(0,i.useState)([]),[{value:g,status:m}]=(0,D().Yb)((async()=>{const s=await ne().callApi({eventName:"getRecoverableSpaceUserContent",environment:t,data:{spaceId:e.id}});if("failed"===s.type)throw l().Qg(s),s;return s.data}),[t,e.id]),h=(null==g?void 0:g.recentSpaceRecoverPages)??[],f=(0,i.useCallback)((async(i,n)=>{d([...r,i]),await(0,zt().FH)({environment:t,spaceStore:e,fromUserId:i,toUserId:n,contentType:"pages",messages:(0,zt().vy)(),intl:s}),d(r.filter((e=>e!==i)))}),[t,e,r,s]),S=(0,i.useCallback)((async(i,n)=>{p([...u,i]),await(0,zt().FH)({environment:t,spaceStore:e,fromUserId:i,toUserId:n,contentType:"workflows",messages:(0,zt().$x)(),intl:s}),p(u.filter((e=>e!==i)))}),[t,e,u,s]),y=(0,i.useCallback)((t=>{const s=[];for(const{userId:i,privatePagesCount:n,workflowsCount:a}of t){if(n<1&&a<1)continue;const t=c().L.createChildStore(e,{table:H().oo,id:i}),d=r.includes(i),l=u.includes(i),p=[(0,fe.jsx)(xs,{userStore:t},"Member"),(0,fe.jsx)(ms,{icon:L().pageIcon,countLabel:(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.reprovision.pagesCount",defaultMessage:"{count, plural, one {# page} other {# pages}}",values:{count:n}}),count:n,isTransferring:d,spaceStore:e,onTransfer:e=>{f(i,e)},onCountClick:()=>{ae().Ow({currentTab:"admin_content_search"})}},"pages")];o&&p.push((0,fe.jsx)(ms,{icon:N().F,countLabel:(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.reprovision.agentsCount",defaultMessage:"{count, plural, one {# agent} other {# agents}}",values:{count:a}}),count:a,isTransferring:l,spaceStore:e,onTransfer:e=>{S(i,e)},onCountClick:()=>{ae().Ow({currentTab:"ai",subtab:"custom_agents"})}},"workflows")),s.push({key:i,columns:p})}return s}),[e,o,r,u,f,S]);if("pending"===m)return(0,fe.jsx)(bs,{});if(null==g||!g.recentSpaceRecoverPages)return null;const b=[{key:"user",header:(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),style:{width:o?"30%":"40%"}},{key:"pages",header:(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.userTable.pageCountColumn.header",defaultMessage:"Private pages"}),style:{width:o?"40%":"60%"}}];return o&&b.push({key:"workflows",header:(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.userTable.agentsColumn.header",defaultMessage:"Private agents"}),style:{width:"30%"}}),(0,fe.jsx)(_e().A,{columns:b,rows:y(h)})}function ys(){const e=p().subscriptionDataStoreInstance.state;return Boolean(e&&ds().Fq(e))}function bs(){return(0,fe.jsx)(v().A,{style:{marginTop:"calc(50%",marginInlineEnd:"-",marginBottom:"1em)",marginInlineStart:"auto"}})}function xs({userStore:e,restorationStatus:t}){return(0,fe.jsx)(Ot().A,{actorStore:e,restorationStatus:t})}function vs({spaceStore:e}){const t=(0,r().K8)((()=>function(e){const t=e.getEditDomain();return t?`${window.location.host}/${t}`:null}(e)),[e]);return t?(0,fe.jsx)(I().A,{isSmall:!0,isMultiline:!0,style:{width:"80%"},children:(0,fe.jsx)(Z().sA,{id:"spaceBasicSettings.membersTab.manageMembersWithLinkCaption",defaultMessage:"Manage members here."})}):(0,fe.jsxs)("div",{children:[(0,fe.jsx)(I().A,{isSmall:!0,isMultiline:!0,style:{width:"80%",marginBottom:2},children:(0,fe.jsx)(Z().sA,{id:"spaceBasicSettings.membersTab.manageMembersWithoutLinkCaption",defaultMessage:"Manage members here, or <setupdomainlink>set up a domain</setupdomainlink>, so everyone with allowed email domains can join the workspace.",values:{setupdomainlink:e=>(0,fe.jsx)(b().V,{onClick:()=>{Ht().Ay.setState({...Ht().Ay.state,currentTab:"settings",defaultSubtab:void 0})},children:e})}})}),(0,fe.jsx)(I().A,{isSmall:!0,isMultiline:!0,style:{width:"80%"},children:(0,fe.jsx)(Z().sA,{id:"spaceBasicSettings.membersTab.learnMore",defaultMessage:"<billingguidelink>Learn more about adding members.</billingguidelink>",values:{billingguidelink:e=>(0,fe.jsx)(b().V,{href:(0,Ct().x)("guides.billing"),children:e})}})})]})}function ws({userStore:e,spaceStore:t}){const s=(0,Z().tz)(),i=(0,a().v3)();return(0,fe.jsx)(m().A,{popupType:m().z.Popup,renderOrigin:e=>(0,fe.jsx)(y().A,{...e,icon:O().ellipsisSmallIcon,ariaLabel:s.formatMessage({id:"spacePermissionsSettings.externalTab.userThreeDotMenu.ariaLabel",defaultMessage:"Convert to member or remove from workspace"})}),render:s=>{const n=[{key:"convertToMember",render:e=>(0,fe.jsx)(T().A,{...e,icon:(0,fe.jsx)(S().I,{icon:E().arrowInCircleUpIcon}),title:(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.title",defaultMessage:"Convert to member"}),shouldWrapCaption:!0,caption:(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.caption",defaultMessage:"Workspace members are not restricted to specific teamspaces"})}),action:()=>function(e,t,s){const{userStore:i,parent:n}=e,o=ys()?"member":"owner";l().ui({message:(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.message",defaultMessage:"Are you sure you want to convert this user into a workspace member?"}),description:(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.description",defaultMessage:"This is a billable event."}),showCancel:!0,keepFocus:!1,handleCancel:()=>{l().zw(),n.close()},items:[{label:(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.confirm",defaultMessage:"Convert to workspace member"}),color:"blue",onAccept:async()=>{n.close(),await re().P({environment:s,guestUserStore:i,membershipType:o,spaceStore:t,origin:"page_or_teamspace_guest_three_dot_menu"})}}]})}({userStore:e,parent:s},t,i)},{key:"removeFromWorkspace",render:e=>(0,fe.jsx)(T().A,{...e,icon:(0,fe.jsx)(S().I,{icon:q()._,colorPalette:"red",colorVariant:"accentPrimary"}),title:(0,fe.jsx)("span",{style:{color:X().oZ.red},children:(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.title",defaultMessage:"Remove from workspace"})})}),action:()=>function(e,t,s){const{userStore:i,parent:n}=e;l().ui({message:(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.message",defaultMessage:"Are you sure you want to remove this user from the workspace?"}),description:(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.description",defaultMessage:"This action will completely remove the user from the workspace, including any teamspaces and pages they have access to."}),showCancel:!0,keepFocus:!1,handleCancel:()=>{l().zw(),n.close()},items:[{label:(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.confirm",defaultMessage:"Remove from workspace"}),color:"red",onAccept:async()=>{n.close(),await re().D({environment:s,guestUserStore:i,spaceStore:t})}}]})}({userStore:e,parent:s},t,i)}],o=[{key:"team section",render:e=>(0,fe.jsx)(R().A,{...e}),items:n}];return(0,fe.jsx)(_().A,{menuType:w().gu.Popup,children:(0,fe.jsx)(P().A,{type:P().O.Vertical,sections:o,initialFocus:void 0,style:{minWidth:265}})})}})}const As=(0,Z().YK)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updating…"}});function js(){oe().m({message:As.updatingPermissions})}function Ms(){oe().V()}function ks({buttonStyle:e,spaceStore:t}){const s=(0,a().v3)(),n=(0,r().K8)((()=>t.canEditMembership()),[t]),o=(0,r().K8)((()=>!n&&!t.getDisableMembershipRequests()&&(0,Mt().x3)()),[n,t]),d=(0,i.useMemo)((()=>(0,Kt().nc)()),[]),l=(0,r().K8)((()=>ys()),[]),c=(0,i.useCallback)((()=>{(0,Nt().qU)(s)}),[s]);return o?(0,fe.jsx)(Dt().cx,{spaceStore:t,analyticsFrom:"space_settings_add_members",origin:(0,fe.jsx)(M().A,{colorPalette:"blue",size:"lg",onClick:c,children:(0,fe.jsx)(Z().sA,{id:"inviteUserButton.requestMemberLabel",defaultMessage:"Add members"})})}):(0,fe.jsx)(At().H,{disabled:!n,targetStore:t,spaceStore:t,permissionsInviteStore:d,onInviteClick:js,onInviteComplete:Ms,isSubscribed:l,membersOnly:!1,upgradeButtonName:"space_permission_settings",shouldGrow:!1,buttonStyle:e,analyticsFrom:"space_settings_add_members"})}function Cs(e,t,s){const i=s.state.sorts[e];let n;n=!(!i||i.by!==t)&&i.asc,s.update((s=>({...s,sorts:{...s.sorts,[e]:{by:t,asc:!n}}})))}function Is({spaceStore:e,spacePermissionsSettingsStore:t}){const s=(0,Z().tz)(),n=(0,a().v3)(),o=(0,i.useCallback)((e=>function(e,t){t.setState({...t.state,groupsFilter:e.target.value})}(e,t)),[t]),d=(0,i.useCallback)((()=>function(e,t,s){Me().createAndCommit({userAction:"SpacePermissionsSettings.handleCreateGroupClick",environment:e,canUndo:!0,perform:e=>{const i=(0,de().n)({spaceStore:t,transaction:e}),n=null==i?void 0:i.getGroupId();if(i&&n){s.setState({...s.state,editingNameGroupId:n,groupNameInputValue:""});const e=G().Bj6.fromValue(K().n,i.getValue());ge().h.addGroup(n,{group:e,memberCount:0,membershipTypes:[]})}}}),ie().UY(e)}(n,e,t)),[n,e,t]),l=(0,r().K8)((()=>t.state.groupsFilter),[t]),c=n.currentUser.id,u=e.id,p=(0,rs()._)({name:"group_management",spaceId:u,userId:c}),g=(0,Q().e2)(p),m=(0,r().K8)((()=>e.canEditMembership()),[e]),f=(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.groupsTab.groupCreationInsufficientPermissions",defaultMessage:"Only membership admins and workspace owners can add a permission group."}),y=(0,r().K8)((()=>e.isDefined()),[e]),b=(0,r().K8)((()=>0!==(0,kt().Qo)()),[]),v=(0,r().K8)((()=>(0,ut().zI)({spaceStore:e})>0),[e]),w=(0,r().K8)((()=>(0,Q().e2)(p)&&e.canEditMembership()),[p,e]);return p&&y?(0,fe.jsxs)("div",{style:{overflow:"auto"},children:[(0,Y().wy)(p.upsell)?(0,fe.jsx)(Jt,{upsell:p.upsell,from:"permission_groups",icon:V().s,title:(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.groupsTab.upgradeTitle",defaultMessage:"Upgrade to create groups"}),caption:(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.groupsTab.upgradeCaption.plus",defaultMessage:"Upgrade to the Plus Plan to set up groups and control permissions from the share menu."}),learnMoreRoute:"guides.groups",spaceStore:e}):(0,fe.jsx)(I().A,{isMultiline:!0,style:{width:"80%"},children:v?(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.groupsTab.captionWithTeamsV2",defaultMessage:"Set up groups to streamline page permissions from the share menu and manage teamspace members in bulk."}):(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.groupsTab.caption",defaultMessage:"Set up groups to conveniently control page permissions from the share menu."})}),(0,fe.jsx)(h().A,{size:24,isHidden:!0}),(0,fe.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"16px 8px"},children:[g?(0,fe.jsx)(C().m,{renderTooltip:()=>!m&&f,render:e=>(0,fe.jsx)(M().A,{colorPalette:"blue",size:"lg",onClick:d,disabled:!m,...m?void 0:e,children:(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.groupsTab.createGroupButton.label",defaultMessage:"Create a group"})})}):void 0,b?(0,fe.jsx)(x().A,{placeholder:s.formatMessage({id:"spacePermissionsSettings.groupsTab.filterGroupNamesInput.placeholder",defaultMessage:"Filter by group name…"}),left:(0,fe.jsx)(S().I,{icon:U().magnifyingGlassSmallIcon,size:"sm",colorVariant:"secondary",style:{marginInlineEnd:6,flexGrow:0,flexShrink:0}}),showClearButton:!0,format:"small",value:l,style:{...ps,marginInlineEnd:0},onChange:o,onClick:()=>{ie().Z9(n,{current_tab:Wt().d.Groups})}}):void 0]}),b?(0,fe.jsx)(dt().r,{spaceStore:e,permissionsSettingsStore:t,canEdit:w}):void 0]}):null}function _s({groupIds:e,spaceStore:t,spacePermissionsSettingsStore:s}){return(0,fe.jsx)(Se,{spaceStore:t,groupIds:e,onGroupClick:()=>{!function(e,t){t.setState({...t.state,currentTab:e})}(Wt().d.Groups,s)}})}function Ts({teamGuests:e,spaceStore:t,spacePermissionsSettingsStore:s,recentlyRemovedMembersStore:n}){const o=(0,a().v3)(),d=(0,r().K8)((()=>t.canEditMembership()),[t]),[l,u]=(0,i.useState)({});(0,D().Yb)((async()=>{if(!e)return;const s=e.map((e=>e.userId)),i=await ne().callCellCompatibleApi({eventName:"getGuestPagesForUserIds",environment:o,data:{spaceId:t.id,guestUserIds:s,includeRecordMap:!0},cellNavigation:{cellId:void 0,spaceId:t.id}});"success"===i.type&&u((e=>{const t={...e,...i.data.guestIdToPages};for(const i of s)void 0===t[i]&&(t[i]=Bs);return t}))}),[t,o,e]);const p=(0,r().K8)((()=>s.state.sorts.team_guests),[s]),m={key:"user",header:(0,fe.jsxs)(g().Ay,{disabled:!1,ignoreLocalHoverState:!0,onClick:()=>{Cs("team_guests","name",s)},style:{display:"flex",alignItems:"center"},children:[(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),p&&"name"===p.by?(0,fe.jsx)(rt().X,{up:p.asc}):void 0]}),style:{width:"45%"}},h={key:"pages",header:(0,fe.jsx)("div",{style:{display:"flex",alignItems:"center",paddingInlineStart:8},children:(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.userTable.pagesColumn.header",defaultMessage:"Pages"})}),style:{width:"20%",textAlign:"center"}},f={key:"three_dot",header:(0,fe.jsx)(g().Ay,{disabled:!0,ignoreLocalHoverState:!0})},S=d?[m,h,f]:[m,h],y=(0,r().O$)(n),b=(0,r().K8)((()=>e.map((e=>c().L.createChildStore(t,{table:H().oo,id:e.userId}))).filter((e=>e.isDefined()))),[e,t]);return(0,fe.jsx)(_e().A,{columns:S,rows:b.map((e=>{var s;const n=Array.isArray(y)?null===(s=y.find((t=>t.userId===e.id)))||void 0===s?void 0:s.restorationStatus:void 0,o=l[e.id],a=[(0,fe.jsx)(i.Fragment,{children:(0,fe.jsx)(Ot().A,{actorStore:e,restorationStatus:n,spaceRole:"team_level_guest",hideRolePill:!0})},"member")];return o&&a.push((0,fe.jsx)(i.Fragment,{children:(0,fe.jsx)(vt,{teamGuestId:e.id,teamGuestPageIds:o.pageIds})},"user-permission")),d&&a.push((0,fe.jsx)(i.Fragment,{children:(0,fe.jsx)(ws,{userStore:e,spaceStore:t})},"three-dot")),{key:e.id,columns:a}}))})}function Ps({guests:e,spaceStore:t,spacePermissionsSettingsStore:s,recentlyRemovedMembersStore:n}){const o=(0,Z().tz)(),a=(0,i.useCallback)((()=>function(e){e.setState({...e.state,limitTeamGuests:!1})}(s)),[s]),{teamGuestsFilter:d,limitTeamGuests:l}=(0,r().K8)((()=>{const{teamGuestsFilter:e,limitTeamGuests:t}=s.state;return{teamGuestsFilter:e,limitTeamGuests:t}}),[s]),u=e.filter((e=>e.isTeamGuest)),p=(0,r().K8)((()=>function(e,t,s,i){return t&&t.length>0?(0,J().Ay)(t,e,(e=>{const t=c().L.createChildStore(s,{table:H().oo,id:e.userId});return t.isDefined()?t.getSearchName(i):""})):e}(u,d,t,o)),[u,d,t,o]),g=(0,r().K8)((()=>function(e,t,s,i,n){const o=n.state.sorts[e];if(!o)return t;switch(o.by){case"role":return t.sort(((e,t)=>(W().Yr[t.membershipType]-W().Yr[e.membershipType])*(o.asc?-1:1)));case"name":return t.map((e=>({user:e,store:c().L.createChildStore(s,{table:H().oo,id:e.userId})}))).sort(((e,t)=>{const s=i.formatMessage(G().Fvx.messages.anonymousPlaceholder),n=e.store.getFullName(i)||s,a=t.store.getFullName(i)||s;return n.localeCompare(a)*(o.asc?1:-1)})).map((e=>e.user))}}("team_guests",p,t,o,s)),[p,t,o,s]),m=l?g.slice(0,5):g;return(0,fe.jsx)("div",{style:{marginBottom:5},children:(0,fe.jsxs)("div",{children:[(0,fe.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,gap:8},children:(0,fe.jsx)(x().A,{placeholder:o.formatMessage({id:"spacePermissionsSettings.membersTab.filterTeamGuestsInput.placeholder",defaultMessage:"Filter by email or name…"}),left:(0,fe.jsx)(S().I,{icon:U().magnifyingGlassSmallIcon,size:"sm",colorVariant:"secondary",style:{marginInlineEnd:6,flexGrow:0,flexShrink:0}}),showClearButton:!0,format:"small",value:d,style:ps,onChange:e=>{s.setState({...s.state,teamGuestsFilter:e.target.value,limitTeamGuests:!0})}})}),(0,fe.jsx)(Ts,{spaceStore:t,spacePermissionsSettingsStore:s,recentlyRemovedMembersStore:n,teamGuests:m}),g.length>5&&l?(0,fe.jsx)(j().p,{colorPalette:"gray",size:"xs",style:gs,onClick:a,children:(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.membersTab.showMoreGuestsButton.label",defaultMessage:"{numberOfHiddenGuests, plural, one {Show {numberOfHiddenGuests} more} other {Show {numberOfHiddenGuests} more}}",values:{numberOfHiddenGuests:g.length-5}})}):void 0]})})}function Rs({guests:e,spaceStore:t,spacePermissionsSettingsStore:s,recentlyRemovedMembersStore:n}){const[o,a]=(0,i.useState)(!0),[d,l]=(0,i.useState)(!0),c=(0,u()._3)({spaceId:t.id}),{shouldRenderTeamGuests:p,isGuestsWithPrivatePagesDisabled:g}=(0,r().K8)((()=>{const e=t.getSettingsStore(),s=!Boolean(e.getKeyStore("disable_team_guests").getValue()),i=e.getKeyStore("disable_guest_can_create_private_pages").getValue(),n=(0,qt().H)();return{shouldRenderTeamGuests:s,isGuestsWithPrivatePagesDisabled:i||!n||(0,$().N8)(c)||"free"===t.getSubscriptionTier()}}),[t,c]);return(0,fe.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8,height:"100%"},children:[p?(0,fe.jsxs)(fe.Fragment,{children:[(0,fe.jsxs)("div",{style:{display:"flex"},children:[(0,fe.jsx)(wt().f,{open:o,onClick:()=>a(!o),isSidebar:!1,fill:!0,style:{marginInlineStart:-27}}),(0,fe.jsxs)("div",{style:{marginInlineStart:3},children:[(0,fe.jsxs)("div",{style:{display:"flex",alignItems:"center",height:24},children:[(0,fe.jsx)(I().A,{style:{fontSize:15},children:(0,fe.jsx)(Z().sA,{id:"spacePermissionSettings.teamGuests.title",defaultMessage:"Teamspace guests"})}),(0,fe.jsx)("span",{children:" "}),(0,fe.jsx)(I().A,{isSecondaryColor:!0,style:{fontSize:15},children:e.filter((e=>e.isTeamGuest)).length})]}),(0,fe.jsx)(I().A,{isSecondaryColor:!0,style:{fontSize:15},children:(0,fe.jsx)(Z().sA,{id:"spacePermissionSettings.teamGuests.subtitle",defaultMessage:"Teamspace guests are billed as members and can access all pages in teamspaces they’ve been invited to."})})]})]}),o?(0,fe.jsx)(Ps,{spaceStore:t,spacePermissionsSettingsStore:s,recentlyRemovedMembersStore:n,guests:e}):void 0]}):void 0,(0,fe.jsxs)("div",{style:{display:"flex"},children:[(0,fe.jsx)(wt().f,{open:d,onClick:()=>l(!d),isSidebar:!1,fill:!0,style:{marginInlineStart:-27}}),(0,fe.jsxs)("div",{style:{marginInlineStart:3},children:[(0,fe.jsxs)("div",{style:{display:"flex",alignItems:"center",height:24},children:[(0,fe.jsx)(I().A,{style:{fontSize:15},children:(0,fe.jsx)(Z().sA,{id:"spacePermissionSettings.pageGuests.title",defaultMessage:"Page guests"})}),(0,fe.jsx)("span",{children:" "}),(0,fe.jsx)(I().A,{isSecondaryColor:!0,style:{fontSize:15},children:e.filter((e=>e.isPageGuest&&!e.isTeamGuest)).length})]}),g?(0,fe.jsx)(I().A,{isSecondaryColor:!0,style:{fontSize:15},children:(0,fe.jsx)(Z().sA,{id:"spacePermissionSettings.pageGuests.subtitle",defaultMessage:"Page guests are free and can only access pages they’ve been invited to."})}):(0,fe.jsx)(I().A,{isSecondaryColor:!0,style:{fontSize:15},children:(0,fe.jsx)(Z().sA,{id:"spacePermissionSettings.pageGuests.subtitleWithPrivatePages",defaultMessage:"Page guests are free. They can access shared pages and create private pages if they request member access."})})]})]}),d?(0,fe.jsx)(Es,{spaceStore:t,spacePermissionsSettingsStore:s,recentlyRemovedMembersStore:n}):void 0]})}function Ds({spaceStore:e,inviteLinkCode:t,spacePermissionsSettingsStore:s}){var i;const n=(0,a().v3)(),o=(0,Z().tz)(),d=(0,r().K8)((()=>Ft().A.state.searchQuery??""),[]),l=(0,u()._3)({spaceId:e.id}),c=(0,us().h)(e),p=(0,Tt().V)()??1,g=c&&(null==l?void 0:l.subscription)&&p>0,m=(0,u().Q7)(e.id,l,p);return(0,fe.jsxs)(fe.Fragment,{children:[(0,fe.jsx)(Lt().K,{spaceStore:e,inviteLinkCode:t,spacePermissionsSettingsStore:s}),(0,fe.jsxs)("div",{style:{height:"100%",paddingBottom:48},children:[(0,fe.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,gap:8},children:[(0,fe.jsx)(ks,{spaceStore:e}),(0,fe.jsx)(x().A,{placeholder:o.formatMessage({id:"spacePermissionsSettings.membersTab.filterMembersInput.placeholder",defaultMessage:"Filter by email or name…"}),left:(0,fe.jsx)(S().I,{icon:U().magnifyingGlassSmallIcon,size:"sm",colorVariant:"secondary",style:{marginInlineEnd:6,flexGrow:0,flexShrink:0}}),showClearButton:!0,format:"small",value:d,style:ps,onChange:e=>{s.setState({...s.state,limitMembers:!0}),Ft().A.setState({...Ft().A.state,searchQuery:e.target.value})},onClick:()=>{ie().Z9(n,{current_tab:Wt().d.Members})}})]}),(0,fe.jsx)("div",{style:{marginInlineEnd:8,flexGrow:1},children:(0,fe.jsx)(ke().A,{smallMarginBottom:!0,children:(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.spaceMembers.members.title",defaultMessage:"Members"})})}),(0,fe.jsx)(vs,{spaceStore:e}),g?(0,fe.jsx)("div",{style:{margin:"24px 0px"},children:(0,fe.jsx)(Vt().x,{quantityOfSpaceMembers:p,quantityOfPaidSeats:m,nextBillingDate:(null==l||null===(i=l.subscription)||void 0===i?void 0:i.currentPeriodEnd.toLocaleString({month:"short",day:"numeric",year:"numeric"}))??""})}):(0,fe.jsx)("div",{style:{margin:"12px 0px"}}),(0,fe.jsx)(Gt().Hw,{spaceStore:e,spacePermissionsSettingsStore:s})]})]})}function Ns({guests:e,spaceStore:t,spacePermissionsSettingsStore:s,recentlyRemovedMembersStore:i}){const n=(0,a().v3)(),o=(0,r().K8)((()=>t.canAdmin()),[t]),d=n.currentUser.id,l=t.id,c=(0,rs()._)({name:"internal_guests",spaceId:l,userId:d,amount:0}),u=(0,cs().q)(),p=(0,_t().r)(),g=(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.deeplinkCard.title",defaultMessage:"Change who can invite guests in the <bold>Security</bold> tab",values:{bold:e=>(0,fe.jsx)("span",{style:{fontWeight:se().Wy.semibold},children:e})}}),m=c&&(0,Q().N9)(c,{available:()=>o?(0,fe.jsx)(Ce().c,{icon:F().personCircleFillIcon,title:g,deeplinkTab:{currentTab:"security",defaultSubtab:"members_and_guests"}}):null,unavailable:({limit:e,upsell:t})=>o?"sales_assisted"===u?(0,fe.jsx)("div",{style:{paddingTop:16,paddingBottom:16},children:(0,fe.jsx)(jt().I,{children:(0,fe.jsx)(le().l,{iconGroup:z().A,display:"inline",tint:"yellow",label:(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.guestsTab.limitBanner.title",defaultMessage:"Your workspace is over the {limit}-guest limit",values:{limit:e.total}}),description:(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.guestsTab.limitBanner.description.sales_assisted",defaultMessage:"Find teammates who are currently guests by filtering to your workspace’s email domains and upgrade them to members to continue collaborating. To get more guest seats, reach out to your account manager."})})})}):"product"===t.type||"none"===t.type?(0,fe.jsx)("div",{style:{paddingTop:16,paddingBottom:16},children:(0,fe.jsx)(jt().I,{children:(0,fe.jsx)(le().l,{iconGroup:z().A,display:"inline",tint:"yellow",label:(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.guestsTab.limitBanner.title",defaultMessage:"Your workspace is over the {limit}-guest limit",values:{limit:e.total}}),description:(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.guestsTab.limitBanner.description",defaultMessage:"Find teammates who are currently guests by filtering to your workspace’s email domains and upgrade them to members to continue collaborating. To manage guest seats, <saleslink>reach out to sales</saleslink>.",values:{saleslink:e=>(0,fe.jsx)(b().V,{onClick:()=>(0,$t().lK)({initialQuestion:"manage_guests",openedFrom:"permissions_guest_limit_banner"}),children:e})}})})})}):(0,te().HB)(t):null}),h=(0,r().K8)((()=>(0,Mt().Qd)()),[]);return(!p||0===p)&&o?(0,fe.jsx)(Ce().c,{icon:F().personCircleFillIcon,title:(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.deeplinkCard.noGuests.title",defaultMessage:"<bold>Your workspace has no guests.</bold> Change who can invite guests in the <bold>Security</bold> tab.",values:{bold:e=>(0,fe.jsx)("span",{style:{fontWeight:se().Wy.semibold},children:e})}}),deeplinkTab:{currentTab:"security",defaultSubtab:"members_and_guests"}}):(0,fe.jsxs)(fe.Fragment,{children:[m,h?(0,fe.jsx)(Rs,{spaceStore:t,spacePermissionsSettingsStore:s,recentlyRemovedMembersStore:i,guests:e}):(0,fe.jsx)(Es,{spaceStore:t,spacePermissionsSettingsStore:s,recentlyRemovedMembersStore:i})]})}const Bs={pageIds:[]};function Es({spaceStore:e,spacePermissionsSettingsStore:t,recentlyRemovedMembersStore:s}){const l=(0,Z().tz)(),u=(0,a().v3)(),p=(0,r().K8)((()=>e.id),[e]),g=(0,d().IS)((()=>({emptyMessage:{color:X().Tj.text.secondary,boxShadow:`inset 0 -1px 0 ${X().Tj.border.primary}`,display:"flex",height:32,padding:"0px 4px",alignItems:"center"},searchContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,gap:8},container:{height:"100%"}})),[]),{guestsFilter:m,sort:h}=(0,r().K8)((()=>({guestsFilter:t.state.guestsFilter,sort:t.state.sorts.guests})),[t]),y=(0,i.useCallback)((()=>{Cs("guests","name",t)}),[t]),b=(0,i.useMemo)((()=>h?{field:"name"===h.by?"name_normalized":"type",direction:h.asc?"asc":"desc"}:{field:"name_normalized",direction:"asc"}),[h]),v=(0,Pt().n)({query:m,sort:b,filter:W().nc,limit:30}),w=(0,r().K8)((()=>null==v?void 0:v.rowsStore.state.rows),[v]),j=(0,r().O$)(s),M=(0,r().K8)((()=>e.canEditMembership()),[e]),[k,C]=(0,i.useState)({});(0,D().Yb)((async()=>{if(!w)return;if(!M)return;const t=w.map((e=>e.id)),s=await ne().callCellCompatibleApi({eventName:"getGuestPagesForUserIds",environment:u,data:{spaceId:e.id,guestUserIds:t,includeRecordMap:!0},cellNavigation:{cellId:void 0,spaceId:e.id}});"success"===s.type&&C((e=>{const i={...e,...s.data.guestIdToPages};for(const s of t)void 0===i[s]&&(i[s]=Bs);return i}))}),[e,u,w,M]);const _=(0,ls().E)({spaceId:p}),T=(0,It().J)(e),P=(0,n().T)(),R=(0,as().P)({name:"export_members",spaceId:p,userId:P}),N=T&&!0===R,B=(0,i.useCallback)((t=>{var s,i;if("page_guest"===((0,o().dp)(e,t.id).getMembershipType()??t.membership_type))return{id:t.id,userStore:c().L.createChildStore(e,{id:t.id,table:H().oo}),spaceStore:e,restorationStatus:null==j||null===(s=j.find((e=>e.userId===t.id)))||void 0===s?void 0:s.restorationStatus,guestPageIds:null===(i=k[t.id])||void 0===i?void 0:i.pageIds,subscribed:_}}),[e,j,k,_]),E=(0,i.useMemo)((()=>ee().oE([Os,M?qs:void 0])),[M]);return(0,fe.jsxs)("div",{style:g.container,children:[(0,fe.jsxs)("div",{style:g.searchContainer,children:[(0,fe.jsx)(x().A,{placeholder:l.formatMessage({id:"spacePermissionsSettings.membersTab.filterGuestsInput.placeholder",defaultMessage:"Filter by email or name…"}),left:(0,fe.jsx)(S().I,{icon:U().magnifyingGlassSmallIcon,size:"sm",colorVariant:"secondary",style:{marginInlineEnd:6,flexGrow:0,flexShrink:0}}),showClearButton:!0,format:"small",value:m,style:ps,onChange:e=>{t.setState({...t.state,guestsFilter:e.target.value,limitGuests:!0})},onClick:()=>{ie().Z9(u,{current_tab:Wt().d.Guests})}}),N?(0,fe.jsx)(A().A,{size:"lg",disabled:!1,colorPalette:"blue",onClick:()=>Rt().li({spaceStore:e,intl:l,environment:u}),disabledFeedback:!0,children:(0,fe.jsx)(Z().sA,{id:"exportGuestsButton.label",defaultMessage:"Export guests as CSV"})}):void 0]}),(0,fe.jsx)(f().fI,{paddingBottom:36,children:(0,fe.jsx)(ye().M,{columns:E,listSource:v,transformRow:B,onSortChange:y,sort:h,estimatedRowHeight:52,allowHorizontalScroll:!0,renderEmpty:()=>(0,fe.jsx)(I().A,{isSmall:!0,style:g.emptyMessage,children:(0,fe.jsx)(Z().sA,{id:"membersTab.emptySearch",defaultMessage:"No search results"})})})})]})}const Os={id:"name",headerTitle:(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),cellPadding:"8px 0",widthData:{widthPercent:80,minWidth:200},renderCell:e=>(0,fe.jsx)(Ot().A,{actorStore:e.userStore,restorationStatus:e.restorationStatus,spaceRole:"page_guest",hideRolePill:!0}),sortable:!0},qs={id:"pages",headerTitle:(0,fe.jsx)(Z().sA,{id:"spacePermissionsSettings.userTable.pagesColumn.header",defaultMessage:"Pages"}),headerCellPadding:"0 0 0 8px",cellPadding:"8px 0",widthData:{widthPercent:20,minWidth:100},renderCell:e=>void 0!==e.guestPageIds?(0,fe.jsx)(s(592791).V,{spaceStore:e.spaceStore,guestPageIds:e.guestPageIds,guestStore:e.userStore,isSubscribed:e.subscribed,hideActionButtons:!1}):(0,fe.jsx)(s(874832).P,{style:{width:60,height:12,borderRadius:4,marginInlineStart:8}}),sortable:!1}},170163:(e,t,s)=>{s.d(t,{A:()=>d});s(296540);var i=()=>s(907258),n=()=>s(69708),o=()=>s(547149),a=()=>s(680977);var r=s(474848);const d=function(){const e=(0,s(484714).v3)(),t=(0,s(590526).K8)((()=>l()),[]),d=(0,s(920198).L)();return(0,r.jsx)(s(702723).A,{spaceStore:d,title:(0,r.jsx)(n().sA,{id:"calendarSettings.startWeekOnMonday.label",defaultMessage:"Start week on Monday"}),caption:(0,r.jsx)(n().sA,{id:"calendarSettings.startWeekOnMonday.message",defaultMessage:"This will change how all calendars in your app look."}),type:"toggle",isOn:1===t,onToggle:()=>function(e){const t=l();1===t?function(e){o().createAndCommit({userAction:"userSettingsActions.setStartWeekToSunday",environment:e,canUndo:!0,cellTarget:"main",perform:e=>{const{currentUserSettingsStore:t}=i().default.state;t&&(0,a().m)({userSettingsStore:t,data:{start_day_of_week:0},transaction:e})}})}(e):function(e){o().createAndCommit({userAction:"userSettingsActions.setStartWeekToMonday",environment:e,canUndo:!0,cellTarget:"main",perform:e=>{const{currentUserSettingsStore:t}=i().default.state;t&&(0,a().m)({userSettingsStore:t,data:{start_day_of_week:1},transaction:e})}})}(e)}(e)})};function l(){const{currentUserSettingsStore:e}=i().default.state;if(e){const t=e.getSettings();if(t)return t.start_day_of_week}}},231127:(e,t,s)=>{s.d(t,{V:()=>a});s(296540);var i=()=>s(69708),n=s(474848);const o=(0,i().YK)({switchingToNewTool:{id:"survey.options.switching.placeholder",defaultMessage:"Share the name of the other tools"},switchingToNewAiTool:{id:"survey.options.usingAnotherAIService.placeholder",defaultMessage:"Share the name of the other AI tools"}}),a={consolidatingWorkspaces:{optionName:"consolidating_workspaces",type:"checkbox",label:(0,n.jsx)(i().sA,{id:"survey.options.consolidatingWorkspaces",defaultMessage:"Consolidating Notion workspaces"})},dataSecurity:{optionName:"data_security",type:"checkbox",label:(0,n.jsx)(i().sA,{id:"churnSurvey.reasons.dataSecurity",defaultMessage:"Data security"})},missingFeatures:{optionName:"missing_features",type:"checkbox",label:(0,n.jsx)(i().sA,{id:"survey.options.missingFeatures",defaultMessage:"Missing features"})},noLongerNeedAccess:{optionName:"no_longer_need_access",type:"checkbox",label:(0,n.jsx)(i().sA,{id:"survey.options.noLongerNeedAccess",defaultMessage:"No longer need access to Notion"})},noLongerWorkTogether:{optionName:"no_longer_work_together",type:"checkbox",label:(0,n.jsx)(i().sA,{id:"survey.options.noLongerWorksHere",defaultMessage:"No longer works here"})},notUsingEnough:{optionName:"not_using_enough",type:"checkbox",label:(0,n.jsx)(i().sA,{id:"survey.options.notUsingEnough",defaultMessage:"Not using it enough"})},other:{optionName:"other",type:"checkboxAndInput",label:(0,n.jsx)(i().sA,{id:"survey.options.otherFieldLabel",defaultMessage:"Other"})},switching:{optionName:"switching",type:"checkboxAndInput",label:(0,n.jsx)(i().sA,{id:"survey.options.switching",defaultMessage:"Switching to another tool"}),placeholderText:o.switchingToNewTool},switchingToAnotherWorkspace:{optionName:"switching_to_another_workspace",type:"checkbox",label:(0,n.jsx)(i().sA,{id:"survey.options.switchingToAnotherWorkspace",defaultMessage:"Switching to another Notion workspace"})},tooDifficult:{optionName:"too_difficult",type:"checkbox",label:(0,n.jsx)(i().sA,{id:"survey.options.tooDifficult",defaultMessage:"Too difficult to use"})},tooExpensive:{optionName:"too_expensive",type:"checkbox",label:(0,n.jsx)(i().sA,{id:"survey.options.tooExpensive",defaultMessage:"Too expensive"})},upgradedByMistake:{optionName:"upgraded_by_mistake",type:"checkbox",label:(0,n.jsx)(i().sA,{id:"survey.options.upgradedByMistake",defaultMessage:"Upgraded by mistake"})},usingAnotherAiService:{optionName:"using_another_ai_service",type:"checkboxAndInput",label:(0,n.jsx)(i().sA,{id:"churnSurvey.reasons.usingAnotherAIService",defaultMessage:"Using another AI service"}),placeholderText:o.switchingToNewAiTool},qualityOfResults:{optionName:"quality_of_results",type:"checkbox",label:(0,n.jsx)(i().sA,{id:"churnSurvey.reasons.qualityOfResults",defaultMessage:"Quality of results"})}}},252953:(e,t,s)=>{s.d(t,{A:()=>i});const i=(0,s(340498).xh)("personCropCircleBadgeExclamationPoint",{default:{loader:()=>s.e(50710).then(s.bind(s,223331))},small:{loader:()=>s.e(50710).then(s.bind(s,577829))},fill:{loader:()=>s.e(50710).then(s.bind(s,565711))},fillSmall:{loader:()=>s.e(50710).then(s.bind(s,429926))}},["person","alert","exclamation","warning","user"])},271476:(e,t,s)=>{s.d(t,{n:()=>d});var i=()=>s(484714),n=()=>s(187174),o=()=>s(534177),a=()=>s(769864);const r={};function d({spaceId:e}){const t=(0,i().v3)(),[{status:s,error:d,value:l}]=(0,n().Yb)((async()=>{if(!e)return{overrides:{},organizationInfo:void 0,isOrganizationOwner:!1};const s=await a().callApi({eventName:"getOrganizationSettingsOverrides",environment:t,data:{spaceId:e}});if("success"===s.type)return s.data;if("failed"===s.type)throw s.error;return(0,o().HB)(s)}),[t,e]);return{organizationOverrides:(null==l?void 0:l.overrides)??r,organizationInfo:null==l?void 0:l.organizationInfo,isOrganizationOwner:null==l?void 0:l.isOrganizationOwner,loading:"pending"===s||"idle"===s,error:d}}},280838:(e,t,s)=>{s.d(t,{r:()=>He});s(898992),s(354520),s(581454);var i=s(296540),n=()=>s(590526),o=()=>s(401497),a=()=>s(940148),r=()=>s(302501),d=()=>s(835607),l=()=>s(84262),c=()=>s(69708),u=()=>s(100622),p=()=>s(778078),g=()=>s(284371),m=()=>s(698449),h=()=>s(957606),f=()=>s(169626),S=()=>s(823541),y=(s(737550),()=>s(484714)),b=()=>s(792485),x=()=>s(250910),v=()=>s(118307),w=()=>s(546926),A=()=>s(631524),j=()=>s(890492),M=()=>s(81068),k=()=>s(736847),C=()=>s(636714),I=()=>s(435761),_=()=>s(632709),T=()=>s(465960),P=()=>s(898808),R=()=>s(419357),D=s(474848);const N=(0,c().YK)({filterTeams:{defaultMessage:"Filter teamspaces…",id:"teamsDropdownForGroupMenu.filterForTeams.placeholder"}});function B(e){const t=(0,c().tz)(),s=(0,y().v3)(),a=(0,o().IS)((()=>({teamMenuItem:{fontWeight:400}})),[]),[d,l]=(0,i.useState)(""),u=(0,i.useCallback)((e=>T().F2({environment:s,teamId:e,tab:_().p.Members,from:"teams_dropdown_for_group"})),[s]),p=(0,n().K8)((()=>[{key:"teams for group",render:e=>(0,D.jsx)(k().A,{...e}),actions:e.teamStores.map((e=>{const t={key:e.id,displayName:e.getName(),analyticsName:e.getName()||"team_unknown",searchName:e.getName(),render:t=>{var s;return(0,D.jsx)(M().A,{icon:(0,D.jsx)(P().x,{disabled:!0,store:e}),title:(0,D.jsx)(r().A,{style:a.teamMenuItem,children:e.getName()}),right:(0,D.jsx)(c().sA,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"teamsInGroupMenu.filterForTeams.numMembers",values:{numMembers:(null===(s=(0,h().PF)({teamStore:e}))||void 0===s?void 0:s.totalMembersAndGuestsCount)??0}}),...t})},action:()=>{u(e.id)},closeParentMenu:!0};return t}))}]),[a,e.teamStores,u]),g=d,m=(0,b().S)(),f=(0,D.jsx)(C().A,{filter:g,context:{blocks:[],environment:s,publicEditMode:void 0,pageContext:m},sections:p,initialFocus:0}),S=(0,D.jsx)(k().A,{isInput:!0,children:(0,D.jsx)(R().Ay,{value:g,onChange:(0,i.useCallback)((e=>{l(e.target.value)}),[]),focus:!0,focusAfterAnimation:!0,placeholder:t.formatMessage(N.filterTeams)})}),x={menuType:w().gu.Popup,width:280,maxHeight:"50vh",header:e.teamStores.length>5?S:void 0};return(0,D.jsx)(j().A,{...x,children:f})}const E=function(e){const t=(0,n().uB)(void 0,v().A),a=(0,o().IS)((()=>({button:{marginInlineEnd:8},noTeams:{marginInlineEnd:8,color:u().Tj.text.tertiary}})),[]),{teams:r}=(0,I().Qs)({spaceStore:e.spaceStore}),d=(0,I().gc)({teams:r,spaceStore:e.spaceStore}).map((e=>e.store)),l=(0,n().K8)((()=>d.filter((t=>t.getRawMembership().some((t=>"group"===t.entity_type&&t.group_id===e.group.group_id))))),[e.group,d]);return(0,D.jsx)(x().A,{popupType:x().z.Popup,renderOrigin:e=>(0,D.jsx)(A().p,{disabled:0===l.length,style:0===l.length?a.noTeams:a.button,...e,iconTrailing:l.length>0?{icon:s(324254).arrowChevronSingleDownSmallIcon,colorVariant:"tertiary",size:"xs"}:void 0,children:0===l.length?(0,D.jsx)(c().sA,{id:"spacePermissionsSettings.groupsTab.userGroup.teamsCountNone",defaultMessage:"None"}):(0,D.jsx)(c().sA,{id:"spacePermissionsSettings.groupsTab.userGroup.teamsCount",defaultMessage:"{numberOfTeams, plural, one {{numberOfTeams} teamspace} other {{numberOfTeams} teamspaces}}",values:{numberOfTeams:l.length}})}),buttonPopupStore:t,placementToOrigin:"bottom",render:e=>(0,D.jsx)(B,{parent:e,teamStores:l}),onClose:(0,i.useCallback)((()=>{t.reset()}),[t])})};var O=()=>s(792057),q=()=>s(127833),U=()=>s(695115),L=()=>s(663639),V=()=>s(126617),F=()=>s(496603),z=()=>s(701763),G=()=>s(547149),K=()=>s(769864);var W=()=>s(510473),H=()=>s(456663),$=()=>s(575143);const Y=(0,c().YK)({groupActions:{id:"groupActionMenu.iconButton.ariaLabel",defaultMessage:"Group actions"}});function Q(e){const{group:t,spaceStore:s,settingsStore:i}=e,o=(0,c().tz)(),a=(0,n().uB)(void 0,v().A);return(0,D.jsx)(x().A,{popupType:q().nl.Popup,render:()=>(0,D.jsx)(Z,{group:t,spaceStore:s,popupStore:a,settingsStore:i}),buttonPopupStore:a,renderOrigin:e=>(0,D.jsx)(U().A,{icon:V().ellipsisSmallIcon,ariaLabel:o.formatMessage(Y.groupActions),...e})})}function Z(e){const{group:t,spaceStore:s,popupStore:a,settingsStore:r}=e,d=(0,n().K8)((()=>s.canAdmin()),[s]),l=(0,y().v3)(),p=(0,n().K8)((()=>(0,h().sx)({environment:l,spaceStore:s})),[s,l]),g=(0,o().IS)((()=>({deleteButton:{color:u().Tj.red.text.accentPrimary}})),[]),m=(0,i.useCallback)((async()=>{a.setState({open:!1});const{accept:e}=await O().Gh({message:(0,D.jsx)(c().sA,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationMessage",defaultMessage:"Are you sure you want to delete this group?"}),description:(0,D.jsx)(c().sA,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationDescription",defaultMessage:"Any pages that are private to this group will be transferred to you."}),acceptLabel:(0,D.jsx)(c().sA,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationButton.label",defaultMessage:"Yes"})});if(e){const e=(0,W().E)({spaceStore:s,groupId:t.group_id});await G().createAndCommitAsync({environment:l,userAction:"SpacePermissionGroup.handleDelete",waitForServerCommit:!1,perform:async t=>{await async function(e){const{environment:t,groupStore:s,transaction:i}=e;await s.load();const n=s.getGroupId(),o=s.getSpaceId();o&&n&&(G().applyOperation({store:s,operation:{pointer:s.pointer,path:[],command:"update",args:{deleted_at:Date.now()}},transaction:i}),await K().callApi({eventName:"transferPermissionGroup",environment:t,data:{spaceId:o,groupId:n}}))}({environment:l,groupStore:e,transaction:t})}}),z().$N(l)}}),[t,l,s,a]),f=(0,i.useCallback)((()=>{r.setState({...r.state,editingNameGroupId:t.group_id,groupNameInputValue:t.name||""}),a.setState({open:!1}),z().yg(l)}),[t,l,a,r]),S=(0,i.useCallback)((()=>{H().A.setState({...H().A.state,name:t.name||"",defaultInviteTargets:[{type:"group",value:t}]}),T().vn("group_settings")}),[t]),b={key:"action_menu",render:e=>(0,D.jsx)(k().A,{...e}),items:F().oE([{key:"rename",render:e=>(0,D.jsx)($().A,{...e,title:(0,D.jsx)(c().sA,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.renameItem",defaultMessage:"Rename"})}),action:f},p?{key:"create_team_from_group",render:e=>(0,D.jsx)($().A,{...e,title:(0,D.jsx)(c().sA,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.createTeamFromGroup",defaultMessage:"Create teamspace from group"})}),action:S}:void 0,d&&{key:"delete",render:e=>(0,D.jsx)($().A,{...e,title:(0,D.jsx)("div",{style:g.deleteButton,children:(0,D.jsx)(c().sA,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.deleteItem",defaultMessage:"Delete"})})}),action:m}])};return(0,D.jsx)(j().A,{menuType:w().gu.Popup,children:(0,D.jsx)(L().A,{type:L().O.Vertical,initialFocus:0,sections:[b],onAccept:()=>{a.setState({open:!1})}})})}var X=()=>s(920198),J=()=>s(278729),ee=()=>s(849255),te=()=>s(396896),se=()=>s(187174),ie=()=>s(848538),ne=()=>s(798880);var oe=()=>s(358075);class ae extends(()=>s(757695))().Store{getInitialState(){return{userInputValue:"",temporaryUserIds:[],limitUsers:!0}}}const re=ae;var de=()=>s(313171),le=()=>s(994006),ce=()=>s(726637),ue=()=>s(160432),pe=()=>s(352321),ge=()=>s(449279),me=()=>s(764880),he=()=>s(842599),fe=()=>s(863330),Se=()=>s(542056),ye=()=>s(322769);function be(e){const{groupMemberStore:t,spaceId:s,groupId:i,userId:n,transaction:o}=e;G().applyOperation({store:t,operation:(0,ye().Fu)({groupId:i,spaceId:s,userId:n}),transaction:o})}var xe=()=>s(106628),ve=()=>s(251126),we=()=>s(448693),Ae=()=>s(457688);function je(e){const{group:t,spaceStore:s,groupStore:i,userIds:a,onAddUsers:r}=e,d=(0,n().uB)(void 0,v().A),l=(0,o().IS)((()=>({popup:{width:400},button:{marginTop:4}})),[]);return(0,D.jsx)(x().A,{popupType:q().nl.Popup,render:()=>(0,D.jsx)(Me,{spaceStore:s,group:t,userIds:a,popupStore:d,groupStore:i,onAddUsers:r}),buttonPopupStore:d,onClose:()=>i.setState({userInputValue:"",temporaryUserIds:[],limitUsers:!0}),style:l.popup,renderOrigin:e=>(0,D.jsx)("div",{children:(0,D.jsx)(A().p,{colorPalette:"gray",iconLeading:{icon:fe().plusSmallIcon,size:"sm"},style:l.button,...e,children:(0,D.jsx)(c().sA,{id:"spacePermissionsSettings.groupsTab.groupList.addMemberButton.label",defaultMessage:"Add members"})})})})}function Me(e){const t=(0,y().v3)(),s=(0,c().tz)(),{group:o,userIds:a,spaceStore:r,popupStore:d,groupStore:l,onAddUsers:u}=e,p=(0,n().K8)((()=>l.state.temporaryUserIds.map((e=>{const t=r.getRecordValue({table:ne().oo,id:e});return(0,D.jsx)(we().t_,{userValue:t,format:we().t_.Format.Medium,showRemoveButton:!0,onClickRemove:()=>{const t=l.state.temporaryUserIds.filter((t=>t!==e));l.setState({...l.state,temporaryUserIds:t})},shouldShrink:!0,isSingle:!1,hasPersonHoverCard:!1},e)}))),[r,l]),g=(0,n().K8)((()=>()=>{const{temporaryUserIds:e}=l.state;G().createAndCommit({userAction:"SpacePermissionGroup.handleAddDoneClick",environment:t,canUndo:!0,perform:t=>{for(const i of e){be({groupMemberStore:(0,W().A)({spaceStore:r,groupId:o.group_id,userId:i}),spaceId:r.id,groupId:o.group_id,userId:i,transaction:t})}u(e);const s=f().h.getGroupData(o.group_id);s&&f().h.updateGroup(o.group_id,{group:o,memberCount:s.memberCount+e.length})}}),l.setState({userInputValue:"",temporaryUserIds:[],limitUsers:!0}),d.setState({open:!1}),z().s$(t,{add_member_count:e.length})}),[l,t,d,r,o,u]),m=(0,i.useCallback)((()=>{const{temporaryUserIds:e}=l.state,t=e.slice(0,e.length-1);l.setState({...l.state,temporaryUserIds:t})}),[l]),h=(0,i.useCallback)((async e=>{const s=e.target.value,{extractedEmails:i,newInputValue:n}=(0,he().Ct)(s),o=(await Se().Ah(t,i)).filter((e=>e.value.id&&!l.state.temporaryUserIds.includes(e.value.id)));l.setState({...l.state,temporaryUserIds:[...l.state.temporaryUserIds,...F().oE(o.map((e=>e.value.id)))],userInputValue:n})}),[t,l]),S=(0,n().K8)((()=>l.state.userInputValue),[l]),b=(0,n().K8)((()=>l.state.temporaryUserIds),[l]);return(0,D.jsx)(j().A,{menuType:w().gu.Popup,tokenInputHeader:!0,header:(0,D.jsx)(pe().Ay,{focus:!0,disabled:!1,focusAfterAnimation:!0,format:pe().le.Group,tokens:p,placeholder:s.formatMessage({id:"spacePermissionsSettings.groupsTab.userGroup.userSearchInput.placeholder",defaultMessage:"Search for a person…"}),onRemoveLastToken:m,value:S,onChange:h,inputAndTokenWrapRightStyle:{paddingTop:ce().A.isMobile?0:6,paddingBottom:ce().A.isMobile?0:6,paddingInlineStart:ce().A.isMobile?0:6},right:(0,D.jsx)(ue().A,{colorPalette:"blue",size:"lg",onClick:g,children:(0,D.jsx)(c().sA,{id:"spacePermissionsSettings.groupsTab.userGroup.addUserButton.label",defaultMessage:"Add"})})}),children:(0,D.jsx)(ve().A,{request:{query:S,temporaryUserIds:b},performRequest:async({query:e,temporaryUserIds:s})=>{const i=await xe().T.searchActions.load();return(await i.searchSpaceUsers({environment:t,query:e,membersOnly:!0,limit:20+s.length+a.length})).filter((e=>a.indexOf(e.id)<0&&s.indexOf(e.id)<0)).slice(0,20)},render:(e,t)=>(0,D.jsx)(ke,{results:t,spaceStore:r,groupStore:l})})})}function ke(e){const{spaceStore:t,groupStore:s}=e,i=(0,c().tz)(),[o,a]=(0,n().$y)(s,re),r=(e.results||[]).map((({id:e})=>e)),d=(0,n().K8)((()=>!1===t.getSetting("enable_permission_group_restricted_members")),[t]),l=(0,n().K8)((()=>r.map((e=>{const s=ee().L.createChildStore(t,{table:ne().oo,id:e}).getValue(),n=J().V.createChildStore(t,(0,ie().i1)({userId:e,spaceId:t.id})).isRestrictedMember(),r={key:e,render:e=>(0,D.jsx)(Ae().A,{...e,disabled:d&&n,tooltip:d&&n?i.formatMessage({id:"spacePermissionsSettings.groupsTab.userGroup.searchUserDropdown.restrictedMemberDisabledFeedback",defaultMessage:"Permission groups are disabled for restricted members"}):void 0,disabledFeedback:d&&n,actor:(0,me().MR)(s),useEmailAsTooltip:!n||!d,badge:n?(0,D.jsx)(de().L,{}):void 0}),action:()=>{const t=[...o.temporaryUserIds,e];a({...o,temporaryUserIds:t,userInputValue:""})}};return r}))),[t,a,o,r,i,d]);if(0===r.length)return(0,D.jsx)(k().A,{children:(0,D.jsx)(ge().u,{title:(0,D.jsx)(c().sA,{id:"spacePermissionsSettings.groupsTab.userGroup.searchUserDropdown.noResultsMessage",defaultMessage:"No results"})})});{const e={key:"user_menu",render:e=>(0,D.jsx)(k().A,{...e}),items:l};return(0,D.jsx)(L().A,{type:L().O.Vertical,initialFocus:0,sections:[e]})}}const Ce=10;function Ie(e){const{group:t,canEdit:s,spaceStore:o,settingsStore:a}=e,r=(0,c().tz)(),d=(0,y().v3)(),l=(0,X().L)(),u=(0,n().uB)(void 0,re),p=(0,n().K8)((()=>u.state.limitUsers&&!a.state.groupsFilter?Ce:void 0),[u,a]),[{value:g}]=(0,se().Yb)((async()=>{const e=await d.api.callApi({eventName:"getSpacePermissionGroupMembers",environment:d,data:{groupIds:[t.group_id],spaceId:o.id}});if("success"===e.type){var s;const i=((null===(s=e.data.groupUsersMap[t.group_id])||void 0===s?void 0:s.userIds)??[]).map((e=>ee().L.createChildStore(o,{table:ne().oo,id:e})));return{allUserStores:(0,m().cp)({userStores:i,spaceStore:l,intl:r})}}}),[l,d,t,r,o]),[h,f]=(0,i.useState)([]);(0,i.useEffect)((()=>{null!=g&&g.allUserStores&&f(g.allUserStores)}),[null==g?void 0:g.allUserStores]);const[S,b]=(0,i.useState)([]);return(0,i.useEffect)((()=>{b(p?h.slice(0,p):h)}),[h,p]),(0,D.jsxs)("div",{style:{padding:"4px 42px 8px"},children:[S.map((t=>(0,D.jsx)(_e,{userStore:t,...e,onRemoveUser:e=>{f(h.filter((t=>t.id!==e))),b(S.filter((t=>t.id!==e)))}},t.id))),p&&h.length>p?(0,D.jsx)(A().p,{colorPalette:"gray",style:{marginTop:4},onClick:()=>{u.setState({...u.state,limitUsers:!1})},children:(0,D.jsx)(c().sA,{id:"spacePermissionsSettings.groupsTab.showMoreUsersButton.label",defaultMessage:"{numberOfHiddenUsers, plural, one {Show {numberOfHiddenUsers} more} other {Show {numberOfHiddenUsers} more}}",values:{numberOfHiddenUsers:h.length-S.length}})}):void 0,s&&l?(0,D.jsx)(je,{group:t,spaceStore:o,groupStore:u,userIds:h.map((e=>e.id))||[],onAddUsers:e=>{const t=e.map((e=>ee().L.createChildStore(o,{table:ne().oo,id:e})));f([...h,...t])}}):S.length<1&&(0,D.jsx)(A().p,{disabled:!0,colorPalette:"gray",children:(0,D.jsx)(c().sA,{id:"spacePermissionsSettings.groupsTab.groupList.noMembersInside",defaultMessage:"No members inside"})})]})}function _e(e){const{spaceStore:t,userStore:s,group:i,canEdit:o,onRemoveUser:a}=e,r=(0,y().v3)(),d=(0,n().K8)((()=>J().V.createChildStore(t,(0,ie().i1)({userId:s.id,spaceId:t.id})).getMembershipType()),[t,s]);return(0,D.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,D.jsxs)(te().fI,{gap:6,alignItems:"center",children:[(0,D.jsx)(le().A,{userStore:s,style:{fontSize:14,fontWeight:400,lineHeight:"17px",minHeight:34,width:"100%"},avatarSize:22,hasPersonHoverCard:!1}),(0,ie().LF)(d)?(0,D.jsx)(oe().l,{role:d}):void 0,(0,ie().GN)(d)?(0,D.jsx)(de().L,{}):void 0]}),o?(0,D.jsx)(A().p,{colorPalette:"gray",hoveredStyle:{color:u().oZ.red},onClick:async()=>{const{accept:e}=await O().Gh({message:(0,D.jsx)(c().sA,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupDialog.confirmationMessage",defaultMessage:"Are you sure you want to remove this member?"}),acceptLabel:(0,D.jsx)(c().sA,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupDialog.confirmationButton.label",defaultMessage:"Yes"})});e&&(G().createAndCommit({userAction:"SpacePermissionGroup.removeUser",environment:r,canUndo:!0,perform:e=>{!function(e){const{groupMemberStore:t,transaction:s}=e;G().applyOperation({store:t,operation:{command:"update",pointer:t.pointer,path:[],args:{removed_at:Date.now()}},transaction:s})}({transaction:e,groupMemberStore:(0,W().A)({spaceStore:t,groupId:i.group_id,userId:s.id})}),a(s.id);const n=f().h.getGroupData(i.group_id);n&&f().h.updateGroup(i.group_id,{group:i,memberCount:n.memberCount>=1?n.memberCount-1:0})}}),z().G8(r))},children:(0,D.jsx)(c().sA,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupButton.label",defaultMessage:"Remove"})}):void 0]},s.id)}var Te=()=>s(782482),Pe=()=>s(609679),Re=()=>s(807449),De=()=>s(31511),Ne=()=>s(26697),Be=()=>s(709837),Ee=()=>s(621837),Oe=()=>s(945778),qe=()=>s(268845),Ue=()=>s(437607),Le=()=>s(648685),Ve=()=>s(403409),Fe=()=>s(173783),ze=()=>s(187820),Ge=()=>s(132389),Ke=()=>s(606273);function We(e){const{row:t,canEdit:s,open:a,toggleOpenState:d,spaceStore:l,settingsStore:p}=e,h=t.group,S=(0,c().tz)(),b=(0,y().v3)(),x=h.group_id,v=(0,n().K8)((()=>{var e;return null===(e=f().h.getGroupData(x))||void 0===e||null===(e=e.membershipTypes)||void 0===e?void 0:e.includes("restricted_member")}),[x]),w=m().Pf({intl:S,groupName:h.name}),A=(0,o().IS)((()=>({container:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%"},toggle:{flexShrink:0,marginInlineEnd:2},name:{fontFamily:g().vc(Pe().locale).sans,fontSize:14,lineHeight:"17px",marginInlineEnd:v?0:4},input:{fontWeight:g().Wy.medium,padding:"4px 6px",background:u().Tj.contentBackgroundTransparent}})),[v]),j=(0,i.useCallback)((e=>{const t=Date.now();G().createAndCommit({userAction:"SpacePermissionGroup.handleIconChange",environment:b,canUndo:!0,perform:s=>{(0,Le().O)({spacePermissionGroupStore:(0,W().E)({spaceStore:l,groupId:h.group_id}),transaction:s,value:{icon:e,last_edited_at:t}})}});const s={id:(0,Ue().gK)({spacePermissionGroupId:h.group_id,spaceId:l.id}),icon:e,name:h.name,group_id:h.group_id,space_id:h.space_id,version:h.getVersion(),created_by_id:h.created_by_id,created_by_table:h.created_by_table,created_at:h.created_at,last_edited_by_id:h.last_edited_by_id,last_edited_at:t,last_edited_by_table:h.last_edited_by_table};f().h.updateGroup(h.group_id,{group:qe().B.fromValue(Ue().n,s)}),z().Nn(b,{is_emoji:(0,Oe().A)(e)})}),[h,l,b]),M=(0,i.useCallback)((()=>{p.setState({...p.state,editingNameGroupId:void 0,groupNameInputValue:""})}),[p]),k=(0,i.useCallback)((e=>{p.setState({...p.state,groupNameInputValue:e.target.value})}),[p]),C=(0,i.useCallback)((()=>{const{editingNameGroupId:e,groupNameInputValue:t}=p.state,s=t.trim(),i=Date.now();if(e===h.group_id){if(s!==h.name){const e=(0,W().E)({spaceStore:l,groupId:h.group_id});G().createAndCommit({userAction:"SpacePermissionGroup.handleNameAccept",environment:b,canUndo:!0,perform:t=>{(0,Le().O)({spacePermissionGroupStore:e,value:{name:s,last_edited_at:i},transaction:t})}})}const e={id:(0,Ue().gK)({spacePermissionGroupId:h.group_id,spaceId:l.id}),icon:h.icon,name:s,group_id:h.group_id,space_id:h.space_id,version:h.getVersion(),created_by_id:h.created_by_id,created_by_table:h.created_by_table,created_at:h.created_at,last_edited_by_id:h.last_edited_by_id,last_edited_at:i,last_edited_by_table:h.last_edited_by_table};f().h.updateGroup(h.group_id,{group:qe().B.fromValue(Ue().n,e)}),p.setState({...p.state,editingNameGroupId:void 0,groupNameInputValue:""})}}),[h,b,l,p]),I=(0,n().K8)((()=>p.state.editingNameGroupId===h.group_id),[h,p]),_=(0,n().K8)((()=>p.state.groupNameInputValue),[p]);return(0,D.jsxs)("div",{style:A.container,children:[(0,D.jsx)(Ke().f,{isSidebar:!1,fill:!0,icon:"chevron",open:a,color:u().Tj.icon.secondary,onClick:()=>d(h.group_id),style:A.toggle}),(0,D.jsx)("div",{style:{marginInlineEnd:8},children:(0,D.jsx)(Fe().A,{size:28})}),I?(0,D.jsx)(Te().N,{debugName:"GroupNameToggle",capture:!0,onEsc:M,children:(0,D.jsx)(De().A,{disabled:!s,type:Ve().e.Inline,style:A.input,placeholder:S.formatMessage({id:"spacePermissionsSettings.groupsTab.userGroup.groupNameInput.placeholder",defaultMessage:"Untitled"}),focus:!0,value:_,onChange:k,onBlur:C,onSubmit:C})}):(0,D.jsxs)(te().fI,{gap:6,alignItems:"center",children:[(0,D.jsx)(r().A,{style:A.name,showTooltipWhenTruncated:!0,children:w}),v?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(Ne().m,{renderTooltip:()=>(0,D.jsx)(c().sA,{defaultMessage:"This group contains restricted members",id:"spacePermissionsSettings.groupsTab.userGroup.groupName.restrictedMemberTooltip"}),render:e=>(0,D.jsx)("div",{...e,children:(0,D.jsx)(de().L,{})})}),(0,D.jsx)(Ge().A,{size:4})]}):void 0]}),(T=t.isRowHovered,h.icon?s?(0,D.jsx)(ze().B6,{disabled:!1,bucket:"public",icon:h.icon?{pointer:l.pointer,icon:h.icon}:void 0,size:18,isEmptyPage:!1,title:w,onChange:j}):(0,D.jsx)(ze().B6,{disabled:!0,bucket:"public",icon:h.icon?{pointer:l.pointer,icon:h.icon}:void 0,size:18,isEmptyPage:!1,title:w}):T&&s?(0,D.jsx)(Ne().m,{renderTooltip:()=>(0,D.jsx)(c().sA,{defaultMessage:"Add icon",id:"spacePermissionsSettings.groupsTab.userGroup.groupIcon.tooltip"}),render:e=>(0,D.jsx)(ze().B6,{disabled:!1,bucket:"public",icon:h.icon?{pointer:l.pointer,icon:h.icon}:void 0,size:18,isEmptyPage:!1,title:w,onChange:j,style:{width:30},defaultIcon:(0,D.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[(0,D.jsx)(Re().I,{icon:Be().emojiFaceSmallIcon,colorVariant:"secondary",size:"xs"}),(0,D.jsx)(Re().I,{icon:Ee().plusFillSmallIcon,colorVariant:"secondary",size:"xxs"})]}),...e})}):void 0)]});var T}function He({canEdit:e,spaceStore:t,permissionsSettingsStore:s,containerMarginTop:m,upsell:y}){const[b,x]=(0,i.useState)([]),v=(0,n().K8)((()=>f().h.getAllGroups()),[]),w=(0,n().K8)((()=>0!==(0,h().zI)({spaceStore:t})),[t]),A=(0,n().K8)((()=>(0,p().Ay)(s.state.groupsFilter,v,(e=>e.name||""))),[s,v]),j=(0,i.useCallback)((e=>{x((t=>t.includes(e)?t.filter((t=>t!==e)):t.concat(e)))}),[x]),M=(0,i.useMemo)((()=>function(e){return e.map((e=>({id:e.group_id,group:e,isClickable:!1})))}(A)),[A]),k=(0,i.useMemo)((()=>function({openRowIds:e,toggleOpenRowId:t,canEdit:s,showTeamsColumn:i,spaceStore:n,settingsStore:o}){const a={id:"title",headerTitle:(0,D.jsx)(c().sA,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.groups",defaultMessage:"Group"}),renderCell:i=>(0,D.jsx)(We,{row:i,open:e.includes(i.id),toggleOpenState:t,canEdit:s,spaceStore:n,settingsStore:o}),widthData:{width:120},hasClickableContents:!1,sortable:!1},r={id:"teams",headerTitle:(0,D.jsx)("div",{style:{paddingInlineStart:8},children:(0,D.jsx)(c().sA,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.teams",defaultMessage:"Teamspaces"})}),renderCell:e=>(0,D.jsx)("div",{style:g().RC,children:(0,D.jsx)(E,{group:e.group,spaceStore:n})}),widthData:{width:40},hasClickableContents:!1,sortable:!1},d={id:"members",headerTitle:(0,D.jsx)(c().sA,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.member",defaultMessage:"Members"}),renderCell:e=>(0,D.jsx)($e,{row:e}),widthData:{width:40},hasClickableContents:!1,sortable:!1},l={id:"menu",headerTitle:null,renderCell:e=>(0,D.jsx)(Q,{group:e.group,spaceStore:n,settingsStore:o}),widthData:{width:20},hasClickableContents:!0,sortable:!1};return[a,...i?[r]:[],d,...s?[l]:[]]}({openRowIds:b,toggleOpenRowId:j,canEdit:e,showTeamsColumn:w,spaceStore:t,settingsStore:s})),[b,j,e,w,t,s]),C=(0,a().rC)({columnRenderInfo:k,containerMarginTop:m}),I=(0,o().IS)((()=>({noRowContainer:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",gap:4,borderBottom:`1px solid ${u().Tj.border.primary}`},emptyStateContainer:{position:"absolute",top:"50%",insetInlineStart:"50%",transform:"translate(calc(var(--direction, 1) * -50%), -50%)"}})),[]);return(0,D.jsx)(a().WE,{showRowBorders:!0,hideHeaderRowPadding:!0,columnRenderInfo:k,rows:M,styles:C,renderNoRowsComponent:()=>(0,l().wy)(y)?(0,D.jsx)("div",{style:I.emptyStateContainer,children:(0,D.jsx)(S().V,{icon:d().F,title:(0,D.jsx)(c().sA,{defaultMessage:"Set up groups",id:"spaceGroupsUpsell.upgradeEmptyState.title"}),description:(0,D.jsx)(c().sA,{defaultMessage:"Get the Plus plan to create groups inside one workspace and grant them different levels of access",id:"spaceGroupsUpsell.upgradeEmptyState.description"}),source:"permission_groups",upsell:y,spaceStore:t})}):(0,D.jsx)(r().A,{isSmall:!0,style:I.noRowContainer,children:v.length>0?(0,D.jsx)(c().sA,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.noGroupsFound",defaultMessage:"No groups found"}):(0,D.jsx)(c().sA,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.noGroups",defaultMessage:"No groups"})}),renderRowChild:i=>b.includes(i.id)?(0,D.jsx)(Ie,{group:i.group,canEdit:e,spaceStore:t,settingsStore:s}):void 0})}function $e(e){const{row:t}=e,s=(0,n().K8)((()=>(0,m().xQ)({groupId:t.group.group_id})),[t.group]);return(0,D.jsx)("div",{style:g().RC,children:(0,D.jsx)(c().sA,{id:"spacePermissionsSettings.groupsTab.userGroup.memberCount",defaultMessage:"{numberOfGroupMembers, plural, one {{numberOfGroupMembers} member} other {{numberOfGroupMembers} members}}",values:{numberOfGroupMembers:s}})})}},289251:(e,t,s)=>{s.d(t,{A:()=>y});var i=s(296540),n=()=>s(920198),o=()=>s(907258),a=()=>s(484714),r=()=>s(590526),d=()=>s(609679),l=()=>s(26697),c=()=>s(869190),u=()=>s(736501),p=()=>s(842599),g=()=>s(69708),m=()=>s(769864),h=()=>s(378765),f=()=>s(702723),S=s(474848);const y=function({emailDomainSettings:e}){const t=(0,a().v3)(),n=(0,r().uB)(void 0,s(442610).A),o=(0,i.useCallback)(((t,s,i)=>(0,S.jsx)(j,{emailDomainSettings:e,requestStore:n,error:t,result:s,ready:i})),[e,n]),d=(0,s(106702).$)();return d?(0,S.jsx)(s(251126).A,{requestStore:n,request:{userId:d.id,expiryTime:Date.now()+u().f},performRequest:e=>async function(e,t){const s=await m().callApi({eventName:"getDataAccessConsent",environment:t,data:{}});if("failed"===s.type)throw s.error;return s.data}(0,t),render:o}):null};function b(e){return Boolean(e.prevent_granting_support_access)}function x(e){const t=(0,n().L)(),{accessGranted:s,onClick:i,expiryTime:o,emailDomainSettings:a}=e;return(0,S.jsx)(f().A,{spaceStore:t,disabled:b(a),title:(0,S.jsx)(g().sA,{id:"personalSettings.supportSection.userDataConsentSettings.label",defaultMessage:"Support access"}),caption:s&&o?(0,S.jsx)(g().sA,{id:"userDataConsentSettings.accessGranted.label",defaultMessage:"You have granted Notion access to your account for support purposes until {expiryTime}.",values:{expiryTime:(0,c().W_)(o,"medium_with_time",d().locale)}}):(0,S.jsx)(g().sA,{id:"personalSettings.supportSection.userDataConsentSettings.message",defaultMessage:"Grant Notion support temporary access to your account so we can troubleshoot problems or recover content on your behalf. You can revoke access at any time."}),type:"toggle",isOn:s,onToggle:i})}function v(e){const{accessGranted:t,onClick:s,expiryTime:i,emailDomainSettings:n}=e,a=(0,r().K8)((()=>{var e;const t=null===(e=o().default.state.currentUserStore)||void 0===e?void 0:e.getEmail();return t?(0,p().zN)(t):void 0}),[]);return(0,S.jsx)(l().m,{disableTooltip:!b(n),renderTooltip:()=>(0,S.jsx)(g().sA,{id:"userDataConsentSetting.disabledByOrganization",defaultMessage:"Granting support access has been disabled by your organization, {emailDomain}",values:{emailDomain:a}}),placement:"bottom",alignment:"center",render:e=>(0,S.jsx)("div",{...e,children:(0,S.jsx)(x,{emailDomainSettings:n,accessGranted:t,onClick:s,expiryTime:i})})})}async function w(e,t,s){const i=await m().callApi({eventName:"setDataAccessConsent",environment:t,data:e});if("success"===i.type&&i.data){const e=s.state;s.setState({...e,result:i.data})}}function A({emailDomainSettings:e,requestStore:t}){const s=(0,a().v3)(),n=(0,i.useCallback)((()=>async function(e,t,s){b(t)||await w({expiryTime:Date.now()+u().f},e,s)}(s,e,t)),[s,e,t]),o=(0,i.useCallback)((()=>async function(e,t,s){b(t)||await w({},e,s)}(s,e,t)),[s,e,t]),d=(0,r().K8)((()=>{var e;return null===(e=t.state.result)||void 0===e?void 0:e.expiryTime}),[t]),l=Boolean(d&&Number(d)>Date.now()),c=l?o:n;return(0,S.jsx)(v,{emailDomainSettings:e,accessGranted:l,onClick:c,expiryTime:d})}function j({error:e,result:t,ready:s,emailDomainSettings:i,requestStore:n}){const o=(0,g().tz)();return(0,S.jsx)(h().A,{loaded:s,spinnerSize:"sm",showSpinnerTimeout:600,children:e||!t?(0,S.jsx)("div",{children:o.formatMessage({id:"userDataConsent.render.error",defaultMessage:"Something went wrong"})}):(0,S.jsx)(A,{emailDomainSettings:i,requestStore:n})})}},299895:(e,t,s)=>{s.d(t,{A:()=>b});var i=s(296540),n=()=>s(590526),o=()=>s(401497),a=()=>s(849255),r=()=>s(265060),d=()=>s(493552),l=()=>s(26697),c=()=>s(933266),u=()=>s(798880),p=()=>s(69708),g=()=>s(100622),m=()=>s(284371),h=()=>s(453697),f=()=>s(476178),S=()=>s(287414),y=s(474848);function b({userId:e,spaceStore:t,restorationStatus:s,isInternalGuest:b,isForSuggestionsTable:x}){const v=(0,p().tz)().formatMessage({id:"peopleSettings.userCell.guest",defaultMessage:"Guest"}),{name:w,email:A,userStore:j,styles:M}=function({userId:e,spaceStore:t,isForSuggestionsTable:s}){const i=(0,o().IS)((()=>({container:{display:"flex",alignItems:"center",fontSize:m().J.UIRegular.desktop,width:"100%",justifyContent:"space-between"},titleContainer:{maxWidth:s?210:163},userAvatarWrapper:{position:"relative"},userAvatarIcon:{position:"absolute",insetInlineStart:17,top:18},userName:{height:17,alignSelf:"stretch",fontSize:m().J.UIRegular.desktop,fontStyle:"normal",fontWeight:510,lineHeight:"18px",...m().RC},userEmail:{height:17,alignSelf:"stretch",fontSize:m().J.UISmall.desktop,fontStyle:"normal",fontWeight:400,lineHeight:"15px",color:g().Tj.text.secondary,...m().RC},nameContainer:{display:"flex",alignItems:"center",gap:10,marginTop:4,marginBottom:4}})),[s]),r=(0,p().tz)(),d=a().L.createChildStore(t,{table:u().oo,id:e}),{name:l,email:c}=(0,n().K8)((()=>({name:d.getDisplayName(r),email:d.getEmail()})),[d,r]);return{name:l,email:c,styles:i,userStore:d}}({userId:e,spaceStore:t,isForSuggestionsTable:x}),[k,C]=(0,i.useState)(!1);return(0,y.jsxs)("div",{style:M.container,children:[(0,y.jsxs)("div",{style:M.nameContainer,children:[(0,y.jsxs)("div",{style:M.userAvatarWrapper,children:[(0,y.jsx)(h().A,{userStore:j,size:28}),b?(0,y.jsx)(l().m,{style:{width:250},textWrap:!0,placement:"right",alignment:"start",render:e=>(0,y.jsx)("div",{...e,style:M.userAvatarIcon,children:(0,y.jsx)(r().Q,{iconGroup:c().h,colorVariant:"secondary",variantName:"fillSmall",size:"xs"})}),renderTooltip:()=>(0,y.jsxs)("div",{children:[(0,y.jsx)(d().D,{styleKey:"captionMedium",colorVariant:"inversePrimary",children:(0,y.jsx)(p().sA,{id:"userCell.internalGuest.tooltip.title",defaultMessage:"Using an email domain associated with your workspace"})}),(0,y.jsx)(d().D,{styleKey:"captionMedium",colorVariant:"inverseSecondary",children:(0,y.jsx)(p().sA,{id:"userCell.internalGuest.tooltip.description",defaultMessage:"You’ll see this icon for users who have a workspace owner email domain, verified domain, or allowed email domain"})})]})}):void 0]}),(0,y.jsxs)("div",{style:M.titleContainer,children:[(0,y.jsx)("div",{style:M.userName,title:x?A:w,children:x?A:w}),(0,y.jsx)("div",{style:M.userEmail,title:x?v:A,children:x?v:A}),s?(0,y.jsx)(f().A,{spaceStore:t,restorationStatus:s,didAttemptRecovery:k}):void 0]})]}),k||"canBeRestored"!==(null==s?void 0:s.status)?void 0:(0,y.jsx)(S().A,{spaceId:t.id,userStore:j,onSubmit:()=>C(!0)})]})}},306044:(e,t,s)=>{s.d(t,{K:()=>w});s(944114);var i=s(296540),n=()=>s(726637),o=()=>s(484714),a=()=>s(590526),r=()=>s(401497),d=()=>s(302501),l=()=>s(427704),c=()=>s(564766),u=()=>s(69708),p=()=>s(692031),g=()=>s(212497),m=()=>s(416783),h=()=>s(26697),f=s(474848);function S({tooltip:e,text:t}){const s=(0,o().v3)();return(0,f.jsx)(h().m,{delayThreshold:0,renderTooltip:()=>e,render:e=>(0,f.jsx)(m().V,{onClick:async()=>{const[e,i]=await Promise.all([(0,p().r)(),(0,g().jd)()]);i({environment:s,stringValue:t,copiedMessage:e.copiedPropertyToClipboard})},...e,children:t})})}var y=()=>s(249117),b=()=>s(8178),x=()=>s(109113),v=()=>s(789586);function w({spaceStore:e,showDomain:t}){const s=(0,o().v3)(),p=(0,u().tz)(),g=(0,a().K8)((()=>e.getPublicContentDomain()),[e]),m=(0,r().IS)((()=>({header:{marginTop:36}})),[]),h=(0,v().P)({name:"saml",spaceId:e.id,userId:s.currentUser.id}),w=(0,v().P)({name:"scim",spaceId:e.id,userId:s.currentUser.id}),A=[];return(0,x().H)()||A.push({label:(0,f.jsx)(u().sA,{id:"securitySAMLSettings.SetupInformationSection.workspaceId",defaultMessage:"Workspace ID"}),content:(0,f.jsx)(S,{text:e.id,tooltip:p.formatMessage({id:"securitySAMLSettings.SetupInformationSection.workspaceId.copyTooltip",defaultMessage:"Click to copy ID"})})}),h&&A.push({label:(0,f.jsx)(u().sA,{id:"securitySAMLSettings.SetupInformationSection.samlSSOEntityIDLink",defaultMessage:"SAML SSO/SAML Entity ID"}),content:(0,f.jsx)(S,{text:(0,c().Hw)(n().A.domainBaseUrl),tooltip:p.formatMessage({id:"securitySAMLSettings.SetupInformationSection.samlSSOEntityID.copyTooltip",defaultMessage:"Click to copy link"})})}),w&&A.push({label:(0,f.jsx)(u().sA,{id:"securitySAMLSettings.SetupInformationSection.scimBaseUrl",defaultMessage:"SCIM base URL"}),content:(0,f.jsx)(S,{text:n().A.domainBaseUrl+l().JZ.scimApiBasePath,tooltip:p.formatMessage({id:"securitySAMLSettings.SetupInformationSection.scimBaseUrl.copyTooltip",defaultMessage:"Click to copy link"})})}),t&&void 0!==g&&A.push({label:(0,f.jsx)(u().sA,{id:"securitySAMLSettings.SetupInformationSection.workspaceDomain",defaultMessage:"Workspace Domain"}),content:(0,f.jsx)(S,{text:g,tooltip:p.formatMessage({id:"securitySAMLSettings.SetupInformationSection.workspaceDomain.copyTooltip",defaultMessage:"Click to copy domain"})})}),A.length?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(b().A,{large:!0,divider:"full",style:m.header,children:(0,f.jsx)(u().sA,{id:"identityProvisioningSettings.setupInfo.title",defaultMessage:"Setup information"})}),(0,f.jsx)(y().xA,{gap:8,children:A.map(((e,t)=>(0,f.jsxs)(i.Fragment,{children:[(0,f.jsx)(y().LX,{row:t+1,col:1,children:(0,f.jsx)(d().A,{isSmall:!0,isMultiline:!0,children:e.label})}),(0,f.jsx)(y().LX,{row:t+1,col:2,children:(0,f.jsx)(d().A,{isSmall:!0,isMultiline:!0,children:e.content})})]},t)))})]}):null}},309049:(e,t,s)=>{s.d(t,{A:()=>n});class i extends(()=>s(757695))().Store{getInitialState(){return{count:0}}}const n=new i},314907:(e,t,s)=>{s.d(t,{E:()=>o});var i=()=>s(741615),n=()=>s(795523);function o(e){const{spaceId:t}=e,s=(0,i().lh)({spaceId:t});return(0,n().Fq)(s)}},317025:(e,t,s)=>{s.d(t,{$D:()=>c,c3:()=>u,qU:()=>l});s(296540);var i=()=>s(128933),n=()=>s(69708),o=()=>s(134696),a=()=>s(701763),r=()=>s(496414),d=s(474848);function l(e){a().CW(e,{type:"request"}),o().vX(e,{type:"request",from:"settings_modal"})}function c(){const e=(0,n().YK)({invitingMembers:{id:"sidebarFooter.inviteMember.loadingMessage",defaultMessage:"Updating…"}});r().m({message:e.invitingMembers})}function u(e,t){r().V();const s=e?(0,d.jsx)(n().sA,{id:"sidebarFooter.inviteMember.successToastMessage",defaultMessage:"Successfully sent"}):(0,d.jsx)(n().sA,{id:"sidebarFooter.inviteMember.failureToastMessage",defaultMessage:"Failed to send invites"});i().D6({label:s})}},318575:(e,t,s)=>{s.d(t,{U:()=>l,r:()=>d});s(898992),s(354520),s(672577);var i=()=>s(821062),n=()=>s(534177),o=()=>s(398194),a=()=>s(478525);const r={settingsVerifyWithPassword:a().xc.incorrectPassword,settingsVerifyWithSMS:a().xc.smsIncorrectCode,settingsVerifyWithTOTP:a().xc.totpIncorrectCode,settingsVerifyWithBackupCode:a().xc.backupCodeIncorrectCode};class d extends(()=>s(757695))().Store{getInitialState(){return{step:"settingsUninitialized"}}}class l extends(()=>s(658921))()._{constructor(e,t){super(e,"settings"),this.service=void 0,this.service=t}settingsConfirmIdentityForPasswordSetting(){this.checkStep("settingsUninitialized")&&(this.store.setState({step:"settingsConfirmIdentity",source:"passwordSetting"}),this.doConfirmIdentity().catch(this.handleUnexpectedError))}settingsConfirmIdentityForSettings(){this.checkStep(["settingsUninitialized","settingsDeleteSettings","settingsDisableMFA"])&&(this.store.setState({step:"settingsConfirmIdentity",source:"settings"}),this.doConfirmIdentity().catch(this.handleUnexpectedError))}settingsVerifyPassword(e){const t=this.checkStep("settingsVerifyWithPassword");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithPassword(e).catch(this.handleUnexpectedError))}settingsForgotPassword(e){const t=this.checkStep("settingsVerifyWithPassword");t&&(this.store.setState({...t,isForgotPasswordLoading:!0}),this.doForgotPassword(e).catch(this.handleUnexpectedError))}settingsChooseVerifyMethod(e){const t=this.checkStep("settingsVerifyChooseMFAMethod");if(!t)return;const s=e.mfaMethod;switch(s){case"sms":this.store.setState({...t,isSMSLoading:!0,chosenMfaSettingId:e.mfaSettingId}),this.doVerifyIdentitySendSMS({mfaSetting:e});break;case"totp":this.store.setState({mfaSetting:e,step:"settingsVerifyWithTOTP",isLoading:!1,source:t.source});break;case"backup_code":this.store.setState({step:"settingsVerifyWithBackupCode",isLoading:!1,source:t.source});break;default:(0,n().HB)(s)}}settingsTryAnotherMethod(){this.checkStep(["settingsVerifyWithSMS","settingsVerifyWithTOTP","settingsVerifyWithBackupCode"])&&this.doTryAnotherMethod().catch(this.handleUnexpectedError)}settingsVerifyTOTP(e){const t=this.checkStep("settingsVerifyWithTOTP");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithTOTP(e).catch(this.handleUnexpectedError))}settingsVerifySMS(e){const t=this.checkStep("settingsVerifyWithSMS");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithSMS(e).catch(this.handleUnexpectedError))}settingsVerifyResendSMS(e){const t=this.checkStep("settingsVerifyWithSMS");t&&(this.store.setState({...t,resentStatus:"resending"}),this.doVerifyIdentityResendSMS(e).catch(this.handleUnexpectedError))}settingsVerifyBackupCode(e){const t=this.checkStep("settingsVerifyWithBackupCode");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithBackupCode({code:e}).catch(this.handleUnexpectedError))}settingsShow(e){const{refresh:t}=e,s=this.getCurrentStep();if("settingsUninitialized"===s.step)return this.settingsConfirmIdentityForSettings();t&&("settingsShowSettings"===s.step||"settingsInitialSetup"===s.step)&&(this.store.setState({step:"settingsLoadSettings"}),this.doLoadSettings().catch(this.handleUnexpectedError))}settingsUpdate(e){this.checkStep("settingsShowSettings")&&this.doUpdateSettings(e).catch(this.handleUnexpectedError)}passkeySettingsShow(){this.store.setState({step:"settingsPasskeyLoadSettings"}),this.doLoadPasskeySettings({nameNewSetting:!1}).catch(this.handleUnexpectedError)}settingsPasskeyAddSetting(e,t={fromNudge:!1}){const{fromNudge:s}=t;(s||this.checkStep(["settingsPasskeyShowSettings","settingsPasskeyNameNewSetting"]))&&this.doCreatePasskeySetting(e,{fromNudge:s}).catch(this.handleUnexpectedError)}settingsPasskeyRenameSetting(e){this.checkStep(["settingsPasskeyShowSettings","settingsPasskeyNameNewSetting"])&&this.doRenamePasskeySetting(e).catch(this.handleUnexpectedError)}settingsDeletePasskeySetting(){const e=this.checkStep("settingsDeletePasskeySetting");e&&this.doDeletePasskeySetting({passkeyAuthenticatorId:e.passkeyAuthenticatorIdToDelete}).catch(this.handleUnexpectedError)}settingsConfirmDeletePasskeySetting(e){const t=this.checkStep(["settingsPasskeyShowSettings","settingsPasskeyNameNewSetting"]);t&&this.store.setState({passkeys:t.passkeys,step:"settingsDeletePasskeySetting",passkeyAuthenticatorIdToDelete:e.passkeyAuthenticatorId})}settingsConfirmDelete(e){const t=this.checkStep("settingsShowSettings");if(!t)return;t.mfaSettings.find((t=>t.mfaSettingId===e.mfaSettingId));const s=t.mfaSettings.filter((e=>"totp"===e.mfaMethod||"sms"===e.mfaMethod));1===s.length?this.store.setState({step:"settingsDisableMFA",lastMFASetting:e}):this.store.setState({step:"settingsDeleteSettings",mfaSettings:t.mfaSettings,mfaSettingToDelete:e,isLoading:!1})}settingsDelete(){const e=this.checkStep("settingsDeleteSettings");e&&(this.store.setState({...e,isLoading:!0}),this.doDeleteSettings(e.mfaSettingToDelete.mfaSettingId).catch(this.handleUnexpectedError))}settingsConfirmDisableMFA(){this.checkStep("settingsShowSettings")&&this.store.setState({step:"settingsDisableMFA"})}settingsDisableMFA(){const e=this.checkStep("settingsDisableMFA");e&&(this.store.setState({step:"settingsConfirmIdentity",source:"disableMFA",lastMFASetting:e.lastMFASetting}),this.doConfirmIdentity().catch(this.handleUnexpectedError))}exit(){this.store.setState({step:"settingsUninitialized"})}async doConfirmIdentity(){const e=await this.withStep("settingsConfirmIdentity",(()=>this.service.confirmIdentity()));if(!e)return;const{result:t,state:s}=e,i=t.status;switch(i){case"ready":this.store.setState({step:"settingsIdentityConfirmed",source:s.source});const e=s.source;"settings"===e?await this.doLoadSettings():"disableMFA"===e?await this.doDisableMFA():"passwordSetting"===e?(o().A.setState({open:!0,setNewPassword:!0,isSet:!1,password:"",repeatPassword:""}),this.exit()):(0,n().HB)(e);break;case"mfa":this.store.setState({step:"settingsVerifyChooseMFAMethod",mfaSettings:t.settings,source:s.source});break;case"password":this.store.setState({step:"settingsVerifyWithPassword",isLoading:!1,isForgotPasswordLoading:!1,source:"settings"});break;default:throw(0,n().HB)(i)}}async doForgotPassword(e){if(!e)return void this.store.setState({step:"settingsVerifyWithPassword",source:"settings",isLoading:!1,isForgotPasswordLoading:!1,error:a().xc.unexpectedError});const t=await this.withStep("settingsVerifyWithPassword",(()=>this.service.sendTemporaryPassword({email:e})));if(!t)return;const{result:s,state:i}=t;switch(s.status){case"ok":this.store.setState({...i,isForgotPasswordLoading:!1,alert:a().By.passwordResentLinkSent(e)});break;case"error":this.store.setState({...i,isForgotPasswordLoading:!1,error:a().xc.unexpectedError});break;default:return(0,n().HB)(s.status)}}async doVerifyIdentityWithPassword(e){const t=await this.withStep("settingsVerifyWithPassword",(()=>this.service.verifyIdentityWithPassword({password:e})));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async doVerifyIdentityWithTOTP(e){const t=await this.withStep("settingsVerifyWithTOTP",(()=>this.service.verifyIdentityWithTOTP(e)));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async doVerifyIdentityWithSMS(e){const t=await this.withStep("settingsVerifyWithSMS",(()=>this.service.verifyIdentityWithSMS(e)));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async doVerifyIdentityResendSMS(e){const t=await this.withStep("settingsVerifyWithSMS",(()=>this.service.sendSMS({mfaSettingId:e})));if(!t)return;const{result:s,state:i}=t;switch(s.status){case"ok":this.store.setState({...i,isLoading:!1,resentStatus:"resent",resentAt:Date.now()});break;case"error":this.store.setState({...i,resentStatus:"not-resent",error:a().xc.unexpectedError});break;default:return(0,n().HB)(s.status)}}async doVerifyIdentityWithBackupCode(e){const t=await this.withStep("settingsVerifyWithBackupCode",(()=>this.service.verifyBackupCode(e)));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async handleVerifyIdentityResponse(e){const{status:t,state:s}=e;switch(t){case"match":const e=s.source;this.store.setState({step:"settingsIdentityConfirmed",source:s.source}),"settings"===e?await this.doLoadSettings():"disableMFA"===e?await this.doDisableMFA():"passwordSetting"===e?(o().A.setState({open:!0,setNewPassword:!0,isSet:!1,password:"",repeatPassword:""}),this.exit()):(0,n().HB)(e);break;case"incorrect":this.store.setState({...s,isLoading:!1,error:r[s.step]});break;case"error":this.store.setState({...s,isLoading:!1,error:a().xc.unexpectedError});break;default:return(0,n().HB)(t)}}async doTryAnotherMethod(){const e=await this.withStep(["settingsVerifyWithSMS","settingsVerifyWithTOTP","settingsVerifyWithBackupCode"],(()=>this.service.loadSettings()));if(!e)return;const{result:t,state:s}=e;t.settings.length>0?this.store.setState({...s,step:"settingsVerifyChooseMFAMethod",mfaSettings:t.settings}):this.store.setState({...s,error:a().xc.unexpectedError})}async doLoadSettings(){const e=await this.withStep(["settingsLoadSettings","settingsIdentityConfirmed"],(()=>this.service.loadSettings()));if(!e)return;const{result:t,state:s}=e,i=s.step;switch(i){case"settingsIdentityConfirmed":case"settingsLoadSettings":t.settings.length>0?this.store.setState({step:"settingsShowSettings",mfaSettings:t.settings}):this.store.setState({step:"settingsInitialSetup"});break;default:return(0,n().HB)(i)}}async doVerifyIdentitySendSMS(e){const{mfaSetting:t}=e,s=await this.withStep("settingsVerifyChooseMFAMethod",(()=>this.service.sendSMS({mfaSettingId:t.mfaSettingId})));if(!s)return;const{result:i,state:o}=s;switch(i.status){case"ok":this.store.setState({mfaSetting:t,step:"settingsVerifyWithSMS",isLoading:!1,resentAt:0,resentStatus:"not-resent",source:o.source});break;case"error":break;default:return(0,n().HB)(i.status)}}async doUpdateSettings(e){const{mfaMethod:t,mfaSettingId:s}=e;if("totp"!==t)return;const n=await this.withStep("settingsShowSettings",(()=>this.service.renameSettings({mfaSettingId:s,friendlyName:e.friendlyName})));if(!n)return;const{result:o,state:r}=n;"saved"===o.status?o.settings.length>0&&!(0,i().A)(o,r.mfaSettings)?this.store.setState({step:"settingsShowSettings",mfaSettings:o.settings}):this.store.setState({...r,error:void 0}):this.store.setState({...r,error:"duplicate"===o.status?a().xc.totpDuplicateFriendlyName:"bad_friendly_name"===o.status?a().xc.totpBadFriendlyName:a().xc.totpEmptyFriendlyName})}async doLoadPasskeySettings({nameNewSetting:e=!1}){const t=await this.withStep(["settingsPasskeyLoadSettings","settingsPasskeyShowSettings","settingsPasskeyNameNewSetting","settingsUninitialized"],(()=>this.service.loadPasskeySettings()));if(!t)return;const{result:s,state:i}=t;this.store.setState({...i,step:e?"settingsPasskeyNameNewSetting":"settingsPasskeyShowSettings",passkeys:s.settings})}async doCreatePasskeySetting(e,t={fromNudge:!1}){const{fromNudge:s}=t,i=await this.withStep(["settingsPasskeyShowSettings","settingsPasskeyNameNewSetting","settingsUninitialized"],(()=>this.service.createPasskeySetting(e)));if(!i)return;const{result:n,state:o}=i;!0===n.created?s||await this.doLoadPasskeySettings({nameNewSetting:!0}):this.store.setState({...o,error:a().xc.unableToSavePasskey})}async doRenamePasskeySetting(e){const{passkeyAuthenticatorId:t,name:s}=e,n=await this.withStep(["settingsPasskeyShowSettings","settingsPasskeyNameNewSetting"],(()=>this.service.renamePasskeySetting({passkeyAuthenticatorId:t,name:s})));if(!n)return;const{result:o,state:a}=n;o.settings.length>0&&!(0,i().A)(o.settings,a.passkeys)?this.store.setState({step:"settingsPasskeyShowSettings",passkeys:o.settings}):this.store.setState({...a,error:void 0})}async doDeletePasskeySetting(e){const t=await this.withStep("settingsDeletePasskeySetting",(()=>this.service.deletePasskeySetting(e)));if(!t)return;const{result:s,state:n}=t;s.settings.length>=0&&!(0,i().A)(s.settings,n.passkeys)?this.store.setState({step:"settingsPasskeyShowSettings",passkeys:s.settings}):this.store.setState({...n,error:void 0})}async doDisableMFA(){const e=await this.withStep("settingsIdentityConfirmed",(()=>this.service.disableMFA()));if(!e)return;const{result:t}=e;switch(t.status){case"ok":case"error":break;default:return(0,n().HB)(t.status)}}async doDeleteSettings(e){const t=await this.withStep("settingsDeleteSettings",(()=>this.service.deleteSettings(e)));if(!t)return;const{result:s}=t;this.store.setState({step:"settingsShowSettings",mfaSettings:s.settings})}}},328716:(e,t,s)=>{s.d(t,{n:()=>i});const i=(0,s(340498).xh)("office365",{default:{loader:()=>s.e(59287).then(s.bind(s,849050))}})},334711:(e,t,s)=>{s.d(t,{$:()=>i,U:()=>n});s(944114);class i extends(()=>s(757695))().Store{getInitialState(){return{step:"totpUninitialized"}}}class n extends(()=>s(658921))()._{constructor(e,t){super(e,"totp"),this.service=void 0,this.service=t}totpStart(){this.checkStep("totpUninitialized")&&(this.store.setState({step:"totpLoadingQRCode"}),this.doCreateTOTP().catch(this.handleUnexpectedError))}totpVerifyCode(e){const{friendlyName:t,code:s,onVerified:i}=e;this.doRenameTOTPAndVerifyCode({friendlyName:t,code:s,onVerified:i}).catch(this.handleUnexpectedError)}totpBackupCodesComplete(){this.checkStep("totpBackupCodesLoading")&&this.store.setState({step:"totpVerified"})}totpComplete(){this.checkStep("totpVerified")&&this.store.setState({step:"totpComplete"})}exit(){this.store.setState({step:"totpUninitialized"})}async doCreateTOTP(){const e=await this.withStep("totpLoadingQRCode",(()=>this.service.createTOTP()));if(!e)return;const{result:t}=e;this.store.setState({step:"totpVerifyCode",qrCode:t.qrCode,rawString:t.secret,mfaSettingId:t.mfaSettingId})}async doRenameTOTPAndVerifyCode(e){const{friendlyName:t,code:s,onVerified:i}=e,n=await this.withStep(["totpVerifyCode"],(e=>this.service.renameSettings({mfaSettingId:e.mfaSettingId,friendlyName:t}))),o=await this.withStep("totpVerifyCode",(e=>this.service.verifyTOTP({mfaSettingId:e.mfaSettingId,code:s})));if(!n||!o)return;const{result:a,state:r}=n,{result:d}=o;if("saved"===a.status&&"match"===d.status)this.store.setState({step:"totpBackupCodesLoading"}),i();else{const e=[];switch(a.status){case"duplicate":e.push("totpDuplicateFriendlyName");break;case"empty":e.push("totpEmptyFriendlyName");break;case"bad_friendly_name":e.push("totpBadFriendlyName")}switch(d.status){case"error":e.push("unexpectedError");break;case"incorrect":e.push("totpIncorrectCode")}this.store.setState({...r,step:"totpVerifyCode",errorKeys:e})}}}},334992:(e,t,s)=>{s.d(t,{h:()=>a});var i=()=>s(590526),n=()=>s(741615),o=()=>s(795523);function a(e){const t=(0,i().K8)((()=>e.getMemberCountFromPublicSpaceData()),[e]),s=(0,n()._3)({spaceId:e.id}),a=(0,n().Q7)(e.id,s,t??0);return Boolean(!(0,o().Qx)(null==s?void 0:s.subscription)&&!(0,o().N8)(s)&&!(0,o().TB)(s)&&a>0)}},339907:(e,t,s)=>{s.d(t,{sK:()=>n().s,mt:()=>o().m,gs:()=>a().g,jJ:()=>r().j});var i=()=>s(340498);(0,i().xh)("abstract",{default:{loader:()=>s.e(40471).then(s.bind(s,324692))},tintable:{loader:()=>s.e(40471).then(s.bind(s,695122))}}),(0,i().xh)("adobeXd",{default:{loader:()=>s.e(56873).then(s.bind(s,735385))}}),(0,i().xh)("airtable",{default:{loader:()=>s.e(73865).then(s.bind(s,201350))}}),(0,i().xh)("amplitude",{default:{loader:()=>s.e(36448).then(s.bind(s,683631))},tintable:{loader:()=>s.e(36448).then(s.bind(s,360727))}}),(0,i().xh)("android",{default:{loader:()=>s.e(81154).then(s.bind(s,994437))},tintable:{loader:()=>s.e(81154).then(s.bind(s,578685))}});(0,i().xh)("basecamp",{default:{loader:()=>s.e(67601).then(s.bind(s,229574))}}),(0,i().xh)("bitwarden",{default:{loader:()=>s.e(60245).then(s.bind(s,146232))}});(0,i().xh)("clickUp",{default:{loader:()=>s.e(52084).then(s.bind(s,676243))}}),(0,i().xh)("coda",{default:{loader:()=>s.e(59430).then(s.bind(s,216703))}}),(0,i().xh)("codegen",{default:{loader:()=>s.e(19388).then(s.bind(s,88975))}}),(0,i().xh)("codepen",{default:{loader:()=>s.e(32179).then(s.bind(s,732198))},tintable:{loader:()=>s.e(32179).then(s.bind(s,709828))}});(0,i().xh)("dashlane",{default:{loader:()=>s.e(34251).then(s.bind(s,603556))}}),(0,i().xh)("deepnote",{default:{loader:()=>Promise.resolve().then(s.bind(s,46192))}});(0,i().xh)("dropbox",{default:{loader:()=>s.e(30737).then(s.bind(s,374436))}}),(0,i().xh)("evernote",{default:{loader:()=>s.e(89253).then(s.bind(s,943322))}}),(0,i().xh)("excalidraw",{default:{loader:()=>s.e(23873).then(s.bind(s,651374))},tintable:{loader:()=>s.e(23873).then(s.bind(s,183964))}}),(0,i().xh)("facebook",{default:{loader:()=>s.e(5209).then(s.bind(s,79834))},tintable:{loader:()=>s.e(5209).then(s.bind(s,124904))}});(0,i().xh)("framer",{default:{loader:()=>s.e(87102).then(s.bind(s,214039))},tintable:{loader:()=>s.e(87102).then(s.bind(s,451247))}}),(0,i().xh)("giphy",{default:{loader:()=>s.e(15026).then(s.bind(s,596893))},tintable:{loader:()=>s.e(15026).then(s.bind(s,423173))}});(0,i().xh)("gitLab",{default:{loader:()=>s.e(70916).then(s.bind(s,178469))}});(0,i().xh)("googleDocs",{default:{loader:()=>s.e(49373).then(s.bind(s,481082))}});var n=()=>s(627437),o=()=>s(187859);(0,i().xh)("googleMeet",{default:{loader:()=>s.e(8829).then(s.bind(s,565918))}}),(0,i().xh)("googlePlay",{default:{loader:()=>s.e(34222).then(s.bind(s,110451))}}),(0,i().xh)("grid",{default:{loader:()=>s.e(21697).then(s.bind(s,866894))}});(0,i().xh)("instagram",{default:{loader:()=>s.e(77355).then(s.bind(s,749910))},tintable:{loader:()=>s.e(77355).then(s.bind(s,88340))}}),(0,i().xh)("inVision",{default:{loader:()=>Promise.resolve().then(s.bind(s,515285))}});(0,i().xh)("linkedin",{default:{loader:()=>s.e(58319).then(s.bind(s,960860))},tintable:{loader:()=>s.e(58319).then(s.bind(s,872906))}}),(0,i().xh)("loom",{default:{loader:()=>s.e(68642).then(s.bind(s,464083))},tintable:{loader:()=>s.e(68642).then(s.bind(s,385739))}});(0,i().xh)("lucidchart",{default:{loader:()=>s.e(30512).then(s.bind(s,355893))}}),(0,i().xh)("lucidspark",{default:{loader:()=>s.e(7391).then(s.bind(s,243208))}});(0,i().xh)("microsoftOneNote",{default:{loader:()=>s.e(96773).then(s.bind(s,186186))}});var a=()=>s(350527);(0,i().xh)("microsoftWord",{default:{loader:()=>s.e(67199).then(s.bind(s,704562))}}),(0,i().xh)("miro",{default:{loader:()=>s.e(6122).then(s.bind(s,620507))},tintable:{loader:()=>s.e(6122).then(s.bind(s,66659))}});(0,i().xh)("mixpanel",{default:{loader:()=>s.e(41837).then(s.bind(s,191726))},tintable:{loader:()=>s.e(41837).then(s.bind(s,772572))}});(0,i().xh)("notionFlat",{default:{loader:()=>s.e(84379).then(s.bind(s,847048))},tintable:{loader:()=>s.e(84379).then(s.bind(s,109158))}});(0,i().xh)("notionTemplate",{default:{loader:()=>s.e(1392).then(s.bind(s,826693))},tintable:{loader:()=>s.e(1392).then(s.bind(s,235773))}});(0,i().xh)("oneDrive",{default:{loader:()=>s.e(77957).then(s.bind(s,582162))}}),(0,i().xh)("onePassword",{default:{loader:()=>s.e(71768).then(s.bind(s,507291))}});(0,i().xh)("pagerDuty",{default:{loader:()=>s.e(19314).then(s.bind(s,173737))}}),(0,i().xh)("paymentAmazon",{default:{loader:()=>s.e(75205).then(s.bind(s,783600))}});(0,i().xh)("paymentApplePay",{default:{loader:()=>s.e(17143).then(s.bind(s,414978))}}),(0,i().xh)("paymentDiscover",{default:{loader:()=>s.e(4544).then(s.bind(s,236779))}}),(0,i().xh)("paymentGooglePay",{default:{loader:()=>s.e(57246).then(s.bind(s,347307))}});(0,i().xh)("paymentStripe",{default:{loader:()=>s.e(28286).then(s.bind(s,669981))}});(0,i().xh)("pitch",{default:{loader:()=>s.e(39689).then(s.bind(s,574892))}});(0,i().xh)("polymer",{default:{loader:()=>s.e(38949).then(s.bind(s,907596))}}),(0,i().xh)("protonPass",{default:{loader:()=>s.e(99998).then(s.bind(s,401823))}}),(0,i().xh)("quip",{default:{loader:()=>s.e(61492).then(s.bind(s,592353))}});(0,i().xh)("replit",{default:{loader:()=>s.e(49229).then(s.bind(s,394666))},tintable:{loader:()=>s.e(49229).then(s.bind(s,341656))}});(0,i().xh)("sketch",{default:{loader:()=>s.e(64557).then(s.bind(s,118038))},tintable:{loader:()=>s.e(64557).then(s.bind(s,431956))}});var r=()=>s(703888);(0,i().xh)("smartSheet",{default:{loader:()=>s.e(87153).then(s.bind(s,800230))}});(0,i().xh)("tex",{default:{loader:()=>s.e(92108).then(s.bind(s,905387))},tintable:{loader:()=>s.e(92108).then(s.bind(s,133075))}}),(0,i().xh)("tiktok",{default:{loader:()=>s.e(80931).then(s.bind(s,605820))},tintable:{loader:()=>s.e(80931).then(s.bind(s,431402))}}),(0,i().xh)("trello",{default:{loader:()=>s.e(9555).then(s.bind(s,590852))}}),(0,i().xh)("twitter",{default:{loader:()=>s.e(53974).then(s.bind(s,361881))},tintable:{loader:()=>s.e(53974).then(s.bind(s,587441))}}),(0,i().xh)("typeform",{default:{loader:()=>s.e(61487).then(s.bind(s,528312))},tintable:{loader:()=>s.e(61487).then(s.bind(s,74806))}}),(0,i().xh)("unsplash",{default:{loader:()=>s.e(37189).then(s.bind(s,541846))},tintable:{loader:()=>s.e(37189).then(s.bind(s,283220))}});(0,i().xh)("whatsApp",{default:{loader:()=>s.e(67035).then(s.bind(s,524348))},tintable:{loader:()=>s.e(67035).then(s.bind(s,431466))}}),(0,i().xh)("whimsical",{default:{loader:()=>Promise.resolve().then(s.bind(s,164241))}}),(0,i().xh)("workflowy",{default:{loader:()=>s.e(15135).then(s.bind(s,948458))}}),(0,i().xh)("youTube",{default:{loader:()=>s.e(55724).then(s.bind(s,720931))},tintable:{loader:()=>s.e(55724).then(s.bind(s,345083))}});(0,i().xh)("zendesk",{default:{loader:()=>s.e(11235).then(s.bind(s,295434))}}),(0,i().xh)("zoom",{default:{loader:()=>s.e(9832).then(s.bind(s,444901))}}),(0,i().xh)("zoomMeetings",{default:{loader:()=>s.e(46314).then(s.bind(s,380563))},tintable:{loader:()=>s.e(46314).then(s.bind(s,475659))}})},347306:(e,t,s)=>{s.d(t,{A:()=>a});s(296540);var i=()=>s(69708),n=()=>s(534177),o=s(474848);function a({target:e}){switch(e){case"notify_mobile":return(0,o.jsx)(i().sA,{id:"notificationSettings.mobilePushNotificationSettings.description",defaultMessage:"Receive push notifications on mentions and comments via your mobile app"});case"notify_desktop":return(0,o.jsx)(i().sA,{id:"notificationSettings.desktopNotificationSettings.description",defaultMessage:"Receive push notifications on mentions and comments immediately"});case"notify_email":return(0,o.jsx)(i().sA,{id:"notificationSettings.emailNotificationSettings.improvedDescription",defaultMessage:"Receive emails when you get comments, mentions, page invites, reminders, access requests, and property changes"});case"notify_email_always":return(0,o.jsx)(i().sA,{id:"notificationSettings.emailAlwaysNotificationSettings.improvedDescription",defaultMessage:"Receive emails about activity in your workspace, even when you’re active on the app"});case"notify_slack":return(0,o.jsx)(i().sA,{id:"notificationSettings.slackNotificationsSettings.default.description",defaultMessage:"Receive notifications in your Slack workspace when you’re mentioned in a page, database property, or comment"});case"notify_slack_mention":return(0,o.jsx)(i().sA,{id:"notificationSettings.slackMentionNotificationSettings.description",defaultMessage:"Receive notifications in your Slack workspace when you’re mentioned in a group, page, database property, or comment."});case"notify_slack_all_activity":return(0,o.jsx)(i().sA,{id:"notificationSettings.slackAllActivityNotificationSettings.description",defaultMessage:"Receive notifications in your Slack workspace when you get comments, mentions, page invites, and property changes."});case"notify_email_digest":return(0,o.jsx)(i().sA,{id:"notificationSettings.pageUpdatesNotificationsSettings.description",defaultMessage:"Receive email digests for changes to pages you’re subscribed to"});case"notify_home_digest_email":return(0,o.jsx)(i().sA,{id:"notificationSettings.homeDigestEmailNotificationsSettings.description",defaultMessage:"Receive email digests of what’s happening in your workspace"});case"marketing_emails":return(0,o.jsx)(i().sA,{id:"notificationSettings.marketingEmails.description",defaultMessage:"Receive occasional emails about product launches and new features from Notion"});case"desktop_badge":return(0,o.jsx)(i().sA,{id:"notificationSettings.desktopBadge.description",defaultMessage:"Show/hide the notification badge using the “Badge application icon” switch in System Settings"});case"send_test_notification":return(0,o.jsx)(i().sA,{id:"notificationSettings.sendTestNotification.description",defaultMessage:"Send yourself a sample notification to confirm everything’s working"});case"disable_ai_meeting_notes_audio_process_detection_notification":return(0,o.jsx)(i().sA,{id:"notificationSettings.aiMeetingNotesAudioProcessDetectionNotification.description",defaultMessage:"Receive push notifications to start AI Meeting Notes when we detect that you’ve joined a conferencing call"});case"disable_ai_meeting_notes_upcoming_meeting_notification":return(0,o.jsx)(i().sA,{id:"notificationSettings.aiMeetingNotesUpcomingMeetingNotification.description",defaultMessage:"Receive push notifications to join conferencing and start AI Meeting Notes when your scheduled calendar events begin"});case"notify_discord":return(0,o.jsx)(i().sA,{id:"notificationSettings.discordNotificationsSettings.default.description",defaultMessage:"Receive notifications in Discord when you’re mentioned in a page, database property, or comment"});case"notify_discord_enabled":return(0,o.jsx)(i().sA,{id:"notificationSettings.discordNotificationEnabledSettings.description",defaultMessage:"Receive notifications in Discord when you get comments or mentions."});case"allow_discord_ai_usage":return(0,o.jsx)(i().sA,{id:"notificationSettings.discordAiUsageSettings.description",defaultMessage:"Allow Notion AI to be used from within Discord for answering questions and automations"});default:(0,n().HB)(e)}}},364671:(e,t,s)=>{s.d(t,{A:()=>G});var i=s(296540),n=()=>s(590526),o=()=>s(107975),a=()=>s(534177),r=()=>s(98126),d=()=>s(69708),l=()=>s(284371),c=()=>s(274602),u=s(474848);function p({errorMessage:e,isLoading:t,onDisplayBackupCodes:s,onCancel:i,onDismiss:n}){const o=(0,u.jsx)(d().sA,{id:"mfa.regenerateBackupCodes.title",defaultMessage:"Regenerate backup codes"}),a=(0,u.jsx)(d().sA,{id:"mfa.regenerateBackupCodes.message",defaultMessage:"Backup codes are used to log in if you lose access to your password and second factors. <boldtext>Your existing codes won’t work after regenerating new ones.</boldtext>",values:{boldtext:e=>(0,u.jsx)("span",{style:{fontWeight:l().Wy.semibold},children:e})}}),p={text:t?(0,u.jsx)(r().k,{}):(0,u.jsx)(d().sA,{id:"mfa.regenerateBackupCodes.regenerateBackupCodes.button.message",defaultMessage:"Generate new backup codes"}),onClick:s,view:"outline",disabled:t,isRed:!0},g=[{text:(0,u.jsx)(d().sA,{id:"mfa.regenerateBackupCodes.cancel.button.message",defaultMessage:"Cancel"}),onClick:i,view:"outline",type:"button"}];return(0,u.jsx)(c().A,{title:o,header:a,errorMessage:e,primaryAction:p,secondaryActions:g,onDismiss:n})}var g=()=>s(807449),m=()=>s(533642),h=()=>s(414446);function f({backupCodes:e,backupCodeDownload:t,backupCodeFileName:s,errorMessage:i,onNoted:n,onDownload:o}){const a=(0,u.jsx)(d().sA,{id:"mfa.showBackupCodes.title",defaultMessage:"Save your backup codes"}),r=(0,u.jsx)(d().sA,{id:"mfa.showBackupCodes.message",defaultMessage:"<boldtext>You can only see this once</boldtext>, so be sure to keep them to avoid getting locked out of your account.",values:{boldtext:e=>(0,u.jsx)("span",{style:{fontWeight:l().Wy.semibold},children:e})}}),p={text:(0,u.jsx)(d().sA,{id:"mfa.showBackupCodes.codesNotedDown.button.message",defaultMessage:"I’ve saved them"}),onClick:n},f=[{text:(0,u.jsx)(d().sA,{id:"mfa.showBackupCodes.downloadAsTextFile.button.message",defaultMessage:"Download as text file"}),href:`data:text/plain;charset=UTF-8,${t}`,saveAs:s,view:"outline",type:"link",onClick:o}];return(0,u.jsx)(c().A,{title:a,header:r,icon:(0,u.jsx)(g().I,{icon:m().shieldLockIcon,size:"xl",colorVariant:"secondary"}),errorMessage:i,primaryAction:p,secondaryActions:f,children:(0,u.jsx)(h().A,{type:"unencryptedCodes",backupCodes:e})})}function S(e){const{backupCodesStateMachine:t,onGoToSettings:s,onDismiss:i}=e,o=(0,n().K8)((()=>t.getCurrentStep()),[t]),r=()=>t.backupCodesRegenerateCodes();switch(o.step){case"backupCodesUninitialized":case"backupCodesLoading":return null;case"backupCodesRegenerateCodes":return(0,u.jsx)(p,{isLoading:o.isLoading,errorMessage:o.error,onDisplayBackupCodes:r,onDismiss:i,onCancel:s});case"backupCodesShowCodes":return(0,u.jsx)(f,{errorMessage:o.error,backupCodes:o.backupCodes,backupCodeDownload:o.backupCodesFile,backupCodeFileName:"Notion Backup Codes.txt",onNoted:s});default:return(0,a().HB)(o)}}var y=()=>s(471511),b=()=>s(671089);function x({type:e,errorMessage:t,onDismiss:s,onAddMethod:i}){const n=(0,u.jsx)(d().sA,{id:"mfa.setupComplete.confirmation.header",defaultMessage:"Every time you enter your password, Notion will ask you for a verification code to confirm your identity."}),o=[{text:(0,u.jsx)(d().sA,{id:"mfa.setupComplete.confirmation.viewTwoStepMethods.button.message",defaultMessage:"View 2-step methods"}),onClick:i,type:"button",view:"outline"}];return(0,u.jsx)(c().A,{title:"totp"===e?(0,u.jsx)(d().sA,{id:"mfa.totp.setupComplete.confirmation.title",defaultMessage:"2-step verification with authenticator is turned on"}):"sms"===e?(0,u.jsx)(d().sA,{id:"mfa.sms.setupComplete.confirmation.title",defaultMessage:"2-step verification with phone number is turned on"}):(0,a().HB)(e),header:n,errorMessage:t,icon:(0,u.jsx)(g().I,{icon:b().checkmarkCircleIcon,size:"xl",colorPalette:"green",colorVariant:"accentPrimary"}),secondaryActions:o,onDismiss:s})}s(581454);var v=()=>s(85128),w=()=>s(401497),A=()=>s(250910),j=()=>s(118307),M=()=>s(31511),k=()=>s(546926),C=()=>s(406094),I=()=>s(302501),_=()=>s(890492),T=()=>s(81068),P=()=>s(663639),R=()=>s(736847),D=()=>s(100622),N=()=>s(778078),B=()=>s(920949),E=()=>s(232930),O=()=>s(419357);const q={name:"United States",countryCode:"1",regionCode:"US"};function U({isLoading:e,phoneNumber:t,country:s,errorMessage:o,onDismiss:a,onBack:l,onContinue:p}){const g=(0,w().eP)(),m=(0,w().IS)((()=>({container:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:16,marginBottom:4},countryCodeDropdownMenu:{marginInlineEnd:5},countryCodeSelectTitle:{paddingTop:8,paddingBottom:8},phoneNumberInput:{background:"light"===g?D().oZ.transparent:D().Tj.inputBackground}})),[g]),h=(0,d().tz)(),[f,S]=(0,i.useState)(t??""),[y,b]=(0,i.useState)([]),[x,U]=(0,i.useState)(""),[L,V]=(0,i.useState)(s??q),F=(0,n().uB)(void 0,j().A),z=(0,i.useMemo)((()=>(0,v().cE)(L.regionCode)),[L.regionCode]),G=(0,i.useCallback)((e=>{const t=e.target.value.replace(/\D/g,"");S(z.reset(t))}),[z]);(0,i.useEffect)((()=>{S(s!==L?z.reset(f??""):z.reset(t??""));const e=new Intl.DisplayNames(["en"],{type:"region"}),i=(0,v().LU)();let n=-1;const o=i.map(((t,s)=>{const i=(0,v().qY)(t).toString(),o=e.of(t);return t===L.regionCode&&(n=s),{name:o??t,countryCode:i,regionCode:t}}));-1!==n&&o.unshift(o.splice(n,1)[0]),b(o)}),[L]);const K=(0,u.jsx)(d().sA,{id:"profileSettings.mfa.sms.addPhoneTitle",defaultMessage:"Add a phone number"}),W=(0,u.jsx)(d().sA,{id:"profileSettings.mfa.sms.addPhoneHeader",defaultMessage:"Enter your phone number to receive a 2-step verification code."}),H={text:e?(0,u.jsx)(r().k,{}):(0,u.jsx)(d().sA,{id:"profileSettings.mfa.sms.continueButton",defaultMessage:"Continue"}),onClick:()=>p(L,f.trim()),disabled:e||""===f},$=[{text:(0,u.jsx)(d().sA,{id:"profileSettings.mfa.sms.addPhoneNeedHelp",defaultMessage:"Need help?"}),href:(0,E().x)("guides.mfa"),isExternal:!0,type:"link",view:"plain"}],Y=h.formatMessage({id:"profileSettings.mfa.sms.phoneNumberInput.placeholder",defaultMessage:"Enter phone number"}),Q=h.formatMessage({defaultMessage:"Search country code",id:"profileSettings.mfa.sms.countryCodeSelect.placeholder"}),Z=e=>(0,u.jsxs)("div",{style:m.countryCodeSelectTitle,children:[e.name,(0,u.jsx)(I().A,{isSmall:!0,children:`+${e.countryCode}`})]}),X=(0,u.jsx)(A().A,{popupType:A().z.Popup,placementToOrigin:"bottom",alignmentToOrigin:"start",buttonPopupStore:F,renderOrigin:e=>(0,u.jsx)(C().A,{size:"lg",...e,children:`+${L.countryCode}`}),render:e=>(0,u.jsx)(_().A,{menuType:k().gu.Popup,minWidth:280,maxHeight:"30vh",header:(0,u.jsx)(R().A,{isInput:!0,children:(0,u.jsx)(O().Ay,{value:x,onChange:e=>U(e.target.value),focus:!0,focusAfterAnimation:!0,placeholder:Q})}),children:(0,u.jsx)(P().A,{type:P().O.Vertical,initialFocus:0,sections:[{key:"countries",render:e=>(0,u.jsx)(R().A,{...e}),items:(0,N().Ay)(x,y,(e=>/\d/.test(x)?`${e.countryCode}`:e.name)).map((t=>({key:t.regionCode,render:e=>(0,u.jsx)(T().A,{...e,title:Z(t),isChecked:t.name===L.name}),action:()=>{U(""),V(t),e.close()}})))}]})})});return(0,u.jsx)(c().A,{onDismiss:a,onBack:l,title:K,header:W,errorMessage:o,primaryAction:H,secondaryActions:$,children:(0,u.jsxs)("div",{style:m.container,children:[(0,u.jsx)("div",{style:m.countryCodeDropdownMenu,children:X}),(0,u.jsx)(M().A,{autoFocus:!0,value:f,placeholder:Y,spellCheck:!1,style:m.phoneNumberInput,onChange:G,disabled:e,customElementAttributes:B().SY})]})})}var L=()=>s(852310);function V(e){const{smsStateMachine:t,onGoToSettings:s,onDismiss:i,onStartBackupCodes:o}=e,r=(0,n().K8)((()=>t.getCurrentStep()),[t]);switch(r.step){case"smsUninitialized":case"smsVerified":return null;case"smsSendingSMS":case"smsSetPhoneNumber":return(0,u.jsx)(U,{phoneNumber:r.phoneNumber,country:r.country,isLoading:"smsSendingSMS"===r.step,errorMessage:r.error,onDismiss:i,onBack:s,onContinue:(e,s)=>t.smsCreateSMS(e,s)});case"smsVerifyCode":case"smsResendSMS":case"smsBackupCodesLoading":case"smsVerifying":return(0,u.jsx)(L().A,{isLoading:"smsVerifying"===r.step||"smsBackupCodesLoading"===r.step,errorMessage:r.error,phoneNumber:`+${r.country.countryCode} ${r.phoneNumber}`,onDismiss:i,onBack:()=>t.smsRestart(),onVerifyCode:e=>t.smsVerifyCode({code:e,onVerified:o}),resentStatus:"smsResendSMS"===r.step?"resending":"resentAt"in r&&void 0!==r.resentAt?"resent":"not-resent",resentAt:"resentAt"in r&&r.resentAt?r.resentAt:0,onResendLink:()=>t.smsResendSMS()});case"smsComplete":return(0,u.jsx)(x,{type:"sms",errorMessage:r.error,onAddMethod:s,onDismiss:i});default:return(0,a().HB)(r)}}var F=()=>s(936457);function z(e){const{totpStateMachine:t,onGoToSettings:s,onStartBackupCodes:i,onDismiss:o}=e,r=(0,n().K8)((()=>t.getCurrentStep()),[t]);switch(r.step){case"totpUninitialized":case"totpVerified":return null;case"totpLoadingQRCode":case"totpBackupCodesLoading":case"totpVerifyCode":return(0,u.jsx)(F().A,{isLoading:"totpBackupCodesLoading"===r.step||"totpLoadingQRCode"===r.step,qrCode:"totpVerifyCode"===r.step?r.qrCode:void 0,textCode:"totpVerifyCode"===r.step?r.rawString:void 0,friendlyName:"totpVerifyCode"===r.step?r.friendlyName:void 0,errorMessage:r.error,errorKeys:"totpVerifyCode"===r.step?r.errorKeys:void 0,onDismiss:o,onBack:s,onContinue:(e,s)=>{t.totpVerifyCode({friendlyName:e,code:s,onVerified:i})}});case"totpComplete":return(0,u.jsx)(x,{type:"totp",errorMessage:r.error,onDismiss:o,onAddMethod:s});default:return(0,a().HB)(r)}}function G(e){const{rootStateMachine:t,settingsStateMachine:s,totpStateMachine:r,smsStateMachine:d,backupCodesStateMachine:l,onReloadSettings:c}=e,p=(0,n().K8)((()=>t.getCurrentStep()),[t]),[{showSettings:g,onRootExit:m}]=(0,i.useState)((()=>({onRootExit:()=>t.exit((()=>{s.exit(),r.exit(),d.exit(),l.exit(),c&&c()})),showSettings:()=>t.rootShowSettings({refresh:!0,startConfirmIdentity:()=>{s.settingsConfirmIdentityForSettings()}})}))),h=()=>t.rootCloseSettings((()=>{s.exit(),c&&c()})),f=()=>t.rootStartTOTP((()=>r.totpStart())),b=()=>t.rootStartSMS((()=>d.smsStart())),x=()=>{t.rootShowSettings({refresh:!0,startConfirmIdentity:()=>{r.exit(),s.settingsShow({refresh:!0})}})},v=()=>{t.rootShowSettings({refresh:!0,startConfirmIdentity:()=>{d.exit(),s.settingsShow({refresh:!0})}})},w=()=>{l.exit(),t.rootEndBackupCodes({completeTotp:()=>{r.totpComplete()},completeSMS:()=>{d.smsComplete()},showSettings:g})},A=()=>{l.backupCodesInitialSetup({onLoadingComplete:()=>{r.totpBackupCodesComplete(),t.rootShowBackupCodesFromTOTP()},onComplete:()=>{r.totpBackupCodesComplete(),r.totpComplete(),w()}})},j=()=>{l.backupCodesInitialSetup({onLoadingComplete:()=>{d.smsBackupCodesComplete(),t.rootShowBackupCodesFromSMS()},onComplete:()=>{d.smsBackupCodesComplete(),d.smsComplete(),w()}})},M=()=>{t.rootStartBackupCodesFromSettings((()=>l.backupCodesShowCreate()))},k=(0,n().K8)((()=>s.getCurrentStep().step),[s]),C=(0,n().K8)((()=>r.getCurrentStep().step),[r]),I=(0,n().K8)((()=>d.getCurrentStep().step),[d]),_=(0,n().K8)((()=>l.getCurrentStep().step),[l]);let T;switch(p.step){case"rootUninitialized":break;case"rootSettings":T={open:"settingsUninitialized"!==k,onDismiss:m,render:()=>(0,u.jsx)(y().A,{settingsStateMachine:s,onDismiss:h,onStartTOTP:f,onStartSMS:b,onStartBackupCodes:M})};break;case"rootTOTP":T={open:"totpUninitialized"!==C,onDismiss:m,render:()=>(0,u.jsx)(z,{totpStateMachine:r,onGoToSettings:x,onStartBackupCodes:A,onDismiss:m})};break;case"rootSMS":T={open:"smsUninitialized"!==I,onDismiss:m,render:()=>(0,u.jsx)(V,{smsStateMachine:d,onGoToSettings:v,onStartBackupCodes:j,onDismiss:m})};break;case"rootBackupCodes":T={open:"backupCodesUninitialized"!==_,onDismiss:"backupCodesRegenerateCodes"===_?m:void 0,render:()=>(0,u.jsx)(S,{backupCodesStateMachine:l,onGoToSettings:w,onDismiss:m})};break;default:throw(0,a().HB)(p)}return T?(0,u.jsx)(o().a,{...T,preventHideChildrenWhileOpening:!0}):null}},367049:(e,t,s)=>{s.d(t,{V:()=>r});var i=()=>s(907258),n=()=>s(484714),o=()=>s(590526),a=()=>s(110154);function r(){const e=(0,n().v3)();return(0,o().K8)((()=>{const{sidebarSpaceStore:t}=i().default.state;if(!t)return!1;const s=t.getMemberCountFromPublicSpaceData(),n=(0,a().f)({environment:e,spaceStore:t});return 1===s&&0===n.length&&"personal"===t.getPlanType()}),[e])}},377085:(e,t,s)=>{s.d(t,{o:()=>d});s(898992),s(354520),s(581454),s(296540);var i=()=>s(907258),n=()=>s(590526),o=()=>s(37625),a=()=>s(435761),r=s(474848);function d({userId:e,userPermissionGroupIds:t}){const{userTeamStores:s}=function({userId:e,userPermissionGroupIds:t}){const s=(0,n().O$)(i().AppStoreSidebarSpaceStore),{teams:o}=(0,a().Qs)({spaceStore:s}),r=(0,a().gc)({teams:o,spaceStore:s}).map((e=>e.store)),d=(0,n().K8)((()=>r.filter((s=>s.isMemberOrGuest(e,t)))),[e,t,r]);return{userTeamStores:d}}({userId:e,userPermissionGroupIds:t});return(0,r.jsx)(o().RR,{teamsForMember:s})}},380030:(e,t,s)=>{s.d(t,{n:()=>l});s(16280);var i=()=>s(675133),n=()=>s(206267),o=()=>s(322769),a=()=>s(510473),r=()=>s(547149);const d=(0,s(69708).YK)({noLocalDataForPermissionGroup:{id:"spaceActions.dialogError.createOrUpdatePermissionGroup.invalidWorkspaceStorage.message",defaultMessage:"No local data about this workspace."}});function l(e){const{spaceStore:t,transaction:s}=e;if(!t.isDefined())throw new Error(i().A.formatMessage(d.noLocalDataForPermissionGroup));const l=(0,n().JW)(),c=(0,a().E)({spaceStore:t,groupId:l});return r().applyOperation({store:c,operation:(0,o().ao)({spaceId:t.id,groupId:l}),transaction:s}),c}},388450:(e,t,s)=>{s.d(t,{R:()=>V});s(898992),s(672577);var i=s(296540),n=()=>s(907258),o=()=>s(484714),a=()=>s(590526),r=()=>s(401497),d=()=>s(365917),l=()=>s(770063),c=()=>s(402904),u=()=>s(69708),p=()=>s(100622),g=()=>s(534177),m=()=>s(284371),h=()=>s(848259),f=()=>s(384944),S=()=>s(747938),y=()=>s(882462),b=()=>s(547149),x=()=>s(347306),v=()=>s(963550),w=(s(581454),()=>s(718827)),A=()=>s(250910),j=()=>s(807449),M=()=>s(546926),k=()=>s(890492),C=()=>s(81068),I=()=>s(663639),_=()=>s(736847),T=()=>s(617871),P=()=>s(324254),R=()=>s(617668),D=()=>s(973647),N=()=>s(898563),B=()=>s(510683),E=s(474848);function O(e){const{currentExternalAuthentication:t,externalAuthentications:s,spaceStore:n,spaceViewStore:l}=e,c=(0,o().v3)(),p=(0,o().Y0)(),g=(0,a().K8)((()=>d().A.integrations.state.find((e=>e.id===T().zG))),[]),m=(0,r().IS)((()=>({popupContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:14,marginTop:12},dropdownButtonContainer:{display:"flex",alignItems:"center",minWidth:0,padding:"0px 8px",borderRadius:4,marginInlineStart:8},currentValueLabel:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",flex:1}})),[]);let h;h=p.isPhone?{menuType:M().gu.ActionSheet}:{menuType:M().gu.Popup,width:280,maxHeight:"50vh"};const y=i.useCallback((e=>Object.entries((0,S().Os)(s)).map((([s,i],o)=>({key:s,items:i.map((({externalAuthentication:s,workspaceName:i})=>({key:s.id,action:()=>{e.close(),q({environment:c,spaceStore:n,spaceViewStore:l,currentExternalBotId:null==t?void 0:t.parent_id,selectedExternalBotId:s.parent_id})},render:e=>(0,E.jsx)(C().A,{...e,title:i,isChecked:s.id===(null==t?void 0:t.id)})}))),render:e=>(0,E.jsx)(_().A,{...e,title:s,topBorder:0!==o})})))),[null==t?void 0:t.id,null==t?void 0:t.parent_id,c,s,n,l]),x=i.useCallback((e=>g?[{key:"disable-notification",items:[{key:"disable-slack-notification",action:()=>{e.close(),function(e){const{environment:t,spaceViewStore:s}=e;b().createAndCommit({userAction:"NotificationsAndPersonalSettings.SlackNotificationsAccountSetting",environment:t,canUndo:!0,perform:e=>{f().zv({store:s.getSettingsStore(),data:{notify_slack:null},transaction:e})}}),N().YT(t,{type:"personal",source:"notifications_and_settings"})}({environment:c,spaceViewStore:l})},render:e=>(0,E.jsx)(C().A,{...e,title:(0,E.jsx)(u().sA,{id:"personalSlackNotificationsAccountDropdownButton.disableNotification.label",defaultMessage:"Off"}),isChecked:void 0===t})}],render:e=>(0,E.jsx)(_().A,{...e,topBorder:y.length>0})},{key:"create-new-auth",items:[{key:"connect",render:e=>(0,E.jsx)(C().A,{...e,icon:(0,E.jsx)(j().I,{icon:R().plusIcon}),title:(0,E.jsx)(u().sA,{id:"database.viewSettings.notificationsTab.slack.addNewAccount.label",defaultMessage:"Add new account"})}),action:async()=>{var e;const t=await B().Jq({environment:c,integration:g,spaceId:n.id,from:"notifications_and_settings"});if(D().Q.isFail(t))return;const s=null===(e=t.value.externalAuthentication)||void 0===e?void 0:e.parent_id;s&&q({environment:c,spaceViewStore:l,currentExternalBotId:void 0,selectedExternalBotId:s,spaceStore:n})}}],render:e=>(0,E.jsx)(_().A,{...e,topBorder:!0})}]:[]),[t,c,y.length,n,l,g]);return(0,E.jsx)("div",{style:m.popupContainer,children:(0,E.jsx)(A().A,{popupType:A().z.Popup,alignmentToOrigin:"end",render:e=>(0,E.jsx)(k().A,{...h,children:(0,E.jsx)(I().A,{type:I().O.Vertical,initialFocus:0,sections:[...y(e),...x(e)]})}),renderOrigin:t=>(0,E.jsxs)(w().Ay,{...t,style:m.dropdownButtonContainer,children:[(0,E.jsx)("div",{style:m.currentValueLabel,children:(0,E.jsx)(U,{...e})}),(0,E.jsx)("span",{style:{marginInlineStart:8},children:(0,E.jsx)(j().I,{icon:P().arrowChevronSingleDownSmallIcon,size:"xs",colorVariant:"tertiary"})})]})})})}function q(e){const{environment:t,spaceStore:s,spaceViewStore:i,selectedExternalBotId:n,currentExternalBotId:o}=e,a=i.getSettingsStore(),r=a.getKeyStore("notify_slack").getValue();if(o!==n){const e=(0,y().Z5)({spaceStore:s});let i=!1;e&&(i=!o||Boolean(null==r?void 0:r.notify_slack_all_activity)),b().createAndCommit({userAction:"NotificationsAndPersonalSettings.SlackNotificationsAccountSetting",environment:t,canUndo:!0,perform:e=>{f().zv({store:a,data:{notify_slack:{external_bot_id:n,notify_slack_all_activity:i,notify_slack_mention:!o||(null==r?void 0:r.notify_slack_all_activity)}},transaction:e})}}),void 0===o?N().lL(t,{type:"personal",source:"notifications_and_settings"}):N().Eu(t,{type:"personal",source:"notifications_and_settings"})}}function U(e){const{currentExternalAuthentication:t}=e;if(!t)return(0,E.jsx)(u().sA,{id:"SlackNotificationsPersonalSettingsAccountPicker.accountDropdown.selectPlaceholder",defaultMessage:"Off"});const s=(0,S().qO)(t).organizationName;return(0,E.jsx)(E.Fragment,{children:s})}var L=()=>s(702723);function V(e){const t=(0,o().v3)(),{target:s}=e,w=(0,a().O$)(n().AppStoreSidebarSpaceViewStore),A=(0,a().O$)(n().AppStoreSidebarSpaceStore),j=(0,a().O$)(d().A.completeSlackAuthentications),M=(0,a().K8)((()=>(0,y().Z5)({spaceStore:A})),[A]),k=(0,a().K8)((()=>{var e;const t=null==w||null===(e=w.getSettings())||void 0===e||null===(e=e.notify_slack)||void 0===e?void 0:e.external_bot_id;if(!t)return;const s=j.find((e=>e.parent_id===t));if(s)return s;if(!w)return;return(0,l().v3)(w,{id:t,table:c().As}).getValue()}),[w,j]),C=(0,a().K8)((()=>{var e;const t=null==w||null===(e=w.getSettingsStore())||void 0===e||null===(e=e.getKeyStore("notify_slack"))||void 0===e?void 0:e.getValue();switch(s){case"notify_slack_mention":return k&&(null==t?void 0:t.notify_slack_mention)||!1;case"notify_slack_all_activity":return(null==t?void 0:t.notify_slack_all_activity)||!1;case"notify_slack":return!1;default:(0,g().HB)(s)}}),[w,s,k]),I=(0,a().K8)((()=>{var e;const t=null==w||null===(e=w.getSettingsStore())||void 0===e||null===(e=e.getKeyStore("notify_slack"))||void 0===e?void 0:e.getValue();return null==t?void 0:t.notify_slack_all_activity}),[w]),_=(0,i.useCallback)((()=>{if(w){const e=!C,i=w.getSettingsStore();let n=i.getKeyStore("notify_slack").getValue();if(!n)return;"notify_slack_mention"===s?(n[s]=e,e||n.notify_slack_all_activity||(n=void 0),b().createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",environment:t,canUndo:!0,perform:e=>{f().zv({store:i,data:{notify_slack:n},transaction:e})}})):"notify_slack_all_activity"===s&&(n[s]=e,b().createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",environment:t,canUndo:!0,perform:e=>{f().zv({store:i,data:{notify_slack:n},transaction:e})}})),"notify_slack"!==s&&h().DN(t,{is_on:e,target:s})}}),[t,w,C,s]),T=(0,r().IS)((()=>({notifySlackSelectedWorkspaceName:{fontWeight:m().Wy.bold,color:p().Tj.darkTextColor},titleWithBadgeContainer:{display:"flex",alignItems:"center"},betaBadgeContainer:{marginTop:-3},betaBadge:{display:"inline",marginInlineStart:6}})),[]);return w&&A?"notify_slack"===s?(0,E.jsx)(L().A,{spaceStore:A,type:"custom",title:(0,E.jsx)(v().A,{target:s}),caption:(0,E.jsx)(E.Fragment,{children:k?(0,E.jsx)(u().sA,{id:"notificationSettings.slackNotificationsSettings.workspaceSelected.description",defaultMessage:"Receive notifications in {slackWorkspaceName} slack workspace{slackNotificationSettingMessage}.",values:{slackWorkspaceName:(0,E.jsx)("span",{style:T.notifySlackSelectedWorkspaceName,children:(0,S().qO)(k).organizationName}),slackNotificationSettingMessage:M?"":" when you're mentioned in a page, database property, or comment"}}):(0,E.jsx)(x().A,{target:s})}),customButton:(0,E.jsx)(O,{spaceStore:A,currentExternalAuthentication:k,externalAuthentications:j,spaceViewStore:w})}):"notify_slack_mention"===s?k?(0,E.jsx)(L().A,{spaceStore:A,title:(0,E.jsx)(v().A,{target:s}),caption:(0,E.jsx)(x().A,{target:s}),type:"toggle",isOn:C,onToggle:_,disabled:Boolean(I)}):(0,E.jsx)(E.Fragment,{}):k?(0,E.jsx)(L().A,{spaceStore:A,title:(0,E.jsx)(v().A,{target:s}),caption:(0,E.jsx)(x().A,{target:s}),type:"toggle",isOn:C,onToggle:_}):(0,E.jsx)(E.Fragment,{}):null}},410058:(e,t,s)=>{s.d(t,{k:()=>r});var i=s(296540),n=()=>s(484714),o=()=>s(769864),a=s(474848);function r(e){return function(t){const s=(0,n().v3)(),[r,d]=(0,i.useState)({isDomainVerified:!1,settings:{}});(0,i.useEffect)((()=>{o().callApi({eventName:"getEmailDomainSettings",environment:s,data:{}}).then((e=>{"success"===e.type&&d(e.data)}))}),[s]);const l={...t,userEmailDomainSettings:r};return(0,a.jsx)(e,{...l})}}},420844:(e,t,s)=>{s.d(t,{xF:()=>ce,OC:()=>ge,jo:()=>pe});s(898992),s(354520);var i=s(296540),n=()=>s(920198),o=()=>s(907258),a=()=>s(20022),r=()=>s(59226),d=()=>s(242422),l=()=>s(484714),c=()=>s(590526),u=()=>s(79926),p=()=>s(75435),g=()=>s(201794),m=()=>s(416783),h=()=>s(98126),f=()=>s(795523),S=()=>s(69708),y=()=>s(534177),b=()=>s(721253),x=()=>s(595939),v=()=>s(427344),w=()=>s(170163),A=()=>s(959098),j=()=>s(862961),M=()=>s(939583),k=()=>s(702723),C=()=>s(782649),I=()=>s(289251),_=()=>s(232930),T=()=>s(141966),P=()=>s(448835),R=()=>s(306044),D=()=>s(410555),N=()=>s(726637),B=()=>s(312788),E=()=>s(401497),O=()=>s(552712),q=()=>s(406094),U=()=>s(302501),L=()=>s(711059),V=()=>s(100622),F=()=>s(502492),z=()=>s(579631),G=()=>s(787804),K=()=>s(597755),W=()=>s(112799),H=()=>s(549721),$=()=>s(927080),Y=()=>s(404141),Q=s(474848);function Z(){const{isMac:e,isDesktop:t}=(0,l().Y0)(),s=t&&e,i=(0,l().v3)().device.desktopAppVersion;if(i){const e=(0,L().parseVersion)(i);if(e&&(0,G().o)(e))return!1}return s}function X(e){const t=e.environment.device,{isElectron:s,isMac:i,isWindows:n,isDesktop:o}=t,a=(0,c().K8)((()=>{var e;return void 0!==(null===(e=p().A.state.preferences)||void 0===e?void 0:e.isUniversalLinksEnabled)}),[]);return[o&&(i||n||!1)&&!a?{key:"open-in-desktop-app",renderSettingsItem:()=>(0,Q.jsx)(oe,{})}:void 0,Z()?{key:"open-in-browser",renderSettingsItem:()=>(0,Q.jsx)(ee,{})}:void 0,s&&i?{key:"close-browser-tabs",renderSettingsItem:()=>(0,Q.jsx)(ae,{})}:void 0].filter(y().O9)}function J(){const e=(0,n().L)();return(0,Q.jsx)(k().A,{spaceStore:e,caption:(0,Q.jsx)(S().sA,{id:"openInBrowserSetting.caption.browser",defaultMessage:"If installed, macOS will open links to Notion in the desktop app, even if this setting is turned off. To disable that behavior, enable “Open Notion links in browser” in your app."}),type:"custom",customButton:(0,Q.jsx)(q().A,{size:"lg",onClick:()=>{window.open(F().$J({httpUrl:(0,K().A8)(window.location.href),protocol:N().A.protocol}))},children:(0,Q.jsx)(S().sA,{id:"openInBrowserSetting.button",defaultMessage:"Set in app"})})})}function ee(){const e=(0,l().Y0)(),{isElectron:t,isMac:s}=e,o=Z(),r=(0,c().K8)((()=>{var e;return null===(e=p().A.state.preferences)||void 0===e?void 0:e.isUniversalLinksEnabled}),[]),d=(0,n().L)(),u=(0,i.useCallback)((()=>{const e=!r;a().Zq.setPreference("isUniversalLinksEnabled",e)}),[r]);if(!t&&o)return(0,Q.jsx)(J,{});if(!t||!s||void 0===r)return null;const g=(0,Q.jsx)(S().sA,{id:"openInDesktopAppSettings.universalLinks.title",defaultMessage:"Open Notion links in browser"}),m=(0,Q.jsx)(S().sA,{id:"openInDesktopAppSettings.universalLinks.caption",defaultMessage:"By default, macOS will open links to Notion in the desktop app. Turning this setting on will redirect links to your browser instead."});return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(k().A,{spaceStore:d,title:g,caption:m,type:"toggle",isOn:!r,onToggle:u}),(0,Q.jsx)(te,{show:!1===r})]})}function te({show:e}={show:!1}){const t=(0,E().IS)((()=>({titleStyle:{fontSize:12,fontWeight:"medium",font:"SF Pro",color:V().Tj.text.primary,height:18},divTitleStyle:{color:V().Tj.text.secondary,display:"flex",background:V().Tj.gray.background.secondaryTranslucent,width:"100%",padding:"16px",justifyContent:"center",alignItems:"center",gap:12,borderRadius:8,borderColor:V().Tj.gray.background.secondaryTranslucent},divStyle:{display:"flex",alignItems:"center",marginTop:10,minWidth:0,width:"100%",gap:10},UiLabelStyle:{color:V().Tj.text.secondary,font:"SF Pro",fontSize:12,whiteSpace:"normal"}})),[]);return e?(0,Q.jsx)("div",{style:t.divStyle,children:(0,Q.jsxs)("div",{style:t.divTitleStyle,children:[(0,Q.jsx)(U().A,{isSecondaryColor:!0,style:t.UiLabelStyle,children:(0,Q.jsx)(S().sA,{id:"openInDesktopAppSettings.universalLinks.guide.caption",defaultMessage:"Notion will redirect links to your browser. You may also want to prevent your browser from opening Notion links in the desktop app. To use Notion in your browser only, ensure that the setting “Open links in desktop app” is turned off in your browser."})}),(0,Q.jsx)("div",{children:(0,Q.jsx)("div",{style:{display:"flex"},children:(0,Q.jsx)("div",{style:t.titleStyle,children:(0,Q.jsx)(se,{})})})})]})}):null}function se(){const e=(0,l().v3)();return(0,Q.jsx)(O().N,{href:(0,K().A8)(window.location.href),external:!0,onClick:()=>{z().mu(e)},children:(0,Q.jsx)(q().A,{size:"lg",children:(0,Q.jsx)(S().sA,{id:"openInDesktopAppSetting.desktopConfigureButton",defaultMessage:"Set in browser"})})})}function ie(){return(0,Q.jsx)(S().sA,{id:"openInDesktopAppSetting.title",defaultMessage:"Open links in desktop app"})}function ne(){const e=(0,c().K8)((()=>{var e;return null===(e=p().A.state.preferences)||void 0===e?void 0:e.isUniversalLinksEnabled}),[]),t=(0,n().L)(),s=void 0!==e;let i=(0,Q.jsx)(ie,{}),o=(0,Q.jsx)(S().sA,{id:"openInDesktopAppSetting.desktopConfigureCaption",defaultMessage:"You can configure browser links to open in this app."});return s&&(i=(0,Q.jsx)(S().sA,{id:"openInDesktopAppSetting.title.universal",defaultMessage:"Open browser links in desktop app"}),o=(0,Q.jsx)(S().sA,{id:"openInDesktopAppSetting.desktopConfigureCaption.universal",defaultMessage:"You can also configure your browser to automatically redirect Notion links to the app."})),(0,Q.jsx)(k().A,{spaceStore:t,title:i,caption:o,type:"custom",customButton:(0,Q.jsx)(se,{})})}function oe(){const{navigate:e}=(0,i.useContext)(B().E),t=(0,l().v3)(),{isElectron:s,isMac:o}=(0,l().Y0)(),a=(0,c().O$)($().A),r=(0,Q.jsx)(ie,{}),d=(0,c().K8)((()=>Y().Ay.state.highlightedSetting===Y().rF.OpenInDesktopApp),[]),u=(0,W().E)(),p=(0,n().L)();if(s)return(0,Q.jsx)(ne,{});const g=o?"macOS":"Windows";return(0,Q.jsx)(k().A,{spaceStore:p,title:r,caption:(0,Q.jsx)(S().sA,{id:"openInDesktopAppSetting.description.messageWindows",defaultMessage:"You must have the <desktopAppLink>{platform} app</desktopAppLink> installed.",values:{desktopAppLink:(...s)=>(0,Q.jsx)(m().V,{external:!0,onClick:s=>{u.current&&(e({environment:t,url:u.current,openInNew:"tab"}),s.stopPropagation())},children:s}),platform:g}}),type:"toggle",isOn:"always"===a,onToggle:()=>{const e="always"===a?"never":"always";$().A.setState(e),"always"===e&&(0,H().e)({url:(0,K().PT)(window.location.href),environment:t}),z().kF(t,{toggled_to:"always"===e?"on":"off"})},shouldHighlight:d})}function ae(){const{isElectron:e,isMac:t}=(0,l().Y0)(),s=(0,c().K8)((()=>{var e;return null===(e=p().A.state.preferences)||void 0===e?void 0:e.isClosingBrowserTabs}),[]),o=(0,n().L)(),r=(0,i.useCallback)((()=>{const e=!s;a().Zq.setPreference("isClosingBrowserTabs",e)}),[s]);if(!e||!t||void 0===s)return null;const d=(0,Q.jsx)(S().sA,{id:"openInDesktopAppSettings.closeBrowserTabs.title",defaultMessage:"Close redirecting browser tabs"}),u=(0,Q.jsx)(S().sA,{id:"openInDesktopAppSettings.closeBrowserTabs.caption",defaultMessage:"When opening links in the desktop app, close “Redirecting to your Notion app...” browser tabs."});return(0,Q.jsx)(k().A,{spaceStore:o,title:d,caption:u,type:"toggle",isOn:s,onToggle:r})}var re=()=>s(563253),de=()=>s(993342);const le=(0,u()._h)(new(u().O2)("experimentSettings",(()=>Promise.all([s.e(23930),s.e(7717)]).then(s.bind(s,585905)))),(e=>e.ExperimentSettingsSection));function ce({isPhone:e,isMobileNative:t,isAndroid:s,showOfflineSettings:i,passwordRequestStore:n,userEmailDomainSettings:o,billingData:a,accountSettings:r}){const l=t&&(0,f().et)(a),c=(0,T().l5)(),u=!(e&&(0,g().T)("supportsNativeHome")),p=t;return[{key:"password",renderSettingsItem:()=>(0,Q.jsx)(me,{passwordRequestStore:n,billingData:a})},d().default.checkGate({gateName:"hide_passkey_setting_for_old_android"})?void 0:{key:"passkeys",renderSettingsItem:()=>(0,Q.jsx)(j().A,{samlEnforced:r.isSamlEnforced,hasPasskeys:r.hasPasskeys})},{key:"appearance",renderSettingsItem:()=>(0,Q.jsx)(he,{})},d().default.checkGate({gateName:"nds_high_contrast_mode"})?{key:"contrast",renderSettingsItem:()=>(0,Q.jsx)(fe,{})}:void 0,p?{key:"open-external-links",renderSettingsItem:()=>(0,Q.jsx)(Se,{})}:void 0,u?{key:"page-on-app-start",renderSettingsItem:()=>(0,Q.jsx)(de().A,{})}:void 0,l?{key:"subscription",renderSettingsItem:()=>(0,Q.jsx)(C().L,{})}:void 0,{key:"user-consent",renderSettingsItem:()=>(0,Q.jsx)(I().A,{emailDomainSettings:o.settings})},{key:"calendar",renderSettingsItem:()=>(0,Q.jsx)(w().A,{})},(0,T().JW)(t,s)?{key:"android-language",renderSettingsItem:()=>(0,Q.jsx)(v().J,{})}:void 0,c?{key:"experiments",renderSettingsItem:()=>(0,Q.jsx)(le,{})}:void 0,i&&t?{key:"offline",renderSettingsItem:()=>(0,Q.jsx)(P().ym,{})}:void 0,{key:"deleteAccount",renderSettingsItem:()=>(0,Q.jsx)(A().A,{userEmailDomainSettings:o})},{key:"spaceInfo",renderSettingsItem:()=>(0,Q.jsx)(ue,{})}].filter(y().O9)}function ue(){const e=(0,c().O$)(o().AppStoreSidebarSpaceStore);return e?(0,Q.jsx)(R().K,{spaceStore:e,showDomain:!0}):null}function pe(){return[{key:"appearance",renderSettingsItem:()=>(0,Q.jsx)(he,{})},(0,r().X)("nds_high_contrast_mode")?{key:"contrast",renderSettingsItem:()=>(0,Q.jsx)(fe,{})}:void 0].filter(y().O9)}function ge(e){var t,s;const{environment:i}=e,{isElectron:n,isMac:o}=i.device,a=(0,c().O$)(p().A),r=a.isQuickSearchSupported,d=Boolean(null===(t=a.preferences)||void 0===t?void 0:t.isQuickSearchEnabled),l=a.isMenuBarIconSupported,u=a.isNewTabSearchSupported,g=void 0!==(null===(s=a.preferences)||void 0===s?void 0:s.isZenModeEnabled),m=a.isNoseySupported,h=n&&r,f=n&&g,S=n&&m,b=n&&r&&d,x=n&&o&&l&&d;return[n&&u?{key:"page-on-tab-start",renderSettingsItem:()=>(0,Q.jsx)(ye,{})}:void 0,...X(e),h?{key:"quick-search-enabled",renderSettingsItem:()=>(0,Q.jsx)(be,{})}:void 0,b?{key:"quick-search-shortcut",renderSettingsItem:()=>(0,Q.jsx)(we,{})}:void 0,b?{key:"notion-ai-shortcut",renderSettingsItem:()=>(0,Q.jsx)(Ae,{})}:void 0,x?{key:"menu-bar-icon-enabled",renderSettingsItem:()=>(0,Q.jsx)(je,{})}:void 0,f?{key:"zen-mode-enabled",renderSettingsItem:()=>(0,Q.jsx)(xe,{})}:void 0,S?{key:"nosey-enabled",renderSettingsItem:()=>(0,Q.jsx)(ve,{})}:void 0].filter(y().O9)}function me({billingData:e,passwordRequestStore:t}){const s=(0,f().eh)(e,"student"),i=(0,c().K8)((()=>{var e;return(null===(e=o().default.state.currentUserStore)||void 0===e?void 0:e.getEmail())??""}),[]),{hasPassword:n,canConfigurePassword:a,isSamlEnforced:r,mfaStatus:d,error:l,ready:u}=(0,c().K8)((()=>({...t.state.result,error:t.state.error,ready:t.state.result})),[t]);return l?(0,Q.jsx)(M().A,{hasPassword:!1,hasPasswordActions:!1,samlEnforced:!1,mfaStatus:"loading",email:i,onReloadSettings:()=>t.refresh(),isError:!0}):u?(0,Q.jsx)(M().A,{hasPassword:n,hasPasswordActions:a,samlEnforced:r,mfaStatus:d,isEducationPlan:s,email:i,onReloadSettings:()=>t.refresh(),isError:!1}):(0,Q.jsx)(h().k,{})}function he(){const e=(0,c().K8)((()=>b().lv()),[]),t=(0,n().L)();return(0,Q.jsx)(k().A,{spaceStore:t,title:(0,Q.jsx)(S().sA,{id:"appearanceSettings.title",defaultMessage:"Appearance"}),caption:(0,Q.jsx)(S().sA,{id:"appearanceSettings.description.message",defaultMessage:"Customize how Notion looks on your device."}),type:"dropdown",currentOption:e,options:[{key:"system",label:(0,Q.jsx)(S().sA,{id:"appearanceSetting.system.label",defaultMessage:"Use system setting"})},{key:"light",label:(0,Q.jsx)(S().sA,{id:"appearanceSetting.light.label",defaultMessage:"Light"})},{key:"dark",label:(0,Q.jsx)(S().sA,{id:"appearanceSetting.dark.label",defaultMessage:"Dark"})}],onSelectOption:e=>{b().C5(e)}})}function fe(){const e=(0,l().v3)(),t=(0,c().K8)((()=>(0,x().Wu)(e)),[e]),s=(0,n().L)();return(0,Q.jsx)(k().A,{spaceStore:s,title:(0,Q.jsx)(S().sA,{id:"contrastSettings.title",defaultMessage:"High contrast"}),caption:(0,Q.jsx)(S().sA,{id:"contrastSettings.description.message",defaultMessage:"Increase contrast for improved visibility."}),type:"dropdown",currentOption:t,options:[{key:"auto",label:(0,Q.jsx)(S().sA,{id:"contrastSetting.auto.label",defaultMessage:"Use system setting"})},{key:"off",label:(0,Q.jsx)(S().sA,{id:"contrastSetting.off.label",defaultMessage:"Default contrast"})},{key:"high",label:(0,Q.jsx)(S().sA,{id:"contrastSetting.high.label",defaultMessage:"High contrast"})}],onSelectOption:t=>{(0,x().S4)({environment:e,preference:t})}})}function Se(){const e=(0,c().K8)((()=>D().A.state??"external"),[]),t=(0,n().L)();return(0,Q.jsx)(k().A,{spaceStore:t,title:(0,Q.jsx)(S().sA,{id:"openExternalLinksSettings.title",defaultMessage:"External links"}),caption:(0,Q.jsx)(S().sA,{id:"openExternalLinksSettings.description.message",defaultMessage:"Choose how to open links on this device."}),type:"dropdown",currentOption:e,options:[{key:"in-app",label:(0,Q.jsx)(S().sA,{id:"openExternalLinksSettings.inAppBrowser.title",defaultMessage:"In-app browser"})},{key:"external",label:(0,Q.jsx)(S().sA,{id:"openExternalLinksSettings.externalBrowser.title",defaultMessage:"System default browser"})}],onSelectOption:e=>{D().A.setState(e)}})}function ye(){const e=(0,c().K8)((()=>{var e;const t=p().A.state;return Boolean(null===(e=t.preferences)||void 0===e?void 0:e.isNewTabSearchEnabled)}),[]),t=(0,i.useCallback)((()=>{const t=!e;a().Zq.setPreference("isNewTabSearchEnabled",t)}),[e]),s=(0,n().L)(),o=(0,Q.jsx)(S().sA,{id:"desktopNewTabSearch.toggle.title",defaultMessage:"New Tab Search"}),r=(0,Q.jsx)(S().sA,{id:"desktopNewTabSearch.toggle.caption",defaultMessage:"Immediately search for and navigate to a specific page when you open a new tab. When turned off, new tabs will follow your “Default page” settings. <inlinelink>Learn more</inlinelink>.",values:{inlinelink:e=>(0,Q.jsx)(m().V,{external:!0,href:(0,_().x)("guides.whyDesktop"),onClick:e=>{e.stopPropagation()},children:e})}});return(0,Q.jsx)(k().A,{spaceStore:s,type:"toggle",title:o,caption:r,isOn:e,onToggle:t})}function be(){const e=(0,c().K8)((()=>{var e;const t=p().A.state;return Boolean(null===(e=t.preferences)||void 0===e?void 0:e.isQuickSearchEnabled)}),[]),t=(0,i.useCallback)((()=>{const t=!e;a().Zq.setPreference("isQuickSearchEnabled",t)}),[e]),s=(0,Q.jsx)(S().sA,{id:"desktopQuickSearch.toggle.title",defaultMessage:"Use Command Search"}),o=(0,Q.jsx)(S().sA,{id:"desktopQuickSearch.toggle.caption",defaultMessage:"Open Notion AI and search anywhere with a shortcut, even when your Notion app isn’t active."}),r=(0,n().L)();return(0,Q.jsx)(k().A,{spaceStore:r,type:"toggle",title:s,caption:o,isOn:e,onToggle:t})}function xe(){const e=(0,c().K8)((()=>{var e;const t=p().A.state;return Boolean(null===(e=t.preferences)||void 0===e?void 0:e.isZenModeEnabled)}),[]),t=(0,n().L)(),s=(0,i.useCallback)((()=>{const t=!e;a().Zq.setPreference("isZenModeEnabled",t)}),[e]),o=(0,Q.jsx)(S().sA,{id:"desktopZenMode.toggle.title",defaultMessage:"Auto-hide tab bar"}),r=(0,Q.jsx)(S().sA,{id:"desktopZenMode.toggle.caption",defaultMessage:"Hide the tab bar when typing in the editor for a clean, focused writing experience."});return(0,Q.jsx)(k().A,{spaceStore:t,type:"toggle",title:o,caption:r,isOn:e,onToggle:s})}function ve(){const e=(0,c().K8)((()=>{var e;const t=p().A.state;return Boolean(null===(e=t.preferences)||void 0===e?void 0:e.isNoseyEnabled)}),[]),t=(0,n().L)(),s=(0,i.useCallback)((()=>{const t=!e;a().Zq.setPreference("isNoseyEnabled",t)}),[e]),o=(0,Q.jsx)(S().sA,{id:"desktopNosey.toggle.title",defaultMessage:"Floating Nosey"}),r=(0,Q.jsx)(S().sA,{id:"desktopNosey.toggle.caption",defaultMessage:"Keep Nosey floating in desktop."});return(0,Q.jsx)(k().A,{spaceStore:t,type:"toggle",title:o,caption:r,isOn:e,onToggle:s})}function we(){const{quickSearchShortcut:e,notionAiShortcut:t}=(0,c().K8)((()=>{const e=p().A.state.preferences;return{quickSearchShortcut:null==e?void 0:e.quickSearchShortcut,notionAiShortcut:null==e?void 0:e.notionAiShortcut}}),[]),{isMac:s}=(0,l().Y0)(),o=(0,i.useCallback)((e=>{a().Zq.setPreference("quickSearchShortcut",e)}),[]),r=(0,n().L)(),d=(0,Q.jsx)(S().sA,{id:"desktopQuickSearch.shortcut.title",defaultMessage:"Command Search shortcut"}),u=(0,Q.jsx)(S().sA,{id:"desktopQuickSearch.shortcut.caption",defaultMessage:"Customize the shortcut used to trigger Command Search."});return(0,Q.jsx)(k().A,{spaceStore:r,type:"custom",title:d,caption:u,disableSettingsItemClick:!0,customButton:(0,Q.jsx)("div",{children:(0,Q.jsx)(re().np,{shortcut:e,onChange:o,conflictingShortcuts:[t].filter(y().O9),isMac:s})})})}function Ae(){const{notionAiShortcut:e,commandSearchShortcut:t}=(0,c().K8)((()=>{const e=p().A.state.preferences;return{notionAiShortcut:null==e?void 0:e.notionAiShortcut,commandSearchShortcut:null==e?void 0:e.quickSearchShortcut}}),[]),s=(0,i.useCallback)((e=>{a().Zq.setPreference("notionAiShortcut",e)}),[]),{isMac:o}=(0,l().Y0)(),r=(0,n().L)(),d=(0,Q.jsx)(S().sA,{id:"desktopNotionAi.shortcut.title",defaultMessage:"Notion AI shortcut"}),u=(0,Q.jsx)(S().sA,{id:"desktopNotionAi.shortcut.caption",defaultMessage:"Customize the shortcut to trigger Notion AI, if your workspace has AI enabled."});return(0,Q.jsx)(k().A,{spaceStore:r,type:"custom",title:d,caption:u,disableSettingsItemClick:!0,customButton:(0,Q.jsx)("div",{children:(0,Q.jsx)(re().np,{shortcut:e,onChange:s,conflictingShortcuts:[t].filter(y().O9),isMac:o})})})}function je(){const e=(0,c().K8)((()=>{var e;const t=p().A.state;return Boolean(null===(e=t.preferences)||void 0===e?void 0:e.isMenuBarIconEnabled)}),[]),t=(0,i.useCallback)((()=>{a().Zq.setPreference("isMenuBarIconEnabled",!e)}),[e]),s=(0,n().L)(),o=(0,Q.jsx)(S().sA,{id:"menuBarIconMacSetting.toggle.title",defaultMessage:"Show Notion in menu bar"}),r=(0,Q.jsx)(S().sA,{id:"menuBarIconMacSetting.toggle.caption",defaultMessage:"Access Notion faster from the top right of your screen."});return(0,Q.jsx)(k().A,{spaceStore:s,type:"toggle",title:o,caption:r,isOn:e,onToggle:t})}},442672:(e,t,s)=>{s.d(t,{u:()=>r});s(581454);var i=()=>s(651220),n=s(296540),o=()=>s(590526),a=s(474848);function r(e){const t=n.useRef(null),{rows:s=[],hasMore:r}=(0,o().O$)(e.listSource.rowsStore),d=(0,i().Te)({count:s.length,getScrollElement:()=>t.current,estimateSize:t=>e.estimateSize(s[t],t),overscan:10}),l=d.getVirtualItems();return(0,n.useEffect)((()=>{!async function(){const t=l[l.length-1];r&&(null==t?void 0:t.index)>=s.length-1&&await e.listSource.loadMore()}()}),[e.listSource,l,s.length,r]),(0,a.jsx)("div",{ref:t,style:{overflow:"auto",...e.style},children:(0,a.jsx)("div",{style:{height:`${d.getTotalSize()}px`,width:"100%",position:"relative"},children:l.map((t=>(0,a.jsx)("div",{style:{position:"absolute",top:0,insetInlineStart:0,width:"100%",height:`${t.size}px`,transform:`translateY(${t.start}px)`},children:e.renderRow(s[t.index],t.index)},t.key.toString())))})})}},444133:(e,t,s)=>{s.d(t,{A:()=>he});s(898992),s(354520),s(581454);var i=s(296540),n=()=>s(664594),o=()=>s(230711),a=()=>s(692031),r=()=>s(212497),d=()=>s(484714),l=()=>s(590526),c=()=>s(401497),u=()=>s(792057),p=()=>s(278729),g=()=>s(849255),m=()=>s(388926),h=()=>s(416783),f=()=>s(31511),S=()=>s(98126),y=()=>s(406094),b=()=>s(160432),x=()=>s(287188),v=()=>s(302501),w=()=>s(736847),A=()=>s(848538),j=()=>s(798880),M=()=>s(69708),k=()=>s(100622),C=()=>s(534177),I=()=>s(701763),_=()=>s(278768),T=()=>s(492666),P=()=>s(769864),R=()=>s(496414),D=()=>s(330900),N=()=>s(442672),B=()=>s(8178),E=()=>s(709438),O=()=>s(347930),q=()=>s(47373),U=()=>s(551732),L=()=>s(637573),V=()=>s(240865),F=()=>s(118789),z=()=>s(562866),G=()=>s(317025),K=()=>s(735230),W=()=>s(769730),H=()=>s(789180),$=()=>s(169626),Y=()=>s(406999),Q=()=>s(973189),Z=()=>s(404141),X=()=>s(309049),J=()=>s(408895),ee=()=>s(224701),te=()=>s(939622),se=()=>s(134217),ie=()=>s(910609),ne=()=>s(314907),oe=()=>s(547149),ae=()=>s(907258),re=()=>s(910322),de=()=>s(946144),le=s(474848);const ce={maxWidth:s(856461).x};function ue(e){const{member:t,spaceStore:s}=e,i=(0,d().v3)(),n=(0,o().U2)(s),a=(0,l().K8)((()=>null==n?void 0:n.getModel()),[n]),r=(0,l().O$)(ae().AppStoreCurrentUserSettingsStore);if(!a||!r)return null;return(0,le.jsx)(re().VI,{spaceStore:s,spaceUser:a,targetUserId:t.userId,currentType:t.membershipType,isInvite:!1,isMenuItem:!1,buttonStyle:ce,from:"spaceSettings",upgradeFrom:"space_permission_item",onClick:()=>{I().jR(i,{from:"member",button_name:"open_role"})},onChange:async e=>{"none"===e&&t.userId!==a.getUserId()?await de().Vr({userId:t.userId,currentMembershipType:t.membershipType,spaceStore:s,environment:i,userSettingStore:r}):await de().JZ({environment:i,userId:t.userId,newMembershipType:e,currentUserSettingsStore:r,spaceStore:s})}})}function pe(e){const{spaceStore:t,isMobile:n,unreadAccessRequests:o,disableAddMembers:a}=e,r=(0,d().v3)(),p=((0,M().tz)(),(0,l().uB)(void 0,Q().A)),m=(0,l().uB)(void 0,De),h=(0,ie().o)({spaceId:t.id});(0,s(852507).l)((()=>{!function(e){Z().Ay.state.open&&"members"===Z().Ay.state.currentTab&&Z().Ay.state.defaultSubtab&&(e.setState({...e.state,currentTab:Z().Ay.state.defaultSubtab}),Z().Ay.setState({...Z().Ay.state,defaultSubtab:void 0}))}(p),async function(e,t,s,i){if(!s.canAdmin())return;const n=await P().callApi({eventName:"getRecentlyRemovedUsers",environment:e,data:{spaceId:s.id}});if("failed"===n.type)throw u().Qg(n),n;i.setState(n.data.recentlyRemovedMembers)}(r,0,t,m)}));const[{value:f}]=(0,s(187174).Yb)((async()=>{const e=await P().callApi({eventName:"getAccessRequests",environment:r,data:{parentTable:"space",parentId:t.id,size:100,status:"pending"}});if("failed"===e.type)return[];const i=e.data.accessRequestIds;return await s(746970).si(r,t,i)}),[r,t],{throttle:1e3}),y=(0,l().O$)(s(983610).subscriptionDataStoreInstance),b=(0,l().K8)((()=>y?se().Be(y):[]),[y]),x=(0,l().K8)((()=>!!y&&s(496603).Si(b.map((e=>g().L.createChildStore(t,{table:j().oo,id:e.userId}).isReady())))),[t,y,b]),w=(0,l().K8)((()=>b.filter(s(322769).QE)),[b]),A=(0,l().K8)((()=>(0,q().Qd)()),[]),{tabs:k,selectedTabIndex:_,currentTab:T}=(0,l().K8)((()=>{const e=xe(r,t),s=e.map((e=>(0,le.jsx)(me,{tab:e,unreadAccessRequests:o,accessRequestRenderValues:f,spaceStore:t},e))),i=p.state.currentTab;return{tabs:s,selectedTabIndex:e.indexOf(i),currentTab:i}}),[r,t,p,o,f]),R=(0,s(359941).V)({spaceStore:t}),D=(0,i.useCallback)((e=>{!function(e,t,s,i){const n=xe(t,s)[e];switch(n){case Q().d.Members:I().K4(t,{tab:"members"});break;case Q().d.Groups:I().K4(t,{tab:"groups"});break;case Q().d.Guests:I().K4(t,{tab:"guests"});break;case Q().d.Reprovisioning:I().K4(t,{tab:"reprovisioning"});break;case Q().d.Requests:I().K4(t,{tab:"requests"});break;case Q().d.Contacts:I().K4(t,{tab:"contacts"});break;default:(0,C().HB)(n)}i.state.currentTab===Q().d.Requests&&n!==Q().d.Requests&&X().A.reset();!function(e,t){t.setState({...t.state,currentTab:e})}(n,i)}(e,r,t,p)}),[r,t,p]),N=(0,c().IS)((()=>({tabBarMenuItem:{paddingInlineStart:0,paddingInlineEnd:0,marginTop:-6,marginBottom:14,overflowY:void 0,overflowX:void 0},tabTitle:{fontSize:16},labelContainer:{display:"flex",flexDirection:"column",gap:8,marginBottom:20},peopleTabTitleContainer:{display:"flex",alignItems:"center",gap:7},peopleTabTitle:{fontWeight:s(284371).Wy.medium,fontSize:17},peopleSubtitle:{fontSize:15},peopleDirectoryLinkContainer:{marginBottom:20,display:"flex",justifyContent:"flex-end"}})),[]);if(!y||!x||void 0===f)return(0,le.jsx)("div",{style:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,le.jsx)(S().k,{})});if(n)return(0,le.jsx)(ge,{spaceStore:t,spacePermissionsSettingsStore:p,disableAddMembers:a});const B=(0,le.jsxs)(le.Fragment,{children:[R?(0,le.jsx)("div",{style:N.peopleDirectoryLinkContainer,children:(0,le.jsx)(s(185426).$,{})}):void 0,(0,le.jsx)(s(463438).LZ,{tabs:k,selectedIndex:_,onChange:D,style:N.tabBarMenuItem,tabTitleStyle:N.tabTitle}),A?(0,le.jsxs)("div",{style:N.labelContainer,children:[(0,le.jsxs)("div",{style:N.peopleTabTitleContainer,children:[(0,le.jsx)(v().A,{style:N.peopleTabTitle,children:(0,le.jsx)(M().sA,{id:"spaceBasicSettings.people.title",defaultMessage:"People"})}),(0,le.jsx)(s(690197).A,{href:(0,s(232930).x)("guides.members"),analyticsFrom:"members_settings"})]}),(0,le.jsx)(v().A,{isSecondaryColor:!0,style:N.peopleSubtitle,children:(0,le.jsx)(M().sA,{id:"spaceBasicSettings.people.subtitle",defaultMessage:"Manage members, external guests, groups and permissions."})})]}):void 0,(0,le.jsx)(s(143066).Q,{spaceStore:t,currentTab:T,inviteLinkCode:h,guests:w,spacePermissionsSettingsStore:p,recentlyRemovedMembersStore:m,accessRequestRenderValues:f})]});return(0,le.jsx)(s(843878).Ay,{children:B})}function ge(e){const{spaceStore:t,spacePermissionsSettingsStore:s,disableAddMembers:i}=e,n=(0,l().K8)((()=>t.canEditMembership()&&!i),[t,i]),o=Ae();return(0,le.jsxs)("div",{style:{height:"100%",position:"relative",display:"flex",flexDirection:"column"},children:[n?(0,le.jsxs)(w().A,{shouldShowBottomDivider:!0,children:[(0,le.jsx)(Ie,{spaceStore:t}),(0,le.jsx)("div",{style:o,children:(0,le.jsx)(_e,{spaceStore:t,isMobile:!0,spacePermissionsSettingsStore:s})})]}):void 0,(0,le.jsx)(Pe,{spaceStore:t})]})}function me({tab:e,accessRequestRenderValues:t,unreadAccessRequests:s,spaceStore:i}){const a=(0,d().v3)(),r=(0,n().T)(),u=(0,l().K8)((()=>i.id),[i]),p=(0,o().V_)({spaceStore:i,userId:r}),g=(0,W().x)({spaceUserMembershipType:p}),m=(0,l().K8)((()=>!!r&&function(e){const{environment:t,spaceId:s,userId:i}=e;if(!i)return!1;return se().vl(t)&&function(e){const{spaceId:t,userId:s}=e,i=(0,J().M)({spaceId:t,userId:s,enforceIdsCheck:!1,debugFrom:"SpacePermissionsSettings.isSubscribed"});if(!i)return!1;return se().Fq(i)}({spaceId:s,userId:i})}({environment:a,spaceId:u,userId:r})),[a,u,r]),h=(0,l().K8)((()=>$().h.state.permissionGroupsAndMemberCounts.size),[]),f=(0,l().K8)((()=>(0,q().Qd)()),[]),S=(0,L().r)()??0,y=(0,V().V)()??1,b=(0,c().IS)((()=>({lightTextColor:{color:k().Tj.text.tertiary}})),[]);switch(e){case Q().d.Members:return(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(M().sA,{id:"spacePermissionsSettings.membersTab.title",defaultMessage:"Members"}),g?(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)("span",{children:" "}),(0,le.jsx)("span",{style:b.lightTextColor,children:y})]}):void 0]});case Q().d.Groups:return(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(M().sA,{id:"spaceBasicSettings.groupsTab.title",defaultMessage:"Groups"}),m&&g&&(0,C().O9)(h)?(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)("span",{children:" "}),(0,le.jsx)("span",{style:b.lightTextColor,children:h})]}):void 0]});case Q().d.Guests:return(0,le.jsxs)(le.Fragment,{children:[f?(0,le.jsx)(M().sA,{id:"spacePermissionsSettings.externalTab.title",defaultMessage:"External"}):(0,le.jsx)(M().sA,{id:"spacePermissionsSettings.guestsTab.title",defaultMessage:"Guests"}),g?(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)("span",{children:" "}),(0,le.jsx)("span",{style:b.lightTextColor,children:S})]}):void 0]});case Q().d.Reprovisioning:return(0,le.jsx)(M().sA,{id:"spaceBasicSettings.reprovisioningTab.title",defaultMessage:"Recently left"});case Q().d.Requests:return(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(M().sA,{id:"spaceBasicSettings.requestsTab.title",defaultMessage:"Requests"}),g?(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)("span",{children:" "}),(0,le.jsx)("span",{style:b.lightTextColor,children:(0,le.jsx)(Te,{accessRequestRenderValues:t})}),(0,le.jsx)(je,{unreadAccessRequests:s})]}):void 0]});case Q().d.Contacts:return(0,le.jsx)(M().sA,{id:"spacePermissionsSettings.contactsTab.title",defaultMessage:"Contacts"});default:(0,C().HB)(e)}}const he=i.memo(pe);function fe({userStore:e,restorationStatus:t}){return(0,le.jsx)(K().A,{actorStore:e,restorationStatus:t})}function Se(e){return Boolean(e.getInviteLinkEnabled())}function ye(e,t){return t.canAdmin()&&(0,te().z)(e,{name:"content_reprovisioning",spaceId:t.id,userId:e.currentUser.id})}function be(e){return e.canEditMembership()&&(0,q().x3)()}function xe(e,t){const s=e.currentUser.id;if(s){if(p().V.createChildStore(t,A().i1({userId:s,spaceId:t.id})).isRestrictedMember())return[Q().d.Members,Q().d.Guests]}return[Q().d.Members,Q().d.Groups,Q().d.Guests,...ye(e,t)?[Q().d.Reprovisioning]:[],...be(t)?[Q().d.Requests]:[]]}function ve({spaceStore:e}){const t=(0,d().v3)();return(0,l().K8)((()=>e.isDefined()),[e])?(0,le.jsx)(M().sA,{id:"spacePermissionSettings.spaceMembers.inviteLink.resetLink",defaultMessage:"You can <resetlink>reset the link</resetlink> for all space members to generate a new invite link.",values:{resetlink:s=>(0,le.jsx)(h().V,{onClick:()=>{u().ui({message:(0,le.jsx)(M().sA,{id:"spacePermissionsSettings.inviteLinkRefreshModal.description",defaultMessage:"Are you sure you want to reset the invite link for all space members? Your old one will no longer be able to be used."}),showCancel:!0,keepFocus:!1,handleCancel:u().zw,items:[{label:(0,le.jsx)(M().sA,{id:"spacePermissionsSettings.inviteLinkRefreshModal.accept",defaultMessage:"Reset"}),color:"red",onAccept:async()=>{await P().callApi({eventName:"refreshInviteLink",environment:t,data:{spaceId:e.id}}),ee().x(t)}}]})},children:s})}}):null}function we({inviteLinkUrl:e,isMobile:t}){const s=(0,d().v3)(),{mobileNative:i}=s,n=(0,le.jsx)(M().sA,{id:"spacePermissionsSettings.spaceMembers.inviteLink.copyButton",defaultMessage:"Copy link"}),o=async()=>{const[t,i]=await Promise.all([(0,a().r)(),(0,r().jd)()]);i({environment:s,stringValue:e,copiedMessage:t.copiedLinkToClipboard}),(0,T().b)(s)},l=()=>{i&&i.share(e),(0,T().b)(s)};return t?(0,le.jsxs)("div",{children:[(0,le.jsx)(f().A,{type:"text",format:"default",value:e,disabled:!0}),i?(0,le.jsx)(y().A,{size:"lg",onClick:l,style:{marginTop:10,width:"100%"},children:(0,le.jsx)(M().sA,{id:"spacePermissionsSettings.spaceMembers.inviteLink.shareButton",defaultMessage:"Share link"})}):(0,le.jsx)(y().A,{size:"lg",onClick:o,style:{marginTop:10,width:"100%"},children:n})]}):(0,le.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",marginTop:12},children:[(0,le.jsx)(f().A,{type:"text",format:"default",value:e,disabled:!0,style:{borderStartEndRadius:0,borderEndEndRadius:0,width:"calc(100% - 90px)",height:32}}),(0,le.jsx)(b().A,{colorPalette:"blue",onClick:o,style:{borderStartStartRadius:0,borderEndStartRadius:0},size:"lg",children:n})]})}function Ae(){const{WindowSizeStore:e}=(0,d().v3)(),t=(0,l().K8)((()=>e.getSafePaddingRightCSS(14)),[e]);return(0,c().IS)((()=>({mobileMenuItem:{display:"flex",paddingTop:14,paddingBottom:14,paddingInlineStart:14,paddingInlineEnd:t,background:k().Tj.background.elevated}})),[t]).mobileMenuItem}function je({unreadAccessRequests:e}){return e&&e>0?(0,le.jsx)(E().m,{color:k().Tj.red.icon.accentPrimary,style:{marginInlineStart:6}}):null}function Me(){const e=(0,M().YK)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updating…"}});R().m({message:e.updatingPermissions})}function ke(){R().V()}function Ce({buttonStyle:e,spaceStore:t}){const s=(0,d().v3)(),n=(0,l().K8)((()=>t.id),[t]),o=(0,l().K8)((()=>t.canEditMembership()),[t]),a=(0,l().K8)((()=>!o&&!t.getDisableMembershipRequests()&&(0,q().x3)()),[o,t]),r=(0,i.useMemo)((()=>(0,Y().nc)()),[]),c=(0,ne().E)({spaceId:n}),u=(0,i.useCallback)((()=>{(0,G().qU)(s)}),[s]);return a?(0,le.jsx)(z().cx,{spaceStore:t,analyticsFrom:"space_settings_add_members",origin:(0,le.jsx)(b().A,{colorPalette:"blue",size:"lg",onClick:u,children:(0,le.jsx)(M().sA,{id:"inviteUserButton.requestMemberLabel",defaultMessage:"Add members"})})}):(0,le.jsx)(O().H,{disabled:!o,targetStore:t,spaceStore:t,permissionsInviteStore:r,onInviteClick:Me,onInviteComplete:ke,isSubscribed:c,membersOnly:!1,upgradeButtonName:"space_permission_settings",shouldGrow:!1,buttonStyle:e,analyticsFrom:"space_settings_add_members"})}function Ie({spaceStore:e}){const t=Ae();return(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)("div",{style:t,children:(0,le.jsx)(Ce,{spaceStore:e,buttonStyle:{flex:1}})}),(0,le.jsx)("div",{style:{borderBottom:`1px solid ${k().Tj.border.secondaryTranslucent}`}})]})}function _e({spaceStore:e,isMobile:t,spacePermissionsSettingsStore:s}){const i=(0,d().v3)(),n=(0,H().Gg)({spaceStore:e}),o=(0,ie().o)({spaceId:e.id}),a=(0,l().K8)((()=>function(e,t,s){if(void 0===s)return;const i=e.id;return s?(0,U().X)(t,i,s):void 0}(e,i,o)),[i,e,o]),r=(0,l().K8)((()=>Se(e)),[e]);return n&&a?(0,le.jsxs)("div",{children:[(0,le.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",cursor:"pointer"},children:[(0,le.jsxs)("div",{style:{marginInlineEnd:8,flexGrow:1},children:[(0,le.jsx)(B().A,{children:(0,le.jsx)(M().sA,{id:"spacePermissionsSettings.spaceMembers.inviteLink.title",defaultMessage:"Invite link"})}),(0,le.jsxs)(v().A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"85%"},children:[(0,le.jsx)(M().sA,{id:"spacePermissionSettings.spaceMembers.inviteLink.caption",defaultMessage:"Share this secret link to invite people to this workspace. Only users who can invite members can see this."})," ",t?void 0:(0,le.jsx)(ve,{spaceStore:e})]})]}),(0,le.jsx)("div",{style:{marginTop:5},children:(0,le.jsx)(x().A,{on:r,onClick:()=>function(e,t){const s=!Se(e);_().OE(t,{enabled:s}),oe().createAndCommit({userAction:"SpacePermissionsSettings.handleInviteLinkClick",environment:t,canUndo:!0,perform:t=>{(0,D().X)({transaction:t,spaceStore:e,inviteLinkEnabled:Boolean(s)})}})}(e,i)})})]}),s&&r&&a?(0,le.jsx)("div",{style:t?{marginTop:5}:void 0,children:(0,le.jsx)(we,{isMobile:t,inviteLinkUrl:a})}):void 0,(0,le.jsx)(m().A,{size:40})]}):null}function Te({accessRequestRenderValues:e}){const t=(0,l().K8)((()=>e?e.filter((e=>"pending"===e.accessRequest.status)).length:0),[e]);return e?(0,le.jsx)("span",{children:t}):(0,le.jsx)("span",{})}function Pe({spaceStore:e}){const t=(0,c().IS)((()=>({container:{flex:1,width:"100%",display:"flex",flexDirection:"column",overflow:"hidden",boxShadow:`0 -1px 0 ${k().Tj.border.secondaryTranslucent}`},loadingContainer:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"}})),[]),s=(0,F().n)({sort:{field:"type",direction:"desc"},query:"",filter:A().v1,limit:30}),i=(0,l().K8)((()=>!(null!=s&&s.rowsStore.state.rows)),[s]);return!s||i?(0,le.jsx)("div",{style:t.loadingContainer,children:(0,le.jsx)(S().k,{})}):(0,le.jsx)("div",{style:t.container,children:(0,le.jsx)(N().u,{listSource:s,renderRow:t=>(0,le.jsx)(Re,{member:t,spaceStore:e}),estimateSize:()=>57})})}function Re({member:e,spaceStore:t}){const s=(0,c().IS)((()=>({container:{display:"flex",alignItems:"center",padding:10,paddingInlineEnd:2,gap:5,justifyContent:"space-between",width:"100%",borderBottom:`1px solid ${k().Tj.border.secondaryTranslucent}`,background:k().Tj.background.elevated},memberContainer:{flexShrink:1,minWidth:50},permissionContainer:{textAlign:"center",marginInlineStart:"auto",flexShrink:0}})),[]),i=(0,l().K8)((()=>g().L.createChildStore(t,{table:j().oo,id:e.id})),[e,t]);return void 0!==e.membership_type&&(0,A().MN)(e.membership_type)?(0,le.jsxs)("div",{style:s.container,children:[(0,le.jsx)("div",{style:s.memberContainer,children:(0,le.jsx)(fe,{userStore:i})}),(0,le.jsx)("div",{style:s.permissionContainer,children:(0,le.jsx)(ue,{spaceStore:t,member:{userId:e.id,membershipType:e.membership_type}})})]},e.id):null}class De extends(()=>s(757695))().Store{getInitialState(){}}},448835:(e,t,s)=>{s.d(t,{Pz:()=>d,bG:()=>o,lI:()=>a,of:()=>n,ym:()=>r});var i=()=>s(79926);const n=new(i().O2)("offlineSettings",(()=>Promise.all([s.e(38293),s.e(91793),s.e(3551)]).then(s.bind(s,857245)))),o=(0,i()._h)(n,(e=>e.OfflineSettings)),a=(0,i()._h)(n,(e=>e.OfflineSettingsMobile)),r=(0,i()._h)(n,(e=>e.MobileOfflineSettingsSection)),d=(0,i()._h)(n,(e=>e.OfflineModeDebugSettings))},461857:(e,t,s)=>{s.d(t,{q:()=>o});s(898992),s(672577);var i=()=>s(769864),n=()=>s(775191);class o{constructor(e){this.environment=void 0,this.environment=e}async confirmIdentity(){const{settings:e,sessionVerificationExpirationInSeconds:t}=await this.loadSettings();return t&&t>2*s(720665).m1?{status:"ready"}:e.length>0?{status:"mfa",settings:e}:{status:"password"}}async loadSettings(){const e=await i().callMainCellApi({eventName:"authGetLoginConfiguration",environment:this.environment,data:{}});if("success"===e.type){const{data:t}=e;return"required"===t.samlSignIn?{settings:[],sessionVerificationExpirationInSeconds:t.sessionVerificationExpirationInSeconds}:{settings:t.mfaOptions,sessionVerificationExpirationInSeconds:t.sessionVerificationExpirationInSeconds}}throw e}async sendTemporaryPassword(e){const{email:t}=e,s=await i().callApi({eventName:"sendTemporaryPassword",environment:this.environment,data:{passwordReset:!0,email:t}});if("success"===s.type)return{status:"ok"};throw s}async verifyBackupCode(e){var t;const{code:s}=e,n=s.split("-").join(""),o=await i().callApi({eventName:"authVerifyBackupCodesLogin",environment:this.environment,data:{code:n}});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async verifyIdentityWithPassword(e){var t;const{password:s}=e,n=await i().callApi({eventName:"authVerifyPassword",environment:this.environment,data:{password:s}});if("success"===n.type)return{status:"match"};if("incorrect_password"===(null===(t=n.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw n}async disableMFA(){const e=await i().callApi({eventName:"authUpdateMfa",environment:this.environment,data:{action:"disable_all"}});if("success"===e.type)return{status:"ok"};throw e}async verifyIdentityWithTOTP(e){var t;const{mfaSettingId:s,code:n}=e,o=await i().callApi({eventName:"authVerifyTotpLogin",environment:this.environment,data:{mfaSettingId:s,code:n}});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async verifyIdentityWithSMS(e){var t;const{mfaSettingId:s,code:n}=e,o=await i().callApi({eventName:"authVerifySmsLogin",environment:this.environment,data:{mfaSettingId:s,code:n}});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async renameSettings(e){var t,s,n;const{mfaSettingId:o,friendlyName:a}=e,r=await i().callApi({eventName:"authUpdateMfa",environment:this.environment,data:{action:"rename",mfaSettingId:o,friendlyName:a}});if("success"===r.type)return{status:"saved",settings:r.data.mfaOptions};if("mfa_duplicate_friendly_name"===(null===(t=r.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"duplicate"};if("mfa_empty_friendly_name"===(null===(s=r.body)||void 0===s||null===(s=s.clientData)||void 0===s?void 0:s.type))return{status:"empty"};if("mfa_bad_friendly_name"===(null===(n=r.body)||void 0===n||null===(n=n.clientData)||void 0===n?void 0:n.type))return{status:"bad_friendly_name"};throw r}async deleteSettings(e){const t=await i().callApi({eventName:"authUpdateMfa",environment:this.environment,data:{action:"delete",mfaSettingId:e}});if("success"===t.type)return{settings:t.data.mfaOptions};throw t}async createTOTP(){const e=await i().callApi({eventName:"authCreateTotp",environment:this.environment,data:{}});if("success"===e.type)return{mfaSettingId:e.data.mfaSettingId,secret:e.data.authCode,qrCode:e.data.qrCode};throw e}async verifyTOTP(e){var t;const{mfaSettingId:s,code:n}=e,o=await i().callApi({eventName:"authVerifyTotpEnroll",environment:this.environment,data:{mfaSettingId:s,code:n}});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async createSMS(e,t){var s,n,o,a;const r=await i().callApi({eventName:"authCreateSms",environment:this.environment,data:{countryCode:e,phoneNumber:t}});if("success"===r.type)return{status:"created",mfaSettingId:r.data.mfaSettingId};if("already_verified_phone_number"===(null===(s=r.body)||void 0===s||null===(s=s.clientData)||void 0===s?void 0:s.type))return{status:"already_verified_phone_number"};if("invalid_country_code"===(null===(n=r.body)||void 0===n||null===(n=n.clientData)||void 0===n?void 0:n.type))return{status:"invalid_country_code"};if("invalid_phone_number"===(null===(o=r.body)||void 0===o||null===(o=o.clientData)||void 0===o?void 0:o.type))return{status:"invalid_phone_number"};if("mfa_sms_unsupported_country_code_for_enrollment"===(null===(a=r.body)||void 0===a||null===(a=a.clientData)||void 0===a?void 0:a.type))return{status:"sms_unsupported_country_code_for_enrollment"};throw r}async verifySMS(e){var t;const{mfaSettingId:s,code:n}=e,o=await i().callApi({eventName:"authVerifySmsEnroll",environment:this.environment,data:{mfaSettingId:s,code:n}});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async sendSMS(e){const{mfaSettingId:t}=e,s=await i().callApi({eventName:"authSendSms",environment:this.environment,data:{mfaSettingId:t}});if("success"===s.type)return{status:"ok"};throw s}async createBackupCodes(e){if(!e){const{settings:e}=await this.loadSettings();if(e.find((e=>"backup_code"===e.mfaMethod)))return{status:"already-exists"}}const t=await i().callApi({eventName:"authCreateBackupCodes",environment:this.environment,data:{}});if("success"===t.type)return{status:"new",mfaSettingId:t.data.mfaSettingId,backupCodes:t.data.codes};throw t}async loadPasskeySettings(){const e=await i().callMainCellApi({eventName:"authGetLoginConfiguration",environment:this.environment,data:{}});if("success"===e.type){const{data:t}=e;return{settings:t.passkeys}}throw e}async createPasskeySetting(e){const t=await i().callApi({eventName:"generatePasskeyRegistrationOptions",environment:e,data:{}});if("success"!==t.type)return{created:!1};const{options:s,attemptId:o}=t.data,a=await n().Go({options:s});return a?await n().d6({environment:e,attemptId:o,attestation:a}):{created:!1}}async renamePasskeySetting(e){const t=await i().callApi({eventName:"renamePasskey",environment:this.environment,data:e});if("success"===t.type)return{status:"saved",settings:t.data.passkeys};throw t}async deletePasskeySetting(e){const t=await i().callApi({eventName:"removePasskey",environment:this.environment,data:e});if("success"===t.type)return{settings:t.data.passkeys};throw t}}},471511:(e,t,s)=>{s.d(t,{A:()=>ve});var i=s(296540),n=()=>s(484714),o=()=>s(590526),a=()=>s(534177),r=()=>s(775191),d=()=>s(381678),l=()=>s(401497),c=()=>s(807449),u=()=>s(533642),p=()=>s(69708),g=()=>s(100622),m=()=>s(284371),h=()=>s(508382),f=()=>s(274602),S=s(474848);function y(e){const{errorMessage:t,onStartTOTP:s,onStartSMS:n,onDismiss:o}=e,a=(0,l().IS)((()=>({button:{marginBottom:5},settingsTitle:{color:g().Tj.text.secondary,fontWeight:m().Wy.medium,marginBottom:8}})),[]),r=(0,S.jsx)(p().sA,{id:"mfa.turnOnSettings.title",defaultMessage:"Turn on 2-step verification"}),d=(0,S.jsx)(p().sA,{id:"mfa.turnOnSettings.message",defaultMessage:"Confirm it’s you when you use a password with a verification code"}),y=(0,i.useMemo)((()=>(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(h().A,{type:"totp",title:(0,S.jsx)(p().sA,{id:"mfa.turnOnSettings.setupAuthenticator.button.title",defaultMessage:"Code from authenticator"}),caption:(0,S.jsx)(p().sA,{id:"mfa.turnOnSettings.setupAuthenticator.button.message",defaultMessage:"Generate a one-time code in your authenticator app"}),onClick:s,style:a.button}),(0,S.jsx)(h().A,{type:"sms",title:(0,S.jsx)(p().sA,{id:"mfa.turnOnSettings.setupSMS.button.title",defaultMessage:"Text me a code"}),caption:(0,S.jsx)(p().sA,{id:"mfa.turnOnSettings.setupSMS.button.message",defaultMessage:"Add and verify your phone number"}),onClick:n,style:a.button})]})),[a,n,s]);return(0,S.jsx)(f().A,{title:r,header:d,children:y,icon:(0,S.jsx)(c().I,{icon:u().shieldLockIcon,size:"xl",colorVariant:"secondary"}),errorMessage:t,onDismiss:o})}var b=()=>s(98126),x=()=>s(236262);function v(e){const{isLoading:t,mfaSetting:s,errorMessage:i,onDismiss:n,onCancel:o,onDeleteMethod:r}=e,d=(0,l().IS)((()=>({boldText:{fontWeight:m().Wy.semibold}})),[]),u={text:t?(0,S.jsx)(b().k,{}):(0,S.jsx)(p().sA,{id:"mfa.deleteSetting.permanentlyDelete.button.message",defaultMessage:"Permanently delete"}),onClick:()=>r(s),isRed:!0},g=[{text:(0,S.jsx)(p().sA,{id:"mfa.deleteSetting.cancel.button.message",defaultMessage:"Cancel"}),onClick:o,type:"button",view:"outline"}];return(0,S.jsx)(f().A,{title:(()=>{const e=s.mfaMethod;switch(e){case"sms":return(0,S.jsx)(p().sA,{id:"mfa.deleteSetting.sms.title",defaultMessage:"Delete {phoneHint}",values:{phoneHint:s.phoneNumber}});case"totp":return(0,S.jsx)(p().sA,{id:"mfa.deleteSetting.totp.title",defaultMessage:"Delete {friendlyName}",values:{friendlyName:s.friendlyName}});default:return(0,a().HB)(e)}})(),header:(()=>{const e=s.mfaMethod;switch(e){case"sms":return(0,S.jsx)(p().sA,{id:"mfa.deleteSetting.sms.header",defaultMessage:"Once deleted, you will no longer receive codes sent to {phoneHint}. <boldtext>Are you sure you want to delete this?</boldtext>",values:{phoneHint:s.phoneNumber,boldtext:e=>(0,S.jsx)("span",{style:d.boldText,children:e})}});case"totp":return(0,S.jsx)(p().sA,{id:"mfa.deleteSetting.totp.header",defaultMessage:"Once deleted, you will no longer be able to use codes generated from {friendlyName}. <boldtext>Are you sure you want to delete this?</boldtext>",values:{friendlyName:s.friendlyName,boldtext:e=>(0,S.jsx)("span",{style:d.boldText,children:e})}});default:return(0,a().HB)(e)}})(),icon:(0,S.jsx)(c().I,{icon:x().trashIcon,size:30,colorPalette:"red",colorVariant:"primary"}),primaryAction:u,secondaryActions:g,errorMessage:i,onDismiss:n})}s(581454);var w=()=>s(920949),A=()=>s(232930),j=()=>s(471095),M=()=>s(453697);function k(e){const{userStore:t}=e,s=(0,l().IS)((()=>({iconContainer:{position:"relative"},lockIconContainer:{position:"absolute",insetInlineEnd:0,insetInlineStart:24,top:20}})),[]);return(0,S.jsxs)("div",{style:s.iconContainer,children:[(0,S.jsx)(M().A,{userStore:t,size:36,avatarShouldShowShadow:!0}),(0,S.jsx)("span",{style:s.lockIconContainer,children:(0,S.jsx)(c().I,{icon:j().lockFillIcon,colorVariant:"accentPrimary",colorPalette:"red",showOutline:!0})})]})}function C(e){const{mfaSettings:t,isSMSLoading:s,chosenMfaSettingId:n,userStore:o,errorMessage:r,onClick:d,onDismiss:c}=e,u=(0,l().IS)((()=>({actionButton:{marginBottom:5}})),[]),g=(0,S.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.methodChooser.title",defaultMessage:"To continue, we need to verify your identity"}),m=(0,S.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.methodChooser.header",defaultMessage:"Select a method to verify your identity."}),y=[{text:(0,S.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.methodChooser.needHelp.button",defaultMessage:"Need help?"}),href:(0,A().x)("guides.mfa"),isExternal:!0,type:"link",view:"plain"}],b=(0,i.useMemo)((()=>(0,w().WS)(t).map((e=>{const t=e.mfaMethod;switch(t){case"totp":return(0,S.jsx)(h().A,{type:t,title:e.friendlyName,caption:(0,S.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useAuthenticator.button.message",defaultMessage:"Use code from authenticator"}),onClick:()=>d(e),style:u.actionButton,isActive:!0,disabled:s});case"sms":return(0,S.jsx)(h().A,{type:t,title:e.phoneNumber,caption:(0,S.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useSMS.button.message",defaultMessage:"Text me a code"}),onClick:()=>d(e),style:u.actionButton,isActive:!0,isLoading:s&&n===e.mfaSettingId,disabled:s&&n!==e.mfaSettingId});case"backup_code":return(0,S.jsx)(h().A,{type:t,title:(0,S.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useBackupCode.button.title",defaultMessage:"Use a backup code"}),caption:(0,S.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useBackupCode.button.message",defaultMessage:"Use a one-time backup code"}),onClick:()=>d(e),style:u.actionButton,isActive:!0,disabled:s});default:return(0,a().HB)(t)}}))),[t,d,s,n,u.actionButton]);return(0,S.jsx)(f().A,{title:g,header:m,errorMessage:r,icon:(0,S.jsx)(k,{userStore:o}),secondaryActions:y,onDismiss:c,children:b})}var I=()=>s(671089);function _(e){const{errorMessage:t,onDismiss:s}=e,i=(0,S.jsx)(p().sA,{id:"mfa.turnOffMFAComplete.title",defaultMessage:"2-step verification is turned off"}),n=(0,S.jsx)(p().sA,{id:"mfa.turnOffMFAComplete.header",defaultMessage:"2-step verification has been removed from your account. Notion will only ask for your password during log in."}),o=[{text:(0,S.jsx)(p().sA,{id:"mfa.turnOffMFAComplete.button.message",defaultMessage:"Complete"}),onClick:s,type:"button",view:"outline"}];return(0,S.jsx)(f().A,{title:i,header:n,errorMessage:t,icon:(0,S.jsx)(c().I,{icon:I().checkmarkCircleIcon,size:"xl",colorPalette:"green",colorVariant:"accentPrimary"}),secondaryActions:o,onDismiss:s})}var T=()=>s(378409);function P(e){const{isLoading:t,lastMFASetting:s,errorMessage:i,onDismiss:n,onTurnOffMFA:o,onCancel:a}=e,r=(0,S.jsx)(p().sA,{id:"mfa.turnOffMFA.title",defaultMessage:"Turn off 2-step verification"}),d={text:t?(0,S.jsx)(b().k,{}):(0,S.jsx)(p().sA,{id:"mfa.turnOffMFA.disableMFA.button.message",defaultMessage:"Turn off 2-step verification"}),onClick:o,isRed:!0},l=[{text:(0,S.jsx)(p().sA,{id:"mfa.turnOffMFA.cancel.button.message",defaultMessage:"Cancel"}),onClick:a,type:"button",view:"outline"}];return(0,S.jsx)(f().A,{title:r,header:s?(0,S.jsx)(p().sA,{id:"mfa.turnOffMFA.lastMFASettingDeleted.header",defaultMessage:"Deleting {mfaSettingName} will turn off 2-step verification and remove the additional layer of security on your account. Notion will only ask for your password during log in.",values:{mfaSettingName:"sms"===s.mfaMethod?`${s.phoneNumber}`:s.friendlyName,boldtext:e=>(0,S.jsx)("span",{style:{fontWeight:m().Wy.semibold},children:e})}}):(0,S.jsx)(p().sA,{id:"mfa.turnOffMFA.header",defaultMessage:"Turning off 2-step verification will remove the additional layer of security on your account. Notion will only ask for your password during log in. "}),icon:(0,S.jsx)(c().I,{icon:T().xMarkCircleIcon,colorPalette:"red",colorVariant:"accentPrimary",size:"xl"}),primaryAction:d,secondaryActions:l,errorMessage:i,onDismiss:n})}s(898992),s(354520);var R=()=>s(609679),D=()=>s(388926),N=()=>s(302501),B=()=>s(869190),E=()=>s(718827),O=()=>s(250910),q=()=>s(81068),U=()=>s(177976),L=()=>s(126617),V=()=>s(530093),F=()=>s(105819),z=()=>s(31511);function G(e){const{setting:t,setIsEditing:s,isEditing:n,onUpdateMethod:o}=e,a=(0,l().IS)((()=>({inputField:{width:"auto",marginInlineEnd:5,marginBottom:1},input:{fontSize:14,...m().RC}})),[]),[r,d]=(0,i.useState)(""),c=t.friendlyName,u=""===r?c:r,p=(0,i.useCallback)((e=>""!==e&&e!==c),[c]),g=(0,i.useCallback)((()=>{p(u)?(o({mfaMethod:t.mfaMethod,mfaSettingId:t.mfaSettingId,action:"rename",friendlyName:u}),d(r)):d(c),s(!n)}),[u,n,s,o,r,c,p,t.mfaMethod,t.mfaSettingId]),h=(0,i.useCallback)((e=>{"Enter"!==e.key&&"Escape"!==e.key||g()}),[g]),f=(0,i.useCallback)((e=>{p(e.target.value)&&d(e.target.value)}),[p]);return n?(0,S.jsx)(z().A,{value:u,maxlength:30,onChange:f,onKeyDown:h,onBlur:g,focus:n,style:a.inputField,inputStyle:a.input}):(0,S.jsx)(N().A,{children:u})}var K=()=>s(546926),W=()=>s(890492),H=()=>s(663639),$=()=>s(736847);function Y(e){const{activeMenuActions:t}=e;return(0,S.jsx)(W().A,{menuType:K().gu.Popup,children:(0,S.jsx)(H().A,{type:H().O.Vertical,sections:[{key:"mfaMethodActions",render:e=>(0,S.jsx)($().A,{...e}),items:t}],initialFocus:void 0})})}function Q(e){const{type:t,title:s,caption:n,setting:o,onDeleteMethod:r,onUpdateMethod:d}=e,u=(0,l().IS)((()=>({activeMethodContainer:{display:"flex",justifyContent:"space-between",border:`1px solid ${g().Tj.border.primary}`,width:"100%",paddingTop:10,paddingInlineEnd:14,paddingBottom:10,paddingInlineStart:16,alignItems:"start",height:"auto",borderRadius:4,marginBottom:5},activeMethodLeftContainer:{display:"flex",justifyContent:"left",minWidth:0},activeMethodText:{display:"flex",flexDirection:"column",minWidth:0},activeMethodCaption:{fontSize:m().J.UISmall.desktop,lineHeight:m().K_.UISmall.desktop,color:g().Tj.text.secondary,whiteSpace:"normal"},icon:{width:20,height:20,marginInlineEnd:10,fill:g().Tj.blue.icon.accentPrimary},menuButton:{borderRadius:4,padding:3},menuItemIcon:{width:17,height:17}})),[]),h={totp:(0,S.jsx)(c().I,{icon:U().K,style:u.icon}),sms:(0,S.jsx)(c().I,{icon:V().iPhoneIcon,style:u.icon})},[f,y]=(0,i.useState)(!1),b=e=>({key:"deleteMFAMethod",render:e=>(0,S.jsx)(q().A,{...e,title:(0,S.jsx)(p().sA,{id:"mfa.updateSettings.activeSection.editMenu.delete.button.message",defaultMessage:"Delete"}),icon:(0,S.jsx)(c().I,{icon:x().trashIcon,style:u.menuItemIcon})}),action:()=>{r(o),e.close()}}),v=e=>({key:"editMFAMethod",render:e=>(0,S.jsx)(q().A,{...e,title:(0,S.jsx)(p().sA,{id:"mfa.updateSettings.activeSection.editMenu.editTitle.button.message",defaultMessage:"Edit title"}),icon:(0,S.jsx)(c().I,{icon:F().pencilLineIcon})}),action:()=>{y(!0),e.close()}});return(0,S.jsxs)("div",{style:u.activeMethodContainer,children:[(0,S.jsxs)("div",{style:u.activeMethodLeftContainer,children:[(0,S.jsx)("div",{style:u.icon,children:h[t]}),(0,S.jsxs)("div",{style:u.activeMethodText,children:[(()=>{switch(t){case"sms":return(0,S.jsx)(N().A,{children:s});case"totp":return(0,S.jsx)(G,{setting:o,setIsEditing:y,isEditing:f,onUpdateMethod:d});default:return(0,a().HB)(t)}})(),(0,S.jsx)("span",{style:u.activeMethodCaption,children:n})]})]}),(0,S.jsx)(O().A,{render:e=>{switch(t){case"sms":return(0,S.jsx)(Y,{activeMenuActions:[b(e)]});case"totp":return(0,S.jsx)(Y,{activeMenuActions:[v(e),b(e)]});default:(0,a().HB)(t)}},alignmentToOrigin:"start",renderOrigin:e=>(0,S.jsx)(E().Ay,{style:u.menuButton,disabled:f,...e,children:(0,S.jsx)(c().I,{icon:L().ellipsisSmallIcon,size:"sm"})}),popupType:O().z.Popup})]})}function Z(e){const{mfaSettings:t,errorMessage:s,onStartTOTP:n,onStartSMS:o,onTurnOffMFA:r,onStartBackupCodes:d,onDismiss:y,onDeleteMethod:b,onUpdateMethod:x}=e,v=(0,l().IS)((()=>({button:{marginBottom:5},settingsTitle:{color:g().Tj.text.secondary,fontWeight:m().Wy.medium,marginBottom:8}})),[]),A=(0,S.jsx)(p().sA,{id:"mfa.updateSettings.title",defaultMessage:"2-step verification"}),j=(0,S.jsx)(p().sA,{id:"mfa.settingModal.message",defaultMessage:"Confirm it’s you after using a password by providing a verification code."}),M=(0,i.useMemo)((()=>(0,w().WS)(t).map((e=>{const{mfaMethod:t}=e,s=(0,B().v9)(e.createdAt,R().locale);switch(t){case"totp":return(0,S.jsx)(Q,{type:t,title:e.friendlyName,caption:(0,S.jsx)(p().sA,{id:"mfa.updateSettings.activeSection.useAuthenticator.button.message",defaultMessage:"Set up {createdTimeNormalized}",values:{createdTimeNormalized:s}}),setting:e,onDeleteMethod:b,onUpdateMethod:x});case"sms":return(0,S.jsx)(Q,{type:t,title:`${e.phoneNumber}`,caption:(0,S.jsx)(p().sA,{id:"mfa.updateSettings.activeSection.useSMS.button.message",defaultMessage:"Set up {createdTimeNormalized}",values:{createdTimeNormalized:s}}),setting:e,onDeleteMethod:b,onUpdateMethod:x});case"backup_code":return;default:(0,a().HB)(t)}}))),[t,b,x]),k=t.filter((e=>"totp"===e.mfaMethod)).length,C=t.filter((e=>"sms"===e.mfaMethod)).length,I=(0,i.useMemo)((()=>[{type:"totp",title:(0,S.jsx)(p().sA,{id:"mfa.updateSettings.addMoreSection.addAnotherAuthenticator.button.title",defaultMessage:"Add authenticator"}),caption:k>=2?(0,S.jsx)(p().sA,{id:"mfa.updateSettings.addMoreSection.addAnotherAuthenticator.disabled.button.message",defaultMessage:"2 of 2 authenticators added"}):(0,S.jsx)(p().sA,{id:"mfa.updateSettings.addMoreSection.addAnotherAuthenticator.button.message",defaultMessage:"{numOfTotpSettings} of 2 authenticators added",values:{numOfTotpSettings:k}}),onClick:n,style:v.button,disabled:k>=2},{type:"sms",title:(0,S.jsx)(p().sA,{id:"mfa.updateSettings.addMoreSection.addAnotherPhoneNumber.button.title",defaultMessage:"Add phone number"}),caption:C>=2?(0,S.jsx)(p().sA,{id:"mfa.updateSettings.addMoreSection.addAnotherPhoneNumber.disabled.button.message",defaultMessage:"2 of 2 phones added"}):(0,S.jsx)(p().sA,{id:"mfa.updateSettings.addMoreSection.addAnotherPhoneNumber.button.message",defaultMessage:"{numOfSmsSettings} of 2 phones added",values:{numOfSmsSettings:C}}),onClick:o,style:v.button,disabled:C>=2},{type:"backup_code",title:(0,S.jsx)(p().sA,{id:"mfa.updateSettings.activeSection.useBackupCodes.button.title",defaultMessage:"Regenerate backup codes"}),caption:(0,S.jsx)(p().sA,{id:"mfa.updateSettings.activeSection.useBackupCodes.button.message",defaultMessage:"Use for account recovery when other methods don’t work"}),onClick:d,style:v.button,disabled:!1}].sort(((e,t)=>(e.disabled?1:0)-(t.disabled?1:0)))),[n,o,d,k,C,v]),_=(0,i.useMemo)((()=>I.map(((e,t)=>(0,i.createElement)(h().A,{...e,key:t})))),[I]),T=(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(N().A,{style:v.settingsTitle,isSmall:!0,children:(0,S.jsx)(p().sA,{id:"mfa.updateSettings.activeSection.title",defaultMessage:"Active"})}),M,(0,S.jsx)(D().A,{size:15,isHidden:!0}),(0,S.jsx)(N().A,{style:v.settingsTitle,isSmall:!0,children:(0,S.jsx)(p().sA,{id:"mfa.updateSettings.addMoreMethodsSection.title",defaultMessage:"Add more methods"})}),_]}),P=[{text:(0,S.jsx)(p().sA,{id:"mfa.updateSettings.turnOffVerification.button.message",defaultMessage:"Turn off 2-step verification"}),onClick:r,type:"button",view:"plain",isRed:!0}];return(0,S.jsx)(f().A,{title:A,header:j,errorMessage:s,icon:(0,S.jsx)(c().I,{icon:u().shieldLockIcon,size:"xl",colorVariant:"secondary"}),onDismiss:y,secondaryActions:P,children:T})}var X=()=>s(219505);function J(e){const{isLoading:t,userStore:s,errorMessage:n,onDismiss:o,onVerifyBackupCode:a,onTryAnotherMethod:r}=e,d=(0,l().eP)(),c=(0,l().IS)((()=>({backupCodeInput:{width:"100%",background:"light"===d?g().oZ.transparent:g().Tj.inputBackground}})),[d]),[u,m]=(0,i.useState)(""),h=(0,S.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.withBackupCode.title",defaultMessage:"To continue, we need to verify your identity"}),y=(0,S.jsx)(p().sA,{id:"profileSeettings.mfa.verifyIdentity.withBackupCode.header",defaultMessage:"Enter an unused one-time backup code."}),x={text:t?(0,S.jsx)(b().k,{}):(0,S.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.withBackupCode.button.message",defaultMessage:"Continue"}),onClick:()=>a(u.replace(/[^0-9a-zA-Z]/g,"")),disabled:t||""===u},v=[{text:(0,S.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.withBackupCode.secondaryButton.message",defaultMessage:"Try another method"}),view:"plain",type:"button",onClick:()=>r(),disabled:t}];return(0,S.jsx)(f().A,{title:h,header:y,icon:(0,S.jsx)(k,{userStore:s}),primaryAction:x,secondaryActions:v,errorMessage:n,onDismiss:o,children:(0,S.jsx)(z().A,{type:"text",value:u,onChange:e=>{m((0,X().H)(e.target.value))},placeholder:"0000-0000",style:c.backupCodeInput,disabled:t,autoFocus:!0})})}function ee(e){const{isLoading:t,isForgotPasswordLoading:s,userStore:n,errorMessage:a,alertMessage:r,onDismiss:d,onVerifyPassword:c,onForgotPassword:u}=e,g=(0,l().IS)((()=>({passwordInput:{width:"100%"}})),[]),[m,h]=(0,i.useState)(""),y=(0,o().K8)((()=>null==n?void 0:n.getEmail()),[n]),x=(0,S.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.withPassword.title",defaultMessage:"To continue, we need to verify your identity"}),v={text:t?(0,S.jsx)(b().k,{}):(0,S.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.withPassword.button.message",defaultMessage:"Continue"}),onClick:()=>c(m),disabled:t||""===m},w=[{text:(0,S.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.withPassword.secondaryButton.message",defaultMessage:"Forgot password?"}),view:"plain",type:"button",disabled:s,onClick:()=>u(y)}];return(0,S.jsx)(f().A,{title:x,header:y,icon:(0,S.jsx)(k,{userStore:n}),primaryAction:v,secondaryActions:w,errorMessage:a,alertMessage:r,onDismiss:d,children:(0,S.jsx)(z().A,{type:"password",value:m,onChange:e=>h(e.target.value),placeholder:"Your password",style:g.passwordInput,disabled:t,autoComplete:"current-password",autoFocus:!0})})}var te=()=>s(496603),se=()=>s(217448),ie=()=>s(342963);function ne(e){const{mfaSetting:t,isLoading:s,userStore:n,errorMessage:o,resentStatus:a,resentAt:r,onDismiss:d,onVerifySMS:l,onResendLink:c,onTryAnotherMethod:u}=e,[g,m]=(0,i.useState)([]),h=(0,S.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.withSMS.title",defaultMessage:"To continue, we need to verify your identity"}),y=(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(p().sA,{id:"profileSeettings.mfa.verifyIdentity.withSMS.header",defaultMessage:"Enter the code sent to {phoneHint}.",values:{phoneHint:`${t.phoneNumber}`}})," ",(0,S.jsx)(se().n,{resentAt:r,resentStatus:a,onResendLink:c})]}),x={text:s?(0,S.jsx)(b().k,{}):(0,S.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.withSMS.button.message",defaultMessage:"Continue"}),onClick:()=>l(t.mfaSettingId,g.join("")),disabled:s||"resending"===a||6!==(0,te().oE)(g).length},v=[{text:(0,S.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.withSMS.secondaryButton.message",defaultMessage:"Try another method"}),view:"plain",type:"button",onClick:()=>u(),disabled:s}];return(0,S.jsx)(f().A,{title:h,header:y,icon:(0,S.jsx)(k,{userStore:n}),primaryAction:x,secondaryActions:v,errorMessage:o,onDismiss:d,children:(0,S.jsx)("div",{children:(0,S.jsx)(ie().d2,{numInputs:6,value:g,format:"settings",disabled:!1,onChange:m,autoFocus:!0,isValidKey:ie().Vx})})})}function oe(e){const{mfaSetting:t,isLoading:s,userStore:n,errorMessage:o,onDismiss:a,onVerifyTOTP:r,onTryAnotherMethod:d}=e,c=(0,l().IS)((()=>({boldText:{fontWeight:m().Wy.semibold}})),[]),[u,g]=(0,i.useState)([]),h=(0,S.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.withTOTP.title",defaultMessage:"To continue, we need to verify your identity"}),y=(0,S.jsx)(p().sA,{id:"profileSeettings.mfa.verifyIdentity.withTOTP.header",defaultMessage:"Enter code from authenticator <boldtext>{friendlyName}</boldtext>.",values:{friendlyName:t.friendlyName,boldtext:e=>(0,S.jsx)("span",{style:c.boldText,children:e})}}),x={text:s?(0,S.jsx)(b().k,{}):(0,S.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.withTOTP.button.message",defaultMessage:"Continue"}),onClick:()=>r({mfaSettingId:t.mfaSettingId,code:u.join("")}),disabled:s||6!==(0,te().oE)(u).length},v=[{text:(0,S.jsx)(p().sA,{id:"profileSettings.mfa.verifyIdentity.withTOTP.secondaryButton.message",defaultMessage:"Try another method"}),view:"plain",type:"button",onClick:()=>d(),disabled:s}];return(0,S.jsx)(f().A,{title:h,header:y,icon:(0,S.jsx)(k,{userStore:n}),primaryAction:x,secondaryActions:v,errorMessage:o,onDismiss:a,children:(0,S.jsx)("div",{children:(0,S.jsx)(ie().d2,{numInputs:6,value:u,format:"settings",disabled:!1,onChange:g,autoFocus:!0,isValidKey:ie().Vx})})})}s(672577);function ae(e){const{passkeys:t,passkeyAuthenticatorIdToDelete:s,onCancel:i,onDeleteMethod:n,onDismiss:o}=e,a=(0,l().IS)((()=>({container:{maxWidth:360}})),[]),r=t.find((e=>e.id===s));if(!r)return null;const d=(0,S.jsx)(p().sA,{id:"passkey.deleteSetting.title",defaultMessage:"Are you sure you want to{newline}delete this passkey?",values:{newline:(0,S.jsx)("br",{})}}),u=(0,S.jsx)(p().sA,{id:"passkey.deleteSetting.header",defaultMessage:"Once deleted, you will no longer be able to use the passkey saved in {friendlyName}",values:{friendlyName:r.authenticatorName}}),g={text:(0,S.jsx)(p().sA,{id:"mfa.deleteSetting.permanentlyDelete.button.message",defaultMessage:"Permanently delete"}),onClick:()=>n(),isRed:!0},m=[{text:(0,S.jsx)(p().sA,{id:"mfa.deleteSetting.cancel.button.message",defaultMessage:"Cancel"}),onClick:i,type:"button",view:"outline"}];return(0,S.jsx)(f().A,{title:d,header:u,icon:(0,S.jsx)(c().I,{icon:x().trashIcon,size:30,colorVariant:"primary",colorPalette:"red"}),primaryAction:g,secondaryActions:m,onDismiss:o,containerStyles:a.container,headerBottomMargin:10,headerStyleKey:"titleSmRegular"})}s(803949);var re=()=>s(406094),de=()=>s(493552),le=()=>s(14321),ce=()=>s(863330),ue=()=>s(984925),pe=()=>s(265060),ge=()=>s(695714),me=()=>s(765140),he=()=>s(187859),fe=()=>s(43016);function Se(e){const{setting:t,setIsEditing:s,isEditing:n,onUpdateMethod:o}=e,a=(0,l().IS)((()=>({inputField:{width:"auto",marginInlineEnd:5,marginBottom:1},input:{fontSize:14,...m().RC}})),[]),[r,d]=(0,i.useState)(""),c=t.authenticatorName,u=""===r?c:r,p=(0,i.useCallback)((e=>""!==e&&e!==c),[c]),g=()=>{p(u)?(o({passkeyAuthenticatorId:t.id,name:u}),d(u)):d(c),s(!n)},h=(0,i.useCallback)((e=>{p(e.target.value)&&d(e.target.value)}),[p]);return n?(0,S.jsx)(z().A,{value:u,maxlength:30,onChange:h,onKeyDown:e=>{"Enter"!==e.key&&"Escape"!==e.key||g()},onBlur:g,focus:n,style:a.inputField,inputStyle:a.input}):(0,S.jsx)(N().A,{children:u})}const ye={"fbfc3007-154e-4ecc-8c0b-6e020557d7bd":me().n,"dd4ec289-e01d-41c9-bb89-70fa845d4bf2":me().n,"ea9b8d66-4d01-1d21-3ce4-b6b48cb575d4":he().m,"adce0002-35bc-c60a-648b-0b25f1f05503":he().m,"08987058-cadc-4b81-b6e1-30de50dcbe96":fe().z,"9ddd1817-af5a-4672-a2b9-3e3dd95000a9":fe().z,"6028b017-b1d4-4c02-b4b3-afcdafc96bb2":fe().z};function be(e){const{caption:t,setting:s,onDeleteMethod:n,onUpdateMethod:o,isEditing:a}=e,r=(0,l().IS)((()=>({activeMethodContainer:{display:"flex",justifyContent:"space-between",border:`1px solid ${g().Tj.outlineButtonBorder}`,width:"100%",paddingTop:10,paddingInlineEnd:14,paddingBottom:10,paddingInlineStart:16,alignItems:"center",height:"auto",borderRadius:4,marginBottom:5},activeMethodLeftContainer:{display:"flex",justifyContent:"left",minWidth:0,alignItems:"center",gap:10},activeMethodText:{display:"flex",flexDirection:"column",minWidth:0},activeMethodCaption:{fontSize:m().J.UISmall.desktop,lineHeight:m().K_.UISmall.desktop,color:g().Tj.text.secondary,whiteSpace:"normal"},menuButton:{borderRadius:4,padding:3}})),[]),[d,u]=(0,i.useState)(a),h=ye[s.aaguid]?(0,S.jsx)(pe().Q,{iconGroup:ye[s.aaguid],variantName:"default"}):(0,S.jsx)(c().I,{icon:ge().personKeyFillIcon,colorPalette:"blue",colorVariant:"accentPrimary"}),f=e=>({key:"deletePasskeyMethod",render:e=>(0,S.jsx)(q().A,{...e,title:(0,S.jsx)(p().sA,{id:"mfa.updatePasskeySettings.activeSection.editMenu.delete.button.message",defaultMessage:"Delete"}),icon:(0,S.jsx)(c().I,{icon:x().trashIcon})}),action:()=>{n({passkeyAuthenticatorId:s.id}),e.close()}}),y=e=>({key:"editPasskeyMethod",render:e=>(0,S.jsx)(q().A,{...e,title:(0,S.jsx)(p().sA,{id:"mfa.updatePasskeySettings.activeSection.editMenu.editTitle.button.message",defaultMessage:"Rename passkey"}),icon:(0,S.jsx)(c().I,{icon:F().pencilLineIcon})}),action:()=>{u(!0),e.close()}});return(0,S.jsxs)("div",{style:r.activeMethodContainer,children:[(0,S.jsxs)("div",{style:r.activeMethodLeftContainer,children:[h,(0,S.jsxs)("div",{style:r.activeMethodText,children:[(0,S.jsx)(Se,{setting:s,setIsEditing:u,isEditing:d,onUpdateMethod:o}),(0,S.jsx)("span",{style:r.activeMethodCaption,children:t})]})]}),(0,S.jsx)(O().A,{render:e=>(0,S.jsx)(Y,{activeMenuActions:[y(e),f(e)]}),alignmentToOrigin:"end",renderOrigin:e=>(0,S.jsx)(E().Ay,{style:r.menuButton,disabled:d,...e,children:(0,S.jsx)(c().I,{icon:L().ellipsisSmallIcon,size:"sm",colorVariant:"tertiary"})}),popupType:O().z.Popup})]})}function xe(e){const{passkeySettings:t,errorMessage:s,onDismiss:i,onAddMethod:n,onDeleteMethod:o,onUpdateMethod:a,shouldNameNewSetting:r}=e,d=(0,p().tz)(),g=(0,l().IS)((()=>({cancelButton:{marginTop:10,width:"100%",padding:10,textAlign:"center"},activePasskeyContainer:{marginTop:"24px"},actionButtonContainer:{marginTop:"24px"}})),[]);let m;null==t||t.forEach((e=>{var t;(!m||e.createdAt>(null===(t=m)||void 0===t?void 0:t.createdAt))&&(m=e)}));const h=0===t.length?le().personKeyFillSmallIcon:ce().plusSmallIcon;return(0,S.jsxs)(f().A,{title:d.formatMessage({id:"mfa.updateSettings.passkeyTitle",defaultMessage:"Manage Passkeys"}),header:d.formatMessage({id:"mfa.updateSettings.passkeyHeader",defaultMessage:"Use your device's built-in security features like Face ID to sign in instead of remembering passwords."}),errorMessage:s,icon:(0,S.jsx)(c().I,{icon:u().shieldLockIcon,size:"xl",colorVariant:"secondary"}),onDismiss:i,children:[t.length>0?(0,S.jsxs)("div",{style:g.activePasskeyContainer,children:[(0,S.jsx)("div",{style:{marginBottom:"10px"},children:(0,S.jsx)(de().D,{styleKey:"captionMedium",color:"textSecondary",children:(0,S.jsx)(p().sA,{id:"mfa.updateSettings.activeSection.passkeyTitle",defaultMessage:"Active passkey"})})}),t.map(((e,t)=>{var s;const i=(0,B().v9)(e.createdAt,R().locale);return(0,S.jsx)(be,{caption:(0,S.jsx)(p().sA,{id:"mfa.updateSettings.activeSection.useAuthenticator.button.message",defaultMessage:"Set up {createdTimeNormalized}",values:{createdTimeNormalized:i}}),setting:e,onDeleteMethod:o,onUpdateMethod:a,isEditing:r&&e.id===(null===(s=m)||void 0===s?void 0:s.id)},e.id)}))]}):void 0,(0,S.jsxs)("div",{style:g.actionButtonContainer,children:[t.length<5?(0,S.jsx)(ue().e,{title:d.formatMessage({id:"mfa.updateSettings.addNewPasskeyButton.label",defaultMessage:"Add new passkey"}),onClick:n,icon:h}):void 0,(0,S.jsx)(re().A,{onClick:i,style:g.cancelButton,children:(0,S.jsx)(de().D,{styleKey:"bodyMedium",color:"textLight",children:(0,S.jsx)(p().sA,{id:"passkey.updateSettings.cancel",defaultMessage:"Cancel"})})})]})]})}function ve(e){const{settingsStateMachine:t,onDismiss:s,onStartTOTP:i,onStartSMS:l,onStartBackupCodes:c}=e,u=(0,n().v3)(),p=(0,n().Y0)(),g=(0,o().K8)((()=>(0,d()._)(u)),[u]),m=(0,o().K8)((()=>t.getCurrentStep()),[t]);switch(m.step){case"settingsUninitialized":case"settingsPasskeyLoadSettings":case"settingsLoadSettings":return null;case"settingsVerifyWithPassword":return(0,S.jsx)(ee,{isLoading:m.isLoading,isForgotPasswordLoading:m.isForgotPasswordLoading,userStore:g,errorMessage:m.error,alertMessage:m.alert,onVerifyPassword:e=>t.settingsVerifyPassword(e),onForgotPassword:e=>t.settingsForgotPassword(e),onDismiss:s});case"settingsVerifyChooseMFAMethod":return(0,S.jsx)(C,{isSMSLoading:m.isSMSLoading,chosenMfaSettingId:m.chosenMfaSettingId,mfaSettings:m.mfaSettings,userStore:g,errorMessage:m.error,onClick:e=>t.settingsChooseVerifyMethod(e),onDismiss:s});case"settingsVerifyWithTOTP":return(0,S.jsx)(oe,{isLoading:m.isLoading,mfaSetting:m.mfaSetting,userStore:g,errorMessage:m.error,onDismiss:s,onVerifyTOTP:e=>t.settingsVerifyTOTP(e),onTryAnotherMethod:()=>t.settingsTryAnotherMethod()});case"settingsVerifyWithSMS":return(0,S.jsx)(ne,{isLoading:m.isLoading,mfaSetting:m.mfaSetting,userStore:g,errorMessage:m.error,resentAt:m.resentAt,resentStatus:m.resentStatus,onDismiss:s,onVerifySMS:(e,s)=>t.settingsVerifySMS({mfaSettingId:e,code:s}),onResendLink:()=>t.settingsVerifyResendSMS(m.mfaSetting.mfaSettingId),onTryAnotherMethod:()=>t.settingsTryAnotherMethod()});case"settingsVerifyWithBackupCode":return(0,S.jsx)(J,{isLoading:m.isLoading,userStore:g,errorMessage:m.error,onDismiss:s,onVerifyBackupCode:e=>t.settingsVerifyBackupCode(e),onTryAnotherMethod:()=>t.settingsTryAnotherMethod()});case"settingsInitialSetup":return(0,S.jsx)(y,{errorMessage:m.error,onStartTOTP:i,onStartSMS:l,onDismiss:s});case"settingsShowSettings":const e=m.mfaSettings;return(0,S.jsx)(Z,{mfaSettings:e,errorMessage:m.error,onStartTOTP:i,onStartSMS:l,onStartBackupCodes:c,onTurnOffMFA:()=>t.settingsConfirmDisableMFA(),onDismiss:s,onDeleteMethod:e=>t.settingsConfirmDelete(e),onUpdateMethod:e=>t.settingsUpdate(e)});case"settingsPasskeyShowSettings":case"settingsPasskeyNameNewSetting":return(0,S.jsx)(xe,{passkeySettings:m.passkeys,errorMessage:m.error,onDismiss:s,onAddMethod:()=>p.isElectron?r().Yw(u):t.settingsPasskeyAddSetting(u),onDeleteMethod:e=>t.settingsConfirmDeletePasskeySetting(e),onUpdateMethod:e=>t.settingsPasskeyRenameSetting(e),shouldNameNewSetting:"settingsPasskeyNameNewSetting"===m.step});case"settingsDeletePasskeySetting":return(0,S.jsx)(ae,{passkeys:m.passkeys,passkeyAuthenticatorIdToDelete:m.passkeyAuthenticatorIdToDelete,onDismiss:s,onCancel:()=>t.passkeySettingsShow(),onDeleteMethod:()=>t.settingsDeletePasskeySetting()});case"settingsDeleteSettings":return(0,S.jsx)(v,{isLoading:m.isLoading,mfaSetting:m.mfaSettingToDelete,errorMessage:m.error,onDismiss:s,onCancel:()=>t.settingsConfirmIdentityForSettings(),onDeleteMethod:()=>t.settingsDelete()});case"settingsConfirmIdentity":case"settingsDisableMFA":const n="settingsConfirmIdentity"===m.step&&"disableMFA"===m.source;return"settingsDisableMFA"===m.step||n?(0,S.jsx)(P,{isLoading:n,lastMFASetting:m.lastMFASetting,errorMessage:m.error,onDismiss:s,onTurnOffMFA:()=>t.settingsDisableMFA(),onCancel:()=>t.settingsConfirmIdentityForSettings()}):null;case"settingsIdentityConfirmed":return"disableMFA"===m.source?(0,S.jsx)(_,{errorMessage:m.error,onDismiss:s}):null;default:return(0,a().HB)(m)}}},508490:(e,t,s)=>{s.d(t,{c:()=>c});s(296540);var i=()=>s(484714),n=()=>s(401497),o=()=>s(69708),a=()=>s(966505),r=()=>s(404141),d=()=>s(179030),l=s(474848);function c(e){const{icon:t,title:s,deeplinkTab:c}=e,u=(0,i().v3)(),p=(0,n().IS)((()=>({cardContainer:{marginTop:20,marginBottom:20}})),[]);return(0,l.jsx)("div",{style:p.cardContainer,children:(0,l.jsx)(d().l,{display:"inline-compact",tint:"gray",staticIcon:t,label:s,actions:[{label:(0,l.jsx)(o().sA,{id:"settingsDeeplinkBanner.deeplinkMessage",defaultMessage:"View settings"}),onClick:()=>function(e,t){a().Gq(t,{source_tab:r().Ay.state.currentTab,destination_tab:e.currentTab,destination_subtab:e.defaultSubtab}),r().Ay.setState({...r().Ay.state,...e})}(c,u)}]})})}},537296:(e,t,s)=>{s.d(t,{U:()=>c});s(581454);var i=s(296540),n=()=>s(726637),o=()=>s(388926),a=()=>s(546926),r=()=>s(681873),d=()=>s(141966),l=s(474848);function c(e){const{items:t}=e,s=(0,a().Tf)(),c=(0,d().Hu)(n().A.isMobile,s);return(0,l.jsx)(l.Fragment,{children:(0,r().G)(t.map((({key:e,renderSettingsItem:t})=>(0,l.jsx)(i.Fragment,{children:t()},e))),(e=>(0,l.jsx)(o().A,{size:c,isHidden:!n().A.isMobile},e)))})}},538669:(e,t,s)=>{s.d(t,{G:()=>a,N:()=>o});var i=()=>s(534177),n=()=>s(478525);class o extends(()=>s(757695))().Store{getInitialState(){return{step:"smsUninitialized"}}}class a extends(()=>s(658921))()._{constructor(e,t){super(e,"sms"),this.service=void 0,this.service=t}smsStart(){this.checkStep("smsUninitialized")&&this.store.setState({step:"smsSetPhoneNumber"})}smsRestart(){const e=this.checkStep(["smsResendSMS","smsVerifyCode","smsVerifying"]);e&&this.store.setState({step:"smsSetPhoneNumber",country:e.country,phoneNumber:e.phoneNumber,error:void 0})}smsCreateSMS(e,t){this.checkStep("smsSetPhoneNumber")&&(this.store.setState({country:e,phoneNumber:t,step:"smsSendingSMS"}),this.doCreateSMS().catch(this.handleUnexpectedError))}smsResendSMS(){const e=this.checkStep(["smsVerifyCode","smsVerifying"]);e&&(this.store.setState({...e,step:"smsResendSMS",error:void 0}),this.doResendSMS().catch(this.handleUnexpectedError))}smsVerifyCode(e){const{code:t,onVerified:s}=e,i=this.checkStep("smsVerifyCode");i&&(this.store.setState({...i,step:"smsVerifying",error:void 0}),this.doVerifyCode({code:t,onVerified:s}).catch(this.handleUnexpectedError))}smsBackupCodesComplete(){this.checkStep("smsBackupCodesLoading")&&this.store.setState({step:"smsVerified"})}smsComplete(){this.checkStep("smsVerified")&&this.store.setState({step:"smsComplete"})}exit(){this.store.setState({step:"smsUninitialized"})}async doCreateSMS(){const e=await this.withStep("smsSendingSMS",(e=>this.service.createSMS(e.country.countryCode,e.phoneNumber)));if(!e)return;const{result:t,state:s}=e;switch(t.status){case"created":this.store.setState({...s,step:"smsVerifyCode",mfaSettingId:t.mfaSettingId,error:void 0});break;case"already_verified_phone_number":this.store.setState({step:"smsSetPhoneNumber",error:n().xc.smsAlreadyVerifiedPhoneNumber});break;case"invalid_country_code":this.store.setState({step:"smsSetPhoneNumber",error:n().xc.smsInvalidCountryCode});break;case"invalid_phone_number":this.store.setState({step:"smsSetPhoneNumber",error:n().xc.smsInvalidPhoneCode});break;case"sms_unsupported_country_code_for_enrollment":this.store.setState({step:"smsSetPhoneNumber",error:n().xc.smsUnsupportedCountryCodeForEnrollment});break;default:return(0,i().HB)(t)}}async doVerifyCode(e){const{code:t,onVerified:s}=e,o=await this.withStep("smsVerifying",(e=>this.service.verifySMS({mfaSettingId:e.mfaSettingId,code:t})));if(!o)return;const{result:a,state:r}=o;switch(a.status){case"match":this.store.setState({step:"smsBackupCodesLoading",country:r.country,phoneNumber:r.phoneNumber}),s();break;case"error":this.store.setState({...r,step:"smsVerifyCode",error:n().xc.unexpectedError});break;case"incorrect":this.store.setState({...r,step:"smsVerifyCode",error:n().xc.smsIncorrectCode});break;default:return(0,i().HB)(a.status)}}async doResendSMS(){const e=await this.withStep("smsResendSMS",(e=>this.service.sendSMS({mfaSettingId:e.mfaSettingId})));if(!e)return;const{result:t,state:s}=e;switch(t.status){case"ok":this.store.setState({...s,step:"smsVerifyCode",mfaSettingId:s.mfaSettingId,error:void 0,resentAt:Date.now()});break;case"error":this.store.setState({...s,step:"smsVerifyCode",mfaSettingId:s.mfaSettingId,error:n().xc.unexpectedError});break;default:return(0,i().HB)(t.status)}}}},549200:(e,t,s)=>{s.d(t,{b:()=>l});var i=()=>s(617871),n=()=>s(165358),o=()=>s(229833),a=()=>s(763824),r=()=>s(534177),d=()=>s(769864);async function l(e){const{bots:t,spaceId:s,environment:l}=e;await(0,a().lX)(t,10,(async e=>{const{botId:t,importContactType:a}=e,c=function(e){switch(e){case"google":return i().E8;case"microsoft":return i().LF;case"slack":return i().zG;default:(0,r().HB)(e)}}(a);await d().callApi({eventName:"loadContacts",environment:l,data:{botId:t,spaceId:s,integrationId:c,importContactType:a}}).catch((e=>{n().log({level:"error",from:"loadContactsForBots",type:"loadContacts",error:(0,o().convertErrorToLog)(e)})}))}))}},579631:(e,t,s)=>{s.d(t,{SS:()=>l,_g:()=>r,co:()=>d,e1:()=>a,kF:()=>n,mu:()=>o});var i=()=>s(314529);function n(e,t){(0,i().DO_NOT_USE_trackLegacy)(e,"toggle_open_in_desktop_app",t)}function o(e){(0,i().DO_NOT_USE_trackLegacy)(e,"configure_open_in_desktop_app")}function a(e){(0,i().DO_NOT_USE_trackLegacy)(e,"open_in_desktop_app_popup_dismiss")}function r(e){(0,i().DO_NOT_USE_trackLegacy)(e,"open_in_desktop_app_popup_display")}function d(e){(0,i().DO_NOT_USE_trackLegacy)(e,"open_in_desktop_app_popup_download")}function l(e,t){(0,i().DO_NOT_USE_trackLegacy)(e,"open_in_desktop_app_popup_open_in_app",t)}},590977:(e,t,s)=>{s.d(t,{Hw:()=>O});s(944114),s(517642),s(658004),s(733853),s(845876),s(432475),s(515024),s(731698),s(898992),s(354520),s(672577),s(581454);var i=s(296540),n=()=>s(314529);var o=()=>s(230711),a=()=>s(484714),r=()=>s(590526),d=()=>s(401497),l=()=>s(849255),c=()=>s(983610),u=()=>s(874832),p=()=>s(396896),g=()=>s(302501),m=()=>s(591779),h=()=>s(187174),f=()=>s(848538),S=()=>s(798880),y=()=>s(69708),b=()=>s(100622),x=()=>s(778078),v=()=>s(769864),w=()=>s(874099),A=()=>s(240865),j=()=>s(118789),M=()=>s(134217),k=()=>s(789180),C=()=>s(177711),I=s(474848);const _="user",T={by:_,asc:!0};function P({users:e,spaceStore:t,memberCount:s,listSource:o,searchQuery:d}){const l=(0,i.useRef)(void 0),c=(0,m().ZC)(d,""),u=(0,i.useRef)(!1),p=(0,r().K8)((()=>null==o?void 0:o.rowsStore.state.hasMore),[o]),g=(0,a().v3)();(0,i.useEffect)((()=>{if(((null==c?void 0:c.length)??0)>0&&0===d.length&&(u.current=!0),void 0===e)return;if(d.length>0)return;const i=e.length,o=l.current,a=0===i&&!1===p,r=i>0&&(void 0===o||i>o);if(a&&u.current)return void(u.current=!1);(a&&0!==o||r)&&(!function(e){const{environment:t,eventName:s,eventProperties:i,opts:o}=e;(0,n().DO_NOT_USE_trackLegacy)(t,s,i,{...o,sampling:(null==o?void 0:o.sampling)||{behavior:"statsig",fallbackBehavior:"statsig",statsigNotAvailableBehavior:"drop"}})}({environment:g,eventName:"workspace_member_settings_render_impression",eventProperties:{workspace_id:t.id,rendered_member_count:i,total_member_count:s}}),l.current=i)}),[e,g,t.id,s,p,d,c])}function R(){const e=(0,d().IS)((()=>({emptyMessage:{color:b().Tj.text.secondary,boxShadow:`inset 0 -1px 0 ${b().Tj.border.primary}`,display:"flex",height:32,padding:"0px 4px",alignItems:"center"}})),[]);return(0,I.jsx)(g().A,{isSmall:!0,style:e.emptyMessage,children:(0,I.jsx)(y().sA,{id:"peopleSectionMembersTab.emptySearch",defaultMessage:"No search results"})})}const D={id:_,headerTitle:(0,I.jsx)("div",{style:{fontSize:14},children:(0,I.jsx)(y().sA,{id:"peopleSectionMembersTable.userTable.user",defaultMessage:"User"})}),renderCell:e=>(0,I.jsx)(s(299895).A,{userId:e.id,restorationStatus:e.restorationStatus,spaceStore:e.spaceStore}),widthData:{widthPercent:35,minWidth:250},sortable:!0},N={id:"teams",headerTitle:(0,I.jsx)("div",{style:{fontSize:14},children:(0,I.jsx)(y().sA,{id:"peopleSectionMembersTable.userTable.teamspaces",defaultMessage:"Teamspaces"})}),headerCellPadding:"0 0 0 8px",renderCell:e=>e.isSpaceUserStoreLoaded&&void 0!==e.spacePermissionGroupIds?(0,I.jsx)(s(377085).o,{userId:e.id,userPermissionGroupIds:new Set(e.spacePermissionGroupIds)}):(0,I.jsx)(u().P,{style:{width:100,height:12,borderRadius:4,marginInlineStart:8}}),widthData:{widthPercent:20,minWidth:125},sortable:!1},B={id:"groups",headerTitle:(0,I.jsx)("div",{style:{fontSize:14},children:(0,I.jsx)(y().sA,{id:"peopleSectionMembersTable.userTable.groups",defaultMessage:"Groups"})}),headerCellPadding:"0 0 0 8px",renderCell:e=>void 0!==e.spacePermissionGroupIds?(0,I.jsx)(s(143066).w,{groupIds:e.spacePermissionGroupIds,spaceStore:e.spaceStore,spacePermissionsSettingsStore:e.spacePermissionsSettingsStore}):(0,I.jsx)(u().P,{style:{width:60,height:12,borderRadius:4,marginInlineStart:8}}),widthData:{widthPercent:20,minWidth:125},sortable:!1},E={id:"role",headerTitle:(0,I.jsx)("div",{style:{fontSize:14},children:(0,I.jsx)(y().sA,{id:"peopleSectionMembersTable.userTable.role",defaultMessage:"Role"})}),headerCellPadding:"0 0 0 8px",renderCell:e=>(0,I.jsx)(s(856461).w,{userId:e.id,membershipType:e.membershipType,spaceStore:e.spaceStore}),widthData:{widthPercent:25,minWidth:155},sortable:!0};function O(e){const{spaceStore:t,spacePermissionsSettingsStore:s}=e,n=(0,i.useMemo)((()=>[D,N,B,E]),[]),d=(0,A().V)(),{recentlyRemovedMembers:u}=function(e){const t=(0,r().K8)((()=>{const e=c().subscriptionDataStoreInstance.state;return e?(0,M().Ye)(e):[]}),[]);return{recentlyRemovedMembers:(0,k().BV)({spaceStore:e,members:t})}}(t),{listSource:g,users:m,sort:y,setSort:b,searchQuery:O}=function(){const{query:e,hasEmptyQuery:t}=(0,r().K8)((()=>{const e=C().A.state.searchQuery??"";return{query:e,hasEmptyQuery:0===e.length}}),[]),[s,n]=(0,i.useState)(void 0),o=(0,i.useRef)("");(0,i.useEffect)((()=>{const t=o.current,i=e;0===t.length&&i.length>0&&s?n(void 0):e&&0!==e.length||s||n(T),o.current=i}),[e,s]);const a=(0,i.useMemo)((()=>{if(t||s)return s?{field:s.by===_?"name_normalized":"type",direction:s.asc?"asc":"desc"}:{field:"name_normalized",direction:"asc"}}),[s,t]),d=(0,j().n)({query:e,sort:a,filter:f().v1,limit:30}),l=(0,r().K8)((()=>{const i=null==d?void 0:d.rowsStore.state.rows;return!i||t||s?i:(0,x().Ay)(e,i,(e=>{const t=[e.name,e.email];return e.aliases&&e.aliases.length>0&&t.push(...e.aliases),t.filter(Boolean).join(" ")}),{getSortScore:e=>-e.score})}),[d,e,s,t]);return{listSource:d,users:l,sort:s??(t?T:void 0),setSort:n,searchQuery:e}}(),q=function({spaceStore:e,spacePermissionsSettingsStore:t,recentlyRemovedMembers:s,users:n}){const d=(0,a().v3)(),[c,u]=(0,i.useState)({});(0,h().Yb)((async()=>{if(!n)return;const t=n.map((e=>e.id)),s=await v().callCellCompatibleApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:d,data:{spaceId:e.id,userIds:t},cellNavigation:{cellId:void 0,spaceId:e.id}});"success"===s.type&&u((e=>{const i={...e,...s.data.userToGroupMap};for(const s of t)void 0===i[s]&&(i[s]=[]);return i}))}),[d,e.id,n],{debugName:"userToPermissionGroupIds",debounce:300,throttle:1e3});const p=(0,k().k4)({spaceStore:e}),g=(0,r().K8)((()=>e.canAdmin()),[e]);return(0,i.useCallback)((i=>{var n;const a=(0,o().dp)(e,i.id),r=a.getMembershipType()??i.membership_type;if(void 0===r||!(0,f().MN)(r))return;const d=(0,f().C4)(r);return{id:i.id,role:d,membershipType:r,firstJoinedSpaceTime:i.first_joined_space_time,spaceStore:e,spaceUserStore:a,isSpaceUserStoreLoaded:a.isReady(),restorationStatus:null==s||null===(n=s.find((e=>e.userId===i.id)))||void 0===n?void 0:n.restorationStatus,spacePermissionsSettingsStore:t,spacePermissionGroupIds:c[i.id],shouldDisableAction:!g&&p&&("editor"===d||"membership_admin"===d),userStore:l().L.createChildStore(e,{id:i.id,table:S().oo})}}),[s,t,e,c,g,p])}({spaceStore:t,spacePermissionsSettingsStore:s,recentlyRemovedMembers:u,users:m});return P({users:m,spaceStore:t,memberCount:d,listSource:g,searchQuery:O}),(0,I.jsx)(p().fI,{paddingBottom:36,children:(0,I.jsx)(w().M,{columns:n,listSource:g,transformRow:q,sort:y,onSortChange:b,estimatedRowHeight:42,allowHorizontalScroll:!0,renderEmpty:()=>(0,I.jsx)(R,{}),memberCount:d,spaceStore:t})})}},611308:(e,t,s)=>{s.d(t,{L:()=>n});class i extends(()=>s(757695))().Store{getInitialState(){return{modalInfoById:{}}}async showModal(e){const t=s(206267).JW();return new Promise((s=>{const i=e((e=>{s(e),this.internalCloseModal(t,(()=>{this.internalRemoveModal(t)}))}));this.update((e=>({modalInfoById:{...e.modalInfoById,[t]:{...i,isOpen:!0}}})))}))}internalRemoveModal(e){this.update((t=>{const s={...t.modalInfoById};return delete s[e],{modalInfoById:s}}))}internalCloseModal(e,t){this.update((s=>({modalInfoById:{...s.modalInfoById,[e]:{...s.modalInfoById[e],isOpen:!1,onClosed:t}}})))}}const n=new i},678894:(e,t,s)=>{s.d(t,{A:()=>o});var i=()=>s(604995);class n extends(()=>s(757695))().Store{getInitialState(){return{uploadingProfilePhoto:!1,name:"",startDayOfWeek:(0,i().Lm)(),accountSettings:{hasPassword:!1,canConfigurePassword:!1,isSamlEnforced:!1,mfaStatus:"loading",numMfaSettings:0,regenerateBackupCodes:!1,hasPasskeys:!1,error:void 0}}}getValueForUser(e,t,s){if(e.isDefined()){const n=e.getFullName(s),o=e.getProfilePhoto(),a=t.getSettings();return{...this.state,uploadingProfilePhoto:!1,profilePhoto:o,name:n||"",startDayOfWeek:void 0===(null==a?void 0:a.start_day_of_week)?(0,i().Lm)():null==a?void 0:a.start_day_of_week}}}}const o=n},698415:(e,t,s)=>{s.d(t,{F:()=>n});class i extends(()=>s(757695))().Store{getInitialState(){return{forceImportDropdownOpen:!1,shouldAddMembers:!0}}closeImportDropdown(){this.setState({forceImportDropdownOpen:!1,shouldAddMembers:!0})}openImportDropdown(e){this.setState({forceImportDropdownOpen:!0,shouldAddMembers:e.shouldAddMembers})}}const n=new i},704444:(e,t,s)=>{s.d(t,{S:()=>h,y:()=>m});s(296540);var i=()=>s(920198),n=()=>s(484714),o=()=>s(631524),a=()=>s(75756),r=()=>s(324254),d=()=>s(69708),l=()=>s(529543),c=()=>s(455215),u=()=>s(74464),p=()=>s(702723),g=s(474848);function m(e){return(0,l().canSetCookie)(e)&&(0,l().canShowCookieUi)(e)}function h(){const e=(0,n().v3)(),t=(0,i().L)();return m(e)?(0,g.jsx)(p().A,{spaceStore:t,title:(0,g.jsx)(d().sA,{...a().LS.cookieSettingsLabel}),caption:(0,a().Qq)(u().i,"settings"),type:"custom",customButton:(0,g.jsx)(f,{})}):null}function f(){return(0,g.jsx)(c().A,{hasDismissButton:!1,renderOrigin:e=>(0,g.jsx)(o().p,{style:{paddingInlineStart:8,paddingInlineEnd:8,height:32},iconTrailing:{icon:r().arrowChevronSingleDownSmallIcon,colorVariant:"tertiary",size:"xs"},...e,children:(0,g.jsx)(d().sA,{id:"cookieSelector.label.customize",defaultMessage:"Customize"})})})}},710857:(e,t,s)=>{s.d(t,{x:()=>n});const i={greeting:!0,tasks:!1,tips:!1,templates:!1,calendar:!1,custom_db:!1,suggested:!0,trending:!0,shortcuts:!0};function n(e){const t=(null==e?void 0:e.getHomeEnabledFeatures())??{};return{...i,...t}}},718191:(e,t,s)=>{s.d(t,{B:()=>p});s(296540);var i=()=>s(484714),n=()=>s(590526),o=()=>s(706021),a=()=>s(69708),r=()=>s(702723),d=()=>s(709062),l=()=>s(528093),c=()=>s(783192),u=s(474848);function p({spaceStore:e,securitySettingsStore:t,organizationOverrides:s,readOnly:p}){var f;const S=(0,i().v3)(),y=(0,n().K8)((()=>e.getSpaceId()),[e]),b=(0,l()._)({name:"non_admin_members",spaceId:y,userId:null===(f=S.currentUser)||void 0===f?void 0:f.id}),x=null==b?void 0:b.upsell,v=(0,o().e2)(b),w=(0,n().K8)((()=>t.getValueForSpace(e)),[t,e]);if(!w)return null;const A=(0,o().e2)(b)&&!Boolean(w.disableMembershipRequests),j=(0,o().e2)(b)&&!Boolean(w.disableExternalMembershipRequests),M=(0,o().e2)(b)&&!Boolean(w.disableGuestMembershipRequests);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(r().A,{spaceStore:e,type:"toggle",disabled:p,isOn:A,isLocked:Boolean(s.disable_membership_requests),lockedTooltip:(0,d().C_)(),onToggle:()=>{(0,c().v)({name:"disableMembershipRequests",securitySettingsStore:t,spaceStore:e,environment:S})},upsellOptions:x?{upsell:x,analyticsName:"disable_membership_requests",customMessages:g}:void 0,title:(0,u.jsx)(a().sA,{id:"spaceSettingsRequests.allowMembersToRequestMembers.title",defaultMessage:"Allow members to request adding other members"}),caption:(0,u.jsx)(a().sA,{id:"spaceSettingsRequests.allowMembersToRequestMembers.description",defaultMessage:"Members can submit requests to admins to add more members"})}),(0,u.jsx)(r().A,{spaceStore:e,type:"toggle",disabled:p,isOn:j,isLocked:Boolean(s.disable_external_membership_requests),lockedTooltip:(0,d().C_)(),onToggle:()=>{(0,c().v)({name:"disableExternalMembershipRequests",securitySettingsStore:t,spaceStore:e,environment:S})},upsellOptions:x?{upsell:x,analyticsName:"disable_external_membership_requests",customMessages:m}:void 0,title:(0,u.jsx)(a().sA,{id:"spaceSettingsRequests.allowExternalUsersToRequestMembership.title",defaultMessage:"Allow any user to request to be added as a member of the workspace"}),caption:(0,u.jsx)(a().sA,{id:"spaceSettingsRequests.allowExternalUsersToRequestMembership.description",defaultMessage:"If enabled, users with teamspace invite links can submit requests to admins to be added as members"})}),v?(0,u.jsx)(r().A,{spaceStore:e,type:"toggle",disabled:p,isOn:M,isLocked:Boolean(s.disable_guest_membership_requests),lockedTooltip:(0,d().C_)(),onToggle:()=>{(0,c().v)({name:"disableGuestMembershipRequests",securitySettingsStore:t,spaceStore:e,environment:S})},upsellOptions:x?{upsell:x,analyticsName:"disable_guest_membership_requests",customMessages:h}:void 0,title:(0,u.jsx)(a().sA,{id:"spaceSettingsRequests.allowGuestsToSelfRequest.title",defaultMessage:"Allow page guests to request to be added as members to the workspace"}),caption:(0,u.jsx)(a().sA,{id:"spaceSettingsRequests.allowGuestsToSelfRequest.description",defaultMessage:"Guests of the workspace can submit requests to admins to be added as members"})}):null]})}const g=(0,a().YK)({eligible_to_purchase:{id:"securitySettings.disableMembershipRequests.upsellMessages.eligibleToPurchase",defaultMessage:"<highlight>Upgrade</highlight> to let members submit requests to admins to add more members"},eligible_for_trial:{id:"securitySettings.disableMembershipRequests.upsellMessages.eligibleForTrial",defaultMessage:"<highlight>Start trial</highlight> to let members submit requests to admins to add more members"},sales_eligible:{id:"securitySettings.disableMembershipRequests.upsellMessages.salesEligible",defaultMessage:"<highlight>Contact sales</highlight> to let members submit requests to admins to add more members"},sales_assisted:{id:"securitySettings.disableMembershipRequests.upsellMessages.salesAssisted",defaultMessage:"<highlight>Contact sales</highlight> to let members submit requests to admins to add more members"},eligible_to_request:{id:"securitySettings.disableMembershipRequests.upsellMessages.eligibleToRequest",defaultMessage:"<highlight>Request access</highlight> to let members submit requests to admins to add more members"},not_eligible:{id:"securitySettings.disableMembershipRequests.upsellMessages.notEligible",defaultMessage:"<highlight>Upgrade</highlight> to let members submit requests to admins to add more members"},request_pending:{id:"securitySettings.disableMembershipRequests.upsellMessages.requestPending",defaultMessage:"<highlight>Requested</highlight> to let members submit requests to admins to add more members"}}),m=(0,a().YK)({eligible_to_purchase:{id:"securitySettings.disableExternalMembershipRequests.upsellMessages.eligibleToPurchase",defaultMessage:"<highlight>Upgrade</highlight> to let users with teamspace invite links submit requests to admins to be added as members"},eligible_for_trial:{id:"securitySettings.disableExternalMembershipRequests.upsellMessages.eligibleForTrial",defaultMessage:"<highlight>Start trial</highlight> to let users with teamspace invite links submit requests to admins to be added as members"},sales_eligible:{id:"securitySettings.disableExternalMembershipRequests.upsellMessages.salesEligible",defaultMessage:"<highlight>Contact sales</highlight> to let users with teamspace invite links submit requests to admins to be added as members"},sales_assisted:{id:"securitySettings.disableExternalMembershipRequests.upsellMessages.salesAssisted",defaultMessage:"<highlight>Contact sales</highlight> to let users with teamspace invite links submit requests to admins to be added as members"},eligible_to_request:{id:"securitySettings.disableExternalMembershipRequests.upsellMessages.eligibleToRequest",defaultMessage:"<highlight>Request access</highlight> to let users with teamspace invite links submit requests to admins to be added as members"},not_eligible:{id:"securitySettings.disableExternalMembershipRequests.upsellMessages.notEligible",defaultMessage:"<highlight>Upgrade</highlight> to let users with teamspace invite links submit requests to admins to be added as members"},request_pending:{id:"securitySettings.disableExternalMembershipRequests.upsellMessages.requestPending",defaultMessage:"<highlight>Requested</highlight> to let users with teamspace invite links submit requests to admins to be added as members"}}),h=(0,a().YK)({eligible_to_purchase:{id:"securitySettings.disableGuestMembershipRequests.upsellMessages.eligibleToPurchase",defaultMessage:"<highlight>Upgrade</highlight> to let guests of the workspace submit requests to admins to be added as members"},eligible_for_trial:{id:"securitySettings.disableGuestMembershipRequests.upsellMessages.eligibleForTrial",defaultMessage:"<highlight>Start trial</highlight> to let guests of the workspace submit requests to admins to be added as members"},sales_eligible:{id:"securitySettings.disableGuestMembershipRequests.upsellMessages.salesEligible",defaultMessage:"<highlight>Contact sales</highlight> to let guests of the workspace submit requests to admins to be added as members"},sales_assisted:{id:"securitySettings.disableGuestMembershipRequests.upsellMessages.salesAssisted",defaultMessage:"<highlight>Contact sales</highlight> to let guests of the workspace submit requests to admins to be added as members"},eligible_to_request:{id:"securitySettings.disableGuestMembershipRequests.upsellMessages.eligibleToRequest",defaultMessage:"<highlight>Request access</highlight> to let guests of the workspace submit requests to admins to be added as members"},not_eligible:{id:"securitySettings.disableGuestMembershipRequests.upsellMessages.notEligible",defaultMessage:"<highlight>Upgrade</highlight> to let guests of the workspace submit requests to admins to be added as members"},request_pending:{id:"securitySettings.disableGuestMembershipRequests.upsellMessages.requestPending",defaultMessage:"<highlight>Requested</highlight> to let guests of the workspace submit requests to admins to be added as members"}})},736414:(e,t,s)=>{s.r(t),s.d(t,{iconDefinition:()=>n,inviteMemberFillSmallIcon:()=>o});s(296540);var i=s(474848);const n={viewBox:"0 0 16 16",fittedViewBox:"2.89 1.85 12.7 13.72",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M5.821 2.862c.506-.63 1.255-1.012 2.18-1.012.924 0 1.672.382 2.178 1.012.495.617.73 1.435.73 2.29 0 .856-.235 1.674-.73 2.291-.506.63-1.254 1.012-2.179 1.012s-1.673-.382-2.179-1.012c-.495-.617-.73-1.435-.73-2.29 0-.856.235-1.674.73-2.291M3.06 11.925C3.885 10.313 5.825 9.253 8 9.253c.723 0 1.42.117 2.058.333A3.93 3.93 0 0 0 8.657 12.6c0 .55.113 1.074.316 1.55H4.68c-.557 0-1.09-.235-1.43-.631a1.405 1.405 0 0 1-.19-1.594"}),(0,i.jsx)("path",{d:"M9.664 13.22a3 3 0 1 1 5.871-1.24 3 3 0 0 1-5.87 1.24m5.102-.62a.5.5 0 0 0-.5-.5H13.1v-1.166a.5.5 0 0 0-1 0V12.1h-1.167a.5.5 0 1 0 0 1H12.1v1.167a.5.5 0 1 0 1 0V13.1h1.166a.5.5 0 0 0 .5-.5"})]})},o=(0,s(340498).wt)("inviteMemberFillSmall",n,"fillSmall")},739793:(e,t,s)=>{s.d(t,{A:()=>y});s(898992),s(354520);var i=s(296540),n=()=>s(907258),o=()=>s(484714),a=()=>s(590526),r=()=>s(388926),d=()=>s(69708),l=()=>s(534177),c=()=>s(420844),u=()=>s(882462),p=()=>s(704444),g=()=>s(865464),m=()=>s(8178),h=()=>s(537296),f=()=>s(388450),S=s(474848);const y=(0,s(410058).k)((function({isMobile:e,isMobileNative:t,passwordRequestStore:y,userEmailDomainSettings:b,billingData:x}){const{isElectron:v,isPhone:w,isAndroid:A}=(0,o().Y0)(),j=(0,o().v3)(),M=(0,a().K8)((()=>(0,s(755531).S)()),[]),k=(0,a().O$)(s(929219).e),C=(0,a().K8)((()=>{var t,s;const i=(null===(t=n().default.state.sidebarSpaceViewStore)||void 0===t?void 0:t.getNotifyEmail())||!1,o=Boolean(null===(s=n().default.state.sidebarSpaceViewStore)||void 0===s||null===(s=s.getSettings())||void 0===s?void 0:s.notify_slack),a=(0,u().fb)({spaceStore:M}),r=(0,u().Z5)({spaceStore:M});return function(e){const{isMobile:t,isElectron:s,showNotifyEmailAlwaysSetting:i,slackSettingsAndGates:n}=e,o=function(e){const{isSlackNotificationSettingEnabled:t,showSlackNotificationSetting:s,showNotionActivityNotificationsToSlackSetting:i}=e;return s?i?[{key:"notify_slack",renderSettingsItem:()=>(0,S.jsx)(f().R,{target:"notify_slack"})},t?{key:"notify_slack_all_activity",renderSettingsItem:()=>(0,S.jsx)(f().R,{target:"notify_slack_all_activity"})}:void 0,t?{key:"notify_slack_mention",renderSettingsItem:()=>(0,S.jsx)(f().R,{target:"notify_slack_mention"})}:void 0].filter(l().O9):[{key:"notify_slack",renderSettingsItem:()=>(0,S.jsx)(f().R,{target:"notify_slack"})}]:[]}(n);return[t?{key:"notify_mobile",renderSettingsItem:()=>(0,S.jsx)(g().L,{target:"notify_mobile"})}:void 0,!t&&s?{key:"notify_desktop",renderSettingsItem:()=>(0,S.jsx)(g().L,{target:"notify_desktop"})}:void 0,!t&&s?{key:"disable_ai_meeting_notes_audio_process_detection_notification",renderSettingsItem:()=>(0,S.jsx)(g().L,{target:"disable_ai_meeting_notes_audio_process_detection_notification"})}:void 0,{key:"notify_email",renderSettingsItem:()=>(0,S.jsx)(g().L,{target:"notify_email"})},i?{key:"notify_email_always",renderSettingsItem:()=>(0,S.jsx)(g().L,{target:"notify_email_always"})}:void 0,{key:"notify_email_digest",renderSettingsItem:()=>(0,S.jsx)(g().L,{target:"notify_email_digest"})},{key:"notify_home_digest_email",renderSettingsItem:()=>(0,S.jsx)(g().L,{target:"notify_home_digest_email"})},...o,{key:"marketing_emails",renderSettingsItem:()=>(0,S.jsx)(g().L,{target:"marketing_emails"})}].filter(l().O9)}({isMobile:e,isElectron:v,showNotifyEmailAlwaysSetting:i,slackSettingsAndGates:{isSlackNotificationSettingEnabled:o,showSlackNotificationSetting:a,showNotionActivityNotificationsToSlackSetting:r}})}),[e,v,M]),I=(0,c().OC)({environment:j}),_=(0,a().uB)(void 0,s(678894).A);(0,s(852507).l)((()=>{s(804411).Q(j,_)}));const T=(0,a().K8)((()=>_.state.accountSettings),[_]),P=Boolean((0,s(475553).y)()),R=(0,a().K8)((()=>e?(0,c().xF)({isPhone:w,isMobileNative:t,isAndroid:A,showOfflineSettings:P,passwordRequestStore:y,userEmailDomainSettings:b,billingData:x,accountSettings:T}):I),[I,e,w,t,A,P,y,b,x,T]),D=(0,a().K8)((()=>[(0,p().y)(j)?{key:"cookies",renderSettingsItem:()=>(0,S.jsx)(p().S,{})}:void 0,{key:"view-history",renderSettingsItem:()=>(0,S.jsx)(s(991627).L,{})}].filter(l().O9)),[j]),N=(0,a().K8)((()=>j.WindowSizeStore.state.paddingBottomCSS),[j]);return(0,i.useEffect)((()=>{(0,s(755125).clear)({environment:j})}),[j]),k?(0,S.jsxs)(s(843878).Ay,{disableScroller:e,children:[(0,S.jsx)(m().A,{large:!e,divider:"full",children:(0,S.jsx)(d().sA,{id:"notificationAndPersonalSettings.notificationSection.title.v2",defaultMessage:"Notifications"})}),(0,S.jsx)(h().U,{items:C}),(0,S.jsx)(r().A,{size:48,isHidden:!0}),(0,S.jsx)(m().A,{large:!e,divider:"full",children:(0,S.jsx)(d().sA,{id:"notificationAndPersonalSettings.settingsSection.title.v2",defaultMessage:"Preferences"})}),(0,S.jsx)(h().U,{items:R}),(0,S.jsx)(r().A,{size:48,isHidden:!0}),(0,S.jsx)(m().A,{large:!e,divider:"full",children:(0,S.jsx)(d().sA,{id:"notificationAndPersonalSettings.privacySection.title",defaultMessage:"Privacy"})}),(0,S.jsx)(h().U,{items:D}),(0,S.jsx)(r().A,{size:48,isHidden:!1}),(0,S.jsx)("div",{style:{marginTop:4,marginBottom:e?N:void 0},children:(0,S.jsx)(s(690197).A,{title:(0,S.jsx)(d().sA,{id:"notificationSettings.helpButton.caption",defaultMessage:"Learn about notifications & settings"}),href:(0,s(232930).x)("guides.notificationSettings"),analyticsFrom:"notifications_settings"})})]}):(0,S.jsx)(s(785125).g,{})}))},746970:(e,t,s)=>{s.d(t,{KB:()=>v,Wy:()=>j,aV:()=>w,p4:()=>x,si:()=>M,xR:()=>A});s(18107),s(967357),s(898992),s(354520),s(581454);var i=()=>s(232239),n=()=>s(849255),o=()=>s(296344),a=()=>s(96689),r=()=>s(798880),d=()=>s(496603),l=()=>s(763824),c=()=>s(134696),u=()=>s(966505),p=()=>s(769864),g=()=>s(579627),m=()=>s(384944),h=()=>s(680074),f=()=>s(592674),S=()=>s(309049),y=()=>s(224701),b=()=>s(547149);async function x(e){const{environment:t,store:s,status:n,requests:o}=e,a=t.currentUser.id;u().qQ(t,{status:n,user_count:o.length,from:e.from,request_type:"member"});const l=await Promise.all(o.map((e=>k(t,{id:e.getForActorId(),table:r().oo})))).then((e=>(0,d().oE)(e)));if("approved"===n){const e=l.map((e=>({type:"existingUser",value:e.__IM_SORRY__getValue(),membershipType:"member"})));if(!(await g().cl({environment:t,spaceStore:s,inviteTargets:e,isOnboarding:!1,invite:{inviteOrigin:"membership_request"}})).success)return{failedUsers:l,resolvedUsers:[]}}return b().createAndCommit({userAction:"accessRequestActions.resolveMembershipRequests",environment:t,canUndo:!0,perform:d=>{o.map((o=>{const l=new(i().v)(t,o.pointer);m().zv({store:l,transaction:d,data:{granted_time:Date.now(),granted_by_table:r().oo,granted_by_id:a,resolved_time:Date.now(),resolved_by_table:r().oo,resolved_by_id:a,status:n}}),u().vn(t,{status:n,request_id:o.id,from:e.from,for_actor_id:o.for_actor_id,space_role:s.getRole()})}))}}),{failedUsers:[],resolvedUsers:l}}async function v(e){const{environment:t,store:s,status:n,requests:o}=e,a=t.currentUser.id;u().qQ(t,{status:n,user_count:o.length,from:e.from,request_type:"member"});const l=await Promise.all(o.map((e=>k(t,{id:e.getForActorId(),table:r().oo})))).then((e=>(0,d().oE)(e)));if("approved"===n){const e=l.map((e=>({type:"existingUser",value:e.__IM_SORRY__getValue(),membershipType:"member"})));if(!(await g().cl({environment:t,spaceStore:s,inviteTargets:e,isOnboarding:!1,invite:{inviteOrigin:"membership_request"}})).success)return{failedUsers:l,resolvedUsers:[]};const i=s.id,n=await f().A.awaitData(t,{spaceId:i}),o=n?n.map((e=>e.domain.url)):[];c().hp(t,{invite_flow_id:void 0,invite_origin:"membership_request",user_ids:l.map((e=>e.id)),internal_domains:o})}return b().createAndCommit({userAction:"accessRequestActions.resolveMembershipRequests",environment:t,canUndo:!0,perform:e=>{o.map((s=>{const o=new(i().v)(t,s.pointer);m().zv({store:o,transaction:e,data:{granted_time:Date.now(),granted_by_table:r().oo,granted_by_id:a,resolved_time:Date.now(),resolved_by_table:r().oo,resolved_by_id:a,status:n,type:"space_membership_request"}})}))}}),{failedUsers:[],resolvedUsers:l}}async function w(e){const{environment:t,status:s,requests:i,from:n}=e;u().qQ(t,{status:s,user_count:i.length,from:n,request_type:"guest"});const o=await(0,l().lX)(i,10,(async e=>{var i,o,a;const d=await k(t,{id:e.getForActorId(),table:r().oo});if(!d)return{type:"failed",user:void 0};if(!e.isGuestInviteRequest())return{type:"failed",user:d};const l=await p().callApi({eventName:"resolveAccessRequest",environment:t,data:{accessRequestId:e.id,status:s,spaceId:e.getParentId()}}),g=null===(i=e.getAttributes().permission_records_and_roles.at(0))||void 0===i?void 0:i.role,m=null===(o=e.getAttributes().permission_records_and_roles.at(0))||void 0===o?void 0:o.id,f=(null===(a=e.getAttributes().invite_message)||void 0===a?void 0:a.length)??0;return"success"===l.type&&"approved"===s&&c().Jg(t,{role:g,is_space:!1,invite_targets:[{type:"existingUser",value:{id:d.id,version:0,email:d.getEmail()},membershipType:"none"}],is_onboarding:!1,invite_origin:"guest_invite_request",permission_items:[{type:"user_permission",role:g,user_id:d.id}],invite_message_length:f,domainType:(0,h().FX)()}),"success"===l.type&&u().AE(t,{status:s,request_id:e.id,for_actor_id:e.getForActorId(),created_by_id:e.getCreatedById(),requested_page_id:m,requested_role:g,from:n}),{type:l.type,user:d}}));await(0,l().lX)(i,10,(async e=>await y().nO({environment:t,spaceStore:{id:e.getParentId()}})));const a=o.filter((e=>"failed"===e.type)).map((e=>e.user)),g=o.filter((e=>"success"===e.type)).map((e=>e.user));return{failedUsers:(0,d().oE)(a),resolvedUsers:(0,d().oE)(g)}}async function A(e){const{environment:t,status:s,requests:i,from:n}=e;u().qQ(t,{status:s,user_count:i.length,from:n,request_type:"restricted_member"});const o=await(0,l().lX)(i,10,(async e=>{var i,o,a;const d=await k(t,{id:e.getForActorId(),table:r().oo});if(!d)return{type:"failed",user:void 0};if(!e.isRestrictedMemberInviteRequest())return{type:"failed",user:d};const l=await p().callApi({eventName:"resolveAccessRequest",environment:t,data:{accessRequestId:e.id,status:s,spaceId:e.getParentId()}}),g=null===(i=e.getAttributes().permission_records_and_roles.at(0))||void 0===i?void 0:i.role,m=null===(o=e.getAttributes().permission_records_and_roles.at(0))||void 0===o?void 0:o.id,f=(null===(a=e.getAttributes().invite_message)||void 0===a?void 0:a.length)??0;return"success"===l.type&&"approved"===s&&c().Jg(t,{role:g,is_space:!1,invite_targets:[{type:"existingUser",value:{id:d.id,version:0,email:d.getEmail()},membershipType:"restricted_member"}],is_onboarding:!1,invite_origin:"restricted_member_invite_request",permission_items:[{type:"user_permission",role:g,user_id:d.id}],invite_message_length:f,domainType:(0,h().FX)()}),"success"===l.type&&u().jW(t,{status:s,request_id:e.id,for_actor_id:e.getForActorId(),created_by_id:e.getCreatedById(),requested_page_id:m,requested_role:g,from:n}),{type:l.type,user:d}}));await(0,l().lX)(i,10,(async e=>await y().nO({environment:t,spaceStore:{id:e.getParentId()}})));const a=o.filter((e=>"failed"===e.type)).map((e=>e.user)),g=o.filter((e=>"success"===e.type)).map((e=>e.user));return{failedUsers:(0,d().oE)(a),resolvedUsers:(0,d().oE)(g)}}async function j(e){if(S().A.reset(),!e.canAdmin)return;const{environment:t,spaceId:s}=e,i=await p().callApi({eventName:"getUnreadAccessRequestCount",environment:t,data:{parentTable:a().NX,parentId:s,size:1}});"success"===i.type&&S().A.setState({spaceId:s,count:i.data.count})}async function M(e,t,s){const n=function(e){return Object.values((0,d().$z)(e,(e=>function(e){if(e.isGuestInviteRequest()){const t=e.getAttributes().permission_records_and_roles[0];return`guest_invite_${e.getForActorId()}:${null==t?void 0:t.id}:${e.getCreatedById()}`}if(e.isRestrictedMemberInviteRequest()){const t=e.getAttributes().permission_records_and_roles[0];return`restricted_member_invite_${e.getForActorId()}:${null==t?void 0:t.id}:${e.getCreatedById()}`}return e.isSpaceMembershipRequest()?`space_membership_${e.getForActorId()}:${e.getCreatedById()}}`:e.isTeamMembershipRequest()?void 0:void e.isPageAccessRequest()}(e)))).map((e=>{const t=(0,d().Ul)(e,(e=>e.getCreatedTime()));return t[t.length-1]}))}(await Promise.all(s.map((async t=>{const s=o().O,n=new(i().v)(e,{table:s,id:t});return await n.load(),n.getModel()}))).then((e=>(0,d().oE)(e)))),a=await function(e,t){const s=Object.values((0,d().$z)(t,(e=>function(e){if(e.isGuestInviteRequest()){const t=e.getAttributes().permission_records_and_roles[0];return`guest_invite_${e.getForActorId()}:${null==t?void 0:t.id}:${null==t?void 0:t.role}`}if(e.isRestrictedMemberInviteRequest()){const t=e.getAttributes().permission_records_and_roles[0];return`restricted_member_invite_${e.getForActorId()}:${null==t?void 0:t.id}:${null==t?void 0:t.role}`}return e.isSpaceMembershipRequest()?`space_membership_${e.getForActorId()}`:e.isTeamMembershipRequest()?void 0:void e.isPageAccessRequest()}(e))));return Promise.all(s.map((async t=>{const s=(0,d().Ul)(t,(e=>e.getCreatedTime())),i=s[0];return{createdByActorsWithReason:await Promise.all(s.map((async t=>{const s=await k(e,{id:t.created_by_id,table:r().oo});if(s)return{actor:s,reason:t.message}}))).then((e=>(0,d().oE)(e))),accessRequest:i}})))}(e,n);return Promise.all(a.map((async t=>{const s=await k(e,{id:t.accessRequest.getForActorId(),table:r().oo});if(s)return{forActor:s,...t}}))).then((e=>(0,d().oE)(e)))}async function k(e,t){const s=new(n().L)(e,t);return await s.load(),s.getModel()}},747938:(e,t,s)=>{s.d(t,{Dy:()=>r,Os:()=>l,l$:()=>d,qO:()=>a});s(944114),s(898992),s(354520);var i=()=>s(617871),n=()=>s(792071),o=()=>s(402904);function a(e){if(e.integration_id!==i().zG)throw"Cannot render account for integration.";const t=/(.+) - (.+)/.exec(e.account_name);if(!t)return{accountName:e.account_name};const[,s,n]=t;return{organizationName:s,accountName:n}}function r(e){return n().Bj6.fromValue(o().As,e).getSlackWorkspaceId()}function d(e,t){return t?e.filter((e=>{const s=r(e);return!!s&&t(s)})):e}function l(e,t=""){const s={};for(const i of e){const{accountName:e,organizationName:n}=a(i);c({query:t,accountName:e,organizationName:n})&&(s[e]||(s[e]=[]),s[e].push({externalAuthentication:i,workspaceName:n}))}return s}function c(e){const{accountName:t,organizationName:s,query:i}=e;if(0===i.length)return!0;const n=t.toLocaleLowerCase().indexOf(i.trim().toLocaleLowerCase())>=0,o=!!s&&s.toLocaleLowerCase().indexOf(i.trim().toLocaleLowerCase())>=0;return n||o}},748902:(e,t,s)=>{s.r(t),s.d(t,{arrowDiagonalUpRightFillSmallIcon:()=>n,iconDefinition:()=>i});s(296540);const i={viewBox:"0 0 16 16",fittedViewBox:"3.52 3.53 8.94 8.94",directional:!0,svg:(0,s(474848).jsx)("path",{d:"M12.462 4.288a.75.75 0 0 0-.75-.75H5.603a.75.75 0 1 0 0 1.5h4.299l-6.177 6.177c-.275.274-.26.735.032 1.027.293.293.754.308 1.028.033l6.177-6.177v4.299a.75.75 0 0 0 1.5 0z"})},n=(0,s(340498).wt)("arrowDiagonalUpRightFillSmall",i,"fillSmall")},765140:(e,t,s)=>{s.d(t,{n:()=>i});const i=(0,s(340498).xh)("apple",{default:{loader:()=>s.e(5815).then(s.bind(s,834258))},tintable:{loader:()=>s.e(5815).then(s.bind(s,888976))}})},769730:(e,t,s)=>{s.d(t,{x:()=>n});var i=()=>s(534177);function n({spaceUserMembershipType:e}){switch(e){case void 0:case"none":case"page_guest":case"restricted_member":return!1;case"member":case"membership_admin":case"owner":return!0;default:(0,i().HB)(e)}}},775281:(e,t,s)=>{s.d(t,{$x:()=>l,FH:()=>r,vy:()=>d});s(296540);var i=()=>s(314709),n=()=>s(792057),o=()=>s(69708),a=s(474848);async function r(e){const{environment:t,spaceStore:s,fromUserId:o,toUserId:a,contentType:r,messages:d,intl:l,onSuccess:c}=e,{accept:u}=await n().Gh({message:d.confirmationMessage,description:d.confirmationDescription,acceptLabel:d.confirmButton});if(!u)return!1;const p=await t.api.callApi({eventName:"transferSpaceUserContent",environment:t,data:{spaceId:s.id,fromUserId:o,toUserId:a,contentTypes:[r]}});return"failed"===p.type?(l?n().Qg(p,(0,i().H)(l,p)):n().Qg(p),!1):(c&&c(),!0)}function d(){return{confirmationMessage:(0,a.jsx)(o().sA,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmationMessage",defaultMessage:"Transfer their private pages?"}),confirmationDescription:(0,a.jsx)(o().sA,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmationDescription",defaultMessage:"This action cannot be undone."}),confirmButton:(0,a.jsx)(o().sA,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmButton.label",defaultMessage:"Transfer private pages"})}}function l(){return{confirmationMessage:(0,a.jsx)(o().sA,{id:"spacePermissionsSettings.reprovisionWorkflowsConfirmationDialog.confirmationMessage",defaultMessage:"Transfer their private agents?"}),confirmationDescription:(0,a.jsx)(o().sA,{id:"spacePermissionsSettings.reprovisionWorkflowsConfirmationDialog.confirmationDescription",defaultMessage:"This action cannot be undone."}),confirmButton:(0,a.jsx)(o().sA,{id:"spacePermissionsSettings.reprovisionWorkflowsConfirmationDialog.confirmButton.label",defaultMessage:"Transfer private agents"})}}},775471:(e,t,s)=>{s.d(t,{B:()=>h});s(581454),s(296540);var i=()=>s(590526),n=()=>s(401497),o=()=>s(699143),a=()=>s(69708),r=()=>s(100622),d=()=>s(534177),l=()=>s(665290),c=()=>s(493552),u=s(474848);function p(e){const{isChecked:t,label:s,onClickToggle:i}=e,o=(0,n().IS)((()=>({row:{alignItems:"center",cursor:"pointer",display:"flex",gap:8}})),[]);return(0,u.jsxs)("label",{style:o.row,children:[(0,u.jsx)(l().W,{checked:t,onChange:i}),(0,u.jsx)(c().D,{styleKey:"bodyRegular",children:s})]})}var g=()=>s(31511);function m(e){const{inputText:t,isChecked:s,label:i,onClickToggle:n,placeholderText:a,setInputText:r}=e;return(0,u.jsxs)(o().Y1,{gap:8,children:[(0,u.jsx)(p,{label:i,isChecked:s,onClickToggle:n}),s?(0,u.jsx)(g().A,{autoFocus:!0,value:t,placeholder:a,onChange:e=>r(e.target.value)}):null]})}function h(e){const{store:t}=e,s=(0,n().IS)((()=>({container:{border:`1px solid ${r().Tj.border.secondary}`,borderRadius:6}})),[]),l=(0,i().K8)((()=>t.state.options),[t]),{selectedIndexes:c,customTextByIndex:g}=(0,i().K8)((()=>{const{selectedIndexes:e,customTextByIndex:s}=t.state;return{selectedIndexes:e,customTextByIndex:s}}),[t]),h=(0,a().tz)();return(0,u.jsx)(o().Y1,{padding:"16px 16px",style:s.container,gap:12,children:l.map(((e,s)=>{const{type:i}=e,n=c.has(s);switch(i){case"checkbox":return(0,u.jsx)(p,{isChecked:n,label:e.label,onClickToggle:()=>t.toggleIndex(s)},s);case"checkboxAndInput":const o="placeholderText"in e&&e.placeholderText?h.formatMessage(e.placeholderText):void 0;return(0,u.jsx)(m,{inputText:g[s]??"",isChecked:n,label:e.label,onClickToggle:()=>t.toggleIndex(s),placeholderText:o,setInputText:e=>t.setCustomTextByIndex(s,e)},s);default:(0,d().HB)(i)}}))})}},782649:(e,t,s)=>{s.d(t,{L:()=>h});s(296540);var i=()=>s(920198),n=()=>s(726637),o=()=>s(484714),a=()=>s(590526),r=()=>s(201794),d=()=>s(741615),l=()=>s(552712),c=()=>s(406094),u=()=>s(302501),p=()=>s(69708),g=()=>s(8178),m=s(474848);function h(){const e=(0,o().v3)(),t=(0,a().K8)((()=>function(e){const{WindowSizeStore:t}=e;return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingInlineStart:n().A.isMobile?t.state.paddingLeftCSS:0,paddingInlineEnd:n().A.isMobile?t.state.paddingRightCSS:0}}(e)),[e]);return(0,m.jsxs)("div",{children:[(0,m.jsx)(S,{}),(0,m.jsxs)("div",{style:t,children:[(0,m.jsx)(u().A,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,m.jsx)(y,{})}),(0,m.jsx)(f,{})]})]})}function f(){const e=(0,i().L)(),{mobileNative:t}=(0,o().v3)(),{isIOS:s}=(0,o().Y0)(),n=(0,d()._3)({spaceId:null==e?void 0:e.id}),u=(0,a().K8)((()=>{if("app_store"===(null==n?void 0:n.provider)||"play_store"===(null==n?void 0:n.provider))return n.provider}),[n]),g={marginTop:12,marginBottom:4},h=(0,m.jsx)(p().sA,{id:"subscriptionSettings.button",defaultMessage:"Manage subscription"});if(s&&"app_store"===u&&(0,r().T)("supportsAiIAP")&&null!=t&&t.openUpgradeModal&&e)return(0,m.jsx)(c().A,{size:"lg",style:g,onClick:()=>{t.openUpgradeModal({spaceId:e.getSpaceId(),from:"settings",showActivePlan:!0})},children:h});let f;switch(u){case"app_store":f="https://apps.apple.com/account/subscriptions";break;case"play_store":f="https://play.google.com/store/account/subscriptions"}return(0,m.jsx)(l().N,{href:f,children:(0,m.jsx)(c().A,{size:"lg",style:g,children:h})})}function S(){return(0,m.jsx)(g().A,{large:!n().A.isMobile||void 0,divider:n().A.isMobile?void 0:"full",children:(0,m.jsx)(p().sA,{id:"subscriptionSettings.title",defaultMessage:"Subscription"})})}function y(){return n().A.isMobile?(0,m.jsx)(p().sA,{id:"subscriptionSettings.mobileDescription",defaultMessage:"Manage your subscription through the App Store."}):(0,m.jsx)(p().sA,{id:"subscriptionSettings.description",defaultMessage:"You’re currently subscribed through an in-app purchase with Apple. You can manage your subscription in Apple’s subscription settings."})}},783192:(e,t,s)=>{s.d(t,{g:()=>n,v:()=>o});var i=()=>s(706024);function n(e,t,s,n){i().X(n,{spaceStore:s,securitySettingsStore:t,fields:e})}function o(e){const{name:t,securitySettingsStore:s,spaceStore:i,environment:o}=e;n({[t]:!s.state[t]},s,i,o)}},785125:(e,t,s)=>{s.d(t,{g:()=>a});s(296540);var i=()=>s(302501),n=()=>s(69708),o=s(474848);function a(e){const{isSmall:t,isSecondaryColor:s}=e;return(0,o.jsx)(i().A,{isSmall:t,isSecondaryColor:s,style:{textAlign:"center"},children:(0,o.jsx)(n().sA,{id:"spaceSettings.offlineMessage",defaultMessage:"Please go online to manage settings."})})}},785606:(e,t,s)=>{s.d(t,{I:()=>a});var i=s(296540),n=()=>s(484714),o=()=>s(134696);function a(e){const{children:t}=e,s=(0,n().v3)();return(0,i.useEffect)((()=>{o().ig(s,{})}),[s]),t}},792361:(e,t,s)=>{s.d(t,{X:()=>a});s(296540);var i=()=>s(807449),n=()=>s(378815),o=s(474848);function a(e){const{fill:t,up:s}=e,a={marginInlineStart:4,fill:t};return s?(0,o.jsx)(i().I,{icon:n().arrowStraightDownFillIcon,size:10,style:{...a,transform:"rotate(180deg)"}}):(0,o.jsx)(i().I,{icon:n().arrowStraightDownFillIcon,size:10,style:a})}},804411:(e,t,s)=>{s.d(t,{Q:()=>o});var i=()=>s(920949),n=()=>s(769864);async function o(e,t){const s=await n().callMainCellApi({eventName:"getEmailDomainSettings",environment:e,data:{}});"success"===s.type&&t.setState({...t.state,emailDomainSettings:s.data});try{const s=await(0,i().Su)(e);t.setState({...t.state,accountSettings:{...s,error:void 0}})}catch(o){t.setState({...t.state,accountSettings:{...t.state.accountSettings,error:o}})}}},808936:(e,t,s)=>{s.r(t),s.d(t,{iconDefinition:()=>i,paperPlaneIcon:()=>n});s(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"2.07 2.87 15.11 15.1",svg:(0,s(474848).jsx)("path",{d:"M16.994 3.06a.62.62 0 0 1 .136.673l-5.357 13.843a.625.625 0 0 1-1.131.074l-2.913-5.33L2.4 9.41a.625.625 0 0 1 .074-1.132L16.317 2.92a.63.63 0 0 1 .677.14M8.08 11.087l5.936-5.936L4.18 8.957zm.884.884 2.13 3.898L14.9 6.035z"})},n=(0,s(340498).wt)("paperPlane",i,"default")},841101:(e,t,s)=>{s.d(t,{M:()=>n,a:()=>i});s(944114),s(517642),s(658004),s(733853),s(845876),s(432475),s(515024),s(731698),s(898992),s(803949);class i extends(()=>s(757695))().Store{getInitialState(){return{options:[],customTextByIndex:{},selectedIndexes:new Set}}setOptions(e){this.setState({customTextByIndex:{},options:e,selectedIndexes:new Set})}setCustomTextByIndex(e,t){this.update((s=>({...s,customTextByIndex:{...s.customTextByIndex,[e]:t}})))}toggleIndex(e){this.update((t=>{const s=new Set(t.selectedIndexes);return s.has(e)?s.delete(e):s.add(e),{...t,selectedIndexes:s}}))}toSurveyResult(){const{customTextByIndex:e,options:t,selectedIndexes:s}=this.state,i=[],n=[],o={};return s.forEach((s=>{const a=t[s];i.push(a.optionName),n.push(s),"checkboxAndInput"===a.type&&e[s]&&(o[a.optionName]=e[s])})),{reasons:i,reasonIndexes:n,customTextByReason:o}}}const n=new i},856461:(e,t,s)=>{s.d(t,{w:()=>g,x:()=>p});s(296540);var i=()=>s(230711),n=()=>s(907258),o=()=>s(484714),a=()=>s(590526),r=()=>s(401497),d=()=>s(701763),l=()=>s(946144),c=()=>s(910322),u=s(474848);const p=160;function g({userId:e,membershipType:t,spaceStore:s}){const g=(0,r().IS)((()=>({button:{maxWidth:p}})),[]),m=(0,a().O$)(n().AppStoreCurrentUserSettingsStore),h=(0,i().U2)(s),f=(0,a().K8)((()=>null==h?void 0:h.getModel()),[h]),S=(0,o().v3)();return f&&m?(0,u.jsx)("div",{children:(0,u.jsx)(c().VI,{spaceStore:s,spaceUser:f,targetUserId:e,currentType:t,isInvite:!1,buttonStyle:g.button,isMenuItem:!1,from:"spaceSettings",upgradeFrom:"space_permission_item",onClick:()=>{d().jR(S,{from:"member",button_name:"open_role"})},onChange:async i=>{"none"===i&&e!==f.getUserId()?await(0,l().Vr)({userId:e,currentMembershipType:t,spaceStore:s,environment:S,userSettingStore:m}):await l().JZ({environment:S,userId:e,newMembershipType:i,currentUserSettingsStore:m,spaceStore:s})}})}):null}},862961:(e,t,s)=>{s.d(t,{A:()=>x});var i=s(296540),n=()=>s(920198),o=()=>s(484714),a=()=>s(590526),r=()=>s(406094),d=()=>s(69708),l=()=>s(404141),c=()=>s(147294),u=()=>s(702723),p=()=>s(30580),g=()=>s(461857),m=()=>s(364671),h=()=>s(955302),f=()=>s(318575),S=()=>s(538669),y=()=>s(334711),b=s(474848);function x({samlEnforced:e,hasPasskeys:t}){const s=(0,o().v3)(),[{rootStateMachine:x,settingsStateMachine:v,totpStateMachine:w,smsStateMachine:A,backupCodesStateMachine:j}]=(0,i.useState)((()=>{const e=new(g().q)(s),t={totpStore:new(y().$),settingsStore:new(f().r),smsStore:new(S().N),backupCodesStore:new(p().Y),rootStore:new(h().y)};return{mfaService:e,rootStateMachine:new(h().J)(t.rootStore),settingsStateMachine:new(f().U)(t.settingsStore,e),totpStateMachine:new(y().U)(t.totpStore,e),smsStateMachine:new(S().G)(t.smsStore,e),backupCodesStateMachine:new(p().b)(t.backupCodesStore,e)}}));const M=(0,b.jsx)(r().A,{size:"lg",onClick:()=>function({rootStateMachine:e,settingsStateMachine:t}){e.rootShowSettings({refresh:!1,startConfirmIdentity:()=>t.passkeySettingsShow()})}({rootStateMachine:x,settingsStateMachine:v}),disabled:e,children:t?(0,b.jsx)(d().sA,{id:"profileSettings.accountSecuritySection.managePasskeysButton.label",defaultMessage:"Manage passkeys"}):(0,b.jsx)(d().sA,{id:"profileSettings.accountSecuritySection.addPasskeysButton.label",defaultMessage:"Add passkey"})}),k=(0,a().K8)((()=>l().Ay.state.highlightedSetting===l().rF.Passkey),[]),C=(0,n().L)();return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(u().A,{spaceStore:C,type:"custom",title:(0,b.jsx)(d().sA,{id:"profileSettings.accountSecuritySection.passkeySetting.label",defaultMessage:"Passkeys"}),caption:(0,b.jsx)(d().sA,{id:"profileSettings.accountSecuritySection.passkeySetting.message",defaultMessage:"Securely sign-in with on-device biometric authentication."}),badge:(0,b.jsx)("div",{style:{marginInlineStart:6},children:(0,b.jsx)(c().Ee,{newBadgeKey:"passkey_setting",didUserEngage:!1,keyType:"date"})}),shouldHighlight:k,disabled:e,tooltipLabel:(0,b.jsx)(d().sA,{id:"profileSettings.accountSecuritySection.passkeySetting.tooltip",defaultMessage:"Your organization requires you to use SAML for authentication."}),disableTooltip:!e,customButton:M}),(0,b.jsx)(m().A,{rootStateMachine:x,settingsStateMachine:v,totpStateMachine:w,smsStateMachine:A,backupCodesStateMachine:j})]})}},865464:(e,t,s)=>{s.d(t,{L:()=>_});var i=s(296540),n=()=>s(920198),o=()=>s(907258),a=()=>s(20022),r=()=>s(484714),d=()=>s(590526),l=()=>s(406094),c=()=>s(842599),u=()=>s(748902),p=()=>s(69708),g=()=>s(534177),m=()=>s(848259),h=()=>s(769864),f=()=>s(384944),S=()=>s(72234),y=()=>s(687601),b=()=>s(752860),x=()=>s(547149),v=()=>s(347306),w=()=>s(963550),A=()=>s(165358),j=()=>s(94701),M=()=>s(702723),k=s(474848);function C({spaceStore:e}){const t=(0,p().tz)(),[s,n]=function(e){const[t,s]=(0,i.useState)(!1),n=(0,i.useRef)(void 0),o=(0,i.useCallback)((()=>{s(!0),void 0!==n.current&&clearTimeout(n.current),n.current=setTimeout((()=>{s(!1)}),e)}),[e]);return(0,i.useEffect)((()=>()=>{void 0!==n.current&&clearTimeout(n.current)}),[]),[t,o]}(3e3),o=(0,i.useCallback)((()=>{"undefined"!=typeof Notification?(new Notification(t.formatMessage(I.notificationTitle),{body:t.formatMessage(I.notificationBody)}),n()):A().log({level:"error",from:"SendTestNotificationSetting",type:"NotificationApiUnavailable",error:{message:"window.Notification is unavailable in this environment."}})}),[t,n]);return(0,k.jsx)(M().A,{spaceStore:e,type:"custom",title:(0,k.jsx)(w().A,{target:"send_test_notification"}),caption:(0,k.jsx)(v().A,{target:"send_test_notification"}),customButton:(0,k.jsx)(l().A,{size:"lg",onClick:o,iconLeading:s?{icon:j().checkmarkFillIcon,size:"xs"}:void 0,children:(0,k.jsx)(p().sA,{...s?I.buttonLabelSent:I.buttonLabel})}),disableSettingsItemClick:!0})}const I=(0,p().YK)({buttonLabel:{id:"notificationSettings.sendTestNotification.buttonLabel",defaultMessage:"Send test notification"},buttonLabelSent:{id:"notificationSettings.sendTestNotification.buttonLabelSent",defaultMessage:"Sent"},notificationTitle:{id:"notificationSettings.sendTestNotification.notificationTitle",defaultMessage:"Test notification from Notion"},notificationBody:{id:"notificationSettings.sendTestNotification.notificationBody",defaultMessage:"Notifications are working!"}});function _({target:e}){const t=(0,r().v3)(),{desktopAppId:s}=(0,r().Y0)(),A=(0,n().L)(),j=(0,d().O$)(o().AppStoreSidebarSpaceViewStore),I=(0,d().K8)((()=>{var t,s,i,n;switch(e){case"notify_mobile":case"notify_desktop":case"notify_email":case"notify_email_always":return(null==j||null===(t=j.getKeyStore(e))||void 0===t?void 0:t.getValue())||!1;case"notify_email_digest":return(null==j||null===(s=j.getSettingsStore())||void 0===s||null===(s=s.getKeyStore(e))||void 0===s?void 0:s.getValue())||!1;case"disable_ai_meeting_notes_audio_process_detection_notification":return(null==j?void 0:j.isAiMeetingNotesAudioProcessDetectionNotificationEnabled())??!0;case"disable_ai_meeting_notes_upcoming_meeting_notification":return(null==j?void 0:j.isAiMeetingNotesUpcomingMeetingNotificationEnabled())??!0;case"notify_home_digest_email":return(null==j||null===(i=j.getSettingsStore())||void 0===i||null===(i=i.getKeyStore(e))||void 0===i?void 0:i.getValue())??(null==j||null===(n=j.getSettingsStore())||void 0===n||null===(n=n.getKeyStore("notify_email_digest"))||void 0===n?void 0:n.getValue())??!1;case"marketing_emails":case"notify_slack":case"desktop_badge":case"notify_slack_mention":case"notify_slack_all_activity":case"notify_discord_enabled":case"notify_discord":case"allow_discord_ai_usage":case"send_test_notification":return!1;default:(0,g().HB)(e)}}),[j,e]),_=(0,i.useCallback)((()=>{if(j){const s=!I;"notify_email_digest"===e?S().T$({environment:t,newValue:s}):"notify_home_digest_email"===e?S().gI(t,s):"disable_ai_meeting_notes_audio_process_detection_notification"===e?S().AC(t,!s,"settings"):"disable_ai_meeting_notes_upcoming_meeting_notification"===e?S().Tj(t,!s,"settings"):x().createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",environment:t,canUndo:!0,perform:t=>{f().zv({store:j,data:{[e]:s},transaction:t})}}),"notify_slack"!==e&&"marketing_emails"!==e&&"desktop_badge"!==e&&"disable_ai_meeting_notes_audio_process_detection_notification"!==e&&"disable_ai_meeting_notes_upcoming_meeting_notification"!==e&&"notify_discord_enabled"!==e&&"allow_discord_ai_usage"!==e&&"notify_discord"!==e&&"send_test_notification"!==e&&m().DN(t,{is_on:s,target:e})}}),[j,I,e,t]),T=async()=>{const e=await h().callApi({eventName:"getAuthorizedEmailPreferenceCenterLink",environment:t,data:{}});if(e&&"success"===e.type&&e.data.preferenceCenterLink)return m().iE(t),(0,b().L)({environment:t,url:e.data.preferenceCenterLink});{const e=await(0,y().k_)(t),s=(0,c().j5)(e);return m().iE(t),(0,b().L)({environment:t,url:s})}},P=()=>{null!==a().Ht&&void 0!==a().Ht&&a().Ht.openExternalUrl&&a().Ht.openExternalUrl(`x-apple.systempreferences:com.apple.preference.notifications?id=${s}`)};return"marketing_emails"===e?(0,k.jsx)(M().A,{spaceStore:A,type:"custom",title:(0,k.jsx)(w().A,{target:e}),caption:(0,k.jsx)(v().A,{target:e}),customButton:(0,k.jsx)(l().A,{size:"lg",onClick:T,iconLeading:{icon:u().arrowDiagonalUpRightFillSmallIcon,size:"xs"},children:(0,k.jsx)(p().sA,{id:"notificationSettings.marketingEmails.manageSettingsButton",defaultMessage:"Manage settings"})}),disableSettingsItemClick:!0}):"desktop_badge"===e?(0,k.jsx)(M().A,{spaceStore:A,type:"custom",title:(0,k.jsx)(w().A,{target:e}),caption:(0,k.jsx)(v().A,{target:e}),customButton:(0,k.jsx)(l().A,{size:"lg",onClick:P,iconLeading:{icon:u().arrowDiagonalUpRightFillSmallIcon,size:"xs"},children:(0,k.jsx)(p().sA,{id:"notificationSettings.desktopBadge.manageSettingsButton",defaultMessage:"Manage in System Settings"})}),disableSettingsItemClick:!0}):"send_test_notification"===e?(0,k.jsx)(C,{spaceStore:A}):(0,k.jsx)(M().A,{spaceStore:A,title:(0,k.jsx)(w().A,{target:e}),caption:(0,k.jsx)(v().A,{target:e}),type:"toggle",isOn:I,onToggle:_})}},874099:(e,t,s)=>{s.d(t,{M:()=>C});s(898992),s(581454),s(908872);var i=()=>s(651220),n=s(296540),o=()=>s(590526),a=()=>s(401497),r=()=>s(741615),d=()=>s(420802),l=()=>s(807449),c=()=>s(98126),u=()=>s(631524),p=()=>s(378815),g=()=>s(100622),m=()=>s(284371),h=()=>s(493552),f=()=>s(373009),S=()=>s(617668),y=()=>s(69708),b=()=>s(347930),x=()=>s(406999),v=()=>s(314907),w=()=>s(789180),A=s(474848);function j({spaceStore:e}){const t=(0,a().IS)((()=>({row:{display:"flex",alignItems:"stretch",boxShadow:`inset 0 -1px 0 ${g().Tj.border.primary}`,height:42}})),[]),s=(0,o().K8)((()=>e.id),[e]),i=(0,v().E)({spaceId:s}),r=(0,w().k4)({spaceStore:e}),d=(0,n.useMemo)((()=>(0,x().nc)()),[]),l=(0,A.jsx)("div",{style:t.row,children:(0,A.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:(0,A.jsxs)(u().p,{style:{height:"100%",display:"flex",flexDirection:"row",flex:1,gap:10,paddingInlineStart:12,borderRadius:0},children:[(0,A.jsx)(f().E,{shape:"pill",iconLeading:S().plusIcon,colorPalette:"blue"}),(0,A.jsx)(h().D,{styleKey:"bodyRegular",children:(0,A.jsx)(y().sA,{defaultMessage:"Invite teammate",id:"peopleSectionMembersTab.addMember"})})]})})});return(0,A.jsx)(b().H,{targetStore:e,spaceStore:e,permissionsInviteStore:d,disabled:!r,isSubscribed:i,upgradeButtonName:"space_permission_settings_invite_teammate_button",shouldGrow:!1,origin:l,analyticsFrom:"space_permission_settings_invite_teammate_button",membersOnly:!1})}var M=()=>s(807778);const k=32;function C(e){const{columns:t,listSource:s,transformRow:i,estimatedRowHeight:r,renderEmpty:l,sort:u,onSortChange:p,allowHorizontalScroll:m=!1,multiselect:h,memberCount:f,spaceStore:S}=e,y=(0,o().K8)((()=>e.rows??(null==s?void 0:s.rowsStore.state.rows)),[e.rows,s]),b=(0,n.useMemo)((()=>{const e=f??(null==y?void 0:y.length);return e?`${r*e+k}px`:"100vh"}),[r,f,y]),x=(0,a().IS)((()=>({container:{height:b,minHeight:"84px",maxHeight:"450px",width:"100%",display:"flex",flexDirection:"column",minWidth:N(t)},headerRow:{display:"flex",position:"relative",boxShadow:`\n\t\t\t\t\tinset 0 1px 0 ${g().Tj.border.primary},\n\t\t\t\t\tinset 0 -1px 0 ${g().Tj.border.primary}\n\t\t\t\t`},loadingContainer:{display:"flex",justifyContent:"center",alignItems:"center",paddingTop:8},horizontalScrollContainer:{position:"relative",width:"100%",height:"100%",overflowX:"auto"},multiselectCheckbox:{alignSelf:"center",color:g().Tj.selectLightGray[300],opacity:null!=h&&h.header.isDisabled?.5:1,marginInlineStart:R/2}})),[t,null==h?void 0:h.header.isDisabled,b]),v=(0,n.useCallback)((e=>{const t=e.id===(null==u?void 0:u.by)&&!u.asc;p&&p({by:e.id,asc:t})}),[u,p]),w=(0,A.jsxs)("div",{style:x.container,children:[(0,A.jsxs)("div",{style:x.headerRow,children:[h?(0,A.jsx)(d().S,{style:x.multiselectCheckbox,disabled:h.header.isDisabled,checked:h.header.isSelected,onClick:()=>h.header.onClick(),size:D,tapArea:{size:30}}):void 0,t.map((e=>(0,A.jsx)(I,{column:e,sort:u,onSortableColumnClick:v},`header_${e.id}`)))]}),void 0===y?(0,A.jsx)("div",{style:x.loadingContainer,children:(0,A.jsx)(c().k,{})}):0===y.length&&l?l():(0,A.jsx)(_,{columns:t,rows:y,listSource:s,estimatedRowHeight:r,transformRow:i,multiselect:h,memberCount:f,spaceStore:S})]});return m?(0,A.jsx)("div",{style:x.horizontalScrollContainer,children:w}):w}function I({column:e,sort:t,onSortableColumnClick:s}){const i=(0,a().IS)((()=>({cellContainer:{...E(e.widthData),display:"flex",alignItems:"center",height:k,...e.border&&{boxShadow:`inset calc(var(--direction, 1) * -1px) 0 0 ${g().Tj.border.primary}`}},cell:{display:"flex",alignItems:"center",padding:e.headerCellPadding},text:{fontSize:m().J.UISmall.desktop,fontWeight:m().Wy.regular,color:g().Tj.text.secondary},sortButton:{paddingInlineStart:6,paddingInlineEnd:6,marginInlineStart:-6,marginInlineEnd:-6},sortIcon:{fill:g().Tj.text.secondary,marginInlineStart:4}})),[e.widthData,e.headerCellPadding,e.border]),n=(0,A.jsx)("div",{style:i.text,children:e.headerTitle});return(0,A.jsx)("div",{style:i.cellContainer,children:(0,A.jsx)("div",{style:i.cell,children:e.sortable?(0,A.jsxs)(u().p,{size:"xs",style:i.sortButton,onClick:()=>s(e),children:[n,(null==t?void 0:t.by)===e.id?(0,A.jsx)(l().I,{icon:p().arrowStraightDownFillIcon,size:"xxs",style:{...i.sortIcon,...t.asc&&{transform:"rotate(180deg)"}}}):void 0]}):n})})}function _(e){const{columns:t,rows:s,listSource:a,estimatedRowHeight:d,transformRow:l,multiselect:c,memberCount:u,spaceStore:p}=e,g=n.useRef(null),m=(0,i().Te)({count:s.length,getScrollElement:()=>g.current,estimateSize:()=>d,overscan:10}),h=m.getVirtualItems();(0,n.useEffect)((()=>{!async function(){const e=h[h.length-1];null!=a&&a.rowsStore.state.hasMore&&(null==e?void 0:e.index)>=s.length-1&&await a.loadMore()}()}),[a,s.length,h]);const f=(0,r()._3)({spaceId:null==p?void 0:p.id}),S=(0,o().K8)((()=>(0,M().vj)(f)),[f]),y=u&&u<4&&S;return(0,A.jsxs)("div",{ref:g,style:{flex:"1 1 0",overflowY:"auto",overflowX:"hidden",position:"relative"},children:[(0,A.jsx)("div",{style:{height:m.getTotalSize(),width:"100%",position:"relative"},children:h.map((e=>(0,A.jsx)("div",{style:{position:"absolute",top:0,insetInlineStart:0,width:"100%",transform:`translateY(${e.start}px)`},"data-index":e.index,ref:m.measureElement,children:(0,A.jsx)(T,{columns:t,row:s[e.index],transformRow:l,multiselect:c})},String(e.key))))}),y&&p?(0,A.jsx)(A.Fragment,{children:Array.from({length:4-(u??0)}).map(((e,t)=>(0,A.jsx)(j,{spaceStore:p},t)))}):null]})}function T({row:e,columns:t,transformRow:s,multiselect:i}){const n=(0,a().IS)((()=>({container:{display:"flex",height:"100%",alignItems:"stretch",boxShadow:`inset 0 -1px 0 ${g().Tj.border.primary}`},multiselectCheckbox:{alignSelf:"center",color:g().Tj.selectLightGray[300],opacity:null!=i&&i.header.isDisabled?.5:1,marginInlineStart:R/2}})),[null==i?void 0:i.header.isDisabled]),r=(0,o().K8)((()=>s(e)),[s,e]);return void 0===r?null:(0,A.jsxs)("div",{style:n.container,children:[i?(0,A.jsx)(d().S,{style:n.multiselectCheckbox,disabled:i.row.getDisabledState(r),checked:i.row.getSelectedState(r),onClick:()=>i.row.onClick(r),size:D,tapArea:{size:30}}):void 0,t.map((e=>(0,A.jsx)(P,{row:r,column:e},`cell_${r.id}_${e.id}`)))]})}function P({row:e,column:t}){const s=(0,a().IS)((()=>({cellContainer:{...E(t.widthData),display:"flex",alignItems:"center",...t.border&&{boxShadow:`inset calc(var(--direction, 1) * -1px) 0 0 ${g().Tj.border.primary}`}},cell:{minWidth:B(t.widthData),maxWidth:t.widthData.maxWidth,padding:t.cellPadding}})),[t.widthData,t.border,t.cellPadding]);return(0,A.jsx)("div",{style:s.cellContainer,children:(0,A.jsx)("div",{style:s.cell,children:t.renderCell(e)})})}const R=24,D=14;function N(e){return e.reduce(((e,t)=>e+B(t.widthData)+R),0)}function B(e){return"minWidth"in e?e.minWidth:e.width}function E(e){let t;return t="width"in e?{width:e.width,maxWidth:null==e?void 0:e.maxWidth}:{width:`${e.widthPercent}%`,minWidth:e.minWidth,maxWidth:null==e?void 0:e.maxWidth},{...t,paddingInlineStart:R/2,paddingInlineEnd:R/2}}},881738:(e,t,s)=>{s.d(t,{b:()=>h,l:()=>f});var i=()=>s(314529),n=()=>s(907258),o=()=>s(314709),a=()=>s(675133),r=()=>s(792057),d=()=>s(243020),l=()=>s(634596),c=()=>s(129286),u=()=>s(769864),p=()=>s(496414),g=()=>s(384944);const m=(0,s(69708).YK)({deletingAccount:{id:"accountActions.deletingAccount.loadingMessage",defaultMessage:"Deleting your account…"},noUserError:{id:"accountActions.deletingAccount.noUserToDeleteMessage",defaultMessage:"No account to delete."}});function h(e){const{userStore:t,data:s,transaction:i}=e,n={};"name"in s&&s.name&&(n.name=s.name),"profilePhoto"in s&&(n.profile_photo=s.profilePhoto),0!==Object.keys(n).length&&g().zv({store:t,data:n,transaction:i})}async function f(e){p().m({message:m.deletingAccount});const t=e.currentUser.id,{currentUserRootStore:s,currentUserStore:g}=n().default.state;if(!s||!g||!t)return p().V(),void r().f1(a().A.formatMessage(m.noUserError));(0,i().DO_NOT_USE_trackLegacy)(e,"delete_user");const h=await u().callApi({eventName:"deleteUser",environment:e,data:{}});if("success"===h.type)await c().transactionQueue.clearForUser(t),l().Yq({environment:e,userId:t,logoutOrigin:d().d.DeleteAccount});else{const e=a().A.getIntl();r().f1((0,o().H)(e,h))}p().V()}},890856:(e,t,s)=>{s.d(t,{t:()=>i});const i=(0,s(340498).xh)("googleGemini",{default:{loader:()=>s.e(19365).then(s.bind(s,965670))}})},910609:(e,t,s)=>{s.d(t,{o:()=>a});var i=()=>s(484714),n=()=>s(590526);const o=new(s(62175).U)(((e,{spaceId:t})=>`${e.currentUser.id}:${t}`),(async(e,{spaceId:t})=>{const s=await e.api.callCellCompatibleApi({eventName:"getOrGenerateInviteLinkCode",environment:e,data:{spaceId:t},cellNavigation:{cellId:void 0,spaceId:t}});if("success"===s.type&&s.data.inviteLinkCode)return s.data.inviteLinkCode}));function a({spaceId:e}){const t=(0,i().v3)();return(0,n().K8)((()=>{if(e)return o.getData(t,{spaceId:e})}),[t,e])}s(852832).exposeDebugValue("InviteLinkCodeStore",o)},933266:(e,t,s)=>{s.d(t,{h:()=>i});const i=(0,s(340498).xh)("checkmarkShield",{default:{loader:()=>s.e(6855).then(s.bind(s,15936))},small:{loader:()=>s.e(6855).then(s.bind(s,105062))},fill:{loader:()=>s.e(6855).then(s.bind(s,681242))},fillSmall:{loader:()=>s.e(6855).then(s.bind(s,452745))}},["checkmark","shield","protect","secure","validate"])},939583:(e,t,s)=>{s.d(t,{A:()=>E});var i=s(296540),n=()=>s(920198),o=()=>s(933922),a=()=>s(314709),r=()=>s(826292),d=()=>s(484714),l=()=>s(590526),c=()=>s(107975),u=()=>s(882722),p=()=>s(388926),g=()=>s(807449),m=()=>s(31511),h=()=>s(406094),f=()=>s(302501),S=()=>s(94701),y=()=>s(808936),b=s(474848);const x={viewBox:"0 0 20 20",fittedViewBox:"0 0 20 20",svg:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("g",{clipPath:"url(#clip0_14275_138)",children:[(0,b.jsx)("path",{d:"M15.241 7.125H3.015a.625.625 0 0 0-.625.625v4.5c0 .345.28.624.625.625h13.97c.345 0 .624-.28.624-.625V9.622l1.25-1.25v3.878c0 1.035-.84 1.875-1.875 1.875H3.014A1.875 1.875 0 0 1 1.14 12.25v-4.5c0-1.036.84-1.875 1.875-1.875h13.48z"}),(0,b.jsx)("path",{d:"M5.063 9.2a.875.875 0 1 1-.001 1.75.875.875 0 0 1 0-1.75m3.251 0a.875.875 0 1 1-.001 1.75.875.875 0 0 1 0-1.75m3.251 0a.875.875 0 1 1-.001 1.75.875.875 0 0 1 0-1.75m7.391-4.224a.617.617 0 0 1 .868 0 .617.617 0 0 1 0 .868v.011l-4.52 4.52a.7.7 0 0 1-.31.187l-.735.228c-.145.05-.29-.094-.248-.25l.227-.733a.9.9 0 0 1 .187-.31z"})]}),(0,b.jsx)("defs",{children:(0,b.jsx)("clipPath",{id:"clip0_14275_138",children:(0,b.jsx)("path",{d:"M0 0h20v20H0z"})})})]})},v=(0,s(340498).wt)("passwordField",x,"default");var w=()=>s(560686),A=()=>s(69708),j=()=>s(100622),M=()=>s(806080),k=()=>s(284371),C=()=>s(278768),I=()=>s(769864),_=()=>s(398194),T=()=>s(274602),P=()=>s(461857),R=()=>s(471511),D=()=>s(318575),N=()=>s(101919),B=()=>s(702723);function E({mfaStatus:e,isError:t,samlEnforced:s,isEducationPlan:o,hasPassword:a,onReloadSettings:r,email:l}){const c=(0,d().v3)(),u=(0,A().tz)(),p=(0,i.useRef)(),g=(0,n().L)();(0,i.useEffect)((()=>{if("on"===e&&void 0===p.current){const e=new(P().q)(c),t=new(D().r);p.current=new(D().U)(t,e)}}),[c,e]);const m=(0,i.useCallback)((()=>function(e,t,s){"on"===t?_().A.setState({open:!0,verifyIdentity:!0,onCancel:()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.exit()}}):(C().d7(e),_().A.setState({open:!0,setNewPassword:!0,isSet:!1,password:"",repeatPassword:""}))}(c,e,p)),[c,e,p]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(B().A,{spaceStore:g,type:"custom",title:(0,b.jsx)(A().sA,{id:"profileSettings.accountSecuritySection.passwordSetting.label",defaultMessage:"Password"}),caption:(0,b.jsx)(L,{hasPassword:a,isError:t,samlEnforced:s,isEducationPlan:o}),customButton:(0,b.jsx)(h().A,{size:"lg",style:{marginTop:12,marginBottom:4},disabled:s,onClick:m,children:a?(0,b.jsx)(A().sA,{id:"passwordSetting.changePasswordButton.label",defaultMessage:"Change password"}):(0,b.jsx)(A().sA,{id:"passwordSetting.setPasswordButton.label",defaultMessage:"Add password"})}),disabled:s}),(0,b.jsx)(ie,{hasPassword:a,intl:u,onReloadSettings:r,isEducationPlan:o,email:l,mfaStatus:e,settingsStateMachineRef:p})]})}function O(e){return{display:e?"inherit":"none",marginTop:10,textAlign:"center",color:j().oZ.red,fontSize:k().J.UISmall.desktop}}function q(){return(0,b.jsx)(A().sA,{id:"passwordSettings.passwordModal.educationPlanGuidelines",defaultMessage:"If you lose access to your school email address, you’ll be able to log in using your password."})}function U(e,t){return!e&&t}function L({isError:e,samlEnforced:t,isEducationPlan:s,hasPassword:i}){return e?(0,b.jsx)(A().sA,{id:"passwordSettings.passwordSetError.message",defaultMessage:"Your password cannot be set at this time. Please try again later."}):t?(0,b.jsx)(A().sA,{id:"passwordSettings.passwordManagedThroughSAMLProvider.message",defaultMessage:"Your password is managed through your SAML single sign-on Provider."}):s?(0,b.jsx)(q,{}):i?(0,b.jsx)(A().sA,{id:"passwordSettings.changePassword.message",defaultMessage:"Change your password to login to your account."}):(0,b.jsx)(A().sA,{id:"passwordSettings.setPassword.message",defaultMessage:"Set a permanent password to login to your account."})}function V(e){(_().A.isSetNewPasswordModal()||_().A.isRemovePasswordModal())&&_().A.setState({..._().A.state,oldPassword:e.target.value,alert:void 0})}function F(){(_().A.isSetNewPasswordModal()||_().A.isRemovePasswordModal())&&_().A.setState({..._().A.state,oldPassword:"",alert:void 0})}function z(e){_().A.isSetNewPasswordModal()&&_().A.setState({..._().A.state,password:e.target.value,alert:void 0})}function G(){const{onCancel:e}=_().A.state;_().A.reset(),e&&e()}function K(){_().A.isSetNewPasswordModal()&&_().A.setState({..._().A.state,password:"",repeatPassword:"",alert:void 0})}function W(e){_().A.isSetNewPasswordModal()&&_().A.setState({..._().A.state,repeatPassword:e.target.value,alert:void 0})}function H(){_().A.isSetNewPasswordModal()&&_().A.setState({..._().A.state,repeatPassword:"",alert:void 0})}function $(){_().A.setState({open:!0,removePassword:!0,isSuccess:!1,oldPassword:""})}function Y(e){if(_().A.isSetNewPasswordModal()){const{password:t,repeatPassword:s}=_().A.state;t&&s&&t!==s&&_().A.setState({..._().A.state,alert:e.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordMismatchError",defaultMessage:"Your new password does not match."})})}}async function Q(e,t,s){if(!_().A.isRemovePasswordModal())return;const{oldPassword:i}=_().A.state;if(C().T8(s),!i)return void _().A.setState({..._().A.state,alert:e.formatMessage({id:"passwordSettings.removePasswordModal.oldPasswordNotEnteredError",defaultMessage:"Please enter your current password."})});const n=await I().callApi({eventName:"setPassword",environment:s,data:{oldPassword:i,clearPassword:!0}});if("success"===n.type)t(),_().A.isRemovePasswordModal()&&_().A.setState({..._().A.state,isSuccess:!0,oldPassword:"",alert:void 0});else{const t=(0,a().H)(e,n);_().A.setState({..._().A.state,alert:t||e.formatMessage({id:"passwordSettings.removePasswordModal.message",defaultMessage:"Error removing password. Please try again later."})})}}function Z({isEducationPlan:e}){const t=(0,l().K8)((()=>_().A.isPasswordSetModal()),[]),s=(0,l().O$)(_().A);if(!t)return null;const{oldPassword:i}=s,n=void 0===i?(0,b.jsx)(A().sA,{id:"passwordSettings.passwordUpdatedModal.passwordSetSuccessModal.title",defaultMessage:"Your password has been set"}):(0,b.jsx)(A().sA,{id:"passwordSettings.passwordUpdatedModal.passwordUpdatedModal.title",defaultMessage:"Your password has been saved"}),o=e?(0,b.jsx)(A().sA,{id:"passwordSettings.passwordUpdateSuccessModal.educationPlan.header",defaultMessage:"You’ll be able to log in, even if you lose access to your school email address."}):(0,b.jsx)(A().sA,{id:"passwordSettings.passwordUpdateSuccessModal.header",defaultMessage:"We’ll ask for this password when you log in to your account."});return(0,b.jsx)(T().A,{title:n,header:o,icon:(0,b.jsx)(g().I,{icon:S().checkmarkFillIcon,size:"xl",colorVariant:"primary"}),onDismiss:G})}function X({isEducationPlan:e,mfaStatus:t,onReloadSettings:s}){const i=(0,A().tz)(),n=(0,d().v3)(),o=(0,l().K8)((()=>_().A.isRemovePasswordModal()),[]),a=(0,l().O$)(_().A);if(!o)return null;const{oldPassword:r,alert:c}=a,u=(0,b.jsx)(A().sA,{id:"passwordSettings.removePasswordModal.title",defaultMessage:"Remove password for temporary login codes?"}),p=(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(A().sA,{id:"passwordSettings.removePasswordModal.header",defaultMessage:"You’ll receive a link and login code via email when you try to login."}),e?(0,b.jsxs)(b.Fragment,{children:[" ",(0,b.jsx)(A().sA,{id:"passwordSettings.removePasswordModal.educationPlanWarning.message",defaultMessage:"If you lose access to your school email, you’ll be unable to log back into Notion."})]}):void 0,"on"===t?(0,b.jsxs)(b.Fragment,{children:[" ",(0,b.jsx)(A().sA,{id:"passwordSettings.removePasswordModal.removeMfaWarning.message",defaultMessage:"<boldtext>2-step verification will also be removed if you continue.</boldtext>",values:{boldtext:e=>(0,b.jsx)("span",{style:{fontWeight:k().Wy.semibold},children:e})}})]}):void 0]}),h={text:(0,b.jsx)(A().sA,{id:"passwordSettings.removePasswordModal.continueButton.label",defaultMessage:"Continue"}),onClick:()=>Q(i,s,n),isRed:!0},S=[{text:(0,b.jsx)(A().sA,{id:"passwordSettings.removePasswordModal.keepUsingPasswordButton.label",defaultMessage:"Keep using password"}),onClick:G,type:"button",view:"plain"}];return(0,b.jsxs)(T().A,{title:u,header:p,icon:(0,b.jsx)(g().I,{icon:y().paperPlaneIcon,size:"xl",colorVariant:"primary"}),onDismiss:G,primaryAction:h,secondaryActions:S,containerStyles:{width:350,padding:24},children:[(0,b.jsx)(N().A,{hasMarginTop:!0,children:(0,b.jsx)(A().sA,{id:"passwordSettings.removePasswordModal.passwordInput.label",defaultMessage:"Enter your current password"})}),(0,b.jsx)(m().A,{type:"password",value:r,onChange:V,showClearButton:!0,onClearButtonClick:F,placeholder:i.formatMessage({id:"passwordSettings.removePasswordModal.currentPasswordInput.placeholder",defaultMessage:"Current password"}),focusInitial:!0,autoComplete:"current-password"}),(0,b.jsx)(f().A,{isMultiline:!0,style:O(c),children:c})]})}function J(){if(!(0,l().K8)((()=>_().A.isRemovePasswordSuccessModal()),[]))return null;const e=(0,b.jsx)(A().sA,{id:"passwordSettings.removePasswordSuccessModal.title",defaultMessage:"Password removed"}),t=(0,b.jsx)(A().sA,{id:"passwordSettings.removePasswordSuccessModal.header",defaultMessage:"To log into your account, we’ll send you a temporary login code to your email."});return(0,b.jsx)(T().A,{title:e,header:t,icon:(0,b.jsx)(g().I,{icon:S().checkmarkFillIcon,size:"xl",colorVariant:"primary"}),onDismiss:G})}async function ee(e,t,s,i){if(!_().A.isSetNewPasswordModal())return;const{oldPassword:n,password:o,repeatPassword:d}=_().A.state;let l;if(t&&!n)l=s.formatMessage({id:"passwordSettings.changePasswordModal.oldPasswordMissingError",defaultMessage:"Please enter your old password."});else if(o){const e=(0,w().ZK)(o);e.success?d?o!==d&&(l=s.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordsMismatchError",defaultMessage:"Your passwords do not match."})):l=s.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordNotRepeatedError",defaultMessage:"Please repeat your new password."}):l=function(e,t){const s=r().K[e.type];return s?t.formatMessage(s):t.formatMessage({id:"passwordSettings.genericPasswordSaveError",defaultMessage:"Error saving password. Please try again later."})}(e.reason,s)}else l=s.formatMessage({id:"passwordSettings.changePasswordModal.passwordNotEnteredError",defaultMessage:"Please enter a password."});if(l)return void _().A.setState({..._().A.state,alert:l});const c=await I().callApi({eventName:"setPassword",environment:e,data:{oldPassword:n,newPassword:o}});if("success"===c.type)i(),_().A.setState({..._().A.state,isSet:!0});else{const e=(0,a().H)(s,c);_().A.setState({..._().A.state,alert:e})}}function te({hasPassword:e,intl:t,onReloadSettings:s,isEducationPlan:n,email:o}){const a=(0,d().v3)(),[r,c]=i.useState(!1),u=(0,i.useCallback)((async()=>{if(!r){c(!0);try{await ee(a,e,t,s)}finally{c(!1)}}}),[a,e,t,s,r]),h=(0,l().K8)((()=>_().A.isSetNewPasswordModal()?_().A.state:null),[]);if(null===h)return null;const{password:S,repeatPassword:y,oldPassword:x,alert:w}=h,j=e?(0,b.jsx)(A().sA,{id:"profileSettings.changePasswordModal.title",defaultMessage:"Change password"}):(0,b.jsx)(A().sA,{id:"profileSettings.setPasswordModal.title",defaultMessage:"Set a password"}),M=(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(A().sA,{id:"passwordSettings.passwordModal.passwordGuidelines",defaultMessage:"Use a password at least 15 letters long, or at least 8 characters long with both letters and numbers."}),n?(0,b.jsxs)(b.Fragment,{children:[" ",(0,b.jsx)(q,{})]}):void 0]}),k=(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(N().A,{children:(0,b.jsx)(A().sA,{id:"passwordSettings.passwordModal.newPasswordInput.label",defaultMessage:"Enter a new password"})}),(0,b.jsx)(m().A,{type:"password",value:S,onChange:z,showClearButton:!0,onClearButtonClick:K,placeholder:t.formatMessage({id:"passwordSettings.passwordModal.newPasswordInput.placeholder",defaultMessage:"New password"}),focusInitial:!e,onBlur:()=>Y(t),autoComplete:"new-password"}),(0,b.jsx)(p().A,{size:10,isHidden:!0}),(0,b.jsx)(N().A,{children:(0,b.jsx)(A().sA,{id:"passwordSettings.changePasswordModal.confirmPasswordInput.label",defaultMessage:"Confirm your new password"})}),(0,b.jsx)(m().A,{type:"password",value:y,onChange:W,showClearButton:!0,onClearButtonClick:H,placeholder:t.formatMessage({id:"passwordSettings.passwordModal.confirmPasswordInput.placeholder",defaultMessage:"Confirm password"}),onBlur:()=>Y(t),autoComplete:"new-password"})]}),C=(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m().A,{style:{display:"none"},type:"text",value:o,autoComplete:"username",disabled:!0}),(0,b.jsx)(N().A,{children:(0,b.jsx)(A().sA,{id:"passwordSettings.passwordModal.currentPasswordInput.label",defaultMessage:"Enter your current password"})}),(0,b.jsx)(m().A,{type:"password",value:x,onChange:V,showClearButton:!0,onClearButtonClick:F,placeholder:t.formatMessage({id:"passwordSettings.passwordModal.currentPasswordInput.placeholder",defaultMessage:"Current password"}),focusInitial:!0,autoComplete:"current-password"}),(0,b.jsx)(p().A,{size:10,isHidden:!0}),k]}),I={text:e?(0,b.jsx)(A().sA,{id:"passwordSettings.passwordModal.changePasswordButton.label",defaultMessage:"Change password"}):(0,b.jsx)(A().sA,{id:"passwordSettings.passwordModal.setPasswordButton.label",defaultMessage:"Set a password"}),onClick:u},P=[{text:(0,b.jsx)(A().sA,{id:"passwordSettings.passwordModal.removePasswordButton.label",defaultMessage:"Remove password"}),onClick:$,type:"button",view:"plain"}];return(0,b.jsxs)(T().A,{title:j,header:M,icon:(0,b.jsx)(g().I,{icon:v,size:"xl",colorVariant:"primary"}),onDismiss:G,primaryAction:I,secondaryActions:U(n,e)?P:void 0,containerStyles:{width:350,padding:24},children:[e?C:k,(0,b.jsx)(f().A,{isMultiline:!0,style:O(w),children:w})]})}function se({settingsStateMachineRef:e}){const t=(0,l().K8)((()=>_().A.isVerifyIdentityWithMfaModal()),[]);return(0,i.useEffect)((()=>{t&&void 0!==e.current&&e.current.settingsConfirmIdentityForPasswordSetting()})),t&&void 0!==e.current?(0,b.jsx)(R().A,{settingsStateMachine:e.current,onDismiss:G,onStartSMS:M().lQ,onStartTOTP:M().lQ,onStartBackupCodes:M().lQ}):null}function ie({hasPassword:e,intl:t,onReloadSettings:s,isEducationPlan:n,email:a,mfaStatus:r,settingsStateMachineRef:d}){const p=(0,l().K8)((()=>_().A.state.open),[]);return(0,b.jsx)(c().a,{open:p,onDismiss:G,className:u().l0W,preventHideChildrenWhileOpening:!0,render:()=>(0,b.jsx)(o().A,{capture:!0,allowEsc:!0,render:()=>(0,b.jsxs)(i.Fragment,{children:[(0,b.jsx)(te,{hasPassword:e,intl:t,onReloadSettings:s,isEducationPlan:n,email:a}),(0,b.jsx)(Z,{isEducationPlan:n}),(0,b.jsx)(X,{isEducationPlan:n,mfaStatus:r,onReloadSettings:s}),(0,b.jsx)(se,{settingsStateMachineRef:d}),(0,b.jsx)(J,{})]})})})}},944027:(e,t,s)=>{s.d(t,{WO:()=>p,_V:()=>g,hK:()=>m});var i=()=>s(907258),n=()=>s(710515),o=()=>s(869558),a=()=>s(854150),r=()=>s(3167),d=()=>s(100875),l=()=>s(547149),c=()=>s(710857),u=()=>s(162674);function p(e){const{environment:t,currentSpaceViewStore:s,...i}=e;if(!s.getModel())return;const n=!(0,c().x)(s)[e.feature];l().createAndCommit({userAction:"userHomeActions.toggleHomeFeature",environment:t,canUndo:!0,perform:t=>{l().applyOperation({store:s,operation:{pointer:s.pointer,path:["settings","personal_home","enabled_features"],command:"update",args:{[e.feature]:n}},transaction:t})}}),(0,u().f_)({environment:t,show:n,...i})}function g({environment:e,option:t,from:s,userAction:n}){const o=i().default.state.sidebarSpaceViewStore;if(!o)return!1;const a=o.getOnAppStartStore().getValue();return l().createAndCommit({userAction:n,environment:e,canUndo:!0,perform:e=>{l().applyOperation({store:o,operation:{pointer:o.pointer,path:["settings","on_app_start"],command:"set",args:t},transaction:e})}}),(0,d().cq)({spaceView:o.getModel(),preference:t}),(0,u().lr)({environment:e,oldValue:a,newValue:t,from:s}),!0}function m(e){const{environment:t,selectedStore:s,spaceViewStore:i,collectionContextStore:d}=e,c=d.collectionViewStore(),p=d.collectionStore(),g=d.collectionViewBlockStore();if(!(p&&c&&g&&i))return;const m=(0,n().r)(i),h=s.table===a().yK?m.indexOf(s)+1:0,f=s.table===a().yK?s.id:void 0;l().createAndCommit({environment:t,userAction:"PersonalHomeTrendingPanel.setCollectionViewSourceTeamId",canUndo:!0,perform:e=>{l().applyOperation({store:c,operation:{pointer:{id:c.id,table:o().Gy},path:["format","collection_view_source","teamId"],command:"set",args:f},transaction:e}),(0,r().d)({environment:t,collectionViewBlockStore:g,collectionViewStore:c,collectionStore:p,collectionContextStore:d,isFullScreen:!1,isRootChild:!1,isInPeekRenderer:!1,viewsModuleContext:void 0})}}),(0,u().AP)({environment:t,teamId:f,index:h})}},946144:(e,t,s)=>{s.d(t,{JZ:()=>ce,Vr:()=>le});var i=()=>s(907258),n=()=>s(206267),o=()=>s(848538),a=()=>s(69708),r=()=>s(966505),d=()=>s(769864),l=()=>s(496414),c=()=>s(579627),u=()=>s(507379),p=()=>s(680977),g=()=>s(680074),m=()=>s(404141),h=()=>s(547149),f=(s(944114),s(581454),s(296540),()=>s(590526)),S=()=>s(401497),y=()=>s(609679),b=()=>s(394888),x=()=>s(849255),v=()=>s(124617),w=()=>s(741615),A=()=>s(699143),j=()=>s(89002),M=()=>s(416783),k=()=>s(493552),C=()=>s(869190),I=()=>s(165358),_=()=>s(575287),T=()=>s(951105),P=()=>s(340498),R=()=>s(182183),D=()=>s(798880),N=()=>s(795523),B=()=>s(100622),E=()=>s(241021),O=()=>s(838239),q=()=>s(453697),U=()=>s(232930),L=()=>s(477293),V=()=>s(789586),F=()=>s(334992),z=()=>s(611308),G=s(474848);function K(e){const{onFinished:t,userId:s,userContractionMessages:n,isCustomGettingStartedOwner:o}=e,r=(0,S().IS)((()=>({customIcon:{alignSelf:"center",flexGrow:0},removeIconInCornerOfUserAvatar:{background:"white",borderRadius:"50%",position:"absolute",bottom:0,insetInlineEnd:-5},dashedEllipse:{width:56,height:56,position:"absolute",top:-4,insetInlineStart:-4},customIconWrapper:{position:"relative",width:"fit-content",margin:"0 auto"},wrapper:{marginTop:4},descriptionBox:{borderRadius:6,textAlign:"center",background:B().Tj.background.secondary,padding:"16px 12px"},warningBox:{borderRadius:6,textAlign:"center",background:B().Tj.red.background.primary,padding:"16px 12px"}})),[]),d=(0,a().tz)(),l=(0,f().O$)(i().AppStoreSidebarSpaceStore),c=(0,f().K8)((()=>{if(!l)return;const e=x().L.createChildStore(l,{id:s,table:D().oo});return e.isDefined()&&!e.getIsDeleted()?e:void 0}),[l,s]),u=(0,V().P)({name:"admin_transfer_private_content",spaceId:null==l?void 0:l.id,userId:s}),{name:p,spaceName:g}=(0,f().K8)((()=>({name:null==c?void 0:c.getDisplayName(d),spaceName:null==l?void 0:l.getName()})),[c,d,l]),m=(0,w().lh)({spaceId:null==l?void 0:l.id}),h=(0,w().a9)(m),y="on"===(0,L().r)("adoption_custom_workspace_getting_started_page");return(0,G.jsx)(b().s,{areaConstraint:{width:{type:"min",length:406},height:{type:"unlimited",scroll:"allow"}},isOpen:!0,onDismiss:()=>t(!1),animateSizeTransition:!0,render:()=>(0,G.jsx)(j().t,{header:(0,G.jsx)(O().Y,{iconAndTitle:(0,G.jsxs)(A().Y1,{align:"center",gap:8,direction:"vertical",children:[(0,G.jsx)(q().A,{userStore:c,size:48,style:r.customIcon,borderStyle:"solid"}),(0,G.jsx)(k().D,{styleKey:"titleSmSemibold",style:{textAlign:"center"},children:Q(g,p)})]})}),footer:(0,G.jsx)(E().a,{layout:"vertical",primaryButtons:[{buttonType:"destructive",label:Y(p),onClick:()=>t(!0)}],secondaryButtons:[{buttonType:"outline",label:(0,G.jsx)(a().sA,{id:"contractionConfirmation.manageMembers",defaultMessage:"Manage members"}),onClick:()=>t(!1)}]}),children:(0,G.jsxs)(A().Y1,{direction:"vertical",gap:12,children:[(0,G.jsxs)(A().Y1,{style:r.descriptionBox,gap:12,children:[(0,G.jsx)(k().D,{styleKey:"bodyMedium",children:(0,G.jsx)(a().sA,{id:"contractionConfirmation.description.withName",defaultMessage:"They have been an active Notion member. {hasTransferrableContent, select, true {} other {Removing them may cause loss of private pages.}}",values:{hasTransferrableContent:u}})}),l&&h?(0,G.jsx)($,{spaceStore:l,billingData:h,userContractionMessages:n}):void 0]}),y&&o?(0,G.jsxs)(A().Y1,{style:r.warningBox,gap:12,children:[(0,G.jsx)(k().D,{styleKey:"bodyMedium",children:(0,G.jsx)(a().sA,{id:"contractionConfirmation.subtitle.customGettingStartedOwner",defaultMessage:"The custom Getting Started page for this workspace is in their private pages."})}),(0,G.jsx)(k().D,{styleKey:"captionRegular",colorVariant:"secondary",style:{padding:"0px 12px"},children:(0,G.jsx)(a().sA,{id:"contractionConfirmation.description.customGettingStartedOwner",defaultMessage:"Removing them may result in the loss of the custom Getting Started page. New workspace members will have Notion’s default Getting Started page installed until a new custom page is set."})})]}):void 0]})})})}function W(){return null}function H(e){return e>2e3?(0,G.jsx)(a().sA,{id:"contractionConfirmation.amount.2000",defaultMessage:"2000+"}):e>1500?(0,G.jsx)(a().sA,{id:"contractionConfirmation.amount.1500",defaultMessage:"1500+"}):e>1e3?(0,G.jsx)(a().sA,{id:"contractionConfirmation.amount.1000",defaultMessage:"1000+"}):e>500?(0,G.jsx)(a().sA,{id:"contractionConfirmation.amount.500",defaultMessage:"500+"}):e>250?(0,G.jsx)(a().sA,{id:"contractionConfirmation.amount.250",defaultMessage:"250+"}):e>100?(0,G.jsx)(a().sA,{id:"contractionConfirmation.amount.100",defaultMessage:"100+"}):e>75?(0,G.jsx)(a().sA,{id:"contractionConfirmation.amount.75",defaultMessage:"75+"}):e>50?(0,G.jsx)(a().sA,{id:"contractionConfirmation.amount.50",defaultMessage:"50+"}):e>25?(0,G.jsx)(a().sA,{id:"contractionConfirmation.amount.25",defaultMessage:"25+"}):e>10?(0,G.jsx)(a().sA,{id:"contractionConfirmation.amount.10",defaultMessage:"10+"}):e>5?(0,G.jsx)(a().sA,{id:"contractionConfirmation.amount.5",defaultMessage:"5+"}):(0,G.jsx)(a().sA,{id:"contractionConfirmation.amount.2",defaultMessage:"2+"})}function $({spaceStore:e,billingData:t,userContractionMessages:s}){const i=(0,f().K8)((()=>e.getMemberCountFromPublicSpaceData()),[e]),n=(0,w().Q7)(e.id,t,i??0),o=(0,N().yB)({logFunction:I().log.bind(I()),spaceId:e.id,billingData:t})??n,r=(0,F().h)(e),d=n-1<o;if(t.subscription&&r&&d){const e=(0,C().W_)(t.subscription.currentPeriodEnd.toMillis(),"month_day_long",y().locale);return(0,G.jsx)(k().D,{styleKey:"captionRegular",colorVariant:"secondary",style:{padding:"0px 12px"},children:(0,G.jsx)(a().sA,{id:"contractionConfirmation.billing.message",defaultMessage:"Your workspace is currently billed for {paidSeats, plural, one {# seat} other {# seats}}. Your bill will remain the same until it is adjusted at the start of your next renewal: {nextBillingDate}. <learnmorelink>Learn more</learnmorelink>",values:{paidSeats:n,nextBillingDate:e,learnmorelink:e=>(0,G.jsx)(M().V,{href:(0,U().x)("guides.billing"),external:!0,children:e})}})})}return(0,G.jsxs)("div",{style:{paddingTop:12,paddingInlineEnd:0,paddingBottom:0,paddingInlineStart:12},children:[(0,G.jsx)(W,{}),(0,G.jsx)(A().Y1,{gap:16,children:s.map((({icon:e,message:t},s)=>(0,G.jsxs)(A().Y1,{direction:"horizontal",align:"center-left",gap:6,children:[(0,G.jsx)(e,{width:P().Ev.sm}),(0,G.jsx)(k().D,{styleKey:"bodyRegular",colorVariant:"primary",children:t})]},s)))})]})}function Y(e){return e&&e.length<16?(0,G.jsx)(a().sA,{id:"contractionConfirmation.remove.withName",defaultMessage:"Remove {name}",values:{name:e}}):(0,G.jsx)(a().sA,{id:"contractionConfirmation.remove",defaultMessage:"Remove member"})}function Q(e,t){return t?(0,G.jsx)(a().sA,{id:"contractionConfirmation.title.withName",defaultMessage:"Remove {name} from {space}?",values:{name:t||"this member",space:e||"this workspace"}}):(0,G.jsx)(a().sA,{id:"contractionConfirmation.title",defaultMessage:"Are you sure you want to remove this member?"})}async function Z(e,t,s){let i=[],n={};if(s){const o=await d().callApi({eventName:"getUserContractionData",environment:e,data:{userId:t,spaceId:s}});"success"===o.type&&(n=o.data,i=function(e){const t=[];if(!("l28_active"in e))return t;const s=Number(e.num_pages_created);s>1&&t.push({icon:T().k,message:(0,G.jsx)(a().sA,{id:"contractionConfirmation.numberOfPages",defaultMessage:"Created {numberOfPages} pages",values:{numberOfPages:H(s)}})});const i=Number(e.num_comments);i>1&&t.push({icon:_()._,message:(0,G.jsx)(a().sA,{id:"contractionConfirmation.numberOfComments",defaultMessage:"Made {numberOfComments} comments",values:{numberOfComments:H(i)}})});const n=Number(e.l28_active);return n>1&&t.push({icon:R().notionTintableIcon,message:(0,G.jsx)(a().sA,{id:"contractionConfirmation.activity",defaultMessage:"Visited {activeDays} days in the past month",values:{activeDays:H(n)}})}),t}(n))}return(0,v().u)(e,{name:"contraction_contextual_confirmation_shown",args:{userContractionData:n}}),await z().L.showModal((s=>{const o=t=>{t?(0,v().u)(e,{name:"contraction_contextual_confirmation_confirmed",args:{userContractionData:n}}):(0,v().u)(e,{name:"contraction_contextual_confirmation_cancelled",args:{userContractionData:n}}),s(t)};return{dismissUsing:"closeButtonOrEscape",modalStyle:{minWidth:406,padding:20},onDismiss:()=>o(!1),content:(0,G.jsx)(K,{onFinished:o,userId:t,userContractionMessages:i,isCustomGettingStartedOwner:n.owns_custom_getting_started_page??!1})}}))}var X=()=>s(604995);var J=()=>s(687681),ee=()=>s(496603),te=()=>s(231127),se=()=>s(227358),ie=()=>s(49210),ne=()=>s(775471),oe=()=>s(841101);async function ae(e){const{environment:t,contractionSurveyId:s}=e;(0,v().u)(t,{name:"contraction_survey_opened",args:{contractionSurveyId:s}});const i=await async function(e){const{iconGroup:t,options:s,title:i,description:n}=e;return await ie().T.showAsyncModal((e=>{const o=new(oe().a);return o.setOptions(s),(0,G.jsx)(b().s,{isOpen:e.isOpen,onDismiss:e.onDismiss,onClosed:e.onClosed,areaConstraint:{width:{type:"min",length:406},height:{type:"unlimited",scroll:"allow"}},render:()=>(0,G.jsx)(j().t,{header:(0,G.jsx)(O().Y,{iconAndTitle:(0,G.jsx)("div",{style:{padding:"0 24px"},children:(0,G.jsx)(se().Z,{iconGroup:t,title:i})}),description:n}),footer:(0,G.jsx)(E().a,{layout:"vertical",primaryButtons:[{label:(0,G.jsx)(a().sA,{id:"contractionSurvey.continue",defaultMessage:"Continue"}),onClick:()=>e.resolve(o.toSurveyResult())}],secondaryButtons:[{buttonType:"dismiss"}]}),children:(0,G.jsx)(ne().B,{store:o})})})}))}({iconGroup:J().u,title:(0,G.jsx)(a().sA,{id:"contractionSurvey.title",defaultMessage:"Why are you removing this member from your workspace?"}),description:(0,G.jsx)(a().sA,{id:"contractionSurvey.description",defaultMessage:"We’d love your input to make Notion better"}),options:re()});return i?(0,v().u)(t,{name:"contraction_survey_completed",args:{contraction_survey_id:s,reasons:i.reasons,reason_indexes:i.reasonIndexes,reason_other:i.customTextByReason.other}}):(0,v().u)(t,{name:"contraction_survey_dismissed",args:{contractionSurveyId:s}}),i}function re(){return[...(0,ee().k4)([te().V.noLongerNeedAccess,te().V.noLongerWorkTogether,te().V.notUsingEnough,te().V.switching,te().V.switchingToAnotherWorkspace,te().V.tooExpensive]),te().V.other]}var de=()=>s(224701);async function le({environment:e,userId:t,currentMembershipType:s,spaceStore:a,userSettingStore:d}){let l,c;if(function(){const e=i().default.state.currentUserSettingsStore;if(null==e||!e.isDefined())return!1;const t=e.getSettings();return null==t||!t.seen_contraction_survey_at||Date.now()>(0,X().K1)({date:null==t?void 0:t.seen_contraction_survey_at,daysToAdd:1})}()&&(c=n().JW(),l=await ae({environment:e,contractionSurveyId:c}),!l))return;await(async()=>await Z(e,t,a.id))()&&(await(async i=>{await ce({userId:t,newMembershipType:"none",currentUserSettingsStore:d,spaceStore:a,environment:e});const n=(0,o().DR)(s);r().ej(e,{member_user_id:t,member_role:n,contraction_survey_id:i,is_space:!0,domainType:(0,g().FX)(),new_workspace_member_count:-1})})(c),l&&function(e){const t=i().default.state.currentUserSettingsStore;t&&h().createAndCommit({userAction:"saveContractionSurveySeenDate",environment:e,canUndo:!0,perform:e=>{(0,p().m)({userSettingsStore:t,transaction:e,data:{seen_contraction_survey_at:(new Date).getTime()}})}})}(e))}async function ce({userId:e,newMembershipType:t,currentUserSettingsStore:s,spaceStore:i,environment:n}){const o=n.currentUser.id;if(e!==o||"none"!==t)!function(){const e=(0,a().YK)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updating…"}});l().m({message:e.updatingPermissions})}(),"none"===t?(await d().callApi({eventName:"removeUsersFromSpace",environment:n,data:{userIds:[e],spaceId:i.id,removePagePermissions:!0,revokeUserTokens:!1}}),await de().nO({environment:n,spaceStore:i})):h().createAndCommit({userAction:"contractionActions.handleMemberPermissionRoleChange",environment:n,canUndo:!0,perform:s=>c().yG({environment:n,spaceStore:i,actors:[{type:"user",membershipType:t,userId:e,inviteId:void 0}],transaction:s})}),l().V();else{await u().ev({environment:n,spaceId:i.id,userSettingsStore:s})&&(r().KX(n,{invite_origin:"workspace_remove_member",domainType:(0,g().FX)(),new_workspace_member_count:-1,new_workspace_member_ids:[o]}),m().Ay.setState({...m().Ay.state,open:!1}))}}},955302:(e,t,s)=>{s.d(t,{J:()=>n,y:()=>i});class i extends(()=>s(757695))().Store{getInitialState(){return{step:"rootUninitialized"}}}class n extends(()=>s(658921))()._{constructor(e){super(e,"root")}rootShowSettings(e){const{refresh:t,startConfirmIdentity:s}=e;if(this.checkStep("rootSettings")){if(!t)return}else this.store.setState({step:"rootSettings"});s()}rootStartBackupCodesFromSettings(e){this.checkStep("rootSettings")&&(this.store.setState({step:"rootBackupCodes",source:"settings"}),e())}rootStartTOTP(e){this.checkStep("rootSettings")&&(this.store.setState({step:"rootTOTP"}),e())}rootShowBackupCodesFromTOTP(){this.checkStep("rootTOTP")&&this.store.setState({step:"rootBackupCodes",source:"totp"})}rootStartSMS(e){this.checkStep("rootSettings")&&(this.store.setState({step:"rootSMS"}),e())}rootShowBackupCodesFromSMS(){this.checkStep("rootSMS")&&this.store.setState({step:"rootBackupCodes",source:"sms"})}rootEndBackupCodes(e){const t=this.checkStep("rootBackupCodes");if(t)switch(t.source){case"settings":return this.store.setState({step:"rootSettings"}),e.showSettings();case"sms":return this.store.setState({step:"rootSMS"}),e.completeSMS();case"totp":return this.store.setState({step:"rootTOTP"}),e.completeTotp();default:(0,s(534177).HB)(t.source)}}rootCloseSettings(e){e(),this.store.setState({step:"rootUninitialized"})}exit(e){this.store.setState({step:"rootUninitialized"}),e()}}},959098:(e,t,s)=>{s.d(t,{A:()=>p});s(898992),s(354520),s(581454),s(908872),s(737550);var i=s(296540),n=()=>s(726637),o=()=>s(574359),a=()=>s(302501),r=()=>s(69708),d=()=>s(496603),l=()=>s(278768),c=()=>s(44590),u=s(474848);const p=function(e){var t;const p=(0,s(484714).v3)(),g=(0,r().tz)(),m=(0,s(59226).X)("reauth_on_user_and_workspace_deletion"),[h,f]=(0,i.useState)(!1),S=(0,s(106702).$)(),y=(0,s(590526).K8)((()=>(null==S?void 0:S.getEmail())||""),[S]),b=(0,s(401497).IS)((()=>({spaceNameList:{listStyle:"none",maxHeight:200,overflowY:"auto",margin:0,padding:"12px 14px",display:"flex",flexDirection:"column",gap:6,border:`1px solid ${s(100622).Tj.border.secondary}`},spaceItem:{display:"flex",alignItems:"center",lineHeight:"120%",width:"100%",borderRadius:6,paddingTop:4,paddingBottom:4,gap:12,height:44}})),[]),x=(0,s(920198).L)(),v=Boolean(null===(t=e.userEmailDomainSettings)||void 0===t?void 0:t.isDomainVerified),{loading:w,organizationsInfo:A}=(0,s(223969).q)(),j=null==A?void 0:A.some((e=>e.isUserLastOwner)),M=e.disabled||v||j,k=v?(0,u.jsx)(r().sA,{defaultMessage:"Your organization has disabled account deletion.",id:"profileSettings.accountDeleteButton.disabledForManagedUser.tooltip"}):j?(0,u.jsx)(r().sA,{defaultMessage:"You are the last owner of an organization. Add a new organization owner to enable this action.",id:"profileSettings.accountDeleteButton.disabledForLastOrgOwner.tooltip"}):w?(0,u.jsx)(r().sA,{defaultMessage:"Loading account details...",id:"profileSettings.accountDeleteButton.loading.tooltip"}):null,C=(0,i.useCallback)((async()=>{const{currentUserStore:e,currentUserRootStore:t}=s(907258).default.state;if(!e||!t)return;if(!e.isDefined())return;const i=d().oE(t.getSpaceViewStores().map((e=>e.getSpaceStore())));if(!s(983610).subscriptionDataStoreInstance.state)return;const m=i.filter((e=>{const t=e.canAdmin()&&1===e.getOwnerCountFromPublicSpaceData();return!(0,s(322769).zL)({space:e.getModel(),spaceRole:e.getRole(),otherAdminWithAccess:!t})})),h=d().oE(m.map((t=>{if(t)return{key:t.id,render:()=>(0,u.jsxs)("div",{style:b.spaceItem,children:[(0,u.jsx)(s(187820).B6,{disabled:!0,icon:t.getIcon(),iconRecordCategory:"workspace",isEmptyPage:!1,title:(0,o().G)(p,t),size:32,isLarge:!0}),(0,u.jsxs)("div",{style:{minWidth:0},children:[(0,u.jsx)(a().A,{className:"notranslate",children:(0,c().rK)({environment:p,spaceStore:t,userId:e.id})}),(0,u.jsx)(a().A,{isSmall:!0,children:(0,c().rY)(p,g,t).subtitle})]})]})}}))),f=d().oE(m.map((e=>({id:e.id,name:(0,o().G)(p,e)}))));l().X0(p);const S=m.reduce(((e,t)=>e+(t.getMemberCountFromPublicSpaceData()??0)-1),0),y=m.filter((e=>(e.getMemberCountFromPublicSpaceData()??0)>1)).length;await s(920093).h({title:(0,u.jsx)(r().sA,{id:"profileSettings.deleteAccountConfirmationDialog.title",defaultMessage:"Delete your entire account permanently?"}),message:f.length>0?(0,u.jsx)(r().sA,{id:"profileSettings.deleteAccountConfirmationDialog.additionalWorkspaces.warning",defaultMessage:"This action cannot be undone. Your entire account will be permanently deleted and you will be removed from all shared workspaces. Additionally, the following {count, plural, one {workspace} other {workspaces}} you own will be permanently deleted, removing any other members and their access:",values:{count:f.length}}):(0,u.jsx)(r().sA,{id:"profileSettings.deleteAccountConfirmationDialog.noAdditionalWorkspaces.warning",defaultMessage:"This action cannot be undone. Your entire account will be permanently deleted and you will be removed from all shared workspaces."}),content:(0,u.jsxs)(u.Fragment,{children:[h&&h.length>0?(0,u.jsx)("div",{style:{overflow:"hidden",borderRadius:6},children:(0,u.jsx)("ul",{style:b.spaceNameList,children:h.map((({key:e,render:t})=>(0,u.jsx)("div",{children:t()},e)))})}):null,(0,u.jsx)(s(493552).D,{styleKey:"bodyRegular",colorVariant:"primary",children:(0,u.jsx)(r().sA,{id:"profileSettings.deleteAccountConfirmationDialog.prompt",defaultMessage:"Please type in your email to confirm."})})]}),acceptLabel:0===f.length?(0,u.jsx)(r().sA,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountButton.label",defaultMessage:"Permanently delete account"}):n().A.isMobile?(0,u.jsx)(r().sA,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountAndWorkspacesButtonMobile.label",defaultMessage:"{numberOfWorkspaces, plural, one {Delete account & 1 workspace} other {Delete account & {numberOfWorkspaces} workspaces}}",values:{numberOfWorkspaces:f.length}}):(0,u.jsx)(r().sA,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountAndWorkspacesButton.label",defaultMessage:"{numberOfWorkspaces, plural, one {Permanently delete account and 1 workspace} other {Permanently delete account and {numberOfWorkspaces} workspaces}}",values:{numberOfWorkspaces:f.length}}),requiredInputValue:e.getEmail(),secondStageModal:S>0?{title:(0,u.jsx)(r().sA,{id:"profileSettings.deleteAccountFinalConfirmationDialog.title",defaultMessage:"Are you sure?"}),message:y>0?(0,u.jsx)(r().sA,{id:"profileSettings.deleteAccountFinalConfirmationDialog.additionalWorkspaces.warning",defaultMessage:"This action cannot be undone. Your account is the only admin of {countSpacesToBeDeletedWithOtherMembers} {countSpacesToBeDeletedWithOtherMembers, plural, one {workspace} other {workspaces}} that {countSpacesToBeDeletedWithOtherMembers, plural, one {contains} other {contain}} {affectedMemberCount, plural, one {another member} other {other members}}. Deleting your account will permanently remove all members from and delete {numberOfWorkspaces} {count, plural, one {workspace} other {workspaces}}.",values:{countSpacesToBeDeletedWithOtherMembers:y,count:f.length,affectedMemberCount:S,numberOfWorkspaces:f.length}}):(0,u.jsx)(r().sA,{id:"profileSettings.deleteAccountFinalConfirmationDialog.noAdditionalWorkspaces.warning",defaultMessage:"This action cannot be undone. Your entire account will be permanently deleted and you will be removed from all shared workspaces."})}:void 0})&&(l().FZ(p),s(404141).Ay.reset(),s(881738).l(p))}),[p,g,b]),I=(0,i.useCallback)((async()=>{m?f(!0):await C()}),[m,C]),_=(0,i.useCallback)((async()=>{f(!1),await C()}),[C]),T=(0,i.useCallback)((()=>{f(!1)}),[]);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(s(661537).P,{open:h,userEmail:y,onAuthorized:_,onDismiss:T,useCase:"delete_user"}),(0,u.jsx)(s(702723).A,{type:"custom",spaceStore:x,useFlexboxStyle:!n().A.isMobile,title:(0,u.jsx)(r().sA,{id:"profileSettings.accountDeletionSetting.title",defaultMessage:"Delete my account"}),caption:(0,u.jsx)(r().sA,{id:"manageActiveSessions.accountDeletionSetting.label",defaultMessage:"Permanently delete the account and remove access from all workspaces."}),isCritical:!0,customButton:n().A.isMobile?(0,u.jsx)("div",{style:{marginTop:12},children:(0,u.jsx)(s(406094).A,{size:"lg",colorPalette:"red",onClick:I,disabled:M,disabledFeedback:M,children:(0,u.jsx)(r().sA,{id:"profileSettings.deleteMyAccount.button.label",defaultMessage:"Delete my account"})})}):(0,u.jsx)(s(718827).Ay,{style:{borderRadius:"0.25em"},onClick:I,disabled:M,disabledFeedback:M,children:(0,u.jsx)(s(807449).I,{icon:s(944924).arrowChevronSingleRightFillIcon,colorVariant:"tertiary"})}),disabled:M,tooltipLabel:k})]})}},963550:(e,t,s)=>{s.d(t,{A:()=>a});s(296540);var i=()=>s(69708),n=()=>s(534177),o=s(474848);function a({target:e}){switch(e){case"notify_mobile":return(0,o.jsx)(i().sA,{defaultMessage:"Mobile push notifications",id:"notificationSettings.mobilePushNotificationSettings.title"});case"notify_desktop":return(0,o.jsx)(i().sA,{id:"notificationSettings.commentsAndMentions.title",defaultMessage:"Comments and mentions notifications"});case"notify_email":return(0,o.jsx)(i().sA,{id:"notificationSettings.productNotifEmails.title",defaultMessage:"Activity in your workspace"});case"notify_email_always":return(0,o.jsx)(i().sA,{id:"notificationSettings.emailAlwaysNotificationSettings.title",defaultMessage:"Always send email notifications"});case"notify_slack":return(0,o.jsx)(i().sA,{id:"notificationSettings.slackNotificationSettings.title",defaultMessage:"Slack notifications"});case"notify_slack_mention":return(0,o.jsx)(i().sA,{id:"notificationSettings.slackMentionNotificationSettings.title",defaultMessage:"Only user or group mentions"});case"notify_slack_all_activity":return(0,o.jsx)(i().sA,{id:"notificationSettings.slackAllActivityNotificationSettings.title",defaultMessage:"Activity in your workspace"});case"notify_email_digest":return(0,o.jsx)(i().sA,{id:"notificationSettings.pageUpdatesNotificationSettings.title",defaultMessage:"Page updates"});case"notify_home_digest_email":return(0,o.jsx)(i().sA,{id:"notificationSettings.homeDigestEmailNotificationSettings.title",defaultMessage:"Workspace digest"});case"marketing_emails":return(0,o.jsx)(i().sA,{id:"notificationSettings.marketingEmails.title",defaultMessage:"Announcements and update emails"});case"desktop_badge":return(0,o.jsx)(i().sA,{id:"notificationSettings.desktopBadge.title",defaultMessage:"Badge icon"});case"send_test_notification":return(0,o.jsx)(i().sA,{id:"notificationSettings.sendTestNotification.title",defaultMessage:"Send test notification"});case"disable_ai_meeting_notes_audio_process_detection_notification":return(0,o.jsx)(i().sA,{id:"notificationSettings.aiMeetingNotesAudioProcessDetectionNotification.title",defaultMessage:"Meeting detection notifications"});case"disable_ai_meeting_notes_upcoming_meeting_notification":return(0,o.jsx)(i().sA,{id:"notificationSettings.aiMeetingNotesUpcomingMeetingNotification.title",defaultMessage:"Scheduled meeting notifications"});case"notify_discord":return(0,o.jsx)(i().sA,{id:"notificationSettings.discordNotificationSettings.title",defaultMessage:"Discord notifications"});case"notify_discord_enabled":return(0,o.jsx)(i().sA,{id:"notificationSettings.discordNotificationEnabledSettings.title",defaultMessage:"Activity in your workspace"});case"allow_discord_ai_usage":return(0,o.jsx)(i().sA,{id:"notificationSettings.discordAiUsageSettings.title",defaultMessage:"Use Notion AI in Discord"});default:(0,n().HB)(e)}}},965511:(e,t,s)=>{s.d(t,{x:()=>h});s(296540);var i=()=>s(401497),n=()=>s(699143),o=()=>s(249046),a=()=>s(265060),r=()=>s(552712),d=()=>s(631524),l=()=>s(493552),c=()=>s(26697),u=()=>s(846523),p=()=>s(69708),g=()=>s(100622),m=s(474848);function h({quantityOfPaidSeats:e,quantityOfSpaceMembers:t,nextBillingDate:s}){const n=(0,i().IS)((()=>({container:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",border:`1px solid ${g().Tj.border.secondary}`,borderRadius:6}})),[]),a=e-t,r=a<0?(0,m.jsx)(p().sA,{id:"spaceSettings.billingBreakdown.seatsTooltipText.gracePeriod",defaultMessage:"At the end of this billing period, you’ll be automatically charged for {difference, plural, one {# new seat} other {# new seats}} (since your current billing period is only for {difference, plural, one {# seat} other {# seats}}). Please ensure that the member list is up-to-date.",values:{difference:Math.abs(a),seats:e}}):a>0?(0,m.jsx)(p().sA,{id:"spaceSettings.billingBreakdown.seatsTooltipText.remainingSeats",defaultMessage:"You can invite {remainingSeats, plural, one {# more member} other {# more members}} without an additional charge, since you’ve already paid for those seats this billing period. You can also purchase more seats.",values:{remainingSeats:a}}):(0,m.jsx)(p().sA,{id:"spaceSettings.billingBreakdown.seatsTooltipText.noSeats",defaultMessage:"All seats are currently filled"});return(0,m.jsxs)("div",{style:n.container,children:[(0,m.jsx)(f,{title:(0,m.jsx)(p().sA,{id:"spaceSettings.billingBreakdown.title.paidSeatsTitle",defaultMessage:"Paid seats"}),titleTooltipContent:(0,m.jsx)(p().sA,{id:"spaceSettings.billingBreakdown.paidSeatsTooltip",defaultMessage:"The number of paid seats in your workspace"}),body:e}),(0,m.jsx)(f,{title:(0,m.jsx)(p().sA,{id:"spaceSettings.billingBreakdown.title.currentMembersTitle",defaultMessage:"Current members"}),titleTooltipContent:r,body:(0,m.jsxs)(o().Ye,{alignItems:"center",gap:4,children:[(0,m.jsx)("span",{children:t}),a<0?(0,m.jsx)("div",{style:{color:"green",fontSize:10},children:"▲"}):a>0?(0,m.jsx)("div",{style:{color:"gray",fontSize:10},children:"▼"}):null]})}),(0,m.jsx)(f,{customStyles:{borderInlineEnd:"none"},title:(0,m.jsx)(p().sA,{id:"spaceSettings.billingBreakdown.title.nextBillingPeriodTitle",defaultMessage:"Next billing period"}),titleTooltipContent:(0,m.jsx)(p().sA,{id:"spaceSettings.billingBreakdown.nextBillingPeriodTooltip",defaultMessage:"You have paid for seats until the next billing period, and you may purchase more before the next billing period"}),body:s})]})}function f({title:e,titleTooltipContent:t,body:s,customStyles:o}){const h=(0,i().IS)((()=>({container:{padding:16,borderInlineEnd:`1px solid ${g().Tj.border.secondary}`,...o},helpIcon:{borderRadius:3,height:"auto",padding:0}})),[o]);return(0,m.jsxs)("div",{style:h.container,children:[(0,m.jsxs)(n().Y1,{direction:"horizontal",align:"center-left",gap:4,style:{marginBottom:4},children:[(0,m.jsx)(l().D,{styleKey:"bodyRegular",colorVariant:"secondary",children:e}),(0,m.jsx)(c().m,{allowHover:!0,textWrap:!0,renderTooltip:e=>(0,m.jsxs)(n().Y1,{width:200,gap:2,style:{whiteSpace:"normal"},...e,children:[t,(0,m.jsx)(r().N,{href:"https://www.notion.so/help/guides/adding-members-admins-and-guests",children:(0,m.jsx)(l().D,{colorVariant:"inverseSecondary",children:(0,m.jsx)(p().sA,{id:"spaceSettings.people.peopleDashboard.clickToLearnMore",defaultMessage:"Click to learn more"})})})]}),render:e=>(0,m.jsx)(d().p,{...e,style:h.helpIcon,className:"tooltip-button",role:"button",href:"https://www.notion.so/help/guides/adding-members-admins-and-guests",children:(0,m.jsx)(a().Q,{iconGroup:u().u,variantName:"small",colorVariant:"tertiary"})})})]}),(0,m.jsx)(l().D,{styleKey:"titleSmMedium",children:s})]})}},984925:(e,t,s)=>{s.d(t,{e:()=>d});s(296540);var i=()=>s(401497),n=()=>s(160432),o=()=>s(493552),a=()=>s(695714),r=s(474848);function d(e){const{title:t,onClick:s,icon:d}=e,l=d||a().personKeyFillIcon,c=(0,i().IS)((()=>({button:{width:"100%",padding:"6px",textAlign:"center"}})),[]);return(0,r.jsx)(n().A,{size:"md",colorPalette:"blue",style:c.button,onClick:s,iconLeading:{icon:l,size:"sm"},children:(0,r.jsx)(o().D,{colorVariant:"inversePrimary",styleKey:"bodySemibold",children:t})})}},991627:(e,t,s)=>{s.d(t,{L:()=>f});var i=s(296540),n=()=>s(314529),o=()=>s(920198),a=()=>s(907258),r=()=>s(484714),d=()=>s(590526),l=()=>s(416783),c=()=>s(69708),u=()=>s(680977),p=()=>s(232930),g=()=>s(547149),m=()=>s(702723),h=s(474848);function f(){const e=(0,r().v3)(),t=(0,d().O$)(a().AppStoreCurrentUserSettingsStore),s=(0,o().L)(),f=(0,d().K8)((()=>{var e;return!0===(null==t||null===(e=t.getSettings())||void 0===e?void 0:e.disable_page_analytics)?"do_not_record":"record"}),[t]),S=(0,i.useCallback)((()=>{const s=!("do_not_record"===f);g().createAndCommit({userAction:"ViewHistorySettings.onSelectOption",environment:e,canUndo:!0,perform:e=>{t&&(0,u().m)({userSettingsStore:t,data:{disable_page_analytics:s},transaction:e})}}),(0,n().DO_NOT_USE_trackLegacy)(e,s?"page_analytics_account_opt_out":"page_analytics_account_opt_in")}),[e,t,f]);return(0,h.jsx)(m().A,{spaceStore:s,title:(0,h.jsx)(c().sA,{id:"viewHistorySettings.title",defaultMessage:"Show my view history"}),caption:(0,h.jsx)(c().sA,{id:"viewHistorySettings.description.message",defaultMessage:"People with edit or full access will be able to see when you’ve viewed a page. <inlinelink>Learn more</inlinelink>.",values:{inlinelink:e=>(0,h.jsx)(l().V,{external:!0,href:(0,p().x)("guides.pageAnalytics"),children:e})}}),type:"toggle",isOn:"record"===f,onToggle:S})}},993342:(e,t,s)=>{s.d(t,{A:()=>h});s(296540);var i=()=>s(920198),n=()=>s(907258),o=()=>s(755531),a=()=>s(484714),r=()=>s(590526),d=()=>s(75435),l=()=>s(69708),c=()=>s(702723),u=()=>s(402411),p=()=>s(944027),g=()=>s(84161),m=s(474848);function h(){const e=(0,a().v3)(),t=(0,i().L)(),s=(0,r().K8)((()=>(0,g().S)()),[]),{isElectron:h}=(0,a().Y0)(),f=(0,r().K8)((()=>{var t,s;return(0,u().Y)(e,{spaceView:null===(t=n().default.state.sidebarSpaceViewStore)||void 0===t?void 0:t.getModel(),space:null===(s=(0,o().S)())||void 0===s?void 0:s.getModel()})}),[e]),S=(0,r().K8)((()=>{var e;return null===(e=d().A.state.preferences)||void 0===e?void 0:e.isTabSpacesEnabled}),[]),y=h?(0,m.jsx)(l().sA,{id:"pageOnAppStoreSetting.desktopDescription.message",defaultMessage:"Choose what to show when opening new windows,{tabGroupsEnabled, select, true { opening new tab groups,} other {}} switching workspaces, or launching app without restoring tabs.",values:{tabGroupsEnabled:S}}):(0,m.jsx)(l().sA,{id:"pageOnAppStoreSetting.description.message",defaultMessage:"Choose what to show when Notion starts or when you switch workspaces."}),b=h?(0,m.jsx)(l().sA,{id:"pageOnAppStoreSetting.title",defaultMessage:"Default page"}):(0,m.jsx)(l().sA,{id:"pageOnAppStoreSetting.title.desktop",defaultMessage:"Open on start"});return(0,m.jsx)(c().A,{spaceStore:t,title:b,caption:y,type:"dropdown",currentOption:f,options:s,onSelectOption:t=>{p()._V({userAction:"NotificationsAndPersonalSettings.PageOnAppStartSetting",environment:e,option:t,from:"user_settings"})}})}}}]);