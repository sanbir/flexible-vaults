"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[42056],{108414:(e,t,n)=>{n.d(t,{A:()=>a});class i extends(()=>n(757695))().Store{getInitialState(){return{open:!1}}}const a=new i},159026:(e,t,n)=>{n.d(t,{Ay:()=>o,NJ:()=>i,d5:()=>a});n(898992),n(354520),n(581454),n(737550);let i=function(e){return e.unselected="unselected",e.workspace_member="workspace_member",e.request_workspace_member="request_workspace_member",e.page_guest="page_guest",e.closed="closed",e}({}),a=function(e){return e[e.closed=0]="closed",e[e.share_page=1]="share_page",e[e.share_workspace=2]="share_workspace",e[e.request_workspace=3]="request_workspace",e}({});class r extends(()=>n(757695))().Store{getInitialState(){return{inviteStage:a.closed,selection:i.workspace_member,order:[i.workspace_member,i.page_guest],invitedUsers:[],invitedEmailToUserIdMap:{},flowId:n(206267).JW()}}startWorkspaceInvite(){this.setState({...this.state,inviteStage:a.share_workspace,order:[i.workspace_member,i.page_guest],selection:i.workspace_member})}startRequestMembership(){this.setState({...this.state,inviteStage:a.request_workspace,order:[i.request_workspace_member,i.page_guest],selection:i.request_workspace_member})}hasGuests(){return this.state.invitedUsers.some((e=>e.isGuest))}getGuestEmails(){return this.state.invitedUsers.filter((e=>e.isGuest)).map((e=>e.email))}}const o=r},316189:(e,t,n)=>{n.d(t,{o:()=>v});n(16280);var i=()=>n(295633),a=()=>n(165358),r=()=>n(179034),o=()=>n(94830),s=()=>n(973647),l=()=>n(534177),c=()=>n(345913),m=()=>n(213477),u=()=>n(966152),d=()=>n(547149),p=()=>n(16205);async function v(e){const{type:t,spaceStore:n,initializeStore:i,teamStore:r}=e;let o;if("inExistingStore"===t){const t=i.isEmptyPage(),n=i.getParentStore();if(await i.waitUntil((()=>i.isDefined())),t&&n&&n.canEdit()&&("block"===n.table||"space"===n.table||"team"===n.table))return async function(e){const{environment:t,item:n,spaceStore:i,initializeStore:r}=e,o=await f(e);try{return await d().createAndCommit({userAction:"createTemplateInstance.deleteCurrentPageStore",environment:t,canUndo:!0,perform:e=>{c().oD({environment:t,blocks:[r],transaction:e,permanentlyDelete:!0})}}).serverCommitResult,o}catch(s){s instanceof Error&&a().log({level:"error",from:"createTemplateInstance",type:"deleteCurrentPageStoreError",error:s,data:{miscDataToConvertToString:{template_id:n.id,template_block_id:n.rootId,target_space_id:i.id,public_template_name:n.name}}})}}({...e,destination:(0,u().LT)(n)});o=(0,u().LT)(i)}else"inTeam"===t?o=(0,u().LT)(r):"inSpace"===t?o=(0,u().LT)(n):(0,l().HB)(t);return f({...e,destination:o})}async function f(e){const{environment:t,item:n,useRecordCache:c,useMinimalTemplates:u,spaceStore:d,from:v,isEmailShared:f,destination:g}=e,S=c&&!u?n.previewRootId:n.rootId,w={id:S,spaceId:n.spaceId},I=new(i().B)(t,{table:r().ev,id:w.id,spaceId:w.spaceId});let _;"onboarding"===v?_="onboarding":"page_template_modal"===v?_="mobile_app":"homepage_team"===v?_="team_home":(0,l().HB)(v);const y=await async function(e){const{environment:t,templateSource:n,sourceBlockId:i,isEmailShared:a}=e,r=await(0,p().oC)(t,i);return{context:"",source:n,isListedTemplate:Boolean(r),isFirstPartyPaidTemplate:void 0!==r&&(0,o().Z1)(r),isEmailShared:a}}({environment:t,templateSource:_,sourceBlockId:S,isEmailShared:f}),b="onboarding"===_,h="mobile_app"===y.source?await(0,m()._3)({environment:t,sourceTemplateBlockStore:I,destination:g,options:{duplicateOnlyCollectionSchema:!1,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0},templateInstallationMetadata:{...y,source:"mobile_app"},from:v}):await(0,m().hh)({environment:t,sourceBlocks:[I],destination:g,options:{duplicateOnlyCollectionSchema:!1,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0},duplicateSubtreeGateName:"duplicate_subtree_template_flows",unlockPage:!0,templateInstallationMetadata:y,shouldUseSynchronousDuplicationAPI:b,from:v,skipUserFacingMessages:!0});if(h&&!s().Q.isFail(h)&&0!==h.value.createdBlocks.length)return h.value.createdBlocks[0];a().log({level:"error",from:"createTemplateInstance",type:"duplicateTemplateError",error:null!=h&&h.error?h.error:new Error("No response"),data:{miscDataToConvertToString:{template_id:n.id,template_block_id:n.rootId,target_space_id:d.id,public_template_name:n.name,from:v}}})}},475355:(e,t,n)=>{n.d(t,{Vs:()=>R,gj:()=>E,hX:()=>D,oH:()=>A,v4:()=>q});n(16280);var i=()=>n(907258),a=()=>n(675133),r=()=>n(711339),o=()=>n(295633),s=()=>n(732810),l=()=>n(723085),c=()=>n(110192),m=()=>n(165358),u=()=>n(416504),d=()=>n(206267),p=()=>n(737188),v=()=>n(179034),f=()=>n(519831),g=()=>n(854150),S=()=>n(468006),w=()=>n(529316),I=()=>n(797573),_=()=>n(201980),y=()=>n(946141),b=()=>n(769864),h=()=>n(45359),T=()=>n(957606),C=()=>n(274511),k=()=>n(632709),U=()=>n(316189),x=()=>n(547149),P=()=>n(108414),M=()=>n(465960);async function E({environment:e,name:t,description:n,icon:a,accessLevel:c,isDefault:m,flowId:u,createTeamHome:d,teamPermissionRole:S,spacePermissionRole:w,members:I,settings:_}){const{sidebarSpaceStore:h,sidebarSpaceViewStore:T}=i().default.getState();if(!h)throw new Error("currentSpaceStore does not exist");if(!T)throw new Error("currentSpaceViewStore does not exist");const C=r().default.mark("client_create_team_latency"),k=h.id,U=await b().callApi({eventName:"createTeam",environment:e,data:{spaceId:k,name:t,description:n,icon:a,isDefault:m,accessLevel:c,teamPermissionRole:S,spacePermissionRole:w,members:I,settings:_}});if("failed"===U.type)return void(0,M().O)(U);const{teamId:x}=U.data,P=l().h.createChildStore(h,{table:g().yK,id:x,spaceId:k});await P.load();const E=P.getSpaceId(),R=P&&E&&{id:P.id,table:f().Vl,spaceId:E},q=P&&R&&s().m.createChildStore(P,R);await(null==q?void 0:q.load());const A=P&&E&&o().B.createChildStore(P,{id:(0,p().t)(P.id),table:v().ev,spaceId:E});return await(null==A?void 0:A.load()),E&&await b().callApi({eventName:"createCollectionViewBlockForPosts",environment:e,data:{teamId:P.id,spaceId:E}}),d&&N({environment:e,teamStore:P,spaceStore:h,spaceViewStore:T}),y()._P(e,{store:P,flowId:u}),r().default.measure(C,{environment:e}),P}function R({environment:e,page:t}){var n;const i=d().JW(),a=(null===(n=t.getParentPointer())||void 0===n?void 0:n.table)!==g().yK?"page_to_team_nested":"page_to_team";y().H8(e,{from:a,flowId:i}),P().A.setState({open:!0,pageStore:t,flowId:i})}async function q({environment:e,page:t,flowId:n,intl:a}){var r;const{accessLevel:o,spacePermissionRole:s,teamPermissionRole:l,members:c}=await(0,T().sy)(t),m=(t.isDefined()?t.getModel().getRenderTitle({intl:a,userTimeZone:(0,u().P)(),getRecordModel:t.getRecordModel}):void 0)??_().q4_(t.getTitleValue()),d=await E({environment:e,name:m,icon:null===(r=t.getIcon())||void 0===r?void 0:r.icon,accessLevel:o,isDefault:!1,description:"",flowId:n,createTeamHome:!1,teamPermissionRole:l,spacePermissionRole:s,members:c});if(!d)return;const{sidebarSpaceViewStore:p}=i().default.state;if(!p)return;const v=await(0,C().U)();x().createAndCommit({userAction:"teamActions.movePageToCreatedTeam",environment:e,canUndo:!0,perform:n=>{v({environment:e,spaceViewStore:p,transaction:n,teamStore:d,blocksToMove:[t],location:{type:"append"}})}}),(0,M().F2)({environment:e,teamId:d.id,tab:k().p.Members,from:"create_team_from_page"}),await new Promise((t=>setTimeout((()=>(0,M().Mh)({teamStore:d,environment:e})),100)))}async function A({environment:e,name:t,description:n,icon:a,flowId:r,trackCreateTeamComplete:o}){const{sidebarSpaceStore:s,sidebarSpaceViewStore:c}=i().default.getState();if(!s)throw new Error("currentSpaceStore does not exist");if(!c)throw new Error("currentSpaceViewStore does not exist");const m=s.id,u=await b().callApi({eventName:"enableTeams",environment:e,data:{spaceId:m,defaultTeamName:t,defaultTeamIcon:a,defaultTeamDescription:n}});if("failed"===u.type)return void(0,M().O)(u);const{teamId:d}=u.data,p=l().h.createChildStore(s,(0,S().uo)(d,m));return await p.load(),N({environment:e,teamStore:p,spaceStore:s,spaceViewStore:c}),y().b0(e,{spaceId:m,store:p,flowId:r}),o&&d&&y()._P(e,{store:p,flowId:r}),p}async function D({environment:e,teamStore:t,from:n,buttonPopupStore:i}){var a;if(!e.currentUser.id)return!1;const r=d().JW(),o=t.isDefault(),s=t.getTeamAccessLevel();if(o)return!1;const l=t.getName(),m=await E({environment:e,name:(0,c().Q)(l||""),description:"",icon:t.getRawIcon(),accessLevel:s,isDefault:o,createTeamHome:!0,teamPermissionRole:null===(a=t.getTeamPermission())||void 0===a?void 0:a.role,spacePermissionRole:t.getSpacePermissionRole(),members:[],settings:t.getSettings(),flowId:r});return!!m&&(y().KK(e,{store:m,from:n}),(0,M().L0)({environment:e,teamStore:m,shouldScroll:!0}),(0,M().F2)({environment:e,teamId:m.id,tab:k().p.General,from:"duplicate_team",buttonPopupStore:i}),new Promise((e=>setTimeout(e,500))).then((()=>{(0,h().jH)(l)})),!0)}async function N(e){const{environment:t,teamStore:n,spaceStore:i,spaceViewStore:r}=e,o=(s=a().A.getIntl(),(0,I().B)(w().w.teamsHomepage,s));var s;return!!(await(0,U().o)({environment:t,item:o,spaceStore:i,spaceViewStore:r,useMinimalTemplates:!1,type:"inTeam",teamStore:n,from:"homepage_team"}))||(m().log({level:"error",from:"teamActions",type:"createHomepageOnTeamCreation-PageNotCreated"}),!1)}},495867:(e,t,n)=>{n.d(t,{BY:()=>I,Lg:()=>_,id:()=>T,nE:()=>C,xi:()=>y});n(944114),n(898992),n(430670),n(581454);var i=()=>n(230711),a=()=>n(755531),r=()=>n(675133),o=()=>n(128933),s=()=>n(878126),l=()=>n(165358),c=()=>n(402390),m=()=>n(68263),u=()=>n(848538),d=()=>n(795523),p=()=>n(769864),v=()=>n(579627),f=()=>n(159026),g=()=>n(615623),S=()=>n(47373),w=()=>n(250064);async function I(e){const{environment:t,spaceStore:n,contextualInviteStore:i}=e;!function(e){const{spaceStore:t,contextualInviteStore:n}=e,i=t.getRole();if(!i||!(0,m().NB)(i))return!1;if(!n.hasGuests())return!1;if(t.getDisableMembershipRequests())return!1;return(0,S().x3)()}({environment:t,spaceStore:n,contextualInviteStore:i})?await async function(e){const{spaceStore:t,contextualInviteStore:n,environment:i}=e,a=t.getRole();if(!a||!(0,m().vp)(a))return!1;if(!n.hasGuests())return!1;return await(0,g().S)(i,{name:"members",spaceId:t.id,userId:t.userId,amount:1})}({environment:t,spaceStore:n,contextualInviteStore:i})?i.startWorkspaceInvite():i.setState({...i.state,inviteStage:f().d5.closed}):i.startRequestMembership()}async function _(e){const{environment:t,spaceStore:n,contextualInviteStore:i,from:a,intl:r}=e,{selection:s,flowId:c}=i.state;if("page_guest"===s||!i.hasGuests())return i.reset(),!1;const{inviteTargets:m,unknownEmails:u}=await b({environment:t,contextualInviteStore:i,spaceStore:n}),d={...i.state};i.reset();const p=await(0,g().S)(t,{name:"non_admin_members",spaceId:n.id,userId:n.userId})?"member":"owner";try{await v().cl({environment:t,spaceStore:n,inviteTargets:m.map((e=>({...e,membershipType:p}))),isOnboarding:!1,invite:{inviteOrigin:a,inviteFlowId:c,disable_invite_email:!0}})}catch(f){return function(e,t){if(0===t.length)return;o().D6({label:e.formatMessage({id:"contextual_invite.contextual_invite_failure",defaultMessage:"{userCount, plural, one {Failed to invite {users} as member} other {Failed to invite {users} as members}}"},{users:T(t,e),userCount:t.length})})}(r,d.invitedUsers),l().log({level:"error",from:"contextualInviteHelpers",type:"inviteMembers.inviteTargets",data:{miscDataToConvertToString:{...d,inviteTargets:m}}}),!1}finally{u.length&&l().log({level:"error",from:"contextualInviteHelpers",type:"inviteMembers.unknownUserId",data:{miscDataToConvertToString:{...d,unknownEmails:u}}})}return!0}async function y(e){const{environment:t,spaceStore:n,originId:i,originType:a,reasonMessage:r,contextualInviteStore:s,intl:c}=e,{selection:m}=s.state;if("page_guest"===m||!s.hasGuests())return s.reset(),!1;const{inviteTargets:u,unknownEmails:d}=await b({environment:t,contextualInviteStore:s,spaceStore:n}),v={...s.state};s.reset();const f=[];try{const e=u.map((e=>p().callApi({eventName:"requestAccess",environment:t,data:{type:"actor-to-space",forActorId:e.value.id,spaceId:n.id,message:r,attributes:{origin_id:i,origin_type:a,origin_table:"share_menu"===a?"block":"space",add_permissions_on_approval:!1}}}).catch((()=>f.push(e)))));await Promise.all(e)}catch(g){return function(e,t){if(0===t.length)return;o().D6({label:e.formatMessage({id:"contextual_invite.request_members_failure",defaultMessage:"Failed to request {users} to become members"},{users:T(t,e)})})}(c,v.invitedUsers),l().log({level:"error",from:"contextualInviteHelpers",type:"requestMembers.inviteTargets",data:{miscDataToConvertToString:{...v,inviteTargetsWithErrors:f}}}),!1}finally{d.length&&l().log({level:"error",from:"contextualInviteHelpers",type:"requestMembers.unknownUserId",data:{miscDataToConvertToString:{...v,unknownEmails:d}}})}return!0}async function b(e){const{environment:t,contextualInviteStore:n,spaceStore:a}=e,{invitedEmailToUserIdMap:r}=n.state,o=[],s=[];for(const c of n.state.invitedUsers){if(!c.isGuest)continue;const e=await h(t,c,r);if(e){var l;const t=null===(l=(0,i().dp)(a,e))||void 0===l?void 0:l.getMembershipType();if(t&&(0,u().MN)(t))continue;o.push({type:"existingUser",value:{id:e,email:c.email,version:1}})}else s.push(c.email)}return{inviteTargets:o,unknownEmails:s}}async function h(e,t,n){const i=await async function(e,t,n){let i=t.id;if(i||(i=n[t.email]),!i){const n=await p().callApi({eventName:"findUser",environment:e,data:{email:t.email}});if("failed"!==n.type){const e=n.data;e.value&&(i=e.value.value.id)}}return i}(e,t,n);if(i)return i;const a=(0,c().H)(r().A.getIntl()),o=await p().callApi({eventName:"createEmailUser",environment:e,data:{email:t.email,preferredLocaleOrigin:"inferred_from_inviter",preferredLocale:a}});return"failed"!==o.type?o.data.userId:void 0}function T(e,t){return(0,w().l)(e.flatMap((e=>e.email||[])))}function C(e,t){var n;const{state:i}=t,r=null===(n=(0,a().S)())||void 0===n?void 0:n.id,o=r?(0,d().AI)(s().T.getData(e,{spaceId:r})):void 0,l=t.getGuestEmails();return{invite_flow_id:i.flowId,user_count:l.length,user_emails:l,invite_space_role_selection:i.selection,is_bot:!1,subscription_tier:o}}},542056:(e,t,n)=>{n.d(t,{Ah:()=>M,D6:()=>P,KW:()=>C,Oo:()=>T,Pp:()=>E,St:()=>x,hQ:()=>q,iS:()=>U,kW:()=>k,l5:()=>h,lf:()=>R});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(803949),n(581454);var i=()=>n(135168),a=()=>n(755531),r=()=>n(242422),o=()=>n(876338),s=()=>n(842599),l=()=>n(68263),c=()=>n(496603),m=()=>n(763824),u=()=>n(579627),d=()=>n(495867),p=()=>n(499764),v=()=>n(743260),f=()=>n(299545),g=()=>n(62368),S=()=>n(106628),w=()=>n(159026),I=()=>n(991249),_=()=>n(475355),y=()=>n(134696),b=()=>n(769864);async function h(e){const{environment:t,targetStore:n,sudoModeStore:i,permissionsInviteStore:a,onInviteStart:r,contextualInviteStore:o,inviteOrigin:c}=e,{tokenQuery:m}=a.state;if((0,s().DT)(m.trim())){const e={type:"newUser",value:{email:m.trim()},source:"email"};v().mQ({target:e,permissionsInviteStore:a})||a.setState({...a.state,inviteTargets:[...a.state.inviteTargets,e],tokenQuery:""})}if(0===a.state.inviteTargets.length)return{success:!0,requestedUserCount:0};null==r||r();const d=a.state,{table:g,inviteRole:S,flowId:w,emailMessage:I}=d;a.reset();const _={inviteFlowId:w,inviteMessage:I,inviteOrigin:c};if("team"===g&&(0,f().$R)(n)){const e=(0,p().Nr)(n,d.inviteTargets);return{success:await u().sQ({environment:t,teamStore:n,inviteTargets:e,inviteRole:S,createNewTeamFlowId:w}),requestedUserCount:0}}if("space"===g&&(0,f().Yu)(n)){const e=await(0,p().Mz)(n,d.inviteTargets),i=await u().cl({environment:t,spaceStore:n,inviteTargets:e.map((e=>({...e,membershipType:S}))),isOnboarding:!1,invite:_});return{success:i.success,requestedUserCount:i.success?Object.keys(i.requestedUsers).length:0}}if(!(0,f().Yu)(n)&&!(0,f().$R)(n)&&(0,l().PW)(S)){const e=(0,p().Nr)(n,d.inviteTargets),a=await u().eP({environment:t,store:n,sudoModeStore:i,inviteTargets:e,inviteRole:S,isOnboarding:!1,invite:_});return a.success&&(null==o||o.setState({...null==o?void 0:o.state,invitedEmailToUserIdMap:a.invitedUsers})),{success:a.success,requestedUserCount:a.success?Object.keys(a.requestedUsers).length:0}}return{success:!0,requestedUserCount:0}}function T(e){e.permissionsInviteStore.setState({...e.permissionsInviteStore.state,modalOpen:!1,flowId:void 0})}function C(e){const{permissionsInviteStore:t,contextualInviteStore:n}=e;if(!n)return;const i=[];t.state.inviteTargets.forEach((e=>{if("newUser"===e.type)i.push({email:e.value.email,isGuest:!0});else if("existingUser"===e.type){const t={...e.value,email:e.value.email,isGuest:"page_guest"===e.membershipType||"none"===e.membershipType};i.push(t)}})),n.setState({...n.state,invitedUsers:i})}async function k(e){const{environment:t,spaceStore:n,targetStore:i,sudoModeStore:a,permissionsInviteStore:r,contextualInviteStore:o,onInviteClick:s,onInviteComplete:l,inviteOrigin:c,intl:m}=e;if(i.getSpaceId()!==n.getSpaceId())return void(null==l||l(!1,0));if((null==o?void 0:o.state.selection)===w().NJ.workspace_member&&(0,g().p)(n)&&!n.isTeamsEnabled()){if(!(await _().oH({environment:t,flowId:r.state.flowId||"",trackCreateTeamComplete:!1})))return;C({permissionsInviteStore:r,contextualInviteStore:o}),await(0,d().Lg)({environment:t,spaceStore:n,contextualInviteStore:o,from:c,intl:m})}else C({permissionsInviteStore:r,contextualInviteStore:o});let u={success:!1,requestedUserCount:0};try{u=await h({environment:t,targetStore:i,sudoModeStore:a,permissionsInviteStore:r,contextualInviteStore:o,onInviteStart:()=>{null==s||s()},inviteOrigin:c})}catch(p){}finally{null==l||l(u.success,u.requestedUserCount)}}async function U(e){const{environment:t,permissionsInviteStore:n,from:a,onClose:r,store:o}=e;await v().iQ({environment:t,permissionsInviteStoreState:n.state,from:a,spaceStore:(0,f().Yu)(o)?o:(0,i().f)(o)})||(n.reset(),null==r||r())}function x(e){const{permissionsInviteStore:t,targetToRemove:n}=e,i=t.state.inviteTargets.filter((e=>e!==n));t.setState({...t.state,inviteTargets:i})}function P(e){const{environment:t,onUpgradeButtonClick:n,upgradeButtonName:i,spaceStore:a}=e;I().K(t,{from:i,upsell:{type:"product",product:"plus",limit:{type:"none"},trialability:"none"},spaceStore:a}),null==n||n()}async function M(e,t){const n=new Set(t),i=Array.from(n).map((async t=>{const n=await b().callApi({eventName:"findUser",environment:e,data:{email:t}});if("success"===n.type){const e=n.data;if(e.value){return{type:"existingUser",value:e.value.value}}}return{type:"newUser",value:{email:t},source:"email"}}));return await Promise.all(i)}async function E(e){const{environment:t,permissionsInviteStore:n,event:i}=e,a=i.target.value,{extractedEmails:r,newInputValue:o}=(0,s().Ct)(a),l=(await M(t,r)).filter((e=>!v().mQ({target:e,permissionsInviteStore:n}))),c=[...n.state.inviteTargets,...l];n.setState({...n.state,inviteTargets:c,inputFocus:"invitee",tokenQuery:o})}function R(e){const{environment:t,newRole:n,permissionsInviteStore:i,spaceStore:a}=e,{state:r}=i;y().Jy(t,{...v().oX(t,r,a),invite_updated_role:v().Y5(n)}),i.setState({...r,inviteRole:n})}async function q(e){var t;const{query:n,environment:i,sectionLimit:s,intl:l,membersOnly:u,importContactType:d,pageContext:p}=e,v=(0,o().$)(p)??(0,a().S)();if(!v)return{inviteUsers:[],inviteGroups:[]};const f=r().default.getConfigKey("search_contacts_timeout","timeoutMs"),{userLimit:g,groupLimit:w,importContactLimit:I}=s,_=await S().T.searchActions.load(),[y,h,{user:T,email:C},k]=await Promise.all([g>0?_.searchSpaceUsers({environment:i,query:n,membersOnly:u,limit:g}):[],w>0?_.searchSpaceGroups({query:n,intl:l}):[],_.searchEmailUser(i,n),I>0?(0,m().nQ)(f,b().callApi({eventName:"searchContacts",environment:i,data:{spaceId:v.id,limit:I,query:n,importContactType:d||"all",includeNonNotionUsers:!u,includeUserId:!0}})):void 0]),U=y.slice(0,g).map((e=>({type:"existingUser",value:e}))),x=h.slice(0,w).map((e=>({type:"group",value:e})));T&&U.unshift({type:"existingUser",value:T}),C&&U.unshift({type:"newUser",value:{email:C},source:"email"});let P=0,M=[];var E;"success"===(null==k||null===(t=k.result)||void 0===t?void 0:t.type)&&(M=k.result.data.contacts.map((e=>({type:"newUser",value:{email:e.email,name:e.name,avatar_url:e.profile_photo,user_id:e.user_id},source:e.type}))),P=(null==k||null===(E=k.result)||void 0===E||null===(E=E.data)||void 0===E?void 0:E.totalCount)??0);return{inviteUsers:c().hS(U,(e=>e.value.email)),inviteGroups:x,importedContacts:M,totalContactsCount:P}}}}]);