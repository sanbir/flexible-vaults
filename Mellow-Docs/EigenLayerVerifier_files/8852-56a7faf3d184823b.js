"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[8852],{3197:(e,t,o)=>{o.d(t,{t:()=>s});var r=o(296540),n=()=>o(183558),i=()=>o(248064),a=()=>o(384130),l=()=>o(937199);function s(e){const{setModuleSelection:t,layoutStore:o}=(0,l().LH)(),s=(0,i().h)(),{dismissTooltip:d}=(0,a().J)();return(0,r.useCallback)((()=>{var r;"form"===(null===(r=o.getModel())||void 0===r?void 0:r.getLayoutType())&&"form_conditional_modules"!==e.area?s({layoutModule:{type:"placeholder",id:(0,n().Ay)()},position:e.afterModuleId?{type:"module_relative",area:e.area,direction:"below",relativeToModuleId:e.afterModuleId}:void 0}):(t({type:"new_module",isDragging:!1,..."views_main_tab_modules"===e.area?{area:"views_main_tab_modules",viewsMainTabId:e.viewsMainTabId}:{area:e.area}}),"page_main"===e.area&&d())}),[o,e,s,t,d])}},30244:(e,t,o)=>{o.d(t,{P:()=>a});var r=()=>o(732810),n=()=>o(898244),i=()=>o(79650);async function a(e){const{environment:t,collectionStore:o,schema:a,property:l,transaction:s,permanentlyDelete:d}=e,u=a[l];if(u)if("relation"===u.type&&n().zO(u)&&u.property&&n().zO(u)!==o.id){const e=new(r().m)(t,n().Nv(u));await e.load(),(0,i().B)({environment:t,collectionStore:o,schema:a,property:l,transaction:s,targetCollectionStore:e,permanentlyDelete:d})}else(0,i().B)({environment:t,collectionStore:o,schema:a,property:l,transaction:s,permanentlyDelete:d})}},102897:(e,t,o)=>{o.d(t,{J:()=>u,Q:()=>d});o(296540);var r=()=>o(242422),n=()=>o(713998),i=()=>o(69708),a=()=>o(680288),l=o(474848);function s(e,t,o){return"1"===e?"relation"===t?o&&!0===o?(0,l.jsx)(i().sA,{defaultMessage:"1 item",id:"database.viewSettings.collectionPropertyLimitHelpers.limitOne.connectedRelation"}):(0,l.jsx)(i().sA,{defaultMessage:"1 page",id:"database.viewSettings.collectionPropertyLimitHelpers.limitOne.relation"}):(0,l.jsx)(i().sA,{defaultMessage:"1 {type}",id:"database.viewSettings.collectionPropertyLimitHelpers.limitOne",values:{type:a().dC[t]}}):"no_limit"===e?(0,l.jsx)(i().sA,{defaultMessage:"No limit",id:"database.viewSettings.collectionPropertyLimitHelpers.noLimit"}):void 0}function d(e,t,o){return{key:e,type:"button",title:s(e,t,o)}}function u(e){const t=r().default.getConfigKey("collection_size_limits","collection_deleted_schema_max_size");return(0,n().Jb)(e,t)}},173215:(e,t,o)=>{o.d(t,{x:()=>s});var r=()=>o(484714),n=()=>o(590526),i=()=>o(401497),a=()=>o(712030),l=()=>o(29554);function s({textStore:e,parentStore:t,spaceId:o,disabled:s=!1}){const d=(0,r().v3)(),u=(0,i().DP)(),c=(0,a().Ol)(),p=(0,n().K8)((()=>d.KatexStore.getKatex()),[d.KatexStore]);return(0,n().K8)((()=>{const r=null==e?void 0:e.getValue();return r&&o&&t?l().S5({environment:d,textValue:{value:r,spaceId:o},parentStore:t,disableHover:!1,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!1,disableCommentAnnotations:!0,disabled:s,theme:u,disableLinks:s,emojiType:c,katex:p,formulaValueTypes:[]}):null}),[s,c,d,p,t,o,e,u])}},248064:(e,t,o)=>{o.d(t,{h:()=>s});var r=o(296540),n=()=>o(484714),i=()=>o(590526),a=()=>o(978846),l=()=>o(937199);function s(){const{layoutStore:e,currentModuleSelection:t,setModuleSelection:o,sessionId:s}=(0,l().LH)(),d=(0,n().v3)(),u=(0,i().K8)((()=>{var t;return null===(t=e.getModel())||void 0===t?void 0:t.getLayoutType()}),[e]),c="form"===u?"form_layout_schema":"new_module"===(null==t?void 0:t.type)?t.area:void 0;return(0,r.useCallback)((r=>{const{layoutModule:n,transaction:i}=r;if(!e.getModel()||!c||"form_conditional_modules"===c)return;let l;if("form"===u)l=r.position??{type:"area_relative",area:"form_layout_schema",location:"end_moveable"};else{if("new_module"!==(null==t?void 0:t.type))return;if("form_conditional_modules"===t.area)return;l="views_main_tab_modules"===t.area?{type:"area_relative",area:t.area,viewId:t.viewsMainTabId,location:"end_moveable"}:{type:"area_relative",area:t.area,location:"end_moveable"}}(0,a().UQ)({environment:d,sessionId:s,layoutStore:e,position:l,module:n,transaction:i,isPropertyCreation:!1}),o({type:"existing_module",moduleId:n.id,isDragging:!1})}),[c,t,d,e,u,s,o])}},266405:(e,t,o)=>{o.d(t,{e:()=>i});var r=()=>o(31503),n=()=>o(465741);function i(e,t,o,i){var a;const l=null===(a=t.getModel())||void 0===a?void 0:a.getConfig().propertyId;if(!l)return"generic_error";const s=o[l];if(void 0===s)return"deleted_property";if(!(0,r().Sg)(s))return"invalid_property_type";const d=(0,n().CK)({environment:e,propertyType:s.type,propertySchema:s,isPublicForm:Boolean(i)});return d||void 0}},348241:(e,t,o)=>{o.d(t,{Q1:()=>a,cJ:()=>i,zi:()=>n});o(16280);var r=o(296540);const n=(0,r.createContext)(null);function i(){const e=(0,r.useContext)(n);if(!e)throw new Error("useFormLayoutEditorContext must be used inside FormLayoutEditorContext.Provider");return(0,r.useMemo)((()=>e),[e])}function a(){return(0,r.useContext)(n)}n.displayName="FormLayoutEditorContext"},384130:(e,t,o)=>{o.d(t,{J:()=>c});var r=o(296540),n=()=>o(907258),i=()=>o(726637),a=()=>o(484714),l=()=>o(590526),s=()=>o(680977),d=()=>o(381678),u=()=>o(547149);function c(){return function({userSettingsDismissibleKey:e}){const t=(0,a().v3)(),o=(0,l().O$)(n().AppStoreCurrentUserSettingsStore),c=(0,l().K8)((()=>{const t=null==o?void 0:o.getSettings();return!t||Boolean(t[e])}),[e,o]),p=(0,l().K8)((()=>{const e=(0,d()._)(t),r=null==o?void 0:o.getSettings();return Boolean(e)&&Boolean(r)&&!i().A.isMobile&&!c}),[t,o,c]),m=r.useCallback((()=>{o&&!c&&p&&u().createAndCommit({environment:t,userAction:"LayoutInfoPanelButtonEducationTooltip.dismiss",canUndo:!1,perform:t=>{(0,s().m)({userSettingsStore:o,transaction:t,data:{[e]:Date.now()}})}})}),[t,p,e,o,c]);return{shouldShowTooltip:p,dismissTooltip:m}}({userSettingsDismissibleKey:"layout_builder_add_module_button_education_tooltip_dismissed_at"})}},435930:(e,t,o)=>{o.d(t,{s:()=>i});var r=()=>o(69708);const n=(0,r().YK)({PROPERTY_MODULE_MESSAGE:{id:"pageLayoutEditor.property",defaultMessage:"Property"},TITLE_WITH_ICON_MESSAGE:{id:"pageLayoutEditor.titleWithIcon",defaultMessage:"Heading"},COLLECTION_VIEW_MESSAGE:{id:"pageLayoutEditor.collectionView",defaultMessage:"Database View"}}),i=(0,r().YK)({cover:{id:"pageLayoutEditor.cover",defaultMessage:"Cover"},properties:{id:"pageLayoutEditor.properties",defaultMessage:"Property group"},inlinePageSections:{id:"pageLayoutEditor.inlinePageSections",defaultMessage:"Inline Page Sections"},expandedBacklinks:{id:"pageLayoutEditor.expandedBacklinks",defaultMessage:"Backlinks"},discussions:{id:"pageLayoutEditor.discussions",defaultMessage:"Page discussions"},editor:{id:"pageLayoutEditor.editor",defaultMessage:"Content"},tabs:{id:"pageLayoutEditor.tabs",defaultMessage:"Tabs"},transcript:{id:"pageLayoutEditor.transcript",defaultMessage:"Transcript"},bottomControls:{id:"pageLayoutEditor.bottomControls",defaultMessage:"Bottom Controls"},selectAModulePrompt:{id:"pageLayoutEditor.selectAModuleTitle",defaultMessage:"Select a module to configure"},deleteModuleButton:{id:"pageLayoutEditor.deleteModuleButton",defaultMessage:"Delete"},views:{id:"pageLayoutEditor.views",defaultMessage:"Views"},viewsMain:{id:"pageLayoutEditor.views",defaultMessage:"Views"},relationsGroup:{id:"pageLayoutEditor.relationsGroup",defaultMessage:"Relations group"},formTitle:{id:"pageLayoutEditor.formTitle",defaultMessage:"Form Title"},formQuestion:{id:"pageLayoutEditor.formQuestion",defaultMessage:"Form Question"},formSubmit:{id:"pageLayoutEditor.formSubmit",defaultMessage:"Form Submit"},placeholder:{id:"pageLayoutEditor.placeholder",defaultMessage:"New"},recentActivity:{id:"pageLayoutEditor.recentActivity",defaultMessage:"Recent activity"},collaborators:{id:"pageLayoutEditor.collaborators",defaultMessage:"Top collaborators"},teamspaces:{id:"pageLayoutEditor.teamspaces",defaultMessage:"Teamspaces"},theirPages:{id:"pageLayoutEditor.theirPages",defaultMessage:"Their pages"},row:{id:"pageLayoutEditor.row",defaultMessage:"Row"},view:{id:"pageLayoutEditor.view",defaultMessage:"View"},normalizedTitleWithIcon:n.TITLE_WITH_ICON_MESSAGE,titleWithIcon:n.TITLE_WITH_ICON_MESSAGE,deleted_property:n.PROPERTY_MODULE_MESSAGE,property_number:n.PROPERTY_MODULE_MESSAGE,property_title:n.PROPERTY_MODULE_MESSAGE,property_person:n.PROPERTY_MODULE_MESSAGE,property_file:n.PROPERTY_MODULE_MESSAGE,property_text:n.PROPERTY_MODULE_MESSAGE,property_checkbox:n.PROPERTY_MODULE_MESSAGE,property_url:n.PROPERTY_MODULE_MESSAGE,property_email:n.PROPERTY_MODULE_MESSAGE,property_phone_number:n.PROPERTY_MODULE_MESSAGE,property_created_by:n.PROPERTY_MODULE_MESSAGE,property_last_edited_by:n.PROPERTY_MODULE_MESSAGE,property_button:n.PROPERTY_MODULE_MESSAGE,property_select:n.PROPERTY_MODULE_MESSAGE,property_multi_select:n.PROPERTY_MODULE_MESSAGE,property_status:n.PROPERTY_MODULE_MESSAGE,property_date:n.PROPERTY_MODULE_MESSAGE,property_created_time:n.PROPERTY_MODULE_MESSAGE,property_last_edited_time:n.PROPERTY_MODULE_MESSAGE,property_last_visited_time:n.PROPERTY_MODULE_MESSAGE,property_relation:n.PROPERTY_MODULE_MESSAGE,property_rollup:n.PROPERTY_MODULE_MESSAGE,property_formula:n.PROPERTY_MODULE_MESSAGE,property_auto_increment_id:n.PROPERTY_MODULE_MESSAGE,property_location:n.PROPERTY_MODULE_MESSAGE,property_verification:n.PROPERTY_MODULE_MESSAGE,property_place:n.PROPERTY_MODULE_MESSAGE,property:n.PROPERTY_MODULE_MESSAGE,collectionView:n.COLLECTION_VIEW_MESSAGE,collectionViewV2:n.COLLECTION_VIEW_MESSAGE})},462106:(e,t,o)=>{o.d(t,{Y:()=>i});o(898992),o(672577);var r=()=>o(235059),n=()=>o(652079);function i(e,t){const o=(0,r().l)(e,t);if(o)for(const r of o.allFeatures)if((0,n().l)(r)){const e=r.dependencies.find((e=>"collection"===e.type&&e.uri===t));if(e)return e.value.schema??{}}}},630960:(e,t,o)=>{o.d(t,{Jz:()=>s,in:()=>l,yh:()=>a});o(898992),o(354520),o(581454);var r=()=>o(590526),n=()=>o(31503),i=()=>o(534177);const a=(0,o(69708).YK)({unsupportedPublicQuestionType:{defaultMessage:"This question type cannot be used in public forms.",id:"useNewQuestionPropertyMenuItems.invalidPublicQuestionType"},relatedCollectionNotPublic:{defaultMessage:"Only relations to public databases are supported in public forms.",id:"formEditorQuestion.relatedCollectionNotPublic"},editorPlaceholder:{defaultMessage:"Respondentâ€™s answer",id:"formEditorQuestion.editorPlaceholder"},viewerEmptyPlaceholder:{defaultMessage:"Your answer",id:"formEditorQuestion.viewerEmptyPlaceholder"},editorDropdownPlaceholderSelect:{defaultMessage:"Options below will appear in the dropdown",id:"formEditorQuestion.editorDropdownPlaceholder"}});function l({layoutStore:e,collectionStore:t}){const o=(0,r().K8)((()=>t?e.getNormalizedFormQuestionStoresForFormLayout({collectionSchema:t.getSchema()})??[]:[]),[e,t]),a=(0,r().K8)((()=>o.map((e=>{var t;return null===(t=e.getConfig())||void 0===t?void 0:t.propertyId})).filter(i().O9)),[o]);return(0,r().K8)((()=>{if(!t)return[];const o=t.getSchema();if(!e.getModel())return[];return(0,i().WP)(o).map((([e,t])=>{if(t&&(0,n().Sg)(t)&&!a.includes(e))return e})).filter(i().O9)}),[t,e,a])}const s=[{key:"unlimited",title:"Unlimited",type:"button"},{key:"1",title:"1",type:"button"},{key:"2",title:"2",type:"button"},{key:"3",title:"3",type:"button"},{key:"4",title:"4",type:"button"},{key:"5",title:"5",type:"button"},{key:"10",title:"10",type:"button"}]},634058:(e,t,o)=>{o.d(t,{A:()=>n});class r extends(()=>o(757695))().Store{getInitialState(){return{open:!1}}}const n=new r},671793:(e,t,o)=>{o.d(t,{j:()=>l});var r=()=>o(433337),n=()=>o(455348),i=()=>o(462106);const a=[o(687871).Z.Owner,o(931075)._e.Owner];function l(e,t,o,l){const s=n().u9.derivePropertyUri(o,l.getPropertyMapping());if(!s)return!1;const d=function(e,t){if(t===r().pW)return a;const o=(0,i().Y)(e,t);return o?Object.keys(o):void 0}(e,t);return!!d&&d.includes(s)}},719849:(e,t,o)=>{o.d(t,{f:()=>n,l:()=>i});var r=()=>o(634058);async function n(e){return r().A.state.open?Promise.resolve(void 0):new Promise((t=>{!function(e){r().A.setState({...e,open:!0})}({...e,onConfirm:e=>(i(),t(e)),onDismiss:()=>(i(),t(void 0))})}))}function i(){r().A.reset()}},802975:(e,t,o)=>{o.d(t,{B:()=>m});o(16280),o(898992),o(354520);var r=()=>o(564884),n=()=>o(430896),i=()=>o(792071),a=()=>o(37165),l=()=>o(79650),s=()=>o(339798),d=()=>o(640868),u=()=>o(547149),c=()=>o(465741),p=()=>o(98205);function m({environment:e,module:t,sessionId:o,layoutStore:r,collectionSettingsStore:n,isCollectionEmpty:i,collectionContextStore:a,area:l,transaction:d,updateParentModule:u}){const c=a.collectionStore();if(!c)throw new Error("Could not find collection store");const m=r.getModules().form_conditional_modules??{},f=(0,p().Yg)({currentModule:t,nestedModules:m,includePlaceholders:!0}).formQuestionDescendants.filter((e=>e.id!==t.id)),g=a.normalizedSchemaStore.state;for(const s of f)y({environment:e,module:s,sessionId:o,layoutStore:r,isCollectionEmpty:i,collectionContextStore:a,collectionStore:c,area:"form_conditional_modules",transaction:d,schema:g,updateParentModule:!1});y({environment:e,module:t,sessionId:o,layoutStore:r,isCollectionEmpty:i,collectionContextStore:a,collectionStore:c,area:l,transaction:d,schema:g,updateParentModule:u}),s().os({collectionSettingsStore:n})}function y({environment:e,module:t,sessionId:o,layoutStore:s,isCollectionEmpty:p,collectionContextStore:m,collectionStore:y,area:f,transaction:g,updateParentModule:S,schema:_}){let v;if("formQuestion"===t.type){var E;if(v=n().c.createChildStore(s,{table:a().lo,id:t.formQuestionId,spaceId:s.getSpaceId()??""}).getPropertyId(),!v)return;const o=null===(E=_[v])||void 0===E?void 0:E.type;p&&o&&"title"!==o&&(0,l().B)({environment:e,collectionStore:y,schema:_,property:v,transaction:g}),(0,r().u)({environment:e,event:{eventName:"delete_form_question",eventProperties:(0,c().YA)({collectionContextStore:m,propertyId:v,questionId:t.id,parentModuleId:S?t.parentModuleId:void 0,area:f,layoutStore:s})}})}S?(0,d().U)({environment:e,position:{area:f,moduleId:t.id},layoutStore:s,sessionId:o,transaction:g}):u().applyOperation({transaction:g,store:s,operation:i().N4X.deleteModuleInArea({pointer:s.pointer,area:f,moduleId:t.id})})}},828661:(e,t,o)=>{o.d(t,{q:()=>M});o(16280),o(296540);var r=()=>o(242422),n=()=>o(675133),i=()=>o(792057),a=()=>o(898244),l=()=>o(302107),s=()=>o(259476),d=()=>o(69708),u=()=>o(284371),c=()=>o(719849),p=()=>o(962910),m=()=>o(113105),y=()=>o(16006),f=()=>o(470928),g=()=>o(838038),S=()=>o(547149),_=()=>o(290966),v=()=>o(204067),E=o(474848);async function M(e){const{environment:t,collectionContextStore:o,property:y,handleDeleteAccept:M,isPermanentlyDelete:h}=e,A=o.collectionStore();if(!A)return;if(A.isTypedProperty(y)){if(await p().nD({environment:t,property:y,collectionContextStore:o,theme:e.theme,from:e.from}))return}const C=(0,v().R5)({environment:t,collectionStore:A,propertyId:y});if(C.length>0){if((0,_().E_)({environment:t,collectionStore:A,propertyId:y,compoundTemplateInstancesToDelete:C,collectionContextStore:o,from:e.from}))return}else if(((0,f().k$)(y)||(0,f().Do)({collectionStore:A,propertyId:y}))&&(0,f().aF)(A)){if((0,_().I5)({environment:t,collectionStore:A,propertyId:y,collectionContextStore:o,from:e.from}))return}const I=o.normalizedSchemaStore.state,w=I[y],T=m().pg(o,w);await(null==T?void 0:T.load());const O=await async function({handleDeleteAccept:e,environment:t,collectionContextStore:o,collectionStore:n,targetCollectionStore:i,propertyId:a,propertySchema:l}){const p=i&&m().D5(o,a,i),y=i&&m().uf(i),f=i&&n.id===i.id;if(!p||!n||!y||f)return!1;const _=r().default.checkGate({gateName:"enable_one_way_relation_placeholder"}),v=()=>{S().createAndCommit({userAction:"collectionPropertyActions.showDeletePropertyDialog",environment:t,canUndo:!0,perform:e=>{if("relation"===(null==l?void 0:l.type)&&null!=l&&l.property&&i){const o=l.property,r=i.getSchema();g().C4({environment:t,collectionStore:i,propertySchema:r[o],property:o,targetPropertyID:void 0,oneWayRelationPlaceholderProperty:_?a:void 0,autoRelate:n.isSyncedCollection()&&!i.isSyncedCollection()?{enabled:!1}:l.autoRelate,transaction:e}),g().C4({environment:t,collectionStore:n,propertySchema:l,property:a,targetPropertyID:void 0,oneWayRelationPlaceholderProperty:_?o:void 0,autoRelate:{enabled:!1},transaction:e})}g().t$({environment:t,collectionStore:n,property:a,transaction:e})}})};return await async function({collectionStore:e,targetCollectionStore:t,handleDeleteAccept:o,handleDeleteButKeepRelatedProperty:r}){const n=await c().f({icon:s().trashSmallIcon,radioButtonStyle:"red",confirmTextStyle:"red",title:b(e),confirmText:(0,E.jsx)(d().sA,{defaultMessage:"Delete",id:"deletePropertyDialogActions.warning.confirmText"}),radioOptions:[{key:"delete_source_and_target",title:(0,E.jsx)(d().sA,{id:"deletePropertyDialogActions.warning.deleteSourceAndTarget",defaultMessage:"Also delete related property"}),subtitle:(0,E.jsx)(d().sA,{id:"deletePropertyDialogActions.radioModal.deleteSourceAndTarget",defaultMessage:"The related property on {relationTargetName} will also be deleted",values:{relationTargetName:P(t,u().Wy.medium)}})},{key:"delete_source_only",title:(0,E.jsx)(d().sA,{defaultMessage:"Delete this property only",id:"deletePropertyDialogActions.warning.deleteSourceOnly"}),subtitle:(0,E.jsx)(d().sA,{defaultMessage:"This will end the two-way sync with the related property on {relationTargetName}",id:"deletePropertyDialogActions.warning.subtitleForDeleteSourceOnly",values:{relationTargetName:P(t,u().Wy.medium)}})}]});switch(n){case"delete_source_and_target":o();break;case"delete_source_only":r();break;default:throw new Error(`Unsupported two-way relation deletion type: ${n}`)}}({collectionStore:n,targetCollectionStore:i,handleDeleteAccept:e,handleDeleteButKeepRelatedProperty:v}),!0}({handleDeleteAccept:M,environment:t,collectionContextStore:o,collectionStore:A,targetCollectionStore:T,propertyId:y,propertySchema:w});if(O)return;let D,L,R=[{label:h?(0,E.jsx)(d().sA,{id:"database.tableHeaderCell.deleteProperty.modal.confirmPermanentlyDeleteButton",defaultMessage:"Permanently delete"}):(0,E.jsx)(d().sA,{id:"database.viewSettings.propertyTab.deleteProperty.modal.confirmButton",defaultMessage:"Delete"}),color:"red",onAccept:M}];if("auto_increment_id"===(null==w?void 0:w.type))D=m().me(I)?(0,E.jsx)(d().sA,{id:"database.tableHeaderCell.deleteUniqueIdWithGithubProperty.modal.prompt",defaultMessage:"You will no longer be able to link new GitHub PRs and status automations will stop working."}):(0,E.jsx)(d().sA,{id:"database.tableHeaderCell.deleteUniqueIdProperty.modal.prompt",defaultMessage:"The ID property will be permanently deleted."});else if("status"===(null==w?void 0:w.type)){const e=m().AX(I);if(e){const t=e.connectedRelation.automation;t&&t[y]&&(D=(0,E.jsx)(d().sA,{id:"database.tableHeaderCell.deleteStatusProperty.modal.prompt",defaultMessage:"Deleting this status property will stop the GitHub Pull Requests status automation."}))}}else if(w&&(0,a().UU)(w)){const e=(0,a().mh)(I,y);if(e.length>0){const o=e.length;D=(0,E.jsx)(d().sA,{id:"database.tableHeaderCell.deleteProperty.modal.rollupWarning",defaultMessage:(0,d().LS)("rollupCount",{one:"This will also delete {rollupCount} dependent property.",other:"This will also delete {rollupCount} dependent properties."}),values:{rollupCount:o}}),R=[{...R[0],onAccept:()=>{S().createAndCommit({userAction:"collectionPropertyActions.showDeletePropertyDialog",environment:t,canUndo:!0,perform:e=>{g().I9({environment:t,collectionStore:A,targetCollectionStore:T,property:y,transaction:e,permanentlyDelete:h})}})}}]}}else w&&(0,l().dR)({propertyId:y,propertyType:w.type,permissionItems:A.getPermissionItems()})&&(L=n().A.formatMessage(l().DZ.deletePropertyTypeWarningMessage),D=n().A.formatMessage(l().DZ.deletePropertyTypeWarningDescription));i().ui({message:L||b(A),description:h?(0,E.jsxs)(E.Fragment,{children:[D," ",(0,E.jsx)(d().sA,{id:"database.tableHeaderCell.deleteProperty.modal.permanentlyDeleteDescription",defaultMessage:"This property is too large to be moved to Deleted Properties. It will be permanently deleted."})]}):D,showCancel:!0,keepFocus:!0,items:R,mode:"wide",innerStyle:{textAlign:"center"}})}function P(e,t){return(0,E.jsx)(y().A,{style:{display:"inline",fontWeight:t},shouldWrap:!0,store:e})}function b(e){return(0,E.jsx)(d().sA,{id:"database.tableHeaderCell.deleteProperty.modal.prompt",defaultMessage:"Delete this property from {databaseName}? It will be removed from all views.",values:{databaseName:P(e,u().Wy.bold)}})}},832857:(e,t,o)=>{o.d(t,{FG:()=>_,Is:()=>S,Ix:()=>v,jD:()=>E,lF:()=>g});o(944114),o(898992),o(354520),o(672577),o(581454);var r=()=>o(242422),n=()=>o(214388),i=()=>o(792071),a=()=>o(500993),l=()=>o(183558),s=()=>o(534177),d=()=>o(89053),u=()=>o(842076),c=()=>o(978846),p=()=>o(640868),m=()=>o(33218),y=()=>o(547149),f=()=>o(802975);function g(e){const{environment:t,layoutStore:o,currentQuestionModule:r,area:n,property:i,filterValue:a,setModuleSelection:s,sessionId:d}=e;y().createAndCommit({userAction:"FormSelectProperty.handleAddConditionalLogic",environment:t,canUndo:!0,perform:e=>{if(!o.getModel())return;const u=(0,l().Ay)(),p=(0,l().Ay)(),y=function(e){var t,o;switch(e.type){case"select":return{operator:"enum_is",value:{type:"exact",value:null===(t=e.value)||void 0===t?void 0:t.value}};case"multi_select":return{operator:"enum_contains",value:{type:"exact",value:null===(o=e.value)||void 0===o?void 0:o.value}};case"checkbox":return{operator:"checkbox_is",value:{type:"exact",value:e.value}}}}(a);(0,m().UQ)({environment:t,transaction:e,layoutStore:o,position:{area:n,moduleId:r.id},updatedModule:{...r,conditionalGroups:[...r.conditionalGroups??[],{id:u,trigger:{property:i,filter:y},children:[]}]}});const f={id:p,type:"placeholder",parentModuleId:r.id,parentConditionalGroupId:u};(0,c().UQ)({environment:t,transaction:e,layoutStore:o,position:{type:"absolute",area:"form_conditional_modules",parentConditionalGroupId:u,parentModuleId:r.id},module:f,sessionId:d,isPropertyCreation:!1}),s&&s({type:"existing_module",moduleId:p,isDragging:!1})}})}function S(e){var t;const{environment:o,layoutStore:r,module:n,conditionalGroupId:i,newValue:l}=e,s=(0,a().A)(n.id,r.getModules()),d={...n,conditionalGroups:null===(t=n.conditionalGroups)||void 0===t?void 0:t.map((e=>e.id===i?{...e,trigger:{...e.trigger,filter:l}}:e))};y().createAndCommit({userAction:"FormConditionalLogicModuleRenderer.updateTriggerFilter",environment:o,canUndo:!0,perform:e=>{(0,m().UQ)({environment:o,transaction:e,layoutStore:r,position:{area:s.area,moduleId:n.id},updatedModule:d})}})}function _(e){const{environment:t,parentModule:o,groupId:r,layoutStore:n,collectionContextStore:a,isCollectionEmpty:l,sessionId:s}=e,d=n.getModules().form_conditional_modules??{};y().createAndCommit({userAction:"FormConditionalLogicModuleRenderer.deleteConditionalGroup",environment:t,canUndo:!0,perform:e=>{var u,c;const p=null==n?void 0:n.getModel();if(!n||!p)return;const g=null===(u=o.conditionalGroups)||void 0===u?void 0:u.filter((e=>e.id!==r)),S=null===(c=o.conditionalGroups)||void 0===c?void 0:c.find((e=>e.id===r));if(void 0!==S){for(const o of S.children??[]){const r=d[o];r&&("placeholder"!==r.type?(0,f().B)({environment:t,module:r,sessionId:s,transaction:e,layoutStore:n,collectionContextStore:a,collectionSettingsStore:a.settingsStore,isCollectionEmpty:l,area:"form_conditional_modules",updateParentModule:!1}):y().applyOperation({transaction:e,store:n,operation:i().N4X.deleteModuleInArea({pointer:n.pointer,area:"form_conditional_modules",moduleId:o})}))}(0,m().UQ)({environment:t,transaction:e,layoutStore:n,position:{area:Object.keys(d).includes(o.id)?"form_conditional_modules":"form_layout_schema",moduleId:o.id},updatedModule:{...o,conditionalGroups:g}})}}})}function v(e){const{environment:t,layoutStore:o,formQuestionModule:r,sessionId:n}=e;y().createAndCommit({userAction:"FormConditionalLogicModuleRenderer.deleteConditionalGroup",environment:t,canUndo:!0,perform:e=>{(0,p().U)({environment:t,transaction:e,layoutStore:o,position:{area:"form_conditional_modules",moduleId:r.id}}),(0,c().UQ)({environment:t,transaction:e,layoutStore:o,position:{area:"form_layout_schema",type:"area_relative",location:"end_moveable"},module:{...r,parentModuleId:void 0,parentConditionalGroupId:void 0},sessionId:n,isPropertyCreation:!1})}})}function E(e){const{questionModulesToVisit:t,draftSubmissionPageStore:o,collectionSchema:i,nestedQuestionModules:a,intl:l,spaceIdCreator:c,sourceCollectionId:p,environment:m}=e,y=[],f=o.getModel();if(!f)return[];for(const S of t){y.push(S);const e=S.conditionalGroups;if(e)for(const t of e){var g;const e=t.trigger;if(!(0,n().ts)({filter:e.filter,property:e.property,propertyMapping:void 0,context:{schema:i,userId:void 0,userTimeZone:"",userStartOfWeek:0,relativeVariableResult:void 0,currentPageInRelatedCollection:void 0,intl:l,collectionFeatureGates:(0,d().i)()},depth:0,sourceCollectionId:p})({block:f,getRecordModel:o.getRecordModel,propertyMapping:void 0,resultCache:new Map,regExpCache:new Map,formatDateCache:new Map,experimentService:r().default,formulasModule:void 0,spaceIdCreator:c,getRelationEdgeList:(0,u().Y)({environment:m,spaceId:o.getSpaceId()})}))continue;const S=null===(g=t.children)||void 0===g?void 0:g.map((e=>{const t=a[e];if(t&&"formQuestion"===t.type)return t})).filter(s().O9);if(!S||0===S.length)continue;const _=E({questionModulesToVisit:S,draftSubmissionPageStore:o,collectionSchema:i,nestedQuestionModules:a,intl:l,spaceIdCreator:c,sourceCollectionId:p,environment:m});y.push(..._)}}return y}}}]);