"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[60713],{104129:(e,o,t)=>{t.d(o,{A:()=>n});t(898992),t(672577);class r extends(()=>t(959180))().A{findModuleContainer({layoutStore:e,moduleId:o}){return this.find((t=>t.layoutStore===e&&t.moduleId===o))}}const n=new r},132174:(e,o,t)=>{t.d(o,{A:()=>i});var r=()=>t(201980);class n extends(()=>t(757695))().Store{getInitialState(){return{isLoaded:!1}}getFormState(){if(this.state.isLoaded)return this.state}getQuestionError(e){if(this.state.isLoaded)return this.state.formQuestionErrorMap.get(e)}updateFormState(e){this.state.isLoaded&&this.setState({...this.state,...e})}updateFilePropertyIdToFormFiles(e,o){var t;if(!this.state.isLoaded)return;const r=null===(t=this.getFormState())||void 0===t?void 0:t.filePropertyIdToFormFiles;this.updateFormState({filePropertyIdToFormFiles:{...r,[e]:o((null==r?void 0:r[e])??[])}})}updateFormErrorMap(e,o){if(!this.state.isLoaded)return;const n=this.state.collectionSchema;if(!n)return;const i=new Map;for(const u of e){var a,s,l;const e=u.id,c=null===(a=u.getConfig())||void 0===a?void 0:a.propertyId;if(!c)continue;const p=null===(s=this.state.draftFormBlockStore)||void 0===s?void 0:s.getProperties()[c],m=(0,t(713998)._g)({schema:n,property:c});if(m){if(u.isRequired()&&null!==(l=this.state.questionIdsVisibleAtLastSubmissionAttempt)&&void 0!==l&&l.includes(e)){const o=this.state.filePropertyIdToFormFiles;if("file"===m.type){var d;if(((null===(d=o[c])||void 0===d?void 0:d.length)??0)<1){i.set(e,"required");continue}}else if("checkbox"===m.type){if(!0!==(0,t(657970).w)(p)){i.set(e,"required");continue}}else if((0,r().w9s)(p)){i.set(e,"required");continue}}if(!(0,r().w9s)(p)){const n=(0,r().q4_)(p);if("number"===m.type&&!(0,t(72135).kf)(n,o)){i.set(e,"invalid_number");continue}if("email"===m.type&&!(0,t(842599).DT)(n)){i.set(e,"invalid_email");continue}if("url"===m.type&&!(0,t(402137).w)(n)){i.set(e,"invalid_url");continue}if("phone_number"===m.type&&!(0,t(754199).e)(n)){i.set(e,"invalid_phone_number");continue}}}}this.updateFormState({formQuestionErrorMap:i})}}const i=n},279897:(e,o,t)=>{t.d(o,{A:()=>u});var r=t(296540),n=()=>t(590526),i=()=>t(401497),a=()=>t(31503),s=()=>t(69708),l=()=>t(100622),d=t(474848);function u({propertySchema:e,formQuestionStore:o,formMode:t}){const u=(0,i().IS)((()=>({select:{color:l().Tj.text.tertiary,marginTop:4,marginBottom:12,..."viewer"===t?{marginInlineStart:0,marginInlineEnd:0}:{marginInlineStart:10,marginInlineEnd:10}}})),[t]),c=(0,n().K8)((()=>(0,a().hm)(e,o.getModel())),[o,e]),p=(0,r.useMemo)((()=>"builder"===t?void 0===c?(0,d.jsx)(s().sA,{id:"QuestionMaxSelection.builder.unlimited",defaultMessage:"(Respondents can select as many as they like)"}):(0,d.jsx)(s().sA,{id:"QuestionMaxSelection.builder.limited",defaultMessage:"(Respondents can select up to {count})",values:{count:c}}):void 0===c?(0,d.jsx)(s().sA,{id:"QuestionMaxSelection.viewer.unlimited",defaultMessage:"(Select as many as you like)"}):(0,d.jsx)(s().sA,{id:"QuestionMaxSelection.viewer.limited",defaultMessage:"(Select up to {count})",values:{count:c}})),[t,c]);return(0,d.jsx)("div",{style:u.select,children:p})}},290169:(e,o,t)=>{t.d(o,{B:()=>r});const r=160},417257:(e,o,t)=>{t.d(o,{H:()=>a,o:()=>i});var r=t(296540),n=()=>t(132174);const i=(0,r.createContext)(null);function a(){const e=(0,r.useContext)(i);return e||new(n().A)}i.displayName="FormBlockContext"},437426:(e,o,t)=>{t.d(o,{$:()=>l});var r=t(296540),n=()=>t(590526),i=()=>t(807449),a=()=>t(895876),s=t(474848);const l=r.memo(r.forwardRef((function({collectionContextStore:e,property:o,getTitleOverride:l,...d},u){const c=(0,n().K8)((()=>e.collectionStore()),[e]),p=(0,n().K8)((()=>null==c?void 0:c.getDatabaseType()),[c]),m=(0,n().K8)((()=>Boolean(c&&p&&(0,t(671793).j)((0,t(413955).appConfigs)(),p,o,c))),[c,p,o]),g=(0,r.useCallback)((e=>(0,a().eF)(p,e)),[p]),y=(0,r.useCallback)((e=>(0,s.jsx)(t(81068).A,{...d,...e,disabled:m,disabledFeedback:m,title:(null==l?void 0:l({isRequiredProperty:m}))??(0,s.jsx)(t(69708).sA,{defaultMessage:"Delete property",id:"database.tableHeaderCell.deleteProperty"}),caption:t(726637).A.isMobile&&m?(0,a().eF)(p):null,icon:m?(0,s.jsx)("div",{...e,children:(0,s.jsx)(i().I,{icon:t(471095).lockFillIcon})}):(0,s.jsx)(i().I,{icon:t(236262).trashIcon}),isRedOnHover:!0})),[p,l,m,d]);return(0,s.jsx)(t(26697).m,{placement:"left",disableTooltip:!m,renderTooltip:g,render:y})})))},460713:(e,o,t)=>{t.d(o,{J:()=>tr});t(16280),t(581454);var r=t(296540),n=()=>t(756117),i=()=>t(484714),a=()=>t(590526),s=()=>t(401497),l=()=>t(884189),d=()=>t(728396),u=()=>t(251822),c=()=>t(800065),p=()=>t(271205),m=()=>t(853994),g=()=>t(170253),y=()=>t(978846),v=(t(898992),t(354520),()=>t(449195));function f(e,o){const t="section_hide"!==(0,v().z5)(null==o?void 0:o.page_section_visibility);return e.filter((e=>"discussions"!==e.type||t))}var h=()=>t(970176),b=()=>t(937199);function x(){const{layoutStore:e}=(0,b().LH)();return"form"===(0,a().K8)((()=>{var o;return null===(o=e.getModel())||void 0===o?void 0:o.getLayoutType()}),[e])?24:12}var M=()=>t(933951),S=(t(18107),t(967357),()=>t(882722)),I=()=>t(695115),_=()=>t(26697),j=()=>t(617668),w=()=>t(340498),T=()=>t(155185),C=()=>t(69708),A=()=>t(104129),k=()=>t(100622);function P(){const e=(0,s().eP)();return(0,s().IS)((()=>({button:{background:"light"===e?k().Tj.palette.uiBlue[100]:k().Tj.palette.uiBlue[200]},buttonHovered:{background:"light"===e?k().Tj.palette.uiBlue[200]:k().Tj.palette.uiBlue[300]},buttonPressed:{background:"light"===e?k().Tj.palette.uiBlue[300]:k().Tj.palette.uiBlue[400]}})),[e])}var B=()=>t(3197),F=t(474848);const D=(0,C().YK)({formLayoutAddModule:{id:"addModuleHoverMenu.formLayout.add",defaultMessage:"Add question"},pageLayoutAddModule:{id:"addModuleHoverMenu.pageLayout.add",defaultMessage:"Add"}}),E=32;function L(e){if("views_main_tab_modules"===e.area)throw new Error("[ViewsMain Not Implemented] AddModuleHoverMenu not implemented for views_main_tab_modules");const o=(0,C().tz)(),{layoutStore:t,addModuleHoverMenuStore:r,currentModuleSelection:i}=(0,b().LH)(),l=(0,a().K8)((()=>{if(r.state.isOpen)return r.state.moduleId}),[r]),d=(0,a().K8)((()=>{if(!l)return;const e=A().A.findModuleContainer({layoutStore:t,moduleId:l});return e?e.getNode():void 0}),[l,t]),u=(0,a().K8)((()=>{if(!i||"new_module"===i.type)return!1;const e=t.getModuleById(i.moduleId);return"placeholder"===(null==e?void 0:e.type)}),[i,t]),c=(0,a().K8)((()=>r.state.isOpen),[r]),p=(0,a().K8)((()=>{var o;if("views_main_tab_modules"===e.area)throw new Error("[ViewsMain Not Implemented] AddModuleHoverMenu not implemented for views_main_tab_modules");if("form_conditional_modules"===e.area)return!1;const r=t.getModules()[e.area],n=(null==r?void 0:r.filter((e=>(0,T()._)(e))))??[],i=0===n.length||(null===(o=n.at(-1))||void 0===o?void 0:o.id)===l;return c&&!u&&!i}),[c,l,u,t,e.area]),m=(0,B().t)({area:e.area,afterModuleId:l}),g=P(),y=(0,s().IS)((()=>({bigRoundButton:{...g.button,width:E,height:E,borderStartStartRadius:"100%",borderStartEndRadius:"100%",borderEndStartRadius:"100%",transform:"rotate(-45deg)"},bigRoundButtonHovered:{...g.buttonHovered},bigRoundButtonPressed:{...g.buttonPressed}})),[g]),v="form"===(0,a().K8)((()=>{var e;return null===(e=t.getModel())||void 0===e?void 0:e.getLayoutType()}),[t])?o.formatMessage(D.formLayoutAddModule):o.formatMessage(D.pageLayoutAddModule),f=d?d.offsetLeft-40:void 0,h=d?d.offsetTop+d.offsetHeight-4:void 0;return void 0===f||void 0===h?null:(0,F.jsx)(n().A,{visible:p,animate:{opacity:1,scale:1,transformOrigin:"center right"},initial:{opacity:0,scale:.3,transformOrigin:"center right"},exit:{opacity:0,scale:.3,transformOrigin:"center right"},style:{position:"absolute",insetInlineStart:f,top:h},children:(0,F.jsx)(_().m,{placement:"left",renderTooltip:()=>v,render:e=>(0,F.jsx)(I().A,{...e,style:y.bigRoundButton,hoveredStyle:y.bigRoundButtonHovered,className:S().kew,pressedStyle:y.bigRoundButtonPressed,onClick:m,icon:j().plusIcon,iconStyle:{width:w().Ev.default,height:w().Ev.default,transform:"rotate(45deg)"},colorPalette:"blue",colorVariant:"accentPrimary",ariaLabel:v})})})}var O=()=>t(249046),R=()=>t(612900),H=()=>t(79926);const K={BuilderAddModuleButtonEducationTooltip:new(H().O2)("BuilderAddModuleButtonEducationTooltip",(()=>t.e(63538).then(t.bind(t,92160))))},Q=(0,H()._h)(K.BuilderAddModuleButtonEducationTooltip,(e=>e.default));var G=()=>t(817942);const V=(0,C().YK)({addPageModule:{id:"pageLayout.builder.addModuleToPage.button.ariaLabel",defaultMessage:"Add page module"},addQuestionModuleTooltip:{id:"pageLayout.builder.addModuleToPage.button.addQuestionModuleTooltip",defaultMessage:"Add question"},addModuleToPanelButton:{id:"pageLayout.builder.addModuleToPanel.button.label",defaultMessage:"Add to panel"}}),q=r.forwardRef((function(e,o){const{area:r}=e,{layoutStore:n}=(0,b().LH)(),i=(0,a().K8)((()=>n.getLayoutType()),[n]),l=(0,C().tz)(),d=P(),u=(0,s().IS)((()=>({bigRoundButton:{...d.button,width:32,height:32,borderRadius:"100%"},bigRoundButtonHovered:{...d.buttonHovered},bigRoundButtonPressed:{...d.buttonPressed}})),[d]),c=(0,B().t)("views_main_tab_modules"===r?{area:r,viewsMainTabId:e.viewsMainTabId}:{area:r});if("form_conditional_modules"===r)throw new Error("[Forms Conditional Logic Not Implemented] AddPageLayoutModuleButton not implemented for form_conditional_modules yet.");const p=(0,a().K8)((()=>{var o;const t=n.getModules();return("views_main_tab_modules"===r?(null===(o=t[r])||void 0===o?void 0:o[e.viewsMainTabId])||[]:t[r]??[]).length>0}),[n,r,e.viewsMainTabId]);return"page_details"!==r||p?(0,F.jsx)(_().m,{renderTooltip:()=>l.formatMessage(V.addQuestionModuleTooltip),disableTooltip:"form"!==i,placement:"bottom",render:e=>(0,F.jsx)(I().A,{style:u.bigRoundButton,hoveredStyle:u.bigRoundButtonHovered,pressedStyle:u.bigRoundButtonPressed,onClick:c,icon:j().plusIcon,iconStyle:{width:w().Ev.default,height:w().Ev.default},colorPalette:"blue",colorVariant:"accentPrimary",className:S().kew,ariaLabel:l.formatMessage(V.addPageModule),ref:o,...e})}):(0,F.jsx)(t(373009).E,{iconLeading:j().plusIcon,shape:"pill",colorPalette:"blue",size:"xl",onClick:c,ref:o,children:(0,F.jsx)(C().sA,{...V.addModuleToPanelButton})})})),N=r.memo((function(e){var o;const{shouldShowTooltip:n}=(0,t(384130).J)(),{area:i}=e,s=n&&"page_main"===i,l=n&&"form_layout_schema"!==i,d=r.useRef(null),{currentModuleSelection:u,layoutStore:c,setModuleSelection:p,isPropertyTypeSearchInputDirtyStore:m}=(0,b().LH)(),g=(0,a().K8)((()=>"existing_module"===(null==u?void 0:u.type)?c.getModuleById(u.moduleId):void 0),[u,c]),y=(0,a().K8)((()=>{var o;if("form_conditional_modules"===i)throw new Error("[Forms Conditional Logic Not Implemented] AddPageLayoutModuleButton not implemented for form_conditional_modules yet.");const t=c.getModules();return("views_main_tab_modules"===i?(null===(o=t[i])||void 0===o?void 0:o[e.viewsMainTabId])||[]:t[i]??[]).length>0}),[c,i,e.viewsMainTabId]),[v,f]=r.useState(!1),h=r.useCallback((()=>{m.state||p(void 0)}),[m,p]);return"new_module"===(null==u?void 0:u.type)&&u.area===e.area?(0,F.jsx)(t(782482).N,{onUndo:h,capture:!0,priority:1,debugName:"AddPageLayoutModuleButton",children:(0,F.jsx)(z,{})}):"placeholder"===(null==g?void 0:g.type)?null:s||l?(0,F.jsxs)(O().Ye,{justifyContent:"center",style:null===(x=e.styles)||void 0===x?void 0:x.buttonContainer,className:G().hg,children:[(0,F.jsx)(R().u,{shape:"page_main"===e.area?"circle":"pill",size:"page_main"===e.area||y?32:34,onDependencyLoaded:()=>f(!0),children:(0,F.jsx)(q,{isEducationCalloutVisible:s,...e,ref:d})}),s&&v?(0,F.jsx)(Q,{buttonRef:d}):void 0]}):(0,F.jsx)(O().Ye,{justifyContent:"center",style:null===(o=e.styles)||void 0===o?void 0:o.buttonContainer,className:G().hg,children:(0,F.jsx)(q,{isEducationCalloutVisible:!1,ref:d,...e})});var x}));function z(){const e=(0,s().IS)((()=>({ghostPageModuleContainer:{paddingBottom:12},ghostPageModule:{width:"100%",height:160,background:k().Tj.palette.uiBlue[75],borderRadius:12,boxShadow:`0px 0px 0px 0px ${k().Tj.blue.border.strong}, inset 0px 0px 0px 1px ${k().Tj.blue.border.strong}`}})),[]);return(0,F.jsx)("div",{style:e.ghostPageModuleContainer,className:G().hg,children:(0,F.jsx)(R().u,{shape:"square",borderRadius:e.ghostPageModule.borderRadius,width:e.ghostPageModule.width,height:e.ghostPageModule.height,children:(0,F.jsx)("div",{style:e.ghostPageModule})})})}var $=()=>t(496603);const W=12;function U(){const{addModuleHoverMenuStore:e}=(0,b().LH)(),o=x(),t=(0,r.useCallback)((t=>{const r=A().A.getMembersByDOMOrder({filter:e=>"cover"!==e.moduleType&&"form_conditional_modules"!==e.area});let n=null;for(const e of r){const r=e.getNode();if(!r)continue;const i=r.getBoundingClientRect();if(t.clientX>i.right||t.clientX<i.left&&i.left-t.clientX>300)continue;if(t.clientY<=i.bottom&&i.bottom-t.clientY<W||t.clientY>i.bottom&&t.clientY-i.bottom<W+o){n=e;break}}if(n)e.setState({isOpen:!0,moduleId:n.moduleId,menuIsOpen:!1});else{const o=e.getState();o.isOpen&&!o.menuIsOpen&&e.setState({isOpen:!1})}}),[e,o]),n=$().nF(t,30);return(0,r.useEffect)((()=>(window.addEventListener("mousemove",n),()=>{window.removeEventListener("mousemove",n)})),[n]),null}var Y=()=>t(153321),J=()=>t(726637),X=()=>t(795732),Z=()=>t(970236),ee=()=>t(713998),oe=()=>t(688728),te=()=>t(369186),re=()=>t(806080),ne=()=>t(534177),ie=()=>t(284371),ae=()=>t(348241),se=()=>t(908201),le=()=>t(478726),de=()=>t(143197),ue=()=>t(864994),ce=()=>t(557198),pe=()=>t(295633),me=()=>t(485569),ge=()=>t(852302),ye=()=>t(106412),ve=()=>t(472090);function fe(e){const{wrapper:o,viewsModule:t}=e,{pageStore:n,moduleStateByIdStore:i}=(0,b().bi)(),[s,l]=(0,r.useState)(void 0),{setModuleSelection:d}=(0,b().LH)(),u=(0,r.useMemo)((()=>new(ve().E)),[]),c=(0,r.useCallback)((e=>{e&&u.observe(e)}),[u]),p=(0,a().K8)((()=>u.rect.state.width),[u]);(0,r.useEffect)((()=>{s&&i.set(t.id,{collectionContextStore:s})}),[s,i,t.id]);const m=(0,a().K8)((()=>{var e;return null==s||null===(e=s.collectionViewStore())||void 0===e?void 0:e.getType()}),[s]);(0,r.useEffect)((()=>{s&&"dashboard"===m&&s.setIsInDashboardBuildMode(!0)}),[s,m]);const{collectionViewBlockStore:g,viewsModuleContext:y,isViewsMainModule:v}=(0,a().K8)((()=>{if(!t)return{collectionViewBlockStore:void 0,viewsModuleContext:void 0,isViewsMainModule:!1};const e=pe().B.createChildStore(n,t.collection_view_block_pointer);return{collectionViewBlockStore:e,viewsModuleContext:{location:"layoutBuilder",viewsModule:t,currentPageStore:n,collectionViewBlockStore:e,selectViewsModule:()=>{d&&d({type:"existing_module",moduleId:t.id,isDragging:!1})}},isViewsMainModule:"viewsMain"===t.type}}),[n,t,d]);if(!g||!y)return null;return o((0,F.jsx)("div",{ref:c,children:(0,F.jsx)(ge().l,{children:(0,F.jsx)(ye().tx,{value:{location:"layout_editor",isPreviewing:!0,disableHeaderPointerEvents:!1,disableEditsAndConfiguration:!1,disableContentPointerEvents:!1,disablePageLinks:!0,hideAggregation:!1,hideViewBlockSource:!1,enableHorizontalScroll:!0},children:(0,F.jsx)(me().dN,{store:g,isFullScreen:!1,productUseCase:"page_layout_editor",disabled:!1,disableHoverMenu:!0,headerActionsBehavior:"always_show",headerAllowedActions:he,fullWidth:p,overridePaddingLeft:0,overridePaddingRight:0,setCollectionContextStore:l,showOnlyCurrentView:!v,isUnlistedView:!1,viewsModuleContext:y})})})}))}const he=["filter","sort","minimize"];var be=()=>t(678834),xe=()=>t(402014),Me=()=>t(93583),Se=()=>t(790748),Ie=()=>t(807449),_e=()=>t(380281),je=()=>t(778781),we=()=>t(747100),Te=()=>t(115512),Ce=()=>t(554283),Ae=()=>t(435930),ke=()=>t(823082),Pe=(t(944114),t(737550),()=>t(732810)),Be=()=>t(430896),Fe=()=>t(30537),De=()=>t(250910),Ee=()=>t(546926),Le=()=>t(890492),Oe=()=>t(81068),Re=()=>t(663639),He=()=>t(736847),Ke=()=>t(487929),Qe=()=>t(651124),Ge=()=>t(390066),Ve=()=>t(655923),qe=()=>t(526278),Ne=()=>t(940563),ze=()=>t(112282),$e=()=>t(126617),We=()=>t(566910),Ue=()=>t(236262),Ye=()=>t(475140);var Je=()=>t(120997),Xe=()=>t(789280),Ze=()=>t(334261),eo=()=>t(805833),oo=()=>t(962326),to=()=>t(437426),ro=()=>t(547149),no=()=>t(640868),io=()=>t(259476),ao=()=>t(719849);async function so(e){switch(e){case"property_number":case"property_title":case"property_person":case"property_file":case"property_text":case"property_checkbox":case"property_url":case"property_email":case"property_phone_number":case"property_created_by":case"property_last_edited_by":case"property_button":case"property_select":case"property_multi_select":case"property_status":case"property_date":case"property_created_time":case"property_last_edited_time":case"property_last_visited_time":case"property_relation":case"property_rollup":case"property_formula":case"property_auto_increment_id":case"property_location":case"property_verification":case"property_place":return await async function(){return await ao().f({icon:io().trashSmallIcon,confirmTextStyle:"red",title:(0,F.jsx)(C().sA,{defaultMessage:"Remove property from layout?",id:"deletePropertyActions.title"}),confirmText:(0,F.jsx)(C().sA,{defaultMessage:"Remove",id:"deletePropertyActions.confirmText"}),confirmTextPerRadioOption:{delete_property_and_module:(0,F.jsx)(C().sA,{defaultMessage:"Remove and delete",id:"deletePropertyActions.confirmTextForDeletePropertyAndModule"})},radioOptions:[{key:"delete_module",title:(0,F.jsx)(C().sA,{defaultMessage:"Remove from layout",id:"deletePropertyActions.titleForDeleteModuleOption"}),subtitle:(0,F.jsx)(C().sA,{defaultMessage:"The property will still be visible in database views and in the page’s property group",id:"deletePropertyActions.subtitleForDeleteModuleOption"})},{key:"delete_property_and_module",title:(0,F.jsx)(C().sA,{defaultMessage:"Remove from layout and database",id:"deletePropertyActions.titleForDeletePropertyAndModuleOption"}),subtitle:(0,F.jsx)(C().sA,{defaultMessage:"The property will be removed from both the page layout and the database",id:"deletePropertyActions.subtitleForDeletePropertyAndModuleOption"})}]})}();case"relationsGroup":return await async function(){return await ao().f({icon:io().trashSmallIcon,confirmTextStyle:"red",title:(0,F.jsx)(C().sA,{defaultMessage:"Remove relations group from layout?",id:"deleteRelationsGroupModuleActions.title"}),confirmText:(0,F.jsx)(C().sA,{defaultMessage:"Remove",id:"deleteRelationsGroupModuleActions.confirmText"}),confirmTextPerRadioOption:{delete_property_and_module:(0,F.jsx)(C().sA,{defaultMessage:"Remove and delete",id:"deleteRelationsGroupModuleActions.confirmTextForDeletePropertyAndModule"})},radioOptions:[{key:"delete_module",title:(0,F.jsx)(C().sA,{defaultMessage:"Remove from layout",id:"deleteRelationsGroupModuleActions.titleForDeleteModuleOption"}),subtitle:(0,F.jsx)(C().sA,{defaultMessage:"The relations properties will still be visible in database views and in the page’s property group",id:"deleteRelationsGroupModuleActions.subtitleForDeleteModuleOption"})},{key:"delete_property_and_module",title:(0,F.jsx)(C().sA,{defaultMessage:"Remove from layout and database",id:"deleteRelationsGroupModuleActions.titleForDeletePropertyAndModuleOption"}),subtitle:(0,F.jsx)(C().sA,{defaultMessage:"The relations properties will be removed from both the page layout and the database",id:"deleteRelationsGroupModuleActions.subtitleForDeletePropertyAndModuleOption"})}]})}();case"formSubmit":case"formQuestion":case"formTitle":case"placeholder":case"views":case"transcript":case"row":case"view":return"delete_module";default:(0,ne().HB)(e)}}var lo=()=>t(447934),uo=()=>t(479062),co=()=>t(955363),po=()=>t(212727),mo=()=>t(662971);function go({parent:e,onSelect:o,...t}){const{layoutStore:r}=(0,b().LH)(),n=(0,a().K8)((()=>r.getModules()),[r]),i=(0,a().K8)((()=>Boolean((0,Ye().JO)(n,(e=>"relationsGroup"===e.type)))),[n]),s=(0,F.jsx)(C().sA,{id:"AdvancedModuleMenuItem.originButtonTitle",defaultMessage:"Advanced"}),l=i?(0,F.jsx)(C().sA,{id:"AdvancedModuleMenuItem.buttons.moveToRelationsGroupModule",defaultMessage:"Add to relations group"}):(0,F.jsx)(C().sA,{id:"AdvancedModuleMenuItem.buttons.convertToRelationsGroupModule",defaultMessage:"Convert to relations group"}),d={key:"moveOrConvertToRelationsGroup",render:(e,o)=>(0,F.jsx)(Oe().A,{...e,icon:(0,F.jsx)(Ie().I,{icon:co().arrowDiagonalUpRightIcon}),title:l,caption:(0,F.jsx)(C().sA,{id:"AdvancedModuleMenuItem.moveOrConvertToRelationsGroup.caption",defaultMessage:"Supports minimal or responsive page sections"})}),action:()=>o()};return(0,F.jsx)(mo().A,{...t,onFocus:e.onFocus,renderOrigin:(e,o)=>(0,F.jsx)(Oe().A,{...e,ref:o,title:s,icon:(0,F.jsx)(Ie().I,{icon:po().gearIcon})}),renderExtension:o=>{let t;return t=J().A.isMobile?{menuType:Ee().gu.ActionSheet}:{menuType:Ee().gu.Popup},(0,F.jsx)(Le().A,{...t,...o,children:(0,F.jsx)(Re().A,{type:Re().O.Vertical,initialFocus:0,sections:[{key:"sections",render:e=>(0,F.jsx)(He().A,{...e}),items:[d]}],onAccept:e.onAccept})})}})}const yo={viewBox:"0 0 20 20",fittedViewBox:"2.37 4.12 15.25 11.75",svg:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("path",{d:"M10 6.875c.345 0 .625.28.625.625v1.875H12.5a.625.625 0 1 1 0 1.25h-1.875V12.5a.625.625 0 1 1-1.25 0v-1.875H7.5a.625.625 0 1 1 0-1.25h1.875V7.5c0-.345.28-.625.625-.625"}),(0,F.jsx)("path",{d:"M15.5 4.125c1.174 0 2.125.951 2.125 2.125v7.5a2.125 2.125 0 0 1-2.125 2.125h-11a2.125 2.125 0 0 1-2.125-2.125v-7.5c0-1.174.951-2.125 2.125-2.125zm-11 1.25a.875.875 0 0 0-.875.875v7.5c0 .483.392.875.875.875h11a.875.875 0 0 0 .875-.875v-7.5a.875.875 0 0 0-.875-.875z"})]})},vo=(0,w().wt)("rectangleWidePlus",yo,"default");function fo({propertyGroups:e,propertyIds:o,parent:n,onSelectSectionMove:l,...d}){const u=(0,i().v3)(),c=(0,se().ET)(),p=(0,r.useCallback)((r=>{const n=c.collectionStore();let i=e;for(const e of o)i=(0,t(706665).lT)({propertyGroups:i,propertyId:e,destinationGroupId:r.id});n&&ro().createAndCommit({environment:u,perform(e){(0,t(395963).Yf)({collectionStore:n,newGroups:i,transaction:e})},canUndo:!0,userAction:"MoveToPropertyGroupMenuItem.handlePropertyGroupClick"}),l()}),[c,u,l,e,o]),m=(0,s().IS)((()=>({sectionMenuItem:{paddingTop:4,paddingBottom:4}})),[]),g=(0,a().K8)((()=>e.map((e=>({key:e.id,render:(o,t)=>(0,F.jsx)(Oe().A,{...o,title:e.title}),action:()=>p(e)})))),[p,e]),y=(0,F.jsx)(C().sA,{id:"ModuleActionMenu.buttons.moveToPropertiesGroupButton",defaultMessage:"Add to property group"});return e.length<=1?(0,F.jsx)(Oe().A,{...d,icon:(0,F.jsx)(Ie().I,{icon:vo}),title:y}):(0,F.jsx)(mo().A,{...d,onFocus:n.onFocus,renderOrigin:(e,o)=>(0,F.jsx)(Oe().A,{...e,ref:o,title:y,icon:(0,F.jsx)(Ie().I,{icon:vo})}),renderExtension:e=>{let o;return o=J().A.isMobile?{menuType:Ee().gu.ActionSheet}:{menuType:Ee().gu.Popup,width:200},(0,F.jsx)(Le().A,{...o,...e,children:(0,F.jsx)(Re().A,{type:Re().O.Vertical,initialFocus:0,sections:[{key:"sections",render:e=>(0,F.jsx)(He().A,{...e,style:m.sectionMenuItem,title:(0,F.jsx)(C().sA,{id:"moveToPropertyGroupMenuItem.sections",defaultMessage:"Sections"})}),items:g}],onAccept:n.onAccept})})}})}const ho=r.memo(fo),bo=r.memo((function(e){const{layoutType:o,module:t,isModuleHoveredOrSelected:r}=e;switch(o){case"form":if("formQuestion"===t.type)return(0,F.jsx)(xo,{moduleId:t.id,isModuleHoveredOrSelected:r});break;case"page_in_collection":case void 0:return(0,F.jsx)(Mo,{module:t});default:(0,ne().HB)(o)}return null}));function xo({moduleId:e,isModuleHoveredOrSelected:o}){const{canEditLayout:t}=(0,b().LH)(),r=(0,s().IS)((()=>({actionButton:{position:"absolute",top:10,insetInlineEnd:10,zIndex:1e3}})),[]);return t?(0,F.jsx)("div",{style:r.actionButton,children:(0,F.jsx)(So,{moduleId:e,isModuleHoveredOrSelected:o})}):null}function Mo({module:e}){const{canEditLayout:o}=(0,b().LH)(),t=function(e){const{layoutModule:o}=e,{sessionId:t,layoutStore:n,setModuleSelection:s}=(0,b().LH)(),l=(0,i().v3)(),c=(0,se().ET)(),p=(0,a().K8)((()=>c.collectionStore()),[c]),{collectionSchema:m,collectionFormat:g,propertyGroups:v}=(0,a().K8)((()=>({collectionSchema:null==p?void 0:p.getSchema(),collectionFormat:null==p?void 0:p.getFormat(),propertyGroups:(null==p?void 0:p.getNormalizedPropertyGroups())??[]})),[p]),x=(0,r.useMemo)((()=>g&&m?(0,Ke().T)({format:g,schema:m,visibilityLevels:["inline","minimal"]}).map((e=>e.section)):[]),[g,m]),{layoutType:M,isTabbedLayout:S,viewsMainTabModuleKey:I,currentModulePosition:_,modulesSplitByMoveable:j}=(0,a().K8)((()=>{var e,t;const r=n.getModules(),i=(0,Ye().JO)(r,(e=>e.id===o.id)),a=null==i?void 0:i.area;if("form_conditional_modules"===a)throw new Error("[Forms Conditional Logic Not Implemented] usePageLayoutModuleActionMenuListItems not implemented for form_conditional_modules");const s=a&&("views_main_tab_modules"===a?null==r||null===(e=r[a])||void 0===e?void 0:e[i.viewId]:null==r?void 0:r[a]),l=a&&s&&(0,u().jS)(a,s),d=null===(t=function(e){if(e.views_main_tab_modules)return(0,ne().uv)(e.views_main_tab_modules)}(r))||void 0===t?void 0:t[0];return{layoutType:n.getLayoutType(),isTabbedLayout:n.isTabbedPageLayout(),viewsMainTabModuleKey:d,currentModulePosition:i,modulesSplitByMoveable:l}}),[o.id,n]),w=(0,r.useCallback)((({destinationModuleId:e})=>{M&&((0,d().Hc)(M)?s(void 0):s({type:"existing_module",moduleId:e,isDragging:!1,draggingModuleInitialArea:void 0,draggingModuleFinalArea:void 0}),(0,d().U2)(M)&&(0,h().z)({layoutStore:n,moduleId:e,environment:l}))}),[n,M,s,l]),T=(0,r.useCallback)((({moduleGroup:e,indexOfStartOfGroup:r})=>{if(!j||e.length<=1||null==_||!_.area)return[];const i=e.findIndex((e=>e.id===o.id)),a=-1!==i,s=0===i,d=i===e.length-1,u=r+i,c=[];return a&&!s&&c.push({key:"move-up",render:e=>(0,F.jsx)(Oe().A,{...e,title:(0,F.jsx)(C().sA,{id:"ModuleActionMenu.buttons.moveUpButton",defaultMessage:"Move up"}),icon:(0,F.jsx)(Ie().I,{icon:ze().arrowStraightUpIcon})}),action:()=>{(0,y().E)({environment:l,layoutStore:n,position:{type:"absolute",index:u-1,..."views_main_tab_modules"===(null==_?void 0:_.area)?{area:"views_main_tab_modules",viewId:_.viewId}:{area:_.area}},moduleId:o.id,sessionId:t}),w({destinationModuleId:o.id})}}),a&&!d&&c.push({key:"move-down",render:e=>(0,F.jsx)(Oe().A,{...e,title:(0,F.jsx)(C().sA,{id:"ModuleActionMenu.buttons.moveDownButton",defaultMessage:"Move down"}),icon:(0,F.jsx)(Ie().I,{icon:Ve().arrowStraightDownIcon})}),action:()=>{(0,y().E)({environment:l,layoutStore:n,position:{type:"absolute",index:u+1,..."views_main_tab_modules"===(null==_?void 0:_.area)?{area:"views_main_tab_modules",viewId:_.viewId}:{area:_.area}},moduleId:o.id,sessionId:t}),w({destinationModuleId:o.id})}}),c}),[_,l,o.id,n,j,w,t]),A=(0,r.useMemo)((()=>{const e=[],r=(0,Je().p)(o,"page_details"),i=(null==j?void 0:j.nonMoveableHeaderModules)??[],a=j&&"moveableCenterModules"in j?j.moveableCenterModules:[],d=j&&"moveableFooterModules"in j?f(j.moveableFooterModules,g):[],u=a.some((e=>e.id===o.id)),h=T({moduleGroup:u?a:d,indexOfStartOfGroup:u?i.length:i.length+a.length});if(e.push(...h),"page_main"!==(null==_?void 0:_.area)&&"views_main_tab_modules"!==(null==_?void 0:_.area)||!r?"page_details"===(null==_?void 0:_.area)&&e.push({key:"moveToMainPage",render:e=>(0,F.jsx)(Oe().A,{...e,title:(0,F.jsx)(C().sA,{id:"ModuleActionMenu.buttons.moveToPage",defaultMessage:"Move to page"}),icon:(0,F.jsx)(Ie().I,{icon:qe().arrowStraightLeftIcon})}),action:()=>{S&&I?(0,y().E)({environment:l,position:{type:"area_relative",area:"views_main_tab_modules",viewId:I,location:"end_moveable"},moduleId:o.id,layoutStore:n,sessionId:t}):(0,y().E)({environment:l,position:{type:"area_relative",area:"page_main",location:"end_moveable"},moduleId:o.id,layoutStore:n,sessionId:t}),w({destinationModuleId:o.id})}}):e.push({key:"moveToSidebar",render:e=>(0,F.jsx)(Oe().A,{...e,title:(0,F.jsx)(C().sA,{id:"ModuleActionMenu.buttons.moveToInfoPanel",defaultMessage:"Move to panel"}),icon:(0,F.jsx)(Ie().I,{icon:Ne().arrowStraightRightIcon})}),action:()=>{(0,y().E)({environment:l,position:{type:"area_relative",area:"page_details",location:"end_moveable"},moduleId:o.id,layoutStore:n,sessionId:t}),w({destinationModuleId:o.id})}}),(0,Xe().Fe)(o)&&(0,Xe().wm)(o)){let t=[];(0,je().gx)(o)?t=[o.propertyId]:(0,je().V_)(o)?t=x:(0,ne().HB)(o);const r=()=>{var e;ro().createAndCommitOrAppend({environment:l,transaction:void 0,canUndo:!0,userAction:"ModuleActionsMenu.moveToPropertyGroup",perform(e){for(const o of t)(0,lo().HD)({environment:l,transaction:e,layoutStore:n,property:o})}});const o=null===(e=n.firstModuleOfType("properties"))||void 0===e?void 0:e.id;o?w({destinationModuleId:o}):s(void 0)};e.push({key:"moveToPropertiesGroupModule",render:(e,o)=>(0,F.jsx)(ho,{...e,parent:o,propertyIds:t,onSelectSectionMove:r,propertyGroups:v}),action:r})}if((0,je().Yp)(o)){const t=()=>{var e;ro().createAndCommitOrAppend({environment:l,transaction:void 0,canUndo:!0,userAction:"ModuleActionsMenu.moveToRelationsGroupModule",perform(e){const t=n.getCollectionModel();if(!t)return;const r=Pe().m.createChildStore(n,t.pointer);(0,lo().HD)({environment:l,transaction:e,layoutStore:n,property:o.propertyId}),(0,eo().Z)({property:o.propertyId,visibility:"inline",schema:t.getSchema(),format:t.getFormat(),collectionStore:r,environment:l,transaction:e})}});const t=null===(e=n.firstModuleOfType("relationsGroup"))||void 0===e?void 0:e.id;t?w({destinationModuleId:t}):s(void 0)};e.push({key:"moveToRelationsGroup",render:(e,o)=>(0,F.jsx)(go,{parent:o,onSelect:t,...e}),action:t})}if((0,Xe().Fe)(o)){const r=async()=>{var e;if(null==_||!_.area||!m)return;const r=await so(o.type);if(r)switch(r){case"delete_module":ro().createAndCommitOrAppend({environment:l,transaction:void 0,canUndo:!0,perform(e){const r=n.getCollectionModel();if((0,je().gx)(o))(0,lo().HD)({environment:l,transaction:e,layoutStore:n,property:o.propertyId}),p&&r&&Ze().D7({transaction:e,property:o.propertyId,visibility:"show",format:r.getFormat(),store:p});else if((0,je().V_)(o))for(const o of x)(0,lo().HD)({environment:l,transaction:e,layoutStore:n,property:o}),p&&r&&Ze().D7({transaction:e,property:o,visibility:"show",format:r.getFormat(),store:p});else(0,no().U)({environment:l,layoutStore:n,position:{..."views_main_tab_modules"===(null==_?void 0:_.area)?{area:"views_main_tab_modules",viewId:_.viewId}:{area:_.area},moduleId:o.id},sessionId:t})},userAction:"ModuleActionsMenu.removePropertyFromLayout.deleteModule"});const a=null===(e=n.firstModuleOfType("properties"))||void 0===e?void 0:e.id;return void(a&&w({destinationModuleId:a}));case"delete_property_and_module":let d=[];if((0,je().gx)(o)?d=[o.propertyId]:(0,je().V_)(o)&&(d=x||[]),d.length)for(const e of d){var i;(0,oo().B)({collectionContextStore:c,environment:l,property:e,schema:m,from:"table_column"}),(0,uo().PS)({environment:l,module:o,sessionId:t,collectionId:null===(i=n.getCollectionModel())||void 0===i?void 0:i.id,layoutId:n.id,context:(0,oe().We)(null==_?void 0:_.area),area:null==_?void 0:_.area,depth:0})}else(0,no().U)({environment:l,layoutStore:n,sessionId:t,position:{..."views_main_tab_modules"===(null==_?void 0:_.area)?{area:"views_main_tab_modules",viewId:_.viewId,moduleId:o.id}:{area:_.area,moduleId:o.id}}});return void s(void 0);default:(0,ne().HB)(r)}};e.push({key:"removeModule",render:e=>(0,je().gx)(o)?(0,F.jsx)(to().$,{...e,getTitleOverride:({isRequiredProperty:e})=>e?void 0:(0,F.jsx)(C().sA,{id:"ModuleActionMenu.buttons.removeFromPropertyModule",defaultMessage:"Remove from layout"}),collectionContextStore:c,property:o.propertyId}):(0,F.jsx)(Oe().A,{...e,title:(0,F.jsx)(C().sA,{id:"ModuleActionMenu.buttons.removeFromModule",defaultMessage:"Remove from layout"}),isRedOnHover:!0,icon:(0,F.jsx)(Ie().I,{icon:Ue().trashIcon})}),action:r})}return"discussions"===o.type&&p&&g&&m&&e.push({key:"hidePageDiscussions",render:e=>(0,F.jsx)(Oe().A,{...e,title:(0,F.jsx)(C().sA,{id:"ModuleActionMenu.buttons.hidePageDiscussions",defaultMessage:"Hide page discussions"}),icon:(0,F.jsx)(Ie().I,{icon:We().e})}),action:()=>{const e=(0,Ge().L)(g,m,void 0,Qe().jf.Collection);Ze().OD({environment:l,pageSection:"comments",visibility:"section_hide",store:p,format:e})}}),e}),[o,j,_,l,n,t,w,S,I,x,s,v,m,c,T,g,p]);return A}({layoutModule:e}),n=(0,s().IS)((()=>({actionButton:{position:"absolute",top:4,insetInlineEnd:4,zIndex:1e3}})),[]);return o&&0!==t.length?(0,F.jsx)("div",{style:n.actionButton,children:(0,F.jsx)(Io,{moduleId:e.id,menuListItems:t})}):null}function So({moduleId:e,isModuleHoveredOrSelected:o}){const{layoutStore:t,setModuleSelection:r}=(0,b().LH)(),n=(0,a().K8)((()=>t.getModuleById(e)),[t,e]),i=(0,a().K8)((()=>{if(n&&"formQuestion"===n.type)return Be().c.createChildStore(t,{table:"form_question",id:n.formQuestionId,spaceId:t.getSpaceId()??""})}),[t,n]),l=P(),d=(0,s().IS)((()=>({iconStyle:{width:w().Ev.sm,height:w().Ev.sm,fill:k().Tj.blue.icon.accentPrimary}})),[]),u=(0,C().tz)();if(!n||!i)return null;const c=u.formatMessage({id:"FormLayoutModuleActionMenu.editQuestion.tooltip",defaultMessage:"Edit question"});return(0,F.jsx)("div",{style:{opacity:o?1:0,pointerEvents:o?"auto":"none",transition:"opacity 200ms ease",borderRadius:4,height:24},children:(0,F.jsx)(_().m,{render:o=>(0,F.jsx)(I().A,{...o,icon:$e().ellipsisSmallIcon,hasBackground:!0,style:{...l.button,cursor:"pointer"},iconStyle:d.iconStyle,pressedStyle:l.buttonPressed,hoveredStyle:l.buttonHovered,ariaLabel:c,onMouseDown:e=>{(0,xe().SQ)(e,xe().y$.EditorMouseDown)},onClick:()=>r({type:"existing_module",moduleId:e,isDragging:!1,draggingModuleInitialArea:void 0,draggingModuleFinalArea:void 0})}),renderTooltip:()=>c})})}function Io({moduleId:e,menuListItems:o}){const t=(0,C().tz)(),n=(0,r.useMemo)((()=>[{type:"actionGroup",label:t.formatMessage({id:"ModuleActionMenu.openButton",defaultMessage:"Action menu for module"}),icon:$e().ellipsisSmallIcon,menuListItems:o}]),[t,o]);return(0,F.jsx)(jo,{moduleId:e,actionMenuItems:n,isModuleHoveredOrSelected:!0,boxShadow:!1})}function _o({isFirst:e,isLast:o}){return{borderStartStartRadius:e?4:0,borderEndStartRadius:e?4:0,borderStartEndRadius:o?4:0,borderEndEndRadius:o?4:0,borderInlineEnd:"solid rgba(15, 15, 15, 0.1)",borderInlineEndWidth:o?0:1}}function jo({moduleId:e,actionMenuItems:o,isModuleHoveredOrSelected:t,boxShadow:n}){const[i,a]=(0,r.useState)(!1),s=(0,r.useCallback)((e=>{a(e)}),[]);return(0,F.jsx)("div",{style:{opacity:t||i?1:0,pointerEvents:t||i?"auto":"none",transition:"opacity 200ms ease",borderRadius:4,height:24,boxShadow:n?"rgba(15, 15, 15, 0.1) 0px 0px 0px 1px, rgba(15, 15, 15, 0.1) 0px 2px 4px":void 0},children:o.map(((e,t)=>{const r=0===t,n=o.length-1===t;switch(e.type){case"action":return(0,F.jsx)(wo,{item:e,isFirst:r,isLast:n},t);case"actionGroup":return(0,F.jsx)(To,{itemGroup:e,isFirst:r,isLast:n,isOpen:i,setIsOpen:s},t)}}))})}function wo({item:e,isFirst:o,isLast:t}){const{layoutStore:r}=(0,b().LH)(),n=(0,a().K8)((()=>r.getLayoutType()),[r]),i=(0,s().IS)((()=>({iconButton:{..._o({isFirst:o,isLast:t})},icon:{..."form"===n?{fill:k().Tj.icon.secondary}:{}}})),[o,t,n]);return(0,F.jsx)(_().m,{render:o=>(0,F.jsx)(I().A,{...o,icon:e.icon,hasBackground:!0,ariaLabel:e.label,style:i.iconButton,iconStyle:i.icon,onMouseDown:e=>{(0,xe().SQ)(e,xe().y$.EditorMouseDown)},onClick:e.action}),renderTooltip:()=>e.tooltipLabel??null,disableTooltip:!e.tooltipLabel})}function To({itemGroup:e,isFirst:o,isLast:t,isOpen:r,setIsOpen:n}){const{layoutStore:i}=(0,b().LH)(),l=(0,a().K8)((()=>i.getLayoutType()),[i]),d=(0,s().IS)((()=>({iconButton:{..._o({isFirst:o,isLast:t})},icon:{width:w().Ev.sm,height:w().Ev.sm,..."form"===l?{fill:k().Tj.icon.secondary}:{fill:k().Tj.blue.text.accentPrimary}},iconButtonHovered:{..."form"===l?void 0:{background:k().Tj.blue.background.secondaryTranslucent}},sectionMenuItem:{paddingTop:4,paddingBottom:4}})),[o,t,l]);return(0,F.jsx)(De().A,{alignmentToOrigin:"end",popupType:Fe().n.Popup,onClose:()=>n(!1),onClick:()=>n(!0),open:r,render:()=>(0,F.jsx)(Le().A,{menuType:Ee().gu.Popup,onClick:()=>n(!1),children:(0,F.jsx)(Re().A,{initialFocus:void 0,sections:[{key:0,render:e=>(0,F.jsx)(He().A,{...e,desktopStyle:d.sectionMenuItem}),items:e.menuListItems}],type:Re().O.Vertical})}),renderOrigin:o=>(0,F.jsx)(I().A,{...o,icon:e.icon,hasBackground:"form"===l,ariaLabel:e.label,style:d.iconButton,iconStyle:d.icon,onMouseDown:e=>{(0,xe().SQ)(e,xe().y$.EditorMouseDown)},hoveredStyle:d.iconButtonHovered,pressedStyle:d.iconButtonHovered})})}const Co=(0,r.createContext)(void 0);Co.displayName="PageEditorModuleContext";const Ao=Co.Provider;const ko=!1,Po=10,Bo=8;function Fo(e){const{isSelected:o,isDragging:t,isConfigurable:n,isDraggable:i}=function(){const e=(0,r.useContext)(Co);if(!e)throw new Error("PageEditorModuleContext not found");return e}(),{style:l,children:d,module:u,area:c,moduleMaxHeight:p}=e,m="placeholder"===u.type,{setModuleSelection:g,layoutStore:y,currentModuleSelection:v}=(0,b().LH)(),[f,h]=(0,Ce().B)(),M=(0,r.useRef)(null),S=(0,Me().A)(f,M),I=(0,a().K8)((()=>{var e;return null===(e=y.getModel())||void 0===e?void 0:e.getLayoutType()}),[y]),_=(0,a().K8)((()=>(0,we().cq)(y)),[y]),j=x();(0,Se().b)(A().A,(()=>({layoutStore:y,moduleId:u.id,moduleType:u.type,area:c,getNode:()=>M.current})),[y,u,M,c]);const w=(0,r.useCallback)((e=>{if(!n||"viewsMain"===u.type)return{};const r={margin:0,borderRadius:"form"===I?12:Bo,...!n||i||"form"===I&&m?{}:{cursor:"pointer",margin:"0 0 12px 0"},padding:"form"!==I||m?0:12,transition:"box-shadow 0.3s"};if(t&&!m)return{...r,...(0,Te().nl)({width:3,color:k().Tj.blue.border.accentPrimary}),transform:"scale(1.03)",transition:"transform 0.8s cubic-bezier(0.5, -1.5, 0.5, 2)"};if(o&&!m)return{...r,...(0,Te().nl)({width:3,color:k().Tj.blue.border.accentPrimary})};const a=null==v?void 0:v.isDragging;return h&&!a?{...r,...(0,Te().nl)({width:3,color:"light"===e?k().Tj.blue.border.strong:k().Tj.blue.text.tertiary})}:{...r,...(0,Te().nl)({width:1,color:"light"===e?k().Tj.blue.border.strong:k().Tj.blue.text.tertiary})}}),[null==v?void 0:v.isDragging,n,i,t,h,m,o,I,u.type]),T=(0,s().eP)(),C=(0,s().IS)((()=>{const e=w(T),o="form"!==I?Po:"cover"===u.type?0:"formTitle"===u.type?j:Po,t=m?k().Tj.palette.uiBlue[75]:"form"===I&&_?k().Tj.background.elevated:k().Tj.background.primary,r="light"===T?k().Tj.palette.gray[0]:k().Tj.palette.gray[50];return{labelContainer:{height:32,backgroundColor:"light"===T?k().Tj.palette.uiBlue[100]:k().Tj.palette.uiBlue[200],display:"flex",alignItems:"center",gap:4,padding:6},noDragHandle:{},label:{fontSize:14,fontWeight:500,color:k().Tj.blue.text.accentPrimary,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",paddingInlineEnd:24},previewContainer:{padding:12},container:{background:t,width:"100%",position:"relative",marginBottom:o,...n?e:{},overflow:"formTitle"!==u.type&&"viewsMain"!==u.type?"hidden":void 0,...l},mouseEventCover:{position:"absolute",top:0,insetInlineStart:0,insetInlineEnd:0,bottom:0,zIndex:999},contentFadedOverlay:{borderRadius:Bo,position:"absolute",background:`linear-gradient(to bottom, transparent 0%, ${r} 100%)`,width:"100%",height:p?.4*p+"px":void 0,top:p?.6*p+"px":void 0},overflowContainer:{borderRadius:Bo,height:`calc(100% - ${2*Te().MH}px)`,width:`calc(100% - ${2*Te().MH}px)`,insetInlineStart:`${Te().MH}px`,overflow:"hidden",position:"relative"}}}),[w,n,u.type,l,I,j,m,_,p,T]),P="form"!==I&&!ko&&"viewsMain"!==u.type,B=((0,ke().H)(u),h||o),D="editor"===u.type,E="discussions"===u.type;return(0,F.jsxs)("div",{style:C.container,ref:S,onClick:e=>{n&&!i&&"viewsMain"!==u.type&&g({type:"existing_module",moduleId:u.id,isDragging:!1}),n&&(0,xe().SQ)(e,xe().y$.Click)},className:"cover"===u.type?G().pv:G().hg,children:["form"!==I&&"viewsMain"!==u.type&&n?(0,F.jsxs)("div",{style:C.overflowContainer,children:[(0,F.jsxs)("div",{style:C.labelContainer,children:[i?(0,F.jsx)(Ie().I,{icon:_e().O,size:"sm",colorPalette:"blue",colorVariant:"accentPrimary"}):(0,F.jsx)("div",{style:C.noDragHandle}),(0,F.jsx)("div",{style:C.label,children:(0,F.jsx)(Do,{module:u})})]}),(0,F.jsx)("div",{style:C.previewContainer,children:d}),D||E?(0,F.jsx)("div",{style:C.contentFadedOverlay}):void 0]}):d,P?(0,F.jsx)("div",{style:C.mouseEventCover}):void 0,n?(0,F.jsx)(bo,{layoutType:I,module:u,isModuleHoveredOrSelected:B}):void 0]})}function Do(e){const{module:o}=e;return(0,je().gx)(o)?(0,F.jsx)(Eo,{module:o}):(0,F.jsx)(C().sA,{...Ae().s[o.type]})}function Eo(e){const{module:o}=e,{collectionStore:t}=(0,b().bi)(),r=(0,a().K8)((()=>t.getSchema()),[t]),n=(0,a().K8)((()=>r[o.propertyId]),[o,r]);return n?(0,F.jsx)(F.Fragment,{children:n.name}):null}var Lo=()=>t(874832),Oo=()=>t(31503),Ro=()=>t(721479),Ho=()=>t(599806),Ko=()=>t(543886),Qo=()=>t(894995),Go=()=>t(630960),Vo=()=>t(471645),qo=()=>t(279897),No=()=>t(511177),zo=()=>t(266405),$o=()=>t(646796),Wo=()=>t(694009),Uo=()=>t(260850);function Yo({layoutStore:e,formQuestionId:o}){const t=(0,i().v3)(),n=(0,se().ET)(),s=(0,r.useRef)(null),{canEditLayout:l}=(0,b().LH)(),{collectionStore:d,formBlock:u}=(0,a().K8)((()=>{var e;return{collectionStore:n.collectionStore(),formBlock:null===(e=n.collectionViewStore())||void 0===e?void 0:e.getFormBlockStore()}}),[n]);if(!d)throw new Error("No collection store found");const c=(0,a().K8)((()=>e.getSpaceId()),[e]),p=(0,a().K8)((()=>{if(c)return Be().c.createChildStore(e,{table:"form_question",id:o,spaceId:c})}),[o,e,c]),m=(0,a().K8)((()=>!(null!=p&&p.isReady())),[p]),g=(0,a().K8)((()=>{var e;if(p)return null===(e=p.getConfig())||void 0===e?void 0:e.propertyId}),[p]),y=(0,a().K8)((()=>{const e=d.getSchema();return e?Object.keys(e):[]}),[d]),v=(0,a().K8)((()=>{const e=d.getSchema();if(e&&g)return(0,ee()._g)({schema:e,property:g})}),[d,g],{useDeepEqual:!0}),f=(0,$o().W)({inMemoryRecordCacheName:"FormQuestionTemporaryRecordCache",collectionSchemaPropertyIds:y,collectionId:d.id,spaceId:c,formMode:"builder"}),h=(0,a().K8)((()=>{const e=d.getSchema();if(!e||!p)return"generic_error";return(0,zo().e)(t,p,e,null==u?void 0:u.hasSitePublicPermission())}),[d,t,u,p]),{autofocusedQuestionTextStore:x}=(0,ae().cJ)(),M=(0,a().K8)((()=>Boolean(x.state&&x.state.questionId===(null==p?void 0:p.id))),[x,null==p?void 0:p.id]);return(0,r.useEffect)((()=>{var e,o;p&&(M&&("title"===(null===(e=x.state)||void 0===e?void 0:e.questionInputType)?(0,Wo().C)({environment:t,store:p.getNameStore(),canSelectAllBlocks:!1,contentEditableContextId:void 0}):"description"===(null===(o=x.state)||void 0===o?void 0:o.questionInputType)&&(0,Uo().z)({store:p.getDescriptionStore()}),x.clear()))}),[x,t,M,p]),m?(0,F.jsx)(Jo,{}):p&&g&&d&&f?(0,F.jsxs)("div",{ref:s,children:[(0,F.jsx)(Xo,{formQuestionStore:p}),h?(0,F.jsx)(ot,{questionErrorState:h,propertyType:null==v?void 0:v.type}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Zo,{formQuestionStore:p}),v&&(0,Oo().OG)(v)?(0,F.jsx)(et,{formQuestionStore:p,propertySchema:v}):void 0,(0,F.jsx)(Ho().qm,{store:f,property:g,disabled:!0,locked:!l,surface:"form_editor",blockPropertyValueOverlayStore:Ko().A,collectionStore:d,tableWrap:!1,formQuestionStore:p},g)]})]}):null}function Jo(){const e=(0,s().IS)((()=>({questionTitleShimmer:{borderRadius:8,height:22,width:200},questionInputShimmer:{borderRadius:5,height:16,width:"100%",marginTop:12}})),[]);return(0,F.jsxs)("div",{children:[(0,F.jsx)(Lo().P,{style:e.questionTitleShimmer}),(0,F.jsx)(Lo().P,{style:e.questionInputShimmer})]})}function Xo({formQuestionStore:e}){const o=(0,i().v3)(),t=(0,se().ET)(),{collectionStore:n}=(0,ae().cJ)(),{canEditLayout:s}=(0,b().LH)(),l=(0,a().K8)((()=>Boolean(t.normalizedSchemaStore.state)),[t]),d=(0,r.useMemo)((()=>(0,$().sg)((()=>{(0,Qo().maybeSyncQuestionNameToPropertyName)({environment:o,questionStore:e,collectionStore:n,collectionContextStore:t})}),500)),[t,n,o,e]),u=!s;return l&&n?(0,F.jsx)(No().j,{formMode:"builder",disabled:u,onChange:d,formQuestionStore:e}):null}function Zo({formQuestionStore:e}){const{canEditLayout:o}=(0,b().LH)(),t=!o;return(0,F.jsx)(Vo().P,{disabled:t,formQuestionStore:e,formMode:"builder"})}function et(e){return(0,F.jsx)(qo().A,{...e,formMode:"builder"})}function ot({questionErrorState:e,propertyType:o}){const t=(0,s().IS)((()=>({helpIcon:{marginInlineStart:6},container:{display:"flex",flexDirection:"row",alignItems:"center",paddingInlineStart:8},textSpan:{color:k().Tj.text.tertiary}})),[]),n=(0,r.useMemo)((()=>{switch(e){case"deleted_property":return(0,F.jsx)(C().sA,{id:"BrokenLinkedPropertyWarning.deletedProperty",defaultMessage:"This question’s corresponding property has been deleted."});case"invalid_property_type":return(0,F.jsx)(C().sA,{id:"BrokenLinkedPropertyWarning.invalidProperty",defaultMessage:"This question’s corresponding property is not supported."});case"invalid_property_type_for_public_form":return"person"===o?(0,F.jsx)(C().sA,{id:"BrokenLinkedPropertyWarning.invalidPublicProperty.person",defaultMessage:"Person property is not supported in public forms."}):(0,F.jsx)(C().sA,{id:"BrokenLinkedPropertyWarning.invalidPublicProperty.generic",defaultMessage:"This question’s linked property type is not supported in public forms."});case"related_collection_not_public":return(0,F.jsx)(C().sA,{...Go().yh.relatedCollectionNotPublic});case"generic_error":return(0,F.jsx)(C().sA,{id:"BrokenLinkedPropertyWarning.message",defaultMessage:"Something is wrong with this linked property."})}}),[o,e]),i=(0,r.useMemo)((()=>{switch(e){case"deleted_property":return(0,F.jsx)(C().sA,{id:"BrokenLinkedPropertyWarning.deletedProperty.helperTooltip",defaultMessage:"Delete this question or link it to a different property."});case"invalid_property_type":return(0,F.jsx)(C().sA,{id:"BrokenLinkedPropertyWarning.invalidProperty.helperTooltip",defaultMessage:"Change the question type to a supported type"});case"generic_error":return(0,F.jsx)(C().sA,{id:"BrokenLinkedPropertyWarning.genericError.helperTooltip",defaultMessage:"Delete this question or link it to a different property."})}}),[e]);return(0,F.jsxs)("div",{style:t.container,children:[(0,F.jsx)("span",{style:t.textSpan,children:n}),(0,F.jsx)(_().m,{renderTooltip:()=>(0,F.jsx)("div",{style:{width:240,whiteSpace:"pre-wrap"},children:i}),disableTooltip:"invalid_property_type_for_public_form"===e||"related_collection_not_public"===e,render:o=>"invalid_property_type_for_public_form"===e||"related_collection_not_public"===e?null:(0,F.jsx)("div",{...o,style:t.helpIcon,children:(0,F.jsx)(Ie().I,{icon:Ro().questionMarkCircleSmallIcon,size:"sm",colorVariant:"secondary"})})})]})}var tt=()=>t(963900),rt=()=>t(661344),nt=()=>t(601726),it=()=>t(578405),at=()=>t(660197),st=(t(672577),()=>t(664594)),lt=()=>t(300474),dt=()=>t(951500),ut=()=>t(792485),ct=()=>t(876338),pt=()=>t(718827),mt=()=>t(127833),gt=()=>t(631524),yt=()=>t(214388),vt=()=>t(412532),ft=()=>t(626466);const ht={viewBox:"0 0 16 16",fittedViewBox:"1.87 1.87 12.26 12.26",svg:(0,F.jsx)("path",{d:"M1.875 4a2.125 2.125 0 1 1 2.75 2.032V10c0 .76.616 1.375 1.375 1.375h3.968a2.126 2.126 0 1 1 0 1.25H6A2.625 2.625 0 0 1 3.375 10V6.032A2.13 2.13 0 0 1 1.875 4M4 3.125a.875.875 0 1 0 0 1.75.875.875 0 0 0 0-1.75M11.125 12a.875.875 0 1 0 1.75 0 .875.875 0 0 0-1.75 0"})},bt=(0,w().wt)("nodeTopLeftBottomRightSmall",ht,"small");var xt=()=>t(37165),Mt=()=>t(751735),St=()=>t(249947),It=()=>t(832857),_t=()=>t(98205),jt=()=>t(339798),wt=()=>t(447453),Tt=()=>t(261503),Ct=()=>t(991249),At=()=>t(528093);function kt(e){const{parentModule:o}=e,t=(0,dt().l)(o.conditionalGroups);return t?(0,F.jsx)(F.Fragment,{children:t.map((e=>(0,F.jsx)(Pt,{conditionalGroup:e,parentModule:o},e.id)))}):null}function Pt(e){const{conditionalGroup:o,parentModule:t}=e,n=(0,i().v3)(),l=(0,st().T)(),{setModuleSelection:d,currentModuleSelection:u,canEditLayout:c,layoutStore:m,sessionId:v}=(0,b().LH)(),f=(0,lt().r)(),{formConditionalGroupsStore:h}=(0,ae().cJ)(),x=(0,a().K8)((()=>{const e=(0,_t().h8)(t.id,o.id);return!h.state.conditionalGroupCollapsedStates[e]}),[o.id,h,t.id]),M=(0,r.useMemo)((()=>new(g().A)),[]),[S,I]=(0,r.useState)(!1),[_,j]=(0,r.useState)(!1),w=(0,s().IS)((()=>({conditionalGroupContainer:{display:"flex",cursor:"auto",paddingTop:20},conditionalGroupContent:{display:"flex",flexDirection:"column",paddingBottom:12,paddingInlineStart:10,marginInlineStart:4,cursor:"auto",flexGrow:1}})),[]),T=(0,r.useMemo)((()=>{var e;const r=null===(e=t.conditionalGroups)||void 0===e?void 0:e.find((e=>e.id===o.id));return r?r.children??[]:[]}),[o,t]),C=(0,r.useCallback)((e=>{const o="existing_module"===(null==u?void 0:u.type)&&u.moduleId===e;return(0,F.jsx)(zt,{pageModuleId:e,active:o,area:"form_conditional_modules"})}),[u]),A=(0,a().K8)((()=>{const e=m.getModules().form_conditional_modules;if(!e)return!0;return T.some((o=>"formQuestion"===e[o].type))}),[T,m]),k=(0,At()._)({name:"forms_conditional_logic",spaceId:f,userId:l}),P=null==k?void 0:k.upsell,B=void 0===t.parentModuleId&&P,D=(0,r.useCallback)(((e,{key:r,endPosition:i})=>{(0,y().E)({environment:n,layoutStore:m,position:{type:"absolute",area:"form_conditional_modules",parentConditionalGroupId:o.id,parentModuleId:t.id,index:i},moduleId:r,sessionId:v})}),[o.id,n,m,t.id,v]),E=(0,r.useCallback)((()=>{const e=(0,_t().h8)(t.id,o.id),r=h.state.conditionalGroupCollapsedStates[e];h.setState({conditionalGroupCollapsedStates:{...h.state.conditionalGroupCollapsedStates,[e]:!r}})}),[o.id,h,t.id]),L=(0,r.useCallback)((()=>{d(void 0)}),[d]),O=(0,r.useCallback)((e=>{e&&d({type:"existing_module",moduleId:e,isDragging:!1})}),[d]);return(0,F.jsxs)("div",{onMouseDown:e=>{I(!1),j(!1),(0,xe().SQ)(e,xe().y$.EditorMouseDown,$().D_)},children:[B?(0,F.jsx)(Bt,{upsell:P}):void 0,(0,F.jsxs)("div",{style:w.conditionalGroupContainer,children:[(0,F.jsx)(Ft,{isGroupExpanded:x,toggleGroupVisibility:E}),(0,F.jsxs)("div",{style:w.conditionalGroupContent,children:[(0,F.jsx)(Dt,{parentModule:t,groupId:o.id,trigger:o.trigger,isGroupExpanded:x,filterOptionsPopupOpen:S,setFilterOptionsPopupOpen:I,filterOperatorPopupOpen:_,setFilterOperatorPopupOpen:j}),x?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(p().Ay,{className:G().hg,store:M,keys:T,direction:"vertical",onDrop:(e,o)=>{D(e,o)},onDragCancel:L,hoverCursorStyleOverride:1===T.length?"pointer":void 0,onClick:O,draggingStyle:{display:void 0},draggingStyleForNonDraggedItems:{display:void 0},renderKey:e=>C(e),disabled:!c,gap:24}),A?(0,F.jsx)(Rt,{parentModuleId:t.id,parentConditionalGroupId:o.id}):void 0]}):void 0]})]})]})}function Bt(e){const{upsell:o}=e,t=(0,i().v3)(),r=(0,ut().S)(),n=(0,s().IS)((()=>({container:{color:k().Tj.yellow.text.secondary,background:k().Tj.yellow.background.secondaryTranslucent,borderRadius:6,width:"100%",padding:"10px 22px",marginTop:24,fontSize:14,display:"flex",alignItems:"center"},upgradeButton:{marginInlineEnd:-4,color:k().Tj.yellow.text.secondary,fontWeight:ie().Wy.medium},upgradeButtonHovered:{backgroundColor:(0,Mt().X4)(k().Tj.yellow.text.secondary,.1)},upgradeButtonPressed:{backgroundColor:(0,Mt().X4)(k().Tj.yellow.text.secondary,.2)}})),[]);return(0,F.jsxs)("div",{style:n.container,children:[(0,F.jsx)("div",{style:{width:"90%",marginInlineEnd:10},children:(0,F.jsx)(C().sA,{id:"upgradeForConditionalLogicWarning.warning",defaultMessage:"Conditional logic is only available on Business and Enterprise plan types."})}),(0,F.jsx)(gt().p,{style:n.upgradeButton,hoveredStyle:n.upgradeButtonHovered,pressedStyle:n.upgradeButtonPressed,onMouseDown:()=>{Ct().K(t,{upsell:o,from:"forms_conditional_logic",spaceStore:(0,ct().$)(r)})},children:(0,F.jsx)(C().sA,{id:"upgradeForConditionalLogicWarning.upgrade",defaultMessage:"Upgrade"})})]})}function Ft(e){const{isGroupExpanded:o,toggleGroupVisibility:t}=e,r=(0,s().eP)(),n=(0,s().IS)((()=>({groupBar:{gap:6,opacity:"light"===r?.5:.75,color:k().Tj.blue.text.tertiary,display:"flex",flexDirection:"column",alignItems:"center",marginTop:3,paddingInlineStart:26},toggleHovered:{background:void 0,opacity:"light"===r?.8:1},toggleIcon:{transform:o?"rotate(180deg)":"rotate(90deg)",fill:k().Tj.blue.text.tertiary}})),[o,r]);return(0,F.jsxs)(pt().Ay,{style:n.groupBar,onClick:t,hoveredStyle:n.toggleHovered,pressedStyle:n.toggleHovered,children:[(0,F.jsx)(Ie().I,{icon:vt().l,size:"xs",style:n.toggleIcon}),(0,F.jsx)("div",{style:{width:2,flexGrow:1,background:"linear-gradient(0deg, rgba(35, 131, 226, 0) 0px, rgba(35, 131, 226, 0.57) 64px)",borderRadius:1,opacity:.4}})]})}function Dt(e){const{isGroupExpanded:o,groupId:t,trigger:n,parentModule:l,filterOptionsPopupOpen:d,setFilterOptionsPopupOpen:u,filterOperatorPopupOpen:c,setFilterOperatorPopupOpen:p}=e,m=(0,C().tz)(),g=(0,i().v3)(),{layoutStore:y,sessionId:v}=(0,b().LH)(),{isCollectionEmpty:f}=(0,ae().cJ)(),h=(0,se().ET)(),x=(0,lt().r)(),M=(0,a().K8)((()=>{const e=n.filter;if((0,yt().gc)(e)&&((0,yt().v0)(e)||(0,yt().as)(e))){return(0,yt().v0)(e)?(0,yt().Zl)(e):(0,yt().SM)(e)}}),[n]),S=(0,r.useMemo)((()=>(0,yt().Ui)(n.filter)?void 0===n.filter.value.value:0===(null==M?void 0:M.length)),[n.filter,M]),j=(0,s().IS)((()=>({indentedBranchContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:14,marginBottom:12},triggerText:{display:"flex",alignItems:"center",gap:4,color:k().Tj.blue.text.tertiary},deleteButton:{width:20,height:20},deleteIcon:{width:18,height:18},triggerOption:{color:k().Tj.blue.text.accentPrimary},descendantCount:{display:"flex",alignItems:"center",gap:4,marginInlineStart:4},popupButton:{display:"flex",padding:"0px 3px",borderRadius:4,color:k().Tj.blue.text.accentPrimary},triggerButtonHoveredStyle:{background:k().Tj.blue.background.primaryTranslucent},triggerButtonPressedStyle:{background:k().Tj.blue.background.primaryTranslucent},chevronIcon:{marginTop:3,marginInlineStart:2},triggerOptionText:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:300,color:S?k().Tj.blue.text.disabled:void 0}})),[S]),[w,T]=(0,r.useState)(!1),A=(0,r.useMemo)((()=>w),[w]),P=(0,a().K8)((()=>y.getModules().form_conditional_modules||{}),[y]),B=(0,r.useMemo)((()=>{var e;const o=null===(e=l.conditionalGroups)||void 0===e?void 0:e.find((e=>e.id===t));if(!o)return 0;let r=0;for(const t of o.children??[]){const e=P[t];if(!e||"formQuestion"!==e.type)continue;const{formQuestionDescendants:o}=(0,_t().Yg)({currentModule:e,nestedModules:P,includePlaceholders:!1});r+=o.length}return r}),[l,t,P]),D=(0,a().K8)((()=>{var e;if(!x)return;const o=Be().c.createChildStore(y,{id:l.formQuestionId,table:xt().lo,spaceId:x}),t=null===(e=h.collectionStore())||void 0===e?void 0:e.getSchema();if(!t)return;const r=t[o.getPropertyId()??""];return(0,Oo().hm)(r,o.getModel())}),[l.formQuestionId,y,x,h]),E=(0,a().K8)((()=>{if(!M||M.length<2||(0,yt().Ui)(n.filter))return;const e=n.filter;return(0,yt().v0)(e)?"any":"enum_contains_all"===e.operator?"all":"any"}),[n,M]),L=(0,a().K8)((()=>{if(!E)return;const e="any"===E?(0,F.jsx)(C().sA,{defaultMessage:"any",id:"FormConditionalLogicModuleRenderer.ConditionTrigger.FilterOperator.any"}):(0,F.jsx)(C().sA,{defaultMessage:"all",id:"FormConditionalLogicModuleRenderer.ConditionTrigger.FilterOperator.all"});return(0,yt().v0)(n.filter)||1===D?e:(0,F.jsx)(mt().zD,{popupType:mt().nl.Popup,placementToOrigin:"bottom",alignmentToOrigin:"start",style:{marginInlineStart:-14},open:c,origin:(0,F.jsxs)(pt().Ay,{onMouseDown:e=>{(0,xe().SQ)(e,xe().y$.EditorMouseDown,$().D_)},onClick:()=>p(!0),style:j.popupButton,hoveredStyle:j.triggerButtonHoveredStyle,pressedStyle:j.triggerButtonPressedStyle,children:[e,(0,F.jsx)(Ie().I,{icon:ft().arrowChevronSingleDownFillIcon,size:"xs",style:j.chevronIcon,colorPalette:"blue",colorVariant:"accentPrimary"})]}),onDismiss:()=>p(!1),disableMouseCapture:!0,enableOutsideClickDismiss:!0,originGap:6,render:()=>(0,F.jsx)(Et,{trigger:n,currentOperator:E,parentModule:l,conditionalGroupId:t}),trapFocus:!0})}),[E,n,D,c,p,j,l,t]),O=(0,a().K8)((()=>{if((0,yt().Ui)(n.filter))switch(n.filter.value.value){case!0:return(0,F.jsx)(C().sA,{defaultMessage:"checked",id:"FormConditionalLogicModuleRenderer.ConditionTrigger.IfCheckboxIsChecked"});case!1:return(0,F.jsx)(C().sA,{defaultMessage:"unchecked",id:"FormConditionalLogicModuleRenderer.ConditionTrigger.IfCheckboxIsUnchecked"});default:return(0,F.jsx)(C().sA,{defaultMessage:"Select",id:"FormConditionalLogicModuleRenderer.ConditionTrigger.NoOptionsSelected"})}return M&&0!==M.length?M.map((e=>e.value)).join(", "):(0,F.jsx)(C().sA,{defaultMessage:"Select",id:"FormConditionalLogicModuleRenderer.ConditionTrigger.NoOptionsSelected"})}),[M,n.filter]),R=(0,a().K8)((()=>(0,F.jsx)(mt().zD,{popupType:mt().nl.Popup,placementToOrigin:"bottom",alignmentToOrigin:"start",style:{marginInlineStart:-14},open:d,origin:(0,F.jsxs)(pt().Ay,{style:j.popupButton,onMouseDown:e=>{(0,xe().SQ)(e,xe().y$.EditorMouseDown,$().D_)},onClick:()=>u(!0),hoveredStyle:j.triggerButtonHoveredStyle,pressedStyle:j.triggerButtonPressedStyle,children:[(0,F.jsx)("span",{style:j.triggerOptionText,children:O}),(0,F.jsx)(Ie().I,{icon:ft().arrowChevronSingleDownFillIcon,size:"xs",style:j.chevronIcon})]}),onDismiss:()=>u(!1),disableMouseCapture:!0,enableOutsideClickDismiss:!0,originGap:6,render:()=>(0,F.jsx)(Lt,{parentModule:l,trigger:n,groupId:t}),trapFocus:!0})),[d,O,t,l,u,j,n]),H=(0,r.useCallback)((()=>{T(!0)}),[]),K=(0,r.useCallback)((()=>{T(!1)}),[]),Q=(0,r.useCallback)((()=>{It().FG({environment:g,parentModule:l,layoutStore:y,groupId:t,collectionContextStore:h,isCollectionEmpty:f,sessionId:v})}),[g,l,t,y,h,f,v]),G=(0,a().K8)((()=>(0,yt().v0)(n.filter)||(0,yt().as)(n.filter)?E?(0,F.jsx)(C().sA,{defaultMessage:"If {filterOperatorPopup} of {filterValuesPopup} is selected",id:"FormConditionalLogicModuleRenderer.ConditionTrigger.IfFilterValueIsSelected",values:{filterOperatorPopup:L,filterValuesPopup:R}}):(0,F.jsx)(C().sA,{defaultMessage:"If {filterValuesPopup} is selected",id:"FormConditionalLogicModuleRenderer.ConditionTrigger.SimpleFilter.Trigger",values:{filterValuesPopup:R}}):(0,yt().Ui)(n.filter)?(0,F.jsx)(C().sA,{defaultMessage:"If {filterValuesPopup}",id:"FormConditionalLogicModuleRenderer.ConditionTrigger.Checkbox",values:{filterValuesPopup:R}}):void 0),[E,L,R,n.filter]);return(0,F.jsxs)("div",{style:j.indentedBranchContainer,onMouseMove:H,onMouseLeave:K,children:[(0,F.jsxs)("div",{style:j.triggerText,children:[G,!o&&B>0?(0,F.jsxs)("div",{style:j.descendantCount,children:[(0,F.jsx)(Ie().I,{icon:bt,size:"sm"}),(0,F.jsx)("span",{children:B})]}):void 0]}),A?(0,F.jsx)(_().m,{placement:"top",textWrap:!1,renderTooltip:()=>(0,F.jsx)(C().sA,{defaultMessage:"Delete condition",id:"FormConditionalLogicModuleRenderer.ConditionTrigger.DeleteIcon.Tooltip.title"}),render:e=>(0,F.jsx)(I().A,{style:j.deleteButton,iconStyle:j.deleteIcon,colorPalette:"blue",colorVariant:"accentPrimary",onClick:Q,icon:Ue().trashIcon,ariaLabel:m.formatMessage({defaultMessage:"Delete condition",id:"FormConditionalLogicModuleRenderer.ConditionTrigger.DeleteIcon.title"}),...e})}):void 0]})}function Et(e){const{currentOperator:o,trigger:t,parentModule:r,conditionalGroupId:n}=e,a=(0,i().v3)(),{layoutStore:s}=(0,b().LH)(),l=[{key:"any",render:e=>(0,F.jsx)(Oe().A,{...e,disabled:!1,title:(0,F.jsx)(C().sA,{defaultMessage:"any",id:"FormConditionalLogicModuleRenderer.ConditionTrigger.FilterOperator.any"}),isChecked:"any"===o}),action:()=>{(0,yt().gc)(t.filter)&&(0,yt().as)(t.filter)&&It().Is({environment:a,layoutStore:s,module:r,conditionalGroupId:n,newValue:{...t.filter,operator:"enum_contains"}})}},{key:"all",render:e=>(0,F.jsx)(Oe().A,{...e,disabled:!1,title:(0,F.jsx)(C().sA,{defaultMessage:"all",id:"FormConditionalLogicModuleRenderer.ConditionTrigger.FilterOperator.all"}),isChecked:"all"===o}),action:()=>{(0,yt().gc)(t.filter)&&(0,yt().as)(t.filter)&&It().Is({environment:a,layoutStore:s,module:r,conditionalGroupId:n,newValue:{...t.filter,operator:"enum_contains_all"}})}}],d=[{key:0,render:e=>(0,F.jsx)(He().A,{...e}),items:l}],u={menuType:Ee().gu.Popup,width:200};return(0,F.jsx)(Le().A,{...u,children:(0,F.jsx)(Re().A,{type:Re().O.Vertical,sections:d,onAccept:()=>{},initialFocus:void 0})})}function Lt(e){const{parentModule:o,trigger:t,groupId:r}=e,n=(0,i().v3)(),{layoutStore:s,canEditLayout:l}=(0,b().LH)(),d=(0,se().ET)(),{collectionViewStore:u,schema:c}=(0,a().K8)((()=>{const e=d.collectionStore();if(!e)throw new Error("No collection store found");return{collectionViewStore:d.collectionViewStore(),schema:e.getSchema()}}),[d]);return u?(0,F.jsx)(St().td,{collectionViewId:u.id,propertyFilter:t,schema:c,parentStore:u,onChange:e=>{It().Is({environment:n,layoutStore:s,module:o,conditionalGroupId:r,newValue:e})},onChangeDebounced:re().lQ,onClose:re().lQ,onDelete:re().lQ,onAddToCombinatorFilter:re().lQ,context:St().mL.PropertyFilter,userCanConfigureFilters:l,allowRelativeDateFilter:!1,allowRelativePersonFilter:!1,collectionContextStore:d}):null}function Ot(){const e=(0,s().IS)((()=>({container:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",height:"100%",gap:8,color:k().Tj.blue.text.accentPrimary},plusIcon:{borderRadius:"100%",background:k().Tj.blue.background.secondaryTranslucent,width:20,height:20,padding:2,boxShadow:`0 0 0 3px ${k().Tj.blue.background.secondaryTranslucent}`,marginInlineEnd:4}})),[]);return(0,F.jsxs)("div",{style:e.container,children:[(0,F.jsx)(Ie().I,{icon:j().plusIcon,style:e.plusIcon}),(0,F.jsx)("span",{children:(0,F.jsx)(C().sA,{defaultMessage:"Add or select questions",id:"FormConditionalLogicModuleRenderer.NestedPlaceholderModuleTitle"})})]})}function Rt(e){const o=(0,lt().r)(),t=(0,st().T)(),{parentModuleId:n,parentConditionalGroupId:i}=e,l=(0,se().ET)(),d=(0,r.useRef)(null),u=(0,a().K8)((()=>{const e=(0,Tt().S)(l.settingsStore);return"formQuestionCreateSettings"===(null==e?void 0:e.type)&&l.settingsStore.state.ref===d}),[l.settingsStore,d]),c=(0,s().IS)((()=>({container:{display:"flex",flexDirection:"row",justifyContent:"center",width:"100%",marginTop:12},plusButton:{borderRadius:"100%",background:k().Tj.blue.background.secondaryTranslucent,width:20,height:20,padding:2,boxShadow:`0 0 0 3px ${k().Tj.blue.background.secondaryTranslucent}`,marginInlineEnd:4},pressedStyle:{background:void 0,color:k().Tj.blue.text.accentPrimary},hoveredStyle:{background:void 0,color:k().Tj.blue.text.accentPrimary},buttonStyle:{height:32,color:u?k().Tj.blue.text.accentPrimary:k().Tj.blue.text.tertiary,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gap:8}})),[u]),p=(0,r.useCallback)((()=>{(0,wt().O)({collectionContextStore:l,collectionSettingsStore:l.settingsStore,ref:d}),jt().dP({collectionSettingsStore:l.settingsStore,item:{type:"formQuestionCreateSettings",area:"form_conditional_modules",parentModuleId:n,parentConditionalGroupId:i},ref:d})}),[l,d,n,i]),m=(0,At()._)({name:"forms_conditional_logic",spaceId:o,userId:t});return(null==m?void 0:m.upsell)?null:(0,F.jsx)("div",{style:c.container,ref:d,children:(0,F.jsxs)(gt().p,{onClick:p,onMouseDown:e=>{(0,xe().SQ)(e,xe().y$.EditorMouseDown)},style:c.buttonStyle,pressedStyle:c.pressedStyle,hoveredStyle:c.hoveredStyle,children:[(0,F.jsx)(Ie().I,{icon:j().plusIcon,style:c.plusButton}),(0,F.jsx)("span",{children:(0,F.jsx)(C().sA,{defaultMessage:"Add more questions",id:"FormConditionalLogicModuleRenderer.NestedAddMoreQuestionsButton"})})]})})}var Ht=()=>t(290169);const Kt={transcript:!0,bottomControls:!0,expandedBacklinks:!0,inlinePageSections:!0},Qt=480,Gt=300;function Vt(e){if(e)switch(e.type){case"editor":return Qt;case"discussions":return Gt;default:return}}const qt="16px",Nt=t(757695).Store.createValue(!1,{name:"HEADER_FOCUS_STORE"});function zt({pageModuleId:e,active:o=!1,isDragging:t=!1,area:n,style:i}){const{layoutStore:s}=(0,b().LH)(),l=(0,a().K8)((()=>null==s?void 0:s.getModuleById(e)),[s,e],{useDeepEqual:!0}),d=(0,a().K8)((()=>!!l&&(0,T()._)(l)),[l]),u=(0,a().K8)((()=>{var e;return null===(e=s.getModel())||void 0===e?void 0:e.getLayoutType()}),[s]),p=(0,a().K8)((()=>!J().A.isMobile&&(!!l&&(("form"!==u||"placeholder"!==l.type)&&(0,c().iw)(l)))),[u,l]),m=(0,r.useMemo)((()=>({isSelected:o,isDragging:t,isConfigurable:d,isDraggable:p})),[o,t,d,p]);return l?(0,F.jsx)(Ao,{value:m,children:"form"===u?(0,F.jsx)(Ut,{pageModule:l,style:i}):(0,F.jsx)($t,{pageModule:l,style:i,area:n})}):null}const $t=r.memo(Wt);function Wt({pageModule:e,style:o,area:n}){const{pageStore:l}=(0,b().bi)(),d=(0,a().K8)((()=>Boolean(l.getCover())),[l]),u=(0,te().Lv)(e).type,c=e.type,p=(0,i().v3)(),m=(0,a().K8)((()=>(0,t(577814).A)({environment:p,store:l,pageViewBlockStore:void 0})),[p,l]),g=(0,s().IS)((()=>{return{wrapper:{...(t=e,"viewsMain"===t.type?{minHeight:"500px"}:"editor"===t.type?{maxHeight:`${Qt}px`}:"discussions"===t.type?{maxHeight:`${Gt}px`}:void 0),marginTop:d&&"normalizedTitleWithIcon"===c?"-50px":void 0,...o}};var t}),[d,e,c,o]),y=(0,r.useCallback)((o=>(0,F.jsx)(Fo,{module:e,style:g.wrapper,area:n,moduleMaxHeight:Vt(e),children:o})),[e,g.wrapper,n]);if((0,r.useEffect)((()=>{const e=l.getContentStore();if(e)return de().A.setLimitParents(l,{[e.id]:12}),()=>{de().A.removeLimitParents(l)}}),[l]),Kt[u])return null;switch(c){case"cover":return(0,F.jsx)(Yt,{wrapper:y,pageStore:l,isEditable:!1},`${e.id}-${l.id}`);case"properties":return(0,F.jsx)(er,{pageStore:l,wrapper:y,pageModule:e},`${e.id}-${l.id}`);case"viewsMain":case"views":return(0,F.jsx)(fe,{wrapper:y,viewsModule:e},`${e.id}-${l.id}`);case"property_title":case"property_text":case"property_url":case"property_email":case"property_phone_number":case"property_checkbox":case"property_person":case"property_created_by":case"property_last_edited_by":case"property_file":case"property_select":case"property_multi_select":case"property_status":case"property_number":case"property_date":case"property_created_time":case"property_last_edited_time":case"property_last_visited_time":case"property_formula":case"property_relation":case"property_rollup":case"property_button":case"property_auto_increment_id":case"property_location":case"property_verification":case"property_place":return(0,F.jsx)(t(483832).v,{propertyId:e.propertyId,context:X().R.Frame,disabled:!0,store:l,pageModule:e,wrapper:y,stackPropertyLabelAndValue:!0},`${e.id}-${l.id}`);case"normalizedTitleWithIcon":return(0,F.jsx)(Jt,{wrapper:y,module:e},`${e.id}-${l.id}`);case"editor":return(0,F.jsx)(t(854509).p,{context:X().R.Frame,disabled:!0,handlePlaceholderWrapClick:re().lQ,pageBlockStore:l,editorWrapper:y},`${e.id}-${l.id}`);case"discussions":return(0,F.jsx)(t(257502).d,{store:l,wrapper:y,showDefaultTitle:!0,discussionLocation:"page_discussion",pageDiscussionsRenderState:m},`${e.id}-${l.id}`);case"inlinePageSections":return(0,F.jsx)(Xt,{wrapper:y},`${e.id}-${l.id}`);case"relationsGroup":return(0,F.jsx)(t(996262).z,{pageStore:l,wrapper:y,disabled:!0,context:X().R.Frame,showDefaultTitle:!0});case"transcript":case"bottomControls":case"expandedBacklinks":case"deleted_property":return null;case"formQuestion":case"formTitle":case"formSubmit":case"placeholder":case"recentActivity":case"collaborators":case"teamspaces":case"theirPages":case"row":case"view":throw new Error(`Cannot render ${c} in page layout editor.`);default:(0,ne().HB)(c)}}function Ut({pageModule:e,style:o}){const t=(0,te().Lv)(e).type,{layoutStore:n,canEditLayout:i}=(0,b().LH)(),{formBlockStore:l,headerFocusStore:d,headerMouseStore:u}=(0,ae().cJ)(),c=(0,se().ET)(),p=(0,a().K8)((()=>c.permissionScopesStore.state.canConfigureCollection),[c.permissionScopesStore]),m=(0,r.useCallback)((()=>{u.setState({...u.state,mouseEntered:!0})}),[u]),g=(0,r.useCallback)((()=>{u.setState({...u.state,mouseEntered:!1})}),[u]),y=(0,a().K8)((()=>{var e;const o=null===(e=c.collectionViewBlockStore())||void 0===e?void 0:e.getParentBlockStore();return null==o?void 0:o.getFormatStore().getKeyStore("block_color").getValue()}),[c]),v=(0,a().K8)((()=>"formQuestion"===e.type&&e.conditionalGroups&&e.conditionalGroups.length>0),[e]),f=(0,a().K8)((()=>{var o;return void 0!==(null===(o=n.getModules().form_conditional_modules)||void 0===o?void 0:o[e.id])}),[n,e]),h=(0,s().DP)(),x=(0,s().IS)((()=>({formTitleWrapper:{background:y?(0,k().ed)(y,h).background:void 0}})),[y,h]);if(Kt[t])return null;const M=t=>(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Fo,{module:e,style:o,area:f?"form_conditional_modules":"form_layout_schema",children:t}),v&&"formQuestion"===e.type?(0,F.jsx)(kt,{parentModule:e}):void 0]}),S=e.type;switch(S){case"formTitle":return M((0,F.jsxs)("div",{style:x.formTitleWrapper,children:[(0,F.jsx)("div",{style:{paddingInlineStart:qt},children:(0,F.jsx)(tt().zE,{formBlockStore:l,disabled:!i,formMode:"builder",headerFocusStore:d,onHeaderMouseEnter:m,onHeaderMouseLeave:g})}),(0,F.jsx)(tt().Y1,{collectionContextStore:c,formBlockStore:l})]}));case"formQuestion":return M((0,F.jsx)(Yo,{layoutStore:n,formQuestionId:e.formQuestionId}));case"formSubmit":return null;case"placeholder":return M((0,F.jsx)(Y().P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:f?72:36},transition:{duration:.2},children:f?(0,F.jsx)(Ot,{}):void 0},"placeholderModule"));case"cover":return(0,F.jsx)(Yt,{wrapper:M,pageStore:l,isEditable:p},e.id);case"property_title":case"property_text":case"property_url":case"property_email":case"property_phone_number":case"property_checkbox":case"property_person":case"property_created_by":case"property_last_edited_by":case"property_file":case"property_select":case"property_multi_select":case"property_status":case"property_number":case"property_date":case"property_created_time":case"property_last_edited_time":case"property_last_visited_time":case"property_formula":case"property_relation":case"property_rollup":case"property_button":case"property_auto_increment_id":case"property_location":case"property_verification":case"property_place":case"normalizedTitleWithIcon":case"inlinePageSections":case"expandedBacklinks":case"discussions":case"bottomControls":case"editor":case"transcript":case"properties":case"views":case"viewsMain":case"relationsGroup":case"deleted_property":case"recentActivity":case"collaborators":case"teamspaces":case"theirPages":case"row":case"view":throw new Error("Cannot render these modules in a form.");default:(0,ne().HB)(S)}}function Yt(e){const{wrapper:o,pageStore:t,isEditable:r}=e;return(0,a().K8)((()=>Boolean(t.getCover())),[t])?o((0,F.jsx)(nt().f,{store:t,isEditable:r,onMouseEnter:re().lQ,onMouseLeave:re().lQ,paddingX:0,pageCoverHeight:Ht().B})):(0,F.jsx)("div",{className:G().hg,style:{height:0}})}function Jt(e){const{wrapper:o,module:t}=e,{pageStore:r,collectionStore:n}=(0,b().bi)(),i=(0,a().K8)((()=>n.getFormat()),[n]),s=(0,a().K8)((()=>Boolean(r.getCover())),[r]),{backlinksConfiguredToShowAboveTitle:l}=(0,ce().X1)({format:i}),d=l?(0,F.jsx)("div",{style:{marginTop:8},children:(0,F.jsx)(be().y,{pageStore:r,isButtonVisible:!0})}):void 0,u=(0,se().ET)();return o((0,F.jsx)(at().H,{store:r,context:X().R.Frame,isEditable:!1,headerControls:d,hasCover:s,isInSidePeek:!1,headerFocusStore:Nt,openMenuOnMount:!1,openMenuOnMountCallback:re().lQ,disabled:!0,titlePlaceholder:void 0,collectionContextStore:u,shouldShowTemplatePicker:!1,onTitleChange:re().lQ,onTitleEditText:re().lQ,onTitleEsc:re().lQ,onTitleUntab:re().lQ,onTitleTab:re().lQ,handleHeaderMouseEnter:re().lQ,handleHeaderMouseLeave:re().lQ,isInPageLayoutModuleEditor:!0,layoutModule:t}))}function Xt(e){const{pageStore:o}=(0,b().bi)(),t=(0,a().K8)((()=>o.getSchema()),[o]),r=(0,a().K8)((()=>(0,le().gV)(o)),[o]),n=(0,a().K8)((()=>{if(!r)return;return(r.collection_page_sections||[]).filter((e=>{const r=t[e.section];if(!r||"relation"!==r.type)return;const n=o.getPropertyValue(e.section),i=(0,ee().bG)({relationValue:(0,ee().n)(n),propertySchema:r,getRecordModel:o.getRecordModel,includeNoAccess:!0}).length;return"inline"===e.visibility&&t[e.section]&&0!==i})).map((e=>e.section))}),[r,t,o]);return(n??[]).length>0?(0,F.jsx)(rt().LG,{context:X().R.Frame,disabled:!0,inlinePropertyIDs:n,store:o,wrapper:e.wrapper}):(0,F.jsx)(Zt,{text:"Inline page sections"})}function Zt(e){const o=(0,s().eP)(),t=(0,s().IS)((()=>({text:{fontSize:14,color:"light"===o?k().Tj.palette.gray[500]:k().Tj.palette.gray[600]}})),[o]);return(0,F.jsx)(G().vV,{children:(0,F.jsxs)(O().Ye,{gap:6,children:[(0,F.jsx)("span",{style:t.text,children:e.text}),(0,F.jsx)(Z().E,{content:"Not enabled"})]})})}function er(e){const{pageModule:o,pageStore:t,wrapper:r}=e,n=(0,i().v3)(),{layoutStore:l}=(0,b().LH)(),d=(0,s().IS)((()=>({empty:{color:k().Tj.text.tertiary,fontSize:ie().J.UIRegular.desktop,padding:"0 6px"}})),[]),u=(0,a().K8)((()=>{var e;const t=null==l||null===(e=l.getModel())||void 0===e?void 0:e.getRawPageModuleAreaById(o.id);if(t)return(0,oe().Fw)(t)}),[l,o.id]),c=(0,a().K8)((()=>!(0,ue().g)({environment:n,layoutArea:u,moduleType:o.type,pageViewBlockContext:X().R.Frame})),[n,u,o.type]);return(0,F.jsx)(it().h,{context:X().R.Frame,disabled:!0,store:t,wrapper:r,layoutModule:o,variant:o.variant,customization:{disableContainerPadding:!0,neverShowPropertiesElsewhereInLayout:!0,disableLastRowBottomPadding:!0,stackPropertyLabelAndValue:c,emptyState:(0,F.jsx)("div",{style:d.empty,children:(0,F.jsx)(C().sA,{id:"pageLayout.emptyModule",defaultMessage:"Empty"})})},forceGroupsOpenOrClosed:"open"},`${o.id}-${t.id}`)}const or={display:void 0};function tr(e){const{area:o}=e;if("form_conditional_modules"===o)throw new Error("[Forms Conditional Logic] Can't render builder layout modules for nested form_conditional_modules directly.");const t=(0,i().v3)(),{sessionId:v,layoutStore:S,currentModuleSelection:I,setModuleSelection:_,canEditLayout:j,layoutBuilderModuleSelectionStore:w}=(0,b().LH)(),T=(0,r.useRef)(null),C=(0,M().ub)({layoutStore:S,pageStoreId:void 0}),A=(0,a().K8)((()=>S.isTabbedPageLayout()),[S]),k=x(),P=(0,a().K8)((()=>{var t;const r="views_main_tab_modules"===o?(null===(t=C[o])||void 0===t?void 0:t[null==e?void 0:e.viewsMainTabId])||[]:C[o]??[];return(0,u().jS)(o,r)}),[o,C,null==e?void 0:e.viewsMainTabId],{useDeepEqual:!0}),B=P.nonMoveableHeaderModules,D=(0,r.useMemo)((()=>"moveableCenterModules"in P?P.moveableCenterModules:[]),[P]),E=(0,r.useMemo)((()=>"moveableFooterModules"in P?P.moveableFooterModules:[]),[P]),O=P.nonMoveableFooterModules,R=(0,a().K8)((()=>{const e=w.state;if(null!=e&&e.isDragging){const t=e.draggingModuleInitialArea,r=e.draggingModuleFinalArea;return{isDraggingIntoThisArea:t.area!==o&&r.area===o,isDraggingFromThisAreaToOtherArea:t.area===o&&r.area!==o,isDraggingAnyModuleList:!0,dragArea:r}}return{isDraggingIntoThisArea:!1,isDraggingFromThisAreaToOtherArea:!1,isDraggingAnyModuleList:!1,dragArea:void 0}}),[o,w]),H=(0,r.useMemo)((()=>D.map((e=>{const t="form_layout_schema"!==o||"placeholder"!==e.type;return{key:e.id,draggable:t}}))),[o,D]),K=(0,a().K8)((()=>S.getCollectionFormat()),[S]),Q=(0,r.useMemo)((()=>f(E,K).map((e=>({key:e.id,draggable:!0})))),[E,K]),V=(0,r.useMemo)((()=>new(g().A)),[]),q=(0,r.useMemo)((()=>new(g().A)),[]),z=(0,r.useMemo)((()=>new(g().A)),[]),$=(0,a().K8)((()=>V.state.isDragging),[V]),W=(0,a().K8)((()=>q.state.isDragging),[q]),Y=(0,a().K8)((()=>z.state.isDragging),[z]),J=(0,a().K8)((()=>{var e;return null===(e=S.getModel())||void 0===e?void 0:e.getLayoutType()}),[S]);(0,r.useEffect)((()=>{T.current&&R.isDraggingIntoThisArea&&(0,l().$)({element:T.current,environment:t,additionalPadding:{top:200,bottom:200}})}),[R.isDraggingIntoThisArea,t]);const X=(0,r.useCallback)((t=>{const r="views_main_tab_modules"===o?{area:"views_main_tab_modules",viewsMainTabId:e.viewsMainTabId}:{area:o};_({type:"existing_module",moduleId:t,isDragging:!0,draggingModuleInitialArea:r,draggingModuleFinalArea:r})}),[o,e.viewsMainTabId,_]),Z=(0,r.useCallback)((e=>{e&&_({type:"existing_module",moduleId:e,isDragging:!1})}),[_]),ee=(0,r.useCallback)((()=>{const e=w.state,o=S.getLayoutType();o&&(0,d().Hc)(o)?_(void 0):null!=e&&e.isDragging&&w.setState({...e,isDragging:!1,draggingModuleInitialArea:void 0,draggingModuleFinalArea:void 0})}),[w,_,S]),oe=(0,r.useCallback)((e=>{const r=w.state,n=null!=r&&r.isDragging?r.draggingModuleFinalArea:void 0;"form_conditional_modules"!==(null==n?void 0:n.area)&&(null!=e&&e.key&&n&&n.area!==o&&((0,y().E)({environment:t,position:{type:"area_relative",location:"end_moveable",..."views_main_tab_modules"===n.area?{area:n.area,viewId:n.viewsMainTabId}:{area:n.area}},moduleId:e.key,layoutStore:S,sessionId:v}),(0,h().z)({moduleId:e.key,layoutStore:S,environment:t})),ee())}),[w,o,ee,t,S,v]),te=(0,r.useCallback)(((r,{key:n,endPosition:i,startPosition:a})=>{var s;if(R.isDraggingFromThisAreaToOtherArea)return;const l=null===(s=S.getModuleById(n))||void 0===s?void 0:s.type,d=void 0!==l&&c().PF.includes(l)?B.length+D.length:B.length,u="views_main_tab_modules"===o?{area:"views_main_tab_modules",viewId:e.viewsMainTabId}:{area:o};(0,y().E)({environment:t,layoutStore:S,position:{type:"absolute",index:d+i,...u},moduleId:n,sessionId:v}),(0,h().z)({moduleId:n,layoutStore:S,environment:t})}),[R.isDraggingFromThisAreaToOtherArea,B.length,D.length,o,e.viewsMainTabId,t,S,v]),re=(0,s().IS)((()=>({draggableList:{marginBottom:k},addButtonContainer:{paddingTop:"page_in_collection"===J?8:0,marginBottom:"form"===J?0:12,width:"100%"},dropzoneHalo:{background:m().to,height:m().NZ,marginTop:-m().NZ},hiddenModuleStyle:{display:"none"}})),[k,J]),ne=(0,r.useCallback)((e=>{const t="existing_module"===(null==I?void 0:I.type)&&I.moduleId===e,r=t&&($||W||Y);return(0,F.jsx)(zt,{active:t,pageModuleId:e,isDragging:r,area:o,style:r&&R.isDraggingFromThisAreaToOtherArea?re.hiddenModuleStyle:void 0},e)}),[R.isDraggingFromThisAreaToOtherArea,I,re.hiddenModuleStyle,o,$,W,Y]),ie=(0,r.useMemo)((()=>B.length?B.map((e=>ne(e.id))):null),[B,ne]),ae=(0,r.useMemo)((()=>O.length?O.map((e=>ne(e.id))):null),[O,ne]),se=(0,r.useMemo)((()=>({enter:{opacity:0},animate:{opacity:1},exit:{opacity:0}})),[]),le=(0,r.useMemo)((()=>({buttonContainer:re.addButtonContainer})),[re.addButtonContainer]);if(!S)return null;let de;return de=!!j&&(!A||("views_main_tab_modules"===o||"page_details"===o)),(0,F.jsxs)(F.Fragment,{children:[ie,Boolean(H.length)?(0,F.jsx)(p().Ay,{forceDragKeyIndex:R.isDraggingFromThisAreaToOtherArea?H.length-1:void 0,className:G().hg,store:q,keys:H,direction:"vertical",onDraggingKeyChanged:X,onDrop:te,onDragCancel:ee,onDragEnd:oe,onClick:Z,style:re.draggableList,gap:k,draggingStyle:or,draggingStyleForNonDraggedItems:or,renderKey:ne,disabled:!j,...A?{}:{hoverCursorStyleOverride:R.isDraggingAnyModuleList?"grabbing":void 0}}):void 0,(0,F.jsx)(n().A,{visible:R.isDraggingIntoThisArea,initial:se.enter,animate:se.animate,exit:se.exit,skip:!R.isDraggingAnyModuleList,className:"layout-content",ref:T,style:re.dropzoneHalo}),de?(0,F.jsx)(N,{...e,styles:le}):void 0,"form"===J&&j?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(U,{}),(0,F.jsx)(L,{area:o})]}):void 0,Boolean(Q.length)?(0,F.jsx)(p().Ay,{forceDragKeyIndex:R.isDraggingFromThisAreaToOtherArea?Q.length-1:void 0,className:G().hg,store:z,keys:Q,direction:"vertical",onDraggingKeyChanged:X,onDrop:te,onDragCancel:ee,onDragEnd:oe,onClick:Z,style:re.draggableList,gap:k,draggingStyle:or,draggingStyleForNonDraggedItems:or,renderKey:ne,disabled:!j,...A?{}:{hoverCursorStyleOverride:R.isDraggingAnyModuleList?"grabbing":void 0}}):void 0,ae]})}},471645:(e,o,t)=>{t.d(o,{P:()=>u});t(296540);var r=()=>t(590526),n=()=>t(401497),i=()=>t(201980),a=()=>t(69708),s=()=>t(100622),l=()=>t(582049),d=t(474848);function u({disabled:e,formQuestionStore:o,formMode:t}){const u=(0,a().tz)(),c=(0,n().IS)((()=>({questionDescriptionInput:{cursor:"text",fontSize:16,color:s().Tj.text.secondary,padding:"builder"===t?"4px 10px":"4px 0px",width:"fit-content"}})),[t]),{questionDescriptionStore:p,questionDescription:m,showDescription:g}=(0,r().K8)((()=>{var e;const t=o.getDescriptionStore().getValue();return{showDescription:Boolean(null===(e=o.getConfig())||void 0===e?void 0:e.showDescription),questionDescriptionStore:o.getDescriptionStore(),questionDescription:t?(0,i().q4_)(t):void 0}}),[o]);return g&&("viewer"!==t||m)?(0,d.jsx)(l().B,{store:p,style:c.questionDescriptionInput,disabled:e,placeholder:u.formatMessage({id:"FormQuestionDescription.placeholder",defaultMessage:"Add description"}),id:`form-description-${o.id}`}):null}},511177:(e,o,t)=>{t.d(o,{j:()=>g});t(296540);var r=()=>t(590526),n=()=>t(401497),i=()=>t(713998),a=()=>t(451306),s=()=>t(69708),l=()=>t(100622),d=()=>t(284371),u=()=>t(417257),c=()=>t(173215),p=()=>t(582049),m=t(474848);function g({disabled:e,onChange:o,formQuestionStore:t,formMode:g}){const y=(0,s().tz)(),v=(0,u().H)(),{parentBlockStore:f,questionNameStore:h,isRequired:b}=(0,r().K8)((()=>({parentBlockStore:t.getParentStore(),questionNameStore:t.getNameStore(),isRequired:t.isRequired()})),[t]),x=(0,r().K8)((()=>{var e,o;const r=v.getFormState();if(!r)return;const n=r.collectionSchema,a=null===(e=t.getConfig())||void 0===e?void 0:e.propertyId;return n&&a?null===(o=(0,i()._g)({schema:n,property:a}))||void 0===o?void 0:o.type:void 0}),[t,v]),M=(0,r().K8)((()=>v.getQuestionError(t.id)),[v,t.id]),S=(0,n().IS)((()=>({questionTitleInput:{padding:"0px 10px",margin:"10px 0px",fontSize:24,lineHeight:"30px",borderRadius:6,fontWeight:d().Wy.bold,cursor:"text",textWrap:"wrap",width:"fit-content"},viewQuestionTitleOverrides:{display:"block",margin:0,padding:"6px 0px",whiteSpace:"pre-wrap",maxWidth:"100%",wordBreak:"break-word"},pseudoAfter:{content:"'*'",color:"required"===M?l().Tj.palette.red[500]:l().Tj.text.tertiary,fontWeight:"normal"}})),[M]),I=(0,c().x)({textStore:h,spaceId:t.pointer.spaceId,parentStore:f,disabled:!1});return"builder"===g?(0,m.jsx)("div",{className:"form-question-title",children:(0,m.jsx)(p().B,{store:h,onChange:o,disabled:e,placeholder:"builder"===g?y.formatMessage({id:"FormQuestionTitle.placeholder",defaultMessage:"Question name"}):void 0,...(0,a().ow)({...S.questionTitleInput,...b?{pseudoAfter:S.pseudoAfter}:{}})})}):"multi_select"===x?(0,m.jsx)("legend",{className:"form-question-title",...(0,a().ow)({...S.questionTitleInput,...S.viewQuestionTitleOverrides,...b?{pseudoAfter:S.pseudoAfter}:{}}),children:I}):"file"===x?(0,m.jsx)("div",{className:"form-question-title",...(0,a().ow)({...S.questionTitleInput,...S.viewQuestionTitleOverrides,...b?{pseudoAfter:S.pseudoAfter}:{}}),id:`form-question-${t.id}`,children:I}):(0,m.jsx)("h2",{id:`form-question-title-${t.id}`,className:"form-question-title",...(0,a().ow)({...S.questionTitleInput,...S.viewQuestionTitleOverrides,...b?{pseudoAfter:S.pseudoAfter}:{}}),children:I})}},582049:(e,o,t)=>{t.d(o,{B:()=>s});t(296540);var r=()=>t(806080),n=()=>t(729368),i=()=>t(366437),a=t(474848);function s({store:e,disabled:o,style:t,placeholder:s,className:l,onChange:d,id:u}){return(0,a.jsx)(n().A,{store:e,style:t,className:l,disableSlashCommands:!0,onEnter:r().lQ,onEsc:r().lQ,onTab:r().lQ,onUntab:r().lQ,onMoveDown:r().lQ,onMoveUp:r().lQ,disableSelectAllBlocks:!0,disableSelectionDrag:!0,disableEmbedMenu:!0,disabledMentionTypes:{page:!1,user:!1,date:!1,createPage:!0,inviteUserToWorkspace:!0,inviteUserToPage:!0,reminder:!0,bot:!0,heading:!0,group:!0,templateVariable:!0,property:!0},disabled:o,pasteBehavior:"inline",placeholder:s,inPageFind:i().Os.none,disableComment:!0,onBlur:r().lQ,onChange:d,id:u,context:"form-input"})}},646796:(e,o,t)=>{t.d(o,{W:()=>u});var r=t(296540),n=()=>t(221844),i=()=>t(484714),a=()=>t(852507),s=()=>t(590526),l=()=>t(894995),d=()=>t(417257);function u(e){const o=(0,i().v3)(),{inMemoryRecordCacheName:t,collectionSchemaPropertyIds:u,collectionId:c,spaceId:p,formMode:m}=e,g=(0,d().H)(),y=(0,r.useMemo)((()=>new(n().A)({name:t,isTemporaryData:!0})),[t]),v=(0,s().K8)((()=>{var e;const t=null===(e=g.getFormState())||void 0===e?void 0:e.draftFormBlockStore;return t||l().createDummyFormPage({environment:o,spaceId:p,collectionSchemaPropertyIds:u,temporaryRecordCache:y,collectionId:c,formMode:m})}),[c,u,o,g,m,p,y]);return(0,a().l)((()=>{y.addCacheFallback(o.defaultRecordCache.inMemoryRecordCache),g.updateFormState({draftFormBlockStore:v})})),v}},728915:(e,o,t)=>{t.d(o,{Ai:()=>s,EJ:()=>d,M8:()=>u,TX:()=>p,Yj:()=>a,cf:()=>c});t(581454);var r=()=>t(69708),n=()=>t(534177),i=()=>t(29554);const a=12,s=(0,r().YK)({anonymousSubmissionLabel:{id:"FormBlock.anonymousSubmissionLabel",defaultMessage:"Submitting response anonymously"}}),l=(0,r().YK)({inaccessibleTitle:{id:"FormBlock.inaccessible.title",defaultMessage:"This form is not publicly available."},inaccessibleSubtitle:{id:"FormBlock.inaccessible.subtitle",defaultMessage:"Login to submit or contact the form creator to publish."},closedOrDeletedTitle:{id:"FormBlock.closedOrDeleted.title",defaultMessage:"This form is closed or deleted."},closedOrDeletedSubtitle:{id:"FormBlock.closedOrDeleted.subtitle",defaultMessage:"Try contacting the form owner if you think it’s a mistake."},submissionErrorTitle:{id:"FormBlock.submissionError.title",defaultMessage:"Something went wrong."},submissionErrorSubtitle:{id:"FormBlock.submissionError.subtitle",defaultMessage:"There was an issue submitting the form. Please try again or contact the form owner."}}),d={closedOrDeleted:l.closedOrDeletedTitle,inaccessible:l.inaccessibleTitle,submissionError:l.submissionErrorTitle},u={closedOrDeleted:l.closedOrDeletedSubtitle,inaccessible:l.inaccessibleSubtitle,submissionError:l.submissionErrorSubtitle};function c({questionType:e,filePropertyIdToFormFiles:o,draftSubmissionPageStore:t,propertyId:r}){switch(e){case"checkbox":return"Yes"===(0,i().r4)(t.getPropertyValue(r),t)?"true":"false";case"file":return((null==o?void 0:o[r])??[]).map((e=>e.fileName)).join(", ");case"text":case"title":case"select":case"multi_select":case"relation":case"date":case"person":case"number":case"email":case"url":case"phone_number":case"place":return(0,i().r4)(t.getPropertyValue(r),t);default:(0,n().HB)(e)}}function p(e){return e?500:600}},805833:(e,o,t)=>{t.d(o,{Z:()=>s});t(944114);var r=()=>t(496603),n=()=>t(314529);var i=()=>t(334261),a=()=>t(547149);function s({visibility:e,property:o,schema:t,collectionStore:s,format:l,environment:d,transaction:u}){const c=l.collection_page_sections?r().mg(l.collection_page_sections):[];if(!t[o])return;const p=c.findIndex((e=>e.section===o));-1!==p?c[p]={section:o,visibility:e}:c.push({section:o,visibility:e}),c&&(a().createAndCommitOrAppend({userAction:"PagePropertiesRowName.handleShowAsClick",environment:d,canUndo:!0,transaction:u,perform:e=>{i().LK({environment:d,pageSectionFormats:c,store:s,transaction:e})}}),function(e,o){(0,n().DO_NOT_USE_trackLegacy)(e,"relation_show_as",o)}(d,{from:"relation_section",mode:"inline"===e?"page_section":"minimal"===e?"minimal_page_section":"property"}))}},962326:(e,o,t)=>{t.d(o,{B:()=>u,I:()=>d});var r=()=>t(966759),n=()=>t(30244),i=()=>t(102897),a=()=>t(828661),s=()=>t(770703),l=()=>t(547149);async function d({theme:e,collectionContextStore:o,environment:t,property:r,from:n,schema:s,onDeleteCompleted:l,...d}){const c=!!s[r]&&(0,i().J)(s[r]);await a().q({environment:t,collectionContextStore:o,property:r,handleDeleteAccept:async()=>{await u({collectionContextStore:o,environment:t,property:r,schema:s,from:n,permanentlyDelete:c,...d}),null==l||l()},theme:e,from:n,isPermanentlyDelete:c})}async function u(e){const{collectionContextStore:o,environment:t,property:i,schema:a,from:d,permanentlyDelete:u,...c}=e,p=o.collectionStore();if(!p)return;const m=p.getSchema()[i];await l().createAndCommitAsync({environment:t,userAction:"TableHeaderCell.handleDeleteAccept",waitForServerCommit:!1,perform:async e=>{await(0,n().P)({environment:t,collectionStore:p,schema:a,property:i,transaction:e,permanentlyDelete:u}),c.updateFrozenColumn&&s().sp({environment:t,collectionContextStore:o,currentIndex:c.columnIndex,entrypoint:c.updateFrozenColumnEntrypoint,transaction:e,propertyAction:"delete"})}}),m&&(0,r().i)({environment:t,collectionContextStore:o,property_type:m.type,from:d,property:i})}},963900:(e,o,t)=>{t.d(o,{Y1:()=>R,zE:()=>L});t(18107),t(967357);var r=t(296540),n=()=>t(135168),i=()=>t(726637),a=()=>t(484714),s=()=>t(590526),l=()=>t(401497),d=()=>t(795732),u=()=>t(574359),c=()=>t(983610),p=()=>t(807449),m=()=>t(631524),g=()=>t(856337),y=()=>t(642557),v=()=>t(201980),f=()=>t(69708),h=()=>t(751735),b=()=>t(100622),x=()=>t(806080),M=()=>t(284371),S=()=>t(614699),I=()=>t(348241),_=()=>t(582049),j=()=>t(465741),w=()=>t(728915),T=()=>t(774524),C=()=>t(312310),A=()=>t(790324),k=()=>t(129522),P=()=>t(134217),B=()=>t(660197),F=t(474848);function D({onAfterAddIconClick:e,disabled:o,formBlockStore:t}){return(0,s().K8)((()=>Boolean(t.getIcon()&&t.getCover())),[t])?null:(0,F.jsx)(T().A,{store:t,context:d().R.Form,children:o?void 0:(0,F.jsx)(E,{onAfterAddIconClick:e})})}function E({onAfterAddIconClick:e}){const{formBlockStore:o,headerFocusStore:t,headerMouseStore:r}=(0,I().cJ)(),n=(0,a().Y0)(),i=(0,s().K8)((()=>{const e=r.state.mouseEntered||t.state;return(0,S().g1)(e)}),[t,r]),{hasIcon:l,hasCover:d}=(0,s().K8)((()=>({hasIcon:Boolean(o.getIcon()),hasCover:Boolean(o.getCover())})),[o]);return(0,F.jsxs)(F.Fragment,{children:[l?void 0:(0,F.jsx)(A().A,{store:o,afterOnClick:e,style:i,label:n.isSmallPhone?(0,F.jsx)(f().sA,{id:"FormHeaderControls.iconMobile",defaultMessage:"Icon"}):(0,F.jsx)(f().sA,{id:"FormHeaderControls.icon",defaultMessage:"Form icon"})}),d?void 0:(0,F.jsx)(C().A,{store:o,style:i,label:n.isSmallPhone?(0,F.jsx)(f().sA,{id:"FormHeaderControls.pageCoverMobile",defaultMessage:"Cover"}):(0,F.jsx)(f().sA,{id:"FormHeaderControls.pageCover",defaultMessage:"Form cover"}),from:"form_page_header"})]})}function L({formBlockStore:e,formMode:o,disabled:t,headerFocusStore:n,onHeaderMouseEnter:a,onHeaderMouseLeave:u,aliasStore:c,formBlockWidth:p}){const m=(0,f().tz)(),[g,y]=(0,r.useState)(!1),h=(0,r.useCallback)((()=>{y(!0)}),[]),b=(0,r.useCallback)((()=>{y(!1)}),[]),{hasCoverImage:M,hasPageIcon:S,formTitleStore:I,formDescriptionStore:j}=(0,s().K8)((()=>({hasCoverImage:Boolean(null==e?void 0:e.getCover()),hasPageIcon:Boolean(null==e?void 0:e.getIcon()),formTitleStore:null==e?void 0:e.getTitleStore(),formDescriptionStore:e.getFormDescriptionStore()})),[e]),T=(0,s().K8)((()=>(0,v().w9s)(j.getValue())),[j]),C=(0,l().IS)((()=>{const e="viewer"===o&&i().A.isMobile&&S?12:0,t=(()=>{if("builder"===o&&S&&M)return 12;if("builder"===o)return 0;if(c){const e="narrow"!==p||i().A.isMobile?0:-w().Yj;return S||M?24+e:12+e}return S||M?24:48})();return{container:{marginTop:e,marginInlineStart:"builder"===o?3:0},descriptionContainer:{marginTop:16},description:{cursor:"text",paddingInline:4},titleExtra:{fontSize:40,fontWeight:"bold",cursor:"text",marginTop:t}}}),[c,p,o,M,S]);return e&&I?(0,F.jsxs)("div",{style:C.container,children:[(0,F.jsx)(B().H,{store:e,context:d().R.Form,isEditable:!t,headerControls:(0,F.jsx)(D,{onAfterAddIconClick:h,disabled:t,formBlockStore:e}),hasCover:M,isInSidePeek:!1,hideTitleIfEmpty:"viewer"===o,headerFocusStore:n,openMenuOnMount:g,openMenuOnMountCallback:b,disabled:t,titlePlaceholder:m.formatMessage({id:"formTitle.titlePlaceholder",defaultMessage:"Form title"}),collectionContextStore:void 0,shouldShowTemplatePicker:!1,onTitleChange:x().lQ,onTitleEditText:x().lQ,onTitleEsc:x().lQ,onTitleUntab:x().lQ,onTitleTab:x().lQ,onMoveUp:x().lQ,onMoveDown:x().lQ,handleHeaderMouseEnter:a,handleHeaderMouseLeave:u,disableEnter:!0,extraStyles:C.titleExtra,layoutModule:O}),"builder"!==o&&T?void 0:(0,F.jsx)("div",{style:C.descriptionContainer,children:(0,F.jsx)(_().B,{store:j,disabled:t,placeholder:m.formatMessage({id:"FormTitle.description.placeholder",defaultMessage:"Description (optional)"}),style:C.description})})]}):null}const O={id:"titleWithIcon",type:"normalizedTitleWithIcon",propertyIds:[]};function R({collectionContextStore:e,formBlockStore:o}){const t=(0,a().v3)(),r=(0,s().K8)((()=>(0,n().f)(o)),[o]),i=(0,s().K8)((()=>r?(0,u().G)(t,r):""),[t,r]),{isFormPublic:d,isFormClosed:v}=(0,s().K8)((()=>({isFormPublic:o.getIsFormPublic(),isFormClosed:o.getIsFormClosed()})),[o]),x=(0,s().K8)((()=>{const e=c().subscriptionDataStoreInstance.state;return Boolean(e&&r&&P().V$(t,e,r.id))}),[t,r]),S=(0,s().K8)((()=>x?"closed":(0,j().C0)(d,v)),[d,v,x]),I=(0,s().K8)((()=>{const o=e.collectionViewBlockStore();return!!o&&o.canEditMembership()}),[e]),_=(0,l().eP)(),w=(0,l().IS)((()=>{const e=()=>{switch(S){case"shared_to_web":return{light:{color:b().Tj.yellow.text.secondary,background:b().Tj.yellow.background.secondaryTranslucent},dark:{color:b().Tj.yellow.text.secondary,background:b().Tj.yellow.background.secondaryTranslucent}};case"shared_to_space":return{light:{color:b().Tj.text.secondary,background:b().Tj.background.secondaryTranslucent},dark:{color:b().Tj.text.secondary,background:b().Tj.background.secondaryTranslucent}};case"closed":return{light:{color:b().Tj.palette.red[500],background:b().Tj.palette.red[50]},dark:{color:b().Tj.palette.red[600],background:b().Tj.palette.red[200]}}}};return{container:{color:e()[_].color,background:e()[_].background,borderRadius:6,width:"100%",padding:"10px 22px",marginTop:24,fontSize:14,display:"flex",alignItems:"center"},lockIconContainer:{display:"flex",alignItems:"center"},changePermissionButton:{marginInlineEnd:-4,color:e()[_].color,fontWeight:M().Wy.medium},changePermissionButtonHovered:{backgroundColor:(0,h().X4)(e()[_].color,.1)},changePermissionButtonPressed:{backgroundColor:(0,h().X4)(e()[_].color,.2)}}}),[S,_]),T=(0,j().ls)({formSharingState:S,spaceName:i,isOverBlockLimit:x});return(0,F.jsxs)("div",{style:w.container,children:[(0,F.jsx)("div",{style:{width:x?"100%":"90%",marginInlineEnd:10},children:(0,F.jsxs)("div",{style:w.lockIconContainer,children:[v||d||x?void 0:(0,F.jsx)("span",{style:{marginInlineEnd:6,marginInlineStart:-2},children:(0,F.jsx)(p().I,{icon:y().lockSmallIcon,size:"sm"})}),T]})}),!x&&I?(0,F.jsx)(m().p,{style:w.changePermissionButton,hoveredStyle:w.changePermissionButtonHovered,pressedStyle:w.changePermissionButtonPressed,onClick:()=>{var o,t;const r=null===(o=e.collectionViewBlockStore())||void 0===o?void 0:o.id,n=(null===(t=k().K.getMembersByDOMOrder({filter:e=>e.getBlockStore().id===r}).at(0))||void 0===t?void 0:t.getNode())??null;if(n instanceof Element){const o=e.isFullScreenStore.state?n:n.parentElement;(0,g().v)(o,{edgeDist:0,animate:!1})}e.formShareMenuButtonPopupStore.setState({...e.formShareMenuButtonPopupStore.state,open:!0})},children:(0,F.jsx)(f().sA,{id:"editorFormResponderWarning.changePermission",defaultMessage:"Change"})}):void 0]})}},970176:(e,o,t)=>{t.d(o,{z:()=>i});var r=()=>t(884189),n=()=>t(104129);function i({layoutStore:e,moduleId:o,environment:t}){setTimeout((()=>{!function({layoutStore:e,moduleId:o,environment:t}){const i=n().A.findModuleContainer({layoutStore:e,moduleId:o}),a=null==i?void 0:i.getNode();a&&(0,r().$)({element:a,environment:t,additionalPadding:{top:100,bottom:100}})}({layoutStore:e,moduleId:o,environment:t})}),100)}}}]);