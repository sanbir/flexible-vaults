"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[15381],{14892:(e,i,t)=>{t.d(i,{A:()=>n});class a extends(()=>t(757695))().Store{getInitialState(){return{modalOpen:!1,loading:!1,domainVerification:void 0}}}const n=a},99688:(e,i,t)=>{t.d(i,{I:()=>s,h:()=>o});var a=t.n(t(842838)),n=()=>t(274031);function o(e){const{intl:i,theme:t,chartType:a,container:o,hasData:s,hasBadYAxisRange:r,isInPeekMode:l}=e,d=o.getAttribute("id");if(!d)return;const c=`chart-empty-state-${d.substring(11)}`;const u=document.getElementById(c);if(u){const e=u.parentElement;null==e||e.removeChild(u)}if(s&&!r)return;const m=document.createElement("div");m.setAttribute("id",c),m.style.position="absolute",m.style.display="flex",m.style.alignItems="center",m.style.justifyContent="center";if("column"===a){const e=69,i=36;m.style.top="10px",m.style.left=`${e}px`,m.style.width=`calc(100% - ${e+10}px)`,m.style.height=`calc(100% - ${10+i}px)`}else if("bar"===a){const e=40,i=75;m.style.top="10px",m.style.left=`${e}px`,m.style.width=`calc(100% - ${e+10}px)`,m.style.height=`calc(100% - ${10+i}px)`}else"donut"===a&&(m.style.top="0px",m.style.left="0px",m.style.width="100%",m.style.height="100%");o.appendChild(m);const f=document.createElement("div");f.textContent=i.formatMessage(r?n().b.badYAxisRange:n().b.noData),f.style.color=t.text.secondary,f.style.backgroundColor=l?t.background.elevated:t.background.primary,f.style.fontSize="14px",f.style.padding="8px",m.appendChild(f)}function s(e){if(!e)return"";return`<div>${a().sanitize(e,{ALLOWED_TAGS:[]}).replace(/\n/g,"<br />")}</div>`}},223271:(e,i,t)=>{t.d(i,{KS:()=>T,ZQ:()=>M,bi:()=>w,vr:()=>C});var a=t(296540),n=()=>t(692031),o=()=>t(212497),s=()=>t(484714),r=()=>t(401497),l=()=>t(609679),d=()=>t(396896),c=()=>t(695115),u=()=>t(31511),m=()=>t(98126),f=()=>t(406094),x=()=>t(631524),g=()=>t(26697),y=()=>t(302501),h=()=>t(536583),p=()=>t(69708),v=()=>t(100622),A=()=>t(284371),b=()=>t(720665),D=()=>t(101919),j=()=>t(815585),S=t(474848);function M({handleVerifyDomain:e,domainVerification:i,loading:t}){const n=(0,r().IS)((()=>({title:{fontFamily:A().vc(l().locale).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:A().vc(l().locale).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center"},list:{fontSize:14,lineHeight:"19px"}})),[]);return(0,S.jsxs)(a.Fragment,{children:[(0,S.jsx)(y().A,{style:n.title,children:(0,S.jsx)(p().sA,{id:"verifyDomainModal.verifyExistingDomain.title",defaultMessage:"Verify your domain"})}),(0,S.jsx)(y().A,{style:n.subtitle,children:(0,S.jsx)(p().sA,{id:"verifyDomainModal.verifyExistingDomain.subtitle",defaultMessage:"Follow these steps to finalize verification."})}),(0,S.jsxs)(d().VP,{marginTop:24,gap:24,children:[(0,S.jsxs)(d().VP,{gap:12,children:[(0,S.jsx)(w,{domainVerification:i}),(0,S.jsx)(T,{domainVerification:i})]}),(0,S.jsx)(C,{listStyles:n.list})]}),(0,S.jsx)(f().A,{size:"lg",style:{width:"100%"},onClick:()=>e(i),disabled:t,children:t?(0,S.jsx)(m().k,{}):(0,S.jsx)(p().sA,{id:"verifyDomainModal.verifyExistingDomain.verify",defaultMessage:"Verify domain"})})]})}function T({domainVerification:e}){const i=(0,s().v3)();return(0,S.jsx)(k,{value:e.domain,handleCopyLink:async function(){const[t,a]=await Promise.all([(0,n().r)(),(0,o().jd)()]);a({environment:i,stringValue:e.domain,copiedMessage:t.copiedLinkToClipboard})},label:(0,S.jsx)(p().sA,{id:"verifyDomainModal.verifyExistingDomain.domainLabel",defaultMessage:"Domain"})})}function k({value:e,handleCopyLink:i,disabled:t,label:a}){const n=(0,p().tz)().formatMessage(I.copy),o=(0,r().IS)((()=>({container:{display:"flex",background:v().Tj.background.elevated,padding:2,boxShadow:v().Tj.shadowSM,borderRadius:6},buttonStyle:{height:20,width:20},input:{fontFamily:A().vc(l().locale).mono,textOverflow:"ellipsis"}})),[]);return(0,S.jsxs)(d().VP,{gap:0,children:[(0,S.jsx)(D().A,{children:a}),(0,S.jsx)(u().A,{value:e,readOnly:!0,inputStyle:o.input,right:(0,S.jsx)(g().m,{renderTooltip:()=>n,render:e=>(0,S.jsx)("div",{style:o.container,...e,children:(0,S.jsx)(c().A,{onClick:i,ariaLabel:n,hasBackground:!0,icon:h().d,colorVariant:"secondary",showShadow:!1,style:o.buttonStyle})})})})]})}function w({domainVerification:e,containerStyles:i,regenerateCode:t}){const l=(0,s().v3)(),[c,u]=(0,a.useState)(!1),m=e.expiresAt-Date.now()<2*b().pT,f=e.expiresAt<Date.now(),g=(0,r().eP)(),h=(0,r().IS)((()=>({expiresSoonText:{color:"dark"===g?v().Tj.palette.yellow[700]:v().Tj.palette.yellow[500]},expiredText:{color:"dark"===g?v().Tj.palette.red[700]:v().Tj.palette.red[500]},regenerateButton:{fontWeight:A().Wy.medium}})),[g]);return(0,S.jsx)("div",{style:i,children:(0,S.jsxs)(d().VP,{gap:4,children:[(0,S.jsx)(k,{label:(0,S.jsx)(p().sA,{id:"verifyDomainModal.verifyExistingDomain.verificationCodeLabel",defaultMessage:"Verification code"}),value:`notion-domain-verification=${e.verificationCode}`,handleCopyLink:async function(){const[i,t]=await Promise.all([(0,n().r)(),(0,o().jd)()]);t({environment:l,stringValue:`notion-domain-verification=${e.verificationCode}`,copiedMessage:i.copiedLinkToClipboard})},disabled:f}),(0,S.jsxs)(d().fI,{alignItems:"center",justifyContent:"space-between",children:[f?(0,S.jsx)(y().A,{style:h.expiredText,isSmall:!0,children:(0,S.jsx)(p().sA,{id:"verifyDomainModal.verifyExistingDomain.verificationCodeExpired",defaultMessage:"This verification code expired on {expirationDate}",values:{expirationDate:(0,j().DG)(e.expiresAt)}})}):(0,S.jsx)(y().A,{style:m?h.expiresSoonText:void 0,isSmall:!0,children:(0,S.jsx)(p().sA,{id:"verifyDomainModal.verifyExistingDomain.verificationCodeExpiresAt",defaultMessage:"This verification code expires on {timeLeft}",values:{timeLeft:(0,j().DG)(e.expiresAt)}})}),f&&t?(0,S.jsx)(x().p,{colorPalette:"blue",size:"xs",style:h.regenerateButton,onClick:async()=>{u(!0),await t(e),u(!1)},disabled:c,children:(0,S.jsx)(p().sA,{id:"verifyDomainModal.verifyExistingDomain.regenerateButton",defaultMessage:"Regenerate"})}):void 0]})]})})}function C({listStyles:e}){const i=(0,r().IS)((()=>({list:{paddingInlineStart:22,margin:0},listItem:{fontFamily:A().vc(l().locale).sans,fontWeight:400,marginBottom:12}})),[]);return(0,S.jsxs)("ol",{style:{...i.list,...e},children:[(0,S.jsx)("li",{style:i.listItem,children:(0,S.jsx)(p().sA,{id:"verifyDomainModal.verifyExistingDomain.instructionsDNS",defaultMessage:"Go to the DNS settings for your domain host."})}),(0,S.jsx)("li",{style:i.listItem,children:(0,S.jsx)(p().sA,{id:"verifyDomainModal.verifyExistingDomain.instructionsTXT",defaultMessage:"Create a TXT record and paste the verification code."})}),(0,S.jsx)("li",{style:i.listItem,children:(0,S.jsx)(p().sA,{id:"verifyDomainModal.verifyExistingDomain.instructionsHangTight",defaultMessage:"This update usually takes a few minutes but may take up to 72 hours to complete."})}),(0,S.jsx)("li",{style:i.listItem,children:(0,S.jsx)(p().sA,{id:"verifyDomainModal.verifyExistingDomain.instructionsVerify",defaultMessage:"Click “Verify domain” to confirm once your DNS record is updated."})})]})}const I=(0,p().YK)({copy:{defaultMessage:"Copy to Clipboard",id:"verifyDomainModal.verifyExistingDomain.copyButton.copyToClipboard"}})},241754:(e,i,t)=>{t.d(i,{y:()=>n});var a=()=>t(534177);function n({type:e,chartDisplayContext:i}){if("view"!==i&&"workspace_analytics"!==i)switch(e){case"donut":return;case"area":case"areaspline":case"line":return{paddingInlineStart:8,paddingInlineEnd:8};case"column":case"bar":return{paddingInlineStart:8,paddingInlineEnd:8,paddingBottom:8};default:(0,a().HB)(e)}}},246732:(e,i,t)=>{t.r(i),t.d(i,{AxisChart:()=>D});t(18107),t(967357),t(581454);var a=t(296540),n=()=>t(59226),o=()=>t(401497),s=()=>t(100594),r=()=>t(69708),l=()=>t(100622),d=()=>t(496603),c=()=>t(705876),u=()=>t(526920),m=()=>t(241754),f=()=>t(99688),x=()=>t(406007),g=()=>t(476340),y=()=>t(700461),h=()=>t(372976),p=t(474848);const v=.01,A=.05,b=5;function D(e){const i=(0,r().tz)(),t=(0,o().eP)(),D=(0,l().O4)({theme:t}),j=(0,n().X)("chart_view_reference_line"),S=e.hasData&&0!==e.seriesData.length?e.seriesData[0].type:"line"===e.axisType?"column":e.axisType,M=(()=>{if(""!==e.xAxisTitle){if(e.xAxisTitle&&!e.hasData)return e.xAxisTitle;if(e.axisLabelFormat&&e.axisLabelFormat!==s().tG.y_axis&&e.axisLabelFormat!==s().tG.none)return e.xAxisTitle}})(),T=(()=>{if(""!==e.yAxisTitle){if(e.yAxisTitle&&!e.hasData)return e.yAxisTitle;if(e.axisLabelFormat&&e.axisLabelFormat!==s().tG.x_axis&&e.axisLabelFormat!==s().tG.none)return e.yAxisTitle}})(),k=Boolean(e.showVerticalGridLines),w=(0,a.useMemo)((()=>void 0!==e.dataYAxisMin&&void 0!==e.dataYAxisMax&&((void 0!==e.userYAxisMin||void 0!==e.userYAxisMax)&&(void 0===e.userYAxisMin?e.dataYAxisMin>e.userYAxisMax:void 0===e.userYAxisMax?e.dataYAxisMax<e.userYAxisMin:e.dataYAxisMax<e.userYAxisMin||e.dataYAxisMin>e.userYAxisMax))),[e.dataYAxisMin,e.dataYAxisMax,e.userYAxisMin,e.userYAxisMax]),C=(0,a.useMemo)((()=>!e.hasData||w?[{name:"No data",type:S,data:[{x:0,y:50,name:"",color:"rgba(0,0,0,0)",borderColor:"rgba(0,0,0,0)"}]}]:e.seriesData),[S,w,e.hasData,e.seriesData]),I=(0,a.useMemo)((()=>(0,u().wW)(e.colorTheme||"auto",Boolean(e.weightColorValue),D)),[e.colorTheme,e.weightColorValue,D]),{pixelHeight:L}=(0,x().$)({chartHeightFormat:e.chartHeight}),V=(0,a.useMemo)((()=>{var i;return!(null===(i=e.seriesData)||void 0===i||!i.at(0)||1!==e.seriesData[0].data.length||"area"!==e.seriesData[0].type&&"areaspline"!==e.seriesData[0].type)}),[e.seriesData]),F=(0,a.useMemo)((()=>{const t=void 0!==e.userYAxisMax?e.userYAxisMax:void 0!==e.dataYAxisMax&&"percent"!==e.columnStacking&&e.hasData?e.dataYAxisMax>0?e.dataYAxisMax*(1+v):e.dataYAxisMax:void 0,a=void 0!==e.userYAxisMin?e.userYAxisMin:void 0!==e.dataYAxisMin&&"percent"!==e.columnStacking&&e.hasData?e.dataYAxisMin<0?e.dataYAxisMin*(1+A):e.dataYAxisMin:void 0,n=a&&a<0,o="bar"===S?!e.sortReversed:e.sortReversed,s=void 0!==e.userYAxisMax||void 0!==e.userYAxisMin,r=e.showCaption?(0,f().I)(e.caption):"",l=j&&e.referenceLines?e.referenceLines:[];return d().h1((0,y().A)(D),{chart:{type:S,height:L,events:{render(){const t=this.container;t&&"area"!==S&&"areaspline"!==S&&(0,f().h)({intl:i,theme:D,chartType:S,container:t,hasData:e.hasData,hasBadYAxisRange:w,isInPeekMode:Boolean(e.isInPeekMode)})},load:e.onLoadEventHandler,click(i){if(!e.onSeriesClick)return;const t=this.container.querySelector("div.highcharts-tooltip");if(t&&"hidden"!==t.style.visibility&&c().U.state.currentTooltipPoint){var a;const t=(0,g().V)(e.seriesData,null===(a=c().U.state.currentTooltipPoint)||void 0===a?void 0:a.x);if(!t)return;return this.tooltip.hide(),void e.onSeriesClick(t,i)}const n=this.xAxis[0];let o,s;o="bar"===S?n.toValue(i.chartY):n.toValue(i.chartX);let r=Number.MAX_VALUE;for(const e of this.series)for(const i of e.data){const e=Math.abs(i.x-o);e<r&&(r=e,s=i)}if(s){const t=(0,g().V)(e.seriesData,s.x);if(!t)return;this.tooltip.hide(),e.onSeriesClick(t,i)}}}},time:{timezone:e.timezone},title:{text:void 0},series:C,...I,xAxis:{type:e.xAxisType,title:{text:M},gridLineWidth:k?1:0,labels:{autoRotation:e.disableXAxisAutoRotation?void 0:[-45],enabled:e.hasData,useHTML:Boolean(e.xLabelFormatter),formatter:function(){const i=this.pos,t=this.value;if(!e.xLabelFormatter)return t;let a;return e.hasData?"category"===e.xAxisType&&(a=(e.dataPointsForXAxisLabels??C[0].data)[i]):a=C[0].data[i],e.xLabelFormatter(t,a)},style:{..."bar"===e.axisType&&{width:250}}},reversed:o,tickLength:e.hasData?1:0,min:e.xAxisMin,max:e.xAxisMax,lineWidth:n?0:1,..."area"===S||"areaspline"===S?{tickWidth:1,tickLength:5}:{}},yAxis:{title:{text:T},gridLineWidth:e.showHorizontalGridLines?1:0,labels:{formatter:function(){const i=this.value;return e.yLabelFormatter&&"number"==typeof i?e.yLabelFormatter(i):i}},stackLabels:{enabled:!!e.columnStacking&&e.dataLabelsEnabled,formatter:function(){const i=this.total;return e.dataLabelFormatter&&"number"==typeof i?e.dataLabelFormatter(i):i},crop:!1,overflow:"none"},lineWidth:k?1:0,allowDecimals:e.yAxisAllowDecimals,max:t,min:a,...s&&{startOnTick:!1,endOnTick:!1},tickAmount:s?void 0:b,plotLines:[...n?[{value:0,dashStyle:"Solid",color:D.border.primary}]:[],...l.map((e=>({value:e.value,dashStyle:e.dashStyle,color:(0,u().FI)(e.color,D.mode),width:1,label:e.label?{text:e.label,style:{color:D.text.secondary,fontSize:"12px"},align:"left"}:void 0,zIndex:5})))]},plotOptions:{series:{cursor:e.onSeriesClick?"pointer":void 0,point:{events:{click(i){if(e.onSeriesClick){const t=(0,g().V)(e.seriesData,this.x);if(!t)return;e.onSeriesClick(t,i)}}}},events:e.onLegendItemClick?{legendItemClick:e.onLegendItemClick}:void 0,marker:{enabled:!1},enableMouseTracking:e.hasData,states:{hover:!1},...e.columnStacking?{stacking:e.hasData?e.columnStacking:void 0,dataLabels:{enabled:!1}}:{dataLabels:{enabled:!!e.hasData&&e.dataLabelsEnabled,formatter:function(){const i=this.y;return e.dataLabelFormatter&&"number"==typeof i?e.dataLabelFormatter(i):i},crop:!1,overflow:"none"}}},area:{...V&&{states:{hover:{enabled:!1}},marker:{enabled:!0,radius:3,lineColor:D.background.primary,lineWidth:1.25}}},areaspline:{...V&&{states:{hover:{enabled:!1}},marker:{enabled:!0,radius:3,lineColor:D.background.primary,lineWidth:1.25}}},column:{centerInCategory:e.axisHideEmptyGroups&&void 0===e.columnStacking}},legend:{enabled:!!e.hasData&&!e.hideLegend,labelFormatter:function(){return e.legendLabelFormatter?e.legendLabelFormatter(this.name):this.name}},caption:{text:r},tooltip:e.tooltipOptions})}),[S,e,D,L,C,I,M,k,T,V,i,w,j]);return(0,p.jsx)(h().A,{loadingProps:e.loadingProps,chartOptions:F,containerHeight:L,className:e.onSeriesClick?"notion-chart-clickable":void 0,...(0,m().y)({type:S,chartDisplayContext:e.chartDisplayContext})})}},476340:(e,i,t)=>{t.d(i,{V:()=>a});t(898992),t(672577);function a(e,i){if(e&&0!==e.length)for(const t of e){const e=t.data.find((e=>e.x===i));if(e)return e}}},486345:(e,i,t)=>{t.d(i,{pl:()=>s,sy:()=>o});var a=()=>t(792071),n=()=>t(926397);function o(e){return"invalid"===e.type||"unverified"===e.type}function s(e){const i=a().Bj6.fromValue(n().Hx,e);return{type:i.verified_at?"verified":"unverified",id:i.id,domain:i.domain,verificationCode:i.verification_code,createdAt:i.created_at,expiresAt:i.expires_at,invalidatedAt:i.getInfo().invalidated_at}}},612268:(e,i,t)=>{t.d(i,{Jd:()=>L,d9:()=>V,Ay:()=>_,W0:()=>E,vv:()=>P,xF:()=>Y});t(944114),t(581454);var a=t(296540),n=()=>t(401497),o=()=>t(792057),s=()=>t(807449),r=()=>t(160432),l=()=>t(493552),d=()=>t(940148),c=()=>t(302501),u=()=>t(81068),m=()=>t(69708),f=()=>t(100622),x=()=>t(534177),g=()=>t(649760),y=()=>t(314529),h=()=>t(314709),p=()=>t(769864),v=()=>t(609679),A=()=>t(284371),b=t(474848);const D=(0,m().YK)({samlConfigSubtitle:{id:"verifyDomainModal.addNewDomain.samlConfig.subtitle",defaultMessage:"Users with a verified domain can log in {br}using SAML SSO."},integrationSubtitle:{id:"verifyDomainModal.addNewDomain.integration.subtitle",defaultMessage:"Link preview integrations must verify {br}domains before they are published."}});const j=function({handleAddNewDomain:e,loading:i,verificationType:o}){const[s,l]=(0,a.useState)(""),d=!Boolean(s),u=(0,a.useCallback)((e=>{l(e.target.value)}),[]),f=(0,n().IS)((()=>({title:{fontFamily:A().vc(v().locale).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:A().vc(v().locale).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center"},input:{marginTop:22,marginBottom:14},button:{width:"100%",opacity:d?.5:1}})),[d]);let g;switch(o){case"integration":g=D.integrationSubtitle;break;case"saml_config":g=D.samlConfigSubtitle;break;default:(0,x().HB)(o)}return(0,b.jsxs)(a.Fragment,{children:[(0,b.jsx)(c().A,{style:f.title,children:(0,b.jsx)(m().sA,{id:"verifyDomainModal.addNewDomain.title",defaultMessage:"Add new domain"})}),(0,b.jsx)(c().A,{style:f.subtitle,isMultiline:!0,children:(0,b.jsx)(m().sA,{...g,values:{br:(0,b.jsx)("br",{})}})}),(0,b.jsx)(t(31511).A,{value:s,style:f.input,placeholder:"notion.so",onChange:u}),(0,b.jsx)(r().A,{colorPalette:"blue",onClick:()=>e(s),style:f.button,size:"lg",disabled:d,children:i?(0,b.jsx)(t(98126).k,{}):(0,b.jsx)(m().sA,{id:"verifyDomainModal.addNewDomain.next",defaultMessage:"Next"})})]})};var S=()=>t(406094);const M=function({domain:e,isExpired:i,onClose:t}){const o=(0,n().IS)((()=>({title:{fontFamily:A().vc(v().locale).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:A().vc(v().locale).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center",marginBottom:22}})),[]);return(0,b.jsxs)(a.Fragment,{children:[(0,b.jsx)(c().A,{style:o.title,isMultiline:!0,children:(0,b.jsx)(m().sA,{id:"verifyDomainModal.invalidDomain.title",defaultMessage:"Unable to verify {domain}",values:{domain:e}})}),(0,b.jsx)(c().A,{style:o.subtitle,isMultiline:!0,children:i?(0,b.jsx)(m().sA,{id:"verifyDomainModal.invalidDomain.expired",defaultMessage:"The code for this domain’s verification has expired."}):(0,b.jsx)(m().sA,{id:"verifyDomainModal.invalidDomain.invalid",defaultMessage:"You are unable to verify this domain because it has already been verified by another workspace."})}),(0,b.jsx)(S().A,{size:"lg",onClick:t,style:{width:"100%"},children:(0,b.jsx)(m().sA,{id:"verifyDomainModal.invalidDomain.okay",defaultMessage:"OK"})})]})},T=(0,m().YK)({samlConfigSubtitle:{id:"verifyDomainModal.verifiedDomain.samlConfig.subtitle",defaultMessage:"Users are able to use this email domain to{br}log in using SAML SSO."},integrationSubtitle:{id:"verifyDomainModal.verifiedDomain.integration.subtitle",defaultMessage:"This integration can unfurl URLs containing this domain."}});const k=function({domain:e,onClose:i,verificationType:t}){const o=(0,n().IS)((()=>({title:{fontFamily:A().vc(v().locale).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:A().vc(v().locale).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center",marginBottom:22}})),[]);let s;switch(t){case"saml_config":s=T.samlConfigSubtitle;break;case"integration":s=T.integrationSubtitle;break;default:(0,x().HB)(t)}return(0,b.jsxs)(a.Fragment,{children:[(0,b.jsx)(c().A,{style:o.title,isMultiline:!0,children:(0,b.jsx)(m().sA,{id:"verifyDomainModal.verifiedDomain.title",defaultMessage:"Successfully verified {domain}",values:{domain:e}})}),(0,b.jsx)(c().A,{style:o.subtitle,isMultiline:!0,children:(0,b.jsx)(m().sA,{...s,values:{br:(0,b.jsx)("br",{})}})}),(0,b.jsx)(S().A,{size:"lg",onClick:i,style:{width:"100%"},children:(0,b.jsx)(m().sA,{id:"verifyDomainModal.verifiedDomain.okay",defaultMessage:"OK"})})]})};const w=function(e){const i=(0,t(484714).v3)(),n=(0,m().tz)(),[s,r]=(0,t(590526).$y)(e.store,t(14892).A),{verificationType:l,verificationTargetId:d,refreshDomains:c}=e,u=(0,a.useCallback)((()=>{r((e=>({...e,loading:!1,modalOpen:!1})))}),[r]),g=(0,a.useCallback)((async e=>{r((e=>({...e,loading:!0})));const a="integration"===l?{type:l,integrationId:d,domain:e}:{type:l,spaceId:d,domain:e},s=await p().callApi({eventName:"createDomainVerificationCode",environment:i,data:a});if("success"===s.type){c(),(0,y().DO_NOT_USE_trackLegacy)(i,"domain_verification_domain_added",{type:l});const e=s.data.domainVerification,a=(0,t(486345).pl)(e);r((e=>({...e,domainVerification:a,loading:!1})))}else o().f1((0,h().H)(n,s)),r((e=>({...e,loading:!1})))}),[i,r,d,c,l,n]),v=(0,a.useCallback)((async e=>{r((e=>({...e,loading:!0})));const t=await p().callApi({eventName:"verifyDomain",environment:i,data:{verificationId:e.id}});if((0,y().DO_NOT_USE_trackLegacy)(i,"domain_verification_verification_attempted",{type:l}),"success"===t.type){c(),(0,y().DO_NOT_USE_trackLegacy)(i,"domain_verification_domain_verified",{type:l});const t={type:"verified",domain:e.domain};r((e=>({...e,domainVerification:t,loading:!1})))}else o().f1((0,h().H)(n,t)),r((e=>({...e,loading:!1})))}),[i,n,r,c,l]),A=(0,a.useCallback)((()=>{if(!s.domainVerification)return(0,b.jsx)(j,{handleAddNewDomain:g,loading:s.loading,verificationType:l});switch(s.domainVerification.type){case"invalid":return(0,b.jsx)(M,{domain:s.domainVerification.domain,isExpired:Date.now()>s.domainVerification.expiresAt,onClose:u});case"unverified":return(0,b.jsx)(t(223271).ZQ,{handleVerifyDomain:v,domainVerification:s.domainVerification,loading:s.loading});case"verified":return(0,b.jsx)(k,{domain:s.domainVerification.domain,onClose:u,verificationType:l});default:(0,x().HB)(s.domainVerification)}}),[s.domainVerification,s.loading,v,g,u,l]);return(0,b.jsx)(t(107975).a,{open:s.modalOpen,preventHideChildrenWhileOpening:!0,onDismiss:u,render:()=>(0,b.jsx)("div",{style:{background:f().Tj.popoverBackground,width:410,padding:24,borderRadius:4},children:A()})})},C=[{id:"domain",headerTitle:(0,b.jsx)(m().sA,{id:"domainVerificationTable.table.header.domain",defaultMessage:"Domain"}),renderCell:e=>(0,b.jsx)(c().A,{children:e.domain}),widthData:{width:100},sortable:!1},{id:"status",headerTitle:(0,b.jsx)(m().sA,{id:"domainVerificationTable.table.header.status",defaultMessage:"Status"}),renderCell:e=>(0,b.jsx)(V,{status:e.status}),widthData:{width:100},sortable:!1},{id:"actions",headerTitle:null,renderCell:e=>(0,b.jsx)(F,{onShowDetails:e.onShowDetails,onRemove:e.onRemove}),widthData:{width:20},sortable:!1}],I=(0,m().YK)({verifiedSAMLWarning:{defaultMessage:"Deleting this domain will prevent others with this email from logging in using SAML SSO.",id:"domainVerificationInput.securitySAMLSettings.emailDomainsSection.removeDomain.description"},verifiedIntegrationsWarning:{defaultMessage:"Deleting this domain will prevent integrations from unfurling urls that contain this domain.",id:"domainVerificationInput.myIntegrations.emailDomainsSection.removeDomain.description"},unverifiedDomainWarning:{defaultMessage:"Deleting this domain will restart its verification process. A new verification code will be generated for this domain in the next verification attempt.",id:"domainVerificationInput.securitySAMLSettings.emailDomainsSection.removeDomain.pending.description"}});function L(){return(0,b.jsx)(c().A,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"},children:(0,b.jsx)(m().sA,{id:"securitySAMLSettings.emailDomainsSection.emptyTable",defaultMessage:"No domains configured."})})}function V({status:e}){const i=(0,n().IS)((()=>{const i={[g().A$.Success]:f().Tj.green.background.secondaryTranslucent,[g().A$.Pending]:f().Tj.yellow.background.secondaryTranslucent,[g().A$.Failure]:f().Tj.red.background.secondaryTranslucent},t={[g().A$.Success]:f().Tj.green.icon.accentPrimary,[g().A$.Pending]:f().Tj.yellow.icon.accentPrimary,[g().A$.Failure]:f().Tj.red.icon.accentPrimary},a={[g().A$.Success]:f().Tj.green.text.secondary,[g().A$.Pending]:f().Tj.yellow.text.secondary,[g().A$.Failure]:f().Tj.red.text.secondary};return{container:{background:i[e],color:a[e],display:"flex",justifyContent:"center",alignItems:"center",gap:6,borderRadius:18,height:20,paddingInlineStart:7,paddingInlineEnd:9},dot:{background:t[e],width:8,height:8,borderRadius:"100%"}}}),[e]);return(0,b.jsxs)("div",{style:i.container,children:[(0,b.jsx)("div",{style:i.dot}),(0,b.jsx)(l().D,{styleKey:"bodyMedium",children:Y(e)})]})}function F({onShowDetails:e,onRemove:i}){const a=(0,n().IS)((()=>({menuItem:{width:250}})),[]),o=[];return e&&o.push({key:"details",action:()=>e(),render:e=>(0,b.jsx)(u().A,{...e,style:a.menuItem,focused:!1,icon:(0,b.jsx)(s().I,{icon:t(525884).infoCircleIcon}),title:(0,b.jsx)(m().sA,{defaultMessage:"View details",id:"securitySAMLSettings.emailDomainsSection.details"}),caption:(0,b.jsx)(m().sA,{defaultMessage:"See more information about the state of this domain verification record.",id:"securitySAMLSettings.emailDomainsSection.detailsCaption"}),shouldWrapCaption:!0})}),i&&o.push({key:"remove",action:()=>i(),render:e=>(0,b.jsx)(u().A,{...e,style:a.menuItem,focused:!1,icon:(0,b.jsx)(s().I,{icon:t(236262).trashIcon}),title:(0,b.jsx)(m().sA,{defaultMessage:"Remove domain",id:"securitySAMLSettings.emailDomainsSection.remove"}),caption:(0,b.jsx)(m().sA,{defaultMessage:"Delete this domain verification record.",id:"securitySAMLSettings.emailDomainsSection.removeCaption"}),shouldWrapCaption:!0})}),0===o.length?null:(0,b.jsx)(t(297872).ED,{hideDropdownIcon:!0,title:(0,b.jsx)(s().I,{icon:t(589407).ellipsisIcon,colorVariant:"secondary"}),items:o})}function Y(e){switch(e){case g().A$.Success:return(0,b.jsx)(m().sA,{defaultMessage:"Verified",id:"domainVerificationInput.emailDomainsSection.statusToken.verified"});case g().A$.Pending:return(0,b.jsx)(m().sA,{defaultMessage:"Pending",id:"domainVerificationInput.emailDomainsSection.statusToken.pending"});case g().A$.Failure:return(0,b.jsx)(m().sA,{defaultMessage:"Failed",id:"domainVerificationInput.emailDomainsSection.statusToken.failed"});default:(0,x().HB)(e)}}function P(e){return{domain:e,status:g().A$.Success,data:{type:"verified",domain:e}}}function E(e){return Date.now()>e.expiresAt||Boolean(e.invalidatedAt)?{domain:e.domain,status:g().A$.Failure,data:{type:"invalid",id:e.id,domain:e.domain,verificationCode:e.verificationCode,createdAt:e.createdAt,expiresAt:e.expiresAt,invalidatedAt:e.invalidatedAt}}:{domain:e.domain,status:g().A$.Pending,data:{type:"unverified",id:e.id,domain:e.domain,verificationCode:e.verificationCode,createdAt:e.createdAt,expiresAt:e.expiresAt,invalidatedAt:e.invalidatedAt}}}const _=function(e){const{disabled:i,domains:t,domainVerificationStore:n,verificationType:s,verificationTargetId:l,refreshDomains:c,onRemoveDomain:u,onClickAddDomain:f,renderOverrideAddDomainButton:y}=e,h=(0,a.useMemo)((()=>(0,d().rC)({columnRenderInfo:C,containerMarginTop:0})),[]);function p(){i||(f&&f(),n.setState({domainVerification:void 0,loading:!1,modalOpen:!0}))}async function v(e,i){let t;if(i===g().A$.Failure)return void u(e);i===g().A$.Pending?t=I.unverifiedDomainWarning:i===g().A$.Success?t="saml_config"===s?I.verifiedSAMLWarning:I.verifiedIntegrationsWarning:(0,x().HB)(i);const{accept:a}=await o().Gh(function(e){return{mode:"wide",message:(0,b.jsx)(m().sA,{defaultMessage:"Delete this domain?",id:"domainVerificationInput.emailDomainsSection.removeDomain.message"}),description:(0,b.jsx)(m().sA,{...e}),acceptLabel:(0,b.jsx)(m().sA,{id:"domainVerificationInput.emailDomainsSection.removeDomain.accept",defaultMessage:"Delete domain"}),cancelLabel:(0,b.jsx)(m().sA,{id:"domainVerificationInput.emailDomainsSection.removeDomain.cancel",defaultMessage:"Cancel"})}}(t));a&&u(e)}const A=t.map((({domain:e,status:t,data:a})=>({id:"verified"===a.type?e:a.id,isClickable:!1,domain:e,status:t,onShowDetails:i?void 0:()=>function(e){i||n.setState({domainVerification:e,loading:!1,modalOpen:!0})}(a),onRemove:i?void 0:()=>v(a,t)})));return(0,b.jsxs)(a.Fragment,{children:[y?y(p):(0,b.jsx)(r().A,{colorPalette:"blue",size:"lg",disabled:i,onClick:p,style:{margin:"4px 0px 16px",width:"fit-content"},children:(0,b.jsx)(m().sA,{defaultMessage:"Add domain",id:"securitySAMLSettings.emailDomainsSection.addDomain"})}),(0,b.jsx)(d().WE,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:C,rows:A,styles:h,renderNoRowsComponent:()=>(0,b.jsx)(L,{})}),(0,b.jsx)(w,{store:n,verificationTargetId:l,verificationType:s,refreshDomains:c})]})}},649760:(e,i,t)=>{t.d(i,{A$:()=>s,Ay:()=>l});t(296540);var a=()=>t(100622),n=()=>t(881690),o=t(474848);const s={Success:"success",Pending:"pending",Failure:"failure"};const r={display:"flex",justifyContent:"center",alignItems:"baseline"},l=function({status:e,value:i,renderTooltip:l,...d}){const c={[s.Success]:a().Tj.green.background.secondaryTranslucent,[s.Pending]:a().Tj.yellow.background.secondaryTranslucent,[s.Failure]:a().Tj.red.background.secondaryTranslucent},u={[s.Success]:a().Tj.green.icon.accentPrimary,[s.Pending]:a().Tj.yellow.icon.accentPrimary,[s.Failure]:a().Tj.red.icon.accentPrimary},m={[s.Success]:a().Tj.green.text.secondary,[s.Pending]:a().Tj.yellow.text.secondary,[s.Failure]:a().Tj.red.text.secondary};return l?(0,o.jsx)(n().A,{...d,backgroundColor:c[e],color:m[e],value:(0,o.jsx)(t(26697).m,{placement:"bottom",alignment:"start",renderTooltip:l,render:t=>(0,o.jsxs)("div",{style:r,...t,children:[(0,o.jsx)("div",{style:{background:u[e],width:8,height:8,borderRadius:"100%",marginInlineEnd:4}}),i]})})}):(0,o.jsx)(n().A,{...d,backgroundColor:c[e],color:m[e],value:(0,o.jsxs)("div",{style:r,children:[(0,o.jsx)("div",{style:{background:u[e],width:8,height:8,borderRadius:"100%",marginInlineEnd:4}}),i]})})}},705876:(e,i,t)=>{t.d(i,{U:()=>n});class a extends(()=>t(757695))().Store{getInitialState(){return{currentTooltipPoint:void 0}}setCurrentTooltipPoint(e){this.setState({currentTooltipPoint:e})}}const n=new a}}]);