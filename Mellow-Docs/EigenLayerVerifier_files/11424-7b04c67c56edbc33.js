"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[11424],{24123:(e,t,o)=>{o.d(t,{B:()=>c});o(296540);var n=()=>o(401497),i=()=>o(852424),r=()=>o(280746),l=()=>o(769145),a=()=>o(379771),s=o(474848);function c(e){var t,o,c;const{type:d,icon:p,size:u,propertyId:g,style:S,theme:m}=e,y=(0,a().Q)(g),h={bottom:(null==S||null===(t=S.overlay)||void 0===t?void 0:t.bottom)??-2,insetInlineStart:(null==S||null===(o=S.overlay)||void 0===o?void 0:o.insetInlineStart)??10},v=(null==S||null===(c=S.overlay)||void 0===c?void 0:c.iconSize)??12,f=(0,n().IS)((()=>{var e,t,o;return{container:{position:"relative",display:"grid",alignItems:"center",justifyContent:"center",marginInlineStart:null==S||null===(e=S.container)||void 0===e?void 0:e.marginInlineStart,flexShrink:null==S||null===(t=S.container)||void 0===t?void 0:t.flexShrink},icon:null!=S&&null!==(o=S.icon)&&void 0!==o&&o.fill?{fill:S.icon.fill}:{},overlayWrapper:{position:"absolute",bottom:h.bottom,insetInlineStart:h.insetInlineStart,width:v+2,height:v+2,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",zIndex:1}}}),[S,v,h.bottom,h.insetInlineStart]);return(0,s.jsxs)("span",{style:f.container,children:[(0,s.jsx)(i().zB,{type:d,icon:p,size:u,theme:m,style:f.icon}),y?(0,s.jsx)("span",{style:f.overlayWrapper,children:"jira"===y?(0,r().jiraIcon)({width:v,height:v,stroke:m.background.primary,strokeWidth:1,paintOrder:"stroke fill",vectorEffect:"non-scaling-stroke"}):(0,l().salesforceIcon)({width:v,height:v,stroke:m.background.primary,strokeWidth:1,paintOrder:"stroke fill",vectorEffect:"non-scaling-stroke"})}):null]})}},33376:(e,t,o)=>{o.d(t,{E:()=>i});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.37 3.09 15.2 12.78",svg:(0,o(474848).jsx)("path",{d:"M3.5 3.099c-.621 0-1.125.504-1.125 1.125v9.026A2.625 2.625 0 0 0 5 15.875h9.944a2.625 2.625 0 0 0 2.625-2.625V7.495a2.625 2.625 0 0 0-2.625-2.625H9.067L7.962 3.513A1.13 1.13 0 0 0 7.09 3.1zm.125 4.465V4.349H7.03l1.105 1.356c.214.263.534.415.872.415h5.937c.76 0 1.375.616 1.375 1.375v.069zm0 1.1h12.694v4.586c0 .76-.616 1.375-1.375 1.375H5c-.76 0-1.375-.616-1.375-1.375z"})},i=(0,o(340498).wt)("folder",n,"default")},35091:(e,t,o)=>{o.d(t,{A:()=>i});o(296540);var n=o(474848);const i=function({switcherProps:e,...t}){return(0,n.jsx)(o(497222).A,{right:(0,n.jsx)(o(287188).A,{onClick:t.onClick,disabled:t.disabled,...e}),...t})}},95441:(e,t,o)=>{o.d(t,{A:()=>i});o(296540);var n=o(474848);const i=function(e){const{title:t,href:i,analyticsFrom:r}=e,l=(0,o(484714).v3)();return(0,n.jsx)(o(552712).N,{href:i,onClick:()=>o(148024).FH(l,{from:r}),external:!0,children:(0,n.jsx)(o(497222).A,{icon:o(406533).questionMarkCircleIcon,title:t,isGray:!0})})}},112282:(e,t,o)=>{o.r(t),o.d(t,{arrowStraightUpIcon:()=>i,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.97 2.37 12.06 15.26",svg:(0,o(474848).jsx)("path",{d:"M9.792 2.41a.6.6 0 0 0-.234.148l-5.4 5.4a.625.625 0 1 0 .884.884l4.333-4.333V17a.625.625 0 1 0 1.25 0V4.509l4.333 4.333a.625.625 0 1 0 .884-.884l-5.4-5.4a.62.62 0 0 0-.65-.147"})},i=(0,o(340498).wt)("arrowStraightUp",n,"default")},147294:(e,t,o)=>{o.d(t,{Ee:()=>m,J1:()=>p,oG:()=>u});o(296540);var n=()=>o(907258),i=()=>o(59226),r=()=>o(590526),l=()=>o(401497),a=()=>o(970236),s=()=>o(69708),c=o(474848);const d={define_variables_automation_action:{launchDateMs:17277408e5,expiryDateMs:1738368e6},passkey_setting:{launchDateMs:1729101727e3,expiryDateMs:1738432882e3},publish_site_settings_embed_page:{launchDateMs:1736208e6,expiryDateMs:1743984e6},generalized_recurrence_automations:{launchDateMs:17365536e5,expiryDateMs:17460576e5},ai_page_translation_topbar_more_action:{launchDateMs:1740451280830,expiryDateMs:17434656e5},verification:{launchDateMs:1740096e6,expiryDateMs:174375e7},notion_ai_workspace_settings:{launchDateMs:17424288e5,expiryDateMs:17550432e5},notion_mail_launch_modal:{launchDateMs:17446752e5,expiryDateMs:17525376e5},notion_mail_launch_modal_2:{launchDateMs:17446752e5,expiryDateMs:17578944e5},ui_doc_example:{launchDateMs:19249056e5,expiryDateMs:19249056e5},collection_property_permissions:{launchDateMs:17433792e5,expiryDateMs:17671392e5},salesforce_sync_unfurling_option:{launchDateMs:17443296e5,expiryDateMs:17538336e5},personal_home_sidebar_item:{launchDateMs:17470944e5,expiryDateMs:175392e7},collection_property_reminder:{launchDateMs:1751958e6,expiryDateMs:17552628e5},get_notified_onboarding_tooltip:{launchDateMs:17520228e5,expiryDateMs:17591904e5},conditional_color_feature:{launchDateMs:17537472e5,expiryDateMs:17563392e5},web_clipper_new_tab_settings:{launchDateMs:17471808e5,expiryDateMs:18149184e5},my_meetings:{launchDateMs:17578944e5,expiryDateMs:17657568e5},workspace_connections_tab:{launchDateMs:17578944e5,expiryDateMs:18149184e5},external_agents_tab:{launchDateMs:17578944e5,expiryDateMs:18149184e5},permissions_tab:{launchDateMs:17578944e5,expiryDateMs:18149184e5}};function p({style:e}){const t=(0,l().IS)((()=>({badge:{letterSpacing:0,whiteSpace:"nowrap",width:"fit-content",...e}})),[e]);return(0,c.jsx)(a().E,{color:"blue",style:t.badge,content:(0,c.jsx)(s().sA,{id:"newBadgeComponent.label",defaultMessage:"New"})})}function u(e){return(0,r().K8)((()=>{const{launchDateMs:t,expiryDateMs:o}=d[e],{currentUserSettingsStore:i}=n().default.state;if(i&&i.isReady()){var r;const e=null===(r=i.getSettings())||void 0===r?void 0:r.signup_time;if(e&&e>t)return!1}return Date.now()<=o}),[e])}function g({style:e,newBadgeKey:t}){return u(t)?(0,c.jsx)(p,{style:e}):null}function S({style:e,newBadgeKey:t}){return(0,i().X)(t)?(0,c.jsx)(p,{style:e}):null}function m(e){return e.didUserEngage?null:"feature_gate"===e.keyType?(0,c.jsx)(S,{...e}):(0,c.jsx)(g,{...e})}},168953:(e,t,o)=>{o.d(t,{C:()=>r});o(296540);var n=()=>o(205981),i=o(474848);function r({icon:e}){return(0,i.jsxs)("div",{style:{position:"relative"},children:[e,(0,i.jsx)(n().H,{size:"xs"})]})}},174638:(e,t,o)=>{o.d(t,{A:()=>le,u:()=>re});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577),o(581454);var n=o.n(o(844751)),i=o(296540),r=()=>o(59226),l=()=>o(756117),a=()=>o(726637),s=()=>o(383036),c=()=>o(484714),d=()=>o(590526),p=()=>o(401497),u=()=>o(929219),g=()=>o(148860),S=()=>o(631524),m=()=>o(463438),y=()=>o(26697),h=()=>o(663639),v=()=>o(736847),f=()=>o(148307),x=()=>o(539297),b=()=>o(443239),w=()=>o(898244),C=()=>o(713998),j=()=>o(651124),_=()=>o(89849),T=()=>o(594952),A=()=>o(617668),M=()=>o(236262),k=()=>o(340498),I=()=>o(69708),P=()=>o(100622),B=()=>o(496603),V=()=>o(534177),D=()=>o(284371),K=()=>o(436696),O=()=>o(896628),F=()=>o(736767),z=()=>o(574036),E=()=>o(267584),L=()=>o(232930),R=()=>o(696746),$=()=>o(271205),W=()=>o(547149),H=()=>o(339798),U=()=>o(430171),X=()=>o(527438),J=()=>o(647702),G=()=>o(206372),N=()=>o(334684),Q=()=>o(95441),Y=()=>o(497222),Z=o(474848);const q=(0,I().YK)({inputPlaceholder:{defaultMessage:"Search for a property…",id:"database.viewSettings.propertiesTab.inputPlaceholder"},togglePropertyVisibilityAriaLabel:{defaultMessage:"Toggle property visibility",id:"database.viewSettings.propertiesTab.togglePropertyVisibilityAriaLabel"},compactCardDescription:{defaultMessage:"Enabled properties appear on their own line instead of wrapping with other properties",id:"database.viewSettings.layoutTab.compactCard.description"}}),ee=o(757695).Store.createClass("",{name:"InputStore"});function te(){const e=(0,p().IS)((()=>({captionStyle:{fontSize:12,color:P().Tj.text.secondary,fontWeight:D().Wy.regular},contentContainerStyle:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:10,paddingTop:8,paddingInlineEnd:12,paddingBottom:8,paddingInlineStart:12},headerImageStyle:{width:"100%",display:"block",borderRadius:10,border:`1px solid ${P().Tj.border.secondary}`}})),[]),t=(0,I().tz)();return(0,Z.jsx)(v().A,{children:(0,Z.jsxs)("div",{style:e.contentContainerStyle,children:[(0,Z.jsx)("video",{src:f().A.images.collections.collectionSettingsCompactCardSettingsPreviewMp4,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,style:e.headerImageStyle}),(0,Z.jsx)("div",{style:e.captionStyle,children:t.formatMessage(q.compactCardDescription)})]})})}function oe(e){switch(e){case"editPropertiesAndOrderAndVisibility":return{allowEditProperties:!0,allowEditOrder:!0,allowTimelineControls:!1,toggleType:"visibility",customTitle:(0,Z.jsx)(I().sA,{defaultMessage:"Properties",id:"database.viewSettings.editPropertiesTab.title"})};case"editVisibilityAndOrder":return{allowEditProperties:!1,allowEditOrder:!0,allowTimelineControls:!0,toggleType:"visibility",customTitle:(0,Z.jsx)(I().sA,{defaultMessage:"Property visibility",id:"database.viewSettings.propertyVisibilityTab.title"})};case"editOrderAndWidth":return{allowEditProperties:!1,allowEditOrder:!0,allowTimelineControls:!1,toggleType:"width",customTitle:(0,Z.jsx)(I().sA,{defaultMessage:"Compact card settings",id:"database.viewSettings.layoutTab.compactCard.title"}),customHeader:(0,Z.jsx)(te,{})};case"editPropertiesOnly":return{allowEditProperties:!0,allowEditOrder:!1,allowTimelineControls:!1,toggleType:"none",customTitle:(0,Z.jsx)(I().sA,{defaultMessage:"Properties",id:"database.viewSettings.editPropertiesTab.title"})};default:(0,V().HB)(e)}}function ne({propertyType:e,propertyIcon:t,propertyId:n,shouldShowDragHandleOnHover:r,isHovering:a,allowsDragging:s,allowEditProperties:c,collectionContextStore:u,onMouseMove:S,onMouseLeave:m}){const y=(0,p().DP)(),h=(0,d().K8)((()=>(0,o(379771).b)({collectionContextStore:u,propertyId:n})),[u,n]),v=(0,p().IS)((()=>({icon:{fill:P().Tj.icon.primary},container:{marginInlineStart:2,flexShrink:0},propertyIcon:{fill:P().Tj.icon.primary,marginInlineStart:2,flexShrink:0},animationContainer:{position:"relative",width:k().Ev.default,height:k().Ev.default},animatedBaseIconStyle:{width:k().Ev.default,height:k().Ev.default,display:"flex",alignItems:"center",justifyContent:"center"},animatedDragHandleStyle:{position:"absolute",top:0,insetInlineStart:0,width:k().Ev.default,height:k().Ev.default,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none"},dragContainer:{display:"flex",alignItems:"center"},dragHandle:{marginInlineEnd:6,flexShrink:0}})),[]),f=(0,i.useMemo)((()=>h?(0,Z.jsx)(o(24123).B,{propertyId:n,type:e,icon:t,size:k().Ev.sm,theme:y,style:{icon:v.icon,container:v.container}}):(0,Z.jsx)(o(852424).zB,{type:e,icon:t,size:k().Ev.sm,theme:y,style:v.propertyIcon})),[h,n,e,t,y,v]);return s?r?(0,Z.jsxs)("div",{style:v.animationContainer,children:[(0,Z.jsx)(l().A,{animate:{opacity:a?0:1},initial:{opacity:1},exit:{opacity:1},style:v.animatedBaseIconStyle,children:f}),(0,Z.jsx)(l().A,{animate:{opacity:a?1:0},initial:{opacity:0},exit:{opacity:0},style:v.animatedDragHandleStyle,onMouseMove:S,onMouseLeave:m,children:(0,Z.jsx)(g().t,{})})]}):(0,Z.jsxs)("div",{style:v.dragContainer,children:[c?(0,Z.jsx)(g().t,{wrapperStyle:v.dragHandle}):(0,Z.jsx)(o(923744).j,{style:v.dragHandle,disableTooltip:!0}),f]}):f}const ie=i.memo((function({formatKey:e,propertyFormat:t,propertySchema:n,menuConfig:r,inputStore:l,propertiesMenuType:a,canEditProperty:u,canEditPropertyOffline:g,baseMenuItemProps:S,tooltipEvents:m}){const y=(0,I().tz)(),h=(0,c().v3)(),v=(0,o(908201).ET)(),f=(0,d().K8)((()=>v.collectionStore()),[v]),x=(0,d().O$)(v.permissionScopesStore),b="width"===r.toggleType,C=(0,d().K8)((()=>ge(v,l,a)&&("title"!==t.property||!me.includes(e))),[v,l,a,e,t]),_="visibility"===r.toggleType,T=(0,d().K8)((()=>_&&("title"!==t.property||function(e,t){const o=t.normalizedFormatStore.state,n=(0,X().jx)({collectionContextStore:t});if("board"===n)return(0,j().zl)(o.board_cover);if("gallery"===n)return(0,j().zl)(o.gallery_cover);if("timeline"===n)return"timeline_table_properties"===e||(0,j().w3)(Boolean(o.timeline_show_table),o.timeline_table_properties||[]);return!1}(e,v))),[_,e,v,t]),[A,M]=i.useState(!1),[B,V]=i.useState(!1),O=(0,i.useCallback)((()=>{M(!0)}),[]),F=(0,i.useCallback)((()=>{M(!1),V(!1)}),[]),E=(0,i.useCallback)((()=>{V(!0)}),[]),L=(0,i.useCallback)((()=>{V(!1),M(!1),function(e,t,n,i){const{formatKey:r,propertyFormat:l}=e,a=n.collectionViewStore();if(!a)return;const s=a.getPropertyFormatsStore(r),c=null==s?void 0:s.getValue();if(!s||!c)return;const d=c.findIndex((e=>e.property===l.property));if(-1===d)return;const p=(0,j().j0)({propertyFormat:l,propertySchema:i}),u="full_line"===p?"inline":"full_line",g={...l,card_property_width_mode:u},S=[...c];S[d]=g,W().createAndCommit({userAction:"CollectionSettingsViewProperties.handleTogglePropertyWidth",environment:t,canUndo:!0,perform:e=>{o(384944).KY({store:s,value:S,transaction:e})}}),(0,K().X)({environment:t,collectionContextStore:n,action:"toggle_card_property_width",card_property_width_mode:u,property_type:i.type})}({formatKey:e,propertyFormat:t},h,v,n)}),[e,t,h,v,n]),R=(0,p().IS)((()=>({titleStyle:{marginInlineStart:!C||r.allowEditProperties||b?void 0:-4},titleContainer:{display:"flex",alignItems:"center"},titleSpan:{marginInlineStart:C?8:10,...D().RC},propertyPermissionBadge:{marginInlineStart:6,flexShrink:0},aiBadge:{marginInlineStart:6},hoveredStyle:B?{background:P().Tj.buttonPressedBackground}:{background:P().Tj.buttonHoveredBackground},rightContainer:{display:"flex",alignItems:"center"},eyeIcon:{width:k().Ev.sm,height:k().Ev.sm},chevronIcon:{marginInlineStart:5}})),[C,r.allowEditProperties,b,B]),$=ne({propertyType:n.type,propertyIcon:n.icon,propertyId:t.property,shouldShowDragHandleOnHover:b,isHovering:A,allowsDragging:C,allowEditProperties:r.allowEditProperties,collectionContextStore:v,onMouseMove:O,onMouseLeave:F}),H=(0,Z.jsxs)("div",{style:R.titleContainer,children:[$,(0,Z.jsx)("span",{style:R.titleSpan,children:n.name}),f&&"person"===n.type?(0,Z.jsx)("div",{style:R.propertyPermissionBadge,children:(0,Z.jsx)(o(846875).$,{collectionStore:f,property:t.property,propertySchema:n,blockStore:void 0})}):void 0,(0,w().$M)(n)&&(0,w().om)(n)?(0,Z.jsx)("div",{style:R.aiBadge,children:(0,Z.jsx)(o(551882).A,{})}):void 0]}),U=(0,j().j0)({propertyFormat:t,propertySchema:n}),J=!t.visible;return"width"===r.toggleType?(0,Z.jsx)(z().A,{...(0,s().A)(S,m),titleStyle:R.titleStyle,disabled:!x.canConfigureBlock||"title"===t.property,title:H,on:"title"===t.property||"full_line"===U,focused:A||B,hoveredStyle:R.hoveredStyle,ignoreLocalHoverState:!0,onClick:()=>{L()},onMouseDown:E,onMouseMove:O,onMouseLeave:F}):(0,Z.jsx)(o(81068).A,{...(0,s().A)(S,m),titleStyle:R.titleStyle,title:H,right:(0,Z.jsxs)("div",{style:R.rightContainer,children:["visibility"===r.toggleType?(0,Z.jsx)(o(695115).A,{icon:J?o(288739).M:o(514608).eyeFillSmallIcon,iconStyle:R.eyeIcon,colorVariant:J?"secondary":"primary",onClick:()=>{!function(e,t,n,i){var r;const{formatKey:l,propertyFormat:a}=e,s=n.collectionViewStore();if(!s)return;const c=n.normalizedFormatStore.state,d=c[l]||[],p=d.filter((e=>e.property!==a.property)),u={...a,visible:!a.visible},g=p.filter((e=>e.visible)),S=p.filter((e=>!e.visible));let m=[];m=me.includes(l)?!0===u.visible?[...ye([...g,u]),...ye(S)]:[...ye(g),...ye([u,...S])]:[...g,u,...S];const y={...c,[l]:m};W().createAndCommit({userAction:"CollectionSettingsViewProperties.handleTogglePropertyVisibility",environment:t,canUndo:!0,perform:e=>{(0,o(654062).F)({collectionViewStore:s,update:{format:y},transaction:e})}}),(0,K().X)({environment:t,collectionContextStore:n,action:"toggle_property_visibility",original_view_type:s.getType(),property_type:null===(r=s.getCollectionStore())||void 0===r||null===(r=r.getSchema()[u.property])||void 0===r?void 0:r.type}),Se(i)}({formatKey:e,propertyFormat:t},h,v,l)},ariaLabel:y.formatMessage(q.togglePropertyVisibilityAriaLabel),disabled:!T||!x.canConfigureBlock}):void 0,u?(0,Z.jsx)(o(807449).I,{icon:o(906380).arrowChevronSingleRightSmallIcon,size:"sm",colorVariant:"tertiary",style:R.chevronIcon}):void 0]}),disabled:!(u&&g),disabledFeedback:!g})}));function re(e){const{collectionContextStore:t,onClick:o}=e,n=(0,c().v3)(),i=(0,d().O$)(t.normalizedFormatStore),r=Boolean(i.timeline_show_table),l=(0,d().O$)(t.permissionScopesStore);return(0,Z.jsx)(z().A,{title:(0,Z.jsx)(I().sA,{defaultMessage:"Show table",id:"database.viewSettings.propertiesTab.showTable"}),on:r,focused:!1,onClick:()=>{const e=t.collectionViewStore();e&&(W().createAndCommit({userAction:"CollectionSettingsViewProperties.TimelineShowTableSwitcher",environment:n,canUndo:!0,perform:t=>{O().zA({stores:[e],update:{timeline_show_table:!r,timeline_table_properties:[{property:"name",visible:!0}]},transaction:t})}}),null==o||o(),(0,K().X)({environment:n,collectionContextStore:t,action:"timeline_toggle_show_table"}))},disabled:!l.canConfigureBlock,textWrapperStyle:{opacity:1}})}const le=function({collectionContextStore:e,timelineViewTab:t,collectionSettingsStore:n,propertiesMenuType:i}){const r=(0,I().tz)(),l=(0,c().v3)(),s=(0,d().uB)(void 0,o(452004).$),p=(0,d().uB)(void 0,ee),u=(0,d().O$)(p),g=(0,d().K8)((()=>(0,X().jx)({collectionContextStore:e})),[e]),S=(0,d().K8)((()=>(0,X().ZI)({timelineViewTab:t,collectionContextStore:e})),[t,e]),m=(0,d().K8)((()=>(0,o(378518).DG)({environment:l,isFullScreen:e.isFullScreenStore.state,isRootChild:e.isRootChildStore.state})),[l,e]),y=oe(i);return(0,Z.jsxs)(o(735695).A,{collectionSettingsStore:n,title:y.customTitle,header:y.customHeader??(0,Z.jsx)(v().A,{children:(0,Z.jsx)(o(419357).Ay,{focusInitial:!a().A.isMobile,value:u,showClearButton:!0,onChange:e=>{p.setState(e.target.value),s.setState({...s.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})},placeholder:r.formatMessage(q.inputPlaceholder)})}),footer:(0,Z.jsx)(de,{collectionContextStore:e,collectionSettingsStore:n,propertiesMenuType:i,timelineViewTab:t}),children:[y.allowTimelineControls&&"timeline"===g&&m?(0,Z.jsx)(fe,{collectionSettingsStore:n,collectionContextStore:e,timelineViewTab:t,inputStore:p,propertiesMenuType:i}):void 0,S?(0,Z.jsx)(we,{collectionContextStore:e,collectionSettingsStore:n,inputStore:p,menuListStore:s,formatKey:S,propertiesMenuType:i}):void 0]})};function ae({viewType:e}){return"table"===e?(0,Z.jsx)(I().sA,{defaultMessage:"Shown in table",id:"database.viewSettings.propertiesTab.shownInTableTitle"}):"timeline"===e?(0,Z.jsx)(I().sA,{defaultMessage:"Shown in timeline",id:"database.viewSettings.propertiesTab.shownInTimelineTitle"}):"board"===e?(0,Z.jsx)(I().sA,{defaultMessage:"Shown in board",id:"database.viewSettings.propertiesTab.shownInBoardTitle"}):"list"===e?(0,Z.jsx)(I().sA,{defaultMessage:"Shown in list",id:"database.viewSettings.propertiesTab.shownInListTitle"}):"gallery"===e?(0,Z.jsx)(I().sA,{defaultMessage:"Shown in gallery",id:"database.viewSettings.propertiesTab.shownInGalleryTitle"}):"calendar"===e?(0,Z.jsx)(I().sA,{defaultMessage:"Shown in calendar",id:"database.viewSettings.propertiesTab.shownInCalendarTitle"}):"map"===e||"page"===e||"chart"===e||"form_editor"===e?null:"feed"===e?(0,Z.jsx)(I().sA,{defaultMessage:"Shown in feed",id:"database.viewSettings.propertiesTab.shownInFeedTitle"}):"chat"===e||"custom"===e||"dashboard"===e||"teamspace_directory"===e||"library_external_pages"===e?null:void(0,V().HB)(e)}function se({viewType:e}){return"table"===e?(0,Z.jsx)(I().sA,{defaultMessage:"Hidden in table",id:"database.viewSettings.propertiesTab.hiddenInTableTitle"}):"timeline"===e?(0,Z.jsx)(I().sA,{defaultMessage:"Hidden in timeline",id:"database.viewSettings.propertiesTab.hiddenInTimelineTitle"}):"board"===e?(0,Z.jsx)(I().sA,{defaultMessage:"Hidden in board",id:"database.viewSettings.propertiesTab.hiddenInBoardTitle"}):"list"===e?(0,Z.jsx)(I().sA,{defaultMessage:"Hidden in list",id:"database.viewSettings.propertiesTab.hiddenInListTitle"}):"gallery"===e?(0,Z.jsx)(I().sA,{defaultMessage:"Hidden in gallery",id:"database.viewSettings.propertiesTab.hiddenInGalleryTitle"}):"calendar"===e?(0,Z.jsx)(I().sA,{defaultMessage:"Hidden in calendar",id:"database.viewSettings.propertiesTab.hiddenInCalendarTitle"}):"map"===e||"page"===e||"chart"===e||"form_editor"===e?null:"feed"===e?(0,Z.jsx)(I().sA,{defaultMessage:"Hidden in feed",id:"database.viewSettings.propertiesTab.hiddenInFeedTitle"}):"chat"===e||"custom"===e||"dashboard"===e||"teamspace_directory"===e||"library_external_pages"===e?null:void(0,V().HB)(e)}function ce(e,t,o){const{formatKey:n,visibility:i}=e,r=t.collectionViewStore();if(!r)return;const l=t.normalizedFormatStore.state[n]||[];let a=l.filter((e=>Boolean(e.visible))),s=l.filter((e=>!e.visible));me.includes(n)&&(a=ye(a),s=ye(s));const c=[...a.map((e=>({...e,visible:i}))),...s.map((e=>({...e,visible:i})))];W().createAndCommit({userAction:"CollectionSettingsViewProperties.setAllPropertiesVisibility",environment:o,canUndo:!0,perform:e=>{O().zA({stores:[r],update:{[n]:c},transaction:e})}})}function de({collectionContextStore:e,collectionSettingsStore:t,propertiesMenuType:o,timelineViewTab:n}){const r=oe(o),l=(0,c().v3)(),a=(0,d().K8)((()=>{var t;const o=(0,x().x)(e.getViewType()),n="compact"===(null===(t=e.collectionViewStore())||void 0===t?void 0:t.getCardLayoutMode());return"visibility"===r.toggleType&&o&&n}),[e,r.toggleType]),s="width"===r.toggleType,p=(0,i.useCallback)((()=>{H().dP({collectionSettingsStore:t,item:{type:"compactCardSettings",timelineViewTab:n}}),(0,K().X)({environment:l,collectionContextStore:e,action:"click_compact_card_settings",from:"property_visibility_menu"})}),[t,n,l,e]),u=(0,i.useCallback)((()=>{H().dP({collectionSettingsStore:t,item:{type:"propertyVisibility",timelineViewTab:n}}),(0,K().X)({environment:l,collectionContextStore:e,action:"click_show_hide_properties",from:"compact_card_settings_menu"})}),[t,n,l,e]);return r.allowEditProperties?(0,Z.jsx)(pe,{collectionContextStore:e,collectionSettingsStore:t,propertiesMenuType:o,timelineViewTab:n}):a?(0,Z.jsx)(v().A,{topBorder:!0,extraPadding:!0,children:(0,Z.jsx)(Y().A,{icon:T().I,title:(0,Z.jsx)(I().sA,{id:"database.viewSettings.propertiesTab.styleProperties",defaultMessage:"Style properties"}),isGray:!0,onClick:p})}):s?(0,Z.jsx)(v().A,{topBorder:!0,extraPadding:!0,children:(0,Z.jsx)(Y().A,{icon:_().eyeIcon,title:(0,Z.jsx)(I().sA,{id:"database.viewSettings.propertiesTab.showProperties",defaultMessage:"Show properties"}),isGray:!0,onClick:u})}):null}function pe({collectionContextStore:e,collectionSettingsStore:t,propertiesMenuType:o,timelineViewTab:n}){const l=(0,c().v3)(),a=(0,d().O$)(e.permissionScopesStore),s=(0,d().K8)((()=>"timeline"===(0,X().jx)({collectionContextStore:e})&&"table"===n&&!(0,X().ZF)({collectionContextStore:e})),[e,n]),p=(0,d().K8)((()=>{const t=e.collectionViewBlockStore();return t&&(0,R().Nh)(t.id)}),[e]),u=(0,r().X)("jira_notion_only_properties"),g=a.canConfigureCollection&&!s&&(!a.isExternallyImportedAndSyncedCollection||u)&&!p,S=(0,i.useCallback)((()=>{(0,U().c)({environment:l,collectionContextStore:e})}),[l,e]),m=(0,d().O$)(e.isInHomeWidgetStore),y=oe(o);return(0,Z.jsxs)(v().A,{topBorder:!0,extraPadding:!0,children:[g?(0,Z.jsx)(Y().A,{icon:A().plusIcon,title:(0,Z.jsx)(I().sA,{id:"database.viewSettings.propertiesTab.newProperty",defaultMessage:"New property"}),isGray:!0,onClick:S}):void 0,!m&&y.allowEditProperties?(0,Z.jsx)(ue,{collectionContextStore:e,collectionSettingsStore:t,timelineViewTab:n}):void 0,(0,Z.jsx)(Q().A,{href:(0,L().x)("guides.databaseProperties"),title:(0,Z.jsx)(I().sA,{defaultMessage:"Learn about properties",id:"database.viewSettings.propertiesTab.learnMoreButton.title"}),analyticsFrom:"view_settings_properties"})]})}function ue({collectionContextStore:e,collectionSettingsStore:t,timelineViewTab:o}){const n=(0,c().v3)(),i=(0,d().O$)(e.normalizedDeletedSchemaStore),r=Object.keys(i).length;return(0,d().O$)(e.permissionScopesStore).canConfigureCollection&&r>0?(0,Z.jsx)(Y().A,{icon:M().trashIcon,title:(0,Z.jsx)(I().sA,{id:"database.viewSettings.propertiesTab.deletedProperties",defaultMessage:"Deleted properties"}),isGray:!0,onClick:()=>function(e,t,o,n){o.collectionStore()&&((0,K().X)({environment:e,collectionContextStore:o,action:"click_deleted_properties"}),H().a2({collectionSettingsStore:t,item:{type:"deletedProperties",timelineViewTab:n}}))}(n,t,e,o),right:r,showChevron:!0}):null}function ge(e,t,o){const n=t.state,i=e.permissionScopesStore.state;return oe(o).allowEditOrder&&!a().A.isMobile&&i.canConfigureBlock&&!n}function Se(e){e.reset()}const me=["board_properties","gallery_properties","calendar_properties"];function ye(e){const t=e.find((e=>"title"===e.property));return t?[t,...e.filter((e=>"title"!==e.property))]:e}function he(e,t,o,n,i,r,l,a){var s;const{formatKey:c,propertyFormat:d}=e,p=o.permissionScopesStore.state,u=o.normalizedSchemaStore.state,g=(0,C()._g)({schema:u,property:d.property}),S=oe(l),m=!g||!(0,w().sl)(g);let h=S.allowEditProperties&&(0,J().K)({collectionContextStore:o,permissionScopes:p})&&(0,E().RL)({isExternallyImportedAndSyncedCollection:p.isExternallyImportedAndSyncedCollection,propertyId:d.property,collectionStore:o.collectionStore(),propertySchema:g})&&m;if(p.isSyncedCollection&&((0,b().u)(d.property)||(0,w().cC)(d.property))&&(h=!1),!g)return;const v=!(a&&(0,N().$)({propertyType:null==g?void 0:g.type,propertySchema:g,allowAIProperty:!1})),f=!v||(null===(s=g.description)||void 0===s?void 0:s.length);return{key:d.property,render:e=>(0,Z.jsx)(y().m,{disableTooltip:!f,renderTooltip:e=>(0,Z.jsx)("div",{...e,style:G().Q$,children:v?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("div",{children:g.name}),(0,Z.jsx)("div",{style:{color:P().Tj.text.inverseSecondary},children:g.description})]}):(0,Z.jsx)(I().sA,{id:"collectionSettings.editProperty.offlineTooltip",defaultMessage:"Go online to edit property"})}),placement:"left",render:t=>(0,Z.jsx)(ie,{formatKey:c,propertyFormat:d,propertySchema:g,menuConfig:S,inputStore:r,propertiesMenuType:l,canEditProperty:h,canEditPropertyOffline:v,baseMenuItemProps:e,tooltipEvents:t})}),action:()=>{h&&v&&function(e,t,o,n){var i,r,l;const a=(null===(i=n.collectionStore())||void 0===i?void 0:i.getSchema())||n.normalizedSchemaStore.state||{},{formatKey:s,propertyFormat:c}=e;(0,K().X)({environment:t,collectionContextStore:n,action:"click_property",original_view_type:null==n||null===(r=n.collectionViewStore())||void 0===r?void 0:r.getType(),property_type:null===(l=a[c.property])||void 0===l?void 0:l.type}),H().a2({collectionSettingsStore:o,item:{type:"property",formatKey:s,property:c.property}})}({formatKey:c,propertyFormat:d},t,i,o)}}}function ve(e,t,o,n,i,r,l,a){const{formatKey:s,properties:c}=e;return B().oE(c.map((e=>he({formatKey:s,propertyFormat:e},t,o,0,i,r,l,a))))}function fe({collectionSettingsStore:e,collectionContextStore:t,timelineViewTab:o,inputStore:n,propertiesMenuType:r}){const l=(0,c().v3)(),a=(0,i.useCallback)((()=>function(e){Se(e)}(n)),[n]),s=(0,i.useCallback)((o=>function(e,t,o,n,i,r){(0,K().X)({environment:t,collectionContextStore:n,action:0===e?"click_properties_tab_timeline":"click_properties_tab_table"}),H().dP({collectionSettingsStore:o,item:{type:"editVisibilityAndOrder"===r?"propertyVisibility":"properties",timelineViewTab:0===e?"timeline":"table"}}),Se(i)}(o,l,e,t,n,r)),[l,e,t,n,r]),d="timeline"===o?0:1;return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(m().LZ,{tabs:[(0,Z.jsx)(I().sA,{defaultMessage:"Timeline",id:"database.viewSettings.propertiesTab.timelineProperties"},"database.viewSettings.propertiesTab.timelineProperties"),(0,Z.jsx)(I().sA,{defaultMessage:"Table",id:"database.viewSettings.propertiesTab.tableProperties"},"database.viewSettings.propertiesTab.tableProperties")],selectedIndex:d,onChange:s}),"table"===o?(0,Z.jsx)(v().A,{extraPadding:!0,children:(0,Z.jsx)(re,{collectionContextStore:t,onClick:a})}):void 0]})}function xe(e){const t=(0,c().v3)(),{props:o,formatKey:n,children:i,collectionContextStore:r,inputStore:l}=e,a=(0,d().O$)(r.canConfigureBlockStore),s=(0,d().O$)(l),p=(0,d().K8)((()=>"timeline_table_properties"===n?"table":(0,X().jx)({collectionContextStore:r})),[r,n]);return(0,Z.jsx)(v().A,{...o,noTextOverflow:!0,title:(0,Z.jsx)(se,{viewType:p}),desktopTitleStyle:{height:19,padding:"0 4px",marginBottom:4},mobileTitleStyle:{paddingInlineStart:0,paddingInlineEnd:0},right:!s&&a&&(0,Z.jsx)(S().p,{size:"sm",shouldShrink:!0,colorPalette:"blue",style:{fontSize:12,height:void 0,paddingTop:2,paddingBottom:2},onClick:()=>function(e,t,o){(0,K().X)({environment:t,collectionContextStore:o,action:"click_show_all_properties"}),ce({formatKey:e,visibility:!0},o,t)}(n,t,r),children:(0,Z.jsx)(I().sA,{id:"database.viewSettings.propertiesTab.showAllProperties",defaultMessage:"Show all"})}),style:{width:"100%",paddingBottom:0},children:i})}function be(e){const t=(0,c().v3)(),{formatKey:o,visibleProperties:n,hiddenProperties:i,children:r,collectionContextStore:l,inputStore:a,menuListStore:s,propertiesMenuType:p}=e,u=B().oE([...n.map((e=>"title"===e.property&&me.includes(o)?{key:e.property,draggable:!1}:e.property)),n.length>0&&i.length>0&&{key:"group-header-hidden-property",draggable:!1},...i.map((e=>"title"===e.property&&me.includes(o)?{key:e.property,draggable:!1}:e.property))]),g=u.findIndex((e=>"string"==typeof e?"title"===e:"title"===e.key));return(0,d().K8)((()=>ge(l,a,p)),[l,a,p])?(0,Z.jsx)($().Ay,{direction:"vertical",keys:u,shouldAnimateDrop:!0,getInvalidDropIndices:-1===g?void 0:()=>new Set([g]),renderKey:(e,t)=>r[t],onDrop:(e,n)=>{!function(e,t,o,n){const{formatKey:i,newPropertyKeys:r}=e,l=o.collectionViewStore();if(!l)return;const a=o.normalizedFormatStore.state[i]||[],s=r.indexOf("group-header-hidden-property");let c=B().oE(r.filter((e=>!e.startsWith("group-header-"))).map(((e,t)=>{const o=a.find((t=>t.property===e));if(o)return s>=0?{...o,visible:Boolean(t<s)}:o}))),d=a.filter((e=>!r.includes(e.property)));me.includes(i)&&(c=ye(c),d=ye(d));const p=[...c,...d];W().createAndCommit({userAction:"CollectionSettingsViewProperties.handlePropertyReorder",environment:t,canUndo:!0,perform:e=>{O().zA({stores:[l],update:{[i]:p},transaction:e})}}),(0,K().X)({environment:t,collectionContextStore:o,action:"reorder_properties",original_view_type:l.getType()}),n.reset()}({formatKey:o,newPropertyKeys:e},t,l,s)}}):(0,Z.jsx)(Z.Fragment,{children:r})}function we({formatKey:e,collectionContextStore:t,collectionSettingsStore:o,inputStore:r,menuListStore:l,propertiesMenuType:a}){const s=(0,c().v3)(),p=(0,d().O$)(t.canConfigureBlockStore),g=(0,d().O$)(t.normalizedFormatStore),m=(0,d().O$)(t.normalizedSchemaStore),y=(0,d().O$)(r),f=!(0,d().O$)(u().e),x=(0,d().K8)((()=>t.collectionStore()),[t]);let b=(0,d().K8)((()=>(g[e]||[]).map((e=>({propertyFormat:e,propertySchema:(0,C()._g)({schema:m,property:e.property})})))),[g,m,e]);b=b.filter((({propertySchema:e})=>Boolean(!(null!=e&&e.hide_in_property_list)))),y&&(b=b.filter((({propertySchema:e})=>Boolean(e&&e.name&&n().test(y,e.name)))));const w=b.map((({propertyFormat:e})=>e)),j=w.filter((e=>Boolean(e.visible))),_=oe(a),T="visibility"===_.toggleType,A=(0,i.useMemo)((()=>T||_.allowEditProperties?w.filter((e=>!e.visible)):[]),[w,T,_]),M=(0,d().K8)((()=>"timeline_table_properties"===e?"table":(0,X().jx)({collectionContextStore:t})),[t,e]),k=(0,d().K8)((()=>ve({formatKey:e,properties:j},s,t,0,o,r,a,f)),[e,j,a,s,t,x,o,r,f]),P=(0,d().K8)((()=>ve({formatKey:e,properties:A},s,t,0,o,r,a,f)),[e,A,a,s,t,x,o,r,f]),V=(0,i.useMemo)((()=>{switch(_.toggleType){case"visibility":return(0,Z.jsx)(ae,{viewType:M});case"width":return(0,Z.jsx)(I().sA,{defaultMessage:"Full line display",id:"database.viewSettings.propertiesTab.fullLineDisplay"});default:return null}}),[_.toggleType,M]);return 0===b.length?(0,Z.jsx)(v().A,{extraPadding:!0,children:(0,Z.jsx)(F().A,{caption:(0,Z.jsx)(I().sA,{defaultMessage:"No results",id:"database.viewSettings.propertiesTab.noResults"})})}):0===j.length&&"width"===_.toggleType?(0,Z.jsx)(v().A,{extraPadding:!0,children:(0,Z.jsx)(F().A,{caption:(0,Z.jsx)(I().sA,{defaultMessage:"No properties shown",id:"database.viewSettings.propertiesTab.noPropertiesToDisplay"})})}):(0,Z.jsx)(h().A,{type:h().O.Vertical,store:l,initialFocus:void 0,resetFocusOnMouseOut:!0,sections:B().oE([j.length>0&&{key:"visible_and_hidden_properties",render:o=>(0,Z.jsx)(v().A,{...o,extraPadding:!0,noTextOverflow:!0,title:V,desktopTitleStyle:{height:19,marginBottom:4},right:!y&&p&&T&&(0,Z.jsx)(S().p,{size:"sm",shouldShrink:!0,colorPalette:"blue",style:{fontSize:12,height:void 0,paddingTop:2,paddingBottom:2},onClick:()=>function(e,t,o){(0,K().X)({environment:t,collectionContextStore:o,action:"click_hide_all_properties"}),ce({formatKey:e,visibility:!1},o,t)}(e,s,t),children:(0,Z.jsx)(I().sA,{id:"database.viewSettings.propertiesTab.hideAllProperties",defaultMessage:"Hide all"})}),children:(0,Z.jsx)(be,{collectionContextStore:t,inputStore:r,menuListStore:l,formatKey:e,visibleProperties:j,hiddenProperties:A,children:o.children,propertiesMenuType:a})}),items:B().oE([...k,T?A.length>0&&{key:"group-header-hidden-property",render:o=>(0,Z.jsx)(xe,{collectionContextStore:t,inputStore:r,props:o,formatKey:e,children:(0,Z.jsx)(Z.Fragment,{})}),action:()=>{}}:void 0,...P])},0===j.length&&A.length>0&&{key:"hidden_properties",render:o=>(0,Z.jsx)(xe,{collectionContextStore:t,inputStore:r,props:o,formatKey:e,children:(0,Z.jsx)(be,{formatKey:e,visibleProperties:j,hiddenProperties:A,children:o.children,collectionContextStore:t,inputStore:r,menuListStore:l,propertiesMenuType:a})}),items:P}])})}},243331:(e,t,o)=>{o.d(t,{K_:()=>i,Lf:()=>l});var n=()=>o(206267);function i(){return{currentScreen:"none",status:"not_started",isBackendConnected:!1,externalSourceName:void 0,sessionId:n().JW(),analyticsFrom:"unknown",isConnected:!1,isPersonalAuthComplete:!1,isDisconnecting:!1,isLoaded:!1,isNotionMailProhibited:!1}}class r extends(()=>o(757695))().Store{getInitialState(){return i()}}const l=new r;(0,o(852832).exposeDebugValue)("notionMailAIConnectorStore",l)},246679:(e,t,o)=>{o.d(t,{VK:()=>i,gv:()=>l});var n=()=>o(206267);function i(){return{currentScreen:"none",status:"not_started",isBackendConnected:!1,externalSourceName:void 0,sessionId:n().JW(),analyticsFrom:"unknown",isConnected:!1,isPersonalAuthComplete:!1,isDisconnecting:!1,isLoaded:!1,isNotionCalendarProhibited:!1}}class r extends(()=>o(757695))().Store{getInitialState(){return i()}}const l=new r;(0,o(852832).exposeDebugValue)("notionCalendarAIConnectorStore",l)},253447:(e,t,o)=>{o.d(t,{F:()=>i});var n=()=>o(963575);function i(e,t){if(e)return e;switch(t){case"large":return n().A.card.desktop.large.height;case"small":return n().A.card.desktop.small.height;default:return n().A.card.desktop.medium.height}}},271232:(e,t,o)=>{o.d(t,{t:()=>r});var n=o(296540),i=o(474848);const r=n.memo((function(e){const{coverHeight:t,coverSizeFormat:n,emptyGalleryCoverStyle:r}=e,l=(0,o(401497).IS)((()=>({container:{height:(0,o(253447).F)(t,n),...r}})),[t,n,r]);return(0,i.jsx)("div",{style:l.container})}))},321775:(e,t,o)=>{o.d(t,{m:()=>r});var n=()=>o(390650),i=()=>o(645302);function r(e){const t=(0,n().sl)(e.collectionContextStore);t&&t.view_type&&i().jE(e.environment,{from:e.from,from_peek_mode:e.from_peek_mode,...t,view_type:t.view_type})}},358006:(e,t,o)=>{o.d(t,{z:()=>l});o(296540);var n=()=>o(79926),i=o(474848);const r=new(n().O2)("CollectionItemCover",(async()=>{const{CollectionItemCover:e}=await o.e(79883).then(o.bind(o,873718));return{CollectionItemCover:e}})),l=(0,n()._h)(r,(e=>e.CollectionItemCover),{renderLoading:(e,t)=>{const{coverHeight:n,coverSizeFormat:r,emptyGalleryCoverStyle:l,showEmptyGalleryCover:a}=t;return a?(0,i.jsx)(o(271232).t,{coverHeight:n,coverSizeFormat:r,emptyGalleryCoverStyle:l}):null}})},380468:(e,t,o)=>{o.d(t,{A:()=>h});o(944114),o(898992),o(354520),o(581454);var n=o.n(o(844751)),i=o(296540),r=()=>o(726637),l=()=>o(807449),a=()=>o(81068),s=()=>o(663639),c=()=>o(736847),d=()=>o(69708),p=()=>o(496603),u=()=>o(806080),g=()=>o(314638),S=o(474848);const m=(0,d().YK)({inputPlaceholder:{defaultMessage:"Search for a property…",id:"database.viewSettings.propertySelect.inputPlaceholder"},none:{defaultMessage:"None",id:"database.viewSettings.propertySelect.noneMessage"},remove:{defaultMessage:"Remove",id:"database.viewSettings.propertySelect.removeMessage"}});function y({currentProperty:e,showNoneOption:t,showRemoveOption:y,getProperties:h,onAccept:v,inputPlaceholder:f,inputLeft:x,defaultShowPropertyCount:b,disableSortByPageFormat:w,schema:C,format:j,renderProperty:_,aiInputSection:T}){const A=(0,d().tz)(),[M,k]=(0,i.useState)(""),[I,P]=(0,i.useState)(!1),B=(0,o(590526).uB)(void 0,o(452004).$),V=(0,o(546926).Tf)(),D=(0,o(401497).IS)((()=>({menuItem:{color:o(100622).Tj.text.secondary}})),[]),[K,O]=(0,o(791177).$)(),F=(0,o(390066).L)(j,C,void 0,o(651124).jf.Page).collection_page_properties||[],z=!b||I,E=A.formatMessage(m.none),L=t?{key:"none",render:t=>(0,S.jsx)(a().A,{...t,isChecked:!e,title:E}),action:()=>{v(void 0)}}:void 0,R=y?{key:"remove",render:e=>(0,S.jsx)(a().A,{...e,icon:(0,S.jsx)(l().I,{icon:o(236262).trashIcon}),title:A.formatMessage(m.remove)}),action:()=>{v(void 0)}}:void 0,$=h();let W=$;if(w||(W=p().Ul($,(e=>F.findIndex((t=>t.property===e))))),M){const e=new Map;let t=W.map((t=>{const n=C[t],i=n?`${n.name} ${o(680288).dC[n.type]}`:"";return e.set(t,i),i}));t=n().filter(M,t).map((({original:e})=>e)),W=W.filter((o=>t.includes(e.get(o)||"")))}else!z&&b&&(W=W.slice(0,b));const H=p().oE([!M||n().test(M,E)?L:void 0,...W.map((t=>function(e,t,o,n,i){const r=t[e];if(!r)return;const l={key:e,render:t=>{const o=e===n;return i?i(t,e,o,r):(0,S.jsx)(g().G,{...t,propertySchema:r,format:g().e.Name,isChecked:o})},action:()=>{o(e)}};return l}(t,C,v,e,_)))]);if(!z&&$.length>W.length&&!M){const e={key:"show_more",render:e=>(0,S.jsx)(a().A,{...e,icon:(0,S.jsx)(l().I,{icon:o(589407).ellipsisIcon}),style:D.menuItem,title:(0,S.jsx)(d().sA,{defaultMessage:"{moreCount} more",id:"database.viewSettings.propertySelect.showMoreTitle",values:{moreCount:$.length-W.length}})}),action:()=>{P(!0)}};H.push(e)}const U=H.length>0,X=Boolean(M),J=!R||U||X;J&&!U&&H.push({action:u().lQ,key:"noResults",render:e=>(0,S.jsx)(o(736767).A,{...e,caption:(0,S.jsx)(d().sA,{defaultMessage:"No results",id:"database.viewSettings.propertySelect.noResultsTitle"})})});const G=[],N=T&&!r().A.isMobile;if(N&&G.push({key:"ai_helper",comp:T}),J&&!N){const e=(0,S.jsx)(o(419357).Ay,{inputLeft:x,focusInitial:!r().A.isMobile||void 0,focus:!r().A.isMobile||void 0,value:M,onChange:e=>{k(e.target.value),B.setState({...B.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}}),P(!1)},placeholder:f||A.formatMessage(m.inputPlaceholder),...K});V?H.unshift({key:"input",render:()=>e,action:u().lQ}):G.push({key:"input",comp:(0,S.jsx)(c().A,{isInput:!0,children:e})})}return(H.length>0||R)&&G.push({key:"properties",comp:(0,S.jsx)(s().A,{type:s().O.Vertical,initialFocus:0,comboboxProps:J?O:void 0,sections:[...H.length>0?[{key:"results",render:e=>(0,S.jsx)(c().A,{...e}),items:H}]:[],...R?[{key:"remove",render:e=>(0,S.jsx)(c().A,{topBorder:H.length>0,...e}),items:[R]}]:[]],store:B})}),(0,S.jsx)(S.Fragment,{children:G.map((({key:e,comp:t})=>(0,S.jsx)(i.Fragment,{children:t},e)))})}const h=i.memo(y,o(821062).A)},419178:(e,t,o)=>{o.d(t,{Q:()=>i});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.52 2.4 12.95 15.2",svg:(0,o(474848).jsx)("path",{d:"M15.85 3.65a.625.625 0 1 0 0-1.25H4.15a.625.625 0 1 0 0 1.25zm-1.008 6.692a.625.625 0 0 1-.884 0l-3.333-3.333v9.966a.625.625 0 1 1-1.25 0V7.009l-3.333 3.333a.625.625 0 1 1-.884-.884l4.4-4.4a.625.625 0 0 1 .884 0l4.4 4.4a.625.625 0 0 1 0 .884"})},i=(0,o(340498).wt)("arrowLineUp",n,"default")},430171:(e,t,o)=>{o.d(t,{c:()=>l});var n=()=>o(436696),i=()=>o(377093),r=()=>o(339798);function l(e){const{environment:t,collectionContextStore:o}=e;o.collectionStore()&&((0,n().X)({environment:t,collectionContextStore:o,action:"click_new_property"}),r().a2({collectionSettingsStore:o.settingsStore,item:{type:"propertyType",onAccept:e=>{const{propertyType:n,isSuggestedProperty:r,propertyName:l,propertyIcon:a,selectOptions:s}=e;i().nZ({environment:t,propertyType:n,isSuggestedProperty:r,propertyName:l,propertyIcon:a,selectOptions:s,collectionContextStore:o,from:"view_settings"})}}}))}},443191:(e,t,o)=>{o.d(t,{J:()=>i});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.39 15.26 15.21",svg:(0,o(474848).jsx)("path",{d:"m10.775 2.583 2.475 2.475a.625.625 0 0 1 0 .884l-2.475 2.475a.625.625 0 1 1-.884-.884l1.408-1.408H4.8c-.649 0-1.175.526-1.175 1.175v5.975a.625.625 0 1 1-1.25 0V7.3A2.425 2.425 0 0 1 4.8 4.875h6.499L9.891 3.467a.625.625 0 0 1 .884-.884M17 6.1c.345 0 .625.28.625.625V12.7a2.425 2.425 0 0 1-2.425 2.425H8.7l1.408 1.408a.625.625 0 1 1-.884.884L6.75 14.942a.625.625 0 0 1 0-.884l2.475-2.475a.625.625 0 1 1 .884.884l-1.408 1.408H15.2c.649 0 1.175-.526 1.175-1.175V6.725c0-.345.28-.625.625-.625"})},i=(0,o(340498).wt)("arrowSquareLeftRight",n,"default")},497222:(e,t,o)=>{o.d(t,{A:()=>S});o(296540);var n=()=>o(804773),i=()=>o(726637),r=()=>o(401497),l=()=>o(807449),a=()=>o(81068),s=()=>o(906380),c=()=>o(100622),d=()=>o(284371),p=()=>o(612900),u=()=>o(700251),g=o(474848);function S(e){const{icon:t,iconStyle:o,title:S,caption:m,right:y,rightStyle:h,isRedOnHover:v,isGray:f,isOrange:x,onClick:b,onMouseDown:w,onMouseEnter:C,onMouseLeave:j,disabled:_,showChevron:T,chevronStyle:A,rotateChevron:M,showDragHandle:k,focused:I,textWrapperStyle:P,shouldWrapCaption:B,desktopIconStyle:V,buttonStyle:D,desktopTitleStyle:K,source:O,menuListItemProps:F,isPulsing:z,shouldShowMobileBackground:E}=e,L=(0,u().y$)(),R=(0,r().IS)((()=>({style:{...f?{color:c().Tj.text.secondary,fill:c().Tj.icon.secondary}:x?{color:c().Tj.orange.icon.accentPrimary,fill:c().Tj.orange.icon.accentPrimary}:{color:c().Tj.text.primary,fill:c().Tj.icon.primary},opacity:_?.4:void 0,...D},leftIconStyle:{width:L,height:L,...o},rightStyle:{display:"flex",alignItems:"center",color:_?c().Tj.text.primary:c().Tj.text.tertiary,fill:_?c().Tj.icon.primary:c().Tj.icon.tertiary,flexShrink:0,marginInlineStart:i().A.isMobile?8:void 0,...h},rightChevronStyle:{marginInlineStart:"tableHeaderMenu"===O?0:6,transition:"transform 200ms ease-in-out",...M&&{transform:"rotate(90deg)"},...A}})),[f,x,_,o,A,h,D,L,M,O]),{itemRef:$,isTabbable:W,onKeyDown:H,onFocus:U}=(0,n().e)(),X=(0,g.jsx)(a().A,{ref:$,role:"menuitem",icon:null==t?void 0:t(R.leftIconStyle),focused:I||!1,disabled:_,title:S,caption:m,shouldWrapTitle:!0,shouldWrapCaption:B,desktopTitleStyle:{flexGrow:1,flexShrink:1,...K},onKeyDown:H,onFocus:U,disallowTabbing:!W,showDragHandle:k,buttonStyle:R.style,rightStyle:R.rightStyle,isRedOnHover:v,ignoreLocalHoverState:!!_||void 0,right:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{style:{...d().RC,display:"flex"},children:y}),!_&&T?(0,g.jsx)(l().I,{icon:s().arrowChevronSingleRightSmallIcon,size:"sm",colorVariant:"tableHeaderMenu"===O?"secondary":"tertiary",style:R.rightChevronStyle}):null]}),onClick:b,onMouseDown:w,onMouseEnter:C,onMouseLeave:j,textWrapperStyle:P,desktopIconStyle:V,reducedPadding:e.reducedPadding,shouldShowMobileBackground:E,...F});return z?(0,g.jsx)(p().u,{borderRadius:6,shape:"square",children:X}):X}},526278:(e,t,o)=>{o.r(t),o.d(t,{arrowStraightLeftIcon:()=>i,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.37 3.97 15.26 12.06",directional:!0,svg:(0,o(474848).jsx)("path",{d:"M2.411 9.79a.6.6 0 0 1 .147-.232l5.4-5.4a.625.625 0 1 1 .884.884L4.509 9.375H17a.625.625 0 1 1 0 1.25H4.509l4.333 4.333a.625.625 0 1 1-.884.884l-5.4-5.4a.62.62 0 0 1-.147-.651"})},i=(0,o(340498).wt)("arrowStraightLeft",n,"default")},542984:(e,t,o)=>{o.d(t,{Q:()=>B});var n=o(296540),i=()=>o(484714),r=()=>o(590526),l=()=>o(807449),a=()=>o(26697),s=()=>o(955363),c=()=>o(688311),d=()=>o(69708),p=()=>o(436696),u=()=>o(187820),g=()=>o(16006),S=(o(898992),o(672577),()=>o(564884)),m=()=>o(907258),y=()=>o(365917),h=()=>o(249046),v=()=>o(651124),f=()=>o(33376),x=()=>o(496603),b=()=>o(638013),w=()=>o(339798),C=()=>o(497222),j=()=>o(556048),_=()=>o(635676),T=()=>o(267584),A=()=>o(666803),M=o(474848);function k({environment:e,collectionSettingsStore:t,flowId:o,externalCollectionType:n,integrationIconUrl:i,site:r,botId:l,isSyncOwner:a}){return(0,M.jsx)(C().A,{icon:f().E,onClick:()=>{(0,S().u)({environment:e,event:{eventName:"external_sync_sidebar_config",eventProperties:{integration:n,actionType:"source_option_click",flowId:o,identifier:r,botId:l,isSyncOwner:a}}}),w().a2({collectionSettingsStore:t,item:{source:"external_source",type:"externalProjectsSyncSettings"}})},right:(0,M.jsxs)(h().Ye,{alignItems:"center",children:[(0,M.jsx)("img",{style:{height:12,width:12,marginInlineEnd:6},src:i,alt:"External integration icon"}),(0,M.jsx)(d().sA,{id:"database.viewSettings.mainTab.source.sourceName",defaultMessage:"{integrationName}",values:{integrationName:(0,x().ZH)(n||"")}})]}),showChevron:!0,title:(0,M.jsx)(d().sA,{defaultMessage:"Source",id:"database.viewSettings.mainTab.source.title"})})}function I({environment:e,collectionStore:t,collectionSettingsStore:o}){const i=function(e,t){const{botId:o,site:n,externalCollectionType:i,syncState:l}=(0,r().K8)((()=>{const e=null==t?void 0:t.getFormat();return{botId:null==e?void 0:e.bot_id,site:null==e?void 0:e.synced_collection_external_url,externalCollectionType:null==e?void 0:e.external_collection_type,syncState:null==e?void 0:e.sync_state}}),[t]),a=(0,r().K8)((()=>{var e;return null===(e=m().default.state.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.seen_jira_sync_source_tooltip}),[]),s=(0,r().K8)((()=>A().Ay.getFlowId()),[]),c=(0,r().K8)((()=>(0,T().Sd)()),[]),d=(0,r().K8)((()=>Boolean(y().A.externalAuthentications.state.find((t=>t.id===o&&t.user_id===e.currentUser.id)))),[o,e.currentUser.id]);if(!i)return;const p={externalCollectionType:i,botId:o,site:n,integrationIconUrl:_().l[i],isSyncOwner:d,flowId:s};switch(i){case v().uO.Jira:return{...p,shouldShowTooltip:c&&!(!0===a)&&l};case v().uO.Salesforce:default:return{...p,shouldShowTooltip:!1}}}(e,t),l=(0,n.useRef)(null);if(!i)return null;const{botId:a,site:s,integrationIconUrl:c,isSyncOwner:d,shouldShowTooltip:p,externalCollectionType:u,flowId:g}=i;return p?(0,M.jsxs)("div",{ref:l,style:{boxShadow:b().p.buttonBlueFocusRing.light,borderRadius:6},children:[(0,M.jsx)(k,{environment:e,collectionSettingsStore:o,flowId:g,externalCollectionType:u,integrationIconUrl:c,site:s,botId:a,isSyncOwner:d}),(0,M.jsx)(j().C8,{origin:l})]}):(0,M.jsx)(k,{environment:e,collectionSettingsStore:o,flowId:g,externalCollectionType:u,integrationIconUrl:c,site:s,botId:a,isSyncOwner:d})}var P=()=>o(168953);function B({collectionContextStore:e,collectionSettingsStore:t,disabled:o,overrideOnClickBehavior:S,buttonStyle:m,forceShow:y,...h}){const v=(0,i().v3)(),f=(0,d().tz)(),x=(0,r().K8)((()=>e.collectionStore()),[e]),b=(0,r().K8)((()=>null==x?void 0:x.isExternalSyncedCollection()),[x]),j=(0,r().O$)(e.canConfigureBlockStore),_=(0,r().K8)((()=>e.collectionViewBlockStore()),[e]),T=(0,r().K8)((()=>V({forceShow:y,forceDisabled:o,hasPermissionToConfigureBlock:j,collectionContextStore:e,intl:f})),[e,o,y,j,f]),A=(0,n.useMemo)((()=>{if(T.shouldRender&&T.isDisabled)return T.disabledTooltipText}),[T]),k=(0,r().K8)((()=>{const e=null==x?void 0:x.getIcon(),t=(null==x?void 0:x.getParentId())===(null==_?void 0:_.id);if(!e)return t?void 0:(0,M.jsx)(l().I,{icon:s().arrowDiagonalUpRightIcon,size:18,style:{marginInlineEnd:4}});const o={marginInlineEnd:4,opacity:.6};return t?(0,M.jsx)(u().B6,{icon:e,iconRecordCategory:"collection",isEmptyPage:!1,size:20,disabled:!0,style:o}):(0,M.jsx)("div",{style:o,children:(0,M.jsx)(P().C,{icon:(0,M.jsx)(u().B6,{icon:e,iconRecordCategory:"collection",isEmptyPage:!1,size:20,disabled:!0})})})}),[x,_]);return b&&x&&j?(0,M.jsx)(I,{environment:v,collectionStore:x,collectionSettingsStore:t}):x&&_&&T.shouldRender?(0,M.jsx)(a().m,{placement:"left",disableTooltip:void 0===A,renderTooltip:()=>A,render:o=>(0,M.jsx)(C().A,{...o,...h,icon:c().h,title:(0,M.jsx)(d().sA,{defaultMessage:"Source",id:"database.viewSettings.mainTab.sourceButton.title"}),showChevron:!0,right:(0,M.jsxs)(M.Fragment,{children:[k,(0,M.jsx)(g().A,{store:x})]}),textWrapperStyle:{flexShrink:0},rightStyle:{flexShrink:1},disabled:T.isDisabled,buttonStyle:m,onClick:()=>{S?S():((0,p().X)({environment:v,collectionContextStore:e,action:"click_source"}),w().a2({collectionSettingsStore:t,item:{type:"source"}}))}})}):null}function V(e){const{forceShow:t,forceDisabled:o,hasPermissionToConfigureBlock:n,collectionContextStore:i,intl:r}=e,l=i.collectionStore(),a=i.collectionViewBlockStore();if(!l||!a)return{shouldRender:!1};const s=function(e){const{forceShow:t,collectionStore:o,collectionViewBlockStore:n}=e;return!!t||!(n.isCollectionViewPageWithContent()||!o.isSyncedCollection()&&o.isSystemCollection())}({forceShow:t,collectionStore:l,collectionViewBlockStore:a});if(!s)return{shouldRender:!1};const c=function(e){const{forceDisabled:t,hasPermissionToConfigureBlock:o,collectionViewBlockStore:n,intl:i}=e;return t||!o?{isDisabled:!0,disabledTooltipText:void 0}:n.hasSingleSourceAndNoLinkedCollections()&&n.getCollectionViewIds().length<=1?{isDisabled:!0,disabledTooltipText:i.formatMessage({defaultMessage:"Add another view to change the source",id:"database.viewSettings.mainTab.sourceButton.disabledMessage.singleSourceSingleView"})}:{isDisabled:!1}}({forceDisabled:o,hasPermissionToConfigureBlock:n,collectionViewBlockStore:a,intl:r});return{shouldRender:s,...c}}},551882:(e,t,o)=>{o.d(t,{A:()=>u});o(296540);var n=()=>o(907258),i=()=>o(484714),r=()=>o(792485),l=()=>o(590526),a=()=>o(970236),s=()=>o(69708),c=()=>o(68465),d=()=>o(619206),p=o(474848);function u(e){const{message:t}=e,o=(0,i().v3)(),u=(0,r().S)();return(0,l().K8)((()=>{const e=n().default.state.mainEditorCurrentBlockStore,t=e&&d().A.getMode(o,e,e.getSpaceStore());return(0,c().ZE)(t,null==u?void 0:u.pageStore)}),[o,u])?(0,p.jsx)(a().E,{color:"purple",style:{padding:"1px 4px",display:"inline-flex",flexDirection:"row",alignItems:"center",gap:4,...e.style},content:t??(0,p.jsx)(s().sA,{id:"aiBadgeComponent.label",defaultMessage:"AI"})}):null}},556048:(e,t,o)=>{o.d(t,{C8:()=>u,Dz:()=>s,GC:()=>S,GL:()=>m,YY:()=>g,dM:()=>d,h9:()=>c,jX:()=>a,oF:()=>p,uj:()=>l});var n=()=>o(79926);const i={JiraSyncInfoPopup:new(n().O2)("JiraSyncInfoPopup",(async()=>await Promise.all([o.e(75134),o.e(68744)]).then(o.bind(o,738967)))),ImproveJiraSyncPopup:new(n().O2)("ImproveJiraSyncPopup",(async()=>await Promise.all([o.e(75134),o.e(2686)]).then(o.bind(o,484967)))),JiraDCAuthModal:new(n().O2)("JiraDCAuthModal",(async()=>await Promise.all([o.e(64556),o.e(28763)]).then(o.bind(o,992567)))),ExternalImportAndSyncIndicator:new(n().O2)("ExternalImportAndSyncIndicator",(async()=>await o.e(98288).then(o.bind(o,366792)))),JiraSyncedAllProjectsTooltip:new(n().O2)("JiraSyncedAllProjectsTooltip",(async()=>await o.e(21446).then(o.bind(o,562600)))),JiraSyncedAllIssuesTooltip:new(n().O2)("JiraSyncedAllIssuesTooltip",(async()=>await o.e(21446).then(o.bind(o,562600)))),JiraSyncedDatabaseViewsAndFiltersTooltip:new(n().O2)("JiraSyncedDatabaseViewsAndFiltersTooltip",(async()=>await o.e(21446).then(o.bind(o,562600)))),JiraSyncSourceTooltip:new(n().O2)("JiraSyncSourceTooltip",(async()=>await o.e(21446).then(o.bind(o,562600)))),JiraSyncedSettingsToSetupProjectsAndIssuesTooltip:new(n().O2)("JiraSyncedSettingsToSetupProjectsAndIssuesTooltip",(async()=>await o.e(21446).then(o.bind(o,562600))))},r={JiraSyncTeamSpaceModal:new(n().O2)("JiraSyncTeamSpaceModal",(async()=>Promise.all([o.e(35530),o.e(36556),o.e(55373),o.e(36192),o.e(27992),o.e(63452),o.e(66249),o.e(87249),o.e(79022),o.e(34877),o.e(11676),o.e(94522),o.e(38293),o.e(64556),o.e(55162),o.e(71003),o.e(32370),o.e(26264),o.e(74562),o.e(47160),o.e(76677),o.e(42056),o.e(53697),o.e(3261),o.e(82641),o.e(56188)]).then(o.bind(o,604698))))},l=(0,n()._h)(r.JiraSyncTeamSpaceModal,(e=>e.default)),a=(0,n()._h)(i.JiraSyncedAllProjectsTooltip,(e=>e.JiraSyncedAllProjectsTooltip)),s=(0,n()._h)(i.JiraDCAuthModal,(e=>e.default)),c=(0,n()._h)(i.JiraSyncedAllIssuesTooltip,(e=>e.JiraSyncedAllIssuesTooltip)),d=(0,n()._h)(i.JiraSyncedDatabaseViewsAndFiltersTooltip,(e=>e.JiraSyncedDatabaseViewsAndFiltersTooltip)),p=(0,n()._h)(i.JiraSyncedSettingsToSetupProjectsAndIssuesTooltip,(e=>e.JiraSyncedSettingsToSetupProjectsAndIssuesTooltip)),u=(0,n()._h)(i.JiraSyncSourceTooltip,(e=>e.JiraSyncSourceTooltip)),g=(0,n()._h)(i.JiraSyncInfoPopup,(e=>e.JiraSyncInfoPopup)),S=(0,n()._h)(i.ImproveJiraSyncPopup,(e=>e.ImproveJiraSyncPopup)),m=(0,n()._h)(i.ExternalImportAndSyncIndicator,(e=>e.ExternalImportAndSyncIndicator))},612900:(e,t,o)=>{o.d(t,{u:()=>r});var n=()=>o(79926);const i=new(n().O2)("PulsingWrapper",(async()=>o.e(45248).then(o.bind(o,673962)))),r=(0,n().jQ)(i,(e=>e.PulsingWrapper),{renderLoading:(e,t)=>t.children})},635676:(e,t,o)=>{o.d(t,{l:()=>r});var n=()=>o(148307),i=()=>o(651124);const r={[i().uO.Jira]:n().A.images.externalIntegrations.jiraPng,[i().uO.Salesforce]:n().A.images.externalIntegrations.salesforcePng}},636740:(e,t,o)=>{function n(e){const{dateRangeStart:t,dateRangeEnd:o,collectionContextStore:n}=e;n.dateRangeStartStore.setState(t),n.dateRangeEndStore.setState(o)}o.d(t,{r:()=>n})},647702:(e,t,o)=>{o.d(t,{K:()=>n});o(581454);function n({collectionContextStore:e,permissionScopes:t}){return"collectionTypedView"!==e.contextTypeFromStoreState&&t.canConfigureCollection}},655923:(e,t,o)=>{o.r(t),o.d(t,{arrowStraightDownIcon:()=>i,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.97 2.37 12.06 15.26",svg:(0,o(474848).jsx)("path",{d:"M10.625 3a.625.625 0 1 0-1.25 0v12.491l-4.333-4.333a.625.625 0 1 0-.884.884l5.4 5.4a.62.62 0 0 0 .884 0l5.4-5.4a.625.625 0 1 0-.884-.884l-4.333 4.333z"})},i=(0,o(340498).wt)("arrowStraightDown",n,"default")},688311:(e,t,o)=>{o.d(t,{h:()=>i});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.12 3.12 13.76 13.76",svg:(0,o(474848).jsx)("path",{d:"M12.718 4.625H6.313a3 3 0 0 0 0 6h7.562a1.75 1.75 0 1 1 0 3.5H7.282a2.126 2.126 0 1 0 0 1.25h6.593a3 3 0 1 0 0-6H6.313a1.75 1.75 0 1 1 0-3.5h6.405a2.126 2.126 0 1 0 0-1.25m1.157.625a.875.875 0 1 1 1.75 0 .875.875 0 0 1-1.75 0"})},i=(0,o(340498).wt)("pathRoundEnds",n,"default")},718338:(e,t,o)=>{o.d(t,{A:()=>Be,c:()=>Ve});o(16280),o(944114),o(898992),o(354520),o(672577),o(581454);var n=o(296540),i=()=>o(314529),r=()=>o(907258),l=()=>o(59226),a=()=>o(726637),s=()=>o(484714),c=()=>o(590526),d=()=>o(401497),p=()=>o(675133),u=()=>o(718827),g=()=>o(127833),S=()=>o(250910),m=()=>o(546926),y=()=>o(160432),h=()=>o(890492),v=()=>o(382607),f=()=>o(736847),x=()=>o(584262),b=()=>o(862e3),w=()=>o(539297),C=()=>o(898244),j=()=>o(852424),_=()=>o(604995),T=()=>o(651124),A=()=>o(340498),M=()=>o(69708),k=()=>o(100622),I=()=>o(496603),P=()=>o(284371),B=()=>o(436696),V=()=>o(321775),D=()=>o(896628),K=()=>o(253021),O=()=>o(934201),F=()=>o(770703),z=()=>o(378518),E=()=>o(636740),L=()=>o(314660),R=()=>o(384944),$=()=>o(714042),W=()=>o(407031),H=()=>o(896461);var U=()=>o(819757),X=()=>o(390650);const J=(0,M().YK)({none:{defaultMessage:"None",id:"database.viewPropertiesMenu.coverFormat.none"},page_content:{defaultMessage:"Page content",id:"database.viewPropertiesMenu.coverFormat.pageContent"},page_cover:{defaultMessage:"Page cover",id:"database.viewPropertiesMenu.coverFormat.pageCover"}}),G=(0,M().YK)({small:{defaultMessage:"Small",id:"database.viewPropertiesMenu.coverSize.small"},medium:{defaultMessage:"Medium",id:"database.viewPropertiesMenu.coverSize.medium"},large:{defaultMessage:"Large",id:"database.viewPropertiesMenu.coverSize.large"}});function N(e){return e?"page_content"===e.type?p().A.formatMessage(J.page_content):"page_cover"===e.type?p().A.formatMessage(J.page_cover):void 0:p().A.formatMessage(J.none)}function Q(e){switch(e){case"small":return p().A.formatMessage(G.small);case"medium":return p().A.formatMessage(G.medium);case"large":return p().A.formatMessage(G.large)}}var Y=()=>o(680288),Z=()=>o(121544),q=()=>o(999140),ee=()=>o(574036),te=()=>o(180252),oe=()=>o(635462),ne=()=>o(492414),ie=()=>o(232930),re=()=>o(246766),le=()=>o(712505),ae=()=>o(547149),se=()=>o(339798),ce=()=>o(203066),de=()=>o(153321),pe=()=>o(388926),ue=()=>o(371727),ge=()=>o(497222),Se=o(474848);const me=10,ye=12;function he({environment:e,collectionContextStore:t}){const o=(0,c().K8)((()=>(0,ue().C)(t.collectionViewStore())),[t]),i=(0,c().K8)((()=>t.settingsStore),[t]),r=!(0,c().O$)(t.canConfigureBlockStore),l="compact"===o,s=(0,n.useRef)(null),p=(0,n.useRef)(!1),u=(0,d().IS)((()=>({container:{margin:a().A.isMobile?0:"0px 8px 8px",borderRadius:a().A.isMobile?ye:me,padding:12,background:k().Tj.background.secondaryTranslucent,display:"flex",flexDirection:"column",alignItems:"center",overflow:"hidden"},title:{fontSize:a().A.isMobile?14:12,fontWeight:P().Wy.medium,color:k().Tj.text.secondary,marginBottom:12},optionsContainer:{display:"flex",width:"100%",gap:12,paddingInlineStart:6,paddingInlineEnd:6,justifyContent:"center"},motionDiv:{overflow:"hidden"},openAnimation:{height:"auto",opacity:1},collapsedAnimation:{height:0,opacity:0}})),[]),g=[{mode:"compact",label:(0,Se.jsx)(M().sA,{defaultMessage:"Compact",id:"database.viewSettings.layoutTab.cardLayoutModeSetting.compact"})},{mode:"list",label:(0,Se.jsx)(M().sA,{defaultMessage:"List",id:"database.viewSettings.layoutTab.cardLayoutModeSetting.list"})}],S=(0,n.useCallback)((()=>{var e;p.current&&(null===(e=s.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"end"}),p.current=!1)}),[p]);function m(o){var n;const i=null===(n=t.collectionViewStore())||void 0===n?void 0:n.getFormatStore();i&&(ae().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleCardLayoutClick",environment:e,canUndo:!0,perform:e=>{R().KY({store:i,value:{...i.getValue(),card_layout:{mode:o}},transaction:e})}}),(0,B().X)({environment:e,collectionContextStore:t,action:"toggle_card_layout_mode",card_layout_mode:o}),"compact"===o&&(p.current=!0))}return(0,Se.jsxs)("div",{ref:s,style:u.container,children:[(0,Se.jsx)("div",{style:u.title,children:(0,Se.jsx)(M().sA,{defaultMessage:"Card layout",id:"database.viewSettings.layoutTab.cardLayoutModeSetting.title"})}),(0,Se.jsx)("div",{style:u.optionsContainer,children:g.map((e=>(0,Se.jsx)(fe,{mode:e.mode,label:e.label,selected:o===e.mode,onClick:m,disabled:r},e.mode)))}),(0,Se.jsx)("div",{style:{width:"100%"},children:(0,Se.jsx)(ce().N,{initial:!1,children:l?(0,Se.jsx)(de().P.div,{style:u.motionDiv,initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:u.openAnimation,collapsed:u.collapsedAnimation},transition:{duration:.2},onAnimationComplete:S,children:(0,Se.jsxs)("div",{style:{marginTop:8},children:[(0,Se.jsx)("div",{style:{paddingInline:8},children:(0,Se.jsx)(pe().A,{size:16})}),(0,Se.jsx)(ve,{collectionContextStore:t,collectionSettingsStore:i})]})},"details"):void 0})})]})}function ve({collectionContextStore:e,collectionSettingsStore:t}){const o=(0,s().v3)(),i=(0,n.useCallback)((()=>{(0,se().a2)({collectionSettingsStore:t,item:{type:"compactCardSettings",timelineViewTab:"table"}}),(0,B().X)({environment:o,collectionContextStore:e,action:"click_compact_card_settings",from:"layout_menu"})}),[t,e,o]),r=(0,c().O$)(e.canConfigureBlockStore);return(0,Se.jsx)(ge().A,{title:(0,Se.jsx)(M().sA,{defaultMessage:"Compact card settings",id:"database.viewSettings.layoutTab.compactCardTitle"}),onClick:i,disabled:!r,showChevron:!0,shouldShowMobileBackground:!1})}function fe({label:e,mode:t,selected:o,onClick:n,disabled:i}){const r=(0,d().IS)((()=>({container:{display:"flex",flexDirection:"column",gap:6,alignItems:"center",flexBasis:0,flexGrow:1,maxWidth:150},button:{padding:10,borderRadius:a().A.isMobile?ye:me,outline:o?`2px solid ${k().Tj.blue.border.accentPrimary}`:`1px solid ${k().Tj.border.primary}`,outlineOffset:o?-2:-1,position:"relative",width:"100%",background:k().Tj.background.elevated,border:"none",aspectRatio:"4 / 3"},title:{fontSize:a().A.isMobile?17:14,fontWeight:P().Wy.regular,color:o?k().Tj.text.primary:k().Tj.text.secondary}})),[o]);return(0,Se.jsxs)("div",{style:r.container,children:[(0,Se.jsx)("button",{type:"button",role:"radio","aria-checked":o,onClick:()=>{i||n(t)},style:r.button,disabled:i,children:(0,Se.jsx)(xe,{mode:t,selected:o})}),(0,Se.jsx)("div",{style:r.title,children:e})]})}function xe({mode:e,selected:t}){const o=(0,d().IS)((()=>({previewTopBar:{position:"absolute",insetInlineStart:0,top:0,width:"100%",height:"32%",background:t?k().Tj.blue.background.secondaryTranslucent:k().Tj.background.secondaryTranslucent,borderStartStartRadius:a().A.isMobile?ye:me,borderStartEndRadius:a().A.isMobile?ye:me},previewLineContainerList:{display:"flex",position:"absolute",insetInlineStart:"10%",gap:"20%",height:"36%",flexDirection:"column",top:"50%",width:"100%"},previewLineContainerCompact:{display:"flex",gap:5,position:"absolute",insetInlineStart:"10%",height:"7%",flexDirection:"row"},previewLineBase:{borderRadius:90,height:"100%",background:t?k().Tj.blue.background.secondaryTranslucent:k().Tj.gray.background.secondaryTranslucent},circle:{position:"absolute",insetInlineStart:"10%",top:"calc(32% - 9%)",height:"18%",aspectRatio:"1 / 1",borderRadius:"50%",background:t?k().Tj.blue.background.tertiaryTranslucent:k().Tj.gray.background.tertiaryTranslucent}})),[t]);function n(e){return(0,Se.jsx)("div",{style:{...o.previewLineBase,width:e?`${e}%`:"100%"}})}return"compact"===e?(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("div",{style:o.previewTopBar}),(0,Se.jsx)("div",{style:o.circle}),(0,Se.jsxs)("div",{style:{...o.previewLineContainerCompact,top:"50%",width:"75%"},children:[n(),n(),n()]}),(0,Se.jsxs)("div",{style:{...o.previewLineContainerCompact,top:"66%",width:"60%"},children:[n(),n()]})]}):(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("div",{style:o.previewTopBar}),(0,Se.jsx)("div",{style:o.circle}),(0,Se.jsxs)("div",{style:o.previewLineContainerList,children:[n(55),n(25),n(40)]})]})}var be=()=>o(45941),we=()=>o(828973);const Ce=function({collectionContextStore:e}){const t=(0,s().v3)(),o=(0,c().O$)(e.normalizedFormatStore),n=(0,c().O$)(e.isFullScreenStore),i=(0,c().K8)((()=>je(e)),[e]),r=(0,c().K8)((()=>function(e){const t=e.normalizedFormatStore.state;return(0,be().i3)({limit:t.inline_collection_first_load_limit,isGrouped:Boolean(t.collection_group_by)||"board"===je(e)&&Boolean(t.board_columns_by),viewType:je(e)})}(e)),[e]),l=(0,c().O$)(e.canConfigureBlockStore);return o.collection_group_by||"feed"===i||!n&&"calendar"!==i?(0,Se.jsx)(we().A,{title:(0,Se.jsx)(M().sA,{defaultMessage:"Load limit",id:"database.viewSettings.layoutTab.firstLoadLimitSetting"}),selectedKey:r,popupStyle:{minWidth:190},options:be().X9.map((e=>({key:e,type:"button",title:e.limit}))),onChange:o=>function(e,t,o){const n=o.collectionViewStore();if(!n)return;ae().createAndCommit({userAction:"CollectionSettingsFirstLoadLimit.handleFirstLoadLimitChange",environment:t,canUndo:!0,perform:t=>{D().zA({stores:[n],update:{inline_collection_first_load_limit:e},transaction:t})}}),o.groupsStore.resetAllLimits(),(0,B().X)({environment:t,collectionContextStore:o,action:"set_first_load_limit"})}(o,t,e),disabled:!l}):null};function je(e){var t;const o=null===(t=e.collectionViewStore())||void 0===t?void 0:t.getType();if(!o)throw new Error("View type was not defined.");return o}var _e=()=>o(95441),Te=()=>o(380468),Ae=()=>o(35091),Me=()=>o(542984),ke=()=>o(174638);const Ie=(0,M().YK)({week:{defaultMessage:"Week",id:"calendar.viewRanges.week"},month:{defaultMessage:"Month",id:"calendar.viewRanges.month"}}),Pe=6;function Be({collectionContextStore:e,showDoneButton:t,collectionSettingsStore:o,onDoneClick:i,menuType:r,analytics:p}){const u=(0,s().v3)(),g=(0,n.useCallback)((t=>(0,Se.jsx)(et,{collectionContextStore:e,viewType:t},`view-type-button-${t}`)),[e]),S=(0,c().O$)(e.normalizedQueryStore),m=(0,c().O$)(e.normalizedSchemaStore),h=(0,c().O$)(e.normalizedFormatStore),x=(0,c().O$)(e.isFullScreenStore),j=(0,c().O$)(e.isRootChildStore),_=(0,c().K8)((()=>e.collectionViewBlockStore()),[e]),T=(0,c().K8)((()=>De(e)),[e]),A=(0,c().K8)((()=>Boolean(Ke(e))),[e]),I="table"===T||"board"===T||"gallery"===T||"calendar"===T,P="table"===T,V=Object.keys(m).filter((e=>{const t=m[e];return t&&(0,b().$)(t)})),K=Object.keys(m).filter((e=>{const t=m[e];return t&&(0,C().iB)(t)})),O="timeline"===T&&V.length>0,F=(0,c().K8)((()=>"timeline"===T&&V.length>1&&_&&!(0,oe().s)(_.id)),[T,V,_]),E=(0,c().K8)((()=>null==_?void 0:_.isCollectionViewPageWithContent()),[_]),L="timeline"===T&&Boolean(null==S?void 0:S.timeline_by_end),R="calendar"===T&&V.length>0,$="map"===T&&K.length>0,W="calendar"===T,H="calendar"===T,X="board"===T,J="feed"===T,G=(0,c().K8)((()=>(0,z().DG)({environment:u,isFullScreen:x,isRootChild:j})),[u,x,j]),N="timeline"===T&&Boolean(h.timeline_show_table)&&G,Q="timeline"===T&&G,Y=(0,c().K8)((()=>null==_?void 0:_.hasSingleSourceAndNoLinkedCollections()),[_]),Z=(0,c().K8)((()=>!("collectionTypedView"===e.contextTypeFromStoreState||e.isInHomeWidgetStore.state||x&&Y)),[e,x,Y]),q=(0,c().K8)((()=>{var e;return((null==_||null===(e=_.getCollectionViewIds())||void 0===e?void 0:e.length)??0)>1?(0,Se.jsx)(M().sA,{defaultMessage:"Show data source titles",id:"database.viewSettings.layoutTab.showDataSourceTitles.title"}):(0,Se.jsx)(M().sA,{defaultMessage:"Show data source title",id:"database.viewSettings.layoutTab.showDataSourceTitle.title"})}),[_]),te=(0,c().K8)((()=>!e.isInHomeWidgetStore.state&&"chart"!==T),[e.isInHomeWidgetStore,T]),ne="chart"!==T,re=(0,c().O$)(e.canConfigureBlockStore),le=(0,c().O$)(e.shouldShowSourceStore),ce="chart"===T,de="chart"===T,pe=(0,l().X)("place_property"),ue=(0,w().x)(T),ge=(0,c().K8)((()=>(0,U().f)(e)),[e]),me=(0,d().IS)((()=>({doneButtonSection:{paddingTop:0,marginBottom:v().Qm}})),[]);if(!_)return null;const ye=Z||A||P||I||O||L||F||R||H||W||Q||N||X||J||te||ne||$||ue,ve=Z?(0,Se.jsx)(ee().A,{title:q,focused:!1,on:le,onClick:()=>function(e,t){const o=t.collectionViewStore();if(!o)return;const n=!t.shouldShowSourceStore.state;ae().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleShowCollectionTitleClick",environment:e,canUndo:!0,perform:e=>{const o=t.collectionViewBlockStore();o&&D().zA({stores:[o],update:{hide_inline_collection_name:!n},transaction:e})}}),(0,B().X)({environment:e,collectionContextStore:t,action:"toggle_show_collection_title"})}(u,e),disabled:!re,textWrapperStyle:{opacity:1}}):void 0,fe=["table","board","timeline","calendar","list","gallery","chart","feed"];pe&&fe.push("map"),ge&&fe.push("dashboard");return(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)(f().A,{topBorder:!1,shouldShowBottomDivider:a().A.isMobile,children:(0,Se.jsx)("div",{style:{...a().A.isMobile?{background:k().Tj.background.primary,width:"100%",padding:v().X1}:{width:"100%",paddingLeft:v().Qm,paddingRight:v().Qm,paddingTop:v().Qm}},children:(0,Se.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:fe.map(g)})})}),ye?(0,w().x)(T)?(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)(f().A,{extraPadding:!0,children:[ve,ne?(0,Se.jsx)(Ze,{collectionContextStore:e}):void 0,I?(0,Se.jsx)(Xe,{collectionContextStore:e}):void 0,X?(0,Se.jsx)(We,{collectionContextStore:e,collectionSettingsStore:o}):void 0,te?(0,Se.jsx)(Ye,{collectionContextStore:e}):void 0,(0,Se.jsx)(Ce,{collectionContextStore:e})]}),(0,Se.jsx)(f().A,{extraPadding:!0,topBorder:!0,children:A?(0,Se.jsx)(qe,{collectionContextStore:e}):void 0}),(0,Se.jsx)(f().A,{extraPadding:!1,topBorder:!1,children:ue?(0,Se.jsx)(he,{environment:u,collectionContextStore:e}):void 0})]}):(0,Se.jsxs)(f().A,{extraPadding:!0,children:[ve,A?(0,Se.jsx)(qe,{collectionContextStore:e}):void 0,P?(0,Se.jsx)(Ue,{collectionContextStore:e}):void 0,ne?(0,Se.jsx)(Ze,{collectionContextStore:e}):void 0,I?(0,Se.jsx)(Xe,{collectionContextStore:e}):void 0,O?(0,Se.jsx)(ze,{collectionContextStore:e}):void 0,L?(0,Se.jsx)(Ee,{collectionContextStore:e}):void 0,F?(0,Se.jsx)(Je,{collectionContextStore:e}):void 0,R?(0,Se.jsx)(Le,{collectionContextStore:e}):void 0,$?(0,Se.jsx)(Re,{collectionContextStore:e}):void 0,H?(0,Se.jsx)(Ge,{collectionContextStore:e}):void 0,W?(0,Se.jsx)(Ne,{collectionContextStore:e}):void 0,Q?(0,Se.jsx)(ke().u,{collectionContextStore:e}):void 0,N?(0,Se.jsx)($e,{collectionContextStore:e,collectionSettingsStore:o}):void 0,X?(0,Se.jsx)(We,{collectionContextStore:e,collectionSettingsStore:o}):void 0,J?(0,Se.jsx)(Qe,{collectionContextStore:e,collectionSettingsStore:o}):void 0,te?(0,Se.jsx)(Ye,{collectionContextStore:e}):void 0,(0,Se.jsx)(Ce,{collectionContextStore:e})]}):void 0,"createView"!==r||E?void 0:(0,Se.jsx)(f().A,{extraPadding:!0,disableMobileBorders:!0,topBorder:!0,style:{marginTop:4},children:(0,Se.jsx)(Me().Q,{forceShow:!0,buttonStyle:{paddingTop:2,paddingBottom:2},overrideOnClickBehavior:()=>{se().a2({collectionSettingsStore:o,item:{type:"linkToDatabase",existingCollectionStore:void 0,analytics:p}})},collectionContextStore:e,collectionSettingsStore:o})}),t?(0,Se.jsx)(f().A,{extraPadding:!0,disableMobileBorders:!0,style:me.doneButtonSection,children:(0,Se.jsx)(y().A,{colorPalette:"blue",style:{display:"flex",margin:`0 ${v().Qm}px`},onClick:()=>{null==i||i(),function(e,t,o){se().R8({collectionSettingsStore:t,item:{type:"main"}}),(0,B().X)({environment:e,collectionContextStore:o,action:"click_create_view_done"})}(u,o,e)},children:de?(0,Se.jsx)(M().sA,{defaultMessage:"Edit chart",id:"database.viewSettings.createViewTab.editChartButton.title"}):(0,Se.jsx)(M().sA,{defaultMessage:"Done",id:"database.viewSettings.createViewTab.doneButton.title"})})}):void 0,ce?(0,Se.jsx)(f().A,{extraPadding:!0,topBorder:!1,style:{paddingTop:0},children:(0,Se.jsx)(_e().A,{href:(0,ie().x)("guides.charts"),title:(0,Se.jsx)(M().sA,{defaultMessage:"Learn about charts",id:"database.viewSettings.layoutTab.learnAboutCharts.title"}),analyticsFrom:"view_settings_layout"})}):void 0]})}function Ve(e){const{currentViewType:t}=e,o=t?Z().C9[t]:void 0;return["side_peek","center_peek","full_page"].map((e=>({key:e,type:"button",title:(0,Z().LA)(e),body:(0,Se.jsxs)(Se.Fragment,{children:[(0,Z()._t)(e),o&&t&&e===o?(0,Se.jsx)("div",{style:{marginTop:2,fontWeight:500,color:k().Tj.blue.text.accentPrimary},children:(0,Se.jsx)(M().sA,{defaultMessage:"Default for {view}",id:"database.viewPropertiesMenu.peekMode.defaultForView",values:{view:Y().to[t]}})}):void 0]}),icon:(0,Z().qg)(e)({width:A().Ev.default,height:A().Ev.default,fill:k().Tj.text.secondary})})))}function De(e){var t;const o=null===(t=e.collectionViewStore())||void 0===t?void 0:t.getType();if(!o)throw new Error("View type was not defined.");return o}function Ke(e){return Y().Jx[De(e)]}function Oe(e){return Y().wm[De(e)]}function Fe(e){return Y().dD[De(e)]}function ze({collectionContextStore:e}){const t=(0,s().v3)(),o=(0,s().WS)(),n=(0,c().K8)((()=>{var t;return null===(t=e.normalizedQueryStore.state)||void 0===t?void 0:t.timeline_by}),[e]),i=(0,c().K8)((()=>{var t;return null===(t=e.normalizedQueryStore.state)||void 0===t?void 0:t.timeline_by_end}),[e]),r=(0,c().O$)(e.canConfigureBlockStore),l=(0,c().O$)(e.normalizedSchemaStore),a=(0,c().K8)((()=>e.collectionViewStore()),[e]),d=(0,c().K8)((()=>e.collectionStore()),[e]),p=(0,c().K8)((()=>null==d?void 0:d.getSchema()),[d]),u=(0,c().K8)((()=>null==d?void 0:d.getFormat()),[d]);if(!(n&&a&&d&&u&&p))return null;const y=l[n];return y?(0,Se.jsx)(S().A,{popupType:o?g().nl.SlideUp:g().nl.Popup,alignmentToOrigin:"end",placementToOrigin:"bottom",originGap:0,renderOrigin:e=>(0,Se.jsx)(ge().A,{title:i?(0,Se.jsx)(M().sA,{defaultMessage:"Start date",id:"database.viewSettings.layoutTab.timelineStartDate.title"}):(0,Se.jsx)(M().sA,{defaultMessage:"Show timeline by",id:"database.viewSettings.layoutTab.showTimelineByProperty.title"}),disabled:!r,showChevron:!0,right:(0,Se.jsx)("div",{style:P().RC,children:y.name}),rightStyle:{flexShrink:1},textWrapperStyle:{flexShrink:0},...e}),render:i=>{let r;return r=o?{menuType:m().gu.ActionSheet}:{menuType:m().gu.Popup,width:300},(0,Se.jsx)(h().A,{...r,children:(0,Se.jsx)(Te().A,{schema:p,format:u,currentProperty:n,getProperties:()=>Object.keys(l).filter((e=>{const t=l[e];return t&&(0,b().$)(t)})),onAccept:o=>{o&&(ae().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.renderTimelineBySetting",environment:t,canUndo:!0,perform:e=>{(0,L().f)({collectionViewStore:a,update:{timeline_by:o},transaction:e})}}),i.close(),(0,B().X)({environment:t,collectionContextStore:e,action:"update_timeline_by",original_view_type:void 0,property_type:y.type}))}})})}}):null}function Ee({collectionContextStore:e}){const t=(0,s().v3)(),o=(0,s().WS)(),n=(0,c().K8)((()=>{var t;return null===(t=e.normalizedQueryStore.state)||void 0===t?void 0:t.timeline_by_end}),[e]),i=(0,c().O$)(e.canConfigureBlockStore),r=(0,c().O$)(e.normalizedSchemaStore),l=(0,c().K8)((()=>e.collectionViewStore()),[e]),a=(0,c().K8)((()=>e.collectionStore()),[e]),d=(0,c().K8)((()=>null==a?void 0:a.getSchema()),[a]),p=(0,c().K8)((()=>null==a?void 0:a.getFormat()),[a]);if(!(n&&l&&a&&p&&d))return null;const u=r[n];return u?(0,Se.jsx)(S().A,{popupType:o?g().nl.SlideUp:g().nl.Popup,alignmentToOrigin:"end",placementToOrigin:"bottom",originGap:0,renderOrigin:e=>(0,Se.jsx)(ge().A,{title:(0,Se.jsx)(M().sA,{defaultMessage:"End date",id:"database.viewSettings.layoutTab.timelineEndDate.title"}),showChevron:!0,right:u.name,disabled:!i,...e}),render:i=>{let a;return a=o?{menuType:m().gu.ActionSheet}:{menuType:m().gu.Popup,width:300},(0,Se.jsx)(h().A,{...a,children:(0,Se.jsx)(Te().A,{schema:d,format:p,currentProperty:n,getProperties:()=>Object.keys(r).filter((e=>{const t=r[e];return t&&(0,b().$)(t)})),onAccept:o=>{o&&(ae().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.renderTimelineEndSetting",environment:t,canUndo:!0,perform:e=>{(0,L().f)({collectionViewStore:l,update:{timeline_by_end:o},transaction:e})}}),i.close(),(0,B().X)({environment:t,collectionContextStore:e,action:"update_timeline_by_end",original_view_type:void 0,property_type:u.type}))}})})}}):null}function Le({collectionContextStore:e}){const t=(0,s().v3)(),o=(0,s().WS)(),n=(0,c().K8)((()=>{var t;return null===(t=e.normalizedQueryStore.state)||void 0===t?void 0:t.calendar_by}),[e]),i=(0,c().O$)(e.canConfigureBlockStore),r=(0,c().O$)(e.normalizedSchemaStore),l=(0,c().K8)((()=>e.collectionViewStore()),[e]),a=(0,c().K8)((()=>e.collectionStore()),[e]),d=(0,c().K8)((()=>null==a?void 0:a.getSchema()),[a]),p=(0,c().K8)((()=>null==a?void 0:a.getFormat()),[a]);if(!(n&&l&&a&&p&&d))return null;const u=r[n];return u?(0,Se.jsx)(S().A,{popupType:o?g().nl.SlideUp:g().nl.Popup,alignmentToOrigin:"end",placementToOrigin:"bottom",originGap:0,renderOrigin:e=>(0,Se.jsx)(ge().A,{title:(0,Se.jsx)(M().sA,{defaultMessage:"Show calendar by",id:"database.viewSettings.layoutTab.showCalendarByProperty.title"}),disabled:!i,showChevron:!0,right:(0,Se.jsx)("div",{style:P().RC,children:u.name}),rightStyle:{flexShrink:1},textWrapperStyle:{flexShrink:0},...e}),render:i=>{let a;return a=o?{menuType:m().gu.ActionSheet}:{menuType:m().gu.Popup,width:300},(0,Se.jsx)(h().A,{...a,children:(0,Se.jsx)(Te().A,{schema:d,format:p,currentProperty:n,getProperties:()=>Object.keys(r).filter((e=>{const t=r[e];return t&&(0,b().$)(t)})),onAccept:o=>{o&&(ae().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.renderCalendarBySetting",environment:t,canUndo:!0,perform:e=>{(0,L().f)({collectionViewStore:l,update:{calendar_by:o},transaction:e})}}),i.close(),(0,B().X)({environment:t,collectionContextStore:e,action:"update_calendar_by",original_view_type:void 0,property_type:u.type}))}})})}}):null}function Re({collectionContextStore:e}){const t=(0,s().v3)(),o=(0,s().WS)(),n=(0,c().K8)((()=>{var t;return null===(t=e.normalizedQueryStore.state)||void 0===t?void 0:t.map_by}),[e]),i=(0,c().O$)(e.canConfigureBlockStore),r=(0,c().O$)(e.normalizedSchemaStore),l=(0,c().K8)((()=>e.collectionViewStore()),[e]),a=(0,c().K8)((()=>e.collectionStore()),[e]),d=(0,c().K8)((()=>null==a?void 0:a.getSchema()),[a]),p=(0,c().K8)((()=>null==a?void 0:a.getFormat()),[a]);if(!(l&&a&&p&&d))return null;let u;var y;n&&(u=null===(y=r[n])||void 0===y?void 0:y.name);return(0,Se.jsx)(S().A,{popupType:o?g().nl.BottomSheet:g().nl.Popup,bottomSheetInitialState:"half",alignmentToOrigin:"end",placementToOrigin:"bottom",originGap:0,renderOrigin:e=>(0,Se.jsx)(ge().A,{title:(0,Se.jsx)(M().sA,{defaultMessage:"Map by",id:"database.viewSettings.layoutTab.showMapByProperty.title"}),disabled:!i,showChevron:!0,right:u?(0,Se.jsx)("div",{style:P().RC,children:u}):null,rightStyle:{flexShrink:1},textWrapperStyle:{flexShrink:0},...e}),render:i=>{let a;return a=o?{menuType:m().gu.Modal}:{menuType:m().gu.Popup,width:300},(0,Se.jsx)(h().A,{...a,children:(0,Se.jsx)(Te().A,{schema:d,format:p,currentProperty:n,getProperties:()=>Object.keys(r).filter((e=>{const t=r[e];return t&&"place"===t.type})),onAccept:o=>{if(!o)return;const n=r[o];ae().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.renderMapBySetting",environment:t,canUndo:!0,perform:e=>{(0,L().f)({collectionViewStore:l,update:{map_by:o},transaction:e})}}),i.close(),(0,B().X)({environment:t,collectionContextStore:e,action:"update_map_by",original_view_type:void 0,property_type:null==n?void 0:n.type})}})})}})}function $e({collectionContextStore:e,collectionSettingsStore:t}){const o=(0,s().v3)(),n=((0,c().O$)(e.normalizedFormatStore).timeline_table_properties||[]).filter((e=>Boolean(e.visible))).length,i=(0,c().O$)(e.canConfigureBlockStore);return(0,Se.jsx)(ge().A,{title:(0,Se.jsx)(M().sA,{defaultMessage:"Table properties",id:"database.viewSettings.layoutTab.tablePropertiesButton.title"}),showChevron:!0,right:(0,Se.jsx)(M().sA,{defaultMessage:"{propertiesShown} shown",id:"database.viewSettings.layoutTab.propertiesButton.propertiesShown.title",values:{propertiesShown:n}}),onClick:()=>{se().a2({collectionSettingsStore:t,item:{type:"properties",timelineViewTab:"table"}}),(0,B().X)({environment:o,collectionContextStore:e,action:"click_timeline_table_properties"})},disabled:!i})}function We(e){const{collectionContextStore:t,collectionSettingsStore:o}=e,i=(0,s().v3)(),r=(0,c().O$)(t.normalizedFormatStore),l=r.board_columns_by,a=(0,c().K8)((()=>(0,O().FS)(r)),[r]),p=(0,c().O$)(t.normalizedSchemaStore),u=(0,c().O$)(t.canConfigureBlockStore),g=(0,n.useCallback)((()=>{if(!l)return null;const e=p[l.property];if(!e)return null;se().a2({collectionSettingsStore:o,item:{type:"group",groupByKey:"board_columns_by",groupsFormatKey:"board_columns"}}),(0,B().X)({environment:i,collectionContextStore:t,action:"click_board_group_by",original_view_type:void 0,property_type:e.type})}),[t,o,i,l,p]),S=(0,n.useCallback)((()=>se().ut({environment:i,collectionContextStore:t})),[t,i]),m=(0,d().IS)((()=>({textWrapper:{opacity:1}})),[]);if(!l)return null;const y=p[l.property];return y?(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)(ge().A,{title:(0,Se.jsx)(M().sA,{id:"database.viewSettings.layoutTab.boardGroupByButton.title",defaultMessage:"Group by"}),showChevron:!0,right:y.name,onClick:g,disabled:!u}),(0,Se.jsx)(ee().A,{title:(0,Se.jsx)(M().sA,{id:"database.viewSettings.groupTab.colorColumns",defaultMessage:"Color columns"}),on:!a,focused:!1,onClick:S,disabled:!u,textWrapperStyle:m.textWrapper})]}):null}function He(e,t,o){const n=o.collectionViewStore();if(!n)return;const{serverCommitResult:i}=ae().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleViewRangeOptionClick",environment:t,canUndo:!0,perform:t=>{D().zA({stores:[n],update:{calendar_view_range:e},transaction:t})}}),r=te().XX.state,l=o.dateRangeStartStore.state,a=o.dateRangeEndStore.state,{newDateRangeStart:s,newDateRangeEnd:c}=function(e){const{newViewRange:t,oldCalendarStart:o,startOfWeekSetting:n}=e;if("month"===t){const e=(0,_().mK)(new Date((0,_().to)(o,n)).getDate()>7?(0,_().Mw)(o):o,n);return{newDateRangeStart:e,newDateRangeEnd:(0,_().to)((0,_().AQ)({date:e,monthsToAdd:1}),n)}}return{newDateRangeStart:(0,_().mK)(Date.now(),n),newDateRangeEnd:(0,_().to)(Date.now(),n)}}({oldCalendarStart:l,newViewRange:e,startOfWeekSetting:r});(0,E().r)({dateRangeStart:s,dateRangeEnd:c,collectionContextStore:o}),i.then((()=>{(0,B().X)({environment:t,collectionContextStore:o,action:"update_calendar_view_range"}),(0,K().LQ)({newCalendarStart:s,newCalendarEnd:c,collectionViewId:n.id,currentUserId:t.currentUser.id})})).catch((()=>{(0,E().r)({dateRangeStart:l,dateRangeEnd:a,collectionContextStore:o})}))}function Ue({collectionContextStore:e}){const t=(0,s().v3)(),o=(0,c().O$)(e.canConfigureBlockStore),n=(0,c().K8)((()=>!Boolean(e.normalizedFormatStore.state.hide_table_vertical_lines)),[e]);return(0,Se.jsx)(ee().A,{title:(0,Se.jsx)(M().sA,{defaultMessage:"Show vertical lines",id:"database.viewSettings.layoutTab.tableShowVerticalLines"}),on:n,focused:!1,onClick:()=>function(e,t){const o=t.collectionViewStore();if(!o)return;const n=Boolean(t.normalizedFormatStore.state.hide_table_vertical_lines);F().au({environment:e,collectionViewStore:o,currentValue:n}),(0,B().X)({environment:e,collectionContextStore:t,action:"toggle_table_vertical_lines"})}(t,e),disabled:!o,textWrapperStyle:{opacity:1}})}function Xe({collectionContextStore:e}){var t;const o=(0,s().v3)(),i=(0,c().O$)(e.normalizedFormatStore),r=(0,c().O$)(e.canConfigureBlockStore),l=(0,c().K8)((()=>De(e)),[e]),a=i.table_wrap||"calendar"===l&&!0===(null==i||null===(t=i.calendar_properties)||void 0===t||null===(t=t.find((e=>"title"===e.property)))||void 0===t?void 0:t.wrap),d=(0,n.useMemo)((()=>{switch(l){case"table":return(0,Se.jsx)(M().sA,{defaultMessage:"Wrap all content",id:"database.viewSettings.layoutTab.tableWrapAllContent"});case"calendar":return(0,Se.jsx)(M().sA,{defaultMessage:"Wrap page titles",id:"database.viewSettings.layoutTab.calendarWrapTitle"});default:return(0,Se.jsx)(M().sA,{defaultMessage:"Wrap all content",id:"database.viewSettings.layoutTab.collectionWrapAllContent"})}}),[l]),p=(0,n.useCallback)((()=>{const t=e.collectionViewStore();t&&(F().g({environment:o,collectionViewStore:t,currentValue:Boolean(a)}),(0,B().X)({environment:o,collectionContextStore:e,action:"set_first_load_limit"}),(0,B().X)({environment:o,collectionContextStore:e,action:"toggle_table_wrap_cells"}))}),[e,o,a]);return(0,Se.jsx)(ee().A,{title:d,on:Boolean(a),focused:!1,onClick:p,disabled:!r,textWrapperStyle:{opacity:1}})}function Je({collectionContextStore:e}){const t=(0,s().v3)(),o=(0,c().K8)((()=>{var t;return null===(t=e.normalizedQueryStore.state)||void 0===t?void 0:t.timeline_by_end}),[e.normalizedQueryStore]),n=(0,c().O$)(e.canConfigureBlockStore);return(0,Se.jsx)(ee().A,{title:(0,Se.jsx)(M().sA,{defaultMessage:"Separate start and end dates",id:"database.viewSettings.layoutTab.timelineUseSeparateDates.title"}),focused:!1,on:Boolean(o),onClick:()=>function(e,t){const o=t.normalizedQueryStore.state,n=t.collectionViewStore(),i=null==o?void 0:o.timeline_by,r=null==o?void 0:o.timeline_by_end;if(!i||!n)return;const l=r?void 0:i;ae().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleTimelineSeparateDatesClick",environment:e,canUndo:!0,perform:e=>{(0,L().f)({collectionViewStore:n,update:{timeline_by_end:l??null},transaction:e})}}),(0,B().X)({environment:e,collectionContextStore:t,action:"toggle_timeline_separate_dates"})}(t,e),disabled:!n,textWrapperStyle:{opacity:1}})}function Ge({collectionContextStore:e}){const t=(0,s().v3)(),o=(0,c().O$)(e.canConfigureBlockStore),i=(0,c().K8)((()=>function(e){const t=e.normalizedFormatStore.state;return(null==t?void 0:t.calendar_view_range)||"month"}(e)),[e]),r=(0,c().K8)((()=>"peekModeFormat"===e.settingsStore.state.openButtonPopup),[e]),l=(0,n.useMemo)((()=>["month","week"].map((e=>({key:e,type:"button",title:p().A.formatMessage(Ie[e])})))),[]);return(0,Se.jsx)(we().A,{title:(0,Se.jsx)(M().sA,{defaultMessage:"Show calendar as",id:"database.viewSettings.layoutTab.showCalendarAs.title"}),collectionContextStore:e,openButtonPopup:r,selectedKey:i,popupStyle:{minWidth:190},options:l,onChange:o=>He(o,t,e),disabled:!o})}function Ne({collectionContextStore:e}){const t=(0,s().v3)(),o=(0,c().K8)((()=>{var t;return Boolean((null===(t=e.collectionViewStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("calendar_show_weekends").getValue())??!0)}),[e]),i=(0,n.useCallback)((()=>{const n=e.collectionViewStore();n&&(ae().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleToggleShowWeekends",environment:t,canUndo:!0,perform:e=>{D().zA({stores:[n],update:{calendar_show_weekends:!o},transaction:e})}}),(0,B().X)({environment:t,collectionContextStore:e,action:"toggle_calendar_show_weekends"}))}),[e,t,o]);return(0,Se.jsx)(Ae().A,{title:(0,Se.jsx)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:(0,Se.jsx)(M().sA,{defaultMessage:"Show weekends",id:"database.viewSettings.layoutTab.showWeekends.title"})}),showChevron:!1,switcherProps:{on:o,noColor:!1},onClick:i})}function Qe({collectionContextStore:e,collectionSettingsStore:t}){const o=(0,s().v3)(),i=(0,c().O$)(e.canConfigureBlockStore),r=(0,c().K8)((()=>{var t;return(null===(t=e.collectionViewStore())||void 0===t||null===(t=t.getFormatStore())||void 0===t?void 0:t.getKeyValue("feed_show_author_byline"))??!0}),[e]),l=(0,n.useCallback)((()=>{const t=e.collectionViewStore();t&&(ae().createAndCommit({userAction:"CollectionSettingsProperty.FeedOptions.handleToggleShowAuthorByline",environment:o,canUndo:!0,perform:e=>{D().zA({stores:[t],update:{feed_show_author_byline:!r},transaction:e})}}),(0,B().X)({environment:o,collectionContextStore:e,action:"toggle_feed_show_author_byline"}))}),[e,o,r]);return(0,Se.jsx)(ee().A,{title:(0,Se.jsx)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:(0,Se.jsx)(M().sA,{defaultMessage:"Show author byline",id:"database.viewSettings.layoutTab.feedShowAuthorByline.title"})}),focused:!1,on:r,onClick:l,disabled:!i})}function Ye({collectionContextStore:e}){const t=(0,s().v3)(),o=(0,c().O$)(e.canConfigureBlockStore),n=(0,c().K8)((()=>function(e){const t=e.normalizedFormatStore.state,o=De(e);return(null==t?void 0:t.collection_peek_mode)||Z().C9[o]}(e)),[e]),l=(0,c().K8)((()=>"peekModeFormat"===e.settingsStore.state.openButtonPopup),[e]),a=(0,c().K8)((()=>De(e)),[e]);return(0,Se.jsx)(we().A,{title:(0,Se.jsx)(M().sA,{defaultMessage:"Open pages in",id:"database.viewSettings.layoutTab.peekModeTitle"}),collectionContextStore:e,openButtonPopup:l,selectedKey:n,popupStyle:{minWidth:190},options:Ve({currentViewType:a}),menuItemOptionsStyle:{paddingTop:8,paddingBottom:8},onClick:()=>function(e,t){(0,V().m)({environment:e,collectionContextStore:t,from:"collection_view_settings"})}(t,e),onChange:o=>function(e,t,o){const n=o.collectionViewStore();if(!n||!e)return;ae().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handlePeekModeFormatClick",environment:t,canUndo:!0,perform:t=>{D().zA({stores:[n],update:{collection_peek_mode:e},transaction:t})}});const l=(0,X().sl)(o);if(l&&l.view_type&&(l&&l.view_type&&(0,i().DO_NOT_USE_trackLegacy)(t,"update_peek_mode_format",{peek_mode:e,from:"collection_view_settings",...l}),le().default.state.open&&le().default.state.collectionContextStore===o)){const{mainEditorCurrentBlockStore:o}=r().default.state,n="full_page"===e?(0,ne().Ay)({store:le().default.state.targetStore,fullyQualified:!1,pageVisitSource:x().y8.Expand}):(0,q().wy)({environment:t,store:le().default.state.targetStore,mainEditorCurrentBlockStore:o,collectionContextStore:le().default.state.collectionContextStore,fullyQualified:!1,overridePeekMode:(0,le().getPeekModeFromCollectionPeekModeFormat)(e)});n&&(0,re().navigate)({environment:t,url:n})}}(o,t,e),disabled:!o})}function Ze({collectionContextStore:e}){const t=(0,s().v3)(),o=(0,c().O$)(e.canConfigureBlockStore),i=(0,c().K8)((()=>e.shouldShowPageIcon()??!0),[e]),r=(0,n.useCallback)((()=>{const o=e.collectionViewStore();o&&(ae().createAndCommit({userAction:"CollectionSettingsProperty.TitleOptions.handleToggleShowIcon",environment:t,canUndo:!0,perform:e=>{D().zA({stores:[o],update:{show_page_icon:!i},transaction:e})}}),(0,B().X)({environment:t,collectionContextStore:e,action:"toggle_show_page_icon"}))}),[e,t,i]);return(0,Se.jsx)(ee().A,{title:(0,Se.jsx)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:(0,Se.jsx)(M().sA,{defaultMessage:"Show page icon",id:"database.viewSettings.layoutTab.showPageIcon.title"})}),focused:!1,on:i,onClick:r,disabled:!o})}function qe({collectionContextStore:e}){const t=(0,d().DP)(),o=(0,s().v3)(),n=(0,c().K8)((()=>function(e){const t=e.normalizedFormatStore.state,o=Ke(e);if(o&&t)return t[o]}(e)),[e]),i=(0,c().K8)((()=>function(e){const t=e.normalizedFormatStore.state,o=Oe(e);if(o&&t){const e=t[o];if(e)return e}return T().fi}(e)),[e]),r=(0,c().K8)((()=>!a().A.isMobile||"board"===De(e)),[e]),l=(0,c().O$)(e.canConfigureBlockStore),p=(0,c().K8)((()=>function(e,t,o){const n=o.normalizedSchemaStore.state;let i=Object.keys(n);i=I().Ul(i,(e=>{const t=n[e];return t?t.name:""}));const r=I().oE(i.map((e=>{const o=n[e];if(o&&"file"===o.type)return{key:{type:"property",property:e},type:"button",title:o.name,icon:(0,Se.jsx)(j().zB,{type:o.type,icon:o.icon,size:a().A.isMobile?16:14,theme:t,style:{fill:k().Tj.icon.primary}})}})));return[...[void 0,{type:"page_cover"},{type:"page_content"}].map((e=>({key:e,type:"button",title:N(e)}))),...r]}(0,t,e)),[o,t,e]),u=(0,c().K8)((()=>function(e){const t=e.normalizedFormatStore.state,o=Fe(e);if(o&&t)return t[o]}(e)),[e]);return(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)(we().A,{title:(0,Se.jsx)(M().sA,{defaultMessage:"Card preview",id:"database.viewSettings.layoutTab.cardPreviewButtonTitle"}),selectedKey:n,popupStyle:{minWidth:190},options:p,onChange:t=>function(e,t,o){const n=Ke(o),i=o.collectionViewStore();n&&i&&(ae().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleCoverFormatChange",environment:t,canUndo:!0,perform:t=>{D().zA({stores:[i],update:{[n]:e},transaction:t})}}),(0,B().X)({environment:t,collectionContextStore:o,action:"update_cover_format"}))}(t,o,e),disabled:!l}),r?(0,Se.jsx)(we().A,{title:(0,Se.jsx)(M().sA,{defaultMessage:"Card size",id:"databdatabase.viewSettings.layoutTab.cardSizeButtonTitle"}),selectedKey:i,popupStyle:{minWidth:190},options:["small","medium","large"].map((e=>({key:e,type:"button",title:Q(e)}))),onChange:t=>function(e,t,o){const n=Oe(o),i=o.collectionViewStore();n&&i&&(ae().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleCoverSizeFormatChange",environment:t,canUndo:!0,perform:t=>{D().zA({stores:[i],update:{[n]:e},transaction:t})}}),(0,B().X)({environment:t,collectionContextStore:o,action:"toggle_cover_size_format"}))}(t,o,e),disabled:!l}):void 0,n?(0,Se.jsx)(ee().A,{title:(0,Se.jsx)(M().sA,{defaultMessage:"Fit media",id:"databdatabase.viewSettings.layoutTab.fitImageButtonTitle"}),on:"contain"===u,focused:!1,onClick:()=>function(e,t){const o=Fe(t),n=t.collectionViewStore(),i=t.normalizedFormatStore.state;o&&n&&(ae().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleCoverAspectFormatToggle",environment:e,canUndo:!0,perform:e=>{D().zA({stores:[n],update:{[o]:"contain"===i[o]?"cover":"contain"},transaction:e})}}),(0,B().X)({environment:e,collectionContextStore:t,action:"toggle_cover_aspect_format"}))}(o,e),disabled:!l,textWrapperStyle:{opacity:1}}):void 0]})}function et({viewType:e,collectionContextStore:t}){const o=(0,s().v3)(),n=(0,c().K8)((()=>De(t)),[t]),i=(0,c().O$)(t.canConfigureBlockStore),r=n===e,l=r||!i;return(0,Se.jsxs)(u().Ay,{style:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",height:"100%",flexGrow:0,flexShrink:0,fontSize:11,borderRadius:Pe,padding:6,boxShadow:`inset 0 0 0 1px ${k().Tj.border.primary}`,color:k().Tj.text.secondary,fill:k().Tj.text.secondary,...r&&{boxShadow:`inset 0 0 0 2px ${k().Tj.blue.border.accentPrimary}`,color:k().Tj.blue.text.accentPrimary,fill:k().Tj.blue.icon.accentPrimary,fontWeight:500}},disabled:l,onClick:()=>{ae().createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.renderViewTypeButton",environment:o,canUndo:!0,perform:n=>{!function(e){const{environment:t,collectionContextStore:o,newViewType:n,transaction:i}=e,r=o.collectionViewStore(),l=o.collectionViewBlockStore(),a=o.collectionStore();if(!r||!l)return;if(n===r.getType()||"page"===n||"form_editor"===n)return;"chart"===n&&$().Z({environment:t,collectionContextStore:o,collectionViewId:r.id,from:"collection_view_type_change"});const s=r.getType();R().zv({store:r,data:{type:n},transaction:i}),(0,H().W)({environment:t,collectionContextStore:o,collectionViewStore:r,collectionStore:a,oldViewType:s,newViewType:n,transaction:i}),(0,W().S)({collectionContextStore:o})}({environment:o,collectionContextStore:t,newViewType:e,transaction:n})}}),(0,B().X)({environment:o,collectionContextStore:t,action:"change_type",original_view_type:n,new_view_type:e})},children:[Y().ZU[e]({width:void 0,height:20,marginBottom:4,marginTop:4}),(0,Se.jsx)("div",{style:{textAlign:"center"},children:Y().to[e]})]},e)}},740689:(e,t,o)=>{o.d(t,{o:()=>i});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"1.77 1.79 12.45 12.42",svg:(0,o(474848).jsx)("path",{d:"M8.708 1.978a.625.625 0 0 0-.884.884l.914.913H3.84c-1.14 0-2.065.925-2.065 2.065v4.78a.625.625 0 0 0 1.25 0V5.84c0-.45.365-.815.815-.815h4.898l-.914.913a.625.625 0 0 0 .884.884l1.98-1.98a.625.625 0 0 0 0-.884zM13.6 4.755a.625.625 0 0 0-.625.625v4.78c0 .45-.365.815-.815.815H7.263l.913-.913a.625.625 0 0 0-.884-.884l-1.98 1.98a.625.625 0 0 0 0 .884l1.98 1.98a.625.625 0 1 0 .884-.884l-.913-.913h4.897c1.14 0 2.065-.924 2.065-2.065V5.38a.625.625 0 0 0-.625-.625"})},i=(0,o(340498).wt)("arrowSquareLeftRightSmall",n,"small")},783793:(e,t,o)=>{o.d(t,{o:()=>c,x:()=>s});o(296540);var n=()=>o(401497),i=()=>o(100622),r=()=>o(278589),l=()=>o(200424),a=o(474848);function s(e){const{variant:t,imgSource:o,tintColor:l,faceStyle:s,shadowVariant:d="strong",style:p,...u}=e,g=(0,n().IS)((()=>{const e=(0,r().N)(t);return{faceImgWrap:{width:e,height:e,borderRadius:"100%",background:i().Tj.assistantCornerButtonBackground,..."strong"===d&&{boxShadow:e>=90?i().Tj.shadowMDThickerOutline:i().Tj.shadowMD},..."light"===d&&{borderRadius:"50%",boxShadow:e>=90?i().Tj.shadowSMThickerOutline:i().Tj.shadowSM},overflow:"hidden",...p}}}),[t,d,p]);return(0,a.jsx)("div",{...u,children:(0,a.jsx)("div",{style:g.faceImgWrap,children:(0,a.jsx)(c,{imgSource:o,variant:t,tintColor:l,style:s})})})}function c(e){const{imgSource:t,variant:o,tintColor:i,style:s,alt:c,...d}=e,p=(0,r().N)(o),u=t??l(),g=c??"Notion AI face",S=(0,n().IS)((()=>({faceImg:{height:p,width:p,transform:"scaleX(var(--direction, 1))",...s},tintedFace:{height:p,width:p,transform:"scaleX(var(--direction, 1))",backgroundColor:i,WebkitMaskImage:`url(${u})`,maskImage:`url(${u})`,WebkitMaskRepeat:"no-repeat",maskRepeat:"no-repeat",WebkitMaskPosition:"center",maskPosition:"center",WebkitMaskSize:"contain",maskSize:"contain",...s}})),[p,s,i,u]);return void 0!==i?(0,a.jsx)("div",{style:S.tintedFace,role:"img","aria-label":g}):(0,a.jsx)("img",{...d,style:S.faceImg,src:u,alt:g})}},803960:(e,t,o)=>{o.r(t),o.d(t,{arrowChevronSingleDownIcon:()=>i,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.97 6.97 12.06 6.66",svg:(0,o(474848).jsx)("path",{d:"M9.558 13.442c.244.244.64.244.884 0l5.4-5.4a.625.625 0 0 0-.884-.884L10 12.116 5.042 7.158a.625.625 0 1 0-.884.884z"})},i=(0,o(340498).wt)("arrowChevronSingleDown",n,"default")},819757:(e,t,o)=>{o.d(t,{f:()=>i});var n=()=>o(242422);function i(e){return!!n().default.checkGate({gateName:"db_grid_view"})&&(!e.isDashboardWidget()&&!e.isEditableHomeCollectionStore.state)}}}]);