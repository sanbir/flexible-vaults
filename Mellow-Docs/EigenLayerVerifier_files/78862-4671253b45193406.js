"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[78862],{94935:(e,t,s)=>{s.d(t,{r:()=>a});function a(e,t){return(e.getName()||"").localeCompare(t.getName()||"")}},230347:(e,t,s)=>{s.d(t,{C:()=>re});s(944114),s(517642),s(658004),s(733853),s(845876),s(432475),s(515024),s(731698),s(898992),s(354520),s(581454),s(737550);var a=s(296540),n=()=>s(484714),o=()=>s(590526),i=()=>s(401497),r=()=>s(295633),l=()=>s(330361),d=()=>s(74351),c=()=>s(699143),p=()=>s(127833),g=()=>s(807449),h=()=>s(695115),u=()=>s(631524),y=()=>s(493552),m=()=>s(26697),x=()=>s(663639),f=()=>s(736847),v=()=>s(416504),b=()=>s(207207),j=()=>s(406533),S=()=>s(340498),I=()=>s(68263),P=()=>s(179034),k=()=>s(69708),w=()=>s(100622),A=()=>s(284371),T=()=>s(568721),M=()=>s(419357),C=()=>s(378765),B=()=>s(94935),W=()=>s(79926),z=()=>s(546926),O=()=>s(890492),K=()=>s(449279),H=()=>s(187174),L=()=>s(29037),R=()=>s(534177),D=()=>s(305390),E=()=>s(16006),Y=()=>s(320865),V=()=>s(106628),N=()=>s(361330),_=s(474848);function q(e){const{spaceId:t,onSelectPage:s,query:a,source:l,findSelectedBlockAncestorId:d,spaceStore:p}=e,h=(0,i().IS)((()=>({hoveredRow:{background:w().Tj.buttonHoveredBackground}})),[]),u=(0,n().v3)();let y=null;const m=(0,W().fJ)(V().T.searchActions),[{status:v,value:b}]=(0,H().Yb)((async()=>{if("resolved"!==m.status)return;const e=m.value;return await e.searchPagesInSpace({environment:u,query:a,limit:10,requireEditPermissions:!0,spaceId:t,excludeTemplates:!0,source:l,boostRecentlyViewedPages:!1,spaceStore:p,peopleBlocksToInclude:"none"})}),[m.status,m.value,u,a,t,l,p],{debounce:N().tu}),j=(0,o().K8)((()=>"idle"===v||"pending"===v?[]:((null==b?void 0:b.results)||[]).map((({id:e})=>{const t=new(r().B)(u,{table:P().ev,id:e});return function(e){const{store:t,environment:s,alreadySelectedAncestorId:a,onSelectPage:n,styles:o}=e;if(a&&a===t.id)return{key:t.id,action:()=>{},render:e=>(0,_.jsx)(D().A,{...e,hoveredStyle:o.hoveredRow,store:t,hidePath:!1,disabled:!0,style:{opacity:.5},right:(0,_.jsxs)(c().Y1,{direction:"horizontal",gap:4,align:"center",children:[(0,_.jsx)(g().I,{icon:L().checkmarkIcon,colorPalette:"blue",colorVariant:"accentPrimary"}),(0,_.jsx)("div",{style:{color:w().oZ.blue},children:(0,_.jsx)(k().sA,{id:"oauthPageSearchResults.disabledResult.bySelf.message",defaultMessage:"Already added"})})]})})};if(a){const e=new(r().B)(s,{table:P().ev,id:a});return{key:t.id,action:()=>{},render:s=>(0,_.jsx)(D().A,{...s,hoveredStyle:o.hoveredRow,store:t,hidePath:!0,disabled:!0,style:{opacity:.5},caption:(0,_.jsx)(k().sA,{id:"oauthPageSearchResults.disabledResult.byAncestor.message",defaultMessage:"Added via {ancestorPageName}",values:{ancestorPageName:(0,_.jsx)(E().A,{store:e,style:{display:"inline"}})}}),right:(0,_.jsxs)(c().Y1,{direction:"horizontal",gap:4,align:"center",children:[(0,_.jsx)(g().I,{icon:L().checkmarkIcon,colorPalette:"blue",colorVariant:"accentPrimary"}),(0,_.jsx)("div",{style:{color:w().oZ.blue},children:(0,_.jsx)(k().sA,{id:"oauthPageSearchResults.disabledResult.bySelf.message",defaultMessage:"Already added"})})]})})}}const i=t.getRole();return i&&I().Km(i)?{key:t.id,action:()=>n(t.id),render:e=>(0,_.jsx)(D().A,{store:t,hidePath:!1,hoveredStyle:o.hoveredRow,...e})}:void 0}({store:t,alreadySelectedAncestorId:d(t),environment:u,onSelectPage:s,styles:h})})).filter(R().O9)),[u,d,s,null==b?void 0:b.results,v,h]);y="idle"===v||"pending"===v?(0,_.jsx)(f().A,{children:(0,_.jsx)(Y().A,{})}):0===j.length?(0,_.jsx)(f().A,{children:(0,_.jsx)(K().u,{title:(0,_.jsx)(k().sA,{id:"oauthPageSearchResults.noResults.placeholder",defaultMessage:"No results"})})}):function(e){return(0,_.jsx)(x().A,{type:x().O.Vertical,initialFocus:void 0,sections:[{key:"results",items:e,render:e=>(0,_.jsx)(f().A,{...e})}]})}(j);const S={menuType:z().gu.Popup};return(0,_.jsx)(O().A,{...S,children:y})}var F=()=>s(664460),U=()=>s(420802),$=()=>s(81068),Z=()=>s(187820);function G({pageStore:e,isSelected:t,onToggle:s,maxLength:a,styles:n}){const{blockId:r,icon:l,isEmpty:d,iconRecordCategory:p}=(0,o().K8)((()=>({blockId:e.id,icon:e.getIcon(),isEmpty:e.isEmptyPage(),iconRecordCategory:(0,Z().Te)(e)})),[e]),g=(0,i().IS)((()=>({buttonStyle:{paddingTop:2,paddingBottom:2}})),[]);return(0,_.jsx)($().A,{onClick:s,focused:!1,buttonStyle:g.buttonStyle,icon:(0,_.jsx)(U().S,{checked:t,size:14,onClick:e=>{e.stopPropagation(),s()}}),title:(0,_.jsxs)(c().Y1,{direction:"horizontal",gap:8,width:"hug",children:[(0,_.jsx)(Z().B6,{disabled:!0,icon:l,iconRecordCategory:p,size:S().Ev.default,pageIconStyle:n.pageIconStyle,isEmptyPage:d}),(0,_.jsx)(y().D,{styleKey:"bodyMedium",children:(0,_.jsx)(E().A,{store:e,maxLength:a??60,showTooltipWhenTruncated:!0})})]})},r)}var J=()=>s(222334),Q=()=>s(639355);const X=(0,k().YK)({collapseTeamspace:{id:"creatorProfile.integrations.pageAccess.collapseTeamspace",defaultMessage:"Collapse teamspace"},expandTeamspace:{id:"creatorProfile.integrations.pageAccess.expandTeamspace",defaultMessage:"Expand teamspace"}});function ee({teamspaceStore:e,checkType:t,onToggleSelect:s,expanded:a,onExpandToggle:n}){const o=(0,k().tz)(),r=(0,i().IS)((()=>({buttonStyle:{paddingTop:2,paddingBottom:2},buttonRight:{display:"flex",alignItems:"center",cursor:"pointer"}})),[]);return(0,_.jsx)($().A,{onClick:n,focused:!1,icon:(0,_.jsx)(U().S,{checked:t,size:14,onClick:e=>{e.stopPropagation(),s()}}),right:(0,_.jsx)("div",{role:"button",tabIndex:0,style:r.buttonRight,onClick:e=>{e.stopPropagation(),n()},"aria-label":a?o.formatMessage(X.collapseTeamspace):o.formatMessage(X.expandTeamspace),children:(0,_.jsx)(g().I,{icon:J().arrowChevronSingleRightIcon,size:"xs",style:{transform:a?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.1s ease-in-out"}})}),title:(0,_.jsx)(Q().I,{teamStore:e}),buttonStyle:r.buttonStyle},e.id)}var te=()=>s(247601);const se=(0,k().YK)({selectPagesLabel:{id:"pageAccess.modal.selectPagesLabel",defaultMessage:"Select pages"},searchPlaceholder:{id:"pageAccess.modal.searchPlaceholder",defaultMessage:"Search pages"},selectAll:{id:"pageAccess.modal.selectAll",defaultMessage:"Select all"},deselectAll:{id:"pageAccess.modal.deselectAll",defaultMessage:"Deselect all"},remove:{id:"pageAccess.modal.removePage",defaultMessage:"Remove"},noPagesMessage:{id:"pageAccess.modal.noPagesMessage",defaultMessage:"No pages found"},addPagesMessage:{id:"pageAccess.modal.addPagesMessage",defaultMessage:"Add pages first to give this integration access"},tooltip:{id:"pageAccess.modal.tooltip",defaultMessage:"Only pages where you have Full Access will appear here"}}),ae={...s(404200).V,...se};const ne=420;function oe({key:e,title:t,allItems:s,styles:a}){return{key:e,title:t,content:(0,_.jsx)("div",{style:a.menuList,children:(0,_.jsx)(x().A,{type:x().O.Vertical,sections:[{key:e,render:e=>(0,_.jsx)(f().A,{...e}),items:s}],initialFocus:void 0})}),sectionContentStyleOverride:{padding:0}}}const ie=s(757695).Store.createClass({},{name:"SelectedBlockIdsStore"});function re({teamPagesByTeam:e,pagesSharedWithUser:t,privatePages:s,workspacePages:x,selectedBlockIdsStore:f,allTeams:W,spaceStore:z,heightOverride:O=320}){const K=(0,k().tz)(),H=(0,n().v3)(),L=function(e){return(0,i().IS)((()=>({icon:{width:S().Ev.xl,height:S().Ev.xl,color:w().Tj.icon.secondary},pageIconStyle:{fill:w().Tj.icon.secondary},nestedPageItem:{marginInlineStart:24},sectionsContainer:{borderRadius:8},button:{minWidth:120},sectionHeading:{color:w().Tj.palette.gray[500],fontWeight:A().Wy.medium},subSectionHeading:{padding:"8px",color:w().Tj.palette.gray[500],fontWeight:A().Wy.medium},subSectionRowWithBorder:{borderTop:`1px solid ${w().Tj.border.secondary}`,marginTop:4,width:"100%"},pageSelectionContainer:{height:e,overflowY:"auto",borderRadius:8,border:`1px solid ${w().Tj.border.secondary}`,padding:4},noPagesContainer:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",padding:16},tooltipIcon:{width:S().Ev.sm,height:S().Ev.sm},tooltipText:{width:200}})),[e])}(O),[R,D]=a.useState(""),E=(0,o().uB)(f,ie),Y=e=>{E.setState({...E.state,[e]:!E.state[e]})},V=(0,o().K8)((()=>new Set(Object.keys(E.state).filter((e=>E.state[e])).filter((e=>{const t=new(r().B)(H,{table:P().ev,id:e,spaceId:z.id});return(0,I().Km)(t.getRole()||"none")&&!t.pathIsDead()&&t.isNavigableBlock()})))),[E,H,z.id]),{topLevelShareableSharedPageIds:N,topLevelShareablePrivatePageIds:U,topLevelShareableTeamspacePageIds:$,topLevelShareableWorkspacePageIds:Z,shareableTeamPagesByTeam:J,selectedNonTopLevelSharedPageIds:Q,selectedNonTopLevelPrivatePageIds:X,selectedNonTopLevelWorkspacePageIds:se,teamspaceManualSet:re}=(0,te().a)({pagesSharedWithUser:t,privatePages:s,workspacePages:x,teamPagesByTeam:e,selectedPageIds:V,spaceStore:z}),[le,de]=a.useState(new Set);const ce=(0,a.useCallback)((e=>function(e,t){const s=(0,l().g)(e);for(const a of s)if(a.table===P().ev){if(t.has(a.id))return a.id;if(a.isRestricted())break}}(e,new Set(V))),[V]);function pe(e,t){const s={...E.state};for(const a of e)s[a]=t;E.setState(s)}const ge=[],he=a.useMemo((()=>new Map),[]),{sortedTopLevelSharedIds:ue,sortedTopLevelPrivateIds:ye,sortedTeamspaceManualIds:me,sortedTopLevelWorkspacePageIds:xe,sortedNonTopLevelSharedIds:fe,sortedNonTopLevelPrivateIds:ve,sortedNonTopLevelWorkspacePageIds:be,sortedTeams:je}=(0,o().K8)((()=>{const e=he,t=t=>{let s=e.get(t);var a;void 0===s&&(s=(null===(a=new(r().B)(H,{table:P().ev,id:t,spaceId:z.id}).getRenderTitle({intl:K,userTimeZone:(0,v().P)()}))||void 0===a?void 0:a.toString())??"",e.set(t,s));return s},s=(e,s)=>t(e).localeCompare(t(s));return{sortedTopLevelSharedIds:[...N].sort(s),sortedTopLevelPrivateIds:[...U].sort(s),sortedTeamspaceManualIds:[...re].sort(((e,t)=>{const a=e=>{var t;const s=new(r().B)(H,{table:P().ev,id:e,spaceId:z.id});return(null===(t=(0,d().U)(s))||void 0===t?void 0:t.getName())||""},n=a(e),o=a(t);return n!==o?n.localeCompare(o):s(e,t)})),sortedNonTopLevelSharedIds:[...Q].sort(s),sortedNonTopLevelPrivateIds:[...X].sort(s),sortedTeams:[...W].sort(B().r),sortedTopLevelWorkspacePageIds:[...Z].sort(s),sortedNonTopLevelWorkspacePageIds:[...se].sort(s)}}),[H,K,z.id,N,U,re,Q,X,Z,se,W,he]),Se=a.useMemo((()=>new Map),[]),Ie=a.useCallback((e=>{let t=Se.get(e);return t||(t=new(r().B)(H,{table:P().ev,id:e,spaceId:z.id}),Se.set(e,t)),t}),[H,z.id,Se]);if(!(!(N.size>0||U.size>0)||(ue.length>0||ye.length>0)))return(0,_.jsx)(C().A,{loaded:!1,showSpinnerTimeout:0});if($.size>0||re.size>0){const e=[];if(re.size>0){e.push({key:"teamspace-manual-header",action:()=>{},render:()=>(0,_.jsx)(y().D,{styleKey:"captionMedium",colorVariant:"secondary",style:L.subSectionHeading,children:K.formatMessage(ae.manuallySelectedPagesHeader)})});for(const t of me){const s=Ie(t);e.push({key:`manual-${t}`,action:()=>{Y(t)},render:()=>(0,_.jsxs)(c().Y1,{direction:"horizontal",width:"fill",gap:"auto",align:"center",style:{paddingInlineStart:L.subSectionHeading.padding},children:[(0,_.jsx)("div",{children:(0,_.jsx)(F().y,{blockStore:s,maxWidth:ne})}),(0,_.jsx)(u().p,{colorPalette:"blue",onClick:()=>{Y(t)},children:(0,_.jsx)(y().D,{styleKey:"captionMedium",children:K.formatMessage(ae.remove)})})]})})}}re.size>0&&$.size>0&&e.push({key:"teamspace-manual-divider",action:()=>{},render:()=>(0,_.jsx)("div",{style:L.subSectionRowWithBorder})});const t=Array.from($).some((e=>V.has(e)));e.push({key:"teamspace-top-level-header",action:()=>{},render:()=>(0,_.jsxs)(c().Y1,{direction:"horizontal",width:"fill",gap:"auto",align:"center",children:[(0,_.jsx)(y().D,{styleKey:"captionMedium",colorVariant:"secondary",style:L.subSectionHeading,children:(0,_.jsx)(k().sA,{...ae.teamspacesHeaderSubheader})}),t?(0,_.jsx)(u().p,{colorPalette:"blue",onClick:()=>{pe($,!1)},children:(0,_.jsx)(y().D,{styleKey:"captionMedium",children:K.formatMessage(ae.deselectAll)})}):(0,_.jsx)(u().p,{colorPalette:"blue",onClick:()=>{pe($,!0)},children:(0,_.jsx)(y().D,{styleKey:"captionMedium",children:K.formatMessage(ae.selectAll)})})]})});const s=je.filter((e=>J[e.id]&&J[e.id].length>0));for(const n of s){const t=J[n.id].filter((e=>V.has(e))),s=0!==t.length&&(t.length===J[n.id].length||"partial"),a=le.has(n.id);if(e.push({key:`teamspace-${n.id}`,action:()=>{},render:()=>(0,_.jsx)(ee,{teamspaceStore:n,checkType:s,onToggleSelect:()=>pe(J[n.id],!s),expanded:a,onExpandToggle:()=>{return e=n.id,void de((t=>{const s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s}));var e}})}),a)for(const o of J[n.id]){const t=Ie(o);e.push({key:o,action:()=>{Y(o)},render:()=>(0,_.jsx)("div",{style:L.nestedPageItem,children:(0,_.jsx)(G,{pageStore:t,isSelected:V.has(o),onToggle:()=>{Y(o)},styles:L,maxLength:50})})})}}const a=oe({key:"teamspaces",title:(0,_.jsx)(y().D,{styleKey:"captionMedium",colorVariant:"secondary",style:L.sectionHeading,children:(0,_.jsx)(k().sA,{...ae.teamspacesHeader})}),allItems:e,styles:L});ge.push(a)}if((Z.size>0||se.length>0)&&0===W.length){const e=[];if(se.length>0){e.push({key:"workspaceManualHeader",action:()=>{},render:()=>(0,_.jsx)(y().D,{styleKey:"captionMedium",colorVariant:"secondary",style:L.subSectionHeading,children:K.formatMessage(ae.manuallySelectedPagesHeader)})});for(const t of be){const s=Ie(t);e.push({key:t,action:()=>{Y(t)},render:()=>(0,_.jsxs)(c().Y1,{direction:"horizontal",width:"fill",gap:"auto",align:"center",style:{paddingInlineStart:L.subSectionHeading.padding},children:[(0,_.jsx)("div",{children:(0,_.jsx)(F().y,{blockStore:s,maxWidth:ne})}),(0,_.jsx)(u().p,{colorPalette:"blue",onClick:()=>{Y(t)},children:(0,_.jsx)(y().D,{styleKey:"captionMedium",children:K.formatMessage(ae.remove)})})]})})}}if(se.length>0&&Z.size>0&&e.push({key:"shared-manual-divider",action:()=>{},render:()=>(0,_.jsx)("div",{style:L.subSectionRowWithBorder})}),Z.size>0){const t=Array.from(Z).some((e=>V.has(e)));e.push({key:"workspaces-top-level-header",action:()=>{},render:()=>(0,_.jsxs)(c().Y1,{direction:"horizontal",width:"fill",gap:"auto",align:"center",children:[(0,_.jsx)(y().D,{styleKey:"captionMedium",colorVariant:"secondary",style:L.subSectionHeading,children:(0,_.jsx)(k().sA,{...ae.topLevelPagesHeader})}),t?(0,_.jsx)(u().p,{colorPalette:"blue",onClick:()=>{pe(Z,!1)},children:(0,_.jsx)(y().D,{styleKey:"captionMedium",children:K.formatMessage(ae.deselectAll)})}):(0,_.jsx)(u().p,{colorPalette:"blue",onClick:()=>{pe(Z,!0)},children:(0,_.jsx)(y().D,{styleKey:"captionMedium",children:K.formatMessage(ae.selectAll)})})]})})}e.push(...xe.map((e=>{const t=Ie(e);return{key:t.id,action:()=>{Y(t.id)},render:()=>(0,_.jsx)("div",{children:(0,_.jsx)(G,{pageStore:t,isSelected:V.has(t.id),onToggle:()=>{Y(t.id)},styles:L,maxLength:50})})}})));const t=oe({key:"workspacePages",title:(0,_.jsx)(y().D,{styleKey:"captionMedium",colorVariant:"secondary",style:L.sectionHeading,children:(0,_.jsx)(k().sA,{...ae.workspacePagesHeader})}),allItems:e,styles:L});ge.push(t)}if(N.size>0||Q.length>0){const e=[];if(Q.length>0){e.push({key:"sharedManualHeader",action:()=>{},render:()=>(0,_.jsx)(y().D,{styleKey:"captionMedium",colorVariant:"secondary",style:L.subSectionHeading,children:K.formatMessage(ae.manuallySelectedPagesHeader)})});for(const t of fe){const s=Ie(t);e.push({key:t,action:()=>{Y(t)},render:()=>(0,_.jsxs)(c().Y1,{direction:"horizontal",width:"fill",gap:"auto",align:"center",style:{paddingInlineStart:L.subSectionHeading.padding},children:[(0,_.jsx)("div",{children:(0,_.jsx)(F().y,{blockStore:s,maxWidth:ne})}),(0,_.jsx)(u().p,{colorPalette:"blue",onClick:()=>{Y(t)},children:(0,_.jsx)(y().D,{styleKey:"captionMedium",children:K.formatMessage(ae.remove)})})]})})}}if(Q.length>0&&N.size>0&&e.push({key:"shared-manual-divider",action:()=>{},render:()=>(0,_.jsx)("div",{style:L.subSectionRowWithBorder})}),N.size>0){const t=Array.from(N).some((e=>V.has(e)));e.push({key:"shared-top-level-header",action:()=>{},render:()=>(0,_.jsxs)(c().Y1,{direction:"horizontal",width:"fill",gap:"auto",align:"center",children:[(0,_.jsx)(y().D,{styleKey:"captionMedium",colorVariant:"secondary",style:L.subSectionHeading,children:(0,_.jsx)(k().sA,{...ae.topLevelPagesHeader})}),t?(0,_.jsx)(u().p,{colorPalette:"blue",onClick:()=>{pe(N,!1)},children:(0,_.jsx)(y().D,{styleKey:"captionMedium",children:K.formatMessage(ae.deselectAll)})}):(0,_.jsx)(u().p,{colorPalette:"blue",onClick:()=>{pe(N,!0)},children:(0,_.jsx)(y().D,{styleKey:"captionMedium",children:K.formatMessage(ae.selectAll)})})]})})}e.push(...ue.map((e=>{const t=Ie(e);return{key:t.id,action:()=>{Y(t.id)},render:()=>(0,_.jsx)("div",{children:(0,_.jsx)(G,{pageStore:t,isSelected:V.has(t.id),onToggle:()=>{Y(t.id)},styles:L,maxLength:50})})}})));const t=oe({key:"sharedPages",title:(0,_.jsx)(y().D,{styleKey:"captionMedium",colorVariant:"secondary",style:L.sectionHeading,children:(0,_.jsx)(k().sA,{...ae.sharedPagesHeader})}),allItems:e,styles:L});ge.push(t)}if(ye.length>0||X.length>0){const e=[];if(X.length>0){e.push({key:"privateManualHeader",action:()=>{},render:()=>(0,_.jsx)(y().D,{styleKey:"captionMedium",colorVariant:"secondary",style:L.subSectionHeading,children:K.formatMessage(ae.manuallySelectedPagesHeader)})});for(const t of ve){const s=Ie(t);e.push({key:t,action:()=>{Y(t)},render:()=>(0,_.jsxs)(c().Y1,{direction:"horizontal",width:"fill",gap:"auto",align:"center",style:{paddingInlineStart:L.subSectionHeading.padding},children:[(0,_.jsx)("div",{children:(0,_.jsx)(F().y,{blockStore:s,maxWidth:ne})}),(0,_.jsx)(u().p,{colorPalette:"blue",onClick:()=>{Y(t)},children:(0,_.jsx)(y().D,{styleKey:"captionMedium",children:K.formatMessage(ae.remove)})})]})})}}if(X.length>0&&ye.length>0&&e.push({key:"private-manual-divider",action:()=>{},render:()=>(0,_.jsx)("div",{style:L.subSectionRowWithBorder})}),ye.length>0){const t=Array.from(U).some((e=>V.has(e)));e.push({key:"private-top-level-header",action:()=>{},render:()=>(0,_.jsxs)(c().Y1,{direction:"horizontal",width:"fill",gap:"auto",align:"center",children:[(0,_.jsx)(y().D,{styleKey:"captionMedium",colorVariant:"secondary",style:L.subSectionHeading,children:(0,_.jsx)(k().sA,{...ae.topLevelPagesHeader})}),t?(0,_.jsx)(u().p,{colorPalette:"blue",onClick:()=>{pe(U,!1)},children:(0,_.jsx)(y().D,{styleKey:"captionMedium",children:K.formatMessage(ae.deselectAll)})}):(0,_.jsx)(u().p,{colorPalette:"blue",onClick:()=>{pe(U,!0)},children:(0,_.jsx)(y().D,{styleKey:"captionMedium",children:K.formatMessage(ae.selectAll)})})]})})}e.push(...ye.map((e=>{const t=Ie(e);return{key:t.id,action:()=>{Y(t.id)},render:()=>(0,_.jsx)("div",{children:(0,_.jsx)(G,{pageStore:t,isSelected:V.has(t.id),onToggle:()=>{Y(t.id)},styles:L,maxLength:50})})}})));const t=oe({key:"privatePages",title:(0,_.jsx)(y().D,{styleKey:"captionMedium",colorVariant:"secondary",style:L.sectionHeading,children:(0,_.jsx)(k().sA,{...ae.privatePagesHeader})}),allItems:e,styles:L});ge.push(t)}return 0===ge.length?(0,_.jsx)("div",{style:L.pageSelectionContainer,children:(0,_.jsx)("div",{style:L.sectionsContainer,children:(0,_.jsxs)(c().Y1,{direction:"vertical",gap:8,align:"center",padding:24,children:[(0,_.jsx)(y().D,{styleKey:"bodySemibold",children:(0,_.jsx)(k().sA,{...ae.noPagesMessage})}),(0,_.jsx)(y().D,{styleKey:"bodySmRegular",children:(0,_.jsx)(k().sA,{...ae.addPagesMessage})})]})})}):(0,_.jsxs)(c().Y1,{direction:"vertical",gap:12,children:[(0,_.jsxs)(c().Y1,{direction:"horizontal",width:"hug",align:"center-left",children:[(0,_.jsx)(y().D,{styleKey:"captionRegular",colorVariant:"secondary",children:(0,_.jsx)(k().sA,{...ae.selectPagesLabel})}),(0,_.jsx)(m().m,{textWrap:!0,renderTooltip:()=>(0,_.jsx)("div",{style:L.tooltipText,children:K.formatMessage(ae.tooltip)}),render:e=>(0,_.jsx)("div",{...e,children:(0,_.jsx)(h().A,{ariaLabel:K.formatMessage(ae.tooltip),icon:j().questionMarkCircleIcon,size:"sm",disableBackground:!0})}),placement:"right"})]}),(0,_.jsx)("div",{children:(0,_.jsx)(p().zD,{trapFocus:!1,origin:(0,_.jsx)(M().Ay,{focus:!0,focusAfterAnimation:!0,value:R||"",onChange:e=>{D(e.target.value)},placeholder:K.formatMessage(ae.searchPlaceholder),inputLeft:(0,_.jsx)(g().I,{icon:b().magnifyingGlassIcon,colorVariant:"secondary"}),inputOuterStyle:{height:32},ignoreKeyboardMode:!0,style:{padding:0}}),sameWidthAsOrigin:!0,popupType:p().nl.Popup,open:""!==R,render:()=>(0,_.jsx)(q,{spaceId:z.id,spaceStore:z,onSelectPage:e=>{Y(e)},query:R||"",source:"internal_integrations_page_picker",findSelectedBlockAncestorId:ce}),onDismiss:()=>D("")})}),(0,_.jsx)("div",{style:L.pageSelectionContainer,children:(0,_.jsx)("div",{style:L.sectionsContainer,children:(0,_.jsx)(T().b,{sections:ge})})})]})}},247601:(e,t,s)=>{s.d(t,{a:()=>g});s(944114),s(517642),s(658004),s(733853),s(845876),s(432475),s(515024),s(731698),s(898992),s(354520),s(581454),s(737550);var a=s(296540),n=()=>s(484714),o=()=>s(590526),i=()=>s(295633),r=()=>s(330361),l=()=>s(68263),d=()=>s(179034),c=()=>s(854150),p=()=>s(292664);function g({pagesSharedWithUser:e,privatePages:t,workspacePages:s,teamPagesByTeam:l,selectedPageIds:g,spaceStore:u}){const y=(0,n().v3)(),m=(0,o().K8)((()=>new Set(e.filter((e=>h(e))).map((({id:e})=>e)))),[e]),x=(0,o().K8)((()=>new Set(t.filter((e=>h(e))).map((({id:e})=>e)))),[t]),f=(0,o().K8)((()=>new Set(Object.values(l).flat().filter((e=>h(new(i().B)(y,{table:d().ev,id:e,spaceId:u.id})))))),[y,u.id,l]),v=(0,o().K8)((()=>new Set(s.filter((e=>h(e))).map((({id:e})=>e)))),[s]),b=(0,a.useMemo)((()=>{const e={};for(const t of Object.keys(l))e[t]=l[t].filter((e=>f.has(e)));return e}),[l,f]),j=(0,o().K8)((()=>{const e=new Set;for(const t of g){if(f.has(t))continue;const s=new(i().B)(y,{table:d().ev,id:t,spaceId:u.id});(0,r().g)(s).some((e=>e.table===c().yK))&&h(s)&&e.add(t)}return e}),[g,f,y,u.id]),S=(0,o().K8)((()=>{const e=[];for(const t of g){if(m.has(t)||x.has(t)||f.has(t)||j.has(t))continue;const s=new(i().B)(y,{table:d().ev,id:t,spaceId:u.id});!s.isTopLevel()&&h(s)&&e.push(t)}return e}),[g,m,x,f,j,y,u.id]),I=(0,o().K8)((()=>{const e=[];for(const t of g){if(v.has(t)||j.has(t))continue;const s=new(i().B)(y,{table:d().ev,id:t,spaceId:u.id});(0,r().g)(s).some((e=>e.table===d().ev&&e.isTopLevelWorkspacePage(u.id)))&&e.push(t)}return e}),[y,g,u.id,v,j]),P=(0,o().K8)((()=>{const e=[];for(const t of g){if(x.has(t)||m.has(t)||f.has(t)||j.has(t))continue;const s=new(i().B)(y,{table:d().ev,id:t,spaceId:u.id});(0,r().g)(s).some((e=>e.table===d().ev&&(0,p().K)(e)))&&e.push(t)}return e}),[g,x,m,f,y,u.id,j]);return{topLevelShareableSharedPageIds:m,topLevelShareablePrivatePageIds:x,topLevelShareableTeamspacePageIds:f,topLevelShareableWorkspacePageIds:v,shareableTeamPagesByTeam:b,selectedNonTopLevelSharedPageIds:S,selectedNonTopLevelPrivatePageIds:P,selectedNonTopLevelWorkspacePageIds:I,teamspaceManualSet:j}}function h(e){return!e.pathIsDead()&&(0,l().Km)(e.getRole()||"none")}},320865:(e,t,s)=>{s.d(t,{A:()=>n});s(296540);var a=s(474848);const n=function(){return(0,a.jsx)(s(424400).Ay,{title:(0,a.jsx)(s(98126).k,{size:"default"}),titleStyle:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"}})}},404200:(e,t,s)=>{s.d(t,{V:()=>a});const a=(0,s(69708).YK)({teamspacesHeader:{id:"pageAccess.teamspacesHeader",defaultMessage:"Teamspaces"},teamspacesHeaderSubheader:{id:"pageAccess.teamspacesSubheader",defaultMessage:"Teamspace pages"},topLevelPagesHeader:{id:"pageAccess.topLevelPagesHeader",defaultMessage:"Top level pages"},manuallySelectedPagesHeader:{id:"pageAccess.manuallySelectedPagesHeader",defaultMessage:"Manually selected"},sharedPagesHeader:{id:"pageAccess.sharedPagesHeader",defaultMessage:"Shared"},privatePagesHeader:{id:"pageAccess.privatePagesHeader",defaultMessage:"Private"},workspacePagesHeader:{id:"pageAccess.workspacePagesHeader",defaultMessage:"Workspace"}})},449705:(e,t,s)=>{s.d(t,{E:()=>M});s(296540);var a=()=>s(726637),n=()=>s(590526),o=()=>s(401497),i=()=>s(829098),r=()=>s(150161),l=()=>s(250910),d=()=>s(118307),c=()=>s(807449),p=()=>s(546926),g=()=>s(631524),h=()=>s(890492),u=()=>s(81068),y=()=>s(424400),m=()=>s(663639),x=()=>s(736847),f=()=>s(626466),v=()=>s(805697),b=s(474848);const j={viewBox:"0 0 20 20",fittedViewBox:"1.95 3.3 16.1 14.08",svg:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("path",{d:"M4.075 3.3A2.125 2.125 0 0 0 1.95 5.425V16.75c0 .345.28.625.625.625h2.6V13.6a.55.55 0 0 1 .55-.55h3.6a.55.55 0 0 1 .55.55v3.775H13.1V5.425A2.125 2.125 0 0 0 10.975 3.3zm1.875 4a.675.675 0 1 1 0-1.35.675.675 0 0 1 0 1.35m.675 1.575a.675.675 0 1 1-1.35 0 .675.675 0 0 1 1.35 0M5.95 11.8a.675.675 0 1 1 0-1.35.675.675 0 0 1 0 1.35m3.825-5.175a.675.675 0 1 1-1.35 0 .675.675 0 0 1 1.35 0M9.1 9.55a.675.675 0 1 1 0-1.35.675.675 0 0 1 0 1.35m.675 1.575a.675.675 0 1 1-1.35 0 .675.675 0 0 1 1.35 0"}),(0,b.jsx)("path",{d:"M8.775 17.375h-2.5V14.15h2.5zm5.425 0v-8.45h1.725c1.174 0 2.125.951 2.125 2.125v5.7c0 .345-.28.625-.625.625zm1.82-4.675a.675.675 0 1 0 0-1.35.675.675 0 0 0 0 1.35m.675 1.575a.675.675 0 1 0-1.35 0 .675.675 0 0 0 1.35 0"})]})},S=(0,s(340498).wt)("teamspaceFill",j,"fill");var I=()=>s(69708),P=()=>s(100622),k=()=>s(284371),w=()=>s(249117);const A=380,T=(0,I().YK)({defaultOption:{id:"manageIntegrationPermissionsMenu.defaultOption",defaultMessage:"Default"},defaultOptionDescription:{id:"manageIntegrationPermissionsMenu.defaultOptionDescription",defaultMessage:"Workspace owners and members can manage access"},workspaceOwnersOption:{id:"manageIntegrationPermissionsMenu.workspaceOwnersOption",defaultMessage:"Workspace Owners"},workspaceOwnersOptionDescription:{id:"manageIntegrationPermissionsMenu.workspaceOwnersOptionDescription",defaultMessage:"Only workspace owners can manage access"}});function M(e){const{isAdminOnly:t,onToggleAdminOnly:s,disabled:j}=e,M=(0,n().uB)(void 0,d().A),C=(0,o().IS)((()=>({container:{width:"100%"},triggerButton:{...(0,r().qq)({size:"lg",hasIconOnly:!1,isButtonGapEnabled:!0}),flexDirection:"column",alignItems:"stretch",justifyContent:"center",width:"100%",minHeight:70,padding:`${w().YK[5]}px ${r().mw.lg}px`,backgroundColor:P().Tj.background.primary,border:`1px solid ${P().Tj.border.secondary}`},triggerHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",height:"100%"},triggerContent:{display:"flex",alignItems:"center",gap:w().YK[4],flex:1,minWidth:0},triggerTextWrapper:{flex:1,minWidth:0},triggerTitle:{fontSize:i().U.body.fontSize,fontWeight:k().Wy.medium,color:P().Tj.text.primary,lineHeight:i().U.body.lineHeight,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},triggerDescription:{fontSize:i().U.bodySm.fontSize,color:P().Tj.text.secondary,lineHeight:i().U.bodySm.lineHeight,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},iconStyle:{...(0,r().qq)({size:"sm",hasIconOnly:!0,isButtonGapEnabled:!0}),fill:P().Tj.text.secondary,marginInlineEnd:0},menuItemIcon:{...(0,r().qq)({size:"sm",hasIconOnly:!0,isButtonGapEnabled:!0}),alignSelf:"center",marginTop:0,marginInlineEnd:0},menuItemIconContainer:{display:"flex",alignItems:"center",justifyContent:"center",minWidth:y().pg,minHeight:y().pg,flexShrink:0}})),[]),B={default:{title:T.defaultOption,description:T.defaultOptionDescription,icon:v().globeFillIcon,adminOnlyValue:!1},workspace_owners:{title:T.workspaceOwnersOption,description:T.workspaceOwnersOptionDescription,icon:S,adminOnlyValue:!0}},W=t?B.workspace_owners:B.default,z=["default","workspace_owners"].map((e=>(({key:e,adminOnlyValue:a,title:n,description:o,icon:i})=>({key:e,action:()=>{s&&(s(a),M.reset())},render:e=>(0,b.jsx)(u().A,{...e,title:(0,b.jsx)(I().sA,{...n}),caption:(0,b.jsx)(I().sA,{...o}),icon:(0,b.jsx)("div",{style:C.menuItemIconContainer,children:i(C.iconStyle)}),desktopIconStyle:C.menuItemIcon,isChecked:t===a,shouldWrapCaption:!0,onClick:()=>{s&&(s(a),M.reset())}})}))({key:e,...B[e]}))),O=[{key:"integration-permissions-section",render:e=>(0,b.jsx)(x().A,{...e}),items:z}];return(0,b.jsx)("div",{style:C.container,children:(0,b.jsx)(l().A,{popupType:a().A.isMobile?l().z.BottomSheet:l().z.Popup,buttonPopupStore:M,renderOrigin:e=>(0,b.jsx)(g().p,{...e,style:C.triggerButton,disabled:j,children:(0,b.jsxs)("div",{style:C.triggerHeader,children:[(0,b.jsxs)("div",{style:C.triggerContent,children:[(0,b.jsx)("div",{style:C.iconStyle,children:W.icon(C.iconStyle)}),(0,b.jsxs)("div",{style:C.triggerTextWrapper,children:[(0,b.jsx)("div",{style:C.triggerTitle,children:(0,b.jsx)(I().sA,{...W.title})}),(0,b.jsx)("div",{style:C.triggerDescription,children:(0,b.jsx)(I().sA,{...W.description})})]})]}),j?void 0:(0,b.jsx)(c().I,{icon:f().arrowChevronSingleDownFillIcon,style:C.iconStyle})]})}),render:()=>(0,b.jsx)(h().A,{menuType:a().A.isMobile?p().gu.ActionSheet:p().gu.Popup,width:A,children:(0,b.jsx)(m().A,{type:m().O.Vertical,sections:O,initialFocus:void 0})})})})}},568721:(e,t,s)=>{s.d(t,{b:()=>x});s(581454);var a=()=>s(203066),n=()=>s(153321),o=s(296540),i=()=>s(401497),r=()=>s(718827),l=()=>s(606712),d=()=>s(249046),c=()=>s(807449),p=()=>s(302501),g=()=>s(222334),h=()=>s(340498),u=()=>s(100622),y=()=>s(284371),m=s(474848);function x(e){const{sections:t,expandAllWhenSectionsChange:s=!1,chevronPosition:a="end",styleOverrides:n,borderedStyle:r=!1,compactMode:d=!1,buttonPadding:c}=e,p=function(e,t,s,a){const n=(0,i().eP)();return(0,i().IS)((()=>{const o=(null==e?void 0:e.sectionBackground)??u().Tj.background.secondary,i=(null==e?void 0:e.sectionButtonBackground)??u().Tj.background.secondary;return{container:{display:"grid",gap:8,...s?{maxWidth:"100%",boxSizing:"border-box",overflow:"hidden"}:{}},sectionWrapper:t?{background:"transparent",borderRadius:8,border:`1px solid ${u().Tj.border.secondary}`,...s?{boxSizing:"border-box",overflow:"hidden"}:{}}:{background:o,borderRadius:8,...s?{boxSizing:"border-box",overflow:"hidden"}:{}},sectionButton:{background:t?"transparent":i,borderRadius:8,padding:a??(s?"6px 10px":"8px 12px"),...s?{width:"100%",boxSizing:"border-box"}:{}},sectionButtonWithDividerExpanded:{background:t?"transparent":i,borderBottom:`1px solid ${t?u().Tj.border.secondary:u().Tj.border.primary}`,padding:s?"6px 10px":"8px 12px",borderStartStartRadius:8,borderStartEndRadius:8,borderEndStartRadius:0,borderEndEndRadius:0,...s?{width:"100%",boxSizing:"border-box"}:{}},sectionButtonWithDividerCollapsed:{background:t?"transparent":i,borderBottom:t?void 0:`1px solid ${u().Tj.border.primary}`,padding:a??(s?"6px 10px":"8px 12px"),borderRadius:8,...s?{width:"100%",boxSizing:"border-box"}:{}},sectionButtonHovered:{background:u().Tj.background.secondaryTranslucent},sectionButtonPressed:{background:(0,l().y)({color:u().Tj.background.secondaryTranslucent,mode:n,adjustmentFactor:1})},sectionButtonLabel:{justifyContent:"space-between",display:"flex",alignItems:"center"},sectionTitle:{fontWeight:y().Wy.medium,padding:0},sectionButtonIconArea:{alignItems:"center"},sectionIcon:{flexShrink:0,width:16,height:16,display:"flex",alignItems:"center",justifyContent:"center",marginInlineEnd:8},titleWrapper:s?{flex:1,minWidth:0,overflow:"hidden",display:"flex",alignItems:"center"}:{display:"flex",alignItems:"center"},chevronIcon:{width:h().Ev.xs,height:h().Ev.xs,marginInlineStart:12,transition:"transform 200ms ease-out"},sectionContent:{padding:s?10:12,...s?{maxWidth:"100%",boxSizing:"border-box",overflow:"hidden"}:{}}}}),[null==e?void 0:e.sectionBackground,null==e?void 0:e.sectionButtonBackground,s,t,a,n])}(n,r,d,c),[g,x]=(0,o.useState)((()=>{const e={};for(const s of t)!s.hidden&&s.initialExpanded&&(e[s.key]=!0);return e})),v=(0,o.useCallback)((e=>{x((t=>({...t,[e]:!t[e]})))}),[]);return(0,o.useEffect)((()=>{if(s){const e={};for(const s of t)s.hidden||(e[s.key]=!0);x(e)}}),[t,s]),(0,m.jsx)("div",{style:p.container,children:t.map((e=>{if(e.hidden)return null;const t=Boolean(g[e.key]),s=!1!==e.collapsible;return(0,m.jsx)(f,{section:e,isExpanded:t,isCollapsible:s,chevronPosition:a,onToggle:v,styles:p,borderedStyle:r},e.key)}))})}function f(e){const{section:t,isExpanded:s,isCollapsible:a,chevronPosition:n,onToggle:o,styles:i,borderedStyle:l}=e,d=t.headerDivider?s?i.sectionButtonWithDividerExpanded:i.sectionButtonWithDividerCollapsed:i.sectionButton,c=(0,m.jsx)(v,{section:t,isExpanded:s,isCollapsible:a,chevronPosition:n,styles:i});return(0,m.jsxs)("div",{style:i.sectionWrapper,children:[(0,m.jsx)("div",{children:a?(0,m.jsx)(r().Ay,{onClick:()=>o(t.key),style:d,hoveredStyle:i.sectionButtonHovered,children:c}):(0,m.jsx)("div",{style:d,children:c})}),t.content?(0,m.jsx)(b,{content:t.content,isExpanded:s,contentStyle:t.sectionContentStyleOverride??i.sectionContent,borderedStyle:l}):void 0]})}function v(e){const{section:t,isExpanded:s,isCollapsible:a,chevronPosition:n,styles:o}=e,i=a?(0,m.jsx)(c().I,{icon:g().arrowChevronSingleRightIcon,style:{...o.chevronIcon,transform:`rotateZ(${s?90:0}deg)`}}):void 0,r=t.disableUILabelWrap?t.title:(0,m.jsx)(p().A,{style:o.sectionTitle,children:t.title}),l=t.secondaryLabel?t.disableUILabelWrap?t.secondaryLabel:(0,m.jsx)(p().A,{isSecondaryColor:!0,children:t.secondaryLabel}):void 0;return"start"===n&&a?(0,m.jsxs)(d().Ye,{style:o.sectionButtonLabel,children:[(0,m.jsxs)(d().Ye,{style:o.titleWrapper,children:[(0,m.jsx)(c().I,{icon:g().arrowChevronSingleRightIcon,style:{...o.chevronIcon,marginInlineStart:0,marginInlineEnd:8,transform:`rotateZ(${s?90:0}deg)`}}),t.icon?(0,m.jsx)("div",{style:o.sectionIcon,children:t.icon}):void 0,r]}),(0,m.jsx)(d().Ye,{style:o.sectionButtonIconArea,children:l})]}):(0,m.jsxs)(d().Ye,{style:o.sectionButtonLabel,children:[(0,m.jsxs)(d().Ye,{style:o.titleWrapper,children:[t.icon?(0,m.jsx)("div",{style:o.sectionIcon,children:t.icon}):void 0,r]}),(0,m.jsxs)(d().Ye,{style:o.sectionButtonIconArea,children:[l,i]})]})}function b({content:e,isExpanded:t,contentStyle:s,borderedStyle:o}){return(0,m.jsx)(a().N,{initial:!1,children:t?(0,m.jsx)(n().P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.25,ease:"easeInOut"},style:{overflow:"hidden",background:o?void 0:u().Tj.background.primary},children:(0,m.jsx)("div",{style:s,children:e})}):void 0})}},593781:(e,t,s)=>{s.d(t,{r:()=>S});s(944114),s(517642),s(658004),s(733853),s(845876),s(432475),s(515024),s(731698);var a=s(296540),n=()=>s(564884),o=()=>s(484714),i=()=>s(401497),r=()=>s(394888),l=()=>s(699143),d=()=>s(807449),c=()=>s(631524),p=()=>s(160432),g=()=>s(493552),h=()=>s(920495),u=()=>s(69708),y=()=>s(908928),m=()=>s(449705),x=()=>s(898568),f=()=>s(230347),v=s(474848);const b=(0,u().YK)({modalHeader:{id:"pageAccess.modal.header",defaultMessage:"Manage page access"},byline:{id:"pageAccess.modal.byline",defaultMessage:"Choose which pages this integration can access. Add unlinked pages with search."},bylineEnterprise:{id:"pageAccess.modal.bylineEnterprise",defaultMessage:"Choose which pages this integration can access, and who manages access. Add unlinked pages with search."},saveButton:{id:"pageAccess.modal.saveButton",defaultMessage:"Save"},cancelButton:{id:"pageAccess.modal.cancelButton",defaultMessage:"Cancel"},whoCanManagePageAccess:{id:"pageAccess.modal.whoCanManagePageAccess",defaultMessage:"Who can manage page access"}});function j({onClose:e,onCloseWithoutReset:t,pageIdsAlreadySharedWithBot:s,teamPagesByTeam:r,allTeams:j,privatePages:S,pagesSharedWithUser:I,workspacePages:P,spaceId:k,botStore:w,spaceStore:A,refetchBotSharedPages:T,selectedBlockIdsStore:M,pagePickerLocation:C,integrationManagementPermissions:B}){const W=(0,i().IS)((()=>({pagePickerLayout:{flexGrow:1,minHeight:0},adminToggleLayout:{paddingTop:8,paddingBottom:8},saveButtonLayout:{flexShrink:0}})),[]),z=(0,u().tz)(),O=(0,o().v3)(),[K,H]=a.useState(!1),[L,R]=a.useState(B.effectiveAdminOnly);a.useEffect((()=>{R(B.effectiveAdminOnly)}),[B.effectiveAdminOnly]);const D=async()=>{H(!0);const{pageIdAndOperations:e,numPagesAdded:a,numPagesRemoved:o}=function(e,t){const s=new Set(e),a=t.state,n=[];let o=0,i=0;for(const r of Object.keys(a)){const e=a[r],t=s.has(r);t&&!e?(n.push({pageId:r,operationType:"remove"}),i++):!t&&e&&(n.push({pageId:r,operationType:"add"}),o++)}return{pageIdAndOperations:n,numPagesAdded:o,numPagesRemoved:i}}(s,M),i=await async function(e){const{environment:t,spaceStore:s,botStore:a,pageIdAndOperations:n,isAdminOnly:o,integrationManagementPermissions:i}=e;let r;o!==i.effectiveAdminOnly&&(r=o);const l=n.length>0,d=void 0!==r;if(!l&&!d)return!1;return await y().iN({environment:t,spaceStore:s,botStore:a,pageIdAndOperations:n,effectiveAdminOnly:r})}({environment:O,spaceStore:A,botStore:w,pageIdAndOperations:e,isAdminOnly:L,integrationManagementPermissions:B});i&&((0,n().u)({environment:O,event:{eventName:"clearer_integration_access_page_access_updated",eventProperties:{triggered_from:C,pages_added:a,pages_removed:o,space_id:k,bot_id:w.id}}}),T&&await T()),H(!1),t()},E=B.featureEnabled,Y=E?200:280;return(0,v.jsxs)(l().Y1,{direction:"vertical",height:"fill",padding:24,gap:20,children:[(0,v.jsxs)(l().Y1,{gap:24,direction:"vertical",style:W.pagePickerLayout,children:[(0,v.jsx)(x().rQ,{icon:(0,v.jsx)(d().I,{icon:h().pageIcon,size:"xl",colorVariant:"secondary"}),title:z.formatMessage(b.modalHeader),byline:E?z.formatMessage(b.bylineEnterprise):z.formatMessage(b.byline),bylineWidthOverride:"60%"}),(0,v.jsx)(f().C,{teamPagesByTeam:r,allTeams:j,privatePages:S,pagesSharedWithUser:I,workspacePages:P,spaceId:k,spaceStore:A,selectedBlockIdsStore:M,heightOverride:Y})]}),E?(0,v.jsxs)(l().Y1,{direction:"vertical",gap:12,style:W.adminToggleLayout,children:[(0,v.jsx)(g().D,{styleKey:"captionRegular",colorVariant:"secondary",children:(0,v.jsx)(u().sA,{...b.whoCanManagePageAccess})}),(0,v.jsx)(m().E,{integrationManagementPermissions:B,isAdminOnly:L,onToggleAdminOnly:R,disabled:K})]}):void 0,(0,v.jsxs)(l().Y1,{gap:8,direction:"horizontal",align:"center-right",style:W.saveButtonLayout,children:[(0,v.jsx)(c().p,{onClick:e,disabled:K,size:"lg",children:(0,v.jsx)(g().D,{styleKey:"bodyMedium",colorVariant:"secondary",children:z.formatMessage(b.cancelButton)})}),(0,v.jsx)(p().A,{colorPalette:"blue",size:"lg",onClick:async()=>await D(),isLoading:K,disabled:K,children:z.formatMessage(b.saveButton)})]})]})}function S(e){const{onClose:t,selectedBlockIdsStore:s,pageIdsAlreadySharedWithBot:n}=e,o=a.useCallback((()=>{const e={};for(const t of n)e[t]=!0;s.setState(e),t()}),[t,s,n]);return(0,v.jsx)(r().s,{areaConstraint:{width:{type:"fixed",length:700},height:{type:"max",length:680}},isOpen:e.isOpen,onDismiss:o,render:()=>(0,v.jsx)(j,{...e,onClose:o,onCloseWithoutReset:t})})}},639355:(e,t,s)=>{s.d(t,{I:()=>d});s(296540);var a=()=>s(699143),n=()=>s(493552),o=()=>s(340498),i=()=>s(16006),r=()=>s(898808),l=s(474848);function d(e){const{teamStore:t}=e;return(0,l.jsxs)(a().Y1,{direction:"horizontal",gap:8,width:"hug",children:[(0,l.jsx)(r().x,{disabled:!0,store:t,size:o().Ev.default}),(0,l.jsx)(n().D,{styleKey:"bodyMedium",children:(0,l.jsx)(i().A,{store:t})})]})}},664460:(e,t,s)=>{s.d(t,{y:()=>b});var a=s(296540),n=()=>s(590526),o=()=>s(699143),i=()=>s(970236),r=()=>s(493552),l=()=>s(340498),d=()=>s(69708),c=()=>s(187820),p=()=>s(16006),g=()=>s(943101),h=()=>s(401497),u=()=>s(26697),y=()=>s(100622),m=()=>s(128295),x=s(474848);function f({blockStore:e,maxWidth:t}){const s=(0,h().IS)((()=>({truncatedText:{maxWidth:t,minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},tooltipRecordPath:{flexWrap:"wrap",overflow:"visible"}})),[t]),n=a.useRef(null),[o,i]=a.useState(!1),r=a.useCallback((()=>{const e=n.current;if(!e)return;let t=e.scrollWidth>e.clientWidth;if(!t)for(const s of Array.from(e.querySelectorAll("*")))if(s.scrollWidth>s.clientWidth){t=!0;break}i((e=>e===t?e:t))}),[]);a.useEffect((()=>{r()}),[r,t]);const l=a.useRef(void 0),d=a.useCallback((e=>{l.current!==e&&(l.current=e,r())}),[r]);return(0,g().tK)(n,d),(0,x.jsx)(u().m,{textWrap:!0,placement:"top",disableTooltip:!o,render:t=>(0,x.jsx)("div",{...t,ref:n,style:s.truncatedText,children:(0,x.jsx)(m().Ay,{store:e,showFullPathInTooltip:!0,style:s.truncatedText,tooltipStyle:{color:y().Tj.text.inverseSecondary},ellipsisTooltipPlacement:"top"})}),renderTooltip:()=>(0,x.jsx)(m().Ay,{store:e,textColor:y().Tj.text.inverseSecondary,style:s.tooltipRecordPath,innerStyle:{whiteSpace:"normal",overflow:"visible",textOverflow:"unset"}})})}const v=(0,d().YK)({inTrash:{defaultMessage:"In trash",id:"creatorProfile.integrations.pageAccess.inTrash"}});function b({blockStore:e,styles:t,maxWidth:s,maxLength:a,shouldWrap:g=!1}){const h=(0,d().tz)(),{pageIcon:u,isEmptyPage:y,isInTrash:m,iconRecordCategory:b}=(0,n().K8)((()=>({pageIcon:e.getIcon(),isEmptyPage:e.isEmptyPage(),isInTrash:e.pathIsDead(),iconRecordCategory:(0,c().Te)(e)})),[e]);return(0,x.jsxs)(o().Y1,{direction:"horizontal",gap:8,width:"hug",children:[(0,x.jsx)(c().B6,{disabled:!0,icon:u,iconRecordCategory:b,size:l().Ev.default,pageIconStyle:null==t?void 0:t.pageIconStyle,isEmptyPage:y}),(0,x.jsxs)(o().Y1,{gap:"auto",align:"start",children:[(0,x.jsxs)(o().Y1,{direction:"horizontal",gap:10,children:[(0,x.jsx)(r().D,{styleKey:"bodyMedium",children:(0,x.jsx)(p().A,{store:e,maxLength:a??60,shouldWrap:g,enableHover:!0})}),m?(0,x.jsx)(i().E,{color:"yellow",content:h.formatMessage(v.inTrash)},e.id):void 0]}),(0,x.jsx)(f,{blockStore:e,maxWidth:s})]})]})}},723786:(e,t,s)=>{s.d(t,{g:()=>m});s(898992),s(354520),s(581454),s(908872);var a=()=>s(664594),n=()=>s(484714),o=()=>s(590526),i=()=>s(295633),r=()=>s(416504),l=()=>s(179034),d=()=>s(69708),c=()=>s(821062),p=()=>s(51967),g=()=>s(435761),h=()=>s(821093),u=()=>s(110154),y=()=>s(381195);function m({pageIdsSharedWithUser:e,spaceViewStore:t,spaceStore:s}){const m=(0,n().v3)(),x=(0,d().tz)(),f=(0,r().P)(),v=(0,o().K8)((()=>t.getSpaceId()),[t]),b=(0,o().K8)((()=>e.map((e=>new(i().B)(m,{table:l().ev,id:e,spaceId:v})))),[e,m,v]),j=(0,o().K8)((()=>(0,u().f)({environment:m,spaceStore:s})),[m,s]),S=(0,a().T)(),{teams:I}=(0,g().hL)({userId:S,spaceStore:s}),P=(0,g().gc)({spaceStore:s,teams:I}).map((e=>e.store)),k=(0,o().K8)((()=>P.reduce(((e,t)=>{const s=(0,y().O)({teamStore:t}).filter((e=>e.isLoadedNonCopyIndicator()&&e.isNavigableBlock()));return s.length>0&&(e[t.id]=s.sort(((e,t)=>{const s=e.getRenderTitleWithPlaceholder({userTimeZone:f,intl:x}),a=t.getRenderTitleWithPlaceholder({userTimeZone:f,intl:x});return s.localeCompare(a)})).map((e=>e.id))),e}),{})),[P,x,f],{equalityFn:c().k}),w=(0,o().K8)((()=>(0,h().I)({environment:m,spaceViewStore:t})??[]),[t,m]),A=(0,o().K8)((()=>{const e=t.getUserId();return e?b.filter((t=>(0,p().B)({store:t,userId:e,spaceStore:s}))):[]}),[t,b,s],{equalityFn:c().A});return{allTeams:P,teamPagesByTeam:k,allPrivatePages:w,allSharedPages:A,allWorkspacePages:j}}},805697:(e,t,s)=>{s.r(t),s.d(t,{globeFillIcon:()=>n,iconDefinition:()=>a});s(296540);const a={viewBox:"0 0 20 20",fittedViewBox:"2.39 2.47 15.21 15.06",svg:(0,s(474848).jsx)("path",{d:"M6.959 10.55c.044 1.915.317 3.657.751 4.97.237.716.53 1.335.884 1.787q.091.115.193.22a7.625 7.625 0 0 1-6.39-6.977zm10.645 0a7.625 7.625 0 0 1-6.392 6.977q.103-.105.194-.22c.353-.452.647-1.07.884-1.786.434-1.314.707-3.056.751-4.971zm-5.663 0c-.044 1.823-.305 3.443-.696 4.625-.216.652-.46 1.141-.705 1.455-.25.32-.438.383-.54.383s-.29-.063-.54-.383c-.245-.314-.49-.803-.705-1.455-.39-1.182-.652-2.802-.696-4.625zM8.787 2.472q-.103.105-.193.221c-.353.452-.647 1.07-.884 1.786-.434 1.314-.707 3.056-.751 4.971H2.396a7.626 7.626 0 0 1 6.391-6.978M10 2.987c.102 0 .29.063.54.383.245.314.49.803.705 1.455.39 1.182.652 2.802.696 4.625H8.06c.044-1.823.305-3.443.696-4.625.216-.652.46-1.141.705-1.455.25-.32.438-.383.54-.383m1.211-.515a7.626 7.626 0 0 1 6.392 6.978H13.04c-.044-1.915-.317-3.657-.751-4.97-.237-.716-.53-1.335-.884-1.787a3 3 0 0 0-.194-.221"})},n=(0,s(340498).wt)("globeFill",a,"fill")}}]);