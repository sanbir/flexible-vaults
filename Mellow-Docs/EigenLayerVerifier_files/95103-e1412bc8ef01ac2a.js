"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[95103],{149257:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(296540),o=()=>a(69708),i=a(474848);const s=(0,o().YK)({message_placeholder:{id:"teamInviteLinkRequestPage.message.placeholder",defaultMessage:"Message (optional)"}});const r=function(e){const{teamStore:t,teamName:r,teamId:l,isModalOpen:d,onDismiss:c}=e,[u,m]=(0,n.useState)(""),p=(0,a(484714).v3)(),v=(0,o().tz)(),g=async()=>{await a(350648).Ip({environment:p,teamId:l,message:u}),c()},f=(0,a(401497).IS)((()=>({modal:{alignSelf:"center",overflow:"visible",padding:15,width:420},requestTitle:{display:"inline-flex",marginBottom:10},icon:{marginInlineStart:4,marginInlineEnd:4},footer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:15},requestInvitesButton:{marginInlineStart:20},input:{padding:8}})),[]);return(0,i.jsx)(a(107975).a,{open:d,onDismiss:c,innerStyle:f.modal,preventHideChildrenWhileOpening:!0,render:()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:f.requestTitle,children:(0,i.jsx)(o().sA,{id:"teamInviteLinkRequestModal.reasonForRequest.title",defaultMessage:"Request access to {icon} {teamName}",values:{teamName:r,icon:(0,i.jsx)(a(898808).x,{style:f.icon,store:t,disabled:!0,size:22})}})}),(0,i.jsx)(a(31511).A,{textarea:!0,style:f.input,value:u,onChange:e=>{m(e.target.value)},placeholder:v.formatMessage(s.message_placeholder)}),(0,i.jsxs)("div",{style:f.footer,children:[(0,i.jsx)(a(302501).A,{isSecondaryColor:!0,isSmall:!0,isMultiline:!0,children:(0,i.jsx)(o().sA,{id:"teamInviteLinkRequestModal.caption",defaultMessage:"Your teamspace owners will approve or decline your request."})}),(0,i.jsx)(a(160432).A,{colorPalette:"blue",size:"lg",style:f.requestInvitesButton,onClick:g,children:(0,i.jsx)(o().sA,{id:"teamInviteLinkRequestModal.requestAccessButton.label",defaultMessage:"Request"})})]})]})})}},192940:(e,t,a)=>{a.d(t,{h:()=>i});var n=()=>a(590526),o=()=>a(957606);function i(e){return(0,n().K8)((()=>{var t;return void 0===e?0:(null===(t=(0,o().PF)({teamStore:e}))||void 0===t?void 0:t.totalMembersAndGuestsCount)??0}),[e])}},211825:(e,t,a)=>{a.d(t,{G:()=>s});var n=()=>a(484714),o=()=>a(590526),i=()=>a(290247);function s(e){const t=(0,n().v3)().currentUser.id;return(0,o().K8)((()=>Boolean(void 0!==t&&e.isNonGuestMember(t,i()._.getSpacePermissionGroupIds({userId:t,spaceId:e.getSpaceId()})))),[t,e])}},235741:(e,t,a)=>{a.d(t,{P:()=>s});a(296540);var n=()=>a(69708),o=()=>a(534177),i=a(474848);function s(e){if(e.canArchive)return null;const t=e.reason;switch(t){case"isNotOwnerOfTeam":return(0,i.jsx)("div",{style:{whiteSpace:"normal"},children:(0,i.jsx)(n().sA,{id:"sidebar.outlinerTeamToggleButton.cannotArchiveTooltip.notOwner",defaultMessage:"Only teamspace owners can archive teamspaces"})});case"multipleUnarchivedTeams":return(0,i.jsx)("div",{style:{whiteSpace:"normal"},children:(0,i.jsx)(n().sA,{id:"sidebar.outlinerTeamToggleButton.cannotArchiveTooltip.multipleUnarchivedTeams",defaultMessage:"To archive, make another teamspace default or archive all other teamspaces"})});case"multipleWorkspaceMembers":case"invalidUserOrSpaceView":return(0,i.jsx)("div",{style:{whiteSpace:"normal"},children:(0,i.jsx)(n().sA,{id:"sidebar.outlinerTeamToggleButton.cannotArchiveTooltip.moreThanOneMember",defaultMessage:"To archive, there must only be one member in the workspace"})});default:(0,o().HB)(t)}}},341974:(e,t,a)=>{a.r(t),a.d(t,{TeamJoinLeaveButton:()=>S});var n=a(296540),o=()=>a(135168),i=()=>a(484714),s=()=>a(590526),r=()=>a(401497),l=()=>a(100622),d=()=>a(284371),c=()=>a(511393),u=()=>a(957606),m=()=>a(515512),p=()=>a(211825),v=()=>a(631524),g=()=>a(69708),f=a(474848);const T=function(e){const{teamStore:t,from:o,navigateToTeamHomeOnJoin:r,style:l,hoveredStyle:d,icon:c,isRed:u}=e,m=(0,i().v3)(),p=(0,s().O$)(a(907258).AppStoreSidebarSpaceStore),T=(0,n.useCallback)((async()=>{p&&await a(465960).e2({environment:m,teamStore:t,currentSpaceStore:p,from:o,andNavigateToTeamHome:r??!1})}),[p,m,t,o,r]);return(0,f.jsxs)(v().p,{style:l,hoveredStyle:d,onClick:T,colorPalette:u?"red":void 0,children:[c?c():void 0,(0,f.jsx)(g().sA,{id:"outlinerTeamToggleButton.joinTeamButton",defaultMessage:"Join"})]})};var h=()=>a(655784);const b=function(e){const{teamStore:t,style:o,hoveredStyle:i}=e,[r,l]=(0,n.useState)(!1),d=(0,s().K8)((()=>t.getName()),[t]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(v().p,{style:o,hoveredStyle:i,onClick:()=>l(!0),children:(0,f.jsx)(g().sA,{id:"teamRequestButton.requestButton.label",defaultMessage:"Request"})}),(0,f.jsx)(a(149257).A,{teamStore:t,teamName:d,teamId:t.id,isModalOpen:r,onDismiss:()=>l(!1)})]})};function S(e){const{teamStore:t,style:a,hoveredStyle:n}=e,v=(0,i().v3)(),g=(0,s().K8)((()=>(0,o().f)(t)),[t]),S=(0,m().Q)({spaceStore:g}),w=(0,p().G)(t),j=(0,s().K8)((()=>t.getTeamAccessLevel()),[t]),y=(0,r().IS)((()=>({joinTeamButton:{maxHeight:26,marginInlineStart:10,paddingInlineStart:10,paddingInlineEnd:10,borderRadius:100,fontSize:13,fontWeight:d().Wy.semibold,background:l().Tj.buttonHoveredBackground,alignSelf:"center",...a},joinTeamButtonHoveredStyle:{background:l().Tj.buttonPressedBackground,...n}})),[a,n]),x=(0,s().K8)((()=>(0,u().A2)({membership:t.getRawMembership()})&&(0,c().h)(v)),[v,t]),A=!w&&"open"===j||x,O=!w&&"closed"===j;return S?null:w?(0,f.jsx)(h().A,{...e,style:y.joinTeamButton,hoveredStyle:y.joinTeamButtonHoveredStyle}):A?(0,f.jsx)(T,{...e,style:y.joinTeamButton,hoveredStyle:y.joinTeamButtonHoveredStyle}):O?(0,f.jsx)(b,{teamStore:t,style:y.joinTeamButton,hoveredStyle:y.joinTeamButtonHoveredStyle}):null}},418426:(e,t,a)=>{a.d(t,{$:()=>l});a(898992),a(354520);var n=()=>a(484714),o=()=>a(590526),i=()=>a(290247),s=()=>a(468006),r=()=>a(169626);function l(e){const t=(0,n().v3)().currentUser.id;return(0,o().K8)((()=>{if(!e.isDefined())return[];return(0,s().ri)({rawMembers:e.getRawMembership(),groupsInSpace:r().h.getAllGroups()}).filter((a=>i()._.getSpacePermissionGroupIds({userId:t,spaceId:e.getSpaceId()}).has(a.getGroupId())))}),[t,e])}},515512:(e,t,a)=>{a.d(t,{Q:()=>l});var n=()=>a(907258),o=()=>a(484714),i=()=>a(590526),s=()=>a(272509),r=()=>a(950332);function l(e){const t=function(e){const t=(0,o().v3)(),{spaceStore:a}=e;return(0,i().K8)((()=>{if(!a)return{loading:!0};if(!(0,s().I)(a))return{loading:!1,isUserTeamGuestOfSpace:!1};const e=n().default.state.sidebarSpaceViewStore;if(!e||!t.currentUser.id)return{loading:!0};const o=(0,r().v)({userId:t.currentUser.id,spaceViewStore:e});return o.isLoaded?{loading:!1,isUserTeamGuestOfSpace:o.isTeamGuestInSpace}:{loading:!0}}),[t,a])}(e);return t.loading||t.isUserTeamGuestOfSpace}},528295:(e,t,a)=>{a.d(t,{c:()=>m,Z:()=>p});var n=()=>a(907258),o=()=>a(590526),i=()=>a(741615),s=()=>a(979340),r=()=>a(483226),l=()=>a(534177),d=()=>a(597777);var c=()=>a(807778);function u({billingData:e}){var t;return function({subscriptionTier:e,subscriptionCreatedAtTime:t,useLegacyBehavior:a}){return"enterprise"===e||!("plus"!==e||!a)&&(0,l().O9)(t)&&t<d().fQ}({subscriptionTier:(0,r().AI)(),subscriptionCreatedAtTime:null==e||null===(t=e.subscription)||void 0===t||null===(t=t.startDate)||void 0===t?void 0:t.toMillis(),useLegacyBehavior:!(0,c().hG)()})}function m(e){const t=(0,o().O$)(n().AppStoreSidebarSpaceStore),a=e??t;return(0,o().K8)((()=>{const e=(null==a?void 0:a.getSubscriptionTier())??"free";return(0,s().rV)(e,"business")}),[a])}function p(){const e=(0,o().O$)(n().AppStoreSidebarSpaceStore),t=(0,i().lh)({spaceId:null==e?void 0:e.id});return(0,o().K8)((()=>{const a=(null==e?void 0:e.getSubscriptionTier())??"free";return!(0,c().hG)()&&(0,s().rV)(a,"business")||u({billingData:t})}),[e,t])}},569047:(e,t,a)=>{a.r(t),a.d(t,{OutlinerTeamOverflow:()=>de,TeamOverflowMenu:()=>ce});a(898992),a(354520),a(581454);var n=a(296540),o=()=>a(907258),i=()=>a(726637),s=()=>a(484714),r=()=>a(792485),l=()=>a(590526),d=()=>a(401497),c=()=>a(723085),u=()=>a(882722),m=()=>a(290247),p=()=>a(718827),v=()=>a(250910),g=()=>a(118307),f=()=>a(807449),T=()=>a(546926),h=()=>a(26697),b=()=>a(890492),S=()=>a(736847),w=()=>a(934999),j=()=>a(26440),y=()=>a(764781),x=()=>a(126617),A=()=>a(212727),O=()=>a(35588),I=()=>a(97835),M=()=>a(835607),B=a(474848);const C={viewBox:"0 0 16 16",fittedViewBox:"2.89 1.85 12.97 14",svg:(0,B.jsx)("path",{d:"M12.875 9.374a.44.44 0 0 1 .297.035l.513.257c.522.26 1.098.396 1.682.396h.058c.243.001.44.198.44.44v2.313a2.77 2.77 0 0 1-1.68 2.548l-1.037.445a.44.44 0 0 1-.347 0l-1.035-.445a2.78 2.78 0 0 1-1.682-2.548v-2.312a.44.44 0 0 1 .441-.44h.059c.583 0 1.16-.136 1.681-.397l.513-.257zm1.237 1.964a.294.294 0 0 0-.402.1l-1.072 1.785-.588-.686a.294.294 0 0 0-.445.382l.854.995a.294.294 0 0 0 .474-.04l1.28-2.133a.294.294 0 0 0-.101-.403M8 9.254c.511 0 1.01.06 1.483.17-.27.262-.442.623-.456 1.025A5.5 5.5 0 0 0 8 10.354c-1.854 0-3.362.903-3.961 2.073-.073.143-.052.262.047.377a.8.8 0 0 0 .594.247h4.354q.037.573.232 1.1H4.68c-.557 0-1.09-.236-1.43-.632a1.405 1.405 0 0 1-.19-1.593C3.884 10.313 5.824 9.254 8 9.254M8 1.85c.925 0 1.674.382 2.18 1.012.494.617.73 1.436.73 2.291s-.236 1.674-.73 2.29c-.506.63-1.255 1.012-2.18 1.012-.924 0-1.673-.382-2.178-1.012-.495-.616-.73-1.435-.73-2.29s.235-1.674.73-2.29C6.327 2.232 7.076 1.85 8 1.85m0 1.1c-.595 0-1.027.234-1.32.6-.305.38-.489.939-.489 1.603 0 .665.184 1.223.488 1.602.294.366.726.6 1.322.6.595 0 1.026-.234 1.32-.6.304-.38.489-.937.49-1.602 0-.664-.186-1.223-.49-1.602-.294-.366-.725-.6-1.32-.6"})},L=(0,a(340498).wt)("personShieldSmall",C,"small");var D=()=>a(617668),k=()=>a(854150),P=()=>a(979340),K=()=>a(468006),N=()=>a(69708),G=()=>a(100622),R=()=>a(534177),_=()=>a(636714),H=()=>a(12956),q=()=>a(267271),U=()=>a(946141),z=()=>a(575143),W=()=>a(986863),F=()=>a(957606),V=()=>a(632709),J=()=>a(205618),$=()=>a(475355),E=()=>a(465960);a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698);function Y({adminStatus:e,accessLevel:t,isArchivedTeam:a}){if("adminThatCanPerformPrivilegedActions"===e)return new Set(["join","joinAsOwner"]);if(a)switch(e){case"none":return new Set;case"admin":return new Set("open"===t?["join"]:[]);default:(0,R().HB)(e)}switch(t){case"open":return new Set(["join"]);case"closed":case"private":return new Set;default:(0,R().HB)(t)}}var Q=()=>a(931956),X=()=>a(605685),Z=()=>a(685781),ee=()=>a(528295),te=()=>a(976519),ae=()=>a(211825),ne=()=>a(418426),oe=()=>a(235741);const ie=["join","view","add","duplicate","leave","archive","restore"],se=["add"],re=["join","joinAsOwner","upgradeSelfToOwner","leave"],le=(0,N().YK)({add:{defaultMessage:"Add members",id:"sidebar.outlinerTeamToggleButton.addLabel"},leave:{defaultMessage:"Leave teamspace",id:"sidebar.outlinerTeamToggleButton.leaveLabel"},joinAsOwner:{defaultMessage:"Join as owner",id:"sidebar.outlinerTeamToggleButton.joinAsOwnerLabel"},joinAsMember:{defaultMessage:"Join as member",id:"sidebar.outlinerTeamToggleButton.joinAsMemberLabel"},joinTeamspace:{defaultMessage:"Join teamspace",id:"sidebar.outlinerTeamToggleButton.joinLabel"},upgradeSelfToOwner:{defaultMessage:"Become owner",id:"sidebar.outlinerTeamToggleButton.upgradeSelfToOwnerLabel"},archive:{defaultMessage:"Archive teamspace",id:"sidebar.outlinerTeamToggleButton.archiveLabel"},restore:{defaultMessage:"Restore teamspace",id:"outlinerTeamOverflow.teamActions.restoreLabel"},duplicate:{defaultMessage:"Duplicate teamspace",id:"sidebar.outlinerTeamToggleButton.duplicateLabel"},teamspaceSettings:{defaultMessage:"Teamspace settings",id:"sidebar.outlinerTeamToggleButton.ownerViewLabel"},viewMembers:{defaultMessage:"View members",id:"sidebar.outlinerTeamToggleButton.unjoinedMemberViewLabel"}});function de({teamId:e,style:t,from:a,hideJoin:s,disableHoverTooltip:r,onPopupClick:m,onPopupClose:T}){const b=(0,N().tz)(),S=(0,l().uB)(void 0,J().A),w=(0,l().O$)(o().AppStoreSidebarSpaceStore),j=(0,l().uB)(void 0,g().A),y=(0,l().K8)((()=>S.state.modalOpen),[S]),A=(0,d().IS)((()=>({buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,height:20,width:20,...t}})),[t]),O=b.formatMessage({defaultMessage:"Teamspace settings and members...",id:"sidebar.outlinerTeamToggleButton.tooltip"}),I=(0,n.useMemo)((()=>{if(w)return c().h.createChildStore(w,{table:k().yK,id:e})}),[w,e]);return w&&I?i().A.isMobile?null:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(h().m,{textWrap:!1,disableTooltip:Boolean(r),renderTooltip:()=>O,placement:"bottom",render:e=>(0,B.jsx)(v().A,{popupType:v().z.Popup,buttonPopupStore:j,alignmentToOrigin:"start",originGap:2,renderOrigin:t=>(0,B.jsx)(p().Ay,{ariaLabel:O,className:u()._Oc,style:A.buttonStyle,...e,...t,children:(0,B.jsx)(f().I,{icon:x().ellipsisSmallIcon,size:"sm",colorVariant:"secondary"})}),render:e=>(0,B.jsx)(ce,{teamStore:I,permissionsInviteStore:S,onDismiss:e.close,from:a,hideJoin:s,buttonPopupStore:j}),onClick:m,onClose:T})}),y?(0,B.jsx)(W().u,{permissionsInviteStore:S,teamStore:I}):void 0]}):null}function ce(e){const{teamStore:t,permissionsInviteStore:a,onDismiss:i,from:c,hideJoin:p,buttonPopupStore:v}=e,g=(0,s().v3)(),x=(0,d().IS)((()=>({menuItemButton:{minWidth:200},caption:{minWidth:230}})),[]),C=(0,l().O$)(o().AppStoreSidebarSpaceStore),k=(0,ae().G)(t),W=(0,l().K8)((()=>(0,K().Sh)({archived_by:t.getArchivedBy()})),[t]),J=g.currentUser.id,de=(0,l().K8)((()=>m()._.getSpacePermissionGroupIds({userId:J,spaceId:null==C?void 0:C.id})),[J,C]),ce=(0,l().K8)((()=>J?t.getTeamRoleForUser(J,de)??"none":"none"),[J,t,de]),ue=(0,l().K8)((()=>!(!t.isDefined()||!J)&&t.canAdmin()),[J,t]),me=(0,te().q)({teamId:t.id,spaceStore:C}),pe=(0,Q().X)(t),{id:ve,name:ge,isDefault:fe}=(0,l().K8)((()=>({id:t.id,name:t.getName(),isDefault:t.isDefault()})),[t]),Te=(0,X().c)(),he=(0,l().K8)((()=>(0,F().sx)({environment:g,spaceStore:C})),[C,g]),be=(0,Z().a)(c),Se=function(e){const{isDefault:t,accessLevel:a,settings:n}=(0,l().K8)((()=>({isDefault:e.isDefault(),accessLevel:e.getTeamAccessLevel(),settings:e.getSettings()})),[e]),o="private"===a,i=(0,ee().c)(),s=o&&!i?"business":void 0,r=(null==n?void 0:n.disable_public_access)||(null==n?void 0:n.disable_export)||(null==n?void 0:n.disable_guests),d=(0,ee().Z)(),c=r&&!d?"enterprise":void 0,u=(0,P().hW)([c,s]);if(t)return"isDefault";if(u)return u}(t),we="isDefault"===(je=Se)?(0,B.jsx)(N().sA,{id:"sidebar.outlinerTeamToggleButton.cannotDuplicateDefaultTeamspace",defaultMessage:"Cannot duplicate a default teamspace"}):"business"===je?(0,B.jsx)(N().sA,{id:"sidebar.outlinerTeamToggleButton.cannotDuplicateTeamspaceWithBusinessFeaturesOnDowngradedAccount",defaultMessage:"Cannot duplicate a teamspace with settings only allowed on Business plans or above"}):"enterprise"===je?(0,B.jsx)(N().sA,{id:"sidebar.outlinerTeamToggleButton.cannotDuplicateTeamspaceWithEnterpriseFeaturesOnDowngradedAccount",defaultMessage:"Cannot duplicate a teamspace with settings only allowed on Enterprise plans or above"}):void 0===je?void 0:(0,R().HB)(je);var je;const ye=(0,l().K8)((()=>t.getTeamAccessLevel()),[t]),xe=(0,ne().$)(t),Ae=(0,n.useCallback)((e=>{U().ks(g,{store:t,from:c,option:e})}),[g,t,c]),Oe=me&&!Te.canArchive,Ie=(0,l().K8)((()=>Boolean(null==C?void 0:C.canAdmin())),[C]),{joinLeaveOptionsToShow:Me,leaveOptionDisabledState:Be}=function({teamRole:e,adminStatus:t,isDefaultTeam:a,accessLevel:n,isArchivedTeam:o}){switch(e){case"owner":case"member":const i=new Set,s=!o;return s&&i.add("leave"),"owner"!==e&&"adminThatCanPerformPrivilegedActions"===t&&i.add("upgradeSelfToOwner"),{joinLeaveOptionsToShow:i,leaveOptionDisabledState:s&&a?{disabled:!0,disabledReasonKey:"defaultTeam"}:void 0};case"team_level_guest":return{joinLeaveOptionsToShow:new Set,leaveOptionDisabledState:void 0};case"none":return{joinLeaveOptionsToShow:Y({adminStatus:t,accessLevel:n,isArchivedTeam:o}),leaveOptionDisabledState:void 0};default:(0,R().HB)(e)}}({teamRole:ce,adminStatus:be?"adminThatCanPerformPrivilegedActions":Ie?"admin":"none",isArchivedTeam:W,isDefaultTeam:fe,accessLevel:ye}),Ce=Me.has("joinAsOwner"),Le=be&&!(1===Me.size&&Me.has("leave")),De=(0,l().K8)((()=>(0,F().mN)(t)),[t]),ke={add:{type:"action",show:!W&&pe,handle:()=>{a.update((e=>({...e,modalOpen:!0})))},title:le.add,icon:(0,B.jsx)(f().I,{icon:I().inviteMemberIcon})},leave:{type:"action",...Le&&{colorOverride:G().Tj.red.text.accentPrimary},show:Me.has("leave"),handle:()=>{E().JC({environment:g,teamStore:t,from:c,userGroupsInTeam:xe})},title:le.leave,disabled:Boolean(null==Be?void 0:Be.disabled),icon:(0,B.jsx)(f().I,{icon:O()._}),disabledTooltipText:"defaultTeam"===(null==Be?void 0:Be.disabledReasonKey)&&(0,B.jsx)(N().sA,{id:"sidebar.outlinerTeamToggleButton.cannotLeaveDefaulTeamTooltip",defaultMessage:"Cannot leave a default teamspace"})},join:{type:"action",show:!p&&Me.has("join"),handle:async()=>{if(C)switch(ye){case"open":await E().e2({environment:g,teamStore:t,currentSpaceStore:C,from:c,andNavigateToTeamHome:!1});break;case"closed":case"private":await E().z9({environment:g,teamStore:t,spaceStore:C,from:c,action:"joinClosedOrPrivateTeamAsMember"});break;default:(0,R().HB)(ye)}},title:Ce?le.joinAsMember:le.joinTeamspace,icon:(0,B.jsx)(f().I,{icon:D().plusIcon,colorVariant:"secondary"})},joinAsOwner:{type:"action",show:Ce,handle:()=>E().z9({environment:g,teamStore:t,spaceStore:C,from:c,action:"joinTeamAsOwner"}),title:le.joinAsOwner,icon:(0,B.jsx)(f().I,{icon:L,size:"sm"})},upgradeSelfToOwner:{type:"action",show:Me.has("upgradeSelfToOwner"),handle:()=>E().z9({environment:g,teamStore:t,spaceStore:C,from:c,action:"upgradeToOwner"}),title:le.upgradeSelfToOwner,icon:(0,B.jsx)(f().I,{icon:L,size:"sm"})},archive:{type:"action",show:!W&&ue,colorOverride:G().Tj.red.text.accentPrimary,handle:async()=>{Oe||await E().mm({teamStore:t,environment:g,from:c})},title:le.archive,disabled:Oe,disabledTooltipText:(0,oe().P)(Te),icon:(0,B.jsx)(f().I,{icon:w().archiveBoxIcon})},restore:{type:"action",show:W,handle:async()=>{ue&&De&&await E().Q8({environment:g,teamStore:t,teamName:ge,from:c})},title:le.restore,icon:(0,B.jsx)(f().I,{icon:j().w}),disabled:!De||!ue,disabledTooltipText:De?(0,B.jsx)(N().sA,{id:"outlinerTeamOverflow.restoreArchivedTeam.disabledTooltipText.notOwner",defaultMessage:"Only teamspace owners can restore archived teamspaces."}):(0,B.jsx)(N().sA,{id:"outlinerTeamOverflow.restoreArchivedTeam.disabledTooltipText.noDefaultTeam",defaultMessage:"You must have an active default teamspace to restore this {accessLevel} teamspace.",values:{accessLevel:ye}})},duplicate:{type:"action",show:!W&&he,handle:()=>{$().hX({environment:g,teamStore:t,from:c,buttonPopupStore:v})},title:le.duplicate,disabled:void 0!==Se,icon:(0,B.jsx)(f().I,{icon:y().V}),disabledTooltipText:we,caption:(0,B.jsx)(N().sA,{id:"sidebar.outlinerTeamToggleButton.duplicateCaption",defaultMessage:"Duplicates permissions and other settings but not pages and members"})},view:{type:"action",show:!W,handle:()=>E().F2({environment:g,teamId:ve,tab:V().p.Members,from:c}),title:k&&!W?le.teamspaceSettings:le.viewMembers,icon:k?(0,B.jsx)(f().I,{icon:A().gearIcon}):(0,B.jsx)(f().I,{icon:M().F})}},Pe=(Le?[{sectionName:"join/leave section",orderedOptions:re},{sectionName:"other actions",orderedOptions:ie.filter((e=>!re.includes(e)))}]:[{sectionName:"add section",orderedOptions:se},{sectionName:"other actions section",orderedOptions:ie.filter((e=>!se.includes(e)))}]).map((e=>{const t=e.orderedOptions.filter((e=>ke[e].show));if(0!==t.length)return{sectionName:e.sectionName,filteredOptions:t}})).filter(R().O9).map((e=>{const t=e.filteredOptions.map((e=>{const t=ke[e],{type:a}=t;return"action"===a?(0,q().Ls)({key:e,displayName:t.title,analyticsName:t.title.defaultMessage,svg:()=>t.icon,validators:[],closeParentMenu:!0,action:()=>{i(),Ae(e),t.handle()},render:e=>(0,B.jsx)(h().m,{placement:"left",textWrap:!1,disableTooltip:!(t.disabled&&t.disabledTooltipText),renderTooltip:()=>t.disabledTooltipText,render:a=>(0,B.jsx)(z().A,{...e,...a,svg:()=>t.icon,title:(0,B.jsx)(N().sA,{...t.title}),buttonStyle:{...x.menuItemButton,...!t.disabled&&t.colorOverride?{fill:t.colorOverride,color:t.colorOverride}:{fill:G().Tj.icon.primary,color:G().Tj.text.primary}},disabled:t.disabled,disabledFeedback:t.disabled,caption:t.caption,captionStyle:x.caption,shouldWrapCaption:!0})})}):"extensionAction"===a?(0,H().u)({key:e,displayName:t.title,analyticsName:t.title.defaultMessage,svg:()=>t.icon,width:250,validators:[],subActions:()=>t.subActionSections.map((t=>({...t,actions:t.actions.map((t=>({...t,action:a=>{i(),Ae(e),t.action(a)}})))})))}):void(0,R().HB)(a)}));return(0,q().gy)({key:e.sectionName,render:e=>(0,B.jsx)(S().A,{...e}),actions:t})})),Ke=(0,r().S)();return(0,B.jsx)(b().A,{className:u()._En,menuType:T().gu.Popup,minWidth:"100%",children:(0,B.jsx)(_().A,{context:{blocks:[],environment:g,publicEditMode:void 0,pageContext:Ke},sections:Pe,initialFocus:void 0})})}},605685:(e,t,a)=>{a.d(t,{c:()=>c});a(898992),a(354520),a(581454);var n=()=>a(907258),o=()=>a(484714),i=()=>a(590526),s=()=>a(749808),r=()=>a(433847),l=()=>a(534177),d=()=>a(240865);function c(){const e=(0,o().v3)().currentUser.id,t=(0,i().O$)(n().AppStoreSidebarSpaceViewStore),a=(0,d().V)()??1;return(0,i().K8)((()=>e&&null!=t&&t.isDefined()?(0,r().z8)({userId:e,teamsThatUserIsANonGuestMemberOf:(0,s().y)(t).map((e=>e.getModel())).filter(l().O9),spaceMembersCount:a}):{canArchive:!1,reason:"invalidUserOrSpaceView"}),[e,t,a])}},655784:(e,t,a)=>{a.d(t,{A:()=>u,v:()=>c});a(581454);var n=a(296540),o=()=>a(484714),i=()=>a(590526),s=()=>a(69708),r=()=>a(496603),l=()=>a(418426),d=a(474848);function c({teamStore:e}){const t=(0,o().v3)().currentUser.id,a=(0,i().K8)((()=>e.isDefault()),[e]),n=(0,l().$)(e);return function({isDefaultTeam:e,isOnlyTeamOwner:t,userGroupsInTeam:a}){if(e)return(0,d.jsx)(s().sA,{id:"teamBrowser.teamCard.leaveTeam.defaultTeamTooltip",defaultMessage:"You can’t leave this teamspace because everyone in the workspace must be a member"});if(t)return(0,d.jsx)(s().sA,{id:"teamJoinLeaveButton.leaveTeam.onlyOwnerTooltip",defaultMessage:"Invite another teamspace owner to leave this teamspace"});if(a.length>0)return(0,d.jsx)(s().sA,{id:"teamBrowser.teamCard.leaveTeam.groupTooltip",defaultMessage:"{groupNames, plural, one {You can’t leave this teamspace because you’re a member of multiple groups, {groupNames}.} other {You can’t leave this teamspace because you’re a member of the group, {groupNames}.}}",values:{groupNames:r().oE(a.map((e=>e.name))).join()}})}({isDefaultTeam:a,isOnlyTeamOwner:(0,i().K8)((()=>{if(!e.isReady())return!1;const{ownerUserIds:a,ownerGroupIds:n}=e.getAllOwnerIds();return Boolean(t&&e.canAdmin()&&a.length+n.length===1)}),[e,t]),userGroupsInTeam:n})}const u=function(e){const{teamStore:t,from:r,onLeavingTeam:u,style:m,hoveredStyle:p,icon:v,isRed:g,placement:f,alignment:T,buttonInternals:h}=e,b=(0,o().v3)(),S=(0,i().O$)(a(907258).AppStoreSidebarSpaceStore),w=(0,l().$)(t),j=(0,n.useCallback)((async()=>{if(!S)return;await a(465960).JC({environment:b,teamStore:t,from:r,userGroupsInTeam:w})&&(null==u||u())}),[S,b,t,r,w,u]),y=(0,d.jsx)(s().sA,{id:"teamJoinLeaveButton.leaveTeam.enabledTooltip",defaultMessage:"Click to leave teamspace"}),x=c({teamStore:t}),A=Boolean(x),O=A?x:y;return(0,d.jsx)(a(26697).m,{style:A?{width:240}:void 0,disableTooltip:!Boolean(O),renderTooltip:e=>(0,d.jsx)("div",{...e,children:O}),textWrap:A,placement:f,alignment:T,render:e=>(0,d.jsxs)(a(631524).p,{...e,style:m,hoveredStyle:p,onClick:j,disabled:A,disabledFeedback:A,colorPalette:g?"red":void 0,children:[v?v():void 0,h||(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(a(807449).I,{icon:a(73956).checkmarkFillSmallIcon,size:"sm",style:{marginInlineEnd:2}}),(0,d.jsx)(s().sA,{id:"teamBrowser.teamCard.button.joined",defaultMessage:"Joined"})]})]})})}},931956:(e,t,a)=>{a.d(t,{X:()=>l});var n=()=>a(590526),o=()=>a(483226),i=()=>a(534177),s=()=>a(211825),r=()=>a(43450);function l(e){const t=(0,r().R)(e),a=(0,s().G)(e);return(0,n().K8)((()=>{if(!(0,o().El)())return!1;const n=e.getSetting("invite_access");switch(n){case void 0:return!1;case"team_members":return a;case"team_owners":return t;default:(0,i().HB)(n)}}),[e,t,a])}},986863:(e,t,a)=>{a.d(t,{u:()=>i});var n=()=>a(79926);const o=new(n().O2)("teamPermissionsInviteWithModal",(async()=>await Promise.all([a.e(75134),a.e(35530),a.e(9773),a.e(36556),a.e(55373),a.e(36192),a.e(40537),a.e(71562),a.e(96346),a.e(44711),a.e(53321),a.e(51220),a.e(16471),a.e(37353),a.e(37571),a.e(29151),a.e(40118),a.e(50397),a.e(62475),a.e(3151),a.e(98629),a.e(22926),a.e(22900),a.e(42838),a.e(85128),a.e(49889),a.e(20108),a.e(46174),a.e(27992),a.e(63452),a.e(66249),a.e(92845),a.e(87249),a.e(79022),a.e(44854),a.e(34877),a.e(46414),a.e(11676),a.e(61165),a.e(47668),a.e(94522),a.e(44584),a.e(24587),a.e(67494),a.e(3651),a.e(38293),a.e(40992),a.e(88455),a.e(64556),a.e(33893),a.e(91793),a.e(55162),a.e(71003),a.e(32370),a.e(26264),a.e(36437),a.e(50363),a.e(42660),a.e(44590),a.e(55113),a.e(85071),a.e(7914),a.e(25588),a.e(68637),a.e(23640),a.e(72252),a.e(93134),a.e(12452),a.e(52871),a.e(29351),a.e(18825),a.e(71853),a.e(93049),a.e(22582),a.e(18636),a.e(87289),a.e(16060),a.e(34281),a.e(48376),a.e(35279),a.e(80229),a.e(77754),a.e(71309),a.e(74562),a.e(39986),a.e(47431),a.e(47160),a.e(76677),a.e(68609),a.e(37384),a.e(15553),a.e(77345),a.e(67720),a.e(37759),a.e(41423),a.e(13955),a.e(42056),a.e(14699),a.e(57924),a.e(5181),a.e(3261),a.e(19456),a.e(17729),a.e(45147),a.e(65375),a.e(32116),a.e(94995),a.e(98339),a.e(51240),a.e(82641),a.e(20029),a.e(68395),a.e(81803),a.e(96654),a.e(68643),a.e(32625),a.e(63687),a.e(95885),a.e(27083),a.e(78999),a.e(11424),a.e(40119),a.e(54742),a.e(38946),a.e(90880),a.e(49175),a.e(8852),a.e(5331),a.e(92924),a.e(71381),a.e(1947),a.e(96385),a.e(80326),a.e(53352),a.e(2373),a.e(5315),a.e(995),a.e(76690),a.e(60713),a.e(31106),a.e(63248),a.e(54719),a.e(48570),a.e(78862),a.e(54234),a.e(85160),a.e(15381),a.e(50525),a.e(15922),a.e(77651),a.e(51204),a.e(34974),a.e(58672),a.e(95103),a.e(58071),a.e(75681)]).then(a.bind(a,487443)))),i=(0,n()._h)(o,(e=>e.TeamPermissionsInviteWithModal))}}]);