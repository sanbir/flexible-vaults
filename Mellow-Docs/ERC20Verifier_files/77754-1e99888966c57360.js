"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[61505,77754],{30858:(e,t,r)=>{r.d(t,{HN:()=>l,Ki:()=>c,a7:()=>d,s1:()=>f,yX:()=>u});r(898992),r(737550),r(296540);var n=()=>r(907258),o=()=>r(740461),s=()=>r(166386),i=()=>r(69708),a=r(474848);function c(e){if(!e)return;const t=(0,s().b_)(e);return(0,a.jsx)(i().sA,{id:"coupon.duration.months",defaultMessage:"{formattedMonths} months",values:{formattedMonths:(0,a.jsx)(i().Gr,{value:t.months})}})}function l(e,t,r,n){return n&&(0,o().FV)(n.campaign,t)?n:r&&e===t&&(0,o().FV)(r.campaign,e)?r:void 0}function u(e,t,r){if(e&&(0,s().rM)(e)&&function(e,t,r){const n=(0,o().MN)(e.offer.campaign,t),s=!!r&&(0,o().sZ)(e.offer.campaign,r);return n&&s}(e,t,r))return(0,s().kd)(e)}function d(e){var t;const r=null===(t=n().default.state.currentUserSettingsStore)||void 0===t?void 0:t.getSettings();return((null==r?void 0:r.offer_dismissal_timestamps)??[]).some((t=>t.campaign===e))}function f(e){return(0,s().b_)(e).days}},38679:(e,t,r)=>{r.d(t,{P:()=>o});r(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"0.37 6.08 19.25 8.5",svg:(0,r(474848).jsx)("path",{fillRule:"evenodd",d:"M14.5 6.081c1.576 0 2.938.968 3.59 2.375H19a.625.625 0 0 1 0 1.25h-.543q.042.307.043.625c0 2.347-1.79 4.25-4 4.25s-4-1.903-4-4.25q.001-.547.124-1.056a1.53 1.53 0 0 0-1.249 0q.123.507.125 1.056c0 2.347-1.79 4.25-4 4.25s-4-1.903-4-4.25q0-.319.043-.625H1a.625.625 0 0 1 0-1.25h.91c.652-1.407 2.014-2.375 3.59-2.375 1.444 0 2.709.814 3.412 2.033a2.78 2.78 0 0 1 2.174 0c.703-1.22 1.97-2.033 3.414-2.033m-9 1.25c-1.448 0-2.75 1.27-2.75 3s1.302 3 2.75 3 2.75-1.27 2.75-3-1.302-3-2.75-3m9 0c-1.448 0-2.75 1.27-2.75 3s1.302 3 2.75 3 2.75-1.27 2.75-3-1.302-3-2.75-3",clipRule:"evenodd"})},o=(0,r(340498).wt)("eyeglasses",n,"default")},55334:(e,t,r)=>{r.d(t,{BS:()=>i,BusinessTrialEndingModalStore:()=>s,HL:()=>o,jz:()=>a});var n=()=>r(757695);const o=n().Store.createValue({open:!1,openedFrom:void 0},{name:"BusinessTrialStartModalStore"}),s=n().Store.createValue({open:!1,openedFrom:void 0,recentPageStores:[],verifiedPageStores:[],teamStores:[],workspaceUserStores:[],connectedApps:[],numAiMeetingMinutes:0,modalState:"initial"},{name:"BusinessTrialEndingModalStore"}),i=n().Store.createValue({open:!1,openedFrom:void 0,connectedApps:[],teamStores:[],pageStores:[],onSecondaryButtonClick:void 0},{name:"BusinessTrialLossAversionModalStore"}),a=n().Store.createValue({open:!1,connectedApps:[],teamStores:[],pageStores:[]},{name:"BusinessTrialExplorePlanModalStore"})},133043:(e,t,r)=>{r.d(t,{P:()=>o});r(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.5 3.05 15 13.82",svg:(0,r(474848).jsx)("path",{d:"M9.08 3.341a1.625 1.625 0 0 1 1.84 0l5.875 4.035c.441.304.705.805.705 1.34v6.034a2.125 2.125 0 0 1-2.125 2.125h-2.716a1.625 1.625 0 0 1-1.625-1.625v-4.065H8.967v4.065c0 .898-.728 1.625-1.625 1.625H4.625A2.125 2.125 0 0 1 2.5 14.75V8.716c0-.535.264-1.036.705-1.34zm1.132 1.03a.375.375 0 0 0-.424 0L3.913 8.407a.38.38 0 0 0-.163.309v6.034c0 .483.392.875.875.875h2.716a.375.375 0 0 0 .375-.375v-4.19c0-.621.503-1.125 1.125-1.125h2.319c.62 0 1.124.504 1.124 1.125v4.19c0 .207.168.375.375.375h2.716a.875.875 0 0 0 .875-.875V8.716c0-.124-.06-.24-.163-.31z"})},o=(0,r(340498).wt)("home",n,"default")},135599:(e,t,r)=>{r.d(t,{W:()=>K});r(517642),r(658004),r(733853),r(845876),r(432475),r(515024),r(731698),r(898992),r(823215),r(354520),r(581454);var n=r(296540),o=()=>r(755531),s=()=>r(242422),i=()=>r(726637),a=()=>r(395361),c=()=>r(484714),l=()=>r(590526),u=()=>r(721908),d=()=>r(79926),f=()=>r(929219),v=()=>r(711339),p=()=>r(295633),m=()=>r(732810),S=()=>r(302996),g=()=>r(591779),h=()=>r(206267),y=()=>r(519831),b=()=>r(96689),_=()=>r(620333),k=()=>r(245241),I=()=>r(496603),T=()=>r(973647),C=()=>r(534177),M=()=>r(222917),w=()=>r(769864),B=()=>r(383070),R=()=>r(518362),E=()=>r(825972),x=()=>r(466088),A=()=>r(798693),P=()=>r(487542),q=()=>r(113416),V=()=>r(470928),O=()=>r(475553),D=()=>r(106628),L=()=>r(361330),F=()=>r(499233),z=()=>r(671199),H=()=>r(326589),U=()=>r(968172),N=()=>r(558407),j=()=>r(873049),W=()=>r(770167);function K(e){var t;const{options:r,...h}=e,{overrideSearchSessionId:K,overrideSpaceStore:Y,disable:Z,debug:$,onLocalSearchBegin:Q}=r,{type:ee,query:te="",source:re,limit:ne,peopleBlocksToInclude:oe}=h,se=ne??20,ie=(0,c().v3)(),ae=(0,g().ZC)(te),ce=(0,g().ZC)(e.filters),le=(0,g().ZC)(e.sort),ue=(0,g().ZC)(e.options.searchExperimentOverrides),de=(0,g().ZC)($),fe=(0,n.useRef)(0),ve=(0,n.useRef)(!0),pe=(0,l().O$)(f().e),me=!pe,Se=(0,O().y)(),ge=(0,n.useRef)(se),[he,ye]=(0,n.useState)(G()),be=(0,l().K8)((()=>K&&K!==he.searchSessionId?(ye((e=>({...e,searchSessionId:K}))),K):he.searchSessionId),[he,K]);(0,n.useEffect)((()=>{fe.current=0}),[be]);const _e=(0,n.useRef)(),ke=(0,n.useRef)(new Map),Ie=(0,n.useRef)(void 0),Te=(0,l().K8)((()=>B().zD.isSearchModalV2Enabled()),[]),Ce=(0,n.useCallback)((()=>{_e.current&&(v().default.measure(_e.current,{environment:ie,data:{query_length:te.length,source:re,search_session_id:be,is_search_modal_v2:Te}}),_e.current=void 0)}),[ie,te.length,re,be,Te]),Me=(0,n.useCallback)((e=>{const t=Ie.current;if(void 0!==t){const r=Date.now()-t;ke.current.set(e,r)}}),[]),we=(0,n.useCallback)((e=>ke.current.get(e)),[]),{localResults:Be,serverResults:Re,isResultsLoading:Ee,numTotalLocalResults:xe,numTotalServerResults:Ae}=he,Pe=(0,l().K8)((()=>Y||(0,o().S)()),[Y]),qe=(0,l().K8)((()=>{if(me||Ee&&ve.current)return Be;let e=function(e){const{localResults:t,serverResults:r}=e,n=t.map((e=>e.store.id)),o=new Set(n),s=r.filter((e=>!o.has(e.store.id)));return[...t,...s]}({localResults:Be,serverResults:Re});return ee===k().Vz.CollectionsInSpace&&(e=J(e)),e}),[me,Ee,Be,ee,Re]),Ve=(0,l().K8)((()=>"on"===s().default.getEligibleGroup({experimentId:"search-use-local-reranker-layered",parameter:"shouldUseLocalReranker",defaultGroup:"control"})),[]),Oe=(0,n.useMemo)((()=>e.sort?e.sort:{field:"relevance"}),[e.sort]),De=(0,n.useMemo)((()=>{var t;const n=(t=>{switch(e.type){case k().Vz.BlocksInCollection:return e.collectionId;case k().Vz.BlocksInParent:return e.parentId;default:return null===(t=e.filters)||void 0===t?void 0:t.parentId}})(),o={...e.filters,navigableBlockContentOnly:void 0!==(null===(t=e.filters)||void 0===t?void 0:t.navigableBlockContentOnly)?e.filters.navigableBlockContentOnly:!0===r.isTitleOnly,parentId:n};return(0,k().N2)(o)}),[r.isTitleOnly,e]),Le=(0,n.useCallback)(((e,t)=>{const{isSuccess:r,totalResultsCount:n,localCacheMetadata:o,query:s}=t;v().default.measure(e,{environment:ie,data:{start_time:e.startTime,success:r,surface:re,num_results:n,search_session_id:be,local_cache_metadata:o,local_cache_readiness_timings:(0,F().Yp)(),query_length:s.length}})}),[ie,re,be]),Fe=(0,n.useCallback)(((e,t)=>{const{isSuccess:r,totalResultsCount:n,query:o}=t;v().default.measure(e,{environment:ie,data:{start_time:e.startTime,success:r,surface:re,num_results:n,search_session_id:be,search_session_flow_number:fe.current,query_length:o.length}})}),[ie,re,be]),ze=(0,n.useMemo)((()=>{if(r.disableLocalSearch)return!1;const t=(0,P().B)(te),n=e.options.searchExperimentOverrides,o="on"===(null==n?void 0:n["search-no-local-blending"]);return"trash"===re||(0,q().B)({isLocalBlendingDisabled:o,queryOperations:t,queryText:te,querySort:Oe})}),[r.disableLocalSearch,e.options.searchExperimentOverrides,te,Oe,re]),He=(0,l().K8)((()=>z().A.state.localSearchableBlocksCache),[]),Ue=(0,d().fJ)(D().T.searchActions),Ne=(0,n.useCallback)((t=>{var r;const{query:n,spaceStore:o}=t;if(!ze)return ye((e=>({...e,localResults:[],numTotalLocalResults:0}))),void(null==Q||Q({query:n}));null==Q||Q({query:n});const s=v().default.mark("rum.local_quick_search_query"),i=Se&&!pe&&(0,C().Xk)(k().Iy,re);if("resolved"!==Ue.status)return;const a=ee===k().Vz.CollectionsInSpace,c=a&&0===n.length?function(e){const{spaceStore:t,environment:r}=e,n=(0,R().F)({currentUserId:r.currentUser.id,spaceId:t.id}).map((e=>{const r=m().m.createChildStore(t,{table:y().Vl,id:e}).getParentBlockStore();if(null==r?void 0:r.pathIsAccessibleAndAlive())return r}));return(0,I().oE)(n)}({environment:ie,spaceStore:o}).map(((e,t)=>({store:e,originalPosition:t,id:e.id,score:0,spaceId:e.getSpaceId(),sources:[k().Ni.Local],featureGroups:[],serverEventProperties:void 0}))):[],l=(0,F().PE)({environment:ie,overrideCurrentUserId:ie.currentUser.id,overrideSpaceId:o.id,overrideLocalSearchableBlocksCache:He}),u=(0,A().E)(ie).hasPublicAccessPermission,{filters:d,excludedBlockIds:f}=(0,_().CT)({peopleBlocksToInclude:oe,filters:De,excludedBlockIds:void 0,spaceIdCreator:ie.idCreator.getSpaceIdCreatorSync(o.id)}),p=(0,W().S6)({environment:ie,parentStore:o,spaceStore:o,isOnline:pe,requestInput:{query:{text:n,filters:{...d,blockTypes:X({blockTypes:null===(r=e.filters)||void 0===r?void 0:r.blockTypes,queryType:ee}),isOfflineOnly:i},sort:{field:"relevance"}},limit:me?se:Math.min(se,5)},localSearchCache:He,forceLocalCacheUsage:"trash"===re,shouldUseNewRerankerDebugOverrideEnabled:Ve,shouldLimitLocalResultsWhenOnline:!me,hasPublicAccessPermission:u}),S=p&&T().Q.unwrapOr(p,void 0),g=(null==S?void 0:S.results)??[],b=(null==S?void 0:S.total)??0;let M=I().hS([...c,...g],(e=>(0,j().a)(e)));M=a?J(M):M,M=M.filter((e=>!f.includes(e.id)&&!(h.excludedBlockIds??[]).includes(e.id)&&(null==Pe?void 0:Pe.id)===e.spaceId)),ye((e=>e.query!==n?e:(ct.current=M.map((e=>e.id)),Le(s,{query:n,isSuccess:Boolean(S),totalResultsCount:b,localCacheMetadata:l}),{...e,localResults:M,isResultsLoading:!me&&e.isResultsLoading,numTotalLocalResults:b})))}),[Se,pe,re,Ue.status,ee,ie,He,De,null===(t=e.filters)||void 0===t?void 0:t.blockTypes,me,Pe,se,Ve,Le,h.excludedBlockIds,ze,oe,Q]),je="quick_find"===re?40:L().GR,We=(0,a().Y)(Ne,je),Ke=(0,n.useCallback)((t=>{var r,n,o,s,a;const{result:c,isMetaClick:l,context:u}=t,d=void 0!==c.workflowData;M().sg(ie,{...c.serverEventProperties&&c.serverEventProperties["server-query"]?{"server-query":c.serverEventProperties["server-query"]}:{},queryText:c.serverEventProperties&&c.serverEventProperties["server-query"]&&c.serverEventProperties["server-query"].query?c.serverEventProperties["server-query"].query:te,sources:c.sources,localSources:Array.from(c.localSource||new Set),searchSessionId:be,aiSessionId:void 0,traceId:void 0,searchSessionFlowNumber:fe.current,context:u,queryStringLength:te.length,totalSearchResultCount:xe+Ae,numLocalResults:Be.length,numTotalLocalResults:xe,isMobile:i().A.isMobile,isMetaClick:l,hasFilters:Boolean(e.filters),originalPosition:c.originalPosition,selectedItemIndex:c.originalPosition,selectedSearchResultMetadata:{blockId:c.id,blockType:d?"workflow":c.store.getModel().type},searchSource:re,verificationState:(0,V().i1)(c.store),numKeystrokes:null===(r=t.searchSessionMetrics)||void 0===r?void 0:r.numKeystrokes,timeToSelectMs:null===(n=t.searchSessionMetrics)||void 0===n?void 0:n.timeToSelectMs,timeFromFirstKeyStrokeToSelectMs:null===(o=t.searchSessionMetrics)||void 0===o?void 0:o.timeFromFirstKeyStrokeToSelectMs,hadMetaClick:null===(s=t.searchSessionMetrics)||void 0===s?void 0:s.hadMetaClick,timeToRenderResult:null===(a=t.searchSessionMetrics)||void 0===a?void 0:a.timeToRenderResult})}),[ie,xe,Ae,Be,te,be,fe,e.filters,re]),Ge=ae===te,Xe=I().n4(ce,e.filters),Je=I().n4(le,e.sort),Ye=I().n4(ue,e.options.searchExperimentOverrides),Ze=de===$,$e=Xe&&Ge&&Je&&Ye&&Ze,Qe=(0,l().K8)((()=>{const{publicAccessPermissionAncestorBlockId:e}=(0,A().E)(ie);return void 0!==e&&((0,x().w)(ie)||(0,H().g)())}),[ie]),et=0===te.length,tt=Boolean(ae&&et),rt=!Z&&(Pe||Qe)&&!$e,nt=!(Xe&&Je&&Ye&&Ze),ot=tt||!Ge||nt,st=et||nt,it=(0,n.useRef)(!1),at=(0,n.useRef)([]),ct=(0,n.useRef)([]),lt=(0,l().K8)((()=>{if("mention_menu"!==re)return;return N().A.getMentionedIds(ie.currentUser.id)}),[ie.currentUser.id,re]),ut=(0,n.useCallback)((async t=>{_e.current=v().default.mark("time_to_render_search_results"),void 0===Ie.current&&(Ie.current=Date.now());const r=v().default.mark("rum.server_quick_search_query"),{query:n,spaceStore:o,size:s}=t,i=null==o?void 0:o.id;if(me)return;const a=!ve.current&&Xe?at.current:[],c=I().sb([...h.excludedBlockIds??[],...ct.current||[]]),{finalFilters:l,finalExcludedBlockIds:u,isPublicAncestorSearch:d,publicAccessPermissionAncestorBlockId:f}=function(e){const{environment:t,peopleBlocksToInclude:r,filters:n,serverExcludedBlockIds:o,spaceId:s}=e,{filters:i,excludedBlockIds:a}=s?(0,_().CT)({peopleBlocksToInclude:r,filters:n,excludedBlockIds:o,spaceIdCreator:t.idCreator.getSpaceIdCreatorSync(s)}):{filters:n,excludedBlockIds:o},{shouldIncludePublicPages:c,isPublicAncestorSearch:l,publicAccessPermissionAncestorBlockId:u}=(0,W().dB)({environment:t,spaceId:s}),d=c?{...i,includePublicPagesWithoutExplicitAccess:!0}:i;return{finalFilters:d,finalExcludedBlockIds:a,isPublicAncestorSearch:l,publicAccessPermissionAncestorBlockId:u}}({environment:ie,peopleBlocksToInclude:oe,filters:De,serverExcludedBlockIds:c,spaceId:i}),m=ee===k().Vz.BlocksInSpace&&d&&f?{type:k().Vz.BlocksInAncestor,ancestorId:f}:i?{spaceId:i}:void 0;if(!m)return void ye((e=>({...e,isResultsLoading:!1})));fe.current+=1;const g={...h,...m,excludedBlockIds:u,query:n,sort:Oe,filters:l,recentlyMentionedPageIds:lt,searchSessionFlowNumber:fe.current,searchSessionId:be,limit:s,recentPagesForBoosting:i?(0,E().cs)(U().A.getWithoutSubscribing(i)):[],ignoresHighlight:"quick_find"!==re||!0===De.navigableBlockContentOnly,searchExperimentOverrides:e.options.searchExperimentOverrides,debug:$},y=await w().callApi({eventName:"search",environment:ie,data:g});if(!y||"failed"===y.type)return void ye((e=>({...e,isResultsLoading:!1})));const T=y.data.total,M=(0,C().MU)((0,C().WP)(y.data.trackEventProperties).map((([e,t])=>[`server-${e}`,t]))),B=y.data.results.slice(0,s).map(((e,t)=>{const r=o??new(S().SpaceStore)(ie,{table:b().NX,id:e.spaceId}),n=p().B.createChildStore(r,{id:e.id,spaceId:e.spaceId,table:"block"}),s=e.terms;return{store:n,originalPosition:t,...e,serverEventProperties:M,terms:s}}));it.current=!(T<s);const R=I().hS([...a,...B],(e=>(0,j().a)(e)));at.current=R,ye((e=>e.query!==n?e:(Fe(r,{query:n,isSuccess:"success"===y.type,totalResultsCount:T}),{...e,serverResults:R,isResultsLoading:!1,numTotalServerResults:T,debugInfo:y.data.debug})))}),[me,Xe,h,e.options.searchExperimentOverrides,Oe,De,lt,be,re,ie,Fe,$,oe,ee]),dt=(0,n.useCallback)((e=>{if(Z||!Pe||!it.current||Ee||!pe)return;const t=e??20;ge.current+=t,it.current=!1,ve.current=!1,ye((e=>({...e,isResultsLoading:!0}))),ut({query:te,spaceStore:Pe,size:ge.current})}),[Pe,Z,ut,pe,Ee,te]),ft="quick_find"===re?100:L().ab,vt=(0,u().d)(dt,ft),pt=(0,a().Y)(ut,L().ab);return(0,n.useEffect)((()=>{ot&&(at.current=[],ke.current.clear(),Ie.current=void 0,ge.current=se,it.current=!0,ye((e=>{const t=st?[]:e.localResults;return{...G(),localResults:t,numTotalLocalResults:t.length,searchSessionId:e.searchSessionId}}))),rt&&(ve.current=!0,ye((e=>({...e,isResultsLoading:!0,query:te}))),Ie.current=Date.now(),Pe&&We({query:te,spaceStore:Pe}),pt({query:te,spaceStore:Pe,size:ge.current}))}),[Pe,We,pt,se,te,rt,ot,re,Ge,st]),{results:qe,isResultsLoading:Ee,searchSessionId:be,fetchAdditionalServerResultsOnChange:!Z&&!me&&it.current&&$e?vt:void 0,searchSessionFlowNumber:fe.current,hasMoreResults:it.current,debugInfo:he.debugInfo,searchAnalytics:{trackSelectSearchItem:Ke,endTimeToRenderServerResultsTiming:Ce,setResultRenderTime:Me,getResultRenderTime:we}}}function G(){return{query:void 0,localResults:[],numTotalLocalResults:0,serverResults:[],numTotalServerResults:0,searchSessionId:(0,h().JW)(),isResultsLoading:!1,debugInfo:void 0}}function X(e){const{blockTypes:t,queryType:r}=e;switch(r){case k().Vz.CollectionsInSpace:return["collection_view","collection_view_page"];case k().Vz.BlocksInCollection:return["page","collection_view_page"];case k().Vz.BlocksInSpace:default:return t??[]}}function J(e){const t=new Set;return e.filter((e=>{const r=e.store,n=(null==r?void 0:r.getCollectionStores())??[];if(n.every((e=>t.has(e.id))))return!1;for(const o of n)t.add(o.id);return!0}))}},206867:(e,t,r)=>{r.d(t,{J:()=>s});r(296540);var n=r(474848);const o={viewBox:"0 0 20 20",fittedViewBox:"1.27 3.52 17.42 14.36",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M9.63 8.478a.626.626 0 0 1 .787.08l2.5 2.5.08.098a.626.626 0 0 1-.866.867l-.099-.08-1.407-1.408v6.715a.625.625 0 1 1-1.25 0v-6.766l-1.458 1.458a.626.626 0 0 1-.885-.884l2.5-2.5z"}),(0,n.jsx)("path",{d:"M10.45 3.525a6.474 6.474 0 0 1 6.474 6.42 3.495 3.495 0 0 1-1.544 6.526l-.18.005-.039-.001h-3.286v-1.25h3.245l.026-.001h.059a2.244 2.244 0 0 0 .848-4.318l-.411-.169.024-.443q.01-.155.01-.294A5.226 5.226 0 0 0 5.25 9.49l-.047.483-.478.074a2.606 2.606 0 0 0-2.2 2.574l.012.253a2.605 2.605 0 0 0 2.372 2.34l.075.008.012.004h3.129v1.25H4.929a1 1 0 0 1-.175-.02A3.854 3.854 0 0 1 1.28 12.81l-.006-.189a3.86 3.86 0 0 1 2.793-3.707 6.476 6.476 0 0 1 6.383-5.389m4.799 12.942h.006l.008-.001z"})]})},s=(0,r(340498).wt)("cloudArrowUp",o,"default")},261403:(e,t,r)=>{r.d(t,{R:()=>s});r(296540);var n=r(474848);const o={viewBox:"0 0 20 20",fittedViewBox:"2.62 2.62 15.26 15.26",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M8.875 5.75c.345 0 .625.28.625.625V8.25h1.875a.625.625 0 1 1 0 1.25H9.5v1.875a.625.625 0 1 1-1.25 0V9.5H6.375a.625.625 0 1 1 0-1.25H8.25V6.375c0-.345.28-.625.625-.625"}),(0,n.jsx)("path",{d:"M8.875 2.625a6.25 6.25 0 1 0 3.955 11.09l3.983 3.982a.625.625 0 1 0 .884-.884l-3.983-3.982a6.25 6.25 0 0 0-4.84-10.205m-5 6.25a5 5 0 1 1 10 0 5 5 0 0 1-10 0"})]})},s=(0,r(340498).wt)("magnifyingGlassPlus",o,"default")},261505:(e,t,r)=>{r.r(t),r.d(t,{closeBusinessTrialEndingModal:()=>b,closeBusinessTrialExplorePlanModal:()=>T,closeBusinessTrialLossAversionModal:()=>k,closeBusinessTrialStartModal:()=>g,createBusinessTrial:()=>C,determineMessageEligibility:()=>B,determineShouldShowTrialEndingModal:()=>R,getBusinessTrialUsingOffersReceived:()=>M,getTrialNudgeMessageKeyForDayWithOffer:()=>w,openBusinessTrialEndingModal:()=>h,openBusinessTrialExplorePlanModal:()=>I,openBusinessTrialLossAversionModal:()=>_,openBusinessTrialStartModal:()=>S,updateBusinessTrialEndingModalState:()=>y});r(16280);var n=()=>r(906745),o=()=>r(726637),s=()=>r(795523),i=()=>r(323063),a=()=>r(166386),c=()=>r(61844),l=()=>r(934068),u=()=>r(769864),d=()=>r(848701),f=()=>r(30858),v=()=>r(55334),p=()=>r(981046),m=()=>r(589531);function S(e){o().A.isMobile||v().HL.setState({open:!0,...e})}function g(){v().HL.update((e=>({...e,open:!1})))}function h(e){o().A.isMobile||v().BusinessTrialEndingModalStore.update((()=>({modalState:"initial",...e,open:!0})))}function y(e){v().BusinessTrialEndingModalStore.update((t=>({...t,modalState:e})))}function b(){v().BusinessTrialEndingModalStore.update((e=>({...e,open:!1,modalState:"initial"})))}function _(e){v().BS.setState({...e,open:!0})}function k(){v().BS.update((e=>({...e,open:!1})))}function I(e){v().jz.setState({open:!0,...e})}function T(){v().jz.update((e=>({...e,open:!1})))}async function C(e){var t;const{billingData:r,environment:o,spaceStore:s,from:a,memberCount:c,prices:l,offerToApply:u}=e;if(!(s&&a&&r&&void 0!==c&&u))return{success:!1,error:"Invalid arguments"};const d=e.nowForTesting??n().DateTime.now(),v=c,S={product:"business",interval:"month",currency:p().H.state.selectedCurrencyCode??"USD"},g=(0,i().vk)(l,S),h=(0,i().vH)({items:(null===(t=r.subscription)||void 0===t?void 0:t.items)??[],trialEnd:d.plus({days:(0,f().s1)(u)})},{price:g,quantity:v}),y=u.campaign;try{return await(0,m().n)({environment:o,spaceStore:s,from:a,desiredState:h,trialData:{id:y,from:a}}),{success:!0,error:void 0}}catch(b){return{success:!1,error:b instanceof Error?b.message:void 0}}}async function M(e){const{billingData:t,environment:r,spaceStore:n}=e,o=n.getSpaceId();if(!t||!(0,s().TB)(t)||!n.canAdmin())return;const i=await u().callCellCompatibleApi({eventName:"getCustomerOffersReceived",environment:r,data:{spaceId:o},cellNavigation:{cellId:void 0,spaceId:o}});return"failed"!==i.type?(0,c().Jd)(i.data):void 0}async function w(e){const{currentTrialDayElapsed:t,environment:r,billingData:n,spaceStore:o}=e,i=await M({environment:r,billingData:n,spaceStore:o});if(!i)return!1;const c=(0,a().b_)(i.offer).days;if(!c)return!1;const l=(0,d().tk)({daysElapsed:t,trialLength:c,trialCampaign:i.offer.campaign});if(!l)return!1;if(!(0,a().Vm)(i))return!1;const u=(0,s().DS)(n),f=(0,a().Si)(i,u);return("onboardingIntro"!==l||0!==f||"onboarding"===(null==i?void 0:i.entrypoint))&&f===t}async function B(e,t){const{billingData:r,environment:n,spaceStore:o}=t;if(!r)return!1;const i=(0,s().DS)(r),c=await M({environment:n,billingData:r,spaceStore:o});if(!c)return!1;const l=(0,a().Vm)(c);if(!l)return!1;const u=Math.floor(i.startOf("day").diff(l.startOf("day"),"days").days),f=(0,d().BF)(e,(0,a().b_)(c.offer).days);return("onboardingIntro"!==e||0!==u||"onboarding"===(null==c?void 0:c.entrypoint))&&u===f}function R(e){const{billingData:t,businessTrialOffer:r,spaceViewSettings:o}=e,{business_trial_ending_modal_last_shown_at:i}=o??{};if(!t)return!1;const c=(0,s().DS)(t);if(function(e,t){if(!e)return!1;const r=n().DateTime.fromMillis(e);return r.startOf("day").equals(t.startOf("day"))}(i,c))return!1;if("business"===(0,s().AW)(t)||"enterprise"===(0,s().AW)(t))return!1;if(!r)return!1;if((0,d().od)(r,c,o))return!1;if((0,d().z2)({billingData:t})||void 0===r)return!1;if((0,a().nb)(r))return!1;const u=r.offer.duration.days;if(void 0===u)return!1;let f;try{f=(0,d().rE)(u)}catch{f=void 0}return void 0!==f&&(0,l().tz)(r,f,c)||(0,d().XF)(r,c)||(0,l().V9)(r,c)}},282385:(e,t,r)=>{r.d(t,{q:()=>n});const n=r(757695).Store.createValue({open:!1},{name:"AiUsageCheckoutModalStore"})},388182:(e,t,r)=>{r.d(t,{A:()=>n});const n=r(757695).Store.createValue({open:!1},{name:"ConfirmOverwriteModalStore"})},482871:(e,t,r)=>{r.d(t,{z:()=>u});r(517642),r(658004),r(733853),r(845876),r(432475),r(515024),r(731698),r(898992),r(430670),r(581454);var n=()=>r(770063),o=()=>r(898244),s=()=>r(448801),i=()=>r(179034),a=()=>r(722101),c=(r(354520),()=>r(496603));function l(e){const{collectionContextStore:t,collectionViewStore:r,transaction:s}=e,l=r.getPageSortStore(),u=l.getValue(),d=t.groupsStore.getAllGroupStates(),f=function(e){const{pageSort:t,currentResults:r}=e;if(!t||t.length<=o().WF)return[];const n=t.filter((e=>!r.has(e)));return c().sb([...n.reverse(),...c().o8(t).reverse()]).slice(0,t.length-o().WF)}({pageSort:u,currentResults:new Set(d.flatMap((e=>e.resultsStore.state.map((e=>e.id)))))});for(const o of f)a().TF({parentStore:l,childToRemoveStore:(0,n().v3)(l,{table:i().ev,id:o}),transaction:s})}function u(e){const{resultIds:t,collectionViewStore:r,collectionContextStore:c,transaction:u}=e,d=r.getPageSortStore(),f=d.getValue()||[],{beforeOps:v}=(0,s().i)(f,t.slice(0,o().WF));for(const[o,s]of Object.entries(v))if(s){const e=(0,n().v3)(r,{table:i().ev,id:s});a().nc({parentStore:d,insertStore:(0,n().v3)(r,{table:i().ev,id:o}),beforeStore:e,transaction:u})}else{const e=t.findIndex((e=>e===o)),s=t[e-1],c=s?(0,n().v3)(r,{table:i().ev,id:s}):void 0;a().WH({parentStore:d,insertStore:(0,n().v3)(r,{table:i().ev,id:o}),afterStore:c,transaction:u})}l({collectionContextStore:c,collectionViewStore:r,transaction:u})}},491848:(e,t,r)=>{r.d(t,{w:()=>o});r(898992),r(672577);var n=()=>r(541199);function o({collectionContextStore:e,transaction:t}){const r="collectionTypedView"===e.contextTypeFromStoreState,o=e.databaseTypeFromStoreState,s=e.collectionStoresStore.state,i=s.find((e=>e.canEdit()||e.canEditCollection()||e.canEditContentOnly()))||s[0];!r&&i&&(0,n().e)({transaction:t,databaseType:o,collectionId:i.id,spaceId:i.getSpaceId()})}},709438:(e,t,r)=>{r.d(t,{m:()=>c});r(296540);var n=()=>r(401497),o=()=>r(69708),s=()=>r(100622),i=r(474848);const a=8;function c({color:e,size:t,style:r}){const c=(0,o().tz)(),l=(0,n().IS)((()=>({dot:{height:t||a,width:t||a,background:e||s().Tj.blue.icon.accentPrimary,flexShrink:0,borderRadius:"100%",pointerEvents:"none",...r}})),[t,e,r]);return(0,i.jsx)("div",{role:"img","aria-label":c.formatMessage({id:"statusDot.ariaLabel",defaultMessage:"New"}),style:l.dot})}},766854:(e,t,r)=>{r.d(t,{H:()=>k,Q:()=>_});r(898992),r(672577);var n=()=>r(230711),o=()=>r(907258),s=()=>r(135168),i=()=>r(242422),a=()=>r(929219),c=()=>r(711339),l=()=>r(295633),u=()=>r(700500),d=()=>r(179034),f=()=>r(201980),v=()=>r(384944),p=()=>r(649813),m=()=>r(390650),S=()=>r(381678),g=()=>r(622811),h=()=>r(491848),y=()=>r(482871);function b(e,t,r){const o=(0,S()._)(e),s=null==o?void 0:o.id;if(!s||!r)return;if(!i().default.checkGate({gateName:"full_access_for_created_collection_pages"}))return;if(t.canAdmin())return;const a=t.getSpaceStore();return a&&(0,n().dp)(a,s).isMember()?[{role:"editor",type:"user_permission",user_id:s}]:void 0}function _(e){const{collectionContextStore:t,transaction:r}=e;return(0,h().w)({collectionContextStore:t,transaction:r}),k(e)}function k(e){var t,r,n;const{environment:S,collectionContextStore:h,groupsPointer:_,insertAtIndex:k,shouldCoerce:I,templateStore:T,transaction:C,from:M,tracker:w,inMemoryRecordCache:B,isKeyboard:R,title:E}=e,x=c().default.DO_NOT_USE_markLegacy("collections.add_item_lag");c().default.DO_NOT_USE_measureAfterNextFlushLegacy(x,{environment:S,getData:()=>({...m().kz(h),from:M.createBlock})});const A="collectionTypedView"===h.contextTypeFromStoreState,P=h.databaseTypeFromStoreState,q=h.collectionStoresStore.state,V=q.find((e=>e.canEdit()||e.canEditCollection()||e.canEditContentOnly()))||q[0],O=null===(t=(0,s().f)(V))||void 0===t?void 0:t.id,D=o().default.state.currentUserSettingsStore,L=A&&P&&O&&D&&[...D.getAllPreferredCollections(O),...D.getPreferredCollectionsOfType(O,P)]||[];let F;const z=_[0];if("group_header"===M.createBlock&&"location"===z.value.type){const e=z.value.value;if(e){F=q.find((t=>t.id===e.id&&(t.canEdit()||t.canEditCollection()||t.canEditContentOnly())))}}else F=function(e,t){for(const r of e){const e=t.find((e=>e.id===r&&(e.canEdit()||e.canEditCollection()||e.canEditContentOnly())));if(e)return e}}(L,q);const H=F??V,U=null==H?void 0:H.getSpaceId(),N=h.collectionViewStore(),j=h.getViewType(),W=v().Wv({environment:S,type:u().xd.page,inMemoryRecordCache:B,transaction:C,spaceId:U,tracker:w,permissions:b(S,H,U),properties:{title:(0,f().x9d)(E)}});if(!H||!N||!j)return{coercionSucceeded:!0,newStore:W};const K=null===(r=h.groupsStore.getGroupState(_))||void 0===r?void 0:r.groupUiParentStore;if(!K)return{coercionSucceeded:!0,newStore:W};const G=l().B.createChildStore(K,{table:d().ev,id:W.id});T&&a().A.state.online&&p().TB({title:"template",environment:S,store:W,templateStore:T,isKeyboard:R??!1,isCreateIn:!1,transaction:C,from:M.initCollection??"collection_group_actions"});const X=(0,g().j)({environment:S,store:W,collectionStore:H,collectionContextStore:h,groupsPointer:_,shouldCoerce:I,transaction:C}),J=(null===(n=h.groupsStore.getGroupState(_))||void 0===n||null===(n=n.reducerResultStore.state)||void 0===n?void 0:n.blockIds)||[],Y=void 0!==k?k:J.length,Z=h.permissionScopesStore.state;if((i().default.checkGate({gateName:"can_create_pages_in_collection_permission"})?Z.canCreatePagesInCollection:Z.canEditContent)||A){const e=[...J.slice(0,Y),G.id,...J.slice(Y)];(0,y().z)({resultIds:e,collectionViewStore:N,collectionContextStore:h,transaction:C})}return{coercionSucceeded:X,newStore:G}}},783033:(e,t,r)=>{r.d(t,{H2:()=>d,Hu:()=>S,TY:()=>n,Tu:()=>f,U7:()=>y,WO:()=>p,XX:()=>h,c4:()=>m,ef:()=>s,ej:()=>g,hI:()=>v,kl:()=>l,lr:()=>u,ls:()=>o,sC:()=>a,yE:()=>c});r(581454);const n=2,o=30,s=30;function i(e){return Object.fromEntries((0,r(534177).WP)(e).map((([e,t])=>[t,Number(e)])))}const a={0:"onboardingIntro",1:"intro",3:"inviteMembers",5:"connectWorkspace",8:"createTeamspaces",11:"verifyPages",14:"samlSSO",17:"storeRecords",20:"notionAi"},c=i(a),l={2:"aiMeetingNotes",3:"aiSearch",5:"aiResearchMode",6:"notionAi",8:"inviteMembers",10:"aiBuildIt"},u=i(l),d={2:"aiMeetingNotes",3:"aiSearch",5:"aiResearchMode",6:"notionAi",8:"inviteMembers",10:"aiBuildIt"},f=(i(d),{365:5,180:5,90:5,30:5,14:4}),v=332,p=852,m=800,S=407,g=24,h=400,y=7},848701:(e,t,r)=>{r.d(t,{BF:()=>d,J:()=>m,Tr:()=>h,UP:()=>v,XF:()=>p,cn:()=>S,od:()=>f,rE:()=>g,t3:()=>b,tY:()=>_,tk:()=>u,z2:()=>y});r(16280);var n=()=>r(906745),o=()=>r(795523),s=()=>r(166386),i=()=>r(61844),a=()=>r(934068),c=()=>r(534177),l=()=>r(783033);function u(e){const{daysElapsed:t,trialLength:r,trialCampaign:n}=e;let o;switch(r){case 365:case 180:case 90:case 30:o=l().sC;break;case 14:o=(0,a().bf)(n)?l().H2:l().kl;break;default:throw new Error(`Unsupported trial length: ${r}`)}if(t in o)return o[t]}function d(e,t){let r;switch(t){case 365:case 180:case 90:case 30:r=l().yE;break;case 14:r=l().lr;break;default:throw new Error(`Unsupported trial length: ${t}`)}return r[e]}function f(e,t,r){const{business_trial_ending_modal_shown_times:o,business_trial_ending_modal_last_shown_at:s}=r??{};if(!(0,a().V9)(e,t))return!1;if(void 0===s||void 0===o)return!1;if(s>0){if(t.diff(n().DateTime.fromMillis(s),"days").days>=l().ls)return!1}return(o??0)>=l().TY}function v(e,t=(0,o().DS)(e)){if(!e)return;const r=(0,o().i5)(e);return r?Math.ceil(null==r?void 0:r.diff(t,"days").days):void 0}function p(e,t){const r=n().DateTime.fromMillis(e.endDateMs);return(t??n().DateTime.now()).hasSame(r,"day")}function m(e){const t=(0,i().Jd)(e);if(t)return(0,s().Vm)(t)}function S(e){const t=(0,i().Jd)(e);if(t)return(0,s().kd)(t)}function g(e){if(!(e in l().Tu))throw new Error(`Unknown trial length: ${e}`);return l().Tu[e]}function h(e){return Math.round(e/30)}function y({billingData:e}){if(!(0,o().TB)(e))return!1;const t="admin"===(null==e?void 0:e.type)&&(0,c().O9)(null==e?void 0:e.paymentMethod);return!(0,o().HY)(e)&&t}function b(e){return(0,c().Xk)(["mwn_stacked_business_trial_14d","mwn_business_reverse_14d"],e)}function _(e){return(0,c().Xk)(["multi_search_scope_menu","ai_workspace_settings_connector_cards","business_trial_ai_connectors_upsell"],e)}},934068:(e,t,r)=>{r.d(t,{$G:()=>c,Hj:()=>l,Nh:()=>m,V9:()=>d,WL:()=>a,bf:()=>p,cv:()=>v,nS:()=>u,tz:()=>f});r(581454);var n=()=>r(906745),o=()=>r(534177),s=()=>r(869190),i=()=>r(323063);const a=30,c=5;function l(e,t){var r;return void 0!==(null===(r=e.subscription)||void 0===r?void 0:r.trialEnd)&&"reset_and_invoice"===t.subscription.type}function u(e,t,r){return e?(0,s().W_)(e.toMillis(),r??"long",t):void 0}function d(e,t){const r=n().DateTime.fromMillis(e.endDateMs);return(t??n().DateTime.now())>r}function f(e,t,r){const o=n().DateTime.fromMillis(e.endDateMs),s=r??n().DateTime.now();return s<o&&o.diff(s).as("days")<=t}function v(e,t,r,o,s="USD",c=a,l=n().DateTime.now()){return{items:t.map((t=>({price:(0,i().vk)(e,{product:t,interval:r,currency:s}),quantity:o}))),trialEnd:l.plus({days:c})}}function p(e){return"business_cc_14d_personal"===e}function m(e){return(0,o().Xk)(e,"plus")&&(0,o().Xk)(e,"ai")}},951105:(e,t,r)=>{r.d(t,{k:()=>o});r(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"2.18 1.73 11.64 12.54",svg:(0,r(474848).jsx)("path",{d:"M7.435 1.735c-.875 0-1.585.71-1.585 1.585v.735H3.765c-.875 0-1.585.71-1.585 1.585v7.04c0 .875.71 1.585 1.585 1.585h4.8c.876 0 1.585-.71 1.585-1.585v-.735h2.085c.876 0 1.585-.71 1.585-1.585V5.638c0-.42-.167-.824-.464-1.121l-2.318-2.318a1.6 1.6 0 0 0-1.12-.464zM7.1 3.32c0-.185.15-.335.335-.335H9.58V4.44c0 .848.687 1.535 1.535 1.535h1.455v4.385c0 .185-.15.335-.335.335H10.15V7.958c0-.42-.167-.824-.464-1.121L7.368 4.519a1.6 1.6 0 0 0-.268-.215zm3.63 1.12v-.781l1.166 1.166h-.78a.385.385 0 0 1-.386-.385m-7.3 1.2c0-.185.15-.335.335-.335H5.91V6.76c0 .848.687 1.535 1.535 1.535H8.9v4.385c0 .185-.15.335-.335.335h-4.8a.335.335 0 0 1-.335-.335zm3.63 1.12v-.781l1.166 1.166h-.78a.385.385 0 0 1-.386-.385"})},o=(0,r(340498).wt)("docOnDocSmall",n,"small")},981305:(e,t,r)=>{r.d(t,{B:()=>s});r(16280);var n=r(296540),o=()=>r(472090);function s(e,t,r=0){(0,n.useEffect)((()=>{const n=new(o().E)({throttleMs:r});if(!e.current)throw new Error("ref.current is null");return n.observe(e.current),n.rect.addListener(t),()=>{n.destroy()}}),[t])}}}]);