"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[14344,29802,43151,99171],{3284:(e,t,o)=>{o.r(t),o.d(t,{arrowSquarePathUpDownIcon:()=>r,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"0.64 3.12 18.71 13.76",svg:(0,o(474848).jsx)("path",{d:"M6.475 3.125a.625.625 0 1 0 0 1.25h7.975c.65 0 1.175.526 1.175 1.175v6.057l-1.408-1.408a.625.625 0 1 0-.884.884l2.475 2.475a.625.625 0 0 0 .884 0l2.475-2.475a.625.625 0 0 0-.884-.884l-1.408 1.408V5.55a2.425 2.425 0 0 0-2.425-2.425zM3.308 6.442a.625.625 0 0 1 .884 0l2.475 2.475a.625.625 0 1 1-.884.884L4.375 8.393v6.057c0 .649.526 1.175 1.175 1.175h7.975a.625.625 0 0 1 0 1.25H5.55a2.425 2.425 0 0 1-2.425-2.425V8.393L1.717 9.801a.625.625 0 1 1-.884-.884z"})},r=(0,o(340498).wt)("arrowSquarePathUpDown",n,"default")},12140:(e,t,o)=>{o.d(t,{l:()=>i});var n=()=>o(79926);const r=new(n().O2)("presence-container",(()=>Promise.all([o.e(64534),o.e(86625)]).then(o.bind(o,281060)))),i=(0,n()._h)(r,(e=>e.PresenceContainer))},24126:(e,t,o)=>{o.d(t,{c:()=>r});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.9 2.75 12.18 14.49",svg:(0,o(474848).jsx)("path",{d:"M12.626 2.768a.625.625 0 0 1 0 1.224l-.126.013h-.125v4.794l3.366 5.159c.893 1.369-.03 3.17-1.623 3.281l-.156.006H6.039c-1.688 0-2.703-1.873-1.78-3.287l3.366-5.157V4.005H7.5a.625.625 0 0 1 0-1.25h5zM8.875 9.173l-.102.156-1.567 2.401h5.589l-1.569-2.403-.101-.156V4.005h-2.25z"})},r=(0,o(340498).wt)("beaker",n,"default")},27178:(e,t,o)=>{o.d(t,{ZN:()=>l,mN:()=>a,qo:()=>u});var n=()=>o(675133),r=()=>o(69708);const i=(0,r().YK)({default:{defaultMessage:"Default",id:"colors.select.lightGray"},gray:{defaultMessage:"Gray",id:"colors.select.gray"},brown:{defaultMessage:"Brown",id:"colors.select.brown"},orange:{defaultMessage:"Orange",id:"colors.select.orange"},yellow:{defaultMessage:"Yellow",id:"colors.select.yellow"},green:{defaultMessage:"Green",id:"colors.select.green"},blue:{defaultMessage:"Blue",id:"colors.select.blue"},purple:{defaultMessage:"Purple",id:"colors.select.purple"},pink:{defaultMessage:"Pink",id:"colors.select.pink"},red:{defaultMessage:"Red",id:"colors.select.red"}});function a(e){const t=i[e]||i.gray;return n().A.formatMessage(t)}const s=(0,r().YK)({default_background:{defaultMessage:"Default",id:"colors.blockColor.lightGray"},gray_background:{defaultMessage:"Gray",id:"colors.blockColor.gray"},brown_background:{defaultMessage:"Brown",id:"colors.blockColor.brown"},orange_background:{defaultMessage:"Orange",id:"colors.blockColor.orange"},yellow_background:{defaultMessage:"Yellow",id:"colors.blockColor.yellow"},teal_background:{defaultMessage:"Green",id:"colors.blockColor.green"},blue_background:{defaultMessage:"Blue",id:"colors.blockColor.blue"},purple_background:{defaultMessage:"Purple",id:"colors.blockColor.purple"},pink_background:{defaultMessage:"Pink",id:"colors.blockColor.pink"},red_background:{defaultMessage:"Red",id:"colors.blockColor.red"}});function l(e){const t=s[e];return n().A.formatMessage(t)}const d=(0,r().YK)({foregroundColorDefault:{id:"action.foregroundColor.default.name",defaultMessage:"Default text"},foregroundColorGray:{id:"action.foregroundColor.gray.name",defaultMessage:"Gray text"},foregroundColorBrown:{id:"action.foregroundColor.brown.name",defaultMessage:"Brown text"},foregroundColorOrange:{id:"action.foregroundColor.orange.name",defaultMessage:"Orange text"},foregroundColorYellow:{id:"action.foregroundColor.yellow.name",defaultMessage:"Yellow text"},foregroundColorGreen:{id:"action.foregroundColor.green.name",defaultMessage:"Green text"},foregroundColorBlue:{id:"action.foregroundColor.blue.name",defaultMessage:"Blue text"},foregroundColorPurple:{id:"action.foregroundColor.purple.name",defaultMessage:"Purple text"},foregroundColorPink:{id:"action.foregroundColor.pink.name",defaultMessage:"Pink text"},foregroundColorRed:{id:"action.foregroundColor.red.name",defaultMessage:"Red text"},backgroundColorGray:{id:"action.backgroundColor.gray.name",defaultMessage:"Gray background"},backgroundColorBrown:{id:"action.backgroundColor.brown.name",defaultMessage:"Brown background"},backgroundColorOrange:{id:"action.backgroundColor.orange.name",defaultMessage:"Orange background"},backgroundColorYellow:{id:"action.backgroundColor.yellow.name",defaultMessage:"Yellow background"},backgroundColorGreen:{id:"action.backgroundColor.green.name",defaultMessage:"Green background"},backgroundColorBlue:{id:"action.backgroundColor.blue.name",defaultMessage:"Blue background"},backgroundColorPurple:{id:"action.backgroundColor.purple.name",defaultMessage:"Purple background"},backgroundColorPink:{id:"action.backgroundColor.pink.name",defaultMessage:"Pink background"},backgroundColorRed:{id:"action.backgroundColor.red.name",defaultMessage:"Red background"},backgroundColorDefault:{id:"action.backgroundColor.default.name",defaultMessage:"Default background"}}),c={default:{...d.foregroundColorDefault},gray:{...d.foregroundColorGray},brown:{...d.foregroundColorBrown},orange:{...d.foregroundColorOrange},yellow:{...d.foregroundColorYellow},teal:{...d.foregroundColorGreen},blue:{...d.foregroundColorBlue},purple:{...d.foregroundColorPurple},pink:{...d.foregroundColorPink},red:{...d.foregroundColorRed},default_background:{...d.backgroundColorDefault},gray_background:{...d.backgroundColorGray},brown_background:{...d.backgroundColorBrown},orange_background:{...d.backgroundColorOrange},yellow_background:{...d.backgroundColorYellow},teal_background:{...d.backgroundColorGreen},blue_background:{...d.backgroundColorBlue},purple_background:{...d.backgroundColorPurple},pink_background:{...d.backgroundColorPink},red_background:{...d.backgroundColorRed}};function u(e){return c[e]}},63476:(e,t,o)=>{o.d(t,{h:()=>s});var n=()=>o(920198),r=()=>o(590526),i=()=>o(350013),a=()=>o(743246);function s(e){const t=(0,n().L)();return(0,r().K8)((()=>{if(!e||!t)return;return i().N.createChildStore(t,{table:a().C0,id:e,spaceId:t.id})}),[e,t])}},65474:(e,t,o)=>{o.d(t,{J:()=>s});o(296540);var n=()=>o(546926),r=()=>o(890492),i=()=>o(663639),a=o(474848);function s(e){const{buttonPopupParent:t,extensionPopupButtonEvents:o,sections:s,menuType:l}=e;return(0,a.jsx)(r().A,{...o,menuType:l,width:l===n().gu.Popup?300:void 0,hideMobileTopbar:!0,children:(0,a.jsx)(i().A,{type:i().O.Vertical,initialFocus:void 0,sections:s,onAccept:t.close})})}},75318:(e,t,o)=>{o.d(t,{j:()=>i});o(296540);var n=o(474848);const r={viewBox:"0 0 16 16",fittedViewBox:"1.95 1.94 12.11 12.1",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M10 7.45a.55.55 0 1 1 0 1.1H6a.55.55 0 1 1 0-1.1z"}),(0,n.jsx)("path",{d:"M8 1.95a6.05 6.05 0 1 1 0 12.1 6.05 6.05 0 0 1 0-12.1m0 1.1a4.95 4.95 0 1 0 0 9.9 4.95 4.95 0 0 0 0-9.9"})]})},i=(0,o(340498).wt)("minusCircleSmall",r,"small")},108184:(e,t,o)=>{o.r(t),o.d(t,{COMPLETION_THROTTLE:()=>w,PREVIEW_STEP_DELAY:()=>j,maybeUpdateAIUsageEligibilityStoreV2:()=>T,maybeUpdateAiEligibility:()=>I,postProcessAICreatedStores:()=>M,showCompletionErrorWithCode:()=>C,wrapTemporaryBlocksInList:()=>A});o(18107),o(967357);var n=()=>o(242422),r=()=>o(675133),i=()=>o(128933),a=()=>o(770063),s=()=>o(878126),l=()=>o(165358),d=()=>o(179034),c=()=>o(427419),u=()=>o(720665),p=()=>o(769864),g=()=>o(722101),f=()=>o(384944),m=()=>o(274873),h=()=>o(412669),v=()=>o(556122),y=()=>o(594794),k=()=>o(668721),b=()=>o(685377),x=()=>o(661077),S=()=>o(96563);const w=300,j=250;function C(e){const t=r().A.getIntl();return 451===e?i().D6({label:t.formatMessage({id:"completionActions.moderationError",defaultMessage:"AI does not allow content that is harmful or illegal. Please revise your input and try again. (451)"})}):413===e?i().D6({label:t.formatMessage({id:"completionActions.promptOrAttachmentTooLarge",defaultMessage:"Query or attachment is too large. Please revise your input and try again. (413)"})}):502===e||503===e||504===e?i().D6({label:t.formatMessage({id:"completionActions.providerError",defaultMessage:"We’re experiencing issues with our AI provider. Try again in a few minutes. ({errorCode})"},{errorCode:e})}):void i().D6({label:t.formatMessage({id:"completionActions.genericError",defaultMessage:"AI is temporarily unavailable. Try again in a few minutes. ({errorCode})"},{errorCode:e})})}function M(e,t){for(const o of t)m().In({environment:e,blockStore:o})}async function I(e,t,o){let r;if(n().default.checkGate({gateName:"usage_based_pricing_pfa_checks_purchased_credits_enabled"}))return void(await T(e,t,o));n().default.checkGate({gateName:"usage_based_pricing_alpha_enabled"})&&T(e,t,o).catch((e=>{l().log({level:"error",from:"ai.completionActions",type:"maybeUpdateAIUsageEligibilityStoreV2Error",spaceId:t,error:e})}));const i=v().TI();if(i.debug)r=402!==i.showErrorCode;else{const n=k().o.getState();if(n&&n.isEligible&&"unlimited"===n.type&&!o){const e=n.lastUpdatedAt;if(Date.now()-e<10*u().Xb)return}const i=await p().callCellCompatibleApi({eventName:"getAIUsageEligibility",environment:e,data:{spaceId:t},cellNavigation:{cellId:void 0,spaceId:t}});if("success"===i.type){r=i.data.isEligible,r&&h().K.state&&h().K.setState(!1);const e=!1===(null==n?void 0:n.isEligible)&&(null==n?void 0:n.requestedAccess),t=i.data.researchModeUsage??0;k().o.setState({...i.data,lastUpdatedAt:Date.now(),researchModeUsage:t,...!1===i.data.isEligible&&{requestedAccess:e}})}}void 0!==r&&x().P.setState(r)}async function T(e,t,o){const n=await s().T.awaitData(e,{spaceId:t}),r=b().y.getData(e,{spaceId:t});if(n){if(r&&(0,c().Hg)(n)&&!o){const e=r.lastUpdatedAt;if(Date.now()-e<10*u().Xb)return}await(0,S().y3)(e,t)}}function A(e){var t;const{environment:o,stores:n,listId:r,inMemoryRecordCache:i,transaction:s}=e,l=(null===(t=n.at(0))||void 0===t?void 0:t.getSpaceId())??s.spaceId,c=new(a().pm)({environment:o,pointer:{table:d().ev,id:r||(0,y().Z1)({environment:o,table:d().ev,spaceId:l}),spaceId:l},recordStoreOptions:{inMemoryRecordCache:i,userId:o.currentUser.id},path:["content"]});for(const a of n)g().BC({parentStore:c,appendStore:a,transaction:s}),f().zv({store:a,data:{parent_id:c.id,parent_table:c.table,alive:!0},transaction:s});return c}},111232:(e,t,o)=>{o.d(t,{s:()=>a});o(581454);var n=()=>o(295633),r=()=>o(534177),i=()=>o(722101);function a({modificationType:e,storesToModify:t,spaceViewStore:o,transaction:a}){const s=o.getBookmarkedPagesStore(),l=t.map((e=>n().B.createChildStore(s,e.pointer)));for(const n of l.reverse())"add"===e?i().Hs({parentStore:s,prependStore:n,transaction:a}):"remove"===e?i().TF({parentStore:s,childToRemoveStore:n,transaction:a}):(0,r().HB)(e)}},146594:(e,t,o)=>{o.d(t,{H:()=>i});var n=()=>o(79926);const r=new(n().O2)("UpdateSidebarTabInfo",(async()=>await o.e(21377).then(o.bind(o,722143)))),i=(0,n()._h)(r,(e=>e.UpdateSidebarTabInfo))},147294:(e,t,o)=>{o.d(t,{Ee:()=>m,J1:()=>u,oG:()=>p});o(296540);var n=()=>o(907258),r=()=>o(59226),i=()=>o(590526),a=()=>o(401497),s=()=>o(970236),l=()=>o(69708),d=o(474848);const c={define_variables_automation_action:{launchDateMs:17277408e5,expiryDateMs:1738368e6},passkey_setting:{launchDateMs:1729101727e3,expiryDateMs:1738432882e3},publish_site_settings_embed_page:{launchDateMs:1736208e6,expiryDateMs:1743984e6},generalized_recurrence_automations:{launchDateMs:17365536e5,expiryDateMs:17460576e5},ai_page_translation_topbar_more_action:{launchDateMs:1740451280830,expiryDateMs:17434656e5},verification:{launchDateMs:1740096e6,expiryDateMs:174375e7},notion_ai_workspace_settings:{launchDateMs:17424288e5,expiryDateMs:17550432e5},notion_mail_launch_modal:{launchDateMs:17446752e5,expiryDateMs:17525376e5},notion_mail_launch_modal_2:{launchDateMs:17446752e5,expiryDateMs:17578944e5},ui_doc_example:{launchDateMs:19249056e5,expiryDateMs:19249056e5},collection_property_permissions:{launchDateMs:17433792e5,expiryDateMs:17671392e5},salesforce_sync_unfurling_option:{launchDateMs:17443296e5,expiryDateMs:17538336e5},personal_home_sidebar_item:{launchDateMs:17470944e5,expiryDateMs:175392e7},collection_property_reminder:{launchDateMs:1751958e6,expiryDateMs:17552628e5},get_notified_onboarding_tooltip:{launchDateMs:17520228e5,expiryDateMs:17591904e5},conditional_color_feature:{launchDateMs:17537472e5,expiryDateMs:17563392e5},web_clipper_new_tab_settings:{launchDateMs:17471808e5,expiryDateMs:18149184e5},my_meetings:{launchDateMs:17578944e5,expiryDateMs:17657568e5},workspace_connections_tab:{launchDateMs:17578944e5,expiryDateMs:18149184e5},external_agents_tab:{launchDateMs:17578944e5,expiryDateMs:18149184e5},permissions_tab:{launchDateMs:17578944e5,expiryDateMs:18149184e5}};function u({style:e}){const t=(0,a().IS)((()=>({badge:{letterSpacing:0,whiteSpace:"nowrap",width:"fit-content",...e}})),[e]);return(0,d.jsx)(s().E,{color:"blue",style:t.badge,content:(0,d.jsx)(l().sA,{id:"newBadgeComponent.label",defaultMessage:"New"})})}function p(e){return(0,i().K8)((()=>{const{launchDateMs:t,expiryDateMs:o}=c[e],{currentUserSettingsStore:r}=n().default.state;if(r&&r.isReady()){var i;const e=null===(i=r.getSettings())||void 0===i?void 0:i.signup_time;if(e&&e>t)return!1}return Date.now()<=o}),[e])}function g({style:e,newBadgeKey:t}){return p(t)?(0,d.jsx)(u,{style:e}):null}function f({style:e,newBadgeKey:t}){return(0,r().X)(t)?(0,d.jsx)(u,{style:e}):null}function m(e){return e.didUserEngage?null:"feature_gate"===e.keyType?(0,d.jsx)(f,{...e}):(0,d.jsx)(g,{...e})}},152713:(e,t,o)=>{o.d(t,{f:()=>r});var n=()=>o(590526);function r(e){return{modules:(0,n().K8)((()=>{if(!e)return;const t=e.getAssociatedCollectionStore(),o=null==t?void 0:t.getLayoutStore();return null==o?void 0:o.getModules().page_details}),[e])}}},155736:(e,t,o)=>{o.d(t,{D:()=>m,v:()=>h});o(581454);var n=o(296540),r=()=>o(401497),i=()=>o(107975),a=()=>o(249046),s=()=>o(406094),l=()=>o(160432),d=()=>o(508700),c=()=>o(69708),u=()=>o(100622),p=()=>o(284371),g=()=>o(424416),f=o(474848);const m=(0,c().YK)({defaultTitle:{id:"universalQna.connectionComplete.defaultTitle",defaultMessage:"You’re done!"},defaultSubText:{id:"universalQna.connectionComplete.defaultSubText",defaultMessage:"What happens next:"},defaultPrimaryButton:{id:"universalQna.connectionComplete.defaultPrimaryButton",defaultMessage:"Got it"},connectionInProgressTitle:{id:"universalQna.connectionComplete.connectionInProgressTitle",defaultMessage:"We’re connecting your {appName} content"},defaultConnectionTime:{id:"universalQna.connectionComplete.defaultConnectionTime",defaultMessage:"This may take up to 36 hours"},defaultPermissionsWillBeRespected:{id:"universalQna.connectionComplete.defaultPermissionsWillBeRespected",defaultMessage:"{appName} permissions are strictly respected and members will only see content they have access to."},defaultNotionAiWillBeAbleToAnswerQuestions:{id:"universalQna.connectionComplete.defaultNotionAiWillBeAbleToAnswerQuestions",defaultMessage:"Notion AI will be able to search and answer questions across Notion and {appName} knowledge."}});function h(e){const{open:t,connectorType:o,notes:h,onDismiss:v,onPrimaryButtonClick:y,onEditSettingsClick:k,title:b,subText:x,primaryButtonText:S}=e,w=1===h.length,[j,C]=(0,n.useState)(!1),[M,I]=(0,n.useState)(!1),T=(0,c().tz)(),A=(0,r().IS)((()=>({wrapper:{width:400},notesContainer:{marginTop:w?0:24,font:p().Tf.sans,paddingInlineStart:20,paddingInlineEnd:20,textAlign:w?"center":"start",justifyContent:"center"},singleNoteText:{fontSize:14,fontWeight:p().Wy.regular,color:u().Tj.text.secondary,textAlign:"center",paddingInlineStart:8,paddingInlineEnd:8,textWrap:"balance"},buttonsContainer:{margin:20,display:"flex",flexDirection:"column",gap:8}})),[w]),_=b||(0,f.jsx)(c().sA,{...m.defaultTitle}),P=w?void 0:x||(0,f.jsx)(c().sA,{...m.defaultSubText}),E=S||(0,f.jsx)(c().sA,{...m.defaultPrimaryButton});return(0,f.jsx)(i().a,{overlayZIndex:999,ariaLabel:T.formatMessage({id:"universalQnAConnectionCompleteModal.title",defaultMessage:"You’re done!"}),open:t,onDismiss:()=>{v()},render:()=>(0,f.jsxs)("div",{style:A.wrapper,children:[(0,f.jsx)(g().b,{connectorType:o,title:_,subtext:P}),(0,f.jsx)(a().wt,{gap:12,style:A.notesContainer,className:"notes-Container",children:w&&h.length>0?(0,f.jsx)("div",{style:A.singleNoteText,children:(0,f.jsx)(c().sA,{...h[0].props.title?h[0].props.title:m.defaultTitle})}):h.map(((e,t)=>e))}),y||k?(0,f.jsxs)("div",{style:A.buttonsContainer,children:[k?(0,f.jsx)(s().A,{iconLeading:{icon:d().T,size:"sm"},isLoading:M,style:{width:"100%"},onClick:async()=>{I(!0),await k(),I(!1)},children:(0,f.jsx)(c().sA,{id:"universalSearch.connectionComplete.customizeConnectedContent",defaultMessage:"Customize connected content"})}):void 0,y?(0,f.jsx)(l().A,{colorPalette:"blue",isLoading:j,style:{fontSize:14,fontWeight:p().Wy.semibold,width:"100%"},onClick:async()=>{C(!0),await y(),C(!1)},children:E}):void 0]}):void 0]})})}},158115:(e,t,o)=>{o.r(t),o.d(t,{arrowChevronSingleRightFillSmallIcon:()=>r,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"5.54 2.94 5.81 10.11",directional:!0,svg:(0,o(474848).jsx)("path",{d:"M11.13 8.53a.75.75 0 0 0 0-1.06L6.81 3.15a.75.75 0 0 0-1.06 1.06L9.54 8l-3.79 3.79a.75.75 0 0 0 1.06 1.06z"})},r=(0,o(340498).wt)("arrowChevronSingleRightFillSmall",n,"fillSmall")},172342:(e,t,o)=>{o.d(t,{default:()=>Co});var n=o(296540),r=()=>o(564884),i=()=>o(920198),a=()=>o(907258),s=()=>o(756117),l=()=>o(782482),d=()=>o(45105),c=()=>o(484714),u=()=>o(590526),p=()=>o(401497),g=()=>o(611648),f=()=>o(755222),m=()=>o(795732),h=()=>o(678465),v=()=>o(463086),y=()=>o(882722),k=()=>o(396406),b=()=>o(98126),x=()=>o(584262),S=()=>o(868840),w=()=>o(234459),j=()=>o(743246),C=()=>o(175947),M=()=>o(69708),I=()=>o(100622),T=()=>o(645302),A=()=>o(661920),_=()=>o(662453),P=()=>o(766081),E=()=>o(648526),B=()=>o(614699),D=()=>o(964345),R=()=>o(747100),L=()=>o(154807),z=()=>o(455994),V=()=>o(619206),O=()=>o(151838),K=()=>o(206051),W=()=>o(174422),N=()=>o(712505),F=()=>o(285288),H=()=>o(59226),U=()=>o(242422),G=()=>o(312788),$=()=>o(295633),Y=()=>o(366999),X=()=>o(496703),q=()=>o(711517),Q=()=>o(498212),Z=()=>o(939768),J=()=>o(791256),ee=()=>o(918052),te=()=>o(166442),oe=()=>o(997583),ne=()=>o(454354),re=()=>o(789586),ie=()=>o(281390),ae=()=>o(310818),se=()=>o(449242),le=()=>o(63476),de=()=>o(194715),ce=()=>o(137070),ue=()=>o(260917),pe=()=>o(127833),ge=()=>o(250910),fe=()=>o(807449),me=()=>o(695115),he=()=>o(546926),ve=()=>o(26697),ye=()=>o(890492),ke=()=>o(81068),be=()=>o(663639),xe=()=>o(736847),Se=()=>o(22634),we=o(474848);const je=n.memo((function(e){const{workflowStore:t,onClose:n,shouldShowFeedbackButton:r,activeSidePeek:i,onSidePeekChange:a,hasEditPermission:s,disabled:l,onShowVersionHistory:d,sudoModeStore:c}=e,u=(0,M().tz)(),g=(0,p().IS)((()=>({header:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",paddingInlineStart:12,paddingInlineEnd:10,paddingTop:8,paddingBottom:8,flexShrink:0,pointerEvents:"auto"},leftButtonGroup:{display:"flex",alignItems:"center",gap:2},chevronContainer:{display:"flex",alignItems:"center",cursor:"pointer",paddingBlock:4,paddingInline:8,color:I().Tj.text.secondary}})),[]);return(0,we.jsxs)("div",{style:g.header,children:[(0,we.jsx)("div",{style:g.leftButtonGroup,children:(0,we.jsx)(ve().m,{renderTooltip:()=>u.formatMessage({id:"agentSidePeek.close.tooltip",defaultMessage:"Close"}),render:e=>(0,we.jsx)(me().A,{...e,icon:Se().O,onClick:n,size:"md",style:g.chevronContainer,ariaLabel:u.formatMessage({defaultMessage:"Close side peek",id:"agentSidePeek.chevronButton.ariaLabel"})})})}),(0,we.jsx)(o(412754).P,{workflowStore:t,shouldShowFeedbackButton:r,flippyLayoutEnabled:!0,activeSidePeek:i,onSidePeekChange:a,hasEditPermission:s,disabled:l,onShowVersionHistory:d,sudoModeStore:c})]})}));o(898992),o(354520),o(581454);var Ce=()=>o(340498);const Me={viewBox:"0 0 16 16",fittedViewBox:"3.79 2.82 9.22 10.36",svg:(0,we.jsx)("path",{d:"m5.605 13.014 6.818-3.977a1.2 1.2 0 0 0 0-2.074L5.605 2.987A1.2 1.2 0 0 0 3.8 4.023v7.954a1.2 1.2 0 0 0 1.805 1.037"})},Ie=(0,Ce().wt)("mediaPlayFillSmall",Me,"fillSmall");var Te=()=>o(530199),Ae=()=>o(555102),_e=()=>o(687879);const Pe=(0,M().YK)({testAgentPrompt:{id:"workflow.agent.triggers.testAgentPrompt",defaultMessage:"Help me run {agentName, select, undefined {this agent} other {{agentName}}}"}}),Ee=n.memo((function(e){const{workflowStore:t,disabled:r}=e,{navigate:s}=(0,n.useContext)(G().E),l=(0,c().v3)(),d=(0,M().tz)(),p=(0,i().L)(),g=(0,o(106702).$)(),f=(0,u().K8)((()=>Boolean(U().default.checkGate({gateName:"custom_agent_setup_mode_tool"}))),[]),{workflowValue:m}=(0,o(912749).N)(t,!0),h=(0,u().K8)((()=>((null==m?void 0:m.triggers)??[]).filter((e=>{var t;const n=null===(t=e.state)||void 0===t?void 0:t.type;return(0,o(129398).A)({triggerType:n,context:"display"})}))),[m]),v=(0,n.useCallback)((()=>{if(!f)return;if(t.table!==j().C0)return;if(!p||!g)return;const e=a().default.state.sidebarSpaceViewStore;if(!e)return;const n=h.map((e=>{var t,n;return{id:e.id,type:(null===(t=e.state)||void 0===t?void 0:t.type)??"unknown",label:e.name??(null===(n=e.state)||void 0===n?void 0:n.type)??"Trigger",enabled:!1!==e.enabled,configured:(0,o(724639).VB)(e)}})).sort(((e,t)=>e.enabled===t.enabled?0:e.enabled?-1:1)),r=Boolean(U().default.checkGate({gateName:"custom_agent_setup_mode_tool"})),i=Boolean(U().default.checkGate({gateName:"agent_query_mail_tool"})),c=Boolean(U().default.checkGate({gateName:"agent_query_calendar_tool"})),u=d.formatMessage(Pe.testAgentPrompt,{agentName:t.getName()??void 0}),m=(0,Ae().Jv)({environment:l,spaceStore:p,userStore:g,promptType:"test_custom_agent",value:(0,o(201980).x9d)(u),locale:(0,o(402390).H)(d),args:{type:"test_custom_agent",enableSetupModeTool:r,enableQueryMail:i,enableQueryCalendar:c,workflowName:t.getName()??void 0,triggers:n}}),v=(0,Ae().Xd)({environment:l,inferenceContext:{userStore:g,spaceStore:p,spaceViewStore:e,blockStore:void 0,peekStore:void 0,workflowStore:t},config:(0,o(844317).getWorkflowAgentConfig)({environment:l,spaceId:p.id,workflowId:t.id,isCustomAgent:!0,isCustomAgentBuilder:!0,useCustomAgentDraft:!0,useDraftActorPointer:!0}),addSteps:[m],surface:"workflows"}),y=(0,_e().addTranscriptToNewThreadAndRun)({environment:l,spaceStore:p,transcript:v,workflowId:t.id,createdSource:"workflows",parentPointer:t.pointer}),k=(0,N().getUrlParamFromPeekMode)(S().A),b=(0,o(36951).NC)({environment:l,threadId:y.id,spaceId:p.id,forceRouteToChat:!0,additionalQueryParams:{wfv:"settings",[Te().ZI]:(0,Q().Xw)(t.id),...k?{[Te().fT]:k}:void 0}});s({environment:l,url:b})}),[l,d,f,s,p,h,g,t]);return!f||r?null:(0,we.jsx)(o(373009).E,{size:"md",iconLeading:{icon:Ie,size:"xs"},onClick:v,children:(0,we.jsx)(M().sA,{id:"workflow.agent.triggers.testAgentButton",defaultMessage:"Run agent"})})})),Be=n.memo((function(e){const{clientStore:t,workflowStore:n,spaceStore:r,workflowViewType:i,activityFilter:a,setActivityFilter:s,onRefreshActivity:l,onClose:d,hasEditPermission:c,activeThreadId:g,shouldShowFeedbackButton:f,activeSidePeek:m,onSidePeekChange:h,disabled:v,onShowVersionHistory:y,sudoModeStore:k}=e,x=(0,M().tz)(),S=(0,ae().Sn)(),w=(0,u().K8)((()=>(null==S?void 0:S.state.status)??"idle"),[S]),j="all"!==a.type,C=(0,p().IS)((()=>({container:{height:"100%",width:"100%",display:"flex",flexDirection:"column"},actionToolbar:{display:"flex",alignItems:"center",justifyContent:"flex-end",paddingInline:24,paddingBlock:12,gap:8,flexShrink:0,pointerEvents:"auto"},loadingCircle:{display:"flex",justifyContent:"center",alignItems:"center",width:28,height:28},content:{flex:1,display:"flex",flexDirection:"column",minHeight:0,pointerEvents:"auto",paddingInline:24,overflowY:"auto"}})),[]),I=(0,we.jsx)(ge().A,{alignmentToOrigin:"end",originGap:4,popupType:pe().nl.Popup,style:{minWidth:250},render:e=>{const t={key:"filter-section",render:e=>(0,we.jsx)(xe().A,{...e,topBorder:!1,title:(0,we.jsx)(M().sA,{defaultMessage:"Filter",id:"agentPage.filter.title"})}),items:[{key:"all-activity",render:e=>(0,we.jsx)(ke().A,{...e,icon:(0,we.jsx)(fe().I,{icon:o(26440).w}),title:(0,we.jsx)(M().sA,{defaultMessage:"All activity",id:"agentPage.filter.allActivity"}),isChecked:"all"===a.type}),action:()=>{s({type:"all"}),e.close()}},{key:"failed-runs",render:e=>(0,we.jsx)(ke().A,{...e,icon:(0,we.jsx)(fe().I,{icon:o(378409).xMarkCircleIcon}),title:(0,we.jsx)(M().sA,{defaultMessage:"Failed runs",id:"agentPage.filter.failedRuns"}),isChecked:"failed"===a.type}),action:()=>{s({type:"failed"}),e.close()}},{key:"successful-runs",render:e=>(0,we.jsx)(ke().A,{...e,icon:(0,we.jsx)(fe().I,{icon:o(671089).checkmarkCircleIcon}),title:(0,we.jsx)(M().sA,{defaultMessage:"Successful runs",id:"agentPage.filter.successfulRuns"}),isChecked:"success"===a.type}),action:()=>{s({type:"success"}),e.close()}}]};return(0,we.jsx)(ye().A,{menuType:he().gu.Popup,children:(0,we.jsx)(be().A,{type:be().O.Vertical,sections:[t],initialFocus:0,onAccept:()=>e.close()})})},renderOrigin:e=>(0,we.jsx)(me().A,{...e,ariaLabel:x.formatMessage({defaultMessage:"Filter activity",id:"agentPage.filterActivity"}),size:"sm",icon:o(112412).filterSmallIcon,colorPalette:j?"blue":void 0,colorVariant:j?"accentPrimary":"secondary"})}),T=(0,we.jsx)(ve().m,{placement:"top",renderTooltip:()=>x.formatMessage({defaultMessage:"Refresh activity",id:"agentPage.refreshActivity.tooltip"}),render:e=>"pending"===w?(0,we.jsx)("div",{style:C.loadingCircle,children:(0,we.jsx)(b().k,{size:"sm"})}):(0,we.jsx)(me().A,{...e,ariaLabel:x.formatMessage({defaultMessage:"Refresh activity",id:"agentPage.refreshActivity"}),size:"sm",icon:o(55967).w,onClick:l})});return(0,we.jsxs)("div",{style:C.container,children:[(0,we.jsx)(je,{workflowStore:n,onClose:d,shouldShowFeedbackButton:f,activeSidePeek:m,onSidePeekChange:h,hasEditPermission:c,disabled:v,onShowVersionHistory:y,sudoModeStore:k}),(0,we.jsxs)("div",{style:C.actionToolbar,children:[(0,we.jsx)(Ee,{workflowStore:n,disabled:v}),(0,we.jsx)("div",{style:{flex:1}}),(0,we.jsx)(o(221267).D,{section:"activity",spaceStore:r,workflowStore:n}),I,T]}),(0,we.jsx)("div",{style:C.content,children:c?(0,we.jsx)(o(308023).W,{clientStore:t,workflowStore:n,workflowViewType:i,activityFilter:a,activeThreadId:g}):void 0})]})}));var De=()=>o(133220),Re=()=>o(792057),Le=()=>o(128933);const ze=(0,M().YK)({validationError:{id:"agentPage.validationError",defaultMessage:"Please fill in all required fields"}}),Ve=n.memo((function(e){const{workflowStore:t,workflowValidationErrorStore:r,disabled:i,hasEditPermission:a,onClose:s,hasChanges:l,hasNeverBeenPublished:d,edits:u,shouldShowPreviewButton:g,onPreview:f,shouldShowFeedbackButton:m,activeSidePeek:h,onSidePeekChange:v,onShowVersionHistory:y,sudoModeStore:k}=e,b=(0,c().v3)(),x=(0,M().tz)(),[S,w]=(0,n.useState)(!1),j=(0,n.useCallback)((async()=>{if(S)return;w(!0);const e=setTimeout((()=>{w(!1)}),3e4);(0,o(22673).qt)({environment:b,action:"publish",workflowId:t.id,from:"agent_settings_view"}),Le().D6({label:x.formatMessage({defaultMessage:"Saving agent...",id:"workflows.agentTopbar.savingProgress"}),durationMs:"keep"});try{const e=await(0,_e().publishWorkflow)({environment:b,workflowStore:t});if(o(973647).Q.isFail(e))return Le().N2(),r.setMissingFields(e.error.filter((e=>"missing_field"===e.type)).map((e=>e.fieldName))),void Re().f1(x.formatMessage(ze.validationError));Le().D6({label:x.formatMessage({defaultMessage:"Agent saved successfully",id:"workflows.agentTopbar.saveSuccess"})})}catch(n){Le().N2(),Re().f1(x.formatMessage({defaultMessage:"Failed to update agent",id:"workflows.agentTopbar.updateError"}))}finally{clearTimeout(e),w(!1)}}),[b,t,x,S,r]),C=(0,n.useCallback)((async()=>{(await Re().Gh({message:x.formatMessage({defaultMessage:"Are you sure you want to discard your unsaved changes?",id:"workflows.agentTopbar.resetConfirmMessage"}),acceptLabel:x.formatMessage({defaultMessage:"Discard changes",id:"workflows.agentTopbar.resetSubmitText"}),acceptColor:"red"})).accept&&await(0,_e().resetWorkflowToPublished)({environment:b,workflowStore:t})}),[b,t,x]),I=(0,p().IS)((()=>({container:{height:"100%",width:"100%",display:"flex",flexDirection:"column"},actionToolbar:{display:"flex",alignItems:"center",justifyContent:"flex-end",paddingInline:24,paddingBlock:12,gap:8,flexShrink:0,pointerEvents:"auto"},content:{flex:1,display:"flex",flexDirection:"column",minHeight:0,pointerEvents:"auto",paddingInline:24,overflowY:"auto"}})),[]);return(0,we.jsxs)("div",{style:I.container,children:[(0,we.jsx)(je,{workflowStore:t,onClose:s,shouldShowFeedbackButton:m,activeSidePeek:h,onSidePeekChange:v,hasEditPermission:a,disabled:i??!1,onShowVersionHistory:y,sudoModeStore:k}),(0,we.jsxs)("div",{style:I.actionToolbar,children:[(0,we.jsx)(Ee,{workflowStore:t,disabled:i}),(0,we.jsx)("div",{style:{flex:1}}),a&&u.length>0?(0,we.jsx)(o(15986).E,{edits:u}):void 0,a&&l&&!d?(0,we.jsx)(ve().m,{renderTooltip:()=>(0,we.jsx)(M().sA,{defaultMessage:"Discard changes",id:"workflows.agentTopbar.resetSubmitText"}),render:e=>(0,we.jsx)(me().A,{size:"md",colorVariant:"secondary",ariaLabel:x.formatMessage({defaultMessage:"Discard changes",id:"workflows.agentTopbar.resetSubmitText"}),icon:o(454503).arrowUTurnUpLeftIcon,onClick:C,disabled:S||i,...e})}):void 0,a&&g?(0,we.jsx)(o(406094).A,{onClick:f,disabled:(S||i)&&!d,iconLeading:{icon:o(670371).eyeSmallIcon,size:"sm"},size:"md",children:(0,we.jsx)(M().sA,{defaultMessage:"Preview",id:"workflows.agentTopbar.preview"})}):void 0,a?(0,we.jsx)(o(160432).A,{onClick:j,colorPalette:"blue",disabled:S||i||!l,size:"md",children:(0,we.jsx)(M().sA,{defaultMessage:"Save",id:"workflows.agentTopbar.save"})}):void 0]}),(0,we.jsx)("div",{style:I.content,children:(0,we.jsx)(o(644521).b,{workflowOrArtifactStore:t,workflowStore:t,disabled:i||!a,workflowValidationErrorStore:r})})]})}));var Oe=()=>o(628174),Ke=()=>o(941250);function We({agentPeekState:e}){const t=(0,c().v3)(),o=(0,u().K8)((()=>N().default.getSidePeekWidth(t.WindowSizeStore.state.width)),[t]),r=n.useRef(null),i=(0,le().h)(e.agentId),a=(0,u().K8)((()=>!1===(null==i?void 0:i.getAlive())),[i]),l=(0,p().IS)((()=>({containerStyles:{position:"absolute",top:a?Oe().v:0,insetInlineEnd:0,bottom:0,zIndex:109,pointerEvents:e.open?"auto":"none"},contentStyles:{flexDirection:"column",position:"absolute",display:"flex",marginInlineStart:"auto",background:I().Tj.background.elevated,top:0,insetInlineEnd:0,width:"100%",height:"100%",borderRadius:0,borderInlineStartWidth:1,borderInlineStartStyle:"solid",borderInlineStartColor:I().Tj.border.secondary}})),[e.open,a]),d=(0,n.useCallback)((()=>{e.open?e.isOpening&&de().S.setState({...e,isOpening:!1}):(0,ie().a2)()}),[e]);return e.agentId&&e.mode?(0,we.jsx)(s().A,{forceCompositeLayer:!0,animate:{translateX:e.open?0:o,width:o},initial:{translateX:e.open&&!e.isOpening?0:o,width:o},style:l.containerStyles,className:y().Hfz,onAnimationEnd:d,children:(0,we.jsxs)("div",{style:l.contentStyles,ref:r,children:[(0,we.jsx)(W().A,{sidebarRef:r,type:"peek"}),(0,we.jsx)(Ne,{agentId:e.agentId,mode:e.mode})]})}):null}function Ne(e){const{agentId:t,mode:o}=e,r=(0,c().v3)(),{navigate:a}=(0,n.useContext)(G().E),s=(0,i().L)(),l=(0,le().h)(t),d=(0,u().uB)(void 0,ue().K),p=(0,u().uB)(void 0,ne().A),[g,f]=(0,n.useState)(!1),[m,h]=(0,n.useState)(!1),[v,y]=(0,n.useState)({type:"all"}),k=(0,u().K8)((()=>r.RouterStore.state.route),[r.RouterStore]),x=(0,H().X)("custom_agents_general_feedback_form"),[w,j]=(0,oe().z)(),C=(0,n.useMemo)((()=>x&&j>700),[j,x]),M=(0,re().P)({name:"custom_agents",spaceId:null==s?void 0:s.id,userId:r.currentUser.id}),I=(0,u().K8)((()=>(0,se().jp)(l)),[l]),T=(0,u().K8)((()=>!1===(null==l?void 0:l.getAlive())),[l]),{preview_button:A,stuck_run_threshold_seconds:_}=(0,u().K8)((()=>U().default.getConfig({configName:"custom_agent_sub_features"})),[]),P=_??J().NK,E=(0,u().K8)((()=>{var e;if(!l)return{hasNeverBeenPublished:!1,hasChanges:!1,edits:[],hasEditPermission:!1};const t=null===(e=l.getPublishedArtifactStore())||void 0===e?void 0:e.getData(),o=l.getDraftData(),n=(0,q().ap)(null==o?void 0:o.instructions)?$().B.createChildStore(l,o.instructions):void 0,{edits:r}=(0,Y().x)({oldWorkflow:t,newWorkflow:o,oldWorkflowLastEditedTime:null==t?void 0:t.publishTime,newWorkflowLastEditedTime:null==n?void 0:n.getLastEditedTime()});return{hasNeverBeenPublished:!!l&&!l.getPublishedArtifactStore(),hasChanges:l.hasChanges(),edits:r,hasEditPermission:l.canEdit()}}),[l]),B=(0,n.useMemo)((()=>"failed"===v.type&&P?{...v,stuckThresholdMs:1e3*P}:v),[v,P]),D=(0,ee().s)({parentStore:s,threadStore:void 0,workflowId:null==l?void 0:l.id,isEnabled:"activity"===o&&Boolean(l&&s),enableInfiniteScroll:!0,pageSize:10,filter:B}),R=(0,n.useMemo)((()=>new(ce().t)(D)),[D]);(0,n.useEffect)((()=>{R.updateThreadHistory(D)}),[R,D]);const L=(0,n.useCallback)((()=>{if("agent"!==k.name)if("chat"!==k.name)(0,ie().zM)();else{const e={};k.threadId&&(e.t=(0,Q().Xw)(k.threadId));const t=(0,Z().Gm)({url:"/chat",query:e});a({environment:r,url:t})}else{const e=(0,X().L)({workflowId:k.workflowId,params:{workflowViewType:"chat",workflowViewId:k.workflowViewId,workflowPrompt:k.workflowPrompt,chatThreadId:k.chatThreadId,agentChatThreadId:k.agentChatThreadId}});a({environment:r,url:e})}}),[r,a,k]),z=(0,n.useCallback)((e=>{if(!e)return void L();const o=(0,N().getUrlParamFromPeekMode)(S().A);if("agent"!==k.name){if("chat"===k.name){const n=(0,X().Y)({workflowId:t,workflowViewType:e,peekModeParam:o,threadId:k.threadId});a({environment:r,url:n})}}else{const t=(0,X().L)({workflowId:k.workflowId,params:{workflowViewType:e,workflowViewId:k.workflowViewId,workflowPrompt:k.workflowPrompt,chatThreadId:k.chatThreadId,agentChatThreadId:k.agentChatThreadId},peekViewBlockId:k.workflowId,peekModeParam:o});a({environment:r,url:t})}}),[t,r,L,a,k]),V=(0,n.useCallback)((()=>h(!1)),[]),O=(0,n.useCallback)((()=>h(!0)),[]),K=(0,n.useCallback)((()=>f(!1)),[]),W=(0,n.useCallback)((()=>f(!0)),[]),F=(0,n.useCallback)((async()=>{await R.refreshThreads()}),[R]);if(!l||!s)return(0,we.jsx)("div",{ref:w,style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,we.jsx)(b().A,{})});const{hasEditPermission:de,hasNeverBeenPublished:pe,edits:ge,hasChanges:fe}=E,me=T||!de||!M||I,he="agent"===k.name?k.agentChatThreadId:"chat"===k.name?k.threadId:void 0;return(0,we.jsx)("div",{ref:w,style:{height:"100%"},children:(0,we.jsxs)(ae().aG,{store:R,children:[m?(0,we.jsx)(Ke().D,{workflowStore:l,onClose:V}):void 0,g?(0,we.jsx)(De().z,{workflowStore:l,isOpen:g,onClose:K}):void 0,"settings"===o?(0,we.jsx)(Ve,{workflowStore:l,workflowValidationErrorStore:d,disabled:me,hasEditPermission:de,onClose:L,hasChanges:fe,hasNeverBeenPublished:pe,edits:ge,shouldShowPreviewButton:Boolean(A),onPreview:W,shouldShowFeedbackButton:C,activeSidePeek:o,onSidePeekChange:z,onShowVersionHistory:O,sudoModeStore:p}):(0,we.jsx)(Be,{clientStore:te().defaultClientAIChatStore,workflowStore:l,spaceStore:s,workflowViewType:o,activityFilter:v,setActivityFilter:y,onRefreshActivity:F,onClose:L,hasEditPermission:de,activeThreadId:he,shouldShowFeedbackButton:C,activeSidePeek:o,onSidePeekChange:z,disabled:T,onShowVersionHistory:O,sudoModeStore:p})]})})}o(737550);var Fe=()=>o(726637),He=()=>o(75435),Ue=()=>o(433337),Ge=()=>o(418135),$e=()=>o(803960),Ye=()=>o(539174),Xe=()=>o(281948),qe=()=>o(462113),Qe=()=>o(594251),Ze=()=>o(869609),Je=()=>o(813401),et=()=>o(783423),tt=()=>o(635462),ot=()=>o(499764),nt=()=>o(466088);function rt(e){const{isSidePeekOpen:t,borderRadius:o,isElectronWindows:n,isShowingTabBar:r,zoomFactor:i}=e;return{zIndex:t?100:110,background:I().Tj.background.elevated,borderStartStartRadius:o??12,borderStartEndRadius:o??12,paddingInlineEnd:n&&t&&!r?(0,Ge().yA)(i):void 0}}const it=12;function at(e){const{environment:t}=e,o=Fe().A.isMobile?4:it,n=Fe().A.isMobile?4:10;return{height:C().ek(t.device.isElectronMac),display:"flex",justifyContent:"space-between",alignItems:"center",paddingInlineStart:o,paddingInlineEnd:n}}var st=()=>o(891078),lt=()=>o(490287),dt=()=>o(302996),ct=()=>o(574359),ut=()=>o(284371),pt=()=>o(489242),gt=()=>o(810703);var ft=()=>o(35392),mt=()=>o(187820),ht=()=>o(16006),vt=()=>o(453697),yt=()=>o(381678),kt=()=>o(696746),bt=()=>o(376049);const xt={display:"flex",alignItems:"center",fontSize:14,minWidth:0};function St(e,t){return e&&e instanceof dt().SpaceStore&&t&&e.id===t.id}function wt(e){const{parentStore:t,prefixText:o}=e,n=(0,c().v3)(),r=(0,u().K8)((()=>(0,yt()._)(n)),[n]),i=(0,u().K8)((()=>t instanceof $().B&&t.isEmptyPage()),[t]),s=(0,u().K8)((()=>t.getIcon()),[t]),l=(0,u().K8)((()=>t instanceof dt().SpaceStore?(0,ct().G)(n,t):void 0),[n,t]),d=(0,u().K8)((()=>{const{sidebarSpaceStore:e}=a().default.state;return St(t,e)}),[t]),g=(0,u().K8)((()=>(0,mt().Te)(t)),[t]),f=(0,p().IS)((()=>({privatePagesText:{fontWeight:ut().Wy.medium,marginInlineStart:4,...ut().RC,overflow:"hidden"},icon:{marginInlineEnd:4,marginTop:1},title:{fontWeight:ut().Wy.semibold}})),[]);return d?(0,we.jsxs)(we.Fragment,{children:[o,(0,we.jsx)(vt().A,{size:22,avatarShouldShowShadow:!0,userStore:r}),(0,we.jsx)("span",{style:f.privatePagesText,children:(0,we.jsx)(M().sA,{defaultMessage:"Private pages",id:"peekMoveToMenu.addTo.privatePages"})})]}):(0,we.jsxs)(we.Fragment,{children:[o,(0,we.jsx)(mt().B6,{disabled:!0,icon:s,iconRecordCategory:g,isEmptyPage:i,title:l,size:18,style:f.icon}),(0,we.jsx)(ht().A,{style:f.title,store:t})]})}const jt=function({store:e,prefix:t,buttonStyle:r,saveParent:i,pageType:s,forceUntyped:d}){const p=(0,c().v3)(),g=(0,u().K8)((()=>{const e=a().default.state.mainEditorCurrentBlockStore;return e&&(0,kt().lU)(e)?"home_tab":e&&(0,tt().s)(e.id)?"aggregated_type":"quick_add"}),[]),f=(0,u().K8)((()=>e.getParentStore()),[e]),m=(0,n.useRef)(null),h=(0,n.useCallback)((t=>function(e,t,o,n,r,i,s,l){e.preventDefault(),t&&bt().ho({environment:o,blocks:[n],originRect:t.getBoundingClientRect(),moveToContext:i,onAccept:({value:e})=>function(e,t,o,n){const{sidebarSpaceStore:r}=a().default.state;if(r&&t){let t;!function(e){const{pageType:t,spaceStore:o,currentUserId:n,result:r}=e;(0,gt().lQ)({currentUserId:n,spaceId:o.id,value:r}),t&&(0,gt().tj)({currentUserId:n,spaceId:o.id,databaseType:pt().W7[t],parent:r})}({pageType:t||n,spaceStore:r,currentUserId:o.currentUser.id,result:e})}}(e,r,o,s),isAddTo:!0,isDefaultPrivateLocation:Ct(n),disableSuccessToast:!0,forceUntyped:l||Mt(s)})}(t,m.current,p,e,i,g,s,d)),[m,p,e,i,g,s,d]);if(f&&!(f instanceof o(26105).j)&&!(f instanceof o(929345).b)&&!(f instanceof o(983933).v)&&!(f instanceof o(569797).p)&&!(f instanceof o(197636).K)&&!(f instanceof o(400583).Z)&&!(f instanceof o(374580).g)&&!(f instanceof o(350013).N)){const e=t?(0,we.jsx)("span",{style:{color:I().Tj.text.secondary,marginInlineEnd:4},children:(0,we.jsx)(M().sA,{...t})}):void 0;return(0,we.jsx)(l().N,{debugName:"PeekMoveToMenu",capture:!0,onMoveTo:h,children:(0,we.jsx)("div",{style:xt,children:(0,we.jsx)(ve().m,{renderTooltip:()=>(0,we.jsxs)("div",{children:[(0,we.jsx)(M().sA,{defaultMessage:"Set the default page or database",id:"peekMoveToMenu.tooltip"}),(0,we.jsx)("br",{}),(0,we.jsx)(ft().A,{style:{color:I().Tj.text.inverseSecondary},name:"moveTo"})]}),render:t=>(0,we.jsx)(o(631524).p,{onClick:h,ref:m,shouldShrink:!0,style:r,iconTrailing:{icon:o(324254).arrowChevronSingleDownSmallIcon,colorVariant:"tertiary",size:"xs"},...t,children:(0,we.jsx)(wt,{parentStore:f,prefixText:e})})})})})}return null};function Ct(e){const t=e.getParentStore(),{sidebarSpaceStore:o}=a().default.state;return St(t,o)}function Mt(e){return!e||"page"===e}var It=()=>o(712287),Tt=()=>o(204263),At=()=>o(58180),_t=()=>o(77246),Pt=()=>o(612587),Et=()=>o(609044),Bt=()=>o(212640),Dt=()=>o(135082),Rt=()=>o(657982),Lt=()=>o(716883),zt=()=>o(947682),Vt=()=>o(764172),Ot=()=>o(487146),Kt=()=>o(488134),Wt=()=>o(198688),Nt=(o(672577),()=>o(371722)),Ft=()=>o(552712),Ht=()=>o(735790),Ut=()=>o(120739),Gt=()=>o(496603),$t=()=>o(321775),Yt=()=>o(339798),Xt=()=>o(447453),qt=()=>o(121544),Qt=()=>o(999140),Zt=()=>o(492414);const Jt=(0,M().YK)({changeForThisView:{id:"peekTopbar.changePeekOption.changeForThisView",defaultMessage:"Edit view default"},switchPeekMode:{id:"peekTopbar.openPagesAs.button",defaultMessage:"Switch peek mode"}});const eo=function({store:e,onClick:t,onDismissPopup:n,onClosePeek:r}){const i=(0,c().v3)(),a=(0,M().tz)();(0,o(852507).l)((()=>{const e=oo(),t=N().default.getPeekMode();e.find((e=>Gt().n4(e.key,t)))||o(165358).log({level:"warning",from:"TopbarPeekModeButton",type:"InvalidSelectedPeekMode",error:(0,o(229833).convertErrorToLog)("Selected key is invalid.")})}));const s=oo(),l=(0,u().K8)((()=>N().default.getPeekMode()),[]);return l?(0,we.jsx)(ge().A,{popupType:Fe().A.isMobile?pe().nl.SlideUp:pe().nl.Popup,alignmentToOrigin:"center",placementToOrigin:"bottom",style:{minWidth:190},originGap:0,onClick:()=>{!function(e){if(!N().default.state.open)return;const t=N().default.state.collectionContextStore;t?(0,$t().m)({environment:e,collectionContextStore:t,from:"peek_topbar",peek_target_id:N().default.state.targetStore.id,from_peek_mode:N().default.state.mode}):T().pU(e,{from:"peek_topbar",peek_target_id:N().default.state.targetStore.id,from_peek_mode:N().default.state.mode})}(i),t&&t()},onClose:n,renderOrigin:e=>(0,we.jsx)(ve().m,{renderTooltip:()=>a.formatMessage(Jt.switchPeekMode),render:t=>(0,we.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:2},children:[(0,we.jsx)(Wt().A,{}),(0,we.jsx)(me().A,{...e,...t,icon:(0,qt().qg)(l),iconStyle:{width:Ce().Ev.default,height:Ce().Ev.default,fill:I().Tj.icon.secondary},ariaLabel:a.formatMessage(Jt.switchPeekMode)})]})}),render:t=>(0,we.jsx)(to,{parent:t,currentPeekMode:l,options:s,store:e,onClosePeek:r})}):null};function to({currentPeekMode:e,options:t,store:o,onClosePeek:n,parent:r}){const i=(0,M().tz)(),s=(0,c().v3)();let l;l=Fe().A.isMobile?{menuType:he().gu.ActionSheet}:{menuType:he().gu.Popup,width:220};const d=(0,u().K8)((()=>{const{RouterStore:n}=s,i=n.state.route;return Gt().oE([...t.map(((t,n)=>{const l=t.key,d=void 0===l||"full_page"===l?void 0:(0,N().getUrlParamFromPeekMode)(l),c="full_page"===l?(0,Zt().Ay)({store:o,fullyQualified:!1,pageVisitSource:x().y8.Expand}):"team"===i.name?(0,Ut().a)({teamId:i.teamId,spaceId:i.spaceId,peekInfo:d?{peekMode:d,peekViewBlockId:o.id}:void 0}):function(e,t,o){const{mainEditorCurrentBlockStore:n}=a().default.state,r=(0,Nt().f)(o,{includeTeamHomeFeed:!1,includeDataSources:!1}),i=o.isNavigableBlock()?r.slice(1):[...r],s=i.length>0?i[0]:void 0;return(0,Qt().wy)({environment:e,store:o,mainEditorCurrentBlockStore:s instanceof $().B&&!N().default.state.open?s:n,collectionContextStore:N().default.state.collectionContextStore,fullyQualified:!1,overridePeekMode:(0,N().getPeekModeFromCollectionPeekModeFormat)(t)})}(s,l,o);return{key:n,render:o=>(0,we.jsx)(Ft().N,{href:c,onClick:()=>{var t;T().z9(s,{from:"peek_topbar",peek_mode:l,from_peek_mode:e,target_page_id:null===(t=N().default.peekTargetStore.state)||void 0===t?void 0:t.id}),r.close()},children:(0,we.jsx)(ke().A,{...o,disabled:!1,title:t.title,icon:t.icon,caption:t.caption,body:t.body,isChecked:Gt().n4(t.key,e)})}),action:()=>{}}}))])}),[t,e,s,o,r]),p=(0,u().K8)((()=>N().default.state.open?N().default.state.collectionContextStore:void 0),[]),g=(0,u().K8)((()=>N().default.state.open?N().default.state.targetStore:void 0),[]),f=(0,u().O$)(a().AppStoreMainEditorCurrentBlockStore),m=(0,u().K8)((()=>{var e,t,o;const n=f&&f.id===(null==p||null===(e=p.collectionViewBlockStore())||void 0===e?void 0:e.getRecordStoreUIRoot().id);return(null==p||null===(t=p.collectionStore())||void 0===t?void 0:t.id)===(null==g||null===(o=g.getAssociatedCollectionStore())||void 0===o?void 0:o.id)&&(null==p?void 0:p.permissionScopesStore.state.canConfigureBlock)&&n}),[f,p,g]);return(0,we.jsx)(ye().A,{...l,children:(0,we.jsx)(be().A,{type:be().O.Vertical,sections:Gt().oE([{key:0,render:e=>(0,we.jsx)(xe().A,{enableActionSheetTitle:!0,...e}),items:d},m&&{key:1,render:e=>(0,we.jsx)(xe().A,{enableActionSheetTitle:!0,topBorder:!0,...e}),items:[{key:"change_for_view",render:e=>(0,we.jsx)(ke().A,{...e,disabled:!1,title:i.formatMessage(Jt.changeForThisView),icon:(0,we.jsx)(fe().I,{icon:Ht().M,colorVariant:"primary"})}),action:e=>{!function(e,t){const o=N().default.state.open?N().default.state.collectionContextStore:void 0;o&&(N().default.isCenterPeekOpen()&&t&&t(),(0,Xt().O)({collectionContextStore:o,collectionSettingsStore:o.settingsStore}),Yt().a2({collectionSettingsStore:o.settingsStore,item:{type:"layout"}}),o.settingsStore.setState({...o.settingsStore.state,openButtonPopup:"peekModeFormat"}))}(0,n),r.close()}}]}]),initialFocus:0})})}function oo(){return["side_peek","center_peek","full_page"].map((e=>({key:e,type:"button",title:(0,qt().LA)(e),icon:(0,qt().qg)(e)({width:Ce().Ev.default,height:Ce().Ev.default,fill:I().Tj.text.secondary})})))}var no=()=>o(126126),ro=()=>o(586252),io=()=>o(551780);const ao=(0,M().YK)({moveToPrefixText:{id:"peekMoveToMenu.moveTo.moveTo",defaultMessage:"Move to"},addToPrefixText:{id:"peekMoveToMenu.addTo.addTo",defaultMessage:"Add to"},closeButton:{defaultMessage:"Close",id:"peekTopbar.close.button"},previousPageTooltip:{defaultMessage:"Previous page",id:"peekTopbar.peekNavUpArrow.tooltip"},nextPageTooltip:{defaultMessage:"Next page",id:"peekTopbar.peekNavDownArrow.tooltip"},closeLayoutInfoPanelTooltip:{defaultMessage:"Close panel",id:"peekTopbar.closeLayoutInfoPanelButton.tooltip"}});const so=function({store:e,shouldShowMoveToMenu:t,onClose:r,spaceStore:i,spaceViewStore:a,pageVisitStore:s,presenceStore:l}){const d=(0,c().v3)(),g=(0,u().K8)((()=>N().default.isSidePeekOpen()),[]),{banners:f}=(0,u().O$)(Pt().A),m=(0,u().K8)((()=>e.canEdit()),[e]),h=(0,u().K8)((()=>e.canRead()&&e.isDefined()),[e]),v=(0,u().O$)(He().b),k=(0,u().K8)((()=>He().A.state.zoomFactor||Ge().rx),[]),b=d.device.isElectron&&!v&&g,x=(0,u().K8)((()=>e.isFormBlock()),[e]),S=(0,u().K8)((()=>z().A.getPanelState("peek").isMouseHoveringPanel),[]),w=(0,u().K8)((()=>"static_sidebar"===z().A.getPanelState("peek").displayStyle&&z().A.getPanelState("peek").isOpen),[]),[j,C]=n.useState(!1),M=(0,u().K8)((()=>N().default.state.topHoverAreaEntered),[]),I=(0,p().IS)((()=>{const e=M||j;return{peekControlsWrapper:{display:"grid",gridAutoFlow:"column",gridColumnGap:2,alignItems:"center"},hoverBtn:{opacity:e?1:0,pointerEvents:e?"auto":"none",transition:"opacity 100ms ease"}}}),[M,j]),T=w&&(M||S);return(0,we.jsx)(O().A,{store:e,disableRectangularSelection:!0,disableEditNearestBlock:!0,render:({selectableEvents:n})=>(0,we.jsxs)("div",{...n,style:{height:x?0:void 0,...rt({isSidePeekOpen:g,isElectronWindows:d.device.isElectronWindows,isShowingTabBar:v,zoomFactor:k})},className:`${y().S6D} ${b?y().sbV:""}`,children:[(0,we.jsxs)("div",{style:at({environment:d}),children:[(0,we.jsxs)("div",{style:I.peekControlsWrapper,children:[(0,we.jsx)(uo,{onClose:r}),x?void 0:(0,we.jsx)(o(361946).A,{store:e,shouldShowMoveToMenu:t}),(0,we.jsx)(lo,{store:e,shouldShowMoveToMenu:t}),m?(0,we.jsx)(o(389657).A,{store:e,buttonStyle:{margin:0}}):void 0,x?void 0:(0,we.jsx)("div",{style:I.hoverBtn,children:(0,we.jsx)(eo,{store:e,onClick:()=>C(!0),onDismissPopup:()=>C(!1),onClosePeek:r})}),(0,we.jsx)("div",{style:{...I.hoverBtn,...I.peekControlsWrapper},children:(0,we.jsx)(po,{shouldShowMoveToMenu:t})})]}),h?(0,we.jsx)(co,{store:e,spaceStore:i,spaceViewStore:a,pageVisitStore:s,presenceStore:l,shouldShowLayoutPanelCloseButton:T}):void 0]}),f.length>0?(0,we.jsx)(o(885962).x,{banners:f,bannerStore:Pt().A}):void 0]})})};function lo({store:e,shouldShowMoveToMenu:t}){const{open:o,saveParent:n,pageVisitSource:r,collectionContextStore:i}=(0,u().K8)((()=>({open:N().default.state.open,saveParent:!!N().default.state.open&&N().default.state.saveParent,pageVisitSource:N().default.state.open?N().default.state.pageVisitSource:void 0,collectionContextStore:N().default.state.collectionContextStore})),[]),a=(0,u().K8)((()=>{const t=e.getAssociatedCollectionStore();return(null==t?void 0:t.getDatabaseType())===Ue().dC?"tasks":void 0}),[e]),s=(0,u().K8)((()=>"collectionTypedView"===(null==i?void 0:i.contextTypeFromStoreState)),[i]);return o&&t?(0,we.jsxs)(we.Fragment,{children:[(0,we.jsx)(Wt().A,{}),(0,we.jsx)(jt,{store:e,saveParent:n,prefix:s?ao.moveToPrefixText:ao.addToPrefixText,pageType:a,forceUntyped:r===x().y8.SidebarQuickAdd})]}):null}function co({store:e,spaceStore:t,spaceViewStore:o,pageVisitStore:r,presenceStore:i,shouldShowLayoutPanelCloseButton:a}){const s=(0,c().v3)(),l=(0,c().Y0)(),d=(0,u().K8)((()=>(0,ot().qb)(s,e,e.getSpaceStore())),[s,e]),g=(0,u().K8)((()=>t&&t.id!==e.getSpaceId()),[t,e]),f=(0,u().K8)((()=>(0,tt().s)(e.id)),[e]),h=(0,u().K8)((()=>(0,kt().Nh)(e.id)),[e]),v=(0,u().K8)((()=>e.isDraft()),[e]),y=(0,u().K8)((()=>e.isFormBlock()),[e]),k=(0,u().K8)((()=>e.isPageBlock()),[e]),b=(0,u().K8)((()=>e.isExternalObjectInstancePageBlockStore()),[e]),x=(0,u().K8)((()=>!Fe().A.isMobile&&t&&o&&!d&&!g&&!h&&!y&&(0,zt().shouldShowTopbarMoreButton)({blockType:e.getType(),systemBlockType:e.getSystemBlockTypeStore().getValue(),isGuestPrivatePage:(0,At().E)(e,o)})),[e,t,o,d,g,h,y]),w=(0,lt().Yj)({blockStore:e}),C=(0,u().O$)(D().gZ),I=(0,u().K8)((()=>e.canEdit()),[e]),T=(0,u().K8)((()=>{var t;return null===(t=_t().Uv.getStateForBlock(e.id))||void 0===t?void 0:t.mode}),[e.id]),{suggestTranslation:A,suggestedPageTranslationLanguage:_,detectedPageLanguage:P,setTranslationSuggestionDismissed:E}=(0,ro().V)(e),R=!Fe().A.isMobile&&(k||b)&&!y,z=(0,st().i0)(e),V=(0,lt().oo)({blockStore:e,spaceStore:t,spaceViewStore:o}),O=(0,u().K8)((()=>e.getParentTable()===j().C0),[e]),K=t&&o&&!y&&!d&&!g&&!z&&"translate_locked"!==T&&!O,W=(0,M().tz)(),F=n.useCallback((()=>{var t;const o=null===(t=e.getAssociatedCollectionStore())||void 0===t?void 0:t.getLayoutStore();o&&(0,It().F)({environment:s,layoutStore:o,from:"topbar",panelLocation:"peek"})}),[e,s]),U=(0,u().K8)((()=>(0,nt().w)(s)),[s]),G=(0,u().K8)((()=>e.isTeamPost()),[e]),$=(0,H().X)("feed_sidebar_item"),Y=(0,u().K8)((()=>{const e=(0,B().rK)(),t=N().default.state.mode===S().O&&"posts"===s.RouterStore.state.route.name;return $?t:e}),[s,$]),X=function(){const e=(0,c().v3)(),t=(0,u().K8)((()=>{const t=Fe().A.isMobile?void 0:(0,L().eO)({environment:e,isInPeek:!0});return t?t-it:void 0}),[e]);return(0,p().IS)((()=>({wrapStyles:{display:"flex",alignItems:"center",flexGrow:0,flexShrink:0,zIndex:1,minWidth:t,paddingInlineStart:it,justifyContent:"flex-end"}})),[t]).wrapStyles}();return(0,we.jsxs)("div",{style:X,children:[a?(0,we.jsx)(ve().m,{renderTooltip:()=>(0,we.jsx)("div",{children:W.formatMessage(ao.closeLayoutInfoPanelTooltip)}),disableTooltip:!a,render:e=>(0,we.jsx)(me().A,{...e,ariaLabel:W.formatMessage(ao.closeLayoutInfoPanelTooltip),icon:Se().O,iconStyle:{width:Ce().Ev.default,height:Ce().Ev.default},onClick:F})}):null,U?(0,we.jsx)("div",{style:{flexGrow:1}}):void 0,_&&P?(0,we.jsx)(Rt().Z6,{store:e,isVisible:A,compact:!0,setTranslationSuggestionDismissed:()=>E(!0),suggestedPageTranslationLanguage:_,detectedPageLanguage:P}):void 0,(0,we.jsx)(et().M,{store:e,isVisible:"suggest"===T&&!y,compact:!0}),h||y||C||A||"suggest"===T?void 0:(0,we.jsx)(Lt().y,{store:e,isExpanded:!1,isWindowSmall:!0,isElectron:l.isElectron,isShowingTabBar:!1}),!I||y||G?void 0:(0,we.jsx)(no().Ay,{rootStore:e,pageVisitStore:r,presenceStore:i}),V?(0,we.jsx)(Je().E,{store:e,buttonPopupStore:Bt().A}):void 0,R?(0,we.jsx)(Kt().n,{blockStore:e,buttonPopupStore:Dt().A,pageViewBlockContext:m().R.PeekView}):void 0,w?(0,we.jsx)(Vt().Ay,{blockStore:e,unreadDiscussionsPopupStore:Qe().d}):void 0,K?(0,we.jsx)(Ot().TopbarFavoriteButton,{store:e,spaceViewStore:o}):void 0,y?(0,we.jsx)(qe().A,{formBlockStore:e,inPeekMode:!0}):void 0,f?(0,we.jsx)(Tt().A,{}):void 0,x?(0,we.jsx)(Ze().u,{store:e,buttonPopupStore:Et().A}):void 0,v&&!Y?(0,we.jsx)(io().F4,{store:e}):void 0]})}function uo({onClose:e}){const t=(0,M().tz)();return(0,u().K8)((()=>N().default.isSidePeekOpen()),[])?(0,we.jsx)(ve().m,{renderTooltip:()=>(0,we.jsxs)("div",{children:[t.formatMessage(ao.closeButton),(0,we.jsx)("br",{}),(0,we.jsx)(ft().A,{style:{color:I().Tj.text.inverseSecondary},name:"esc"})]}),render:o=>(0,we.jsx)(me().A,{...o,ariaLabel:t.formatMessage(ao.closeButton),icon:Se().O,iconStyle:{width:Ce().Ev.default,height:Ce().Ev.default},onClick:()=>e("close_button")})}):null}function po({shouldShowMoveToMenu:e}){const t=(0,M().tz)(),o=(0,u().O$)(N().default),{resultsStore:n}=o,r=(0,u().K8)((()=>null==n?void 0:n.getState()),[n]);if(!o.open)return null;if(e)return null;const i=o.targetStore.id;return r&&r.length>0&&r.some((e=>e.id===i))?(0,we.jsxs)(we.Fragment,{children:[(0,we.jsx)(Wt().A,{}),(0,we.jsx)(ve().m,{renderTooltip:()=>(0,we.jsxs)("div",{children:[t.formatMessage(ao.previousPageTooltip),(0,we.jsx)("br",{}),(0,we.jsx)(ft().A,{style:{color:I().Tj.text.inverseSecondary},name:"peekUp"})]}),render:e=>(0,we.jsx)(me().A,{...e,ariaLabel:t.formatMessage(ao.previousPageTooltip),disabled:i===r[0].id,icon:Ye().h,onClick:()=>Xe().NQ(),colorVariant:"secondary",iconStyle:{width:Ce().Ev.default,height:Ce().Ev.default}})}),(0,we.jsx)(ve().m,{renderTooltip:()=>(0,we.jsxs)("div",{children:[t.formatMessage(ao.nextPageTooltip),(0,we.jsx)("br",{}),(0,we.jsx)(ft().A,{style:{color:I().Tj.text.inverseSecondary},name:"peekDown"})]}),render:e=>(0,we.jsx)(me().A,{...e,ariaLabel:t.formatMessage(ao.nextPageTooltip),disabled:i===r[r.length-1].id,icon:$e().arrowChevronSingleDownIcon,onClick:()=>Xe().ET(),colorVariant:"secondary",iconStyle:{width:Ce().Ev.default,height:Ce().Ev.default}})})]}):null}function go(){const e=(0,u().K8)((()=>N().default.state.open),[]),t=(0,n.useContext)(d().w),o=(0,p().IS)((()=>({containerStyles:{position:"fixed",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:99,background:I().Tj.overlaySmokescreen},contentStyles:{...ko(),top:N().PeekModeOuterPadding,insetInlineStart:N().PeekModeOuterPadding,insetInlineEnd:N().PeekModeOuterPadding,marginInlineEnd:"auto",height:`calc(100% - ${N().PeekModeOuterPadding}px*2)`,maxWidth:N().CenterPeekModeOuterWidth+t,borderRadius:12,overflow:"hidden"}})),[t]);return(0,we.jsx)(k().O,{open:e,children:(0,we.jsx)(ho,{enableCaptureClick:!0,priority:void 0,showResizer:!1,styles:o})})}function fo(){const e=(0,c().v3)(),t=(0,u().O$)(N().default),o=(0,u().K8)((()=>N().default.getSidePeekWidth(e.WindowSizeStore.state.width)),[e]),a=(0,u().K8)((()=>e.RouterStore.state.route),[e.RouterStore]),l="agent"===a.name?a.workflowId:void 0,d=(0,le().h)(l),g=(0,i().L)(),m=(0,u().K8)((()=>{if("chat"!==a.name||!a.threadId)return;if(!g)return;const e=v().E.createChildStore(g,{table:w().To,id:a.threadId,spaceId:g.id}),t=null==e?void 0:e.getParentStore();return(null==t?void 0:t.table)===j().C0?t:void 0}),[a,g]),h=(0,u().K8)((()=>!1===(null==d?void 0:d.getAlive())||!1===(null==m?void 0:m.getAlive())),[d,m]),y=(0,p().IS)((()=>({containerStyles:{position:"absolute",top:h?Oe().v:0,insetInlineEnd:0,bottom:0,width:o,zIndex:109},contentStyles:{...ko(),top:0,insetInlineEnd:0,width:"100%",height:"100%",borderRadius:0}})),[o,h]),k=(0,u().O$)(f().P),b=n.useRef(null);return(0,we.jsx)(s().A,{tag:ho,forceCompositeLayer:!0,skip:k,animate:{translateX:t.open&&!t.isClosing?0:o,width:o},initial:{translateX:t.open?0:o},onAnimationStart:()=>{b.current=performance.now()},onAnimationEnd:()=>{const o=b.current?Math.round(performance.now()-b.current):null;if(b.current=null,!t.open)return;const n=t.isClosing?"side_peek_renderer_animation_closing":"side_peek_renderer_animation_opening";t.isClosing?(N().default.setState({...t,isClosing:!1}),A().YH()):t.isOpening&&N().default.setState({...t,isOpening:!1}),o&&(0,r().u)({environment:e,event:{eventName:n,eventProperties:{duration_ms:o}}})},enableCaptureClick:!1,priority:-1,showResizer:!0,styles:y})}function mo(){const e=(0,c().v3)(),t=(0,u().O$)(N().default),{currentSpaceStore:o,currentSpaceViewStore:n}=(0,u().K8)((()=>{const{sidebarSpaceStore:e,sidebarSpaceViewStore:t}=a().default.state;return{currentSpaceStore:e,currentSpaceViewStore:t}}),[]),r=(0,u().K8)((()=>{var e;return!!t.open&&(t.showMoveTo||"collectionTypedView"===(null===(e=t.collectionContextStore)||void 0===e?void 0:e.contextTypeFromStoreState))}),[t]);return t.open?(0,we.jsx)(so,{store:t.targetStore,spaceStore:o,spaceViewStore:n,pageVisitStore:t.pageVisitStore,presenceStore:t.presenceStore,shouldShowMoveToMenu:r,onClose:t=>{wo(e,t)}}):null}const ho=n.forwardRef((function(e,t){const{priority:r}=e,i=(0,c().v3)(),a=(0,u().O$)(N().default),s=(0,u().K8)((()=>(0,o(614949).X)(i).shouldShowFrame),[i]),d=(0,u().K8)((()=>R().Gb()),[]),p=(0,u().K8)((()=>a.open&&0===K().default.state.stores.length&&!K().default.state.pivot&&"editing"!==o(232615).default.state.mode&&!o(922614).Ay.state.isOpen),[a.open]),g=(0,n.useCallback)((()=>{jo(i)}),[i]),f=(0,n.useCallback)((()=>{!function(e){N().default.peekTargetStore.state&&(o(857783).uK({environment:e,store:N().default.peekTargetStore.state,pageVisitSource:x().y8.Expand}),T().uO(e,{isNewPage:N().default.state.open&&N().default.state.showMoveTo,peek_mode:N().default.state.mode,from:"command_enter",target_page_id:N().default.peekTargetStore.state.id}),T().Zh(e,{peek_mode:N().default.state.mode,from:"command_enter",target_page_id:N().default.peekTargetStore.state.id,target_parent_id:N().default.peekTargetStore.state.getParentId()}))}(i)}),[i]);if(!s)return null;const m=a.open?(0,we.jsx)(o(429816).A,{debugName:"PeekRenderer",priority:r,capture:d}):null;return(0,we.jsxs)(we.Fragment,{children:[m,(0,we.jsx)(l().N,{debugName:"PeekRenderer",innerKey:a.open?a.targetStore.id:void 0,capture:a.open&&p,onEsc:a.open?g:void 0,onCommandEnter:a.open?f:void 0,children:(0,we.jsx)(vo,{...e,ref:t})})]})})),vo=n.forwardRef((function(e,t){const{enableCaptureClick:r,bottomBar:i,showResizer:a}=e,l=(0,n.useCallback)((e=>{o(779315).A.PeekViewScroller=e??void 0}),[]),d=(0,M().tz)(),f=(0,c().v3)(),v=(0,u().O$)(N().default),k=n.useRef(null),x=C().ek(f.device.isElectronMac),w=(0,o(792485).S)(),j=(0,u().r6)((()=>v.open?V().A.getMode(f,v.targetStore,v.targetStore.getSpaceStore()):V().s.disabled),[f,v]),T=(0,u().r6)((()=>(0,o(68465).ZE)(j.state,null==w?void 0:w.pageStore)),[j,w]),A=(0,u().K8)((()=>{if(!v.open)return;const e=v.targetStore,t=e.getSpaceStore();return{isPeekRenderer:!0,pageStore:e,spaceStore:t,spaceViewStore:t?(0,o(111379).k)(t.id):void 0,presenceStore:v.presenceStore,pageVisitStore:v.pageVisitStore,publicEditModeStore:j,arePublicEditCompletionsEnabledStore:T}}),[v,j,T]),E=(0,n.useCallback)((()=>{jo(f)}),[f]),K=(0,n.useCallback)((()=>{!function(e){wo(e,"empty_space_click")}(f)}),[f]);(0,n.useEffect)((()=>{v.open&&v.mode===S().O?(0,h().j)(!0):(0,h().j)(!1)}),[v.open,v.mode]);const H=(0,u().O$)(D().ei),U=(0,o(671891).l)(v.open?v.targetStore:void 0),{modules:G}=(0,o(152713).f)(v.open?v.targetStore:void 0);(0,L().Du)(f,U);const $=(0,u().K8)((()=>(0,L().eO)({environment:f,isInPeek:!0})),[f]),Y=(0,u().K8)((()=>(0,L().Wi)({environment:f,isInPeek:!0})),[f]),X=(0,u().K8)((()=>N().default.isSidePeekOpen()&&D().I1.state),[]),q=(0,u().K8)((()=>z().A.getPanelState("peek").isOpen),[]),Q=(0,u().K8)((()=>{if(!v.open)return!1;const e=v.targetStore.getAssociatedCollectionStore();return!!e&&(0,L()._D)({collectionStore:e})}),[v]),Z=(0,p().IS)((()=>({...e.styles,containerStyles:{...e.styles.containerStyles,...e.style},layoutStaticSidebar:{width:$,flexShrink:0,paddingBottom:24,borderInlineStart:`1px solid ${I().Tj.border.secondary}`}})),[e.styles,e.style,$]),J=(0,o(721908).d)((e=>{const t=e.target;t instanceof Element&&t.closest(`.${y().S6D}`)?N().default.setTopHoverAreaEntered(!0):N().default.setTopHoverAreaEntered(!1)}),100),ee=(0,o(539412).x9)();n.useEffect((()=>(window.addEventListener("mousemove",J),()=>window.removeEventListener("mousemove",J))),[J]);const te=n.useMemo((()=>v.scrollToBlockId?v.scrollToBlockId:void 0),[v]),oe=(0,u().K8)((()=>f.RouterStore.state.route),[f.RouterStore]);(0,n.useEffect)((()=>{if(!v.open)return;if(!v.loadingContainerStore.state.ready||!v.targetStore)return;const e=("page"===oe.name||"chat"===oe.name||"meet"===oe.name||"agent"===oe.name)&&oe.scrollToBlockId;"page"!==oe.name&&"chat"!==oe.name||!oe.discussionId||te||e||(o(391214).dL(f,[]),o(182641).B4({environment:f,blockStore:v.targetStore,discussionIds:[oe.discussionId],analyticsFrom:"page_load",shouldFocusDiscussion:!0,recursivelyLoadAllDiscussions:!1}))}),[f,v,te,oe]);const ne=(0,u().O$)(T),re=(0,u().K8)((()=>!!v.open&&(v.targetStore.isReady()&&(!v.targetStore.canRead()||!v.targetStore.isDefined()))),[v]),ie=n.useMemo((()=>o(757695).Store.createValue({})),[]),ae=(0,u().K8)((()=>{if(v.open)return ie.state[v.targetStore.id]}),[v,ie]),se=(0,u().K8)((()=>!!v.open&&v.targetStore.isPersonProfile()),[v]),le=(0,o(539801).x)();return(0,n.useEffect)((()=>{if(!v.open||!re)return;if(void 0!==ie.state[v.targetStore.id])return;const e=v.targetStore;o(968877).Li({environment:f,request:{type:"block-space",blockId:e.id,spaceId:e.getSpaceId()},ignoreLocalResult:!0}).then((t=>{ie.update((o=>({...o,[e.id]:Boolean(null==t?void 0:t.canRequestAccess)})))})).catch((e=>{console.error(e)}))}),[re,v,f,ie]),(0,we.jsx)(o(452446).q,{value:A,children:(0,we.jsx)("div",{role:"region","aria-label":d.formatMessage({id:"peekRenderer.ariaLabel",defaultMessage:"Side Peek"}),"aria-hidden":!v.open||void 0,style:Z.containerStyles,className:y().Hfz,ref:t,children:v.open?(0,we.jsxs)(we.Fragment,{children:[r?(0,we.jsx)("div",{style:{width:"100%",height:"100%"},onClick:K}):void 0,(0,we.jsxs)("div",{style:Z.contentStyles,ref:k,children:[X?(0,we.jsx)("div",{style:{position:"absolute",top:10,transform:"translateX(-100%)",insetInlineStart:-10},children:(0,we.jsx)(o(912474).a,{rootStore:H})}):void 0,a?(0,we.jsx)(W().A,{sidebarRef:k,type:"peek"}):void 0,(0,we.jsx)(mo,{}),ee?(0,we.jsx)(o(679192).w,{}):void 0,(0,we.jsx)(o(745803).t,{}),(0,we.jsx)(O().A,{store:v.targetStore,isDefaultContainer:!0,droppable:!0,render:({selectableEvents:e,selectableHoverMenuOverlay:t})=>{const r={pageStore:v.targetStore,pageVisitStore:v.pageVisitStore,render:({ready:r,initialRequestCompleted:i,endOfResultsReached:a,isCollectionInPage:d,scrollerRef:c})=>(0,we.jsxs)("div",{style:Q?{flexGrow:1,display:"flex",maxHeight:`calc(100% - ${x}px)`,height:`calc(100% - ${x}px)`}:{display:"contents"},children:[r?void 0:(0,we.jsx)("div",{style:{position:"relative",width:"100%",flexGrow:1},children:(0,we.jsx)(P().A,{peekMode:N().default.getPeekMode(),isVisible:!r,store:v.targetStore})}),re&&void 0!==ae?(0,we.jsx)(o(75600).O,{canRequestAccess:ae,block:{id:v.targetStore.id,spaceId:v.targetStore.getSpaceId()}}):void 0,re?void 0:(0,we.jsxs)(we.Fragment,{children:[(0,we.jsxs)(o(376254).H,{ref:e=>{if(l(e),c){const t=null==e?void 0:e.getNode();t instanceof HTMLElement&&(c.current=t)}},preventType:r?le:g().A.All,type:g().A.Y,style:r?bo:xo,store:F().A,...e,children:[t,ne?(0,we.jsx)(_().H7,{scrollerStore:F().A}):void 0,(0,we.jsx)(o(447236).E,{scrollerStore:F().A}),i?(0,we.jsxs)(n.Fragment,{children:[se?(0,we.jsx)(o(557558).PersonProfileContainer,{personProfileStore:v.targetStore}):(0,we.jsx)(B().Ay,{context:m().R.PeekView,store:v.targetStore,onTitleEsc:E,forceSelectTitleOnMount:!0,paddingBottom:R().ln,styleOverrides:yo,disabled:!v.open||v.isClosing}),(0,we.jsx)(o(12140).l,{pageVisitStore:v.pageVisitStore,presenceStore:v.presenceStore,isPeekView:!0})]}):void 0,r&&!a?(0,we.jsx)(b().A,{style:So}):void 0]}),ne?(0,we.jsx)(_().X9,{scrollerKey:"PeekView"}):void 0,(0,we.jsx)(s().A,{visible:Q,forceCompositeLayer:!0,animate:{width:$},initial:{translateX:q?0:$},style:Z.layoutStaticSidebar,children:(0,we.jsx)("div",{style:{width:Y,height:"100%"},children:(0,we.jsx)(o(146594).H,{store:v.targetStore,context:m().R.PeekView,disabled:!v.open||v.isClosing||!q,shownAs:"static_sidebar",modules:G})})})]})]})};return(0,we.jsx)(n.Suspense,{fallback:(0,we.jsx)(P().A,{peekMode:N().default.getPeekMode(),isVisible:!0,store:v.targetStore}),children:(0,we.jsx)(o(629537).V,{...r,store:v.loadingContainerStore,scrollToBlockIds:te?[te]:void 0,onReady:()=>{o(424444).M(f,{animateScrollToBlocks:!0,shouldScroll:!0,scrollToBlockId:te})}})})}},v.targetStore.id),i]})]}):void 0})})})),yo={pageCoverHeight:"20vh"};function ko(){return{flexDirection:"column",position:"absolute",display:"flex",marginInlineStart:"auto",background:I().Tj.background.elevated,boxShadow:I().Tj.shadowMD}}const bo={display:"flex",flexDirection:"column",flexGrow:1,position:"relative",transform:"translateZ(0)"},xo={...bo,opacity:0,pointerEvents:"none",height:0},So={zIndex:1,opacity:.5,width:E().K,height:E().K,marginTop:0,marginBottom:24,marginInlineStart:"auto",marginInlineEnd:"auto"};function wo(e,t){A().VN({environment:e,from:t})}function jo(e){wo(e,"esc")}const Co=function(){const e=(0,c().v3)(),t=(0,u().O$)(de().S),r=(0,u().K8)((()=>{const e=N().default.state.open?N().default.state.targetStore:void 0;return null==e?void 0:e.getSystemBlockTypeStore().getValue()}),[]),i=(0,n.useCallback)((()=>{N().default.state.open&&N().default.isSidePeekOpen()&&(o(869562).toggleLeftSidebarByWindowSize(e),N().default.setState({...N().default.state,isOpening:!1}))}),[e]);(0,n.useEffect)((()=>(e.WindowSizeStore.addListener(i),()=>e.WindowSizeStore.removeListener(i))),[e.WindowSizeStore,i]),(0,n.useEffect)((()=>{(0,o(90023).mi)(r)&&A().VN({environment:e,from:"invalid_peek_page"})}),[e,r]);const a=(0,u().K8)((()=>N().default.getPeekMode()),[]);if(Boolean(t.agentId&&t.mode))return(0,we.jsxs)(we.Fragment,{children:[(0,we.jsx)(We,{agentPeekState:t}),a===S().O?(0,we.jsx)(go,{}):a===S().A?(0,we.jsx)(fo,{}):void 0]});switch(a){case S().O:return(0,we.jsx)(go,{});case S().A:return(0,we.jsx)(fo,{})}}},174422:(e,t,o)=>{o.d(t,{A:()=>_});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);var n=o(296540),r=()=>o(484714),i=()=>o(590526),a=()=>o(86159),s=()=>o(69708),l=()=>o(100622),d=()=>o(209199),c=()=>o(496603),u=()=>o(534177),p=()=>o(720665),g=()=>o(661920),f=()=>o(35392),m=()=>o(747100),h=()=>o(822789),v=()=>o(770906),y=()=>o(900652),k=()=>o(941463),b=()=>o(441199),x=()=>o(440024),S=()=>o(712505),w=()=>o(869562),j=()=>o(644914),C=()=>o(749687),M=()=>o(737230),I=o(474848);const T=new Set(["page","secondary_sidebar"]),A=600;const _=function({type:e,sidebarRef:t}){const l=(0,s().tz)(),p=(0,r().v3)(),[g,f]=(0,o(819121).A)(),m=(0,n.useRef)(null),h=(0,o(93583).A)(g,m),v=(0,n.useRef)(!1),y=(0,n.useCallback)((()=>function(e){D({isResizing:!1},e)}(e)),[e]),b=(0,n.useCallback)((()=>function(e,t,o,n){o.current||V(t,e);D({isResizing:!1},t)}(p,e,v)),[p,e]),S=(0,n.useCallback)((o=>{if(t.current)return function(e,t,o,n,r){switch(a().clear(t),r.current=!0,n){case"page":w().setWidth({width:L(e.currentX,o,n),environment:t});break;case"update":w().setUpdateWidth({width:L(e.currentX,o,n),environment:t});break;case"peek":w().setPeekWidth({width:L(e.currentX,o,n),environment:t});break;case"secondary_sidebar":k().Ay.setWidth(L(e.currentX,o,n));break;default:(0,u().HB)(n)}}(o,p,t.current,e,v)}),[p,e,t]),M=(0,n.useCallback)((()=>function(e,t,o){(0,x().I)({environment:e}),o.current=!1,D({...C().sidebarResizingStore.state,isResizing:!0},t)}(p,e,v)),[p,e]),{device:A}=p,_=(0,i().O$)(o(230062).A),R=(0,i().K8)((()=>({cursor:"col-resize",height:"100%",width:12})),[e]),K=(0,i().K8)((()=>function(e,t){const o=(0,j().KB)(t),n="peek"===e||"update"===e;return{position:"absolute",insetInlineStart:n?0:void 0,insetInlineEnd:n?void 0:0,width:1,flexGrow:0,zIndex:"peek"===e?109:1,top:o?0:-1,bottom:o?0:-1,pointerEvents:"auto",backfaceVisibility:"hidden"}}(e,p)),[e,p]),W=(0,i().K8)((()=>{const t=B(e),o=function(e,t){const o=E(e),n=P(e);if(n===o)return 0;return(t-n)/(o-n)}(e,t);return o}),[e]),N=(0,n.useRef)(!1),[F,H]=(0,n.useState)(null);function U(e){H(e.clientY)}const G=(0,n.useCallback)((()=>{D({isResizerHovered:N.current||f},e)}),[f,e]);function $(){N.current=!0,G()}function Y(){N.current=!1,G()}(0,n.useEffect)((()=>{G()}),[f,G]);const X=(0,n.useCallback)((()=>{t.current&&O(10,t.current,e,p)}),[e,p,t]),q=(0,n.useCallback)((()=>{t.current&&O(-10,t.current,e,p)}),[e,p,t]),Q=(0,d().A1)()&&!T.has(e)||!(0,d().A1)()&&T.has(e)?"left":"right",Z="left"===Q?q:X,J="left"===Q?X:q,ee=(0,n.useCallback)((()=>{V(e,p)}),[e,p]);return _||A.isChromebook?null:(0,I.jsx)(o(782482).N,{capture:f,debugName:"SidebarResizer",onLeft:Z,onRight:J,onUp:c().D_,onDown:c().D_,onTab:c().D_,onUntab:c().D_,onEnter:ee,children:(0,I.jsx)(o(26697).m,{renderTooltip:()=>(0,I.jsx)(z,{type:e}),delayThreshold:0,originRectTransform:e=>F?new DOMRect(e.left,F,0,0):e,placement:"page"===e||"secondary_sidebar"===e?"right":"left",originGap:10,render:e=>(0,I.jsx)("div",{style:K,...(0,o(383036).A)(e,{onMouseMove:$,onMouseLeave:Y,onMouseEnter:U}),children:(0,I.jsx)(o(222321).A,{onDraggableDragStart:M,onDraggableDragMove:S,onDraggableDragEnd:b,onDraggableDragCancel:y,disableVerticalEdgeScroll:!0,disableHorizontalEdgeScroll:!0,render:e=>(0,I.jsx)("div",{ref:h,role:"separator",tabIndex:0,"aria-label":l.formatMessage({id:"sidebarResizer.tooltip.resizeLabel",defaultMessage:"Resize with left and right arrow keys"}),"aria-orientation":"vertical","aria-valuenow":Math.round(100*W),"aria-valuemin":0,"aria-valuemax":100,style:R,...e})})})})})};function P(e){switch(e){case"page":return(0,h().hw)()?C().SLIPPERY_SLOPE_SIDEBAR_MIN_WIDTH:C().SIDEBAR_MIN_WIDTH;case"update":return M().Iz;case"peek":return S().SIDEPEEK_MIN_WIDTH;case"secondary_sidebar":return k().WR;default:(0,u().HB)(e)}}function E(e){switch(e){case"page":return(0,h().hw)()?A:480;case"secondary_sidebar":return k().y8;case"update":return j().aL;case"peek":return(0,m().QX)();default:(0,u().HB)(e)}}function B(e){switch(e){case"page":return C().sidebarWidthStore.state;case"secondary_sidebar":const t=C().sidebarExpandedStore.state,o=y().n5();return t?C().sidebarWidthStore.state+o:o;case"update":return M().Ay.state.width;case"peek":return S().default.state.preferredSidePeekWidth;default:(0,u().HB)(e)}}function D(e,t){switch(t){case"page":C().sidebarResizingStore.update((t=>({...t,...e})));break;case"update":M().Ay.update((t=>({...t,...e})));break;case"secondary_sidebar":b().default.update((t=>({...t,...e})));break;case"peek":break;default:(0,u().HB)(t)}}function R(e,t){const o=E(t),n=P(t);return(0,p().qE)(e,n,o)}function L(e,t,o){let n;const r=(0,d().A1)();switch(o){case"page":n=r?window.innerWidth-e:e;break;case"secondary_sidebar":const i=C().sidebarExpandedStore.state?C().sidebarWidthStore.state:0;n=r?window.innerWidth-e-i:e-i;break;case"peek":case"update":const a=t.getBoundingClientRect();n=r?e-a.left:a.right-e;break;default:(0,u().HB)(o)}return R(n,o)}function z({type:e}){const t=(0,r().v3)(),o=(0,i().K8)((()=>function(e,t){switch(e){case"page":return(0,j().KB)(t);case"update":return(0,j().Nk)(t);case"peek":return S().default.state.open;case"secondary_sidebar":return b().default.isOpen();default:(0,u().HB)(e)}}(e,t)),[e,t]),n=l().Tj.text.inverseSecondary,a=(0,I.jsx)(f().A,{name:"toggleSidebar"}),d=e=>(0,I.jsx)("span",{style:{color:n},children:e});let c;if(o)switch(e){case"secondary_sidebar":case"update":c=(0,I.jsx)(s().sA,{defaultMessage:"Close <invertedcolor>Click</invertedcolor>",id:"sidebarResizer.tooltip.closeMessage.noShortcut",values:{invertedcolor:d,keyboardShortcut:a}});break;default:c=(0,I.jsx)(s().sA,{defaultMessage:"Close <invertedcolor>Click or {keyboardShortcut}</invertedcolor>",id:"sidebarResizer.tooltip.closeMessage",values:{invertedcolor:d,keyboardShortcut:a}})}else c=(0,I.jsx)(s().sA,{defaultMessage:"Lock open <invertedcolor>Click or {keyboardShortcut}</invertedcolor>",id:"sidebarResizer.tooltip.lockMessage",values:{invertedcolor:d,keyboardShortcut:a}});return(0,I.jsxs)(I.Fragment,{children:[c?(0,I.jsxs)(I.Fragment,{children:[c,(0,I.jsx)("br",{})]}):null,(0,I.jsx)(s().sA,{defaultMessage:"Resize <invertedcolor>Drag</invertedcolor>",id:"sidebarResizer.tooltip.resizeMessage",values:{invertedcolor:d,keyboardShortcut:a}})]})}function V(e,t){switch(e){case"page":w().setExpand({environment:t,isExpanded:!C().sidebarExpandedStore.state,from:"sidebar_resizer",saveDetailsSidebarPreference:!0}),C().sidebarOpenStore.setState(!1);break;case"update":w().setUpdateExpand({environment:t,isExpanded:!(0,j().Nk)(t),from:"drag",saveDetailsSidebarPreference:!0});break;case"peek":g().VN({environment:t,from:"resizer_click"});break;case"secondary_sidebar":v().VI({environment:t});break;default:(0,u().HB)(e)}}function O(e,t,o,n){const r=B(o)+e;switch(o){case"page":w().setWidth({width:R(r,o),environment:n});break;case"update":w().setUpdateWidth({width:R(r,o),environment:n});break;case"peek":w().setPeekWidth({width:R(r,o),environment:n});break;case"secondary_sidebar":const e=C().sidebarExpandedStore.state?C().sidebarWidthStore.state:0;k().Ay.setWidth(R(r-e,o));break;default:(0,u().HB)(o)}}},198688:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=o(474848);const r=function(){const e=(0,o(401497).IS)((()=>({separator:{height:14,width:1,marginInlineStart:6,marginInlineEnd:6,background:o(100622).Tj.border.primaryTranslucent}})),[]);return(0,n.jsx)("div",{style:e.separator})}},200424:(e,t,o)=>{e.exports=o.p+"9ade71d75a1c0e93.png"},216296:(e,t,o)=>{o.r(t),o.d(t,{circleIcon:()=>r,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.26 15.25",svg:(0,o(474848).jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})},r=(0,o(340498).wt)("circle",n,"default")},221267:(e,t,o)=>{o.d(t,{D:()=>x});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(803949),o(581454),o(737550);var n=o(296540),r=()=>o(664594),i=()=>o(590526),a=()=>o(401497),s=()=>o(849255),l=()=>o(404905),d=()=>o(26697),c=()=>o(68263),u=()=>o(798880),p=()=>o(69708),g=()=>o(100622),f=()=>o(534177),m=()=>o(187820),h=()=>o(580648),v=()=>o(994006),y=()=>o(453697),k=(o(944114),()=>o(169626));var b=o(474848);function x(e){const{section:t,spaceStore:o,workflowStore:x}=e,S=(0,r().T)(),w=(0,i().K8)((()=>{if(!x.isDefined())return!1;const e=x.getPermissionItems();return 1===e.length&&"user_permission"===e[0].type&&S===e[0].user_id}),[x,S]),j=(0,i().K8)((()=>{if(!x.isDefined())return!1;return x.getPermissionItems().some((e=>"space_permission"===e.type&&(0,c().lg)(e.role)))}),[x]),C=(0,i().K8)((()=>{if(o)return o.getName()}),[o]),M=(0,i().K8)((()=>{if(o)return o.getIcon()}),[o]),I=(0,i().K8)((()=>{if(!o||!x.isDefined())return[];const e=x.getPermissionItems(),t=new Set;return e.forEach((e=>{"user_permission"===e.type&&e.user_id&&(0,c().lg)(e.role)&&t.add(e.user_id)})),Array.from(t).map((e=>s().L.createChildStore(o,{table:u().oo,id:e,spaceId:o.id})))}),[o,x]),T=(0,i().K8)((()=>function(e){if(!e.isDefined())return[];const t=new Set;for(const n of e.getPermissionItems())"group_permission"===n.type&&(0,c().lg)(n.role)&&t.add(n.group_id);const o=[];for(const n of t){const e=k().h.getGroupData(n);e&&o.push(e)}return o}(x)),[x]),A=(0,n.useMemo)((()=>{const e=I.map((e=>({type:"user",userStore:e}))),t=T.map((e=>({type:"group",group:e})));return e.concat(t)}),[I,T]),_=(0,n.useMemo)((()=>A.slice(0,3)),[A]),P=e=>{switch(e.type){case"user":return(0,b.jsx)("div",{style:B.avatarDropdownWrapper,children:(0,b.jsx)(v().A,{userStore:e.userStore,avatarSize:18,style:{flexGrow:1},hasPersonHoverCard:!1})},`${e.userStore.id}--tooltip`);case"group":return(0,b.jsx)("div",{style:B.avatarDropdownWrapper,children:(0,b.jsx)(h().o,{group:e.group.group,size:18})},`${e.group.group.getGroupId()}--tooltip`);default:return null}},E=e=>{switch(e.type){case"user":return(0,b.jsx)(y().A,{userStore:e.userStore,size:18},e.userStore.id);case"group":return(0,b.jsx)(h().o,{group:e.group.group,size:18},e.group.group.getGroupId());default:return null}},B=(0,a().IS)((()=>({container:{display:"flex",gap:6,flexDirection:"row",alignItems:"center",color:g().Tj.text.secondary,minHeight:20,paddingInline:12,minWidth:0,flexShrink:1,overflow:"hidden"},avatarsContainer:{marginInlineStart:8,display:"flex",flexDirection:"row-reverse"},avatarWrapper:{marginInlineStart:-8},avatarDropdownWrapper:{display:"flex",alignContent:"flex-end",minWidth:140,width:"100%",marginTop:4,marginBottom:4},label:{fontSize:12},workspaceIconContainer:{display:"flex",alignItems:"center",marginInlineEnd:2}})),[]);return w?null:j&&C?(0,b.jsxs)("div",{style:B.container,children:[M?(0,b.jsx)("div",{style:B.workspaceIconContainer,children:(0,b.jsx)(m().B6,{icon:M,size:18,disabled:!0,isEmptyPage:!1})}):void 0,(0,b.jsx)(l().j,{style:B.label,children:"chat"===t?(0,b.jsx)(p().sA,{id:"AgentPage.everyoneAtWorkspaceCanViewChats",defaultMessage:"Everyone at {workspace} can view chats",values:{workspace:C}}):"activity"===t?(0,b.jsx)(p().sA,{id:"AgentPage.everyoneAtWorkspaceCanViewActivity",defaultMessage:"Everyone at {workspace} can view activity",values:{workspace:C}}):(0,f().HB)(t)})]}):(0,b.jsxs)("div",{style:B.container,children:[(0,b.jsx)(d().m,{placement:"bottom",renderTooltip:()=>A.map(P),render:e=>(0,b.jsx)("div",{style:B.avatarsContainer,...e,children:_.map((e=>(0,b.jsx)("div",{style:B.avatarWrapper,children:E(e)},"user"===e.type?e.userStore.id:e.group.group.getGroupId())))})}),(0,b.jsx)(l().j,{style:B.label,children:"chat"===t?(0,b.jsx)(p().sA,{id:"AgentPage.editorsCanViewChats",defaultMessage:"Editors can view chats"}):"activity"===t?(0,b.jsx)(p().sA,{id:"AgentPage.editorsCanViewActivity",defaultMessage:"Editors can view activity"}):(0,f().HB)(t)})]})}},222800:(e,t,o)=>{o.d(t,{$:()=>h,V:()=>m});o(581454);var n=()=>o(106702),r=()=>o(920198),i=()=>o(230711),a=()=>o(59226),s=()=>o(484714),l=()=>o(590526),d=()=>o(290247),c=()=>o(499172),u=()=>o(69708),p=()=>o(496603),g=()=>o(169626);const f=(0,u().YK)({permissionDeniedTooltip:{id:"permissions.agentCreation.denied",defaultMessage:"Contact a workspace owner to create agents"}});function m(){const e=(0,r().L)(),t=(0,n().$)(),o=(0,s().v3)(),u=(0,a().X)("agent_creation_permissions");return(0,l().K8)((()=>{if(!u)return{canCreate:!0};const n=null==e?void 0:e.getModel(),r=null==n?void 0:n.getSettings();if(!(e&&t&&n&&r))return{canCreate:!1,reason:"feature_disabled"};const a=(0,i().dp)(e,t.id).getMembershipTypeAsRoleOrNone(),s=d()._.getSpacePermissionGroupIds({userId:o.currentUser.id,spaceId:e.id}),l=(0,p().oE)(Array.from(s).map((e=>{const t=g().h.getGroup(e);if(t){const e=t.getSettings();return{settings:e?{can_create_custom_agents:e.can_create_custom_agents}:void 0}}}))),f={policy:r.custom_agent_creation_policy,userRole:a&&"none"!==a?a:void 0,userPermissionGroups:l};return(0,c().K)(f)}),[e,t,u,o])}function h(){const e=m(),t=(0,u().tz)().formatMessage(f.permissionDeniedTooltip);return{canCreate:e.canCreate,reason:e.reason,tooltipMessage:t}}},245128:(e,t,o)=>{o.d(t,{A:()=>n});const n=function(e){const{spaceViewStore:t,pageId:o}=e;return!(!t||!o)&&-1!==t.getBookmarkedPageIds().indexOf(o)}},278589:(e,t,o)=>{o.d(t,{N:()=>i});var n=()=>o(534177),r=()=>o(126126);function i(e){return"avatar"===e?r().eQ:"xsmall"===e?18:"xsmall_plus"===e?24:"small"===e?28:"small_plus"===e?32:"medium"===e?36:"medium_plus"===e?44:"medium_large"===e?48:"large"===e?50:"large_plus"===e?64:"xlarge"===e?94:"plans"===e?20:"deep_dive"===e?16:"upsell_banner"===e?74:"personalization_modal"===e?96:(0,n().HB)(e)}},281390:(e,t,o)=>{o.d(t,{a2:()=>a,vJ:()=>r,zM:()=>i});var n=()=>o(194715);function r(e){const{agentId:t,mode:o}=e,r=n().S.state;n().S.setState({open:!0,agentId:t,mode:o,isOpening:!r.open})}function i(){n().S.setState({...n().S.state,open:!1})}function a(){n().S.setState({open:!1,agentId:void 0,mode:void 0})}},297173:(e,t,o)=>{o.r(t),o.d(t,{exclamationMarkCircleFillSmallIcon:()=>r,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"1.95 1.94 12.11 12.1",svg:(0,o(474848).jsx)("path",{d:"M8 1.95a6.05 6.05 0 1 0 0 12.1 6.05 6.05 0 0 0 0-12.1m-.1 3a.55.55 0 0 1 .55.55V8a.55.55 0 0 1-1.1 0V5.5a.55.55 0 0 1 .55-.55m0 6a.65.65 0 1 1 0-1.3.65.65 0 0 1 0 1.3"})},r=(0,o(340498).wt)("exclamationMarkCircleFillSmall",n,"fillSmall")},299177:(e,t,o)=>{o.d(t,{A:()=>i});class n extends(()=>o(757695))().Store{getInitialState(){return{}}}const r=new n;o(852832).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",r);const i=r},301948:(e,t,o)=>{o.d(t,{A:()=>a});o(296540);var n=()=>o(970236),r=()=>o(69708),i=o(474848);function a(e){return(0,i.jsx)(n().E,{color:"blue",style:e.style,content:(0,i.jsx)(r().sA,{id:"AlphaBadgeComponent.label",defaultMessage:"Alpha"})})}},310818:(e,t,o)=>{o.d(t,{Sn:()=>s,aG:()=>a});var n=o(296540),r=o(474848);const i=(0,n.createContext)(void 0);function a({children:e,store:t}){return(0,r.jsx)(i.Provider,{value:t,children:e})}function s(){return(0,n.useContext)(i)}i.displayName="AgentThreadListContext"},320865:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=o(474848);const r=function(){return(0,n.jsx)(o(424400).Ay,{title:(0,n.jsx)(o(98126).k,{size:"default"}),titleStyle:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"}})}},321775:(e,t,o)=>{o.d(t,{m:()=>i});var n=()=>o(390650),r=()=>o(645302);function i(e){const t=(0,n().sl)(e.collectionContextStore);t&&t.view_type&&r().jE(e.environment,{from:e.from,from_peek_mode:e.from_peek_mode,...t,view_type:t.view_type})}},323756:(e,t,o)=>{o.d(t,{E:()=>d});var n=o(296540),r=()=>o(933922),i=()=>o(484714),a=()=>o(755125),s=()=>o(31511),l=o(474848);function d(e){const{placeholder:t,value:o,onChange:d,onKeyDown:c,onFocus:u,onBlur:p,inputStyle:g,disabled:f,debugName:m,autosizeMinHeight:h,inputClassName:v}=e,y=(0,i().v3)(),[k,b]=(0,n.useState)(!1),x=(0,n.useCallback)((()=>{b(!0),(0,a().clear)({environment:y}),null==u||u()}),[y,u]),S=(0,n.useCallback)((()=>{b(!1),null==p||p()}),[p]),w=(0,n.useCallback)((e=>{"Enter"!==e.key?null==c||c(e):e.preventDefault()}),[c]);return(0,l.jsx)(r().A,{capture:k,debugName:m,render:e=>(0,l.jsx)(s().A,{...e,inputClassName:v,placeholder:t,value:o,onChange:d,onKeyDown:w,onFocus:x,onBlur:S,style:g,format:"transparent",disabled:f,spellCheck:!1,textarea:!0,autosize:!0,autosizeMinHeight:h})})}},343601:(e,t,o)=>{o.d(t,{G:()=>n});const n=(0,o(340498).xh)("aiFace",{default:{loader:()=>o.e(89256).then(o.bind(o,529099))},small:{loader:()=>o.e(89256).then(o.bind(o,412237))},fill:{loader:()=>o.e(89256).then(o.bind(o,769607))},fillSmall:{loader:()=>o.e(89256).then(o.bind(o,9918))}},["ai","artificial","intelligence","sparkle","technology","nosy"])},389657:(e,t,o)=>{o.d(t,{A:()=>L});var n=o(296540),r=()=>o(726637),i=()=>o(484714),a=()=>o(590526),s=()=>o(849255),l=()=>o(161588),d=()=>o(718827),c=()=>o(30537),u=()=>o(250910),p=()=>o(807449),g=()=>o(546926),f=()=>o(26697),m=()=>o(890492),h=()=>o(663639),v=()=>o(736847),y=()=>o(471095),k=()=>o(701751),b=o(474848);const x={viewBox:"0 0 20 20",fittedViewBox:"3.97 1.95 14.91 15.65",svg:(0,b.jsx)("path",{d:"M11.92 5.43a3.48 3.48 0 0 1 6.96 0v2.095a.625.625 0 1 1-1.25 0V5.43a2.23 2.23 0 1 0-4.46 0v1.92h.43a2.425 2.425 0 0 1 2.425 2.425v5.4A2.425 2.425 0 0 1 13.6 17.6H6.4a2.425 2.425 0 0 1-2.425-2.425v-5.4A2.425 2.425 0 0 1 6.4 7.35h5.52zm-1.357 7.373a1.35 1.35 0 1 0-1.126 0v1.247a.563.563 0 0 0 1.126 0z"})},S=(0,o(340498).wt)("lockOpenFill",x,"fill");var w=()=>o(105819),j=()=>o(798880),C=()=>o(695608),M=()=>o(69708),I=()=>o(100622),T=()=>o(314529);function A(e,t){(0,T().DO_NOT_USE_trackLegacy)(e,"edit_lock_toggle",t)}var _=()=>o(896628),P=()=>o(544198),E=()=>o(712505),B=()=>o(547149),D=()=>o(575143),R=()=>o(198688);const L=function({store:e,disableTooltip:t,hideText:o,isInlineCollection:n,buttonStyle:i}){return r().A.isMobile?(0,b.jsx)(H,{store:e,hideText:o}):(0,b.jsx)(F,{store:e,disableTooltip:t,hideText:o,isInlineCollection:n,buttonStyle:i})};function z(e,t){return{display:"flex",alignItems:"center",whiteSpace:"nowrap",gap:4,fontSize:r().A.isMobile?12:14,borderRadius:4,padding:"0 6px",marginInlineEnd:2,height:24,marginTop:r().A.isMobile?1:0,marginInlineStart:r().A.isMobile?0:-5,...e&&{marginInlineStart:r().A.isMobile?8:12,marginInlineEnd:0},...t}}function V(e,t,o){return{...z(t,o),color:I().Tj.text.tertiary,fill:I().Tj.icon.tertiary}}function O(e,t,o){return{...z(t,o),paddingInlineStart:5,border:`1px solid ${I().Tj.blue.border.accentPrimary}`,color:I().Tj.blue.text.accentPrimary,fill:I().Tj.blue.icon.accentPrimary}}function K({store:e}){const t=(0,a().K8)((()=>e.getFormat().block_locked_by),[e]),o=(0,M().tz)(),n=(0,a().K8)((()=>t&&(0,C().c6)(o,s().L.createChildStore(e,{table:j().oo,id:t}).getModel())),[t,o,e]);return t?(0,b.jsx)("div",{children:(0,b.jsx)(M().sA,{defaultMessage:"Locked by {lockedByPerson}{br}to prevent accidental editing.{br}<prompttext>Click to unlock</prompttext>",id:"pageLockIndicator.lockedTooltip",values:{lockedByPerson:(0,b.jsx)("b",{children:n}),br:(0,b.jsx)("br",{}),prompttext:e=>(0,b.jsx)("span",{style:{color:I().Tj.text.inverseSecondary},children:e})}})}):null}function W(e,t){l().$.relockBlock({userId:t.userId,blockId:t.id});const o=t.getType();if(o){const{collectionId:n,ownedCollectionCount:r,linkedCollectionCount:i}=(0,P().P)(t,{skipPages:!0});A(e,{from:"topbar",block_type:o,locked:!0,collection_id:n,owned_collection_count:r,linked_collection_count:i})}}function N({store:e,close:t}){const o=(0,i().v3)(),r=(0,n.useCallback)((()=>{!function(e,t){l().$.temporarilyUnlockBlock({userId:t.userId,blockId:t.id});const o=t.getType();if(o){const{collectionId:n,ownedCollectionCount:r,linkedCollectionCount:i}=(0,P().P)(t,{skipPages:!0});A(e,{from:"topbar",block_type:o,locked:!1,collection_id:n,owned_collection_count:r,linked_collection_count:i})}}(o,e),t()}),[o,e,t]),a=(0,n.useCallback)((()=>{!function(e,t){B().createAndCommit({userAction:"PageLockTopbarIndicator.handlePermanentUnlockClick",environment:e,canUndo:!0,perform:o=>{_()._l({environment:e,store:t,isLocked:!1,transaction:o})}});const o=t.getType();if(o){const{collectionId:n,ownedCollectionCount:r,linkedCollectionCount:i}=(0,P().P)(t,{skipPages:!0});A(e,{from:"topbar",block_type:o,locked:!1,collection_id:n,owned_collection_count:r,linked_collection_count:i})}}(o,e),t()}),[o,e,t]),s=[{key:"temp_unlock",render:e=>(0,b.jsx)(D().A,{...e,svg:w().pencilLineIcon,title:(0,b.jsx)(M().sA,{defaultMessage:"Unlock for me",id:"pageLockIndicator.temporaryUnlockOption.label"})}),action:()=>{r()}},{key:"perm_unlock",render:e=>(0,b.jsx)(D().A,{...e,svg:k().p,title:(0,b.jsx)(M().sA,{defaultMessage:"Unlock for everyone",id:"pageLockIndicator.permanentUnlockOption.label"})}),action:()=>{a()}}];return(0,b.jsx)(m().A,{menuType:g().gu.Popup,children:(0,b.jsx)(h().A,{type:h().O.Vertical,onAccept:t,sections:[{key:"unlock_options",render:e=>(0,b.jsx)(v().A,{...e}),items:s}],initialFocus:void 0})})}function F({store:e,disableTooltip:t,hideText:o,isInlineCollection:r,buttonStyle:s}){const g=(0,i().v3)(),m=(0,n.useCallback)((()=>W(g,e)),[g,e]),h=(0,a().K8)((()=>e.isLockedForAllUsers()),[e]),v=(0,a().K8)((()=>l().$.isTemporarilyUnlocked({userId:e.userId,blockId:e.id})),[e.id,e.userId]),k=(0,a().K8)((()=>E().default.state.open&&E().default.state.targetStore.id===e.id),[e.id]);return h?v?(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[k?(0,b.jsx)(R().A,{}):void 0,(0,b.jsxs)(d().Ay,{style:O(0,r,s),onClick:m,hoveredStyle:{background:I().Tj.outlineBlueButtonHoveredBackground},pressedStyle:{background:I().Tj.outlineBlueButtonPressedBackground},children:[(0,b.jsx)(p().I,{icon:S}),o?void 0:(0,b.jsx)("div",{style:{lineHeight:1},children:(0,b.jsx)(M().sA,{defaultMessage:"Re-lock",id:"pageLockIndicator.relockButton.label"})})]})]}):(0,b.jsx)(f().m,{renderTooltip:()=>(0,b.jsx)(K,{store:e}),disableTooltip:t,render:t=>(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[k?(0,b.jsx)(R().A,{}):void 0,(0,b.jsx)(u().A,{popupType:c().n.Popup,renderOrigin:({onClick:e})=>(0,b.jsxs)(d().Ay,{style:V(0,r,s),onClick:e,...t,children:[(0,b.jsx)(p().I,{icon:y().lockFillIcon}),o?void 0:(0,b.jsx)("div",{style:{lineHeight:1},children:(0,b.jsx)(M().sA,{defaultMessage:"Locked",id:"pageLockIndicator.lockedButton.label"})})]}),render:({close:t})=>(0,b.jsx)(N,{store:e,close:t})})]})}):null}function H({store:e,hideText:t}){const o=(0,i().v3)(),r=(0,n.useCallback)((()=>W(o,e)),[o,e]),s=(0,a().K8)((()=>e.isLockedForAllUsers()),[e]),g=(0,a().K8)((()=>l().$.isTemporarilyUnlocked({userId:e.userId,blockId:e.id})),[e.id,e.userId]),{WindowSizeStore:f}=o,m=(0,a().K8)((()=>f.getSafePaddingLeftCSS(10)),[f]),h=(0,a().K8)((()=>f.getSafePaddingRightCSS(14)),[f]);return s?g?(0,b.jsxs)(d().Ay,{onClick:r,style:{display:"flex",alignItems:"center",width:"100%",height:"100%",gap:6,paddingInlineStart:m,paddingInlineEnd:h,color:I().Tj.blue.text.accentPrimary,fill:I().Tj.blue.icon.accentPrimary},children:[(0,b.jsx)(p().I,{icon:S}),t?void 0:(0,b.jsx)("div",{children:(0,b.jsx)(M().sA,{defaultMessage:"Re-lock",id:"pageLockIndicator.mobileRelockButton.label"})})]}):(0,b.jsx)(u().A,{popupType:c().n.Popup,renderOrigin:({onClick:e})=>(0,b.jsxs)(d().Ay,{onClick:e,style:{display:"flex",alignItems:"center",gap:6,height:"100%",paddingInlineStart:m,paddingInlineEnd:h},children:[(0,b.jsx)(p().I,{icon:y().lockFillIcon}),t?void 0:(0,b.jsx)("div",{children:(0,b.jsx)(M().sA,{defaultMessage:"Locked",id:"pageLockIndicator.mobileLockedButton.label"})})]}),render:({close:t})=>(0,b.jsx)(N,{store:e,close:t})}):null}},403008:(e,t,o)=>{o.d(t,{w:()=>P});var n=o(296540),r=()=>o(59226),i=()=>o(590526),a=()=>o(7331),s=()=>o(69708),l=()=>o(46986),d=(o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(803949),o(581454),()=>o(564884)),c=()=>o(907258),u=()=>o(383036),p=()=>o(874832),g=()=>o(493552),f=()=>o(26697),m=()=>o(81068),h=()=>o(736847),v=()=>o(365646),y=()=>o(289106),k=()=>o(534177),b=()=>o(639919),x=()=>o(13898),S=()=>o(36951),w=()=>o(865698),j=()=>o(272136),C=()=>o(676953),M=()=>o(626001),I=()=>o(652011),T=o(474848);function A(e){const{askDropdownConfigSections:t,buttonPopupParent:o,config:n,environment:r,supportsConfigTypeChange:i,intl:a,onChangeNextConfig:l,spaceStore:A,showAgentModelPicker:P,agentModelConfig:E,showOnlyOpenAiModels:B,inferenceInfo:D}=e,R=A.id,L=function(e){const{askDropdownConfigSections:t,spaceStore:o}=e,n=[];return t.forEach((e=>{e.items.forEach((e=>{"default"!==e.askMode&&b().R.isModelDown({actor:y().S,spaceId:o.id,model:e.askMode})&&n.push(e.askMode)}))})),n}({askDropdownConfigSections:t,spaceStore:A}),z=e=>{let t=e.items;if(i||(t=t.filter((e=>e.config.type===n.type))),0===t.length)return;const o=t.map((e=>({key:e.askMode,render:t=>{const o="default"!==e.askMode?(0,w().DL)(e.askMode):void 0,r="default"!==e.askMode&&L.includes(e.askMode);return(0,T.jsx)(f().m,{disableTooltip:!r,renderTooltip:()=>(0,T.jsx)(s().sA,{...b().$.modelProviderDown}),render:i=>(0,T.jsx)(m().A,{...(0,u().A)(t,i),icon:(0,T.jsx)(I().H,{modelFamily:o}),isChecked:_(n,e,E),title:(0,T.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6},children:[(0,T.jsx)(g().D,{styleKey:"bodyRegular",children:e.title}),e.beta?(0,T.jsx)(x().A,{}):void 0]}),disabled:r,disabledFeedback:r})})},action:()=>{(0,d().u)({environment:r,event:{eventName:"clicked_ai_chat_mode",eventProperties:{mode:e.config.type,model:e.askMode,ai_session_id:D.aiSessionId,ai_inference_id:D.aiDraftInferenceId}}});const t=e.config;"default"!==e.askMode?"markdown-chat"===t.type?l({...n,model:t.model,type:t.type}):"workflow"===t.type&&void 0!==t.model&&(l({...n,model:t.model,modelFromUser:t.modelFromUser,type:t.type}),(0,M().Oq)(R,{model:t.model})):"workflow"===t.type?(l({...n,model:void 0,modelFromUser:!1,type:"workflow"}),(0,M().Oq)(R,{model:void 0})):"search"===t.type&&l((0,S().YM)({spaceId:R}))}}))),c=e.isLoading?[...o,{key:"loading",render:()=>(0,T.jsx)("div",{style:{paddingInline:8,paddingBlock:6},children:(0,T.jsx)(p().P,{style:{height:28,borderRadius:4}})}),action:()=>{}}]:o;return{key:e.id,render:t=>(0,T.jsx)(h().A,{...t,title:e.sectionTitle?a.formatMessage(e.sectionTitle):void 0}),items:c}},V=t.filter((e=>"markdown-chat"!==e.configType)).map(z).filter(k().O9),O=t.filter((e=>"markdown-chat"===e.configType)).map(z).filter(k().O9),K=[...V];if(P){var W;const e=null===(W=c().default.state.currentUserStore)||void 0===W?void 0:W.getModel(),t=A.getModel();if(!t)return K;const r=!1,i=(0,j().h)(),d=new Set;Object.keys(i).forEach((e=>{d.add(e)}));const u=(0,C().BU)(w().T3.filter((e=>!d.has(e)))),p=(0,C().BU)(w().At.filter((e=>!d.has(e)))),g=e=>e.filter((e=>{const t=r||!w().oT.includes(e);return B?w().xM.includes(e)&&t:t})),k={},x=[...u,...p];for(const o of x)k[o]=b().R.isModelDown({spaceId:t.id,actor:e??y().S,model:v().UO[o]});const S=e=>e.map((e=>{const r=k[e]??!1,i=(0,w().DL)(e);return{key:e,render:t=>(0,T.jsx)(f().m,{disableTooltip:!r,placement:"bottom",alignment:"start",renderTooltip:()=>a.formatMessage(b().$.modelProviderDown),render:o=>(0,T.jsx)(m().A,{...t,...o,icon:(0,T.jsx)(I().H,{modelFamily:i}),title:a.formatMessage(w().Wg[e]),isChecked:(null==E?void 0:E.type)===e,disabled:r,disabledFeedback:r})}),action:()=>{r||(l({...n,type:"workflow",model:e,modelFromUser:!0}),(0,M().Oq)(t.id,{model:e}),o.close())}}})),_=g(u);_.length>0&&K.push({key:"agent-fast",render:e=>(0,T.jsx)(h().A,{...e,title:(0,T.jsx)(s().sA,{...w().Wg.fastSection})}),items:S(_)});const P=g(p);P.length>0&&K.push({key:"agent-intelligent",render:e=>(0,T.jsx)(h().A,{...e,title:(0,T.jsx)(s().sA,{...w().Wg.intelligentSection})}),items:S(P)})}return K.push(...O),K}function _(e,t,o){return e.type===t.config.type&&("markdown-chat"===e.type&&"markdown-chat"===t.config.type?e.model===t.config.model:"workflow"===e.type&&("default"===t.askMode?void 0===(null==o?void 0:o.type):(null==o?void 0:o.type)===t.askMode))}function P(e){const{aiChatFeatureController:t,buttonPopupParent:o,config:d,environment:c,isSimplifiedInputEnabled:u,inputMode:p,threadMode:g,onChangeNextConfig:f,spaceStore:m,inferenceInfo:h}=e,v=(0,s().tz)(),y=(0,l().i7)(),k=(0,r().X)("agent_model_picker"),b=(0,n.useMemo)((()=>(0,a().kD)(d)),[d]),x=(0,r().X)("sams_specials");return(0,i().K8)((()=>{if(!m)return[];const e=(0,C()._y)({intl:v,isAgentEnabled:y,environment:c,spaceId:m.id,hideWorkspaceSectionTitle:u}),n=t.supportsConfigTypeChanges({mode:p,threadMode:g});return A({askDropdownConfigSections:e,buttonPopupParent:o,config:d,environment:c,inferenceInfo:h,supportsConfigTypeChange:n,intl:v,onChangeNextConfig:f,spaceStore:m,showAgentModelPicker:y&&k,agentModelConfig:b,showOnlyOpenAiModels:x})}),[b,k,t,o,d,c,u,p,g,v,y,f,m,x,h])}},429816:(e,t,o)=>{o.d(t,{A:()=>S});o(898992),o(672577),o(737550);var n=o(296540),r=()=>o(242422),i=()=>o(417553),a=()=>o(484714),s=()=>o(792485),l=()=>o(590526),d=()=>o(380745),c=()=>o(700500),u=()=>o(671894),p=()=>o(954719),g=()=>o(278634),f=()=>o(231536),m=()=>o(544198),h=()=>o(753721),v=()=>o(836724),y=()=>o(807990),k=()=>o(206051),b=()=>o(407054),x=o(474848);function S(e){const t=(0,a().v3)(),[r,c]=(0,n.useState)([]),u=(0,h().X)();(0,n.useEffect)((()=>{(async()=>{if(u){const e=await o.e(15498).then(o.bind(o,857954));c(e.lowPriActionsWithKeyboardShortcuts)}})()}),[u]);const g=(0,s().S)(),m=(0,n.useRef)(),v=(0,n.useRef)();(0,n.useEffect)((()=>{function e(e){e.clientX===m.current&&e.clientY===v.current||(m.current=e.clientX,v.current=e.clientY,d().A.setKeyboardMode(!1))}return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}}),[]);const y=(0,l().K8)((()=>[...(0,p().bD)(),...r]),[r]),k=(0,n.useMemo)((()=>function(e,t,o){const n={};for(const r of t){r.lazyDependencyKeys&&(0,f().G)(...r.lazyDependencyKeys);for(const i of r.shortcuts)n[i]=n=>j(i,n,e,t,o)}return n}(t,y,g)),[t,y,g]);return(0,x.jsx)(i().k,{debugName:e.debugName,priority:e.priority,enable:e.capture,shortcuts:k})}function w(){return!function(){const e=document.querySelector("#intercom-container");return!(!e||!e.contains(document.activeElement))}()&&!(b().A.state.isActive&&!r().default.checkGate({gateName:"block_menu_shortcut_fix"}))}function j(e,t,o,n,i){if(!w())return;const a=k().default.state.stores,s=k().default.state.pivot||a[0],l=s&&v().T.getRectFromStore(s),p=n.find((t=>!!t.shortcuts.some((t=>t===e))&&u().F6(t,{environment:o,blocks:a,originRect:l,publicEditMode:void 0,pageContext:i})));if(p){"keydown"===t.type&&t.preventDefault&&t.preventDefault();const e=b().A.state.isActive;p.action({environment:o,blocks:a,originRect:l,publicEditMode:void 0,analyticsFrom:"keyboard_shortcut",pageContext:i},t);const n=a[0];let s,u,h;n&&(s=n.getType(),u=s?(0,c().Yt)(s,n.getFormat()):void 0,h=n.getParentCollectionIdUpToTwoLevels());const{collectionId:v,ownedCollectionCount:k,linkedCollectionCount:x}=(0,m().P)(n,{skipPages:!0});(0,g().N)(o,{analyticsName:p.analyticsName,action_type:p.analyticsActionType,from:"keyboard_shortcut",block_id:null==n?void 0:n.id,block_type:s,is_toggleable:u,collection_id:v,owned_collection_count:k,linked_collection_count:x,parent_collection_id:h}),f={resetBlockMenuStore:e},d().A.setKeyboardMode(!0),y().default.reset(),r().default.checkGate({gateName:"block_menu_shortcut_fix"})&&f.resetBlockMenuStore&&b().A.reset()}var f}},430405:(e,t,o)=>{o.d(t,{A:()=>c});o(581454);var n=o(296540),r=()=>o(249046),i=()=>o(302501),a=()=>o(69708),s=()=>o(100622),l=()=>o(284371),d=o(474848);const c=function(e){const{title:t,open:c,notes:u,connectorType:p,onDismiss:g,onConnect:f,onLearnMore:m,isLoading:h,overridePrimaryMessage:v,centerNotes:y,noteStyleOverrides:k,subtitle:b,customContentBeforeFooter:x,borderAroundNotes:S,grayscaleNoteIcons:w}=e,j=(0,a().tz)(),C=(0,o(401497).IS)((()=>({wrapper:{width:S?428:400,paddingTop:8},dataSafetyWrapper:{width:"100%",justifyContent:"center",marginTop:8,padding:"0px 20px",...S&&{border:`1px solid ${s().Tj.border.secondary}`,borderRadius:8,padding:"0px 12px",margin:"0px 12px 0px 12px",maxWidth:400}},notes:{display:"flex",flexDirection:"column",marginTop:12,gap:12,font:l().Tf.sans,listStylePosition:"outside",paddingInlineStart:2,listStyleType:"none",...y&&{textAlign:"center",justifyContent:"center"}},note:{display:"flex",alignItems:"start",fontSize:l().J.UIRegular.desktop,lineHeight:l().K_.UIRegular.desktop,color:`${s().Tj.text.secondary}`,padding:2,gap:12,listStylePosition:"outside",marginBottom:4,...y&&{alignItems:"center",textAlign:"center",justifyContent:"center"},...k},noteIconWrapper:{display:"flex",alignItems:"center",justifyContent:"center"},noteTextWrapper:{display:"flex",flexDirection:"column",alignItems:"start",justifyContent:"center",gap:4},noteIcon:{width:20,height:20,color:w?s().Tj.palette.gray[600]:s().Tj.palette.uiBlue[600]},noteTitle:{fontWeight:l().Wy.medium,textWrap:"pretty"},footer:{justifyContent:"center",alignItems:"center",width:"100%",paddingTop:12,paddingInlineEnd:20,paddingBottom:20,paddingInlineStart:20,gap:6},connectButton:{width:"100%"},learnMoreButton:{width:"100%"}})),[y,k,w,S]),M=(0,n.useCallback)((()=>{const e=o(634877).NT[p];e.setState({...e.state,currentScreen:"none"})}),[p]);return(0,d.jsx)(o(107975).a,{ariaLabel:j.formatMessage({id:"universalSearch.integrations.introModalAriaLabel",defaultMessage:"AI connector introduction"}),showCloseIcon:!0,onDismiss:g,open:c,render:()=>(0,d.jsxs)("div",{style:C.wrapper,children:[(0,d.jsx)(o(424416).b,{connectorType:p,title:t,subtext:b}),(0,d.jsx)(o(198630).f,{sunsetCheckSource:"ai_connectors_modal",additionalOnClickUpgrade:M}),u?(0,d.jsx)(r().Ye,{style:C.dataSafetyWrapper,children:(0,d.jsx)("ul",{style:C.notes,children:u.map(((e,t)=>(0,d.jsxs)("li",{style:C.note,children:[(0,d.jsx)("div",{style:C.noteIconWrapper,children:e.icon?"function"==typeof e.icon?e.icon(C.noteIcon):e.icon:void 0}),(0,d.jsxs)("div",{style:C.noteTextWrapper,children:[(0,d.jsx)(i().A,{isMultiline:!0,style:C.noteTitle,children:e.title}),e.description?(0,d.jsx)(i().A,{isMultiline:!0,isSecondaryColor:!0,children:e.description}):void 0]})]},`note-${t}`)))})}):void 0,x,(0,d.jsxs)(r().wt,{style:C.footer,children:[(0,d.jsx)(o(160432).A,{colorPalette:"blue",size:"xl",isLoading:h,disabled:h,style:C.connectButton,onClick:f,children:v||(0,d.jsx)(a().sA,{id:"universalSearch.integration.startConnection",defaultMessage:"Start connection"})}),m?(0,d.jsx)(o(406094).A,{size:"lg",iconLeading:{icon:o(852219).bookSmallIcon,size:"xs"},style:C.learnMoreButton,onClick:m,children:(0,d.jsx)(a().sA,{id:"universalSearch.integrations.learnMore",defaultMessage:"Read our step-by-step guide"})}):void 0]})]})})}},443191:(e,t,o)=>{o.d(t,{J:()=>r});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.39 15.26 15.21",svg:(0,o(474848).jsx)("path",{d:"m10.775 2.583 2.475 2.475a.625.625 0 0 1 0 .884l-2.475 2.475a.625.625 0 1 1-.884-.884l1.408-1.408H4.8c-.649 0-1.175.526-1.175 1.175v5.975a.625.625 0 1 1-1.25 0V7.3A2.425 2.425 0 0 1 4.8 4.875h6.499L9.891 3.467a.625.625 0 0 1 .884-.884M17 6.1c.345 0 .625.28.625.625V12.7a2.425 2.425 0 0 1-2.425 2.425H8.7l1.408 1.408a.625.625 0 1 1-.884.884L6.75 14.942a.625.625 0 0 1 0-.884l2.475-2.475a.625.625 0 1 1 .884.884l-1.408 1.408H15.2c.649 0 1.175-.526 1.175-1.175V6.725c0-.345.28-.625.625-.625"})},r=(0,o(340498).wt)("arrowSquareLeftRight",n,"default")},447236:(e,t,o)=>{o.d(t,{E:()=>i});var n=()=>o(79926);const r=new(n().O2)("DictationBubble",(async()=>await Promise.all([o.e(75134),o.e(35530),o.e(9773),o.e(36556),o.e(55373),o.e(36192),o.e(40537),o.e(27992),o.e(63452),o.e(66249),o.e(92845),o.e(87249),o.e(79022),o.e(44854),o.e(87017),o.e(34877),o.e(46414),o.e(11676),o.e(61165),o.e(94522),o.e(44584),o.e(38293),o.e(40992),o.e(88455),o.e(52871),o.e(47160),o.e(49021),o.e(53697),o.e(26126),o.e(6039),o.e(71136),o.e(86341),o.e(29316),o.e(3101)]).then(o.bind(o,933050)))),i=(0,n()._h)(r,(e=>e.DictationBubble))},449242:(e,t,o)=>{o.d(t,{QF:()=>l,R6:()=>s,jp:()=>i,of:()=>a});var n=()=>o(242422),r=()=>o(534177);function i(e){var t;if(!e)return!1;const o=e.getDataStore().getValue();return!!o&&("paused"===o.status&&"disabledByAdmin"===(null===(t=o.paused_reason)||void 0===t?void 0:t.reason))}function a(e,t){switch(e){case"runLimit":return t.formatMessage({id:"workflow.pausedReason.runLimit",defaultMessage:"Run limit reached for this agent"});case"spendLimit":return t.formatMessage({id:"workflow.pausedReason.spendLimit",defaultMessage:"Spending limit reached for this agent"});case"failureLimit":return t.formatMessage({id:"workflow.pausedReason.failureLimit",defaultMessage:"Too many failures for this agent"});case"workspaceSpendLimit":return t.formatMessage({id:"workflow.pausedReason.workspaceSpendLimit",defaultMessage:"Workspace custom agent usage limit reached"});case"disabledByAdmin":return t.formatMessage({id:"workflow.pausedReason.disabledByAdmin",defaultMessage:"Disabled by workspace owner"});case"disabledByNotion":return t.formatMessage({id:"workflow.pausedReason.disabledByNotion",defaultMessage:"Temporarily disabled."});case"internalError":return t.formatMessage({id:"workflow.pausedReason.internalError",defaultMessage:"Internal error"});case"needsReview":return t.formatMessage({id:"workflow.pausedReason.needsReview",defaultMessage:"Needs review"});default:(0,r().HB)(e)}}function s(e,t){switch(e){case"runLimit":return t.formatMessage({id:"workflow.pausedReason.runLimit.short",defaultMessage:"Run limit"});case"spendLimit":return t.formatMessage({id:"workflow.pausedReason.spendLimit.short",defaultMessage:"Spend limit"});case"failureLimit":return t.formatMessage({id:"workflow.pausedReason.failureLimit.short",defaultMessage:"Failures"});case"workspaceSpendLimit":return t.formatMessage({id:"workflow.pausedReason.workspaceSpendLimit.short",defaultMessage:"Workspace limit"});case"disabledByAdmin":return t.formatMessage({id:"workflow.pausedReason.disabledByAdmin.short",defaultMessage:"Disabled"});case"disabledByNotion":return t.formatMessage({id:"workflow.pausedReason.disabledByNotion.short",defaultMessage:"Disabled"});case"internalError":return t.formatMessage({id:"workflow.pausedReason.internalError.short",defaultMessage:"Error"});case"needsReview":return t.formatMessage({id:"workflow.pausedReason.needsReview.short",defaultMessage:"Needs review"});default:(0,r().HB)(e)}}function l(e){const{runStatus:t,runPausedReason:o}=e;return"paused"===t&&(!!n().default.checkGate({gateName:"workflows_confirm_tool_use_reenqueue"})&&("runLimit"===o||"spendLimit"===o))}},449789:(e,t,o)=>{function n(e){const{store:t,toggleSource:o}=e;t.update((e=>{const t=!e.isKeyboardShortcutsOpen;return{...e,isKeyboardShortcutsOpen:t,toggleSource:t?o:e.toggleSource,openCount:t?e.openCount+1:e.openCount}}))}function r(e){const{store:t}=e;return t.state.isKeyboardShortcutsOpen}o.d(t,{W:()=>r,j:()=>n})},508700:(e,t,o)=>{o.d(t,{T:()=>r});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"1.62 2.87 12.76 10.25",svg:(0,o(474848).jsx)("path",{d:"M2.25 5.531h5.692a2.126 2.126 0 0 0 4.116 0h1.692a.625.625 0 1 0 0-1.25H12a2.126 2.126 0 0 0-4 0H2.25a.625.625 0 1 0 0 1.25M10 4.125a.875.875 0 1 1 0 1.75.875.875 0 0 1 0-1.75m-4 9c.921 0 1.706-.586 2-1.406h5.75a.625.625 0 0 0 0-1.25H8.058a2.126 2.126 0 0 0-4.116 0H2.25a.625.625 0 1 0 0 1.25H4a2.13 2.13 0 0 0 2 1.406m0-1.25a.875.875 0 1 1 0-1.75.875.875 0 0 1 0 1.75"})},r=(0,o(340498).wt)("slidersSmall",n,"small")},551780:(e,t,o)=>{o.d(t,{DA:()=>i,F4:()=>r});var n=()=>o(79926);const r=(0,n()._h)(new(n().O2)("topbar",(()=>Promise.all([o.e(52396),o.e(53179)]).then(o.bind(o,873892)))),(e=>e.TopbarSubmitPostButton)),i=((0,n()._h)(new(n().O2)("topbar",(()=>Promise.all([o.e(52396),o.e(53179)]).then(o.bind(o,487146)))),(e=>e.TopbarFavoriteButton)),(0,n()._h)(new(n().O2)("offlineDownloadIndicator",(()=>o.e(71739).then(o.bind(o,1294)))),(e=>e.OfflineDownloadIndicator)))},556122:(e,t,o)=>{o.d(t,{QJ:()=>g,TI:()=>d});o(944114),o(581454);var n=()=>o(726637),r=()=>o(763824);let i=0;const a="clipboard",s={debug:Boolean(n().A.isDevelopingInAirplaneMode),responseText:a,showErrorCode:!1,delayBetweenChunks:20,chunkSize:5,numLoremIpsums:3},l="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec porta auctor sem vel efficitur. Vivamus efficitur eros sed erat efficitur efficitur. Vivamus et augue vel est efficitur efficitur.";function d(){return s}function c(e){return{async*[Symbol.asyncIterator](){for(const t of e)await(0,r().wR)(s.delayBetweenChunks),yield t}}}function u(e,t){const o=Math.ceil(e.length/t),n=new Array(o);for(let r=0,i=0;r<o;++r,i+=t)n[r]=e.substr(i,t);return n}function p(e){return e.map((e=>({type:"success",p:"padding",completion:e,inferenceId:"mock"})))}async function g({environment:e,data:t}){console.log("Retrieving fake completion for data",t);const{context:o}=t,r=o.selectedText,d=[];let{responseText:g}=s;if(g===a&&(g=await async function(){try{return await navigator.clipboard.readText()}catch(e){return}}()??"Unable to retrieve clipboard text."),void 0===g&&(d.push({type:"success",p:"padding",completion:"\n",inferenceId:"mock"},{type:"success",p:"padding",completion:"this is ",inferenceId:"mock"},{type:"success",p:"padding",completion:"fake ",inferenceId:"mock"},{type:"success",p:"padding",completion:`streaming response ${i++}.`,inferenceId:"mock"}),n().A.isDevelopingInAirplaneMode&&d.push({type:"success",p:"padding",completion:"\n\nTo see a real AI response, run the server with `--airplaneMode=false`.",inferenceId:"mock"}),"string"==typeof r)){d.push({type:"success",p:"padding",completion:"\n\nHere is the text you selected:\n\n",inferenceId:"mock"});for(const e of u(r,s.chunkSize))d.push({type:"success",completion:e,p:"padding",inferenceId:"mock"})}if(s.showErrorCode)d.push({type:"error",message:"alas",errorCode:s.showErrorCode,isRetryable:!1});else if(void 0===g)for(let n=0;n<s.numLoremIpsums;n++)d.push(...p([`\n\n${n+1}. `,...u(l,0===s.delayBetweenChunks?l.length:s.chunkSize)]));else if(g.length>0){const e=u(g,s.chunkSize);d.push(...p(e))}return Promise.resolve({type:"success",data:c(d),status:200,headers:{}})}(0,o(852832).exposeDebugValue)("completionDebugSettings",s)},563692:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,xMarkFillSmallIcon:()=>r});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"3.03 3.03 9.94 9.94",svg:(0,o(474848).jsx)("path",{d:"M12.73 4.33a.75.75 0 1 0-1.06-1.06L8 6.94 4.33 3.27a.75.75 0 1 0-1.06 1.06L6.94 8l-3.67 3.67a.75.75 0 1 0 1.06 1.06L8 9.06l3.67 3.67a.75.75 0 0 0 1.06-1.06L9.06 8z"})},r=(0,o(340498).wt)("xMarkFillSmall",n,"fillSmall")},612900:(e,t,o)=>{o.d(t,{u:()=>i});var n=()=>o(79926);const r=new(n().O2)("PulsingWrapper",(async()=>o.e(45248).then(o.bind(o,673962)))),i=(0,n().jQ)(r,(e=>e.PulsingWrapper),{renderLoading:(e,t)=>t.children})},629537:(e,t,o)=>{o.d(t,{V:()=>a});o(296540);var n=()=>o(590526),r=()=>o(851240),i=o(474848);function a(e){const{render:t,...o}=e,a=(0,r().Ay)(o);return(0,i.jsx)(i.Fragment,{children:(0,n().K8)((()=>t(a)),[t,a],{silenceRerenderDefender:!0})})}},648526:(e,t,o)=>{o.d(t,{K:()=>n});const n="1.375em"},652011:(e,t,o)=>{o.d(t,{H:()=>d});o(296540);var n=()=>o(265060),r=()=>o(343601),i=()=>o(684462),a=()=>o(890856),s=()=>o(230510),l=o(474848);function d(e){const{modelFamily:t,defaultNoAiFace:o}=e;switch(t){case"anthropic":return(0,l.jsx)(n().Q,{iconGroup:i().j,variantName:"default",overrideSize:()=>16});case"openai":return(0,l.jsx)(n().Q,{iconGroup:s().P,variantName:"default",overrideSize:()=>16});case"gemini":return(0,l.jsx)(n().Q,{iconGroup:a().t,variantName:"default",overrideSize:()=>16});default:return o?null:(0,l.jsx)(n().Q,{iconGroup:r().G,variantName:"default",colorVariant:"primary",overrideSize:()=>16})}}},662971:(e,t,o)=>{o.d(t,{A:()=>g});var n=o(296540),r=()=>o(30537);const i=function(){const[e,t]=n.useState({x:0,y:0});return n.useEffect((()=>{const e=e=>{t({x:e.clientX,y:e.clientY})};return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}}),[]),e};var a=o(474848);function s({x:e,mouseX:t}){return t>e?void 0:-Math.max(e-t,10)+"px"}function l({x:e,width:t,mouseX:o}){return o>e?-Math.max(o-(e+t),10)+"px":void 0}function d({x:e,width:t,mouseX:o}){return o>e?`${Math.max(o-(e+t),10)}px`:`${Math.max(e-o,10)}px`}function c({x:e,y:t,height:o,mouseX:n,mouseY:r}){return n>e?`polygon(0% 0%, 0% 100%, 100% ${100*(r-t)/o}%)`:`polygon(100% 0%, 0% ${100*(r-t)/o}%, 100% 100%)`}function u(e){const{x:t=0,y:o=0,height:r=0,width:u=0}=e.el.getBoundingClientRect()||{},{x:p,y:g}=i(),f={x:t,y:o,height:r,width:u,mouseX:p,mouseY:g},m=(0,n.useRef)(null),h=n.useCallback((e=>{if(m.current){m.current.style.pointerEvents="none";const t=document.elementFromPoint(e.clientX,e.clientY);if(m.current.style.pointerEvents="auto",t){const o=new MouseEvent(e.nativeEvent.type,e.nativeEvent);t.dispatchEvent(o)}}}),[]),v={insetInlineEnd:l(f),insetInlineStart:s(f),height:r,width:d(f),clipPath:c(f)};return(0,a.jsx)("div",{ref:m,onClick:h,style:{cursor:"pointer",position:"absolute",pointerEvents:"auto",top:0,...v}})}function p({onClick:e,renderOrigin:t,renderExtension:i,allowOptionalExtensionMenu:s,...l},d){const{disabled:c,disableDefaultClick:p,onFocus:g,focused:f,openOnFocus:m,placementToOrigin:h,alignmentToOrigin:v,disableCloseOnEnter:y,bottomSheetInitialState:k,popupTypeOverride:b}=l,x=(0,o(484714).WS)(),S=(0,o(546926).Tf)(),[w,j]=(0,n.useState)(!1),C=(0,n.useRef)(null),M=(0,n.useRef)(null),I=(0,n.useRef)(null),T=(0,n.useRef)(null),A=(0,n.useCallback)((()=>{I.current&&window.clearTimeout(I.current),T.current&&window.clearTimeout(T.current),I.current=null,T.current=null}),[]),_=(0,n.useCallback)((()=>{A(),c||j(!0)}),[c,A]),P=(0,n.useCallback)((()=>{A(),j(!1)}),[A]),E=(0,n.useCallback)((e=>{A(),w||(e&&e.preventDefault&&e.preventDefault(),I.current=window.setTimeout(_,120))}),[w,A,_]),B=(0,n.useCallback)((()=>{A(),w&&(T.current=window.setTimeout(P,100))}),[w,P,A]),D=(0,n.useCallback)((t=>{g(),_(),s&&(null==e||e(t),P())}),[g,_,s,e,P]),R=(0,n.useCallback)((()=>{E()}),[E]),L=(0,n.useCallback)((()=>{g(),E()}),[g,E]),z=(0,n.useCallback)((e=>{if(o(726637).A.isMobile)return;const t=C.current;w&&t&&!t.contains(e.target)&&P()}),[w,P]),V=(0,n.useCallback)((e=>{13===e.keyCode&&w&&!y&&P()}),[w,P,y]);(0,n.useEffect)((()=>{if(!Boolean(p))return window.addEventListener("click",z),()=>{window.removeEventListener("click",z)}}),[p,z]),(0,n.useEffect)((()=>(window.addEventListener("keydown",V),()=>{window.removeEventListener("keydown",V)})),[V]);const O=(0,n.useRef)(f);(0,n.useEffect)((()=>{m&&!O.current&&f?E():!f&&O.current&&B(),O.current=f}),[f,m,E,B]);const K=(0,o(401497).IS)((()=>({mobilePopupStyle:{borderRadius:12,backgroundColor:o(100622).Tj.background.secondary}})),[]),W={...(0,o(383036).A)({onMouseEnter:R,onClick:D},l),showExtensionArrow:!0};let N=r().n.Popup;return b?N=b:x&&(N=S?r().n.BottomSheet:r().n.SlideUp),(0,a.jsx)(o(782482).N,{debugName:"ExtensionMenuItem",capture:f,onEnter:w?void 0:E,onRight:E,onLeft:w?B:void 0,onEsc:w?B:void 0,children:(0,a.jsx)(o(127833).zD,{popupType:N,bottomSheetInitialState:k,open:w,origin:t(W,d),placementToOrigin:h??"right",alignmentToOrigin:v??"center",originGap:0,disableMouseCapture:!0,preventBlockRenderQueueOnEnter:!0,preventScaleTransition:!x,preventCaptureEsc:!0,ref:C,render:()=>(0,a.jsxs)(a.Fragment,{children:[!x&&M.current?(0,a.jsx)(u,{el:M.current}):null,(0,a.jsx)("div",{ref:M,style:{height:"100%"},children:i({onMouseEnter:L},{close:B})})]}),style:{overflow:"visible",...x&&K.mobilePopupStyle},trapFocus:!0,onDismiss:P})})}const g=n.forwardRef(p)},679192:(e,t,o)=>{o.d(t,{w:()=>i});var n=()=>o(79926);const r={UncollectibleExperienceOverlay:new(n().O2)("UncollectibleExperienceOverlay",(async()=>o.e(36432).then(o.bind(o,836460))))},i=(0,n()._h)(r.UncollectibleExperienceOverlay,(e=>e.UncollectibleExperienceOverlay))},700226:(e,t,o)=>{o.d(t,{lv:()=>v,iU:()=>y,yc:()=>k});var n=o(296540),r=()=>o(484714),i=()=>o(590526),a=()=>o(401497),s=()=>o(758256),l=()=>o(69708),d=()=>o(100622),c=()=>o(687879),u=()=>o(383594),p=()=>o(486666),g=()=>o(622936),f=o(474848);function m(e){const{workflowStore:t,disabled:d=!1}=e,m=(0,r().v3)(),h=(0,l().tz)(),v=(0,i().K8)((()=>{var e,o;return t.table!==s().U6?null===(o=t.getDraftData())||void 0===o?void 0:o.icon:null===(e=t.getData())||void 0===e?void 0:e.icon}),[t]),y=(0,i().K8)((()=>t.table!==s().U6&&(t.canEdit()??!1)),[t]),k=(0,n.useCallback)((e=>{t.table!==s().U6&&c().saveIcon({workflowStore:t,icon:e,environment:m})}),[t,m]),b=(0,n.useCallback)((e=>{y&&u().W(m,{originRect:e.getBoundingClientRect(),originGap:4,popupWidth:p().jv,popupHeight:p().GF,isSmallWidth:!1,title:h.formatMessage({defaultMessage:"Agent icon",id:"agentPage.iconModalMenu.title"}),currentTab:"customAgent",tabs:[{type:"customAgent",title:h.formatMessage({defaultMessage:"Agent",id:"agentPage.iconModalMenu.agentTab.title"}),agentIcon:v,onChange:(e,t)=>{k(e),t&&t.keepVisible||u().I()}},{type:"emoji",onChange:(e,t)=>{k(e),t&&t.keepVisible||u().I()}},{type:"icon",onChange:(e,t)=>{k(e),t&&t.keepVisible||u().I()}},{type:"file",fileUpload:!1,imageUpload:!0,videoUpload:!1,title:h.formatMessage({defaultMessage:"Upload",id:"agentPage.iconModalMenu.uploadTab.title"}),caption:h.formatMessage({defaultMessage:"Recommended size is 280×280 pixels",id:"agentPage.iconModalMenu.uploadTab.caption"}),onUpload:e=>{u().I(),o(892632).QM({environment:m,file:e[0],bucket:"public",reportRichUploadMetrics:!0,onStart:()=>{},onProgress:()=>{},onComplete:e=>{k(e)},onError:()=>{o(792057).f1(h.formatMessage({defaultMessage:"Upload failed. Please try again.",id:"agentPage.iconModalMenu.uploadError.message"}))}})}}],onDelete:()=>{k(void 0),u().I()}})}),[m,h,k,y,v]),x=(0,n.useCallback)((e=>{b(e.currentTarget)}),[b]),S=(0,n.useCallback)((e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),b(e.currentTarget))}),[b]),w=(0,a().IS)((()=>({iconContainer:{width:96,height:96,display:"flex",alignItems:"center",justifyContent:"center",fontSize:64,cursor:y?"pointer":"default",userSelect:"none",borderRadius:8,flexShrink:0,...y&&{transition:"background-color 0.15s ease"}}})),[y]);return y&&!d?(0,f.jsx)(o(718827).Ay,{style:w.iconContainer,onClick:x,onKeyDown:S,children:(0,f.jsx)(g().AgentIcon,{agentIcon:v,workflowStore:t,size:96,animated:!0})}):(0,f.jsx)("div",{style:w.iconContainer,children:(0,f.jsx)(g().AgentIcon,{agentIcon:v,workflowStore:t,size:96,animated:!0})})}var h=()=>o(323756);const v=32,y=1.25,k=n.memo((function(e){const{workflowStore:t,workflowValidationErrorStore:u}=e,{workflowValue:p}=(0,o(912749).N)(t,!0),g=(0,r().v3)(),k=!(0,i().K8)((()=>t.canEdit()),[t])||Boolean(e.disabled),b=(0,i().K8)((()=>u.hasError("name")),[u]),x=(0,i().K8)((()=>u.hasError("description")),[u]),{name:S,description:w}=p,[j,C]=(0,n.useState)((null==w?void 0:w.length)??!1),M=(0,n.useRef)(w),I=(0,n.useRef)(!1);(0,n.useEffect)((()=>{const e=M.current,t=!e||0===e.length,o=!w||0===w.length;!t||o||j||C(!0),M.current=w}),[w,j]);const[T,A]=(0,n.useState)(!1),[_,P]=(0,n.useState)(!1),E=v*y,B=(0,a().IS)((()=>({nameInput:{fontSize:v,fontWeight:o(284371).Wy.bold,color:d().Tj.text.primary,lineHeight:y},descriptionInput:{fontSize:16,color:d().Tj.text.secondary,wordWrap:"break-word",whiteSpace:"pre-wrap",lineHeight:1.5},headerContainer:{display:"flex",flexDirection:"column",gap:4,marginBlockEnd:12},buttonGroup:{marginInlineStart:-8,height:28,opacity:0,transition:"opacity 200ms ease"},buttonGroupVisible:{opacity:1}})),[]),D=(0,n.useCallback)((()=>{t.table!==s().U6&&(I.current||(I.current=!0,(0,o(22673).p4)({environment:g,workflowId:t.id,isDatabaseAgent:(0,o(905470).uP)(p)})))}),[g,t,p]),R=(0,n.useCallback)((e=>{if(t.table===s().U6)return;D();const o=e.target.value;b&&u.clearError("name"),c().saveName({workflowStore:t,name:o,environment:g})}),[t,g,b,u,D]),L=(0,n.useCallback)((e=>{if(t.table===s().U6)return;const o=e.target.value;x&&u.clearError("description"),c().saveDescription({workflowStore:t,description:o,environment:g,threadStore:void 0})}),[t,g,x,u]),z=(0,n.useCallback)((()=>{A(!0)}),[]),V=(0,n.useCallback)((()=>{A(!1)}),[]),O=(0,n.useCallback)((()=>{P(!0)}),[]),K=(0,n.useCallback)((()=>{P(!1)}),[]),W=(0,n.useCallback)((()=>{t.table!==s().U6&&(x&&u.clearError("description"),c().saveDescription({workflowStore:t,description:"",environment:g,threadStore:void 0}),C(!1))}),[t,g,x,u]),N=k?"":"Add a description…";return(0,f.jsx)(o(699143).Y1,{direction:"vertical",width:"fill",children:(0,f.jsxs)("div",{style:B.headerContainer,onMouseEnter:z,onMouseLeave:V,children:[(0,f.jsx)(m,{workflowStore:t,disabled:k}),(0,f.jsx)("div",{style:{...B.buttonGroup,...T||_?B.buttonGroupVisible:{},display:"flex",gap:8},children:k?void 0:(0,f.jsx)(o(631524).p,{colorVariant:"tertiary",onClick:j?W:()=>C(!0),onFocus:O,onBlur:K,iconLeading:{icon:o(361173).infoCircleFillSmallIcon,size:"sm"},children:j?(0,f.jsx)(l().sA,{defaultMessage:"Remove description",id:"workflowAgentHeader.removeDescription.button"}):(0,f.jsx)(l().sA,{defaultMessage:"Add description",id:"workflowAgentHeader.addDescription.button"})})}),(0,f.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[(0,f.jsx)("div",{style:B.nameInput,children:(0,f.jsx)(h().E,{placeholder:"New agent",value:S,onChange:R,disabled:k,debugName:"AgentNameInput",autosizeMinHeight:E,inputClassName:o(882722).O2b})}),j?(0,f.jsx)("div",{style:B.descriptionInput,children:(0,f.jsx)(h().E,{placeholder:N,value:w,onChange:L,disabled:k,debugName:"AgentDescriptionInput",autosizeMinHeight:24})}):void 0]})]})})}))},701751:(e,t,o)=>{o.d(t,{p:()=>i});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",fittedViewBox:"3.97 1.94 14.91 15.66",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M10.55 12.808a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 1 0 1.1 0z"}),(0,n.jsx)("path",{d:"M15.4 1.95a3.48 3.48 0 0 0-3.48 3.48v1.92H6.4a2.425 2.425 0 0 0-2.425 2.425v5.4A2.425 2.425 0 0 0 6.4 17.6h7.2a2.425 2.425 0 0 0 2.425-2.425v-5.4A2.425 2.425 0 0 0 13.6 7.35h-.43V5.43a2.23 2.23 0 1 1 4.46 0v2.095a.625.625 0 1 0 1.25 0V5.43a3.48 3.48 0 0 0-3.48-3.48M5.225 9.775c0-.649.526-1.175 1.175-1.175h7.2c.649 0 1.175.526 1.175 1.175v5.4c0 .649-.526 1.175-1.175 1.175H6.4a1.175 1.175 0 0 1-1.175-1.175z"})]})},i=(0,o(340498).wt)("lockOpen",r,"default")},716469:(e,t,o)=>{o.d(t,{R:()=>c});var n=()=>o(590526),r=()=>o(69708),i=()=>o(843014),a=()=>o(865698),s=()=>o(272136),l=()=>o(676953);function d(e,t){if(e&&t)return t[e]}function c(e){const{config:t,agentModelConfig:o,intl:c}=e,u=(0,r().tz)(),p=c??u;return(0,n().K8)((()=>{const e=(0,s().h)();if("workflow"===t.type&&null!=o&&o.type){const t=d(o.type,e),n=(0,a().DL)(o.type);return{modelFamily:n,modelName:(0,a().tv)(o.type,p,t),modelColor:(0,a().G2)(n)}}const n=function(e){if("markdown-chat"===e.type)return e.model}(t),r=d(n,e),c=(0,a().DL)(n);return{modelFamily:c,modelName:(null==r?void 0:r.modelMessage)??(0,l().hg)({model:n,intl:p})??p.formatMessage(i().D.notionAIAutomatic),modelColor:(0,a().G2)(c)}}),[t,o,p],{useDeepEqual:!0})}},738508:(e,t,o)=>{o.r(t),o.d(t,{cursorIcon:()=>i,iconDefinition:()=>r});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",fittedViewBox:"1.25 0 17.5 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("g",{className:"logo-light-mode",children:[(0,n.jsxs)("g",{clipPath:"url(#clip0_16020_205)",children:[(0,n.jsx)("path",{fill:"#757575",d:"m9.995 9.987 8.658 4.999a.6.6 0 0 1-.226.226l-8.092 4.672a.68.68 0 0 1-.68 0l-8.092-4.672a.6.6 0 0 1-.226-.226z"}),(0,n.jsx)("path",{fill:"#525252",d:"M9.995 0v9.987l-8.658 4.999a.6.6 0 0 1-.082-.309v-9.38c0-.22.117-.424.308-.534L9.655.09a.7.7 0 0 1 .34-.09"}),(0,n.jsx)("path",{fill:"#404040",d:"M18.652 4.989a.6.6 0 0 0-.225-.226L10.334.09A.7.7 0 0 0 9.995 0v9.987l8.658 4.999a.6.6 0 0 0 .083-.309v-9.38c0-.11-.03-.216-.083-.308"}),(0,n.jsx)("path",{fill:"#D9D9D9",d:"M18.047 5.339a.29.29 0 0 1 0 .29l-7.859 13.61c-.053.093-.193.055-.193-.05v-8.97a.4.4 0 0 0-.054-.201z"}),(0,n.jsx)("path",{fill:"#fff",d:"m18.047 5.339-8.106 4.68a.4.4 0 0 0-.147-.147L2.027 5.387c-.092-.053-.054-.193.052-.193h15.717c.111 0 .202.06.25.145"})]}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"clip0_16020_205",children:(0,n.jsx)("path",{fill:"#fff",d:"M1.255 0h17.49v20H1.256z"})})})]}),(0,n.jsxs)("g",{className:"logo-dark-mode",children:[(0,n.jsxs)("g",{clipPath:"url(#clip0_16020_213)",children:[(0,n.jsx)("path",{fill:"#6E6E6E",d:"m9.995 9.987 8.658 4.999a.6.6 0 0 1-.226.226l-8.092 4.672a.68.68 0 0 1-.68 0l-8.092-4.672a.6.6 0 0 1-.226-.226z"}),(0,n.jsx)("path",{fill:"#4A4A4A",d:"M9.995 0v9.987l-8.658 4.999a.6.6 0 0 1-.082-.309v-9.38c0-.22.117-.424.308-.534L9.655.09a.7.7 0 0 1 .34-.09"}),(0,n.jsx)("path",{fill:"#383838",d:"M18.652 4.989a.6.6 0 0 0-.225-.226L10.334.09A.7.7 0 0 0 9.995 0v9.987l8.658 4.999a.6.6 0 0 0 .083-.309v-9.38c0-.11-.03-.216-.083-.308"}),(0,n.jsx)("path",{fill:"#C9C9C9",d:"M18.047 5.339a.29.29 0 0 1 0 .29l-7.859 13.61c-.053.093-.193.055-.193-.05v-8.97a.4.4 0 0 0-.054-.201z"}),(0,n.jsx)("path",{fill:"#fff",d:"m18.047 5.339-8.106 4.68a.4.4 0 0 0-.147-.147L2.027 5.387c-.092-.053-.054-.193.052-.193h15.717c.111 0 .202.06.25.145"})]}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"clip0_16020_213",children:(0,n.jsx)("path",{fill:"#fff",d:"M1.255 0h17.49v20H1.256z"})})})]})]})},i=(0,o(340498).wt)("cursor",r,"default")},740689:(e,t,o)=>{o.d(t,{o:()=>r});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"1.77 1.79 12.45 12.42",svg:(0,o(474848).jsx)("path",{d:"M8.708 1.978a.625.625 0 0 0-.884.884l.914.913H3.84c-1.14 0-2.065.925-2.065 2.065v4.78a.625.625 0 0 0 1.25 0V5.84c0-.45.365-.815.815-.815h4.898l-.914.913a.625.625 0 0 0 .884.884l1.98-1.98a.625.625 0 0 0 0-.884zM13.6 4.755a.625.625 0 0 0-.625.625v4.78c0 .45-.365.815-.815.815H7.263l.913-.913a.625.625 0 0 0-.884-.884l-1.98 1.98a.625.625 0 0 0 0 .884l1.98 1.98a.625.625 0 1 0 .884-.884l-.913-.913h4.897c1.14 0 2.065-.924 2.065-2.065V5.38a.625.625 0 0 0-.625-.625"})},r=(0,o(340498).wt)("arrowSquareLeftRightSmall",n,"small")},745803:(e,t,o)=>{o.d(t,{t:()=>S});var n=o(296540),r=()=>o(564884),i=()=>o(920198),a=()=>o(59226),s=()=>o(484714),l=()=>o(590526),d=()=>o(401497),c=()=>o(741615),u=()=>o(699143),p=()=>o(807449),g=()=>o(406094),f=()=>o(90907),m=()=>o(795523),h=()=>o(69708),v=()=>o(100622),y=()=>o(209660),k=()=>o(511393),b=()=>o(176983),x=o(474848);function S(){const e=(0,s().v3)(),t=(0,d().IS)((()=>({content:{position:"absolute",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:16,textAlign:"center",fontSize:14,gap:16,zIndex:2,top:"50%",insetInlineStart:"50%",transform:"translate(calc(var(--direction, 1) * -50%), -50%)",maxWidth:282,lineHeight:"20px"},blurContainer:{position:"fixed",backdropFilter:"blur(18px)",height:"100%",width:"100%",zIndex:1},buttonWrapper:{paddingInlineStart:"10px",paddingInlineEnd:"12px"},opacityContainer:{position:"fixed",opacity:.4,zIndex:1,background:v().Tj.white,height:"100%",width:"100%"},secondaryMessage:{color:v().Tj.text.secondary,textAlign:"center",fontSize:12,lineHeight:"16px"}})),[]),o=function(){var e;const t=(0,a().X)("blur_missing_name_spaces"),o=(0,i().L)(),n=(0,c()._3)({spaceId:null==o?void 0:o.id}),r=(0,m().Fq)(n)&&!(0,m().Qx)(null==n?void 0:n.subscription),s=Boolean(null==n||null===(e=n.address)||void 0===e?void 0:e.name),l=(0,b().J)(o),d=null==n?void 0:n.provider,u="app_store"===d||"play_store"===d;return t&&l&&r&&!s&&!u}(),S=(0,l().K8)((()=>(0,k().h)(e)),[e]);return(0,n.useEffect)((()=>{o&&(0,r().u)({environment:e,event:{eventName:"missing_name_blur_overlay_displayed",eventProperties:{}}})}),[o,e]),o?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{style:t.content,children:[(0,x.jsx)(p().I,{icon:f().lockIcon,size:24,colorVariant:"primary"}),(0,x.jsxs)(u().Y1,{gap:12,children:[(0,x.jsx)("div",{children:S?(0,x.jsx)(h().sA,{defaultMessage:"Access to Notion is limited because we need your billing name",id:"missingNameBlurExperience.missingNameBlurOverlay.messageContent"}):(0,x.jsx)(h().sA,{defaultMessage:"Access to Notion is limited",id:"missingNameBlurExperience.missingNameBlurOverlay.memberMessageContent"})}),(0,x.jsx)("div",{style:t.secondaryMessage,children:S?void 0:(0,x.jsx)(h().sA,{defaultMessage:"Contact a workspace owner to update your workspace’s billing name",id:"missingNameBlurExperience.missingNameBlurOverlay.memberSecondaryLabel"})})]}),(0,x.jsx)("div",{style:t.buttonWrapper,children:(0,x.jsx)(g().A,{style:{gap:4},size:"lg",onClick:()=>{(0,r().u)({environment:e,event:{eventName:"missing_name_blur_overlay_cta_clicked",eventProperties:{is_workspace_owner:S}}}),S?y().Ow({currentTab:"billing",subtab:"address"}):y().Ow()},children:S?(0,x.jsx)(h().sA,{defaultMessage:"Update billing name",id:"missingNameBlurExperience.missingNameBlurOverlay.buttonLabel"}):(0,x.jsx)(h().sA,{defaultMessage:"View workspace owner",id:"missingNameBlurExperience.missingNameBlurOverlay.memberButtonLabel"})})})]}),(0,x.jsx)("div",{style:t.blurContainer}),(0,x.jsx)("div",{style:t.opacityContainer})]}):null}},748054:(e,t,o)=>{o.d(t,{M:()=>r});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.97 2.68 12.51 14.37",svg:(0,o(474848).jsx)("path",{d:"M10.282 3.66a5.39 5.39 0 0 0-5.217-.54l-.711.305a.63.63 0 0 0-.38.575v12.425a.625.625 0 1 0 1.25 0v-3.913l.333-.142a4.14 4.14 0 0 1 4.008.414 5.39 5.39 0 0 0 5.504.405l1.06-.53a.63.63 0 0 0 .346-.56V4a.625.625 0 0 0-.905-.558l-1.06.53c-1.36.68-2.983.56-4.228-.312m-5.057 7.495V4.412l.332-.142a4.14 4.14 0 0 1 4.008.413 5.39 5.39 0 0 0 5.504.406l.156-.078v6.703l-.715.357c-1.36.68-2.983.56-4.228-.312a5.4 5.4 0 0 0-5.057-.604"})},r=(0,o(340498).wt)("flag",n,"default")},753264:(e,t,o)=>{o.d(t,{L:()=>u});var n=o(296540),r=()=>o(401497),i=()=>o(249046),a=()=>o(69708),s=()=>o(100622),l=()=>o(284371),d=()=>o(890494),c=o(474848);function u({title:e,description:t,number:o}){const u=(0,r().IS)((()=>({title:{fontSize:l().J.UIRegular.desktop,color:s().Tj.text.primary,fontWeight:l().Wy.medium},body:{fontSize:l().J.UIRegular.desktop,fontWeight:l().Wy.regular,color:s().Tj.text.secondary}})),[]);return(0,c.jsxs)(i().Ye,{gap:8,style:{marginBottom:8},children:[(0,c.jsx)(d().A,{number:o}),(0,c.jsxs)(i().wt,{gap:4,children:[(0,c.jsx)("div",{style:u.title,children:(0,c.jsx)(a().sA,{...e})}),t?(0,c.jsx)("div",{style:u.body,children:n.isValidElement(t)?t:(0,c.jsx)(a().sA,{...t})}):void 0]})]})}},753721:(e,t,o)=>{o.d(t,{X:()=>i});var n=()=>o(590526),r=()=>o(391400);function i(){return(0,n().K8)((()=>r().A.state.initialRenderCompleted),[])}},783793:(e,t,o)=>{o.d(t,{o:()=>d,x:()=>l});o(296540);var n=()=>o(401497),r=()=>o(100622),i=()=>o(278589),a=()=>o(200424),s=o(474848);function l(e){const{variant:t,imgSource:o,tintColor:a,faceStyle:l,shadowVariant:c="strong",style:u,...p}=e,g=(0,n().IS)((()=>{const e=(0,i().N)(t);return{faceImgWrap:{width:e,height:e,borderRadius:"100%",background:r().Tj.assistantCornerButtonBackground,..."strong"===c&&{boxShadow:e>=90?r().Tj.shadowMDThickerOutline:r().Tj.shadowMD},..."light"===c&&{borderRadius:"50%",boxShadow:e>=90?r().Tj.shadowSMThickerOutline:r().Tj.shadowSM},overflow:"hidden",...u}}}),[t,c,u]);return(0,s.jsx)("div",{...p,children:(0,s.jsx)("div",{style:g.faceImgWrap,children:(0,s.jsx)(d,{imgSource:o,variant:t,tintColor:a,style:l})})})}function d(e){const{imgSource:t,variant:o,tintColor:r,style:l,alt:d,...c}=e,u=(0,i().N)(o),p=t??a(),g=d??"Notion AI face",f=(0,n().IS)((()=>({faceImg:{height:u,width:u,transform:"scaleX(var(--direction, 1))",...l},tintedFace:{height:u,width:u,transform:"scaleX(var(--direction, 1))",backgroundColor:r,WebkitMaskImage:`url(${p})`,maskImage:`url(${p})`,WebkitMaskRepeat:"no-repeat",maskRepeat:"no-repeat",WebkitMaskPosition:"center",maskPosition:"center",WebkitMaskSize:"contain",maskSize:"contain",...l}})),[u,l,r,p]);return void 0!==r?(0,s.jsx)("div",{style:f.tintedFace,role:"img","aria-label":g}):(0,s.jsx)("img",{...c,style:f.faceImg,src:p,alt:g})}},821983:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,keyFillIcon:()=>r});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"5.31 1.92 9.37 16.15",svg:(0,o(474848).jsx)("path",{d:"M12.02 10.83a.3.3 0 0 0 .062-.023 4.684 4.684 0 1 0-4.164 0q.03.014.062.023v5.225c0 .086.034.169.095.23L9.77 17.98a.325.325 0 0 0 .46 0l1.695-1.695a.325.325 0 0 0 0-.46l-1.465-1.466 1.465-1.465a.33.33 0 0 0 .095-.23zM10 6.67a1 1 0 1 1 0-2 1 1 0 0 1 0 2"})},r=(0,o(340498).wt)("keyFill",n,"fill")},863642:(e,t,o)=>{o.d(t,{f:()=>a,j:()=>i});var n=()=>o(757695);class r extends n().Store{getInitialState(){return{selectedTab:"home"}}setSelectedTab(e){this.setState({selectedTab:e})}}const i=new r,a=n().Store.createValue(o(749687).SIDEBAR_MIN_WIDTH,{name:"sidebarPreviousNonFullWidthStore"})},864779:(e,t,o)=>{o.d(t,{Me:()=>s,Vv:()=>r,Z3:()=>i,wI:()=>a});var n=()=>o(906745);function r(e){if("week"===e.frequency&&e.weekdays&&1===e.weekdays.length)return{weekday:e.weekdays[0],duration:e.interval}}function i(e){const{currentSprintEndDate:t,sprintSchedule:o}=e;return l({startDate:c({dateToAdjust:n().DateTime.fromISO(t),weekday:o.weekday,wrapForEqualDays:!0}),duration:o.duration})}function a(e){const{userTimeZone:t,sprintSchedule:o}=e;return l({startDate:n().DateTime.local({zone:t}),duration:o.duration})}function s(e){const{currentSprintStartDate:t,sprintSchedule:o}=e,r=c({dateToAdjust:n().DateTime.fromISO(t),weekday:o.weekday,wrapForEqualDays:!1}),{end_date:i}=l({startDate:r,duration:o.duration});let a=n().DateTime.fromISO(i);const s=n().DateTime.now().startOf("day");for(;a.diff(s,"days").days<0;)a=a.plus({weeks:1});return{type:"daterange",start_date:a.plus({days:1}).minus({weeks:o.duration}).toISODate(),end_date:a.toISODate()}}function l(e){const{startDate:t,duration:o}=e,n=t.plus({weeks:o}).minus({days:1});return{type:"daterange",start_date:t.toISODate(),end_date:n.toISODate()}}const d={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6};function c(e){const{dateToAdjust:t,weekday:o,wrapForEqualDays:n}=e,r=function(e){const{currentWeekday:t,nextWeekday:o,wrapForEqualDays:n}=e,r="number"==typeof t?t:d[t],i="number"==typeof o?o:d[o];if(r===i)return n?7:0;let a=r,s=0;for(;a!==i;)a===d.SA?a=0:a+=1,s+=1;return s}({currentWeekday:t.weekday%7,nextWeekday:d[o],wrapForEqualDays:n});return t.plus({days:r})}},885962:(e,t,o)=>{o.d(t,{x:()=>i});var n=()=>o(79926);const r=new(n().O2)("BannersRenderer",(async()=>Promise.all([o.e(9773),o.e(36556),o.e(40537),o.e(96346),o.e(92845),o.e(24587),o.e(64556),o.e(91793),o.e(42660),o.e(41423),o.e(21627),o.e(5181),o.e(25700),o.e(22114),o.e(63488),o.e(27942),o.e(60593),o.e(54892),o.e(52396),o.e(94153)]).then(o.bind(o,844361)))),i=(0,n()._h)(r,(e=>e.BannersRenderer))},886025:(e,t,o)=>{o.d(t,{J:()=>f,Y:()=>g});var n=o(296540),r=()=>o(59226),i=()=>o(726637),a=()=>o(401497),s=()=>o(451306),l=()=>o(100622),d=()=>o(236030),c=()=>o(971003),u=o(474848);const p=4;function g(e){const{children:t,align:o,sticky:g,style:f}=e,m=(0,r().X)("title_property_peek_button_redesign"),{property:h}=(0,n.useContext)(c().L8),v=(0,a().IS)((()=>{const t=e.height||24,n=(d().wc-t)/2;return{buttonWrapperStyle:{display:"flex",justifyContent:"right"===o?"end":"start",position:"absolute",top:n,insetInlineEnd:0,insetInlineStart:0,zIndex:2,margin:`0 ${p}px`,pointerEvents:"none",...f},innerWrapperStyle:{position:"relative",display:"flex",pointerEvents:"auto",background:m&&i().A.isMobile&&"title"===h?void 0:l().Tj.background.elevated,padding:"2px",height:t,boxShadow:m&&i().A.isMobile&&"title"===h?void 0:l().Tj.shadowSM,borderRadius:6,...m&&i().A.isMobile&&{width:48,height:48,alignItems:"center",justifyContent:"center",marginTop:-12,marginInlineEnd:-8,borderRadius:0}},stickyStyle:{position:"sticky",insetInlineEnd:p},buttonHitBoxStyle:{position:"absolute",top:10,bottom:10,insetInlineStart:10,insetInlineEnd:10,zIndex:-1,background:l().Tj.background.elevated,boxShadow:l().Tj.shadowSM,borderRadius:"50%",pointerEvents:"auto"}}}),[o,e.height,f,m,h]);return t?(0,u.jsx)("div",{style:v.buttonWrapperStyle,children:(0,u.jsxs)("div",{...(0,s().ow)(v.innerWrapperStyle,g&&v.stickyStyle),className:"quickActionContainer",children:[m&&i().A.isMobile&&"title"===h?(0,u.jsx)("div",{style:v.buttonHitBoxStyle}):void 0,t]})}):null}function f(e){const{surface:t,align:o}=e;switch(t){case"table":return(0,u.jsx)(b,{...e,align:o??"right"});case"property_module":case"page":return(0,u.jsx)(h,{...e,align:o??"right"});case"compact_page":return(0,u.jsx)(v,{...e,align:o??"right"});case"board":return(0,u.jsx)(m,{...e,align:o??"right"});case"gallery":return(0,u.jsx)(y,{...e,align:o??"right"});case"list":return(0,u.jsx)(k,{...e,align:o??"right"});default:return(0,u.jsx)(g,{...e,align:o??"right"})}}function m(e){const t=(0,a().IS)((()=>({buttonWrapperStyle:{top:0,...e.style}})),[e.style]);return(0,u.jsx)(g,{...e,style:t.buttonWrapperStyle})}function h(e){const{propertyModule:t}=(0,n.useContext)(c().L8),o=(0,a().IS)((()=>({buttonWrapperStyle:{top:t&&"style"in t&&"large"===t.style?10:5,...e.style}})),[t,e.style]);return(0,u.jsx)(g,{...e,style:o.buttonWrapperStyle})}function v(e){const t=(0,a().IS)((()=>({buttonWrapperStyle:{top:"unset",...e.style}})),[e.style]);return(0,u.jsx)(g,{...e,style:t.buttonWrapperStyle})}function y(e){const t=(0,a().IS)((()=>({buttonWrapperStyle:{top:-1,...e.style}})),[e.style]);return(0,u.jsx)(g,{...e,style:t.buttonWrapperStyle})}function k(e){const t=(0,a().IS)((()=>({buttonWrapperStyle:{position:void 0,margin:0,...e.style}})),[e.style]);return(0,u.jsx)(g,{...e,style:t.buttonWrapperStyle})}function b(e){const{align:t="right"}=e,{shouldWrap:o,propertyFormat:r}=(0,n.useContext)(c().L8),s=null==r?void 0:r.width,l=(0,n.useMemo)((()=>s&&s<=32?p-4:s&&s<50?p-2:p),[s]),d=(0,a().IS)((()=>({buttonWrapperStyle:{...e.style,...i().A.isMobile&&o?{position:"sticky",float:t,marginInlineEnd:0,marginInlineStart:2,insetInlineEnd:l}:{margin:`0 ${l}px`}}})),[t,l,e.style,o]);return(0,u.jsx)(g,{...e,style:d.buttonWrapperStyle,sticky:!0})}},888325:(e,t,o)=>{function n(e){return`${e.table}:${e.id}`}o.d(t,{_:()=>n})},890494:(e,t,o)=>{o.d(t,{A:()=>s});o(296540);var n=()=>o(401497),r=()=>o(100622),i=()=>o(284371),a=o(474848);function s(e){const t=(0,n().eP)(),o=(0,n().IS)((()=>({numberCircleBaseStyle:{display:"flex",flexShrink:0,borderRadius:"100%",backgroundColor:e.isHighlighted?r().Tj.palette.uiBlue[600]:e.isLightBlueHighlighted?r().Tj.blue.background.primaryTranslucent:"dark"===t?r().Tj.palette.gray[300]:r().Tj.palette.gray[75],width:20,height:20,color:e.isHighlighted?"white":e.isLightBlueHighlighted?r().Tj.blue.text.accentPrimary:r().Tj.palette.gray[600],textAlign:"center",alignItems:"center",justifyContent:"center",fontWeight:i().Wy.semibold,fontSize:"10px"}})),[e.isHighlighted,e.isLightBlueHighlighted,t]);return(0,a.jsx)("div",{style:{...o.numberCircleBaseStyle,...e.style},children:e.number})}},890856:(e,t,o)=>{o.d(t,{t:()=>n});const n=(0,o(340498).xh)("googleGemini",{default:{loader:()=>o.e(19365).then(o.bind(o,965670))}})},950914:(e,t,o)=>{o.d(t,{AL:()=>i,Q6:()=>s,vt:()=>a});o(898992),o(672577);var n=()=>o(433337),r=()=>o(254947);const i={autoCompleteSprints:!1,actionConfig:{complete_sprint_action:"complete_sprint_and_move_incomplete_tasks_to_next_sprint"},recurrenceConfig:{interval:2,weekdays:["MO"]}};function a(e){const{eventTracker:t,properties:o}=e;t.DO_NOT_USE_commonTrackEvent({eventName:"complete_sprint_action",properties:o})}function s(e,t){var o;return null===(o=t.groups)||void 0===o||null===(o=o.find((t=>t.id===n().nl||(null==t?void 0:t.name)===r().P0||(null==t?void 0:t.name)===e.formatMessage(r().oz.statusGroupNameComplete))))||void 0===o?void 0:o.name}},965142:(e,t,o)=>{o.d(t,{V:()=>r});class n extends(()=>o(757695))().Store{getInitialState(){return{isKeyboardShortcutsOpen:!1,toggleSource:void 0,openCount:0}}}const r=new n;(0,o(852832).exposeDebugValue)("keyboardShortcutsModalStore",r)}}]);