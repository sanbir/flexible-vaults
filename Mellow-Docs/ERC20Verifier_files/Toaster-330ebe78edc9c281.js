"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[2411,32626,47381,48486,90871,97651,99171],{24126:(e,t,o)=>{o.d(t,{c:()=>r});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.9 2.75 12.18 14.49",svg:(0,o(474848).jsx)("path",{d:"M12.626 2.768a.625.625 0 0 1 0 1.224l-.126.013h-.125v4.794l3.366 5.159c.893 1.369-.03 3.17-1.623 3.281l-.156.006H6.039c-1.688 0-2.703-1.873-1.78-3.287l3.366-5.157V4.005H7.5a.625.625 0 0 1 0-1.25h5zM8.875 9.173l-.102.156-1.567 2.401h5.589l-1.569-2.403-.101-.156V4.005h-2.25z"})},r=(0,o(340498).wt)("beaker",n,"default")},27356:(e,t,o)=>{o.r(t),o.d(t,{UISpacePermissionGroupToken:()=>h});var n=o(296540),r=()=>o(726637),i=()=>o(484714),a=()=>o(590526),s=()=>o(401497),l=()=>o(942194),c=()=>o(784892),u=()=>o(437607),d=()=>o(914462),p=()=>o(69708),m=()=>o(100622),f=()=>o(284371),v=()=>o(848401),g=()=>o(580648),y=o(474848);function h(e){const{parentStore:t,style:o,format:h}=e,x=e.groupPointer.id,_=e.groupPointer.spaceId,S=(0,u().S4)({spacePermissionGroupId:x,spaceId:_}),b=(0,a().K8)((()=>{if(e.groupModel)return e.groupModel;if(!t)return;return l().C.createChildStore(t,S).getModel()}),[t,S,e.groupModel]),M=(0,i().Y0)(),{outerStyle:I,avatarWrapStyle:w}=(0,s().IS)((()=>({outerStyle:{display:"flex",alignItems:"center",minWidth:0},avatarWrapStyle:{width:"none",minHeight:"none",marginInlineEnd:6},badgeStyle:{borderRadius:4,background:m().Tj.legacyDefaultSelectColor,fontSize:r().A.isMobile?11:9,lineHeight:M.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em"}})),[M]),k=(0,p().tz)(),C=(0,a().K8)((()=>(0,d().n)({intl:k,permissionGroupModel:b})),[k,b]),T=(0,n.useCallback)((e=>h===c().NY.Inline?(0,y.jsx)(g().o,{group:b,size:e}):(0,y.jsxs)("div",{style:I,children:[(0,y.jsx)("div",{style:w,children:(0,y.jsx)(g().o,{group:b,size:e})}),(0,y.jsx)("div",{style:{...f().RC},children:C})]})),[h,I,w,b,C]);return(0,y.jsx)(v().Ay,{...e,style:{margin:0,...o},renderAvatar:T})}},53528:(e,t,o)=>{o.d(t,{OH:()=>s,T2:()=>l,do:()=>c});var n=()=>o(597777),r=()=>o(869190),i=()=>o(604995),a=()=>o(416504);function s(e){const{dateTime:t,intl:o,shortenDateAndRange:n}=e,a=i().C6.toPersistedDate(t.valueOf());return r().ZF({value:a,allowRelativeDates:!0,intl:o,shortenDateAndRange:n,displayInUserTimezone:!0})}function l(e){const{dateTime:t,intl:o,userTimeZone:n,displayInUserTimezone:a,alwaysIncludeTimezone:s}=e,l=i().C6.toPersistedDateTime(t.valueOf(),t.zoneName);return r().ZF({value:l,allowRelativeDates:!0,intl:o,userTimeZone:n,displayInUserTimezone:a,alwaysIncludeTimezone:s})}function c(e){const{luxonRange:t,intl:o}=e,s=i().C6.toPersistedDateRange(t),l=r().ZF({value:s,allowRelativeDates:!1,shortenDateAndRange:!0,intl:o,displayInUserTimezone:!0}),c=t.end.setZone((0,a().P)()),u=r().fU({start_time:c.toFormat(n().GE),humanReadable:!1,intl:o});return o.formatMessage({id:"verification.timeRange",defaultMessage:"{formattedDateRange} at {formattedEndTime}"},{formattedDateRange:l,formattedEndTime:u})}},59110:(e,t,o)=>{o.r(t),o.d(t,{loadLocalSubtree:()=>S});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(803949);var n=()=>o(726637),r=()=>o(700500),i=()=>o(175482),a=()=>o(777447),s=()=>o(792071),l=()=>o(976618),c=()=>o(388821),u=()=>o(696706),d=()=>o(912720),p=()=>o(199378),m=()=>o(179034),f=()=>o(519831),v=()=>o(869558),g=()=>o(37165),y=()=>o(144081),h=()=>o(743246),x=()=>o(201980),_=()=>o(534177);function S(e){const{environment:t,blockId:o,inMemoryRecordCache:n,options:r}=e,i=t.currentUser.id,a=c().RecordMap.create(),s=new Set,l=[{pointer:{table:m().ev,id:o},parentId:"doesn't matter"}];for(;l.length>0;){const e=l.shift();if(!e)continue;if(s.has(e.pointer.id))continue;const t=o===e.pointer.id,c=b({pointer:e.pointer,recordMap:a,inMemoryRecordCache:n,currentUserId:i,cursors:l,cursor:e,options:r,isRootRequest:t});if(c)return c;s.add(e.pointer.id)}return{type:"success",recordMap:a}}function b(e){const{pointer:t,recordMap:o,inMemoryRecordCache:c,currentUserId:S,cursors:b,cursor:M,options:I,isRootRequest:w}=e;let k;return(0,u().Yt)(t,m().ev)?k=function(e){var t,o,l,c;const{pointer:u,recordMap:p,inMemoryRecordCache:f,currentUserId:g,cursors:y,cursor:S,options:b,isRootRequest:M}=e,I=f.getRecord({pointer:u,userId:g}),w=null==I?void 0:I.value;if(!w)return b.requireFullSubtree?{type:"error",reason:"missing_record",pointer:u}:void 0;const k=b.excludeCrdtData?i().ir(w):w;if(b.includeLegacyTransclusionBlockValues){if(!M&&k.parent_id!==S.parentId&&!S.isBlockContentChild)return}else if(!M&&k.parent_id!==S.parentId)return;if(k.type===r().xd.externalObjectInstance&&!b.allowCopyExternalObjectInstances)return{type:"error",reason:"encountered_external_object_instance",pointer:u};if(p.setValue(u,k),!b.skipNavigableChildren){const e=s().Bj6.fromBlock(k).getCollectionPointers();for(const t of e){const e=f.getRecord({pointer:t,userId:g});var C,T;if(e)(null===(C=e.value)||void 0===C?void 0:C.parent_table)===m().ev&&(null===(T=e.value)||void 0===T?void 0:T.parent_id)===k.id&&y.push({pointer:t,parentId:k.id});else if(b.requireFullSubtree)return{type:"error",reason:"missing_record",pointer:t}}if(k.view_ids)for(const t of k.view_ids)y.push({pointer:{table:v().Gy,id:t,spaceId:k.space_id},parentId:k.id})}if(!(b.skipBlockContent||b.skipTransclusionContainerChildren&&"transclusion_container"===k.type||b.skipNavigableChildren&&(0,r().$I)(k.type))){const e=s().Bj6.fromBlock(k).getRenderableContentIds();for(const t of e)y.push({pointer:{table:m().ev,id:t},parentId:k.id,isBlockContentChild:!0})}const A=s().Bj6.fromBlock(k).getNonContentChildren();for(const n of A)y.push({pointer:{table:m().ev,id:n},parentId:k.id,isBlockContentChild:!0});if(k.type===r().xd.externalObjectInstance){var j,E;const e=(null===(j=k.format)||void 0===j?void 0:j.related_external_object_uris_to_instance_ids)&&Object.values(null===(E=k.format)||void 0===E?void 0:E.related_external_object_uris_to_instance_ids)||[];for(const t of e)y.push({pointer:{table:m().ev,id:t,spaceId:k.space_id},parentId:k.id})}if(!b.skipNavigableChildren&&k.properties){const e=Object.values(k.properties).filter(_().O9);for(const t of e)for(const e of t)for(const t of x().uPN(e)){if(x().jIt(t)){const e=x().v55(t);y.push({pointer:{table:m().ev,id:e},parentId:k.id})}if(x().sh$(t)){const e=x().cQR(t),o=(0,a().lX)({url:e,baseUrl:n().A.domainBaseUrl,publicDomainName:n().A.publicDomainName});o&&y.push({pointer:{table:m().ev,id:o},parentId:k.id})}if(x().N53(t)){const e=x().T$c(t);e&&y.push({pointer:{table:m().ev,id:e,spaceId:k.space_id},parentId:k.id})}}}"form"===k.type&&null!==(t=k.format)&&void 0!==t&&t.form_layout_pointer&&y.push({pointer:k.format.form_layout_pointer,parentId:k.id});null!==(o=k.format)&&void 0!==o&&o.automation_id&&y.push({pointer:{table:d().yB,id:k.format.automation_id,spaceId:k.space_id},parentId:k.id});null!==(l=k.format)&&void 0!==l&&l.workflow_id&&y.push({pointer:{table:h().C0,id:k.format.workflow_id,spaceId:k.space_id},parentId:k.id});null!==(c=k.format)&&void 0!==c&&c.ai_instructions_page_pointer&&y.push({pointer:k.format.ai_instructions_page_pointer,parentId:k.id})}({pointer:t,recordMap:o,inMemoryRecordCache:c,currentUserId:S,cursors:b,cursor:M,options:I,isRootRequest:w}):(0,u().Yt)(t,f().Vl)?k=function(e){var t,o;const{pointer:n,recordMap:r,inMemoryRecordCache:i,currentUserId:a,cursors:s,cursor:l,options:c}=e;if(!c.allowCopyCollections)return{type:"error",reason:"encountered_collection",pointer:n};const u=i.getRecord({pointer:n,userId:a});if(null==u||!u.value)return c.requireFullSubtree?{type:"error",reason:"missing_record",pointer:n}:void 0;if(u.value.parent_id!==l.parentId)return;const p=u.value;r.setValue(n,p),i.forEachRecord(a,(({model:e})=>{e.table===m().ev&&e&&e.parent_id===n.id&&e.alive&&s.push({pointer:e.pointer,parentId:n.id})}));const f=(null===(t=p.format)||void 0===t?void 0:t.automation_ids)??[];for(const m of f)s.push({pointer:{table:d().yB,id:m,spaceId:p.space_id},parentId:p.id});p.schema&&Object.values(p.schema).forEach((e=>{e&&"button"===e.type&&e.automation_id&&s.push({pointer:{id:e.automation_id,spaceId:p.space_id,table:d().yB},parentId:p.id})}));null!==(o=p.format)&&void 0!==o&&o.layout_pointer&&s.push({pointer:p.format.layout_pointer,parentId:p.id})}({pointer:t,recordMap:o,inMemoryRecordCache:c,currentUserId:S,cursors:b,cursor:M,options:I}):(0,u().Yt)(t,v().Gy)?k=function(e){var t,o;const{pointer:n,recordMap:r,inMemoryRecordCache:i,currentUserId:a,cursors:s,cursor:l,options:c}=e,u=i.getRecord({pointer:n,userId:a});if(null==u||!u.value)return c.requireFullSubtree?{type:"error",reason:"missing_record",pointer:n}:void 0;if(u.value.parent_id!==l.parentId)return;"form_editor"===u.value.type&&null!==(t=u.value.format)&&void 0!==t&&t.form_block_pointer&&s.push({pointer:u.value.format.form_block_pointer,parentId:u.value.id});null!==(o=u.value.format)&&void 0!==o&&o.dashboard_layout_pointer&&s.push({pointer:u.value.format.dashboard_layout_pointer,parentId:u.value.id});r.setValue(n,u.value)}({pointer:t,recordMap:o,inMemoryRecordCache:c,currentUserId:S,cursors:b,cursor:M,options:I}):(0,u().Yt)(t,d().yB)?k=function(e){const{pointer:t,recordMap:o,inMemoryRecordCache:n,currentUserId:r,cursors:i,cursor:a,options:s}=e,l=n.getRecord({pointer:t,userId:r});if(null==l||!l.value)return s.requireFullSubtree?{type:"error",reason:"missing_record",pointer:t}:void 0;if(l.value.parent_id!==a.parentId)return;o.setValue(t,l.value);for(const c of l.value.action_ids??[])i.push({pointer:{table:p().SC,id:c,spaceId:l.value.space_id},parentId:l.value.id})}({pointer:t,recordMap:o,inMemoryRecordCache:c,currentUserId:S,cursors:b,cursor:M,options:I}):(0,u().Yt)(t,p().SC)?k=function(e){const{pointer:t,recordMap:o,inMemoryRecordCache:n,currentUserId:r,cursors:i,cursor:a,options:s}=e,l=n.getRecord({pointer:t,userId:r});if(null==l||!l.value)return s.requireFullSubtree?{type:"error",reason:"missing_record",pointer:a.pointer}:void 0;if(l.value.parent_id!==a.parentId)return;o.setValue(t,l.value);for(const c of l.value.blocks??[])i.push({pointer:{table:m().ev,id:c,spaceId:l.value.space_id},parentId:l.value.id})}({pointer:t,recordMap:o,inMemoryRecordCache:c,currentUserId:S,cursors:b,cursor:M,options:I}):(0,u().Yt)(t,h().C0)?k=function(e){const{pointer:t,recordMap:o,inMemoryRecordCache:n,currentUserId:r,cursor:i,options:a}=e,s=n.getRecord({pointer:t,userId:r});if(null==s||!s.value)return a.requireFullSubtree?{type:"error",reason:"missing_record",pointer:i.pointer}:void 0;if(s.value.parent_id!==i.parentId)return;o.setValue(t,s.value)}({pointer:t,recordMap:o,inMemoryRecordCache:c,currentUserId:S,cursor:M,options:I}):(0,u().Yt)(t,y().zx)?k=function(e){const{pointer:t,recordMap:o,inMemoryRecordCache:n,currentUserId:r,cursors:i,options:a}=e,c=n.getRecord({pointer:t,userId:r}),u=null==c?void 0:c.value;if(!u)return a.requireFullSubtree?{type:"error",reason:"missing_record",pointer:t}:void 0;o.setValue(t,u);const d=s().Bj6.fromValue(y().zx,u);for(const s of d.getBlockChildrenPointers())i.push({pointer:s,parentId:t.id});const p=e=>{const o={id:e.collection_view_id,table:v().Gy,spaceId:u.space_id};return i.push({pointer:o,parentId:t.id}),e};(0,l().E)(u.modules,(e=>{if("formQuestion"===e.type){const o={id:e.formQuestionId,table:g().lo,spaceId:u.space_id};i.push({pointer:o,parentId:t.id})}else if("view"===e.type)p(e);else if("row"===e.type)for(const t of e.modules)"view"===t.type&&p(t)}))}({pointer:t,recordMap:o,inMemoryRecordCache:c,currentUserId:S,cursors:b,cursor:M,options:I}):(0,u().Yt)(t,g().lo)&&(k=function(e){const{pointer:t,recordMap:o,inMemoryRecordCache:n,currentUserId:r,options:i}=e,a=n.getRecord({pointer:t,userId:r});if(null==a||!a.value)return i.requireFullSubtree?{type:"error",reason:"missing_record",pointer:t}:void 0;o.setValue(t,a.value)}({pointer:t,recordMap:o,inMemoryRecordCache:c,currentUserId:S,cursors:b,cursor:M,options:I})),k}},77279:(e,t,o)=>{o.r(t),o.d(t,{default:()=>r});class n extends(()=>o(757695))().Store{getInitialState(){return{discussionIdToExpansionStartPointMap:{}}}}const r=new n},79877:(e,t,o)=>{o.d(t,{A:()=>u});var n=o(296540),r=()=>o(597777),i=()=>o(869190),a=()=>o(604995),s=()=>o(416504),l=()=>o(100622),c=o(474848);const u=function(e){const t=(0,o(69708).tz)(),u=(0,o(396182).I)(),m=(0,n.useRef)(),f=(0,n.useCallback)((()=>{const t=e.value;if(!t)return;const n=a().q8(t,(0,s().P)());if(!n)return;const r=n.valueOf(),i=r-Date.now();i<0||i>o(720665).nD||m.current&&m.current.timestamp===r||(m.current&&clearTimeout(m.current.timer),m.current={timestamp:r,timer:setTimeout((()=>u("DateBox","DateBox/createReminderTimer")),i)})}),[u,e.value]),v=(0,n.useCallback)((()=>{m.current&&(clearTimeout(m.current.timer),m.current=void 0)}),[]);(0,n.useEffect)((()=>{f()}),[f]),(0,n.useEffect)((()=>()=>{v()}),[v]);const{value:g,withComma:y}=e,h=(0,o(590526).K8)((()=>g?(0,i().ZF)({value:g,date_format:e.dateFormat,time_format:e.timeFormat,userTimeZone:(0,s().P)(),allowRelativeDates:!0,intl:t,shortenDateAndRange:e.shortenDateAndRange,displayInUserTimezone:e.displayInUserTimezone,getToday:o(847109).x1}):void 0),[t,e.dateFormat,e.displayInUserTimezone,e.shortenDateAndRange,e.timeFormat,g]);if(!g)return null;const x=a().AA(g,(0,s().P)(),o(609679).locale);let _;if((0,r().Lh)(g)){const e=a().Zs(g,(0,s().P)());_=e?{color:l().Tj.red.text.accentPrimary}:{color:l().oZ.blue}}const S=(0,c.jsxs)(c.Fragment,{children:[h,(0,r().Lh)(g)?(0,c.jsx)(o(807449).I,{icon:o(472219).alarmSmallIcon,style:{display:"inline-block",width:"1.2em",marginInlineStart:5,marginInlineEnd:2,paddingBottom:3,verticalAlign:"middle"}}):void 0,y?", ":null]});return e.disableTooltip?(0,c.jsx)("div",{className:e.className,style:{...e.style,..._},children:S}):(0,c.jsx)(o(26697).m,{renderTooltip:()=>(0,c.jsxs)(c.Fragment,{children:[e.tooltipHeader,(0,c.jsxs)("div",{style:p(e.tooltipHeader),children:[d(x.start),x.end?` → ${d(x.end)}`:""]})]}),render:t=>(0,c.jsx)("div",{className:e.className,style:{...e.style,..._},...t,children:S}),placement:e.tooltipPlacement})};function d(e){return(0,i().eV)({value:e,preset:"medium"})}function p(e){return e?{color:l().Tj.text.inverseSecondary}:{}}},89956:(e,t,o)=>{o.d(t,{p:()=>r});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"2.46 2.46 11.08 11.08",svg:(0,o(474848).jsx)("path",{d:"M3.088 2.463a.625.625 0 0 0-.625.625v4a.625.625 0 1 0 1.25 0V4.597l3.045 3.045a.625.625 0 0 0 .884-.884L4.597 3.713h2.49a.625.625 0 1 0 0-1.25zM9.244 8.36a.625.625 0 0 0-.883.884l3.042 3.043H8.912a.625.625 0 1 0 0 1.25h4c.345 0 .625-.28.625-.625v-4a.625.625 0 0 0-1.25 0v2.491z"})},r=(0,o(340498).wt)("arrowExpandDiagonalSmall",n,"small")},97059:(e,t,o)=>{o.d(t,{s:()=>r});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"1.82 1.82 12.68 12.68",svg:(0,o(474848).jsx)("path",{d:"M8 1.825a.575.575 0 0 0-.575.575V4a.575.575 0 0 0 1.15 0V2.4A.575.575 0 0 0 8 1.825m4.367 1.809a.575.575 0 0 0-.814 0l-1.131 1.131a.575.575 0 1 0 .813.813l1.132-1.131a.575.575 0 0 0 0-.813m-7.92 0a.575.575 0 0 0-.813.813l1.13 1.131a.575.575 0 1 0 .814-.813zm3.248 3.071a.7.7 0 1 0-.99.99l.77.77.99-.99zm4.305.72a.575.575 0 0 0 0 1.15h1.6a.575.575 0 1 0 0-1.15zm-9.6 0a.575.575 0 1 0 0 1.15H4a.575.575 0 0 0 0-1.15zm11.895 5.88-5.37-5.37-.99.99 5.37 5.37a.7.7 0 0 0 .99-.99m-8.717-2.883a.575.575 0 0 0-.813 0l-1.131 1.131a.575.575 0 1 0 .813.813l1.131-1.131a.575.575 0 0 0 0-.813M8 11.425a.575.575 0 0 0-.575.575v1.6a.575.575 0 1 0 1.15 0V12A.575.575 0 0 0 8 11.425"})},r=(0,o(340498).wt)("magicWandSmall",n,"small")},108184:(e,t,o)=>{o.r(t),o.d(t,{COMPLETION_THROTTLE:()=>M,PREVIEW_STEP_DELAY:()=>I,maybeUpdateAIUsageEligibilityStoreV2:()=>T,maybeUpdateAiEligibility:()=>C,postProcessAICreatedStores:()=>k,showCompletionErrorWithCode:()=>w,wrapTemporaryBlocksInList:()=>A});o(18107),o(967357);var n=()=>o(242422),r=()=>o(675133),i=()=>o(128933),a=()=>o(770063),s=()=>o(878126),l=()=>o(165358),c=()=>o(179034),u=()=>o(427419),d=()=>o(720665),p=()=>o(769864),m=()=>o(722101),f=()=>o(384944),v=()=>o(274873),g=()=>o(412669),y=()=>o(556122),h=()=>o(594794),x=()=>o(668721),_=()=>o(685377),S=()=>o(661077),b=()=>o(96563);const M=300,I=250;function w(e){const t=r().A.getIntl();return 451===e?i().D6({label:t.formatMessage({id:"completionActions.moderationError",defaultMessage:"AI does not allow content that is harmful or illegal. Please revise your input and try again. (451)"})}):413===e?i().D6({label:t.formatMessage({id:"completionActions.promptOrAttachmentTooLarge",defaultMessage:"Query or attachment is too large. Please revise your input and try again. (413)"})}):502===e||503===e||504===e?i().D6({label:t.formatMessage({id:"completionActions.providerError",defaultMessage:"We’re experiencing issues with our AI provider. Try again in a few minutes. ({errorCode})"},{errorCode:e})}):void i().D6({label:t.formatMessage({id:"completionActions.genericError",defaultMessage:"AI is temporarily unavailable. Try again in a few minutes. ({errorCode})"},{errorCode:e})})}function k(e,t){for(const o of t)v().In({environment:e,blockStore:o})}async function C(e,t,o){let r;if(n().default.checkGate({gateName:"usage_based_pricing_pfa_checks_purchased_credits_enabled"}))return void(await T(e,t,o));n().default.checkGate({gateName:"usage_based_pricing_alpha_enabled"})&&T(e,t,o).catch((e=>{l().log({level:"error",from:"ai.completionActions",type:"maybeUpdateAIUsageEligibilityStoreV2Error",spaceId:t,error:e})}));const i=y().TI();if(i.debug)r=402!==i.showErrorCode;else{const n=x().o.getState();if(n&&n.isEligible&&"unlimited"===n.type&&!o){const e=n.lastUpdatedAt;if(Date.now()-e<10*d().Xb)return}const i=await p().callCellCompatibleApi({eventName:"getAIUsageEligibility",environment:e,data:{spaceId:t},cellNavigation:{cellId:void 0,spaceId:t}});if("success"===i.type){r=i.data.isEligible,r&&g().K.state&&g().K.setState(!1);const e=!1===(null==n?void 0:n.isEligible)&&(null==n?void 0:n.requestedAccess),t=i.data.researchModeUsage??0;x().o.setState({...i.data,lastUpdatedAt:Date.now(),researchModeUsage:t,...!1===i.data.isEligible&&{requestedAccess:e}})}}void 0!==r&&S().P.setState(r)}async function T(e,t,o){const n=await s().T.awaitData(e,{spaceId:t}),r=_().y.getData(e,{spaceId:t});if(n){if(r&&(0,u().Hg)(n)&&!o){const e=r.lastUpdatedAt;if(Date.now()-e<10*d().Xb)return}await(0,b().y3)(e,t)}}function A(e){var t;const{environment:o,stores:n,listId:r,inMemoryRecordCache:i,transaction:s}=e,l=(null===(t=n.at(0))||void 0===t?void 0:t.getSpaceId())??s.spaceId,u=new(a().pm)({environment:o,pointer:{table:c().ev,id:r||(0,h().Z1)({environment:o,table:c().ev,spaceId:l}),spaceId:l},recordStoreOptions:{inMemoryRecordCache:i,userId:o.currentUser.id},path:["content"]});for(const a of n)m().BC({parentStore:u,appendStore:a,transaction:s}),f().zv({store:a,data:{parent_id:u.id,parent_table:u.table,alive:!0},transaction:s});return u}},147294:(e,t,o)=>{o.d(t,{Ee:()=>v,J1:()=>d,oG:()=>p});o(296540);var n=()=>o(907258),r=()=>o(59226),i=()=>o(590526),a=()=>o(401497),s=()=>o(970236),l=()=>o(69708),c=o(474848);const u={define_variables_automation_action:{launchDateMs:17277408e5,expiryDateMs:1738368e6},passkey_setting:{launchDateMs:1729101727e3,expiryDateMs:1738432882e3},publish_site_settings_embed_page:{launchDateMs:1736208e6,expiryDateMs:1743984e6},generalized_recurrence_automations:{launchDateMs:17365536e5,expiryDateMs:17460576e5},ai_page_translation_topbar_more_action:{launchDateMs:1740451280830,expiryDateMs:17434656e5},verification:{launchDateMs:1740096e6,expiryDateMs:174375e7},notion_ai_workspace_settings:{launchDateMs:17424288e5,expiryDateMs:17550432e5},notion_mail_launch_modal:{launchDateMs:17446752e5,expiryDateMs:17525376e5},notion_mail_launch_modal_2:{launchDateMs:17446752e5,expiryDateMs:17578944e5},ui_doc_example:{launchDateMs:19249056e5,expiryDateMs:19249056e5},collection_property_permissions:{launchDateMs:17433792e5,expiryDateMs:17671392e5},salesforce_sync_unfurling_option:{launchDateMs:17443296e5,expiryDateMs:17538336e5},personal_home_sidebar_item:{launchDateMs:17470944e5,expiryDateMs:175392e7},collection_property_reminder:{launchDateMs:1751958e6,expiryDateMs:17552628e5},get_notified_onboarding_tooltip:{launchDateMs:17520228e5,expiryDateMs:17591904e5},conditional_color_feature:{launchDateMs:17537472e5,expiryDateMs:17563392e5},web_clipper_new_tab_settings:{launchDateMs:17471808e5,expiryDateMs:18149184e5},my_meetings:{launchDateMs:17578944e5,expiryDateMs:17657568e5},workspace_connections_tab:{launchDateMs:17578944e5,expiryDateMs:18149184e5},external_agents_tab:{launchDateMs:17578944e5,expiryDateMs:18149184e5},permissions_tab:{launchDateMs:17578944e5,expiryDateMs:18149184e5}};function d({style:e}){const t=(0,a().IS)((()=>({badge:{letterSpacing:0,whiteSpace:"nowrap",width:"fit-content",...e}})),[e]);return(0,c.jsx)(s().E,{color:"blue",style:t.badge,content:(0,c.jsx)(l().sA,{id:"newBadgeComponent.label",defaultMessage:"New"})})}function p(e){return(0,i().K8)((()=>{const{launchDateMs:t,expiryDateMs:o}=u[e],{currentUserSettingsStore:r}=n().default.state;if(r&&r.isReady()){var i;const e=null===(i=r.getSettings())||void 0===i?void 0:i.signup_time;if(e&&e>t)return!1}return Date.now()<=o}),[e])}function m({style:e,newBadgeKey:t}){return p(t)?(0,c.jsx)(d,{style:e}):null}function f({style:e,newBadgeKey:t}){return(0,r().X)(t)?(0,c.jsx)(d,{style:e}):null}function v(e){return e.didUserEngage?null:"feature_gate"===e.keyType?(0,c.jsx)(f,{...e}):(0,c.jsx)(m,{...e})}},158115:(e,t,o)=>{o.r(t),o.d(t,{arrowChevronSingleRightFillSmallIcon:()=>r,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"5.54 2.94 5.81 10.11",directional:!0,svg:(0,o(474848).jsx)("path",{d:"M11.13 8.53a.75.75 0 0 0 0-1.06L6.81 3.15a.75.75 0 0 0-1.06 1.06L9.54 8l-3.79 3.79a.75.75 0 0 0 1.06 1.06z"})},r=(0,o(340498).wt)("arrowChevronSingleRightFillSmall",n,"fillSmall")},170350:(e,t,o)=>{o.r(t),o.d(t,{filterIcon:()=>r,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.37 4.87 15.25 10.25",svg:(0,o(474848).jsx)("path",{d:"M3 4.875a.625.625 0 1 0 0 1.25h14a.625.625 0 1 0 0-1.25zm2.125 5.742h9.75a.625.625 0 1 0 0-1.25h-9.75a.625.625 0 1 0 0 1.25m1.5 3.883c0-.345.28-.625.625-.625h5.5a.625.625 0 1 1 0 1.25h-5.5a.625.625 0 0 1-.625-.625"})},r=(0,o(340498).wt)("filter",n,"default")},173783:(e,t,o)=>{o.d(t,{A:()=>s});o(296540);var n=()=>o(807449),r=()=>o(888867),i=()=>o(497577),a=o(474848);function s(e){const t=(0,i().E)(e);return(0,a.jsx)("div",{style:t.iconContainer,children:(0,a.jsx)(n().I,{icon:r().s,size:t.icon.width,colorVariant:"secondary"})})}},175882:(e,t,o)=>{o.r(t),o.d(t,{exclamationMarkTriangleSmallIcon:()=>i,iconDefinition:()=>r});o(296540);var n=o(474848);const r={viewBox:"0 0 16 16",fittedViewBox:"1.49 1.87 13.01 11.75",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M7.9 5.281a.625.625 0 0 0-.625.625v2.5a.625.625 0 0 0 1.25 0v-2.5a.625.625 0 0 0-.625-.625m0 4.7a.725.725 0 1 0 0 1.45.725.725 0 0 0 0-1.45"}),(0,n.jsx)("path",{d:"M9.58 2.788c-.702-1.217-2.458-1.217-3.16 0l-4.677 8.1c-.702 1.216.176 2.737 1.58 2.737h9.354c1.405 0 2.283-1.52 1.58-2.738zm-2.078.625a.575.575 0 0 1 .996 0l4.677 8.1a.575.575 0 0 1-.498.862H3.324a.575.575 0 0 1-.498-.863z"})]})},i=(0,o(340498).wt)("exclamationMarkTriangleSmall",r,"small")},200424:(e,t,o)=>{e.exports=o.p+"9ade71d75a1c0e93.png"},224682:(e,t,o)=>{o.d(t,{m:()=>r});class n extends(()=>o(757695))().Store{getInitialState(){return{type:"uninitialized"}}isWriting(){return"filling"===this.state.type&&!this.state.haveAllBlocksCompletedAutofill&&!this.state.didInterruptStreaming}setIsWriting(e){const{propertySchema:t,stores:n,sessionIdForAnalytics:r,collectionId:i}=e,a=r||o(206267).JW();return this.setState({type:"filling",propertySchema:t,collectionId:i,numBlocksToAutofill:n.length,numBlocksAutofilled:0,sessionId:a,didInterruptStreaming:!1,haveAllBlocksCompletedAutofill:!1}),a}}const r=new n},241319:(e,t,o)=>{o.d(t,{y:()=>i});o(898992),o(672577);var n=()=>o(534177),r=()=>o(239381);function i(e){var t;const{actionModels:o,id:i}=e,a=(0,r().y5)(i),s="action"===a.source?o.find((e=>e.id===a.action_id)):void 0,l=(0,n().O9)(s)&&s.isType("create_page")?null===(t=s.getConfig())||void 0===t?void 0:t.collection:void 0;return{automationValueInfo:a,collectionPointer:l,actionModel:s}}},253447:(e,t,o)=>{o.d(t,{F:()=>r});var n=()=>o(963575);function r(e,t){if(e)return e;switch(t){case"large":return n().A.card.desktop.large.height;case"small":return n().A.card.desktop.small.height;default:return n().A.card.desktop.medium.height}}},255043:(e,t,o)=>{o.d(t,{O:()=>S,r:()=>b});o(898992),o(672577),o(581454);var n=o(296540),r=()=>o(401497),i=()=>o(249046),a=()=>o(250910),s=()=>o(807449),l=()=>o(546926),c=()=>o(631524),u=()=>o(302501),d=()=>o(890492),p=()=>o(81068),m=()=>o(663639),f=()=>o(736847),v=()=>o(324254),g=()=>o(676510),y=()=>o(534177),h=()=>o(608346),x=()=>o(419357),_=o(474848);function S(e){return(0,_.jsxs)(i().Ye,{alignItems:"center",style:{gap:4},children:[e.icon,(0,_.jsx)(u().A,{isSmall:e.isSmall,children:e.name})]})}function b(e){const{onSelectOption:t,options:o,currentOption:i,placeHolder:d,initialFocus:m,menuProps:f,iconOnly:h,inputProps:b,searchThreshold:I,selectorButtonStyle:w}=e,[k,C]=(0,n.useState)(""),T=o.find((({key:e})=>e===i)),A=(0,r().IS)((()=>({workspaceSelectorButton:{paddingTop:8,paddingBottom:8,paddingInlineStart:8,paddingInlineEnd:8,opacity:1,width:376,border:`1px solid ${g().$.light.gray[100]}`,justifyContent:"space-between",marginTop:8,marginBottom:8},teamspacePickerButton:{maxWidth:300},menuChevronDownIcon:{marginInlineStart:4}})),[]),j={..."workspace"===w?A.workspaceSelectorButton:{},..."teamspace"===w?A.teamspacePickerButton:{}};return(0,_.jsx)(a().A,{popupType:a().z.Popup,placementToOrigin:"bottom",alignmentToOrigin:e.alignmentToOrigin,originGap:4,renderOrigin:e=>(0,_.jsxs)(c().p,{...e,style:{color:i?void 0:g().$.light.gray[300],...j},children:[(0,_.jsx)(u().A,{style:{textOverflow:"ellipsis",fontSize:"14px",font:"SF Pro Text",color:i?void 0:"#ACABA9",lineHeight:"19.6px"},children:(h?null==T?void 0:T.icon:T&&(0,_.jsx)(S,{...T}))??d}),(0,_.jsx)(s().I,{icon:v().arrowChevronSingleDownSmallIcon,size:"xs",colorVariant:"secondary",style:A.menuChevronDownIcon})]}),render:e=>{const n=(0,_.jsx)(x().Ay,{style:{width:"100%",paddingTop:8,paddingBottom:2},onChange:e=>C(e.target.value),value:k,...b}),r={menuType:l().gu.Popup,width:376,left:50,header:(0,y().O9)(I)&&o.length>I?n:null,...f},a=o.map((({key:o,name:n,icon:r,searchTerm:a})=>({key:o,keywords:a??[],action:()=>{t(o),e.close()},render:e=>(0,_.jsx)(p().A,{...e,title:(0,_.jsx)(S,{name:n,icon:r}),shouldWrapCaption:!0,isChecked:i===o})})));return(0,_.jsx)(M,{menuOptions:r,menuItems:a,filterQuery:k,initialFocus:m})}})}function M({menuOptions:e,menuItems:t,filterQuery:o,initialFocus:n}){const r=(0,h().m)({sections:[{key:"dropdown.menuList",render:e=>(0,_.jsx)(f().A,{...e}),items:t}],filterQuery:o||void 0});return(0,_.jsx)(d().A,{...e,children:(0,_.jsx)(m().A,{type:m().O.Vertical,sections:r,initialFocus:n,style:{position:"relative",alignItems:"flex-end"}})})}},271232:(e,t,o)=>{o.d(t,{t:()=>i});var n=o(296540),r=o(474848);const i=n.memo((function(e){const{coverHeight:t,coverSizeFormat:n,emptyGalleryCoverStyle:i}=e,a=(0,o(401497).IS)((()=>({container:{height:(0,o(253447).F)(t,n),...i}})),[t,n,i]);return(0,r.jsx)("div",{style:a.container})}))},278589:(e,t,o)=>{o.d(t,{N:()=>i});var n=()=>o(534177),r=()=>o(126126);function i(e){return"avatar"===e?r().eQ:"xsmall"===e?18:"xsmall_plus"===e?24:"small"===e?28:"small_plus"===e?32:"medium"===e?36:"medium_plus"===e?44:"medium_large"===e?48:"large"===e?50:"large_plus"===e?64:"xlarge"===e?94:"plans"===e?20:"deep_dive"===e?16:"upsell_banner"===e?74:"personalization_modal"===e?96:(0,n().HB)(e)}},299177:(e,t,o)=>{o.d(t,{A:()=>i});class n extends(()=>o(757695))().Store{getInitialState(){return{}}}const r=new n;o(852832).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",r);const i=r},301794:(e,t,o)=>{o.d(t,{A:()=>r,U:()=>n});const n=o(757695).Store.createValue(null,{name:"InAppActivityToasterOverlayElemStore"});function r(e){n.setState(e)}},320865:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=o(474848);const r=function(){return(0,n.jsx)(o(424400).Ay,{title:(0,n.jsx)(o(98126).k,{size:"default"}),titleStyle:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"}})}},326887:(e,t,o)=>{o.d(t,{$X:()=>i,H8:()=>a,x2:()=>r});var n=()=>o(534177);function r(e){return"event"===e||"recurrence"===e}function i(e){const t=e.getTrigger();return(0,n().O9)(t)&&r(t.type)}function a(e){return"event"===e?"event":"recurrence"===e?"recurrence":void(0,n().HB)(e)}},344417:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,magnifyingGlassSmallIcon:()=>r});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"1.97 1.97 12.46 12.46",svg:(0,o(474848).jsx)("path",{d:"M7.1 1.975a5.125 5.125 0 1 0 3.155 9.164l3.107 3.107a.625.625 0 1 0 .884-.884l-3.107-3.107A5.125 5.125 0 0 0 7.1 1.975M3.225 7.1a3.875 3.875 0 1 1 7.75 0 3.875 3.875 0 0 1-7.75 0"})},r=(0,o(340498).wt)("magnifyingGlassSmall",n,"small")},348869:(e,t,o)=>{o.d(t,{g:()=>s});o(944114);var n=()=>o(792057),r=()=>o(785728),i=()=>o(532659),a=()=>o(769864);async function s(e){const{environment:t,onResponse:o,data:s,userId:l,tracking:c,abortSignal:u}=e,d=await a().callStreamApi({eventName:"runInferenceTranscript",environment:t,data:s,userId:l,tracking:c,abortSignal:u,headers:(0,r().WS)({spaceId:s.spaceId})});if("success"!==d.type)return null!=u&&u.aborted?{error:{message:"Aborted",code:0}}:(n().Qg(d),{error:{message:d.error.message,code:d.status}});const p=[];if(i().hS.is(d.data))for await(const n of d.data){if("error"===n.type)return{error:{message:n.message,code:n.errorCode}};null==o||o(n),p.push(n)}return{value:p}}},358006:(e,t,o)=>{o.d(t,{z:()=>a});o(296540);var n=()=>o(79926),r=o(474848);const i=new(n().O2)("CollectionItemCover",(async()=>{const{CollectionItemCover:e}=await o.e(79883).then(o.bind(o,873718));return{CollectionItemCover:e}})),a=(0,n()._h)(i,(e=>e.CollectionItemCover),{renderLoading:(e,t)=>{const{coverHeight:n,coverSizeFormat:i,emptyGalleryCoverStyle:a,showEmptyGalleryCover:s}=t;return s?(0,r.jsx)(o(271232).t,{coverHeight:n,coverSizeFormat:i,emptyGalleryCoverStyle:a}):null}})},375555:(e,t,o)=>{function n(e,t){const{device:o}=e;o.isAndroid&&t.focus(),t.select()}o.d(t,{G:()=>n})},381553:(e,t,o)=>{o.d(t,{Y:()=>i});o(296540);var n=o(474848);const r={viewBox:"0 0 16 16",fittedViewBox:"2.37 2.37 11.25 11.25",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M7.053 6.407a.643.643 0 1 0 0 1.286.643.643 0 0 0 0-1.286m1.894 0a.643.643 0 1 0 0 1.286.643.643 0 0 0 0-1.286m1.893 0a.643.643 0 1 0 0 1.286.643.643 0 0 0 0-1.286M5.159 8.3a.643.643 0 1 0 0 1.287.643.643 0 0 0 0-1.286M7.053 8.3a.643.643 0 1 0 0 1.287.643.643 0 0 0 0-1.286M8.947 8.3a.643.643 0 1 0 0 1.287.643.643 0 0 0 0-1.286M10.84 8.3a.643.643 0 1 0 0 1.287.643.643 0 0 0 0-1.286m-5.681 1.894a.643.643 0 1 0 0 1.286.643.643 0 0 0 0-1.286m1.894 0a.643.643 0 1 0 0 1.286.643.643 0 0 0 0-1.286m1.894 0a.643.643 0 1 0 0 1.286.643.643 0 0 0 0-1.286"}),(0,n.jsx)("path",{d:"M4.25 2.375c-1.036 0-1.875.84-1.875 1.875v7.5c0 1.036.84 1.875 1.875 1.875h7.5c1.036 0 1.875-.84 1.875-1.875v-7.5c0-1.036-.84-1.875-1.875-1.875zm-.625 9.375V5.632h8.75v6.118c0 .345-.28.625-.625.625h-7.5a.625.625 0 0 1-.625-.625"})]})},i=(0,o(340498).wt)("viewCalendarSmall",r,"small")},383567:(e,t,o)=>{o.d(t,{F:()=>i});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",fittedViewBox:"3.26 1.98 16.32 17.52",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M15.825 12a3.75 3.75 0 1 1-.001 7.501 3.75 3.75 0 0 1 0-7.501m0 1.325a.55.55 0 0 0-.55.55V15.2H13.95a.55.55 0 0 0-.001 1.1h1.326v1.325a.55.55 0 0 0 1.1 0V16.3h1.324a.55.55 0 0 0 0-1.1h-1.325v-1.325a.55.55 0 0 0-.55-.55M9.702 5.022a3.918 3.918 0 0 1 6.742.036.626.626 0 0 1-1.08.63 2.667 2.667 0 0 0-4.59-.023L5.376 14.68l4.19.678a.626.626 0 0 1-.2 1.235l-5.1-.827a.625.625 0 0 1-.437-.938z"}),(0,n.jsx)("path",{d:"M10.912 8.094a1.178 1.178 0 1 1 2.326.377 1.178 1.178 0 0 1-2.326-.377M4.7 7.087a1.178 1.178 0 1 1 2.327.377A1.178 1.178 0 0 1 4.7 7.087M3.488 2.985a3.92 3.92 0 0 1 5.572.357.625.625 0 0 1-.944.818 2.67 2.67 0 0 0-3.796-.243.625.625 0 1 1-.832-.932"})]})},i=(0,o(340498).wt)("aiFacePlus",r,"default")},390527:(e,t,o)=>{o.r(t),o.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>E,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>M,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>b,MAX_RECURRENCE_INTERVAL:()=>y,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>h,RRULE_WEEKDAYS_MAP:()=>g,adjustedStartDateIfPossible:()=>w,areRecurrenceSchedulesEqual:()=>P,convertFromUnpersistedRecurrenceConfig:()=>O,convertToUnpersistedRecurrenceConfig:()=>R,getFormattedEndCondition:()=>j,getFormattedNextRecurrenceTime:()=>A,getNewEndTimestamp:()=>D,getNextDateUtc:()=>T,getRecurrenceAfter:()=>k,isRunningBetweenMidnightAnd3AM:()=>C,isValidRecurrenceInterval:()=>x,isValidRecurrenceNumberOfRuns:()=>_,rruleFromRecurrence:()=>S,templateAncestorsViolateRecurrenceNesting:()=>I});o(898992),o(354520),o(581454);var n=()=>o(906745);o(944114);function r(e,...t){if(0===t.length)return e.map((e=>[e]));const o=[];for(const n of e)o.push(...r(t[0],...t.slice(1)).map((e=>[n,...e])));return o}var i=()=>o(496603),a=()=>o(534177),s=()=>o(720665),l=()=>o(597777),c=()=>o(869190),u=()=>o(416504),d=()=>o(402390);class p extends(()=>o(896346))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var m=()=>o(912720);const f=(0,o(69708).YK)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12–3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),v={hour:p.HOURLY,day:p.DAILY,week:p.WEEKLY,month:p.MONTHLY,year:p.YEARLY},g={MO:p.MO,TU:p.TU,WE:p.WE,TH:p.TH,FR:p.FR,SA:p.SA,SU:p.SU},y=99,h=999;function x(e){return(0,s().Et)(e)&&Number.isInteger(e)&&e>0&&e<=y}function _(e){return(0,s().Et)(e)&&Number.isInteger(e)&&e>0&&e<=h}function S(e){const{start_date:t,frequency:o,interval:n,weekdays:i,timezone:s,hour:c,minute:u}=e,d=(0,l().eU)(t);"hour"===o&&d.setUTCHours(c??0,u??0,0,0);const m="week"===o&&i?i.map((e=>g[e])):void 0,f={};return(0,a().O9)(e.end_condition)&&("date"===e.end_condition.type?f.until=(0,l().eU)(e.end_condition.end_at):"number"===e.end_condition.type?f.count=e.end_condition.number_of_occurrences:(0,a().HB)(e.end_condition)),"month"===e.frequency&&(0,a().O9)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?f.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?f.byweekday=r(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((([e,t])=>g[e].nth(t))):(0,a().HB)(e.monthly_restriction)),new p({freq:v[o],dtstart:d,interval:n,byweekday:m,tzid:"hour"===o?void 0:s,..."hour"===o?{}:{byhour:c??0,byminute:u??0,bysecond:0},...f})}const b=1,M=1;function I(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const o=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),n=e.length,r=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,i=n>b,a=o.length>=M;return{violatesConstraint:i||a,templateNestingExceedsMaxDepth:i,ancestorHasDailyTemplate:a,nestedDepthOfAutomationAncestors:n,immediateAncestorRecurrenceType:r}}function w(e){var t;const{recurrence:o,afterDate:r}=e;if("number"===(null===(t=o.end_condition)||void 0===t?void 0:t.type)||o.start_date>=r)return o;let i=n().DateTime.fromMillis(o.start_date,{zone:"utc"});const a=n().DateTime.fromMillis(r,{zone:"utc"});switch(o.frequency){case"hour":{const e=Math.floor(a.diff(i,"hours").hours/o.interval);i=i.plus({hours:e*o.interval});break}case"year":{const e=Math.floor(a.diff(i,"years").years/o.interval);i=i.plus({years:e*o.interval});break}case"month":{const e=Math.floor(a.diff(i,"months").months/o.interval);i=i.plus({months:e*o.interval});break}case"week":{const e=Math.floor(a.diff(i,"weeks").weeks/o.interval);i=i.plus({weeks:e*o.interval});break}case"day":{const e=Math.floor(a.diff(i,"days").days/o.interval);i=i.plus({days:e*o.interval});break}}return{...o,start_date:(0,l().DH)(i.toMillis())}}function k(e){const{recurrence:t,afterDate:o}=e;if((0,m().wt)(t)){const e=(0,l().l1)(o);return t.start_date>=e?new Date(t.start_date):void 0}{const e=S(w({recurrence:t,afterDate:o})).after((0,l().eU)(o));if(!e)return;return(0,l().h1)(e)}}function C(e){return 0===e.hour||1===e.hour||2===e.hour}function T(e){return S(e).after((0,l().eU)((0,l().Rz)()))||void 0}function A(e){const{recurrence:t,intl:o}=e,r=T(O(t));if(!r)return;const i=C(t),a=n().DateTime.fromJSDate(r).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,d().H)(o)).setZone(t.timezone),s=(0,c().Yq)({date:a,dateFormat:"relative",allowRelativeDates:!0,intl:o,shortenDate:!0});if(i)return o.formatMessage(f.dateBetweenMidnightAnd3AM,{date:s});{let e=a.toLocaleString(n().DateTime.TIME_SIMPLE);return t.timezone!==(0,u().P)()&&(e+=` ${a.toFormat("ZZZZ")}`),o.formatMessage(f.dateAtTime,{date:s,time:e})}}function j(e,t){return(0,a().O9)(e)?"number"===e.type?t.formatMessage(f.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,c().Yq)({date:n().DateTime.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,a().HB)(e):t.formatMessage(f.noEndCondition)}const E=100;function R(e){return{...e,start_date:(0,l().l1)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,l().l1)(e.end_condition.end_at)}:(0,a().HB)(e.end_condition):void 0}}function D(e,t,o){return e.plus(o-t)}function B(e,t){const o=n().DateTime.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,l().Rz)(o.toJSDate())}}function O(e){return{...e,start_date:(0,l().Rz)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?B(e,e.end_condition):(0,a().HB)(e.end_condition):void 0}}function P(e,t){const o=i().fN(e,(e=>void 0!==e)),n=i().fN(t,(e=>void 0!==e));return i().n4(o,n)}},404905:(e,t,o)=>{o.d(t,{j:()=>c});var n=o(296540),r=()=>o(484714),i=()=>o(401497),a=()=>o(284371),s=()=>o(26697);var l=o(474848);function c(e){const{children:t,style:o,overlayContainerZIndex:c,placement:u="bottom",tooltipStyle:d}=e,{isSafari:p}=(0,r().Y0)(),m=(0,n.useRef)(null),f=function(e){const[t,o]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{const{current:t}=e;if(!t)return void o(!1);const n="ResizeObserver"in window?new ResizeObserver((([e])=>{o(e.target.scrollWidth>e.target.clientWidth)})):void 0;return null==n||n.observe(t),()=>null==n?void 0:n.unobserve(t)}),[]),t}(m),v=(0,i().IS)((()=>({overflowText:{...a().RC,...o}})),[o]);return(0,l.jsx)(s().m,{delayThreshold:500,placement:u,textWrap:!0,style:d,overlayContainerZIndex:c,forceVisibleState:!(p||!f)&&void 0,renderTooltip:()=>f?t:void 0,render:e=>(0,l.jsx)("div",{ref:m,style:v.overflowText,...e,children:t})})}},419357:(e,t,o)=>{o.d(t,{Ay:()=>_,KF:()=>x,LG:()=>g,Zf:()=>h,yD:()=>y});var n=o(296540),r=()=>o(484714),i=()=>o(401497),a=()=>o(718827),s=()=>o(695115),l=()=>o(31511),c=()=>o(546926),u=()=>o(424400),d=()=>o(340498),p=()=>o(100622),m=()=>o(496603),f=()=>o(284371),v=o(474848);const g=30,y=28;function h(e){const{icon:t}=e;return t({fill:p().Tj.icon.secondary,width:d().Ev.sm,height:d().Ev.sm,flexGrow:0,flexShrink:0})}function x(e){const t=(0,r().WS)(),o=(0,i().eP)(),n=(0,i().IS)((()=>({outlineButton:{...(0,a().qq)({shape:"default",size:"sm",hasIconOnly:!0,isButtonGapEnabled:!0}),fontWeight:f().Wy.medium,lineHeight:1.2,border:`1px solid ${p().Tj.border.primaryTranslucent}`,background:e.hasBackground?p().Tj.background.primary:void 0},outlineButtonHovered:{background:p().Tj.background.secondary},outlineButtonPressed:{background:(0,a().yZ)({color:p().Tj.background.primary,mode:o})}})),[e.hasBackground,o]);return(0,v.jsx)(s().A,{size:"xs",colorVariant:"primary",...e,ariaLabel:e.ariaLabel,style:{...n.outlineButton,...e.style,height:t?g:y,width:t?g:y},hoveredStyle:n.outlineButtonHovered,pressedStyle:n.outlineButtonPressed})}const _=n.forwardRef((function({preventCaptureArrowShortcuts:e,preventCaptureDeleteWhenEmpty:t,preventCaptureClipboardShortcuts:r,preventCaptureSpacebarWhenEmpty:i,...a},s){const{left:l,right:d,inputLeft:p,inputRight:f,inputRightStyle:g,disableInput:y,inputOuterStyle:h,rightMobileEditLabel:x,mobileKeyboardOnDismiss:_,style:S,value:I,onChange:w,autosize:k,autosizeMinHeight:C,autosizeMaxHeight:T,customElementAttributes:A,disabled:j,format:E,id:R,placeholder:D,type:B,autoFocus:O,focus:P,focusInitial:z,focusAfterAnimation:V,forceShowClearButton:F,ignoreKeyboardMode:U,inputElementAttributes:N,inputStyle:L,isRightLastElementOfInput:H,maxlength:W,min:G,max:K,selectAll:Y,showClearButton:$,suppressFocusRing:q,textarea:Z,textareaSubmitOnEnter:X,onBlur:Q,onCancel:J,onClearButtonClick:ee,onClick:te,onFocus:oe,onKeyDown:ne,onSubmit:re,...ie}=a,[ae,se]=(0,n.useState)((()=>Boolean(P||z)));(0,n.useEffect)((()=>{void 0!==P&&se(P)}),[P]);const le=e?void 0:m().D_,ce=!t||I.length>0?m().D_:void 0,ue=r?void 0:m().D_,de=!i||I.length>0?m().D_:void 0,pe=(0,c().Tf)(),me=(0,n.useContext)(c().xu),fe=(0,n.useRef)(null),ve={value:I,onChange:w,autosize:k,autosizeMinHeight:C,autosizeMaxHeight:T,customElementAttributes:A,disabled:j,format:E,id:R,placeholder:D,type:B,autoFocus:O,focus:P,focusInitial:z,focusAfterAnimation:V,forceShowClearButton:F,ignoreKeyboardMode:U,inputElementAttributes:N,inputStyle:L,isRightLastElementOfInput:H,maxlength:W,min:G,max:K,selectAll:Y,showClearButton:$,suppressFocusRing:q,textarea:Z,textareaSubmitOnEnter:X,onBlur:Q,onCancel:J,onClearButtonClick:ee,onClick:te,onFocus:oe,onKeyDown:ne,onSubmit:re};return(0,v.jsx)(o(782482).N,{debugName:"InputMenuItem",capture:!0,onUntab:m().D_,onTab:m().D_,onSelectAll:m().D_,onRedo:m().D_,onUndo:m().D_,onToggleBold:m().D_,onToggleItalics:m().D_,onToggleCode:m().D_,onCut:ue,onCopy:ue,onPaste:ue,onKeypress:m().D_,onLeft:le,onRight:le,onDelete:ce,onBackspace:ce,onSpace:de,children:o(726637).A.isMobile?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(u().Ay,{ref:s,...ie,itemMarginLeft:pe?8:void 0,style:S,title:(0,v.jsx)(M,{ref:fe,left:l,right:d,inputLeft:p,inputRight:f,inputRightStyle:g,disableInput:y,inputOuterStyle:h,rightMobileEditLabel:x,isFocused:ae,setIsFocused:se,...ve})}),(0,v.jsx)(o(797324).A,{show:ae&&me.menuType!==c().gu.ActionSheet,onDismiss:_,inputRef:fe})]}):(0,v.jsx)(u().Ay,{ref:s,...ie,left:l,right:d,isTokenTitle:!0,title:(0,v.jsx)(b,{ref:fe,disableInput:y,inputOuterStyle:h,inputRight:f,inputRightStyle:g,inputLeft:p,...ve}),style:{paddingTop:4,paddingBottom:4,...S}})})}));function S({rightMobileEditLabel:e,inputRef:t}){const i=(0,r().v3)(),s=(0,n.useCallback)((e=>{e.preventDefault();const n=t.current;n&&(0,o(375555).G)(i,n)}),[i,t]);return(0,v.jsx)(a().Ay,{onClick:s,style:{color:p().Tj.text.secondary},children:e})}const b=n.forwardRef((function(e,t){const{disabled:o,disableInput:n,inputOuterStyle:r,inputRight:i,inputRightStyle:a,inputLeft:s,min:c,textarea:u,...d}=e;return(0,v.jsx)(l().A,{...d,ref:t,disabled:o||n,style:{height:u?void 0:28,padding:"3px 6px",...r},left:s,right:i,rightStyle:a,min:c,textarea:u})})),M=n.forwardRef((function(e,t){const{left:r,right:i,inputLeft:a,inputRight:s,inputRightStyle:c,disableInput:u,inputOuterStyle:d,rightMobileEditLabel:p,isFocused:m,setIsFocused:f,disabled:g,showClearButton:y,onBlur:h,onFocus:x,..._}=e,b=(0,n.useCallback)((e=>{f(!1),h&&h(e)}),[h,f]),M=(0,n.useCallback)((e=>{f(!0),x&&x(e)}),[x,f]),I=(0,n.useRef)(null),w=(0,o(93583).A)(I,t),k=p&&!m?(0,v.jsx)(S,{rightMobileEditLabel:p,inputRef:I}):null;return(0,v.jsx)(l().A,{..._,ref:w,format:"transparent",style:{fontSize:16,...d},onFocus:M,onBlur:b,showClearButton:!1!==y,disabled:g||u,left:a||r,right:k||s||i,rightStyle:c})}))},422540:(e,t,o)=>{o.d(t,{$0:()=>y,Fx:()=>I,Ge:()=>f,I3:()=>p,Kj:()=>b,PP:()=>w,TK:()=>k,Yy:()=>d,aE:()=>C,cQ:()=>M,kH:()=>v,m7:()=>m,nq:()=>_,nv:()=>h,tj:()=>g});o(898992),o(354520),o(737550);var n=()=>o(496603),r=()=>o(534177),i=()=>o(381283),a=()=>o(898244),s=()=>o(651124),l=()=>o(349835),c=()=>o(390066);const u={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,place:!1},d={checkbox:[{type:"checkbox"}],date:[{type:"date"}],email:[{type:"text"}],multi_select:[{type:"text"},{of:{type:"text"},type:"array"}],number:[{type:"number"}],person:[{type:"person"},{of:{type:"person"},type:"array"}],phone_number:[{type:"text"}],relation:[{type:"block"},{of:{type:"block"},type:"array"}],select:[{type:"text"},{of:{type:"text"},type:"array"}],status:[{type:"text"},{of:{type:"text"},type:"array"}],text:void 0,title:void 0,url:[{type:"text"}]};function p(e){return Boolean(u[e.type]&&!(0,a().UU)(e)&&(!(0,a().$M)(e)||void 0===(0,a().om)(e)))}function m(e){const{collectionFormat:t,collectionSchema:o,filter:i,sort:l,sourcePropertyIds:u}=e,d=(u??(0,r().uv)(o)).filter(((t,n,r)=>{const s=o[t];return!(!s||!p(s))&&(("relation"!==s.type||!e.restrictCrossSpace||!(0,a().o2)(e.spaceId,s))&&(!i||i([t,s],n,o)))}));if(0===d.length)return[];if(!t||!1===l)return d;const m=(0,c().L)(t,o,void 0,s().jf.Page).collection_page_properties||[];return n().Ul(d,(e=>m.findIndex((t=>t.property===e))))}function f(e){const{collectionFormat:t,collectionSchema:o,sort:a}=e,l=(0,r().uv)(o).filter(((e,t,n)=>{const r=o[e];return!(!r||!(0,i().J)(r))}));if(0===l.length)return[];if(!t||!1===a)return l;const u=(0,c().L)(t,o,void 0,s().jf.Page).collection_page_properties||[];return n().Ul(l,(e=>u.findIndex((t=>t.property===e))))}function v(e){return e.type===l().M9.InvalidCharacter?{type:e.type,character:e.character}:e.type===l().M9.TokenExpected?{type:e.type,token:e.token}:e.type===l().uW.MissingSchemaPropertyOnThisRow||e.type===l().uW.MissingSchemaPropertyOnCollection?{type:e.type,collectionId:e.collectionId,property:e.property,errorSource:e.errorSource}:e.type===l().uW.ThisRowBlockPropertyMismatchCollection?{type:e.type,thisRowCollection:e.thisRowCollection,errorSource:e.errorSource}:e.type===l().uW.MissingContextVariable?{type:e.type,valueId:e.valueId,errorSource:e.errorSource}:e.type===l().uW.FunctionCallTooFewArguments?{type:e.type,numArguments:e.numArguments,errorSource:e.errorSource}:e.type===l().uW.FunctionCallUnexpectedArgument?{type:e.type,parameterIndex:e.parameterIndex,errorSource:e.errorSource}:e.type===l().uW.FunctionCallArgumentWrongType?{type:e.type,argumentType:e.argumentType,libraryFunctionName:e.libraryFunction.name,parameterIndex:e.parameterIndex,errorSource:e.errorSource}:e.type===l().uW.MissingDataDependencyBlock?{type:e.type,blockPointer:e.blockPointer,node:e.node,errorSource:e.errorSource}:e.type===l().uW.MissingDataDependencyPerson?{type:e.type,personPointer:e.personPointer,errorSource:e.errorSource}:e.type===l().uW.MemberPropertyMismatchCollection?{type:e.type,blockCollection:e.blockCollection,errorSource:e.errorSource}:e.type===l().uW.DownstreamParseFailure?{type:e.type,collectionId:e.collectionId,property:e.property,errorSource:e.errorSource}:e.type===l().uW.ContextVariableWrongType?{type:e.type,valueId:e.valueId,expectedType:e.expectedType,resultType:e.resultType,errorSource:e.errorSource}:e.type===l().uW.DisallowedValueType?{type:e.type,expressionValue:e.expressionValue,allowedValueTypes:e.allowedValueTypes,errorSource:e.errorSource}:e.type===l().uW.LibraryFunctionExecutionError?{type:e.type,error:e.error,libraryFunctionName:e.libraryFunction.name,errorSource:e.errorSource}:"errorSource"in e?{type:e.type,errorSource:e.errorSource}:{type:e.type}}const g={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,button:!1,file:!1,verification:!1,auto_increment_id:!1,created_by:!1,created_time:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,place:!1};function y(e){return Boolean(g[e.type])}function h(e){const{collectionFormat:t,collectionSchema:o,filter:i,sort:l}=e,u=(0,r().uv)(o).filter(((e,t,n)=>{var r;const s=o[e];return!(!s||!g[s.type])&&((!(0,a().$M)(s)||null===(r=(0,a().om)(s))||void 0===r||!r.auto_update_on_edit)&&(!i||i([e,s],t,o)))}));if(0===u.length)return[];if(!t||!1===l)return u;const d=(0,c().L)(t,o,void 0,s().jf.Page).collection_page_properties||[];return n().Ul(u,(e=>d.findIndex((t=>t.property===e))))}const x={checkbox:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,date:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,place:!1};function _(e){return x[e.type]}const S={checkbox:!0,created_by:!0,created_time:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,last_edited_by:!0,last_edited_time:!0,auto_increment_id:!1,button:!1,file:!1,formula:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,place:!1};function b(e){return S[e.type]}function M(e){return 0===e}function I(e){return function(e){return"button_block"===e||"button_property"===e}(e)}function w(e){const{property:t,collectionSchema:o}=e;return!!o&&!o[t]}function k(e){const{collectionSchema:t,property:o,type:n}=e,r=null==t?void 0:t[o];return!r||("action"===n?!p(r):!g[r.type])}function C({automationTrigger:e,collectionSchema:t}){if("event"===(null==e?void 0:e.type)){const{pagesAdded:o,pagePropertiesEdited:n,source:i}=e.event;if(void 0===i)return!1;const a="some"===n.type&&n.some,s="all"===n.type&&n.all;if((a||s||[]).some((e=>w({collectionSchema:t,property:e.property})||k({collectionSchema:t,property:e.property,type:"trigger"}))))return!1;const l="some"===n.type&&(!(0,r().O9)(n.some)||0===n.some.length),c="all"===n.type&&(!(0,r().O9)(n.all)||0===n.all.length);if(!o&&("none"===n.type||l||c))return!1}else{if("recurrence"!==(null==e?void 0:e.type))return!1;if(!e.recurrence)return!1}return!0}},427636:(e,t,o)=>{o.d(t,{A:()=>i});o(296540);var n=()=>o(100622),r=o(474848);const i=function(e){const{botStore:t,avatarSize:i,shouldShowBadge:a,style:s,inline:l}=e,c=(0,o(69708).tz)(),u=(0,o(484714).Y0)(),d=(0,o(590526).K8)((()=>null==t?void 0:t.getDisplayName(c)),[t,c]),{outerStyle:p,avatarWrapStyle:m,badgeStyle:f}=(0,o(401497).IS)((()=>({outerStyle:{display:"flex",alignItems:"center",minWidth:0,...s},avatarWrapStyle:l?{width:"none",minHeight:"none",marginInlineEnd:6}:{marginInlineEnd:6},badgeStyle:{padding:"2px 6px",borderRadius:4,color:n().Tj.text.secondary,background:n().Tj.legacyDefaultSelectColor,fontSize:o(726637).A.isMobile?11:9,lineHeight:u.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em",marginInlineStart:8,marginTop:1}})),[s,l,u]);return(0,r.jsxs)("div",{style:p,children:[(0,r.jsx)("div",{style:m,children:(0,r.jsx)(o(256863).A,{botStore:t,size:i})}),(0,r.jsx)("div",{style:{...o(284371).RC},children:d}),a?(0,r.jsx)("div",{style:f,children:"Bot"}):void 0]})}},448693:(e,t,o)=>{o.d(t,{Ay:()=>_,t_:()=>S,v7:()=>b});o(296540);var n=()=>o(484714),r=()=>o(590526),i=()=>o(34977),a=()=>o(457205),s=()=>o(849255),l=()=>o(764880),c=()=>o(784892),u=()=>o(534177),d=()=>o(883701),p=()=>o(427636),m=()=>o(256863),f=()=>o(848401),v=()=>o(994006),g=()=>o(453697),y=o(474848);function h(e){const t=(0,n().v3)(),{actor:o,format:l,hasTooltip:h,tooltipHeader:_,hasPersonHoverCard:S,spaceStore:b}=e,M=(0,r().K8)((()=>{const e=o.asActor;if(e)return(0,d().J)(t,e)}),[o,t]);return(0,y.jsx)(f().Ay,{...e,renderAvatar:e=>{if(M)return M instanceof a().v?l===c().NY.Inline?(0,y.jsx)(m().A,{botStore:M,size:e,style:x}):(0,y.jsx)(p().A,{botStore:M,avatarSize:e,inline:!0,style:x}):M instanceof s().L?l===c().NY.Inline?(0,y.jsx)(g().A,{userStore:M,size:e,avatarShouldShowShadow:!1,hasTooltip:h??!0,style:x,tooltipHeader:_,hasPersonHoverCard:S}):(0,y.jsx)(v().A,{userStore:M,avatarSize:e,inline:!0,hasTooltip:h,hasPersonHoverCard:S,style:x,tooltipHeader:_,spaceStore:b}):void(M instanceof i().p||(0,u().HB)(M))}})}const x={minWidth:0};h.Format=c().NY;const _=h;function S(e){const{userValue:t,...o}=e,n=(0,l().MR)(t);return(0,y.jsx)(h,{actor:n,...o})}function b(e){const{botValue:t,...o}=e;return(0,y.jsx)(h,{actor:(0,l().oC)(t),hasPersonHoverCard:!1,...o})}S.Format=f().mI,b.Format=f().mI},448801:(e,t,o)=>{o.d(t,{i:()=>r});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);var n=()=>o(371562);n();function r(e,t){const o=n().create({arrays:{detectMove:!1,includeValueOnMove:!0}}).diff(e,t);if(!o)return{beforeOps:{},removeOps:new Set};let r=[],i=[];for(const n in o)"_t"!==n&&("_"===n[0]?r.push(parseInt(n.slice(1),10)):1===o[n].length&&i.push({index:parseInt(n,10),value:o[n][0]}));const a={},s=new Set,l=[...e];r=r.sort(((e,t)=>e-t));for(let n=r.length-1;n>=0;n--){const e=r[n],t=l.splice(e,1)[0];s.add(t)}i=i.sort(((e,t)=>e.index-t.index));for(let n=0;n<i.length;n++){const e=i[n];a[e.value]=l[e.index],l.splice(e.index,0,e.value)}return{beforeOps:a,removeOps:s}}},460957:(e,t,o)=>{o.d(t,{E:()=>a});o(581454);var n=()=>o(201980),r=()=>o(718957),i=()=>o(29554);function a(e){const{multiSelection:t}=e;return(0,r().$W)(t).map((({store:e,selection:t})=>{const o=(0,n().RQ)(e.getValue()),r=(0,n().xbM)(o,t),{tokensInsideRange:a}=(0,n().AI5)(o,r.startIndex,r.endIndex);return(0,i().r4)(a,e)})).join("\n\n")}},497577:(e,t,o)=>{o.d(t,{E:()=>i});var n=()=>o(401497),r=()=>o(100622);function i(e){const{size:t,style:o}=e;return(0,n().IS)((()=>({icon:{width:.6*t,height:.6*t,fill:r().Tj.text.secondary},iconContainer:{width:t,height:t,borderRadius:"100%",background:r().Tj.border.secondaryTranslucent,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,...o}})),[t,o])}},529099:(e,t,o)=>{o.r(t),o.d(t,{aiFaceIcon:()=>i,iconDefinition:()=>r});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",fittedViewBox:"4.13 2.52 13.27 14.61",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M12.758 9.976a1.178 1.178 0 1 0 .377-2.326 1.178 1.178 0 0 0-.377 2.326M6.547 8.97a1.178 1.178 0 1 0 .377-2.327 1.178 1.178 0 0 0-.377 2.326"}),(0,n.jsx)("path",{d:"M10.573 5.554a3.917 3.917 0 0 1 6.743.035.625.625 0 1 1-1.08.63 2.667 2.667 0 0 0-4.591-.023l-5.398 9.015 4.192.68a.625.625 0 0 1-.2 1.233l-5.102-.827a.625.625 0 0 1-.436-.938zM4.36 3.517a3.92 3.92 0 0 1 5.572.356.625.625 0 1 1-.945.818 2.67 2.67 0 0 0-3.795-.243.625.625 0 1 1-.833-.931"})]})},i=(0,o(340498).wt)("aiFace",r,"default")},541235:(e,t,o)=>{o.d(t,{Ud:()=>a,YD:()=>i,c$:()=>n,q_:()=>r});const n={"sprints-onboarding":{steps:[{id:"current-sprint-view-tooltip"},{id:"sprint-task-tooltip"},{id:"complete-sprint-button-tooltip"}]},"enhanced-qna-onboarding":{steps:[{id:"find-in-tooltip"},{id:"mention-tooltip"}]},"jira-sync-onboarding":{steps:[{id:"all-projects-tooltip"},{id:"all-issues-tooltip"},{id:"database-views-and-filters-tooltip"},{id:"settings-to-setup-projects-and-issues"}]},"project-management-import-onboarding":{steps:[{id:"your-teamspace-tooltip"},{id:"all-projects-tooltip"},{id:"navigate-to-project-tasks-tooltip"},{id:"project-customization-tooltip"},{id:"related-tasks-database-views-tooltip"}]},"ai-comment-onboarding":{steps:[{id:"ai-comment-onboarding-tooltip"}]},database_onboarding:{steps:[{id:"database_onboarding_status_property_tooltip"},{id:"database_onboarding_add_property_tooltip"},{id:"database_onboarding_database_page_tooltip"},{id:"database_onboarding_board_view_tooltip"}]},"new-user-home-workspace-tour":{steps:[{id:"teamspaces"}]}},r="completed",i="dismissed";function a(e,t){return null==t?void 0:t[e]}},546461:(e,t,o)=>{o.d(t,{K4:()=>S,To:()=>w,fi:()=>b,q8:()=>_,u:()=>x});o(16280),o(18107),o(967357);var n=o(296540),r=()=>o(484714),i=()=>o(792485),a=()=>o(590526),s=()=>o(79926),l=()=>o(140934),c=()=>o(322867),u=()=>o(69708),d=()=>o(534177),p=()=>o(813297),m=()=>o(326887),f=()=>o(862292),v=()=>o(190019),g=()=>o(76190),y=o(474848);const h=(0,n.createContext)({ancestors:[]});h.displayName="AutomationContext";h.Consumer;function x(e){const{automationStore:t,children:o,contextType:x,enableExistenceGuarantees:_}=e,S=(0,r().v3)(),b=(0,u().tz)(),{value:w}=(0,s().fJ)(f().T.formulas),{value:k}=(0,s().fJ)(p().QV.automationTypecheck),C=(0,g().n)(t),T=(0,i().S)(),A=(0,a().K8)((()=>{if(!w)return{error:new(c().N9)("Missing formulas dependency")};if(!k)return{error:new(c().N9)("Missing automation dependency")};const e=function(e){const{environment:t,automationStore:o,automationTypecheckModule:n,contextType:r,formulasModule:i,intl:a,isSubscribed:s,pageStore:c,enableExistenceGuarantees:u}=e,p=function(e,t){if(t)return M.get(e);return M.get(e)??I.get(e)}(o,u);if(p)return p;const f=new(l().ComputedStore)((()=>{const e=o.getTriggerType();let l=r;return(0,d().O9)(e)&&(0,m().x2)(e)&&(l=(0,m().H8)(e)),(0,v().Z)({environment:t,automationStore:o,automationTypecheckModule:n,contextType:l,formulasModule:i,intl:a,isSubscribed:s,pageStore:c,enableExistenceGuarantees:u})}),{debugName:"automationContextTypecheckResultCachedStore"});return function(e,t,o){o?(M.set(e,t),I.set(e,t)):I.set(e,t)}(o,f,u),f}({automationStore:t,automationTypecheckModule:k,contextType:x,environment:S,formulasModule:w,intl:b,isSubscribed:C,pageStore:"button_block"===x?null==T?void 0:T.pageStore:void 0,enableExistenceGuarantees:_});return e.state}),[S,t,k,x,w,b,C,null==T?void 0:T.pageStore,_]),j=(0,n.useContext)(h),E=(0,n.useMemo)((()=>0===j.ancestors.length?[{automationStore:t,contextType:x,typecheckResult:A}]:[...j.ancestors,{automationStore:t,contextType:x,typecheckResult:A}]),[j,t,x,A]),R=(0,n.useMemo)((()=>({ancestors:E,enableExistenceGuarantees:_})),[E,_]);return(0,y.jsx)(h.Provider,{value:R,children:o})}function _(){const e=(0,n.useContext)(h).ancestors.at(-1);if(!e)throw new Error("No automation context found!");return e}function S(){return(0,n.useContext)(h).ancestors.at(-1)}function b(){return(0,n.useContext)(h).enableExistenceGuarantees}const M=new WeakMap,I=new WeakMap;function w(e){var t;return null===(t=M.get(e))||void 0===t?void 0:t.state}},556122:(e,t,o)=>{o.d(t,{QJ:()=>m,TI:()=>c});o(944114),o(581454);var n=()=>o(726637),r=()=>o(763824);let i=0;const a="clipboard",s={debug:Boolean(n().A.isDevelopingInAirplaneMode),responseText:a,showErrorCode:!1,delayBetweenChunks:20,chunkSize:5,numLoremIpsums:3},l="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec porta auctor sem vel efficitur. Vivamus efficitur eros sed erat efficitur efficitur. Vivamus et augue vel est efficitur efficitur.";function c(){return s}function u(e){return{async*[Symbol.asyncIterator](){for(const t of e)await(0,r().wR)(s.delayBetweenChunks),yield t}}}function d(e,t){const o=Math.ceil(e.length/t),n=new Array(o);for(let r=0,i=0;r<o;++r,i+=t)n[r]=e.substr(i,t);return n}function p(e){return e.map((e=>({type:"success",p:"padding",completion:e,inferenceId:"mock"})))}async function m({environment:e,data:t}){console.log("Retrieving fake completion for data",t);const{context:o}=t,r=o.selectedText,c=[];let{responseText:m}=s;if(m===a&&(m=await async function(){try{return await navigator.clipboard.readText()}catch(e){return}}()??"Unable to retrieve clipboard text."),void 0===m&&(c.push({type:"success",p:"padding",completion:"\n",inferenceId:"mock"},{type:"success",p:"padding",completion:"this is ",inferenceId:"mock"},{type:"success",p:"padding",completion:"fake ",inferenceId:"mock"},{type:"success",p:"padding",completion:`streaming response ${i++}.`,inferenceId:"mock"}),n().A.isDevelopingInAirplaneMode&&c.push({type:"success",p:"padding",completion:"\n\nTo see a real AI response, run the server with `--airplaneMode=false`.",inferenceId:"mock"}),"string"==typeof r)){c.push({type:"success",p:"padding",completion:"\n\nHere is the text you selected:\n\n",inferenceId:"mock"});for(const e of d(r,s.chunkSize))c.push({type:"success",completion:e,p:"padding",inferenceId:"mock"})}if(s.showErrorCode)c.push({type:"error",message:"alas",errorCode:s.showErrorCode,isRetryable:!1});else if(void 0===m)for(let n=0;n<s.numLoremIpsums;n++)c.push(...p([`\n\n${n+1}. `,...d(l,0===s.delayBetweenChunks?l.length:s.chunkSize)]));else if(m.length>0){const e=d(m,s.chunkSize);c.push(...p(e))}return Promise.resolve({type:"success",data:u(c),status:200,headers:{}})}(0,o(852832).exposeDebugValue)("completionDebugSettings",s)},580648:(e,t,o)=>{o.d(t,{o:()=>c});o(296540);var n=()=>o(590526),r=()=>o(914462),i=()=>o(69708),a=()=>o(173783),s=()=>o(187820),l=o(474848);function c(e){const{group:t}=e,o=e.size??20,c=(0,i().tz)(),u=(0,n().K8)((()=>{if(t&&t.icon)return{pointer:t.pointer,icon:t.icon}}),[t]),d=(0,n().K8)((()=>(0,r().n)({intl:c,permissionGroupModel:t})),[c,t]);return(0,l.jsx)("div",{children:u?(0,l.jsx)(s().B6,{disabled:!0,size:o,icon:u,isEmptyPage:!1,title:d}):(0,l.jsx)(a().A,{size:o})})}},608346:(e,t,o)=>{o.d(t,{m:()=>a});o(898992),o(354520),o(672577),o(581454);var n=o.n(o(844751)),r=o(296540),i=()=>o(534177);function a({sections:e,filterQuery:t}){return(0,r.useMemo)((()=>e.map((e=>function(e,t){const{items:o,...r}=e;if(!t)return e;const i=o.filter((e=>e.keywords.find((e=>n().match(t,e)))));return i.length>0?{...r,items:i}:void 0}(e,t))).filter(i().O9)),[t,e])}},611947:(e,t,o)=>{o.r(t),o.d(t,{checkIsTutorialDone:()=>v,dismissTutorial:()=>u,resetTutorials:()=>d,tutorialAdvanceToStep:()=>p,tutorialAdvanceToStepAfter:()=>m,tutorialGoToNextStep:()=>l,tutorialGoToPrevStep:()=>c,tutorialGoToStep:()=>f});var n=()=>o(907258),r=()=>o(541235),i=()=>o(680977),a=()=>o(547149),s=()=>o(646355);function l(e,t,o){var r;const{currentUserSettingsStore:a}=n().default.state;if(!a)return;const l=null===(r=a.getSettings())||void 0===r?void 0:r.tutorials;o?(0,i().m)({userSettingsStore:a,transaction:o,data:{tutorials:{...l,[t]:(0,s().i9)(a,t)}}}):g({userAction:"TutorialActions.nextStep",environment:e,perform:e=>{(0,i().m)({userSettingsStore:a,transaction:e,data:{tutorials:{...l,[t]:(0,s().i9)(a,t)}}})},userId:a.id})}function c(e,t){var o;const{currentUserSettingsStore:r}=n().default.state;if(!r)return;const a=null===(o=r.getSettings())||void 0===o?void 0:o.tutorials;g({userAction:"TutorialActions.prevStep",environment:e,perform:e=>{(0,i().m)({userSettingsStore:r,transaction:e,data:{tutorials:{...a,[t]:(0,s().KD)(r,t)}}})},userId:r.id})}function u(e,t){var o;const{currentUserSettingsStore:a}=n().default.state;if(!a)return;const s=null===(o=a.getSettings())||void 0===o?void 0:o.tutorials;(null==s?void 0:s[t])!==r().YD&&g({userAction:"TutorialActions.dismissTutorial",environment:e,perform:e=>{(0,i().m)({userSettingsStore:a,transaction:e,data:{tutorials:{...s,[t]:r().YD}}})},userId:a.id})}function d(e){const{currentUserSettingsStore:t}=n().default.state;t&&g({userAction:"TutorialActions.resetTutorialsDebug",environment:e,perform:e=>{(0,i().m)({userSettingsStore:t,transaction:e,data:{tutorials:{}}})},userId:t.id})}function p(e,t,o){var a;const{currentUserSettingsStore:l}=n().default.state;if(!l||(0,s().x$)(l,t))return;const c=(0,s().gt)(l,t);r().c$[t].steps.findIndex((e=>e.id===c))>=r().c$[t].steps.findIndex((e=>e.id===o))||(0,i().m)({userSettingsStore:l,transaction:e,data:{tutorials:{...null===(a=l.getSettings())||void 0===a?void 0:a.tutorials,[t]:o}}})}function m(e,t,o){if((0,s().ll)(o))return;const n=(0,s().tb)(t,o);n&&p(e,t,n)}function f(e,t,o,r){var a;const{currentUserSettingsStore:s}=n().default.state;if(!s)return;const l=null===(a=s.getSettings())||void 0===a?void 0:a.tutorials;r?(0,i().m)({userSettingsStore:s,transaction:r,data:{tutorials:{...l,[t]:o}}}):g({userAction:"TutorialActions.nextStep",environment:e,perform:e=>{(0,i().m)({userSettingsStore:s,transaction:e,data:{tutorials:{...l,[t]:o}}})},userId:s.id})}function v(e){const{currentUserSettingsStore:t}=n().default.state;return!!t&&(0,s().x$)(t,e)}function g(e){return a().createAndCommit({...e,canUndo:!1})}},612900:(e,t,o)=>{o.d(t,{u:()=>i});var n=()=>o(79926);const r=new(n().O2)("PulsingWrapper",(async()=>o.e(45248).then(o.bind(o,673962)))),i=(0,n().jQ)(r,(e=>e.PulsingWrapper),{renderLoading:(e,t)=>t.children})},613016:(e,t,o)=>{o.d(t,{a:()=>r});var n=()=>o(907258);function r(){const{sidebarSpaceStore:e}=n().default.getState();return e?e.id:void 0}},621594:(e,t,o)=>{o.r(t),o.d(t,{exclamationMarkCircleSmallIcon:()=>i,iconDefinition:()=>r});o(296540);var n=o(474848);const r={viewBox:"0 0 16 16",fittedViewBox:"1.87 1.87 12.25 12.25",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M7.9 4.875a.625.625 0 0 0-.625.625V8a.625.625 0 1 0 1.25 0V5.5a.625.625 0 0 0-.625-.625m0 4.7a.725.725 0 1 0 0 1.45.725.725 0 0 0 0-1.45"}),(0,n.jsx)("path",{d:"M8 1.875a6.125 6.125 0 1 0 0 12.25 6.125 6.125 0 0 0 0-12.25M3.125 8a4.875 4.875 0 1 1 9.75 0 4.875 4.875 0 0 1-9.75 0"})]})},i=(0,o(340498).wt)("exclamationMarkCircleSmall",r,"small")},625194:(e,t,o)=>{o.d(t,{m:()=>a});var n=o(296540),r=()=>o(96330),i=o(474848);const a=n.memo((function(e){const{textValue:t}=e,o=(0,n.useMemo)((()=>(0,r().X1)((0,r().eC)(t))),[t]);return(0,i.jsx)("span",{children:o})}))},627503:(e,t,o)=>{o.d(t,{a:()=>r});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"1.37 1.37 13.25 13.25",svg:(0,o(474848).jsx)("path",{d:"M3.25 1.375c-1.036 0-1.875.84-1.875 1.875v6c0 1.036.84 1.875 1.875 1.875h1.625v1.625c0 1.036.84 1.875 1.875 1.875h6c1.036 0 1.875-.84 1.875-1.875v-6c0-1.036-.84-1.875-1.875-1.875h-1.625V3.25c0-1.036-.84-1.875-1.875-1.875zM2.625 3.25c0-.345.28-.625.625-.625h6c.345 0 .625.28.625.625v1.625H6.75c-1.036 0-1.875.84-1.875 1.875v3.125H3.25a.625.625 0 0 1-.625-.625zm3.5 3.5c0-.345.28-.625.625-.625h6c.345 0 .625.28.625.625v6c0 .345-.28.625-.625.625h-6a.625.625 0 0 1-.625-.625z"})},r=(0,o(340498).wt)("duplicateSmall",n,"small")},646355:(e,t,o)=>{o.d(t,{KD:()=>l,gt:()=>c,i9:()=>s,ll:()=>i,tb:()=>a,x$:()=>r});o(18107),o(967357);var n=()=>o(541235);function r(e,t){return i(c(e,t))}function i(e){return void 0!==e&&(e===n().q_||e===n().YD)}function a(e,t){if(i(t))return;const o=n().c$[e],r=o.steps.findIndex((e=>e.id===t));return-1===r?o.steps[0].id:r===o.steps.length-1?n().q_:o.steps[r+1].id}function s(e,t){const o=c(e,t);if(o&&!i(o))return a(t,o)}function l(e,t){const o=c(e,t);if(o)return function(e,t){const o=n().c$[e];var r;if(i(t))return null===(r=o.steps.at(-1))||void 0===r?void 0:r.id;const a=o.steps.findIndex((e=>e.id===t));return-1!==a&&0!==a?o.steps[a-1].id:void 0}(t,o)}function c(e,t){var o;if(!e)return;const r=((null===(o=e.getSettings())||void 0===o?void 0:o.tutorials)||{})[t];return void 0===r?n().c$[t].steps[0].id:r}},662971:(e,t,o)=>{o.d(t,{A:()=>m});var n=o(296540),r=()=>o(30537);const i=function(){const[e,t]=n.useState({x:0,y:0});return n.useEffect((()=>{const e=e=>{t({x:e.clientX,y:e.clientY})};return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}}),[]),e};var a=o(474848);function s({x:e,mouseX:t}){return t>e?void 0:-Math.max(e-t,10)+"px"}function l({x:e,width:t,mouseX:o}){return o>e?-Math.max(o-(e+t),10)+"px":void 0}function c({x:e,width:t,mouseX:o}){return o>e?`${Math.max(o-(e+t),10)}px`:`${Math.max(e-o,10)}px`}function u({x:e,y:t,height:o,mouseX:n,mouseY:r}){return n>e?`polygon(0% 0%, 0% 100%, 100% ${100*(r-t)/o}%)`:`polygon(100% 0%, 0% ${100*(r-t)/o}%, 100% 100%)`}function d(e){const{x:t=0,y:o=0,height:r=0,width:d=0}=e.el.getBoundingClientRect()||{},{x:p,y:m}=i(),f={x:t,y:o,height:r,width:d,mouseX:p,mouseY:m},v=(0,n.useRef)(null),g=n.useCallback((e=>{if(v.current){v.current.style.pointerEvents="none";const t=document.elementFromPoint(e.clientX,e.clientY);if(v.current.style.pointerEvents="auto",t){const o=new MouseEvent(e.nativeEvent.type,e.nativeEvent);t.dispatchEvent(o)}}}),[]),y={insetInlineEnd:l(f),insetInlineStart:s(f),height:r,width:c(f),clipPath:u(f)};return(0,a.jsx)("div",{ref:v,onClick:g,style:{cursor:"pointer",position:"absolute",pointerEvents:"auto",top:0,...y}})}function p({onClick:e,renderOrigin:t,renderExtension:i,allowOptionalExtensionMenu:s,...l},c){const{disabled:u,disableDefaultClick:p,onFocus:m,focused:f,openOnFocus:v,placementToOrigin:g,alignmentToOrigin:y,disableCloseOnEnter:h,bottomSheetInitialState:x,popupTypeOverride:_}=l,S=(0,o(484714).WS)(),b=(0,o(546926).Tf)(),[M,I]=(0,n.useState)(!1),w=(0,n.useRef)(null),k=(0,n.useRef)(null),C=(0,n.useRef)(null),T=(0,n.useRef)(null),A=(0,n.useCallback)((()=>{C.current&&window.clearTimeout(C.current),T.current&&window.clearTimeout(T.current),C.current=null,T.current=null}),[]),j=(0,n.useCallback)((()=>{A(),u||I(!0)}),[u,A]),E=(0,n.useCallback)((()=>{A(),I(!1)}),[A]),R=(0,n.useCallback)((e=>{A(),M||(e&&e.preventDefault&&e.preventDefault(),C.current=window.setTimeout(j,120))}),[M,A,j]),D=(0,n.useCallback)((()=>{A(),M&&(T.current=window.setTimeout(E,100))}),[M,E,A]),B=(0,n.useCallback)((t=>{m(),j(),s&&(null==e||e(t),E())}),[m,j,s,e,E]),O=(0,n.useCallback)((()=>{R()}),[R]),P=(0,n.useCallback)((()=>{m(),R()}),[m,R]),z=(0,n.useCallback)((e=>{if(o(726637).A.isMobile)return;const t=w.current;M&&t&&!t.contains(e.target)&&E()}),[M,E]),V=(0,n.useCallback)((e=>{13===e.keyCode&&M&&!h&&E()}),[M,E,h]);(0,n.useEffect)((()=>{if(!Boolean(p))return window.addEventListener("click",z),()=>{window.removeEventListener("click",z)}}),[p,z]),(0,n.useEffect)((()=>(window.addEventListener("keydown",V),()=>{window.removeEventListener("keydown",V)})),[V]);const F=(0,n.useRef)(f);(0,n.useEffect)((()=>{v&&!F.current&&f?R():!f&&F.current&&D(),F.current=f}),[f,v,R,D]);const U=(0,o(401497).IS)((()=>({mobilePopupStyle:{borderRadius:12,backgroundColor:o(100622).Tj.background.secondary}})),[]),N={...(0,o(383036).A)({onMouseEnter:O,onClick:B},l),showExtensionArrow:!0};let L=r().n.Popup;return _?L=_:S&&(L=b?r().n.BottomSheet:r().n.SlideUp),(0,a.jsx)(o(782482).N,{debugName:"ExtensionMenuItem",capture:f,onEnter:M?void 0:R,onRight:R,onLeft:M?D:void 0,onEsc:M?D:void 0,children:(0,a.jsx)(o(127833).zD,{popupType:L,bottomSheetInitialState:x,open:M,origin:t(N,c),placementToOrigin:g??"right",alignmentToOrigin:y??"center",originGap:0,disableMouseCapture:!0,preventBlockRenderQueueOnEnter:!0,preventScaleTransition:!S,preventCaptureEsc:!0,ref:w,render:()=>(0,a.jsxs)(a.Fragment,{children:[!S&&k.current?(0,a.jsx)(d,{el:k.current}):null,(0,a.jsx)("div",{ref:k,style:{height:"100%"},children:i({onMouseEnter:P},{close:D})})]}),style:{overflow:"visible",...S&&U.mobilePopupStyle},trapFocus:!0,onDismiss:E})})}const m=n.forwardRef(p)},671089:(e,t,o)=>{o.r(t),o.d(t,{checkmarkCircleIcon:()=>i,iconDefinition:()=>r});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M12.876 7.982a.625.625 0 1 0-1.072-.644L9.25 11.595 7.815 9.92a.625.625 0 0 0-.95.813l2 2.334a.625.625 0 0 0 1.01-.085z"}),(0,n.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25M3.625 10a6.375 6.375 0 1 1 12.75 0 6.375 6.375 0 0 1-12.75 0"})]})},i=(0,o(340498).wt)("checkmarkCircle",r,"default")},704658:(e,t,o)=>{o.r(t),o.d(t,{UpgradeButton:()=>g});o(296540);var n=()=>o(593531),r=()=>o(406094),i=()=>o(69708),a=()=>o(86269),s=()=>o(839897),l=()=>o(674482),c=()=>o(24796),u=o(474848);function d(e){var t;const{upgradeStatus:o,handleClick:n,size:d="default",width:p="fill",hoverRef:m,onMouseDown:f,upsell:v,featureName:g}=e,y=(0,i().tz)(),h=(0,s().e)(o),x=h.label.button({intl:y,upsell:v,featureName:g}),_=Boolean(h.disabledTooltip),S=(0,a().Lo)({width:p}),{animationState:b,animationTriggers:M}=(0,a().lP)(m);return(0,u.jsx)(c().T,{tooltipMessage:_&&!m?null===(t=h.disabledTooltip)||void 0===t?void 0:t.call(h,{intl:y,upsell:v,featureName:g}):void 0,children:(0,u.jsx)(r().A,{...m?{}:M,disabled:_,hoveredStyle:m?{background:"unset"}:void 0,size:l().lR[d],iconLeading:{...(0,a().e4)({icon:h.icon({upsell:v}),animationState:b}),size:l().Ud[d]},style:S,onClick:n,onMouseDown:f,children:x})})}var p=()=>o(160432);function m(e){var t;const{upsell:o,upgradeStatus:n,handleClick:r,onMouseDown:a,featureName:d}=e,m=(0,i().tz)(),f=(0,s().e)(n),v=f.label.button({intl:m,upsell:o,featureName:d}),g=Boolean(f.disabledTooltip);return(0,u.jsx)(c().T,{tooltipMessage:g?null===(t=f.disabledTooltip)||void 0===t?void 0:t.call(f,{intl:m,upsell:o,featureName:d}):void 0,children:(0,u.jsx)(p().A,{colorPalette:"blue",disabled:g,size:l().lR.default,onClick:r,onMouseDown:a,children:v})})}var f=()=>o(986321),v=()=>o(408543);function g({source:e,upsell:t,featureName:o,hoverRef:r,onMouseDown:i,postUpgradeCallback:a,onClickBeforeUpgradeAction:s,spaceStore:l,...c}){const{upgradeEligibility:p,handleClick:g}=(0,v().C)({upsell:t,source:e,buttonDisplayType:c.display,onClickBeforeUpgradeAction:s,postUpgradeCallback:a,spaceStore:l});if(!p||"not_eligible"===p.status&&"feature_not_upsellable"===p.reason)return null;switch(c.display){case"button":return(0,u.jsx)(d,{upgradeStatus:p.status,handleClick:g,upsell:t,featureName:o,hoverRef:r,onMouseDown:i,...c});case"icon":return(0,u.jsx)(n().c,{upgradeStatus:p.status,handleClick:g,upsell:t,featureName:o,hoverRef:r,onMouseDown:i,...c});case"text":return(0,u.jsx)(f().c,{upgradeStatus:p.status,handleClick:g,upsell:t,featureName:o,hoverRef:r,onMouseDown:i,...c});case"primary":return(0,u.jsx)(m,{upgradeStatus:p.status,handleClick:g,upsell:t,featureName:o,onMouseDown:i,...c})}}},730307:(e,t,o)=>{o.d(t,{l:()=>m});var n=()=>o(779315),r=()=>o(292985),i=()=>o(161479),a=()=>o(878523),s=()=>o(129522),l=()=>o(404783),c=()=>o(555776),u=()=>o(116008),d=()=>o(36088),p=()=>o(405981);async function m(e){var t;const{environment:o,blockStore:m,rect:f,property_id:v,from:g}=e;if(u().A.hasContent())return void(0,p()._y)({environment:o,reason:"starting_new"});const y=s().K.getRect(m);if(!y)return;const h=new(l().A)(o,(0,i().e)(m.pointer.spaceId)),x=y.width,_=y.height,S=y.right-x;u().A.setState({open:!0,rect:f||new DOMRect(S,y.top,x,_),type:"block",content:"comment",blockStore:m,blockId:m.id,discussionInputStore:h,property_id:v,lastKnownBlockStore:m,from:g}),(0,r().V)({element:null===(t=n().A.UpdateSidebarCommentScroller)||void 0===t?void 0:t.getNode(),environment:o,options:{top:0,behavior:"smooth"}}),c().A.setActiveWithSource("text_annotation"),await(0,d().M)({discussionInputStore:h,environment:o}),a().j4(o,{from:g})}},736767:(e,t,o)=>{o.d(t,{A:()=>a});var n=o(296540),r=o(474848);function i(e,t){return(0,r.jsx)(o(424400).Ay,{...e,ref:t,style:{background:"none",borderBottom:"none",boxShadow:"",marginTop:2,marginBottom:6,paddingTop:4,paddingBottom:4,minHeight:"none",...e.style}})}const a=(0,n.forwardRef)(i)},738508:(e,t,o)=>{o.r(t),o.d(t,{cursorIcon:()=>i,iconDefinition:()=>r});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",fittedViewBox:"1.25 0 17.5 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("g",{className:"logo-light-mode",children:[(0,n.jsxs)("g",{clipPath:"url(#clip0_16020_205)",children:[(0,n.jsx)("path",{fill:"#757575",d:"m9.995 9.987 8.658 4.999a.6.6 0 0 1-.226.226l-8.092 4.672a.68.68 0 0 1-.68 0l-8.092-4.672a.6.6 0 0 1-.226-.226z"}),(0,n.jsx)("path",{fill:"#525252",d:"M9.995 0v9.987l-8.658 4.999a.6.6 0 0 1-.082-.309v-9.38c0-.22.117-.424.308-.534L9.655.09a.7.7 0 0 1 .34-.09"}),(0,n.jsx)("path",{fill:"#404040",d:"M18.652 4.989a.6.6 0 0 0-.225-.226L10.334.09A.7.7 0 0 0 9.995 0v9.987l8.658 4.999a.6.6 0 0 0 .083-.309v-9.38c0-.11-.03-.216-.083-.308"}),(0,n.jsx)("path",{fill:"#D9D9D9",d:"M18.047 5.339a.29.29 0 0 1 0 .29l-7.859 13.61c-.053.093-.193.055-.193-.05v-8.97a.4.4 0 0 0-.054-.201z"}),(0,n.jsx)("path",{fill:"#fff",d:"m18.047 5.339-8.106 4.68a.4.4 0 0 0-.147-.147L2.027 5.387c-.092-.053-.054-.193.052-.193h15.717c.111 0 .202.06.25.145"})]}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"clip0_16020_205",children:(0,n.jsx)("path",{fill:"#fff",d:"M1.255 0h17.49v20H1.256z"})})})]}),(0,n.jsxs)("g",{className:"logo-dark-mode",children:[(0,n.jsxs)("g",{clipPath:"url(#clip0_16020_213)",children:[(0,n.jsx)("path",{fill:"#6E6E6E",d:"m9.995 9.987 8.658 4.999a.6.6 0 0 1-.226.226l-8.092 4.672a.68.68 0 0 1-.68 0l-8.092-4.672a.6.6 0 0 1-.226-.226z"}),(0,n.jsx)("path",{fill:"#4A4A4A",d:"M9.995 0v9.987l-8.658 4.999a.6.6 0 0 1-.082-.309v-9.38c0-.22.117-.424.308-.534L9.655.09a.7.7 0 0 1 .34-.09"}),(0,n.jsx)("path",{fill:"#383838",d:"M18.652 4.989a.6.6 0 0 0-.225-.226L10.334.09A.7.7 0 0 0 9.995 0v9.987l8.658 4.999a.6.6 0 0 0 .083-.309v-9.38c0-.11-.03-.216-.083-.308"}),(0,n.jsx)("path",{fill:"#C9C9C9",d:"M18.047 5.339a.29.29 0 0 1 0 .29l-7.859 13.61c-.053.093-.193.055-.193-.05v-8.97a.4.4 0 0 0-.054-.201z"}),(0,n.jsx)("path",{fill:"#fff",d:"m18.047 5.339-8.106 4.68a.4.4 0 0 0-.147-.147L2.027 5.387c-.092-.053-.054-.193.052-.193h15.717c.111 0 .202.06.25.145"})]}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"clip0_16020_213",children:(0,n.jsx)("path",{fill:"#fff",d:"M1.255 0h17.49v20H1.256z"})})})]})]})},i=(0,o(340498).wt)("cursor",r,"default")},748054:(e,t,o)=>{o.d(t,{M:()=>r});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.97 2.68 12.51 14.37",svg:(0,o(474848).jsx)("path",{d:"M10.282 3.66a5.39 5.39 0 0 0-5.217-.54l-.711.305a.63.63 0 0 0-.38.575v12.425a.625.625 0 1 0 1.25 0v-3.913l.333-.142a4.14 4.14 0 0 1 4.008.414 5.39 5.39 0 0 0 5.504.405l1.06-.53a.63.63 0 0 0 .346-.56V4a.625.625 0 0 0-.905-.558l-1.06.53c-1.36.68-2.983.56-4.228-.312m-5.057 7.495V4.412l.332-.142a4.14 4.14 0 0 1 4.008.413 5.39 5.39 0 0 0 5.504.406l.156-.078v6.703l-.715.357c-1.36.68-2.983.56-4.228-.312a5.4 5.4 0 0 0-5.057-.604"})},r=(0,o(340498).wt)("flag",n,"default")},783793:(e,t,o)=>{o.d(t,{o:()=>c,x:()=>l});o(296540);var n=()=>o(401497),r=()=>o(100622),i=()=>o(278589),a=()=>o(200424),s=o(474848);function l(e){const{variant:t,imgSource:o,tintColor:a,faceStyle:l,shadowVariant:u="strong",style:d,...p}=e,m=(0,n().IS)((()=>{const e=(0,i().N)(t);return{faceImgWrap:{width:e,height:e,borderRadius:"100%",background:r().Tj.assistantCornerButtonBackground,..."strong"===u&&{boxShadow:e>=90?r().Tj.shadowMDThickerOutline:r().Tj.shadowMD},..."light"===u&&{borderRadius:"50%",boxShadow:e>=90?r().Tj.shadowSMThickerOutline:r().Tj.shadowSM},overflow:"hidden",...d}}}),[t,u,d]);return(0,s.jsx)("div",{...p,children:(0,s.jsx)("div",{style:m.faceImgWrap,children:(0,s.jsx)(c,{imgSource:o,variant:t,tintColor:a,style:l})})})}function c(e){const{imgSource:t,variant:o,tintColor:r,style:l,alt:c,...u}=e,d=(0,i().N)(o),p=t??a(),m=c??"Notion AI face",f=(0,n().IS)((()=>({faceImg:{height:d,width:d,transform:"scaleX(var(--direction, 1))",...l},tintedFace:{height:d,width:d,transform:"scaleX(var(--direction, 1))",backgroundColor:r,WebkitMaskImage:`url(${p})`,maskImage:`url(${p})`,WebkitMaskRepeat:"no-repeat",maskRepeat:"no-repeat",WebkitMaskPosition:"center",maskPosition:"center",WebkitMaskSize:"contain",maskSize:"contain",...l}})),[d,l,r,p]);return void 0!==r?(0,s.jsx)("div",{style:f.tintedFace,role:"img","aria-label":m}):(0,s.jsx)("img",{...u,style:f.faceImg,src:p,alt:m})}},791177:(e,t,o)=>{o.d(t,{$:()=>r});var n=o(296540);function r(){const[e,t]=(0,n.useState)({inputElementAttributes:void 0,suppressFocusRing:!1}),[o,r]=(0,n.useState)(!1),[i,a]=(0,n.useState)(!1);(0,n.useEffect)((()=>{if(o){function e(){a(!1)}function t(e){"ArrowDown"!==e.key&&"ArrowUp"!==e.key||a(!0)}return window.addEventListener("pointerdown",e),window.addEventListener("keydown",t),()=>{window.removeEventListener("pointerdown",e),window.removeEventListener("keydown",t)}}}),[o]);return[(0,n.useMemo)((()=>({inputElementAttributes:e.inputElementAttributes,suppressFocusRing:e.suppressFocusRing&&i,onFocus:()=>{r(!0)},onBlur:()=>{r(!1)}})),[e,i]),(0,n.useMemo)((()=>({setComboboxState:t,isFocusVisible:i,isComboboxFocused:o,onItemHover:()=>{a(!1)}})),[i,o])]}},797324:(e,t,o)=>{o.d(t,{A:()=>v});var n=o(296540),r=()=>o(560520),i=()=>o(484714),a=()=>o(790748),s=()=>o(581010),l=()=>o(69708),c=()=>o(100622),u=()=>o(284371),d=()=>o(396406),p=()=>o(718827),m=()=>o(843798),f=o(474848);function v(e){const{onDismiss:t,inputRef:o}=e,v=(0,i().Y0)(),g=(0,n.useRef)(null),y=v.isMobileNative&&v.isIOS,h=y&&e.show;(0,a().b)(s().A,(()=>({getNode:()=>g.current,isShown:()=>h})),[h]);const x=(0,r().n)(),_=(0,n.useCallback)((()=>{var e;null==o||null===(e=o.current)||void 0===e||e.focus(),t&&t();const n=document.activeElement;n instanceof HTMLElement&&n.blur()}),[o,t]);if(!y)return null;const S=h?-(m().j+x):0;return(0,f.jsx)(d().O,{open:!0,children:(0,f.jsx)("div",{style:{position:"fixed",top:"100vh",width:"100%",height:m().j,display:h?"flex":"none",alignItems:"center",justifyContent:"flex-end",backgroundColor:c().Tj.keyboardDoneBarBackground,transform:`translateY(${S}px)`,transition:h?"ease-out":"ease-in",boxShadow:h?`\n\t\t\t\t\t\t\t\t0 -1px 0 ${c().Tj.border.primaryTranslucent}\n\t\t\t\t\t\t\t`:void 0},ref:g,children:(0,f.jsx)(p().Ay,{style:{display:"flex",alignItems:"center",marginInlineEnd:16,color:c().oZ.blue,fontWeight:u().Wy.semibold},onTouchEnd:()=>{_()},children:(0,f.jsx)(l().sA,{defaultMessage:"Done",id:"mobile.dismissKeyboardBar.button.label"})})})})}},803960:(e,t,o)=>{o.r(t),o.d(t,{arrowChevronSingleDownIcon:()=>r,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.97 6.97 12.06 6.66",svg:(0,o(474848).jsx)("path",{d:"M9.558 13.442c.244.244.64.244.884 0l5.4-5.4a.625.625 0 0 0-.884-.884L10 12.116 5.042 7.158a.625.625 0 1 0-.884.884z"})},r=(0,o(340498).wt)("arrowChevronSingleDown",n,"default")},837622:(e,t,o)=>{o.d(t,{A:()=>d});var n=o(296540),r=()=>o(590526),i=()=>o(401497),a=()=>o(201980),s=()=>o(116008),l=()=>o(279115),c=()=>o(29554),u=o(474848);const d=n.memo((function(e){const{parentStore:t,withComma:d,linkifyUrls:p,disableCommentHighlight:m,disableLinks:f,shouldTruncate:v,clampLines:g,textValue:y}=e,h=(0,o(484714).v3)(),x=(0,i().DP)(),_=(0,o(712030).Ol)();(0,n.useEffect)((()=>{void 0!==y&&h.KatexStore.loadIfNeeded((()=>y))}),[h.KatexStore,y]);const{collectionContextStore:S,property:b}=(0,n.useContext)(o(971003).L8),{collectionViewBlockId:M,collectionViewId:I}=(0,r().K8)((()=>{var e,t;return{collectionViewId:null==S||null===(e=S.collectionViewStore())||void 0===e?void 0:e.id,collectionViewBlockId:null==S||null===(t=S.collectionViewBlockStore())||void 0===t?void 0:t.id}}),[S]),w=(0,r().K8)((()=>h.KatexStore.getKatex()),[h.KatexStore]),k=(0,r().K8)((()=>{const e=l().qu.state,o=l().wb.state;return e&&b&&y?c().nu({textValue:y,blockId:t.id,textProps:{type:"page_property_value_match",collectionViewBlockId:M,collectionViewId:I,propertyId:b},find:e,currentFocusedResult:o,store:t}):y}),[b,t,y,M,I]),C=(0,r().K8)((()=>{if(s().A.getPropertyId()!==b||s().A.getBlockStore()!==t)return k;const e=s().A.getMultiSelection();return e?a().Mwp({textValue:k,selection:{startIndex:e.start.index,endIndex:e.end.index},annotation:[a().Ifu.TemporaryComment]}):y?a().Mwp({textValue:k,selection:{startIndex:0,endIndex:a().qAZ(y).length},annotation:[a().Ifu.TemporaryComment]}):k}),[t,b,y,k]),T=(0,r().K8)((()=>void 0===C?null:c().S5({environment:h,textValue:C&&{value:C,spaceId:(0,o(161479).e)(t.pointer.spaceId)},parentStore:t,disableHover:!1,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!1,disableCommentAnnotations:m??!1,disabled:!0,theme:x,disableLinks:f??!1,emojiType:_,katex:w,formulaValueTypes:[],stopLinkPropagation:!0,linkTargetBlank:!0})),[C,h,t,m,x,f,_,w],{silenceRerenderDefender:!0}),A=(0,n.useMemo)((()=>{if(!p||void 0===y)return null;const e=(0,a().k4p)(y);return(0,o(735577).A)(e)?(0,o(713998).MO)(y):null}),[p,y]),j=(0,i().IS)((()=>({text:{...v&&!g?o(284371).RC:void 0,...v&&g?{...(0,o(115512).pA)(g),overflow:"hidden",textOverflow:"ellipsis"}:{}}})),[v,g]);return(0,u.jsxs)("span",{style:j.text,children:[A?(0,u.jsx)(o(552712).N,{href:A,style:{display:"inline",pointerEvents:"auto",...(0,o(468882).w_)()},external:!0,onClick:e=>e.stopPropagation(),children:T}):T,d?", ":null]})}))},838364:(e,t,o)=>{o.d(t,{H:()=>n});const n=52},839754:(e,t,o)=>{o.d(t,{Bi:()=>w,My:()=>I,ZM:()=>C,_M:()=>k,navigateToWorkflowTemplateOnboardingModal:()=>T});o(16280),o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577),o(581454);var n=()=>o(907258),r=()=>o(295633),i=()=>o(584262),a=()=>o(663077),s=()=>o(179034),l=()=>o(201980),c=()=>o(749750),u=()=>o(896628),d=()=>o(384944),p=()=>o(857783),m=()=>o(730969),f=()=>o(840153),v=()=>o(339798),g=()=>o(180762),y=()=>o(799832),h=()=>o(111379),x=()=>o(295304),_=()=>o(547149),S=()=>o(373444),b=()=>o(165592),M=()=>o(204067);function I({transaction:e,collectionStore:t,propertyTemplates:o}){var n;const r=(null===(n=t.getParentBlockStore())||void 0===n?void 0:n.getCollectionViewStores().filter((e=>"table"===e.getType())))??[];if(0===r.length)return;const i=[];for(const l of o){const e=(0,M().S1)({collectionStore:t,templateId:l.templateId,instancePointerType:"property"});e&&i.push({property:e.id,visible:!(0,a().Sz)(l),...l.tablePropertyFormat})}if(0!==i.length)for(const a of r){var s;const t=(null===(s=a.getPropertyFormatsStore("table_properties"))||void 0===s?void 0:s.getValue())??[],o=new Set(t.map((e=>e.property))),n=i.filter((e=>!o.has(e.property)));0!==n.length&&u().zA({stores:[a],update:{table_properties:[...t,...n]},transaction:e})}}function w({transaction:e,collectionStore:t,propertyTemplates:o}){const n=[];for(const s of o){const e=(0,M().S1)({collectionStore:t,templateId:s.templateId,instancePointerType:"property"});e&&n.push({property:e.id,visible:!0})}const r=t.getFormat().collection_page_properties??[],i=new Set(r.map((e=>e.property))),a=n.filter((e=>!i.has(e.property)));a.length&&u().zA({stores:[t],update:{collection_page_properties:[...r,...a]},transaction:e})}function k({environment:e,newPageStore:t,result:o}){"accepted_template"!==o.type&&"accepted_empty_collection"!==o.type||_().createAndCommit({environment:e,canUndo:!1,perform:n=>{const i=t.getTitleValue();if(d().zv({store:t,transaction:n,data:{alive:!1}}),"accepted_empty_collection"===o.type&&!(0,l().w9s)(i)){const a=r().B.createChildStore(t,{table:"block",id:o.blockId}).getTitleStore();a&&x().yr({environment:e,transaction:n,tokens:i,index:0,store:a})}const a=t.getParentStore();if((null==a?void 0:a.table)===s().ev){const e=a.getContentIds();d().zv({store:a,transaction:n,data:{content:e.filter((e=>e!==t.id))}})}},userAction:"clean_up_empty_new_page"})}function C({environment:e,userAction:t,result:o,existingCollectionViewBlockStore:n,existingCollectionStore:r}){if("canceled"!==o.type){if("accepted_empty_collection"===o.type&&r){const n=r.getKeyStore("name"),i=(0,l().x9d)(o.newCollectionTitle);n&&_().createAndCommit({userAction:t,environment:e,canUndo:!0,perform:t=>x().R9({environment:e,store:n,transaction:t,value:i})})}if(n){var i;const e=null===(i=(0,y().U)(n))||void 0===i?void 0:i.settingsStore;e&&v().os({collectionSettingsStore:e})}if("accepted_template"===o.type&&null!=n&&n.isCollectionView()&&(null==n||!n.hasSingleSourceAndNoLinkedCollections())){const t=(0,y().U)(n),r=n.getCollectionViewStores().find((e=>{var t;return(null===(t=e.getCollectionStore())||void 0===t?void 0:t.id)===o.collectionId}));if(!t||!r)return;(0,g().t)({environment:e,collectionContextStore:t,collectionViewId:r.id,isFullScreen:t.isFullScreenStore.state,isRootChild:t.isRootChildStore.state,isInPeekRenderer:t.isInPeekRendererStore.state})}}}async function T({environment:e,collectionViewBlockStore:t}){const o=t.id;if(!t.isDefined()){const n=await c().$f({environment:e,blockId:o});if(!n)return;e=await f().T({environment:e,newCurrentUserId:n}),t=new(r().B)(e,{table:s().ev,id:o}),await t.load()}const a=t.getSpaceId();if(!a)throw new Error("Space ID not found for collection block");const l=(0,h().k)(a);if(!l)throw new Error(`Space view not found for space ID: ${a}`);const{sidebarSpaceStore:u}=n().default.state;(null==u?void 0:u.id)!==a&&await(0,m().y)({environment:e,spaceViewStore:l});const d=t.getFormat();if("workflow_template_placeholder"===(null==d?void 0:d.collection_view_sub_type)&&null!=d&&d.placeholder_workflow_template_id&&t.isCollectionView()){const{getCollectionTemplateFromId:o}=await b().t.load(),n=o(d.placeholder_workflow_template_id);if(!n)throw new Error(`Collection template "${d.placeholder_workflow_template_id}" not found`);const{onNavigateToPlaceholderWorkflowTemplateBlock:r}=await S().O.load();r({environment:e,collectionTemplate:n,collectionViewBlockStore:t})}else p().uK({environment:e,store:t,pageVisitSource:i().y8.WorkflowTemplatesDeeplink})}},848401:(e,t,o)=>{o.d(t,{Ay:()=>v,mI:()=>m,vb:()=>f});o(296540);var n=()=>o(401497),r=()=>o(718827),i=()=>o(807449),a=()=>o(784892),s=()=>o(563692),l=()=>o(340498),c=()=>o(69708),u=()=>o(284371),d=o(474848);const p=(0,c().YK)({removeTokenLabel:{defaultMessage:"Remove {title}",id:"uiGenericToken.removeTokenLabel"},removeTokenLabelGeneric:{defaultMessage:"Remove Item",id:"uiGenericToken.removeTokenLabelGeneric"}}),m=a().NY,f={[a().NY.ExtremeSmall]:{height:12,fontSize:10,margin:"0 4px 0 0",marginEditState:"0 6px 0 0",closeIconSize:l().Ev.xxs,avatarSize:14},[a().NY.ExtraSmall]:{height:14,fontSize:12,margin:"0 6px 0 0",marginEditState:"0 6px 0 0",closeIconSize:l().Ev.xxs,avatarSize:14},[a().NY.Small]:{height:18,fontSize:12,margin:"0 6px 6px 0",marginEditState:"0 6px 6px 0",closeIconSize:l().Ev.xxs,avatarSize:16},[a().NY.CompactEssential]:{height:20,fontSize:14,margin:"0 10px 6px 0",marginEditState:"0 6px 6px 0",closeIconSize:l().Ev.xxs,avatarSize:20},[a().NY.Medium]:{height:20,fontSize:14,margin:"0 10px 6px 0",marginEditState:"0 6px 6px 0",closeIconSize:l().Ev.xxs,avatarSize:20},[a().NY.Inline]:{height:20,fontSize:14,closeIconSize:l().Ev.xxs,avatarSize:20,margin:"0 -5px 0 0",marginEditState:"0 6px 0 0"},[a().NY.Large]:{height:24,fontSize:16,margin:"0 8px 8px 0",marginEditState:"0 8px 8px 0",closeIconSize:l().Ev.sm,avatarSize:24}};function v({avatarSize:e,format:t,isSingle:o,onClickRemove:a,renderAvatar:l,showRemoveButton:m,shouldShrink:v,style:g,title:y}){const h=(0,c().tz)(),{height:x,fontSize:_,margin:S,marginEditState:b,closeIconSize:M,avatarSize:I}=f[t],w=e??I,k=(0,n().IS)((()=>({root:{display:"flex",alignItems:"center",flexShrink:v?1:0,minWidth:0,height:x,borderRadius:6,fontSize:_,lineHeight:"120%",margin:o?0:m?b:S,...g}})),[_,x,o,S,b,v,m,g]);return(0,d.jsxs)("div",{style:k.root,children:[null==l?void 0:l(w),(0,d.jsx)("div",{className:"notranslate",style:{...u().RC},children:y}),m?(0,d.jsx)(r().Ay,{ariaLabel:void 0!==y?h.formatMessage(p.removeTokenLabel,{title:y}):h.formatMessage(p.removeTokenLabelGeneric),onClick:a,style:{display:"flex",alignItems:"center",justifyContent:"center",width:x,height:x,marginInlineStart:2,marginInlineEnd:2,flexGrow:0,flexShrink:0,borderRadius:6},children:(0,d.jsx)(i().I,{icon:s().xMarkFillSmallIcon,size:M,style:{opacity:.5}})}):null]})}},859384:(e,t,o)=>{o.d(t,{M:()=>i});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",fittedViewBox:"3.12 2.99 13.88 13.88",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"m16.774 4.341-.59.589-1.109-1.11.596-.594a.784.784 0 0 1 1.103 0c.302.302.302.8 0 1.102zM8.65 12.462l6.816-6.813-1.11-1.11-6.822 6.808a1.1 1.1 0 0 0-.236.393l-.289.932c-.052.196.131.38.315.314l.932-.288a.9.9 0 0 0 .394-.236"}),(0,n.jsx)("path",{d:"M4.375 6.25c0-1.036.84-1.875 1.875-1.875H11a.625.625 0 1 0 0-1.25H6.25A3.125 3.125 0 0 0 3.125 6.25v7.5c0 1.726 1.4 3.125 3.125 3.125h7.5c1.726 0 3.125-1.4 3.125-3.125V9a.625.625 0 1 0-1.25 0v4.75c0 1.036-.84 1.875-1.875 1.875h-7.5a1.875 1.875 0 0 1-1.875-1.875z"})]})},i=(0,o(340498).wt)("compose",r,"default")},883701:(e,t,o)=>{o.d(t,{J:()=>s});var n=()=>o(34977),r=()=>o(457205),i=()=>o(849255),a=()=>o(534177);function s(e,t){if(t&&t.asActor)switch(t.pointer.table){case"bot":return new(r().v)(e,t.pointer);case"agent":return new(n().p)(e,t.pointer);case"notion_user":return new(i().L)(e,t.pointer);default:(0,a().HB)(t.pointer)}}},888325:(e,t,o)=>{function n(e){return`${e.table}:${e.id}`}o.d(t,{_:()=>n})},888643:(e,t,o)=>{o.d(t,{k:()=>r});var n=()=>o(402014);function r(e){(0,n().SQ)(e,n().y$.Click,(()=>{}))}},890409:(e,t,o)=>{o.d(t,{Ah:()=>y,Dk:()=>f,Iv:()=>g,SF:()=>v,YO:()=>_,_f:()=>b,c_:()=>p,dW:()=>x,gW:()=>m,sp:()=>M,vN:()=>h});o(16280),o(944114),o(898992),o(354520),o(803949),o(581454),o(737550);var n=()=>o(496603),r=()=>o(973647),i=()=>o(534177),a=()=>o(842599),s=()=>o(239381),l=()=>o(179034),c=()=>o(798880),u=()=>o(201980),d=()=>o(241319);function p(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"add_automation_step",properties:t})}function m(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"delete_automation_step",properties:t})}function f(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_create",properties:t})}function v(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_update",properties:t})}function g(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_delete",properties:t})}function y(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_enable",properties:t})}function h(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_disable",properties:t})}function x(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_action_create",properties:t})}function _(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_action_delete",properties:t})}function S(e){const{formulaAnalyticsModule:t,formulasModule:o,formulaTypecheckContextValues:n,getRecordModel:a,spaceId:l,value:c,featureGates:u}=e;if("formula"===c.type){if(!(0,i().O9)(c.value))return;const e=r().Q.unwrapOr(o.parseFormulaInputToAst(c.value),void 0);if(e){const r=o.addTypesToFormulaAST(e,{handleDataRequest:(0,s().zg)(a),spaceId:l,valueTypes:n,featureGates:u});return{...t.getFormulaAnalytics(e,{getRecordModel:a,typecheckContextValues:n}),formula_return_type:r.node.type,redacted_formula:t.getRedactedFormulaAsStringSync(e,{getRecordModel:a,typecheckContextValues:n})}}}else{if("simple"===c.type){if(!(0,i().O9)(c.value))return;return t.getSimpleFormulaAnalytics(c.value,{getRecordModel:a,typecheckContextValues:n})}(0,i().HB)(c.type)}}function b(e){const{automationActionModel:t,automationActionModels:o,formulaAnalyticsModule:r,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f,simpleFormulasModule:v}=e;return t.isType("complete_sprint")?{automation_action_id:t.pointer.id,type:"complete_sprint"}:t.isType("create_page")?function(e){const{automationActionModel:t,formulaAnalyticsModule:o,formulasModule:n,formulaTypecheckContextValues:r,getRecordModel:a,featureGates:s}=e,l=t.getConfig();let c,u=[];const d=null==l?void 0:l.collection,p=null==l?void 0:l.properties;if((0,i().O9)(d)&&(0,i().O9)(p)&&p.length>0){const e=a(d),f=null==e?void 0:e.getNormalizedSchema();(0,i().O9)(f)&&(u=p.map((e=>{var t;return(null===(t=f[e])||void 0===t?void 0:t.type)??"unknown"})));const v=null==l?void 0:l.values;if(n&&(0,i().O9)(v)){c=[];for(const e of p){var m;const i=null===(m=v[e])||void 0===m?void 0:m.value;if(!i)continue;const l=S({formulaAnalyticsModule:o,formulasModule:n,getRecordModel:a,formulaTypecheckContextValues:r,spaceId:t.spaceId,value:i,featureGates:s});l&&c.push(l)}}}return{automation_action_id:t.pointer.id,property_formula_stats:c,property_types:u,type:"create_page"}}({automationActionModel:t,formulaAnalyticsModule:r,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f}):t.isType("duplicate_blocks")?{automation_action_id:t.pointer.id,type:"duplicate_blocks"}:t.isType("modal_confirmation")?function(e){const{automationActionModel:t,formulaAnalyticsModule:o,formulasModule:n,formulaTypecheckContextValues:r,getRecordModel:a,featureGates:s}=e,l=t.getConfig(),c=[];if(n&&(0,i().O9)(l)&&l.text){const e=S({formulasModule:n,formulaAnalyticsModule:o,getRecordModel:a,formulaTypecheckContextValues:r,spaceId:t.spaceId,value:l.text,featureGates:s});e&&c.push(e)}return{automation_action_id:t.pointer.id,formula_stats:c,type:"modal_confirmation"}}({automationActionModel:t,formulaAnalyticsModule:r,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f}):t.isType("open_page")?{automation_action_id:t.pointer.id,type:"open_page"}:t.isType("query_collection")?{automation_action_id:t.pointer.id,type:"query_collection"}:t.isType("send_in_app_notification")?function(e){var t;const{automationActionModel:o,formulaAnalyticsModule:n,formulasModule:r,formulaTypecheckContextValues:a,getRecordModel:s,featureGates:l,simpleFormulasModule:c}=e,d={automation_action_id:o.pointer.id,messageCharacterCount:0,type:"send_in_app_notification"},p=o.getConfig();if(!(0,i().O9)(p))return d;if((0,i().O9)(p.target))if("formula"===p.target.type&&(0,i().O9)(p.target.value)){if(d.targetData={type:"formula",numUserFormulaTargets:(0,u().Fbh)(p.target.value.value).length,numFormulaContextTargets:c.getReferencedContextValueIds(p.target.value).length},r){const e=S({formulasModule:r,formulaAnalyticsModule:n,getRecordModel:s,formulaTypecheckContextValues:a,spaceId:o.spaceId,value:p.target.value,featureGates:l});e&&(d.formula_stats??=[],d.formula_stats.push(e))}}else if("property"===p.target.type&&(0,i().O9)(p.target.propertyId)&&(0,i().O9)(p.target.collectionPointer)){const e=s(p.target.collectionPointer),t=null==e?void 0:e.getSchema();var m;(0,i().O9)(t)&&(d.targetData={type:"property",propertyType:null===(m=t[p.target.propertyId])||void 0===m?void 0:m.type})}if((0,i().O9)(null===(t=p.notification_message)||void 0===t?void 0:t.value)&&(d.messageCharacterCount=(0,u().FAw)(p.notification_message.value),r)){const e=S({formulasModule:r,formulaAnalyticsModule:n,getRecordModel:s,formulaTypecheckContextValues:a,spaceId:o.spaceId,value:p.notification_message,featureGates:l});e&&(d.formula_stats??=[],d.formula_stats.push(e))}return d}({automationActionModel:t,formulaAnalyticsModule:r,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f,simpleFormulasModule:v}):t.isType("send_gmail_notification")?function(e){var t,o,r,s,l,d,p;const{automationActionModel:m,formulaAnalyticsModule:f,formulasModule:v,formulaTypecheckContextValues:g,getRecordModel:y,featureGates:h}=e,x=m.getConfig();if(!(0,i().O9)(x))return{automation_action_id:m.pointer.id,fields:{},recipient_domains:{},type:"send_gmail_notification"};const _=Object.fromEntries(Object.entries(x||{}).map((([e,t])=>{var o;return"formula"===(null==t?void 0:t.type)?[e,Boolean(null==t||null===(o=t.value)||void 0===o?void 0:o.value)]:"simple"===(null==t?void 0:t.type)?[e,Boolean(null==t?void 0:t.value)]:[e,Boolean(t)]}))),{to:b,cc:M,bcc:I}=x,w=[...(null==b||null===(t=b.value)||void 0===t?void 0:t.value)||[],...(null==M||null===(o=M.value)||void 0===o?void 0:o.value)||[],...(null==I||null===(r=I.value)||void 0===r?void 0:r.value)||[]],k=[...(0,u().Fbh)(w).map((e=>y({table:c().oo,id:e}))).map((e=>null==e?void 0:e.email)).filter(i().O9),...(0,a().C3)((0,u().k4p)(w))],C=n().Tr(k.map((e=>e.split("@")[1]))),T=[null===(s=x.to)||void 0===s?void 0:s.value,null===(l=x.cc)||void 0===l?void 0:l.value,null===(d=x.bcc)||void 0===d?void 0:d.value,null===(p=x.reply_to)||void 0===p?void 0:p.value,x.from_name,x.email_subject,x.email_body].map((e=>{if(v&&(0,i().O9)(e))return S({formulaAnalyticsModule:f,formulasModule:v,getRecordModel:y,formulaTypecheckContextValues:g,spaceId:m.spaceId,value:e,featureGates:h})})).filter(i().O9);return{automation_action_id:m.pointer.id,fields:_,formula_stats:T,recipient_domains:C,type:"send_gmail_notification"}}({automationActionModel:t,formulaAnalyticsModule:r,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f}):t.isType("slack_notification")?{automation_action_id:t.pointer.id,type:"slack_notification"}:t.isType("update_pages")?function(e){const{automationActionModel:t,automationActionModels:o,formulaAnalyticsModule:n,formulasModule:r,formulaTypecheckContextValues:a,getRecordModel:l,featureGates:c}=e,u=t.getConfig(),p=[],m=[],f=[];if((0,i().O9)(u)&&(0,i().O9)(u.target)&&(0,i().O9)(u.properties)&&u.properties.length>0){let e;if("variable"===u.target.type){const t=(0,s().y5)(u.target.id);if("action"===t.source){const t=(0,d().y)({actionModels:o,id:u.target.id}).collectionPointer;if((0,i().O9)(t)){const o=l(t);e=null==o?void 0:o.getNormalizedSchema()}}else{if("global"!==t.source||"button_page"!==t.global)throw new Error("Failed loading property schema");{const t=(0,s().IV)(a,u.target.id);if("block"===(null==t?void 0:t.type.type)&&(0,i().O9)(t.type.collection)){const o=l(t.type.collection);e=null==o?void 0:o.getNormalizedSchema()}}}}else if("collection"===u.target.type){const t=l(u.target.collection);e=null==t?void 0:t.getNormalizedSchema()}(0,i().O9)(e)&&u.properties.forEach((o=>{const s=e[o];if((0,i().O9)(s)&&(p.push(s.type),r&&(0,i().O9)(u.values))){const e=u.values[o];if((0,i().O9)(e)&&(m.push({type:s.type,operator:e.action}),e.value)){const o=S({formulasModule:r,formulaAnalyticsModule:n,getRecordModel:l,formulaTypecheckContextValues:a,spaceId:t.spaceId,value:e.value,featureGates:c});o&&f.push(o)}}}))}return{automation_action_id:t.pointer.id,property_configs:m,property_formula_stats:f,property_types:p,type:"update_pages"}}({automationActionModel:t,automationActionModels:o,formulaAnalyticsModule:r,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f}):t.isType("define_variables")?function(e){const{automationActionModel:t,formulaAnalyticsModule:o,formulasModule:n,formulaTypecheckContextValues:r,getRecordModel:a,featureGates:s}=e,l=t.getConfig(),c=[];if(n&&(0,i().O9)(l)&&l.values)for(const i of Object.values(l.values))if(i.value){const e=S({formulasModule:n,formulaAnalyticsModule:o,getRecordModel:a,formulaTypecheckContextValues:r,spaceId:t.spaceId,value:i.value,featureGates:s});e&&c.push(e)}return{automation_action_id:t.pointer.id,formula_stats:c,type:"define_variables"}}({automationActionModel:t,formulaAnalyticsModule:r,formulasModule:l,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:f}):t.isType("http_request")?{automation_action_id:t.pointer.id,type:"http_request"}:t.isType("publish_site")?{automation_action_id:t.pointer.id,type:"publish_site"}:t.isType("worker")?{automation_action_id:t.pointer.id,type:"worker"}:void(0,i().HB)(t)}function M(e){const{automationModel:t,builderType:o="sidebar",formulaAnalyticsModule:n,formulasModule:r,formulaTypecheckContextValues:a,getRecordModel:s,featureGates:c,simpleFormulasModule:u,source:d}=e,p=[],m=t.getActionPointers().map((e=>s(e))).filter(i().O9);for(const l of t.getActionPointers()){const e=s(l);(0,i().O9)(e)&&p.push(b({automationActionModel:e,automationActionModels:m,formulaAnalyticsModule:n,formulasModule:r,formulaTypecheckContextValues:a,getRecordModel:s,featureGates:c,simpleFormulasModule:u}))}const f=[];let v,g,y;if(t.isEventType()){var h;const e=t.getEventConfiguration(),o=s(t.getParentPointer());v=t.getParentId();const n=t.getEventConfiguration();if("collection_view"===(null===(h=n.source)||void 0===h?void 0:h.type)){const e=s(n.source.pointer);(null==e?void 0:e.parent_table)===l().ev&&(y=null==e?void 0:e.parent_id),g=null==n?void 0:n.source.pointer.id}const r=null==o?void 0:o.getNormalizedSchema();if((0,i().O9)(r)){const{pagesAdded:t,pagePropertiesEdited:o}=e;if(t&&f.push({type:"page"}),"any"===o.type)f.push({condition:"any",type:"property"});else if("none"===o.type)f.push({condition:"none",type:"property"});else{let e=[];"some"===o.type?e=o.some??[]:"all"===o.type&&(e=o.all??[]);const t=[],n=[];e.forEach((e=>{var o;const a=null===(o=r[e.property])||void 0===o?void 0:o.type;(0,i().O9)(a)&&(t.push({type:a,operator:e.filter.operator}),n.push(a))})),f.push({condition:o.type,property_configs:t,property_types:n,type:"property"})}}}else if(t.isButtonType())f.push({type:"button"});else if(t.isRecurrenceType()){var x;f.push({type:"recurrence",frequency:null===(x=t.getTrigger().recurrence)||void 0===x?void 0:x.frequency})}else(0,i().HB)(t);return{automation_actions:p,automation_id:t.id,automation_triggers:f,collection_id:v,collection_view_id:g,collection_view_block_id:y,builder_type:o,source:d}}},921123:(e,t,o)=>{o.r(t),o.d(t,{archiveBoxFillIcon:()=>r,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.12 3.12 13.75 13.75",svg:(0,o(474848).jsx)("path",{d:"M3.125 4.25c0-.621.504-1.125 1.125-1.125h11.5c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125H4.25A1.125 1.125 0 0 1 3.125 5.75zm1 3.875h11.75v7.625c0 .621-.504 1.125-1.125 1.125h-9.5a1.125 1.125 0 0 1-1.125-1.125zM8 9.875a.625.625 0 1 0 0 1.25h4a.625.625 0 1 0 0-1.25z"})},r=(0,o(340498).wt)("archiveBoxFill",n,"fill")},922952:(e,t,o)=>{o.d(t,{u:()=>a});var n=()=>o(295633),r=()=>o(302996),i=()=>o(723085);function a(e){return e instanceof i().h||e instanceof r().SpaceStore||e instanceof n().B}},933117:(e,t,o)=>{o.d(t,{A:()=>f});o(944114),o(898992),o(803949),o(581454);var n=o(296540),r=()=>o(245720),i=()=>o(30537),a=()=>o(546926),s=()=>o(890492),l=()=>o(663639),c=()=>o(736847),u=()=>o(69708),d=()=>o(496603),p=()=>o(534177),m=o(474848);const f=function({renderOrigin:e,onClick:t,items:n,getKey:r,renderItem:i,selectedItem:s,onSelect:l,dontCloseParentOnSelect:c,menuTypeOverride:u,menuTitle:d,width:p,minWidth:f,disabled:v,originGap:h,buttonPopupStore:x,sameWidthAsOrigin:_}){const S=(0,o(590526).uB)(x,o(118307).A),b=u??(o(726637).A.isMobile?a().gu.Modal:a().gu.Popup);return(0,m.jsx)(o(250910).A,{popupType:y(b),bottomSheetInitialState:"half",renderOrigin:e,buttonPopupStore:S,placementToOrigin:"bottom",onClick:t,render:e=>(0,m.jsx)(g,{parent:e,items:n,getKey:r,renderItem:i,selectedItem:s,onSelect:l,dontCloseParentOnSelect:c,menuType:b,menuTitle:d,width:p,minWidth:f}),disabled:v,originGap:h,sameWidthAsOrigin:_})};function v(e,t,o,r,i,a,s,l){return{key:0,render:e=>(0,n.createElement)(c().A,{...e,key:t,topBorder:t>0}),items:e.map((e=>({key:r(e),render:t=>i({...t,value:e,key:r(e),selectedItem:a}),action:()=>{!function(e,t,o){t!==e&&o(e)}(e,a,s),l||o.close()}})))}}function g({parent:e,items:t,getKey:o,renderItem:n,selectedItem:i,onSelect:c,dontCloseParentOnSelect:f,menuType:g,menuTitle:y,width:h,minWidth:x}){const _=[];if(function(e){return e.length>0&&e[0]instanceof Array}(t))t.forEach(((t,r)=>{const a=v(t,r,e,o,n,i,c,f);_.push(a)}));else{const r=v(t,0,e,o,n,i,c,f);_.push(r)}const S=(0,m.jsx)(l().A,{type:l().O.Vertical,initialFocus:d().SL(d().Bq(t),(e=>d().n4(e,i))),sections:_});let b;switch(g){case a().gu.ActionSheet:b={menuType:a().gu.ActionSheet};break;case a().gu.Modal:b={menuType:a().gu.Modal,title:y,right:(0,m.jsx)(u().sA,{...r().W.done}),onClickRight:e.close};break;case a().gu.Popup:b={menuType:a().gu.Popup,width:h||160,minWidth:x};break;default:(0,p().HB)(g)}return(0,m.jsx)(s().A,{...b,children:S})}function y(e){switch(e){case a().gu.ActionSheet:return i().n.SlideUp;case a().gu.Modal:return i().n.BottomSheet;case a().gu.Popup:return i().n.Popup}}},935432:(e,t,o)=>{o.d(t,{A:()=>a});var n=()=>o(416845),r=()=>o(357264),i=()=>o(788579);function a(e,t){if((0,n().pA8)(t)){const o=(0,i().$)(t.clientData);if(o)return"messageValues"in t.clientData?e.formatMessage(o,t.clientData.messageValues):e.formatMessage(o)}return e.formatMessage(r().k.generic_error)}},962753:(e,t,o)=>{o.d(t,{EH:()=>h,FO:()=>g,P$:()=>y,VA:()=>f,h0:()=>u,lM:()=>d,mq:()=>v});o(898992),o(581454),o(737550);var n=()=>o(907258),r=()=>o(242422),i=()=>o(763765),a=()=>o(613848),s=()=>o(496603),l=()=>o(534177),c=()=>o(822789);function u(e){const{currentUserRootStore:t}=n().default.state;if(!t)return!1;const o=t.getSpaceViewStores();return(0,s().oE)(null==o?void 0:o.map((e=>e.getSpaceId()))).map((t=>a().A.getData(e,{spaceId:t,userId:e.currentUser.id}))).some((e=>p(e)))}function d(e,t){return p(a().A.getData(e,{spaceId:t,userId:e.currentUser.id}))}function p(e){switch(null==e?void 0:e.membershipType){case void 0:case"none":case"page_guest":return!1;case"restricted_member":case"member":case"membership_admin":case"owner":return!0===e.is_sales_assisted;default:(0,l().HB)(e)}}function m(e,t){if(!t)return"control";if(d(e,t))return"control";const o=r().default.getEligibleGroup({experimentId:"ai_product_retention_simplified_input",defaultGroup:"control"});return"input"===o||"input_and_ask_mode"===o?o:"control"}function f(){switch(r().default.getEligibleGroup({experimentId:"ai_product_retention_agent_follow_ups",defaultGroup:"control"})){case"button_nudge":return["button","nudge"];case"button_control":return["button","default"];case"nudge":return["nudge"];default:return}}function v(e,t){const o=r().default.checkGate({gateName:"agent_deep_find"}),n=void 0!==t&&d(e,t),a=e.currentUser.id,s=!t||!a||i().t.USEWITHCAUTION_isFetchedForSpaceAndUserId({spaceId:t,userId:a}),l=o||!n&&s&&"on"===r().default.getEligibleGroup({experimentId:"ai_product_retention_deepfind",defaultGroup:"control"}),c=y(e,t);return{agentDeepFindEnabled:l,useReadOnlyMode:l&&c}}function g(e,t){if(t?(0,c().vp)(t):(0,c().hw)())return!0;return"control"!==m(e,t)}function y(e,t){return"input_and_ask_mode"===m(e,t)}function h(){return"on"===r().default.getEligibleGroup({experimentId:"ai_product_retention_agent_speculative_search",defaultGroup:"control"})}},968228:(e,t,o)=>{o.r(t),o.d(t,{TOASTER_ZINDEX:()=>U,Toaster:()=>H});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577),o(581454),o(908872),o(737550);var n=o(296540),r=()=>o(484714),i=()=>o(590526),a=()=>o(401497),s=()=>o(396406),l=()=>o(411528),c=()=>o(79926),u=()=>o(591779),d=()=>o(599813),p=()=>o(69708),m=()=>o(100622),f=()=>o(676510),v=()=>o(699143),g=()=>o(718827),y=()=>o(680474),h=()=>o(807449),x=()=>o(695115),_=()=>o(265060),S=()=>o(98126),b=()=>o(493552),M=o(474848);function I(e,t){return e?t[e]:t.default}function w(e){const{type:t,actionProps:o,invalidated:n,variant:r}=e,i=(0,m().O4)({theme:"dark"}),s=(0,a().IS)((()=>({actionButton:{minHeight:28,padding:"4px 8px",gap:8,borderRadius:6,display:"flex"},primaryActionButton:{borderWidth:1,borderStyle:"solid",borderColor:I(r,{default:`1px solid ${f().$.dark.translucentGray[400]}`,error:m().Tj.red.border.strong})},actionButtonHovered:{background:I(r,{default:i.state.hover,error:m().Tj.outlinefrontSecondaryButtonHoveredBackground})},actionButtonPressed:{background:I(r,{default:i.state.pressed,error:m().Tj.outlinefrontSecondaryButtonPressedBackground})}})),[i,r]);return(0,M.jsxs)(g().Ay,{style:{...s.actionButton,..."primary"===t?s.primaryActionButton:{}},hoveredStyle:s.actionButtonHovered,pressedStyle:s.actionButtonPressed,disabled:o.disabled||n||o.isLoading,onClick:o.onAction,children:[o.isLoading?(0,M.jsx)(S().A,{style:{marginInlineEnd:4}}):null,(0,M.jsxs)(v().Y1,{direction:"horizontal",align:"center",children:[o.leadingIconProps?(0,M.jsx)(_().Q,{...o.leadingIconProps}):void 0,(0,M.jsx)(b().D,{styleKey:"captionMedium",colorPalette:"error"===r?"red":void 0,colorVariant:"primary"===t?"error"===r?"accentPrimary":"inversePrimary":"error"===r?"secondary":"inverseSecondary",children:o.title}),o.trailingIconProps?(0,M.jsx)(_().Q,{...o.trailingIconProps}):void 0]})]})}function k(e){const{actions:t,...o}=e,n=(0,a().IS)((()=>({footerContainer:{paddingInlineStart:8,paddingBottom:4}})),[]),{primary:r,secondary:i}=t;return(0,M.jsxs)(v().Y1,{direction:"horizontal",align:"center-right",style:n.footerContainer,gap:8,children:[i?(0,M.jsx)(w,{...o,type:"secondary",actionProps:i}):void 0,r?(0,M.jsx)(w,{...o,type:"primary",actionProps:r}):void 0]})}function C(e){const t=(0,p().tz)(),{updatedAt:o,onReplace:r,onMouseEnter:i,onMouseLeave:s,framerMotion:l,variant:c="default"}=e,{motion:v}=l,g=(0,y().sM)(l),_=(0,u().ZC)(o),S=(0,m().O4)({theme:"dark"}),w=(0,a().IS)((()=>({toastContainer:{display:"flex",alignItems:"flex-start",borderRadius:8,borderWidth:1,borderStyle:"solid",borderColor:I(c,{default:S.border.secondary,error:m().Tj.red.border.primary}),outline:"none",background:I(c,{default:S.background.elevated,error:m().Tj.red.background.secondary}),backdropFilter:"blur(15px)",width:280,paddingTop:8,paddingInlineEnd:8,paddingBottom:4,paddingInlineStart:8,pointerEvents:"auto",minHeight:40},toastContentContainer:{display:"flex",flexDirection:"column",flexGrow:1,alignItems:"flex-start"},toastContent:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:4,paddingTop:4,paddingInlineEnd:28,paddingBottom:8,paddingInlineStart:4,width:"100%"},iconContainer:{width:26,height:24,display:"flex",paddingTop:2,paddingInlineEnd:4,paddingBottom:2,paddingInlineStart:2,flexDirection:"column",justifyContent:"center",alignItems:"center",flexShrink:0},title:{color:I(c,{default:m().Tj.text.inversePrimary,error:m().Tj.red.text.accentPrimary}),fontFeatureSettings:"'case' on",overflowWrap:"break-word"},toastMessage:{color:I(c,{default:S.text.primary,error:m().Tj.red.text.accentPrimary}),fontFeatureSettings:"'case' on",overflowWrap:"break-word",width:"100%"},closeButton:{width:24,height:24,position:"absolute",insetInlineEnd:8,top:8,gap:8,borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center",zIndex:1},closeIcon:{paddingBottom:.5,fill:I(c,{default:f().$.dark.translucentGray[800],error:m().Tj.red.icon.accentPrimary})},closeIconHovered:{background:I(c,{default:S.state.hover,error:m().Tj.outlinefrontSecondaryButtonHoveredBackground})},closeIconPressed:{background:I(c,{default:S.state.pressed,error:m().Tj.outlinefrontSecondaryButtonPressedBackground})}})),[S,c]);(0,n.useEffect)((()=>{(async()=>{o&&(!_||o>_)&&(r(),e.disableBounceAnimation||await g.start({scale:[1,1.05,1],transition:{duration:.15,ease:"easeIn"}}))})()}),[o,_,r,g,e.disableBounceAnimation]);const C=e.jsxMessage??e.message,T="error"===c?{colorPalette:"red",colorVariant:"accentPrimary"}:{colorPalette:"gray",colorVariant:"inverseSecondary"};return(0,M.jsxs)(v.div,{onHoverStart:i,onHoverEnd:s,animate:g,style:w.toastContainer,custom:e.id,children:["blocking"!==e.presentationType?(0,M.jsx)(x().A,{ariaLabel:t.formatMessage({id:"toast.close",defaultMessage:"Close"}),icon:()=>(0,M.jsx)(h().I,{icon:d().xMarkIcon,size:"xs",style:w.closeIcon}),style:w.closeButton,hoveredStyle:w.closeIconHovered,pressedStyle:w.closeIconPressed,onClick:e.onClose}):void 0,e.icon?(0,M.jsx)("div",{style:w.iconContainer,children:(0,M.jsx)(h().I,{icon:e.icon,colorPalette:e.iconColorPalette??T.colorPalette,colorVariant:e.iconColorVariant??T.colorVariant,size:"sm"})}):void 0,(0,M.jsxs)("div",{style:w.toastContentContainer,children:[(0,M.jsxs)("div",{style:w.toastContent,children:[e.title?(0,M.jsx)(b().D,{styleKey:"captionSemibold",style:w.title,children:e.title}):void 0,C?(0,M.jsx)(b().D,{styleKey:"captionRegular",style:w.toastMessage,children:C}):void 0]}),e.actions?(0,M.jsx)(k,{actions:e.actions,invalidated:e.invalidated,variant:e.variant}):void 0]})]})}function T(e){const{value:t}=(0,c().fJ)(y().fM);return t?(0,M.jsx)(C,{...e,framerMotion:t}):null}var A=()=>o(496603),j=()=>o(812182),E=()=>o(115512),R=()=>o(38554),D=()=>o(301794),B=()=>o(644914),O=()=>o(399561),P=()=>o(300789),z=()=>o(51367),V=()=>o(131448),F=()=>o(782215);const U=201,N=12;function L(e,t){const{title:o,subtitle:n,callToAction:r,action:i,presentationType:a}=e.props;let s;return r&&i&&(s={primary:{title:r,onAction:()=>{z().Y5(t,{callout_key:e.key,placement_key:"Toast",click_type:"primary_cta"}),(0,F().Wq)({action:i,environment:t,metadata:e.props.metadata}),P().OX(t,e)}}}),{id:e.id,createdAt:Date.now(),presentationType:a??"transient",title:o,message:n,actions:s,messageKey:e.key,onDismiss:()=>{z().Sq(t,{callout_key:e.key,placement_key:"Toast",dismiss_type:"toast_dismiss"}),P().OX(t,e)},onUserDismiss:()=>{z().Sq(t,{callout_key:e.key,placement_key:"Toast",dismiss_type:"toast_dismiss"}),P().OX(t,e)}}}function H(){var e;const t=(0,r().v3)(),[o,a]=(0,n.useState)({}),[l,c]=(0,n.useReducer)((e=>e+1),0),u=(0,n.useRef)({}),d=(0,n.useRef)(),p=(0,n.useRef)({}),m=(0,n.useRef)(new Set),f=(0,i().K8)((()=>O().A.state.toasts),[]),v=(0,i().K8)((()=>V().default.getMessagesForPlacement("Toast")),[]),[g]=(0,i().K8)((()=>[t.WindowSizeStore.getSafePaddingBottomPx(N)]),[t.WindowSizeStore]),y=(0,n.useCallback)((()=>{let e;const t=Object.keys(o).filter((t=>{var n,r;return t===(null===(n=d.current)||void 0===n?void 0:n.toast.id)&&(e=o[t]),t!==(null===(r=d.current)||void 0===r?void 0:r.toast.id)})).map((e=>o[e])).sort(((e,t)=>{var o,n;return(null===(o=t.createdAt)||void 0===o?void 0:o.valueOf())-(null===(n=e.createdAt)||void 0===n?void 0:n.valueOf())}));if(e&&d.current&&void 0!==d.current.index){const{index:o}=d.current;t.splice(o,0,e),d.current.index=t.indexOf(e)}return t}),[o]),h=(0,n.useCallback)((e=>{clearTimeout(u.current[e]),delete u.current[e]}),[]),x=(0,n.useCallback)(((e,t)=>{var o,n;e.id===(null===(o=d.current)||void 0===o?void 0:o.toast.id)&&(d.current=void 0),h(e.id),null!==(n=p.current)&&void 0!==n&&n[e.id]&&(p.current[e.id].active=!1,t&&(p.current[e.id].suppressOnDismiss=t)),c()}),[h]),_=(0,n.useCallback)((e=>{var t,o;"transient"===e.presentationType&&!u.current[e.id]&&e.id!==(null===(t=d.current)||void 0===t?void 0:t.toast.id)&&null!==(o=p.current)&&void 0!==o&&null!==(o=o[e.id])&&void 0!==o&&o.active&&(h(e.id),u.current[e.id]=window.setTimeout((()=>x(e)),5e3))}),[h,x]),S=(0,n.useCallback)((()=>{requestAnimationFrame((()=>{const e=y();let t=0;for(const[n,r]of e.entries()){var o;const e=document.querySelector(`[data-toast-id='${r.id}']`);if(!e||r.id===(null===(o=d.current)||void 0===o?void 0:o.toast.id))continue;const i=e.getBoundingClientRect();if(!i.height)return void S();if(p.current[r.id]||(p.current[r.id]={toast:r,active:!0}),p.current[r.id].index=n,p.current[r.id].height=i.height,d.current){const e=d.current;t<e.yPos-e.height||t-i.height>e.yPos||(t=e.yPos+e.height+g)}p.current[r.id].yPos=t,t=t+i.height+g,t>window.innerHeight&&(p.current[r.id].active=!1),_(r)}c()}))}),[y,_,g]);(0,n.useEffect)((()=>{a((e=>{const o={...e,...f};for(const n of v)if((0,F().lN)(n)){const e=L(n,t);o[e.id]=e}for(const t of Object.values(o))if(p.current[t.id]&&!f[t.id]){v.some((e=>e.id===t.id))||(p.current[t.id].active=!1)}return o}))}),[f,v,t]),(0,n.useLayoutEffect)(S,[o,S]),(0,n.useEffect)((()=>(window.addEventListener("resize",S),()=>window.removeEventListener("resize",S))),[S]);const b=(0,n.useCallback)((e=>{var t;null!==(t=p.current)&&void 0!==t&&t[e.id]&&(p.current[e.id].userDismissed=!0),x(e)}),[x]),I=(0,n.useCallback)(((e,t)=>{var o,n,r;h(e.id),null===(o=p.current)||void 0===o||!o[e.id]||null!==(n=p.current)&&void 0!==n&&null!==(n=n[e.id])&&void 0!==n&&n.actionTriggered||null!==(r=p.current)&&void 0!==r&&null!==(r=r[e.id])&&void 0!==r&&r.userDismissed||(p.current[e.id].active=!0,d.current={...p.current[e.id]},S())}),[S,h]),w=(0,n.useCallback)((e=>{var t;e.id===(null===(t=d.current)||void 0===t?void 0:t.toast.id)?(d.current=void 0,S()):_(e)}),[S,_]),k=(0,n.useCallback)((e=>{h(e.id),_(e)}),[h,_]),C=(0,n.useCallback)((e=>{var n;const r=e.target,i=null==r?void 0:r.getAttribute("data-toast-id");if(r&&"opacity"===e.propertyName&&i&&null!==(n=p.current)&&void 0!==n&&n[i]){var s;const e=p.current[i];if(e.active)return;i===(null===(s=d.current)||void 0===s?void 0:s.toast.id)&&(d.current=void 0);const n=o[i];if(O().A.state.toasts[n.id])j().UW(n.id,e.suppressOnDismiss,e.userDismissed);else{n.onUserDismiss&&e.userDismissed&&n.onUserDismiss();const o=v.find((e=>e.id===n.id));o&&P().OX(t,o)}delete p.current[i],null!=n&&n.id&&m.current.delete(n.id),a((e=>A().cJ({...e},[i])))}}),[o,v,t]),R=(0,n.useMemo)((()=>Object.values(o).reduce(((e,t)=>!e||(t.createdAt??0)>(e.createdAt??0)?t:e),void 0)),[o]);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("div",{role:"status","aria-live":"polite",style:E().Qg,children:R&&null!==(e=p.current)&&void 0!==e&&null!==(e=e[R.id])&&void 0!==e&&e.active?(0,M.jsxs)(M.Fragment,{children:[R.title,R.title&&R.message?" ":void 0,R.message]}):void 0}),(0,M.jsx)(G,{children:(0,M.jsx)(s().O,{open:y().length>0,children:y().map(((e,o)=>{var n;const r=null===(n=p.current)||void 0===n?void 0:n[e.id],i=void 0!==(null==r?void 0:r.yPos)&&(null==r?void 0:r.active),a=null!=r&&r.active?0:100;if(i&&r&&e.messageKey&&!m.current.has(e.id)&&!r.userDismissed&&!r.actionTriggered){const o=e.messageKey;z().DL(t,{callout_key:o,placement_key:"Toast"}),m.current.add(e.id)}return(0,M.jsx)(W,{"data-toast-id":e.id,onTransitionEnd:C,yPos:void 0!==(null==r?void 0:r.yPos)?-r.yPos:a,visible:i,children:(0,M.jsx)(T,{...e,onMouseEnter:()=>I(e,o),onMouseLeave:()=>w(e),onReplace:()=>k(e),onClose:()=>b(e),actions:e.actions})},e.id)}))})})]})}function W(e){const{yPos:t,visible:o,children:n,...s}=e,l=(0,r().v3)(),c=(0,R().U)(),[u,d,p,m]=(0,i().K8)((()=>[l.WindowSizeStore.getSafePaddingLeftCSS(N),l.WindowSizeStore.getSafePaddingRightCSS(N),l.WindowSizeStore.getSafePaddingBottomCSS(N),(0,B().kf)(l)]),[l]),f=(0,i().K8)((()=>Boolean(D().U.getState())),[]),v=(0,a().IS)((()=>({toastContainer:{insetInlineStart:c?void 0:m,insetInlineEnd:c?0:void 0,transform:`translateY(${t??0}px) scale(${o?1:.96})`,transitionDuration:"0.3s",opacity:o?1:0,position:"fixed",bottom:0,transitionProperty:"opacity, transform",marginInlineStart:c?void 0:u,marginInlineEnd:c?d:void 0,marginBottom:p,...f?{transform:`scale(${o?1:.96})`,position:void 0,marginInline:u,marginBottom:p}:{}}})),[m,u,d,p,t,o,f,c]);return(0,M.jsx)("div",{style:v.toastContainer,...s,children:n})}function G(e){const{children:t}=e,o=(0,i().O$)(D().U);return o?(0,M.jsx)(l().A.Provider,{value:o,children:t}):(0,M.jsx)(M.Fragment,{children:t})}}}]);