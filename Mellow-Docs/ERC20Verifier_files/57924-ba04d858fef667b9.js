"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[57924,97651],{346:(e,t,n)=>{n.d(t,{MG:()=>f,T1:()=>m,a1:()=>y,dt:()=>g,kg:()=>b,lC:()=>v,n_:()=>h});var o=n(296540),i=()=>n(484714),r=()=>n(590526),a=()=>n(79926),s=()=>n(187174),l=()=>n(941463),c=()=>n(441199),d=()=>n(749687),u=()=>n(737230),p=()=>n(756114);const m=new(a().O2)("PerformanceToolbar",(()=>Promise.all([n.e(23640),n.e(45624)]).then(n.bind(n,688201)))),f=(0,a()._h)(m,(e=>e.PerformanceToolbar)),g=(0,a()._h)(m,(e=>e.PerformanceToolbarSettings));function b(){const e=(0,i().v3)();return(0,r().K8)((()=>(0,p().D)(e,e.RouterStore.state)),[e])}function h(){const e=(0,i().v3)(),t=w("performanceToolbarStore"),n=w("isPerformanceToolbarVisible");return(0,r().K8)((()=>!(!t||!n)&&n(e,e.RouterStore.state,t.state)),[n,e,t])}function v(){const e=w("performanceToolbarStore");return(0,r().K8)((()=>!!e&&e.state.isPerformanceToolbarMounted),[e])}function y(){const e=(0,i().v3)(),t=w("createPerformanceToolbarMouseListeners"),n=w("performanceToolbarStore"),{sidebarExpanded:a,sidebarWidth:s,secondarySidebarExpanded:p,secondarySidebarWidth:m,updateSidebarExpanded:f,updateSidebarWidth:g}=(0,r().K8)((()=>({sidebarExpanded:d().sidebarExpandedStore.state,sidebarWidth:d().sidebarWidthStore.state,secondarySidebarExpanded:c().default.isOpen(),secondarySidebarWidth:l().Ay.getWidth(),updateSidebarExpanded:u().Ay.state.expanded,updateSidebarWidth:u().Ay.state.width})),[]);return(0,o.useEffect)((()=>{if(n&&t)return t(e,(e=>n.update((t=>({...t,isMouseNearPerformanceToolbar:e})))),a,s,p,m,f,g)}),[t,e,n,a,s,p,m,f,g])}function w(e){const t=b(),[{value:n}]=(0,s().Yb)((()=>t?m.load().then((t=>t[e])):Promise.resolve(void 0)),[e,t]);return n}},38554:(e,t,n)=>{n.d(t,{U:()=>a});var o=()=>n(590526),i=()=>n(822789),r=()=>n(229508);function a(){const e=(0,r().a)();return(0,o().K8)((()=>(0,i().XM)(e)),[e])}},53528:(e,t,n)=>{n.d(t,{OH:()=>s,T2:()=>l,do:()=>c});var o=()=>n(597777),i=()=>n(869190),r=()=>n(604995),a=()=>n(416504);function s(e){const{dateTime:t,intl:n,shortenDateAndRange:o}=e,a=r().C6.toPersistedDate(t.valueOf());return i().ZF({value:a,allowRelativeDates:!0,intl:n,shortenDateAndRange:o,displayInUserTimezone:!0})}function l(e){const{dateTime:t,intl:n,userTimeZone:o,displayInUserTimezone:a,alwaysIncludeTimezone:s}=e,l=r().C6.toPersistedDateTime(t.valueOf(),t.zoneName);return i().ZF({value:l,allowRelativeDates:!0,intl:n,userTimeZone:o,displayInUserTimezone:a,alwaysIncludeTimezone:s})}function c(e){const{luxonRange:t,intl:n}=e,s=r().C6.toPersistedDateRange(t),l=i().ZF({value:s,allowRelativeDates:!1,shortenDateAndRange:!0,intl:n,displayInUserTimezone:!0}),c=t.end.setZone((0,a().P)()),d=i().fU({start_time:c.toFormat(o().GE),humanReadable:!1,intl:n});return n.formatMessage({id:"verification.timeRange",defaultMessage:"{formattedDateRange} at {formattedEndTime}"},{formattedDateRange:l,formattedEndTime:d})}},70899:(e,t,n)=>{n.d(t,{U:()=>i});n(296540);const o={viewBox:"0 0 16 16",fittedViewBox:"1.87 1.87 12.25 12.26",svg:(0,n(474848).jsx)("path",{d:"M11.904 3.28a6.125 6.125 0 1 0-1.648 10.415.625.625 0 1 0-.46-1.163 4.875 4.875 0 1 1 2.808-2.93c-.102.294-.43.523-.878.523a.87.87 0 0 1-.872-.872V5.705a.625.625 0 0 0-1.242-.098 3.04 3.04 0 0 0-1.746-.527c-.792 0-1.542.277-2.095.825-.557.55-.871 1.332-.871 2.256s.313 1.714.864 2.276 1.3.858 2.102.858c.8 0 1.55-.294 2.104-.85a2.12 2.12 0 0 0 1.756.93c.835 0 1.738-.441 2.058-1.361a6.125 6.125 0 0 0-1.88-6.734M6.65 6.793c.294-.29.715-.463 1.216-.463.5 0 .929.173 1.228.466.296.289.508.735.508 1.365 0 .631-.213 1.095-.515 1.4-.303.306-.73.484-1.221.484-.49 0-.91-.178-1.209-.482-.296-.303-.507-.767-.507-1.402 0-.633.21-1.08.5-1.368"})},i=(0,n(340498).wt)("atSmall",o,"small")},72307:(e,t,n)=>{n.d(t,{A:()=>o});const o={appCursorListener:{sidebar:1,secondarySidebar:2,editor:3,aiChat:3,marketplace:3,teamHome:3,aiChatSidebar:4}}},75600:(e,t,n)=>{n.d(t,{O:()=>r,t:()=>i});var o=()=>n(79926);const i=(0,o()._h)(new(o().O2)("PeekRenderer",(async()=>{const{default:e}=await Promise.all([n.e(75134),n.e(35530),n.e(9773),n.e(55373),n.e(36192),n.e(71562),n.e(96346),n.e(44711),n.e(53321),n.e(51220),n.e(16471),n.e(37353),n.e(37571),n.e(29151),n.e(40118),n.e(50397),n.e(62475),n.e(3151),n.e(98629),n.e(27992),n.e(63452),n.e(66249),n.e(92845),n.e(87249),n.e(79022),n.e(44854),n.e(87017),n.e(34877),n.e(46414),n.e(11676),n.e(61165),n.e(47668),n.e(94522),n.e(44584),n.e(24587),n.e(67494),n.e(3651),n.e(38293),n.e(40992),n.e(88455),n.e(64556),n.e(33893),n.e(91793),n.e(55162),n.e(71003),n.e(32370),n.e(26264),n.e(36437),n.e(50363),n.e(42660),n.e(44590),n.e(55113),n.e(85071),n.e(7914),n.e(25588),n.e(68637),n.e(23640),n.e(72252),n.e(93134),n.e(12452),n.e(52871),n.e(29351),n.e(18825),n.e(71853),n.e(93049),n.e(22582),n.e(18636),n.e(87289),n.e(16060),n.e(34281),n.e(48376),n.e(35279),n.e(80229),n.e(77754),n.e(71309),n.e(74562),n.e(39986),n.e(47160),n.e(76677),n.e(68609),n.e(15553),n.e(77345),n.e(67720),n.e(37759),n.e(41423),n.e(14699),n.e(21627),n.e(57924),n.e(77777),n.e(17729),n.e(23493),n.e(51240),n.e(20029),n.e(95885),n.e(39438),n.e(54719),n.e(25523),n.e(26962),n.e(43151)]).then(n.bind(n,172342));return{PeekRenderer:e}})),(e=>e.PeekRenderer)),r=(0,o()._h)(new(o().O2)("RestrictedAccess",(async()=>{const{RestrictedAccessComponent:e}=await Promise.all([n.e(22114),n.e(57314)]).then(n.bind(n,260775));return{RestrictedAccessComponent:e}})),(e=>e.RestrictedAccessComponent))},77279:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});class o extends(()=>n(757695))().Store{getInitialState(){return{discussionIdToExpansionStartPointMap:{}}}}const i=new o},89956:(e,t,n)=>{n.d(t,{p:()=>i});n(296540);const o={viewBox:"0 0 16 16",fittedViewBox:"2.46 2.46 11.08 11.08",svg:(0,n(474848).jsx)("path",{d:"M3.088 2.463a.625.625 0 0 0-.625.625v4a.625.625 0 1 0 1.25 0V4.597l3.045 3.045a.625.625 0 0 0 .884-.884L4.597 3.713h2.49a.625.625 0 1 0 0-1.25zM9.244 8.36a.625.625 0 0 0-.883.884l3.042 3.043H8.912a.625.625 0 1 0 0 1.25h4c.345 0 .625-.28.625-.625v-4a.625.625 0 0 0-1.25 0v2.491z"})},i=(0,n(340498).wt)("arrowExpandDiagonalSmall",o,"small")},97059:(e,t,n)=>{n.d(t,{s:()=>i});n(296540);const o={viewBox:"0 0 16 16",fittedViewBox:"1.82 1.82 12.68 12.68",svg:(0,n(474848).jsx)("path",{d:"M8 1.825a.575.575 0 0 0-.575.575V4a.575.575 0 0 0 1.15 0V2.4A.575.575 0 0 0 8 1.825m4.367 1.809a.575.575 0 0 0-.814 0l-1.131 1.131a.575.575 0 1 0 .813.813l1.132-1.131a.575.575 0 0 0 0-.813m-7.92 0a.575.575 0 0 0-.813.813l1.13 1.131a.575.575 0 1 0 .814-.813zm3.248 3.071a.7.7 0 1 0-.99.99l.77.77.99-.99zm4.305.72a.575.575 0 0 0 0 1.15h1.6a.575.575 0 1 0 0-1.15zm-9.6 0a.575.575 0 1 0 0 1.15H4a.575.575 0 0 0 0-1.15zm11.895 5.88-5.37-5.37-.99.99 5.37 5.37a.7.7 0 0 0 .99-.99m-8.717-2.883a.575.575 0 0 0-.813 0l-1.131 1.131a.575.575 0 1 0 .813.813l1.131-1.131a.575.575 0 0 0 0-.813M8 11.425a.575.575 0 0 0-.575.575v1.6a.575.575 0 1 0 1.15 0V12A.575.575 0 0 0 8 11.425"})},i=(0,n(340498).wt)("magicWandSmall",o,"small")},106702:(e,t,n)=>{n.d(t,{$:()=>r});var o=()=>n(590526);const i=new(n(140934).ComputedStore)((()=>n(907258).default.state.currentUserStore),{debugName:"AppStoreCurrentUserStore"});function r(){return(0,o().O$)(i)}},129852:(e,t,n)=>{n.r(t),n.d(t,{exclamationMarkCircleIcon:()=>r,iconDefinition:()=>i});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.26 15.25",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M9.875 6.25c.345 0 .625.28.625.625v3.5a.625.625 0 1 1-1.25 0v-3.5c0-.345.28-.625.625-.625m0 7.375a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5"}),(0,o.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},r=(0,n(340498).wt)("exclamationMarkCircle",i,"default")},175882:(e,t,n)=>{n.r(t),n.d(t,{exclamationMarkTriangleSmallIcon:()=>r,iconDefinition:()=>i});n(296540);var o=n(474848);const i={viewBox:"0 0 16 16",fittedViewBox:"1.49 1.87 13.01 11.75",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M7.9 5.281a.625.625 0 0 0-.625.625v2.5a.625.625 0 0 0 1.25 0v-2.5a.625.625 0 0 0-.625-.625m0 4.7a.725.725 0 1 0 0 1.45.725.725 0 0 0 0-1.45"}),(0,o.jsx)("path",{d:"M9.58 2.788c-.702-1.217-2.458-1.217-3.16 0l-4.677 8.1c-.702 1.216.176 2.737 1.58 2.737h9.354c1.405 0 2.283-1.52 1.58-2.738zm-2.078.625a.575.575 0 0 1 .996 0l4.677 8.1a.575.575 0 0 1-.498.862H3.324a.575.575 0 0 1-.498-.863z"})]})},r=(0,n(340498).wt)("exclamationMarkTriangleSmall",i,"small")},200562:(e,t,n)=>{n.d(t,{z:()=>r});var o=()=>n(79926);const i=new(o().O2)("topbarSidebarButton",(async()=>await n.e(62033).then(n.bind(n,81292)))),r=(0,o()._h)(i,(e=>e.TopbarSidebarButton))},208993:(e,t,n)=>{n.d(t,{W:()=>u});n(296540);var o=()=>n(401497),i=()=>n(699143),r=()=>n(718827),a=()=>n(265060),s=()=>n(493552),l=()=>n(26697),c=()=>n(846523),d=n(474848);function u({tooltipTitle:e,tooltipDescription:t,buttonProps:n,iconSize:o="small",iconColorVariant:r="tertiary",tooltipWidth:u,forceVisibleState:m=!1}){return(0,d.jsx)(l().m,{placement:"top",forceVisibleState:m,style:u?{width:u}:void 0,renderTooltip:()=>(0,d.jsxs)(i().Y1,{gap:2,direction:"vertical",children:[(0,d.jsx)(s().D,{styleKey:"captionMedium",colorVariant:"inversePrimary",children:e}),t?(0,d.jsx)(s().D,{styleKey:"captionRegular",colorVariant:"inverseSecondary",children:t}):null]}),render:e=>(0,d.jsx)(p,{buttonProps:n,...e,children:(0,d.jsx)(a().Q,{iconGroup:c().u,colorVariant:r,variantName:o})}),textWrap:Boolean(u)})}function p({children:e,buttonProps:t,...n}){const i=(0,o().IS)((()=>({button:{borderRadius:2}})),[]);return t?(0,d.jsx)(r().Ay,{style:i.button,...t,...n,children:e}):(0,d.jsx)("span",{...n,children:e})}},212473:(e,t,n)=>{n.r(t),n.d(t,{arrowUpRightSquareIcon:()=>r,iconDefinition:()=>i});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"3.12 3.12 13.75 13.75",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M7.875 7c0-.345.28-.625.625-.625H13c.345 0 .625.28.625.625v4.5a.625.625 0 1 1-1.25 0V8.509l-5.12 5.12a.625.625 0 1 1-.884-.883l5.12-5.121H8.5A.625.625 0 0 1 7.875 7"}),(0,o.jsx)("path",{d:"M3.125 5.25c0-1.174.951-2.125 2.125-2.125h9.5c1.174 0 2.125.951 2.125 2.125v9.5a2.125 2.125 0 0 1-2.125 2.125h-9.5a2.125 2.125 0 0 1-2.125-2.125zm2.125-.875a.875.875 0 0 0-.875.875v9.5c0 .483.392.875.875.875h9.5a.875.875 0 0 0 .875-.875v-9.5a.875.875 0 0 0-.875-.875z"})]})},r=(0,n(340498).wt)("arrowUpRightSquare",i,"default")},224011:(e,t,n)=>{n.d(t,{A:()=>r});var o=()=>n(20022);class i extends(()=>n(757695))().Store{getInitialState(){return{isFullScreen:window.outerWidth===window.screen.width&&window.outerHeight===window.screen.height}}constructor(){super(),this.updateFromElectronState=async()=>{const e=await o().Y5.get();void 0!==e&&this.setState({isFullScreen:e})},o().Y5.addListener(this.updateFromElectronState),this.updateFromElectronState()}}const r=new i},224682:(e,t,n)=>{n.d(t,{m:()=>i});class o extends(()=>n(757695))().Store{getInitialState(){return{type:"uninitialized"}}isWriting(){return"filling"===this.state.type&&!this.state.haveAllBlocksCompletedAutofill&&!this.state.didInterruptStreaming}setIsWriting(e){const{propertySchema:t,stores:o,sessionIdForAnalytics:i,collectionId:r}=e,a=i||n(206267).JW();return this.setState({type:"filling",propertySchema:t,collectionId:r,numBlocksToAutofill:o.length,numBlocksAutofilled:0,sessionId:a,didInterruptStreaming:!1,haveAllBlocksCompletedAutofill:!1}),a}}const i=new o},229508:(e,t,n)=>{n.d(t,{a:()=>r});var o=()=>n(907258),i=()=>n(590526);function r(){return(0,i().O$)(o().AppStoreSidebarSpaceViewStore)}},262661:(e,t,n)=>{n.d(t,{i:()=>i});var o=()=>n(130382);function i(e){const t=e.getSettings(),n=null==t?void 0:t.signup_time;return n?(0,o().Mn)(n):null}},266685:(e,t,n)=>{n.d(t,{a:()=>l});n(296540);var o=()=>n(819121),i=()=>n(401497),r=()=>n(451306),a=()=>n(100622),s=n(474848);function l(e){const{disabled:t,checked:n,selectorSize:l}=e,[c,d]=(0,o().A)(),u=function(e){const{checked:t,disabled:n,isFocusVisible:o,selectorSize:r}=e;return(0,i().IS)((()=>({root:{position:"absolute",display:"flex",width:15,height:15,padding:5,margin:1.5,justifyContent:"center",alignItems:"center",gap:8,flexShrink:0,borderRadius:"50%",transition:"background 100ms ease-out",...t?{boxShadow:`0 0 0 1.5px ${n?a().Tj.background.tertiaryTranslucent:a().Tj.blue.background.accentPrimary}`,background:n?a().Tj.background.tertiaryTranslucent:a().Tj.blue.background.accentPrimary}:{boxShadow:`0 0 0 1.5px ${n?a().Tj.background.tertiaryTranslucent:a().Tj.border.strongTranslucent}`,background:a().Tj.background.primary},...o&&{boxShadow:a().Tj.buttonBlueFocusRing}},active:{background:t?a().Tj.blueButtonPressedBackground:a().Tj.buttonHoveredBackground},input:{opacity:0,width:"small"===r?14:18,height:"small"===r?14:18,...n?{pointerEvents:"none"}:{cursor:"pointer"}}})),[t,n,o,r])}({checked:n,disabled:t,isFocusVisible:d,selectorSize:l});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{ref:c,type:"radio",style:u.input,className:"radio-button",...e}),(0,s.jsx)("span",{...(0,r().ow)("custom-radio-button",u.root,t?{}:{pseudoActive:u.active})})]})}},269345:(e,t,n)=>{n.d(t,{_:()=>_});n(296540);var o=()=>n(484714),i=()=>n(590526),r=()=>n(401497),a=()=>n(75435),s=()=>n(127833),l=()=>n(30537),c=()=>n(695115),d=()=>n(26697),u=()=>n(526278),p=()=>n(940563),m=()=>n(617668),f=()=>n(69708),g=()=>n(899963),b=()=>n(109488),h=()=>n(44551),v=()=>n(116749);var y=()=>n(896922),w=()=>n(564704),x=()=>n(800140),S=()=>n(917908),k=()=>n(551253),I=()=>n(712505),A=()=>n(35392),j=n(474848);const T=(0,f().YK)({newTabButton:{id:"desktopTopbarBrowserHistoryButton.newTabButton.label",defaultMessage:"New tab"},goBackButton:{id:"desktopTopbarBrowserHistoryButtons.goBackButton.label",defaultMessage:"Go back"},goForwardButton:{id:"desktopTopbarBrowserHistoryButton.goForwardButton.label",defaultMessage:"Go forward"}});function M(){const e=(0,f().tz)(),t=(0,i().K8)((()=>a().A.state.isTabPositionSupported),[]);return(0,j.jsx)(d().m,{renderTooltip:()=>(0,j.jsxs)("div",{style:{display:"flex"},children:[e.formatMessage(T.newTabButton),(0,j.jsx)(A().A,{name:"newTab",style:{opacity:.5,marginInlineStart:4}})]}),placement:"bottom",alignment:"center",originGap:6,render:n=>(0,j.jsx)(c().A,{ariaLabel:e.formatMessage(T.newTabButton),icon:{icon:m().plusIcon,size:"lg"},colorVariant:"primary",className:"notion-new-tab-button",style:{position:"relative"},onClick:()=>function(e){h().electronApi&&null!==h().electronApi&&void 0!==h().electronApi&&h().electronApi.newTab?h().electronApi.newTab():(0,v().V)({url:"",makeTabActive:!0,position:e?"end":"start"})}(t),...n})})}function C({isNavigationHistorySupported:e}){const t=(0,f().tz)(),n=(0,o().v3)(),r=(0,i().K8)((()=>!S().H.canGoBack()),[]);return(0,j.jsx)(d().m,{renderTooltip:()=>(0,j.jsxs)("div",{style:{display:"flex"},children:[t.formatMessage(T.goBackButton),(0,j.jsx)(A().A,{name:"goBack",style:{opacity:.5,marginInlineStart:4}})]}),placement:"bottom",alignment:"center",originGap:6,render:o=>(0,j.jsx)(c().A,{ariaLabel:t.formatMessage(T.goBackButton),icon:{icon:u().arrowStraightLeftIcon,size:"lg"},colorVariant:"primary",className:"notion-history-back-button",disabled:r,style:{position:"relative",width:24,height:24},onClick:t=>function(e,t,n){g().Lt(t,{type:"back"});const o=e.metaKey||e.ctrlKey;n&&o?(0,w().Y)(t,"back"):(0,y().a)(t)}(t,n,e),onContextMenu:()=>{!r&&e&&k().I.setState({direction:"back",open:!0})},...o})})}function P({isNavigationHistorySupported:e}){const t=(0,f().tz)(),n=(0,o().v3)(),r=(0,i().K8)((()=>!S().H.canGoForward()),[]);return(0,j.jsx)(d().m,{renderTooltip:()=>(0,j.jsxs)("div",{style:{display:"flex"},children:[t.formatMessage(T.goForwardButton),(0,j.jsx)(A().A,{name:"goForward",style:{opacity:.5,marginInlineStart:4}})]}),placement:"bottom",alignment:"center",originGap:6,render:o=>(0,j.jsx)(c().A,{ariaLabel:t.formatMessage(T.goForwardButton),icon:{icon:p().arrowStraightRightIcon,size:"lg"},colorVariant:"primary",className:"notion-history-forward-button",disabled:r,style:{position:"relative",width:24,height:24},onClick:t=>function(e,t,n){g().Lt(t,{type:"forward"});const o=e.metaKey||e.ctrlKey;n&&o?(0,w().Y)(t,"forward"):(0,x().s)(t)}(t,n,e),onContextMenu:()=>{!r&&e&&k().I.setState({direction:"forward",open:!0})},...o})})}function B(e){const{topbarFeatureController:t}=e,n=(0,i().K8)((()=>{var e;return(null===(e=a().A.state.preferences)||void 0===e?void 0:e.isNavigationHistoryEnabled)&&a().A.state.isNavigationHistorySupported}),[]),o=(0,r().IS)((()=>({container:{position:"relative",display:"flex",flexShrink:0,gap:4}})),[]);return(0,j.jsx)(b().A,{capture:!0,render:e=>(0,j.jsxs)("div",{style:o.container,...e,children:[(0,j.jsx)(C,{isNavigationHistorySupported:n}),(0,j.jsx)(P,{isNavigationHistorySupported:n}),t.showNewTabButton?(0,j.jsx)(M,{}):null]})})}function _(e){const{topbarFeatureController:t}=e,{isElectron:n}=(0,o().Y0)(),r=(0,i().O$)(a().b),c=(0,i().K8)((()=>I().default.isCenterPeekOpen()),[]);return!n||r?null:(0,j.jsx)(s().zD,{trapFocus:!1,style:{background:"transparent",borderRadius:0,boxShadow:"none"},origin:(0,j.jsx)(B,{topbarFeatureController:t}),render:()=>(0,j.jsx)(B,{topbarFeatureController:t}),placementToOrigin:"center",alignmentToOrigin:"center",open:c,disableMouseCapture:!0,preventCaptureEsc:!0,preventScaleTransition:!0,preventOpacityTransition:!0,popupType:l().n.Popup})}},280244:(e,t,n)=>{n.d(t,{BT:()=>w,DK:()=>k,bO:()=>S});n(898992),n(354520),n(581454);var o=n(296540),i=()=>n(484714),r=()=>n(590526),a=()=>n(807449),s=()=>n(736847),l=()=>n(247331),c=()=>n(239381),d=()=>n(158115),u=()=>n(201980),p=()=>n(69708),m=()=>n(496603),f=()=>n(829300),g=()=>n(673477),b=()=>n(547149),h=()=>n(575143),v=()=>n(455971),y=n(474848);function w(e){const{mentionMenuCurrentFormulaStore:t,setTemporaryInputData:n,isFirstSection:i,formulaContextVariableResults:u}=e,f=u.filter((e=>e.kind===l().FormulaContextValueKind.ContextValue&&"block"===e.type.type)),g=(0,r().K8)((()=>{const e=f.map((e=>{const o=(0,c().sM)(e),i=(0,c().E9)(e),r=(0,c().Ix)(e.type);return{action:x(e,t),key:e.id,render:e=>(e.focused&&n({title:o,icon:(0,y.jsx)(v().sL,{}),allowTabCompletion:!1}),(0,y.jsx)(h().A,{...e,right:(0,y.jsx)(a().I,{icon:d().arrowChevronSingleRightFillSmallIcon,size:"xs"}),svg:r,title:o,tooltipText:i}))}}));return(0,m().oE)(e)}),[f,t,n]),b=(0,o.useMemo)((()=>{if(0!==g.length)return{items:g,key:"formula property results",render:e=>(0,y.jsx)(s().A,{...e,title:(0,y.jsx)(p().sA,{defaultMessage:"Property from",id:"mentionMenu.formulaPropertySection.title"}),desktopTitleStyle:i?{paddingTop:4}:void 0,topBorder:!i})}}),[g,i]);return b}function x(e,t){return function(){t.setState({formulaTypecheckContextValue:e}),g().Ay.updateOpenState({showFormulaProperty:!0})}}function S(e){const{query:t,formulaContextVariableResults:n,setTemporaryInputData:a,isFirstSection:d}=e,u=(0,i().v3)(),m=(0,r().K8)((()=>I({environment:u,formulaVariableFilter:e=>e.kind===l().FormulaContextValueKind.ContextValue&&(0,c().IF)(e),query:t,formulaContextVariableResults:n,setTemporaryInputData:a})),[u,n,t,a]),f=(0,o.useMemo)((()=>{if(0!==m.length)return{items:m,key:"custom formula results",render:e=>(0,y.jsx)(s().A,{...e,title:(0,y.jsx)(p().sA,{defaultMessage:"Custom",id:"mentionMenu.customFormulaVariables.title"}),desktopTitleStyle:d?{paddingTop:4}:void 0,topBorder:!d})}}),[m,d]);return f}function k(e){const{formulaReturnType:t,query:n,formulaContextVariableResults:o,setTemporaryInputData:r}=e;return I({environment:(0,i().v3)(),formulaVariableFilter:e=>e.kind===l().FormulaContextValueKind.ContextValue&&e.type.type===t&&!(0,c().IF)(e),query:n,formulaContextVariableResults:o,setTemporaryInputData:r})}function I(e){const{environment:t,formulaVariableFilter:n,query:o,formulaContextVariableResults:i,setTemporaryInputData:r}=e;if(0===i.length)return[];const a=i.filter(n);return 0===a.length?[]:a.map((e=>{const n=(0,c().sM)(e),i=(0,c().E9)(e),a=(0,c().Ix)(e.type);return{action:A(t,e,o),key:e.id,render:t=>(t.focused&&r({allowTabCompletion:!0,icon:(0,y.jsx)(v().sL,{}),title:e.name}),(0,y.jsx)(h().A,{...t,svg:a,title:n,tooltipText:i}))}}))}function A(e,t,n){return function(o){b().createAndCommit({userAction:"MentionMenu.formulaMenuItem",environment:e,canUndo:!0,perform:i=>{const r=(0,u().CA$)(t);f().Ju({annotations:[r],editorMode:"default",environment:e,mentionType:"formulaContextVariable",menuListItemAction:o,query:n,transaction:i})}})}}},330704:(e,t,n)=>{n.d(t,{E:()=>a});var o=()=>n(484714),i=()=>n(590526),r=()=>n(511393);function a(){const e=(0,o().v3)();return(0,i().K8)((()=>(0,r().h)(e)),[e])}},371231:(e,t,n)=>{n.d(t,{m:()=>c});var o=()=>n(988083),i=()=>n(201794),r=()=>n(232615),a=()=>n(496603);const s=a().sg(((e,t)=>{o().A.setState({...o().A.state,phase:e,estimatedKeyboardWebViewOverlap:t})}),300),l=a().sg(((e,t)=>{o().A.setState({...o().A.state,phase:e,estimatedKeyboardWebViewOverlap:t})}),150);function c(e,t,n){const{device:a,RouterStore:c}=e;if(!(0,i().T)("supportsAlwaysMultiTextSelectionBehavior")){const e="page"===c.state.route.name,o=a.isAndroid&&a.isMobileNative,i="editing"===r().default.state.mode;if(e&&o&&!i)return void s(t,n)}if((0,i().T)("supportsDebouncingKeyboardDuringOnboarding")){const e="onboarding"===c.state.route.name,o=a.isIOS&&a.isMobileNative;if(e&&o)return void l(t,n)}o().A.setState({...o().A.state,phase:t,estimatedKeyboardWebViewOverlap:n})}},381379:(e,t,n)=>{n.d(t,{r:()=>j});n(898992),n(354520),n(581454);var o=n(296540),i=()=>n(907258),r=()=>n(484714),a=()=>n(590526),s=()=>n(295633),l=()=>n(732810),c=()=>n(688610),d=()=>n(179034),u=()=>n(519831),p=()=>n(245241),m=()=>n(534177),f=()=>n(807700),g=()=>n(486674),b=()=>n(825972),h=()=>n(786937),v=()=>n(135599),y=()=>n(981342),w=()=>n(311337),x=()=>n(73199);const S=20;function k(e,t){return e instanceof s().B?t?!e.isPersonProfile():!e.isPersonProfile()&&!e.isPeopleCollectionViewPage():e instanceof l().m||void(0,m().HB)(e)}function I(e){return!(e instanceof s().B)||!e.isTeamPage()}function A(e){return e instanceof l().m?!(0,f().l)(e)&&!(0,c().z)(e):e instanceof s().B||void(0,m().HB)(e)}function j(e){const{query:t,disabled:n,includeDataSources:s,blockStore:c}=e,m=(0,r().v3)(),f=(0,a().O$)(i().AppStoreSidebarSpaceStore),j=(0,a().K8)((()=>(0,w().y)(m)),[m]),{overriddenPublicShareLinkSpaceStore:T,furthestPublicShareAncestorId:M}=(0,x().W)(),C=(0,a().K8)((()=>Boolean(i().AppStoreSidebarSpaceStore||T||c)),[c,T]),P=(0,a().K8)((()=>{var e;return null===(e=(0,g().a)())||void 0===e?void 0:e.id}),[]),B=(0,a().K8)((()=>{if(n)return[];return b().NK.state.filter((e=>e.pageId!==P)).slice(0,S).map((e=>e.store))}),[P,n]),_=""===t,R=(0,o.useMemo)((()=>(0,p().N2)({isDeletedOnly:!1,excludeTemplates:!0,includePublicPagesWithoutExplicitAccess:j,navigableBlockContentOnly:!0,excludeSurrogateCollections:!s})),[j,s]),{results:D,isResultsLoading:V,debugInfo:O}=(0,v().W)({...j?{type:p().Vz.BlocksInAncestor,ancestorId:M??""}:{type:p().Vz.BlocksInSpace},source:"mention_menu",query:t,limit:S,filters:R,options:{disable:n||!C||_||j&&!M,overrideSpaceStore:j?T:void 0},peopleBlocksToInclude:"collection_view_page"}),E=(0,a().K8)((()=>(0,y().jj)(f)),[f]),z=(0,a().K8)((()=>_?B.map((e=>({store:e,serverEventProperties:void 0}))).filter((({store:e})=>k(e,E)&&I(e)&&A(e))):D.map((({store:e,collectionId:t,isSurrogateCollection:n,serverEventProperties:o})=>({store:n&&t?l().m.createChildStore(e,{table:u().Vl,id:t}):e,serverEventProperties:o}))).filter((({store:e})=>k(e,E)&&I(e)&&A(e)))),[D,B,_,E]),N=(0,o.useMemo)((()=>{const{localResults:e,serverResults:n,exposedSearchExperiments:o}=(0,h().W)(D);return{debugInfo:O,localResults:e,serverResults:n,exposedSearchExperiments:o,reportBadSearchInputRequest:{query:{text:t,filters:R,sort:{field:"relevance"}},limit:S}}}),[D,O,t,R]);return s?{results:z,isLoading:V,reportBadSearchMetadata:N}:{results:z.filter((e=>e.store.table===d().ev)),isLoading:V,reportBadSearchMetadata:N}}},381553:(e,t,n)=>{n.d(t,{Y:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 16 16",fittedViewBox:"2.37 2.37 11.25 11.25",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M7.053 6.407a.643.643 0 1 0 0 1.286.643.643 0 0 0 0-1.286m1.894 0a.643.643 0 1 0 0 1.286.643.643 0 0 0 0-1.286m1.893 0a.643.643 0 1 0 0 1.286.643.643 0 0 0 0-1.286M5.159 8.3a.643.643 0 1 0 0 1.287.643.643 0 0 0 0-1.286M7.053 8.3a.643.643 0 1 0 0 1.287.643.643 0 0 0 0-1.286M8.947 8.3a.643.643 0 1 0 0 1.287.643.643 0 0 0 0-1.286M10.84 8.3a.643.643 0 1 0 0 1.287.643.643 0 0 0 0-1.286m-5.681 1.894a.643.643 0 1 0 0 1.286.643.643 0 0 0 0-1.286m1.894 0a.643.643 0 1 0 0 1.286.643.643 0 0 0 0-1.286m1.894 0a.643.643 0 1 0 0 1.286.643.643 0 0 0 0-1.286"}),(0,o.jsx)("path",{d:"M4.25 2.375c-1.036 0-1.875.84-1.875 1.875v7.5c0 1.036.84 1.875 1.875 1.875h7.5c1.036 0 1.875-.84 1.875-1.875v-7.5c0-1.036-.84-1.875-1.875-1.875zm-.625 9.375V5.632h8.75v6.118c0 .345-.28.625-.625.625h-7.5a.625.625 0 0 1-.625-.625"})]})},r=(0,n(340498).wt)("viewCalendarSmall",i,"small")},383567:(e,t,n)=>{n.d(t,{F:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"3.26 1.98 16.32 17.52",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M15.825 12a3.75 3.75 0 1 1-.001 7.501 3.75 3.75 0 0 1 0-7.501m0 1.325a.55.55 0 0 0-.55.55V15.2H13.95a.55.55 0 0 0-.001 1.1h1.326v1.325a.55.55 0 0 0 1.1 0V16.3h1.324a.55.55 0 0 0 0-1.1h-1.325v-1.325a.55.55 0 0 0-.55-.55M9.702 5.022a3.918 3.918 0 0 1 6.742.036.626.626 0 0 1-1.08.63 2.667 2.667 0 0 0-4.59-.023L5.376 14.68l4.19.678a.626.626 0 0 1-.2 1.235l-5.1-.827a.625.625 0 0 1-.437-.938z"}),(0,o.jsx)("path",{d:"M10.912 8.094a1.178 1.178 0 1 1 2.326.377 1.178 1.178 0 0 1-2.326-.377M4.7 7.087a1.178 1.178 0 1 1 2.327.377A1.178 1.178 0 0 1 4.7 7.087M3.488 2.985a3.92 3.92 0 0 1 5.572.357.625.625 0 0 1-.944.818 2.67 2.67 0 0 0-3.796-.243.625.625 0 1 1-.832-.932"})]})},r=(0,n(340498).wt)("aiFacePlus",i,"default")},448801:(e,t,n)=>{n.d(t,{i:()=>i});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);var o=()=>n(371562);o();function i(e,t){const n=o().create({arrays:{detectMove:!1,includeValueOnMove:!0}}).diff(e,t);if(!n)return{beforeOps:{},removeOps:new Set};let i=[],r=[];for(const o in n)"_t"!==o&&("_"===o[0]?i.push(parseInt(o.slice(1),10)):1===n[o].length&&r.push({index:parseInt(o,10),value:n[o][0]}));const a={},s=new Set,l=[...e];i=i.sort(((e,t)=>e-t));for(let o=i.length-1;o>=0;o--){const e=i[o],t=l.splice(e,1)[0];s.add(t)}r=r.sort(((e,t)=>e.index-t.index));for(let o=0;o<r.length;o++){const e=r[o];a[e.value]=l[e.index],l.splice(e.index,0,e.value)}return{beforeOps:a,removeOps:s}}},455971:(e,t,n)=>{n.d(t,{UZ:()=>k,Yo:()=>w,gf:()=>y,sL:()=>S,zC:()=>x});var o=n(296540),i=()=>n(726637),r=()=>n(401497),a=()=>n(295633),s=()=>n(732810),l=()=>n(537193),c=()=>n(207207),d=()=>n(96042),u=()=>n(617668),p=()=>n(379632),m=()=>n(924703),f=()=>n(607935),g=()=>n(100622),b=()=>n(534177),h=()=>n(267419),v=n(474848);function y(e){return"+"===e.insertionType?(0,v.jsx)(w,{}):(0,v.jsx)("span",{style:{width:"1em",height:"1em",display:"inline-block",verticalAlign:"-0.15em",marginInlineEnd:"0.2em"},children:(0,v.jsx)(I,{svg:c().magnifyingGlassIcon.__iconDefinition.svg,viewBox:c().magnifyingGlassIcon.__iconDefinition.viewBox})})}function w(){return(0,v.jsx)("span",{style:{width:"1em",height:"1em",display:"inline-block",verticalAlign:"-0.15em",marginInlineEnd:"0.2em"},children:(0,v.jsx)(I,{svg:u().plusIcon.__iconDefinition.svg,viewBox:u().plusIcon.__iconDefinition.viewBox})})}function x(){return(0,v.jsx)("span",{style:{width:"1em",height:"1em",display:"inline-block",verticalAlign:"-0.15em",marginInlineEnd:"0.2em"},children:(0,v.jsx)(I,{svg:d().I.__iconDefinition.svg,viewBox:d().I.__iconDefinition.viewBox})})}function S(){return(0,v.jsx)("span",{style:{width:"1em",height:"1em",display:"inline-block",verticalAlign:"-0.15em",marginInlineEnd:"0.2em"},children:(0,v.jsx)(I,{svg:l().b.__iconDefinition.svg,viewBox:l().b.__iconDefinition.viewBox})})}function k(e){const{store:t,theme:n,isSafariOrIOS:o,emojiType:r,currentUserId:l}=e;return t instanceof a().B?(0,m().h6)({pageModel:t.getModel(),pageRole:t.getRole(),emojiType:r,baseUrl:i().A.domainBaseUrl,getRecordModel:t.getRecordModel,isClient:!0,isSafariOrIOS:o,currentUserId:l,theme:n,emojiData:h().A.state}):t instanceof s().m?(0,f().e)({collectionPointer:null===(c=t.getModel())||void 0===c?void 0:c.pointer,emojiType:r,baseUrl:i().A.domainBaseUrl,getRecordModel:t.getRecordModel,getRecordRole:t.inMemoryRecordCache.makeGetRecordRoleFn(l),isSafariOrIOS:o,isClient:!0,currentUserId:l,theme:n,emojiData:h().A.state}):void(0,b().HB)(t);var c}function I(e){const{svg:t,viewBox:n}=e,i=(0,o.useMemo)((()=>{const e=p().A.renderToString((0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:n,children:t}));return`url("${`data:image/svg+xml,${encodeURIComponent(e)}`}")`}),[t,n]),a=(0,r().IS)((()=>({container:{width:"100%",height:"100%",backgroundColor:g().Tj.icon.secondary,WebkitMaskImage:i,maskImage:i,WebkitMaskRepeat:"no-repeat",maskRepeat:"no-repeat"}})),[i]);return(0,v.jsx)("div",{style:a.container})}},471095:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>o,lockFillIcon:()=>i});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"3.97 1.95 12.05 15.66",svg:(0,n(474848).jsx)("path",{d:"M6 5.95a4 4 0 1 1 8 0v1.433a2.426 2.426 0 0 1 2.025 2.392v5.4A2.425 2.425 0 0 1 13.6 17.6H6.4a2.425 2.425 0 0 1-2.425-2.425v-5.4c0-1.203.876-2.201 2.025-2.392zm6.75 1.4v-1.4a2.75 2.75 0 1 0-5.5 0v1.4zm-2.2 5.458a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 0 0 1.1 0z"})},i=(0,n(340498).wt)("lockFill",o,"fill")},526905:(e,t,n)=>{n.d(t,{b9:()=>p,bS:()=>u,xA:()=>m});n(581454);var o=()=>n(907258),i=()=>n(416504),r=()=>n(763884),a=()=>n(72234),s=()=>n(866805),l=()=>n(547149);const c=144e5,d=new Map;function u(e){return`${e}:user_first_active_today`}function p(e){var t;const n=function(e){let t=d.get(e);return t||(t=new Intl.DateTimeFormat("en-CA",{timeZone:e,year:"numeric",month:"2-digit",day:"2-digit"}),d.set(e,t)),t}((null===(t=o().default.state.currentUserSettingsStore)||void 0===t||null===(t=t.getSettings())||void 0===t?void 0:t.time_zone)??(0,i().P)()),r=n.formatToParts(new Date(e-c)),a=Object.fromEntries(r.map((e=>[e.type,e.value])));return`${a.year??"0000"}-${a.month??"00"}-${a.day??"00"}`}async function m(e){var t;const{environment:i,userId:c,spaceId:d}=e;if(!(0,s().OE)())return!1;const m=Date.now(),f=p(m),g=r().K.get({userId:c,key:u(d)});if((null==g?void 0:g.dateBucket)===f)return!1;const b=await async function(e){const t=o().default.state.sidebarSpaceViewStore;if(t&&t.getSpaceId()===e)return await t.load(),t}(d);if(!b)return!1;const h=b.getSettings();if((null==h?void 0:h.user_daily_first_active_local_date_bucket)===f)return r().K.set({userId:c,key:u(d),value:{dateBucket:f,triggeredAt:h.user_daily_first_active_at_utc??m}}),!1;r().K.set({userId:c,key:u(d),value:{dateBucket:f,triggeredAt:m}});const{maybeUpdateDailyBriefPageIfTemplateUpdated:v}=await Promise.all([n.e(35530),n.e(9773),n.e(55373),n.e(36192),n.e(71562),n.e(96346),n.e(27992),n.e(63452),n.e(66249),n.e(92845),n.e(87249),n.e(79022),n.e(44854),n.e(87017),n.e(34877),n.e(46414),n.e(11676),n.e(61165),n.e(47668),n.e(94522),n.e(44584),n.e(24587),n.e(67494),n.e(3651),n.e(40992),n.e(88455),n.e(33893),n.e(48486),n.e(56351)]).then(n.bind(n,833779));await v({environment:i,spaceViewStore:b});const y=null==h||null===(t=h.agent_personalization_settings)||void 0===t?void 0:t.daily_brief_prompt;if(null==y||!y.tooltip_dismissed_at){const{startDailyBriefChat:e}=await Promise.all([n.e(35530),n.e(9773),n.e(55373),n.e(36192),n.e(71562),n.e(96346),n.e(27992),n.e(63452),n.e(66249),n.e(92845),n.e(87249),n.e(79022),n.e(44854),n.e(87017),n.e(34877),n.e(46414),n.e(11676),n.e(61165),n.e(47668),n.e(94522),n.e(44584),n.e(24587),n.e(67494),n.e(3651),n.e(40992),n.e(88455),n.e(33893),n.e(48486),n.e(73199)]).then(n.bind(n,30154));await e({environment:i,showChatSidebarSource:"daily_brief_reminder",skipOpeningPanel:!0})}return l().createAndCommit({environment:i,userAction:"dailyFirstActivityActions.markTriggered",canUndo:!1,perform:e=>{a().AG(b,e,{user_daily_first_active_local_date_bucket:f,user_daily_first_active_at_utc:m})}}),!0}},529099:(e,t,n)=>{n.r(t),n.d(t,{aiFaceIcon:()=>r,iconDefinition:()=>i});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"4.13 2.52 13.27 14.61",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M12.758 9.976a1.178 1.178 0 1 0 .377-2.326 1.178 1.178 0 0 0-.377 2.326M6.547 8.97a1.178 1.178 0 1 0 .377-2.327 1.178 1.178 0 0 0-.377 2.326"}),(0,o.jsx)("path",{d:"M10.573 5.554a3.917 3.917 0 0 1 6.743.035.625.625 0 1 1-1.08.63 2.667 2.667 0 0 0-4.591-.023l-5.398 9.015 4.192.68a.625.625 0 0 1-.2 1.233l-5.102-.827a.625.625 0 0 1-.436-.938zM4.36 3.517a3.92 3.92 0 0 1 5.572.356.625.625 0 1 1-.945.818 2.67 2.67 0 0 0-3.795-.243.625.625 0 1 1-.833-.931"})]})},r=(0,n(340498).wt)("aiFace",i,"default")},529803:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().Store{}const i=new o},539412:(e,t,n)=>{n.d(t,{$y:()=>v,jc:()=>h,x9:()=>b});n(296540);var o=()=>n(564884),i=()=>n(484714),r=()=>n(590526),a=()=>n(212473),s=()=>n(922189),l=()=>n(69708),c=()=>n(209660),d=()=>n(511393),u=()=>n(529803),p=()=>n(780262),m=()=>n(807778),f=()=>n(671812),g=n(474848);function b(){const e=(0,r().K8)((()=>{const{editsBlocked:e}=p().A.state;return e??!1}),[]);return(0,r().K8)((()=>(0,m().Jq)()),[])&&e}function h(){return(0,r().K8)((()=>{var e;const t=u().A.state;return null==t||null===(e=t.data)||void 0===e?void 0:e.invoiceHostedUrl}),[])}function v(){const e=(0,i().v3)(),t=h(),n=(0,r().K8)((()=>{var e;const t=u().A.state;return(null==t||null===(e=t.data)||void 0===e?void 0:e.overdueInvoiceCount)??0}),[]),o=(0,r().K8)((()=>(0,d().h)(e)),[e]),p=function(e,t){if(e)return t>1?(0,g.jsx)(l().sA,{defaultMessage:"Access to Notion is limited because we couldn’t process {overdueInvoiceCount, plural, one {your last payment} other {{overdueInvoiceCount} payments}}.",id:"uncollectibleExperience.uncollectibleExperienceOverlay.multipleInvoicesMessageContent",values:{overdueInvoiceCount:t}}):(0,g.jsx)(l().sA,{defaultMessage:"Access to Notion is limited because we couldn’t process your last payment",id:"uncollectibleExperience.uncollectibleExperienceOverlay.messageContent"});return(0,g.jsx)(l().sA,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberMessageContent",defaultMessage:"Access to Notion is limited"})}(o,n),m=function(e){if(e)return;return(0,g.jsx)(l().sA,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberSecondaryLabel",defaultMessage:"Contact a workspace owner to update your workspace’s payment method"})}(o),b=function(e,t,n){if(t){const o=(0,f().a)(n);return n=>{o&&(y(t,e),o(n))}}return n=>{y(t,e),c().Ow()}}(e,o,t),v=function(e){if(e)return(0,g.jsx)(l().sA,{defaultMessage:"View unpaid invoice",id:"uncollectibleExperience.uncollectibleExperienceOverlay.buttonLabel"});return(0,g.jsx)(l().sA,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberButtonLabel",defaultMessage:"View workspace owner"})}(o);return{clickAction:b,ctaMessage:v,primaryMessage:p,secondaryMessage:m,ctaIcon:o?a().arrowUpRightSquareIcon:s().personCircleFillIcon,tooltipBodyMessage:o?v:m,isWorkspaceOwner:o,overdueInvoiceCount:n}}function y(e,t){(0,o().u)({environment:t,event:{eventName:"subscription_uncollectible_blurred_experience_cta_clicked",eventProperties:{is_workspace_owner:e}}})}},541235:(e,t,n)=>{n.d(t,{Ud:()=>a,YD:()=>r,c$:()=>o,q_:()=>i});const o={"sprints-onboarding":{steps:[{id:"current-sprint-view-tooltip"},{id:"sprint-task-tooltip"},{id:"complete-sprint-button-tooltip"}]},"enhanced-qna-onboarding":{steps:[{id:"find-in-tooltip"},{id:"mention-tooltip"}]},"jira-sync-onboarding":{steps:[{id:"all-projects-tooltip"},{id:"all-issues-tooltip"},{id:"database-views-and-filters-tooltip"},{id:"settings-to-setup-projects-and-issues"}]},"project-management-import-onboarding":{steps:[{id:"your-teamspace-tooltip"},{id:"all-projects-tooltip"},{id:"navigate-to-project-tasks-tooltip"},{id:"project-customization-tooltip"},{id:"related-tasks-database-views-tooltip"}]},"ai-comment-onboarding":{steps:[{id:"ai-comment-onboarding-tooltip"}]},database_onboarding:{steps:[{id:"database_onboarding_status_property_tooltip"},{id:"database_onboarding_add_property_tooltip"},{id:"database_onboarding_database_page_tooltip"},{id:"database_onboarding_board_view_tooltip"}]},"new-user-home-workspace-tour":{steps:[{id:"teamspaces"}]}},i="completed",r="dismissed";function a(e,t){return null==t?void 0:t[e]}},542129:(e,t,n)=>{n.d(t,{h:()=>O,v:()=>E});n(898992),n(354520),n(672577),n(581454),n(737550);var o=n(296540),i=()=>n(135168),r=()=>n(484714),a=()=>n(590526),s=()=>n(401497),l=()=>n(991003),c=()=>n(295633),d=()=>n(350013),u=()=>n(98126),p=()=>n(736847),m=()=>n(416504),f=()=>n(68263),g=()=>n(519831),b=()=>n(42466),h=()=>n(201980),v=()=>n(69708),y=()=>n(100622),w=()=>n(496603),x=()=>n(829300),S=()=>n(812182),k=()=>n(712030),I=()=>n(385979),A=()=>n(673477),j=()=>n(547149),T=()=>n(687879),M=()=>n(680849),C=()=>n(761652),P=()=>n(305390),B=()=>n(347160),_=()=>n(455971),R=()=>n(381379),D=()=>n(280244),V=n(474848);function O(e,t,n){const{useMentionMenuStore:o,open:i,disabled:r=!1}=t??{useMentionMenuStore:!0},s=(0,a().K8)((()=>!r&&(o?A().Ay.state.mentionTypes.page:i)),[i,o,r]),l=(0,a().K8)((()=>o&&A().Ay.state.open&&A().Ay.state.textStore instanceof c().B?A().Ay.state.textStore:void 0),[o]),d=(0,R().r)({query:e,disabled:!s,includeDataSources:!0,blockStore:l}),u=(0,R().r)({query:e,disabled:!s,includeDataSources:!1,blockStore:l});return n.includeDataSources?d:u}function E(e){const{query:t,isFirstSection:n,setTemporaryInputData:l,formulaContextVariableResults:u,disabled:R=!1,shouldIncludeDataSourceMentions:E}=e,K=(0,r().v3)(),F=(0,r().Y0)(),W=(0,v().tz)(),L=(0,s().DP)(),H=K.currentUser.id,$=F.isSafari||F.isIOS,Y=(0,a().K8)((()=>{var e;if(!A().Ay.state.open)return;let t,n=A().Ay.state.textStore.getRecordStoreUIParent();for(;n;)n instanceof c().B&&(t=n),n=n.getRecordStoreUIParent();const o=null===(e=t)||void 0===e?void 0:e.getParentStore();return o instanceof d().N?o:void 0}),[]),{results:G,isLoading:q,reportBadSearchMetadata:Q}=O(t,{useMentionMenuStore:!0,disabled:R},{includeDataSources:E}),Z=(0,D().DK)({formulaReturnType:"block",query:t,formulaContextVariableResults:u,setTemporaryInputData:l}),J=(0,o.useMemo)((()=>(0,w().oE)(G.map((({store:e,serverEventProperties:n})=>{const o=e.table===g().Vl;return{key:e.id,render:t=>{const n=e.getModel();if(t.focused&&n){const t=n.getRenderTitle({getRecordModel:e.getRecordModel,userTimeZone:(0,m().P)(),intl:W})??"";l({title:t,icon:(0,V.jsx)(_().UZ,{store:e,theme:L,isSafariOrIOS:$,emojiType:(0,k().FN)(K),currentUserId:H}),allowTabCompletion:!0})}return(0,V.jsx)(P().A,{...t,store:e,showVerifiedPageBadge:!0})},action:r=>{if(j().createAndCommit({userAction:"MentionMenu.getPageResultsMenuSection",environment:K,canUndo:!0,perform:i=>{var a;x().Ju({environment:K,editorMode:"default",annotations:[o?(0,h().ETy)({collectionId:e.id,spaceId:e.getSpaceId(),parentCvbId:null===(a=e.getParentPointer())||void 0===a?void 0:a.id}):(0,h().ld4)(e.id,e.getSpaceId())],transaction:i,menuListItemAction:r,query:t,serverEventProperties:n,mentionType:o?"collection":"page",resultId:e.id})}}),Y){const t=o?e.getParentCollectionViewBlockStore():e;if(!t||!t.canAdmin())return;!function(e){var t;const{environment:n,blockStore:o,workflowStore:r}=e;if(!o.canAdmin())return;const a=r.getDraftData()??r.getData(),s=null==a||null===(t=a.modules)||void 0===t?void 0:t.find((e=>"notion"===e.type)),l=((null==s?void 0:s.permissions)??[]).some((e=>U(e,o.id)));if(l)return;const c=r.getSpaceId();if(!c)return;const d=e=>{var t;const i=M().D[e];if("none"===i)return;const a=r.getDraftData()??r.getData(),s=null==a||null===(t=a.modules)||void 0===t?void 0:t.find((e=>"notion"===e.type));if(!s)return;const l=(s.permissions??[]).filter((e=>!U(e,o.id))),c={moduleType:"notion",type:"notion",identifier:{type:"pageOrCollectionViewBlock",blockId:o.id},actions:[i]};T().saveModule({environment:n,workflowStore:r,module:{...s,permissions:[...l,c]}}),setTimeout((()=>{S().UW("agent_missing_page_access")}),100)};S().HK({id:"agent_missing_page_access",presentationType:"persistent",title:(0,V.jsx)(v().sA,{defaultMessage:"Grant access to {pageTitle}?",id:"agentInstructions.missingPageAccessToast.title",values:{pageTitle:(0,V.jsx)(C().A,{store:o,useInvertedColors:!0,shouldWrap:!0})}}),actions:{primary:{title:(0,V.jsx)(B().Ay,{type:"user_permission",role:"none",table:b().evP,spaceStore:(0,i().f)(r),upgradeButtonName:"user_permission_item",availableRoleItems:[{role:"read_and_write"},{role:"comment_only"},{role:"reader"}],onChange:e=>{(0,f().PW)(e)&&d(e)},overlayContainerZIndex:202,buttonStyle:{height:20,fontSize:12,fontWeight:500,color:(0,y().O4)({theme:"dark"}).text.primary,padding:0}}),onAction:()=>{}}}})}({blockStore:t,workflowStore:Y,environment:K})}}}})))),[H,K,W,$,t,G,l,L,Y]),X=(0,o.useMemo)((()=>[...Z,...J]),[Z,J]),ee=X.length>0,te=(0,o.useMemo)((()=>{const e=!ee&&!q?N.noPageResults:N.linkToPage;return(0,V.jsxs)(V.Fragment,{children:[W.formatMessage(e),(0,V.jsx)(z,{show:q})]})}),[ee,W,q]),ne=(0,a().K8)((()=>A().Ay.state.mentionTypes.page),[]),oe=(0,I().h)({resultsCount:X.length,shouldShow:q,variant:"mention-menu-page"}),ie=(0,o.useMemo)((()=>{if(R||!ne||!q&&0===X.length)return;return{key:q&&!ee?"page-results-loading":q||ee?"page-results":"page-results-empty",render:e=>(0,V.jsx)(p().A,{...e,title:te,desktopTitleStyle:n?{paddingTop:4}:void 0,topBorder:!n}),items:[...X,...oe]}}),[R,ne,q,X,oe,ee,te,n]);return{pageResultsSection:ie,isPageResultsLoading:q,reportBadSearchMetadata:Q}}function z({show:e}){const t=(0,l().A)(e,500,300);return(0,V.jsx)(u().A,{style:{textAlign:"center",visibility:t?"visible":"hidden",display:"inline",marginInlineStart:8}})}const N=(0,v().YK)({noPageResults:{defaultMessage:"No page results",id:"mentionMenu.noPageSearchResults.title"},linkToPage:{defaultMessage:"Link to page",id:"mentionMenu.pagesSection.title2"}});function U(e,t){return"notion"===e.type&&"pageOrCollectionViewBlock"===e.identifier.type&&e.identifier.blockId===t}},550368:(e,t,n)=>{n.d(t,{a:()=>u});var o=n(296540),i=()=>n(401497),r=()=>n(100622),a=()=>n(534177),s=()=>n(284371),l=()=>n(699143),c=()=>n(493552),d=n(474848);const u=o.forwardRef((function({additionalContent:e,description:t,isDisabled:n,isSelected:a,label:c,name:u,onChange:f,width:g="fill",selectorSize:b="normal",selectAlignXAxis:h="left",selectAlignYAxis:v="center",selectType:y="checkbox",style:w,supportText:x,value:S,colorVariant:k,alignAdditionalContent:I,...A},j){const T=(0,o.useId)(),M=function(e){const{isSelected:t,isDisabled:n,selectAlignYAxis:o,alignAdditionalContent:a}=e;return(0,i().IS)((()=>{const e=t&&!n?r().Tj.blue.border.accentPrimary:r().Tj.border.primary;return{container:{display:"flex",alignItems:a??"center",gap:12,userSelect:"none",paddingTop:9,paddingInlineEnd:16,paddingBottom:10,paddingInlineStart:10,borderRadius:6,border:`1px solid ${e}`,...!n&&{cursor:"pointer"}},title:{fontWeight:s().Wy.medium,fontSize:14,userSelect:"none",lineHeight:18},additionalContentWrapper:{flexShrink:0},selectorWrapper:{display:"flex",..."top"===o?{marginTop:2}:{}},rightAlignSelectorWrapper:{display:"flex"}}}),[t,n,o,a])}({isSelected:a,isDisabled:n,selectAlignYAxis:v,alignAdditionalContent:I}),C=(0,d.jsxs)(l().Y1,{direction:"horizontal",align:"top"===v?"top-left":"center-left",gap:12,width:g,children:[(0,d.jsx)("div",{style:M.selectorWrapper,children:(0,d.jsx)(m,{id:T,selectType:y,name:u,value:S,onChange:f,isSelected:a,selectorSize:b,isDisabled:n,...A})}),(0,d.jsx)(p,{colorVariant:k,description:t,label:c,selectorSize:b,supportText:x,isDisabled:n})]}),P=(0,d.jsxs)(l().Y1,{direction:"horizontal",align:"top"===v?"top-center":"center",gap:12,children:[(0,d.jsx)(p,{colorVariant:k,description:t,label:c,selectorSize:b,supportText:x,isDisabled:n}),(0,d.jsx)("div",{style:{...M.selectorWrapper,...M.rightAlignSelectorWrapper},children:(0,d.jsx)(m,{id:T,selectType:y,name:u,value:S,onChange:f,selectorSize:b,isSelected:a,isDisabled:n,...A})})]}),B=e?(0,d.jsx)("div",{style:M.additionalContentWrapper,children:e}):null;return(0,d.jsx)("label",{ref:j,style:{...M.container,...w},htmlFor:T,children:"left"===h?(0,d.jsxs)(d.Fragment,{children:[C,B]}):(0,d.jsxs)(d.Fragment,{children:[B,P]})})}));function p(e){const{description:t,label:n,supportText:o,selectorSize:i,isDisabled:r,colorVariant:s}=e;let u;return"large"===i?u="pageContentTextBlock":"normal"===i||void 0===i?u="bodySmMedium":"small"===i?u="captionRegular":(0,a().HB)(i),(0,d.jsxs)(l().Y1,{gap:4,children:[(0,d.jsxs)(l().Y1,{gap:2,children:[(0,d.jsx)(c().D,{styleKey:u,colorVariant:s||(r?"disabled":"primary"),children:n}),t?(0,d.jsx)(c().D,{styleKey:"captionRegular",colorVariant:r?"disabled":"secondary",children:t}):null]}),o?(0,d.jsx)(c().D,{styleKey:"captionMedium",colorVariant:"tertiary",children:o}):null]})}function m(e){const{selectType:t,selectorSize:o="normal",id:r,name:s,value:l,onChange:c,isSelected:u,isDisabled:p,...m}=e,f=(0,i().IS)((()=>({checkboxWrapper:{minWidth:18,display:"flex",justifyContent:"center"}})),[]);switch(t){case"radio":return(0,d.jsx)(n(266685).a,{id:r,name:s,value:l,onChange:c,checked:u,disabled:p,selectorSize:o,...m});case"checkbox":return(0,d.jsx)("div",{style:f.checkboxWrapper,children:(0,d.jsx)(n(665290).W,{id:r,name:s,value:l,onChange:c,checked:u,disabled:p,selectorSize:o,...m})});case"none":return null;default:(0,a().HB)(t)}}},551253:(e,t,n)=>{n.d(t,{I:()=>i});class o extends(()=>n(757695))().Store{getInitialState(){return{open:!1,direction:"back"}}}const i=new o},555267:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(296540),i=()=>n(991003),r=()=>n(98126),a=()=>n(100622),s=n(474848);function l({loadingMessage:e}){const t=(0,i().A)(!0,400);return(0,s.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:t?(0,s.jsxs)(o.Fragment,{children:[(0,s.jsx)(r().k,{}),e?(0,s.jsx)("div",{style:{marginInlineStart:8,color:a().Tj.text.secondary},children:e}):void 0]}):void 0})}},557297:(e,t,n)=>{n.d(t,{lz:()=>r,nO:()=>i,wl:()=>a});var o=()=>n(79926);const i={chatSidebar:new(o().O2)("chatSidebar",(()=>Promise.all([n.e(35530),n.e(55373),n.e(36192),n.e(44711),n.e(53321),n.e(67539),n.e(27992),n.e(63452),n.e(66249),n.e(87249),n.e(79022),n.e(34877),n.e(11676),n.e(61165),n.e(94522),n.e(44584),n.e(40992),n.e(88455),n.e(36437),n.e(87289),n.e(18503),n.e(11386),n.e(28463),n.e(2703)]).then(n.bind(n,942646)))),chatSidebarActions:new(o().O2)("chatSidebarActions",(async()=>await Promise.resolve().then(n.bind(n,703748)))),chatSidebarHelpers:new(o().O2)("chatSidebarHelpers",(async()=>await Promise.resolve().then(n.bind(n,770160)))),chatSidebarModeButton:new(o().O2)("chatSidebarModeButton",(async()=>await Promise.all([n.e(75134),n.e(35530),n.e(9773),n.e(55373),n.e(36192),n.e(71562),n.e(96346),n.e(44711),n.e(53321),n.e(51220),n.e(16471),n.e(37353),n.e(37571),n.e(29151),n.e(40118),n.e(50397),n.e(62475),n.e(3151),n.e(98629),n.e(27992),n.e(63452),n.e(66249),n.e(92845),n.e(87249),n.e(79022),n.e(44854),n.e(87017),n.e(34877),n.e(46414),n.e(11676),n.e(61165),n.e(47668),n.e(94522),n.e(44584),n.e(24587),n.e(67494),n.e(3651),n.e(38293),n.e(40992),n.e(88455),n.e(64556),n.e(33893),n.e(91793),n.e(55162),n.e(71003),n.e(32370),n.e(26264),n.e(36437),n.e(50363),n.e(42660),n.e(44590),n.e(55113),n.e(85071),n.e(7914),n.e(25588),n.e(68637),n.e(23640),n.e(72252),n.e(93134),n.e(12452),n.e(52871),n.e(29351),n.e(18825),n.e(71853),n.e(93049),n.e(22582),n.e(18636),n.e(87289),n.e(16060),n.e(34281),n.e(48376),n.e(35279),n.e(80229),n.e(77754),n.e(71309),n.e(74562),n.e(39986),n.e(47431),n.e(47160),n.e(76677),n.e(68609),n.e(15553),n.e(77345),n.e(67720),n.e(37759),n.e(41423),n.e(21627),n.e(57924),n.e(77777),n.e(17729),n.e(23493),n.e(42810),n.e(20741),n.e(16866),n.e(18503),n.e(83271),n.e(33695),n.e(85673),n.e(92926),n.e(94814)]).then(n.bind(n,256499)))),dockedSidebar:new(o().O2)("dockedSidebar",(async()=>await Promise.all([n.e(35530),n.e(55373),n.e(36192),n.e(44711),n.e(53321),n.e(67539),n.e(27992),n.e(63452),n.e(66249),n.e(87249),n.e(79022),n.e(34877),n.e(11676),n.e(61165),n.e(94522),n.e(44584),n.e(40992),n.e(88455),n.e(36437),n.e(87289),n.e(18503),n.e(11386),n.e(28463)]).then(n.bind(n,217609)))),mobileChatModal:new(o().O2)("mobileChatModal",(async()=>await Promise.all([n.e(35530),n.e(55373),n.e(36192),n.e(27992),n.e(63452),n.e(66249),n.e(87249),n.e(79022),n.e(34877),n.e(11676),n.e(61165),n.e(94522),n.e(44584),n.e(40992),n.e(88455),n.e(11386),n.e(63454)]).then(n.bind(n,257819))))},r=(0,o()._h)(i.chatSidebar,(e=>e.ChatSidebar)),a=(0,o()._h)(i.chatSidebarModeButton,(e=>e.ChatSidebarModeButtonPopupContents))},564704:(e,t,n)=>{n.d(t,{Y:()=>s,x:()=>l});var o=()=>n(917908),i=()=>n(459621),r=()=>n(619553),a=()=>n(414754);function s(e,t){const n="back"===t?-1:1,r=o().H.peekEntry(n);r&&(0,i().x)(e,{url:r.url,position:"after-children"})}function l(e,t,n){const i=function(e){const{entries:t,activeIndex:n}=o().H.getState();if(void 0===n)return;const i=t.findIndex((t=>t.historyId===e));if(-1===i)return;return i-n}(t);if(void 0===i)return;const s=o().H.peekEntry(i);s&&(n?(0,r().B)({environment:e,url:s.url,makeTabActive:!1,position:"after-children",openInNew:n}):(0,a().o)({environment:e,offset:i}))}},567121:(e,t,n)=>{n.d(t,{EG:()=>a,K5:()=>r,RH:()=>i,Yi:()=>s,ls:()=>o});const o=32,i=202,r=1e3,a="Want to add a metric? Look for 'src/client/performanceToolbar/config.ts' in notion-next.",s="To disable the toolbar entirely, go to the 'Experiments' panel and look for the 'performance_debugging_toolbar' flag."},573792:(e,t,n)=>{n.d(t,{DW:()=>l,R1:()=>c,lx:()=>s});var o=()=>n(726637),i=()=>n(418135),r=()=>n(175947),a=()=>n(100622);function s(){return{height:"100%",flexGrow:0,marginInlineEnd:8,fontSize:14,minWidth:0}}function l({environment:e,isShowingTabBar:t,shouldShowSidebar:n,isSidebarExpanded:a,isSecondarySidebarVisible:s,isBrowserFullScreen:l,shouldRenderTemplateGalleryTopbar:c,allowOverflow:d,zoom:u}){const{device:p}=e,m=p.isElectronMac&&(!n||!a&&!s)&&!l&&!t,f=p.isElectronWindows&&!t,g=f&&(!n||!a&&!s);let b=r().ek(p.isElectronMac);return c&&(b=r().Hi),{display:"flex",justifyContent:"space-between",alignItems:"center",overflow:d?"visible":"hidden",height:b,paddingInlineStart:m?(0,i().n$)(u):g?46:o().A.isMobile?4:12,paddingInlineEnd:f?(0,i().yA)(u)+4:o().A.isMobile?4:10}}function c(){return{flex:"none",width:1,height:16,marginInlineStart:8,marginInlineEnd:8,background:a().Tj.border.primaryTranslucent}}},578194:(e,t,n)=>{n.d(t,{r:()=>o});const o=(0,n(583835).Dv)("importEvernote")},595743:(e,t,n)=>{n.d(t,{B:()=>R});var o=n(296540),i=()=>n(484714),r=()=>n(590526),a=()=>n(295633),s=()=>n(758256),l=()=>n(711517),c=()=>n(547149),d=(n(16280),n(944114),n(898992),n(354520),n(737550),()=>n(726637)),u=()=>n(687249),p=()=>n(349470);function m(e){const{input:t,uriContext:n}=e,o=function(){const e=[...(0,p().QB)(),"page:\\/\\/[^\\s\\}]+"].join("|");return new RegExp(`(?:\\{\\{)?(${e}|https?:\\/\\/[^\\s)\\]"}]+|(?:www\\.)?notion\\.so\\/[^\\s)\\]"}]+)(?:\\}\\})?`,"g")}(),i=[];let r;for(;null!==(r=o.exec(t));){let e=r[1];if(e){e.startsWith("page://")&&(e=e.replace("page://","pageOrCollectionViewBlock://"));try{const t=(0,u().Mg)(e,n);i.push({url:e,parsed:t})}catch(a){continue}}}return i}n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);var f=()=>n(713998),g=()=>n(142748),b=()=>n(68263),h=()=>n(728272),v=()=>n(179034),y=()=>n(519831),w=()=>n(201980),x=()=>n(966249),S=()=>n(142918),k=()=>n(496603),I=()=>n(590604);function A(e){const{pointer:t,workflowData:n,spaceId:o,getRecordModel:i}=e,r=n.modules||[],a=[],s=[];let c;if((0,l().ap)(n.instructions)){c=n.instructions.id;const e=i({table:v().ev,id:c,spaceId:o});if(e){const t=M({blockModel:e,getRecordModel:i,spaceId:o});s.push(...t)}}else{const e=(0,l().rr)(n.instructions),t=T(e);s.push(...t);const o=e?(0,w().q4_)(e):"";o&&s.push(o)}const p=m({input:s.join(" "),uriContext:{baseUrl:d().A.domainBaseUrl,publicDomainName:d().A.publicDomainName}}),f=function(e){const{baseUrl:t,workflowInstructions:n,publishedArtifactPointer:o,getPublishedArtifactModel:i}=e,r=new Set;if((0,l().ap)(n)&&r.add((0,u().Q2)({baseUrl:t,pageId:n.id})),o){const e=i(o);if("version"===(null==e?void 0:e.type)){var a;const n=null===(a=e.getData())||void 0===a?void 0:a.instructions;(0,l().ap)(n)&&r.add((0,u().Q2)({baseUrl:t,pageId:n.id}))}}return r}({baseUrl:d().A.domainBaseUrl,workflowInstructions:n.instructions,publishedArtifactPointer:n.published_artifact_pointer,getPublishedArtifactModel:e=>i(e)}),g=p.filter((({url:e})=>!f.has(e))),b=n.draft_runtime_actor_pointer??n.runtime_actor_pointer;for(const l of r){const e=x().Nh[l.type];if(!e)throw new Error(`Unknown module type: ${l.type}`);if(e.autoGrantPermissions){const r="notion"===l.type?g.filter((e=>C({workflowInstructionsId:c,instructionUrl:e.parsed,runtimeActorPointer:b,getRecordModel:i,spaceId:o,module:l}))):g;let s=e.autoGrantPermissions({module:l,workflow:n,getRecordModel:i,uriContext:{baseUrl:d().A.domainBaseUrl,publicDomainName:d().A.publicDomainName},spaceId:o,instructionUrls:r});"notion"===s.type&&b&&(s=B({module:s,runtimeActorPointer:b,getRecordModel:i,spaceId:o})),k().n4(l,s)||a.push((0,S().xb)({pointer:t,module:s}))}}return a}const j=50;function T(e){if(!e)return[];const t=[];t.push(...(0,w().JnO)(e));for(const n of(0,w().RQ)(e)){const e=(0,w().uPN)(n),o=(0,w().Sev)(e);if(o){const e=(0,w().i$F)(o);if(null!=e&&e.id){const n=`${d().A.domainBaseUrl}/${e.id.replace(/-/g,"")}`;t.push(n)}}}return t}function M(e){const{blockModel:t,getRecordModel:n,spaceId:o,depth:i=0}=e;if(i>=j)return[];const r=[],a=["title","link","source","caption"];for(const c of a){const e=(0,f().yQ)(t,c);if(e){const t=T(e);r.push(...t);const n=(0,w().q4_)(e);n&&r.push(n)}}const s=t.getFormat();s&&"image_hyperlink"in s&&s.image_hyperlink&&r.push(s.image_hyperlink);const l=t.getContentIds();for(const c of l){const e=n({table:v().ev,id:c,spaceId:o});if(e){const t=M({blockModel:e,getRecordModel:n,spaceId:o,depth:i+1});r.push(...t)}}return r}function C(e){const{workflowInstructionsId:t,instructionUrl:n,runtimeActorPointer:o,getRecordModel:i,spaceId:r,module:a}=e;if(function(e){var t;const{module:n,instructionUrl:o}=e;return Boolean(null===(t=n.permissions)||void 0===t?void 0:t.some((e=>function(e){const{permission:t,instructionUrl:n}=e;if("notion"!==t.type)return!1;if("pageOrCollectionViewBlock"===t.identifier.type&&"pageOrCollectionViewBlock"===n.type&&t.identifier.blockId===n.id)return P(t.actions);if("pageOrCollectionViewBlock"===t.identifier.type&&"collection"===n.type&&t.identifier.blockId===n.collectionId)return P(t.actions);return!1}({permission:e,instructionUrl:o}))))}({module:a,instructionUrl:n}))return!1;if(!o)return!0;if("collectionProperty"!==n.type&&"pageOrCollectionViewBlock"!==n.type)return!0;const s="pageOrCollectionViewBlock"===n.type?{table:v().ev,id:n.id,spaceId:r}:{table:y().Vl,id:n.collectionId,spaceId:r},l=(0,g().Yn)(s,i);if(0===l.length)return!0;if(l.some((e=>e.table===v().ev&&e.id===t)))return!1;const c=(0,I().uI)({recordPointers:new(h().d)([s]),actorPointers:new(h().d)([o]),getRecordModel:i});return!(0,I().Dk)({actorPointer:o,ancestors:l,permissionsContext:c}).some((e=>e.permissionItem.role&&(0,b().Tt)(e.permissionItem.role)))}function P(e){return e.some((e=>"reader"===e||"comment_only"===e||"read_and_write"===e))}function B(e){const{module:t,runtimeActorPointer:n,getRecordModel:o,spaceId:i}=e,r=t.permissions??[],a=r.filter((e=>{if("notion"!==e.type)return!0;if("pageOrCollectionViewBlock"!==e.identifier.type)return!0;if(!n)return!0;const t={table:v().ev,id:e.identifier.blockId,spaceId:i};if(!o(t))return!0;const r=(0,g().Yn)(t,o);if(0===r.length)return!0;const a=(0,I().uI)({recordPointers:new(h().d)([t]),actorPointers:new(h().d)([n]),getRecordModel:o});return!(0,I().Dk)({actorPointer:n,ancestors:r,permissionsContext:a}).some((e=>e.permissionItem.role&&(0,b().Tt)(e.permissionItem.role)))}));return a.length===r.length?t:{...t,permissions:a}}var _=()=>n(912749);function R(e){const{workflowStore:t}=e,n=(0,i().v3)(),d=(0,_().N)(t,!0),{workflowValue:u}=d,p=(0,r().K8)((()=>{if((0,l().ap)(u.instructions))return a().B.createChildStore(t,u.instructions)}),[u.instructions,t]),m=(0,r().K8)((()=>void 0!==p&&!p.isReady()),[p]),f=(0,r().K8)((()=>{const e=t.getSpaceId();return e?t.table===s().U6||m?[]:A({pointer:t.pointer,workflowData:u,spaceId:e,getRecordModel:t.getRecordModel}):[]}),[u,t,m]),g=(0,o.useCallback)((()=>{t.table!==s().U6&&c().createAndCommit({userAction:"WorkflowActions.autoGrantPermissions",environment:n,canUndo:!0,perform:e=>{for(const n of f)c().applyOperation({store:t,operation:n,transaction:e})}})}),[f,n,t]);return{autoGrantOperations:f,handleAutoGrantPermissions:g,isLoading:m}}},595939:(e,t,n)=>{n.d(t,{OY:()=>s,S4:()=>a,Wu:()=>l});var o=()=>n(680074),i=()=>n(547149),r=()=>n(680977);function a(e){const{environment:t,preference:n}=e,a=(0,o().R$)(t);a&&(i().createAndCommit({environment:t,userAction:"userSettingsActions.setContrastPreference",canUndo:!0,cellTarget:"main",perform:e=>{(0,r().m)({userSettingsStore:a,transaction:e,data:{contrast_preference:n}})}}),s(n))}async function s(e){document.body.setAttribute("data-contrast",e);("high"===e||"auto"===e&&window.matchMedia("(prefers-contrast: more)").matches)&&await n.e(76353).then(n.bind(n,811300))}function l(e){const t=(0,o().R$)(e);return(null==t?void 0:t.getSettingsStore().getKeyStore("contrast_preference").getValue())??"auto"}},611947:(e,t,n)=>{n.r(t),n.d(t,{checkIsTutorialDone:()=>g,dismissTutorial:()=>d,resetTutorials:()=>u,tutorialAdvanceToStep:()=>p,tutorialAdvanceToStepAfter:()=>m,tutorialGoToNextStep:()=>l,tutorialGoToPrevStep:()=>c,tutorialGoToStep:()=>f});var o=()=>n(907258),i=()=>n(541235),r=()=>n(680977),a=()=>n(547149),s=()=>n(646355);function l(e,t,n){var i;const{currentUserSettingsStore:a}=o().default.state;if(!a)return;const l=null===(i=a.getSettings())||void 0===i?void 0:i.tutorials;n?(0,r().m)({userSettingsStore:a,transaction:n,data:{tutorials:{...l,[t]:(0,s().i9)(a,t)}}}):b({userAction:"TutorialActions.nextStep",environment:e,perform:e=>{(0,r().m)({userSettingsStore:a,transaction:e,data:{tutorials:{...l,[t]:(0,s().i9)(a,t)}}})},userId:a.id})}function c(e,t){var n;const{currentUserSettingsStore:i}=o().default.state;if(!i)return;const a=null===(n=i.getSettings())||void 0===n?void 0:n.tutorials;b({userAction:"TutorialActions.prevStep",environment:e,perform:e=>{(0,r().m)({userSettingsStore:i,transaction:e,data:{tutorials:{...a,[t]:(0,s().KD)(i,t)}}})},userId:i.id})}function d(e,t){var n;const{currentUserSettingsStore:a}=o().default.state;if(!a)return;const s=null===(n=a.getSettings())||void 0===n?void 0:n.tutorials;(null==s?void 0:s[t])!==i().YD&&b({userAction:"TutorialActions.dismissTutorial",environment:e,perform:e=>{(0,r().m)({userSettingsStore:a,transaction:e,data:{tutorials:{...s,[t]:i().YD}}})},userId:a.id})}function u(e){const{currentUserSettingsStore:t}=o().default.state;t&&b({userAction:"TutorialActions.resetTutorialsDebug",environment:e,perform:e=>{(0,r().m)({userSettingsStore:t,transaction:e,data:{tutorials:{}}})},userId:t.id})}function p(e,t,n){var a;const{currentUserSettingsStore:l}=o().default.state;if(!l||(0,s().x$)(l,t))return;const c=(0,s().gt)(l,t);i().c$[t].steps.findIndex((e=>e.id===c))>=i().c$[t].steps.findIndex((e=>e.id===n))||(0,r().m)({userSettingsStore:l,transaction:e,data:{tutorials:{...null===(a=l.getSettings())||void 0===a?void 0:a.tutorials,[t]:n}}})}function m(e,t,n){if((0,s().ll)(n))return;const o=(0,s().tb)(t,n);o&&p(e,t,o)}function f(e,t,n,i){var a;const{currentUserSettingsStore:s}=o().default.state;if(!s)return;const l=null===(a=s.getSettings())||void 0===a?void 0:a.tutorials;i?(0,r().m)({userSettingsStore:s,transaction:i,data:{tutorials:{...l,[t]:n}}}):b({userAction:"TutorialActions.nextStep",environment:e,perform:e=>{(0,r().m)({userSettingsStore:s,transaction:e,data:{tutorials:{...l,[t]:n}}})},userId:s.id})}function g(e){const{currentUserSettingsStore:t}=o().default.state;return!!t&&(0,s().x$)(t,e)}function b(e){return a().createAndCommit({...e,canUndo:!1})}},613885:(e,t,n)=>{n.d(t,{k:()=>i});var o=()=>n(726637);function i(e,t){const n=o().A.isMobile?2:3;return t.slice(0,n)}},625194:(e,t,n)=>{n.d(t,{m:()=>a});var o=n(296540),i=()=>n(96330),r=n(474848);const a=o.memo((function(e){const{textValue:t}=e,n=(0,o.useMemo)((()=>(0,i().X1)((0,i().eC)(t))),[t]);return(0,r.jsx)("span",{children:n})}))},646355:(e,t,n)=>{n.d(t,{KD:()=>l,gt:()=>c,i9:()=>s,ll:()=>r,tb:()=>a,x$:()=>i});n(18107),n(967357);var o=()=>n(541235);function i(e,t){return r(c(e,t))}function r(e){return void 0!==e&&(e===o().q_||e===o().YD)}function a(e,t){if(r(t))return;const n=o().c$[e],i=n.steps.findIndex((e=>e.id===t));return-1===i?n.steps[0].id:i===n.steps.length-1?o().q_:n.steps[i+1].id}function s(e,t){const n=c(e,t);if(n&&!r(n))return a(t,n)}function l(e,t){const n=c(e,t);if(n)return function(e,t){const n=o().c$[e];var i;if(r(t))return null===(i=n.steps.at(-1))||void 0===i?void 0:i.id;const a=n.steps.findIndex((e=>e.id===t));return-1!==a&&0!==a?n.steps[a-1].id:void 0}(t,n)}function c(e,t){var n;if(!e)return;const i=((null===(n=e.getSettings())||void 0===n?void 0:n.tutorials)||{})[t];return void 0===i?o().c$[t].steps[0].id:i}},665290:(e,t,n)=>{n.d(t,{W:()=>d});n(296540);var o=()=>n(819121),i=()=>n(401497),r=()=>n(451306),a=()=>n(73956),s=()=>n(100622),l=()=>n(807449),c=n(474848);function d(e){const{selectorSize:t="normal",...n}=e,{disabled:d,checked:u}=n,[p,m]=(0,o().A)(),f=function(e){const{checked:t,disabled:n,isFocusVisible:o,selectorSize:r}=e;return(0,i().IS)((()=>({root:{position:"absolute",display:"flex",width:"large"===r?15:11,height:"large"===r?15:11,margin:1.5,justifyContent:"center",alignItems:"center",flexShrink:0,borderRadius:"large"===r?2:1,transition:"background 100ms ease-out",...t?{boxShadow:`0 0 0 1.5px ${n?s().Tj.background.tertiaryTranslucent:s().Tj.blue.background.accentPrimary}`,background:n?s().Tj.background.tertiaryTranslucent:s().Tj.blue.background.accentPrimary}:{boxShadow:`0 0 0 1.5px ${n?s().Tj.background.tertiaryTranslucent:s().Tj.border.strongTranslucent}`,background:s().Tj.background.primary},...o&&{boxShadow:s().Tj.buttonBlueFocusRing}},active:{background:t?s().Tj.blueButtonPressedBackground:s().Tj.buttonHoveredBackground},input:{opacity:0,width:"large"===r?18:void 0,height:"large"===r?18:void 0,...n?{pointerEvents:"none"}:{cursor:"pointer"}}})),[r,t,n,o])}({checked:u,disabled:d,selectorSize:t,isFocusVisible:m});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("input",{ref:p,type:"checkbox",style:f.input,...n}),(0,c.jsx)("span",{...(0,r().ow)(f.root,d?{}:{pseudoActive:f.active}),children:u?(0,c.jsx)(l().I,{icon:a().checkmarkFillSmallIcon,colorPalette:"blue",colorVariant:"inversePrimary",size:"large"===t?"xs":"xxs"}):void 0})]})}},680849:(e,t,n)=>{n.d(t,{C:()=>Le,D:()=>We});n(944114),n(898992),n(354520),n(672577),n(581454);var o=n(296540),i=()=>n(135168),r=()=>n(726637),a=()=>n(484714),s=()=>n(590526),l=()=>n(401497),c=()=>n(295633),d=()=>n(699143),u=()=>n(807449),p=()=>n(493552),m=()=>n(687249),f=()=>n(852219),g=()=>n(748977),b=()=>n(273900),h=()=>n(68263),v=()=>n(179034),y=()=>n(824862),w=()=>n(234459),x=()=>n(743246),S=()=>n(760342),k=()=>n(905470);n(16280);function I(e,t){if("*"===e)return{type:"workspacePublic"};const n=(0,m().Mg)(e,t);if("pageOrCollectionViewBlock"===n.type)return{type:"pageOrCollectionViewBlock",blockId:n.id};throw new Error(`Permission identifier must be a page URL or '*' for workspace-wide access. Got: ${e}`)}var A=()=>n(69708),j=()=>n(100622),T=()=>n(496603),M=()=>n(284371),C=()=>n(579627),P=()=>n(347160),B=()=>n(350824),_=()=>n(547149),R=()=>n(22673),D=()=>n(94522),V=()=>n(330704),O=()=>n(821062),E=()=>n(595743),z=()=>n(970236),N=()=>n(621594),U=()=>n(338862),K=()=>n(812182),F=()=>n(687879),W=()=>n(250910),L=()=>n(631524),H=()=>n(324254),$=()=>n(717137),Y=()=>n(31511),G=()=>n(98126),q=()=>n(302501),Q=()=>n(81068),Z=()=>n(663639),J=()=>n(736847),X=()=>n(187174),ee=()=>n(344417),te=()=>n(617668),ne=()=>n(534177),oe=()=>n(305390),ie=()=>n(696746),re=()=>n(106628),ae=n(474848);const se=3,le=(0,A().YK)({searchPlaceholder:{id:"workflow.agent.dependencies.searchPlaceholder",defaultMessage:"Search pages and databases"},searchPagesPlaceholder:{id:"workflow.agent.dependencies.searchPagesPlaceholder",defaultMessage:"Search pages"},searchDatabasesPlaceholder:{id:"workflow.agent.dependencies.searchDatabasesPlaceholder",defaultMessage:"Search databases"},createNew:{id:"workflow.agent.dependencies.createNew",defaultMessage:"Create new page"},noResults:{id:"workflow.agent.dependencies.noResults",defaultMessage:"No matching pages or databases"},noPageResults:{id:"workflow.agent.dependencies.noPageResults",defaultMessage:"No matching pages"},noDatabaseResults:{id:"workflow.agent.dependencies.noDatabaseResults",defaultMessage:"No matching databases"}});function ce(e){const{spaceStore:t,disabled:n=!1,initialFocus:i=!0,targetBlockType:r,onSelectExisting:a,onCreateNew:s}=e,[c,d]=(0,o.useState)(""),u=(0,l().IS)((()=>({wrapper:{width:280}})),[]),p=(0,o.useCallback)((e=>{a(e)}),[a]);return(0,ae.jsxs)("div",{style:u.wrapper,children:[(0,ae.jsx)(de,{disabled:n,initialFocus:i,targetBlockType:r,query:c,setQuery:d}),(0,ae.jsx)(ue,{spaceStore:t,query:c,targetBlockType:r,onSelection:p,onCreateNew:s})]})}function de(e){const{disabled:t,initialFocus:n,targetBlockType:i,query:r,setQuery:a}=e,s=(0,A().tz)(),[c,d]=(0,o.useState)(!1),p=(0,l().IS)((()=>({wrapper:{paddingInline:12,paddingTop:8,background:j().Tj.background.primary},input:{paddingInlineStart:4}})),[]),m=(0,o.useCallback)((e=>{a(e.target.value)}),[a]),f="page"===i?le.searchPagesPlaceholder:"collection"===i?le.searchDatabasesPlaceholder:le.searchPlaceholder;return(0,ae.jsx)($().A,{debugName:"NotionDependencyTargetPicker",capture:c,allowCopyPaste:!1,children:(0,ae.jsx)("div",{style:p.wrapper,children:(0,ae.jsx)(Y().A,{type:"text",focusInitial:n,disabled:t,onChange:m,onFocus:()=>d(!0),onBlur:()=>d(!1),format:"small",style:p.input,value:r,left:(0,ae.jsx)(u().I,{icon:ee().magnifyingGlassSmallIcon,size:"sm"}),placeholder:s.formatMessage(f)})})})}function ue(e){const{spaceStore:t,query:n,targetBlockType:i,onSelection:r,onCreateNew:l}=e,d=(0,a().v3)(),[{value:p,status:m}]=(0,X().Yb)((async()=>(await re().T.searchActions.load()).searchPagesInSpace({environment:d,query:n,limit:20,spaceId:t.id,requireEditPermissions:!1,excludeTemplates:!0,peopleBlocksToInclude:"none",source:"relation_menu",boostRecentlyViewedPages:!1,spaceStore:t,filterOverrides:{includePublicPagesWithoutExplicitAccess:!1,requireEditPermissions:!1}})),[d,n,t]),f=(0,o.useMemo)((()=>({key:"create-new-target",render:e=>(0,ae.jsx)(Q().A,{...e,title:(0,ae.jsx)(A().sA,{...le.createNew}),icon:(0,ae.jsx)(u().I,{icon:te().plusIcon}),mobileIconStyle:{flex:"0 0 auto"}}),action:l})),[l]),g=(0,s().K8)((()=>{if("idle"===m||"pending"===m)return[{key:"results-loading-spinner",render:()=>(0,ae.jsx)(G().k,{}),action:()=>{}}];if(!p||0===p.results.length)return[pe(i)];const e=p.results.map((e=>{const t=new(c().B)(d,{table:v().ev,id:e.id,spaceId:e.spaceId});if(!(0,ie().lU)(t.getParentBlockStore())){if(i){const e=t.isCollectionView();if("collection"===i&&!e)return;if("page"===i&&e)return}return{key:e.id,render:e=>(0,ae.jsx)(oe().A,{store:t,...e}),action:()=>r(e.id)}}})).filter(ne().O9);return 0===e.length?[pe(i)]:""===n?e.slice(0,se):e}),[d,r,n,p,m,i]);return(0,ae.jsx)(Z().A,{type:Z().O.Vertical,initialFocus:void 0,sections:[{key:"dependency-target-search-results",render:e=>(0,ae.jsx)(J().A,{...e}),items:g},{key:"dependency-target-create-new",render:e=>(0,ae.jsx)(J().A,{...e,topBorder:!0}),items:[f]}]})}function pe(e){const t="page"===e?le.noPageResults:"collection"===e?le.noDatabaseResults:le.noResults;return{key:"empty-results",render:()=>(0,ae.jsx)(q().A,{isSmall:!0,style:{paddingInlineStart:8,paddingTop:4,paddingBottom:4},children:(0,ae.jsx)(A().sA,{...t})}),action:()=>{}}}const me=(0,A().YK)({selectDatabaseLabel:{id:"workflow.agent.dependencies.selectDatabaseCta",defaultMessage:"Select database"},selectPageLabel:{id:"workflow.agent.dependencies.selectPageCta",defaultMessage:"Select page"}});function fe(e){const{disabled:t,spaceStore:n,targetBlockType:o,onSelectExisting:i,onCreateNew:r}=e,a=t||!n;return(0,ae.jsx)(W().A,{disabled:a,popupType:W().z.Popup,renderOrigin:e=>(0,ae.jsx)(L().p,{...e,size:"sm",disabled:t,colorPalette:"blue",iconTrailing:H().arrowChevronSingleDownSmallIcon,children:(0,ae.jsx)(p().D,{styleKey:"captionRegular",children:(0,ae.jsx)(A().sA,{..."page"===o?me.selectPageLabel:me.selectDatabaseLabel})})}),render:({close:e})=>n?(0,ae.jsx)(ce,{spaceStore:n,targetBlockType:o,onSelectExisting:t=>{null==i||i(t),e()},onCreateNew:()=>{null==r||r(),e()}}):null})}function ge(e){const{dependency:t,store:n,disabled:c}=e,f=(0,a().v3)(),[g,b]=(0,o.useState)(!1),h=(0,o.useMemo)((()=>function(e){if(e.table===x().C0)return!0;return!1}(n)?n:null),[n]),v=(0,l().IS)((()=>({container:{backgroundColor:j().Tj.blue.background.primaryTranslucent}})),[]),y=(0,s().K8)((()=>(0,i().f)(n)),[n]),w=(0,o.useMemo)((()=>{const e=t.originalPermission;if("notion"===e.type&&"pageOrCollectionViewBlock"===e.identifier.type)return(0,m().Q2)({baseUrl:r().A.domainBaseUrl,pageId:e.identifier.blockId})}),[t.originalPermission]),S=(0,o.useCallback)((async e=>{if(w&&h){b(!0);try{await(0,F().resolveNotionWorkflowDependency)({environment:f,workflowStore:h,dependencyId:t.dependencyId,targetBlockId:e})}catch(n){K().Iz({message:n instanceof Error?n.message:"Failed to update dependency",icon:N().exclamationMarkCircleSmallIcon,variant:"error",presentationType:"transient"})}finally{b(!1)}}}),[f,t.dependencyId,h,w]),k=(0,o.useCallback)((()=>{}),[]);return w?(0,ae.jsxs)(d().Y1,{direction:"horizontal",align:"center",gap:12,padding:"2px 0 2px 10px",borderRadius:6,width:"fill",style:v.container,children:[(0,ae.jsxs)(d().Y1,{direction:"horizontal",align:"center-left",gap:8,children:[(0,ae.jsx)(u().I,{icon:U().lockFillSmallIcon,size:"sm",colorPalette:"blue",colorVariant:"accentPrimary"}),(0,ae.jsx)(p().D,{as:"span",styleKey:"bodyRegular",colorPalette:"blue",colorVariant:"accentPrimary",children:t.label??w}),(0,ae.jsx)(z().E,{color:"blue",content:"No access"})]}),(0,ae.jsx)(fe,{disabled:c||!h||g,spaceStore:y,targetBlockType:t.type,onSelectExisting:S,onCreateNew:k})]}):null}n(823215),n(908872);var be=()=>n(59226),he=()=>n(406094),ve=()=>n(26697),ye=()=>n(764880),we=()=>n(471095),xe=()=>n(792071),Se=()=>n(758256),ke=()=>n(769864),Ie=()=>n(761652),Ae=()=>n(16006),je=()=>n(815585),Te=()=>n(499764);const Me=(0,A().YK)({editPermissionDisabled:{defaultMessage:"You don’t have full access to this page.",id:"workflows.notion.permissions.edit_permission_disabled"},editPermissionDisabledCollectionView:{defaultMessage:"Custom agents can not edit database schema.",id:"workflows.notion.permissions.edit_permission_disabled_collection_view"}});function Ce(e){const{identifier:t,actions:n,handleUpdatePermission:o,handleRestoreAccess:a,workflowDefinitionPointer:d,store:u,disabled:p,isMissingResource:f=!1}=e,g=(0,A().tz)(),b=(0,s().K8)((()=>{try{const e=(0,m().OR)(t,{baseUrl:r().A.domainBaseUrl,publicDomainName:r().A.publicDomainName});return d.spaceId?c().B.createChildStore(u,{table:v().ev,id:e.pageOrBlockId,spaceId:d.spaceId}):null}catch(e){return null}}),[t,d.spaceId,u]),y=(0,s().K8)((()=>!!b&&b.isCollectionView()),[b]),w=(0,s().K8)((()=>{if(u.table===x().C0||u.table===Se().U6)return(0,D().gy)(u)}),[u]),S=(0,be().X)("custom_agent_boot_from_share_menu"),k=(0,s().K8)((()=>!!S&&(!(!w||!b||u.table!==x().C0&&u.table!==Se().U6)&&function({botId:e,blockStore:t,store:n}){var o,i;if(!t.canRead())return!1;if(t.getParentTable()===x().C0)return!1;const r=n.table===x().C0?null===(o=n.getPublishedArtifactStore())||void 0===o?void 0:o.getData():n.getData();if(null==r||null===(i=r.modules)||void 0===i||!i.length)return!1;for(const a of r.modules)if("notion"===a.type&&a.permissions)for(const n of a.permissions)if("notion"===n.type&&"pageOrCollectionViewBlock"===n.identifier.type&&n.identifier.blockId===t.id){return(0,Te().Wk)({botId:e,store:t}).every((e=>"none"===e.role))}return!1}({botId:w,blockStore:b,store:u}))),[b,w,S,u]),I=(0,l().IS)((()=>({permissionRow:{display:"flex",alignItems:"center",borderRadius:6,justifyContent:"space-between",height:28,paddingInlineStart:10,...f&&{backgroundColor:j().Tj.blue.background.primaryTranslucent}},resourceInfo:{display:"flex",alignItems:"center",gap:8,...k?{}:{flex:1},fontWeight:M().Wy.regular},revokedBadgeContainer:{flexGrow:1,display:"inline-flex",alignItems:"center"},actionsContainer:{display:"flex",alignItems:"center",gap:12},button:{color:f?j().Tj.blue.text.accentPrimary:j().Tj.text.secondary,fontSize:12,opacity:f?.5:1,fontWeight:M().Wy.medium}})),[f,k]),T=(0,s().K8)((()=>(0,i().f)(u)),[u]),C=(0,s().K8)((()=>{if(!b)return B().PA;const e=[];if(b.canEditMembership())y?(e.push({role:"read_and_write",disabledInfo:{isDisabled:!0,disabledMessage:g.formatMessage(Me.editPermissionDisabledCollectionView)}}),e.push(B().Q$)):e.push(B().sP),e.push(B().uH);else{const t={isDisabled:!0,disabledMessage:g.formatMessage(Me.editPermissionDisabled)};e.push({role:"read_and_write",disabledInfo:t}),y&&e.push({role:"content_only_editor",disabledInfo:t}),e.push({role:"comment_only",disabledInfo:t})}return e.push(B().pn),f||e.push(B().EL),e}),[b,g,y,f]),_=n.reduce(((e,t)=>{const n=["read_and_write","comment_only","reader"],o=n.indexOf(e);return n.indexOf(t)<o?t:e}),n[0]);let R="none";f||(R=y&&"read_and_write"===_?"content_only_editor":_);const V=(0,ae.jsx)(P().Ay,{table:v().ev,type:"user_permission",role:R,disabled:p||k,availableRoleItems:C,onChange:e=>{if(!(0,h().PW)(e))throw new Error("Invalid role");o(t,"content_only_editor"===e?"read_and_write":e)},spaceStore:T,upgradeButtonName:"user_permission_item",alignmentToOrigin:"end",buttonStyle:I.button,isNoneOverride:!0,buttonColorPalette:f?"blue":"gray",buttonIconColorPalette:f?"blue":"gray"});return(0,ae.jsxs)("div",{style:I.permissionRow,children:[(0,ae.jsxs)("div",{style:I.resourceInfo,children:[(0,ae.jsx)(Pe,{identifier:t,blockStore:b,isMissingResource:f}),k?(0,ae.jsx)("div",{style:I.revokedBadgeContainer,children:(0,ae.jsx)(Be,{botId:w,blockId:null==b?void 0:b.id,spaceId:d.spaceId})}):void 0]}),(0,ae.jsx)("div",{style:I.actionsContainer,children:k&&a?(0,ae.jsx)(he().A,{size:"xs",onClick:a,children:(0,ae.jsx)(A().sA,{id:"NotionResourceItem.restoreAccess",defaultMessage:"Restore access"})}):V})]})}function Pe({identifier:e,blockStore:t,isMissingResource:n}){const o=(0,l().IS)((()=>({button:{display:"inline-flex",alignItems:"center",flex:1,gap:6,padding:0,backgroundColor:"transparent",border:"none",color:j().Tj.text.primary,fontSize:M().J.UIRegular.desktop,cursor:"pointer"},container:{textDecoration:"none",fontWeight:M().Wy.regular,display:"flex",alignItems:"center"},icon:{marginInlineEnd:8},missingRecordTitle:{color:j().Tj.blue.text.accentPrimary,opacity:.5},missingIcon:{opacity:.5,display:"inline-block",verticalAlign:"middle"}})),[]),i=()=>{window.open(e,"_blank")};return t?n?(0,ae.jsxs)("button",{type:"button",style:o.button,onClick:i,children:[(0,ae.jsx)(u().I,{icon:we().lockFillIcon,size:"sm",colorPalette:"blue",colorVariant:"accentPrimary",style:o.missingIcon}),(0,ae.jsx)(Ae().A,{store:t,style:o.missingRecordTitle,maxLength:50,shouldWrap:!1,enableHover:!0,showTooltipWhenTruncated:!0})]}):(0,ae.jsx)("button",{type:"button",style:o.button,onClick:i,children:(0,ae.jsx)(Ie().A,{store:t,useInvertedColors:!1,iconSize:16,iconStyle:o.icon,maxLength:50,shouldWrap:!1,style:o.container,enableHover:!0,showTooltipWhenTruncated:!0})}):(0,ae.jsx)("button",{type:"button",style:o.button,onClick:i,children:(0,ae.jsx)("span",{children:e})})}function Be({botId:e,blockId:t,spaceId:n}){const o=(0,a().v3)(),i=(0,A().tz)(),[{value:r}]=(0,X().Yb)((async()=>{if(e&&t)return await async function({environment:e,botId:t,blockId:n,spaceId:o}){try{const l=await ke().callApi({eventName:"getActivityLog",environment:e,data:{spaceId:o,limit:50,navigableBlock:{id:n,spaceId:o},activityTypes:["permissions-edited"]}});if("success"!==l.type)return;const{activityIds:c,recordMap:d}=l.data;for(const e of c){var i,r;const n=null===(i=d.activity)||void 0===i||null===(i=i[e])||void 0===i?void 0:i.value;if(!n||!("value"in n))continue;const o=null===(r=n.value)||void 0===r?void 0:r.edits;if(o)for(const e of o){var a,s;if("permission-deleted"!==e.type||!e.permission_data)continue;if(!(0,h().P3)(e.permission_data)||e.permission_data.bot_id!==t)continue;const n=null===(a=e.authors)||void 0===a?void 0:a[0],o=e.timestamp;if(!n)return{actorModel:void 0,timestamp:o};const i=null===(s=d[n.table])||void 0===s||null===(s=s[n.id])||void 0===s?void 0:s.value;if(!i||!("value"in i))return{actorModel:void 0,timestamp:o};const r=i.value;if(!r)return{actorModel:void 0,timestamp:o};return{actorModel:xe().Bj6.fromValue(n.table,r),timestamp:o}}}}catch(l){return}}({environment:o,botId:e,blockId:t,spaceId:n})}),[o,e,t,n]),{actorName:l,editedTimeFromNowLabel:c}=(0,s().K8)((()=>r?{actorName:(0,ye().lR)(i,r.actorModel),editedTimeFromNowLabel:r.timestamp?(0,je().nl)(r.timestamp,{useLowercase:!0,useCompactFormat:!0}):""}:{}),[r,i]);return(0,ae.jsx)(ve().m,{alignment:"start",placement:"bottom",renderTooltip:()=>l?(0,ae.jsx)(A().sA,{id:"NotionResourceItem.agentAccessRevoked.tooltipWithName",defaultMessage:"<faded>Revoked by</faded> {actorName} <faded>{editedTimeFromNowLabel}</faded>",values:{actorName:l,editedTimeFromNowLabel:c,faded:(...e)=>(0,ae.jsx)("span",{style:{opacity:.5},children:e})}}):(0,ae.jsx)(A().sA,{id:"NotionResourceItem.agentAccessRevoked.tooltip",defaultMessage:"Revoked by a page owner <faded>{editedTimeFromNowLabel}</faded>",values:{editedTimeFromNowLabel:c,faded:(...e)=>(0,ae.jsx)("span",{style:{opacity:.5},children:e})}}),render:e=>(0,ae.jsx)(z().E,{...e,color:"yellow",content:(0,ae.jsxs)(d().Y1,{direction:"horizontal",align:"center",gap:2,children:[(0,ae.jsx)(u().I,{icon:N().exclamationMarkCircleSmallIcon,size:"sm"}),(0,ae.jsx)(A().sA,{id:"NotionResourceItem.agentAccessRevoked.badge",defaultMessage:"Access revoked"})]})})})}function _e(e){const{moduleValue:t,workflowDefinitionPointer:n,store:i,workflow:a,handleUpdatePermission:l}=e,c=(0,s().K8)((()=>i.canEdit()),[i]),{autoGrantOperations:d}=(0,E().B)({workflowStore:i}),u=(0,o.useMemo)((()=>{const e=d.find((e=>e.args.value.id===t.id));return e?e.args.value.permissions:[]}),[d,null==t?void 0:t.id]),p=(0,o.useMemo)((()=>{const e=[];for(const o of u){var n;const i=null===(n=t.permissions)||void 0===n?void 0:n.find((e=>"search"!==e.type&&("notion"===e.type&&("object"==typeof o.identifier&&"object"==typeof e.identifier?(0,O().A)(o.identifier,e.identifier,3):"string"==typeof o.identifier&&"string"==typeof e.identifier?o.identifier===e.identifier:!(!Array.isArray(o.identifier)||!Array.isArray(e.identifier))&&(0,O().A)(o.identifier,e.identifier,3)))));if(!i||!(0,O().A)(o,i,3)){if("workspacePublic"===o.identifier.type)continue;if("pageOrCollectionViewBlock"===o.identifier.type){const t=(0,m().Q2)({baseUrl:r().A.domainBaseUrl,pageId:o.identifier.blockId});e.push({identifier:t,actions:o.actions});continue}}}return e}),[u,t.permissions]),f=(0,o.useMemo)((()=>(a.dependencies??[]).filter((e=>"notion"===e.moduleType))),[a.dependencies]),g=(0,o.useMemo)((()=>f.filter(Re).filter(De).filter(Ve)),[f]);return 0===p.length&&0===g.length?null:(0,ae.jsxs)(ae.Fragment,{children:[p.map((e=>(0,ae.jsx)(Ce,{identifier:e.identifier,actions:e.actions,workflowDefinitionPointer:n,store:i,disabled:!c,handleUpdatePermission:l,isMissingResource:!0},e.identifier))),g.map((e=>(0,ae.jsx)(ge,{dependency:e,store:i,disabled:!c},e.dependencyId)))]})}function Re(e){return"workspacePublic"!==e.type}function De(e){return void 0===e.resolution||(e.resolution,!1)}function Ve(e){const t=e.originalPermission;return"notion"===t.type&&("pageOrCollectionViewBlock"!==t.identifier.type?(t.identifier,!1):(t.identifier,!0))}var Oe=()=>n(718827),Ee=()=>n(30537),ze=()=>n(863330),Ne=()=>n(724639),Ue=()=>n(542129),Ke=()=>n(492414);function Fe(e){const{onSelectResource:t}=e,[n,i]=(0,o.useState)(!1),[r,s]=(0,o.useState)(""),c=(0,A().tz)(),d=(0,a().v3)(),{results:p,isLoading:m}=(0,Ue().h)(r,{useMentionMenuStore:!1,open:n},{includeDataSources:!1}),f=(0,l().eP)(),g=(0,l().IS)((()=>({container:{minWidth:200,width:"max-content",maxWidth:500},searchContainer:{padding:8,borderBottom:`1px solid ${j().Tj.border.secondary}`},menuContainer:{padding:4,maxHeight:"200px",overflowY:"auto"},searchIcon:{marginInlineEnd:2,flexGrow:0,flexShrink:0},button:{width:"100%",paddingInlineStart:10,gap:8},hoveredButton:{background:j().Tj.background.secondaryTranslucent},pressedButton:{background:(0,Oe().yZ)({color:j().Tj.background.secondaryTranslucent,mode:f})}})),[f]),b=(0,o.useCallback)((e=>{t({identifier:(0,Ke().Ay)({store:e,fullyQualified:!0,pageVisitSource:void 0})})}),[t]);return(0,ae.jsx)(W().A,{placementToOrigin:"bottom",alignmentToOrigin:"start",originGap:4,popupType:Ee().n.Popup,onOpen:()=>i(!0),onClose:()=>{i(!1),s("")},onClick:()=>{const{workflowId:t}=(0,Ne().kI)(e.workflowDefinitionPointer);(0,R().qt)({action:"open_add_page_menu",environment:d,workflowId:t})},renderOrigin:e=>(0,ae.jsx)(L().p,{...e,colorPalette:"gray",iconLeading:{icon:ze().plusSmallIcon,size:"sm"},style:g.button,hoveredStyle:g.hoveredButton,pressedStyle:g.pressedButton,children:(0,ae.jsx)(A().sA,{id:"workflows.notion.permissions.addResource",defaultMessage:"Add page"})}),render:({close:e})=>(0,ae.jsx)($().A,{debugName:"NotionResourcePicker",capture:n,allowCopyPaste:!1,children:(0,ae.jsxs)("div",{style:g.container,children:[(0,ae.jsx)("div",{style:g.searchContainer,children:(0,ae.jsx)(Y().A,{value:r,onChange:e=>s(e.target.value),placeholder:c.formatMessage({id:"workflows.notion.permissions.searchPlaceholder",defaultMessage:"Search pages and databases..."}),left:(0,ae.jsx)(u().I,{icon:ee().magnifyingGlassSmallIcon,size:"sm",colorVariant:"secondary",style:g.searchIcon})})}),(0,ae.jsxs)("div",{style:g.menuContainer,children:[p.map((({store:t})=>(0,ae.jsx)(oe().A,{store:t,onClick:()=>{b(t),e()},showVerifiedPageBadge:!0,focused:!1},t.id))),0!==p.length||m?null:(0,ae.jsx)(Q().A,{disabled:!0,title:r?(0,ae.jsx)(A().sA,{id:"workflows.notion.permissions.noResultsFound",defaultMessage:"No results found"}):(0,ae.jsx)(A().sA,{id:"workflows.notion.permissions.startTyping",defaultMessage:"Start typing to search..."}),focused:!1}),m?(0,ae.jsx)(Q().A,{disabled:!0,title:(0,ae.jsx)(A().sA,{id:"workflows.notion.permissions.loading",defaultMessage:"Loading..."}),focused:!1}):null]})]})})})}const We={editor:"read_and_write",read_and_write:"read_and_write",content_only_editor:"read_and_write",comment_only:"comment_only",reader:"reader",none:"none",membership_admin:"read_and_write"};function Le(e){const{moduleValue:t,saveModule:n,workflowDefinitionPointer:O,store:E,workflow:z}=e,N=(0,a().v3)(),U=(0,V().E)(),K=(0,l().IS)((()=>({permissionsContainer:{marginInlineStart:0,display:"flex",flexDirection:"column",gap:4,width:"100%"},workspaceLabel:{fontSize:M().J.UIRegular.desktop,fontWeight:M().Wy.regular,color:j().Tj.text.primary},permissionRoleSelect:{fontSize:12,color:j().Tj.text.secondary,fontWeight:M().Wy.medium},resourcePickerWrapper:{marginBottom:4}})),[]),F=(0,s().K8)((()=>E.canEdit()),[E]),W=(0,s().K8)((()=>{if(!t.permissions)return null;for(const e of t.permissions)if("search"!==e.type&&"notion"===e.type&&"object"==typeof e.identifier&&!Array.isArray(e.identifier)&&"workspacePublic"===e.identifier.type)return{identifier:"*",actions:e.actions};return null}),[t.permissions]),L=(0,s().K8)((()=>(0,k().eR)({permissions:t.permissions,defaultIfMissingExplicitPermission:S().TO})),[t.permissions]),H=(0,s().K8)((()=>{if(!t.permissions)return[];const e=[];for(const n of t.permissions)if("search"!==n.type&&"notion"===n.type)if("object"!=typeof n.identifier||Array.isArray(n.identifier));else{if("workspacePublic"===n.identifier.type)continue;if("pageOrCollectionViewBlock"===n.identifier.type){const t=(0,m().Q2)({baseUrl:r().A.domainBaseUrl,pageId:n.identifier.blockId}),o=e.find((e=>e.identifier===t));o?o.actions=(0,T().sb)([...o.actions,...n.actions]):e.push({identifier:t,blockId:n.identifier.blockId,actions:n.actions})}}return e}),[t.permissions]),$=(0,o.useCallback)((e=>{if(!t.permissions)return;const o=t.permissions.filter((t=>{if("search"===t.type)return!0;if("notion"!==t.type)return!0;if("object"==typeof t.identifier&&!Array.isArray(t.identifier)){if("pageOrCollectionViewBlock"===t.identifier.type){return(0,m().Q2)({baseUrl:r().A.domainBaseUrl,pageId:t.identifier.blockId})!==e}if("workspacePublic"===t.identifier.type)return"*"!==e}return!1}));n({...t,permissions:o})}),[t,n]),Y=(0,o.useCallback)(((e,o)=>{if("none"===o)return void $(e);const i=We[o];if("none"===i)return void $(e);const a=i;if(!t.permissions||0===t.permissions.length){let o;try{o=I(e,{baseUrl:r().A.domainBaseUrl,publicDomainName:r().A.publicDomainName})}catch{return}const i={moduleType:"notion",type:"notion",identifier:o,actions:[a]};return void n({...t,permissions:[i]})}if(!t.permissions.find((t=>{if("search"===t.type)return!1;if("object"==typeof t.identifier&&!Array.isArray(t.identifier)){if("workspacePublic"===t.identifier.type)return"*"===e;if("pageOrCollectionViewBlock"===t.identifier.type){return(0,m().Q2)({baseUrl:r().A.domainBaseUrl,pageId:t.identifier.blockId})===e}}return!1}))){const o={moduleType:"notion",type:"notion",identifier:I(e,{baseUrl:r().A.domainBaseUrl,publicDomainName:r().A.publicDomainName}),actions:[a]};return void n({...t,permissions:[...t.permissions,o]})}const s=t.permissions.map((t=>{if("search"===t.type)return t;if("workspacePublic"===t.identifier.type){if("*"===e)return{...t,actions:[a]}}else if("pageOrCollectionViewBlock"===t.identifier.type){if((0,m().Q2)({baseUrl:r().A.domainBaseUrl,pageId:t.identifier.blockId})===e)return{...t,actions:[a]}}return t}));n({...t,permissions:s})}),[t,n,$]),G=(0,o.useCallback)((e=>{const o=[...t.permissions||[]].filter((e=>!("search"===e.type&&"object"==typeof e.identifier&&!Array.isArray(e.identifier)&&"helpdocs"===e.identifier.type))),i={moduleType:"notion",type:"search",identifier:{type:"helpdocs"},actions:"none"!==e?["allow"]:["disallow"]};o.push(i),n({...t,permissions:o})}),[t,n]),q=(0,o.useCallback)((e=>{const t=(0,D().i4)(E);t&&(0,R().ik)({environment:N,connected_tool:"notion",workflow_id:t,resource_type:"page"}),Y(e.identifier,"reader")}),[Y,N,E]),Q=(0,o.useCallback)((e=>{E.table===x().C0&&function(e){var t;const{blockId:n,moduleValue:o,store:r,environment:a}=e,s=r.getPublishedArtifactStore(),l=null==s?void 0:s.getData(),d=null==l?void 0:l.runtime_actor_pointer;if(!d||d.table!==y().GP)return;const u=null===(t=o.permissions)||void 0===t?void 0:t.find((e=>"notion"===e.type&&"pageOrCollectionViewBlock"===e.identifier.type&&e.identifier.blockId===n));if(!u||"notion"!==u.type)return;const p=u.actions[0];if(!p)return;const m=h().UA[p];if(!(0,b().IL)(m))return;const f=(0,i().f)(r);if(!f)return;const g=c().B.createChildStore(f,{table:v().ev,id:n,spaceId:f.getSpaceId()}),w={type:"bot_permission",bot_id:d.id,role:m};_().createAndCommit({userAction:"NotionModulePermissions.restoreResourceAccess",environment:a,canUndo:!0,perform:e=>{C().zP({environment:a,store:g,permissionItems:[w],transaction:e})}})}({blockId:e,moduleValue:t,store:E,environment:N})}),[t,E,N]),Z=(0,o.useMemo)((()=>B().PA),[U]),J=(0,s().K8)((()=>(0,i().f)(E)),[E]),X=(0,s().K8)((()=>{var e;return(null===(e=E.getSpaceStore())||void 0===e||null===(e=e.getModel())||void 0===e?void 0:e.getName())??""}),[E]);return(0,ae.jsxs)("div",{style:K.permissionsContainer,children:[(0,ae.jsxs)(d().Y1,{direction:"horizontal",align:"center",gap:8,style:{paddingInlineStart:10},children:[(0,ae.jsx)(u().I,{icon:f().bookSmallIcon,size:"sm"}),(0,ae.jsx)(p().D,{style:K.workspaceLabel,children:(0,ae.jsx)(A().sA,{id:"workflows.notion.permissions.helpDocsSearch",defaultMessage:"Help Center"})}),(0,ae.jsx)(d().Y1,{align:"end",gap:"auto",children:(0,ae.jsx)(P().Ay,{disabled:!F,spaceStore:J,table:v().ev,type:"user_permission",role:L?"reader":"none",availableRoleItems:B().PA,alignmentToOrigin:"end",onChange:e=>{(0,h().PW)(e)&&G(e)},upgradeButtonName:"user_permission_item",isRemovableOverride:!1,isNoneOverride:!0,buttonStyle:K.permissionRoleSelect})})]}),(0,ae.jsxs)(d().Y1,{direction:"horizontal",align:"center",gap:8,style:{paddingInlineStart:10},children:[(0,ae.jsx)(u().I,{icon:g().k,size:"sm"}),(0,ae.jsx)(p().D,{style:K.workspaceLabel,children:(0,ae.jsx)(A().sA,{id:"workflows.notion.permissions.workspace",defaultMessage:"Pages shared with everyone in {spaceName}",values:{spaceName:X}})}),(0,ae.jsx)(d().Y1,{align:"end",gap:"auto",children:(0,ae.jsx)(P().Ay,{disabled:!F,spaceStore:J,table:v().ev,type:"user_permission",role:W?W.actions[0]||"reader":"none",availableRoleItems:Z,alignmentToOrigin:"end",onChange:e=>{(0,h().PW)(e)?Y("*",e):$("*")},upgradeButtonName:"user_permission_item",isRemovableOverride:!1,isNoneOverride:!0,buttonStyle:K.permissionRoleSelect})})]}),H.map((e=>(0,ae.jsx)(Ce,{identifier:e.identifier,actions:e.actions,workflowDefinitionPointer:O,store:E,handleUpdatePermission:Y,handleRestoreAccess:()=>Q(e.blockId),disabled:!F},e.identifier))),E.table!==w().To?(0,ae.jsx)(_e,{moduleValue:t,store:E,workflowDefinitionPointer:O,workflow:z,handleUpdatePermission:Y}):void 0,F&&!(0,k().uP)(z)?(0,ae.jsx)("div",{style:K.resourcePickerWrapper,children:(0,ae.jsx)(Fe,{onSelectResource:q,workflowDefinitionPointer:O})}):void 0]})}},721253:(e,t,n)=>{n.d(t,{lv:()=>h,C5:()=>g,u7:()=>f,uh:()=>b});var o=()=>n(560198),i=()=>n(267785),r=()=>n(100622);const a="theme";var s=()=>n(534177),l=()=>n(44551);var c=()=>n(20822),d=()=>n(661179);const u=15;function p(e,t){const{ThemeStore:n}=e,{mode:s,usingSystemTheme:c}=t;if(o()._u)return;const d={mode:s};var u,p;n.setState(d),e.mobileNative&&e.mobileNative.setTheme(s,c),u=function(e,t){const n=(0,r().O4)({theme:e});return{mode:e,usingSystemTheme:t,colors:{white:r().oZ.white,blue:r().oZ.blue},borderRadius:4,textColor:n.text.primary,popoverBackgroundColor:n.popoverBackground,popoverBoxShadow:n.shadowMD,inputBoxShadow:n.inputBoxShadow,inputBackgroundColor:n.inputBackground,dividerColor:n.border.primaryTranslucent,shadowOpacity:0}}(s,c),null===l().electronApi||void 0===l().electronApi||null===(p=l().electronApi.setTheme)||void 0===p||p.call(l().electronApi,u);try{localStorage.setItem(a,JSON.stringify(d))}catch(m){(0,i().x)(a,JSON.stringify(d),"ThemeActions",m)}f(s),"dark"===s?(document.body.classList.add("dark"),document.body.classList.add("notion-dark-theme")):(document.body.classList.remove("dark"),document.body.classList.remove("notion-dark-theme"))}const m={scrollbarTrack:{light:"rgba(0, 0, 0, 0)",dark:"rgba(0, 0, 0, 0)"},scrollbarThumb:{light:"#D3D1CB",dark:"rgba(255, 255, 255, 0.2)"}};function f(e){if(0===d().A.state)return;const t=document.getElementById("scroll-properties");t&&(t.innerHTML=`\n\t\t* {\n\t\t\tscrollbar-width: ${u}px;\n\t\t\tscrollbar-color: ${m.scrollbarThumb[e]}  ${m.scrollbarTrack[e]};\n\t\t}\n\t`)}function g(e){c().A.setState(e)}function b(e){const t=h();switch(t){case"dark":case"light":p(e,{mode:t,usingSystemTheme:!1});break;case"system":!async function(e){const{mobileNative:t}=e;let n="light";n=t&&t.api.getTheme?await t.api.getTheme():(0,o().VD)(e),p(e,{mode:n,usingSystemTheme:!0})}(e);break;default:(0,s().HB)(t)}}function h(){const e=c().A.state||"system";return"dark"===(t=e)||"light"===t||"system"===t?t:"system";var t}},730307:(e,t,n)=>{n.d(t,{l:()=>m});var o=()=>n(779315),i=()=>n(292985),r=()=>n(161479),a=()=>n(878523),s=()=>n(129522),l=()=>n(404783),c=()=>n(555776),d=()=>n(116008),u=()=>n(36088),p=()=>n(405981);async function m(e){var t;const{environment:n,blockStore:m,rect:f,property_id:g,from:b}=e;if(d().A.hasContent())return void(0,p()._y)({environment:n,reason:"starting_new"});const h=s().K.getRect(m);if(!h)return;const v=new(l().A)(n,(0,r().e)(m.pointer.spaceId)),y=h.width,w=h.height,x=h.right-y;d().A.setState({open:!0,rect:f||new DOMRect(x,h.top,y,w),type:"block",content:"comment",blockStore:m,blockId:m.id,discussionInputStore:v,property_id:g,lastKnownBlockStore:m,from:b}),(0,i().V)({element:null===(t=o().A.UpdateSidebarCommentScroller)||void 0===t?void 0:t.getNode(),environment:n,options:{top:0,behavior:"smooth"}}),c().A.setActiveWithSource("text_annotation"),await(0,u().M)({discussionInputStore:v,environment:n}),a().j4(n,{from:b})}},748977:(e,t,n)=>{n.d(t,{k:()=>i});n(296540);const o={viewBox:"0 0 16 16",fittedViewBox:"0.55 1.9 15.26 11.99",svg:(0,n(474848).jsx)("path",{d:"M9.336 2.869c.48-.6 1.192-.96 2.064-.96s1.584.36 2.065.96c.468.583.687 1.352.687 2.144 0 .793-.219 1.561-.687 2.145-.48.599-1.193.96-2.065.96s-1.584-.361-2.064-.96c-.469-.584-.687-1.352-.687-2.145s.218-1.56.687-2.144m.98.786c-.252.313-.411.783-.411 1.358s.16 1.046.41 1.359c.24.298.589.49 1.085.49s.846-.192 1.085-.49c.251-.313.41-.783.41-1.359 0-.575-.159-1.045-.41-1.358-.239-.298-.589-.49-1.085-.49s-.846.192-1.085.49M4.6 2.572c-.803 0-1.462.334-1.907.888-.433.539-.632 1.245-.632 1.97s.2 1.43.632 1.97c.445.553 1.104.887 1.907.887.804 0 1.463-.334 1.907-.888.433-.539.632-1.245.632-1.97S6.94 4 6.507 3.46c-.444-.553-1.103-.887-1.907-.887M3.317 5.43c0-.507.14-.916.356-1.184.203-.253.5-.418.927-.418s.725.165.928.418c.215.268.355.677.355 1.184s-.14.915-.355 1.183c-.203.253-.5.418-.928.418s-.724-.165-.927-.418c-.216-.268-.356-.676-.356-1.183m-.887 7.206h3.344c.076.466.268.896.539 1.256H2.43c-.577 0-1.132-.243-1.49-.656a1.51 1.51 0 0 1-.23-1.675c.68-1.42 2.175-2.389 3.89-2.389.797 0 1.547.21 2.19.576a5.6 5.6 0 0 0-.685 1.056 3.16 3.16 0 0 0-1.505-.376c-1.24 0-2.29.699-2.758 1.676a.26.26 0 0 0-.03.161c.007.04.028.092.076.148a.73.73 0 0 0 .542.223M11.4 8.84c-1.917 0-3.58 1.117-4.279 2.735a1.54 1.54 0 0 0 .268 1.665c.36.41.913.652 1.49.652h5.04c.579 0 1.131-.242 1.492-.652a1.54 1.54 0 0 0 .268-1.665c-.7-1.618-2.362-2.736-4.279-2.736m-3.126 3.233c.496-1.147 1.698-1.978 3.126-1.978s2.63.831 3.126 1.978c.055.128.034.233-.058.338a.74.74 0 0 1-.548.225H8.88a.74.74 0 0 1-.548-.225c-.092-.105-.113-.21-.058-.338"})},i=(0,n(340498).wt)("peopleSmall",o,"small")},756114:(e,t,n)=>{n.d(t,{D:()=>o});function o(e,t){t.route.name;return!1}},786702:(e,t,n)=>{n.d(t,{w:()=>r});var o=()=>n(726637),i=()=>n(435386);function r(e){return(0,i().w)({url:e,config:o().A})}},786937:(e,t,n)=>{n.d(t,{W:()=>i});n(944114);var o=()=>n(245241);function i(e){const t=[],n=[];let i;for(const s of e){var r;var a;if((null===(r=s.sources)||void 0===r?void 0:r.includes(o().Ni.Local))?t.push(s):n.push(s),!i&&s.serverEventProperties)i=null===(a=s.serverEventProperties)||void 0===a?void 0:a["server-searchExperiments"]}return{localResults:t,serverResults:n,exposedSearchExperiments:i}}},800140:(e,t,n)=>{n.d(t,{s:()=>r});var o=()=>n(917908),i=()=>n(414754);function r(e){o().H.canGoForward()&&(0,i().o)({environment:e,offset:1})}},811558:(e,t,n)=>{var o=n(746518),i=n(439928),r=n(225397),a=Array;o({target:"Array",proto:!0},{with:function(e,t){return i(r(this),a,e,t)}})},852219:(e,t,n)=>{n.r(t),n.d(t,{bookSmallIcon:()=>i,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 16 16",fittedViewBox:"1.48 2.62 13.03 10.76",svg:(0,n(474848).jsx)("path",{d:"M1.73 3.768C3.598 2.34 6.058 2.25 8 3.501c1.942-1.251 4.402-1.162 6.27.267a.63.63 0 0 1 .245.497v8.485a.625.625 0 0 1-1.005.496c-1.543-1.18-3.584-1.18-5.128-.001l-.015.01a.7.7 0 0 1-.19.094.62.62 0 0 1-.56-.105c-1.543-1.18-3.584-1.178-5.127.002a.625.625 0 0 1-1.005-.496V4.265c0-.195.09-.379.245-.497m1.005 7.87a5.37 5.37 0 0 1 4.64 0V4.586a4.14 4.14 0 0 0-4.64 0zm5.89 0a5.37 5.37 0 0 1 4.64 0V4.586a4.14 4.14 0 0 0-4.64 0z"})},i=(0,n(340498).wt)("bookSmall",o,"small")},863059:(e,t,n)=>{n.d(t,{Hh:()=>M,Kh:()=>I,Nq:()=>k,U:()=>A,gQ:()=>C,nh:()=>T,u7:()=>j});var o=n(296540),i=()=>n(726637),r=()=>n(484714),a=()=>n(590526),s=()=>n(401497),l=()=>n(75435),c=()=>n(418135),d=()=>n(340498),u=()=>n(175947),p=()=>n(100622),m=()=>n(180252),f=()=>n(614949),g=()=>n(696746),b=()=>n(900652),h=()=>n(441199),v=()=>n(644914),y=()=>n(224011),w=()=>n(150193),x=()=>n(965833);const S=10;function k(){const{isElectronWindows:e}=(0,r().Y0)(),t=(0,a().O$)(l().b),n=(0,a().K8)((()=>l().A.state.zoomFactor||c().rx),[]),s=e&&!t;return(0,o.useMemo)((()=>s?(0,c().yA)(n)+4:i().A.isMobile?4:S),[s,n])}function I({shouldRenderTemplateGalleryTopbar:e}){const t=(0,r().v3)(),n=(0,a().K8)((()=>l().A.state.zoomFactor),[]),s=(0,a().O$)(l().b),d=(0,a().K8)((()=>(0,f().X)(t).shouldShowSidebar),[t]),p=(0,a().K8)((()=>(0,v().KB)(t)),[t]),m=(0,a().K8)((()=>h().default.isPanelPinnedState()),[]),g=(0,a().K8)((()=>y().A.state.isFullScreen),[]),{device:b}=t,w=n||c().rx,x=b.isElectronMac&&(!d||!p&&!m)&&!g&&!s,S=b.isElectronWindows&&!s,k=S&&(!d||!p&&!m);let I=u().ek(b.isElectronMac);e&&(I=u().Hi);return(0,o.useMemo)((()=>({display:"flex",justifyContent:"space-between",alignItems:"center",overflow:"hidden",height:I,paddingInlineStart:x?(0,c().n$)(w):k?46:i().A.isMobile?4:12,paddingInlineEnd:S?(0,c().yA)(w)+4:i().A.isMobile?4:10})),[I,x,w,k,S])}function A({store:e,shouldRenderTemplateGalleryTopbar:t,isBrowserFullScreen:n}){const o=(0,r().v3)(),i=(0,r().Y0)(),d=(0,r().WS)(),f=(0,a().K8)((()=>"meet"===o.RouterStore.state.route.name),[o.RouterStore]),h=(0,a().K8)((()=>((0,g().lU)(e)||f)&&0===w().A.state.banners.length),[e,f]);let y=u().ek(i.isElectronMac);t&&(y=2*u().Hi);const S=(0,a().K8)((()=>b().Z8()),[]),k=(0,a().O$)((0,m().$o)(o)),I=(0,a().K8)((()=>l().A.state.zoomFactor),[]),A=u().pz(i.isElectronMac,n,I||c().rx);return(0,s().IS)((()=>({header:{background:h&&!d?"transparent":p().Tj.background.primary,maxWidth:"100vw",zIndex:100,WebkitUserSelect:"none",userSelect:"none",position:"relative"},container:{width:`calc(100% - ${S}px)`,maxWidth:"100vw",height:y,opacity:k?0:1,transition:`\n\t\t\t\t\t\topacity ${x().L}ms,\n\t\t\t\t\t\tcolor ${x().L}ms\n\t\t\t\t\t`,position:"relative",insetInlineStart:S},electronTopbarSidebarMousePeekArea:{position:"absolute",top:0,bottom:-v().qe,width:`${A}px`}})),[h,d,S,k,y,A])}const j=34,T=28;function M(){return{iconButton:{width:j,height:T,marginInlineEnd:2},icon:{height:d().Ev.lg,width:d().Ev.lg,fill:p().Tj.icon.primary},tabletIcon:{height:d().lD.lg,width:d().lD.lg,fill:p().Tj.icon.primary}}}function C(){return(0,s().IS)(M,[])}},866805:(e,t,n)=>{n.d(t,{Jl:()=>d,Ni:()=>l,OE:()=>c});var o=()=>n(242422),i=()=>n(726637),r=()=>n(534177),a=()=>n(246679),s=()=>n(243331);const l=3;function c(){if(i().A.isMobile)return!1;if(!o().default.checkGate({gateName:"agent_daily_brief"}))return!1;const e="authenticated"===a().gv.state.status,t="authenticated"===s().Lf.state.status;return e&&t}async function d(e={}){var t;const{spaceId:o,environment:i,...a}=e,{UserChatPreferenceLocalStorageStore:s}=await n.e(37342).then(n.bind(n,166442)),{AGENT_MODEL_TYPES:l}=await n.e(27992).then(n.bind(n,365646)),c=o?(null===(t=s.getState())||void 0===t?void 0:t[o])??{}:{},{model:d}=c;let u=d&&(0,r().Xk)(l,d)?d:void 0;if(o&&u){const{getAvailableWorkflowAgentModels:e}=await Promise.all([n.e(27992),n.e(7049)]).then(n.bind(n,676953));e(i,o).has(u)||(u=void 0)}const{getWorkflowAgentConfig:p}=await Promise.all([n.e(35530),n.e(55373),n.e(36192),n.e(27992),n.e(63452),n.e(66249),n.e(87249),n.e(79022),n.e(34877),n.e(32236)]).then(n.bind(n,844317)),m=p({...a,spaceId:o,model:u,useReadOnlyMode:!1}),f=!0;return m.enableUserSessionContext=!0,m.enableQueryCalendar=f,m.enableQueryMail=f,m.enableAgentViewNotificationsTool=f,m.agentFollowupVariation=void 0,m}},912749:(e,t,n)=>{n.d(t,{N:()=>s});var o=()=>n(590526),i=()=>n(758256),r=()=>n(915671),a=()=>n(770160);function s(e,t){return{threadStore:(0,a().useThreadStoreFromCurrentRoute)(),workflowValue:(0,o().K8)((()=>(t&&e.table!==i().U6?e.getDraftData():e.getData())??(0,r().bZ)()),[e,t])}}},921123:(e,t,n)=>{n.r(t),n.d(t,{archiveBoxFillIcon:()=>i,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"3.12 3.12 13.75 13.75",svg:(0,n(474848).jsx)("path",{d:"M3.125 4.25c0-.621.504-1.125 1.125-1.125h11.5c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125H4.25A1.125 1.125 0 0 1 3.125 5.75zm1 3.875h11.75v7.625c0 .621-.504 1.125-1.125 1.125h-9.5a1.125 1.125 0 0 1-1.125-1.125zM8 9.875a.625.625 0 1 0 0 1.25h4a.625.625 0 1 0 0-1.25z"})},i=(0,n(340498).wt)("archiveBoxFill",o,"fill")},926586:(e,t,n)=>{n.d(t,{K:()=>p});n(296540);var o=()=>n(590526),i=()=>n(75435),r=()=>n(695115),a=()=>n(182183),s=()=>n(69708),l=()=>n(44551);var c=()=>n(130119),d=n(474848);const u=(0,s().YK)({menu:{defaultMessage:"Menu",id:"topbar.appMenuButton.title"}});function p(){const e=(0,s().tz)();return(0,o().O$)(i().b)?null:(0,d.jsx)(r().A,{style:{position:"absolute",top:"10px",insetInlineStart:"14px",width:24,height:24,zIndex:1e5,...(0,c().g)({noDrag:!0})},colorVariant:"primary",onClick:()=>{var e;null===l().electronApi||void 0===l().electronApi||null===(e=l().electronApi.openAppMenu)||void 0===e||e.call(l().electronApi)},icon:a().notionTintableIcon,ariaLabel:e.formatMessage(u.menu)})}},937199:(e,t,n)=>{n.d(t,{LH:()=>r,Op:()=>i,bi:()=>l,sf:()=>s,v$:()=>a});n(16280);var o=n(296540);const i=(0,o.createContext)(null);function r(){const e=(0,o.useContext)(i);if(!e)throw new Error("usePageLayoutEditorContext must be used inside BaseLayoutEditorContext.Provider");return e}function a(){return(0,o.useContext)(i)}i.displayName="BaseLayoutEditorContext";const s=(0,o.createContext)(null);function l(){const e=(0,o.useContext)(s);if(!e)throw new Error("usePageLayoutEditorContext must be used inside PageLayoutEditorContextProvider");return e}s.displayName="PageLayoutEditorContext"},965833:(e,t,n)=>{n.d(t,{L:()=>o});const o=700},976582:(e,t,n)=>{n.d(t,{m:()=>r});var o=n(296540);class i{constructor(e){this.topbarRenderLocation=void 0;const{topbarRenderLocation:t}=e;this.topbarRenderLocation=t}get showNewTabButton(){return{AIChat:!0,DefaultTopbar:!0,Marketplace:!0,PersonProfile:!0,PersonalHome:!0,PersonalHomeScrolled:!0,PublicPage:!0,PublicSharing:!0,TeamHome:!0,TrustedDomainPage:!0,WorkflowEditor:!0,AssistantMenuHeader:!1,Meet:!1}[this.topbarRenderLocation]}get topbarActionsDisplayStyle(){return{PersonalHome:"transparent",PersonalHomeScrolled:"bordered",AIChat:"solid",AssistantMenuHeader:"solid",DefaultTopbar:"solid",Marketplace:"solid",PersonProfile:"solid",PublicPage:"solid",PublicSharing:"solid",TeamHome:"solid",TrustedDomainPage:"solid",WorkflowEditor:"solid",Meet:"solid"}[this.topbarRenderLocation]}get showDesktopAppMenuIconButton(){return{AIChat:!0,AssistantMenuHeader:!1,DefaultTopbar:!1,Marketplace:!1,PersonProfile:!1,PersonalHome:!1,PersonalHomeScrolled:!1,PublicPage:!1,PublicSharing:!1,TeamHome:!1,TrustedDomainPage:!1,WorkflowEditor:!1,Meet:!1}[this.topbarRenderLocation]}}function r(e){const{location:t}=e;return(0,o.useMemo)((()=>new i({topbarRenderLocation:t})),[t])}}}]);