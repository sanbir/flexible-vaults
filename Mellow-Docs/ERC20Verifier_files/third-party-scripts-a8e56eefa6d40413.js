"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[1978],{63620:(e,a,t)=>{t.r(a),t.d(a,{InjectThirdPartyScripts:()=>R,useThirdPartyScripts:()=>L});var i=t(296540),s=()=>t(300474),n=()=>t(907258),o=()=>t(242422),r=()=>t(726637),c=()=>t(312788),l=()=>t(484714),d=()=>t(590526),u=()=>t(918516),g=()=>t(267956),p=()=>t(262661),f=(t(944114),()=>t(498212)),_=()=>t(283699),m=()=>t(591779),y=()=>t(299917);const S={siteId:"a2a8e2144b2bbbb4074a",orgId:"901895b8-45c7-40c8-ba91-626cfc6739b3"};function w(){var e,a,t;if(!window._cio)for(window._cio=[],e=function(e){return function(){window._cio.push([e].concat(Array.prototype.slice.call(arguments,0)))}},a=["load","identify","sidentify","track","page","on","off","reset"],t=0;t<a.length;t++)window._cio[a[t]]=e(a[t])}var v=()=>t(955104),b=()=>t(902052),k=()=>t(576727),I=()=>t(680074),E=()=>t(466088),A=()=>t(438754),O=()=>t(762014),C=()=>t(79926);const h=new(C().O2)("sentry",t(445155).q);var D=()=>t(240865);function L(){const{navigate:e}=(0,i.useContext)(c().E),a=(0,l().v3)(),t=(0,D().V)()||0,L=(0,l().Y0)(),{currentUser:R}=a,T=(0,s().r)(),{siteGoogleAnalyticsId:G,requestedOnPublicDomain:M}=(0,d().K8)((()=>{if(!(0,E().w)(a))return{siteGoogleAnalyticsId:void 0,requestedOnPublicDomain:!1};const{publicPageData:e}=g().A.state,{siteGoogleAnalyticsId:t}=e||{};return t&&t.match(/[0-9A-Z]+/)?{siteGoogleAnalyticsId:`G-${t}`,requestedOnPublicDomain:!0}:{siteGoogleAnalyticsId:void 0,requestedOnPublicDomain:!0}}),[a]);!function({isEnabled:e,cookieService:a,siteGoogleAnalyticsId:t}){(0,i.useEffect)((()=>{(async function(){return!(!e||!t||!(await _().nQ({service:"google_tag_manager",cookieService:a}))||"dataLayer"in window)})().then((e=>{if(e)return(0,y().Ay)(`https://www.googletagmanager.com/gtag/js?id=${t}`,{id:"notion-site-google-analytics"}).catch((e=>{console.error("GA script failed to load",e)})).then((()=>{if(window.dataLayer){function e(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",t)}}))}))}),[e,a,t])}({isEnabled:Boolean(M),siteGoogleAnalyticsId:G,cookieService:a.cookieService}),function({isEnabled:e,isLoggedIn:a,userId:t,onMessageOpened:s,onMessageDismissed:n,onMessageError:o,onMessageAction:r,cookieService:c}){(0,i.useEffect)((()=>{(async function(){return!!e&&!!(await _().nQ({service:"customer_io",cookieService:c}))&&!("cio-tracker"in window)})().then((e=>{if(e)return w(),(0,y().Ay)("https://assets.customer.io/assets/track.js",{id:"cio-tracker",attributes:{"data-site-id":S.siteId,"data-use-array-params":"true","data-in-app-org-id":S.orgId,"data-use-in-app":"true","data-auto-track-page":"false"}}).catch((e=>{console.warn("Customer.io failed to load",e)}))}))}),[e,c]);const l=(0,m().ZC)(t);(0,i.useEffect)((()=>{l!==t&&(w(),a&&void 0!==t?(window._cio.identify({id:(0,f().Xw)(t)}),s&&window._cio.on("in-app:message-opened",s),n&&window._cio.on("in-app:message-dismissed",n),r&&window._cio.on("in-app:message-action",r),window._cio.on("in-app:message-error",o)):window._cio.reset())}),[a,t,l,s,n,o,r])}({isEnabled:(0,d().K8)((()=>R.isLoggedIn()),[R]),isLoggedIn:R.isLoggedIn(),userId:R.id,onMessageOpened:e=>{O().A.state.suppressReason?b().pO(a,{message_id:e.detail.messageId,reason:O().A.state.suppressReason}):(O().A.setState({...O().A.state,isVisible:!0}),b().v4(a,{message_id:e.detail.messageId}))},onMessageDismissed:e=>{O().A.setState({...O().A.state,isVisible:!1}),b().gQ(a,{message_id:e.detail.messageId})},onMessageError:e=>{b().gr(a,{message_id:e.detail.messageId})},onMessageAction:t=>{if(t.detail.actionValue.startsWith("relative_url=")){const i=t.detail.actionValue.split("relative_url=")[1];e({environment:a,url:i})}t.detail.message.dismiss()},cookieService:a.cookieService}),(0,v().LW)({...(0,d().K8)((()=>{var e,i;const s=a.RouterStore.state.route,r="settingsConsoleOrganization"===s.name&&"onboarding"===(null===(e=s.tabRoute)||void 0===e?void 0:e.name),c="settingsConsoleOrganization"===s.name&&!r,l=!r&&(c||o().default.checkGate({gateName:"sprig"})),d=k().default.state.isSprigEnabled&&A().A.state.permission.performance&&l&&L.isDesktop&&!(0,E().w)(a),{currentUserSettingsStore:u,sidebarSpaceStore:g,currentUserStore:f}=n().default.state,_=null==f?void 0:f.getEmail(),m=u?(0,p().i)(u):null,y=Boolean(null==g?void 0:g.canAdmin()),S=null==g||null===(i=g.getModel())||void 0===i?void 0:i.getDaysSinceCreated();return{isEnabled:d,userEmail:_,userDaysSinceSignup:m??0,userDomainType:(0,I().FX)(),daysSinceSpaceCreated:S,isSpaceAdmin:y,spaceMemberCount:t}}),[L,t,a]),isLoggedIn:R.isLoggedIn(),userId:R.id,spaceId:T,sprigConfig:r().A.sprig}),function(e){var a;const{userId:t,spaceId:s,...n}=e,o=(0,C().fJ)(h);(0,i.useEffect)((()=>{if(!o.value)return;const{Sentry:e,sentryInitializeFull:a}=o.value;a({Sentry:{...e,isFullSDK:!0},config:r().A,...n})}),[o.value,n]);const c=null===(a=o.value)||void 0===a?void 0:a.Sentry;(0,i.useEffect)((()=>{c&&c.setUser(t?{id:t}:null)}),[c,t]),(0,i.useEffect)((()=>{c&&c.setTag("space.id",s)}),[c,s])}({userId:R.id,spaceId:T,getErrorsSampleRate:(0,i.useCallback)((()=>o().default.getConfigKey("sentry","errorsSampleRate")),[]),getTracesSampleRate:(0,i.useCallback)((()=>o().default.getConfigKey("sentry","tracesSampleRate-v0")),[]),getReplaysSessionSampleRate:(0,i.useCallback)((()=>o().default.getConfigKey("sentry","replaysSessionSampleRate-v0")),[]),getReplaysOnErrorSampleRate:(0,i.useCallback)((()=>o().default.getConfigKey("sentry","replaysOnErrorSampleRate-v0")),[]),getIsProfilingEnabled:(0,i.useCallback)((()=>"sentry"===(0,u().getProfilingToolForSession)()),[]),getProfilesSampleRate:(0,i.useCallback)((()=>o().default.getConfigKey("sentry","profilesSampleRate")),[])})}function R(){return L(),null}},902052:(e,a,t)=>{t.d(a,{_C:()=>s,gQ:()=>c,gr:()=>l,jr:()=>n,pO:()=>r,v4:()=>o});var i=()=>t(314529);function s(e,a){const{name:t,...s}=a;(0,i().DO_NOT_USE_trackLegacy)(e,"click_link",{...s,click_name:t})}function n(e,a){(0,i().DO_NOT_USE_trackLegacy)(e,"scroll",a)}function o(e,a){(0,i().DO_NOT_USE_trackLegacy)(e,"customer_io_in_app_callout_show",a)}function r(e,a){(0,i().DO_NOT_USE_trackLegacy)(e,"customer_io_in_app_callout_suppress",a)}function c(e,a){(0,i().DO_NOT_USE_trackLegacy)(e,"customer_io_in_app_callout_dismiss",a)}function l(e,a){(0,i().DO_NOT_USE_trackLegacy)(e,"customer_io_in_app_callout_error",a)}}}]);