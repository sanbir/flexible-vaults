"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[48486],{59110:(e,r,o)=>{o.r(r),o.d(r,{loadLocalSubtree:()=>C});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(803949);var t=()=>o(726637),n=()=>o(700500),i=()=>o(175482),s=()=>o(777447),a=()=>o(792071),d=()=>o(976618),c=()=>o(388821),u=()=>o(696706),p=()=>o(912720),l=()=>o(199378),f=()=>o(179034),v=()=>o(519831),_=()=>o(869558),I=()=>o(37165),m=()=>o(144081),h=()=>o(743246),y=()=>o(201980),b=()=>o(534177);function C(e){const{environment:r,blockId:o,inMemoryRecordCache:t,options:n}=e,i=r.currentUser.id,s=c().RecordMap.create(),a=new Set,d=[{pointer:{table:f().ev,id:o},parentId:"doesn't matter"}];for(;d.length>0;){const e=d.shift();if(!e)continue;if(a.has(e.pointer.id))continue;const r=o===e.pointer.id,c=R({pointer:e.pointer,recordMap:s,inMemoryRecordCache:t,currentUserId:i,cursors:d,cursor:e,options:n,isRootRequest:r});if(c)return c;a.add(e.pointer.id)}return{type:"success",recordMap:s}}function R(e){const{pointer:r,recordMap:o,inMemoryRecordCache:c,currentUserId:C,cursors:R,cursor:M,options:g,isRootRequest:k}=e;let U;return(0,u().Yt)(r,f().ev)?U=function(e){var r,o,d,c;const{pointer:u,recordMap:l,inMemoryRecordCache:v,currentUserId:I,cursors:m,cursor:C,options:R,isRootRequest:M}=e,g=v.getRecord({pointer:u,userId:I}),k=null==g?void 0:g.value;if(!k)return R.requireFullSubtree?{type:"error",reason:"missing_record",pointer:u}:void 0;const U=R.excludeCrdtData?i().ir(k):k;if(R.includeLegacyTransclusionBlockValues){if(!M&&U.parent_id!==C.parentId&&!C.isBlockContentChild)return}else if(!M&&U.parent_id!==C.parentId)return;if(U.type===n().xd.externalObjectInstance&&!R.allowCopyExternalObjectInstances)return{type:"error",reason:"encountered_external_object_instance",pointer:u};if(l.setValue(u,U),!R.skipNavigableChildren){const e=a().Bj6.fromBlock(U).getCollectionPointers();for(const r of e){const e=v.getRecord({pointer:r,userId:I});var B,w;if(e)(null===(B=e.value)||void 0===B?void 0:B.parent_table)===f().ev&&(null===(w=e.value)||void 0===w?void 0:w.parent_id)===U.id&&m.push({pointer:r,parentId:U.id});else if(R.requireFullSubtree)return{type:"error",reason:"missing_record",pointer:r}}if(U.view_ids)for(const r of U.view_ids)m.push({pointer:{table:_().Gy,id:r,spaceId:U.space_id},parentId:U.id})}if(!(R.skipBlockContent||R.skipTransclusionContainerChildren&&"transclusion_container"===U.type||R.skipNavigableChildren&&(0,n().$I)(U.type))){const e=a().Bj6.fromBlock(U).getRenderableContentIds();for(const r of e)m.push({pointer:{table:f().ev,id:r},parentId:U.id,isBlockContentChild:!0})}const j=a().Bj6.fromBlock(U).getNonContentChildren();for(const t of j)m.push({pointer:{table:f().ev,id:t},parentId:U.id,isBlockContentChild:!0});if(U.type===n().xd.externalObjectInstance){var q,x;const e=(null===(q=U.format)||void 0===q?void 0:q.related_external_object_uris_to_instance_ids)&&Object.values(null===(x=U.format)||void 0===x?void 0:x.related_external_object_uris_to_instance_ids)||[];for(const r of e)m.push({pointer:{table:f().ev,id:r,spaceId:U.space_id},parentId:U.id})}if(!R.skipNavigableChildren&&U.properties){const e=Object.values(U.properties).filter(b().O9);for(const r of e)for(const e of r)for(const r of y().uPN(e)){if(y().jIt(r)){const e=y().v55(r);m.push({pointer:{table:f().ev,id:e},parentId:U.id})}if(y().sh$(r)){const e=y().cQR(r),o=(0,s().lX)({url:e,baseUrl:t().A.domainBaseUrl,publicDomainName:t().A.publicDomainName});o&&m.push({pointer:{table:f().ev,id:o},parentId:U.id})}if(y().N53(r)){const e=y().T$c(r);e&&m.push({pointer:{table:f().ev,id:e,spaceId:U.space_id},parentId:U.id})}}}"form"===U.type&&null!==(r=U.format)&&void 0!==r&&r.form_layout_pointer&&m.push({pointer:U.format.form_layout_pointer,parentId:U.id});null!==(o=U.format)&&void 0!==o&&o.automation_id&&m.push({pointer:{table:p().yB,id:U.format.automation_id,spaceId:U.space_id},parentId:U.id});null!==(d=U.format)&&void 0!==d&&d.workflow_id&&m.push({pointer:{table:h().C0,id:U.format.workflow_id,spaceId:U.space_id},parentId:U.id});null!==(c=U.format)&&void 0!==c&&c.ai_instructions_page_pointer&&m.push({pointer:U.format.ai_instructions_page_pointer,parentId:U.id})}({pointer:r,recordMap:o,inMemoryRecordCache:c,currentUserId:C,cursors:R,cursor:M,options:g,isRootRequest:k}):(0,u().Yt)(r,v().Vl)?U=function(e){var r,o;const{pointer:t,recordMap:n,inMemoryRecordCache:i,currentUserId:s,cursors:a,cursor:d,options:c}=e;if(!c.allowCopyCollections)return{type:"error",reason:"encountered_collection",pointer:t};const u=i.getRecord({pointer:t,userId:s});if(null==u||!u.value)return c.requireFullSubtree?{type:"error",reason:"missing_record",pointer:t}:void 0;if(u.value.parent_id!==d.parentId)return;const l=u.value;n.setValue(t,l),i.forEachRecord(s,(({model:e})=>{e.table===f().ev&&e&&e.parent_id===t.id&&e.alive&&a.push({pointer:e.pointer,parentId:t.id})}));const v=(null===(r=l.format)||void 0===r?void 0:r.automation_ids)??[];for(const f of v)a.push({pointer:{table:p().yB,id:f,spaceId:l.space_id},parentId:l.id});l.schema&&Object.values(l.schema).forEach((e=>{e&&"button"===e.type&&e.automation_id&&a.push({pointer:{id:e.automation_id,spaceId:l.space_id,table:p().yB},parentId:l.id})}));null!==(o=l.format)&&void 0!==o&&o.layout_pointer&&a.push({pointer:l.format.layout_pointer,parentId:l.id})}({pointer:r,recordMap:o,inMemoryRecordCache:c,currentUserId:C,cursors:R,cursor:M,options:g}):(0,u().Yt)(r,_().Gy)?U=function(e){var r,o;const{pointer:t,recordMap:n,inMemoryRecordCache:i,currentUserId:s,cursors:a,cursor:d,options:c}=e,u=i.getRecord({pointer:t,userId:s});if(null==u||!u.value)return c.requireFullSubtree?{type:"error",reason:"missing_record",pointer:t}:void 0;if(u.value.parent_id!==d.parentId)return;"form_editor"===u.value.type&&null!==(r=u.value.format)&&void 0!==r&&r.form_block_pointer&&a.push({pointer:u.value.format.form_block_pointer,parentId:u.value.id});null!==(o=u.value.format)&&void 0!==o&&o.dashboard_layout_pointer&&a.push({pointer:u.value.format.dashboard_layout_pointer,parentId:u.value.id});n.setValue(t,u.value)}({pointer:r,recordMap:o,inMemoryRecordCache:c,currentUserId:C,cursors:R,cursor:M,options:g}):(0,u().Yt)(r,p().yB)?U=function(e){const{pointer:r,recordMap:o,inMemoryRecordCache:t,currentUserId:n,cursors:i,cursor:s,options:a}=e,d=t.getRecord({pointer:r,userId:n});if(null==d||!d.value)return a.requireFullSubtree?{type:"error",reason:"missing_record",pointer:r}:void 0;if(d.value.parent_id!==s.parentId)return;o.setValue(r,d.value);for(const c of d.value.action_ids??[])i.push({pointer:{table:l().SC,id:c,spaceId:d.value.space_id},parentId:d.value.id})}({pointer:r,recordMap:o,inMemoryRecordCache:c,currentUserId:C,cursors:R,cursor:M,options:g}):(0,u().Yt)(r,l().SC)?U=function(e){const{pointer:r,recordMap:o,inMemoryRecordCache:t,currentUserId:n,cursors:i,cursor:s,options:a}=e,d=t.getRecord({pointer:r,userId:n});if(null==d||!d.value)return a.requireFullSubtree?{type:"error",reason:"missing_record",pointer:s.pointer}:void 0;if(d.value.parent_id!==s.parentId)return;o.setValue(r,d.value);for(const c of d.value.blocks??[])i.push({pointer:{table:f().ev,id:c,spaceId:d.value.space_id},parentId:d.value.id})}({pointer:r,recordMap:o,inMemoryRecordCache:c,currentUserId:C,cursors:R,cursor:M,options:g}):(0,u().Yt)(r,h().C0)?U=function(e){const{pointer:r,recordMap:o,inMemoryRecordCache:t,currentUserId:n,cursor:i,options:s}=e,a=t.getRecord({pointer:r,userId:n});if(null==a||!a.value)return s.requireFullSubtree?{type:"error",reason:"missing_record",pointer:i.pointer}:void 0;if(a.value.parent_id!==i.parentId)return;o.setValue(r,a.value)}({pointer:r,recordMap:o,inMemoryRecordCache:c,currentUserId:C,cursor:M,options:g}):(0,u().Yt)(r,m().zx)?U=function(e){const{pointer:r,recordMap:o,inMemoryRecordCache:t,currentUserId:n,cursors:i,options:s}=e,c=t.getRecord({pointer:r,userId:n}),u=null==c?void 0:c.value;if(!u)return s.requireFullSubtree?{type:"error",reason:"missing_record",pointer:r}:void 0;o.setValue(r,u);const p=a().Bj6.fromValue(m().zx,u);for(const a of p.getBlockChildrenPointers())i.push({pointer:a,parentId:r.id});const l=e=>{const o={id:e.collection_view_id,table:_().Gy,spaceId:u.space_id};return i.push({pointer:o,parentId:r.id}),e};(0,d().E)(u.modules,(e=>{if("formQuestion"===e.type){const o={id:e.formQuestionId,table:I().lo,spaceId:u.space_id};i.push({pointer:o,parentId:r.id})}else if("view"===e.type)l(e);else if("row"===e.type)for(const r of e.modules)"view"===r.type&&l(r)}))}({pointer:r,recordMap:o,inMemoryRecordCache:c,currentUserId:C,cursors:R,cursor:M,options:g}):(0,u().Yt)(r,I().lo)&&(U=function(e){const{pointer:r,recordMap:o,inMemoryRecordCache:t,currentUserId:n,options:i}=e,s=t.getRecord({pointer:r,userId:n});if(null==s||!s.value)return i.requireFullSubtree?{type:"error",reason:"missing_record",pointer:r}:void 0;o.setValue(r,s.value)}({pointer:r,recordMap:o,inMemoryRecordCache:c,currentUserId:C,cursors:R,cursor:M,options:g})),U}}}]);