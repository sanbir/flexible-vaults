"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[76677],{93745:(e,t,o)=>{o.d(t,{C:()=>r});var n=()=>o(534177);function r(e){const t=e.use_end;return void 0===t||!1===t?"start_date":!0===t?"end_date":void(0,n().HB)(t)}},108791:(e,t,o)=>{o.d(t,{Kp:()=>i,Nf:()=>l});o(296540);var n=()=>o(69708),r=o(474848);function i(){return(0,r.jsx)(n().sA,{defaultMessage:"Add filter rule",id:"database.filterMenu.addFilterRuleButtonTitle"})}function l(){return(0,r.jsx)(n().sA,{id:"database.filterValue.mergeIntoAdvancedFilter.tooltip",defaultMessage:"Use an advanced filter to group filter rules and use AND/OR conditions."})}},170350:(e,t,o)=>{o.r(t),o.d(t,{filterIcon:()=>r,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.37 4.87 15.25 10.25",svg:(0,o(474848).jsx)("path",{d:"M3 4.875a.625.625 0 1 0 0 1.25h14a.625.625 0 1 0 0-1.25zm2.125 5.742h9.75a.625.625 0 1 0 0-1.25h-9.75a.625.625 0 1 0 0 1.25m1.5 3.883c0-.345.28-.625.625-.625h5.5a.625.625 0 1 1 0 1.25h-5.5a.625.625 0 0 1-.625-.625"})},r=(0,o(340498).wt)("filter",n,"default")},249947:(e,t,o)=>{o.d(t,{td:()=>Je,mL:()=>Ze,Ti:()=>ft,r9:()=>et,Ul:()=>ot});o(944114),o(898992),o(354520),o(672577),o(581454),o(737550);var n=o(296540),r=()=>o(300474),i=()=>o(782482),l=()=>o(726637),a=()=>o(383036),s=()=>o(484714),d=()=>o(121924),c=()=>o(590526),u=()=>o(401497),p=()=>o(611648),g=()=>o(770063),h=()=>o(295633),m=()=>o(569797),f=()=>o(267956),v=()=>o(718827),x=()=>o(245720),C=()=>o(127833),y=()=>o(404905),A=()=>o(250910),S=()=>o(118307),F=()=>o(420802),j=()=>o(807449),b=()=>o(695115),T=()=>o(546926),k=()=>o(352321),M=()=>o(26697),w=()=>o(302501),I=()=>o(890492),P=()=>o(81068),R=()=>o(449279),D=()=>o(663639),B=()=>o(791177),V=()=>o(736847),O=()=>o(452004),_=()=>o(764880),L=()=>o(754195),E=()=>o(93745),K=()=>o(404070),z=()=>o(335452),H=()=>o(359889),W=()=>o(343462),q=()=>o(927826),N=()=>o(478367),Y=()=>o(662149),G=()=>o(214388),$=()=>o(898244),U=()=>o(713998),Z=()=>o(784892),X=()=>o(597777),Q=()=>o(604995),J=()=>o(416504),ee=()=>o(854705),te=()=>o(126617),oe=()=>o(170350),ne=()=>o(236262),re=()=>o(799829),ie=()=>o(179034),le=()=>o(824862),ae=()=>o(869558),se=()=>o(437607),de=()=>o(798880),ce=()=>o(931075),ue=()=>o(69708),pe=()=>o(100622),ge=()=>o(778078),he=()=>o(496603),me=()=>o(534177),fe=()=>o(284371),ve=()=>o(817980),xe=()=>o(113105),Ce=()=>o(485569),ye=()=>o(251126),Ae=()=>o(419357),Se=()=>o(305390),Fe=()=>o(933117),je=()=>o(448693),be=()=>o(862139),Te=()=>o(320865),ke=()=>o(990736),Me=()=>o(399762),we=()=>o(881690),Ie=()=>o(657338),Pe=()=>o(573710),Re=()=>o(707160),De=()=>o(180252),Be=()=>o(668766),Ve=()=>o(106628),Oe=()=>o(58357),_e=()=>o(790515),Le=()=>o(649746),Ee=()=>o(108791),Ke=()=>o(732810),ze=()=>o(98126),He=()=>o(41174),We=()=>o(519831),qe=()=>o(201980),Ne=()=>o(347302),Ye=()=>o(908201),Ge=o(474848);function $e(e){const{filter:t,parentStore:o,updateValue:r,onClose:i,desktopTopActions:a,mobileMenuTitle:d,mobileMoreActions:p}=e,g=(0,Ye().ET)(),h=(0,n.useMemo)((()=>(0,G().gc)(t)?(0,G().GK)(t):[]),[t]),m=(0,s().Y0)(),f=(0,c().K8)((()=>{const e=g.collectionViewStore(),t=null==e?void 0:e.getCollectionSource();if("typed"!==(null==t?void 0:t.type))return[];const n=t.aggregatedCollections;if(!n)return[];return(0,He()._E)(n).map((e=>Ke().m.createChildStore(o,{table:We().Vl,id:e.collectionPointer.id})))}),[g,o]),v=(0,c().K8)((()=>he().oE(h.map((e=>{if(e.value)return Ke().m.createChildStore(o,{table:We().Vl,id:e.value})})))),[h,o]),C=(0,c().K8)((()=>v.map((e=>(0,Ge.jsx)(we().A,{format:l().A.isMobile?Z().NY.Large:Z().NY.Small,value:(0,Ge.jsx)(Ne().A,{collectionStore:e}),onClickRemove:()=>{const t=h.find((t=>t.value===e.id));if(t){const e=he().FF(h,t);r(e)}},showRemoveButton:!0,isSingle:!1,shouldShrink:!0,backgroundColor:"transparent",showTooltip:"overflow"},e.id)))),[v,h,r]),[y,A]=(0,n.useState)(""),S=(0,ue().tz)(),F=(0,c().K8)((()=>""===y?f:(0,ge().Ay)(y,f,(e=>qe().q4_(e.getName()??[])))),[y,f]),j=(0,c().uB)(void 0,O().$),b=(0,u().IS)((()=>({loadingContainer:{display:"flex",alignItems:"center",justifyContent:"center",padding:8},input:{margin:"0 10px",maxHeight:"20vh",overflowY:"auto"}})),[]),M=(0,c().K8)((()=>[{key:"collections",items:F.map((e=>{const t=Boolean(h.find((t=>"exact"===t.type&&t.value===e.id)));return{key:e.id,render:o=>(0,Ge.jsx)(Se().A,{...o,store:e,isChecked:t}),action:()=>{const t=he().pb(h,[{type:"exact",value:e.id}],(e=>e.value));r(t)}}})),render:e=>(0,Ge.jsx)(V().A,{...e})}]),[F,h,r]),w=(0,Ge.jsx)(k().Ay,{focus:!l().A.isMobile||void 0,focusAfterAnimation:!0,format:k().le.FilterValue,tokens:C,placeholder:S.formatMessage({defaultMessage:"Search for one or more sources",id:"database.filterValue.locationType.searchPlaceholder"}),onRemoveLastToken:()=>{const e=h.slice(0,h.length-1);r(e)},onClearButtonClick:()=>{r([]),null==i||i()},value:y,onChange:e=>{A(e.target.value)},dontShowBorderBottom:m.isAndroid,showClearButton:!0,style:b.input}),P=(0,Ge.jsxs)(V().A,{children:[l().A.isMobile?void 0:a,w]});let B,_;return B=l().A.isMobile?{menuType:T().gu.Modal,title:d,left:p,right:(0,Ge.jsx)(ue().sA,{...x().W.done}),onClickRight:i,header:P}:{menuType:T().gu.Popup,maxHeight:G().mi,width:260,header:P,disableHeaderBorder:!0},(0,G().gc)(t)?(_=g?0===f.length||""!==y&&0===F.length?(0,Ge.jsx)(V().A,{children:(0,Ge.jsx)(R().u,{title:(0,Ge.jsx)(ue().sA,{defaultMessage:"No results",id:"database.filterValue.selectType.noResults.message"})})}):(0,Ge.jsx)(D().A,{type:D().O.Vertical,initialFocus:0,sections:M,store:j,onAccept:()=>{A("")}}):(0,Ge.jsx)(V().A,{children:(0,Ge.jsx)("div",{style:b.loadingContainer,children:(0,Ge.jsx)(ze().k,{})})}),(0,Ge.jsx)(I().A,{...B,children:_})):null}var Ue=()=>o(974619);let Ze=function(e){return e[e.AdvancedFilter=0]="AdvancedFilter",e[e.PropertyFilter=1]="PropertyFilter",e[e.ConditionalColorRule=2]="ConditionalColorRule",e}({});const Xe=(0,ue().YK)({startingMessage:{defaultMessage:"Select or type a date...",id:"search.dateMenu.dateMessage"},chevronDownAriaLabel:{id:"filterDateMenu.chevronDownAriaLabel.ariaLabel",defaultMessage:"Dropdown to select a date relative to today"},pageContainingThisView:{defaultMessage:"This page",id:"database.filterValue.pageContainingThisView"}}),Qe=o(757695).Store.createClass("",{name:"QueryStore"});function Je(e){const{schema:t,propertyFilter:o,parentStore:r,onClose:l,onChange:a,onChangeDebounced:s,userCanConfigureFilters:u,onDelete:g,onAddToCombinatorFilter:h,context:m,collectionViewId:f,collectionContextStore:v,allowRelativePersonFilter:x,allowRelativeDateFilter:C,hideTopActions:y}=e,A=(0,c().uB)(void 0,S().A),F=(0,c().uB)(void 0,S().A),j=(0,c().uB)(void 0,O().$),b=(0,c().uB)(void 0,Qe),T=(0,c().K8)((()=>{var e;return"form_editor"===(null==v||null===(e=v.collectionViewStore())||void 0===e?void 0:e.getType())}),[v]);(0,d().A)({capture:!T,preventType:p().A.Y});const k=(0,n.useCallback)((e=>{null==l||l()}),[l]);return(0,Ge.jsx)(i().N,{debugName:"CollectionFilterValueMenu",capture:!0,onEsc:k,children:(0,Ge.jsx)(_t,{propertyFilter:o,schema:t,parentStore:r,onChange:a,onChangeDebounced:s,userCanConfigureFilters:u,onDelete:g,onAddToCombinatorFilter:h,context:m,onClose:l,collectionViewId:f,collectionContextStore:v,allowRelativePersonFilter:x,allowRelativeDateFilter:C,queryStore:b,menuListStore:j,dateFilterPopupStore:F,dateRangeFilterPopupStore:A,hideTopActions:y})})}function et(e){const{query:t,propertySchema:o,selectedValues:n,updateValue:r,isMobile:i,styles:l,isFormEditorView:a}=e,s=o.options||[];return(t?(0,ge().Ay)(t,s,(e=>e.value)):s).map((e=>{const t=Boolean(n.find((t=>t.value===e.value))),o={key:e.value,render:o=>(0,Ge.jsx)(P().A,{icon:(0,Ge.jsx)(F().S,{onClick:o.onClick,checked:t,size:14,style:l.checkboxIcon,disallowTabbing:!0}),title:a?e.value:(0,Ge.jsx)(Me().O,{format:i?Z().NY.Large:Z().NY.Medium,isSingle:!0,value:e.value,color:e.color,showRemoveButton:!1}),isTokenTitle:!0,...o}),action:()=>{const o=t?n.filter((({value:t})=>t!==e.value)):[...n,{type:"exact",value:e.value}];r(o)}};return o}))}function tt(e){return Array.isArray(e)?0===e.length?{type:"exact",value:void 0}:1===e.length?e[0]:e:e}function ot(e){return e===Ze.AdvancedFilter||e===Ze.PropertyFilter}function nt(e,t){return Boolean(e.find((e=>he().n4(e,t))))}function rt(){return(0,Ge.jsx)(ue().sA,{defaultMessage:"Me",id:"database.filterValue.personType.firstPersonPropertyValue.title"})}function it(e,t,o){const{filter:n}=o;(0,G().s1)(n)?null==t||t({...n,subfilter:{...n.subfilter,value:tt(e)}}):null==t||t({...n,value:tt(e)})}function lt(e,t,o){const{filter:n}=o;(0,G().s1)(n)?null==t||t({...n,subfilter:e}):null==t||t(e)}function at(e,t,o,n,r){return()=>{it(e?t.filter((e=>!he().n4(e,o))):[...t,o],r,n)}}function st({filter:e,onChange:t,propertyFilter:o,onClose:n}){return(0,G().t6)(e.value)?null:(0,Ge.jsx)(V().A,{topBorder:!0,children:(0,Ge.jsx)(P().A,{focused:!1,title:(0,Ge.jsx)(ue().sA,{defaultMessage:"Clear",id:"database.filterValue.clear.message"}),onClick:()=>{it({type:"exact",value:void 0},t,o),null==n||n()}})})}function dt({filter:e}){return(0,Ge.jsx)("span",{style:{color:pe().Tj.text.tertiary},children:(0,Le().J)(e.operator).toLocaleLowerCase()})}function ct({propertySchema:e,propertyFilter:t,onChange:o}){const n=t.filter;if(!(0,G().gc)(n)||!(0,z().n)(n))return(0,Ge.jsx)(Ge.Fragment,{children:e.name});const r={width:190,items:L().$N,selectedItem:(0,E().C)(n),getKey:e=>e,onSelect:e=>{lt({...n,use_end:(0,K().Z)(e)},o,t)},renderItem:e=>(0,Ge.jsx)(M().m,{renderTooltip:()=>(0,Le().WG)(e.value),render:t=>(0,Ge.jsx)(P().A,{title:(0,Le().h0)(e.value),...(0,a().A)(e,t)}),placement:"right",textWrap:!0,style:{width:"260px"}}),renderOrigin:e=>(0,Ge.jsx)(v().Ay,{...e,style:{marginInlineEnd:4,marginInlineStart:2,paddingInlineStart:2,paddingInlineEnd:2,borderRadius:6,flexShrink:0},children:(0,Ge.jsxs)("div",{style:{display:"flex",alignItems:"center",...!l().A.isMobile&&{color:pe().Tj.text.secondary,fill:pe().Tj.icon.tertiary,fontWeight:500,fontSize:12}},children:[(0,Ge.jsx)("span",{style:{marginInlineEnd:4},children:(0,Le().h0)((0,E().C)(n))}),(0,Ge.jsx)(j().I,{icon:ee().arrowChevronSingleDownFillSmallIcon,size:"xxs"})]})})};return(0,Ge.jsx)(Fe().A,{...r,menuTypeOverride:(0,T().PK)()})}function ut({propertyFilter:e,onChange:t}){const o=(0,ue().tz)(),{filter:n}=e;if(!(0,G().s1)(n))return null;const r={width:190,items:G().$X,getKey:e=>e,selectedItem:n.operator,onSelect:e=>{null==t||t({...n,operator:e})},renderItem:e=>(0,Ge.jsx)(P().A,{title:(0,Le().wE)(e.value,o),...e}),renderOrigin:e=>(0,Ge.jsx)(v().Ay,{...e,style:{marginInlineEnd:4,marginInlineStart:2,paddingInlineStart:2,paddingInlineEnd:2,borderRadius:6,flexShrink:0},children:(0,Ge.jsxs)("div",{style:{display:"flex",alignItems:"center",...!l().A.isMobile&&{color:pe().Tj.text.tertiary,fontSize:12}},children:[(0,Ge.jsx)("span",{style:{marginInlineEnd:4},children:(0,Le().wE)(n.operator,o).toLocaleLowerCase()}),(0,Ge.jsx)(j().I,{icon:ee().arrowChevronSingleDownFillSmallIcon,size:"xxs"})]})})};return(0,Ge.jsx)(Fe().A,{...r,menuTypeOverride:(0,T().PK)()})}function pt({propertyFilter:e,schema:t,parentStore:o,onChange:n,context:r}){const{property:i}=e,a=t[i],s=(0,G().s1)(e.filter)?e.filter.subfilter:e.filter,d=(0,c().K8)((()=>(0,G().HF)({schema:t,property:i,getRecordModel:o.getRecordModel})),[o,i,t]);if((0,G().s1)(s))return null;const u={width:190,items:(0,G().U6)({filterValueType:d,isConditionalColorRuleContext:r===Ze.ConditionalColorRule,propertySchema:a}),selectedItem:s.operator,getKey:e=>e,onSelect:t=>{lt((0,Le().iI)(d,s,t,"propertyFilter"),n,e)},renderItem:e=>(0,Ge.jsx)(P().A,{title:(0,Le().J)(e.value),...e}),renderOrigin:e=>(0,Ge.jsx)(v().Ay,{...e,style:{marginInlineEnd:4,marginInlineStart:2,paddingInlineStart:2,paddingInlineEnd:2,borderRadius:6,flexShrink:0},children:(0,Ge.jsxs)("div",{style:{display:"flex",alignItems:"center",...!l().A.isMobile&&{color:pe().Tj.text.secondary,fill:pe().Tj.icon.tertiary,fontWeight:500,fontSize:12}},children:[(0,Ge.jsx)("span",{style:{marginInlineEnd:4},children:(0,Le().J)(s.operator).toLocaleLowerCase()}),(0,Ge.jsx)(j().I,{icon:ee().arrowChevronSingleDownFillSmallIcon,size:"xxs"})]})})};return(0,Ge.jsx)(Fe().A,{...u,menuTypeOverride:(0,T().PK)()})}function gt({parent:e,userCanConfigureFilters:t,onDelete:o,onAddToCombinatorFilter:r}){const i=l().A.isMobile?{menuType:T().gu.ActionSheet}:{menuType:T().gu.Popup,maxHeight:G().mi},s=(0,n.useMemo)((()=>[{key:"actions",render:e=>(0,Ge.jsx)(V().A,{disableMobilePadding:!0,...e}),items:t?he().oE([{key:"delete",render:e=>(0,Ge.jsx)(P().A,{...e,title:(0,Ge.jsx)(ue().sA,{id:"database.filterValue.deleteFilter.title",defaultMessage:"Delete filter"}),icon:(0,Ge.jsx)(j().I,{icon:ne().trashIcon}),isRedOnHover:!0}),action:()=>{e.close(),null==o||o()}},{key:"merge",render:e=>(0,Ge.jsx)(M().m,{placement:"right",style:{maxWidth:240,whiteSpace:void 0},renderTooltip:()=>(0,Ge.jsx)("div",{children:(0,Ge.jsx)(Ee().Nf,{})}),render:t=>(0,Ge.jsx)(P().A,{...(0,a().A)(e,t),title:(0,Ge.jsx)(ue().sA,{id:"database.filterValue.mergeIntoAdvancedFilter.title",defaultMessage:"Add to advanced filter"}),icon:(0,Ge.jsx)(j().I,{icon:oe().filterIcon})})}),action:()=>{e.close(),null==r||r()}}]):[]}]),[r,o,e,t]);return(0,Ge.jsx)(I().A,{...i,children:(0,Ge.jsx)(D().A,{type:D().O.Vertical,sections:s,initialFocus:void 0})})}function ht({propertySchema:e,propertyFilter:t,onChange:o}){return(0,H().q)(e)?(0,Ge.jsx)(ct,{propertyFilter:t,onChange:o,propertySchema:e}):(0,Ge.jsx)(y().j,{children:e.name})}function mt({userCanConfigureFilters:e,onDelete:t,onAddToCombinatorFilter:o,context:n}){const r=(0,ue().tz)();return n===Ze.ConditionalColorRule?(0,Ge.jsx)(b().A,{icon:ne().trashIcon,onClick:t,ariaLabel:r.formatMessage({id:"database.filterValue.deleteConditionalColorRule.title",defaultMessage:"Delete conditional color rule"}),iconStyle:{width:16,height:16},colorVariant:"secondary",style:{marginInlineEnd:-4}}):(0,Ge.jsx)(A().A,{popupType:l().A.isMobile?C().nl.SlideUp:C().nl.Popup,render:n=>(0,Ge.jsx)(gt,{parent:n,userCanConfigureFilters:e,onDelete:t,onAddToCombinatorFilter:o}),renderOrigin:t=>e&&(0,Ge.jsx)(b().A,{ariaLabel:r.formatMessage({id:"database.filterValue.dotsIcon.ariaLabel",defaultMessage:"More actions"}),icon:te().ellipsisSmallIcon,style:{...!l().A.isMobile&&{height:20,width:20}},...t}),style:{width:240},originGap:2,placementToOrigin:"right",alignmentToOrigin:"start"})}function ft({propertyFilter:e,onChange:t,schema:o,parentStore:n,userCanConfigureFilters:r,onDelete:i,onAddToCombinatorFilter:l,context:a,hideTopActions:s}){if(s||a===Ze.AdvancedFilter)return null;const{property:d}=e,c=o[d];if(!c)return null;const u=()=>(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)("span",{style:{flexShrink:1,...fe().RC},children:(0,Ge.jsx)(ht,{propertyFilter:e,onChange:t,propertySchema:c})}),(0,G().s1)(e.filter)?(0,Ge.jsx)(ut,{propertyFilter:e,onChange:t}):void 0,(0,Ge.jsx)(pt,{propertyFilter:e,schema:o,parentStore:n,onChange:t,context:a})]}),p=()=>(0,Ge.jsx)(mt,{userCanConfigureFilters:r,onDelete:i,onAddToCombinatorFilter:l,context:a});return a===Ze.ConditionalColorRule?(0,Ge.jsx)(vt,{renderPropertyComponents:u,renderMoreActionsComponent:p}):(0,Ge.jsx)(xt,{renderPropertyComponents:u,renderMoreActionsComponent:p})}function vt({renderPropertyComponents:e,renderMoreActionsComponent:t}){const o=(0,u().IS)((()=>({container:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingInlineEnd:8,paddingInlineStart:8},propertyComponents:{display:"flex",color:pe().Tj.text.tertiary,fontSize:12,alignItems:"flex-start",paddingTop:4,paddingBottom:4,flexShrink:1,minWidth:1}})),[]);return(0,Ge.jsxs)("div",{style:o.container,children:[(0,Ge.jsx)("div",{style:o.propertyComponents,children:e()}),t()]})}function xt({renderPropertyComponents:e,renderMoreActionsComponent:t}){const o=(0,u().IS)((()=>({container:{display:"flex",color:pe().Tj.text.tertiary,fontSize:12,alignItems:"flex-start",paddingTop:4,paddingInlineEnd:8,paddingBottom:2,paddingInlineStart:8},spacer:{flexGrow:1}})),[]);return(0,Ge.jsxs)("div",{style:o.container,children:[e(),(0,Ge.jsx)("div",{style:o.spacer}),t()]})}function Ct({propertyFilter:e,schema:t,context:o,onChange:n,parentStore:r}){const{property:i}=e,l=t[i];return l?o===Ze.PropertyFilter?(0,Ge.jsxs)("div",{style:{display:"flex"},children:[(0,Ge.jsx)("span",{style:{fontWeight:fe().Wy.medium,flexShrink:1,marginInlineStart:8,maxWidth:150,...fe().RC},children:(0,Ge.jsx)(ht,{propertyFilter:e,onChange:n,propertySchema:l})}),(0,G().s1)(e.filter)?(0,Ge.jsx)(ut,{propertyFilter:e,onChange:n}):void 0,(0,Ge.jsx)(pt,{propertyFilter:e,schema:t,parentStore:r,onChange:n,context:o})]}):(0,Ge.jsx)(Ge.Fragment,{children:l.name}):null}function yt({context:e,userCanConfigureFilters:t,onDelete:o,onAddToCombinatorFilter:n}){return e!==Ze.PropertyFilter?null:(0,Ge.jsx)(mt,{userCanConfigureFilters:t,onDelete:o,onAddToCombinatorFilter:n,context:e})}function At({filter:e,onChange:t,propertyFilter:o,schema:n,parentStore:r,userCanConfigureFilters:i,onDelete:a,onAddToCombinatorFilter:s,context:d,onClose:c}){const u=(0,ue().tz)(),p=(0,Ge.jsx)(Ae().Ay,{focus:!0,focusInitial:!0,focusAfterAnimation:!0,value:(0,G().gc)(e)&&e.value.value?e.value.value:"",onChange:e=>{it({type:"exact",value:e.target.value},t,o)},onClearButtonClick:()=>{it({type:"exact",value:void 0},t,o)},placeholder:u.formatMessage({defaultMessage:"Type a value…",id:"database.filterValue.textType.searchPlaceholder"}),showClearButton:!0}),g=(0,Ge.jsxs)(V().A,{disableMobileBorders:!0,children:[l().A.isMobile?void 0:(0,Ge.jsx)(ft,{propertyFilter:o,onChange:t,schema:n,parentStore:r,userCanConfigureFilters:i,onDelete:a,onAddToCombinatorFilter:s,context:d}),(0,G().gc)(e)?p:void 0]});let h;return h=l().A.isMobile?{menuType:T().gu.Modal,title:(0,Ge.jsx)(Ct,{propertyFilter:o,schema:n,context:d,onChange:t,parentStore:r}),left:(0,Ge.jsx)(yt,{context:d,userCanConfigureFilters:i,onDelete:a,onAddToCombinatorFilter:s}),right:(0,Ge.jsx)(ue().sA,{...x().W.done}),onClickRight:()=>null==c?void 0:c(),header:g}:{menuType:T().gu.Popup,maxHeight:G().mi,width:ot(d)?220:void 0,header:g},(0,Ge.jsx)(I().A,{...h})}function St({filter:e,onChange:t,propertyFilter:o,schema:n,parentStore:r,userCanConfigureFilters:i,onDelete:a,onAddToCombinatorFilter:s,context:d,onClose:c}){const u=(0,ue().tz)(),p=(0,Ge.jsx)(Ae().Ay,{focus:!0,focusInitial:!0,focusAfterAnimation:!0,value:(0,G().gc)(e)&&"number"==typeof e.value.value?e.value.value.toString():"",inputLeft:(0,Ge.jsx)(dt,{filter:e}),onChange:e=>{it({type:"exact",value:(0,Be().q)(e.target.value,u)},t,o)},onClearButtonClick:()=>{it({type:"exact",value:void 0},t,o)},placeholder:u.formatMessage({defaultMessage:"Type a value…",id:"database.filterValue.numberType.searchPlaceholder"}),showClearButton:!0,style:{paddingBottom:8}}),g=(0,Ge.jsxs)(V().A,{disableMobileBorders:!0,disableMobilePadding:!0,children:[l().A.isMobile?void 0:(0,Ge.jsx)(ft,{propertyFilter:o,onChange:t,schema:n,parentStore:r,userCanConfigureFilters:i,onDelete:a,onAddToCombinatorFilter:s,context:d}),(0,G().gc)(e)?p:void 0]});let h;return h=l().A.isMobile?{menuType:T().gu.Modal,title:(0,Ge.jsx)(Ct,{propertyFilter:o,schema:n,context:d,onChange:t,parentStore:r}),left:(0,Ge.jsx)(yt,{context:d,userCanConfigureFilters:i,onDelete:a,onAddToCombinatorFilter:s}),right:(0,Ge.jsx)(ue().sA,{...x().W.done}),onClickRight:()=>null==c?void 0:c(),header:g}:{menuType:T().gu.Popup,maxHeight:G().mi,width:ot(d)?220:void 0,header:g},(0,Ge.jsx)(I().A,{...h})}function Ft(e,t,o){t.setState(e),o.setState({focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}function jt({filter:e,schema:t,propertyFilter:o,parentStore:r,onChange:i,onClose:a,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p,context:g,queryStore:h,menuListStore:m,collectionContextStore:f,hideTopActions:v}){const C=(0,ue().tz)(),{isAndroid:y}=(0,s().Y0)(),A=(0,c().O$)(h),S=(0,c().K8)((()=>(0,_e().YF)(t,o,r)),[t,o,r]),[F,j]=(0,B().$)(),b=(0,c().K8)((()=>{const e=null==f?void 0:f.collectionViewStore();return"form_editor"===(null==e?void 0:e.getType())}),[f]),{items:M,tokenizedInput:w}=(0,n.useMemo)((()=>{if(!S||!(0,$().lx)(S))return{items:[],tokenizedInput:null};const t=S.options||[],n=(0,G().gc)(e)?(0,G().v0)(e)?(0,G().Zl)(e):(0,G().SM)(e):[],r=n.map((e=>{if(void 0===e.value)return null;const r=(0,U().jy)(t,e.value);return r?(0,Ge.jsx)(Me().O,{format:l().A.isMobile?Z().NY.Large:Z().NY.Small,isSingle:!0,value:r.value,color:r.color,showRemoveButton:!0,onClickRemove:()=>{it(he().FF(n,e),i,o)}},r.id):null})),s=(0,Ge.jsx)("div",{style:{...!l().A.isMobile&&{paddingTop:0,paddingRight:8,paddingBottom:8,paddingLeft:8}},children:(0,Ge.jsx)(k().Ay,{focus:!l().A.isMobile||void 0,focusAfterAnimation:!0,format:k().le.FilterValue,tokens:b?[]:r,placeholder:C.formatMessage({defaultMessage:"Select one or more options…",id:"database.filterValue.selectType.searchPlaceholder"}),onRemoveLastToken:()=>{it(n.slice(0,n.length-1),i,o)},onClearButtonClick:()=>{it([],i,o),null==a||a()},value:A,onChange:e=>{Ft(e.target.value,h,m)},dontShowBorderBottom:y,showClearButton:!0,tokenWrapStyle:{paddingTop:2,gap:4},...F})});return{items:et({query:A,propertySchema:S,selectedValues:n,updateValue:e=>{it(e,i,o)},isMobile:l().A.isMobile,styles:{checkboxIcon:{fill:pe().Tj.icon.primary,pointerEvents:"none"}},isFormEditorView:b}),tokenizedInput:s}}),[S,e,b,C,A,y,F,i,o,a,h,m]);if(!S||!(0,$().lx)(S))return null;const P=(0,Ge.jsxs)(V().A,{desktopStyle:{marginTop:b?8:0},children:[l().A.isMobile||b?void 0:(0,Ge.jsx)(ft,{propertyFilter:o,onChange:i,schema:t,parentStore:r,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p,context:g,hideTopActions:v}),(0,G().gc)(e)?w:void 0]}),O=l().A.isMobile?{menuType:T().gu.Modal,title:(0,Ge.jsx)(Ct,{propertyFilter:o,schema:t,context:g,onChange:i,parentStore:r}),left:(0,Ge.jsx)(yt,{context:g,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p}),right:(0,Ge.jsx)(ue().sA,{...x().W.done}),onClickRight:()=>null==a?void 0:a(),header:P}:{menuType:T().gu.Popup,maxHeight:G().mi,width:ot(g)?260:void 0,header:P,disableHeaderBorder:!0,tokenInputHeader:!0};return(0,Ge.jsx)(I().A,{...O,children:(0,G().gc)(e)?(0,Ge.jsxs)(Ge.Fragment,{children:[0===M.length?(0,Ge.jsx)(V().A,{children:(0,Ge.jsx)(R().u,{title:(0,Ge.jsx)(ue().sA,{defaultMessage:"No results",id:"database.filterValue.selectType.noResults.message"})})}):void 0,M.length>0?(0,Ge.jsx)(D().A,{type:D().O.Vertical,initialFocus:0,sections:[{key:"select",render:e=>(0,Ge.jsx)(V().A,{...e}),items:M}],store:m,onAccept:()=>{Ft("",h,m)},comboboxProps:j}):void 0]}):void 0})}function bt({filter:e,error:t,results:o,schema:r,propertyFilter:i,parentStore:a,onChange:d,allowRelativePersonFilter:p,onClose:g,userCanConfigureFilters:h,onDelete:m,onAddToCombinatorFilter:f,context:v,queryStore:C,menuListStore:y,hideTopActions:A}){const S=(0,s().v3)(),F=(0,ue().tz)(),{device:j}=S,b=(0,c().O$)(C),M=(0,c().K8)((()=>(0,_e().YF)(r,i,a)),[r,i,a]),w=(0,u().IS)((()=>({tokenInputContainer:{...!l().A.isMobile&&{paddingTop:4,paddingInlineEnd:8,paddingBottom:8,paddingInlineStart:8}},inputStyle:{maxHeight:"20vh"}})),[]),[O,L]=(0,B().$)(),E=(0,n.useMemo)((()=>(0,G().gc)(e)?(0,q().W)(e):[]),[e]),K=(0,c().K8)((()=>he().oE(E.map(((e,t)=>{if("exact"===e.type&&e.value&&e.value.table!==se().n){const t=(0,_().xC)({pointer:e.value,getRecordValue:a.getRecordValue});return(0,Ge.jsx)(je().Ay,{actor:t,format:l().A.isMobile?je().Ay.Format.Large:je().Ay.Format.Small,showRemoveButton:!0,onClickRemove:()=>{it(he().FF(E,e),d,i)},shouldShrink:!0,isSingle:!1,hasPersonHoverCard:!1},e.value.id)}if("exact"===e.type&&e.value&&e.value.table===se().n){const t=(0,se().S4)({spacePermissionGroupId:e.value.id,spaceId:e.value.spaceId});return(0,Ge.jsx)(Ce().AQ,{groupPointer:t,parentStore:a,format:l().A.isMobile?je().Ay.Format.Large:je().Ay.Format.Small,showRemoveButton:!0,onClickRemove:()=>{it(he().FF(E,e),d,i)},shouldShrink:!0,isSingle:!1},t.id)}if("relative"===e.type&&"me"===e.value&&p)return(0,Ge.jsx)(we().A,{format:l().A.isMobile?Z().NY.Large:Z().NY.Small,value:(0,Ge.jsx)(rt,{}),onClickRemove:()=>{it(he().FF(E,e),d,i)},showRemoveButton:!0,isSingle:!1,shouldShrink:!0,backgroundColor:"transparent",showTooltip:"overflow"},t)})))),[p,E,d,i,a]);if(!M)return null;const z=(0,Ge.jsx)("div",{style:w.tokenInputContainer,children:(0,Ge.jsx)(k().Ay,{focus:!l().A.isMobile||void 0,focusAfterAnimation:!0,format:k().le.FilterValue,tokens:K,placeholder:F.formatMessage({defaultMessage:"Search for one or more people…",id:"database.filterValue.personType.searchPlaceholder"}),style:w.inputStyle,onRemoveLastToken:()=>{it(E.slice(0,E.length-1),d,i)},onClearButtonClick:()=>{it([],d,i),null==g||g()},value:b,onChange:e=>{Ft(e.target.value,C,y)},dontShowBorderBottom:j.isAndroid,showClearButton:!0,...O})}),H=(0,Ge.jsxs)(V().A,{children:[l().A.isMobile?void 0:(0,Ge.jsx)(ft,{propertyFilter:i,onChange:d,schema:r,parentStore:a,userCanConfigureFilters:h,onDelete:m,onAddToCombinatorFilter:f,context:v,hideTopActions:A}),(0,G().gc)(e)?z:void 0]});let W;W=l().A.isMobile?{menuType:T().gu.Modal,title:(0,Ge.jsx)(Ct,{propertyFilter:i,schema:r,context:v,onChange:d,parentStore:a}),left:(0,Ge.jsx)(yt,{context:v,userCanConfigureFilters:h,onDelete:m,onAddToCombinatorFilter:f}),right:(0,Ge.jsx)(ue().sA,{...x().W.done}),onClickRight:()=>null==g?void 0:g(),header:H}:{menuType:T().gu.Popup,maxHeight:G().mi,width:ot(v)?260:void 0,header:H,disableHeaderBorder:!0};const N=he().oE((o&&o.users||[]).map((e=>function(e,t,o,n,r){const i=Boolean(t.find((t=>{var o;return"exact"===t.type&&(null===(o=t.value)||void 0===o?void 0:o.id)===e.id})));return{key:e.id,render:t=>(0,Ge.jsx)(P().A,{...t,title:(0,Ge.jsx)(je().t_,{isSingle:!0,shouldShrink:!0,format:l().A.isMobile?je().t_.Format.Large:je().t_.Format.Medium,userValue:e,showRemoveButton:!1,hasPersonHoverCard:!1}),isTokenTitle:!0,isChecked:i}),action:()=>{it(i?t.filter((t=>{var o;return!("exact"===t.type&&(null===(o=t.value)||void 0===o?void 0:o.id)===e.id)})):[...t,{type:"exact",value:{table:de().oo,id:e.id}}],r,o)}}}(e,E,i,0,d)))),Y=he().oE((o&&o.groups||[]).map((e=>function(e,t,o,n){const r=t.some((t=>{var o;return"exact"===t.type&&(null===(o=t.value)||void 0===o?void 0:o.id)===e.id})),i=e.getGroupPointer();return{key:i.id,render:t=>(0,Ge.jsx)(be()._,{group:e,menuListItemProps:t}),action:()=>{it(r?t.filter((e=>{var t;return!("exact"===e.type&&(null===(t=e.value)||void 0===t?void 0:t.id)===i.id)})):[...t,{type:"exact",value:i}],n,o)}}}(e,E,i,d)))),$=["created_by","last_edited_by"].includes(M.type)?he().oE((o&&o.bots||[]).map((e=>function(e,t,o,n,r){const i=Boolean(t.find((t=>{var o;return"exact"===t.type&&(null===(o=t.value)||void 0===o?void 0:o.id)===e.id})));return{key:e.id,render:t=>(0,Ge.jsx)(P().A,{...t,title:(0,Ge.jsx)(je().v7,{isSingle:!0,shouldShrink:!0,format:l().A.isMobile?je().v7.Format.Large:je().v7.Format.Medium,botValue:e,showRemoveButton:!1}),isTokenTitle:!0,isChecked:i}),action:()=>{it(i?t.filter((t=>{var o;return!("exact"===t.type&&(null===(o=t.value)||void 0===o?void 0:o.id)===e.id)})):[...t,{type:"exact",value:{table:le().GP,id:e.id}}],r,o)}}}(e,E,i,0,d)))):[];if(p&&o&&(!b||"me".includes(b))){const e=Boolean(E.find((e=>"relative"===e.type&&"me"===e.value)));N.unshift({key:"me",render:t=>(0,Ge.jsx)(P().A,{...t,title:(0,Ge.jsx)(rt,{}),isChecked:e,style:l().A.isMobile?void 0:{fontSize:14}}),action:()=>{it(e?E.filter((({value:e})=>"me"!==e)):[...E,{type:"relative",value:"me"}],d,i)}})}const U=[];return(N.length>0||Y.length>0)&&U.push({key:"user property",render:e=>(0,Ge.jsx)(V().A,{...e}),items:[...N,...Y]}),$.length>0&&U.push({key:"bot property",render:e=>(0,Ge.jsx)(V().A,{...e,title:"Pick a bot"}),items:$}),(0,Ge.jsx)(I().A,{...W,children:(0,G().gc)(e)?(0,Ge.jsxs)(Ge.Fragment,{children:[t?(0,Ge.jsx)(V().A,{children:(0,Ge.jsx)(R().u,{title:(0,Ge.jsx)(ue().sA,{defaultMessage:"Something went wrong.",id:"database.filterValue.personType.searchPersonPropertyMenuItem.errorMessage"})})}):void 0,0===U.length&&o&&!t?(0,Ge.jsx)(V().A,{children:(0,Ge.jsx)(R().u,{title:(0,Ge.jsx)(ue().sA,{defaultMessage:"No results",id:"database.filterValue.personType.noResults.message"})})}):void 0,o||t?void 0:(0,Ge.jsx)(V().A,{children:(0,Ge.jsx)(Te().A,{})}),U.length>0?(0,Ge.jsx)(D().A,{type:D().O.Vertical,initialFocus:0,sections:U,store:y,onAccept:()=>{Ft("",C,y)},comboboxProps:L}):void 0]}):void 0})}function Tt({filter:e,context:t,propertyFilter:o,schema:n,onChange:r,parentStore:i,userCanConfigureFilters:a,onDelete:s,onAddToCombinatorFilter:d,onClose:u,menuListStore:p,collectionContextStore:g}){var h;const m=(0,c().K8)((()=>{const e=null==g?void 0:g.collectionViewStore();return"form_editor"===(null==e?void 0:e.getType())}),[g]);let f;f=l().A.isMobile?{menuType:T().gu.Modal,title:(0,Ge.jsx)(Ct,{propertyFilter:o,schema:n,context:t,onChange:r,parentStore:i}),left:(0,Ge.jsx)(yt,{context:t,userCanConfigureFilters:a,onDelete:s,onAddToCombinatorFilter:d}),right:(0,Ge.jsx)(ue().sA,{...x().W.done}),onClickRight:()=>null==u?void 0:u()}:{menuType:T().gu.Popup,maxHeight:G().mi,width:ot(t)?220:void 0,footer:(0,Ge.jsx)(st,{onChange:r,propertyFilter:o,onClose:u,filter:e})};const v=null===(h=e.value)||void 0===h?void 0:h.value;return(0,Ge.jsxs)(I().A,{...f,children:[t===Ze.PropertyFilter?(0,Ge.jsx)(V().A,{disableMobilePadding:!0,children:l().A.isMobile||m?void 0:(0,Ge.jsx)(ft,{propertyFilter:o,onChange:r,schema:n,parentStore:i,userCanConfigureFilters:a,onDelete:s,onAddToCombinatorFilter:d,context:t})}):void 0,(0,Ge.jsx)(D().A,{type:D().O.Vertical,initialFocus:0,sections:[{key:"select",render:e=>(0,Ge.jsx)(V().A,{style:t===Ze.PropertyFilter?{paddingTop:0}:void 0,...e}),items:[{key:"unchecked",render:e=>(0,Ge.jsx)(P().A,{...e,title:(0,Ge.jsx)(ue().sA,{defaultMessage:"Unchecked",id:"database.filterValue.checkboxType.unchecked.title"}),isTokenTitle:!0,isChecked:!1===v}),action:()=>{it({type:"exact",value:!1},r,o),null==u||u("selectOption")}},{key:"checked",render:e=>(0,Ge.jsx)(P().A,{...e,title:(0,Ge.jsx)(ue().sA,{defaultMessage:"Checked",id:"database.filterValue.checkboxType.checked.title"}),isTokenTitle:!0,isChecked:!0===v}),action:()=>{it({type:"exact",value:!0},r,o),null==u||u("selectOption")}}]}],store:p,onAccept:()=>null==u?void 0:u("selectOption"),captureKeyboardOnlyWhenFocused:!0}),l().A.isMobile?(0,Ge.jsx)(st,{onChange:r,propertyFilter:o,onClose:u,filter:e}):void 0]})}function kt({filter:e,error:t,results:o,schema:r,propertyFilter:i,parentStore:a,onChange:d,onClose:p,userCanConfigureFilters:g,onDelete:f,onAddToCombinatorFilter:v,context:C,collectionViewId:y,queryStore:A,menuListStore:S,allowCurrentPageInRelatedCollectionFilter:F,hideTopActions:j}){const b=(0,s().v3)(),M=(0,ue().tz)(),{device:w}=b,O=(0,c().O$)(A),_=(0,c().K8)((()=>(0,_e().YF)(r,i,a)),[r,i,a]),L=(0,c().K8)((()=>function(e,t){if(!e)return;const o=m().p.createChildStore(t,{table:ae().Gy,id:e}).getParentBlockStore();return o?o.getNearestAncestorTemplateStore():void 0}(y,a)),[y,a]),E=(0,c().K8)((()=>null==L?void 0:L.getAssociatedCollectionId()),[L]),K=(0,n.useMemo)((()=>(0,G().gc)(e)?(0,G().Rh)(e):[]),[e]),z=(0,c().K8)((()=>{const e=(0,_e().YF)(r,i,a);return e&&(0,$().nC)(e)?{appConfigUri:(0,xe().LQ)(e,a),schema:(0,xe().D3)(e,b)}:{}}),[r,i,a,b]),H=(0,c().K8)((()=>function(e,t,o,n,r){const{appConfigUri:i,schema:l}=n;if(!l)return[];if(!i||!(0,Oe().KN)(l,i))return[];const a=(0,re().qk)(l,i),s=re().n$[i];return he().oE(a.map((n=>{if(!e||n.includes(e)){const e={type:"relative",value:{type:"builtin",variable:n}},i=nt(t,e);return{key:n,render:e=>(0,Ge.jsx)(P().A,{...e,title:(0,Ge.jsx)(ue().sA,{...s[n].messageDescriptor}),isChecked:i}),action:at(i,t,e,o,r)}}})))}(O,K,i,z,d)),[O,K,i,z,d]),W=(0,c().K8)((()=>F?function(e,t,o,n,r){const i=e.formatMessage(Xe.pageContainingThisView);if(!t||i.toLowerCase().includes(t)){const e={type:"relative",value:{type:"current_page_in_related_collection"}},t=nt(o,e);return{key:e.value.type,render:e=>(0,Ge.jsx)(P().A,{...e,title:i,isChecked:t}),action:at(t,o,e,n,r)}}}(M,O,K,i,d):void 0),[M,O,K,i,d,F]),[q,N]=(0,B().$)(),Y=(0,u().IS)((()=>({tokenInputContainer:{...!l().A.isMobile&&{paddingTop:4,paddingInlineEnd:8,paddingBottom:8,paddingInlineStart:8}},tokenWrapStyle:{paddingTop:2,gap:"5px 3px"},tokenStyle:{margin:0},inputStyle:{maxHeight:"20vh",overflowY:"auto"}})),[]);if(!_||!(0,$().nC)(_))return null;const U=(0,$().zO)(_);if(!U)return null;const X=he().oE(K.map(((e,t)=>{if(!e.value)return null;const o={format:l().A.isMobile?Z().NY.Large:Z().NY.Small,shouldWrap:!1,showRemoveButton:!0,isSingle:!1,shouldShrink:!0,onClickRemove:()=>{it(he().FF(K,e),d,i)},style:Y.tokenStyle},{appConfigUri:n}=z;return(0,Ge.jsx)(ke().g,{value:e,tokenProps:o,parentStore:a,relatedCollectionAppConfigUri:n},t)}))),Q=(0,Ge.jsx)("div",{style:Y.tokenInputContainer,children:(0,Ge.jsx)(k().Ay,{focus:!l().A.isMobile||void 0,focusAfterAnimation:!0,format:k().le.FilterValue,tokens:X,placeholder:M.formatMessage({defaultMessage:"Search for one or more pages…",id:"database.filterValue.relationType.searchPlaceholder"}),onRemoveLastToken:()=>{it(K.slice(0,K.length-1),d,i)},onClearButtonClick:()=>{it([],d,i),null==p||p()},value:O,onChange:e=>{Ft(e.target.value,A,S)},dontShowBorderBottom:w.isAndroid,style:Y.inputStyle,tokenWrapStyle:Y.tokenWrapStyle,showClearButton:!0,...q})}),J=(0,Ge.jsxs)(V().A,{children:[l().A.isMobile?void 0:(0,Ge.jsx)(ft,{propertyFilter:i,onChange:d,schema:r,parentStore:a,userCanConfigureFilters:g,onDelete:f,onAddToCombinatorFilter:v,context:C,hideTopActions:j}),(0,G().gc)(e)?Q:void 0]});let ee;ee=l().A.isMobile?{menuType:T().gu.Modal,title:(0,Ge.jsx)(Ct,{propertyFilter:i,schema:r,context:C,onChange:d,parentStore:a}),left:(0,Ge.jsx)(yt,{context:C,userCanConfigureFilters:g,onDelete:f,onAddToCombinatorFilter:v}),right:(0,Ge.jsx)(ue().sA,{...x().W.done}),onClickRight:()=>null==p?void 0:p(),header:J}:{menuType:T().gu.Popup,maxHeight:G().mi,width:ot(C)?260:void 0,header:J,disableHeaderBorder:!0},o&&!O&&L&&U&&E===U&&(o=he().sb([L.id,...o]));let te=[];if(o){const e=function(e,t,o,n,r){return e.map((e=>{const i={type:"exact",value:e},l=nt(t,i),a=h().B.createChildStore(o,{table:ie().ev,id:e});return{key:e,action:at(l,t,i,n,r),render:e=>(0,Ge.jsx)(Se().A,{store:a,isChecked:l,hidePath:!0,showTooltipOnOverflow:!0,...e})}}))}(o,K,a,i,d);te=((0,G().s1)(i.filter)?[]:H).concat(e),W&&(te=[W,...te])}return(0,Ge.jsx)(I().A,{...ee,children:(0,G().gc)(e)?(0,Ge.jsxs)(Ge.Fragment,{children:[t?(0,Ge.jsx)(V().A,{children:(0,Ge.jsx)(R().u,{title:(0,Ge.jsx)(ue().sA,{defaultMessage:"Something went wrong.",id:"database.filterValue.relationType.searchRelationPropertyMenuItem.errorMessage"})})}):void 0,0===te.length&&o&&!t?(0,Ge.jsx)(V().A,{children:(0,Ge.jsx)(R().u,{title:(0,Ge.jsx)(ue().sA,{defaultMessage:"No results",id:"database.filterValue.relationType.noResults.message"})})}):void 0,o||t?void 0:(0,Ge.jsx)(V().A,{children:(0,Ge.jsx)(Te().A,{})}),te.length>0?(0,Ge.jsx)(D().A,{type:D().O.Vertical,initialFocus:0,sections:[{key:"results",render:e=>(0,Ge.jsx)(V().A,{...e}),items:te}],store:S,onAccept:()=>{Ft("",A,S)},comboboxProps:N}):void 0]}):void 0})}function Mt({filter:e,schema:t,propertyFilter:o,parentStore:n,onChange:r,allowRelativeDateFilter:i,dateRangeFilterPopupStore:l}){const a=(0,c().K8)((()=>(0,_e().YF)(t,o,n)),[t,o,n]);if(!a)return null;let s;if((0,G().Cw)(e)&&"exact"===e.value.type&&e.value.value){const t=e.value.value;s={starting:t.start_date?{type:"date",start_date:t.start_date}:void 0,ending:t.end_date?{type:"date",start_date:t.end_date}:void 0}}else s=(0,G().Cw)(e)&&"relative"===e.value.type?e.value:{starting:void 0,ending:void 0};const d={disableMenuWrap:!0,title:a.name,value:s,onUpdate:t=>{var n,i;if(t.error)return null;const l={...s,...t.value},a=null===(n=l.starting)||void 0===n?void 0:n.start_date,d=null===(i=l.ending)||void 0===i?void 0:i.start_date;lt({operator:"date_is_within",use_end:"use_end"in e?null==e?void 0:e.use_end:void 0,value:{type:"exact",value:a||d?{type:"daterange",start_date:a,end_date:d}:void 0}},r,o)},allowRelativeRangeFilter:i,relativeRangePopupStore:l,onUpdateRelativeFilter:t=>{lt({...e,value:t},r,o)}};return(0,Ge.jsx)(Re().A,{...d})}function wt({filter:e,events:t,onChange:o,propertyFilter:n,allowRelativeDateFilter:r,dateFilterPopupStore:i}){const a=(0,ue().tz)(),s=(0,u().IS)((()=>({inputOuterStyle:{background:"transparent",paddingInlineEnd:0,boxShadow:"none"}})),[]);return(0,Ge.jsx)(Ie().A,{...t,placeholder:a.formatMessage(Xe.startingMessage),focused:"exact"===e.value.type,value:e.value,inputOuterStyle:l().A.isMobile?s.inputOuterStyle:void 0,onUpdate:t=>{var r;if(t.error)return null;const i=null===(r=t.value)||void 0===r?void 0:r.start_date;lt({...e,value:{type:"exact",value:i?{type:"date",start_date:i}:void 0}},o,n)},inputRight:r&&(0,Ge.jsx)(b().A,{icon:ee().arrowChevronSingleDownFillSmallIcon,iconStyle:{width:12,height:12},ariaLabel:a.formatMessage(Xe.chevronDownAriaLabel),style:{...!l().A.isMobile&&{height:20,width:20},color:pe().Tj.icon.secondary},onClick:()=>{i.setState({open:!0})}}),hideClearButton:"relative"===e.value.type||void 0,isRightLastElementOfInput:!0})}function It({filter:e,context:t,onChange:o,propertyFilter:n,schema:r,parentStore:i,userCanConfigureFilters:a,onDelete:s,onAddToCombinatorFilter:d,onClose:c,menuListStore:u}){const p=(0,G().gc)(e)?(0,G().ms)(e):[],g=p.map((({value:e})=>e)),h=ce().FG.map((e=>{const t=g.includes(e);return{key:e,render:o=>(0,Ge.jsx)(P().A,{icon:(0,Ge.jsx)(F().S,{checked:t,size:14,style:{fill:pe().Tj.icon.primary,pointerEvents:"none"},disallowTabbing:!0}),title:(0,Le().w0)({type:"exact",value:e}),...o}),action:()=>{if(t)it(p.filter((({value:t})=>t!==e)),o,n);else{const t={type:"exact",value:e};it([...p,t],o,n)}}}}));let m;return m=l().A.isMobile?{menuType:T().gu.Modal,title:(0,Ge.jsx)(Ct,{propertyFilter:n,schema:r,context:t,onChange:o,parentStore:i}),left:(0,Ge.jsx)(yt,{context:t,userCanConfigureFilters:a,onDelete:s,onAddToCombinatorFilter:d}),right:(0,Ge.jsx)(ue().sA,{...x().W.done}),onClickRight:()=>null==c?void 0:c()}:{menuType:T().gu.Popup,maxHeight:G().mi,width:220,footer:(0,Ge.jsx)(st,{onChange:o,propertyFilter:n,onClose:c,filter:e})},(0,Ge.jsxs)(I().A,{...m,children:[t===Ze.PropertyFilter?(0,Ge.jsx)(V().A,{disableMobilePadding:!0,children:l().A.isMobile?void 0:(0,Ge.jsx)(ft,{propertyFilter:n,onChange:o,schema:r,parentStore:i,userCanConfigureFilters:a,onDelete:s,onAddToCombinatorFilter:d,context:t})}):void 0,(0,Ge.jsx)(D().A,{type:D().O.Vertical,initialFocus:0,sections:[{key:"select",render:e=>(0,Ge.jsx)(V().A,{style:{paddingTop:0},...e}),items:h}],store:u})]})}function Pt({filter:e,parentStore:t,schema:o,propertyFilter:n,onChange:r,allowRelativePersonFilter:i,onClose:l,userCanConfigureFilters:a,onDelete:d,onAddToCombinatorFilter:u,context:p,queryStore:h,menuListStore:m,hideTopActions:f}){const v=(0,s().v3)(),x=(0,ue().tz)(),C=(0,c().O$)(h);return(0,Ge.jsx)(ye().A,{request:C,performRequest:e=>async function(e,t,o,n){const r=await Ve().T.searchActions.load(),i=n.locale,{users:l,bots:a}=await r.searchSpaceActors({environment:o,query:e,membersOnly:!1,userLocale:i,limit:20}),s=r.searchSpaceGroups({query:e,intl:n});return await Promise.all([...l.map((async({id:e})=>{const o=(0,g().v3)(t,{table:de().oo,id:e});await o.load()})),...a.map((async e=>{const o=(0,g().v3)(t,{table:le().GP,id:e.id,spaceId:e.space_id});await o.load()}))]),{users:l,bots:a,groups:s}}(e,t,v,x),render:(s,c)=>(0,Ge.jsx)(bt,{schema:o,propertyFilter:n,parentStore:t,onChange:r,allowRelativePersonFilter:i,onClose:l,userCanConfigureFilters:a,onDelete:d,onAddToCombinatorFilter:u,context:p,queryStore:h,menuListStore:m,filter:e,error:s,results:c,hideTopActions:f})})}function Rt({filter:e,schema:t,propertyFilter:o,parentStore:n,onChange:i,onClose:l,userCanConfigureFilters:a,onDelete:d,onAddToCombinatorFilter:u,context:p,collectionViewId:h,queryStore:m,menuListStore:v,allowCurrentPageInRelatedCollectionFilter:x,hideTopActions:C}){const y=(0,s().v3)(),A=(0,c().O$)(m),S=(0,r().r)(),F=(0,c().K8)((()=>{var e;return null===(e=f().A.state.publicPageData)||void 0===e?void 0:e.spaceId}),[]),j=(0,c().K8)((()=>(0,_e().YF)(t,o,n)),[t,o,n]),b=S||F;if(!j||!(0,$().nC)(j)||!b)return null;const T=(0,$().zO)(j);return T?(0,Ge.jsx)(ye().A,{request:{query:A,spaceId:b,collectionId:T},performRequest:e=>async function(e,t,o){const{query:n,spaceId:r,collectionId:i}=e;if(!r||!i)return[];const l=await Ve().T.searchActions.load(),{results:a}=await l.searchPagesInCollection({environment:o,query:n,collectionId:i,limit:20,spaceId:r,excludeTemplates:!0,source:"relation_menu",includePublicPagesWithoutExplicitAccess:!0,boostRecentlyViewedPages:!1});return 0===a.length?[]:(await Promise.all(a.map((async e=>{const o=(0,g().v3)(t,{table:ie().ev,id:e});await o.load()}))),a)}(e,n,y),render:(r,s)=>(0,Ge.jsx)(kt,{schema:t,propertyFilter:o,parentStore:n,onChange:i,onClose:l,userCanConfigureFilters:a,onDelete:d,onAddToCombinatorFilter:u,context:p,collectionViewId:h,queryStore:m,menuListStore:v,filter:e,error:r,results:s,allowCurrentPageInRelatedCollectionFilter:x,hideTopActions:C})}):null}function Dt({filter:e,onChange:t,propertyFilter:o,allowRelativeDateFilter:n,dateFilterPopupStore:r}){const i=(0,c().O$)(De().XX),a=(0,u().IS)((()=>({wrapper:{paddingInlineStart:8,paddingInlineEnd:8,paddingBottom:8,paddingTop:4,...l().A.isMobile&&{paddingTop:16,paddingBottom:8,background:pe().Tj.background.primary}},label:{paddingInlineStart:8,paddingInlineEnd:8,paddingBottom:8,paddingTop:4,...l().A.isMobile&&{paddingTop:8,paddingBottom:8,background:pe().Tj.background.primary}}})),[]);if(!(0,G().gc)(e))return null;const s="exact"===e.value.type?e.value.value:(0,Q().fN)(e.value);return s&&!(0,X().$P)(s)?null:(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)(V().A,{disableMobileBorders:!0,children:(0,Ge.jsx)("div",{style:a.wrapper,children:(0,Ge.jsx)(Pe().A,{firstDayOfWeek:i,selectValue:void 0!==s,value:s?Q().C6.notionDateToLuxon(s).toMillis():Date.now(),onChange:e=>{it({type:"exact",value:(0,Q().p6)(e,(0,J().P)())},t,o)}})})}),"relative"===e.value.type?(0,Ge.jsx)(V().A,{topBorder:!0,children:(0,Ge.jsx)("div",{style:a.label,children:(0,Ge.jsx)(w().A,{isSmall:!0,children:(0,Ge.jsx)(ue().sA,{id:"collectionFilterMenu.dateFilter.relativeDateFilter.description",defaultMessage:"Filter will update with the current date"})})})}):void 0]})}function Bt({filter:e,context:t,propertyFilter:o,schema:n,onChange:r,parentStore:i,userCanConfigureFilters:a,onDelete:s,onAddToCombinatorFilter:d,onClose:c,allowRelativeDateFilter:u,dateFilterPopupStore:p,dateRangeFilterPopupStore:g,hideTopActions:h}){let m;m=l().A.isMobile?{menuType:T().gu.Modal,title:(0,Ge.jsx)(Ct,{propertyFilter:o,schema:n,context:t,onChange:r,parentStore:i}),left:(0,Ge.jsx)(yt,{context:t,userCanConfigureFilters:a,onDelete:s,onAddToCombinatorFilter:d}),right:(0,Ge.jsx)(ue().sA,{...x().W.done}),onClickRight:()=>null==c?void 0:c()}:{menuType:T().gu.Popup,maxHeight:G().mi,width:ot(t)?260:void 0};const f=!l().A.isMobile,v=(0,G().gc)(e)&&!(0,G().Cw)(e),C=f||v;return(0,Ge.jsxs)(I().A,{...m,children:[C?(0,Ge.jsxs)(V().A,{disableMobileBorders:!0,isInput:t!==Ze.PropertyFilter,children:[f?(0,Ge.jsx)(ft,{propertyFilter:o,onChange:r,schema:n,parentStore:i,userCanConfigureFilters:a,onDelete:s,onAddToCombinatorFilter:d,context:t,hideTopActions:h}):void 0,v?(0,Ge.jsx)(ve().A,{type:"date",filterValue:e.value,onUpdate:t=>{lt({...e,value:t},r,o)},renderOrigin:t=>(0,Ge.jsx)(wt,{onChange:r,propertyFilter:o,allowRelativeDateFilter:u,dateFilterPopupStore:p,filter:e,events:t}),disabled:"exact"===e.value.type&&u,buttonPopupStore:p}):void 0]}):void 0,(0,G().gc)(e)?(0,G().Cw)(e)?(0,Ge.jsx)(Mt,{schema:n,propertyFilter:o,parentStore:i,onChange:r,allowRelativeDateFilter:u,dateRangeFilterPopupStore:g,filter:e}):(0,Ge.jsx)(Dt,{onChange:r,propertyFilter:o,allowRelativeDateFilter:u,dateFilterPopupStore:p,filter:e}):void 0]})}function Vt({filter:e,schema:t,propertyFilter:o,parentStore:n,onChange:r,onClose:i,userCanConfigureFilters:a,onDelete:s,onAddToCombinatorFilter:d,context:u}){const p=(0,c().K8)((()=>(0,_e().YF)(t,o,n)),[t,o,n]);if(!p||"file"!==p.type)return null;const g=(0,Ge.jsx)(V().A,{children:l().A.isMobile?void 0:(0,Ge.jsx)(ft,{propertyFilter:o,onChange:r,schema:t,parentStore:n,userCanConfigureFilters:a,onDelete:s,onAddToCombinatorFilter:d,context:u})});let h;return h=l().A.isMobile?{menuType:T().gu.Modal,title:(0,Ge.jsx)(Ct,{propertyFilter:o,schema:t,context:u,onChange:r,parentStore:n}),left:(0,Ge.jsx)(yt,{context:u,userCanConfigureFilters:a,onDelete:s,onAddToCombinatorFilter:d}),right:(0,Ge.jsx)(ue().sA,{...x().W.done}),onClickRight:()=>null==i?void 0:i(),header:g}:{menuType:T().gu.Popup,maxHeight:G().mi,width:260,header:g,disableHeaderBorder:!0,tokenInputHeader:!0},(0,Ge.jsx)(I().A,{...h})}function Ot({filter:e,schema:t,propertyFilter:o,parentStore:n,onChange:r,onClose:i,userCanConfigureFilters:a,onDelete:s,onAddToCombinatorFilter:d,context:u}){const p=(0,c().K8)((()=>(0,_e().YF)(t,o,n)),[t,o,n]);if(!p||"place"!==p.type)return null;const g=(0,Ge.jsx)(V().A,{children:l().A.isMobile?void 0:(0,Ge.jsx)(ft,{propertyFilter:o,onChange:r,schema:t,parentStore:n,userCanConfigureFilters:a,onDelete:s,onAddToCombinatorFilter:d,context:u})});let h;return h=l().A.isMobile?{menuType:T().gu.Modal,title:(0,Ge.jsx)(Ct,{propertyFilter:o,schema:t,context:u,onChange:r,parentStore:n}),left:(0,Ge.jsx)(yt,{context:u,userCanConfigureFilters:a,onDelete:s,onAddToCombinatorFilter:d}),right:(0,Ge.jsx)(ue().sA,{...x().W.done}),onClickRight:()=>null==i?void 0:i(),header:g}:{menuType:T().gu.Popup,maxHeight:G().mi,width:260,header:g,disableHeaderBorder:!0,tokenInputHeader:!0},(0,Ge.jsx)(I().A,{...h})}function _t({propertyFilter:e,schema:t,parentStore:o,onChange:r,onChangeDebounced:i,userCanConfigureFilters:l,onDelete:a,onAddToCombinatorFilter:s,context:d,onClose:u,collectionViewId:p,collectionContextStore:g,allowRelativePersonFilter:h,allowRelativeDateFilter:m,queryStore:f,menuListStore:v,dateFilterPopupStore:x,dateRangeFilterPopupStore:C,hideTopActions:y}){const{property:A,filter:S}=e,F=(0,c().K8)((()=>(0,G().HF)({schema:t,property:A,getRecordModel:o.getRecordModel})),[o,A,t]),j=t[A],b=(0,c().K8)((()=>!(!g||!j)&&function({collectionContextStore:e,propertySchema:t}){var o;if(void 0===e.viewsModuleContextStore.state)return!1;const n=null===(o=e.viewsModuleContextStore.getCurrentPageCollectionStore())||void 0===o?void 0:o.id;return!!n&&(0,$().nC)(t)&&(0,$().zO)(t)===n}({collectionContextStore:g,propertySchema:j})),[g,j]),T=(0,G().s1)(S)?S.subfilter:S,k=(0,n.useCallback)((t=>{it(t,r,e)}),[r,e]);return"text"===F?(0,Y().Y)(T)?(0,Ge.jsx)(At,{onChange:i,propertyFilter:e,schema:t,parentStore:o,userCanConfigureFilters:l,onDelete:a,onAddToCombinatorFilter:s,context:d,onClose:u,filter:T}):null:"relation"===F?(0,G().Pq)(T)?(0,Ge.jsx)(Rt,{schema:t,propertyFilter:e,parentStore:o,onChange:r,onClose:u,userCanConfigureFilters:l,onDelete:a,onAddToCombinatorFilter:s,context:d,collectionViewId:p,queryStore:f,menuListStore:v,filter:T,allowCurrentPageInRelatedCollectionFilter:b,hideTopActions:y}):null:"checkbox"===F?(0,G().Ui)(T)?(0,Ge.jsx)(Tt,{context:d,propertyFilter:e,schema:t,onChange:r,parentStore:o,userCanConfigureFilters:l,onDelete:a,onAddToCombinatorFilter:s,onClose:u,menuListStore:v,filter:T,collectionContextStore:g}):null:"select"===F||"multi_select"===F?(0,G().v0)(T)||(0,G().as)(T)?(0,Ge.jsx)(jt,{schema:t,propertyFilter:e,parentStore:o,onChange:r,onClose:u,userCanConfigureFilters:l,onDelete:a,onAddToCombinatorFilter:s,context:d,queryStore:f,menuListStore:v,filter:T,collectionContextStore:g,hideTopActions:y}):null:"status"===F?(0,G().H$)(T)?(0,Ge.jsx)(Ue().A,{propertyFilter:e,schema:t,filter:T,parentStore:o,updateValue:k,onClose:u,desktopTopActions:(0,Ge.jsx)(ft,{propertyFilter:e,onChange:r,schema:t,parentStore:o,userCanConfigureFilters:l,onDelete:a,onAddToCombinatorFilter:s,context:d,hideTopActions:y}),mobileMenuTitle:(0,Ge.jsx)(Ct,{propertyFilter:e,schema:t,context:d,onChange:r,parentStore:o}),mobileMoreActions:(0,Ge.jsx)(yt,{context:d,userCanConfigureFilters:l,onDelete:a,onAddToCombinatorFilter:s}),collectionContextStore:g,context:d}):null:"person"===F?(0,N().I)(T)?(0,Ge.jsx)(Pt,{parentStore:o,schema:t,propertyFilter:e,onChange:r,allowRelativePersonFilter:h,onClose:u,userCanConfigureFilters:l,onDelete:a,onAddToCombinatorFilter:s,context:d,queryStore:f,menuListStore:v,filter:T,hideTopActions:y}):null:"number"===F?(0,W().M)(T)?(0,Ge.jsx)(St,{onChange:i,propertyFilter:e,schema:t,parentStore:o,userCanConfigureFilters:l,onDelete:a,onAddToCombinatorFilter:s,context:d,onClose:u,filter:T}):null:"date"===F?(0,z().n)(T)?(0,Ge.jsx)(Bt,{context:d,propertyFilter:e,schema:t,onChange:r,parentStore:o,userCanConfigureFilters:l,onDelete:a,onAddToCombinatorFilter:s,onClose:u,allowRelativeDateFilter:m,dateFilterPopupStore:x,dateRangeFilterPopupStore:C,filter:T,hideTopActions:y}):null:"file"===F?(0,G().B6)(T)?(0,Ge.jsx)(Vt,{onChange:r,propertyFilter:e,schema:t,parentStore:o,userCanConfigureFilters:l,onDelete:a,onAddToCombinatorFilter:s,context:d,onClose:u,filter:T}):null:"location"===F?(0,G().G)(T)?(0,Ge.jsx)($e,{filter:T,parentStore:o,updateValue:k,onClose:u,desktopTopActions:(0,Ge.jsx)(ft,{propertyFilter:e,onChange:r,schema:t,parentStore:o,userCanConfigureFilters:l,onDelete:a,onAddToCombinatorFilter:s,context:d}),mobileMenuTitle:(0,Ge.jsx)(Ct,{propertyFilter:e,schema:t,context:d,onChange:r,parentStore:o}),mobileMoreActions:(0,Ge.jsx)(yt,{context:d,userCanConfigureFilters:l,onDelete:a,onAddToCombinatorFilter:s})}):null:"verification"===F?(0,G().uU)(T)?(0,Ge.jsx)(It,{context:d,onChange:r,propertyFilter:e,schema:t,parentStore:o,userCanConfigureFilters:l,onDelete:a,onAddToCombinatorFilter:s,onClose:u,menuListStore:v,filter:T}):null:"place"===F?(0,G().Ol)(T)?(0,Ge.jsx)(Ot,{onChange:r,propertyFilter:e,schema:t,parentStore:o,userCanConfigureFilters:l,onDelete:a,onAddToCombinatorFilter:s,context:d,onClose:u,filter:T}):null:void(0,me().HB)(F)}},347302:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=o(474848);const r=function(e){const{collectionStore:t}=e,r=(0,o(590526).K8)((()=>t.getIcon()),[t]);return(0,n.jsxs)("div",{style:{display:"flex",columnGap:4,alignItems:"center"},children:[(0,n.jsx)(o(187820).B6,{disabled:!0,icon:r,iconRecordCategory:"collection",isEmptyPage:!1,size:20}),(0,n.jsx)(o(16006).A,{store:t,style:{maxWidth:180}})]})}},359889:(e,t,o)=>{o.d(t,{q:()=>r});var n=()=>o(708685);function r(e){return"date"===e.type||"formula"===e.type&&"date"===(0,n().getFormulaPropertySchemaResultType)(e)||"rollup"===e.type&&void 0!==e.aggregation&&"date_range"===e.aggregation}},399762:(e,t,o)=>{o.d(t,{O:()=>d,q:()=>c});o(296540);var n=()=>o(401497),r=()=>o(100622),i=()=>o(284371),l=()=>o(288722),a=()=>o(881690),s=o(474848);function d(e){const{value:t,color:o,format:d,showEllipsis:c,onClickRemove:u,showRemoveButton:p,isSingle:g,shouldShrink:h,hideTooltip:m,description:f,tooltipPlacement:v,removeBackground:x,...C}=e,y=(0,n().DP)(),A=(0,n().IS)((()=>({token:{...c&&i().RC,...x&&{paddingInlineStart:0,paddingInlineEnd:0}}})),[c,x]),{textColor:S,backgroundColor:F}=(0,r().LD)(y,o),j=x?"transparent":F;return t?(0,s.jsx)(a().A,{format:d,value:(0,s.jsx)(l().A,{children:t}),description:f,onClickRemove:u,showRemoveButton:p,isSingle:g,color:S,backgroundColor:j,shouldShrink:h,tooltipPlacement:v,showTooltip:m?"never":"overflow",style:A.token,...C}):null}function c(e){const{value:t,color:o,format:d,showEllipsis:c,onClickRemove:u,showRemoveButton:p,isSingle:g,shouldShrink:h,groupColor:m,tooltipPlacement:f,description:v,hideTooltip:x,...C}=e,y=(0,n().DP)(),A=(0,n().IS)((()=>({token:{...c&&i().RC}})),[c]);if(!t)return null;const{textColor:S,backgroundColor:F}=(0,r().LD)(y,o??m??"gray");let j;return j=o||(m||"gray"),(0,s.jsx)(a().A,{format:d,value:(0,s.jsx)(l().A,{children:t}),description:v,onClickRemove:u,showRemoveButton:p,isSingle:g,color:S,backgroundColor:F,shouldShrink:h,showTooltip:x?"never":"overflow",style:A.token,isRound:!0,showColoredDot:j,tooltipPlacement:f,...C})}},404070:(e,t,o)=>{o.d(t,{Z:()=>r});var n=()=>o(754195);function r(e){return n().D$[e]}},424920:(e,t,o)=>{o.d(t,{y:()=>r});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.25",svg:(0,o(474848).jsx)("path",{d:"M9.501 2.391a8 8 0 0 1 .998 0 .625.625 0 0 1-.081 1.247 7 7 0 0 0-.836 0 .625.625 0 0 1-.08-1.247m3.034 1.053a.625.625 0 0 1 .838-.284q.45.222.863.5a.625.625 0 0 1-.695 1.038 6 6 0 0 0-.722-.417.625.625 0 0 1-.284-.837m-5.072 0a.625.625 0 0 1-.284.837q-.375.185-.722.417a.625.625 0 0 1-.695-1.038q.414-.278.863-.5a.625.625 0 0 1 .838.284m8.009 2.147a.625.625 0 0 1 .867.172q.278.414.5.863a.625.625 0 0 1-1.12.554 6 6 0 0 0-.418-.722.625.625 0 0 1 .171-.867m-10.946 0c.287.192.363.58.171.867q-.232.346-.417.722a.625.625 0 1 1-1.12-.554q.221-.45.499-.863a.625.625 0 0 1 .867-.172m12.418 3.327a.625.625 0 0 1 .664.583 8 8 0 0 1 0 .998.625.625 0 0 1-1.248-.081 6 6 0 0 0 0-.836.625.625 0 0 1 .584-.664m-13.89 0c.345.022.606.32.583.664a7 7 0 0 0 0 .836.625.625 0 0 1-1.247.08 8 8 0 0 1 0-.997.625.625 0 0 1 .664-.583m13.501 3.618c.31.153.437.528.284.838q-.222.45-.5.863a.625.625 0 1 1-1.038-.695q.231-.346.417-.722a.625.625 0 0 1 .837-.284m-13.112 0a.625.625 0 0 1 .837.284q.185.375.417.722a.625.625 0 0 1-1.038.695 8 8 0 0 1-.5-.864.625.625 0 0 1 .284-.837m2.147 2.937a.625.625 0 0 1 .867-.171q.346.231.722.417a.625.625 0 1 1-.554 1.12 8 8 0 0 1-.863-.499.625.625 0 0 1-.172-.867m8.818 0a.625.625 0 0 1-.172.867 8 8 0 0 1-.864.5.625.625 0 0 1-.553-1.12q.375-.187.722-.418a.625.625 0 0 1 .867.171m-5.491 1.472a.625.625 0 0 1 .664-.584 6 6 0 0 0 .836 0 .625.625 0 0 1 .08 1.248 8 8 0 0 1-.997 0 .625.625 0 0 1-.583-.664"})},r=(0,o(340498).wt)("circleDotted",n,"default")},480912:(e,t,o)=>{o.d(t,{OR:()=>h,RS:()=>f});o(296540);var n=()=>o(807449),r=()=>o(26697),i=()=>o(254947),l=()=>o(424920),a=()=>o(338862),s=()=>o(340498),d=()=>o(69708),c=()=>o(100622),u=()=>o(117293),p=()=>o(132389),g=o(474848);const h={[i().QV]:(0,g.jsx)(d().sA,{...i().oz.statusGroupNameTodo}),[i().jc]:(0,g.jsx)(d().sA,{...i().oz.statusGroupNameInProgress}),[i().P0]:(0,g.jsx)(d().sA,{...i().oz.statusGroupNameComplete}),[i().nX]:(0,g.jsx)(d().sA,{...u().DZ.current}),[i().p7]:(0,g.jsx)(d().sA,{...u().DZ.future})},m={[i().QV]:l().y,[i().jc]:o(874177).p,[i().P0]:o(671089).checkmarkCircleIcon};function f(e){const{group:t,disableGroup:o,style:d,showIcon:u,showColor:f}=e,v=m[t.name]??l().y,x=t.color??i().ml[t.name];return(0,g.jsxs)("div",{style:{...d,display:"inline-flex",alignItems:"center"},children:[u?v({display:"inline-block",width:s().Ev.default,height:s().Ev.default,fill:f?c().Tj[x].icon.accentPrimary:c().Tj.icon.secondary}):void 0,(0,g.jsx)("span",{style:{paddingInlineStart:u?4:void 0,color:f?c().Tj[x].text.accentPrimary:void 0},children:h[t.name]??t.name}),o?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(p().A,{size:4}),(0,g.jsx)(r().m,{placement:"bottom",render:e=>(0,g.jsx)("div",{...e,children:(0,g.jsx)(n().I,{icon:a().lockFillSmallIcon,size:"xs"})}),renderTooltip:e=>(0,g.jsx)("div",{...e,children:o.tooltipCaption}),disableTooltip:void 0===o.tooltipCaption})]}):null]})}},573710:(e,t,o)=>{o.d(t,{A:()=>i});var n=o(296540),r=o(474848);const i=function({firstDayOfWeek:e,value:t,selectValue:i=!0,onChange:l,onFocus:a,onBlur:s,disabledDays:d,className:c}){const u=(0,n.useMemo)((()=>new Date(t)),[t]),[p,g]=(0,n.useState)(u),h=(0,n.useRef)(t);(0,n.useLayoutEffect)((()=>{h.current!==t&&(g(new Date(t)),h.current=t)}),[t]);const m=(0,n.useCallback)(((e,t,o)=>{l(e.getTime())}),[l]);return(0,r.jsx)("div",{style:{paddingInlineEnd:8,paddingBottom:8,paddingInlineStart:8,paddingTop:4},children:(0,r.jsx)(o(541181).n,{locale:o(609679).locale,className:c??"notion-calendar-picker",numberOfMonths:1,weekStartsOn:e,modifiers:i?{value:u}:{},showOutsideDays:!0,fixedWeeks:!0,onDayClick:m,onMonthSelected:g,disabled:d,month:p,onDayBlur:s,onDayFocus:a})})}},668766:(e,t,o)=>{o.d(t,{q:()=>i});var n=()=>o(242422),r=()=>o(72135);function i(e,t){return(0,r().$J)(e,n().default.checkGate({gateName:"localized_parse_number"})?t:void 0)}},671089:(e,t,o)=>{o.r(t),o.d(t,{checkmarkCircleIcon:()=>i,iconDefinition:()=>r});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M12.876 7.982a.625.625 0 1 0-1.072-.644L9.25 11.595 7.815 9.92a.625.625 0 0 0-.95.813l2 2.334a.625.625 0 0 0 1.01-.085z"}),(0,n.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25M3.625 10a6.375 6.375 0 1 1 12.75 0 6.375 6.375 0 0 1-12.75 0"})]})},i=(0,o(340498).wt)("checkmarkCircle",r,"default")},790515:(e,t,o)=>{o.d(t,{S2:()=>k,tG:()=>T,AU:()=>F,SO:()=>v,LQ:()=>f,MI:()=>x,YF:()=>j,Pi:()=>C,$4:()=>y,Ze:()=>S,vu:()=>b,fe:()=>A});o(944114),o(898992),o(823215),o(354520),o(672577),o(581454),o(737550);var n=()=>o(675133),r=()=>o(214388),i=()=>o(898244),l=()=>o(713998),a=()=>o(455348),s=()=>o(416504),d=()=>o(496603),c=()=>o(534177),u=()=>o(433337);var p=()=>o(89053),g=()=>o(194390),h=()=>o(180252),m=()=>o(649746);function f(e){const{schema:t,filters:o,getRecordModel:n,spaceIdCreator:i,collectionSource:l}=e,a=[];for(const r of Object.keys(t)){const e=v({property:r,schema:t,getRecordModel:n,spaceIdCreator:i,collectionSource:l});e&&a.push(e)}const s=a.filter((e=>!o.find((t=>(0,r().yX)(t.filter)&&t.filter.property===e.property))));return d().Ul(s,(e=>{const o=t[e.property];return(null==o?void 0:o.name)||""}))}function v(e){const{property:t,schema:o,getRecordModel:n,spaceIdCreator:r,collectionSource:i}=e,a=o[t];if(a&&!(0,l().ah)(a,i))return;return{property:t,filter:(0,m().SN)({property:t,schema:o,getRecordModel:n,spaceIdCreator:r})}}function x(e){return{property:(0,i().ol)(e),filter:{operator:"string_contains",value:{type:"exact",value:void 0}}}}function C(e){const t=e.currentCombinatorFilterStore.state,o=e.currentPropertyFiltersStore.state.filter((e=>!b(e.id))).map((e=>e.filter)),n=[...(null==t?void 0:t.filters)||[],...o];return{...t,filters:n,operator:"and"}}function y(e,t){const o=e.currentCombinatorFilterStore.state,n=e.currentPropertyFiltersStore.state.filter((e=>e.id!==t.id)),r=[...(null==o?void 0:o.filters)||[],t.filter];return{combinatorFilter:{operator:"and",...o,filters:r},propertyFilters:n}}function A(e,t,o,n){let r=o.filter((e=>"is_group"===e.type)).map((t=>e.find((e=>e.name===t.value)))).filter(c().O9),i=o.filter((e=>"is_option"===e.type)).map((e=>t.find((t=>t.value===e.value)))).filter(c().O9);for(const l of e){const e=l.optionIds??[];if(r.some((e=>e.id===l.id)))i=i.filter((t=>!e.includes(t.id)));else if(e.length>0){const t=i.filter((t=>!e.includes(t.id)));t.length+e.length===i.length&&(i=t,r=[...r,l])}}if("is_option"===n.type){const o=t.find((e=>e.value===n.value));if(!o)return;const l=i.filter((e=>e.id!==o.id));if(l.length<i.length)i=l;else{const n=e.find((e=>{var t;return null===(t=e.optionIds)||void 0===t?void 0:t.includes(o.id)})),l=r.find((e=>e.id===(null==n?void 0:n.id)));if(l){const e=t.filter((e=>{var t;return(null===(t=l.optionIds)||void 0===t?void 0:t.includes(e.id))&&e.id!==o.id}));r=r.filter((e=>e.id!==l.id)),i=[...i,...e]}else{i=[...i,o];const e=(null==n?void 0:n.optionIds)??[];if(n&&e.length>0){const t=i.filter((t=>!e.includes(t.id)));t.length+e.length===i.length&&(i=t,r=[...r,n])}}}}else if("is_group"===n.type){const t=e.find((e=>e.name===n.value));if(!t)return;const o=r.filter((e=>e.id!==t.id));if(o.length<r.length)r=o;else{const e=t.optionIds??[];r=[...r,t],i=i.filter((t=>!e.includes(t.id)))}}else(0,c().HB)(n.type);return[...r.map((e=>({type:"is_group",value:e.name}))),...i.map((e=>({type:"is_option",value:e.value})))]}function S(e){const{group:t,options:o,filterValues:n}=e,r=n.some((e=>"is_group"===e.type&&e.value===t.name)),i=o.filter((e=>{var o;return null===(o=t.optionIds)||void 0===o?void 0:o.includes(e.id)})),l=new Map;for(const c of i){const e=n.some((e=>"is_option"===e.type&&e.value===c.value))||r;l.set(c.id,e)}const a=Array.from(l.values()),s=a.some((e=>e)),d=a.every((e=>e))&&a.length>0;return{groupCheckState:!(!r&&!d)||!!s&&"partial",optionCheckedInfo:l}}function F(e){var t,o;const{collectionStore:i,collectionContextStore:l,environment:d}=e,c=l.relativeVariableStore.state,u=l.currentPropertyFiltersStore.state,g=l.currentCombinatorFilterStore.state,m=u.filter((e=>!(0,r().t_)(e.filter))).map((e=>e.filter));if(0===m.length&&!g)return;const f=null==i?void 0:i.getModel(),v=null===(t=l.collectionViewStore())||void 0===t?void 0:t.getCollectionSource(),x=l.normalizedSchemaStore.state,C=null===(o=l.viewsModuleContextStore.currentPageStore())||void 0===o?void 0:o.id,y={schema:f&&v?(0,a().zC)(v.type,x,f):x,userId:d.currentUser.id,userTimeZone:(0,s().P)(),userStartOfWeek:h().XX.state,intl:n().A.getIntl(),relativeVariableResult:c,currentPageInRelatedCollection:C,collectionFeatureGates:(0,p().i)()};return{filter:{filters:g?[...m,g]:m,operator:"and"},propertyMapping:void 0,context:y,sourceCollectionId:null==i?void 0:i.id}}function j(e,t,o){const{property:n}=t,r=e[n];if(!(r&&"rollup"===r.type&&r.relation_property&&r.target_property))return r;{const t=e[r.relation_property];if(t&&(0,i().nC)(t)){const e=(0,i().Nv)(t);if(e){const t=o.getRecordModel(e);if(!t)return;const n=t.getNormalizedSchema();if(n){const e=n[r.target_property];if(e&&"rollup"!==e.type)return e}}}}}function b(e){return function(e){return e===u().IZ||e===u().QW}(e)||e===g().O||e===g().j}function T(e){return e.currentPropertyFiltersStore.state.filter((e=>!(0,r().t_)(e.filter))).length+(e.currentCombinatorFilterStore.state&&e.permissionScopesStore.state.canConfigureBlock?1:0)}function k(e){var t;const o=e.currentCombinatorFilterStore.state;return(null==o||null===(t=o.filters)||void 0===t?void 0:t.length)||0}},862139:(e,t,o)=>{o.d(t,{_:()=>h});var n=o(296540),r=()=>o(907258),i=()=>o(726637),l=()=>o(590526),a=()=>o(81068),s=()=>o(424400),d=()=>o(69708),c=()=>o(698449),u=()=>o(173783),p=()=>o(187820),g=o(474848);function h(e){const{group:t,menuListItemProps:o,spaceStore:h,iconSizeOverride:m,right:f}=e,v=(0,d().tz)(),x=(0,l().K8)((()=>{const e=h??r().AppStoreSidebarSpaceStore.state;if(e&&t.icon)return{pointer:{table:e.table,id:e.id},icon:t.icon}}),[t,h]),C=(0,n.useMemo)((()=>(0,c().Pf)({intl:v,groupName:t.name})),[t.name,v]),y=m||(i().A.isMobile?s().nd:s().pg);return(0,g.jsx)(a().A,{...o,icon:x?(0,g.jsx)(p().B6,{disabled:!0,size:y,icon:x,isEmptyPage:!1,title:C}):(0,g.jsx)(u().A,{size:y}),title:C,right:f})}},933117:(e,t,o)=>{o.d(t,{A:()=>h});o(944114),o(898992),o(803949),o(581454);var n=o(296540),r=()=>o(245720),i=()=>o(30537),l=()=>o(546926),a=()=>o(890492),s=()=>o(663639),d=()=>o(736847),c=()=>o(69708),u=()=>o(496603),p=()=>o(534177),g=o(474848);const h=function({renderOrigin:e,onClick:t,items:n,getKey:r,renderItem:i,selectedItem:a,onSelect:s,dontCloseParentOnSelect:d,menuTypeOverride:c,menuTitle:u,width:p,minWidth:h,disabled:m,originGap:x,buttonPopupStore:C,sameWidthAsOrigin:y}){const A=(0,o(590526).uB)(C,o(118307).A),S=c??(o(726637).A.isMobile?l().gu.Modal:l().gu.Popup);return(0,g.jsx)(o(250910).A,{popupType:v(S),bottomSheetInitialState:"half",renderOrigin:e,buttonPopupStore:A,placementToOrigin:"bottom",onClick:t,render:e=>(0,g.jsx)(f,{parent:e,items:n,getKey:r,renderItem:i,selectedItem:a,onSelect:s,dontCloseParentOnSelect:d,menuType:S,menuTitle:u,width:p,minWidth:h}),disabled:m,originGap:x,sameWidthAsOrigin:y})};function m(e,t,o,r,i,l,a,s){return{key:0,render:e=>(0,n.createElement)(d().A,{...e,key:t,topBorder:t>0}),items:e.map((e=>({key:r(e),render:t=>i({...t,value:e,key:r(e),selectedItem:l}),action:()=>{!function(e,t,o){t!==e&&o(e)}(e,l,a),s||o.close()}})))}}function f({parent:e,items:t,getKey:o,renderItem:n,selectedItem:i,onSelect:d,dontCloseParentOnSelect:h,menuType:f,menuTitle:v,width:x,minWidth:C}){const y=[];if(function(e){return e.length>0&&e[0]instanceof Array}(t))t.forEach(((t,r)=>{const l=m(t,r,e,o,n,i,d,h);y.push(l)}));else{const r=m(t,0,e,o,n,i,d,h);y.push(r)}const A=(0,g.jsx)(s().A,{type:s().O.Vertical,initialFocus:u().SL(u().Bq(t),(e=>u().n4(e,i))),sections:y});let S;switch(f){case l().gu.ActionSheet:S={menuType:l().gu.ActionSheet};break;case l().gu.Modal:S={menuType:l().gu.Modal,title:v,right:(0,g.jsx)(c().sA,{...r().W.done}),onClickRight:e.close};break;case l().gu.Popup:S={menuType:l().gu.Popup,width:x||160,minWidth:C};break;default:(0,p().HB)(f)}return(0,g.jsx)(a().A,{...S,children:A})}function v(e){switch(e){case l().gu.ActionSheet:return i().n.SlideUp;case l().gu.Modal:return i().n.BottomSheet;case l().gu.Popup:return i().n.Popup}}},974619:(e,t,o)=>{o.d(t,{A:()=>M,T:()=>w});o(944114),o(898992),o(354520),o(737550);var n=o(296540),r=()=>o(726637),i=()=>o(484714),l=()=>o(590526),a=()=>o(401497),s=()=>o(245720),d=()=>o(420802),c=()=>o(807449),u=()=>o(546926),p=()=>o(890492),g=()=>o(81068),h=()=>o(663639),m=()=>o(736847),f=()=>o(214388),v=()=>o(784892),x=()=>o(585930),C=()=>o(69708),y=()=>o(100622),A=()=>o(496603),S=()=>o(436696),F=()=>o(480912),j=()=>o(399762),b=()=>o(790515),T=()=>o(249947),k=o(474848);function M(e){const{propertyFilter:t,schema:o,filter:d,parentStore:v,updateValue:F,onClose:j,desktopTopActions:M,mobileMenuTitle:I,mobileMoreActions:P,collectionContextStore:R,context:D}=e,B=(0,i().v3)(),[V,O]=(0,n.useState)([]),[_,L]=(0,n.useState)(!1),E=(0,l().K8)((()=>(0,b().YF)(o,t,v)),[o,t,v]),K=(0,a().IS)((()=>({checkboxIcon:{fill:y().Tj.icon.primary}})),[]),z=(0,l().K8)((()=>(0,f().gc)(d)?(0,f().V6)(d):[]),[d]),H=(0,l().K8)((()=>{if(!E||"status"!==E.type)return[];const e=E.options??[],t=null==R?void 0:R.collectionStoreResultsInViewOrder();return!_&&t?e.filter((e=>t.some((t=>{var o;return null===(o=e.collectionIds)||void 0===o?void 0:o.includes(t.id)})))):e}),[E,_,R]),W=(0,l().K8)((()=>{if(!E||"status"!==E.type)return[];const e=[],t=E.groups??[],o=E.options??[];for(const n of t){const t=(0,b().Ze)({group:n,options:o,filterValues:z});if("partial"!==t.groupCheckState)continue;const r=o.filter((e=>{var t;return null===(t=n.optionIds)||void 0===t?void 0:t.includes(e.id)})).filter((e=>t.optionCheckedInfo.get(e.id)));e.push(...r)}return e}),[E,z]),q=(0,l().K8)((()=>{if(!E||"status"!==E.type)return[];const e=E.options??[];return V?e.filter((e=>!V.some((t=>t.id===e.id)))):[]}),[E,V]);(0,n.useEffect)((()=>{O((()=>A().hS([...H,...V,...W],"id")))}),[H]);const N=(0,l().K8)((()=>E&&"status"===E.type?w({propertySchema:E,statusFilterValues:z,updateValue:F,isMobile:r().A.isMobile,styles:{checkboxIcon:K.checkboxIcon},visibleOptions:V,shouldShowHiddenSources:_,setShouldShowHiddenSources:L}):[]),[E,K.checkboxIcon,F,V,_,L,z]);if(!E||"status"!==E.type)return null;const Y=(0,k.jsx)(m().A,{desktopStyle:{paddingBottom:D===T().mL.ConditionalColorRule?4:0},children:r().A.isMobile?void 0:M});let G;G=r().A.isMobile?{menuType:u().gu.Modal,title:I,left:P,right:(0,k.jsx)(C().sA,{...s().W.done}),onClickRight:j,header:Y}:{menuType:u().gu.Popup,maxHeight:f().mi,width:(0,T().Ul)(D)?260:void 0,header:Y,disableHeaderBorder:!0,tokenInputHeader:!0};const $=(0,k.jsx)(h().A,{type:h().O.Vertical,initialFocus:0,sections:[{key:"groups",items:N,render:e=>(0,k.jsx)(m().A,{...e,title:"",style:{paddingTop:0}})}]}),U=q&&q.length>0&&!_?(0,k.jsx)(m().A,{topBorder:!0,children:(0,k.jsx)(g().A,{icon:(0,k.jsx)(c().I,{icon:x().a}),title:(0,k.jsx)(C().sA,{id:"collectionFilterValueMenu.statusFilterValueMenu.hiddenStatusOptionsDescription",defaultMessage:"{numHiddenOptions, plural, one {{numHiddenOptions} other status option} other {{numHiddenOptions} other status options}}",values:{numHiddenOptions:q.length}}),focused:!1,onClick:()=>{L(!0),R&&(0,S().X)({environment:B,collectionContextStore:R,action:"expand_property_filter",original_view_type:void 0,property_type:"status"})}})}):null,Z=(0,k.jsx)(m().A,{topBorder:!0,children:(0,k.jsx)(g().A,{title:(0,k.jsx)(C().sA,{defaultMessage:"Clear selection",id:"database.filterValue.selectType.clearSelection.message"}),focused:!1,onClick:()=>{F([])}})});return(0,k.jsx)(p().A,{...G,children:(0,f().gc)(d)?(0,k.jsxs)(k.Fragment,{children:[$,U,Z]}):void 0})}function w(e){const{propertySchema:t,statusFilterValues:o,updateValue:n,isMobile:r,styles:i,visibleOptions:l,shouldShowHiddenSources:a}=e,s=t.groups??[],c=t.options??[],u=[];for(const p of s){const e=()=>{const e=(0,b().fe)(s,c,o,{type:"is_group",value:p.name});e&&n(e)},t=(0,b().Ze)({group:p,options:c,filterValues:o}),h=c.filter((e=>{var t;return(null===(t=p.optionIds)||void 0===t?void 0:t.includes(e.id))&&(a||(null==l?void 0:l.some((t=>t.id===e.id))))})),m=[];for(const l of h){const e=()=>{const e=(0,b().fe)(s,c,o,{type:"is_option",value:l.value});e&&n(e)};m.push({key:`option-${l.id}`,action:e,render:o=>(0,k.jsx)(g().A,{...o,icon:(0,k.jsx)(d().S,{checked:t.optionCheckedInfo.get(l.id)??!1,size:14,onClick:e,style:i.checkboxIcon}),title:(0,k.jsx)(j().q,{format:r?v().NY.Large:v().NY.Medium,isSingle:!0,value:l.value,color:l.color,showRemoveButton:!1,groupColor:p.color}),style:{paddingInlineStart:16}})})}u.push({key:`group-${p.id}`,action:e,render:o=>(0,k.jsx)(g().A,{...o,icon:(0,k.jsx)(d().S,{checked:t.groupCheckState,size:14,onClick:e,style:i.checkboxIcon}),title:(0,k.jsx)(F().RS,{style:{fontWeight:500,marginTop:2},group:p,showIcon:!0,showColor:!0}),textWrapperStyle:{marginInlineStart:3}})},...m)}return u}},990736:(e,t,o)=>{o.d(t,{g:()=>u});o(296540);var n=()=>o(726637),r=()=>o(784892),i=()=>o(799829),l=()=>o(69708),a=()=>o(534177),s=()=>o(554548),d=()=>o(881690),c=o(474848);function u({value:e,tokenProps:t={},parentStore:o,relatedCollectionAppConfigUri:u,key:p}){if(!e.value)return null;const g={format:n().A.isMobile?r().NY.Large:r().NY.Small,isSingle:!1,...t},h=e.type;return"exact"===h?(0,c.jsx)(s().A,{blockId:e.value,parentStore:o,...g},p):"relative"===h?"current_page_in_related_collection"===e.value.type?(0,c.jsx)(d().A,{value:(0,c.jsx)(l().sA,{defaultMessage:"This page",id:"database.filterValue.pageContainingThisView"}),backgroundColor:"transparent",showTooltip:"overflow",...g},p):u&&"builtin"===e.value.type?(0,c.jsx)(d().A,{value:(0,c.jsx)(l().sA,{...null===(m=i().n$[u])||void 0===m||null===(m=m[e.value.variable])||void 0===m?void 0:m.messageDescriptor}),backgroundColor:"transparent",showTooltip:"overflow",...g},p):null:void(0,a().HB)(h);var m}}}]);