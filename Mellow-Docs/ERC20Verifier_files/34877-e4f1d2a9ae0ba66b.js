"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[34877],{4055:(e,t,n)=>{n.d(t,{Wh:()=>u,ZC:()=>d,jx:()=>l});var s=()=>n(907258),o=()=>n(902006),a=()=>n(763824),r=()=>n(534177),i=()=>n(547149),c=()=>n(716500);const d=new(n(29923).R)({key:"use_mock_connector_status",namespace:n(553737).cd,important:!1,trackingType:"preference"});function u(e,t,n){const o=s().default.state.sidebarSpaceViewStore;o&&i().createAndCommit({userAction:"mockConnectorStatusActions.setDebuggingConnectorStatus",environment:e,canUndo:!1,perform:e=>{o&&i().applyOperation({store:o,operation:{pointer:o.pointer,path:["settings"],command:"update",args:{...o.getSettings(),dismissed_slack_personal_auth_prompt:!1}},transaction:e})}});(0,c().K)(t).setDebuggingStatus(n)}async function l(e,t=2500){for(const n of Object.values(o().fl))if((0,r().O)(m,n))for(const s of Object.keys(m[n]))console.log("Setting mock connector status for",n,s),u(e,n,s),await(0,a().wR)(t)}const p=(0,n(610083).QO)(),g={not_connected:p,no_channels_selected:{...p,noChannelsSelected:!0},cant_query_connection:{...p,canQuery:!1,isSyncCompleted:!0},in_progress:{...p,inProgress:!0,isSyncCompleted:!1,ingestionProgress:50},disconnecting:{...p,isSyncCompleted:!0,inProgress:!1,connectedApps:["slack-admin"],isDisconnecting:!0},connected:{...p,isSyncCompleted:!0,inProgress:!1,connectedApps:["slack-admin"]}},h=(0,n(169095).Gq)(),m={slack:g,"microsoft-teams":{not_started:h,in_progress:{...h,connectionStatus:"in_progress",syncProgressPercentage:50},disconnecting:{...h,connectionStatus:"completed",isDisconnecting:!0},connected:{...h,connectionStatus:"completed"}}}},7331:(e,t,n)=>{n.d(t,{kD:()=>c,rE:()=>d,kM:()=>i,OA:()=>u,LO:()=>l});n(16280),n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(672577),n(581454),n(737550);Object.freeze(["connections.notion.loadPage","connections.notion.loadDatabase","connections.notion.loadAgent","connections.notion.loadUser","connections.notion.loadDataSource"]);var s=()=>n(158489),o=()=>n(743246),a=(n(354520),n(430670),n(803949),()=>n(638681)),r=()=>n(100594);a().object({required:{type:a().literal("manual")},optional:{},exact:!0}),a().object({required:{type:a().literal("ascending")},optional:{},exact:!0}),a().object({required:{type:a().literal("descending")},optional:{},exact:!0});a().object({required:{},optional:{hideLegend:a().boolean(),showCaption:a().boolean(),caption:a().string(),colorTheme:a().literals(...r().HI),height:a().literals(...Object.values(r().bg)),weightColorValue:a().boolean(),valueLabel:a().string(),mainSort:a().literals(...Object.values(n(499755).S0)),axisLabel:a().literals(...Object.values(r().tG)),axisGridLine:a().literals(...Object.values(r().JQ)),axisHideEmptyGroups:a().boolean(),axisCumulative:a().boolean(),axisShowDataLabels:a().boolean(),axisAvatar:a().literals(...Object.values(r().GL)),axisGroupStyle:a().literals(...Object.values(r().PC)),yAxisMin:a().number(),yAxisMax:a().number(),numberPrecisionOverride:a().literals("precision_uncapped","precision_0","precision_1","precision_2","precision_3","precision_4","precision_5","precision_from_number_property"),hideLineFillArea:a().boolean(),smoothLine:a().boolean(),donutHideValue:a().boolean(),hideNegativeValues:a().boolean(),donutDataLabels:a().literals(...Object.values(r().D0)),referenceLines:a().array(a().object({required:{id:a().string(),value:a().number(),label:a().string(),color:a().literals(...Object.values(n(278238).v3)),dashStyle:a().literals(...r().hw)},optional:{},exact:!0}))},exact:!0});a().object({required:{displayType:a().literals("line","column","bar")},optional:{},exact:!0});function i(e){return"workflow"===e.type||"markdown-chat"===e.type?e.model:void 0}function c(e){return"workflow"===e.type&&e.model?{type:e.model}:void 0}function d(e){const{transcript:t,agentRecordMap:n,spaceId:a,workflowId:r,additionalOperations:i,workflowToReturn:c}=e,d=(0,s().YO)({transcript:t,agentRecordMap:n,additionalOperations:i}),u=function(e){const{recordMap:t,workflowId:n,spaceId:s}=e,a={table:o().C0,id:n,spaceId:s};return t.getModel(a)}({recordMap:d,workflowId:r,spaceId:a});if(!u)return;const l=u.getData()??{};if("published"===c){var p;const e=null===(p=u.getData())||void 0===p?void 0:p.published_artifact_pointer;if(e){const t=d.getModel(e);if("version"===(null==t?void 0:t.type))return{workflow:t.getData()??{},recordMap:d,workflowPointer:u.pointer,workflowParentPointer:u.getParentPointer()}}}return{workflow:l,recordMap:d,workflowPointer:u.pointer,workflowParentPointer:u.getParentPointer()}}function u(e){return"agent-tool-result"===e.type&&("create-agent"===e.toolName||"create-agent-v2"===e.toolName)&&(e.toolName,!0)}function l(e){return"agent-tool-result"===e.type&&("update-agent"===e.toolName||"update-agent-v2"===e.toolName)&&(e.toolName,!0)}},9903:(e,t,n)=>{n.d(t,{A:()=>a});class s extends(()=>n(757695))().Store{getInitialState(){return{connectorTriggeringUpsell:void 0,upsellTriggeredAt:void 0}}}const o=new s;(0,n(852832).exposeDebugValue)("aiConnectorsStore",o);const a=o},61433:(e,t,n)=>{n.d(t,{MX:()=>r,vh:()=>o});var s=()=>n(206267);function o(){return{currentScreen:"none",status:"not_started",sessionId:s().JW(),analyticsFrom:"unknown",authUrl:void 0,isConnected:!1,isSyncComplete:!1,isLoaded:!1,externalSourceName:void 0,ingestionProgress:0}}class a extends(()=>n(757695))().Store{getInitialState(){return o()}}const r=new a;(0,n(852832).exposeDebugValue)("boxAiConnectorStore",r)},96563:(e,t,n)=>{n.d(t,{Lx:()=>A,bl:()=>I,pp:()=>w,y3:()=>D});var s=()=>n(755531),o=()=>n(242422),a=()=>n(902006),r=()=>n(68169),i=()=>n(206267),c=()=>n(706021),d=()=>n(534177),u=()=>n(209660),l=()=>n(9903),p=()=>n(244851),g=()=>n(383070),h=()=>n(412669),m=()=>n(300789),y=()=>n(991249),f=()=>n(807778),S=()=>n(615623),v=()=>n(685377),C=()=>n(656633),_=()=>n(661077),b=()=>n(576590);function I(e){const t=e.type;if((0,r().rL)(t))switch(t){case"researcher":return"ai_research_mode";case"search":return"ai_unified_find_chat";case"markdown-chat":return"ai_chat_with_model";case"workflow":return e.isCustomAgent?"custom_agent":"ai_agent";case"setup-generator":return"ai_limit_in_app";default:(0,d().HB)(t)}return"ai_limit_in_app"}function A(e){const{spaceId:t,userId:n,config:s}=e,o=s.type,a=I(s);if((0,r().rL)(o))switch(o){case"researcher":return{pfaFeatureLoadArgs:{name:"ai_research_mode",spaceId:t,userId:n,amount:1},upsellFromForCheckoutBanner:a};case"search":case"markdown-chat":case"workflow":return{pfaFeatureLoadArgs:{name:"ai_usage",spaceId:t,userId:n,amount:1},upsellFromForCheckoutBanner:a};case"setup-generator":return{pfaFeatureLoadArgs:{name:"ai_app_builder",spaceId:t,userId:n,amount:1},upsellFromForCheckoutBanner:a};default:(0,d().HB)(o)}return{pfaFeatureLoadArgs:{name:"ai_usage",spaceId:t,userId:n,amount:0},upsellFromForCheckoutBanner:a}}function w(e){const{environment:t,connector:n,analyticsFrom:r,connectorsFeatureAvailability:h}=e;if(void 0===h)return;const f=(0,s().S)();if(!f)return;if((0,d().Xk)(a().YV,n)&&m().a(t,`ai_connector_${n}_sidebar_notification`),"generic"!==n&&(0,a().q1)(n)){const e=i().JW();return void(0,b().navigateToAIConnectorOnboarding)({connector:n,analyticsFrom:r,sessionId:e})}const S=o().default.checkGate({gateName:"notion_ai_settings_tab_v2"});if(f.canAdmin())(0,c().N9)(h,{available:()=>{if("generic"===n)return void u().Ow({openedFrom:r,currentTab:"ai",subtab:S?"ai_connectors":void 0});if((0,a().n6)(n)){const e=(0,s().S)();if("enterprise"!==(null==e?void 0:e.getSubscriptionTier())&&!g().zD.isEnterpriseAiConnectorBypassOn(n))return void u().Ow({openedFrom:r,currentTab:"ai",subtab:S?"ai_connectors":void 0})}const e=i().JW();(0,b().navigateToAIConnectorOnboarding)({connector:n,analyticsFrom:r,sessionId:e})},unavailable:({upsell:e})=>{(0,C().vp)(t,f.id)?p().O.setState({open:!0,analyticsFrom:r,modal:"sales_assisted_admin_request",connector:n}):(y().K(t,{from:r,upsell:e,spaceStore:f}),"generic"!==n&&l().A.setState({...l().A.state,connectorTriggeringUpsell:n,upsellTriggeredAt:Date.now()}))}});else{if("generic"===n)return void u().Ow({openedFrom:r,currentTab:"ai",subtab:S?"ai_connectors":void 0});const e=i().JW();(0,b().navigateToAIConnectorOnboarding)({connector:n,analyticsFrom:r,sessionId:e})}}async function D(e,t){if(await v().y.resetData(e,{spaceId:t}),(0,f().FA)()){const n=await(0,S().S)(e,{name:"ai_usage",amount:1,spaceId:t,userId:e.currentUser.id});n&&h().K.state&&h().K.setState(!1),_().P.setState(n)}}},100594:(e,t,n)=>{n.d(t,{CN:()=>T,D0:()=>b,D5:()=>j,GL:()=>S,HI:()=>m,I9:()=>f,JQ:()=>C,JW:()=>E,PC:()=>_,Rb:()=>P,SK:()=>x,UK:()=>L,VY:()=>g,YU:()=>w,Yp:()=>A,_x:()=>D,bg:()=>y,fn:()=>M,hw:()=>l,i8:()=>N,io:()=>p,kq:()=>h,q_:()=>U,tG:()=>v,xS:()=>F,zn:()=>k});var s=()=>n(534177),o=()=>n(341136),a=()=>n(381283),r=()=>n(708685),i=()=>n(62371),c=()=>n(713998),d=()=>n(499755),u=()=>n(901610);const l=["Solid","Dash"],p=10,g=["gray","blue","yellow","green","purple","teal","orange","pink","red"],h=["auto","colorful"],m=[...g,...h];let y=function(e){return e.small="small",e.medium="medium",e.large="large",e.extra_large="extra_large",e}({});function f(e){switch(e){case y.small:return 150;case y.medium:return 250;case y.large:return 300;case y.extra_large:return 400;default:(0,s().HB)(e)}}let S=function(e){return e.avatar="avatar",e.avatar_name="avatar_name",e.name="name",e}({}),v=function(e){return e.none="none",e.x_axis="x_axis",e.y_axis="y_axis",e.both="both",e}({}),C=function(e){return e.none="none",e.horizontal="horizontal",e.vertical="vertical",e.both="both",e}({}),_=function(e){return e.normal="normal",e.percent="percent",e.side_by_side="side_by_side",e}({}),b=function(e){return e.none="none",e.value="value",e.name="name",e.name_and_value="name_and_value",e}({});function I(e){if(!e)return!1;return i().BI.includes(e)}function A(e){const t=(0,r().getFormulaPropertySchemaBaseResultType)(e);return"text"===t||"number"===t||"checkbox"===t||"person"===t||"date"===t}function w(e,t){var n,o;let a,r=e.chartFormat;if("groups_reducer"===e.dataConfig.type){var u;const{chartFormat:n,chartGroupByFormat:s}=function(e,t,n,s){const o=(0,c()._g)({schema:s,property:e.property});if(o&&"donut"===n&&(0,d().e0)(o)){const n=(0,i().MP)(e);return{chartFormat:{...t,mainSort:d().S0.yDescending},chartGroupByFormat:n}}return{chartFormat:t,chartGroupByFormat:e}}(null==e||null===(u=e.dataConfig)||void 0===u?void 0:u.groupBy,null==e?void 0:e.chartFormat,"donut",t);r=n,a={...e.dataConfig,groupBy:s,aggregationConfig:{aggregation:e.dataConfig.aggregationConfig.aggregation}}}else"results_reducer"===e.dataConfig.type?(a=e.dataConfig,r={...r,mainSort:d().S0.yDescending}):(0,s().HB)(e.dataConfig);U(e)&&r&&(void 0===(null===(n=r)||void 0===n?void 0:n.donutDataLabels)||(null===(o=r)||void 0===o?void 0:o.donutDataLabels)===b.none)?r.donutDataLabels=b.value:!U(e)&&r&&(r.donutDataLabels=b.none);const l={...e,type:"donut",dataConfig:a};return r&&(l.chartFormat=r),l}function D(e,t){let n;"groups_reducer"===e.dataConfig.type?n={...e.dataConfig,aggregationConfig:{...e.dataConfig.aggregationConfig,seriesFormat:{displayType:t},stackOptions:void 0}}:"results_reducer"===e.dataConfig.type?n={...e.dataConfig,valueSeriesFormat:{displayType:t}}:(0,s().HB)(e.dataConfig);const o=e.chartFormat;return o&&o.donutDataLabels&&o.donutDataLabels!==b.none?o.axisShowDataLabels=!0:!o||o.donutDataLabels!==b.none&&void 0!==o.donutDataLabels||(o.axisShowDataLabels=!1),{...e,type:t,dataConfig:n}}function x(e,t){let n;if("groups_reducer"===e.dataConfig.type){var o;const s=null==e||null===(o=e.dataConfig)||void 0===o?void 0:o.groupBy;n={...e.dataConfig,groupBy:s,aggregationConfig:{...e.dataConfig.aggregationConfig,seriesFormat:{displayType:t}}}}else"results_reducer"===e.dataConfig.type?n={...e.dataConfig,valueSeriesFormat:{displayType:t}}:(0,s().HB)(e.dataConfig);return{...e,type:t,dataConfig:n}}const P={main:d().S0.xAscending,stacked:d().S0.manual};function T({chartConfig:e,xAxisPropertyId:t,newDataConfigType:n,groupBy:o,aggregation:a,valueProperty:r}){const i="groups_reducer"===e.dataConfig.type?e.dataConfig.aggregationConfig.seriesFormat:e.dataConfig.valueSeriesFormat;"groups_reducer"===n?e.dataConfig={type:"groups_reducer",groupBy:o,aggregationConfig:{aggregation:a,seriesFormat:i,stackOptions:"groups_reducer"===e.dataConfig.type?e.dataConfig.aggregationConfig.stackOptions:void 0}}:"results_reducer"===n?e.dataConfig={type:"results_reducer",nameProperty:t,valueProperty:r,valueSeriesFormat:i}:(0,s().HB)(n);const c="formula"===o.type?o.groupBy.sort:o.sort;return e.chartFormat={...e.chartFormat,mainSort:(0,d().gN)(c)},e}function F({property:e,propertySchema:t,groupByOption:n,hideEmptyGroups:s}){const o=t.type;if((0,i().Eg)(t)){if((0,i()._o)(o)){if(n&&I(n))return{type:o,property:e,groupBy:n,sort:{type:"ascending"}}}else{if((0,i().KI)(o)||"select"===o||"multi_select"===o)return{type:o,property:e,sort:{type:"ascending"}};if((0,i().iF)(o)){if(n&&((a=n)&&i().PC.includes(a)))return{type:o,property:e,groupBy:n,sort:{type:"ascending"}}}else{if("number"===o)return{type:o,property:e,groupBy:{type:"unique"},start:-1,end:-1,size:-1,sort:{type:"ascending"}};if("formula"===o){const s=(0,r().getFormulaPropertySchemaResultType)(t);if("number"===s)return{type:"formula",property:e,groupBy:{type:"number",groupBy:{type:"unique"},start:-1,end:-1,size:-1,sort:{type:"ascending"}}};if("date"===s&&I(n))return{type:"formula",property:e,groupBy:{type:"date",groupBy:n,sort:{type:"ascending"}}}}else if("person"===o)return{type:o,property:e,sort:{type:"manual"}}}}var a;return(0,i().V0)({property:e,propertySchema:t,hideEmptyGroups:s})}}function E(e){const t="formula"===e.type?(0,r().getFormulaPropertySchemaResultType)(e):void 0;return(0,o().A)(e)||"number"===t}function k(e){const t="formula"===e.type?(0,r().getFormulaPropertySchemaResultType)(e):void 0;return(0,i()._o)(e.type)||"date"===t}function M(e){const t="formula"===e.type?(0,r().getFormulaPropertySchemaResultType)(e):void 0;return(0,a().J)(e)||"person"===t}function N(e){if("formula"===e.type){const t=(0,r().getFormulaPropertySchemaResultType)(e);return(0,i()._o)(t)}return(0,i()._o)(e.type)}function L(e){return"text"===e||"number"===e||"person"===e||"date"===e}function j(e){var t;return!(!e||!(0,u().m)(e))&&("groups_reducer"!==e.dataConfig.type||!e.dataConfig.aggregationConfig.stackOptions||"percent"!==(null===(t=e.chartFormat)||void 0===t?void 0:t.axisGroupStyle))}function U(e){return!!j(e)&&(!(!e||!(0,u().m)(e))&&(void 0===(null===(t=e.chartFormat)||void 0===t?void 0:t.axisShowDataLabels)||(null===(n=e.chartFormat)||void 0===n?void 0:n.axisShowDataLabels)));var t,n}},169095:(e,t,n)=>{n.d(t,{F0:()=>r,Gq:()=>o});var s=()=>n(206267);function o(){return{currentScreen:"none",connectionStatus:"not_started",sessionId:s().JW(),analyticsFrom:"unknown",syncProgressPercentage:0,isLoaded:!1,isDisconnecting:!1,error:void 0,externalSourceName:void 0}}class a extends(()=>n(757695))().Store{getInitialState(){return o()}}const r=new a},244851:(e,t,n)=>{n.d(t,{O:()=>o});class s extends(()=>n(757695))().Store{getInitialState(){return{open:!1}}}const o=new s;(0,n(852832).exposeDebugValue)("AssistantConnectorProgressModalStore",o)},265015:(e,t,n)=>{n.d(t,{W:()=>o});class s extends(()=>n(757695))().Store{getInitialState(){return{currentScreen:"none",status:"not_started",sessionId:n(206267).JW(),analyticsFrom:"unknown",authUrl:void 0,ingestionProgress:void 0,isConnected:!1,isDisconnecting:!1,isLoaded:!1,userAuthStatus:"not_required",externalUsername:void 0,externalSourceName:void 0,forceShowAuthNotificationTriggeredAt:void 0}}}const o=new s},272286:(e,t,n)=>{n.d(t,{LF:()=>o,yg:()=>r});var s=()=>n(206267);function o(){return{currentScreen:"none",analyticsFrom:"unknown",sessionId:s().JW(),jiraSiteId:"",jiraSiteUrl:"",jiraSyncState:"not_started",jiraSyncProgress:0,syncControl:{exclusionList:[],inclusionList:[],createdAt:Date.now(),updatedAt:Date.now()},missingUserAuth:!1,isDisconnecting:!1,isLoaded:!1,userConnected:!1}}class a extends(()=>n(757695))().Store{getInitialState(){return o()}isOldJiraConnected(){return"completed"===this.state.jiraSyncState}}const r=new a;(0,n(852832).exposeDebugValue)("jiraAIConnectionStore",r)},313535:(e,t,n)=>{n.d(t,{lk:()=>o});class s extends(()=>n(757695))().Store{getInitialState(){return{currentScreen:"none",connectionStatus:"not_started",sessionId:n(206267).JW(),analyticsFrom:"unknown",syncProgressPercentage:0,isLoaded:!1,isConnected:!1,isDisconnecting:!1,error:void 0,externalSourceName:void 0,forceShowAuthNotificationTriggeredAt:void 0}}}const o=new s},335779:(e,t,n)=>{n.d(t,{XS:()=>o});class s extends(()=>n(757695))().Store{getInitialState(){return{currentScreen:"none",status:"not_started",externalSourceName:void 0,sessionId:n(206267).JW(),analyticsFrom:"unknown",isConnected:!1,isPersonalAuthComplete:!1,isDisconnecting:!1,connectionConflictSpaceId:void 0,isLoaded:!1}}}const o=new s;(0,n(852832).exposeDebugValue)("gmailAIConnectorStore",o)},356584:(e,t,n)=>{n.d(t,{Rr:()=>o,Wz:()=>r});var s=()=>n(206267);function o(){return{currentScreen:"none",status:"not_started",sessionId:s().JW(),analyticsFrom:"unknown",isConnected:!1,isPersonalAuthComplete:!1,isDisconnecting:!1,connectionConflictSpaceId:void 0,externalSourceName:void 0,isLoaded:!1}}class a extends(()=>n(757695))().Store{getInitialState(){return o()}}const r=new a;(0,n(852832).exposeDebugValue)("googleCalendarAIConnectorStore",r)},385847:(e,t,n)=>{n.d(t,{u:()=>c,y:()=>d});n(898992),n(672577);var s=()=>n(242422),o=()=>n(534177),a=()=>n(769864);class r extends(()=>n(757695))().Store{getInitialState(){return{listAIConnectorsPromise:void 0,spaceId:void 0}}}const i=new r;async function c(e){const{environment:t,spaceId:n,connector:s}=e,o=await d({environment:t,spaceId:n});if("success"!==o.type)return"failed";if("connectedConnectors"in o.data){return o.data.connectedConnectors.find((e=>e.id===s))}}async function d(e){const{environment:t,spaceId:n}=e;if(i.state.listAIConnectorsPromise&&i.state.spaceId===n)return i.state.listAIConnectorsPromise;const r=s().default.getConfig({configName:"universal_qna"}),c=(0,o().O9)(r.listAIConnectorsCacheDurationMs)?r.listAIConnectorsCacheDurationMs:3e3,d=a().callApi({eventName:"listAIConnectors",environment:t,data:{spaceId:n}}).then((e=>(setTimeout((()=>{i.setState({listAIConnectorsPromise:void 0,spaceId:n})}),c),e))).catch((e=>e));return i.setState({listAIConnectorsPromise:d,spaceId:n}),d}(0,n(852832).exposeDebugValue)("aiConnectorsStore",i)},412669:(e,t,n)=>{n.d(t,{K:()=>s});const s=n(757695).Store.createValue(!1)},419447:(e,t,n)=>{n.d(t,{qR:()=>s});const s="/workflows/oauth/connect"},450528:(e,t,n)=>{n.d(t,{H5:()=>o,NV:()=>a,ZP:()=>r,dV:()=>i});n(898992),n(354520),n(737550);var s=()=>n(724639);function o(e,t){return(r(e)??[]).some((e=>e.type===t))}function a(e){return"ai-block"===e.type?e.useWebSearch??!1:(0,s().H0)({config:e,modules:[]})}function r(e){return"ai-block"===e.type?e.searchScopes:(0,s().n_)({config:e,modules:[]})??[]}function i(e,t,n,s){if("workflow"!==e.type&&"ai-block"!==e.type)return e;const o=r(e);if(o.some((e=>e.type===t))===n)return e;let a;return a=n?[...o,s()]:o.filter((e=>e.type!==t)),{...e,searchScopes:a}}},484487:(e,t,n)=>{n.d(t,{P0:()=>o});class s extends(()=>n(757695))().Store{getInitialState(){return{connectionStatus:"not_started",syncProgressPercentage:0,isLoaded:!1,isDisconnecting:!1,isEditing:!1,error:void 0,externalSourceName:void 0,currentScreen:"none",sessionId:n(206267).JW(),analyticsFrom:"unknown",isConnected:!1,forceShowAuthNotificationTriggeredAt:void 0}}}const o=new s},544751:(e,t,n)=>{n.d(t,{EF:()=>r,FS:()=>o});var s=()=>n(206267);function o(){return{currentScreen:"none",selection:{allSelected:!0,selectedDrives:[],excludedDrives:[],ingestNewDrives:!0},status:"not_started",sessionId:s().JW(),analyticsFrom:"unknown",authUrl:void 0,isConnected:!1,isPersonalAuthComplete:!1,isDisconnecting:!1,isSyncComplete:!1,isLoaded:!1,connectionDetails:void 0}}class a extends(()=>n(757695))().Store{getInitialState(){return o()}setInProgressAndClose(){this.setState({...this.state,currentScreen:"none",connectionDetails:{...this.state.connectionDetails,status:"in_progress",progress:2}})}}const r=new a;(0,n(852832).exposeDebugValue)("sharepointAiConnectorStore",r)},576590:(e,t,n)=>{n.r(t),n.d(t,{addNotionInfoForJiraAIConnection:()=>J,connectSpaceToJiraSite:()=>_e,createAsanaConnection:()=>Ee,disconnectConnector:()=>Ce,disconnectConnectorPersonalAuth:()=>ve,disconnectJiraUserConnection:()=>be,fetchAsanaWorkspaces:()=>Fe,getAiConnectorOnboardingMomentInSettings:()=>Ae,getJiraAIConnectionStatusAction:()=>Y,getJiraSyncControlAction:()=>ee,getLinearConnectorStatus:()=>Se,getMicrosoftTeamsAIConnectorStatusAction:()=>ie,getMicrosoftTeamsSyncControlsAction:()=>ce,getMicrosoftTeamsTeamsAction:()=>de,getSharepointConnectorDetails:()=>me,maybeMarkAiConnectorOnboardingSurveyMomentInSettings:()=>we,maybeTrackSprigAiConnectorOnboardingSurvey:()=>xe,navigateToAIConnectorOnboarding:()=>L,navigateToAIConnectorSettingsScreen:()=>N,navigateToDiscordUniversalScreen:()=>fe,navigateToGoogleDriveUniversalScreen:()=>E,navigateToJiraUniversalScreen:()=>k,navigateToLinearUniversalScreen:()=>ye,navigateToMicrosoftTeamsUniversalScreen:()=>M,navigateToSharepointUniversalScreen:()=>he,openAuthNeededModal:()=>ae,openConnectorInProgressModal:()=>oe,resetAiConnectorStatus:()=>j,resetAllAiConnectors:()=>U,setAiConnectorOnboardingSurveyMomentInSettings:()=>De,setAssistantOnboardingPhase:()=>P,setLastExposedToQnaAtToCurrentTimestamp:()=>T,setLastUsedAIWriterAtToCurrentTimestamp:()=>F,setMicrosoftTeamsSyncControlsAction:()=>ue,setQnaOnboardingPhase:()=>x,startJiraBulkIngestionAction:()=>te,startJiraEditFlow:()=>ne,startMicrosoftTeamsBulkIngestionAction:()=>le,updateAsanaAIConnectorStatus:()=>Te,updateBoxAIConnectorStatus:()=>Q,updateCustomAiConnectorStatus:()=>X,updateDiscordAIConnectorStatus:()=>Pe,updateGithubAIConnectorStatus:()=>R,updateGmailAIConnectorStatus:()=>z,updateGoogleCalendarAIConnectorStatus:()=>H,updateGoogleDriveConnectionStatus:()=>W,updateGoogleDriveQnAConnectionState:()=>se,updateJiraAIConnectionStatus:()=>q,updateJiraAIV2ConnectionStatus:()=>Z,updateLinearAIConnectorStatus:()=>K,updateMicrosoftTeamsAIConnectorStatusAction:()=>re,updateNotionCalendarAIConnectorStatus:()=>G,updateNotionMailAIConnectorStatus:()=>B,updateOutlookAIConnectorStatus:()=>pe,updateSalesforceAIConnectorStatus:()=>V,updateSharepointAiConnectorStatus:()=>ge,updateSlackConnectionStatus:()=>O,updateSlackQnAConnectionState:()=>$});n(16280),n(898992),n(803949),n(581454);var s=()=>n(906745),o=()=>n(907258),a=()=>n(242422),r=()=>n(675133),i=()=>n(128933),c=()=>n(902006),d=()=>n(206267),u=()=>n(955104),l=()=>n(769864),p=()=>n(680977),g=()=>n(313535),h=()=>n(716500),m=()=>n(272286),y=()=>n(265015),f=()=>n(169095),S=()=>n(544751),v=()=>n(650829),C=()=>n(604018),_=()=>n(244851),b=()=>n(383070),I=()=>n(217714),A=()=>n(547149),w=()=>n(634877),D=()=>n(385847);function x(e,t){const{phase:n,transactionUserAction:s,userSettingsStore:o}=t;A().createAndCommit({environment:e,userAction:s,canUndo:!0,perform:e=>{(0,p().m)({userSettingsStore:o,transaction:e,data:{ai_qna_intro_onboarding_phase:n}})}})}function P(e,t){const{phase:n,transactionUserAction:s,userSettingsStore:o}=t;A().createAndCommit({environment:e,userAction:s,canUndo:!0,perform:e=>{(0,p().m)({userSettingsStore:o,transaction:e,data:{ai_assistant_onboarding_phase:n,ai_assistant_onboarding_phase_last_set_at:Date.now()}})}})}function T(e,t){const{userSettingsStore:n}=t;A().createAndCommit({environment:e,userAction:"aiQnaActions.setLastExposedToQnaAtToCurrentTimestamp",canUndo:!1,perform:e=>{(0,p().m)({userSettingsStore:n,transaction:e,data:{last_exposed_to_ai_qna_at:Date.now()}})}})}function F(e,t){const{userSettingsStore:n}=t;A().createAndCommit({environment:e,userAction:"aiQnaActions.setLastUsedAIWriterAtToCurrentTimestamp",canUndo:!0,perform:e=>{(0,p().m)({userSettingsStore:n,transaction:e,data:{last_used_ai_writer_at:Date.now()}})}})}function E(e){const{screenToShow:t,analyticsFrom:n}=e,s=e.sessionId??d().JW();I().d.setState({...I().d.state,analyticsFrom:n,sessionId:s,currentScreen:t})}function k(e){const{analyticsFrom:t,screenToShow:n}=e,s=e.sessionId??d().JW();m().yg.setState({...m().yg.state,analyticsFrom:t,currentScreen:n,sessionId:s})}function M(e){const{currentScreen:t,analyticsFrom:n,sessionId:s}=e;f().F0.setState({...f().F0.state,currentScreen:t,analyticsFrom:n??f().F0.state.analyticsFrom,sessionId:s??f().F0.state.sessionId})}function N(e){const{connector:t,...n}=e;if("jira"===t&&b().zD.isJiraOldAiConnectorEnabled()&&m().yg.isOldJiraConnected())return void m().yg.setState({...m().yg.state,...n,currentScreen:"settings"});const s=w().NT[t];s.setState({...s.state,...n,currentScreen:"settings"})}function L(e){const{connector:t,...n}=e;if("google-drive"===t){const e=I().d.state.initialSyncState;if("pending_selection"===e)return void E({...n,screenToShow:"connection_complete_screen"});"not_started"!==e&&"none"!==e||E({...n,screenToShow:"introduction"})}else if("microsoft-teams"===t)["not_started","pending_selection"].includes(f().F0.state.connectionStatus)&&M({...n,currentScreen:"not_started"===f().F0.state.connectionStatus?"introduction":"connection_complete_screen"});else{const e=w().NT[t];e.setState({...e.state,...n,currentScreen:"introduction"})}}function j(e){"jira"===e&&b().zD.isJiraOldAiConnectorEnabled()&&m().yg.isOldJiraConnected()?m().yg.reset():w().NT[e].reset()}function U(){c().fl.forEach((e=>{j(e)}))}async function O(e){const{environment:t,spaceId:n}=e;return(0,h().K)("slack").updateConnectorStatus({environment:t,spaceId:n})}async function $(e){const{environment:t,spaceId:n}=e;return O({environment:t,spaceId:n})}async function R(e){return(0,h().K)("github").updateConnectorStatus({environment:e.environment,spaceId:e.spaceId})}async function z(e){const{environment:t,spaceId:n}=e;return(0,h().K)("gmail").updateConnectorStatus({environment:t,spaceId:n})}async function W(e){const{environment:t,spaceId:n}=e;return(0,h().K)("google-drive").updateConnectorStatus({environment:t,spaceId:n})}async function H(e){return(0,h().K)("google-calendar").updateConnectorStatus({environment:e.environment,spaceId:e.spaceId})}async function B(e){return(0,h().K)("notion-mail").updateConnectorStatus({environment:e.environment,spaceId:e.spaceId})}async function G(e){return(0,h().K)("notion-calendar").updateConnectorStatus({environment:e.environment,spaceId:e.spaceId})}async function J(e){const{environment:t,spaceId:n}=e;return"success"!==(await l().callApi({eventName:"addNotionInfoForJiraAIConnection",environment:t,data:{spaceId:n}})).type?{status:"failed"}:{status:"success"}}async function K(e){const{environment:t,spaceId:n}=e;return(0,h().K)("linear").updateConnectorStatus({environment:t,spaceId:n})}async function V(e){const{environment:t,spaceId:n}=e;return(0,h().K)("salesforce").updateConnectorStatus({environment:t,spaceId:n})}async function X(e){return(0,h().K)("custom").updateConnectorStatus({environment:e.environment,spaceId:e.spaceId})}async function Q(e){return(0,h().K)("box").updateConnectorStatus({environment:e.environment,spaceId:e.spaceId})}async function q(e){return Y(e).then((e=>e?{status:"success"}:{status:"failed"}))}async function Y(e){const{environment:t,spaceId:n}=e,s=await l().callCellCompatibleApi({eventName:"getJiraAIConnectionStatus",environment:t,data:{spaceId:n},cellNavigation:{spaceId:n}});if("success"===s.type)return m().yg.setState({...m().yg.state,jiraSiteId:s.data.jiraSiteId??"",jiraSyncState:s.data.connectionState.status,jiraSyncProgress:s.data.connectionState.percentageComplete,jiraSiteUrl:s.data.jiraSiteUrl??"",isDisconnecting:"disconnecting"===s.data.connectionState.status,isLoaded:!0,missingUserAuth:"missing"===s.data.userAuth,userConnected:"connected"===s.data.userAuth}),s.data}async function Z(e){b().zD.isJiraOldAiConnectorEnabled()&&await q(e);return(0,h().K)("jira").updateConnectorStatus({environment:e.environment,spaceId:e.spaceId})}async function ee(e){const{environment:t,spaceId:n,jiraSiteId:s}=e,o=await l().callApi({eventName:"getSyncControlsForJiraConnector",environment:t,data:{spaceId:n,jiraSiteId:s}});if("success"===o.type)return m().yg.setState({...m().yg.state,syncControl:o.data.syncControl}),o}async function te(e){const{environment:t,spaceId:n,jiraSiteId:s,sessionId:o,exclusionList:a,inclusionList:c}=e,d=await l().callApi({eventName:"startJiraBulkIngestion",environment:t,data:{spaceId:n,jiraSiteId:s,sessionId:o,exclusionList:a,inclusionList:c}});if("success"===d.type)return i().D6({label:r().A.getIntl().formatMessage({defaultMessage:"Jira sync started. This can take up to 36 hours.",id:"jira.sync.started"}),position:"bottom"}),m().yg.setState({...m().yg.state,jiraSyncState:"in_progress",jiraSyncProgress:1}),d;i().D6({label:r().A.getIntl().formatMessage({defaultMessage:"Something went wrong. Please try again.",id:"jira.sync.failed"}),position:"bottom"})}async function ne(e){const{environment:t,spaceId:n,jiraSiteId:s,exclusionList:o,inclusionList:a}=e,c=await l().callApi({eventName:"startJiraEditBulkIngestion",environment:t,data:{spaceId:n,jiraSiteId:s,inclusionList:a,exclusionList:o}});if("success"===c.type)return c.data.patchSuccess?(m().yg.setState({...m().yg.state,jiraSyncState:"editing",jiraSyncProgress:100}),i().D6({label:r().A.getIntl().formatMessage({defaultMessage:"Project sync list updated, sync started in background.",id:"jira.edit.success"}),position:"bottom"})):i().D6({label:r().A.getIntl().formatMessage({defaultMessage:"No changes were detected.",id:"jira.edit.noChanges"}),position:"bottom"}),c;i().D6({label:r().A.getIntl().formatMessage({defaultMessage:"Something went wrong. Please try again.",id:"jira.edit.failed"}),position:"bottom"})}async function se(e){var t;const{environment:n,spaceId:s,showSnackbarOnError:o}=e;if(a().default.checkGate({gateName:"ai_connector_unification_google_drive"}))return W({environment:n,spaceId:s});const r=await l().callCellCompatibleApi({eventName:"getGoogleDriveSyncProgress",environment:n,data:{spaceId:s},cellNavigation:{spaceId:s}});return"success"!==r.type?o?r.status>=400&&r.status<500?((0,w().Rl)(),{status:"failed"}):((0,w().NK)(),{status:"failed"}):{status:"failed"}:(I().d.setState({...I().d.state,initialSyncState:(0,C().HB)(r.data.status),isDisconnecting:"disconnecting"===r.data.status,isEditing:"editing"===r.data.status,syncProgress:r.data.status,syncCurrent:r.data.current,syncTotal:r.data.total,ingestionProgress:r.data.ingestionProgress,isLoaded:!0,externalSourceName:null===(t=r.data.connectionDetails)||void 0===t?void 0:t.domainName}),{status:"success"})}function oe(e){const{environment:t,connector:n,from:s}=e;_().O.setState({..._().O.state,open:!0,modal:"progress",connector:n}),v().assistantDependency.load().then((({assistantAnalyticsActions:e})=>{e.trackConnectorInProgressModalOpened({environment:t,connector:n,from:s})}))}function ae(e){const{environment:t,connector:n,from:s}=e;_().O.setState({..._().O.state,open:!0,modal:"auth_needed",connector:n}),v().assistantDependency.load().then((({assistantAnalyticsActions:e})=>{e.trackConnectorAuthNeededModalOpened({environment:t,connector:n,from:s})}))}async function re(e){return ie(e).then((e=>e?{status:"success"}:{status:"failed"}))}async function ie(e){const{environment:t,spaceId:n}=e;return await(0,h().K)("microsoft-teams").updateConnectorStatus({environment:t,spaceId:n}),f().F0.getState()}async function ce(e){const{environment:t,spaceId:n}=e,s=await l().callCellCompatibleApi({eventName:"getMicrosoftTeamsSyncControls",environment:t,data:{spaceId:n},cellNavigation:{spaceId:n}});if("success"===s.type)return s.data}async function de(e){const{environment:t,spaceId:n,cursor:s}=e,o=await l().callApi({eventName:"getMicrosoftTeamsTeams",environment:t,data:{spaceId:n,cursor:s}});if("success"===o.type)return o.data}async function ue(e){const{environment:t,spaceId:n,syncControls:s}=e,o=await l().callCellCompatibleApi({eventName:"setMicrosoftTeamsSyncControls",environment:t,data:{spaceId:n,syncControls:s},cellNavigation:{spaceId:n}});if("success"===o.type)return await ie({environment:t,spaceId:n}),o.data}async function le(e){const{environment:t,spaceId:n,sessionId:s}=e,o=await l().callApi({eventName:"startMicrosoftTeamsBulkIngestion",environment:t,data:{spaceId:n,sessionId:s}});if("success"===o.type)return i().D6({label:r().A.getIntl().formatMessage({defaultMessage:"Microsoft Teams sync started. This can take up to 36 hours.",id:"microsoftTeams.sync.started"}),position:"bottom"}),await ie({environment:t,spaceId:n}),o;i().D6({label:r().A.getIntl().formatMessage({defaultMessage:"Something went wrong. Please try again.",id:"microsoftTeams.sync.failed"}),position:"bottom"})}async function pe(e){return(0,h().K)("outlook").updateConnectorStatus({environment:e.environment,spaceId:e.spaceId})}async function ge(e){return(0,h().K)("sharepoint").updateConnectorStatus({environment:e.environment,spaceId:e.spaceId})}function he(e){const{currentScreen:t}=e;S().EF.setState({...S().EF.state,currentScreen:t})}async function me(e){const{environment:t,spaceId:n}=e,s=await(0,D().u)({environment:t,spaceId:n,connector:"sharepoint"});if(!s||"failed"===s)return{status:"not_started",externalSourceName:void 0};const o=s.details.connectionDetails;return{status:o.status,externalSourceName:o.external_source_name}}function ye(e){const{currentScreen:t}=e;y().W.setState({...y().W.state,currentScreen:t})}function fe(e){g().lk.setState({...g().lk.state,currentScreen:e})}async function Se(e){const{environment:t,spaceId:n}=e,s=await(0,D().u)({environment:t,spaceId:n,connector:"linear"});if(!s||"failed"===s)return"not_started";return s.details.connectionDetails.status}async function ve(e){const{environment:t,sidebarSpaceViewStore:n,connector:s}=e,o=null==n?void 0:n.getSpaceId();if(o){if("slack"===s)throw new Error("Slack connector personal auth disconnect not implemented");return(0,h().K)(s).disconnectConnectorPersonalAuth({environment:t,spaceId:o})}}async function Ce(e){const{connector:t,spaceId:n,environment:s,disconnectReason:o}=e,a=(0,h().K)(t),r=await a.disconnectConnector({environment:s,spaceId:n,disconnectReason:o});return(0,w().th)(t,(e=>({...e,isDisconnecting:!0,isEditing:!1}))),r}async function _e(e){const{environment:t,spaceId:n}=e,{sidebarSpaceViewStore:s}=o().default.getState();if(void 0===s)return!1;const a=await l().callApi({eventName:"connectJiraSiteToSpace",environment:t,data:{spaceId:n,siteId:m().yg.state.jiraSiteId}});return!("success"!==a.type||!a.data.connectionSuccess)&&(m().yg.setState({...m().yg.state,currentScreen:"connection_complete_screen",jiraSiteId:a.data.siteData.siteId,jiraSiteUrl:a.data.siteData.siteUrl,jiraSyncState:"pending_selection"}),A().createAndCommit({userAction:"jiraAIConnector.onboarding.dismissPersonalAuthPrompt",environment:t,canUndo:!0,perform:e=>{A().applyOperation({store:s,operation:{pointer:s.pointer,path:["settings"],command:"update",args:{...s.getSettings(),dismissed_jira_installation_pending_prompt:null}},transaction:e})}}),!0)}async function be(e){const{environment:t,spaceId:n}=e,s=await l().callApi({eventName:"disconnectJiraUserConnection",environment:t,data:{spaceId:n}});return"success"===s.type&&!0===s.data.disconnected&&(m().yg.setState({...m().yg.state,userConnected:!1,missingUserAuth:!0}),!0)}const Ie={started:"ai_connector_onboarding_started_at",finished:"ai_connector_onboarding_completed_at",survey_triggered:"ai_connector_onboarding_survey_triggered_at"};function Ae(e){var t;const{connector:n,moment:s}=e,{sidebarSpaceViewStore:a}=o().default.getState();if(!a)return;const r=Ie[s];return null===(t=a.getSettings())||void 0===t||null===(t=t[r])||void 0===t?void 0:t[n]}function we(e){const{environment:t,connector:n,moment:s}=e,{sidebarSpaceViewStore:a}=o().default.getState();a&&void 0===Ae({connector:n,moment:s})&&De({environment:t,currentSpaceViewStore:a,connector:n,moment:s,timestamp:Date.now()})}function De(e){const{environment:t,currentSpaceViewStore:n,connector:s,moment:o,timestamp:a}=e,r=Ie[o];A().createAndCommit({environment:t,userAction:`aiConnector.onboarding.${o}`,canUndo:!0,perform:e=>{var t;A().applyOperation({store:n,operation:{pointer:n.pointer,path:["settings"],command:"update",args:{...n.getSettings(),[r]:{...null===(t=n.getSettings())||void 0===t?void 0:t[r],[s]:a}}},transaction:e})}})}function xe(e){const{environment:t,connector:n,connectedApps:o}=e,a=Ae({connector:n,moment:"started"}),r=Ae({connector:n,moment:"finished"});if(!a||r)return;if(a>s().DateTime.now().minus({days:5}).toMillis())return;if(o.includes(n))return;Ae({connector:n,moment:"survey_triggered"})||(u().u4({name:`${n}_ai_connector_dropoff_survey`}),we({environment:t,connector:n,moment:"survey_triggered"}))}async function Pe(e){const{environment:t,spaceId:n}=e;return(0,h().K)("discord").updateConnectorStatus({environment:t,spaceId:n})}async function Te(e){const{environment:t,spaceId:n}=e;return(0,h().K)("asana").updateConnectorStatus({environment:t,spaceId:n})}async function Fe(e){const{environment:t,spaceId:n}=e;try{var s;const e=await l().callApi({eventName:"getAsanaWorkspaces",environment:t,data:{spaceId:n}});if("success"===e.type&&null!==(s=e.data)&&void 0!==s&&s.workspaces){const t=e.data.workspaces.map((e=>({id:e.gid,name:e.name})));return{workspaces:t,userSelection:e.data.userSelection}}return}catch(o){return}}async function Ee(e){const{environment:t,spaceId:n,token:s,sessionId:o}=e;try{const e=await l().callApi({eventName:"createAsanaConnection",environment:t,data:{spaceId:n,token:s,sessionId:o}});return"success"===e.type&&!0===e.data.success?{status:"success"}:{status:"failed",errorMessage:"Failed to authenticate with the provided token"}}catch(a){return{status:"failed",errorMessage:"An unexpected error occurred while creating the connection"}}}},604018:(e,t,n)=>{n.d(t,{A7:()=>U,HB:()=>F,Nr:()=>k,XY:()=>E,bp:()=>O,kB:()=>M,uM:()=>j,wd:()=>L,yc:()=>N});n(898992),n(354520);var s=()=>n(907258),o=()=>n(484714),a=()=>n(590526),r=()=>n(902006),i=()=>n(534177),c=()=>n(634877),d=()=>n(484487),u=()=>n(61433),l=()=>n(313535),p=()=>n(913839),g=()=>n(335779),h=()=>n(356584),m=()=>n(655600),y=()=>n(272286),f=()=>n(937854),S=()=>n(265015),v=()=>n(169095),C=()=>n(246679),_=()=>n(243331),b=()=>n(812357),I=()=>n(919515),A=()=>n(544751),w=()=>n(610083),D=()=>n(217714),x=()=>n(864139),P=()=>n(789586),T=()=>n(383070);function F(e){return"completed"===e?"completed":"not_started"===e?"not_started":"pending_selection"===e?"pending_selection":"in_progress"}function E(e){if("google-drive"===e)return"pending_selection"===D().d.state.initialSyncState?"in_progress":D().d.state.initialSyncState;if("jira"===e){const e=f().EF.state.jiraSyncState;return"not_started"===e||"pending_connection"===e?"not_started":"in_progress"===e||"pending_selection"===e?"in_progress":"completed"}if("github"===e)return"authenticated"===p().o.state.status?"in_progress":p().o.state.status;if("gmail"===e)return"authenticated"===g().XS.state.status?"completed":"not_started";if("google-calendar"===e)return"authenticated"===h().Wz.state.status?"completed":"not_started";if("notion-mail"===e)return"authenticated"===_().Lf.state.status?"completed":_().Lf.state.isBackendConnected?"in_progress":"not_started";if("notion-calendar"===e)return"authenticated"===C().gv.state.status?"completed":C().gv.state.isBackendConnected?"in_progress":"not_started";if("outlook"===e)return"authenticated"===b().yF.state.status?"completed":"not_started";if("microsoft-teams"===e)switch(v().F0.state.connectionStatus){case"completed":return"completed";case"in_progress":return"in_progress";default:return"not_started"}if("slack"===e)return w().Rh.state.noChannelsSelected?"not_started":w().Rh.state.isSyncCompleted?"completed":"in_progress";var t;if("sharepoint"===e)switch(null===(t=A().EF.state.connectionDetails)||void 0===t?void 0:t.status){case"completed":return"completed";case"in_progress":return"in_progress";default:return"not_started"}if("linear"===e)switch(S().W.state.status){case"completed":return"completed";case"in_progress":return"in_progress";default:return"not_started"}if("salesforce"===e)switch(I().Ci.state.status){case"completed":return"completed";case"in_progress":return"in_progress";default:return"not_started"}if("box"===e){switch(u().MX.state.status){case"completed":return"completed";case"in_progress":return"in_progress";default:return"not_started"}}if("discord"===e){const e=l().lk.state.connectionStatus;return"not_started"===e?"not_started":"in_progress"===e||"pending_selection"===e?"in_progress":"completed"}if("asana"===e){const e=d().P0.state.connectionStatus;return"not_started"===e?"not_started":"in_progress"===e||"pending_selection"===e?"in_progress":"completed"}return"custom"===e?"not_started":(0,i().HB)(e)}function k(){return M().filter((e=>{if("slack"===e){return!(w().Rh.state.connectedApps||[]).includes("slack-admin")}return"google-drive"===e?"none"===D().d.state.initialSyncState||"not_started"===D().d.state.initialSyncState:"github"===e?"not_started"===p().o.state.status:"jira"===e?"not_started"===f().EF.state.jiraSyncState:"sharepoint"===e?!A().EF.state.connectionDetails:"gmail"===e?"not_started"===g().XS.state.status:"google-calendar"===e?"not_started"===h().Wz.state.status:"notion-mail"===e?"not_started"===_().Lf.state.status:"notion-calendar"===e?"not_started"===C().gv.state.status:"outlook"===e?"not_started"===b().yF.state.status:"microsoft-teams"===e?"not_started"===v().F0.state.connectionStatus:"linear"===e?"not_started"===S().W.state.status:"salesforce"===e?"not_started"===I().Ci.state.status:"discord"===e?"not_started"===l().lk.state.connectionStatus:"box"===e?"not_started"===u().MX.state.status:"asana"===e?"not_started"===d().P0.state.connectionStatus:"custom"===e||(0,i().HB)(e)}))}function M(){return N.filter((e=>T().zD.canUseAiConnectorSearchScope(e)))}const N=[...r().i9,...n(496603).Ul(r().fl.filter((e=>!(0,r().r9)(e)&&"custom"!==e)),(e=>n(987267).w0[e]))];function L({includeConnectorsWithAuthNeeded:e=!1}={}){return N.filter((t=>"slack"===t?T().zD.isConnectedToSlackUniversalQnA(w().Rh.state)||e&&(0,m().al)(w().Rh.state):"google-drive"===t?T().zD.isConnectedToGoogleDriveUniversalQnA(w().Rh.state):"github"===t?T().zD.isConnectedToGithubUniversalQnA(p().o.state)||e&&(0,m().F1)(p().o.state):"jira"===t?T().zD.isConnectedToJiraUniversalQnA(y().yg.state,f().EF.state):"gmail"===t?T().zD.isConnectedToGmailUniversalQnA(g().XS.state):"google-calendar"===t?T().zD.isConnectedToGoogleCalendarUniversalQnA(h().Wz.state):"notion-mail"===t?T().zD.isConnectedToNotionMailUniversalQnA(_().Lf.state)&&!T().zD.isConnectedToGmailUniversalQnA(g().XS.state):"notion-calendar"===t?T().zD.isConnectedToNotionCalendarUniversalQnA(C().gv.state)&&!T().zD.isConnectedToGoogleCalendarUniversalQnA(h().Wz.state):"outlook"===t?T().zD.isConnectedToOutlookUniversalQnA(b().yF.state):"sharepoint"===t?T().zD.isConnectedIsSharepointAiConnector(A().EF.state):"microsoft-teams"===t?T().zD.isConnectedToMicrosoftTeamsUniversalQnA(v().F0.state):"linear"===t?T().zD.isConnectedToLinearUniversalQnA(S().W.state):"salesforce"===t?T().zD.isConnectedIsSalesforceAiConnector(I().Ci.state):"discord"===t?T().zD.isConnectedToDiscordAiConnector(l().lk.state):"box"===t?T().zD.isConnectedToBoxAiConnector(u().MX.state):"asana"===t?T().zD.isConnectedToAsanaAiConnector(d().P0.state):"custom"!==t&&(0,i().HB)(t)))}function j(){return L().filter((e=>(0,m().LT)(e).isInProgress))}function U(e){return"jira"===e&&T().zD.isJiraOldAiConnectorEnabled()&&y().yg.isOldJiraConnected()?y().yg.state.isLoaded:"custom"===e?x().qu.state.isLoaded:c().NT[e].state.isLoaded}function O(){const e=(0,o().v3)(),t=(0,a().O$)(s().AppStoreSidebarSpaceStore),n=(0,P().P)({name:"ai_connectors",spaceId:null==t?void 0:t.id,userId:e.currentUser.id})??!1;return(0,a().K8)((()=>{var e;return!(!t||!n)&&!Boolean(null===(e=t.getSettings())||void 0===e?void 0:e.embedding_index_is_live)}),[t,n])}},610083:(e,t,n)=>{n.d(t,{QO:()=>o,Rh:()=>r});var s=()=>n(206267);function o(){return{inProgress:!1,isPublicSync:!1,isPrivateSync:!1,selection:{allSelected:!0,selectedChannels:[],excludedChannels:[],joinFutureChannels:!0,selectedFeature:void 0},isSyncCompleted:!1,currentScreen:"none",sessionId:s().JW(),analyticsFrom:"unknown",authUrl:void 0,canQuery:!0,connectedApps:void 0,noChannelsSelected:void 0,ingestionProgress:void 0,gridSetupUrl:void 0,isSlackGridAiConnectorEnabled:!1,isLoaded:!1,externalSourceName:void 0,forceShowAuthNotificationTriggeredAt:void 0,connectionVersion:void 0,errorCode:void 0,thirdPartyId:void 0}}class a extends(()=>n(757695))().Store{getInitialState(){return o()}isSlackUserConnectionCompleted(){var e;return(null===(e=this.state.connectedApps)||void 0===e?void 0:e.includes("slack"))??!1}isSlackV2AdminConnectionCompleted(){var e;return((null===(e=this.state.connectedApps)||void 0===e?void 0:e.includes("slack-admin"))&&this.state.isSyncCompleted&&2===this.state.connectionVersion)??!1}showUserConnectionNotification(){return this.isSlackV2AdminConnectionCompleted()&&!this.isSlackUserConnectionCompleted()&&!this.state.isPrivateSync&&!this.state.isSlackGridAiConnectorEnabled}}const r=new a;(0,n(852832).exposeDebugValue)("slackUniversalQnAConnectionStore",r)},634877:(e,t,n)=>{n.d(t,{NK:()=>k,NT:()=>D,Rl:()=>E,getAiConnectorRefreshFunction:()=>w,hP:()=>P,nB:()=>F,th:()=>x,ts:()=>T});n(898992),n(354520),n(581454);var s=n(296540),o=()=>n(300474),a=()=>n(920198),r=()=>n(242422),i=()=>n(484714),c=()=>n(590526),d=()=>n(128933),u=()=>n(718827),l=()=>n(902006),p=()=>n(187174),g=()=>n(69708),h=()=>n(763824),m=()=>n(534177),y=()=>n(769864),f=()=>n(4055),S=()=>n(604018),v=()=>n(383070),C=()=>n(176983),_=()=>n(789586),b=()=>n(576590),I=n(474848);const A={slack:b().updateSlackQnAConnectionState,"google-drive":b().updateGoogleDriveQnAConnectionState,jira:b().updateJiraAIV2ConnectionStatus,github:b().updateGithubAIConnectorStatus,sharepoint:b().updateSharepointAiConnectorStatus,"microsoft-teams":b().updateMicrosoftTeamsAIConnectorStatusAction,gmail:b().updateGmailAIConnectorStatus,linear:b().updateLinearAIConnectorStatus,outlook:b().updateOutlookAIConnectorStatus,"notion-mail":b().updateNotionMailAIConnectorStatus,"google-calendar":b().updateGoogleCalendarAIConnectorStatus,"notion-calendar":b().updateNotionCalendarAIConnectorStatus,salesforce:b().updateSalesforceAIConnectorStatus,discord:b().updateDiscordAIConnectorStatus,asana:b().updateAsanaAIConnectorStatus,box:b().updateBoxAIConnectorStatus,custom:b().updateCustomAiConnectorStatus};function w(e){return async t=>f().ZC.state?{status:"success"}:A[e](t)}const D={slack:n(610083).Rh,"google-drive":n(217714).d,jira:n(937854).EF,github:n(913839).o,sharepoint:n(544751).EF,"microsoft-teams":n(169095).F0,gmail:n(335779).XS,linear:n(265015).W,outlook:n(812357).yF,"notion-mail":n(243331).Lf,"google-calendar":n(356584).Wz,"notion-calendar":n(246679).gv,salesforce:n(919515).Ci,discord:n(313535).lk,asana:n(484487).P0,box:n(61433).MX,custom:n(864139).qu};function x(e,t){const n=D[e];n.setState(t(n.state))}function P(e){return(0,c().K8)((()=>r().default.getConfigKey("ingestion",e)),[e])}function T(e,t){const n=(0,i().v3)(),a=(0,o().r)(),r=(0,c().K8)(S().kB,[]),d=(0,s.useRef)(!1),u=(0,c().K8)((()=>r.filter((e=>!(0,S().A7)(e)||t)).filter((t=>!(0,m().O9)(e)||e.includes(t)))),[r,e,t]);(0,p().Yb)((async()=>{if(!a||d.current||0===u.length)return;const e=u.map((e=>w(e)));d.current=!0,await(0,h().lX)(e,10,(e=>e({environment:n,spaceId:a}))),d.current=!1}),[n,a,u]);return{isLoading:(0,c().K8)((()=>{if(f().ZC.state)return!1;return u.filter((e=>!(0,S().A7)(e))).length>0}),[u])}}function F(e){const{connector:t,authorizationType:n,existingAuthorizationUrl:r,openAuthUrl:d}=e,u=(0,i().v3)(),g=(0,o().r)(),h=(0,a().L)(),m=(0,C().J)(h),[f,S]=(0,s.useState)(r),b=(0,c().K8)((()=>v().zD.isAiConnectorEnabled(t)),[t]),I=(0,_().P)({name:"ai_connectors",spaceId:g,userId:u.currentUser.id});return(0,p().Yb)((async()=>{if(!g||f||d)return;if(!b)return;if(!I&&!(0,l().q1)(t))return;if("workspace"===n&&!m)return;if("custom"===t)return;const e=await y().callApi({eventName:"getAIConnectorAuthorizationUrl",environment:u,data:{connector:t,authorizationType:n,spaceId:g,sessionId:D[t].state.sessionId,client:u.device.isElectron?"desktop":"web"}});if("success"!==e.type)return;const s=e.data.authorizationUrl;S(s)}),[u,g,t,n,f,d,m,b,I]),f}function E(){d().D6({label:(0,I.jsx)(g().sA,{id:"universalSearch.googleDriveIngestion.googleDriveButton.accessDeniedSnackbar",defaultMessage:"You do not have access to Google Drive Universal QnA."}),position:"bottom",style:{width:"600px",display:"flex",justifyContent:"space-between"},right:(0,I.jsx)(u().Ay,{onClick:d().N2,children:(0,I.jsx)(g().sA,{id:"universalSearch.googleDriveIngestion.googleDriveButton.closeErrorSnackbar",defaultMessage:"Close"})})})}function k(){d().D6({label:(0,I.jsx)(g().sA,{id:"universalSearch.googleDriveIngestion.googleDriveButton.showTryAgainSnackbar",defaultMessage:"There was problem processing your request. Please try again."}),position:"bottom",style:{width:"600px",display:"flex",justifyContent:"space-between"},right:(0,I.jsx)(u().Ay,{onClick:d().N2,children:(0,I.jsx)(g().sA,{id:"universalSearch.googleDriveIngestion.googleDriveButton.closeErrorSnackbar",defaultMessage:"Close"})})})}},655600:(e,t,n)=>{n.d(t,{$t:()=>L,F1:()=>F,HF:()=>j,LT:()=>N,UK:()=>U,_1:()=>w,al:()=>P,eA:()=>k,hA:()=>E,kv:()=>T,o5:()=>O,uD:()=>D,zM:()=>x});n(16280),n(18107),n(944114),n(967357);var s=()=>n(242422),o=()=>n(902006),a=()=>n(534177),r=()=>n(634877),i=()=>n(383070),c=()=>n(217714),d=()=>n(484487),u=()=>n(61433),l=()=>n(313535),p=()=>n(913839),g=()=>n(335779),h=()=>n(356584),m=()=>n(272286),y=()=>n(937854),f=()=>n(265015),S=()=>n(169095),v=()=>n(246679),C=()=>n(243331),_=()=>n(812357),b=()=>n(919515),I=()=>n(544751),A=()=>n(610083);const w=["slack_select_channels","slack_re_auth","slack_v2_user_connection","github_re_auth","jira_connection_pending","microsoft_teams_select_teams","sharepoint_select_sites","jira_connect_user","jira_select_projects","jira_migrate","slack_migrate","linear_re_auth","discord_re_auth","salesforce_re_auth","google_drive_connection_pending","asana_re_auth","asana_select_workspace","box_awaiting_confirmation"];function D(e,t){const n=[];if("slack"===e){const{noChannelsSelected:e,ingestionProgress:s}=A().Rh.state;i().zD.isSlackV2AiConnectorEnabled()&&!A().Rh.state.isSlackGridAiConnectorEnabled&&A().Rh.state.isSyncCompleted&&1===A().Rh.state.connectionVersion&&t&&n.push({type:"slack_migrate"}),!i().zD.isSlackV2AiConnectorEnabled()&&e&&void 0===s&&t&&n.push({type:"slack_select_channels"}),!i().zD.isSlackV2AiConnectorEnabled()&&P(A().Rh.state)&&n.push({type:"slack_re_auth"}),i().zD.isSlackV2AiConnectorEnabled()&&A().Rh.showUserConnectionNotification()&&n.push({type:"slack_v2_user_connection"})}else if("jira"===e){"pending_selection"===y().EF.state.jiraSyncState&&n.push({type:"jira_select_projects"}),m().yg.isOldJiraConnected()&&i().zD.isJiraForgeEnabled()&&!y().EF.isJiraForgeConnectionDone()&&t&&n.push({type:"jira_migrate"});const{jiraSyncState:e}=m().yg.state;s().default.checkGate({gateName:"install_from_jira_marketplace"})&&"pending_connection"===e&&t&&n.push({type:"jira_connection_pending"});s().default.checkGate({gateName:"jira_user_auth_flow"})&&m().yg.state.missingUserAuth&&n.push({type:"jira_connect_user"})}else if("microsoft-teams"===e){const{connectionStatus:e}=S().F0.state;"pending_selection"===e&&t&&n.push({type:"microsoft_teams_select_teams"})}else if("google-drive"===e)"pending_selection"===c().d.state.initialSyncState&&t&&n.push({type:"google_drive_connection_pending"});else if("sharepoint"===e){const{connectionDetails:e}=I().EF.state;"pending_selection"===(null==e?void 0:e.status)&&t&&n.push({type:"sharepoint_select_sites"})}else"github"===e?F(p().o.state)&&n.push({type:"github_re_auth"}):"linear"===e?k(e)&&n.push({type:`${e}_re_auth`}):"asana"===e?function(){const{connectionStatus:e}=d().P0.state;return"pending_selection"===e}()&&t&&n.push({type:"asana_select_workspace"}):"box"===e&&function(e){const{status:t}=e;return"box_awaiting_confirmation"===t}(u().MX.state)&&n.push({type:"box_awaiting_confirmation"});return n}function x(e){return"slack"===e?!A().Rh.state.canQuery:"github"===e?!p().o.state.isPersonalAuthComplete:"linear"===e?!!s().default.checkGate({gateName:"linear_user_auth_flow"})&&"pending"===f().W.state.userAuthStatus:"salesforce"===e&&"pending"===b().Ci.state.userAuthStatus}function P(e){const{isSlackGridAiConnectorEnabled:t,isSyncCompleted:n,ingestionProgress:s,canQuery:o}=e;return!(t||!n||void 0!==s||o)}function T(){const e=i().zD.isSlackV2AiConnectorEnabled();return!e&&P(A().Rh.state)?"slack_re_auth":e&&A().Rh.showUserConnectionNotification()?"slack_v2_user_connection":void 0}function F(e){const{githubOrg:t,isPersonalAuthComplete:n,isDisconnecting:s,forceShowAuthNotificationTriggeredAt:o}=e;return!(!o&&(null==t||!t.isSyncComplete||n||s))}function E(e){if("linear"===e){if(!s().default.checkGate({gateName:"linear_user_auth_flow"}))return!1;const{userAuthStatus:e}=f().W.state;return"not_required"!==e}return!1}function k(e){if("linear"===e)return function(){if(!s().default.checkGate({gateName:"linear_user_auth_flow"}))return!1;const{isConnected:e,userAuthStatus:t,isDisconnecting:n}=f().W.state;return e&&"pending"===t&&!n}();throw new Error("isConnectedButAuthNeeded is not implemented for this connector")}function M(){const{jiraSyncState:e,jiraSyncProgress:t}=y().EF.state;return"in_progress"===e||"editing"===e||"pending_installation"===e?{isInProgress:!0,ingestionProgress:t}:{isInProgress:!1}}function N(e){if("slack"===e){const{inProgress:e,ingestionProgress:t,isSlackGridAiConnectorEnabled:n}=A().Rh.state;return n?{isInProgress:!1}:e?{isInProgress:!0,ingestionProgress:t??0}:{isInProgress:!1}}if("google-drive"===e){const{ingestionProgress:e,isEditing:t}=c().d.state;return void 0!==e||t?{isInProgress:!0,ingestionProgress:e}:{isInProgress:!1}}if("github"===e){const{status:e}=p().o.state;return"in_progress"===e?{isInProgress:!0,ingestionProgress:void 0}:{isInProgress:!1}}if("jira"===e){if(i().zD.isJiraForgeEnabled()&&y().EF.isJiraForgeConnectionDone())return M();if(i().zD.isJiraOldAiConnectorEnabled()){const{jiraSyncState:e,jiraSyncProgress:t}=m().yg.state;if("in_progress"===e||"editing"===e)return{isInProgress:!0,ingestionProgress:t}}return M()}if("sharepoint"===e){const{connectionDetails:e}=I().EF.state;return"in_progress"===(null==e?void 0:e.status)?{isInProgress:!0,ingestionProgress:null==e?void 0:e.progress}:{isInProgress:!1}}if("microsoft-teams"===e){const{connectionStatus:e,syncProgressPercentage:t}=S().F0.state;return"in_progress"===e?{isInProgress:!0,ingestionProgress:t}:{isInProgress:!1}}if((0,o().Gb)(e))return{isInProgress:!1};if("linear"===e){const{status:e,ingestionProgress:t}=f().W.state;return"in_progress"===e?{isInProgress:!0,ingestionProgress:t}:{isInProgress:!1}}if("salesforce"===e){const{status:e,ingestionProgress:t}=b().Ci.state;return"in_progress"===e?{isInProgress:!0,ingestionProgress:t}:{isInProgress:!1}}if("discord"===e){const{connectionStatus:e,syncProgressPercentage:t}=l().lk.state;return"in_progress"===e?{isInProgress:!0,ingestionProgress:t}:{isInProgress:!1}}if("asana"===e){const{connectionStatus:e,syncProgressPercentage:t}=d().P0.state;return"in_progress"===e?{isInProgress:!0,ingestionProgress:t}:{isInProgress:!1}}if("box"===e){const{status:e,ingestionProgress:t}=u().MX.state;return"in_progress"===e?{isInProgress:!0,ingestionProgress:t}:{isInProgress:!1}}return"custom"===e?{isInProgress:!1}:(0,a().HB)(e)}function L(e){if("sharepoint"===e){const{connectionDetails:e}=I().EF.state;return"disconnecting"===(null==e?void 0:e.status)}if("box"===e){const{status:e}=u().MX.state;return"disconnecting"===e}if("salesforce"===e){const{status:e}=b().Ci.state;return"disconnecting"===e}if("linear"===e){const{status:e}=f().W.state;return"disconnecting"===e}if("jira"===e){if(i().zD.isJiraForgeEnabled()&&y().EF.isJiraForgeConnectionDone())return"disconnecting"===y().EF.state.jiraSyncState;if(i().zD.isJiraOldAiConnectorEnabled())return"disconnecting"===m().yg.state.jiraSyncState}else if("custom"===e)return!1;return Boolean(r().NT[e].state.isDisconnecting)}function j(e){const t=function(e){return D(e,!0)}(e),n=t.at(0),o=U(e),a=s().default.checkGate({gateName:"custom_agents"}),r=function(e){return"slack"===e&&i().zD.isSlackConnectorUnificationEnabled()}(e)&&a;if(n)return{type:"action_required",action:n.type,externalSourceName:o,isEnabledForCustomAgents:r};const c=N(e);return c.isInProgress?{type:"in_progress",ingestionProgress:c.ingestionProgress,externalSourceName:o,isEnabledForCustomAgents:r}:L(e)?{type:"disconnecting",externalSourceName:o,isEnabledForCustomAgents:r}:{type:"connected",externalSourceName:o,isEnabledForCustomAgents:r}}function U(e){if("jira"===e){if(i().zD.isJiraForgeEnabled()&&y().EF.isJiraForgeConnectionDone()){const{jiraSiteUrl:e}=y().EF.state;return e}const{jiraSiteUrl:e}=m().yg.state,t=/^https:\/\/([a-zA-Z0-9-]+)\.atlassian\.net/,n=e.match(t);return(null==n?void 0:n[1])||e}if("google-drive"===e){const{externalSourceName:e}=c().d.state;return e}if("github"===e){const{externalSourceName:e}=p().o.state;if(e)return e;const{githubOrg:t}=p().o.state;return null==t?void 0:t.name}if("linear"===e){const{externalSourceName:e}=f().W.state;return e}if("sharepoint"===e){const{connectionDetails:e}=I().EF.state;return null==e?void 0:e.externalSourceName}if("slack"===e){const{externalSourceName:e}=A().Rh.state;return e}if("gmail"===e){const{externalSourceName:e}=g().XS.state;return e}if("google-calendar"===e){const{externalSourceName:e}=h().Wz.state;return e}if("notion-mail"===e){const{externalSourceName:e}=C().Lf.state;return e}if("notion-calendar"===e){const{externalSourceName:e}=v().gv.state;return e}if("microsoft-teams"===e){const{externalSourceName:e}=S().F0.state;return e}if("outlook"===e){const{externalSourceName:e}=_().yF.state;return e}if("salesforce"===e){const{externalSourceName:e}=b().Ci.state;return e}if("box"===e){const{externalSourceName:e}=u().MX.state;return e}if("asana"===e){const{externalSourceName:e}=d().P0.state;return e}}function O(e){if("linear"===e){const{externalUsername:e}=f().W.state;return e}}},656633:(e,t,n)=>{n.d(t,{vp:()=>a});var s=()=>n(134217);const o={isSalesAssisted:void 0};function a(e,t){return o.isSalesAssisted??(0,s().e9)(e,t)}(0,n(466103).exposeDebugEnvironmentValue)("getAssistantOnboardingDebugInfo",(e=>()=>{const{currentUserSettingsStore:t,sidebarSpaceStore:s}=n(907258).default.state,o=null==t?void 0:t.getSettings();if(!o||!s)return;const{ai_qna_intro_onboarding_phase:r,ai_assistant_onboarding_phase:i,ai_assistant_onboarding_phase_last_set_at:c,ai_assistant_tooltips_onboarding_phase:d,ai_sales_assisted_extra_notification_seen_at:u,last_exposed_to_ai_qna_at:l,qna_reminders_shown_at:p}=o;return{isSalesAssisted:a(e,s.id),relevantUserSettings:{ai_qna_intro_onboarding_phase:r,ai_assistant_onboarding_phase:i,ai_assistant_tooltips_onboarding_phase:d,ai_assistant_onboarding_phase_last_set_at:c,ai_sales_assisted_extra_notification_seen_at:u,last_exposed_to_ai_qna_at:l,qna_reminders_shown_at:p}}}))},661077:(e,t,n)=>{n.d(t,{P:()=>s});const s=n(757695).Store.createValue(!0,{name:"IsAiEligibleStore"})},694926:(e,t,n)=>{n.d(t,{_:()=>o});var s=()=>n(769864);async function o(e){const{environment:t}=e,n=await s().callMainCellApi({eventName:"getEmailDomainSettings",environment:t,data:{}});return"failed"===n.type||Boolean(n.data.settings.disable_notion_mail)}},716500:(e,t,n)=>{n.d(t,{K:()=>z});n(16280);var s=()=>n(564884),o=()=>n(675133),a=()=>n(128933),r=()=>n(902006),i=()=>n(510818),c=()=>n(201980),d=()=>n(69708),u=()=>n(534177),l=()=>n(769864),p=()=>n(385847),g=()=>n(96563),h=()=>n(383070),m=()=>n(836095),y=()=>n(61958),f=()=>n(634877),S=()=>n(450528),v=()=>n(604018),C=()=>n(655600);class _{createSearchScope(){return{type:this.base.type}}getSearchScopeDisplayDetails(e){return{displayName:this.base.displayName}}isEligible(e){return h().zD.canUseAiConnectorSearchScope(this.base.type)}isLoading(){return!(0,v().A7)(this.base.type)}isInProgress(){return(0,C().LT)(this.base.type).isInProgress}isDisconnecting(){return(0,C().$t)(this.base.type)}isEnabled(e){return(0,S().H5)(e,this.base.type)}setEnabled(e,t,n){return this.isAvailable(n??{})?(0,S().dV)(e,this.base.type,t,(()=>this.createSearchScope())):e}toSearchScopeModule(){return{type:this.base.type,displayName:this.base.displayName,icon:this.icon,isEligible:e=>this.isEligible(e),isLoading:()=>this.isLoading(),isAvailable:e=>this.isAvailable(e),needsAuth:()=>this.needsAuth(),createSearchScope:()=>this.createSearchScope(),isEnabled:e=>this.isEnabled(e),setEnabled:(e,t,n)=>this.setEnabled(e,t,n),isInProgress:()=>this.isInProgress(),isDisconnecting:()=>this.isDisconnecting(),isConnected:e=>this.isConnected(e),connect:e=>this.connect(e)}}async authenticate(e){const{environment:t,spaceId:n,onAuthSuccess:s}=e;if(!this.needsAuth())return;const o=f().NT[this.base.type].state,a=await l().callApi({eventName:"getAIConnectorAuthorizationUrl",environment:t,data:{connector:this.base.type,authorizationType:"user",spaceId:n,sessionId:o.sessionId,client:t.device.isElectron?"desktop":"web"}});"success"===a.type&&(t.device.isElectron?(0,m().P)(a.data.authorizationUrl):(y().P(t,{width:800,height:600,url:a.data.authorizationUrl,titleMessage:this.messages.oauthPopupTitleMessage}),null==s||s()))}}var b=()=>n(61433);n(898992),n(672577),n(430670);var I=()=>n(576590),A=()=>n(913839);var w=()=>n(335779);var D=()=>n(356584);var x=()=>n(217714),P=()=>n(610083);var T=()=>n(272286),F=()=>n(937854);n(354520),n(581454);var E=()=>n(169095);var k=()=>n(246679);var M=()=>n(243331);var N=()=>n(812357);var L=()=>n(919515);var j=()=>n(544751);n(944114);var U=n.n(n(755373)),O=()=>n(245241),$=()=>n(244851);const R=Object.freeze({slack:new class extends _{constructor(...e){super(...e),this.base=new(n(838862).d),this.store=P().Rh,this.icon=n(703888).j,this.messages=(0,d().YK)({oauthPopupTitleMessage:{id:"universalSearch.slack.slackOauthPopupTitle",defaultMessage:"Authenticate Slack"},connectorScopedSearchTooltipMessage:{id:"assistantScopedSearchMenu.slackItem.tooltip",defaultMessage:"Find in Slack chats you have access to"},userOverwritePopupTitleMessage:{id:"slackConnectionOptions.overwriteEmail.title",defaultMessage:"User Authorization"}}),this.alreadyConnectedConfig={analyticsFrom:"slack_already_connected",primedTextInput:"Search for messages in Slack: ",contentType:"conversations"}}getCitationAnnotationFromParsedHref(e){const{parsedData:t,href:n}=e;if(t.type!==this.base.type)throw new Error(`Expected ${this.base.type} parsed data, got ${t.type}`);return(0,c().X$)({...t,type:this.base.type,href:n,threadHref:n})}getCitationAnnotationFromSearchResult(e){const{result:t}=e;if(t.type!==this.base.type)throw new Error(`Expected ${this.base.type} result, got ${t.type}`);return(0,c().X$)({type:this.base.type,href:t.href,domain:t.domain,baseUrl:t.baseUrl,channelId:t.channelId,messageId:t.messageId,threadTs:t.threadTs,threadHref:t.href,resultId:t.id,positionWithinSource:t.positionWithinSource,traceId:t.traceId})}getPayloadDataForHrefCallback(e){const{context:t,parsedData:n}=e;if(t.searchSourceType===this.base.type&&n.type===this.base.type)return{...n,type:this.base.type,title:t.title,text:t.text,lastEdited:t.lastEdited}}async updateConnectorStatus(e){var t,n,s;const{environment:o,spaceId:a}=e,r=await(0,p().u)({environment:o,spaceId:a,connector:this.base.type});if("failed"===r)return{status:"failed"};if(!r)return this.store.setState({...this.store.state,isDisconnecting:!1,isSyncCompleted:!1,inProgress:!1,ingestionProgress:void 0,isPublicSync:!1,externalSourceName:"",connectedApps:[],isLoaded:!0,thirdPartyId:void 0}),{status:"success"};const i=r.details.connectionDetails,c=[];return null!==(t=r.details.userConnectionDetails)&&void 0!==t&&t.isEnabledForPrivateSync&&c.push("slack"),null!=i&&i.external_source_name&&c.push("slack-admin"),this.store.setState({...this.store.state,canQuery:(null===(n=r.details.userConnectionDetails)||void 0===n?void 0:n.isAvailableForUser)??!0,isPrivateSync:(null===(s=r.details.userConnectionDetails)||void 0===s?void 0:s.isPrivateSync)??!1,ingestionProgress:(null==i?void 0:i.progress)>=100||"completed"===(null==i?void 0:i.status)?void 0:(null==i?void 0:i.progress)??0,isPublicSync:(null==i?void 0:i.isPublicSync)??!1,externalSourceName:(null==i?void 0:i.external_source_name)??"",inProgress:"in_progress"===(null==i?void 0:i.status),isSyncCompleted:"completed"===(null==i?void 0:i.status),isEditing:"editing"===(null==i?void 0:i.status),isDisconnecting:"disconnecting"===(null==i?void 0:i.status),connectedApps:c,isSlackGridAiConnectorEnabled:(null==i?void 0:i.isGridAiConnectorEnabled)??!1,isLoaded:!0,connectionVersion:null==i?void 0:i.connection_version,thirdPartyId:r.thirdPartyId,selection:{...this.store.state.selection},writeAccessApproved:null==i?void 0:i.write_access_approved,privateAccessEnabled:null==i?void 0:i.private_access_enabled}),{status:"success"}}async disconnectConnector(e){const{environment:t,spaceId:n}=e;return l().callApi({eventName:"disconnectSlackIngestion",environment:t,data:{spaceId:n,disconnectForWorkspace:!1}})}async disconnectConnectorPersonalAuth(){}async authenticate(e){const{environment:t,spaceId:n}=e,s=await l().callApi({eventName:"getSlackIngestionAuthorizeUrl",environment:t,data:{spaceId:n,isAdminAuth:!1,isDesktopApp:t.device.isElectron,isUserMapping:!0}});"success"===s.type&&(t.device.isElectron?(0,m().P)(s.data.url):await y().P(t,{width:800,height:600,url:s.data.url,titleMessage:this.messages.userOverwritePopupTitleMessage}))}setDebuggingStatus(e){const t=this.getTestableStatuses();return e in t&&(this.store.setState(t[e]),!0)}generateRenderableResults(e){const{result:t,parsedHref:n}=e;if(t.type!==this.base.type||n.type!==this.base.type)throw new Error(`Expected ${this.base.type} result, but got result.type=${t.type} parsed.type=${n.type}`);const s=`slack://?${U().stringify({base_url:n.baseUrl,channel_id:n.channelId,message_id:n.messageId,thread_ts:n.threadTs})}`;if(!t.messages||0===t.messages.length)return[{type:this.base.type,href:s,id:t.pageId,title:t.title,text:(0,i().Mw)(t.text),user:"",lastEdited:t.lastEdited,domain:n.domain,baseUrl:n.baseUrl,channelId:n.channelId,messageId:n.messageId,threadHref:s,threadMessages:[],threadTs:n.threadTs,highlight:{...t.highlight??{},text:(0,i().Mw)(t.text)}}];const{user:o,text:a}=this.extractUserAndText(t),r=t.messages.map((e=>e.messageId)),c=t.messages.filter((e=>e.messageId!==s)).map((e=>({id:e.messageId,type:this.base.type,href:e.messageId,user:e.user,title:t.title,text:e.text,messageId:e.messageId,lastEdited:e.lastEdited,domain:n.domain,baseUrl:n.baseUrl,channelId:n.channelId,threadTs:n.threadTs,threadMessages:r,highlight:{...t.highlight,text:(0,i().Mw)(e.text)}})));return[{id:t.pageId,type:this.base.type,href:s,threadHref:s,title:t.title,text:a,user:o,lastEdited:t.lastEdited,domain:n.domain,baseUrl:n.baseUrl,channelId:n.channelId,messageId:n.messageId,threadTs:n.threadTs,threadMessages:r,highlight:{...t.highlight,text:a}},...c]}getDismissedAuthPromptKey(){return"dismissed_slack_personal_auth_prompt"}isConnected(e){return h().zD.isConnectedToSlackUniversalQnA(this.store.state)}needsAuth(){return(0,C().al)(this.store.state)}isAvailable(e){return this.isConnected(e)}connect(e){if(!e)return;const{environment:t,connectorsFeatureAvailability:s}=e;if(this.needsAuth())return $().O.setState({...$().O.state,open:!0,modal:"auth_needed",connector:this.base.type}),void n(650829).assistantDependency.load().then((({assistantAnalyticsActions:e})=>{e.trackConnectorAuthNeededModalOpened({environment:t,connector:this.base.type,from:"multi_search_scope_menu"})}));(0,g().pp)({environment:t,connector:this.base.type,analyticsFrom:"multi_search_scope_menu",connectorsFeatureAvailability:s})}getTestableStatuses(){const e=(0,P().QO)();return{not_connected:e,in_progress:{...e,inProgress:!0},disconnecting:{...e,isDisconnecting:!0},connected_admin:{...e,isLoaded:!0,isSyncCompleted:!0,connectedApps:["slack-admin"]},connected_admin_and_user:{...e,isLoaded:!0,isSyncCompleted:!0,connectedApps:["slack-admin","slack"]}}}extractUserAndText(e){var t;let s,o=(0,i().Mw)(e.text);if(e.type===this.base.type&&null!==(t=e.highlight)&&void 0!==t&&t.text&&(o=(0,i().Mw)(e.highlight.text)),e.type===this.base.type&&Array.isArray(e.messages)){const t=e.messages.find((t=>t.messageId===e.id));s=null==t?void 0:t.user;const a=n(496603).sb(e.messages.map((e=>e.user))),r=": ";if(o.includes(r)){const[e,...t]=o.split(r);if(e){const n=e.replace(new RegExp(`${O().$8}(.*?)${O()._x}`,"g"),"$1");if(0===a.length)o=t.join(r);else{const e=a.findIndex((e=>e===n));-1!==e&&(s=a[e],o=t.join(r))}}}}return{user:s??"",text:o}}},asana:new class extends _{constructor(...e){super(...e),this.base=new(n(532058).v),this.store=n(484487).P0,this.icon=n(756374).X,this.messages=(0,d().YK)({oauthPopupTitleMessage:{id:"asanaAIConnector.oauthPopup.title",defaultMessage:"Asana Authentication"},connectorScopedSearchTooltipMessage:{id:"assistantScopedSearchMenu.asanaItem.tooltip",defaultMessage:"Find in your Asana tasks and projects"},userDisconnectedMessage:{id:"asanaAIConnector.userAuth.disconnected",defaultMessage:"Asana user account disconnected."}}),this.alreadyConnectedConfig={analyticsFrom:"asana_already_connected",primedTextInput:"Search for tasks in Asana",contentType:"tasks"}}getCitationAnnotationFromParsedHref(e){if("asana"!==e.parsedData.type)throw new Error(`Expected asana parsed data, got ${e.parsedData.type}`);const{href:t,parsedData:n}=e;return(0,c().X$)({type:this.base.type,href:t,url:n.url,messageId:n.url})}getCitationAnnotationFromSearchResult(e){if("asana"!==e.result.type)throw new Error(`Expected asana result, got ${e.result.type}`);return(0,c().X$)({type:this.base.type,href:e.result.href,url:e.result.url,messageId:e.result.url,resultId:e.result.id,positionWithinSource:e.result.positionWithinSource,traceId:e.result.traceId})}getPayloadDataForHrefCallback(e){const{context:t,parsedData:n}=e;if(t.searchSourceType===this.base.type&&n.type===this.base.type)return{...n,type:this.base.type,url:n.url,title:t.title,text:"",lastEdited:t.lastEdited,href:(0,r().V9)(n.href)}}async updateConnectorStatus(e){const{environment:t,spaceId:n}=e,s=await(0,p().u)({environment:t,spaceId:n,connector:"asana"});if(!s||"failed"===s)return this.store.setState({...this.store.state,isConnected:!1,isLoaded:!0,connectionStatus:"not_started",isDisconnecting:!1}),{status:"success"};const o=null==s?void 0:s.details.connectionDetails;return this.store.setState({...this.store.state,isConnected:"completed"===(null==o?void 0:o.status)||"disconnecting"===(null==o?void 0:o.status),isLoaded:!0,syncProgressPercentage:(null==o?void 0:o.progress)??0,connectionStatus:(null==o?void 0:o.status)??"not_started",externalSourceName:null==o?void 0:o.external_source_name,isDisconnecting:"disconnecting"===(null==o?void 0:o.status)}),{status:"success"}}async disconnectConnector(e){const{environment:t,spaceId:n}=e;await l().callApi({eventName:"disconnectAiConnector",environment:t,data:{spaceId:n,connector:this.base.type}});return{type:"success"}}async disconnectConnectorPersonalAuth(e){const{environment:t,spaceId:n}=e;(0,s().u)({environment:t,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"user_auth_disconnect",integration_type:this.base.type,setup_session_id:this.store.state.sessionId,from:this.store.state.analyticsFrom}}}),await l().callApi({eventName:"disconnectAiConnector",environment:t,data:{spaceId:n,connector:this.base.type,disconnectionType:"user"}}),this.store.setState({...this.store.state,connectionStatus:"not_started",isConnected:!1}),this.messages.userDisconnectedMessage&&a().D6({label:o().A.getIntl().formatMessage(this.messages.userDisconnectedMessage),position:"bottom"})}setDebuggingStatus(e){const t=this.getTestableStatuses();return!!(0,u().O)(t,e)&&(this.store.setState(t[e]),!0)}generateRenderableResults(e){const{result:t,parsedHref:n}=e;if("asana"===t.type){if("asana"!==n.type)throw new Error(`Expected asana result, but got ${n.type}`);return[{type:"asana",href:t.id,id:t.pageId,title:t.title,text:(0,i().Mw)(t.text),lastEdited:t.lastEdited,url:n.url,highlight:t.highlight}]}}getDismissedAuthPromptKey(){return"dismissed_asana_personal_auth_prompt"}isConnected(e){return h().zD.isConnectedToAsanaAiConnector(this.store.state)}needsAuth(){const{connectionStatus:e,syncProgressPercentage:t}=this.store.state;return"in_progress"===e&&void 0===t}isAvailable(e){return this.isConnected(e)}connect(e){if(!e)return;const{environment:t,connectorsFeatureAvailability:n}=e;(0,g().pp)({environment:t,connector:"asana",analyticsFrom:"multi_search_scope_menu",connectorsFeatureAvailability:n})}getTestableStatuses(){const e=this.store.getInitialState();return{not_started:{...e},in_progress:{...e,connectionStatus:"in_progress",syncProgressPercentage:50},disconnecting:{...e,isConnected:!0,connectionStatus:"disconnecting",isDisconnecting:!0},connected:{...e,isConnected:!0,connectionStatus:"completed",syncProgressPercentage:100}}}},discord:new class extends _{constructor(...e){super(...e),this.base=new(n(971502).Z),this.store=n(313535).lk,this.icon=n(661596).h,this.messages=(0,d().YK)({oauthPopupTitleMessage:{id:"discordAIConnector.oauthPopup.title",defaultMessage:"Discord Authentication"},connectorScopedSearchTooltipMessage:{id:"assistantScopedSearchMenu.discordItem.tooltip",defaultMessage:"Find in Discord servers you have access to"},userDisconnectedMessage:{id:"discordAIConnector.userAuth.disconnected",defaultMessage:"Discord user account disconnected."}}),this.alreadyConnectedConfig={analyticsFrom:"discord_already_connected",primedTextInput:"Search for messages in Discord",contentType:"messages"}}getCitationAnnotationFromParsedHref(e){if("discord"!==e.parsedData.type)throw new Error(`Expected discord parsed data, got ${e.parsedData.type}`);return(0,c().X$)({type:this.base.type,href:e.href,url:e.parsedData.url})}getCitationAnnotationFromSearchResult(e){if("discord"!==e.result.type)throw new Error(`Expected discord result, got ${e.result.type}`);return(0,c().X$)({type:this.base.type,href:e.result.href,url:e.result.url,resultId:e.result.id,positionWithinSource:e.result.positionWithinSource,traceId:e.result.traceId})}getPayloadDataForHrefCallback(e){const{context:t,parsedData:n}=e;if(t.searchSourceType===this.base.type&&n.type===this.base.type)return{...n,type:this.base.type,url:n.url,title:t.title,text:"",lastEdited:t.lastEdited,href:(0,r().V9)(n.href)}}async updateConnectorStatus(e){const{environment:t,spaceId:n}=e,s=await(0,p().u)({environment:t,spaceId:n,connector:"discord"});if(!s||"failed"===s)return this.store.setState({...this.store.state,isConnected:!1,isLoaded:!0}),{status:"success"};const o=null==s?void 0:s.details.connectionDetails;return this.store.setState({...this.store.state,isConnected:"completed"===(null==o?void 0:o.status)||"disconnecting"===(null==o?void 0:o.status),isLoaded:!0,syncProgressPercentage:(null==o?void 0:o.progress)??0,connectionStatus:(null==o?void 0:o.status)??"not_started",externalSourceName:null==o?void 0:o.external_source_name}),{status:"success"}}async disconnectConnector(e){const{environment:t,spaceId:n}=e;return l().callApi({eventName:"disconnectAiConnector",environment:t,data:{spaceId:n,connector:this.base.type}})}async disconnectConnectorPersonalAuth(e){const{environment:t,spaceId:n}=e;(0,s().u)({environment:t,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"user_auth_disconnect",integration_type:this.base.type,setup_session_id:this.store.state.sessionId,from:this.store.state.analyticsFrom}}}),await l().callApi({eventName:"disconnectAiConnector",environment:t,data:{spaceId:n,connector:this.base.type,disconnectionType:"user"}}),this.store.setState({...this.store.state,isConnected:!1,connectionStatus:"not_started",syncProgressPercentage:0}),this.messages.userDisconnectedMessage&&a().D6({label:o().A.getIntl().formatMessage(this.messages.userDisconnectedMessage),position:"bottom"})}setDebuggingStatus(e){const t=this.getTestableStatuses();return!!(0,u().O)(t,e)&&(this.store.setState(t[e]),!0)}generateRenderableResults(e){const{result:t,parsedHref:n}=e;if("discord"!==t.type||"discord"!==n.type)throw new Error(`Expected discord result, but got ${t.type}`);return[{type:"discord",href:t.id,id:t.pageId,title:t.title,text:(0,i().Mw)(t.text),lastEdited:t.lastEdited,url:n.url,channelId:t.channelId,messageId:t.messageId,guildId:t.guildId,threadHref:t.id,highlight:t.highlight}]}getDismissedAuthPromptKey(){}isConnected(e){return h().zD.isConnectedToDiscordAiConnector(this.store.state)}needsAuth(){const{connectionStatus:e,syncProgressPercentage:t}=this.store.state;return"in_progress"===e&&void 0===t}isAvailable(e){return this.isConnected(e)}connect(e){if(!e)return;const{environment:t,connectorsFeatureAvailability:n}=e;(0,g().pp)({environment:t,connector:"discord",analyticsFrom:"multi_search_scope_menu",connectorsFeatureAvailability:n})}getTestableStatuses(){const e=this.store.getInitialState();return{not_started:{...e},in_progress:{...e,connectionStatus:"in_progress",syncProgressPercentage:50},disconnecting:{...e,isConnected:!0,connectionStatus:"disconnecting",isDisconnecting:!0},connected:{...e,isConnected:!0,connectionStatus:"completed",syncProgressPercentage:100}}}},github:new class extends _{constructor(...e){super(...e),this.base=new(n(515870).o),this.store=A().o,this.icon=n(941115).A,this.messages=(0,d().YK)({oauthPopupTitleMessage:{id:"githubAIConnector.oauthPopup.title",defaultMessage:"GitHub Authentication"},connectorScopedSearchTooltipMessage:{id:"assistantScopedSearchMenu.githubItem.tooltipDriver",defaultMessage:"Find in your GitHub repositories"}}),this.alreadyConnectedConfig={analyticsFrom:"github_already_connected",primedTextInput:"Search for code, pull requests, and issues in GitHub",contentType:"GitHub repositories"}}getCitationAnnotationFromParsedHref(e){if("github"!==e.parsedData.type)throw new Error(`Expected github parsed data, got ${e.parsedData.type}`);return(0,c().X$)({type:this.base.type,href:e.href,url:e.parsedData.url,messageId:e.parsedData.url})}getCitationAnnotationFromSearchResult(e){if("github"!==e.result.type)throw new Error(`Expected github result, got ${e.result.type}`);return(0,c().X$)({type:this.base.type,href:e.result.href,url:e.result.url,messageId:e.result.id,resultId:e.result.id,positionWithinSource:e.result.positionWithinSource})}getPayloadDataForHrefCallback(e){const{context:t,parsedData:n}=e;if(t.searchSourceType===this.base.type&&n.type===this.base.type)return{...n,type:this.base.type,url:n.url,title:t.title,text:"",lastEdited:t.lastEdited,href:(0,r().V9)(n.href)}}async updateConnectorStatus(e){const{environment:t,spaceId:n}=e,s=await(0,p().u)({environment:t,spaceId:n,connector:this.base.type});if("failed"===s)return{status:"failed"};if(s){const e=s.details.connectionDetails;this.store.setState({...this.store.state,status:this.getGithubStatus({githubOrg:{isSyncComplete:"completed"===e.status||"disconnecting"===e.status},isConnected:!0}),isConnected:!1,githubOrg:{id:(null==e?void 0:e.orgId)??0,installationId:Number((null==e?void 0:e.installationId)??0),name:(null==e?void 0:e.external_source_name)??"",isSyncComplete:"completed"===(null==e?void 0:e.status)},isPersonalAuthComplete:"completed"!==(null==e?void 0:e.status)||s.details.userConnectionDetails.isPersonalAuthComplete,isDisconnecting:"disconnecting"===(null==e?void 0:e.status),isLoaded:!0,externalSourceName:null==e?void 0:e.external_source_name})}else this.store.setState({...this.store.state,status:"not_started",isConnected:!1,githubOrg:void 0,isPersonalAuthComplete:!1,isDisconnecting:!1,isLoaded:!0,externalSourceName:void 0});return{status:"success"}}async disconnectConnector(e){const{environment:t,spaceId:n}=e,s=await l().callApi({eventName:"disconnectGithub",environment:t,data:{spaceId:n}});return this.store.setState({...this.store.state,isDisconnecting:!0}),s}async disconnectConnectorPersonalAuth(e){const{environment:t,spaceId:n}=e,s=await l().callApi({eventName:"disconnectGithub",environment:t,data:{spaceId:n,disconnectUserAuth:!0}});this.store.setState({...this.store.state,isPersonalAuthComplete:!1}),"success"===s.type&&s.data.redirectUrl&&(t.device.isElectron?(0,m().P)(s.data.redirectUrl):window.open(s.data.redirectUrl,"_blank"))}setDebuggingStatus(e){const t=this.getTestableStatuses();return!!(0,u().O)(t,e)&&(this.store.setState(t[e]),!0)}generateRenderableResults(e){const{result:t,parsedHref:n}=e;if("github"!==t.type||"github"!==n.type)throw new Error(`Expected github result, but got result.type=${t.type} parsed.type=${n.type}`);return[{type:"github",href:t.id,id:t.pageId,title:t.title,text:(0,i().Mw)(t.text),lastEdited:t.lastEdited,authorName:t.authorName,statusTag:t.statusTag,githubRepoName:t.githubRepoName,fileType:t.fileType,url:n.url,highlight:t.highlight}]}getDismissedAuthPromptKey(){return"dismissed_github_personal_auth_prompt"}async authenticate(e){const{environment:t,spaceId:n,onAuthSuccess:s}=e,o=f().NT[this.base.type].state,a=await l().callApi({eventName:"getGithubUserAuthUrl",environment:t,data:{spaceId:n,isDesktop:t.device.isElectron,sessionId:o.sessionId}});"success"===a.type&&(t.device.isElectron?(0,m().P)(a.data.url):(y().P(t,{width:800,height:600,url:a.data.url,titleMessage:this.messages.oauthPopupTitleMessage}),null==s||s()))}isConnected(e){return h().zD.isConnectedToGithubUniversalQnA(this.store.state)}needsAuth(){return(0,C().F1)(this.store.state)}isAvailable(e){return this.isConnected(e)}connect(e){if(!e)return;const{environment:t,connectorsFeatureAvailability:n}=e;this.needsAuth()?(0,I().openAuthNeededModal)({environment:t,connector:this.base.type,from:"multi_search_scope_menu"}):(0,g().pp)({environment:t,connector:this.base.type,analyticsFrom:"multi_search_scope_menu",connectorsFeatureAvailability:n})}getGithubStatus(e){var t;return null!==(t=e.githubOrg)&&void 0!==t&&t.isSyncComplete?"completed":e.isConnected?"in_progress":"not_started"}getTestableStatuses(){const e=(0,A().F)();return{not_started:{...e},authenticated:{...e,status:"authenticated",isConnected:!0,isLoaded:!0,isPersonalAuthComplete:!0},in_progress:{...e,status:"in_progress",isConnected:!0,isLoaded:!0,isPersonalAuthComplete:!0},completed:{...e,status:"completed",isConnected:!0,isLoaded:!0,isPersonalAuthComplete:!0,githubOrg:{id:123,installationId:456,name:"test-org",isSyncComplete:!0}},disconnecting:{...e,status:"completed",isConnected:!0,isLoaded:!0,isPersonalAuthComplete:!0,isDisconnecting:!0},auth_needed:{...e,status:"completed",isConnected:!0,isLoaded:!0,isPersonalAuthComplete:!1,githubOrg:{id:123,installationId:456,name:"test-org",isSyncComplete:!0}}}}},gmail:new class extends _{constructor(...e){super(...e),this.base=new(n(109954).X),this.store=w().XS,this.icon=n(474998).l,this.messages=(0,d().YK)({oauthPopupTitleMessage:{id:"gmailAIConnector.oauthPopup.title",defaultMessage:"Gmail Authentication"},connectorScopedSearchTooltipMessage:{id:"assistantScopedSearchMenu.gmailItem.tooltip",defaultMessage:"Find in your emails"}}),this.alreadyConnectedConfig={analyticsFrom:"gmail_already_connected",primedTextInput:"Search for emails in Gmail",contentType:"emails"}}getCitationAnnotationFromParsedHref(e){if("gmail"!==e.parsedData.type)throw new Error(`Expected gmail parsed data, got ${e.parsedData.type}`);const{href:t,parsedData:n}=e;return(0,c().X$)({type:this.base.type,href:t,url:n.url,messageId:n.url})}getCitationAnnotationFromSearchResult(e){if("gmail"!==e.result.type)throw new Error(`Expected gmail result, got ${e.result.type}`);return(0,c().X$)({type:this.base.type,href:e.result.href,url:e.result.url,messageId:e.result.id,resultId:e.result.id,positionWithinSource:e.result.positionWithinSource,traceId:e.result.traceId})}getPayloadDataForHrefCallback(e){const{context:t,parsedData:n}=e;if(t.searchSourceType===this.base.type&&"gmail"===n.type)return{...n,type:"gmail",url:n.url,title:t.title,text:"",lastEdited:t.lastEdited,href:(0,r().V9)(n.href),threadHref:(0,r().V9)(n.href)}}async updateConnectorStatus(e){const{environment:t,spaceId:n}=e,s=await(0,p().u)({environment:t,spaceId:n,connector:"gmail"});if(!s||"failed"===s)return this.store.setState({...this.store.state,status:"not_started",isPersonalAuthComplete:!1,isConnected:!1,isLoaded:!0}),{status:"success"};const o=s.details.connectionDetails;return this.store.setState({...this.store.state,externalSourceName:o.external_source_name,status:"completed"===o.status?"authenticated":"not_started",isConnected:"completed"===o.status,isLoaded:!0,isPersonalAuthComplete:!0}),{status:"success"}}async disconnectConnector(e){const{environment:t,spaceId:n}=e;await l().callApi({eventName:"disconnectAiConnector",environment:t,data:{spaceId:n,connector:this.base.type}});return{type:"success"}}async disconnectConnectorPersonalAuth(e){return Promise.reject(new Error("GmailClientDriver.disconnectConnectorPersonalAuth() is not implemented"))}generateRenderableResults(e){const{result:t,parsedHref:n}=e;if("gmail"===t.type){if("gmail"!==n.type)throw new Error(`Expected gmail result, but got ${n.type}`);return[{type:"gmail",href:t.id,id:t.pageId,title:t.title,text:(0,i().Mw)(t.text),lastEdited:t.lastEdited,emailAddress:t.emailAddress,url:n.url}]}}getDismissedAuthPromptKey(){}isConnected(e){return h().zD.isConnectedToGmailUniversalQnA(this.store.state)}needsAuth(){return!1}isAvailable(e){return this.isConnected(e)}connect(e){if(!e)return;const{environment:t,connectorsFeatureAvailability:n}=e;(0,g().pp)({environment:t,connector:"gmail",analyticsFrom:"multi_search_scope_menu",connectorsFeatureAvailability:n})}setDebuggingStatus(e){const t=this.getTestableStatuses();return!!(0,u().O)(t,e)&&(this.store.setState(t[e]),!0)}getTestableStatuses(){const e=this.store.getInitialState();return{not_started:e,connected:{...e,isConnected:!0,status:"authenticated"}}}},box:new class extends _{constructor(...e){super(...e),this.base=new(n(191198).m),this.store=b().MX,this.icon=n(256385).g,this.messages=(0,d().YK)({oauthPopupTitleMessage:{id:"boxAiConnector.oauthPopup.title",defaultMessage:"Box Authentication"},connectorScopedSearchTooltipMessage:{id:"assistantScopedSearchMenu.boxItem.tooltip",defaultMessage:"Find in your Box files"},userDisconnectedMessage:{id:"boxAiConnector.userAuth.disconnected",defaultMessage:"Box account disconnected."}}),this.alreadyConnectedConfig={analyticsFrom:"box_already_connected",primedTextInput:"Search for files in Box",contentType:"files"}}getCitationAnnotationFromParsedHref(e){if("box"!==e.parsedData.type)throw new Error(`Expected box parsed data, got ${e.parsedData.type}`);return(0,c().X$)({type:this.base.type,href:e.href,url:e.parsedData.url,messageId:e.parsedData.url})}getCitationAnnotationFromSearchResult(e){if("box"!==e.result.type)throw new Error(`Expected box result, got ${e.result.type}`);return(0,c().X$)({type:this.base.type,href:e.result.href,url:e.result.url,messageId:e.result.id,resultId:e.result.id,positionWithinSource:e.result.positionWithinSource,traceId:e.result.traceId})}getPayloadDataForHrefCallback({context:e,parsedData:t}){if(e.searchSourceType===this.base.type&&t.type===this.base.type)return{...t,type:this.base.type,url:t.url,title:e.title,text:"",lastEdited:e.lastEdited,href:(0,r().V9)(t.href)}}async updateConnectorStatus(e){const{environment:t,spaceId:n}=e,s=await(0,p().u)({environment:t,spaceId:n,connector:"box"});if(!s||"failed"===s)return this.store.setState({...this.store.state,isConnected:!1,isLoaded:!0}),{status:"success"};const o=s.details.connectionDetails;return this.store.setState({...this.store.state,isConnected:"completed"===(null==o?void 0:o.status)||"disconnecting"===(null==o?void 0:o.status),isLoaded:!0,ingestionProgress:(null==o?void 0:o.progress)??0,status:(null==o?void 0:o.status)??"not_started",externalSourceName:null==o?void 0:o.external_source_name}),{status:"success"}}async disconnectConnector(e){const{environment:t,spaceId:n}=e;return await l().callApi({eventName:"disconnectAiConnector",environment:t,data:{spaceId:n,connector:this.base.type}}),{type:"success"}}async disconnectConnectorPersonalAuth(){}setDebuggingStatus(e){const t=this.getTestableStatuses();return!!(0,u().O)(t,e)&&(this.store.setState(t[e]),!0)}generateRenderableResults(e){}getDismissedAuthPromptKey(){}isConnected(e){return h().zD.isConnectedToBoxAiConnector(this.store.state)}needsAuth(){return!1}isAvailable(e){return this.isConnected(e)}connect(e){if(!e)return;const{environment:t,connectorsFeatureAvailability:n}=e;(0,g().pp)({environment:t,connector:"box",analyticsFrom:"multi_search_scope_menu",connectorsFeatureAvailability:n})}getTestableStatuses(){const e=(0,b().vh)();return{not_started:{...e,isLoaded:!0},in_progress:{...e,status:"in_progress",isLoaded:!0},disconnecting:{...e,status:"disconnecting",isLoaded:!0},connected:{...e,status:"completed",isConnected:!0,isLoaded:!0}}}},"google-calendar":new class extends _{constructor(...e){super(...e),this.base=new(n(462294).O),this.store=D().Wz,this.icon=n(683589).c,this.messages=(0,d().YK)({oauthPopupTitleMessage:{id:"googleCalendarAIConnector.oauthPopup.title",defaultMessage:"Google Calendar Authentication"},connectorScopedSearchTooltipMessage:{id:"assistantScopedSearchMenu.googleCalendarItem.tooltip",defaultMessage:"Find in your Google Calendar events"},userDisconnectedMessage:{id:"googleCalendarAIConnector.userAuth.disconnected",defaultMessage:"Google Calendar account disconnected."}}),this.alreadyConnectedConfig={analyticsFrom:"google-calendar_already_connected",primedTextInput:"Search your Google Calendar events",contentType:"events"}}getCitationAnnotationFromParsedHref(e){if("google-calendar"!==e.parsedData.type)throw new Error(`Expected google-calendar parsed data, got ${e.parsedData.type}`);return(0,c().X$)({type:this.base.type,href:e.href,url:e.parsedData.url,messageId:e.parsedData.url})}getCitationAnnotationFromSearchResult(e){if("google-calendar"!==e.result.type)throw new Error(`Expected google-calendar result, got ${e.result.type}`);return(0,c().X$)({type:this.base.type,href:e.result.href,url:e.result.url,messageId:e.result.id})}getPayloadDataForHrefCallback(e){const{context:t,parsedData:n}=e;if(t.searchSourceType===this.base.type&&n.type===this.base.type)return{...n,type:this.base.type,url:n.url,title:t.title,text:"",lastEdited:t.lastEdited,href:(0,r().V9)(n.href)}}async updateConnectorStatus(e){const{environment:t,spaceId:n}=e,s=await(0,p().u)({environment:t,spaceId:n,connector:"google-calendar"});if(!s||"failed"===s)return this.store.setState({...this.store.state,status:"not_started",isPersonalAuthComplete:!1,isConnected:!1,isLoaded:!0,externalSourceName:void 0}),{status:"success"};const o=s.details.connectionDetails;return this.store.setState({...this.store.state,status:"completed"===o.status?"authenticated":"not_started",isConnected:"completed"===o.status,isLoaded:!0,isPersonalAuthComplete:!0,externalSourceName:o.external_source_name}),{status:"success"}}async disconnectConnector(e){const{environment:t,spaceId:n}=e;return await l().callApi({eventName:"disconnectAiConnector",environment:t,data:{spaceId:n,connector:this.base.type}}),{type:"success"}}async disconnectConnectorPersonalAuth(){}setDebuggingStatus(e){const t=this.getTestableStatuses();return!!(0,u().O)(t,e)&&(this.store.setState(t[e]),!0)}generateRenderableResults(e){const{result:t,parsedHref:n}=e;if("google-calendar"!==t.type||"google-calendar"!==n.type)throw new Error(`Expected google-calendar result, but got ${t.type}`);return[{type:"google-calendar",href:t.id,id:t.pageId,title:t.title,text:(0,i().Mw)(t.text),lastEdited:t.lastEdited,emailAddress:t.emailAddress,url:n.url}]}getDismissedAuthPromptKey(){}isConnected(e){return h().zD.isConnectedToGoogleCalendarUniversalQnA(this.store.state)}needsAuth(){return!1}isAvailable(e){return this.isConnected(e)}connect(e){if(!e)return;const{environment:t,connectorsFeatureAvailability:n}=e;(0,g().pp)({environment:t,connector:"google-calendar",analyticsFrom:"multi_search_scope_menu",connectorsFeatureAvailability:n})}getTestableStatuses(){const e=(0,D().Rr)();return{not_started:{...e,isLoaded:!0},connected:{...e,status:"authenticated",isConnected:!0,isPersonalAuthComplete:!0,isLoaded:!0}}}},"google-drive":new class extends _{constructor(...e){super(...e),this.base=new(n(872182).s),this.store=x().d,this.icon=n(627437).s,this.messages=(0,d().YK)({oauthPopupTitleMessage:{id:"googleDriveAIConnector.oauthPopup.title",defaultMessage:"Google Drive Authentication"},connectorScopedSearchTooltipMessage:{id:"assistantScopedSearchMenu.googleDriveItem.tooltip",defaultMessage:"Find in your Google Drive files"}}),this.alreadyConnectedConfig={analyticsFrom:"google_drive_already_connected",primedTextInput:"Search for files in Google Drive",contentType:"files"}}getCitationAnnotationFromParsedHref(e){if("google-drive"!==e.parsedData.type)throw new Error(`Expected google-drive parsed data, got ${e.parsedData.type}`);return(0,c().X$)({type:this.base.type,href:e.href,url:e.parsedData.url,messageId:e.parsedData.url})}getCitationAnnotationFromSearchResult(e){if("google-drive"!==e.result.type)throw new Error(`Expected google-drive result, got ${e.result.type}`);return(0,c().X$)({type:this.base.type,href:e.result.href,url:e.result.url,messageId:e.result.id,resultId:e.result.id,positionWithinSource:e.result.positionWithinSource,traceId:e.result.traceId})}getPayloadDataForHrefCallback(e){const{context:t,parsedData:n}=e;if(t.searchSourceType===this.base.type&&n.type===this.base.type)return{...n,type:this.base.type,url:n.url,title:t.title,text:"",lastEdited:t.lastEdited,href:(0,r().V9)(n.href)}}async updateConnectorStatus(e){const{environment:t,spaceId:n}=e,s=await(0,p().u)({environment:t,spaceId:n,connector:this.base.type});if("failed"===s)return{status:"failed"};if(s){const e=s.details.connectionDetails,t=(e=>{switch(e){case"completed":return"completed";case"disconnecting":return"disconnecting";case"in_progress":return"initial_file_sync_in_progress";case"pending_selection":return"pending_selection";default:return"not_started"}})((null==e?void 0:e.status)||"in_progress");return x().d.setState({...x().d.state,initialSyncState:(0,v().HB)(t),isDisconnecting:"disconnecting"===(null==e?void 0:e.status),isEditing:!1,syncProgress:t,ingestionProgress:(null==e?void 0:e.progress)>=100||"completed"===(null==e?void 0:e.status)?void 0:(null==e?void 0:e.progress)??0,isLoaded:!0,externalSourceName:null==e?void 0:e.external_source_name}),{status:"success"}}return x().d.setState({...x().d.state,initialSyncState:"none",isDisconnecting:!1,isEditing:!1,syncProgress:"not_started",ingestionProgress:void 0,isLoaded:!0,externalSourceName:void 0}),{status:"success"}}async disconnectConnector(e){const{environment:t,spaceId:n,disconnectReason:s}=e;return"success"===(await l().callApi({eventName:"disconnectGoogleDriveAIIngestion",environment:t,data:{spaceId:n,disconnectReason:s}})).type?{type:"success"}:{type:"failed"}}async disconnectConnectorPersonalAuth(){}setDebuggingStatus(e){const t=this.getTestableStatuses();return!!(0,u().O)(t,e)&&(this.store.setState(t[e]),!0)}generateRenderableResults(e){const{result:t,parsedHref:n}=e;if("google-drive"!==t.type||"google-drive"!==n.type)throw new Error(`Expected google-drive result, but got result.type=${t.type} parsed.type=${n.type}`);return[{type:"google-drive",href:t.id,id:t.pageId,title:t.title,text:(0,i().Mw)(t.text),lastEdited:t.lastEdited,url:n.url,fileType:t.fileType}]}getDismissedAuthPromptKey(){}isConnected(e){return h().zD.isConnectedToGoogleDriveUniversalQnA(P().Rh.state)}needsAuth(){return!1}isAvailable(e){return this.isConnected(e)}connect(e){if(!e)return;const{environment:t,connectorsFeatureAvailability:n}=e;(0,g().pp)({environment:t,connector:this.base.type,analyticsFrom:"multi_search_scope_menu",connectorsFeatureAvailability:n})}getTestableStatuses(){const e=this.store.getInitialState();return{not_started:{...e},connected:{...e,currentScreen:"none",initialSyncState:"completed",isLoaded:!0},disconnecting:{...e,currentScreen:"none",initialSyncState:"completed",isLoaded:!0,isDisconnecting:!0}}}},jira:new class extends _{constructor(...e){super(...e),this.base=new(n(602264).h),this.store=F().EF,this.legacyStore=T().yg,this.icon=n(856988).N,this.messages=(0,d().YK)({oauthPopupTitleMessage:{id:"jiraAIConnector.oauthPopup.title",defaultMessage:"Jira Authentication"},connectorScopedSearchTooltipMessage:{id:"assistantScopedSearchMenu.jiraItem.tooltip",defaultMessage:"Find in Jira issues you have access to"},userDisconnectedMessage:{id:"jiraAIConnector.userAuth.disconnected",defaultMessage:"Jira user account disconnected."}}),this.alreadyConnectedConfig={analyticsFrom:"jira_already_connected",primedTextInput:"Search for issues in Jira",contentType:"issues"}}getCitationAnnotationFromParsedHref(e){const{parsedData:t,href:n}=e;if("jira"!==t.type)throw new Error(`Expected jira parsed data, got ${t.type}`);return(0,c().X$)({type:this.base.type,href:n,url:t.url,messageId:t.url})}getCitationAnnotationFromSearchResult(e){const{result:t}=e;if("jira"!==t.type)throw new Error(`Expected jira result, got ${t.type}`);return(0,c().X$)({type:this.base.type,href:t.href,url:t.url,messageId:t.id,resultId:t.id,positionWithinSource:t.positionWithinSource,traceId:t.traceId})}getPayloadDataForHrefCallback(e){const{context:t,parsedData:n}=e;if(t.searchSourceType===this.base.type&&n.type===this.base.type)return{...n,type:this.base.type,url:n.url,title:t.title,text:"",lastEdited:t.lastEdited,href:(0,r().V9)(n.href)}}async updateConnectorStatus(e){const{environment:t,spaceId:n}=e,s=this.legacyStore,o=this.store;if(h().zD.isJiraOldAiConnectorEnabled()&&!s.state.isLoaded&&s.setState({...s.state,isLoaded:!0,jiraSyncState:"not_started",jiraSyncProgress:0}),!h().zD.isJiraForgeEnabled())return{status:"success"};const a=await(0,p().u)({environment:t,spaceId:n,connector:"jira"});if("failed"===a)return{status:"failed"};if(!a)return o.setState({...o.state,jiraSyncState:"not_started",jiraSyncProgress:0,jiraSiteUrl:"",isDisconnecting:!1,isLoaded:!0}),{status:"success"};const r=a.details.connectionDetails;return o.setState({...o.state,jiraSyncState:(null==r?void 0:r.status)??"not_started",jiraSyncProgress:(null==r?void 0:r.progress)??0,jiraSiteUrl:(null==r?void 0:r.external_source_name)??"",isDisconnecting:"disconnecting"===(null==r?void 0:r.status),isLoaded:!0}),{status:"success"}}async disconnectConnector(e){const{environment:t,spaceId:n}=e;if(h().zD.isJiraOldAiConnectorEnabled()){const e=await l().callApi({eventName:"disconnectJiraConnector",environment:t,data:{spaceId:n,jiraSiteId:this.legacyStore.state.jiraSiteId}});return"success"===e.type&&this.legacyStore.setState({...this.legacyStore.state,isDisconnecting:!0}),e}return l().callApi({eventName:"disconnectAiConnector",environment:t,data:{spaceId:n,connector:this.base.type}})}async disconnectConnectorPersonalAuth(e){const{environment:t,spaceId:n}=e;if(!h().zD.isJiraOldAiConnectorEnabled())return;const s=await l().callApi({eventName:"disconnectJiraUserConnection",environment:t,data:{spaceId:n}});"success"===s.type&&!0===s.data.disconnected&&(this.legacyStore.setState({...this.legacyStore.state,userConnected:!1,missingUserAuth:!0}),this.messages.userDisconnectedMessage&&a().D6({label:o().A.getIntl().formatMessage(this.messages.userDisconnectedMessage),position:"bottom"}))}setDebuggingStatus(e){const t=this.getTestableStatuses();if((0,u().O)(t,e)){const{legacy:n,v2:s}=t[e];return this.legacyStore.setState(n),this.store.setState(s),!0}return!1}generateRenderableResults(e){const{result:t,parsedHref:n}=e;if("jira"===t.type){if("jira"!==n.type)throw new Error(`Expected jira result, but got ${n.type}`);return[{type:"jira",href:t.id,id:t.pageId,title:t.title,text:(0,i().Mw)(t.text),lastEdited:t.lastEdited,url:n.url,highlight:t.highlight}]}}getDismissedAuthPromptKey(){}isConnected(e){return h().zD.isConnectedToJiraUniversalQnA(this.legacyStore.state,this.store.state)}needsAuth(){return h().zD.isJiraOldAiConnectorEnabled()&&!0===this.legacyStore.state.missingUserAuth}isAvailable(e){return this.isConnected(e)&&!this.needsAuth()}connect(e){if(!e)return;const{environment:t,connectorsFeatureAvailability:n}=e;(0,g().pp)({environment:t,connector:"jira",analyticsFrom:"multi_search_scope_menu",connectorsFeatureAvailability:n})}getTestableStatuses(){const e=(0,T().LF)(),t=(0,F().Xh)();return{not_started:{legacy:{...e,isLoaded:!0},v2:{...t,isLoaded:!0}},in_progress:{legacy:{...e,jiraSyncState:"in_progress",jiraSyncProgress:50,isLoaded:!0},v2:{...t,jiraSyncState:"in_progress",jiraSyncProgress:50,isLoaded:!0}},disconnecting:{legacy:{...e,jiraSyncState:"completed",isDisconnecting:!0,isLoaded:!0},v2:{...t,jiraSyncState:"disconnecting",jiraSyncProgress:100,isDisconnecting:!0,isLoaded:!0}},connected:{legacy:{...e,jiraSyncState:"completed",isLoaded:!0},v2:{...t,jiraSyncState:"completed",jiraSyncProgress:100,isLoaded:!0}},jira_connection_pending:{legacy:{...e,jiraSyncState:"pending_connection",jiraSyncProgress:0,isLoaded:!0},v2:{...t,jiraSyncState:"pending_installation",jiraSyncProgress:0,isLoaded:!0}}}}},linear:new class extends _{constructor(...e){super(...e),this.base=new(n(973298)._),this.store=n(265015).W,this.icon=n(658861).u,this.messages=(0,d().YK)({oauthPopupTitleMessage:{id:"linearAIConnector.oauthPopup.title",defaultMessage:"Linear Authentication"},connectorScopedSearchTooltipMessage:{id:"assistantScopedSearchMenu.linearItem.tooltip",defaultMessage:"Find in Linear issues you have access to"},userDisconnectedMessage:{id:"linearAIConnector.userAuth.disconnected",defaultMessage:"Linear user account disconnected."}}),this.alreadyConnectedConfig={analyticsFrom:"linear_already_connected",primedTextInput:"Search for issues in Linear",contentType:"issues"}}getCitationAnnotationFromParsedHref(e){if("linear"!==e.parsedData.type)throw new Error(`Expected linear parsed data, got ${e.parsedData.type}`);return(0,c().X$)({type:this.base.type,href:e.href,url:e.parsedData.url,messageId:e.parsedData.url})}getCitationAnnotationFromSearchResult(e){if("linear"!==e.result.type)throw new Error(`Expected linear result, got ${e.result.type}`);return(0,c().X$)({type:this.base.type,href:e.result.href,url:e.result.url,messageId:e.result.url,resultId:e.result.id,positionWithinSource:e.result.positionWithinSource,traceId:e.result.traceId})}getPayloadDataForHrefCallback(e){const{context:t,parsedData:n}=e;if(t.searchSourceType===this.base.type&&n.type===this.base.type)return{...n,type:this.base.type,url:n.url,title:t.title,text:"",lastEdited:t.lastEdited,href:(0,r().V9)(n.href)}}async updateConnectorStatus(e){const{environment:t,spaceId:n}=e,s=await(0,p().u)({environment:t,spaceId:n,connector:"linear"});if(!s||"failed"===s)return this.store.setState({...this.store.state,isConnected:!1,isLoaded:!0}),{status:"success"};const o=null==s?void 0:s.details.connectionDetails,a=null==s?void 0:s.details.userConnectionDetails;return this.store.setState({...this.store.state,isConnected:"completed"===(null==o?void 0:o.status)||"disconnecting"===(null==o?void 0:o.status),isLoaded:!0,ingestionProgress:null==o?void 0:o.progress,status:null==o?void 0:o.status,userAuthStatus:(null==a?void 0:a.userAuthStatus)??"not_required",externalUsername:null==a?void 0:a.externalUsername,externalSourceName:o.external_source_name}),{status:"success"}}async disconnectConnector(e){const{environment:t,spaceId:n}=e;return l().callApi({eventName:"disconnectAiConnector",environment:t,data:{spaceId:n,connector:this.base.type}})}async disconnectConnectorPersonalAuth(e){const{environment:t,spaceId:n}=e;(0,s().u)({environment:t,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"user_auth_disconnect",integration_type:this.base.type,setup_session_id:this.store.state.sessionId,from:this.store.state.analyticsFrom}}}),await l().callApi({eventName:"disconnectAiConnector",environment:t,data:{spaceId:n,connector:this.base.type,disconnectionType:"user"}}),this.store.setState({...this.store.state,userAuthStatus:"pending",externalUsername:void 0}),this.messages.userDisconnectedMessage&&a().D6({label:o().A.getIntl().formatMessage(this.messages.userDisconnectedMessage),position:"bottom"})}setDebuggingStatus(e){const t=this.getTestableStatuses();return!!(0,u().O)(t,e)&&(this.store.setState(t[e]),!0)}generateRenderableResults(e){const{result:t,parsedHref:n}=e;if("linear"!==t.type||"linear"!==n.type)throw new Error(`Expected linear result, but got ${t.type}`);return[{type:"linear",href:t.id,id:t.pageId,title:t.title,text:(0,i().Mw)(t.text),lastEdited:t.lastEdited,url:n.url,highlight:t.highlight}]}getDismissedAuthPromptKey(){return"dismissed_linear_personal_auth_prompt"}isConnected(e){return h().zD.isConnectedToLinearUniversalQnA(this.store.state)}needsAuth(){return(0,C().eA)("linear")}isAvailable(e){return this.isConnected(e)&&!this.needsAuth()}connect(e){if(!e)return;const{environment:t,connectorsFeatureAvailability:n}=e;this.needsAuth()?(0,I().openAuthNeededModal)({environment:t,connector:"linear",from:"multi_search_scope_menu"}):(0,g().pp)({environment:t,connector:"linear",analyticsFrom:"multi_search_scope_menu",connectorsFeatureAvailability:n})}getTestableStatuses(){const e=this.store.getInitialState();return{not_started:{...e},in_progress:{...e,status:"in_progress",ingestionProgress:50},disconnecting:{...e,isConnected:!0,status:"disconnecting",isDisconnecting:!0},connected:{...e,isConnected:!0,status:"completed",ingestionProgress:100}}}},"microsoft-teams":new class extends _{constructor(...e){super(...e),this.base=new(n(335600).R),this.store=E().F0,this.icon=n(685230).F,this.messages=(0,d().YK)({oauthPopupTitleMessage:{id:"microsoftTeamsAIConnector.oauthPopupTitle",defaultMessage:"Connect Microsoft Teams AI Connector"},connectorScopedSearchTooltipMessage:{id:"assistantScopedSearchMenu.microsoftTeamsItem.tooltip",defaultMessage:"Find in Microsoft Teams chats you have access to"}}),this.alreadyConnectedConfig={analyticsFrom:"microsoft_teams_already_connected",primedTextInput:"Search for messages in Microsoft Teams",contentType:"messages"}}getCitationAnnotationFromParsedHref(e){const{parsedData:t,href:n}=e;if(t.type!==this.base.type)throw new Error(`Expected ${this.base.type} parsed data, got ${t.type}`);return(0,c().X$)({type:this.base.type,href:n,url:t.url,messageId:t.messageId,channelId:t.channelId,threadTs:t.threadTs,messageType:t.messageType,threadHref:t.href})}getCitationAnnotationFromSearchResult(e){const{result:t}=e;if(t.type!==this.base.type)throw new Error(`Expected ${this.base.type} result, got ${t.type}`);return(0,c().X$)({type:this.base.type,href:t.href,url:t.url,messageId:t.messageId,channelId:t.channelId,threadTs:t.threadTs,threadHref:t.href,messageType:t.messageType,resultId:t.id,positionWithinSource:t.positionWithinSource,traceId:t.traceId})}getPayloadDataForHrefCallback(e){const{context:t,parsedData:n}=e;if(t.searchSourceType===this.base.type&&n.type===this.base.type)return{type:this.base.type,href:(0,r().V9)(n.href),title:t.title,text:"",lastEdited:t.lastEdited,url:n.url,channelId:n.channelId,messageId:n.messageId,threadTs:n.threadTs,messageType:n.messageType,threadHref:n.href}}async updateConnectorStatus(e){const{environment:t,spaceId:n}=e,s=await(0,p().u)({environment:t,spaceId:n,connector:this.base.type});if(!s||"failed"===s)return this.store.setState({...this.store.state,connectionStatus:"not_started",syncProgressPercentage:0,isLoaded:!0,isDisconnecting:!1,error:void 0,externalSourceName:void 0}),{status:"success"};const o=s.details.connectionDetails;return this.store.setState({...this.store.state,connectionStatus:(null==o?void 0:o.status)??"not_started",syncProgressPercentage:(null==o?void 0:o.progress)??0,isLoaded:!0,isDisconnecting:"disconnecting"===(null==o?void 0:o.status),error:void 0,externalSourceName:null==o?void 0:o.external_source_name}),{status:"success"}}async disconnectConnector(e){const{environment:t,spaceId:n}=e;return l().callApi({eventName:"disconnectAiConnector",environment:t,data:{spaceId:n,connector:this.base.type}})}async disconnectConnectorPersonalAuth(){}setDebuggingStatus(e){const t=this.getTestableStatuses();return!!Object.prototype.hasOwnProperty.call(t,e)&&(this.store.setState(t[e]),!0)}generateRenderableResults(e){var t,n;const{result:s,parsedHref:o}=e;if(s.type!==this.base.type||o.type!==this.base.type)throw new Error(`Expected ${this.base.type} result, but got result.type=${s.type} parsed.type=${o.type}`);if(!s.messages||0===s.messages.length)return;const a=(null===(t=s.messages)||void 0===t||null===(t=t.find((e=>e.messageId===s.id)))||void 0===t?void 0:t.user)??"",r=(0,i().Mw)((null===(n=s.highlight)||void 0===n?void 0:n.text)??s.text),c=s.messages.map((e=>e.messageId)),d=s.messages.filter((e=>e.messageId!==o.messageId)).map((e=>({type:this.base.type,href:e.messageId,id:e.messageId,user:e.user,title:s.title,text:(0,i().Mw)(e.text),lastEdited:e.lastEdited,url:o.url,channelId:o.channelId,messageId:e.messageId,threadTs:o.threadTs,messageType:o.messageType,highlight:{...s.highlight,text:(0,i().Mw)(e.text)}})));return[{type:this.base.type,href:s.id,id:s.pageId,title:s.title,text:(0,i().Mw)(s.text),user:a,lastEdited:s.lastEdited,url:o.url,channelId:o.channelId,messageId:o.messageId,threadHref:o.href,threadMessages:c,threadTs:o.threadTs,messageType:o.messageType,highlight:{...s.highlight,text:(0,i().Mw)(r)}},...d]}getDismissedAuthPromptKey(){}isConnected(e){return h().zD.isConnectedToMicrosoftTeamsUniversalQnA(this.store.state)}needsAuth(){return!1}isAvailable(e){return this.isConnected(e)}connect(e){if(!e)return;const{environment:t,connectorsFeatureAvailability:n}=e;(0,g().pp)({environment:t,connector:this.base.type,analyticsFrom:"multi_search_scope_menu",connectorsFeatureAvailability:n})}getTestableStatuses(){const e=(0,E().Gq)();return{not_started:{...e},in_progress:{...e,connectionStatus:"in_progress",syncProgressPercentage:50},disconnecting:{...e,connectionStatus:"completed",isDisconnecting:!0},connected:{...e,connectionStatus:"completed"}}}},"notion-calendar":new class extends _{constructor(...e){super(...e),this.base=new(n(958062).M),this.store=k().gv,this.icon=n(971851).Q,this.messages=(0,d().YK)({oauthPopupTitleMessage:{id:"notionCalendarAIConnector.oauthPopup.title",defaultMessage:"Notion Calendar Authentication"},connectorScopedSearchTooltipMessage:{id:"assistantScopedSearchMenu.notionCalendarItem.tooltipDriver",defaultMessage:"Find in your calendar events"}}),this.alreadyConnectedConfig={analyticsFrom:"notion-calendar_already_connected",primedTextInput:"Search for events in Notion Calendar",contentType:"calendar events"}}getCitationAnnotationFromParsedHref(e){if("notion-calendar"!==e.parsedData.type)throw new Error(`Expected notion-calendar parsed data, got ${e.parsedData.type}`);return(0,c().X$)({type:this.base.type,href:e.href,url:e.parsedData.url,messageId:e.parsedData.url})}getCitationAnnotationFromSearchResult(e){if("notion-calendar"!==e.result.type)throw new Error(`Expected notion-calendar result, got ${e.result.type}`);return(0,c().X$)({type:this.base.type,href:e.result.href,url:e.result.url,messageId:e.result.id})}getPayloadDataForHrefCallback(e){const{context:t,parsedData:n}=e;if(t.searchSourceType===this.base.type&&n.type===this.base.type)return{...n,type:this.base.type,url:n.url,title:t.title,text:"",lastEdited:t.lastEdited,href:(0,r().V9)(n.href)}}async updateConnectorStatus(e){const{environment:t,spaceId:s}=e,o=(0,n(996477).fM)(t);if(!o)return{status:"failed"};const a=(0,n(267652).X)(o)??!1,r=await l().callApi({eventName:"getIsCalendarUser",environment:t,data:{}}),i="success"===r.type&&r.data.isCalendarUser,c=await(0,p().u)({environment:t,spaceId:s,connector:this.base.type});if(!c||"failed"===c)return this.store.setState({...this.store.state,status:"not_started",isPersonalAuthComplete:!1,isConnected:!1,isBackendConnected:i,isNotionCalendarProhibited:a,externalSourceName:void 0,isLoaded:!0}),{status:"success"};const d=c.details.connectionDetails;return this.store.setState({...this.store.state,status:"completed"===d.status?"authenticated":"not_started",isConnected:"completed"===d.status,isLoaded:!0,isPersonalAuthComplete:"completed"===d.status,isBackendConnected:i,isNotionCalendarProhibited:a,externalSourceName:d.external_source_name}),{status:"success"}}async disconnectConnector(e){const{environment:t,spaceId:n}=e,s=await l().callApi({eventName:"disconnectAiConnector",environment:t,data:{spaceId:n,connector:this.base.type}});return this.store.setState({...this.store.state,isDisconnecting:!0}),s}async disconnectConnectorPersonalAuth(){}setDebuggingStatus(e){const t=this.getTestableStatuses();return!!(0,u().O)(t,e)&&(this.store.setState(t[e]),!0)}generateRenderableResults(e){const{result:t,parsedHref:n}=e;if("notion-calendar"!==t.type||"notion-calendar"!==n.type)throw new Error(`Expected notion-calendar result, but got result.type=${t.type} parsed.type=${n.type}`);return[{type:"notion-calendar",href:t.id,id:t.pageId,title:t.title,text:(0,i().Mw)(t.text),lastEdited:t.lastEdited,emailAddress:t.emailAddress,url:n.url}]}getDismissedAuthPromptKey(){}isConnected(e){return h().zD.isConnectedToNotionCalendarUniversalQnA(this.store.state)&&!h().zD.isConnectedToGoogleCalendarUniversalQnA(D().Wz.state)}needsAuth(){return!1}isAvailable(e){return this.isConnected(e)}connect(e){if(!e)return;const{environment:t,connectorsFeatureAvailability:n}=e;(0,g().pp)({environment:t,connector:this.base.type,analyticsFrom:"multi_search_scope_menu",connectorsFeatureAvailability:n})}getTestableStatuses(){const e=(0,k().VK)();return{not_started:{...e},connected:{...e,status:"authenticated",isConnected:!0,isLoaded:!0,isPersonalAuthComplete:!0},disconnecting:{...e,status:"authenticated",isConnected:!0,isLoaded:!0,isPersonalAuthComplete:!0,isDisconnecting:!0}}}},"notion-mail":new class extends _{constructor(...e){super(...e),this.base=new(n(902824).V),this.store=M().Lf,this.icon=n(384154).D,this.messages=(0,d().YK)({oauthPopupTitleMessage:{id:"notionMailAIConnector.oauthPopup.title",defaultMessage:"Notion Mail Authentication"},connectorScopedSearchTooltipMessage:{id:"assistantScopedSearchMenu.notionMailItem.tooltipDriver",defaultMessage:"Find in your emails"}}),this.alreadyConnectedConfig={analyticsFrom:"notion-mail_already_connected",primedTextInput:"Search for emails in Notion Mail",contentType:"emails"}}getCitationAnnotationFromParsedHref(e){if("notion-mail"!==e.parsedData.type)throw new Error(`Expected notion-mail parsed data, got ${e.parsedData.type}`);return(0,c().X$)({type:this.base.type,href:e.href,url:e.parsedData.url,messageId:e.parsedData.url})}getCitationAnnotationFromSearchResult(e){if("notion-mail"!==e.result.type)throw new Error(`Expected notion-mail result, got ${e.result.type}`);return(0,c().X$)({type:this.base.type,href:e.result.href,url:e.result.url,messageId:e.result.id})}getPayloadDataForHrefCallback(e){const{context:t,parsedData:n}=e;if(t.searchSourceType===this.base.type&&n.type===this.base.type)return{...n,type:this.base.type,url:n.url,title:t.title,text:"",lastEdited:t.lastEdited,href:(0,r().V9)(n.href)}}async updateConnectorStatus(e){const{environment:t,spaceId:s}=e,o=await(0,n(694926)._)({environment:t}),a=await l().callApi({eventName:"getIsMailUser",environment:t,data:{}}),r="success"===a.type&&a.data.isMailUser,i=await(0,p().u)({environment:t,spaceId:s,connector:this.base.type});if(!i||"failed"===i)return this.store.setState({...this.store.state,status:"not_started",isPersonalAuthComplete:!1,isConnected:!1,isBackendConnected:r,isNotionMailProhibited:o,externalSourceName:void 0,isLoaded:!0}),{status:"success"};const c=i.details.connectionDetails;return this.store.setState({...this.store.state,status:"completed"===c.status?"authenticated":"not_started",isConnected:"completed"===c.status,isLoaded:!0,isPersonalAuthComplete:!0,isBackendConnected:r,isNotionMailProhibited:o,externalSourceName:c.external_source_name}),{status:"success"}}async disconnectConnector(e){const{environment:t,spaceId:n}=e,s=await l().callApi({eventName:"disconnectAiConnector",environment:t,data:{spaceId:n,connector:this.base.type}});return this.store.setState({...this.store.state,isDisconnecting:!0}),s}async disconnectConnectorPersonalAuth(){}setDebuggingStatus(e){const t=this.getTestableStatuses();return!!(0,u().O)(t,e)&&(this.store.setState(t[e]),!0)}generateRenderableResults(e){const{result:t,parsedHref:n}=e;if("notion-mail"!==t.type||"notion-mail"!==n.type)throw new Error(`Expected notion-mail result, but got result.type=${t.type} parsed.type=${n.type}`);return[{type:"notion-mail",href:t.id,id:t.pageId,title:t.title,text:(0,i().Mw)(t.text),lastEdited:t.lastEdited,emailAddress:t.emailAddress,url:n.url}]}getDismissedAuthPromptKey(){}isConnected(e){return h().zD.isConnectedToNotionMailUniversalQnA(this.store.state)&&!h().zD.isConnectedToGmailUniversalQnA(w().XS.state)}needsAuth(){return!1}isAvailable(e){return this.isConnected(e)}connect(e){if(!e)return;const{environment:t,connectorsFeatureAvailability:n}=e;(0,g().pp)({environment:t,connector:this.base.type,analyticsFrom:"multi_search_scope_menu",connectorsFeatureAvailability:n})}getTestableStatuses(){const e=(0,M().K_)();return{not_started:{...e},connected:{...e,status:"authenticated",isConnected:!0,isLoaded:!0,isPersonalAuthComplete:!0},disconnecting:{...e,status:"authenticated",isConnected:!0,isLoaded:!0,isPersonalAuthComplete:!0,isDisconnecting:!0}}}},salesforce:new class extends _{constructor(...e){super(...e),this.base=new(n(816926).Y),this.store=L().Ci,this.icon=n(251839).M,this.messages=(0,d().YK)({oauthPopupTitleMessage:{id:"salesforceAIConnector.oauthPopup.title",defaultMessage:"Salesforce Authentication"},connectorScopedSearchTooltipMessage:{id:"assistantScopedSearchMenu.salesforceItem.tooltip",defaultMessage:"Find in your Salesforce objects"},userDisconnectedMessage:{id:"salesforceAIConnector.userAuth.disconnected",defaultMessage:"Salesforce user account disconnected."}}),this.alreadyConnectedConfig={analyticsFrom:"salesforce_already_connected",primedTextInput:"Find a Salesforce object about: ",contentType:"objects"}}getCitationAnnotationFromParsedHref(e){if("salesforce"!==e.parsedData.type)throw new Error(`Expected salesforce parsed data, got ${e.parsedData.type}`);return(0,c().X$)({type:this.base.type,href:e.href,url:e.parsedData.url,messageId:e.parsedData.url})}getCitationAnnotationFromSearchResult(e){if("salesforce"!==e.result.type)throw new Error(`Expected salesforce result, got ${e.result.type}`);return(0,c().X$)({type:this.base.type,href:e.result.href,url:e.result.url,messageId:e.result.url,resultId:e.result.id,positionWithinSource:e.result.positionWithinSource,traceId:e.result.traceId})}getPayloadDataForHrefCallback(e){const{context:t,parsedData:n}=e;if(t.searchSourceType===this.base.type&&n.type===this.base.type)return{...n,type:this.base.type,url:n.url,title:t.title,text:"",lastEdited:t.lastEdited,href:(0,r().V9)(n.href)}}async updateConnectorStatus(e){const{environment:t,spaceId:n}=e,s=await(0,p().u)({environment:t,spaceId:n,connector:this.base.type});if(!s||"failed"===s)return this.store.setState({...this.store.state,isConnected:!1,isLoaded:!0}),{status:"success"};const o=s.details.connectionDetails,a=s.details.userConnectionDetails;return this.store.setState({...this.store.state,isConnected:"completed"===(null==o?void 0:o.status)||"disconnecting"===(null==o?void 0:o.status),isLoaded:!0,ingestionProgress:(null==o?void 0:o.progress)??0,status:(null==o?void 0:o.status)??"not_started",externalSourceName:null==o?void 0:o.external_source_name,userAuthStatus:(null==a?void 0:a.userAuthStatus)??"not_required"}),{status:"success"}}async disconnectConnector(e){const{environment:t,spaceId:n}=e,s=await l().callApi({eventName:"disconnectAiConnector",environment:t,data:{spaceId:n,connector:this.base.type}});return this.store.setState({...this.store.state,isDisconnecting:!0}),s}async disconnectConnectorPersonalAuth(e){const{environment:t,spaceId:n}=e;(0,s().u)({environment:t,event:{eventName:"universal_qna_button_click",eventProperties:{button_name:"user_auth_disconnect",integration_type:this.base.type,setup_session_id:this.store.state.sessionId,from:this.store.state.analyticsFrom}}});"success"===(await l().callApi({eventName:"disconnectAiConnector",environment:t,data:{spaceId:n,connector:this.base.type,disconnectionType:"user"}})).type&&(this.store.setState({...this.store.state,userAuthStatus:"pending"}),this.messages.userDisconnectedMessage&&a().D6({label:o().A.getIntl().formatMessage(this.messages.userDisconnectedMessage),position:"bottom"}))}setDebuggingStatus(e){const t=this.getTestableStatuses();return!!(0,u().O)(t,e)&&(this.store.setState(t[e]),!0)}generateRenderableResults(e){}getDismissedAuthPromptKey(){}isConnected(e){return h().zD.isConnectedIsSalesforceAiConnector(this.store.state)}needsAuth(){return!1}isAvailable(e){return this.isConnected(e)}connect(e){if(!e)return;const{environment:t,connectorsFeatureAvailability:n}=e;(0,g().pp)({environment:t,connector:this.base.type,analyticsFrom:"multi_search_scope_menu",connectorsFeatureAvailability:n})}getTestableStatuses(){const e=(0,L().f9)();return{not_started:{...e},in_progress:{...e,status:"in_progress",ingestionProgress:50,connectionDetails:{status:"in_progress",progress:50,externalSourceName:"Notion Labs"}},disconnecting:{...e,isConnected:!0,status:"disconnecting",isDisconnecting:!0,connectionDetails:{status:"disconnecting",progress:100,externalSourceName:"Notion Labs"}},connected:{...e,isConnected:!0,status:"completed",connectionDetails:{status:"completed",progress:100,externalSourceName:"Notion Labs"}}}}},sharepoint:new class extends _{constructor(...e){super(...e),this.base=new(n(716470).u),this.store=j().EF,this.icon=n(188079).s,this.messages=(0,d().YK)({oauthPopupTitleMessage:{id:"sharepointAIConnector.oauthPopupTitle",defaultMessage:"Connect SharePoint AI Connector"},connectorScopedSearchTooltipMessage:{id:"assistantScopedSearchMenu.sharepointItem.tooltip",defaultMessage:"Find in SharePoint sites you have access to"}}),this.alreadyConnectedConfig={analyticsFrom:"sharepoint_already_connected",primedTextInput:"Search for documents in SharePoint",contentType:"content"}}getCitationAnnotationFromParsedHref(e){if("sharepoint"!==e.parsedData.type)throw new Error(`Expected sharepoint parsed data, got ${e.parsedData.type}`);return(0,c().X$)({type:this.base.type,href:e.href,url:e.parsedData.url,messageId:e.parsedData.url})}getCitationAnnotationFromSearchResult(e){if("sharepoint"!==e.result.type)throw new Error(`Expected sharepoint result, got ${e.result.type}`);return(0,c().X$)({type:this.base.type,href:e.result.href,url:e.result.url,messageId:e.result.url,resultId:e.result.id,positionWithinSource:e.result.positionWithinSource,traceId:e.result.traceId})}getPayloadDataForHrefCallback(e){const{context:t,parsedData:n}=e;if(t.searchSourceType===this.base.type&&n.type===this.base.type)return{...n,type:this.base.type,url:n.url,title:t.title,text:"",lastEdited:t.lastEdited,href:(0,r().V9)(n.href)}}async updateConnectorStatus(e){const{environment:t,spaceId:n}=e,s=await(0,p().u)({environment:t,spaceId:n,connector:this.base.type});if(!s||"failed"===s)return this.store.setState({...this.store.state,isConnected:!1,isLoaded:!0,connectionDetails:void 0}),{status:"success"};const o=s.details.connectionDetails;return this.store.setState({...this.store.state,isConnected:!0,isLoaded:!0,connectionDetails:{status:null==o?void 0:o.status,progress:null==o?void 0:o.progress,externalSourceName:null==o?void 0:o.external_source_name}}),{status:"success"}}async disconnectConnector(e){const{environment:t,spaceId:n}=e,s=await l().callApi({eventName:"disconnectAiConnector",environment:t,data:{spaceId:n,connector:this.base.type}});return this.store.setState({...this.store.state,isDisconnecting:!0}),s}async disconnectConnectorPersonalAuth(){}setDebuggingStatus(e){const t=this.getTestableStatuses();return!!(0,u().O)(t,e)&&(this.store.setState(t[e]),!0)}generateRenderableResults(e){const{result:t,parsedHref:n}=e;if("sharepoint"!==t.type||"sharepoint"!==n.type)throw new Error(`Expected sharepoint result, but got result.type=${t.type} parsed.type=${n.type}`);return[{type:"sharepoint",href:t.id,id:t.pageId,title:t.title,text:(0,i().Mw)(t.text),lastEdited:t.lastEdited,url:n.url,highlight:t.highlight}]}getDismissedAuthPromptKey(){}isConnected(e){return h().zD.isConnectedIsSharepointAiConnector(this.store.state)}needsAuth(){return!1}isAvailable(e){return this.isConnected(e)}connect(e){if(!e)return;const{environment:t,connectorsFeatureAvailability:n}=e;(0,g().pp)({environment:t,connector:this.base.type,analyticsFrom:"multi_search_scope_menu",connectorsFeatureAvailability:n})}getTestableStatuses(){const e=(0,j().FS)();return{not_started:{...e},in_progress:{...e,connectionDetails:{status:"in_progress",progress:50,externalSourceName:"Notion Labs"}},disconnecting:{...e,isConnected:!0,isDisconnecting:!0,connectionDetails:{status:"disconnecting",progress:100,externalSourceName:"Notion Labs"}},connected:{...e,isConnected:!0,connectionDetails:{status:"completed",progress:100,externalSourceName:"Notion Labs"}},sharepoint_select_sites:{...e,connectionDetails:{status:"pending_selection",progress:0,externalSourceName:"Notion Labs"}}}}},outlook:new class extends _{constructor(...e){super(...e),this.base=new(n(966270).S),this.store=N().yF,this.icon=n(350527).g,this.messages=(0,d().YK)({oauthPopupTitleMessage:{id:"outlookAIConnector.oauthPopup.title",defaultMessage:"Outlook Authentication"},connectorScopedSearchTooltipMessage:{id:"assistantScopedSearchMenu.outlookItem.tooltip",defaultMessage:"Find in your emails"}}),this.alreadyConnectedConfig={analyticsFrom:"outlook_already_connected",primedTextInput:"Search for emails in Outlook",contentType:"emails"}}getCitationAnnotationFromParsedHref(e){if("outlook"!==e.parsedData.type)throw new Error(`Expected outlook parsed data, got ${e.parsedData.type}`);return(0,c().X$)({type:this.base.type,href:e.href,url:e.parsedData.url,messageId:e.parsedData.url})}getCitationAnnotationFromSearchResult(e){if("outlook"!==e.result.type)throw new Error(`Expected outlook result, got ${e.result.type}`);return(0,c().X$)({type:this.base.type,href:e.result.href,url:e.result.url,messageId:e.result.id})}getPayloadDataForHrefCallback(e){const{context:t,parsedData:n}=e;if(t.searchSourceType===this.base.type&&n.type===this.base.type)return{...n,type:this.base.type,url:n.url,title:t.title,text:"",lastEdited:t.lastEdited,href:(0,r().V9)(n.href)}}async updateConnectorStatus(e){const{environment:t,spaceId:n}=e,s=await(0,p().u)({environment:t,spaceId:n,connector:this.base.type});if(!s||"failed"===s)return this.store.setState({...this.store.state,status:"not_started",isPersonalAuthComplete:!1,isConnected:!1,externalSourceName:void 0,isLoaded:!0}),{status:"success"};const o=s.details.connectionDetails;return this.store.setState({...this.store.state,status:"completed"===o.status?"authenticated":"not_started",isConnected:"completed"===o.status,isLoaded:!0,isPersonalAuthComplete:!0,externalSourceName:o.external_source_name}),{status:"success"}}async disconnectConnector(e){const{environment:t,spaceId:n}=e,s=await l().callApi({eventName:"disconnectAiConnector",environment:t,data:{spaceId:n,connector:this.base.type}});return this.store.setState({...this.store.state,isDisconnecting:!0}),s}async disconnectConnectorPersonalAuth(){}setDebuggingStatus(e){const t=this.getTestableStatuses();return!!(0,u().O)(t,e)&&(this.store.setState(t[e]),!0)}generateRenderableResults(e){const{result:t,parsedHref:n}=e;if("outlook"!==t.type||"outlook"!==n.type)throw new Error(`Expected outlook result, but got result.type=${t.type} parsed.type=${n.type}`);return[{type:"outlook",href:t.id,id:t.pageId,title:t.title,text:(0,i().Mw)(t.text),lastEdited:t.lastEdited,emailAddress:t.emailAddress,url:n.url}]}getDismissedAuthPromptKey(){}isConnected(e){return h().zD.isConnectedToOutlookUniversalQnA(this.store.state)}needsAuth(){return!1}isAvailable(e){return this.isConnected(e)}connect(e){if(!e)return;const{environment:t,connectorsFeatureAvailability:n}=e;(0,g().pp)({environment:t,connector:this.base.type,analyticsFrom:"multi_search_scope_menu",connectorsFeatureAvailability:n})}getTestableStatuses(){const e=(0,N().tR)();return{not_started:{...e},connected:{...e,status:"authenticated",isConnected:!0,isLoaded:!0,isPersonalAuthComplete:!0},disconnecting:{...e,status:"authenticated",isConnected:!0,isLoaded:!0,isPersonalAuthComplete:!0,isDisconnecting:!0}}}},custom:new class extends _{constructor(...e){super(...e),this.base=new(n(983662).S),this.store=n(864139).qu,this.icon=n(374693)._,this.messages=(0,d().YK)({oauthPopupTitleMessage:{id:"customAIConnector.oauthPopup.title",defaultMessage:"Custom AI connector authentication"},connectorScopedSearchTooltipMessage:{id:"assistantScopedSearchMenu.customItem.tooltip",defaultMessage:"Find in your custom data sources"}}),this.alreadyConnectedConfig={analyticsFrom:"custom_already_connected",primedTextInput:"Search your custom connector data",contentType:"custom data"}}getCitationAnnotationFromParsedHref(e){if("custom"!==e.parsedData.type)throw new Error(`Expected custom parsed data, got ${e.parsedData.type}`);return(0,c().X$)({type:this.base.type,href:e.href,url:e.parsedData.url,messageId:e.parsedData.url})}getCitationAnnotationFromSearchResult(e){if("custom"!==e.result.type)throw new Error(`Expected custom result, got ${e.result.type}`);return(0,c().X$)({type:this.base.type,href:e.result.href,url:e.result.url,messageId:e.result.id})}getPayloadDataForHrefCallback(e){const{context:t,parsedData:n}=e;if(t.searchSourceType===this.base.type&&n.type===this.base.type)return{...n,type:this.base.type,url:n.url,title:t.title,text:"",lastEdited:t.lastEdited,href:(0,r().V9)(n.href)}}async updateConnectorStatus(e){const{environment:t,spaceId:s}=e,o=await(0,p().y)({environment:t,spaceId:s});if("success"!==o.type||!("connectedConnectors"in o.data))return this.store.setState({...this.store.state,isLoaded:!0,hasCustomConnector:!1,customConnectors:[]}),{status:"failed"};const a=o.data.connectedConnectors.flatMap((e=>{if("custom"!==e.id)return[];const t=e.details.connectionDetails;return(0,n(838838).nL)(t)?[{id:e.customConnectorId??e.thirdPartyId,customConnectorId:e.customConnectorId,thirdPartyId:e.thirdPartyId,displayName:t.display_name,iconUrl:t.icon_url,archetype:t.archetype,status:"active"}]:[]}));return this.store.setState({...this.store.state,isLoaded:!0,hasCustomConnector:a.length>0,customConnectors:a}),{status:"success"}}disconnectConnector(e){return Promise.resolve({type:"success"})}disconnectConnectorPersonalAuth(e){return Promise.resolve()}setDebuggingStatus(e){return!1}generateRenderableResults(e){const{result:t,parsedHref:n}=e;if("custom"!==t.type||"custom"!==n.type)throw new Error(`Expected custom result, but got result.type=${t.type} parsed.type=${n.type}`);return[{type:"custom",href:t.id,id:t.pageId,title:t.title,text:(0,i().Mw)(t.text),lastEdited:t.lastEdited,url:n.url,iconUrl:"iconUrl"in t?t.iconUrl:void 0}]}getDismissedAuthPromptKey(){}isConnected(e){return this.store.state.hasCustomConnector}needsAuth(){return!1}isAvailable(e){return this.isConnected(e)}connect(e){if(!e)return;const{environment:t,connectorsFeatureAvailability:n}=e;(0,g().pp)({environment:t,connector:"custom",analyticsFrom:"multi_search_scope_menu",connectorsFeatureAvailability:n})}getSearchScopeDisplayDetails(e){const{searchScope:t}=e;if("custom"!==t.type)return{displayName:this.base.displayName};const n=this.store.state.customConnectors.find((e=>t.customConnectorId?e.customConnectorId===t.customConnectorId:!!t.thirdPartyId&&e.thirdPartyId===t.thirdPartyId));return{displayName:t.displayName??(null==n?void 0:n.displayName)??this.base.displayName,iconUrl:null==n?void 0:n.iconUrl}}toSearchScopeModule(e){if(null==e||!e.customConnector)return super.toSearchScopeModule();const t=e.customConnector;return{type:"custom",moduleKey:`custom:${t.customConnectorId??t.thirdPartyId}`,displayName:t.displayName??"Custom AI Connector",icon:this.icon,isEligible:e=>this.isEligible(e),isLoading:()=>this.isLoading(),isAvailable:e=>this.isAvailable(e),needsAuth:()=>this.needsAuth(),createSearchScope:()=>({type:"custom",customConnectorId:t.customConnectorId,thirdPartyId:t.thirdPartyId,displayName:t.displayName??"Custom AI Connector"}),isEnabled:()=>!1,setEnabled:e=>e,isInProgress:()=>this.isInProgress(),isDisconnecting:()=>this.isDisconnecting(),isConnected:e=>this.isConnected(e),connect:e=>this.connect(e)}}}});function z(e){return R[e]}},724639:(e,t,n)=>{n.d(t,{$A:()=>v,Cu:()=>T,EM:()=>x,H0:()=>w,P0:()=>b,VB:()=>C,f5:()=>D,kI:()=>I,n7:()=>_,n_:()=>A,nc:()=>P,nh:()=>S,vL:()=>F});n(16280),n(944114),n(898992),n(354520),n(430670),n(581454),n(737550),n(814603),n(147566),n(198721);var s=n.n(n(625473)),o=()=>n(973647),a=()=>n(534177),r=()=>n(638681),i=()=>n(206267),c=()=>n(651784),d=()=>n(234459),u=()=>n(743246),l=()=>n(758256),p=()=>n(760342),g=()=>n(966249),h=()=>n(419447),m=()=>n(7331),y=()=>n(711517),f=()=>n(915671);function S(e,t){const n=Object.fromEntries(Object.entries(e).filter((([e,t])=>Boolean(t))));return`${t}${h().qR}?${new URLSearchParams(n).toString()}`}r().union([r().object({optional:{callbackType:r().literals(...c().Bi),moduleSpecific:r().string(),redirectToAuth:r().literal("true"),transcriptId:r().string(),workflowId:r().string()},required:{moduleId:r().string(),spaceId:r().string(),type:r().literal("workflow"),userId:r().string()}}),r().object({optional:{callbackType:r().literals(...c().Bi),moduleSpecific:r().string(),redirectToAuth:r().literal("true")},required:{integrationId:r().string(),spaceId:r().string(),transcriptId:r().string(),type:r().literal("agent"),userId:r().string()}})]);function v(e){const t={...e};delete t.examples,delete t.memories,delete t.annotation,"transcript"in e&&Array.isArray(e.transcript)&&(t.transcript=e.transcript.map((e=>({...e,id:void 0,traceId:void 0}))));const n=(o=t,s()(o,a?{space:"  "}:void 0));var o,a;return(0,i().gB)(n)}function C(e){var t;const n=null===(t=e.state)||void 0===t?void 0:t.type;if(!n||!e.state)return!1;const s=(0,g().Tc)(n);return!s||s.isTriggerConfigured(e.state)}function _(e,t){var n;const s=null===(n=e.state)||void 0===n?void 0:n.type,o=e.state;if(!s||!o)return!0;const a=(0,g().Tc)(s);if(!a||!a.fields)return!0;const r=a.fields[t];return!r||(!r.required(o)||r.isConfigured(o))}function b(e){return"workflow-operation"===(null==e?void 0:e.type)}function I(e){const{spaceId:t,id:n,table:s}=e;return s===u().C0?{spaceId:t,workflowId:n}:s===d().To?{spaceId:t,transcriptId:n}:s===l().U6?{spaceId:t,artifactId:n}:void(0,a().HB)(s)}function A(e){const{config:t,modules:n}=e;if(t)switch(t.type){case"workflow":return t.isCustomAgent&&n?(0,p().Ad)(n):t.searchScopes??f().R2;case"researcher":return t.searchScope?[t.searchScope]:void 0;case"search":return t.scopeForNextSearch?[t.scopeForNextSearch]:void 0;default:return}}function w(e){const{config:t,modules:n}=e;if(!t)return!1;if("workflow"===t.type){if(void 0!==t.useWebSearch)return t.useWebSearch;const e=A({config:t,modules:n});return!!e&&e.some((e=>"web"===e.type||"everything"===e.type))}return("researcher"===t.type||"search"===t.type)&&(t.useWebSearch??!1)}function D(e){return e.some((e=>!(!(0,m().OA)(e)&&!(0,m().LO)(e))||!!("agent-tool-result"===e.type&&"run-agent"===e.toolName&&e.result&&"object"==typeof e.result&&"affectedWorkflowIds"in e.result&&Array.isArray(e.result.affectedWorkflowIds)&&e.result.affectedWorkflowIds.length>0)))}function x(e){const t=e.flatMap((e=>{var t,n;return"context"===e.type&&null!==(t=e.value)&&void 0!==t&&t.workflowId?[e.value.workflowId]:((0,m().OA)(e)||(0,m().LO)(e))&&null!==(n=e.result)&&void 0!==n&&n.workflowId?[e.result.workflowId]:"agent-tool-result"===e.type&&"run-agent"===e.toolName&&e.result&&"object"==typeof e.result&&"affectedWorkflowIds"in e.result&&Array.isArray(e.result.affectedWorkflowIds)?e.result.affectedWorkflowIds:[]}));return t[t.length-1]}class P extends Error{constructor(e,t){super(e),this.reasons=t,this.name="WorkflowValidationError"}}function T(e){const t=[];if(e.instructions){if((0,y().Zv)(e.instructions)){0===(0,y().rr)(e.instructions).length&&t.push({type:"missing_field",fieldName:"instructions"})}}else t.push({type:"missing_field",fieldName:"instructions"});return t.length>0?o().Q.fail(t):o().Q.success(void 0)}function F({workflowId:e,spaceId:t}){return{id:e,table:u().C0,spaceId:t}}},812357:(e,t,n)=>{n.d(t,{tR:()=>o,yF:()=>r});var s=()=>n(206267);function o(){return{currentScreen:"none",status:"not_started",sessionId:s().JW(),analyticsFrom:"unknown",externalSourceName:void 0,isConnected:!1,isPersonalAuthComplete:!1,isDisconnecting:!1,isLoaded:!1}}class a extends(()=>n(757695))().Store{getInitialState(){return o()}}const r=new a;(0,n(852832).exposeDebugValue)("outlookAIConnectorStore",r)},816750:(e,t,n)=>{n.d(t,{Ew:()=>a});n(944114);var s=()=>n(534177),o=()=>n(634201);function a(e){if(!(0,s().O9)(e)||""===e)return e;if(e.startsWith("notion://custom_emoji/"))return e;if(e.startsWith("attachment:"))return e;if(e.startsWith("/icons/"))return e;const t=(0,o().PE)(e);return t.length>0?t[0]:""}},864139:(e,t,n)=>{n.d(t,{qu:()=>o});class s extends(()=>n(757695))().Store{getInitialState(){return{analyticsFrom:"unknown",sessionId:(0,n(206267).JW)(),isLoaded:!1,isDisconnecting:!1,isEditing:!1,currentScreen:"none",hasCustomConnector:!1,customConnectors:[]}}}const o=new s;(0,n(852832).exposeDebugValue)("customAIConnectorStore",o)},919515:(e,t,n)=>{n.d(t,{Ci:()=>r,f9:()=>o});var s=()=>n(206267);function o(){return{currentScreen:"none",selection:{allObjects:!0,includedObjects:[],excludedObjects:[],includeFutureObjects:!0},status:"not_started",sessionId:s().JW(),analyticsFrom:"unknown",authUrl:void 0,isConnected:!1,isPersonalAuthComplete:!1,isDisconnecting:!1,isSyncComplete:!1,isLoaded:!1,connectionDetails:void 0,externalSourceName:void 0,ingestionProgress:0,userAuthStatus:"not_required",forceShowAuthNotificationTriggeredAt:void 0}}class a extends(()=>n(757695))().Store{getInitialState(){return o()}}const r=new a;(0,n(852832).exposeDebugValue)("salesforceAiConnectorStore",r)},937854:(e,t,n)=>{n.d(t,{EF:()=>r,Xh:()=>o});var s=()=>n(206267);function o(){return{currentScreen:"none",analyticsFrom:"unknown",sessionId:s().JW(),jiraSiteUrl:"",jiraSyncState:"not_started",jiraSyncProgress:0,syncControl:{excludedProjects:[],includedProjects:[],includeFutureProjects:!0,allProjects:!1},isDisconnecting:!1,isLoaded:!1}}class a extends(()=>n(757695))().Store{getInitialState(){return o()}isJiraForgeConnectionDone(){return"not_started"!==this.state.jiraSyncState}}const r=new a;(0,n(852832).exposeDebugValue)("jiraAIConnectionV2Store",r)},996477:(e,t,n)=>{n.d(t,{Cb:()=>i,fM:()=>c});n(16280),n(898992),n(672577);var s=()=>n(755531),o=()=>n(534177),a=()=>n(466088),r=()=>n(562031);function i(e){return"assistantChat"===e.type?1===e.operations.length&&"createBlock"===e.operations[0].command&&"text"===e.operations[0].blockNode.tagName&&0===e.operations[0].blockNode.text.length:"assistantChatText"===e.type?0===e.text.length:void(0,o().HB)(e)}function c(e){return(0,a().w)(e)?(0,r().nT)():(0,s().S)()}}}]);