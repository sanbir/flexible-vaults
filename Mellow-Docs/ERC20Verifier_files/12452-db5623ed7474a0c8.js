"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[12452],{56394:(e,t,n)=>{n.d(t,{A:()=>d});n(296540);var o=()=>n(726637),r=()=>n(401497),i=()=>n(718827),s=()=>n(996755),l=()=>n(807449),a=()=>n(324254),c=()=>n(100622),u=n(474848);function d(e){const{icon:t,title:n,on:d,disabled:m,hasDiff:p,wrapStyle:h,innerStyle:f,hideChevron:g}=e,b=(0,r().eP)(),x=(0,r().IS)((()=>{const e=d||m?(0,s().q)({variant:"tint",themeMode:b,colorPalette:"blue",colorVariant:"accentPrimary"}):(0,s().q)({variant:"plain",themeMode:b,colorVariant:"secondary"});return{container:{borderRadius:14,marginInlineEnd:6,display:"inline-flex",...p&&{position:"relative"},...h},filterPill:{fontSize:14,display:"inline-flex",alignItems:"center",justifyContent:"center",gap:6,whiteSpace:"nowrap",borderRadius:32,height:o().A.isMobile?28:24,lineHeight:o().A.isMobile?"28px":"24px",padding:"0 8px",...e.resting,...f},hovered:{...e.hovered},pressed:{...e.pressed},diffDot:{position:"absolute",top:-2,insetInlineEnd:-2,background:c().Tj.orange.icon.accentPrimary,border:`1px solid ${c().Tj.background.primary}`,width:9,height:9,borderRadius:9}}}),[p,h,d,m,f,b]);return(0,u.jsxs)("div",{style:x.container,children:[(0,u.jsxs)(i().Ay,{disabled:m,disabledFeedback:!0,style:x.filterPill,hoveredStyle:x.hovered,pressedStyle:x.pressed,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onClick:e.onClick,onDoubleClick:e.onDoubleClick,children:[t,n,g?void 0:(0,u.jsx)(l().I,{icon:a().arrowChevronSingleDownSmallIcon,size:"xs",fitToViewBox:"horizontal"})]}),p?(0,u.jsx)("div",{style:x.diffDot}):void 0]})}},253673:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>o,personIcon:()=>r});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"3.68 2.37 12.64 15.26",svg:(0,n(474848).jsx)("path",{d:"M10 2.375c-1.137 0-2.054.47-2.674 1.242-.608.757-.9 1.765-.9 2.824s.292 2.066.9 2.824c.62.772 1.537 1.241 2.674 1.241s2.055-.469 2.675-1.241c.608-.758.9-1.766.9-2.824 0-1.059-.292-2.067-.9-2.824-.62-.773-1.538-1.242-2.675-1.242M7.676 6.441c0-.842.233-1.554.624-2.042.38-.473.937-.774 1.7-.774s1.32.301 1.7.774c.391.488.624 1.2.624 2.042s-.233 1.554-.624 2.041c-.38.473-.937.774-1.7.774s-1.32-.3-1.7-.774c-.391-.487-.624-1.2-.624-2.041M10 11.63c-2.7 0-5.101 1.315-6.12 3.305-.361.706-.199 1.421.23 1.923.412.48 1.06.767 1.74.767h8.3c.68 0 1.328-.287 1.74-.767.429-.502.591-1.217.23-1.923-1.02-1.99-3.42-3.305-6.12-3.305m-5.007 3.875c.761-1.488 2.672-2.626 5.007-2.626s4.246 1.138 5.007 2.626c.105.204.07.378-.067.54-.156.182-.448.33-.79.33h-8.3c-.342 0-.634-.148-.79-.33-.138-.162-.172-.336-.067-.54"})},r=(0,n(340498).wt)("person",o,"default")},297401:(e,t,n)=>{n.d(t,{A:()=>s});n(296540);var o=()=>n(69708),r=n(474848);const i=(0,o().YK)({removeItem:{id:"menuItemRemoveButton.ariaLabel",defaultMessage:"Remove item"}});const s=function(e){const t=(0,o().tz)(),s={removeFilterButton:{height:void 0,width:void 0},removeFilterButtonMobile:{marginInlineEnd:-12,marginTop:-12,marginBottom:-12,paddingInlineEnd:12,paddingTop:12,paddingBottom:12}},{onClick:l,disabled:a}=e,c=n(726637).A.isMobile?{...s.removeFilterButton,...s.removeFilterButtonMobile}:s.removeFilterButton;return(0,r.jsx)(n(695115).A,{icon:n(637433).xMarkCircleFillIcon,onClick:l,disabled:a,disableBackground:!0,style:c,ariaLabel:t.formatMessage(i.removeItem)})}},322976:(e,t,n)=>{n.d(t,{C:()=>P,A:()=>D});n(898992),n(354520),n(581454);var o=n(296540),r=()=>n(726637),i=()=>n(401497),s=()=>n(127833),l=()=>n(30537),a=()=>n(807449),c=()=>n(631524),u=()=>n(160432),d=()=>n(81068),m=()=>n(736847),p=()=>n(69708),h=()=>n(100622),f=()=>n(496603),g=()=>n(115512),b=()=>n(976361),x=(n(18107),n(967357),()=>n(590526)),y=()=>n(245720),v=()=>n(546926),C=()=>n(352321),k=()=>n(449279),I=()=>n(663639),M=()=>n(452004),j=()=>n(165358),S=()=>n(229833),A=n(474848);const T={menu:{width:250,maxHeight:"40vh"},inputMenu:{maxHeight:"20vh"}};const w=function({labelText:e,value:t,renderResultMenuItem:r,onConfirm:i,items:s,performRequest:l,onDismiss:a,onChange:c,renderToken:u,onRemove:d,onClear:m,disabled:p}){const h=(0,x().uB)(void 0,M().$),f=(0,x().uB)(void 0,n(442610).A),[g,b]=(0,n(791177).$)(),y=(0,o.useCallback)(((n,o,s)=>(0,A.jsx)(F,{error:n,data:o,ready:s,labelText:e,value:t,renderResultMenuItem:r,onConfirm:i,menuListStore:h,comboboxProps:b})),[e,t,r,i,h,b]),v={query:t,current:s};return(0,A.jsx)(n(890492).A,{...B(a,e,t,s,c,u,d,m,p,g),children:(0,A.jsx)(n(251126).A,{debounce:100,requestStore:f,request:v,performRequest:l,render:y})})};function R({labelText:e,value:t,items:n,disabled:o,onChange:i,renderToken:s,onRemove:l,onClear:a,inputComboboxProps:c}){const u=n.map((e=>s(e,{onRemove:()=>l(e)})));return(0,A.jsx)(m().A,{isInput:!0,children:(0,A.jsx)("div",{style:{padding:"4px 8px"},children:(0,A.jsx)(C().Ay,{focus:!r().A.isMobile||void 0,focusAfterAnimation:!0,format:C().le.FilterValue,tokens:u,placeholder:e.tokenInputPlaceholder,onRemoveLastToken:()=>function(e,t){const n=e.at(-1);n&&t(n)}(n,l),onClearButtonClick:a,value:t,onChange:i,showClearButton:!0,disabled:Boolean(o),style:T.inputMenu,...c})})})}function B(e,t,n,o,i,s,l,a,c,u){if(r().A.isMobile){return{menuType:v().gu.Modal,title:t.title,right:(0,A.jsx)(p().sA,{...y().W.done}),onClickRight:e,header:(0,A.jsx)(R,{labelText:t,value:n,items:o,disabled:c,onChange:i,renderToken:s,onRemove:l,onClear:a,inputComboboxProps:u})}}return{menuType:v().gu.Popup,onClickOutside:e,header:(0,A.jsx)(R,{labelText:t,value:n,items:o,disabled:c,onChange:i,renderToken:s,onRemove:l,onClear:a,inputComboboxProps:u}),...T.menu}}function F({error:e,data:t,ready:n,labelText:r,value:i,renderResultMenuItem:s,onConfirm:l,menuListStore:a,comboboxProps:c}){const u=(0,x().uB)(a,M().$),d=(0,o.useCallback)((e=>(0,A.jsx)(m().A,{...e,title:r.resultSectionTitle,loading:!n})),[r,n]);if(e)return j().log({level:"error",from:r.componentDebugName,type:"requestFailed",error:(0,S().convertErrorToLog)(e),data:{miscDataToConvertToString:{query:i}}}),(0,A.jsx)(d,{children:(0,A.jsx)(k().u,{title:(0,A.jsx)(p().sA,{defaultMessage:"Something went wrong.",id:"search.inputMenu.errorMessage"})})});if(!t)return(0,A.jsx)(d,{children:(0,A.jsx)(k().u,{title:(0,A.jsx)(p().sA,{defaultMessage:"Loading…",id:"search.inputMenu.loading.message"})})});if(t&&0===t.length)return(0,A.jsx)(d,{children:(0,A.jsx)(k().u,{title:(0,A.jsx)(p().sA,{defaultMessage:"No results found",id:"search.inputMenu.noResults.message"})})});const h={key:"results",items:t.map((e=>function(e,t,n){return{key:e,action:()=>n(e),render:n=>t(e,n)}}(e,s,l))),render:d};return(0,A.jsx)(I().A,{type:I().O.Vertical,store:u,initialFocus:0,sections:[h],comboboxProps:c})}let P=function(e){return e.Button="Button",e.Section="Section",e.Pill="Pill",e}({});function D(e){const{items:t,keepInputOnItemConfirm:n,mode:i,onChange:s,onMenuDismiss:l,onMenuOpen:a}=e,c=(0,o.useRef)(),u=(0,o.useRef)(null),[d,m]=(0,o.useState)(!1),[p,h]=(0,o.useState)(""),[g,b]=(0,o.useState)(void 0),[x,y]=(0,o.useState)(void 0);function v(e,t){c.current=requestAnimationFrame((e=>{if(u&&u.current&&(y(u.current.getBoundingClientRect()),t)){const{shouldOpenMenu:e,nextIndexToReplace:n}=t;e&&(m(!0),b(n))}}))}(0,o.useEffect)((()=>(window.addEventListener("resize",v),()=>{window.removeEventListener("resize",v),c.current&&(cancelAnimationFrame(c.current),c.current=void 0)})),[]);const C=t.length;function k(e){M(),m(!1),b(void 0),null==l||l(e)}function I(e){h(e.target.value)}function M(){h("")}function j(){s([])}const S=(0,o.useCallback)((e=>{const n=t.filter((t=>t!==e));s(n)}),[t,s]),T=(0,o.useCallback)((e=>{if("number"==typeof g&&g<t.length){const n=t.slice(0,g).concat(e,t.slice(g+1));s(n)}else if(t.includes(e)&&P.Pill)S(e);else{const n=t.concat(e);s(f().sb(n))}n||M()}),[S,g,t,n,s]);return(0,o.useEffect)((()=>{v()}),[C,i]),r().A.isMobile?(0,A.jsx)(q,{inputTemporaryValue:p,isMenuOpen:d,onClearInput:M,onClearItems:j,onItemConfirm:T,onMenuClose:k,onMenuInputChange:I,onMenuOpen:function(){m(!0)},onRemove:S,searchTokenFilterProps:e}):(0,A.jsx)(z,{hasItemsSelected:i===P.Pill&&e.hasItemsSelected,inputTemporaryValue:p,isMenuOpen:d,onClearInput:M,onClearItems:j,onItemConfirm:T,onMenuClose:k,onMenuInputChange:I,onMenuOpen:function(e){null==a||a(),v(0,{shouldOpenMenu:!0,nextIndexToReplace:e})},onRemove:S,popupOriginRect:x,ref:u,searchTokenFilterProps:e})}function O(){return{buttonMenuItem:{color:h().Tj.text.secondary},appendListItemButton:{color:h().Tj.text.tertiary}}}function L(e){return{menuItem:{minHeight:void 0,paddingTop:r().A.isMobile?12:4,paddingBottom:r().A.isMobile?12:4},menuItemWrapper:{display:"flex"},sectionMenuItem:{display:"flex"},appendListItemButton:{minHeight:void 0,paddingTop:4,paddingBottom:4,fontSize:g().vQ},icon:{marginInlineEnd:"Pill"===e?6:-2},iconSmall:{height:12,width:12},summary:{display:"inline"},summaryItem:{display:"inline"}}}const z=(0,o.forwardRef)((function(e,t){const{hasItemsSelected:r,inputTemporaryValue:i,isMenuOpen:a,onClearInput:c,onClearItems:u,onItemConfirm:d,onMenuClose:m,onMenuInputChange:p,onMenuOpen:h,onRemove:f,popupOriginRect:g,searchTokenFilterProps:b}=e,{addItemLabel:x,disabled:y,focused:v,icon:C,items:k,mode:I,renderFilter:M,title:j}=b,S=y||a,T=(0,o.useMemo)((()=>({open:a,ariaPopupType:"listbox"})),[a]),w=(0,o.useCallback)((()=>{h()}),[h]);return(0,A.jsxs)(n(385226).A,{title:I===P.Section?j:void 0,marginAfter:I===P.Section,style:L(I).sectionMenuItem,children:[I!==P.Pill?(0,A.jsx)(W,{disableFilters:S,items:k,onClick:h,onRemove:f,renderFilter:M}):void 0,(0,A.jsx)(n(945465).k.Provider,{value:T,children:I===P.Section?(0,A.jsx)(K,{addItemLabel:x,disabled:y,isMenuOpen:a,mode:I,onClick:w,ref:t}):I===P.Button?(0,A.jsx)(U,{disabled:y,focused:v,icon:C,isMenuOpen:a,mode:I,onClick:w,ref:t,title:j}):I===P.Pill?(0,A.jsx)(E,{disabled:y,hasItemsSelected:r,icon:C,onClick:w,ref:t,title:j}):void(0,n(534177).HB)(I)}),(0,A.jsx)(s().zD,{alignmentToOrigin:"start",keepFocus:!0,onDismiss:m,open:a,originRect:g,placementToOrigin:"bottom",popupType:l().n.Popup,preventScaleTransition:!0,render:()=>(0,A.jsx)(N,{searchTokenFilterProps:b,inputTemporaryValue:i,onMenuInputChange:p,onClearInput:c,onClearItems:u,onItemConfirm:d,onMenuClose:m,onRemove:f}),trapFocus:!0})]})}));function W(e){const{disableFilters:t,items:n,onClick:r,onRemove:i,renderFilter:s}=e,l=(0,o.useMemo)((()=>n.map(((e,n)=>(0,A.jsx)("li",{children:s(e,{disabled:t,onClick:()=>r(n),onRemove:()=>i(e)})},`${e}_${n}`)))),[t,n,r,i,s]);return(0,A.jsx)("ul",{style:g().$t,children:l})}const K=(0,o.forwardRef)((function(e,t){const{addItemLabel:o,disabled:r,isMenuOpen:s,mode:l,onClick:c}=e,u=L(l),m=(0,i().IS)(O,[O]);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{ref:t,style:u.menuItemWrapper}),(0,A.jsx)(d().A,{disabled:r||s,focused:!1,icon:(0,A.jsx)(a().I,{icon:n(621837).plusFillSmallIcon,size:"xxs"}),onClick:c,style:{...u.appendListItemButton,...m.appendListItemButton},title:o})]})})),U=(0,o.forwardRef)((function(e,t){const{disabled:n,focused:o,icon:r,isMenuOpen:s,mode:l,onClick:c,title:u}=e,m=L(l),p=(0,i().IS)(O,[O]),h={...m.menuItem,...p.buttonMenuItem};return(0,A.jsx)("div",{ref:t,style:m.menuItemWrapper,children:(0,A.jsx)(d().A,{disabled:n||s,focused:o,icon:(0,A.jsx)(a().I,{icon:r,size:"default",style:m.icon}),onClick:c,style:h,title:u})})})),E=(0,o.forwardRef)((function(e,t){const{disabled:o,hasItemsSelected:r,icon:i,onClick:s,title:l}=e,c=L(P.Pill);return(0,A.jsx)("div",{ref:t,style:c.menuItemWrapper,children:(0,A.jsx)(n(56394).A,{on:r,icon:(0,A.jsx)(a().I,{icon:i,fitToViewBox:"horizontal"}),title:(0,A.jsx)("span",{children:l}),onClick:s,disabled:o})})}));function V(e){const{disableFilters:t,items:n,mode:o,onClickClear:r,onMenuOpen:i,renderItemForSummary:s,title:l}=e,a=L(o),c={...g().$t,...a.summary},u=n.length-1,d=(0,A.jsx)("ul",{style:c,children:n.map(((e,t)=>(0,A.jsxs)("li",{style:a.summaryItem,children:[s(e),t!==u?",":void 0," "]},e)))});return(0,A.jsx)(b().A,{disabled:t,label:l,onClick:i,onClickClear:r,title:d})}function q(e){const{inputTemporaryValue:t,isMenuOpen:n,onClearInput:o,onClearItems:r,onItemConfirm:i,onMenuClose:c,onMenuInputChange:u,onMenuOpen:m,onRemove:p,searchTokenFilterProps:h}=e,{mode:f,disabled:g,title:b,items:x,renderItemForSummary:y,icon:v}=h,C=L(f),k=g||n,I=f===P.Section?(0,A.jsx)(V,{disableFilters:k,items:x,mode:f,onClickClear:r,onMenuOpen:m,renderItemForSummary:y,title:b}):(0,A.jsx)(d().A,{disabled:k,focused:!1,icon:(0,A.jsx)(a().I,{icon:v,style:C.icon}),onClick:m,title:b});return(0,A.jsx)(s().zD,{keepFocus:!0,onDismiss:c,open:n,origin:I,popupType:l().n.SlideUp,render:()=>(0,A.jsx)(N,{inputTemporaryValue:t,onClearInput:o,onClearItems:r,onItemConfirm:i,onMenuClose:c,onMenuInputChange:u,onRemove:p,searchTokenFilterProps:h})})}function N(e){const{inputTemporaryValue:t,onClearInput:n,onClearItems:o,onItemConfirm:r,onMenuClose:i,onMenuInputChange:s,onRemove:l,searchTokenFilterProps:a}=e,{renderToken:d,renderFooter:h,allowApplyBatchSelection:f}=a;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(w,{...a,onChange:s,onClear:()=>{n(),o()},onConfirm:r,onDismiss:i,onRemove:l,renderToken:d,value:t}),h?(0,A.jsxs)(m().A,{style:{padding:6,justifyContent:"space-between",display:"flex",flexDirection:"row"},topBorder:!0,children:[(0,A.jsx)(c().p,{onClick:o,children:(0,A.jsx)(p().sA,{id:"searchTokenFilter.clearButton",defaultMessage:"Clear"})}),f?(0,A.jsx)(u().A,{colorPalette:"blue",onClick:()=>{i("applyButton")},children:(0,A.jsx)(p().sA,{defaultMessage:"Apply",id:"searchTokenFilter.applyButton"})}):void 0]}):void 0]})}},359941:(e,t,n)=>{n.d(t,{V:()=>s});var o=()=>n(230711),r=()=>n(590526),i=()=>n(981342);function s(e){const{spaceStore:t}=e,n=(0,o().nB)(t);return(0,r().K8)((()=>(0,i().MU)({spaceStore:t,actorRole:n})),[t,n])}},385226:(e,t,n)=>{n.d(t,{A:()=>r});n(296540);var o=n(474848);const r=function(e){const t={desktopTitleStyle:{marginBottom:4},marginAfter:{marginBottom:16}},{title:r,marginAfter:i,desktopStyle:s,desktopTitleStyle:l,...a}=e,c=(i||s)&&{...i&&t.marginAfter,...s},u=l?{...t.desktopTitleStyle,...l}:t.desktopTitleStyle;return(0,o.jsx)(n(736847).A,{disableDesktopPadding:!0,enableActionSheetTitle:!0,desktopStyle:c,desktopTitleStyle:u,shouldShowBottomDivider:!1,title:r,...a})}},457688:(e,t,n)=>{n.d(t,{A:()=>y,S:()=>b});var o=n(296540),r=()=>n(726637),i=()=>n(484714),s=()=>n(590526),l=()=>n(493552),a=()=>n(424400),c=()=>n(764880),u=()=>n(69708),d=()=>n(453697),m=n(474848);const p="bodyRegular",h="bodySemibold",f="bodySmRegular",g=o.forwardRef(((e,t)=>{const{actor:o,defaultUserTitle:i="name_only",useEmailAsTooltip:l,tooltip:u,tooltipPlacement:p,hoveredStyle:h,disabledFeedback:f,customUserTitleStyles:g,iconSizeOverride:y}=e,v=(0,s().K8)((()=>o.asActor&&o.isUser()?o.email:void 0),[o]),C=l&&v?v:u,k=y||(r().A.isMobile?a().nd:a().pg),I="name_and_email"===i||"name_and_email_unless_right"===i&&!Boolean(e.right)?(0,m.jsx)(x,{actor:null==o?void 0:o.asActor,customStyles:g}):(0,m.jsx)(b,{customStyles:g,actor:null==o?void 0:o.asActor});let M;return(0,c().H3)(o)?M=(0,m.jsx)(n(256863).A,{botValue:null==o?void 0:o.asActor,size:k}):(0,c().ps)(o)?M=(0,m.jsx)(d().A,{userValue:null==o?void 0:o.asActor,size:k}):(0,c().h2)(o)?M=(0,m.jsx)(d().A,{userValue:void 0,size:k}):(0,n(534177).HB)(o),(0,m.jsx)(n(26697).m,{placement:p??"bottom",alignment:"start",textWrap:!0,render:o=>(0,m.jsx)(n(81068).A,{...(0,n(383036).A)(o,e),icon:M,title:I,disabledFeedback:f,className:"notranslate",ref:t,hoveredStyle:h}),disableTooltip:!C,renderTooltip:()=>C})}));function b(e){const{actor:t,customStyles:n}=e,o=(0,i().v3)(),a=(0,u().tz)(),c=t&&t.id===o.currentUser.id,d=(0,s().K8)((()=>t&&t.getDisplayName(a)),[t,a]),h=r().A.isMobile?f:p;return c?(0,m.jsx)(u().sA,{id:"UserMenuItem.fullName.authorLabel",defaultMessage:"<author>{fullName}</author> <you>(You)</you>",values:{author:e=>(0,m.jsx)(l().D,{as:"span",styleKey:h,style:n,children:e}),fullName:d,you:e=>(0,m.jsx)(l().D,{as:"span",colorVariant:"secondary",styleKey:h,style:n,children:e})}}):d?(0,m.jsx)(l().D,{textOverflow:"ellipsis",styleKey:h,style:n,children:d}):(0,m.jsx)(l().D,{styleKey:h,style:n,children:(0,m.jsx)(u().sA,{id:"UserMenuItem.fullName.unknownAuthorLabel",defaultMessage:"Unknown author"})})}function x(e){const{actor:t,customStyles:n}=e,o=(0,u().tz)(),i=(0,s().K8)((()=>t&&t.getDisplayName(o)),[t,o]),{email:a,showEmail:c}=(0,s().K8)((()=>{const e=t&&t.asActor&&t.isUser()?t.email:void 0;return{email:e,showEmail:i!==e}}),[t,i]),d=r().A.isMobile?"bodySmRegular":h,g=r().A.isMobile?f:p;return i?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(l().D,{textOverflow:"ellipsis",as:"span",styleKey:d,style:n,children:i}),c?(0,m.jsx)(l().D,{textOverflow:"ellipsis",as:"span",styleKey:g,style:n,children:` ${a}`}):void 0]}):(0,m.jsx)(l().D,{styleKey:h,style:n,children:(0,m.jsx)(u().sA,{id:"UserMenuItem.fullName.unknownAuthorLabel",defaultMessage:"Unknown author"})})}g.displayName="UserMenuItem";const y=g},563253:(e,t,n)=>{n.d(t,{Vd:()=>M,np:()=>g,z_:()=>I});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520);var o=n(296540),r=()=>n(813974),i=()=>n(588165),s=()=>n(484714),l=()=>n(590526),a=()=>n(401497),c=()=>n(31511),u=()=>n(69708),d=()=>n(100622),m=()=>n(496603),p=n(474848);const h=["control+t","control+shift+n","control+shift+t","control+w","control+shift+w","control+r","control+shift+r","control+shift+i","control+\\","control+=","control+-","control+0","control+[","control+]","control+shift+tab","control+tab","control+1","control+2","control+3","control+4","control+5","control+6","control+7","control+8","control+9"],f=["command+,","command+t","command+shift+n","command+shift+t","command+w","command+shift+w","command+r","command+shift+r","alt+command+i","command+\\","command+=","command+-","command+0","command+[","command+]","control+shift+tab","control+tab","command+option+left","command+option+right","command+shift+[","command+shift+]","command+1","command+2","command+3","command+4","command+5","command+6","command+7","command+8","command+9"];function g(e){function t(){return e.shortcut?I(e.shortcut,e.isMac):void 0}const{isMac:n,isWindows:g}=(0,s().Y0)(),j=(0,l().K8)((()=>r().getKeyboardShortcuts()),[]),[S,A]=(0,o.useState)(t),[T,w]=(0,o.useState)(new Set([])),[R,B]=(0,o.useState)(),[F,P]=(0,o.useState)(!1),D=(0,o.useRef)(!1),O=(0,o.useRef)(!1),L=(0,o.useRef)(!1),z=(0,a().IS)((()=>({container:{display:"flex",flexDirection:"column",gap:10,alignItems:"flex-end"},takenShortcutError:{color:d().Tj.palette.red[500],fontSize:12}})),[]);function W(){if(S&&L.current)if(S.key)if(n?S.control||S.option||S.command:S.control||S.option)if(function(e,t,n){for(const r of Object.values((0,i().a)(e)))for(const e of r)if(m().n4(I(e,n),t))return!0;const o=n?f:h;for(const r of o)if(m().n4(I(r,n),t))return!0;return!1}(j,S,n)||function(e,t,n){for(const o of t)if(m().n4(I(o,n),e))return!0;return!1}(S,e.conflictingShortcuts||[],n)){A(t());const e=M(S,n);B((0,p.jsx)(u().sA,{id:"desktopQuickSearch.error.shortcutAlreadyUsed",defaultMessage:"{reservedShortcut} is already used",values:{reservedShortcut:e}}))}else{const t=function(e,t){const n=[];e.shift&&n.push("shift");e.control&&(t?n.push("control"):n.push("ctrl"));e.option&&(t?n.push("option"):n.push("alt"));e.command&&(t?n.push("command"):n.push("meta"));e.enter&&n.push("enter");e.key&&n.push(e.key.toLowerCase());return n.join("+")}(S,n);e.onChange(t)}else A(t()),B(n?(0,p.jsx)(u().sA,{id:"desktopQuickSearch.error.macModifierRequired",defaultMessage:"Use one of Option, Control, or Command for global keyboard shortcuts"}):(0,p.jsx)(u().sA,{id:"desktopQuickSearch.error.windowsModifierRequired",defaultMessage:"Use one of Control or Alt for global keyboard shortcuts"}));else A(void 0);else L.current||A(t());D.current=!0,P(!1),L.current=!1}function K(e){if(g&&e.startsWith("Meta"))return;const t=new Set([...T,e]),n=function(e){const t={};for(const o of e)o.startsWith(x)?t.command=!0:o.startsWith(v)?t.option=!0:o.startsWith(y)?t.shift=!0:o.startsWith(C)?t.control=!0:o.startsWith(k)?t.enter=!0:o.startsWith("Key")?t.key=o.substring(3).toLowerCase():o.startsWith("Digit")?t.key=o.substring(5):b[o]&&(t.key=b[o]);const n=0===Object.values(t).filter((e=>!m().b0(e))).length;return n?void 0:t}(t);w(t),A(n),B(void 0),L.current=!0}return(0,p.jsxs)("div",{style:z.container,children:[(0,p.jsx)(c().A,{onKeyDown:function(e){O.current=!0,"Escape"===e.key?e.currentTarget.blur():"Tab"!==e.key&&(e.preventDefault(),e.stopPropagation(),K(e.code))},onKeyUp:function(e){O.current&&function(e){const t=new Set([...T]);if(t.delete(e),e.startsWith("Meta"))for(const n of t)n.startsWith(y)||n.startsWith(v)||n.startsWith(C)||t.delete(n);w(t),0===t.size&&W()}(e.code)},onFocus:function(e){A(void 0),P(!0)},onBlur:function(e){D.current||W(),D.current=!1,O.current=!1,w(new Set),P(!1)},focus:F,readOnly:!0,inputStyle:{textAlign:"center",caretColor:"transparent"},value:S&&M(S,n)}),R?(0,p.jsx)("div",{style:z.takenShortcutError,children:R}):void 0]})}const b={ArrowDown:"down",ArrowLeft:"left",ArrowRight:"right",ArrowUp:"up",Backquote:"`",Backslash:"\\",Backspace:"backspace",BracketLeft:"[",BracketRight:"]",Comma:",",Delete:"delete",Enter:"return",Equal:"=",Minus:"-",Period:".",Quote:"'",Semicolon:";",Slash:"/",Space:"space"},x="Meta",y="Shift",v="Alt",C="Control",k="Return";function I(e,t){const n={};for(let o of e.split("+"))o=o.toLowerCase(),"command"===o||"meta"===o?n.command=!0:"option"===o||"alt"===o?n.option=!0:"shift"===o?n.shift=!0:"control"===o||"ctrl"===o?n.control=!0:"cmdorctrl"===o||"commandorcontrol"===o?t?n.command=!0:n.control=!0:"enter"===o||"return"===o?n.enter=!0:n.key=o;return n}function M(e,t){const n=[];if(e.shift&&(t?n.push("shift"):n.push("Shift")),e.control&&(t?n.push("control"):n.push("Ctrl")),e.option&&(t?n.push("option"):n.push("Alt")),e.command&&(t?n.push("⌘"):n.push("Win")),e.enter&&(t?n.push("enter"):n.push("Return")),e.key){const t=1===e.key.length?e.key.toUpperCase():e.key;n.push(t)}return n.join("+")}},971736:(e,t,n)=>{n.d(t,{A:()=>g});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(581454),n(296540);var o=()=>n(726637),r=()=>n(590526),i=()=>n(849255),s=()=>n(764880),l=()=>n(798880),a=()=>n(695608),c=()=>n(69708),u=()=>n(448693),d=()=>n(848401),m=()=>n(297401),p=()=>n(457688),h=()=>n(106628),f=n(474848);const g=function({mode:e,title:t,userIds:o,onChange:r,disabled:i,focused:s,onMenuDismiss:l,onMenuOpen:a,parentStore:u}){const d=(0,n(484714).v3)(),m=(0,c().tz)();return(0,f.jsx)(n(322976).A,{mode:e,title:t,icon:n(253673).personIcon,items:o,onChange:r,disabled:i,focused:s,renderFilter:(e,t)=>(0,f.jsx)(C,{item:e,args:t,parentStore:u}),renderToken:(e,t)=>(0,f.jsx)(y,{item:e,handlers:t,userIds:o,parentStore:u}),renderItemForSummary:e=>(0,f.jsx)(x,{item:e,parentStore:u}),addItemLabel:(0,f.jsx)(c().sA,{defaultMessage:"Add a person",id:"search.filterMenu.addAPersonButton.label"}),labelText:{title:t,tokenInputPlaceholder:m.formatMessage({defaultMessage:"Search people",id:"search.filterMenu.searchPeople.placeholder"}),componentDebugName:"SearchPersonFilter"},performRequest:e=>async function({query:e,current:t},n){const o=new Set(t),r=await h().T.searchActions.load(),i=await r.searchSpaceUsers({environment:n,query:e,membersOnly:!1,limit:20+o.size});return i.filter((e=>!o.has(e.id))).slice(0,20).map((e=>e.id))}(e,d),renderResultMenuItem:(e,t)=>(0,f.jsx)(v,{item:e,props:t,parentStore:u}),onMenuDismiss:l,onMenuOpen:a,hasItemsSelected:(null==o?void 0:o.length)>0})};function b(e,t){const n=function(e,t){return i().L.createChildStore(t,{table:l().oo,id:e})}(e,t);return n.getValue()}function x({item:e,parentStore:t}){const n=(0,c().tz)(),o=(0,r().K8)((()=>b(e,t)),[e,t]);return(0,f.jsx)(f.Fragment,{children:(0,a().c6)(n,o)})}function y({item:e,handlers:t,userIds:n,parentStore:i}){const l=1===n.length,a=(0,r().K8)((()=>b(e,i)),[e,i]);return a?(0,f.jsx)(u().Ay,{format:o().A.isMobile?d().mI.Large:d().mI.Small,showRemoveButton:!0,isSingle:l,onClickRemove:t.onRemove,actor:(0,s().MR)(a),shouldShrink:!0,style:{background:"transparent"},hasPersonHoverCard:!1},e):null}function v({item:e,props:t,parentStore:n}){const o=(0,r().K8)((()=>b(e,n)),[e,n]);return(0,f.jsx)(p().A,{...t,actor:(0,s().MR)(o)})}function C({item:e,args:t,parentStore:n}){const{disabled:i,onRemove:l,onClick:a}=t,c={menuItem:{minHeight:void 0,paddingTop:o().A.isMobile?12:4,paddingBottom:o().A.isMobile?12:4},menuItemTitle:{width:"100%"},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginInlineEnd:12}},u=(0,r().K8)((()=>b(e,n)),[e,n]),d=(0,f.jsx)(m().A,{disabled:i,onClick:l});return(0,f.jsx)(p().A,{disabled:i,focused:!1,actor:(0,s().MR)(u),right:d,style:c.menuItem,desktopTitleStyle:c.menuItemTitle,onClick:a},e)}},976361:(e,t,n)=>{n.d(t,{A:()=>c});n(296540);var o=()=>n(726637),r=()=>n(287188),i=()=>n(100622),s=()=>n(284371),l=()=>n(297401),a=n(474848);const c=function(e){const{disabled:t,label:o,title:r,onClick:s,isToggle:l,isToggleActive:c,onClickClear:m,...p}=e,h={menuItemLabel:{color:i().Tj.text.tertiary}},f=u(),g=(0,a.jsx)("span",{style:h.menuItemLabel,children:o});return(0,a.jsx)(n(81068).A,{focused:!1,...p,inline:l,disabled:t,icon:g,title:r,right:(0,a.jsx)(d,{disabled:Boolean(t),isToggle:Boolean(l),isToggleActive:Boolean(c),onClick:s,onClickClear:m}),onClick:s,dontShrinkIcon:!0,dontShrinkRight:!0,shouldWrapTitle:!0,style:f.menuItem,desktopIconStyle:f.menuItemLabel})};function u(){return{menuItem:{background:void 0,minHeight:void 0,fontSize:o().A.isMobile?s().J.UISmall.mobile:s().J.UIRegular.desktop,paddingTop:o().A.isMobile?12:4,paddingBottom:o().A.isMobile?12:4},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginTop:0},rightWrapper:{display:"flex",alignItems:"center",marginTop:"-50%",marginBottom:"-50%",height:44}}}function d({disabled:e,isToggle:t,isToggleActive:n,onClick:o,onClickClear:i=(()=>{})}){const s=u().rightWrapper;return t?(0,a.jsx)("div",{style:s,children:(0,a.jsx)(r().A,{on:Boolean(n),onClick:o})}):(0,a.jsx)(l().A,{disabled:e,onClick:i})}}}]);