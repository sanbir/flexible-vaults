"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[52614],{175947:(e,t,n)=>{n.d(t,{$C:()=>i,Hi:()=>r,Qy:()=>a,Uu:()=>l,ek:()=>d,jq:()=>c,pz:()=>u});var o=()=>n(418135);const r=52,i=45,a=44,l=44,s=30;function d(e){return e?l:a}function c(e){return 2*d(e)}function u(e,t,n){return(e&&!t?(0,o().n$)(n):12)+s}},263542:(e,t,n)=>{n.d(t,{P:()=>r});class o extends(()=>n(757695))().Store{getInitialState(){return{open:!1,currentView:"chat",from:void 0,isAssistantInputEmpty:!0}}}const r=new o;(0,n(852832).exposeDebugValue)("AssistantMenuStore",r)},418135:(e,t,n)=>{n.d(t,{n$:()=>l,rx:()=>a,yA:()=>s});var o=()=>n(496603);const r=.5,i=4.9,a=1;function l(e){switch(o().qE(o().LI(e,1),r,i)){case r:return 155;case.6:return 128;case.7:return 108;case.8:return 94;case.9:return 83;default:return 75}}function s(e){const t=o().qE(o().LI(e,1),r,i);switch(t){case r:return 273;case.6:return 228;case.7:return 195;case.8:return 171;case.9:return 151;case 1:return 136;case 1.1:return 123;case 1.2:return 113;case 1.3:return 105;case 1.4:return 97;case 1.5:return 91;case 1.6:return 85;default:return Math.max(85-Math.floor(10*(t-1.6)*5),0)}}},474204:(e,t,n)=>{n.d(t,{M:()=>r});var o=()=>n(590526);function r(e){return(0,o().K8)((()=>{const t=null==e?void 0:e.collectionViewStore();return t&&"page"!==t.getType()}),[e])}},612875:(e,t,n)=>{n.r(t),n.d(t,{FloatingTableOfContents:()=>Y,FloatingTableOfContentsFullSizeContents:()=>Q,FloatingTableOfContentsMiniContents:()=>J});n(898992),n(672577),n(581454);var o=n(296540),r=()=>n(60481),i=()=>n(756117),a=()=>n(993905),l=()=>n(23749),s=()=>n(726637),d=()=>n(259985),c=()=>n(624919),u=()=>n(587682),p=()=>n(484714),g=()=>n(590526),h=()=>n(401497),f=()=>n(882722),m=()=>n(996332),v=()=>n(771329),x=()=>n(799954),y=()=>n(125958),S=()=>n(175947),b=()=>n(100622),w=()=>n(263542),C=()=>n(835066),k=()=>n(116008),j=()=>n(16006),I=()=>n(747100),M=()=>n(891078),T=()=>n(141333),A=()=>n(551619),R=()=>n(817942),P=()=>n(474204),H=()=>n(455994),F=()=>n(836724),E=()=>n(52957),B=()=>n(206051),O=()=>n(691809),K=()=>n(644914),L=()=>n(372154),z=()=>n(712505),D=()=>n(960701),N=()=>n(134103);class _ extends(()=>n(757695))().Store{getInitialState(){return{displayState:"collapsed_narrow"}}}var W=n(474848);const $=!1;function Y(e){const{store:t,viewsModuleCollectionContextStore:n}=e,o=(0,p().v3)(),{navigableAncestorStore:r,headerStores:i}=(0,D().d)({parentStore:t}),a=(0,g().K8)((()=>(0,I().cq)(t)),[t]),l=(0,g().K8)((()=>{const e=null==r?void 0:r.getModel();return e&&"off"!==e.getFloatingTableOfContentsState()}),[r]),{isSidePeekOpen:d,isCenterPeekOpen:c}=(0,g().K8)((()=>({isSidePeekOpen:z().default.isSidePeekOpen(),isCenterPeekOpen:z().default.isCenterPeekOpen()})),[]),u=(0,g().K8)((()=>(0,K().Nk)(o)),[o]),h=(0,g().K8)((()=>H().A.getPanelState("peek").isOpen),[]),f=(0,g().K8)((()=>w().P.state.open&&"chat"===w().P.state.currentView),[]),m=(0,P().M)(n),v=(0,g().K8)((()=>(0,C().dC)(o,t)&&(L().A.state.open||k().A.state.open)),[o,t]);return!l||s().A.isMobile||m||!a&&(d||u||f||v)||a&&(d||c&&h)?null:(0,W.jsx)(Z,{store:e.store,headerStores:i,navigableAncestorStore:r})}function Z(e){const{store:t,headerStores:n,navigableAncestorStore:i}=e,s=(0,o.useRef)(null),m=(0,g().uB)(void 0,_),{verticalScroller:x}=(0,o.useContext)(d().U)??{},y=(0,p().v3)(),{closestSelectable:b,targetHorizontalRule:w}=(0,g().K8)((()=>{var e;if(!x)return{};const t=(null==x?void 0:x.getStore()).state.clientRect??x.getClientRect(),{selectableRectMap:o}=E().default.state,i=t&&t.top+t.height/4,a=F().T.findScrollToSelectablesFromIds(n.map((e=>e.id))),l=new Map(a.map((e=>[e.props.store.id,e]))),{stores:s,phase:d}=B().default.state,c=d===r().o.Selected?s.find((e=>l.has(e.id))):void 0,p=c&&l.get(c.id),g=p&&o.get(p);if(g&&t&&u().HY(g,t))return{closestSelectable:p,targetHorizontalRule:i};let h;if(void 0!==i)for(const n of a){const e=o.get(n);if(!e)continue;const t=e.top+e.height/2,r=Math.abs(i-t);(!h||r<h.distance)&&(h={distance:r,selectable:n})}return{targetHorizontalRule:i,closestSelectable:null===(e=h)||void 0===e?void 0:e.selectable}}),[n,x]),C=(0,g().K8)((()=>{var e;return null==i||null===(e=i.getModel())||void 0===e?void 0:e.getFloatingTableOfContentsState()}),[i]),k=(0,A().no)(t),j=(0,g().K8)((()=>m.state.displayState),[m]);(0,o.useEffect)((()=>{$&&w&&(0,c().Iz)({top:w-3,bottom:w+3,left:0,width:9e3},"active header target")}));const I=(0,h().IS)((()=>({outerContainer:{position:"absolute",top:0,width:"100%",height:`calc(100vh - ${S().ek(y.device.isElectronMac)}px)`,display:"flex",flexDirection:"column",pointerEvents:"none"},viewportHeightContainer:{display:"flex"}})),[y.device.isElectronMac]),[M,T]=function(e){const t=(0,o.useRef)(null),n=(0,g().K8)((()=>{var n;const o=E().default.state.selectableRectMap,r=null===(n=t.current)||void 0===n?void 0:n.getBoundingClientRect();if(!r)return!1;for(const[t,i]of o)if(t.getContextSelectableContainer()===B().default.getCurrentDefaultContainer()&&"collection_view"!==t.props.store.getType()&&!t.props.ignoreForTocSelectionIntersection&&u().HY(i,r)){const n=t.props.store.getRecordStoreUIRoot();return e===n}return!1}),[e]);return[t,n]}(e.store),P={store:t,navigableAncestorStore:i,scrollTargetY:w,activeBlockId:null==b?void 0:b.props.store.id,headerStores:n,floatingTocStore:m};return n.length<2&&"minimal"===C?(0,W.jsx)(l().A,{name:"FloatingTableOfContentsInner",children:null}):(0,W.jsx)(l().A,{name:"FloatingTableOfContentsInner",children:(0,W.jsxs)(R().kZ,{style:{width:"100%",gridRow:"1 / -1",paddingInlineStart:k,position:"sticky",top:0,insetInlineEnd:0,zIndex:80,transition:"opacity 0.2s ease",opacity:T?0:1,visibility:T?"hidden":"visible",pointerEvents:T?"none":"auto"},children:[(0,W.jsx)("div",{style:{width:"100%",height:0},ref:s}),(0,W.jsx)("div",{className:`hide-scrollbar ${v().V} ${f().xAE}`,style:I.outerContainer,children:(0,W.jsx)("div",{style:I.viewportHeightContainer,children:(0,W.jsx)(a().s,{allowSelectionWithin:!0,style:{width:"100%"},children:"expanded"===j?(0,W.jsx)(U,{ref:M,...P}):(0,W.jsx)(V,{...P,ref:M})})})})]})})}const V=o.forwardRef((function(e,t){const r=(0,p().v3)(),{floatingTocStore:a}=e,l=(0,o.useRef)(null),s=(0,n(493720).R)(),d=(0,o.useRef)(),c=(0,g().K8)((()=>e=>{var t;(n(610640).A.setState({isHovered:e}),a.setState({...a.state,displayState:e?"collapsed_full":"collapsed_narrow"}),e)&&(d.current=null===(t=l.current)||void 0===t?void 0:t.getBoundingClientRect(),(0,n(564884).u)({environment:r,event:{eventName:"open_page_table_of_contents",eventProperties:{}}}))}),[r,a]),u=(0,g().K8)((()=>"collapsed_narrow"===a.state.displayState),[a]),f=(0,h().IS)((()=>({miniSizeContainer:{width:56,display:"flex",flexDirection:"column",justifyContent:"center",paddingBottom:12,paddingInlineEnd:8}})),[]),{verticalOffsetInPx:m,maxHeightForFullSizeToc:v,maxHeightForCollapsedToc:x}=re(e.store,a),y=(0,o.useCallback)((e=>({opacity:e?1:0})),[]);return(0,W.jsxs)("div",{style:{maxHeight:v,marginBottom:60,pointerEvents:"auto"},onMouseLeave:()=>c(!1),children:[(0,W.jsx)(i().A,{animate:y(u),style:{maxHeight:x,display:"flex",flexDirection:"row",position:"absolute",top:m,insetInlineEnd:0,overflowY:"hidden"},onMouseMove:O().Z,children:(0,W.jsx)("div",{ref:s(l,t),style:f.miniSizeContainer,onMouseOver:()=>{c(!0)},children:(0,W.jsx)(J,{...e})})}),(0,W.jsx)(i().A,{tag:q,visible:!u,animate:{translateX:0,opacity:1},initial:{translateX:10,opacity:0},exit:{translateX:10,opacity:0},originRect:d.current,onMouseLeave:()=>c(!1),contentProps:e,maxHeightForFullSizeToc:v})]})})),q=o.forwardRef((function({originRect:e,contentProps:t,maxHeightForFullSizeToc:o,onMouseLeave:r,style:i},a){const l=(0,h().IS)((()=>({fullSizeContainer:{width:242,display:"flex",flexDirection:"row",alignItems:"center",paddingTop:"12px",paddingInlineEnd:"12px",paddingBottom:"0",paddingInlineStart:"12px",marginInlineEnd:10,backgroundColor:b().Tj.background.primary,boxShadow:b().Tj.shadowMD,borderRadius:14,position:"relative",overflowY:"auto"},popupStyles:{background:void 0,boxShadow:void 0,overflow:void 0,marginTop:-10}})),[]);return(0,W.jsx)(n(127833).zD,{preventCaptureEsc:!0,preventScaleTransition:!0,preventOpacityTransition:!0,disableMouseCapture:!0,popupType:n(30537).n.Popup,originGap:-56,alignmentToOrigin:"start",open:!0,placementToOrigin:"left",originRect:e,style:l.popupStyles,render:()=>(0,W.jsx)("div",{style:{display:"flex",flexDirection:"row",width:258,paddingInlineStart:16,cursor:"default",...i},onMouseMove:e=>{(0,O().Z)(e),e.stopPropagation()},onMouseLeave:r,ref:a,children:(0,W.jsx)("div",{style:l.fullSizeContainer,children:(0,W.jsx)(Q,{...t,fillBackground:!0,maxHeight:o})})}),trapFocus:!1})})),U=o.forwardRef((function(e,t){const{store:n,floatingTocStore:o}=e,{verticalOffsetInPx:r,maxHeightForFullSizeToc:i}=re(n,o);return(0,W.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"end",pointerEvents:"auto"},children:(0,W.jsx)("div",{ref:t,onMouseMove:O().Z,style:{position:"absolute",top:r,marginInlineEnd:60,width:250,overflowY:"auto",maxHeight:i},className:"hide-scrollbar",children:(0,W.jsx)(Q,{...e,maxHeight:i})})})}));function X(e){const t=(0,g().K8)((()=>y().A({headerBlockId:e.headerStore.id,headerBlockIds:e.headerStoreIds,index:e.index,getRecordModel:e.store.getRecordModel})),[e.headerStore.id,e.headerStoreIds,e.index,e.store.getRecordModel]),n=(0,M().pW)(e.store),r=(0,h().IS)((()=>({container:{...n,cursor:"pointer",width:"100%",paddingBottom:e.isLast?12:void 0,color:e.isActive?b().Tj.blue.text.accentPrimary:b().Tj.text.secondary,transition:"color 0.15s ease"},linkBoxHovered:{background:b().Tj.background.tertiaryTranslucent,borderRadius:4,color:e.isActive?b().Tj.blue.text.accentPrimary:b().Tj.text.primary},nameContainer:{display:"flex",alignItems:"center",marginInlineStart:12*t},name:{paddingInlineEnd:x().CC.paddingInlineEnd,paddingInlineStart:x().CC.paddingInlineStart,fontSize:13,lineHeight:1.3,display:"flex",alignItems:"center",padding:4}})),[n,t,e.isActive,e.isLast]),i=(0,N().t)({pageStore:e.navigableAncestorStore,scrollToBlockId:e.headerStore.id,isFloatingToc:!0}),[a,l]=(0,o.useState)(!1);return e.navigableAncestorStore?(0,W.jsx)(m().Q,{...i,style:{...r.container,...e.style},external:!1,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),hovered:!1,pressedStyle:{background:"none"},ignoreLocalHoverState:!0,children:(0,W.jsx)("div",{style:{...r.nameContainer,...a?r.linkBoxHovered:{}},children:(0,W.jsx)("div",{style:r.name,children:(0,W.jsx)(j().A,{store:e.headerStore,shouldWrap:!0,underline:!1,maxLines:2})})})}):null}function Q(e){const{headerStores:t,navigableAncestorStore:n,maxHeight:r}=e,i=(0,h().IS)((()=>({container:{maxWidth:500,maxHeight:r,width:"100%",cursor:"default"},fillContainer:{padding:6,maxWidth:500,maxHeight:r,width:"100%",cursor:"default"}})),[r]),a=(0,o.useMemo)((()=>t.map((e=>e.id))),[t]);return(0,W.jsx)("div",{onMouseMove:O().Z,style:e.fillBackground?i.fillContainer:i.container,children:t.map(((o,r)=>(0,W.jsx)(X,{headerStore:o,index:r,isLast:r===t.length-1,headerStoreIds:a,store:e.store,navigableAncestorStore:n,isActive:o.id===e.activeBlockId,scrollTargetY:e.scrollTargetY},o.id)))})}function G(e){const t=(0,g().K8)((()=>y().A({headerBlockId:e.headerStore.id,headerBlockIds:e.headerStoreIds,index:e.index,getRecordModel:e.store.getRecordModel})),[e.headerStore.id,e.headerStoreIds,e.index,e.store.getRecordModel]),n=(0,h().eP)(),o=(0,h().IS)((()=>{const o=b().Tj.palette.gray[800],r="dark"===n&&e.isActive;return{lineContainer:{backgroundColor:e.isActive?o:b().Tj.gray.background.tertiaryTranslucent,height:2,width:16-4*t,transition:"background 0.2s ease, box-shadow 0.2s ease",boxShadow:r?`0px 0px 3px ${o}`:"none",borderRadius:2,marginInlineStart:4*t}}}),[t,e.isActive,n]);return e.navigableAncestorStore?(0,W.jsx)("div",{children:(0,W.jsx)("div",{style:o.lineContainer})}):null}function J(e){const{headerStores:t,navigableAncestorStore:n}=e,r=(0,h().IS)((()=>({container:{display:"flex",flexDirection:"column",gap:12,paddingInlineStart:20,paddingBottom:12,height:"100%"}})),[]),i=(0,o.useMemo)((()=>t.map((e=>e.id))),[t]);return(0,W.jsx)("div",{style:r.container,onMouseMove:O().Z,children:t.map(((t,o)=>(0,W.jsx)(G,{headerStore:t,index:o,headerStoreIds:i,store:e.store,navigableAncestorStore:n,isActive:t.id===e.activeBlockId},t.id)))})}const ee=113,te=600,ne=18,oe=130;function re(e,t){const{verticalScroller:n}=(0,o.useContext)(d().U)??{},r=null==n?void 0:n.getStore(),i=(0,g().K8)((()=>(null==r?void 0:r.state.elementRef)??{current:null}),[r]),a=(0,T().yE)(i),l=(0,T().o7)(i),s=(0,g().K8)((()=>{const t=F().T.findNodeFromBlockId(e.id),n=null==r?void 0:r.state;if(E().default.state.selectableElementRectMap,n&&t)return Math.max(t.offsetTop-a+ne,oe)}),[e,r,a]),c=(0,g().K8)((()=>t.state.displayState),[t]),u=l&&s?l-s-("expanded"!==c?80:0):te;return{maxHeightForFullSizeToc:u,maxHeightForCollapsedToc:Math.min(400,u),verticalOffsetInPx:s||ee}}},817942:(e,t,n)=>{n.d(t,{A5:()=>p,MR:()=>x,Mx:()=>s,Pb:()=>f,WL:()=>v,hg:()=>d,kZ:()=>m,pv:()=>c,vV:()=>h});n(581454);var o=n.n(n(32485)),r=n(296540),i=()=>n(23749),a=()=>n(455994),l=n(474848);const s=r.forwardRef((function(e,t){const{children:r,type:s,gap:d,withBottomPadding:c,style:u,onMouseDown:p,onClick:g,onDoubleClick:h,onContextMenu:f,suppressMargin:m}=e,v=(0,n(551619).n$)(s),x=(0,n(590526).K8)((()=>a().A.getPanelState("peek").isOpen&&"static_sidebar"===a().A.getPanelState("peek").displayStyle),[]);return(0,l.jsx)(i().A,{name:"PageLayout",children:(0,l.jsx)("div",{className:o()("layout",{"layout-wide":"wide"===s,"layout-wide-right-margin-expanded":"wide-right-margin-expanded"===s,"layout-side-peek":"side-peek"===s,"layout-center-peek":"center-peek"===s&&!x,"layout-center-peek-with-layout-panel":"center-peek"===s&&x,"layout-home":"home"===s,"layout-meet":"meet"===s,"layout-home-phone":"home-phone"===s,"layout-home-redesign-desktop":"home-redesign-desktop"===s,"layout-form":"form"===s,"layout-form-viewer":"form-viewer"===s,"layout-form-viewer-embed":"form-viewer-embed"===s,"layout-phone":"phone"===s,"layout-tablet":"tablet"===s,"layout-template-preview":"template-preview"===s,"layout-chat":"chat"===s,"layout-layout-editor":"layout-editor"===s,"layout-layout-editor-wide":"layout-editor-wide"===s,"layout-layout-editor-narrow":"layout-editor-narrow"===s,"layout-marketplace":"marketplace"===s,"layout-marketplace-mobile":"marketplace-mobile"===s,"layout-team-home":"team-home"===s,"layout-team-home-mobile":"team-home-mobile"===s,"layout-create-post":"create-post"===s,"layout-fullscreen-ai":"fullscreen-ai"===s,"layout-narrowscreen-ai":"narrowscreen-ai"===s,"layout-presentation-mode":"presentation-mode"===s,"layout-person-profile":"person-profile"===s,"layout-suppress-margin":m}),style:{paddingBottom:c?v:void 0,gap:d,...u},ref:t,onMouseDown:p,onClick:g,onDoubleClick:h,onContextMenu:f,children:r})})})),d="layout-content",c="layout-full",u="layout-margin-right",p="hide-scrollbar",g="layout-column",h=r.forwardRef((function(e,t){return(0,l.jsx)(i().A,{name:"PageLayoutContent",children:(0,l.jsx)("div",{className:o()(d,e.className),style:e.style,ref:t,children:e.children})})}));function f(e){return(0,l.jsx)(i().A,{name:"PageLayoutFull",children:(0,l.jsx)("div",{className:c,style:e.style,children:e.children})})}function m(e){return(0,l.jsx)(i().A,{name:"PageLayoutMarginRight",children:(0,l.jsx)("div",{className:u,style:{...e.style,pointerEvents:"none"},children:e.children})})}function v(e){return(0,l.jsx)(i().A,{name:"PageLayoutColumn",children:(0,l.jsx)("div",{className:o()(g,e.className),style:{"--min-column-width":e.minWidth?`${e.minWidth}px`:"100%",...e.style},children:e.children})})}function x(e){return(0,l.jsx)(i().A,{name:"PageLayoutTwoColumn",children:(0,l.jsxs)(v,{minWidth:e.minWidth,className:e.className,style:e.style,children:[e.left,e.right]})})}}}]);