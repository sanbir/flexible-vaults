"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[26264],{44935:(e,t,n)=>{n.d(t,{H:()=>h,i:()=>m});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(581454);var i=n(296540),o=n(440961),a=()=>n(782482),r=()=>n(507707),s=()=>n(624919),l=()=>n(587682),u=()=>n(590526),d=()=>n(496603),c=()=>n(745875),p=n(474848);const g=i.createContext(void 0);g.displayName="DynamicMenuContext";const f={Up:{x:0,y:-1},Down:{x:0,y:1},Left:{x:-1,y:0},Right:{x:1,y:0}},v=n(757695).Store.createValue(void 0);function m(e){const t=e.debug,n=(0,i.useRef)(void 0),o=(0,i.useRef)(new Set),s=(0,u().uB)(v),d=(0,i.useCallback)((()=>Array.from(o.current)),[]),c=(0,i.useCallback)((()=>d().map((e=>({entry:e,element:e.getDomElement()}))).filter((({element:e})=>void 0!==e)).sort(((e,t)=>(0,r().A)(e.element,t.element))).map((({entry:e})=>e))),[d]),m=(0,i.useCallback)((e=>{o.current.add(e)}),[]),y=(0,i.useCallback)(((e,t)=>{e&&!o.current.has(e)||e!==s.state&&(e&&e.disabled||(s.setState(e),n.current=t))}),[s]),h=(0,i.useCallback)((e=>{const t=s.state,n=c(),i=t?n.indexOf(t):-1,o=e>0?n.length:-1;for(let a=i+e;e>0?a<o:a>o;a+=e){const e=n[a];if(e&&!e.disabled)return e}}),[s,c]),b=(0,i.useCallback)(((e,t)=>{const n=h(e);if(n)return null==t||t.preventDefault(),y(n,void 0),n}),[h,y]),D=(0,i.useCallback)(((e,i)=>{const o=s.state,a=n.current,r=d().filter((e=>!e.disabled));if(0===r.length)return;i&&i.preventDefault&&i.preventDefault();const u=o&&o.getRect();if(!u){const t=e.x*e.y>0?1:-1;return b(t,void 0)||b(1,void 0)}const c=r.map((e=>({entry:e,rect:e.getRect()}))).filter((e=>void 0!==e.rect&&e.entry!==o));let p;if(0===e.x&&void 0!==a&&a.left>u.left){const n=u.top-a.top,i=new(l().z8)(a.left,a.top+n,a.width,u.height);i.height=u.height,x("maxLeftRect",i,"orange",t),p=S(i,e,c,t),p&&x("found from maxLeft",p.rect,"yellow",t)}p||(p=S(u,e,c,t),p&&x("found from originRect",p.rect,"yellow",t));const g=0!==e.x||void 0===a;if(p){const e=p.rect;return y(p.entry,g?e:a),p.entry}g&&(n.current=u)}),[t,s,d,y,b]),k=(0,i.useCallback)((e=>{const t=s.state;if(o.current.delete(e),e===t){if(D({x:-1,y:-1},void 0))return;y(void 0,void 0)}}),[s,y,D]),A=(0,i.useCallback)((e=>{const t=s.state;t&&t.onAction(e,void 0)}),[s]),C=(0,i.useCallback)((()=>{var t;s.state?y(void 0,void 0):(t=e.onClose)&&t()}),[s,y,e.onClose]),w=(0,i.useCallback)((()=>{y(void 0,void 0)}),[y]),M=(0,i.useCallback)((e=>D(f.Up,e)),[D]),j=(0,i.useCallback)((e=>D(f.Right,e)),[D]),R=(0,i.useCallback)((e=>D(f.Down,e)),[D]),T=(0,i.useCallback)((e=>D(f.Left,e)),[D]),F=(0,i.useCallback)((e=>b(1,e)),[b]),I=(0,i.useCallback)((e=>b(-1,e)),[b]),B=(0,i.useMemo)((()=>({registerEntry:m,unregisterEntry:k,onFocusEvent:y,focusedEntryStore:s})),[m,k,y,s]);return(0,p.jsx)(a().N,{debugName:"DynamicMenu",capture:!e.disableKeyboard,onUp:M,onDown:R,onLeft:T,onRight:j,onEnter:A,onCommandEnter:A,onEsc:C,onTab:F,onUntab:I,children:(0,p.jsx)("div",{onMouseLeave:w,children:(0,p.jsx)(g.Provider,{value:B,children:e.children})})})}function y(e){const{action:t,render:n,dynamicMenuContext:a}=e,r=(0,i.useRef)(null);(0,i.useEffect)((()=>{const t=e.dynamicMenuContext,n=m.current;if(t)return t.registerEntry(n),()=>{t.unregisterEntry(n)}}),[]);const s=(0,i.useCallback)((e=>{a&&a.onFocusEvent(m.current,e)}),[a]),l=(0,i.useCallback)((e=>{t(e,a)}),[t,a]),d=(0,i.useCallback)((e=>{if(!e)return void(r.current=null);if(e instanceof Element)return void(r.current=e);const t=o.findDOMNode(e);t instanceof Element?r.current=t:r.current=null}),[]),c=(0,i.useCallback)((()=>r.current||void 0),[]),g=(0,i.useCallback)((()=>{if(r.current)return r.current.getBoundingClientRect()}),[]),f=Boolean(e.disabled),v=(0,i.useCallback)((e=>{t(e,a)}),[t,a]),m=(0,i.useRef)({getDomElement:c,getRect:g,disabled:f,onAction:v}),y=(0,u().K8)((()=>!!a&&a.focusedEntryStore.state===m.current),[a]);return(0,p.jsx)(p.Fragment,{children:n({onMouseEnter:s,onClick:l,ref:d,focused:y,disabled:f},e.dynamicMenuContext)})}function h(e){const t=(0,i.useContext)(g);return(0,p.jsx)(y,{...e,dynamicMenuContext:t})}function S(e,t,n,i){const o=(0,l().GL)(e),a=[o.top,o.left];let r=(0,l().fT)(e,-5);t.x>0&&(r=new(l().z8)(o.left,r.top,1/0,r.height)),t.x<0&&(r=new(l().z8)(0,r.top,o.right,r.height)),t.y>0&&(r=new(l().z8)(r.left,o.top,r.width,1/0)),t.y<0&&(r=new(l().z8)(r.left,0,r.width,o.bottom)),i&&x("search space",r,"magenta");const s=n.filter((e=>(0,l().HY)(r,e.rect))),u=d().Ul(s.map((e=>{const t=(0,l().GL)(e.rect);return{entry:e,distance:c().Io(a,[t.top,t.left])}})),(e=>e.distance))[0];if(u)return u.entry}function x(e,t,n="magenta",i){i&&async function(e,t,n="magenta"){await(0,s().Iz)(t,e,n)}(e,t,n)}},117586:(e,t,n)=>{n.d(t,{Ay:()=>r,dz:()=>o,xQ:()=>i});let i=function(e){return e.StartDate="startDate",e.StartTime="startTime",e.EndDate="endDate",e.EndTime="endTime",e}({}),o=function(e){return e.InvalidDate="Invalid date",e.InvalidTime="Invalid time",e.InvalidRange="Invalid range",e}({});class a extends(()=>n(757695))().Store{getInitialState(){return{focus:i.StartDate,inputIsFocused:!1,inputTemporaryValue:{startDate:void 0,startTime:void 0,endDate:void 0,endTime:void 0},error:{startDate:void 0,startTime:void 0,endDate:void 0,endTime:void 0}}}}const r=a},126912:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>i,xMarkCircleFillSmallIcon:()=>o});n(296540);const i={viewBox:"0 0 16 16",fittedViewBox:"1.95 1.94 12.11 12.1",svg:(0,n(474848).jsx)("path",{d:"M8 1.95a6.05 6.05 0 1 0 0 12.1 6.05 6.05 0 0 0 0-12.1m2.289 3.761a.55.55 0 0 1 0 .778L8.778 8l1.511 1.511a.55.55 0 0 1-.778.778l-1.51-1.511-1.512 1.51a.55.55 0 1 1-.778-.777L7.222 8l-1.51-1.511a.55.55 0 1 1 .777-.778L8 7.222l1.511-1.51a.55.55 0 0 1 .778 0"})},o=(0,n(340498).wt)("xMarkCircleFillSmall",i,"fillSmall")},272630:(e,t,n)=>{n.d(t,{A:()=>s});n(296540);var i=()=>n(726637),o=()=>n(401497),a=()=>n(100622),r=n(474848);const s=function({title:e,disabled:t,innerStyle:s,placeholder:l,onClick:u,disableMargins:d,desktopStyle:c}){const p=(0,o().eP)(),g=Boolean(e),f=(0,o().IS)((()=>({title:{display:"flex",alignItems:"center",...i().A.isMobile&&{marginInlineStart:32},...s}})),[s]);if(i().A.isMobile)return(0,r.jsx)(n(81068).A,{showExtensionArrow:!t,focused:!1,title:g?(0,r.jsx)("div",{style:f.title,children:e}):(0,r.jsx)("div",{style:{...f.title,color:a().oZ.uiGray},children:l}),onClick:u});{const i="dark"===p?a().Tj.text.tertiary:a().Tj.text.secondary;return(0,r.jsx)(n(44935).H,{action:()=>function(e){e&&e()}(u),disabled:t,render:o=>(0,r.jsx)(n(406094).A,{...o,hovered:o.focused,size:"lg",hasSolidBackground:!0,style:{marginInlineEnd:8,maxWidth:180,padding:"0 8px",...o.disabled&&{opacity:.5},...d&&{marginInlineEnd:0,maxWidth:"100%",justifyContent:"space-between"},...c},iconTrailing:t?void 0:{icon:n(324254).arrowChevronSingleDownSmallIcon,colorVariant:"tertiary",size:"xs"},children:(0,r.jsx)("div",{style:{display:"flex",minWidth:0,color:g?a().Tj.text.primary:i,...s},children:g?e:l})})})}}},352321:(e,t,n)=>{n.d(t,{Ay:()=>p,le:()=>c,sA:()=>d});var i=n(296540),o=()=>n(782482),a=()=>n(726637),r=()=>n(100622),s=()=>n(496603),l=()=>n(546926),u=n(474848);const d="20px",c={Select:"Select",Person:"Person",Relation:"Relation",FilterValue:"FilterValue",Share:"Share",Group:"Group",Place:"Place"},p=i.forwardRef((function(e,t){const{disabled:i,value:a,message:r,right:l,showClearButton:d,format:c,focus:p,dontShowBorderBottom:g,showBorder:f,style:v,onClick:m,inputAndTokenWrapRightStyle:y,tokens:h,hideInput:x,onRemoveLastToken:b,onKeyDown:D,onChange:k,focusInitial:A,focusAfterAnimation:C,preventScrollOnFocus:w,inputFullWidth:M,inputDivStyle:j,inputStyle:R,rightWrapStyle:T,tokenWrapStyle:F,type:I,placeholder:B,onEmptySubmit:E,onSubmit:W,textarea:P,autoComplete:O,onClearButtonClick:U,inputElementAttributes:L,suppressFocusRing:_,onFocus:z,onBlur:Y}=e;return(0,u.jsx)(o().N,{debugName:"TokenInputMenuItem",capture:!i,onLeft:s().D_,onRight:s().D_,onSelectAll:s().D_,onRedo:s().D_,onUndo:s().D_,onToggleBold:s().D_,onToggleItalics:s().D_,onToggleCode:s().D_,onCut:s().D_,onCopy:s().D_,onPaste:s().D_,onKeypress:s().D_,children:(0,u.jsx)(o().N,{debugName:"TokenInputMenuItem",capture:!i&&a.length>0,onDelete:s().D_,onBackspace:s().D_,children:(0,u.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"stretch",flex:1,minWidth:0,gap:r?4:void 0},children:[(0,u.jsx)(S,{ref:t,right:l,showClearButton:d,format:c,focus:p,dontShowBorderBottom:g,disabled:i,showBorder:f,style:v,rightWrapStyle:T,onClick:m,inputAndTokenWrapRightStyle:y,tokens:h,hideInput:x,value:a,onRemoveLastToken:b,onKeyDown:D,onChange:k,focusInitial:A,focusAfterAnimation:C,preventScrollOnFocus:w,inputFullWidth:M,inputDivStyle:j,inputStyle:R,type:I,placeholder:B,onEmptySubmit:E,onSubmit:W,textarea:P,autoComplete:O,onClearButtonClick:U,inputElementAttributes:L,suppressFocusRing:_,onFocus:z,onBlur:Y,tokenWrapStyle:F}),r?(0,u.jsx)(n(302501).A,{isSmall:!0,children:r}):void 0]})})})}));function g(e){return e===c.Group}function f(e){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",background:e?"none":r().Tj.tokenInputMenuItemBackground,cursor:"text",overflow:"hidden",fontSize:14,minHeight:28,padding:4,borderRadius:6}}const v={borderRadius:4};function m(){return{[c.Select]:{desktopWrapStyleOverride:{},inputDivDesktopStyle:v,inputDivDesktopFocusStyle:{}},[c.Person]:{desktopWrapStyleOverride:{},inputDivDesktopStyle:v,inputDivDesktopFocusStyle:{}},[c.Relation]:{desktopWrapStyleOverride:{},inputDivDesktopStyle:v,inputDivDesktopFocusStyle:{}},[c.Group]:{desktopWrapStyleOverride:{},inputDivDesktopStyle:v,inputDivDesktopFocusStyle:{}},[c.FilterValue]:{desktopWrapStyleOverride:{padding:"4px 6px",boxShadow:r().Tj.inputBoxShadow,background:r().Tj.inputBackground},inputDivDesktopStyle:v,inputDivDesktopFocusStyle:{}},[c.Place]:{desktopWrapStyleOverride:{},inputDivDesktopStyle:v,inputDivDesktopFocusStyle:{}},[c.Share]:{desktopWrapStyleOverride:{},inputDivDesktopStyle:{marginTop:0,marginInlineEnd:0,marginBottom:0,marginInlineStart:2,borderStartStartRadius:4,borderStartEndRadius:4},inputDivDesktopFocusStyle:{}}}}function y({environment:e,format:t,focus:i,dontShowBorderBottom:o,disabled:s,showBorder:u,menuContext:d,showFocusRing:c}){return(0,n(590526).K8)((()=>{const{WindowSizeStore:n}=e,p=m()[t];return a().A.isMobile?{display:"flex",flexWrap:"wrap",alignItems:"flex-start",flexShrink:0,minHeight:44,borderBottom:`1px solid ${r().Tj.border.secondaryTranslucent}`,fontSize:a().A.isMobile?17:16,background:r().Tj.popoverBackground,paddingTop:14,paddingBottom:14,paddingInlineStart:(null==d?void 0:d.menuType)!==l().gu.Popup?n.getSafePaddingLeftCSS(16):16,paddingInlineEnd:(null==d?void 0:d.menuType)!==l().gu.Popup?n.getSafePaddingRightCSS(16):16,...o&&{borderBottom:"none"}}:{...f(s),...p.desktopWrapStyleOverride,...u&&{boxShadow:"rgba(15, 15, 15, 0.1) 0px 0px 0px 1px inset"},...u&&i&&{boxShadow:r().Tj.inputBlueFocusRing},...i&&p.inputDivDesktopFocusStyle,...c&&{boxShadow:r().Tj.buttonBlueFocusRing}}}),[s,o,e,i,t,null==d?void 0:d.menuType,u,c])}const h=i.forwardRef((function({tokens:e,disabled:t,value:o,onRemoveLastToken:r,onKeyDown:s,onChange:l,focus:d,focusInitial:c,focusAfterAnimation:p,preventScrollOnFocus:g,format:f,inputFullWidth:v,inputDivStyle:m,inputStyle:y,type:h,placeholder:S,onEmptySubmit:x,onSubmit:D,textarea:k,autoComplete:A,setIsFocused:C,onFocus:w,onBlur:M,inputElementAttributes:j,suppressFocusRing:R},T){const F=(0,i.useCallback)((e=>{"Backspace"===e.key&&0===o.length&&r(),s&&s(e)}),[o,r,s]),I=(0,i.useCallback)((e=>{0===o.length&&x&&x(),D&&D(e)}),[o,x,D]),B=(0,i.useCallback)((()=>{C(!1),null==M||M()}),[C,M]),E=(0,i.useCallback)((()=>{C(!0),null==w||w()}),[C,w]),W=0===e.length;return(0,u.jsx)(n(31511).A,{disabled:t,format:"transparent",onKeyDown:F,onChange:l,value:o,focus:d,focusInitial:c,focusAfterAnimation:p,preventScrollOnFocus:g,style:b(f,v,m),inputStyle:y||{height:a().A.isMobile?24:20},size:1,ref:T,type:h,placeholder:W?S:"",onSubmit:I,onFocus:E,onBlur:B,textarea:k,autoComplete:A,inputElementAttributes:j,suppressFocusRing:R})})),S=i.forwardRef((function(e,t){const{right:o,showClearButton:r,format:s,focus:d,dontShowBorderBottom:c,disabled:p,showBorder:f,style:v,onClick:m,inputAndTokenWrapRightStyle:S,tokenWrapStyle:b,tokens:D,hideInput:k,value:A,onRemoveLastToken:C,onKeyDown:w,onChange:M,focusInitial:j,focusAfterAnimation:R,preventScrollOnFocus:T,inputFullWidth:F,inputDivStyle:I,inputStyle:B,rightWrapStyle:E,type:W,placeholder:P,onEmptySubmit:O,onSubmit:U,textarea:L,autoComplete:_,onClearButtonClick:z,onFocus:Y,onBlur:V,inputElementAttributes:K,suppressFocusRing:G}=e,N=(0,n(484714).v3)(),J=(0,i.useContext)(l().xu),[Q,H]=(0,i.useState)(!1),[$,Z]=(0,i.useState)((()=>Boolean(d||j)));(0,i.useEffect)((()=>{T&&H(!0)}),[T]),(0,i.useEffect)((()=>{void 0!==d&&Z(d)}),[d]);const q=(0,i.useRef)(null),[X,ee]=(0,n(819121).A)(),te=(0,n(93583).A)(t,q,X),ne=(0,i.useCallback)((()=>{var e;p||(null===(e=q.current)||void 0===e||e.focus(),null==m||m())}),[p,m,q]),ie="combobox"===(null==K?void 0:K.role)&&ee&&!G,oe=y({environment:N,format:s,focus:d,dontShowBorderBottom:c,disabled:p,showBorder:f,menuContext:J,showFocusRing:ie}),{inputElementAttributes:ae,wrapperElementAttributes:re}=(0,i.useMemo)((()=>{if("combobox"===(null==K?void 0:K.role)){const{role:e,"aria-expanded":t,"aria-haspopup":n,"aria-controls":i,"aria-orientation":o,...a}=K;return{inputElementAttributes:a,wrapperElementAttributes:{role:e,"aria-expanded":t,"aria-haspopup":n,"aria-controls":i,"aria-orientation":o}}}return{inputElementAttributes:K,wrapperElementAttributes:{}}}),[K]);return!a().A.isMobile||o||r?(0,u.jsxs)(n(917150)._,{type:n(611648).A.All,style:{...oe,flexWrap:"nowrap",...v},onClick:ne,...re,children:[(0,u.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",flexGrow:1,minWidth:0,...b,...o||r?S:null},children:[D,k?void 0:(0,u.jsx)(h,{ref:te,tokens:D,disabled:p,value:A,onRemoveLastToken:C,onKeyDown:w,onChange:M,focus:d,focusInitial:j,focusAfterAnimation:R,preventScrollOnFocus:Q,format:s,inputFullWidth:F,inputDivStyle:I,inputStyle:B,type:W,placeholder:P,onEmptySubmit:O,onSubmit:U,textarea:L,autoComplete:_,setIsFocused:Z,onFocus:Y,onBlur:V,inputElementAttributes:ae,suppressFocusRing:G})]}),o||r?(0,u.jsx)("div",{style:{flexShrink:0,...E},children:(0,u.jsx)(x,{showClearButton:r,right:o,onClearButtonClick:z,tokens:D,value:A})}):null]}):(0,u.jsxs)("div",{style:{...oe,flexWrap:"nowrap",...v},onClick:ne,tabIndex:-1,role:"none",...re,children:[(0,u.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",flexGrow:1,minWidth:0,gap:6,overflow:"hidden",marginInlineEnd:g(s)?6:0},children:[D,k?void 0:(0,u.jsx)(h,{ref:te,tokens:D,disabled:p,value:A,onRemoveLastToken:C,onKeyDown:w,onChange:M,focus:d,focusInitial:j,focusAfterAnimation:R,format:s,inputFullWidth:F,inputDivStyle:I,inputStyle:B,type:W,placeholder:P,onEmptySubmit:O,onSubmit:U,textarea:L,autoComplete:_,setIsFocused:Z,onFocus:Y,onBlur:V,inputElementAttributes:ae,suppressFocusRing:G})]}),(0,u.jsx)(n(797324).A,{show:$})]})}));function x({showClearButton:e,right:t,onClearButtonClick:i,tokens:o,value:r}){const s=(0,n(69708).tz)();return t?(0,u.jsx)(u.Fragment,{children:t}):e&&(o.length>0||r.length>0)?(0,u.jsx)(n(718827).Ay,{"aria-label":s.formatMessage({id:"tokenInputMenuItem.clearButton",defaultMessage:"Clear"}),onClick:i,style:{flexShrink:0,flexGrow:0,borderRadius:a().A.isMobile?24:20,marginTop:a().A.isMobile?0:2},children:(0,u.jsx)(n(807449).I,{icon:n(126912).xMarkCircleFillSmallIcon,size:a().A.isMobile?"default":"sm",colorVariant:"tertiary"})}):null}function b(e,t,n){return{flexGrow:1,flexShrink:1,flexBasis:t?"100%":60,minWidth:60,width:"auto",lineHeight:d,...a().A.isMobile?{margin:"0 8px 0 0"}:m()[e].inputDivDesktopStyle,...n}}},431955:(e,t,n)=>{function i(e){return"exact"===e.type?e.type:"surrounding"===e.value?`${e.type}-${e.unit}`:"custom"===e.value?`${e.type}-${e.unit}-${e.count}-${e.direction}`:e.value}n.d(t,{q:()=>i})},474962:(e,t,n)=>{n.d(t,{A:()=>o});class i extends(()=>n(757695))().Store{constructor(e={}){super();const t={...this.getInitialState()};e.initialDateRange&&(t.temporaryDateRange=e.initialDateRange),e.shouldAlsoUpdateSearchStore&&(t.shouldAlsoUpdateSearchStore=e.shouldAlsoUpdateSearchStore),this.setState(t)}getInitialState(){return{isOpen:!1,focus:"starting",temporaryDateRange:{starting:void 0,ending:void 0},displayMonth:void 0,hovered:void 0,dateFilterType:"lastEditedTime",shouldAlsoUpdateSearchStore:!1}}getFocus(){return this.state.focus}clearTemporaryDateRange(){this.setState({...this.state,temporaryDateRange:{starting:void 0,ending:void 0}})}}const o=i},707160:(e,t,n)=>{n.d(t,{A:()=>M});n(898992),n(354520);var i=n(296540),o=()=>n(726637),a=()=>n(590526),r=()=>n(401497),s=()=>n(245720),l=()=>n(546926),u=()=>n(302501),d=()=>n(736847),c=()=>n(214388),p=()=>n(604995),g=()=>n(416504),f=()=>n(69708),v=()=>n(100622),m=()=>n(534177),y=()=>n(817980),h=()=>n(903400),S=()=>n(180252),x=()=>n(881431),b=()=>n(474962),D=()=>n(340347),k=()=>n(657338),A=()=>n(746031),C=n(474848);const w=(0,f().YK)({startingMessage:{defaultMessage:"Starting",id:"search.dateRangeMenu.startingMessage"},endingMessage:{defaultMessage:"Ending",id:"search.dateRangeMenu.endingMessage"}});const M=function({disableMenuWrap:e,hideDateInputMenuItems:t,value:i,relativeRangePopupStore:r,onUpdateRelativeFilter:s,disabled:l,allowRelativeRangeFilter:u,onUpdate:d,onDismiss:c,title:p,store:g,maxDate:v,minDate:m}){const y=(0,n(484714).v3)(),h=(0,f().tz)(),S=(0,a().uB)(g,b().A);return e?(0,C.jsxs)(C.Fragment,{children:[t?void 0:(0,C.jsx)(W,{value:i,relativeRangePopupStore:r,onUpdateRelativeFilter:s,disabled:l,allowRelativeRangeFilter:u,intl:h,onUpdate:d,onDismiss:c,store:S}),(0,C.jsx)(I,{value:i,onUpdate:d,store:S,maxDate:v,minDate:m})]}):(0,C.jsxs)(n(890492).A,{...P(y,p,i,h,d,S,c,r,s,l,u),children:[o().A.isMobile||t?void 0:(0,C.jsx)(W,{value:i,relativeRangePopupStore:r,onUpdateRelativeFilter:s,disabled:l,allowRelativeRangeFilter:u,intl:h,onUpdate:d,onDismiss:c,store:S}),(0,C.jsx)(I,{value:i,onUpdate:d,store:S,maxDate:v,minDate:m})]})};function j(e){return{type:"date",start_date:p().hp(Date.now(),p().Lm(),e).toFormat(p().tr)}}function R(e){return"custom"===e.value?function(e,t,n){const i=(0,c().k0)(e,t,n,(0,g().P)());switch(e){case"past":return{starting:p().lN(i),ending:p().Ec((0,g().P)())};case"future":return{starting:p().Ec((0,g().P)()),ending:p().lN(i)};default:(0,m().HB)(e)}}(e.direction,e.count,e.unit):"surrounding"===e.value?function(e){const{start:t,end:n}=(0,c().yM)(e,(0,g().P)(),S().XX.state);return{starting:p().lN(t),ending:p().lN(n)}}(e.unit):function(e){switch(e.value){case"this_week":return{starting:(t=(0,g().P)(),{type:"date",start_date:p().iB(Date.now(),p().Lm(),t).toFormat(p().tr)}),ending:j((0,g().P)())};case"the_past_month":return{starting:p().ZG((0,g().P)()),ending:p().Ec((0,g().P)())};case"the_past_week":return{starting:p().t0((0,g().P)()),ending:p().Ec((0,g().P)())};case"the_past_year":return{starting:p().Yz((0,g().P)()),ending:p().Ec((0,g().P)())};case"the_next_month":return{starting:p().Ec((0,g().P)()),ending:p().wc((0,g().P)())};case"the_next_week":return{starting:p().Ec((0,g().P)()),ending:p().En((0,g().P)())};case"the_next_year":return{starting:p().Ec((0,g().P)()),ending:p().le((0,g().P)())};default:(0,m().HB)(e)}var t}(e)}function T({events:e,onUpdateFilter:t,filter:n}){return(0,C.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexWrap:o().A.isMobile?"wrap":void 0,padding:"0px 16px"},children:(0,C.jsx)(h().i,{onUpdate:t,filter:n})})}function F(e,t,n){if("type"in n)return{value:{starting:void 0,ending:void 0}};if(t.error)return t;const i=t.value&&"date"!==t.value.type?p().fN(t.value):t.value;return function(e){if(e.starting&&e.ending){const t=p().C6.notionDateToLuxon(e.starting);return p().C6.notionDateToLuxon(e.ending)>=t?{value:e}:{error:D().$.INVALID_RANGE}}return{value:e}}({...n,[e]:i})}function I({value:e,onUpdate:t,store:n,maxDate:i,minDate:s}){const l=(0,a().uB)(n,b().A),c=(0,r().IS)((()=>{const e={pickerSectionMobile:{background:v().Tj.popoverBackground}};return{container:{paddingInlineStart:8,paddingInlineEnd:8,paddingBottom:8,paddingTop:o().A.isMobile?16:4,...o().A.isMobile&&e.pickerSectionMobile},label:{paddingInlineStart:8,paddingInlineEnd:8,paddingBottom:8,paddingTop:o().A.isMobile?8:4,...o().A.isMobile&&e.pickerSectionMobile}}}),[]),p=(0,a().K8)((()=>"type"in e?R(e):e),[e]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(d().A,{disableMobileBorders:!0,children:(0,C.jsx)("div",{style:c.container,children:(0,C.jsx)(A().A,{value:p,store:l,onUpdate:t,validate:(t,n)=>F(t,n,e),readonly:"type"in e,maxDate:i,minDate:s})})}),"type"in e?(0,C.jsx)(d().A,{disableMobileBorders:!0,topBorder:!0,children:(0,C.jsx)("div",{style:c.label,children:(0,C.jsx)(u().A,{isSmall:!0,isSecondaryColor:!0,children:(0,C.jsx)(f().sA,{id:"collectionFilterMenu.dateRangeFilter.relativeDateRangeFilter.description",defaultMessage:"Filter will update with the current date"})})})}):void 0]})}function B(e,t){t.setState({...t.state,focus:e})}function E({events:e,value:t,disabled:n,allowRelativeRangeFilter:s,onUpdate:l,onDismiss:u,store:d}){const c=(0,f().tz)(),p=(0,r().IS)((()=>({inputTextWrapper:{marginInlineStart:s&&!o().A.isMobile?2:void 0},inputOuterStyle:{background:"transparent",paddingInlineEnd:0,boxShadow:"none"}})),[s]),g=(0,i.useCallback)(((e,t)=>function(e,t,n){t&&t.error||n.setState({...n.state,focus:"ending"})}(0,t,d)),[d]),v=(0,a().K8)((()=>d.getFocus()),[d]),m=function(e,t){if("type"in e)return;return{earliestValidEnding:e.starting&&(0,x().Y)(e.starting,t,"YYYY-MM-DD"),latestValidStarting:e.ending&&(0,x().Y)(e.ending,t,"YYYY-MM-DD")}}(t,c),y="type"in t?{starting:void 0,ending:void 0}:t;return(0,C.jsxs)("div",{...e,style:{display:"flex",flexDirection:s&&!o().A.isMobile?"row":"column",alignItems:"center",gap:8,paddingInlineEnd:16,paddingInlineStart:16},children:[(0,C.jsx)(k().A,{disabled:n,placeholder:o().A.isMobile?void 0:c.formatMessage(w.startingMessage),focused:"starting"===v,value:y.starting,validate:e=>function(e,t){const n=F("starting",e,t);return n.error?n:{value:n.value.starting}}(e,t),onUpdate:e=>function(e,t){e.error||t({value:{starting:e.value}})}(e,l),onFocus:()=>B("starting",d),onSubmit:g,inputElementAttributes:m?{max:m.latestValidStarting}:void 0,desktopDateFormat:s?"YYYY/MM/DD":void 0,style:{padding:0,borderRadius:6},textWrapperStyle:p.inputTextWrapper,inputOuterStyle:o().A.isMobile?p.inputOuterStyle:void 0}),(0,C.jsx)(k().A,{disabled:n,placeholder:o().A.isMobile?void 0:c.formatMessage(w.endingMessage),focused:"ending"===v,value:y.ending,validate:e=>function(e,t){const n=F("ending",e,t);return n.error?n:{value:n.value.ending}}(e,t),onUpdate:e=>function(e,t){e.error||t({value:{ending:e.value}})}(e,l),onFocus:()=>B("ending",d),onSubmit:(e,t)=>function(e,t,n){t&&t.error||n&&n(e)}(e,t,u),inputElementAttributes:m?{min:m.earliestValidEnding}:void 0,desktopDateFormat:s?"YYYY/MM/DD":void 0,style:{padding:0,borderRadius:6},textWrapperStyle:p.inputTextWrapper,inputOuterStyle:o().A.isMobile?p.inputOuterStyle:void 0})]})}function W({value:e,relativeRangePopupStore:t,onUpdateRelativeFilter:n,disabled:i,allowRelativeRangeFilter:o,intl:a,onUpdate:r,onDismiss:s,store:l}){if(t&&n){const a="type"in e?e:{type:"exact",value:void 0};return(0,C.jsx)(y().A,{type:"daterange",filterValue:a,onUpdate:n,renderOrigin:t=>"exact"===a.type?(0,C.jsx)(E,{value:e,disabled:i,allowRelativeRangeFilter:o,onUpdate:r,onDismiss:s,store:l,events:t}):"relative"!==a.type||"surrounding"!==a.value&&"custom"!==a.value?void 0:(0,C.jsx)(T,{events:t,onUpdateFilter:n,filter:a}),disabled:"exact"===a.type,buttonPopupStore:t})}return(0,C.jsx)(E,{value:e,disabled:i,allowRelativeRangeFilter:o,onUpdate:r,onDismiss:s,store:l})}function P(e,t,n,i,a,r,u,d,c,p,g){if(o().A.isMobile){return{menuType:l().gu.Modal,title:t,right:(0,C.jsx)(f().sA,{...s().W.done}),onClickRight:u,header:(0,C.jsx)(W,{value:n,relativeRangePopupStore:d,onUpdateRelativeFilter:c,disabled:p,allowRelativeRangeFilter:g,intl:i,onUpdate:a,onDismiss:u,store:r})}}return{menuType:l().gu.Popup,onClickOutside:u}}},746031:(e,t,n)=>{n.d(t,{A:()=>p});n(944114);var i=n.n(n(32485)),o=n(296540),a=()=>n(590526),r=()=>n(604995),s=()=>n(100622),l=()=>n(284371),u=()=>n(180252),d=()=>n(870068),c=n(474848);const p=function({readonly:e,store:t,value:p,validate:g,onUpdate:f,disabled:v,dateTimeStore:m,minDate:y,maxDate:h}){const S=(0,o.useRef)(),x=(0,a().K8)((()=>{if(t.state.displayMonth)return t.state.displayMonth.toJSDate();if("starting"===t.getFocus()){if(p.starting)return r().C6.notionDateToJsDate(p.starting);if(p.ending)return r().C6.notionDateToJsDate(p.ending)}if("ending"===t.getFocus()){if(p.ending)return r().C6.notionDateToJsDate(p.ending);if(p.starting)return r().C6.notionDateToJsDate(p.starting)}if(!S.current){const e=r().Ec((0,n(416504).P)());S.current=r().C6.notionDateToJsDate(e)}return S.current}),[S,t,p]),b=(0,a().K8)((()=>u().XX.state),[]),D=(0,a().K8)((()=>function(e){const{store:t,value:n,componentIsDisabled:i,minDate:o,maxDate:a}=e,s=function(e){const{store:t,value:n,componentIsDisabled:i,minDate:o,maxDate:a}=e;if(i)return[!0];const s=[];o&&s.push({before:o.toJSDate()});a&&s.push({after:a.toJSDate()});const l=e=>"ending"===t.getFocus()&&{before:e},u=e=>"starting"===t.getFocus()&&{after:e};if(n.starting){const e=r().C6.notionDateToJsDate(n.starting);s.push(l(e))}if(n.ending){const e=r().C6.notionDateToJsDate(n.ending);s.push(u(e))}return s}({value:n,store:t,componentIsDisabled:i,minDate:o,maxDate:a}),{hovered:l}=t.state;if(i)return{disabled:s};if(n.starting&&n.ending){const e=r().C6.notionDateToJsDate(n.starting),t=r().C6.notionDateToJsDate(n.ending);return{range:{from:e,to:t},start:e,end:t,disabled:s}}if(n.starting){const e=r().C6.notionDateToJsDate(n.starting);return{range:l&&{from:e,to:l},start:e,end:l,disabled:s,selected:[e,l]}}if(n.ending){const e=r().C6.notionDateToJsDate(n.ending);return{range:l&&{from:l,to:e},start:l,end:e,disabled:s,selected:[e,l]}}return{disabled:s}}({store:t,value:p,componentIsDisabled:v,minDate:y,maxDate:h})),[t,p,v,y,h]),k=(0,a().K8)((()=>function(e){const t={monthControl:{position:"absolute",top:0,insetInlineEnd:0,display:"flex"},selectedRange:{backgroundColor:"transparent"},active:{backgroundColor:s().oZ.blue,color:s().oZ.white},inactive:{backgroundColor:s().IF.blueWithAlpha(.43)},disabled:{pointerEvents:"none"},today:{fontWeight:l().Wy.regular}},n={disabled:{color:s().Tj.text.tertiary},today:{color:s().oZ.white}},i=e.getFocus(),o=t.selectedRange,a={...t.disabled,...n.disabled},r={...t.today,...n.today};return{range:o,start:"starting"===i?t.active:t.inactive,end:"ending"===i?t.active:t.inactive,disabled:a,today:r}}(t)),[t]);return(0,c.jsx)(n(541181).n,{className:i()("notion-calendar-picker",{"is-readonly":e}),defaultMonth:x,month:x,numberOfMonths:1,weekStartsOn:b,locale:n(609679).locale,showOutsideDays:!0,fixedWeeks:!0,onDayClick:n=>function(e,t,n,i,o,a,s,l){if(a||l)return;const u=t.getFocus(),c=r().C6.toPersistedDate(e.valueOf()),p=i(u,{value:c}),g=p.error?p:{value:{[u]:p.value[u]}};o(g),t.setState({...t.state,hovered:void 0}),s&&s.setState({...s.state,hovered:void 0});if(p.error)return;"starting"!==u||n.ending||(t.setState({...t.state,focus:"ending"}),s&&s.setState({...s.state,focus:d().Ah.ending}));const f="starting"===u?"ending":"starting";t.setState({...t.state,focus:f}),s&&s.setState({...s.state,focus:d().Ah[f]})}(n,t,p,g,f,v,m,e),onDayMouseEnter:n=>function(e,t,n,i,o,a){const s=t.getFocus(),l=r().C6.jsDateToLuxon(e);if(i||a)return;if("starting"===s&&n.ending&&!n.starting){r().C6.notionDateToLuxon(n.ending)>=l&&(t.setState({...t.state,hovered:e}),o&&o.setState({...o.state,hovered:e}))}else if("ending"===s&&n.starting&&!n.ending){r().C6.notionDateToLuxon(n.starting)<=l&&(t.setState({...t.state,hovered:e}),o&&o.setState({...o.state,hovered:e}))}}(n,t,p,v,m,e),onMonthSelected:e=>function(e,t,n){t.setState({...t.state,displayMonth:r().C6.jsDateToLuxon(e)}),n&&n.setState({...n.state,displayMonth:r().C6.jsDateToLuxon(e)})}(e,t,m),modifiers:D,modifiersStyles:k,disabled:!!e||void 0})}},817980:(e,t,n)=>{n.d(t,{A:()=>m});n(898992),n(354520),n(581454),n(296540);var i=()=>n(726637),o=()=>n(127833),a=()=>n(250910),r=()=>n(546926),s=()=>n(890492),l=()=>n(81068),u=()=>n(663639),d=()=>n(736847),c=()=>n(754195);var p=()=>n(431955),g=()=>n(69708),f=()=>n(649746),v=n(474848);function m(e){const t=(0,g().tz)(),{filterValue:n,renderOrigin:m,buttonPopupStore:y}=e,h=e=>"relative"===e.filter.type&&"custom"===e.filter.value?t.formatMessage(f().IZ[e.filter.value]):"date"===e.type?(0,f().RR)(e.filter):(0,f().kz)(e.filter),S=()=>{const e=c().mP;return[...e.filter((e=>"relative"===e.type)),...e.filter((e=>"exact"===e.type))]};return(0,v.jsx)(a().A,{popupType:i().A.isMobile?o().nl.SlideUp:o().nl.Popup,buttonPopupStore:y,render:()=>{let t;t=i().A.isMobile?{menuType:r().gu.ActionSheet}:{menuType:r().gu.Popup};const o="date"===e.type?(()=>{const e=c().ty;return[...e.filter((e=>"relative"===e.type)),...e.filter((e=>"exact"===e.type))]})().map((t=>({key:"relative"===t.type?t.value:t.type,render:e=>(0,v.jsx)(l().A,{...e,title:h({type:"date",filter:t}),isChecked:t.type===n.type&&(void 0===t.value||t.value===n.value)}),action:()=>{e.onUpdate(t),y.setState({open:!1})}}))):S().map((t=>({key:(0,p().q)(t),render:e=>(0,v.jsx)(l().A,{...e,title:h({type:"daterange",filter:t}),isChecked:t.type===n.type&&(void 0===t.value||t.value===n.value)}),action:()=>{e.onUpdate(t),y.setState({open:!1})}})));return(0,v.jsx)(s().A,{...t,children:(0,v.jsx)(u().A,{type:u().O.Vertical,sections:[{key:"filterOperators",render:e=>(0,v.jsx)(d().A,{disableMobilePadding:!0,...e}),items:o}],initialFocus:void 0})})},renderOrigin:m,style:{width:240},originGap:2,placementToOrigin:"bottom",alignmentToOrigin:"center",disabled:e.disabled})}},870068:(e,t,n)=>{n.d(t,{Ah:()=>a,Ay:()=>s,yL:()=>o});var i=()=>n(117586);const o={[i().xQ.StartDate]:"starting",[i().xQ.StartTime]:"starting",[i().xQ.EndDate]:"ending",[i().xQ.EndTime]:"ending"},a={starting:i().xQ.StartDate,ending:i().xQ.EndDate};class r extends(()=>n(757695))().Store{getInitialState(){return{isOpen:!1,focus:i().xQ.StartDate,temporaryDateRange:{starting:void 0,ending:void 0},displayMonth:void 0,hovered:void 0,showTime:!1}}getFocus(){return this.state.focus}toggleShowTime(){this.setState({...this.state,showTime:!this.state.showTime})}clearTemporaryDateRange(){this.setState({...this.state,temporaryDateRange:{starting:void 0,ending:void 0}})}}const s=r},903400:(e,t,n)=>{n.d(t,{i:()=>w});n(898992),n(354520),n(296540);var i=()=>n(726637),o=()=>n(590526),a=()=>n(401497),r=()=>n(150161),s=()=>n(127833),l=()=>n(250910),u=()=>n(118307),d=()=>n(546926),c=()=>n(406094),p=()=>n(302501),g=()=>n(890492),f=()=>n(81068),v=()=>n(663639),m=()=>n(736847),y=()=>n(324254),h=()=>n(69708),S=()=>n(100622),x=()=>n(720665),b=()=>n(649746),D=()=>n(419357),k=()=>n(272630),A=n(474848);function C(e){const{humanReadableLabel:t,placeholder:n,outlineButtonStyle:o,buttonWrapperStyle:r,renderAsQueryDropdown:s,events:l}=e,u=(0,a().IS)((()=>({textStyle:{marginInlineStart:6,color:S().Tj.text.primary}})),[]);return s?(0,A.jsx)(k().A,{...l,placeholder:n,title:(0,A.jsx)(p().A,{children:t}),disableMargins:!0}):(0,A.jsx)("div",{style:r,...l,children:(0,A.jsx)(c().A,{size:i().A.isMobile?"lg":void 0,style:o,hasSolidBackground:!0,iconTrailing:{icon:y().arrowChevronSingleDownSmallIcon,colorVariant:"secondary",size:"sm"},children:(0,A.jsx)("div",{style:u.textStyle,children:t})})})}function w(e){const{onUpdate:t,filter:n,renderAsQueryDropdown:c}=e,p=(0,h().tz)(),y=(0,o().uB)(void 0,u().A),S=(0,o().uB)(void 0,u().A),k="count"in n,w=(0,a().IS)((()=>({directionButtonStyle:{paddingInlineStart:4,paddingInlineEnd:4,width:"100%",justifyContent:"space-between",...i().A.isMobile&&{marginTop:12,width:"100%",paddingInlineStart:12,marginBottom:6}},unitButtonStyle:{paddingInlineStart:4,paddingInlineEnd:4,justifyContent:"space-between",width:"100%",...i().A.isMobile&&{paddingInlineStart:12,marginTop:6}},directionButtonWrapperStyle:{...i().A.isMobile&&{width:"100%"},flexGrow:1},unitButtonWrapperStyle:{...i().A.isMobile&&{width:"100%"},flexGrow:1},inputStyle:{padding:0,borderRadius:6},inputOuterStyle:{minWidth:60,height:r().RO.md,...i().A.isMobile&&{background:"transparent",paddingInlineEnd:0,boxShadow:"none"}},container:{display:"flex",justifyContent:"start",alignItems:"center",flexDirection:i().A.isMobile?"column":"row",width:"100%",gap:4},textWrapper:{marginInlineEnd:i().A.isMobile?6:8,marginInlineStart:i().A.isMobile?16:8}})),[]);function M(e){return"this"===e?p.formatMessage(b().Cj[e]):p.formatMessage(b().zZ[e])}function j(e,t){return t&&t>1?p.formatMessage(b().o1[e]):p.formatMessage(b().EA[e])}const R=["day","week","month","year"].map((e=>({key:e,render:t=>(0,A.jsx)(f().A,{...t,title:j(e,k?n.count:void 0),isChecked:e===n.unit}),action:i=>{t({...n,unit:e}),y.setState({open:!1})}}))),T=["past","future","this"].map((e=>({key:e,render:t=>(0,A.jsx)(f().A,{...t,isChecked:"surrounding"===n.value?"this"===e:e===n.direction,title:M(e)}),action:i=>{"this"===e&&"custom"===n.value?t({type:"relative",value:"surrounding",unit:n.unit}):"this"!==e&&"surrounding"===n.value?t({type:"relative",value:"custom",count:1,direction:e,unit:n.unit}):"this"!==e&&"custom"===n.value&&t({...n,direction:e}),S.setState({open:!1})}})));return(0,A.jsxs)("div",{style:w.container,children:[(0,A.jsx)(l().A,{buttonPopupStore:S,popupType:i().A.isMobile?s().nl.SlideUp:s().nl.Popup,renderOrigin:e=>(0,A.jsx)(C,{events:e,placeholder:p.formatMessage(b().ql.direction),renderAsQueryDropdown:c,outlineButtonStyle:w.directionButtonStyle,buttonWrapperStyle:w.directionButtonWrapperStyle,humanReadableLabel:M("direction"in n?n.direction:"this")}),render:()=>(0,A.jsx)(g().A,{menuType:i().A.isMobile?d().gu.ActionSheet:d().gu.Popup,children:(0,A.jsx)(v().A,{initialFocus:void 0,type:v().O.Vertical,sections:[{key:"directionOptions",render:e=>(0,A.jsx)(m().A,{disableMobilePadding:!0,...e}),items:T}]})})}),k?(0,A.jsx)(D().Ay,{type:"number",style:w.inputStyle,textWrapperStyle:w.textWrapper,inputOuterStyle:w.inputOuterStyle,min:"1",value:n.count.toString(),onChange:e=>{const i=parseInt(e.target.value);!(0,x().Et)(i)||i<1||t({...n,count:i})}}):void 0,(0,A.jsx)(l().A,{buttonPopupStore:y,popupType:i().A.isMobile?s().nl.SlideUp:s().nl.Popup,renderOrigin:e=>(0,A.jsx)(C,{events:e,placeholder:p.formatMessage(b().ql.unit),renderAsQueryDropdown:c,outlineButtonStyle:w.unitButtonStyle,buttonWrapperStyle:w.unitButtonWrapperStyle,humanReadableLabel:j(n.unit,"count"in n?n.count:void 0)}),render:()=>(0,A.jsx)(g().A,{menuType:i().A.isMobile?d().gu.ActionSheet:d().gu.Popup,children:(0,A.jsx)(v().A,{initialFocus:void 0,type:v().O.Vertical,sections:[{key:"unitOptions",render:e=>(0,A.jsx)(m().A,{disableMobilePadding:!0,...e}),items:R}]})})})]})}}}]);