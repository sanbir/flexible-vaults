"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[29351,89253],{3486:(e,t,o)=>{o.d(t,{P:()=>a,_:()=>i});var n=()=>o(278238);function a(e){const t=(0,n().VA)(e);return"lightgray"===t?"gray":t}function i(e,t){const o=(0,n().VA)(e),a="lightgray"===o?"gray":o;return n().l8[t][a]}},5374:(e,t,o)=>{o.d(t,{g:()=>h});o(296540);var n=()=>o(564884),a=()=>o(381175),i=()=>o(401497),s=()=>o(807449),r=()=>o(81068),l=()=>o(584262),c=()=>o(40457),d=()=>o(100622),p=()=>o(534177),u=()=>o(257667),m=()=>o(246766),g=o(474848);function f(e){const{menuListItemProps:t,title:o,caption:n,icon:a,preventClickDefault:l}=e,p=(0,i().IS)((()=>({container:{paddingTop:8,paddingBottom:8},title:{fontWeight:500},shortcut:{fontSize:12,color:d().Tj.text.disabled},icon:{height:20,width:20,fontSize:20},enterIcon:{fill:d().Tj.text.tertiary,marginTop:2,marginInlineEnd:6}})),[]);return(0,g.jsx)(r().A,{title:(0,g.jsx)("div",{style:p.title,children:o}),caption:n?(0,g.jsx)("div",{children:n}):void 0,...t,icon:a(p.icon),style:p.container,buttonStyle:e.buttonStyles,right:t.focused?(0,g.jsx)(s().I,{icon:c().arrowTurnDownLeftSmallIcon,size:"xs",style:p.enterIcon}):void 0,rightStyle:p.shortcut,onMouseDown:l?e=>e.preventDefault():void 0})}function h(e){const{result:t,desktopProps:{isNewElectronTabSearch:o,electronTabs:i},queryId:s,environment:r,isSearch2:c,preventClickDefault:d,searchSessionId:h,source:v}=e,{title:y,icon:x,caption:S}=t.value;let I=`${y}-search-action-item`;if("navigation"===t.value.behavior){const e=t.value.destination,o="block"===e.type?e.blockStore.id:e.url;I=`${y}-${o}-search-action-item`}return{key:I,action:({event:c})=>{e.action(c),(0,n().u)({environment:r,event:{eventName:"search_action_result_click",eventProperties:{type:t.eventName,search_session_id:h,source:v}}});const{behavior:d}=t.value;if("action"===d)t.value.action(c);else if("navigation"===d){const e=t.value.destination,n=(0,a().V)(c);"block"===e.type?u().q9({environment:r,openInNew:n,pageVisitSource:l().y8.SearchCustomAction,queryId:s,context:"action",electronTabSearch:{tabs:i??[],isNewTab:o},searchResult:{type:"custom",store:e.blockStore}}):"url"===e.type?(0,m().navigate)({environment:r,url:e.url,queryId:s,openInNew:n,makeTabActive:o}):(0,p().HB)(e)}},render:t=>(0,g.jsx)(f,{menuListItemProps:t,caption:S,icon:x,isSearch2:c,preventClickDefault:d,title:y,...e})}}},5844:(e,t,o)=>{o.d(t,{B:()=>ze,n:()=>Ie});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577),o(581454),o(737550),o(296540);var n=()=>o(907258),a=()=>o(212497),i=()=>o(242422),s=()=>o(675133),r=()=>o(128933),l=()=>o(295633),c=()=>o(981535),d=()=>o(710515),p=()=>o(716016),u=()=>o(713998),m=()=>o(529099),g=()=>o(820579),f=()=>o(940563),h=()=>o(605777),v=()=>o(489538),y=()=>o(107620),x=()=>o(536583),S=()=>o(764781),I=()=>o(212727),b=()=>o(133043),j=()=>o(829548),A=()=>o(281844),w=o(474848);const C={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.25",svg:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("path",{d:"M8.089 5.348a.416.416 0 0 1 .538.538 4.241 4.241 0 0 0 5.486 5.486.416.416 0 0 1 .538.538 5.08 5.08 0 0 1-4.529 3.238l-.201.004a5.074 5.074 0 0 1-1.832-9.804"}),(0,w.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 1 0 15.25 7.625 7.625 0 0 1 0-15.25m0 1.25a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},k=(0,o(340498).wt)("moonCircle",C,"default");var T=()=>o(120282),M=()=>o(826693),P=()=>o(120739),_=()=>o(427704),B=()=>o(69708),F=()=>o(496603),E=()=>o(498212),R=()=>o(534177),O=()=>o(939768),L=()=>o(209660),D=()=>o(721253),V=()=>o(383070),z=()=>o(813297),N=()=>o(367742),U=()=>o(253053),W=()=>o(619553),H=()=>o(91232),q=()=>o(854513),K=()=>o(862292),$=()=>o(71304),Y=()=>o(141966),Z=()=>o(328384),G=()=>o(288157),J=()=>o(84987),Q=()=>o(346),X=()=>o(756114),ee=()=>o(568821),te=()=>o(661291),oe=()=>o(623875),ne=()=>o(696746),ae=()=>o(578136),ie=()=>o(321874),se=()=>o(5374),re=()=>o(87573),le=()=>o(770906),ce=()=>o(362749),de=()=>o(583550),pe=()=>o(411471),ue=()=>o(992933),me=()=>o(649495),ge=()=>o(797730),fe=()=>o(712505),he=()=>o(404141),ve=()=>o(615623),ye=()=>o(898808);const xe=(0,B().YK)({tooltip:{id:"team_home.tooltip",defaultMessage:"See announcements and other team updates"},searchResultCaption:{id:"team_home.searchResultCaption",defaultMessage:"Teamspace – See announcements and other team updates"}}),Se=2;function Ie(e){const{query:t,environment:o,isNewElectronTab:n,spaceUserStore:a}=e;if(t.length<Se)return[];const i={spaceUserStore:a,query:t,environment:o,isCommandSearch:(0,re().q)(o)},s=e=>{var o;if(!e||"action"===e.value.behavior&&n)return!1;if(e.value.shouldIgnoreTitle)return!0;const a=t.toLowerCase();if(e.value.title.toLowerCase().startsWith(a))return!0;const i=null===(o=e.value.aliases)||void 0===o?void 0:o.some((e=>e.toLowerCase().startsWith(a)));return Boolean(i)};return[[Be(i)].filter(s),[Fe(i)].filter(s),[Oe(i)].filter(s),[Le(i)].filter(s),De(i).filter(s),Ve(i).filter(s),ke(i).filter(s),[Me(i)].filter(s),[Te(i)].filter(s),_e(i).filter(s).slice(0,6),Pe(i).filter(s).slice(0,5),[Ce(i)].filter(s),[Ee(i)].filter(s),[Re(i)].filter(s),[je(i)].filter(s),[Ae(i)].filter(s),[we(i)].filter(s)].flat()}const be=!1;function je(e){const{environment:t,isCommandSearch:o}=e,n=i().default.checkGate({gateName:"search_meeting_notes_action"});if(!o&&n)return{type:"client_action",eventName:"create_meeting_notes",value:{behavior:"action",title:s().A.formatMessage(Ne.createMeetingNotes),aliases:[s().A.formatMessage(Ne.notesAlias),s().A.formatMessage(Ne.recordAlias),s().A.formatMessage(Ne.micAlias),s().A.formatMessage(Ne.meetingNotesAlias),s().A.formatMessage(Ne.voiceAlias),s().A.formatMessage(Ne.transcriptionAlias),s().A.formatMessage(Ne.speechAlias),s().A.formatMessage(Ne.dictationAlias),s().A.formatMessage(Ne.audioAlias)],caption:s().A.formatMessage(Ne.createMeetingNotesCaption),icon:T().a,action:async()=>{(await q().$.load()).createAndNavigateToTranscriptionBlock({environment:t,from:"search_meeting_notes",title:"title_with_event",origin:"search_meeting_notes"})}}}}function Ae(e){const{isCommandSearch:t}=e,o=i().default.checkGate({gateName:"meeting_notes_page"});if(!t&&o)return{type:"client_action",eventName:"meetings_tab",value:{behavior:"navigation",title:s().A.formatMessage(Ne.meetingsTab),aliases:[s().A.formatMessage(Ne.meetingsAlias)],caption:s().A.formatMessage(Ne.meetingsTabCaption),icon:T().a,destination:{type:"url",url:_().JZ.meet}}}}function we(e){const{isCommandSearch:t,environment:o}=e,n=(0,G().xc)();if(!t&&n)return{type:"client_action",eventName:"library_tab",value:{behavior:"action",title:s().A.formatMessage(Ne.libraryTab),aliases:[s().A.formatMessage(Ne.libraryAlias)],caption:s().A.formatMessage(Ne.libraryTabCaption),icon:h().bookIcon,action:async e=>{(await(0,ce().p)())({event:e,environment:o,analyticsFrom:"search_modal"})}}}}function Ce(e){const{environment:t}=e;return{type:"client_action",eventName:"settings",value:{behavior:"action",title:s().A.formatMessage(ue().O.settings),aliases:void 0,icon:I().gearIcon,caption:s().A.formatMessage(ue().O.tooltip),action:()=>{t.device.isElectron?(0,H().S)():L().Ow({openedFrom:"search_modal",currentTab:"settings"})}}}}function ke(e){if(!be)return[];const t=fe().default.getPeekMode(),o=(0,F().hS)([fe().default.state.open?{name:"center_peek"===t?"center":"peek",store:fe().default.state.targetStore}:void 0,"center_peek"!==t?{name:"main",store:n().default.state.mainEditorCurrentBlockStore}:void 0],(e=>{var t;return null==e||null===(t=e.store)||void 0===t?void 0:t.id})),i=[];for(const{name:n,store:l}of(0,F().oE)(o)){var r;if(!l)continue;const t=l.getAssociatedCollectionStore();if(!t)continue;const o=t.getSchema();if(!o)continue;const c=(0,R().WP)(o).find((([e,t])=>"auto_increment_id"===(null==t?void 0:t.type)));if(!c)continue;const[d,m]=c;if(!m)continue;const g=null===(r=t.getRecordKeyStore())||void 0===r?void 0:r.getRecordKey(),f=(0,u().On)(l.getPropertyValue(d));if(!g||!f)continue;const h=(0,p().H4)(g,f);if(h){const t=(0,$().tS)({environment:e.environment,intl:s().A.getIntl(),store:l});i.push({type:"client_action",eventName:`${n}_unique_id`,value:{behavior:"action",title:s().A.formatMessage(Ne.copyUniqueIdForPage,{pageTitle:t,idPropertyName:m.name}),aliases:[s().A.formatMessage(Ne.copyUniqueIdAlias)],caption:s().A.formatMessage(Ne.copyUniqueIdForPageCaption),icon:x().d,shouldIgnoreTitle:!1,action:async()=>{const t=await(0,a().jd)();await t({environment:e.environment,stringValue:h,copiedMessage:Ne.copyUniqueIdSnackNotification})}}})}}return i}function Te({spaceUserStore:e}){if(!V().zD.isAiEnabled())return;const t=(0,de().getTooltipDescriptionForAi)(e);return{type:"client_action",eventName:"ai_shortcut",value:{behavior:"navigation",title:s().A.formatMessage(ge().D.notionAi),aliases:[s().A.formatMessage(Ne.aiAlias)],icon:m().aiFaceIcon,caption:s().A.formatMessage(t),destination:{type:"url",url:_().JZ.ai}}}}function Me(e){const t=(0,ne().x$)(n().default.state.sidebarSpaceViewStore);if(!t)return;const o=(0,pe().Oc)();return{type:"client_action",eventName:"home",value:{behavior:"navigation",title:s().A.formatMessage(pe().aQ.label),aliases:void 0,icon:b().P,caption:s().A.formatMessage(o),destination:{type:"block",blockStore:t}}}}function Pe(e){var t;const{environment:o}=e;if(!(0,ae().D)({isMobileNative:o.device.isMobileNative,disableExposureLogging:!0}))return[];const{sidebarSpaceViewStore:a,currentUserStore:i,sidebarSpaceStore:r}=n().default.state,l=a?(0,d().r)(a):[],p=null==i?void 0:i.id;if(!p||!r)return[];const u=null===(t=(0,c().Z)({userId:p,spaceStore:r,teamTypes:new Set(["Joined","UnjoinedActive"])}))||void 0===t?void 0:t.teams;if(!u)return[];const m=u.filter((e=>"closed"!==e.accessLevel)),g=new Set(l.map((e=>e.id)));return m.sort(((e,t)=>Number(g.has(t.id))-Number(g.has(e.id)))).map((e=>{const t=e.icon;return{type:"client_action",eventName:"team_home",value:{behavior:"navigation",aliases:void 0,title:e.title,icon:t?(t,o)=>(0,w.jsx)(ye().x,{teamMetadata:e,style:t}):b().P,caption:s().A.formatMessage(xe.searchResultCaption),destination:{type:"url",url:(0,P().a)({teamId:e.id,spaceId:r.id})}}}}))}function _e(e){var t;const{environment:o}=e;if(!(0,te().$Q)())return[];const a=(0,ne().XH)("shortcuts");if(null==a||!a.isReady())return[];const i=s().A.getIntl(),c=n().default.state.currentUserStore,d=null!=c&&c.isDefined()?null===(t=c.getModel())||void 0===t?void 0:t.getDisplayName(i):void 0,p=a.getContentStores().filter((e=>e.isType("button")));return(0,F().oE)(p.map((e=>{const t=e.getAutomationStore();if(!t)return;const a=t.getNameStore().getValue()??s().A.formatMessage(U().yn.buttonPlaceholder);return{type:"client_action",eventName:"home_shortcut",value:{behavior:"action",title:a,aliases:void 0,caption:s().A.formatMessage(Ne.homeShortcutsCaption,{user_name:d||"User"}),icon:()=>(0,w.jsx)(oe().p,{config:{type:"custom",store:e},shortcutHealthStatus:"valid",size:20}),action:async()=>{var i;const{automationExecutionActions:c}=await z().QV.automations.load(),d=await K().T.formulas.load(),[p,u]=await Promise.all([z().QV.automationTypecheck.load(),z().QV.automationActionRegistry.load()]),m=e.getRecordStoreUIRoot(),g=m instanceof l().B&&m.isPageBlock()?m:void 0,f=await(0,ve().S)(o,{name:"premium_automations",spaceId:t.getSpaceId(),userId:null===(i=n().default.state.currentUserStore)||void 0===i?void 0:i.id}),h={automationStore:t,automationTypecheckModule:p,automationActionRegistryModule:u,blockStore:e,currentUserId:o.currentUser.id,formulasModule:d,intl:s().A.getIntl(),isLoggedIn:o.currentUser.isLoggedIn(),pageStore:g,parentRecordStore:t,type:"button_block"};(0,N().T1)({clientContext:{...h,environment:o,isSubscribed:Boolean(f)}})?r().D6({label:s().A.formatMessage(Ne.homeShortcutsRunFailed,{title:a})}):(await c.executeClientAutomation({clientContext:h,environment:o}),r().D6({label:s().A.formatMessage(Ne.homeShortcutsRan,{title:a})}))}}}})))}function Be(e){const{environment:t,isCommandSearch:o}=e;if(be&&!o)return{type:"client_action",eventName:"inbox",value:{behavior:"action",title:s().A.formatMessage(ge().D.inbox),aliases:[s().A.formatMessage(Ne.inboxNotificationAlias),s().A.formatMessage(Ne.inboxUpdateAlias)],caption:s().A.formatMessage(J().inboxMessages.tooltip),icon:j().y,action:()=>(0,le().ZT)({environment:t,contentType:"inbox"})}}}function Fe(e){if((0,Y().l5)()&&!e.isCommandSearch)return{type:"client_action",eventName:"experiments",value:{behavior:"action",title:s().A.formatMessage(Ne.experiments),aliases:[s().A.formatMessage(Ne.experimentGateAlias)],caption:s().A.formatMessage(Ne.experimentsCaption),icon:v().o,action:()=>{he().Ay.setState({...he().Ay.state,open:!0,currentTab:"experiments",defaultSubtab:void 0})}}}}function Ee(e){if(!e.isCommandSearch)return{type:"client_action",eventName:"import",value:{behavior:"action",title:s().A.formatMessage(Z().h.tabTitle),aliases:void 0,caption:s().A.formatMessage(Z().h.tabSubtitle),icon:g().arrowLineDownIcon,action:()=>he().Ay.setState({...he().Ay.state,open:!0,currentTab:"imports",defaultSubtab:void 0})}}}function Re(e){return{type:"client_action",eventName:"templates",value:{behavior:"navigation",title:s().A.formatMessage(me().U.title),aliases:[s().A.formatMessage(Ne.templatesGalleryAlias)],caption:s().A.formatMessage(me().U.templatesMwnTooltip),icon:M().notionTemplateIcon,destination:{type:"url",url:_().JZ.marketplace}}}}function Oe(e){if(be&&!e.isCommandSearch)return{type:"client_action",eventName:"toggle_performance_toolbar",value:{behavior:"action",title:s().A.formatMessage(Ne.performanceToolbar),aliases:void 0,caption:s().A.formatMessage(Ne.performanceToolbarCaption),icon:A().v,action:()=>{(0,X().D)(e.environment,e.environment.RouterStore.state)&&Q().T1.load().then((()=>{(0,ee().PM)("pin")}))}}}}function Le(e){const{environment:t}=e,o="light"===t.ThemeStore.state.mode;if(be)return{type:"client_action",eventName:"toggle_theme",value:{behavior:"action",title:s().A.formatMessage(Ne.toggleTheme),aliases:[s().A.formatMessage(Ne.darkMode),s().A.formatMessage(Ne.lightMode),s().A.formatMessage(Ne.themeMode)],caption:s().A.formatMessage(o?Ne.toggleDarkThemeCaption:Ne.toggleLightThemeCaption),icon:k,action:()=>{const e=o?"dark":"light";D().C5(e)}}}}function De(e){if(!be)return[];const{query:t,environment:o}=e,n=(0,E().parseUUIDWithoutDashes)(t);if(void 0===n)return[];const i=O().Gm({url:`/${t}`});return[{type:"client_action",eventName:"copy_as_dashed_uuid",value:{behavior:"action",title:s().A.formatMessage(Ne.copyAsDashedUuid),aliases:[],caption:n,icon:S().V,shouldIgnoreTitle:!0,action:async()=>{const e=await(0,a().jd)();await e({environment:o,stringValue:n,copiedMessage:Ne.copyAsDashedUuidSnackbar})}}},{type:"client_action",eventName:"navigate_to_undashed_uuid",value:{behavior:"navigation",title:s().A.formatMessage(Ne.navigateToUuid),aliases:[],caption:i,icon:f().arrowStraightRightIcon,shouldIgnoreTitle:!0,destination:{type:"url",url:i}}}]}function Ve(e){if(!be)return[];const{query:t,environment:o}=e;if(!(0,E().uj)(t))return[];const n=(0,E().Xw)(t),i=O().Gm({url:`/${n}`});return[{type:"client_action",eventName:"copy_as_undashed_uuid",value:{behavior:"action",title:s().A.formatMessage(Ne.copyAsUndashedUuid),aliases:[],caption:n,icon:S().V,shouldIgnoreTitle:!0,action:async()=>{const e=await(0,a().jd)();await e({environment:o,stringValue:n,copiedMessage:Ne.copyAsUndashedUuidSnackbar})}}},{type:"client_action",eventName:"navigate_to_dashed_uuid",value:{behavior:"navigation",title:s().A.formatMessage(Ne.navigateToUuid),aliases:[],caption:i,icon:f().arrowStraightRightIcon,shouldIgnoreTitle:!0,destination:{type:"url",url:i}}}]}function ze(e){const{environment:t,intl:o}=e,n=o.formatMessage(Ne.newAiChat);return(0,se().g)({environment:t,queryId:void 0,desktopProps:{isNewElectronTabSearch:!0,electronTabs:[]},searchSessionId:void 0,source:"quick_find",action:()=>{ie().st({environment:t,reset:!1})},result:{type:"client_action",eventName:"tab_new_ai_chat",value:{icon:y().y,title:n,behavior:"action",aliases:void 0,caption:void 0,action:()=>{(0,W().B)({makeTabActive:!0,url:_().JZ.ai,position:"end",openInNew:"tab",environment:t})}}}})}const Ne=(0,B().YK)({newAiChat:{id:"searchDefaultBody.searchActionMenuItem.newAIChat",defaultMessage:"New AI chat"},homeShortcutsRunFailed:{id:"search.actionResult.homeShortcuts.runFailed",defaultMessage:"Failed to run {title} shortcut"},homeShortcutsRan:{id:"search.actionResult.homeShortcuts.ran",defaultMessage:"Ran {title} shortcut"},homeShortcutsCaption:{id:"search.actionResult.homeShortcuts.caption",defaultMessage:"Custom shortcut button from {user_name}’s Home"},performanceToolbar:{id:"search.actionResult.performanceToolbar",defaultMessage:"Performance toolbar"},performanceToolbarCaption:{id:"search.actionResult.fpsCaption",defaultMessage:"Toggle the performance toolbar."},toggleTheme:{id:"search.actionResult.toggleTheme",defaultMessage:"Toggle theme"},toggleDarkThemeCaption:{id:"search.actionResult.toggleDarkThemeCaption",defaultMessage:"Switch to dark theme."},toggleLightThemeCaption:{id:"search.actionResult.toggleLightThemeCaption",defaultMessage:"Switch to light theme."},darkMode:{id:"search.actionResult.darkModeAlias",defaultMessage:"Dark mode"},lightMode:{id:"search.actionResult.lightModeAlias",defaultMessage:"Light mode"},themeMode:{id:"search.actionResult.themeModeAlias",defaultMessage:"Theme"},copyAsDashedUuid:{id:"search.actionResult.copyAsDashedUuid",defaultMessage:"Copy as dashed UUID"},copyAsDashedUuidSnackbar:{id:"search.actionResult.copyAsDashedUuidSnackbar",defaultMessage:"Copied dashed UUID"},navigateToUuid:{id:"search.actionResult.navigateToUuid",defaultMessage:"Navigate to block UUID"},copyAsUndashedUuid:{id:"search.actionResult.copyAsUndashedUuid",defaultMessage:"Copy as undashed UUID"},copyAsUndashedUuidSnackbar:{id:"search.actionResult.copyAsUndashedUuidSnackbar",defaultMessage:"Copied as undashed UUID"},experiments:{id:"search.actionResult.experiments",defaultMessage:"Experiments"},experimentsCaption:{id:"search.actionResult.experimentsCaption",defaultMessage:"View and manage experiments."},inboxUpdateAlias:{defaultMessage:"updates",id:"search.actionResult.inbox.updates"},inboxNotificationAlias:{defaultMessage:"notifications",id:"search.actionResult.inbox.notifications"},templatesGalleryAlias:{defaultMessage:"gallery",id:"search.actionResult.templates.gallery"},experimentGateAlias:{defaultMessage:"gate",id:"search.actionResult.experiments.gate"},copyUniqueIdForPage:{defaultMessage:"Copy {idPropertyName} for {pageTitle}",id:"search.actionResult.copyUniqueId"},copyUniqueIdForPageCaption:{defaultMessage:"Copy unique identifier for page to clipboard",id:"search.actionResult.copyUniqueIdCaption"},copyUniqueIdSnackNotification:{defaultMessage:"Unique ID copied",id:"search.actionResult.copyUniqueIdSnackNotification"},copyUniqueIdAlias:{defaultMessage:"unique",id:"search.actionResult.copyUniqueIdAlias"},createMeetingNotes:{defaultMessage:"Create AI Meeting Notes",id:"search.actionResult.createMeetingNotes"},meetingNotesAlias:{defaultMessage:"meeting notes",id:"search.actionResult.meetingNotes.meetingNotes"},notesAlias:{defaultMessage:"notes",id:"search.actionResult.meetingNotes.notes"},recordAlias:{defaultMessage:"record",id:"search.actionResult.meetingNotes.record"},createMeetingNotesCaption:{defaultMessage:"Create a new meeting note",id:"search.actionResult.createMeetingNotesCaption"},micAlias:{defaultMessage:"microphone",id:"search.actionResult.meetingNotes.mic"},voiceAlias:{defaultMessage:"voice",id:"search.actionResult.meetingNotes.voice"},transcriptionAlias:{defaultMessage:"transcription",id:"search.actionResult.meetingNotes.transcription"},speechAlias:{defaultMessage:"speech",id:"search.actionResult.meetingNotes.speech"},dictationAlias:{defaultMessage:"dictation",id:"search.actionResult.meetingNotes.dictation"},audioAlias:{defaultMessage:"audio",id:"search.actionResult.meetingNotes.audio"},aiAlias:{defaultMessage:"ai",id:"search.actionResult.ai.ai"},meetingsTab:{defaultMessage:"AI Meeting Notes",id:"search.actionResult.meetingsTab"},meetingsAlias:{defaultMessage:"meetings",id:"search.actionResult.meetingsTab.meetings"},meetingsTabCaption:{defaultMessage:"View and manage your meetings",id:"search.actionResult.meetingsTabCaption"},libraryTab:{defaultMessage:"Library",id:"search.actionResult.libraryTab"},libraryAlias:{defaultMessage:"library",id:"search.actionResult.libraryTab.library"},libraryTabCaption:{defaultMessage:"View all the pages related to you",id:"search.actionResult.libraryTabCaption"}})},10896:(e,t,o)=>{o.d(t,{h:()=>v});o(296540);var n=()=>o(484714),a=()=>o(590526),i=()=>o(401497),s=()=>o(699143),r=()=>o(249046),l=()=>o(807449),c=()=>o(493552),d=()=>o(373009),p=()=>o(526278),u=()=>o(569397),m=()=>o(297813),g=()=>o(558687),f=()=>o(100622),h=o(474848);function v({icon:e,title:t,description:o,onClose:n,children:a,showImportIntoNotionIconSection:d,onStepback:v}){const S=(0,i().IS)((()=>({container:{display:"flex",flexDirection:"column",height:"100%",width:"100%",backgroundColor:f().Tj.background.primary,font:"SF Pro"},content:{flex:1,display:"flex",flexDirection:"column",gap:24,overflowY:"auto",marginTop:40},header:{display:"flex",flexDirection:"column",gap:4,alignItems:"center",padding:"0px 20px"}})),[]);return(0,h.jsxs)(s().Y1,{style:S.container,children:[v?(0,h.jsx)(x,{iconFn:p().arrowStraightLeftIcon,onClick:v}):null,(0,h.jsx)(y,{iconFn:m().xMarkFillIcon,onClick:n}),(0,h.jsxs)(r().Ye,{style:S.content,children:[(0,h.jsxs)(r().Ye,{style:S.header,children:[d?(0,h.jsxs)(r().Ye,{gap:12,alignItems:"center",style:{marginBottom:8},children:[(0,h.jsx)(l().I,{icon:e,size:"xl",colorVariant:"secondary"}),(0,h.jsx)(l().I,{icon:u().arrowStraightRightSmallIcon,size:"sm",colorVariant:"secondary"}),(0,h.jsx)(l().I,{icon:g().notionIcon,size:"xl"})]}):(0,h.jsx)(r().Ye,{gap:12,alignItems:"center",style:{marginBottom:8},children:(0,h.jsx)(l().I,{icon:e,size:"xl",colorVariant:"secondary"})}),(0,h.jsx)(c().D,{styleKey:"titleXlBold",colorVariant:"primary",children:t}),(0,h.jsx)("div",{style:{textAlign:"center"},children:(0,h.jsx)(c().D,{styleKey:"bodyRegular",colorVariant:"secondary",children:o})})]}),a]})]})}function y(e){const{iconFn:t,onClick:o}=e,{isPhone:s}=(0,n().Y0)(),r=(0,n().v3)(),c=(0,a().K8)((()=>r.WindowSizeStore.isLandscape()),[r.WindowSizeStore]),p=(0,i().IS)((()=>({button:{position:"absolute",top:s&&!c?56:10,insetInlineEnd:10,zIndex:1,padding:"5px",borderRadius:"100%",height:24}})),[s,c]);return(0,h.jsx)(d().E,{onClick:o,style:p.button,colorPalette:"gray",colorVariant:"secondary",children:(0,h.jsx)(l().I,{icon:t,size:s?"default":"xs",colorVariant:"secondary"})})}function x(e){const{iconFn:t,onClick:o}=e,{isPhone:s}=(0,n().Y0)(),r=(0,n().v3)(),c=(0,a().K8)((()=>r.WindowSizeStore.isLandscape()),[r.WindowSizeStore]),p=(0,i().IS)((()=>({button:{position:"absolute",top:s&&!c?56:10,insetInlineStart:10,zIndex:1,padding:"5px",borderRadius:"100%",height:24}})),[s,c]);return(0,h.jsx)(d().E,{onClick:o,style:p.button,colorPalette:"gray",colorVariant:"secondary",children:(0,h.jsx)(l().I,{icon:t,size:s?"default":"xs",colorVariant:"secondary"})})}},20179:(e,t,o)=>{o.r(t),o.d(t,{addSquareRoundedSmallIcon:()=>i,iconDefinition:()=>a});o(296540);var n=o(474848);const a={viewBox:"0 0 16 16",fittedViewBox:"2.37 2.37 11.25 11.25",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M8 5a.625.625 0 0 0-.625.625v1.75h-1.75a.625.625 0 1 0 0 1.25h1.75v1.75a.625.625 0 1 0 1.25 0v-1.75h1.75a.625.625 0 1 0 0-1.25h-1.75v-1.75A.625.625 0 0 0 8 5"}),(0,n.jsx)("path",{d:"M4.25 2.375c-1.036 0-1.875.84-1.875 1.875v7.5c0 1.036.84 1.875 1.875 1.875h7.5c1.036 0 1.875-.84 1.875-1.875v-7.5c0-1.036-.84-1.875-1.875-1.875zM3.625 4.25c0-.345.28-.625.625-.625h7.5c.345 0 .625.28.625.625v7.5c0 .345-.28.625-.625.625h-7.5a.625.625 0 0 1-.625-.625z"})]})},i=(0,o(340498).wt)("addSquareRoundedSmall",a,"small")},21899:(e,t,o)=>{o.d(t,{f:()=>i});o(898992),o(354520);var n=()=>o(272509),a=()=>o(310526);function i(e){const{currentUserRootStore:t,excludeGuestWithPrivatePages:o}=e;return t?t.getSpaceViewStores().filter((e=>e.getAlive()&&(0,n().I)(e.getSpaceStore())&&(!o||!(0,a().U)(e)))):[]}},31009:(e,t,o)=>{o.d(t,{HR:()=>_t,aD:()=>At,Ay:()=>ft});o(898992),o(672577),o(581454);var n=o(296540),a=()=>o(726637),i=()=>o(484714),s=()=>o(590526),r=()=>o(401497),l=()=>o(128933),c=()=>o(983610),d=()=>o(249046),p=()=>o(807449),u=()=>o(546926),m=()=>o(406094),g=()=>o(631524),f=()=>o(160432),h=()=>o(493552),v=()=>o(463438),y=()=>o(26697),x=()=>o(81068),S=()=>o(736847),I=()=>o(522419),b=()=>o(278238),j=o(474848);const A={viewBox:"0 0 16 16",fittedViewBox:"1.85 2.34 12.3 11.32",directional:!0,svg:(0,j.jsx)("path",{d:"M11.982 2.526a.625.625 0 0 0-.884.884l.915.915H10.93a3.83 3.83 0 0 0-3.27 1.837l-.386.635-.388-.637a3.83 3.83 0 0 0-3.268-1.837H2.48a.625.625 0 0 0 0 1.25h1.14c.9 0 1.733.469 2.2 1.237L6.543 8 5.82 9.19a2.58 2.58 0 0 1-2.2 1.237H2.48a.625.625 0 1 0 0 1.25h1.14A3.83 3.83 0 0 0 6.887 9.84l.388-.638.386.636a3.83 3.83 0 0 0 3.268 1.837h1.085l-.916.915a.625.625 0 1 0 .884.884l1.98-1.98a.625.625 0 0 0 0-.884l-1.98-1.98a.625.625 0 0 0-.884.884l.911.91h-1.08a2.58 2.58 0 0 1-2.2-1.236L8.006 8l.723-1.188a2.58 2.58 0 0 1 2.2-1.237h1.08l-.91.911a.625.625 0 1 0 .883.884l1.98-1.98a.625.625 0 0 0 0-.884z"})},w=(0,o(340498).wt)("arrowIntersectRightSmall",A,"small");var C=()=>o(344417),k=()=>o(848392),T=()=>o(423173),M=()=>o(283220),P=()=>o(84262),_=()=>o(69708),B=()=>o(100622),F=()=>o(496603),E=()=>o(901997),R=()=>o(559926),O=()=>o(896628),L=()=>o(892632),D=()=>o(251126),V=()=>o(736767),z=()=>o(500507),N=()=>o(419357);function U({render:e,threshold:t,onSwipeLeft:o,onSwipeRight:a,onSwipeDown:i,onSwipeUp:r}){const l=(0,n.useRef)(),c=(0,n.useRef)();return(0,s().K8)((()=>e({onTouchStart:e=>{l.current=e.touches[0].clientX,c.current=e.touches[0].clientY},onTouchMove:e=>{if(void 0===l.current)return;const n=t||120,s=l.current-e.touches[0].clientX;if(s>n&&o&&(o(),l.current=void 0),s<-1*n&&a&&(a(),l.current=void 0),void 0===c.current)return;const d=c.current-e.touches[0].clientY;d<-1*n&&i&&(i(),c.current=void 0),d>n&&r&&(r(),c.current=void 0)},onTouchEnd:()=>{l.current=void 0,c.current=void 0},onTouchCancel:()=>{l.current=void 0,c.current=void 0}})),[e,t,o,a,i,r])}var W=()=>o(320865),H=()=>o(327165),q=()=>o(235921),K=()=>o(210741),$=()=>o(907258);var Y=()=>o(937182),Z=()=>o(91867);class G extends(()=>o(757695))().Store{getInitialState(){return{allIcons:{},recentIcons:[],loadIconCount:0}}}const J=new G;var Q=()=>o(969141),X=()=>o(528093),ee=()=>o(134217),te=()=>o(988770),oe=()=>o(704658),ne=()=>o(474393),ae=()=>o(948033),ie=()=>o(393134),se=()=>o(536504),re=()=>o(751735);function le(e){const{tab:t}=e,[o,i]=(0,n.useState)(se().WJ),[s,l]=(0,n.useState)(se().i),[c,d]=(0,n.useState)(),[p,u]=(0,n.useState)(),m=(0,n.useMemo)((()=>{const e=c??o,t=p??s;return(0,se().Oy)({baseUrl:a().A.domainBaseUrl||"",shape:e,color:t})}),[o,s,c,p]);(0,n.useEffect)((()=>{if(t.agentIcon){const{shape:e,color:o}=(0,se().uX)(t.agentIcon);i(e),l(o)}}),[t.agentIcon]);const f=(0,r().IS)((()=>({container:{padding:20,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:20,height:"100%"},iconButton:{width:96,height:96,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%"},buttonGrid:{display:"grid",gridTemplateColumns:"repeat(9, 24px)",gap:12},shapeButton:{width:24,height:24,appearance:"none",border:"none",display:"flex",alignItems:"center",justifyContent:"center",color:B().Tj.icon.secondary,padding:0,background:"transparent",borderRadius:"50%",position:"relative"},increasedButtonHitTarget:{position:"absolute",inset:-6,background:"transparent"},shapeButtonHovered:{outline:`2px solid ${B().Tj.border.primaryTranslucent}`,outlineOffset:2,background:"transparent"},shapeButtonSelected:{outline:`2px solid ${B().Tj[s].border.primaryTranslucent}`,outlineOffset:2,color:(0,se().hI)(s),background:"transparent"},colorButton:{width:24,height:24,borderRadius:"50%",appearance:"none",border:"none",position:"relative"},colorButtonHovered:{outline:`2px solid ${B().Tj.border.primaryTranslucent}`,outlineOffset:2},colorButtonSelected:{outline:`2px solid ${(0,re().X4)((0,se().hI)(s),.3)}`,outlineOffset:2},separator:{width:"100%",height:1,backgroundColor:B().Tj.border.secondary}})),[s]),h=(0,n.useCallback)(((e,o)=>{const n=a().A.domainBaseUrl||"";i(e),l(o),t.onChange((0,se().Oy)({baseUrl:n,shape:e,color:o}),{keepVisible:!0})}),[t]),v=(0,n.useCallback)((e=>{d(e)}),[]),y=(0,n.useCallback)((()=>{d(void 0)}),[]),x=(0,n.useCallback)((e=>{u(e)}),[]),S=(0,n.useCallback)((()=>{u(void 0)}),[]);return(0,j.jsxs)("div",{style:f.container,children:[(0,j.jsx)(g().p,{style:f.iconButton,onClick:()=>h(o,s),children:(0,j.jsx)("img",{src:m,alt:`${p??s} ${c??o}`,width:96,height:96})}),(0,j.jsx)("div",{role:"separator",style:f.separator}),(0,j.jsx)("div",{style:f.buttonGrid,children:se().PF.map((e=>(0,j.jsxs)(g().p,{"aria-label":e,hoveredStyle:o===e?f.shapeButtonSelected:f.shapeButtonHovered,pressedStyle:o===e?f.shapeButtonSelected:f.shapeButtonHovered,style:{...f.shapeButton,...o===e&&f.shapeButtonSelected},onClick:()=>h(e,s),onMouseEnter:()=>v(e),onMouseLeave:y,children:[(0,j.jsx)("div",{style:f.increasedButtonHitTarget}),(0,j.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 1020 1020",fill:"currentColor",children:ce(e)})]},e)))}),(0,j.jsx)("div",{role:"separator",style:f.separator}),(0,j.jsx)("div",{style:f.buttonGrid,children:se().tR.map((e=>{const t=(0,se().hI)(e);return(0,j.jsx)(g().p,{"aria-label":e,hoveredStyle:{...s===e?f.colorButtonSelected:f.colorButtonHovered,background:t},pressedStyle:{...s===e?f.colorButtonSelected:f.colorButtonHovered,background:t},onClick:()=>h(o,e),onMouseEnter:()=>x(e),onMouseLeave:S,style:{...f.colorButton,...s===e&&f.colorButtonSelected,background:t},children:(0,j.jsx)("div",{style:f.increasedButtonHitTarget})},e)}))})]})}function ce(e){switch(e){case"triangle":return(0,j.jsx)("path",{d:"M769.398 106.766C780.333 100.443 793.801 100.309 804.874 106.449C816.121 112.687 823.187 124.451 823.41 137.31L835.982 864.884C836.204 877.743 829.548 889.745 818.523 896.367C807.497 902.989 793.777 903.226 782.529 896.989L146.144 544.09C134.896 537.852 127.831 526.088 127.609 513.228C127.387 500.369 134.041 488.367 145.067 481.745L768.879 107.071L769.398 106.766Z"});case"square":return(0,j.jsx)("path",{d:"M700.418 111.352C719.253 106.467 738.655 117.472 744.046 136.287L905.248 698.836C910.724 717.948 899.67 737.883 880.557 743.36L318.008 904.561C298.896 910.038 278.961 898.982 273.484 879.87L112.283 317.322C106.806 298.209 117.861 278.274 136.974 272.797L699.522 111.596L700.418 111.352Z"});case"chat":return(0,j.jsx)("path",{d:"M519.493 133.271C519.766 133.278 520.038 133.286 520.311 133.299C685.085 140.795 780.612 205.272 832.655 291.229C882.688 373.864 888.768 470.538 888.818 536.79C888.825 537.072 888.83 537.354 888.83 537.637C888.827 598.578 872.33 646.848 842.298 683.579C812.632 719.862 772.436 741.611 730.655 754.842C655.602 778.608 565.923 777.351 501.479 776.992L395.646 898.952C385.798 910.3 369.938 914.34 355.862 909.084C341.787 903.828 332.455 890.382 332.455 875.357V754.77C271.022 740.986 222.745 721.232 190.079 684.683C151.69 641.73 141.375 583.131 141.375 509.861C141.375 420.559 171.356 326.704 234.14 254.658C297.601 181.834 392.94 133.262 518.675 133.262L519.493 133.271Z"});case"check":return(0,j.jsx)("path",{d:"M468.711 600.914L396.779 495.019C385.607 478.572 363.218 474.296 346.771 485.468C330.325 496.64 326.049 519.028 337.22 535.475L443.057 691.285C450.181 701.772 462.295 707.738 474.95 706.994C487.605 706.25 498.937 698.904 504.782 687.655L743.923 227.402C750.117 215.48 762.434 208 775.868 208H789.144L790.067 208.012C799.583 208.255 808.63 212.261 815.213 219.172C822.007 226.306 825.581 235.913 825.101 245.753L799.134 778.541C798.199 797.719 782.377 812.788 763.177 812.788H230.843C220.992 812.788 211.57 808.751 204.775 801.617C197.981 794.483 194.407 784.876 194.886 775.036L220.854 242.247L220.909 241.352C222.284 222.602 237.911 208.001 256.811 208H646.52C658.523 208 666.252 220.726 660.718 231.377L468.711 600.914Z"});case"hat":return(0,j.jsx)("path",{d:"M545.576 127.394C552.866 114.38 567.457 107.186 582.262 109.381C597.302 111.611 609.32 123.05 612.289 137.962L694.202 549.355C717.555 550.212 748.479 552.253 775.634 560.048C796.917 566.157 819.769 576.607 837.766 595.458C856.464 615.044 867.315 640.983 868.456 672.703C869.877 712.188 850.771 742.983 825.002 765.135C800.014 786.616 767.217 801.585 734.562 812.241C668.991 833.639 592.877 841.146 547.656 841.906C501.52 842.681 410.552 834.844 328.263 812.971C287.162 802.047 245.963 787.044 213.179 766.398C180.916 746.081 151.066 716.529 144.759 674.869C140.325 645.581 143.68 618.576 156.4 595.648C169.131 572.702 189.111 557.684 210.875 548.498C245.002 534.093 286.797 532.491 326.446 537.26L545.233 128.018L545.576 127.394Z"});case"globe":return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("path",{d:"M234.479 101.544C248.538 87.4853 271.333 87.4854 285.392 101.544C299.45 115.603 299.45 138.397 285.392 152.456C147.537 290.311 147.537 513.819 285.392 651.674C423.247 789.529 646.754 789.529 784.609 651.674C798.668 637.615 821.462 637.615 835.521 651.674C849.579 665.733 849.579 688.526 835.521 702.585C761.699 776.407 667.476 817.393 571 825.545V876.929H678.304C698.186 876.929 714.304 893.047 714.304 912.929C714.304 932.811 698.186 948.929 678.304 948.929H538.121C537.092 949.017 536.052 949.065 535 949.065C533.948 949.065 532.908 949.017 531.879 948.929H391.918C372.036 948.929 355.918 932.811 355.918 912.929C355.918 893.047 372.036 876.929 391.918 876.929H499V825.545C402.524 817.393 308.301 776.407 234.479 702.585C68.5069 536.612 68.5068 267.517 234.479 101.544Z"}),(0,j.jsx)("path",{d:"M535 110.065C696.267 110.065 827 240.798 827 402.065C827 563.332 696.267 694.065 535 694.065C373.733 694.065 243 563.332 243 402.065C243 240.797 373.733 110.065 535 110.065Z"})]});case"plug":return(0,j.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M646.088 109C677.257 109 701.723 134.329 700.609 165.471L693.771 357.176H826.411L827.326 357.188C836.763 357.428 845.744 361.368 852.316 368.179C859.1 375.209 862.736 384.696 862.388 394.46L857.157 541.158C855.174 596.706 819.67 627.812 786.416 647.364C770.167 656.917 752.344 664.976 737.566 671.887C721.867 679.229 709.26 685.424 699.227 692.225C677.171 707.177 664.302 717.394 655.457 730.718C647.115 743.283 640.189 762.136 638.923 797.607L636.113 876.312C635.421 895.682 619.517 911.028 600.135 911.028H387.604C377.834 911.028 368.483 907.056 361.699 900.025C354.914 892.994 351.279 883.507 351.627 873.743L354.438 795.039C355.708 759.447 350.066 741.032 343.027 729.152C335.548 716.53 323.992 706.7 303.004 691.75L302.126 691.131C292.967 684.751 281.306 678.811 266.575 671.685C252.358 664.807 234.94 656.673 219.207 647.018C203.293 637.252 186.459 624.414 173.885 606.417C160.783 587.664 153.563 565.093 154.508 538.592L159.739 391.894L159.783 390.989C160.928 372.048 176.636 357.176 195.716 357.176H330.919L337.778 164.899C338.884 133.982 364.798 109 395.745 109C426.914 109 451.379 134.329 450.265 165.471L443.427 357.176H581.263L588.122 164.899C589.228 133.982 615.142 109 646.088 109ZM442.133 159.414C442.124 159.308 442.117 159.201 442.107 159.095L442.102 159.048C442.113 159.17 442.123 159.292 442.133 159.414Z"});case"apple":return(0,j.jsx)("path",{d:"M623.016 70.9998C667.836 70.9248 716.816 86.2103 750.704 120.77C757.663 127.867 761.379 137.527 760.969 147.458C760.56 157.389 756.062 166.709 748.543 173.21C714.656 202.504 669.51 216.694 626.218 216.995C601.96 217.163 576.99 212.962 553.871 203.66L537.313 287.297C558.378 277.754 583.878 270.252 611.481 271.059L611.48 271.06C668.571 272.728 712.292 291.902 741.759 310.825C756.452 320.261 767.659 329.664 775.349 336.893C779.202 340.515 782.198 343.616 784.333 345.936C785.401 347.097 786.256 348.067 786.898 348.811C787.114 349.062 787.305 349.288 787.472 349.487L788.311 350.458C788.98 351.242 789.864 352.3 790.926 353.621C793.047 356.26 795.893 359.965 799.159 364.645C805.665 373.968 813.988 387.37 821.563 404.093C836.661 437.421 849.501 485.645 836.889 541.056C827.993 580.141 806.44 643.586 785.549 699.576C774.984 727.888 764.352 754.923 755.201 776.841C746.448 797.804 738.063 816.513 732.128 826.386C710.887 861.713 670.786 901.293 608.057 908.327C563.544 913.318 527.479 896.274 504.085 879.979C500.717 877.634 497.559 875.268 494.619 872.936C491.24 875.72 487.583 878.571 483.663 881.399C460.67 897.988 424.21 917.103 380.788 912.233C316.348 905.006 276.85 859.607 256.876 826.386C250.94 816.513 242.556 797.802 233.803 776.839C224.653 774.921 214.022 747.887 203.459 719.575C182.568 663.584 161.017 600.143 152.116 561.061L152.114 561.056C139.503 505.645 152.342 457.421 167.44 424.093C175.016 407.37 183.339 393.968 189.844 384.645C193.11 379.966 195.957 376.26 198.078 373.621C199.139 372.3 200.023 371.242 200.692 370.458C200.998 370.1 201.259 369.798 201.471 369.555C201.652 369.34 201.862 369.092 202.102 368.813C202.744 368.069 203.6 367.1 204.668 365.939C206.803 363.619 209.799 360.517 213.651 356.895C221.341 349.665 232.548 340.261 247.241 330.825C276.707 311.901 320.427 292.728 377.522 291.06C410.516 290.095 440.123 300.991 462.762 313.124L492.184 144.509C492.539 142.719 493.021 140.987 493.618 139.32C494.657 133.776 497.012 128.406 500.721 123.697C530.121 86.3792 578.661 71.0741 623.016 70.9998Z"});case"bulb":return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("path",{d:"M602.444 816.46C592.561 862.564 551.827 895.5 504.677 895.5C464.547 895.5 414.834 895.5 368.449 895.5C323.85 895.5 291.213 853.479 302.23 810.263L302.23 810.263C303.994 803.343 310.227 798.5 317.369 798.5H591.449C599.089 798.5 604.784 805.545 603.182 813.015L602.444 816.46Z"}),(0,j.jsx)("path",{d:"M535.11 145.015C619.554 144.253 707.417 170.85 771.57 220.822C836.634 271.504 878.69 347.972 862.605 442.072C855.528 485.601 841.532 517.345 821.912 543.153C803.014 568.013 779.904 585.779 759.603 601.667L759.602 601.666C721.617 631.395 682.213 647.002 661.575 658.191C650.275 664.318 643.273 669.409 638.322 674.982C633.767 680.109 629.535 687.241 626.699 699.553C625.192 706.099 623.54 713.617 621.802 721.765C620.22 729.178 613.687 734.5 606.107 734.5H333.223C325.616 734.5 319.947 727.515 321.268 720.023C324.575 701.263 326.715 681.747 325.78 663.085C325.069 648.9 321.738 644.004 317.822 640.708C310.039 634.158 262.144 603.61 227.902 563.12C190.913 519.382 160.755 456.175 179.929 373.387C201.425 280.541 257.914 222.563 325.832 188.702C392.328 155.55 469.218 145.611 535.11 145.015Z"})]});case"file":return(0,j.jsx)("path",{d:"M337.613 194C365.958 194 390.282 201.976 406.764 221.675C422.718 240.743 423.984 265.342 429.022 288.568H776.371C816.833 288.568 847.894 302.035 867.997 326.272C887.038 349.23 892 376.791 892 397.602C892 414.422 887.992 508.792 884.083 597.216C881.513 655.363 878.886 713.508 876.197 771.649V771.653C875.308 790.868 859.472 805.99 840.236 805.99H165.739C165.257 806 164.773 806.003 164.286 805.993C144.686 805.604 129 789.604 129 770V769.99C129 769.518 129.501 768.573 129.028 768.573L150.449 228.573C151.215 209.261 167.094 194 186.421 194H337.613Z"});case"ghost":return(0,j.jsx)("path",{d:"M155.626 602.783C213.044 682.296 244.467 553.003 248.426 602.783C257.601 718.161 304.552 790.404 368.696 705.413C410.317 650.264 368.746 878.704 500.191 860.962C595.236 848.133 597.038 685.532 638.532 723.052C767.991 840.115 748.688 573.654 795.253 636.458C846.377 705.413 929.663 583.508 941.326 459.609C947.416 394.913 918.731 339.544 769.596 370.261C683.055 388.085 730.705 139.87 562.731 121.701C433.284 107.698 406.752 260.123 352.646 326.682C298.616 393.146 187.823 285.269 146.131 370.261C104.439 455.251 129.295 566.318 155.626 602.783Z"});case"mailbox":return(0,j.jsx)("path",{d:"M494.208 69C499.373 69 504.289 71.2187 507.706 75.0918C511.123 78.9651 512.712 84.1204 512.067 89.2451L500.57 180.725C499.439 189.727 491.784 196.48 482.711 196.48H379.131L375.469 273.96H744.281C774.977 273.96 813.112 287.033 843.588 317.277C874.925 348.377 896.271 395.627 896.272 460.479C896.272 551.445 896.272 460.479 888.084 733.135C887.097 752.271 871.293 767.28 852.132 767.28H609.793V907.471C609.793 927.353 593.675 943.471 573.793 943.471H473.113C453.231 943.471 437.114 927.353 437.113 907.471V767.28H159.711C149.537 767.28 139.838 762.974 133.013 755.429C126.188 747.883 122.874 737.802 123.892 727.679C123.932 727.683 152.182 473.427 158.405 444.659C164.678 415.66 178.048 375.679 199.87 341.964C220.563 309.994 254.372 275.714 303.318 274.025C306.906 217.712 310.784 141.823 315.136 85.6104L315.176 85.1729C316.107 76.0123 323.827 69.0002 333.082 69H494.208Z"});case"rock":return(0,j.jsx)("path",{d:"M660.706 168.198C679.184 168.198 696.525 177.129 707.256 192.173L904.892 469.252C914.397 482.577 917.736 499.338 914.062 515.289L851.302 787.778C845.323 813.733 822.216 832.122 795.582 832.122H265.072C243.928 832.122 224.511 820.453 214.586 801.784L110.289 605.594C102.532 591.002 101.466 573.766 107.37 558.329L242.523 204.95L242.61 204.727L242.846 204.128L242.928 203.922C251.653 182.363 272.601 168.198 295.929 168.198H660.706Z"});case"sign":return(0,j.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M538.859 102.999C548.94 102.999 558.559 107.227 565.377 114.652C572.195 122.078 575.587 132.023 574.728 142.067L568.494 214.957H713.61C722.451 214.957 730.984 218.211 737.58 224.099L923.58 390.099C931.482 397.151 935.878 407.325 935.597 417.912C935.316 428.499 930.387 438.426 922.122 445.049L708.122 616.549C701.735 621.667 693.795 624.457 685.61 624.457H533.479L510.728 890.524C509.135 909.15 493.552 923.458 474.859 923.458H388.359C378.278 923.458 368.658 919.23 361.84 911.805C355.023 904.379 351.631 894.435 352.49 884.391L374.716 624.457H200.61C190.545 624.457 180.939 620.243 174.122 612.838C167.306 605.432 163.901 595.511 164.733 585.48L192.733 247.98L192.816 247.109C194.769 228.871 210.174 214.957 228.61 214.957H409.732L416.49 135.933L416.575 135.063C418.57 116.864 433.957 102.999 452.359 102.999H538.859Z"});case"book":return(0,j.jsx)("path",{d:"M155.936 241.898C157.178 225.525 168.461 211.462 184.385 207.453C396.964 153.936 471.229 258.474 510.572 323.289C547.309 259.936 646.798 156.773 848.993 207.527C864.681 211.465 875.8 225.267 877.21 241.38L918.57 714C920.215 732.8 908.365 750.149 890.254 755.455L521.959 863.353C514.53 865.529 506.627 865.481 499.226 863.214L147.961 755.607C130.256 750.183 118.673 733.214 120.073 714.749L155.936 241.898Z"});case"alarm":return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("path",{d:"M503.988 261.705C685.331 261.705 832.339 408.712 832.339 590.054C832.339 771.397 685.331 918.405 503.988 918.405C322.646 918.405 175.639 771.397 175.639 590.054C175.639 408.712 322.646 261.705 503.988 261.705Z"}),(0,j.jsx)("path",{d:"M645.24 175.03C689.396 137.837 754.54 132.889 804.572 167.008C854.604 201.128 873.783 263.58 855.282 318.268C848.91 337.102 825.932 341.305 809.506 330.103L650.936 221.966C634.511 210.764 630.034 187.838 645.24 175.03Z"}),(0,j.jsx)("path",{d:"M236.286 144.983C288.732 114.703 353.322 124.514 394.571 164.907C408.777 178.817 402.596 201.344 385.378 211.286L219.16 307.251C201.942 317.193 179.343 311.282 174.398 292.024C160.042 236.105 183.84 175.262 236.286 144.983Z"})]});case"puzzle":return(0,j.jsx)("path",{d:"M841.889 338.063C801.785 342.687 770.329 377.999 739.114 393.103L717.31 202.68C714.821 180.94 695.171 165.339 673.432 167.845L577.599 178.893C564.431 180.411 555.209 192.375 554.493 205.61C550.847 273.069 499.065 330.069 429.716 338.064C360.366 346.058 296.973 302.335 278.073 237.476C274.365 224.75 262.663 215.198 249.495 216.716L153.429 227.79C131.781 230.286 116.218 249.802 118.601 271.462L178.959 819.881C181.36 841.699 201.051 857.402 222.857 854.888L742.442 794.991C764.185 792.485 779.772 772.814 777.241 751.074L759.253 596.506C795.503 596.506 834.114 623.207 874.227 618.582C951.665 609.656 1004.52 539.933 995.595 462.468C986.664 385.003 919.327 329.137 841.889 338.063Z"});case"unbrella":return(0,j.jsx)("path",{d:"M517.241 96.1883C519.899 69.8123 543.434 50.5847 569.81 53.242C596.186 55.8993 615.414 79.4353 612.757 105.811C611.656 116.737 610.143 130.765 608.297 147.291C813.616 195.378 890.768 400.318 910.933 522.923C914.596 545.19 895.154 563.451 872.748 560.764C740.235 544.873 648.47 533.971 563.006 523.741C548.327 641.733 534.982 746.3 530.037 781.65C522.777 833.545 499.836 874.327 466.278 900.905C433.153 927.141 392.571 937.172 354.459 932.827C316.448 928.494 279.515 909.652 254.667 876.7C229.318 843.083 219.517 798.786 228.838 749.568C233.771 723.522 258.884 706.405 284.931 711.338C310.977 716.27 328.093 741.385 323.161 767.431C318.231 793.463 324.231 809.503 331.317 818.901C338.905 828.964 351.045 835.815 365.332 837.444C379.519 839.061 394.462 835.322 406.675 825.649C418.455 816.319 430.668 799.052 434.963 768.349C439.852 733.399 453.103 629.543 467.691 512.285C382.213 501.962 290.134 490.693 157.134 474.167C134.313 471.331 119.766 448.075 128.938 426.987C186.588 294.45 307.137 138.458 512.859 136.944C514.676 120.687 516.162 106.903 517.241 96.1883Z"})}}var de=()=>o(718827),pe=()=>o(738471),ue=()=>o(360083);function me({pageCover:e,tab:t}){const o=(0,_().tz)(),{coverUrl:a,title:i,subtitle:s,position:l}=e,c=(0,r().IS)((()=>({container:{width:"25%",padding:3},tooltip:{maxWidth:180,whiteSpace:"normal"},title:{color:B().Tj.text.inversePrimary},subtitle:{color:B().Tj.text.inverseSecondary},buttonHover:{opacity:.85},imageBox:{width:"100%",height:64,objectFit:"cover",objectPosition:`center ${100*(l||0)}%`,borderRadius:4}})),[l]),d=(0,n.useCallback)((()=>{t.onChange({url:a,position:l})}),[t,a,l]);return(0,j.jsx)("div",{style:c.container,children:(0,j.jsx)(y().m,{originGap:0,placement:"bottom",delayThreshold:600,renderTooltip:()=>(0,j.jsxs)("div",{style:c.tooltip,children:[(0,j.jsx)("span",{style:c.title,children:o.formatMessage(i)})," ",(0,j.jsx)("span",{style:c.subtitle,children:s?o.formatMessage(s):void 0})]}),render:e=>(0,j.jsx)(de().Ay,{hoveredStyle:c.buttonHover,ariaLabel:o.formatMessage(i),...e,onClick:d,children:(0,j.jsx)(ue().A,{url:a,width:200,isAuthenticated:!1,render:(e,t)=>t&&(0,j.jsx)(pe().A,{src:t,style:c.imageBox})})})})})}const ge=function({tab:e}){const t=(0,_().tz)(),[a,i]=(0,n.useState)({}),[s,l]=(0,n.useState)(!1);(0,n.useEffect)((()=>{(async()=>{l(!0),await o(748539).f.load().then((e=>{i(e),l(!1)}))})()}),[]);const c=(0,ae().b0)(),d=(0,r().IS)((()=>({container:{paddingBottom:8},groupTitle:{marginInlineStart:-5},loader:{height:300}})),[]);return s?(0,j.jsx)("div",{style:d.loader,children:(0,j.jsx)(o(555267).A,{})}):(0,j.jsx)("div",{style:d.container,children:Object.keys(a).map((n=>{const i=a[n];return(0,j.jsx)(S().A,{title:(0,j.jsx)(o(552712).N,{style:d.groupTitle,href:i.url,external:!0,children:(0,j.jsx)(g().p,{colorPalette:"gray",size:"xs",children:t.formatMessage(i.title)})}),noTextOverflow:!0,children:(0,j.jsx)("div",{style:c.galleryWrap,children:i.items.map(((t,o)=>(0,j.jsx)(me,{pageCover:t,tab:e},o)))})},n)}))})};var fe=()=>o(79926);const he=new(fe().O2)("GenerateMediaTab",(async()=>await Promise.all([o.e(44711),o.e(53321),o.e(93134),o.e(89431)]).then(o.bind(o,375506)))),ve=(0,fe()._h)(he,(e=>e.GenerateMediaTabComponent));var ye=()=>o(416783),xe=()=>o(98126),Se=()=>o(302501),Ie=()=>o(769864),be=()=>o(361330);const je=(0,_().YK)({giphyPlaceholder:{id:"mediaPicker.giphyPlaceholder.text",defaultMessage:"Search GIPHY"}});function Ae(e){const{tab:t,results:o,ready:a,isSmallWidth:i,giphyRandomId:s}=e,l=(0,r().IS)((()=>({loading:(0,ae().$n)(),captionMenuItem:{textAlign:i?"start":"center",color:B().Tj.text.secondary}})),[i]);return a?!o||o&&!o.length?(0,j.jsx)(V().A,{shouldWrapCaption:!0,caption:(0,j.jsx)(_().sA,{defaultMessage:"No results found",id:"mediaPicker.giphy.noResultsText"}),style:l.captionMenuItem}):(0,j.jsxs)(n.Fragment,{children:[o.map(((e,o)=>(0,j.jsx)(we,{tab:t,image:e,giphyRandomId:s},o))),(0,j.jsx)(V().A,{shouldWrapCaption:!0,caption:(0,j.jsx)(_().sA,{defaultMessage:"Search to find more results.",id:"mediaPicker.giphy.searchText"}),style:l.captionMenuItem})]}):(0,j.jsx)("div",{style:l.loading,children:(0,j.jsx)(xe().k,{})})}function we({tab:e,image:t,giphyRandomId:o}){var s;const l=(0,i().v3)(),c=(0,r().IS)((()=>({container:{width:a().A.isMobile?"33%":"25%",padding:3},hoveredButton:{opacity:.85},imageBox:{width:"100%",height:64,objectFit:"cover",objectPosition:"center 0%",borderRadius:4},label:{marginTop:2,marginBottom:4}})),[]),d=(0,n.useCallback)((async()=>{var n;if(e.onChange({url:t.imageUrl}),null!==(n=t.analytics)&&void 0!==n&&n.onclick)try{var a;await Ie().callApi({eventName:"postGiphyAnalytics",environment:l,data:{url:null===(a=t.analytics)||void 0===a?void 0:a.onclick.url,timestamp:Date.now(),random_id:o}})}catch(i){}}),[l,o,t.imageUrl,e,null===(s=t.analytics)||void 0===s?void 0:s.onclick]);return(0,j.jsxs)("div",{style:c.container,children:[(0,j.jsx)(de().Ay,{hoveredStyle:c.hoveredButton,onClick:d,children:(0,j.jsx)(pe().A,{src:t.thumbUrl,style:c.imageBox})}),(0,j.jsx)(Se().A,{isSmall:!0,isSecondaryColor:!0,style:c.label,children:(0,j.jsx)(_().sA,{defaultMessage:"by <inlinetextlink>{authorName}</inlinetextlink>",id:"mediaPicker.giphy.byAuthor",values:{authorName:t.authorName||"GIPHY",inlinetextlink:e=>(0,j.jsx)(ye().V,{external:!0,href:t.imageUrl,children:e})}})})]},t.id)}const Ce=function({tab:e,isSmallWidth:t}){const o=(0,_().tz)(),[s,r]=(0,n.useState)(""),[l,c]=(0,n.useState)(""),d=(0,i().v3)(),p=(0,ae().b0)(),u=(0,n.useCallback)((async()=>{if(!F().Im(s))return s;const e=await Ie().callApi({eventName:"getGiphyRandomId",environment:d,data:{}});return"success"===e.type?(r(e.data.random_id),e.data.random_id):void 0}),[d,s]);return(0,j.jsxs)("div",{style:{paddingBottom:8},children:[(0,j.jsx)(S().A,{desktopStyle:{marginTop:8,marginBottom:6},children:(0,j.jsx)(N().Ay,{value:l,placeholder:o.formatMessage(je.giphyPlaceholder),showClearButton:!0,focus:!a().A.isMobile||void 0,onChange:e=>c(e.target.value)})}),(0,j.jsx)("div",{style:p.galleryWrap,children:(0,j.jsx)(D().A,{request:l,debounce:be().tu,performRequest:async e=>{await u();const t=await Ie().callApi({eventName:"searchGiphyImages",environment:d,data:{query:e,page:0}});if("success"===t.type)return t.data.results;throw t.error},render:(o,n,a)=>(0,j.jsx)(Ae,{tab:e,results:n,ready:a,isSmallWidth:t,giphyRandomId:s})})})]})};o(944114),o(354520);var ke=()=>o(852507),Te=()=>o(247584),Me=()=>o(498521),Pe=()=>o(663639),_e=()=>o(452004),Be=()=>o(148307),Fe=()=>o(634201),Ee=()=>o(187174),Re=()=>o(994310),Oe=()=>o(806080),Le=()=>o(284371),De=()=>o(486666),Ve=()=>o(782482),ze=()=>o(383036),Ne=()=>o(250910),Ue=()=>o(118307),We=()=>o(85229);const He=(0,n.forwardRef)((function(e,t){const{shouldOpenVariations:o,icon:n,focused:a,color:i,onClick:r,onMouseEnter:l,variations:c,hideTooltip:d,insertIcon:p,id:u,role:m}=e,g=(0,s().uB)(void 0,Ue().A);return o?(0,j.jsx)(Ye,{ref:t,id:u,icon:n,focused:a,color:i,onClick:r,onMouseEnter:l,variations:c,hideTooltip:d,insertIcon:p,buttonPopupStore:g,role:m}):(0,j.jsx)(Ke,{ref:t,id:u,icon:n,focused:a,color:i,onClick:r,onMouseEnter:l,variations:c,hideTooltip:d,role:m})})),qe=He,Ke=(0,n.forwardRef)((function(e,t){const{events:o,icon:i,focused:s,color:l,onClick:c,onMouseEnter:d,variations:p,hideTooltip:u,id:m,role:g}=e,f=(0,r().eP)(),{isMenuListFocusVisible:h}=(0,n.useContext)(We().V),v=s&&h,x=(0,r().IS)((()=>({iconButton:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,...a().A.isMobile?{width:De().UA,height:De().UA,fontSize:De().ru}:{width:De().Sq,height:De().Sq,fontSize:De().Zl},...v&&{boxShadow:B().Tj.buttonBlueFocusRing}},iconImage:{...a().A.isMobile?{width:De().ru,height:De().ru}:{width:De().Zl,height:De().Zl}}})),[v]),S=(p.tooltip?p.tooltip:i).replaceAll("-"," ").replaceAll("_"," "),I=`${S} ${l}`,b="dark"===f?p.dark:p.light;return(0,j.jsx)(y().m,{forceVisibleState:!!v||void 0,placement:v?"bottom":void 0,allowHover:Boolean(i&&!u),disableTooltip:u,renderTooltip:()=>S,closeDelay:0,render:e=>(0,j.jsx)(de().Ay,{ref:t,ariaLabel:I,id:m,role:g,focused:s,onClick:c,...(0,ze().A)(o||{},(0,ze().A)({onMouseEnter:d},e)),ignoreLocalHoverState:!0,style:x.iconButton,disallowTabbing:!0,children:(0,j.jsx)("img",{alt:I,src:`data:image/svg+xml;utf8,${encodeURIComponent(b[l])}`,style:x.iconImage,onContextMenu:e=>e.preventDefault()})},i)})}));function $e(e){const{parent:t,icon:n,variations:a,insertIcon:i}=e,s=(0,r().eP)(),l=(0,r().IS)((()=>({variationMenu:{display:"flex",padding:2,gap:1}})),[]),c="dark"===s?a.light:a.dark,d=Object.keys(c).sort(((e,t)=>b().v3.indexOf(e)-b().v3.indexOf(t))).map((o=>{const s=`${n}_${o}`;return{key:s,action:e=>{t.close(),i(`/icons/${s}.svg`)},render:t=>(0,j.jsx)(He,{...e,...t,icon:s,color:o,variations:a,shouldOpenVariations:!1,hideTooltip:!0})}}));return(0,j.jsx)(o(717137).A,{debugName:"IconPickerMenuItem",capture:!0,allowEsc:!0,children:(0,j.jsx)(Pe().A,{type:Pe().O.Grid,getItemsPerRowForSection:()=>5,initialFocus:0,sections:[{key:"variations",render:e=>(0,j.jsx)("div",{...e}),items:d}],renderRow:(e,t)=>(0,j.jsx)("div",{role:"row",style:l.variationMenu,children:e},t)})})}const Ye=(0,n.forwardRef)((function(e,t){const{icon:o,focused:a,color:i,onClick:s,onMouseEnter:r,variations:l,hideTooltip:c,insertIcon:d,buttonPopupStore:p,id:u,role:m}=e,g=(0,n.useCallback)((()=>function(e){e.setState({...e.state,open:!1})}(p)),[p]),f=(0,n.useCallback)((e=>function(e,t){e.preventDefault(),t.setState({...t.state,open:!0})}(e,p)),[p]),{isMenuListFocusVisible:h}=(0,n.useContext)(We().V);return(0,j.jsx)(Ve().N,{debugName:"IconPickerMenuItem",capture:a&&h,onEnter:f,children:(0,j.jsx)(Ne().A,{buttonPopupStore:p,popupType:Ne().z.Popup,renderOrigin:e=>(0,j.jsx)(Ke,{ref:t,id:u,icon:o,focused:a,color:i,onClick:s,onMouseEnter:r,variations:l,hideTooltip:c,events:e,role:m}),render:e=>(0,j.jsx)(Ve().N,{debugName:"IconPickerMenuItem.VariationMenuComponent",capture:a,onEsc:g,children:(0,j.jsx)($e,{parent:e,icon:o,variations:l,insertIcon:d})})})},o)})),Ze={display:"flex",flexDirection:"column"},Ge="recentIcons",Je=100,Qe=(0,_().YK)({noResults:{defaultMessage:"No results",id:"iconPicker.noResults.message"}});function Xe(e){const t=(0,_().tz)(),{filter:o,enforceIconColor:r,onSubmit:l,menuRef:c,iconLoggingData:d,comboboxProps:p}=e,m=(0,i().v3)(),{isDesktop:g}=(0,i().Y0)(),[f,h]=(0,n.useState)(!0),[v,y]=(0,n.useState)(void 0),{loadIconCount:x,recentIcons:I}=(0,s().O$)(J),b=(0,s().uB)(void 0,_e().$),A=(0,s().K8)((()=>{var e;return null===(e=$().default.state)||void 0===e||null===(e=e.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.icon_picker_color}),[]),w=(0,u().Tf)(),C=(0,s().K8)((()=>Math.floor((0,ae().so)(m,c,w))),[m,c,w]),k=(0,s().K8)((()=>(0,ae().uu)()),[]);(0,ke().l)((()=>{const e=Re().A.get(Ge);J.update((t=>({...t,recentIcons:e||[]})))}));const[T]=(0,Ee().Yb)((async()=>{try{const e=await async function(e,t){if(!F().Im(t.allIcons))return t.allIcons;const o=await(0,Te().httpRequest)({url:e,method:"GET",format:"json",mode:"cors"});if("success"===o.type)return J.setState({...t,allIcons:o.data}),o.data;throw o.error}(Be().A.icons.noticonsGeneratedJson,J.state);y(e),h(!1)}catch(e){throw e}}),[]),M=(0,n.useMemo)((()=>Fe().f7(e.filter)??""),[e.filter]),P=(0,n.useCallback)((e=>{const t=function(e){return e.replace("_dark","")}(e);l(t);const o=t.split(/[/_.]/),n=o[2],a=o[3];!function(e,t){const o=Re().A.get(Ge),n=F().KC([e],o),a=F().s(n,t);Re().A.set(Ge,a),J.update((e=>({...e,recentIcons:a})))}(n,De().Te*k),d&&E().aU(m,"pick_colored_icon",{icon:n,color:a,...d})}),[m,l,d,k]),B=(0,n.useCallback)(((e,t)=>{const o=r??A??"gray",n=`/icons/${`${e}_${o}`}.svg`;return{key:n,action:()=>P(n),render:n=>(0,j.jsx)(qe,{...n,icon:e,color:o??"gray",variations:t,insertIcon:P,shouldOpenVariations:!r&&!A})}}),[r,P,A]),R=(0,n.useCallback)((e=>{if(!e)return[];const t=function(e,t){const o=F().oE(Object.keys(e).map((o=>{const n=e[o],a=((null==n?void 0:n.tooltip)??o).replace("-"," "),i=[a,...n.tags],s=i.findIndex((e=>e===t));if(-1!==s)return[0===s?100:50,o];const r=i.findIndex((e=>e.startsWith(t))),l=a.includes(t);return 0!==r&&l?[40,o]:-1!==r?[0===r?80:30,o]:void 0})));return F().Ul(o,(e=>-e[0])).map((e=>e[1]))}(e,o.toLowerCase());return 0===t.length?[]:[{key:"search-results",items:t.map((t=>B(t,e[t]))),render:e=>(0,j.jsx)(S().A,{children:(0,j.jsx)("div",{style:(0,ae().ze)(m,w),children:e.children})},e.key)}]}),[o,B,m,w]),O=(0,n.useCallback)(((e,t)=>{if(!t)return;let o=[];return o="recent"===e.id?I||[]:Object.keys(t),0!==o.length?{key:e.id,items:o.map((e=>{if(void 0!==t[e])return B(e,t[e])})).filter(Boolean),render:t=>(0,j.jsx)(S().A,{title:e.title,children:(0,j.jsx)("div",{style:(0,ae().ze)(m,w),children:t.children})},t.key)}:void 0}),[I,B,m,w]),L=(0,n.useCallback)((e=>{const t=F().oE(function(e){return F().oE([!e&&{id:"recent",title:(0,j.jsx)(_().sA,{id:"iconPicker.section.recent",defaultMessage:"Recent"})},!e&&{id:"icons",title:(0,j.jsx)(_().sA,{id:"iconPicker.section.icons",defaultMessage:"Icons"})}])}(o).map((t=>O(t,e))));return o&&M?R(e):t}),[o,M,O,R]),D=(0,n.useCallback)((e=>{const t=L(e);let o=0;for(const n of t)o+=n.items.length;return o}),[L]),z=(0,n.useCallback)((e=>{let t=x;0===x&&(t+=C*k);const o=[],n=L(e);let a=0;for(const i of n){if(!(a+i.items.length<=t)){o.push({...i,items:i.items.slice(0,t-a)});break}o.push(i),a+=i.items.length}return o}),[L,x,C,k]),N=(0,n.useMemo)((()=>({type:Pe().O.Grid,getItemsPerRowForSection:()=>C,renderRow:(e,t)=>(0,j.jsx)("div",{role:"row",style:{display:"flex"},children:e},t)})),[C]),U=(0,n.useCallback)((e=>{if(Math.abs(e)<Je){const{loadIconCount:e,allIcons:t}=J.state,o=C*k,n=Math.max(o,D(t));J.setState({...J.state,loadIconCount:Math.min(n,e+o)})}}),[k,C,D]),W=(0,n.useMemo)((()=>{const e=z(v),o=g&&e.length>0?0:void 0;return"resolved"===T.status&&0===e.length&&e.push({key:"no results",items:[{key:"no results",action:Oe().lQ,render:e=>(0,j.jsx)(V().A,{...e,style:{fontWeight:Le().Wy.medium,marginBottom:2,marginInlineStart:2,height:20,boxSizing:"content-box"},caption:t.formatMessage(Qe.noResults)})}],render:e=>(0,j.jsx)(S().A,{...e})}),(0,j.jsxs)("div",{style:Ze,children:[(0,j.jsx)("div",{style:{flexGrow:1},children:(0,j.jsx)(Pe().A,{...N,store:b,initialFocus:o,sections:e,disableKeyboardArrowWrap:!0,unfocusOnScroll:a().A.isMobile,comboboxProps:p})}),(0,j.jsx)(Me().A,{onChange:U})]})}),[z,v,g,N,b,U,T.status,p,t]);return(0,j.jsxs)("div",{children:[f?(0,j.jsx)("div",{style:{display:"flex",width:"100%",height:"100%",justifyContent:"center",alignItems:"center",paddingBottom:"10px"},children:(0,j.jsx)(xe().k,{})}):void 0,W]})}var et=()=>o(720321),tt=()=>o(680977),ot=()=>o(769314),nt=()=>o(574036),at=()=>o(547149);const it=(0,_().YK)({selectIconColor:{defaultMessage:"Select icon color",id:"iconPickerColorPicker.selectColor"},selectIconColorWithCurrentColor:{defaultMessage:"Select icon color, {iconColor} selected",id:"iconPickerColorPicker.selectColorWithCurrentColor"},noIconColor:{defaultMessage:"no color",id:"iconPickerColorPicker.noColor"}});function st(){const e=(0,s().K8)((()=>{var e;return null===(e=$().default.state)||void 0===e||null===(e=e.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.icon_picker_color}),[]),t=(0,_().tz)(),o=(0,i().v3)(),n=(0,r().eP)(),l=(0,i().Y0)(),c=(0,s().uB)(void 0,Ue().A);return(0,j.jsx)(y().m,{renderTooltip:()=>t.formatMessage(it.selectIconColor),placement:"bottom",render:i=>(0,j.jsx)(Ne().A,{preventBlockRenderQueueOnEnter:!0,buttonPopupStore:c,popupType:Ne().z.Popup,renderOrigin:o=>(0,j.jsx)(N().KF,{ariaLabel:t.formatMessage(it.selectIconColorWithCurrentColor,{iconColor:t.formatMessage(e?b().jd[e]:it.noIconColor)}),icon:et().circleFillSmallIcon,iconStyle:{stroke:e?b().l8[n][e]:b().l8[n].lightgray,fill:e?b().l8[n][e]:B().Tj.icon.tertiary},...(0,ze().A)(o,i)}),render:n=>function(e){const{parent:t,environment:o,currentIconPickerColor:n}=e,i=[];return i.push({key:"askEveryTime",action:()=>{t.close(),rt({environment:o,color:void 0})},render:e=>(0,j.jsx)(nt().A,{...e,title:(0,j.jsx)(_().sA,{id:"iconPickerColorPicker.askEveryTime",defaultMessage:"Ask every time"}),onClick:()=>{rt(void 0!==n?{environment:o,color:void 0}:{environment:o,color:"gray"})},on:void 0===n,style:{boxShadow:void 0},textWrapperStyle:{marginInlineStart:a().A.isMobile?10:6},rightStyle:{marginInlineEnd:4}})}),(0,j.jsx)(ot().A,{parent:t,currentColor:n,onColorSelected:rt,additionalItems:i,rowStyle:e=>({...e<2&&{opacity:void 0===n?.5:1},...2===e&&{flexDirection:"row-reverse",padding:"4px 0 0",margin:"4px 0 0",borderTop:`1px solid ${B().Tj.border.secondaryTranslucent}`}}),menuStyle:{padding:"4px 0"}})}({parent:n,environment:o,currentIconPickerColor:e,device:l,intl:t})})})}function rt(e){const{environment:t,color:o}=e,{currentUserSettingsStore:n}=$().default.state;n&&at().createAndCommit({userAction:"mediaPicker.setIconPickerColor",environment:t,canUndo:!0,perform:e=>{const t=void 0!==o?o:null;(0,tt().m)({userSettingsStore:n,transaction:e,data:{icon_picker_color:t}})}})}const lt=(0,_().YK)({unsplashPlaceholder:{id:"mediaPicker.unsplashPlaceholder.text",defaultMessage:"Search for an image…"}});function ct(e){const{tab:t,results:o,ready:a,isSmallWidth:i}=e,s=(0,r().IS)((()=>({loading:(0,ae().$n)(),captionMenuItem:{textAlign:i?"start":"center",color:B().Tj.text.secondary}})),[i]);return a?!o||o&&!o.length?(0,j.jsx)(V().A,{shouldWrapCaption:!0,caption:(0,j.jsx)(_().sA,{defaultMessage:"No results found",id:"mediaPicker.unsplash.noResultsText"}),style:s.captionMenuItem}):(0,j.jsxs)(n.Fragment,{children:[o.map(((e,o)=>(0,j.jsx)(dt,{tab:t,image:e},o))),(0,j.jsx)(V().A,{shouldWrapCaption:!0,caption:(0,j.jsx)(_().sA,{defaultMessage:"Search to find more results.",id:"mediaPicker.unsplash.searchText"}),style:s.captionMenuItem})]}):(0,j.jsx)("div",{style:s.loading,children:(0,j.jsx)(xe().k,{})})}function dt({tab:e,image:t}){const o=(0,n.useCallback)((async()=>{const o=await(0,Te().httpRequest)({url:t.downloadUrl,method:"GET",format:"json"});"success"===o.type&&e.onChange({url:o.data.url})}),[t.downloadUrl,e]);return(0,j.jsxs)("div",{style:{width:a().A.isMobile?"33%":"25%",padding:3},children:[(0,j.jsx)(de().Ay,{hoveredStyle:{opacity:.85},onClick:o,children:(0,j.jsx)(pe().A,{src:t.thumbUrl,style:{width:"100%",height:64,objectFit:"cover",objectPosition:"center 0%",borderRadius:4}})}),(0,j.jsx)(Se().A,{isSmall:!0,isSecondaryColor:!0,style:{marginTop:2,marginBottom:4},children:(0,j.jsx)(_().sA,{defaultMessage:"by <inlinetextlink>{authorName}</inlinetextlink>",id:"mediaPicker.unsplash.byAuthor",values:{authorName:t.authorName,inlinetextlink:e=>(0,j.jsx)(ye().V,{external:!0,href:t.unsplashUrl,children:e})}})})]},t.id)}const pt=function({tab:e,isSmallWidth:t}){const o=(0,_().tz)(),[s,r]=(0,n.useState)(""),l=(0,i().v3)(),c=(0,ae().b0)();return(0,j.jsxs)("div",{style:{paddingBottom:8},children:[(0,j.jsx)(S().A,{desktopStyle:{marginTop:8,marginBottom:6},children:(0,j.jsx)(N().Ay,{value:s,placeholder:o.formatMessage(lt.unsplashPlaceholder),showClearButton:!0,focus:!a().A.isMobile||void 0,onChange:e=>r(e.target.value)})}),(0,j.jsx)("div",{style:c.galleryWrap,children:(0,j.jsx)(D().A,{request:s,debounce:be().tu,performRequest:async e=>{const t=await Ie().callApi({eventName:"searchUnsplashImages",environment:l,data:{query:e,page:0}});if("success"===t.type)return t.data.results;throw t.error},render:(o,n,a)=>(0,j.jsx)(ct,{tab:e,results:n,ready:a,isSmallWidth:t})})})]})},ut=(0,_().YK)({embedPlaceholder:{id:"mediaPicker.embedPlaceholder.text",defaultMessage:"Paste in https://…"},filterPlaceholder:{id:"mediaPicker.emojiFilter.text",defaultMessage:"Filter…"},placeholder:{id:"aiGenerateInput.placeholder.v2",defaultMessage:"Generate a diagram, infographic, comic, image..."},randomEmoji:{id:"mediaPicker.emojiTab.random",defaultMessage:"Random"}}),mt=["default","diagram","slide","chart","infographic","mockup","photo","comic","sketch","cartoon"],gt=150;const ft=function(e){var t,r;const l=(0,i().v3)(),c=(0,n.useRef)(null),[d,p]=(0,n.useState)(""),[m,g]=(0,n.useState)({inputValue:"",focus:!1}),[f,h]=(0,n.useState)({inputValue:"",focus:!1}),[v,y]=(0,o(791177).$)(),x=(0,o(792485).S)(),S=(0,s().K8)((()=>(0,o(876338).$)(x)),[x]);function I(){const t=e.tabs.find((t=>t.type===e.currentTab));if(!t)return(0,j.jsx)(_().sA,{defaultMessage:"Uh oh! Something went wrong.",id:"mediaPicker.errorMessage"});switch(t.type){case"embed":return(0,j.jsx)(Rt,{isSmallWidth:e.isSmallWidth,embedInputValue:d,setEmbedInputValue:p,tab:t});case"file":return(0,j.jsx)(It,{isSmallWidth:e.isSmallWidth,tab:t,spaceStore:S});case"emoji":return(0,j.jsx)(o(828265).p,{onSubmit:t.onChange,filter:m.inputValue||"",isCallout:e.isCallout,iconLoggingData:e.recordIconLoggingData,menuRef:c,onUpload:t.uploadFileEventHandlers,isInline:!1,comboboxProps:y,hideCustomEmoji:e.hideCustomEmoji});case"icon":return(0,j.jsx)(Xe,{filter:f.inputValue||"",onSubmit:t.onChange,iconLoggingData:e.recordIconLoggingData,enforceIconColor:t.enforceIconColor,menuRef:c,comboboxProps:y});case"gallery":return(0,j.jsx)(ge,{tab:t});case"unsplash":return(0,j.jsx)(pt,{tab:t,isSmallWidth:e.isSmallWidth});case"giphy":return(0,j.jsx)(Ce,{tab:t,isSmallWidth:e.isSmallWidth});case"drive":return(0,j.jsx)(Bt,{tab:t});case"box":return(0,j.jsx)(Tt,{tab:t});case"generate":return(0,j.jsx)(ve,{tab:t});case"custom":return(0,j.jsx)(Et,{isSmallWidth:e.isSmallWidth,embedInputValue:d,setEmbedInputValue:p,tab:t,spaceStore:S});case"customEmoji":return(0,j.jsx)(o(251994).A,{showTitle:!1,largeEmoji:!0,allowUrlPaste:!0,confirmToAdd:!0,uploadFileEventHandlers:t.uploadFileEventHandlers,onUploadWithoutSaving:t.onUploadWithoutSaving,onCancel:e.onCancel,entrypoint:"upload_tab"});case"customAgent":return(0,j.jsx)(le,{tab:t,filter:f.inputValue||""});default:(0,o(534177).HB)(t)}}const A=null!=c&&null!==(t=c.current)&&void 0!==t&&t.offsetWidth?((null==c||null===(r=c.current)||void 0===r?void 0:r.offsetWidth)-24)/32:12,w=(0,j.jsxs)(n.Fragment,{children:[(0,j.jsx)(Pt,{tabs:e.tabs,onDelete:e.onDelete,currentTab:e.currentTab}),(0,j.jsx)(ht,{tabs:e.tabs,currentTab:e.currentTab,onFilterChange:e=>{const t=A*(0,ae().uu)();g({...m,inputValue:e.currentTarget.value}),h({...f,inputValue:e.currentTarget.value}),J.setState({...J.state,loadIconCount:t})},iconInput:f.inputValue,emojiInput:m.inputValue,onRandomButtonClick:t=>{"emoji"===t.type?function(e,t){const o=e.find((e=>e.type===t));if(o&&"emoji"===o.type){const e=O().aB();o.onChange(e,{keepVisible:!a().A.isMobile})}}(e.tabs,e.currentTab):"icon"===t.type?function(e,t,o){const n=t.find((e=>e.type===o));if(n&&"icon"===n.type){const e=n.enforceIconColor??(null===(i=$().default.state)||void 0===i||null===(i=i.currentUserSettingsStore)||void 0===i||null===(i=i.getSettings())||void 0===i?void 0:i.icon_picker_color),t=`/icons/${F().XM(Object.keys(J.getState().allIcons))}_${e??F().XM(b().v3)}.svg`;n.onChange(t,{keepVisible:!a().A.isMobile})}var i}(0,e.tabs,e.currentTab):"customAgent"===t.type&&function(e,t){const o=e.find((e=>e.type===t));o&&"customAgent"===o.type&&o.onChange("__SHUFFLE__",{keepVisible:!a().A.isMobile})}(e.tabs,e.currentTab)},comboboxProps:v})]});let C;if(a().A.isMobile)C={menuType:u().gu.Modal,title:e.title,header:w,right:(0,j.jsx)(_().sA,{defaultMessage:"Close",id:"mediaPicker.mobileCloseButton.label"}),onClickRight:e.onCancel,left:e.onDelete&&(0,j.jsx)(_().sA,{defaultMessage:"Remove",id:"mediaPicker.mobileRemoveButton.label"}),onClickLeft:e.onDelete};else{C={menuType:u().gu.Popup,header:w};const t=e.tabs.find((t=>t.type===e.currentTab)),o=t&&"tabHeight"in t?t.tabHeight:void 0;C.width=e.popupWidth||300,C.height=o||e.popupHeight,C.maxHeight=e.maxHeight,C.maxWidth=e.maxWidth}return(0,j.jsx)(U,{onSwipeLeft:()=>function(e,t){if(!Q().A.state.isActive)return;const o=e.map((e=>e.type)).indexOf(Q().A.state.currentTab),n=e[o+1];void 0!==n&&Mt(n.type,t)}(e.tabs,l),onSwipeRight:()=>function(e,t){if(!Q().A.state.isActive)return;const o=e.map((e=>e.type)).indexOf(Q().A.state.currentTab),n=e[o-1];void 0!==n&&Mt(n.type,t)}(e.tabs,l),render:e=>(0,j.jsx)(o(890492).A,{...C,...e,className:o(882722).aIQ,innerRef:c,children:I()})})};function ht(e){const t=(0,_().tz)(),{isAndroid:o}=(0,i().Y0)(),n=(0,u().Tf)(),s=e.tabs.find((t=>t.type===e.currentTab));if("emoji"===(null==s?void 0:s.type)||"icon"===(null==s?void 0:s.type)){const i="emoji"===s.type?e.emojiInput:e.iconInput,r=()=>e.onRandomButtonClick(s),l=(0,j.jsx)(xt,{tabs:e.tabs,currentTab:e.currentTab,hasRandomButtonOnLeft:!s.hideRandomButton}),c=(0,j.jsx)(N().Ay,{value:i,placeholder:t.formatMessage(ut.filterPlaceholder),autoFocus:!a().A.isMobile||void 0,focusInitial:!a().A.isMobile||void 0,showClearButton:!0,inputLeft:(0,j.jsx)(N().Zf,{icon:C().magnifyingGlassSmallIcon}),onChange:e.onFilterChange,right:(0,j.jsxs)("div",{style:{display:"flex"},children:[null!=s&&s.hideRandomButton?void 0:(0,j.jsx)(y().m,{renderTooltip:()=>t.formatMessage(ut.randomEmoji),placement:"bottom",render:e=>(0,j.jsx)(N().KF,{icon:w,onClick:r,ariaLabel:t.formatMessage(ut.randomEmoji),...e})}),l]}),isRightLastElementOfInput:!0,style:{...o&&{borderBottom:"none"}},...e.comboboxProps});return(0,j.jsx)("div",{style:{...!a().A.isMobile&&{marginTop:4},marginBottom:10},children:n?(0,j.jsx)(S().A,{children:c}):(0,j.jsx)("div",{children:c})},`input-header-${s.type}`)}return null}function vt(e){return e.fileUpload?Y().cM:e.imageUpload?Y().Dn:e.videoUpload?Y().Rt:void 0}async function yt({tab:e,environment:t}){const o=e.imageUpload?"image/*":e.videoUpload?"video/*":e.accept,n=await L().dA({environment:t,supportsMobileNativeFileUpload:!0,multiple:e.allowMultipleFileSelection??!1,accept:o});null!=n&&n.length&&e.onUpload(n)}function xt({hasRandomButtonOnLeft:e,tabs:t,currentTab:o}){const n=t.find((e=>e.type===o));if(!n)return null;let a;return"emoji"===(null==n?void 0:n.type)?a=(0,j.jsx)(K().A,{}):"icon"===(null==n?void 0:n.type)&&void 0===n.enforceIconColor&&(a=(0,j.jsx)(st,{})),e&&a?(0,j.jsx)("div",{style:{marginInlineStart:6},children:a}):a??null}function St({tab:e,isSmallWidth:t}){const o=(0,i().v3)();return e.imageUpload||e.videoUpload?(0,j.jsxs)(S().A,{desktopStyle:{marginBlockStart:12,display:"flex",justifyContent:"center",marginInlineEnd:12,marginInlineStart:12},children:[e.imageUpload?(0,j.jsx)(m().A,{size:"lg",onClick:()=>yt({tab:e,environment:o}),style:{width:"100%"},children:(0,j.jsx)(_().sA,{defaultMessage:"Upload file",id:"mediaPicker.chooseImage.buttonText"})}):void 0,e.videoUpload?(0,j.jsx)(H().A,{title:(0,j.jsx)(_().sA,{defaultMessage:"Choose a video",id:"mediaPicker.chooseVideo.buttonText"}),onClick:()=>yt({tab:e,environment:o}),fullWidth:t}):void 0]}):null}function It({tab:e,isSmallWidth:t,spaceStore:o}){var a;const d=(0,_().tz)(),p=(0,i().v3)(),u=(0,s().O$)(c().subscriptionDataStoreInstance),m=e.aiGeneration,g=(0,n.useRef)(null),f=(0,n.useRef)(null),[v,y]=function(e){const t=(0,n.useRef)(void 0),[o,a]=(0,n.useState)(!1),i=(0,n.useCallback)((()=>{a(!0),void 0!==t.current&&window.clearTimeout(t.current),t.current=window.setTimeout((()=>{a(!1),t.current=void 0}),e)}),[e]);return(0,n.useEffect)((()=>()=>{void 0!==t.current&&window.clearTimeout(t.current)}),[]),[o,i]}(gt),[x,I]=(0,n.useState)(void 0),[b,A]=(0,n.useState)(0),w=(0,n.useRef)(void 0),[C,k]=(0,n.useState)(void 0),T=void 0!==x?Math.max(0,b-x):0,M=Math.max(0,(C??0)-T);(0,n.useLayoutEffect)((()=>{const e=f.current,t=g.current;if(!e)return;const o=()=>{const t=e.getBoundingClientRect().height;A(t),I((e=>void 0===e||t<e?t:e))};if(o(),void 0===w.current&&t){const e=t.getBoundingClientRect().height,o=Math.max(0,Math.round(275-e));w.current=o,k(o)}if("undefined"==typeof ResizeObserver)return;const n=new ResizeObserver((e=>{e[0]&&o()}));return n.observe(e),()=>n.disconnect()}),[275]);const P=(0,r().IS)((()=>({dropzone:{background:B().Tj.blue.background.secondaryTranslucent},caption:{textAlign:t?"start":"center",color:B().Tj.text.secondary},combinedTabContent:{minHeight:275,overflow:"auto",scrollbarWidth:"none",msOverflowStyle:"none"},orDivider:{display:"flex",alignItems:"center",justifyContent:"center",paddingTop:10,paddingInlineEnd:0,paddingBottom:13,paddingInlineStart:0},orDividerText:{color:B().Tj.text.tertiary},aiSection:{paddingTop:0,paddingInlineEnd:12,paddingBottom:12,paddingInlineStart:12,marginBottom:10}})),[t]),F=(0,s().K8)((()=>q().A.isOnboarding()),[]),E=(0,X()._)({name:"file_upload_size",spaceId:null==o?void 0:o.id,userId:null===(a=p.currentUser)||void 0===a?void 0:a.id}),R=jt({upsell:null==E?void 0:E.upsell,subscriptionData:u,isOnboarding:F,existingCaption:e.caption,spaceStore:o});return m?(0,j.jsx)(z().V,{type:vt(e)??Y().hy,dropTargetKey:"uploadTab",onDropFile:t=>{if("invalidFileDrop"===t.type)return l().D6({label:(0,j.jsx)(_().sA,{id:"mediaPicker.invalidImageDrop.wrongTypeErrorMessage",defaultMessage:"Sorry, that file type is not supported."})}),null;e.onUpload([t.file])},dropzoneStyle:P.dropzone,children:(0,j.jsx)("div",{className:"hide-scrollbar",style:{marginTop:-24,paddingTop:24,...P.combinedTabContent},children:(0,j.jsxs)("div",{ref:g,children:[(0,j.jsx)(S().A,{style:{marginTop:12,paddingInlineStart:12,paddingInlineEnd:12},children:(0,j.jsx)(bt,{onClick:()=>yt({tab:e,environment:p}),extraHeight:M,animatePadding:v})}),(0,j.jsx)("div",{style:P.orDivider,children:(0,j.jsx)(h().D,{styleKey:"bodyRegular",style:P.orDividerText,children:(0,j.jsx)(_().sA,{id:"mediaPicker.combinedTab.orDivider",defaultMessage:"Or"})})}),(0,j.jsx)("div",{style:{...P.aiSection,...void 0!==x&&{height:b??x,overflow:"hidden",...v&&{transition:`height ${gt}ms ease-in-out`}}},children:(0,j.jsx)("div",{ref:f,children:(0,j.jsx)(ie().q,{aiGeneration:m,expansionState:"collapsible",onExpandStart:y,styleOptionIds:mt,placeholder:d.formatMessage(ut.placeholder)})})})]})})}):(0,j.jsx)(z().V,{type:vt(e)??Y().hy,dropTargetKey:"uploadTab",onDropFile:t=>{if("invalidFileDrop"===t.type)return l().D6({label:(0,j.jsx)(_().sA,{id:"mediaPicker.invalidImageDrop.wrongTypeErrorMessage",defaultMessage:"Sorry, that file type is not supported."})}),null;e.onUpload([t.file])},dropzoneStyle:P.dropzone,children:(0,j.jsxs)("div",{style:{marginTop:-24,paddingTop:24,paddingBottom:10},children:[e.fileUpload?(0,j.jsx)(S().A,{desktopStyle:{marginTop:t?8:24},children:(0,j.jsx)(H().A,{title:(0,j.jsx)(_().sA,{defaultMessage:"Choose a file",id:"mediaPicker.chooseFile.button.label"}),onClick:()=>yt({tab:e,environment:p}),fullWidth:t})}):void 0,(0,j.jsx)(St,{isSmallWidth:t,tab:e}),R?(0,j.jsx)(V().A,{shouldWrapCaption:!0,caption:R,style:P.caption}):void 0,u&&ee().Fq(u)?(0,j.jsx)("div",{style:{height:8}}):void 0]})})}function bt({onClick:e,extraHeight:t=0,animatePadding:o}){const[a,i]=(0,n.useState)(!1),s=(0,r().IS)((()=>({button:{display:"flex",alignItems:"center",justifyContent:"center",gap:8,width:"100%",padding:14+t/2+"px 16px",borderRadius:8,border:`1px dashed ${B().Tj.border.primary}`,backgroundColor:a?B().Tj.background.secondary:B().Tj.background.primary,cursor:"pointer",transition:"background-color 100ms ease-in-out"+(o?`, padding ${gt}ms ease-in-out`:"")},icon:{color:B().Tj.icon.secondary}})),[o,t,a]);return(0,j.jsxs)("button",{type:"button",style:s.button,onClick:e,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[(0,j.jsx)(p().I,{icon:k().M,size:"lg",style:s.icon}),(0,j.jsx)(h().D,{styleKey:"bodyRegular",colorVariant:"secondary",children:(0,j.jsx)(_().sA,{id:"mediaPicker.combinedTab.uploadImage",defaultMessage:"Upload image"})})]})}function jt(e){const{upsell:t,subscriptionData:o,isOnboarding:n,existingCaption:a,spaceStore:i}=e;if(!(0,P().wy)(t)||!o||ee().Fq(o)||n)return a;const s=(0,te().N)({messages:Ot,values:{fileSize:L().u1.toString()}});return(0,j.jsxs)(d().Ye,{alignItems:"center",justifyContent:a?"space-between":"center",style:{paddingInline:8,marginBottom:4},children:[a,(0,j.jsx)(oe().UpgradeButton,{upsell:t,source:"media_picker",display:"text",customMessages:s,size:"small",spaceStore:i})]})}let At=function(e){return e.Drive="drive",e.Docs="googleDocs",e}({});function wt({tab:e,type:t}){return t===At.Docs?(0,j.jsx)(kt,{tab:e}):(0,j.jsx)(Ct,{tab:e})}function Ct({tab:e}){const t=(0,r().IS)((()=>({buttonItem:{color:B().Tj.blue.text.accentPrimary}})),[]);return(0,j.jsxs)(S().A,{children:[(0,j.jsx)(x().A,{title:(0,j.jsx)(_().sA,{defaultMessage:"Connect Google account",id:"mediaPicker.menuItem.connectFirstGoogleAccount.label"}),onClick:()=>e.onSelect(),focused:!1,style:t.buttonItem}),(0,j.jsx)(V().A,{shouldWrapCaption:!1,caption:(0,j.jsx)(_().sA,{defaultMessage:"Find and embed your Google Drive files.",id:"mediaPicker.menuItem.connectFirstGoogleAccount.caption"})})]})}function kt({tab:e}){return(0,j.jsx)(S().A,{children:(0,j.jsx)(x().A,{title:(0,j.jsx)(_().sA,{defaultMessage:"Connect Google account",id:"mediaPicker.menuItem.connectFirstGoogleAccount.label"}),onClick:()=>e.onSelect(),focused:!1})})}function Tt({tab:e}){const t=(0,r().IS)((()=>({connectFirstAccountButton:{color:B().Tj.blue.text.accentPrimary},connectSecondAccountButton:{color:B().Tj.text.secondary}})),[]),{accounts:o}=e;return 0===o.length?(0,j.jsxs)(S().A,{children:[(0,j.jsx)(x().A,{title:(0,j.jsx)(_().sA,{defaultMessage:"Connect Box account",id:"mediaPicker.menuItem.connectFirstBoxAccount.label"}),onClick:()=>e.onSelect(),focused:!1,style:t.connectFirstAccountButton}),(0,j.jsx)(V().A,{shouldWrapCaption:!1,caption:(0,j.jsx)(_().sA,{defaultMessage:"Find and embed your Box files.",id:"mediaPicker.menuItem.connectFirstBoxAccount.caption"})})]}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(S().A,{children:o.map((t=>(0,j.jsx)(x().A,{title:(0,j.jsx)(_().sA,{defaultMessage:"Choose from {accountName}",id:"mediaPicker.menuItem.choosePagesFromAccount.label",values:{accountName:t.account_name}}),onClick:()=>e.onSelect(t),focused:!1},t.account_key)))}),(0,j.jsx)(S().A,{topBorder:!0,children:(0,j.jsx)(x().A,{title:(0,j.jsx)(_().sA,{defaultMessage:"Connect another account",id:"mediaPicker.menuItem.connectMoreBoxAccounts.label"}),onClick:()=>e.onSelect(),style:t.connectSecondAccountButton,focused:!1})})]})}function Mt(e,t){Q().A.state.isActive&&(Q().A.setState({...Q().A.state,currentTab:e}),"icon"===e&&Q().A.state.recordIconLoggingData&&E().uZ(t,"select_icon_tab",Q().A.state.recordIconLoggingData))}function Pt({tabs:e,onDelete:t,currentTab:o}){const s=(0,i().v3)(),{device:r}=s;if(e.length<=1&&!t)return null;{const i={gallery:(0,j.jsx)(_().sA,{id:"mediaPicker.tabs.gallery",defaultMessage:"Gallery"}),embed:(0,j.jsx)(_().sA,{id:"mediaPicker.tabs.embedLink",defaultMessage:"Embed link"}),file:(0,j.jsx)(_().sA,{id:"mediaPicker.tabs.upload",defaultMessage:"Upload"}),emoji:(0,j.jsx)(_().sA,{id:"mediaPicker.tabs.emoji",defaultMessage:"Emoji"}),icon:(0,j.jsx)(_().sA,{id:"mediaPicker.tabs.icon",defaultMessage:"Icon"}),custom:(0,j.jsx)(_().sA,{id:"mediaPicker.tabs.custom",defaultMessage:"Custom"}),customEmoji:(0,j.jsx)(_().sA,{id:"mediaPicker.tabs.customEmoji",defaultMessage:"Upload"}),unsplash:(0,j.jsxs)(n.Fragment,{children:[(0,M().unsplashTintableIcon)({width:12,marginInlineEnd:4,height:12}),(0,j.jsx)("span",{children:"Unsplash"})]}),giphy:(0,j.jsxs)(n.Fragment,{children:[(0,T().giphyTintableIcon)({width:12,marginInlineEnd:4,height:12}),(0,j.jsx)("span",{children:"GIPHY"})]}),drive:(0,j.jsx)(_().sA,{id:"mediaPicker.tabs.browse",defaultMessage:"Browse"}),box:(0,j.jsx)(_().sA,{id:"mediaPicker.tabs.browse",defaultMessage:"Browse"}),customAgent:(0,j.jsx)(_().sA,{id:"mediaPicker.tabs.customAgent",defaultMessage:"Agent"}),generate:(0,j.jsx)(_().sA,{id:"mediaPicker.tabs.generate",defaultMessage:"Generate"})},l=e.findIndex((e=>e.type===o)),c=e.map((e=>{const t=e.title||i[e.type];return"generate"===e.type?(0,j.jsxs)(n.Fragment,{children:[(0,j.jsx)("span",{children:t}),(0,j.jsx)("div",{style:{marginInlineStart:6},children:(0,j.jsx)(ne().m,{badge_click_url:e.badge_click_url})})]},e.type):t})),d=e.find((e=>e.type===o)),p=d&&"emoji"!==d.type&&r.isAndroid;return(0,j.jsx)(v().LZ,{tabs:c,selectedIndex:l,onChange:t=>{Mt(e[t].type,s)},right:t&&!a().A.isMobile&&(0,j.jsx)(g().p,{colorPalette:"gray",onClick:t,children:(0,j.jsx)(_().sA,{id:"mediaPicker.tabs.remove",defaultMessage:"Remove"})}),style:{...p&&{borderBottom:"none"}}})}}function _t({tab:e,accounts:t,type:o=At.Drive}){const a=(0,r().IS)((()=>({buttonItem:{color:B().Tj.text.secondary}})),[]);return"accounts"in e?e.accounts&&0===e.accounts.length?(0,j.jsx)(wt,{tab:e,type:o}):(0,j.jsxs)(n.Fragment,{children:[(0,j.jsx)(S().A,{children:e.accounts.map(((t,o)=>(0,j.jsx)(x().A,{title:(0,j.jsx)(_().sA,{defaultMessage:"Choose from {accountName}",id:"mediaPicker.menuItem.choosePagesFromAccount.label",values:{accountName:t.account_name}}),onClick:()=>e.onSelect(t),focused:!1},t.account_key)))}),(0,j.jsx)(S().A,{topBorder:!0,children:(0,j.jsx)(x().A,{title:(0,j.jsx)(_().sA,{defaultMessage:"Connect another account",id:"mediaPicker.menuItem.connectMoreGoogleAccounts.label"}),onClick:()=>e.onSelect(),style:a.buttonItem,focused:!1})})]}):t?0===t.length?(0,j.jsx)(wt,{tab:e,type:o}):(0,j.jsxs)(n.Fragment,{children:[(0,j.jsx)(S().A,{children:t.map(((t,o)=>(0,j.jsx)(x().A,{title:(0,j.jsx)(_().sA,{defaultMessage:"Choose from {accountName}",id:"mediaPicker.menuItem.choosePagesFromAccount.label",values:{accountName:t.accountName}}),onClick:()=>e.onSelect(t),focused:!1},t.accountId)))}),(0,j.jsx)(S().A,{topBorder:!0,children:(0,j.jsx)(x().A,{title:(0,j.jsx)(_().sA,{defaultMessage:"Connect another account",id:"mediaPicker.menuItem.connectMoreGoogleAccounts.label"}),onClick:()=>e.onSelect(),style:a.buttonItem,focused:!1})})]}):null}function Bt({tab:e}){const t=(0,i().v3)();return"accounts"in e?(0,j.jsx)(_t,{tab:e}):(0,j.jsx)(D().A,{request:t,performRequest:Z().QZ,render:(t,o,n)=>{if(!n)return(0,j.jsx)(S().A,{children:(0,j.jsx)(W().A,{})});const a=o&&o.accounts?o.accounts:[];return(0,j.jsx)(_t,{tab:e,accounts:a})}})}function Ft(e,t,o){return()=>{const n=o;if(n){const o=(0,I().Zv)(n)||(0,I().ku)(n,a().A.secureFileConfig.hostname);e.onChange({originUrl:n,pastedSecureFile:o}),R().oF(t,{pastedText:n,source:"media_picker"})}}}function Et({tab:e,isSmallWidth:t,embedInputValue:o,setEmbedInputValue:n,spaceStore:d}){var p;const u=(0,_().tz)(),m=(0,i().v3)(),g=(0,i().Y0)(),h=(0,s().O$)(c().subscriptionDataStoreInstance),v=(0,s().K8)((()=>q().A.isOnboarding()),[]),y=(0,X()._)({name:"file_upload_size",spaceId:null==d?void 0:d.id,userId:null===(p=m.currentUser)||void 0===p?void 0:p.id}),x=(0,r().IS)((()=>({dropZone:{background:B().Tj.blue.background.secondaryTranslucent},caption:{textAlign:t?"start":"center",color:B().Tj.text.secondary}})),[t]),I=jt({upsell:null==y?void 0:y.upsell,subscriptionData:h,isOnboarding:v,existingCaption:e.caption,spaceStore:d}),b=(0,j.jsx)(f().A,{colorPalette:"blue",onClick:Ft(e,m,o),disabled:0===o.length,hovered:!1,children:e.buttonText||(0,j.jsx)(_().sA,{defaultMessage:"Link",id:"mediaPicker.embedTab.embedLinkButtonText"})}),A=(0,j.jsx)(S().A,{desktopStyle:{marginTop:16,display:"flex",paddingTop:0,paddingBottom:12},children:(0,j.jsx)(N().Ay,{type:"url",value:o,placeholder:e.inputPlaceholder||u.formatMessage(ut.embedPlaceholder),autoFocus:!a().A.isMobile||void 0,showClearButton:!0,focus:!a().A.isMobile||void 0,onSubmit:Ft(e,m,o),onChange:e=>n(e.target.value),inputRight:g.isPhone?b:void 0,right:g.isPhone?void 0:b,isRightLastElementOfInput:!0})}),w=(0,j.jsx)(z().V,{type:vt(e)??Y().hy,dropTargetKey:"uploadTab",onDropFile:t=>{if("invalidFileDrop"===t.type)return l().D6({label:(0,j.jsx)(_().sA,{id:"mediaPicker.invalidImageDrop.wrongTypeErrorMessage",defaultMessage:"Sorry, that file type is not supported."})}),null;e.onUpload([t.file])},dropzoneStyle:x.dropZone,children:(0,j.jsxs)("div",{style:{marginTop:-24,paddingTop:24},children:[e.fileUpload?(0,j.jsx)(S().A,{desktopStyle:{marginTop:t?8:24},children:(0,j.jsx)(H().A,{title:(0,j.jsx)(_().sA,{defaultMessage:"Choose a file",id:"mediaPicker.chooseFile.button.label"}),onClick:()=>yt({tab:e,environment:m}),fullWidth:t})}):void 0,(0,j.jsx)(St,{isSmallWidth:t,tab:e}),I?(0,j.jsx)(V().A,{shouldWrapCaption:!0,caption:I,style:x.caption}):void 0,h&&ee().Fq(h)?(0,j.jsx)("div",{style:{height:8}}):void 0]})});return(0,j.jsxs)(j.Fragment,{children:[A,w]})}function Rt({tab:e,isSmallWidth:t,embedInputValue:o,setEmbedInputValue:s}){const r=(0,i().v3)(),l=(0,_().tz)();return(0,j.jsxs)(n.Fragment,{children:[(0,j.jsx)(S().A,{desktopStyle:{marginTop:8},children:(0,j.jsx)(N().Ay,{type:"url",value:o,placeholder:e.inputPlaceholder||l.formatMessage(ut.embedPlaceholder),autoFocus:!a().A.isMobile||void 0,showClearButton:!0,focus:!a().A.isMobile||void 0,onSubmit:Ft(e,r,o),onChange:e=>s(e.target.value)})}),(0,j.jsx)(S().A,{style:e.caption?{}:{marginBottom:6},children:(0,j.jsx)(H().A,{onClick:Ft(e,r,o),title:e.buttonText||(0,j.jsx)(_().sA,{defaultMessage:"Link",id:"mediaPicker.embedTab.embedLinkButtonText"}),fullWidth:t})}),e.caption?(0,j.jsx)(V().A,{shouldWrapCaption:!0,caption:e.caption,style:{textAlign:a().A.isMobile?"start":"center",marginBottom:4}}):void 0]})}const Ot=(0,_().YK)({eligible_to_purchase:{id:"MediaPicker.upgrade.eligibleToPurchase",defaultMessage:"<highlight>Upgrade</highlight> for files larger than {fileSize}MB"},eligible_for_trial:{id:"MediaPicker.upgrade.eligibleForTrial",defaultMessage:"<highlight>Try</highlight> for files larger than {fileSize}MB"},sales_eligible:{id:"MediaPicker.upgrade.salesEligible",defaultMessage:"<highlight>Contact sales</highlight> for files larger than {fileSize}MB"},sales_assisted:{id:"MediaPicker.upgrade.salesAssisted",defaultMessage:"<highlight>Contact sales</highlight> for files larger than {fileSize}MB"},eligible_to_request:{id:"MediaPicker.upgrade.eligible_to_request",defaultMessage:"<highlight>Request</highlight> for files larger than {fileSize}MB"},request_pending:{id:"MediaPicker.upgrade.requestPending",defaultMessage:"<highlight>Request pending</highlight> for files larger than {fileSize}MB"}})},52404:(e,t,o)=>{o.r(t),o.d(t,{arrowStraightLeftFillIcon:()=>a,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.12 3.72 15.76 12.56",directional:!0,svg:(0,o(474848).jsx)("path",{d:"M2.381 10.619a.875.875 0 0 1 0-1.238l5.4-5.4A.875.875 0 1 1 9.02 5.22L5.112 9.125H17.05c.456 0 .826.392.826.875s-.37.875-.826.875H5.112l3.907 3.906A.875.875 0 1 1 7.78 16.02z"})},a=(0,o(340498).wt)("arrowStraightLeftFill",n,"fill")},84569:(e,t,o)=>{o.d(t,{Y:()=>a});class n extends(()=>o(757695))().Store{getInitialState(){return{isModalOpen:!1,currentTab:"selectAccount",account:void 0,isAccountLinkingInProgress:!1,isAccountDelinkingInProgress:!1,workspaces:[],teamsAndProjects:[],selectedWorkspace:void 0,selectedProjectsAndTeamspaces:{},selectedTeamspacesAndProperties:{},importCompletedTasks:!0,teams:void 0,loadMoreClicks:0,isLoadingProjects:!1,isLoadingAsanaWorkspaces:!1,result:void 0,isComplete:!1,loggerPageId:void 0,templateCreationInProgress:!1,isFetchingAsanaAccount:!1,useSectionAsStatus:!1,choosingWorkspacesCompleted:!1,showOnboardingTour:!1}}resetImport(){const{account:e,workspaces:t}=this.getState();this.setState({...this.getInitialState(),account:e,workspaces:t})}close(e){this.setState({...this.getInitialState()})}}const a=new n;(0,o(852832).exposeDebugValue)("AsanaV3ImportStore",a)},84987:(e,t,o)=>{o.r(t),o.d(t,{SidebarInboxButton:()=>P,inboxMessages:()=>_});var n=o(296540),a=()=>o(300474),i=()=>o(907258),s=()=>o(484714),r=()=>o(590526),l=()=>o(401497),c=()=>o(929219),d=()=>o(996332),p=()=>o(807449),u=()=>o(26697),m=()=>o(69708),g=()=>o(100622),f=()=>o(284371),h=()=>o(35392),v=()=>o(807054),y=()=>o(182805),x=()=>o(477293),S=()=>o(770906),I=()=>o(441199),b=()=>o(303742),j=()=>o(804319),A=()=>o(797730),w=()=>o(644914),C=()=>o(749687),k=()=>o(509659),T=()=>o(105127),M=o(474848);function P(e){const t=(0,s().v3)(),o=(0,m().tz)(),P=(0,a().r)(),B=(0,r().K8)((()=>"inbox"===I().default.state.contentType&&I().default.isOpen()),[]),F=(0,r().O$)(C().sidebarExpandedStore),E=(0,r().K8)((()=>I().default.state.mode),[]),R=(0,r().O$)(i().AppStoreSidebarSpaceViewStore),O=B&&"panel"===E,L=(0,n.useCallback)((()=>{S().ZT({environment:t,contentType:"inbox"})}),[t]),D=(0,l().IS)((()=>({sidebarItem:{...O&&{fontWeight:f().Wy.semibold,background:g().Tj.sidebarItemSelectedBackground}},badge:{width:void 0,minWidth:16,paddingInlineStart:3,paddingInlineEnd:3},number:{fontWeight:f().Wy.semibold,letterSpacing:.12,fontSize:10,fontVariantNumeric:"lining-nums tabular-nums",fontFeatureSettings:"lnum",MozFontFeatureSettings:"lnum",WebkitFontFeatureSettings:"lnum"},shortcutLabel:{color:g().Tj.text.inverseSecondary}})),[O]),V=(0,r().K8)((()=>(0,b().o)(R)?"allGuestSpaces":"currentSpace"),[R]),z=(0,w().ab)(),N=(0,r().K8)((()=>(0,v().isPrewarmedTabInitialRender)(t)&&(0,y().isPrewarmedTabLoadSidebarEnabled)()),[t]),U=(0,M.jsx)(T().A,{type:V,style:D.badge,numberStyle:D.number,fadeIn:!N,showExcessUnreadsAsStale:!0,isTranslucent:!0}),W="on"===(0,x().r)("collaboration_reaction_notifications")&&F&&!N,H=!(0,r().O$)(c().e);return(0,M.jsx)(u().m,{renderTooltip:()=>H?(0,M.jsx)("div",{children:o.formatMessage(_.offlineTooltip)}):(0,M.jsxs)("div",{children:[(0,M.jsx)("div",{children:o.formatMessage(_.tooltip)}),(0,M.jsx)(h().A,{style:D.shortcutLabel,name:"toggleAllUpdates"})]}),originGap:6,placement:"right",render:t=>{var n;return(0,M.jsx)(d().Q,{style:{...z.baseSidebarItem,...D.sidebarItem,...O&&z.currentSelectedSidebarItem},onClick:L,hoveredStyle:null===(n=e.styles)||void 0===n?void 0:n.buttonHoveredStyle,...t,disabled:H,disabledFeedback:H,children:(0,M.jsx)(j().A,{left:(0,M.jsx)(p().I,{icon:A().P.inbox,colorVariant:"secondary",size:"lg"}),right:W?(0,M.jsx)(k().f,{children:U},P):U,children:o.formatMessage(A().D.inbox)})})}})}const _=(0,m().YK)({tooltip:{id:"sidebar.inbox.tooltip",defaultMessage:"Review notifications & updates"},offlineTooltip:{id:"sidebar.inbox.offlineTooltip",defaultMessage:"Unavailable while offline"}})},89383:(e,t,o)=>{o.d(t,{DJ:()=>p,Oo:()=>l,a6:()=>d,hi:()=>c,qf:()=>r});o(16280),o(898992),o(803949),o(581454);var n=()=>o(206267),a=()=>o(114282),i=()=>o(509778),s=()=>o(559926);function r(e){i().Q.setState({...i().Q.state,isModalOpen:!0,flowId:n().JW(),onComplete:e})}function l(){i().Q.setState({...i().Q.state,isModalOpen:!1})}function c(e){const t=i().Q.state.spaceToTeamspaceMapping,o={};e.forEach((e=>{o[e.id]=t[e.id]||{confluenceSpaceId:e.id,confluenceSpaceKey:e.key,confluenceSpaceName:e.name,notionTeamspaceId:void 0}})),i().Q.setState({...i().Q.state,selectedSpaces:e,spaceToTeamspaceMapping:o})}function d({confluenceSpaceId:e,notionTeamspaceId:t}){const o=i().Q.state.spaceToTeamspaceMapping,n=o[e];n&&i().Q.setState({...i().Q.state,spaceToTeamspaceMapping:{...o,[e]:{...n,notionTeamspaceId:t}}})}async function p({environment:e,spaceStore:t,spaceViewStore:o}){const{spaceToTeamspaceMapping:n,flowId:r,onComplete:l}=i().Q.state;if(!r)throw new Error("No flow ID available");if(!l)throw new Error("onComplete function not available");try{i().Q.setState({...i().Q.state,isModalOpen:!1});const c=Object.values(n).map((e=>({id:e.confluenceSpaceId,key:e.confluenceSpaceKey,name:e.confluenceSpaceName,targetTeamSpaceId:e.notionTeamspaceId||void 0})));s().mM(e,{import_source:"confluence",data:{spaceCount:c.length,spaces:c.map((e=>({spaceKey:e.key,spaceName:e.name,targetTeamSpaceId:e.targetTeamSpaceId})))},flowId:r,import_sub_type:"multispace"});l(await a().lF({environment:e,spaceStore:t,spaceViewStore:o,spaces:c,flowId:r}),"confluence")}catch(c){throw i().Q.setState({...i().Q.state,isModalOpen:!1}),c}}},91232:(e,t,o)=>{o.d(t,{S:()=>a});var n=()=>o(44551);function a(){var e;null===n().electronApi||void 0===n().electronApi||null===(e=n().electronApi.openQuickSearchShortcutSetting)||void 0===e||e.call(n().electronApi)}},105127:(e,t,o)=>{o.d(t,{A:()=>d});o(581454),o(296540);var n=()=>o(907258),a=()=>o(590526),i=()=>o(534177),s=()=>o(171347),r=()=>o(21899),l=()=>o(179534),c=o(474848);function d(e){const{type:t,...o}=e,d=(0,a().K8)((()=>{switch(t){case"currentSpace":return l().A.getUnreadCountForSidebarSpace().mentions;case"otherSpaces":return l().A.getUnreadMentionsCountForOtherSpaces();case"allSpaces":return l().A.getTotalUnreadMentionsCount();case"allGuestSpaces":const{currentUserRootStore:e}=n().default.state,o=(0,r().f)({currentUserRootStore:e});return l().A.getUnreadMentionsCountForSpaces(o.map((e=>e.getSpaceId())));default:(0,i().HB)(t)}}),[t]);return(0,c.jsx)(s().$,{count:d,...o})}},109054:(e,t,o)=>{o.d(t,{oU:()=>n});o(898992),o(823215),o(354520),o(672577),o(737550);function n(e){const{blockStore:t,shouldShowPeopleCollection:o,shouldShowUserProfiles:n}=e;return!(!o&&t.isPeopleCollectionViewPage())&&!(!n&&t.isPersonProfile())}},113416:(e,t,o)=>{o.d(t,{B:()=>a});var n=()=>o(496603);function a(e){const{isLocalBlendingDisabled:t,queryOperations:o,queryText:a,querySort:i}=e;return!n().Im(a.trim())&&!t&&0===o.length&&"relevance"===i.field}},123411:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,lightBulbBrightIcon:()=>a});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"4.96 2 10.08 15.99",svg:(0,o(474848).jsx)("path",{d:"M12.21 13.71c-.34 0-.62-.28-.62-.62 0-1.31.7-2.45 1.32-3.46.12-.2.24-.39.36-.58.34-.58.53-1.3.53-2.06 0-2.06-1.7-3.73-3.79-3.73S6.22 4.93 6.22 6.99c0 .76.18 1.47.53 2.06.11.19.23.39.35.58l.023.037c.614 1 1.307 2.129 1.297 3.423 0 .34-.24.61-.63.62-.35 0-.62-.28-.62-.63 0-.96-.55-1.85-1.14-2.8q-.091-.15-.185-.3-.095-.15-.185-.3c-.46-.78-.7-1.71-.7-2.69 0-2.74 2.26-4.98 5.04-4.98s5.04 2.23 5.04 4.98c0 .98-.24 1.92-.7 2.69-.12.2-.24.4-.37.61-.59.95-1.14 1.84-1.14 2.8 0 .34-.28.62-.62.63zm-1.26 4.28h-1.9c-.35 0-.62-.28-.62-.62s.28-.62.62-.62h1.9c.34 0 .62.28.62.62s-.28.62-.62.62M8.1 15.85h3.8c.34 0 .62-.28.62-.62s-.28-.62-.62-.62H8.1c-.34 0-.62.28-.62.62s.27.62.62.62"})},a=(0,o(340498).wt)("lightBulbBright",n,"default")},137432:(e,t,o)=>{o.d(t,{J:()=>y,p:()=>x});var n=()=>o(836095),a=()=>o(726637),i=()=>o(792057),s=()=>o(651784),r=()=>o(939768),l=()=>o(559926),c=()=>o(769864),d=()=>o(496414),p=()=>o(61958),u=()=>o(725951),m=()=>o(404141),g=()=>o(283080),f=()=>o(247402),h=()=>o(191227);const v=(0,o(69708).YK)({authenticatingWithEvernote:{id:"evernoteActions.authenticatingWithEvernote.loadingMessage",defaultMessage:"Authenticating with Evernote…"},titleMessage:{defaultMessage:"Evernote login",id:"evernoteActions.loginPopupModal.title"}});async function y(e){const{environment:t,requestStore:o,openNotebooksPopupAfterAuth:y=!0}=e,S=h().A.getOrCreateFlowId();l()._$(t,{import_source:"evernote",data:{import_type:"api",status:"initiated",userId:t.currentUser.id},flowId:S});const I=(0,u().LX)(t);let b=(0,s().TD)(a().A.domainBaseUrl,{authType:I,userId:t.currentUser.id,isElectronDevice:t.device.isElectron});if(b=I.redirectToAuth?b:await(0,u().YN)(t,b),t.device.isElectron)return d().m({message:v.authenticatingWithEvernote}),g().A.setState({...g().A.state,linkingAccount:!0,showLoader:!0}),void(0,n().P)(b);const j=await p().P(t,{width:580,height:700,url:b,titleMessage:v.titleMessage});if(!j)return;const A=r().qg(j),w=A.query.oauth_token,C=A.query.oauth_verifier;if(!w||!C)return;d().m({message:v.authenticatingWithEvernote});const k=await c().callApi({eventName:"authWithEvernote",environment:t,data:{requestToken:w,verifier:C}});"failed"===k.type?(l()._$(t,{import_source:"evernote",data:{import_type:"api",status:"failure",error:k.error,userId:t.currentUser.id},flowId:S}),console.error(k.error),i().Qg(k),d().V()):(l()._$(t,{import_source:"evernote",data:{import_type:"api",status:"success",userId:t.currentUser.id},flowId:S}),l().mu(t,{integration_name:"evernote"}),await o.refresh(),y&&f().A.setState({open:!0}),m().Ay.setState({...m().Ay.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:void 0}),y&&await x({environment:t,requestStore:o}),d().V())}async function x(e){const{environment:t,requestStore:o}=e;try{g().A.setState({...g().A.state,isFetchingNotebooks:!0,showLoader:!0});const e=await c().callApi({eventName:"getEvernoteNotebooks",environment:t,data:{}});if(await o.refresh(),"success"===e.type){g().A.setState({...g().A.state,notebooksResponse:e.data,isFetchingNotebooks:!1,showLoader:!1});const{userInfo:t,notebooks:o}=e.data;return{userInfo:t,notebooks:o}}return console.error(e.error),{notebooks:[],userInfo:void 0}}catch(n){return console.error(n),{notebooks:[],userInfo:void 0}}}},167170:(e,t,o)=>{o.d(t,{_:()=>a});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.29 3.29 13.41 13.41",svg:(0,o(474848).jsx)("path",{d:"M3.3 4.825c0-.842.683-1.525 1.525-1.525h3.15c.842 0 1.525.683 1.525 1.525v10.35c0 .842-.683 1.525-1.525 1.525h-3.15A1.525 1.525 0 0 1 3.3 15.175zm1.525-.275a.275.275 0 0 0-.275.275v10.35c0 .152.123.275.275.275h3.15a.275.275 0 0 0 .275-.275V4.825a.275.275 0 0 0-.275-.275zm5.675.275v3.15c0 .842.683 1.525 1.525 1.525h3.15c.842 0 1.525-.683 1.525-1.525v-3.15c0-.842-.683-1.525-1.525-1.525h-3.15c-.842 0-1.525.683-1.525 1.525m1.525-.275h3.15c.152 0 .275.123.275.275v3.15a.275.275 0 0 1-.275.275h-3.15a.275.275 0 0 1-.275-.275v-3.15c0-.152.123-.275.275-.275m0 5.95c-.842 0-1.525.683-1.525 1.525v3.15c0 .842.683 1.525 1.525 1.525h3.15c.842 0 1.525-.683 1.525-1.525v-3.15c0-.842-.683-1.525-1.525-1.525zm-.275 1.525c0-.152.123-.275.275-.275h3.15c.152 0 .275.123.275.275v3.15a.275.275 0 0 1-.275.275h-3.15a.275.275 0 0 1-.275-.275z"})},a=(0,o(340498).wt)("layout",n,"default")},171347:(e,t,o)=>{o.d(t,{$:()=>l});o(296540);var n=()=>o(401497),a=()=>o(100622),i=o(474848);const s={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:16,height:16,fontSize:10,textAlign:"center",fontWeight:o(284371).Wy.semibold,borderRadius:4,position:"static",marginInlineStart:6,WebkitFontSmoothing:"auto"},r=99;function l({count:e,style:t,numberStyle:o,fadeIn:l,showExcessUnreadsAsStale:p,isTranslucent:u}){const m=(0,n().IS)((()=>{const o=(e??0)>r;return{badge:{...s,...t,...o&&{width:void 0,padding:2},background:p&&o?a().Tj.gray.background[u?"secondaryTranslucent":"tertiary"]:a().Tj.red.background.accentPrimary,color:p&&o?a().Tj.gray.text.accentPrimary:a().Tj.red.text.inversePrimary,...l&&{transition:"opacity 0.1s",opacity:c(e)?1:0}}}}),[e,l,u,p,t]);return l||c(e)?(0,i.jsx)("div",{style:m.badge,children:(0,i.jsx)(d,{count:e,numberStyle:o})}):null}function c(e){return!!e&&e>0}function d({count:e,numberStyle:t}){return e?1===e?(0,i.jsx)("span",{style:{marginInlineStart:-.5,...t},children:"1"}):e>r?(0,i.jsx)("span",{style:{letterSpacing:-.5,...t},children:"99+"}):e>9?(0,i.jsx)("span",{style:{letterSpacing:-.5,marginInlineStart:-.5,...t},children:e}):(0,i.jsx)("span",{style:{...t},children:e}):null}},199483:(e,t,o)=>{o.d(t,{o:()=>a});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"3.7 1.41 8.6 12.78",svg:(0,o(474848).jsx)("path",{d:"M9.635 1.955a.5.5 0 0 0-.905-.328l-4.935 6.84a.5.5 0 0 0 .405.793h2.478l-.32 4.4a.5.5 0 0 0 .903.33l4.944-6.833a.5.5 0 0 0-.405-.793H9.32z"})},a=(0,o(340498).wt)("lightningFillSmall",n,"fillSmall")},210741:(e,t,o)=>{o.d(t,{A:()=>S,l:()=>I});o(581454),o(296540);var n=()=>o(907258),a=()=>o(717137),i=()=>o(383036),s=()=>o(484714),r=()=>o(590526),l=()=>o(250910),c=()=>o(118307),d=()=>o(631524),p=()=>o(26697),u=()=>o(663639),m=()=>o(637997),g=()=>o(69708),f=()=>o(680977),h=()=>o(419357),v=()=>o(547149),y=()=>o(519116),x=o(474848);function S(){const e=(0,r().K8)((()=>{var e;return null===(e=n().default.state)||void 0===e||null===(e=e.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.emoji_picker_skin_tone}),[]),t=(0,s().v3)(),o=(0,r().uB)(void 0,c().A),f=(0,s().WS)();return(0,x.jsx)(p().m,{renderTooltip:()=>(0,x.jsx)(g().sA,{defaultMessage:"Select skin tone",id:"emojiPickerSkinTonePicker.selectSkinTone"}),placement:"bottom",render:n=>(0,x.jsx)(l().A,{buttonPopupStore:o,popupType:l().z.Popup,renderOrigin:t=>(0,x.jsx)(d().p,{size:"sm",style:{fontSize:20,justifyContent:"center",height:f?h().LG:h().yD,width:f?h().LG:h().yD},...(0,i().A)(t,n),children:void 0!==e?m().pi[e]:"✋"}),render:o=>function(e){const{parent:t,environment:o,currentSkinTone:n}=e,i=m().pi.map(((e,n)=>({key:e,action:()=>{t.close(),I({environment:o,skinTone:n})},render:t=>(0,x.jsx)(y().A,{...t,insertEmoji:()=>{},emoji:e,variations:void 0,showTooltip:!1})})));return(0,x.jsx)(a().A,{debugName:"EmojiPickerSkinTonePicker",capture:!0,allowEsc:!0,children:(0,x.jsx)(u().A,{type:u().O.Horizontal,initialFocus:n,sections:[{key:"variations",render:e=>(0,x.jsx)("div",{style:{display:"flex",padding:4},...e}),items:i}]})})}({parent:o,environment:t,currentSkinTone:e}),...n})})}function I(e){const{environment:t,skinTone:o}=e,{currentUserSettingsStore:a}=n().default.state;a&&v().createAndCommit({userAction:"mediaPicker.setEmojiSkinTone",environment:t,canUndo:!0,perform:e=>{(0,f().m)({userSettingsStore:a,transaction:e,data:{emoji_picker_skin_tone:o}})}})}},231314:(e,t,o)=>{o.d(t,{y:()=>s});o(296540);var n=()=>o(401497),a=()=>o(100622),i=o(474848);function s({icon:e,backgroundColor:t,backgroundSize:o}){const s=(0,n().IS)((()=>({iconContainer:{height:o??28,width:o??28,borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center",background:t??a().Tj.background.tertiaryTranslucent}})),[t,o]);return(0,i.jsx)("div",{style:s.iconContainer,children:e})}},243581:(e,t,o)=>{o.r(t),o.d(t,{arrowBranchIcon:()=>a,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.48 3.92 13.04 12.85",svg:(0,o(474848).jsx)("path",{d:"M3.483 4.55c0-.345.28-.625.625-.625h3.5a.625.625 0 1 1 0 1.25H5.617L8.86 8.42A6 6 0 0 1 10 10.007a6 6 0 0 1 1.14-1.588l3.243-3.244h-1.99a.625.625 0 1 1 0-1.25h3.5c.344 0 .624.28.624.625v3.5a.625.625 0 0 1-1.25 0V6.06l-3.243 3.244a4.78 4.78 0 0 0-1.399 3.358v4.108h-1.25v-4.108a4.78 4.78 0 0 0-1.398-3.358L4.733 6.059V8.05a.625.625 0 1 1-1.25 0z"})},a=(0,o(340498).wt)("arrowBranch",n,"default")},251994:(e,t,o)=>{o.d(t,{A:()=>$,h:()=>Z});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(672577);var n=o(296540),a=()=>o(564884),i=()=>o(242422),s=()=>o(813974),r=()=>o(782482),l=()=>o(726637),c=()=>o(771540),d=()=>o(484714),p=()=>o(590526),u=()=>o(401497),m=()=>o(128933),g=()=>o(420802),f=()=>o(807449),h=()=>o(31511),v=()=>o(546926),y=()=>o(631524),x=()=>o(160432),S=()=>o(26697),I=()=>o(890492),b=()=>o(634201),j=()=>o(522419),A=()=>o(477336),w=()=>o(848392),C=()=>o(89463),k=()=>o(837420),T=()=>o(798880),M=()=>o(69708),P=()=>o(100622),_=()=>o(496603),B=()=>o(534177),F=()=>o(284371),E=()=>o(384944),R=()=>o(892632),O=()=>o(500507),L=()=>o(87878),D=()=>o(594794),V=()=>o(937182),z=()=>o(423219),N=()=>o(797162),U=()=>o(547149),W=()=>o(129286),H=()=>o(267419),q=o(474848);const K=(0,M().YK)({nameInputPlaceholder:{defaultMessage:"have-fun-with-it",id:"customEmojiUploadPopup.nameInput.placeholder"},urlPasteInputPlaceholder:{defaultMessage:"Paste a link to an image...",id:"customEmojiUploadPopup.urlPasteInput.placeholder"},nameInputDuplicateError:{defaultMessage:"Name already taken",id:"customEmojiUploadPopup.nameInput.duplicateError"},nameInputCharacterError:{defaultMessage:"Name can only contain lowercase letters, numbers, hyphens, or underscores",id:"customEmojiUploadPopup.nameInput.characterError"},nameInputLengthError:{defaultMessage:"Name must be less than 50 characters",id:"customEmojiUploadPopup.nameInput.lengthError"},fileUploadImageError:{defaultMessage:"Only images are supported",id:"customEmojiUploadPopup.fileUpload.imageError"},urlPasteHintImageError:{defaultMessage:"Pasted link does not contain an image.{br}Use {keyboardShortcut} to paste a different link",id:"customEmojiUploadPopup.urlPasteHint.imageError"},urlPasteInputImageError:{defaultMessage:"Pasted link does not contain an image",id:"customEmojiUploadPopup.urlPasteInput.imageError"},customEmojiLimitError:{defaultMessage:"Your workspace has reached the custom emoji limit of {customEmojiLimit}",id:"customEmojiUploadPopup.customEmojiLimit.error"},uploadReplaceButton:{defaultMessage:"Replace",id:"customEmojiUploadPopup.uploadButton.replace"}});function $(e){const t=(0,d().v3)(),o=(0,M().tz)(),[f,A]=(0,n.useState)(""),[w,O]=(0,n.useState)(null),[$,Z]=(0,n.useState)(null),[Q,X]=(0,n.useState)(null),[ee,te]=(0,n.useState)(!1),[oe,ne]=(0,n.useState)(""),ae=e.allowUrlPaste&&t.device.isDesktop,ie=e.allowUrlPaste&&l().A.isMobile,{existingEmojiStore:se,isEditing:re}=(0,p().K8)((()=>({existingEmojiStore:N().A.state.store,isEditing:N().A.state.isEditing})),[]),le=(0,p().K8)((()=>null==se?void 0:se.getName()),[se]),ce=(0,p().K8)((()=>(0,L().vZ)()),[]),de=(0,p().K8)((()=>{var e;return ce?(null===(e=z().A.getData(t,{spaceId:ce.id}))||void 0===e?void 0:e.nameToPointerMap)??new Map:new Set}),[t,ce]),pe=(0,p().K8)((()=>H().A.state.emojiByName),[]),ue=(0,p().K8)((()=>(0,L().wA)({spaceStore:ce})),[ce]),me=(0,p().K8)((()=>i().default.getConfigKey("custom_emojis_config","limit")),[]),ge=(0,n.useCallback)((e=>{const t=e.replace(/ /g,"-");A(t),0!==t.length?C().x.VALID_NAME_REGEX.test(t)?t.length>50?O(o.formatMessage(K.nameInputLengthError)):t===le&&re||!de.has(t)&&!pe.hasOwnProperty(t)?O(null):O(o.formatMessage(K.nameInputDuplicateError)):O(o.formatMessage(K.nameInputCharacterError)):O(null)}),[le,re,de,pe,o]);function fe(e){const t=(0,j().pc)({source:e,secureFileConfigRootpath:l().A.secureFileConfig.rootPath,secureFileConfigHostname:l().A.secureFileConfig.hostname}),o=t?t.link:e,n=new Image;n.src=o,n.onload=()=>{Z({type:"url",url:o,isExistingImage:!1}),X(null)},n.onerror=()=>{X(ae?K.urlPasteHintImageError:K.urlPasteInputImageError)}}(0,n.useEffect)((()=>{null!=se&&se.isDefined()&&(ge(se.getName()),Z({type:"url",url:se.getUrl(),isExistingImage:!0}))}),[se,re,ge]);const he=void 0!==ce&&(!e.confirmToAdd||ee),ve=!re&&de.size>=me,ye=he?Boolean(!f)||Boolean(!$)||Boolean(w)||f===le&&(null==$?void 0:$.isExistingImage)&&re||ve:Boolean(!$);const xe=function(e){const{customEmojiLimitReached:t}=e;return(0,u().IS)((()=>({wrapper:{padding:"0 16px",display:"flex",flexDirection:"column",fontSize:F().J.UIRegular.desktop},title:{marginTop:12,fontSize:F().J.UIRegular.desktop,color:P().Tj.text.primary,fontWeight:F().Wy.semibold},description:{marginTop:2,color:P().Tj.text.secondary,fontSize:F().J.UISmall.desktop},errorDescription:{marginTop:2,color:P().Tj.red.text.accentPrimary,fontSize:F().J.UISmall.desktop},textInputContainer:{marginTop:20},textInputLabel:{marginBottom:6,color:P().Tj.text.secondary,fontWeight:F().Wy.medium,fontSize:F().J.UISmall.desktop},nameErrorText:{marginTop:10,color:P().Tj.red.text.accentPrimary,fontSize:F().J.UISmall.desktop},imageErrorText:{marginTop:10,color:P().Tj.red.text.accentPrimary,fontSize:F().J.UISmall.desktop,textAlign:"center"},checkboxContainer:{marginTop:12,display:"flex",alignItems:"center",gap:8,fontSize:F().J.UIRegular.desktop,...t&&{color:P().Tj.text.disabled}},buttonFooter:{marginTop:16,marginBottom:12,display:"flex",flexDirection:l().A.isMobile?"column-reverse":"row",gap:8,justifyContent:"space-between",alignItems:"center"},secondaryButton:{color:P().Tj.text.secondary},primaryButton:{...l().A.isMobile&&{width:"100%"}},pastePrompt:{marginTop:10,color:P().Tj.text.tertiary,textAlign:"center",fontSize:F().J.UISmall.desktop},disabledCheckbox:{stroke:P().Tj.border.secondary},tooltip:{maxWidth:240,textWrap:"wrap"},divider:{width:19,height:1,borderBottom:`1px solid ${P().Tj.border.primaryTranslucent}`},dividerContainer:{display:"flex",gap:4,alignItems:"center",justifyContent:"center",marginTop:10,marginBottom:10,color:P().Tj.text.tertiary,textAlign:"center",fontSize:F().J.UISmall.desktop}})),[t])}({customEmojiLimitReached:ve}),Se=e.showTitle?(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)("div",{style:xe.title,children:re?(0,q.jsx)(M().sA,{id:"customEmojiUploadPopup.title.edit",defaultMessage:"Edit custom emoji"}):(0,q.jsx)(M().sA,{id:"customEmojiUploadPopup.title.add",defaultMessage:"Add custom emoji"})}),ve?(0,q.jsx)("div",{style:xe.errorDescription,children:(0,q.jsx)(M().sA,{...K.customEmojiLimitError,values:{customEmojiLimit:me.toLocaleString()}})}):(0,q.jsx)("div",{style:xe.description,children:(0,q.jsx)(M().sA,{id:"customEmojiUploadPopup.description",defaultMessage:"Custom emoji can be used by anyone in your workspace"})})]}):null,Ie=(0,q.jsx)(Y,{image:$,onFileChanged:e=>{if(null===e)return void Z(null);(null==e?void 0:e.name)&&(""===f||"file"===(null==$?void 0:$.type)&&J($.file.name)===f)&&ge(J(e.name)),Z({file:e,type:"file"})},isSavingAsCustomEmoji:he,largeEmoji:e.largeEmoji,hideReplaceButton:e.allowUrlPaste,setError:X,disabled:ve&&he}),be=(0,p().K8)((()=>{const e=s().getKeyboardShortcuts();return(0,c().dK)({name:"paste",shortcuts:e,environment:t})}),[t]),je=ae&&null===$&&!Boolean(Q)?(0,q.jsx)("div",{style:xe.pastePrompt,children:(0,q.jsx)(M().sA,{id:"customEmojiUploadPopup.pastePrompt.label",defaultMessage:"or {keyboardShortcut} to paste an image or link",values:{keyboardShortcut:be}})}):null,Ae=ie&&null===$?(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)("div",{style:xe.dividerContainer,children:[(0,q.jsx)("div",{style:xe.divider}),(0,q.jsx)(M().sA,{id:"customEmojiUploadPopup.divider.label",defaultMessage:"or"}),(0,q.jsx)("div",{style:xe.divider})]}),(0,q.jsx)(h().A,{placeholder:o.formatMessage(K.urlPasteInputPlaceholder),value:oe,onChange:e=>ne(e.target.value),type:"text",autoComplete:"off"})]}):null,we=Boolean(Q)?(0,q.jsx)("div",{style:xe.imageErrorText,children:(0,q.jsx)(M().sA,{...Q,values:{br:(0,q.jsx)("br",{}),keyboardShortcut:be}})}):null,Ce=t.device.isDesktop&&ue&&e.confirmToAdd&&null!==$?(0,q.jsx)(S().m,{style:xe.tooltip,placement:"bottom",alignment:"start",disableTooltip:!ve,renderTooltip:()=>(0,q.jsx)(M().sA,{...K.customEmojiLimitError,values:{customEmojiLimit:me.toLocaleString()}}),render:e=>(0,q.jsxs)("label",{...e,style:xe.checkboxContainer,htmlFor:"confirmToAddCheckbox",children:[(0,q.jsx)(g().S,{id:"confirmToAddCheckbox",size:14,checked:ee,onClick:()=>te(!ee),disabled:ve,stroke:ve?xe.disabledCheckbox.stroke:void 0}),(0,q.jsx)(M().sA,{id:"customEmojiUploadPopup.confirmToAddCheckbox.label",defaultMessage:"Add to workspace emoji library"})]})}):null,ke=he&&(!e.allowUrlPaste||e.allowUrlPaste&&null!==$)?(0,q.jsxs)("label",{style:xe.textInputContainer,htmlFor:"emojiName",children:[(0,q.jsx)("div",{style:xe.textInputLabel,children:(0,q.jsx)(M().sA,{id:"customEmojiUploadPopup.input.label",defaultMessage:"Emoji name"})}),(0,q.jsx)(h().A,{id:"emojiName",placeholder:o.formatMessage(K.nameInputPlaceholder),value:f,onChange:e=>ge(e.target.value),type:"text",autoFocus:!0,focus:!0,onSubmit:e=>{e.preventDefault()},autoComplete:"off",disabled:ve}),Boolean(w)?(0,q.jsx)("div",{style:xe.nameErrorText,children:w}):void 0]}):null,Te=(0,q.jsxs)("div",{style:xe.buttonFooter,children:[e.allowUrlPaste&&null!==$?(0,q.jsx)(y().p,{style:xe.secondaryButton,onClick:()=>{Z(null),X(null),A(""),O(null),te(!1),ne("")},children:(0,q.jsx)(M().sA,{id:"customEmojiUploadPopup.backButton.label",defaultMessage:"Back"})}):t.device.isDesktop?(0,q.jsx)(y().p,{style:xe.secondaryButton,onClick:()=>{var t;N().A.dismiss(),null===(t=e.onCancel)||void 0===t||t.call(e)},children:(0,q.jsx)(M().sA,{id:"customEmojiUploadPopup.cancelButton.label",defaultMessage:"Cancel"})}):null,ie&&null===$?(0,q.jsx)(x().A,{colorPalette:"blue",onClick:()=>fe(oe),disabled:0===oe.length,style:xe.primaryButton,children:(0,q.jsx)(M().sA,{id:"customEmojiUploadPopup.nextButton.label",defaultMessage:"Next"})}):(0,q.jsx)(x().A,{colorPalette:"blue",onClick:function(){var o;ye||(he?re&&void 0!==se?async function(e){const{environment:t,name:o,existingEmojiStore:n,image:a}=e,i=n.getModel();if(!i)return;if(a.isExistingImage)U().createAndCommit({userAction:"customEmojiActions.rename",environment:t,canUndo:!0,perform:e=>{U().applyOperation({store:n,operation:i.ops.rename(o),transaction:e})}}),await W().transactionQueue.awaitRecordTransaction(n.pointer),m().D6({label:(0,q.jsx)(G,{name:o})});else{const e=async e=>{U().createAndCommit({userAction:"customEmojiActions.replaceImageAndRename",environment:t,canUndo:!0,perform:t=>{U().applyOperation({store:n,operation:i.ops.setUrl(e),transaction:t}),U().applyOperation({store:n,operation:i.ops.rename(o),transaction:t})}}),await W().transactionQueue.awaitRecordTransaction(n.pointer),m().D6({label:(0,q.jsx)(G,{name:o})})};"file"===a.type?R().QM({environment:t,file:a.file,bucket:"public",onComplete:e}):"url"===a.type?e(a.url):(0,B().HB)(a)}N().A.dismiss()}({environment:t,name:f,existingEmojiStore:se,image:$}):((0,a().u)({environment:t,event:{eventName:"create_custom_emoji",eventProperties:{entrypoint:e.entrypoint,is_first_emoji:0===de.size}}}),function(e){const{environment:t,name:o,currentSpaceStore:n,uploadFileEventHandlers:a,image:i}=e,s=async e=>{const i=(0,D().JH)({environment:t,table:k().e,spaceId:n.getSpaceId()});if(U().createAndCommit({userAction:"customEmojiActions.createCustomEmoji",environment:t,canUndo:!0,perform:a=>{E().eC({environment:t,table:k().e,inMemoryRecordCache:n.inMemoryRecordCache,transaction:a,value:{id:i.id,url:e,name:o,file_ids:[],space_id:i.spaceId,created_by_id:t.currentUser.id,created_by_table:T().oo,created_time:Date.now(),alive:!0}})}}),await W().transactionQueue.awaitRecordTransaction(i),m().D6({label:(0,q.jsx)(M().sA,{id:"uploadCustomEmoji.success",defaultMessage:"{name} has been added to your workspace",values:{name:o}})}),null!=a&&a.onComplete){const e=b().qg.toString(b().qg.fromPointer(i));a.onComplete(e)}};"file"===i.type?R().QM({...a,environment:t,file:i.file,bucket:"public",onComplete:s}):"url"===i.type?s(i.url):(0,B().HB)(i);N().A.dismiss()}({environment:t,name:f,currentSpaceStore:ce,uploadFileEventHandlers:e.uploadFileEventHandlers,image:$})):null===(o=e.onUploadWithoutSaving)||void 0===o||o.call(e,$))},disabled:ye,style:xe.primaryButton,children:(0,q.jsx)(M().sA,{id:"customEmojiUploadPopup.saveButton.label",defaultMessage:"Save"})})]});let Me;return Me=l().A.isMobile?{menuType:v().gu.ActionSheet}:{menuType:v().gu.Popup,minWidth:280},(0,q.jsx)(I().A,{...Me,children:(0,q.jsx)(r().N,{debugName:"CustomEmojiUploadPopup",capture:!0,onUp:_().D_,onDown:_().D_,onLeft:_().D_,onRight:_().D_,onBackspace:_().D_,onSelectAll:_().D_,onUndo:_().D_,onRedo:_().D_,onTab:_().D_,onUntab:_().D_,onPaste:ae&&null===$?function(e){e.preventDefault();const t=Array.from(e.clipboardData.files).find((e=>e.type.startsWith("image/")));if(t){if(!(0,V().B7)({fileMimeType:t.type,allowedType:V().Dn}))return void X(K.fileUploadImageError);return(null==t?void 0:t.name)&&(""===f||"file"===(null==$?void 0:$.type)&&J($.file.name)===f)&&ge(J(t.name)),Z({file:t,type:"file"}),void X(null)}const o=e.clipboardData.getData("text/plain");o&&fe(o)}:_().D_,children:(0,q.jsxs)("div",{style:xe.wrapper,children:[Se,Ie,je,Ae,we,Ce,ke,Te]})})})}function Y(e){const t=(0,d().v3)(),o=(0,M().tz)(),[a,i]=(0,n.useState)(null),{onFileChanged:s,image:r,isSavingAsCustomEmoji:l,largeEmoji:c,hideReplaceButton:p,setError:m,disabled:g}=e;(0,n.useEffect)((()=>{if(null!==r)if("file"===r.type)if(r.file instanceof File){const e=new FileReader;e.onload=e=>{e.target&&"string"==typeof e.target.result&&i(e.target.result)},e.readAsDataURL(r.file)}else r.file.dataURL&&i(r.file.dataURL);else"url"===r.type?i(r.url):(0,B().HB)(r);else i(null)}),[r]);const h=(0,u().IS)((()=>({wrapper:{marginTop:20,display:"flex",flexDirection:"column",alignItems:"stretch"},dropZone:{backgroundColor:P().Tj.inputBackground,borderRadius:4},dropZoneInnerEmpty:{height:"100%",display:"flex",flexDirection:"row",gap:8,padding:14,color:P().Tj.text.secondary,justifyContent:"center"},dropZoneInnerWithEmoji:{display:"flex",flexDirection:"column",padding:c?16:12,...!p&&{paddingBottom:4},alignItems:"center",gap:4},buttonCaption:{fontSize:F().J.UISmall.desktop,fontWeight:F().Wy.medium},previewLabel:{fontSize:F().J.UISmall.desktop,color:P().Tj.text.secondary,marginBottom:4},emojiContainer:{display:"flex",flexDirection:"row",alignItems:"center",gap:6},emojiImage:{width:c?80:48,height:c?80:48,padding:c?6:8,borderRadius:8,borderWidth:1,borderStyle:"solid",borderColor:P().Tj.border.primaryTranslucent,objectFit:l?"contain":"cover"},darkBackground:{background:P().Tj.primaryBlack},lightBackground:{background:P().Tj.white}})),[l,c,p]),v=(0,n.useCallback)((e=>{m(null),s(e??null)}),[s,m]),x=(0,n.useCallback)((async()=>{const e=await R().dA({environment:t,supportsMobileNativeFileUpload:!1,multiple:!1,accept:"image/jpeg, image/png, image/gif, image/webp, image/avif, image/svg+xml"});e.length&&((0,V().B7)({fileMimeType:e[0].type,allowedType:V().Dn})?v(e[0]):m(K.fileUploadImageError))}),[v,m,t]);return(0,q.jsx)("div",{style:h.wrapper,children:(0,q.jsx)(O().V,{type:V().Dn,style:h.dropZone,dropTargetKey:"customEmoji",onDropFile:e=>{"invalidFileDrop"!==e.type?(m(null),e.file&&v(e.file)):m(K.fileUploadImageError)},disabled:g,children:a?(0,q.jsxs)("div",{style:h.dropZoneInnerWithEmoji,children:[(0,q.jsx)("div",{style:h.previewLabel,children:(0,q.jsx)(M().sA,{id:"customEmojiUploadPopup.preview.label",defaultMessage:"Preview"})}),(0,q.jsxs)("div",{style:h.emojiContainer,children:[(0,q.jsx)("img",{style:{...h.emojiImage,...h.lightBackground},src:a,alt:"Light Mode Image"}),(0,q.jsx)("img",{style:{...h.emojiImage,...h.darkBackground},src:a,alt:"Dark Mode Image"})]}),p?void 0:(0,q.jsx)(y().p,{colorPalette:"gray",iconLeading:{icon:A().l,size:"xs"},onClick:x,"aria-label":o.formatMessage(K.uploadReplaceButton),disabled:g,disabledFeedback:g,children:(0,q.jsx)("div",{style:h.buttonCaption,children:o.formatMessage(K.uploadReplaceButton)})})]}):(0,q.jsxs)(y().p,{style:h.dropZoneInnerEmpty,onClick:x,disabled:g,disabledFeedback:g,children:[(0,q.jsx)(f().I,{icon:w().M,colorVariant:"secondary"}),(0,q.jsx)(M().sA,{id:"customEmojiUploadPopup.uploadButton.label",defaultMessage:"Upload an image"})]})})})}const Z=function(){const e=(0,M().tz)(),{open:t,originRect:n,entrypoint:a,isEditing:i}=(0,p().K8)((()=>N().A.state.open?{open:!0,originRect:N().A.state.originRect,entrypoint:N().A.state.entrypoint,isEditing:N().A.state.isEditing}:{open:!1,originRect:void 0,entrypoint:void 0,isEditing:!1}),[]),s=(0,p().K8)((()=>{if(N().A.state.open)return N().A.state.uploadFileEventHandlers}),[]);return(0,q.jsx)(o(127833).zD,{popupType:o(30537).n.Popup,open:t,originRect:n,placementToOrigin:"bottom",alignmentToOrigin:"start",onDismiss:()=>N().A.dismiss(),onClosed:()=>N().A.reset(),ariaLabel:e.formatMessage(i?{id:"customEmojiUploadPopup.ariaLabel.edit",defaultMessage:"Edit custom emoji"}:{id:"customEmojiUploadPopup.ariaLabel.add",defaultMessage:"Add custom emoji"}),render:()=>(0,q.jsx)($,{allowUrlPaste:!1,largeEmoji:!1,showTitle:!0,confirmToAdd:!1,entrypoint:a,uploadFileEventHandlers:s}),sameWidthAsOrigin:!1,trapFocus:!0})};function G({name:e}){return(0,q.jsx)(M().sA,{id:"editCustomEmoji.success",defaultMessage:"{name} has been edited",values:{name:e}})}function J(e){let t=e;const o=e.lastIndexOf(".");-1!==o&&(t=e.slice(0,o));const n=new RegExp(`[^${C().x.VALID_NAME_TOKENS}]`,"gu");return t.toLocaleLowerCase().replace(n,"-")}},257667:(e,t,o)=>{o.d(t,{$f:()=>w,xg:()=>T,HI:()=>M,q9:()=>C,w7:()=>A});o(898992),o(672577);var n=()=>o(726637),a=()=>o(381175),i=()=>o(732810),s=()=>o(584262),r=()=>o(938379),l=()=>o(519831),c=()=>o(496703),d=()=>o(498212),p=()=>o(534177),u=()=>o(939768),m=()=>o(44551);function g(e,t){var o;null===m().electronApi||void 0===m().electronApi||null===(o=m().electronApi.handleTabClicked)||void 0===o||o.call(m().electronApi,e,t)}var f=()=>o(619553),h=()=>o(211716),v=()=>o(492414),y=()=>o(729970),x=()=>o(246766),S=()=>o(321874),I=()=>o(857783),b=()=>o(600449),j=()=>o(867201);const A=new(o(592328).A);function w({result:e}){if(e.isSurrogateCollection){if(!e.collectionId)return;return{type:"collection",...e,collectionId:e.collectionId,isSurrogateCollection:!0}}return e.workflowData?{type:"agent",...e,workflowData:e.workflowData,isSurrogateCollection:!1}:{type:"page",...e,isSurrogateCollection:!1}}function C(e){const{searchResult:t,environment:o}=e,n="page"===t.type?(0,y().p)(t):t.store.id;o.device.isElectron?function(e){const{searchResult:t,scrollToBlockId:o,electronTabSearch:n,openInNew:a,context:i,pageVisitSource:s,queryId:r,environment:l}=e;if(!n)return;const{isNewTab:c}=n,{store:d}=t,p=d.id,u=T({result:t,queryId:r,pageVisitSource:s,scrollToBlockId:o}),m=n?n.tabs.find((e=>e.pageId===p)):void 0,h=Boolean(a),v="tabs"===i||"query_results"===i;if(m&&!h&&v)return void g(m.id,m.tabSectionId);if(c)return void(0,f().B)({makeTabActive:!h,url:u,position:"end",isNewPage:"new_page"===i,openInNew:a??"tab",environment:l});k({...e,scrollToBlockId:o})}({...e,scrollToBlockId:n}):k({...e,scrollToBlockId:n})}function k(e){const{searchResult:t,environment:o,openInNew:n,pageVisitSource:a,queryId:r,scrollToBlockId:c}=e,{store:p}=t,m=function(e){if("collection"===e.type)return i().m.createChildStore(e.store,{table:l().Vl,id:e.collectionId,spaceId:e.store.getSpaceId()})}(t);if(m)(0,b().Zj)({environment:o,store:m,pageVisitSource:a,openInNew:n,visitType:h().ig.Search});else if("agent"===t.type){const e=function(e,t){if(!e)return;const{baseUrl:o}=(0,v().D4)({store:t,preferPublicLink:!1,disableSlug:!1,fullyQualified:!0}),n=`${o||""}/agent/${d().Xw(t.id)}`,[a,i]=(0,s().DU)(s().y8.SearchQuery),r={};return r[a]=i,u().Gm({url:n,query:r})}(t.workflowData,t.store);e&&(0,x().navigate)({environment:o,url:e,openInNew:n,queryId:r})}else void 0===c?j().Y({store:p,openInNew:n,environment:o,pageVisitSource:a,queryId:r}):I().uK({environment:o,store:p,scrollToBlockId:c,openInNew:n,visitType:h().ig.Search,pageVisitSource:a,queryId:r})}function T(e){var t,o;const{result:a,queryId:i,pageVisitSource:l,scrollToBlockId:d}=e;switch(a.type){case"agent":const e=(0,c().L)({workflowId:a.id,params:{},pageVisitSource:l??s().y8.SearchQuery}),{baseUrl:u}=(0,v().D4)({store:a.store,preferPublicLink:!1,disableSlug:!1,fullyQualified:!0});return`${u}${e}`;case"collection":return(0,r().C)({collectionId:a.collectionId,spaceId:a.store.getSpaceId(),spaceDomain:null===(t=a.store.getSpaceStore())||void 0===t?void 0:t.getEditDomain(),parentCvbId:null===(o=a.store.getParentPointer())||void 0===o?void 0:o.id,domainBaseUrl:n().A.domainBaseUrl,pageVisitSource:l??s().y8.SearchQuery,queryId:i});case"page":case"custom":return(0,v().Ay)({store:a.store,fullyQualified:!0,pageVisitSource:l??s().y8.SearchQuery,queryId:i,scrollToBlockId:d});default:(0,p().HB)(a)}}function M({environment:e,event:t,tabId:o,tabSectionId:n,url:i}){S().st({environment:e,reset:!1});const s=(0,a().V)(t);s?(0,f().B)({makeTabActive:!1,url:i,position:"end",openInNew:s??"tab",environment:e}):g(o,n)}},281844:(e,t,o)=>{o.d(t,{v:()=>a});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"4.62 1.77 10.76 15.98",svg:(0,o(474848).jsx)("path",{d:"M12.043 2.444a.625.625 0 0 0-1.13-.41l-6.17 8.55a.625.625 0 0 0 .507.99h3.098l-.401 5.5a.625.625 0 0 0 1.13.412l6.18-8.54a.625.625 0 0 0-.507-.991h-3.099z"})},a=(0,o(340498).wt)("lightningFill",n,"fill")},283080:(e,t,o)=>{o.d(t,{A:()=>a});class n extends(()=>o(757695))().Store{getInitialState(){return{notebooksResponse:{notebooks:[]},isFetchingNotebooks:!0,showLoader:!1,linkingAccount:!1}}}const a=new n},283220:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,unsplashTintableIcon:()=>a});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"1 1 18 18",svg:(0,o(474848).jsx)("path",{d:"M6.625 6.063V1h6.75v5.063zm6.75 2.812H19V19H1V8.875h5.625v5.063h6.75z"})},a=(0,o(340498).wt)("unsplashTintable",n,"tintable")},301879:(e,t,o)=>{o.d(t,{G:()=>g});o(296540);var n=()=>o(590526),a=()=>o(401497),i=()=>o(404905),s=()=>o(416504),r=()=>o(792071),l=()=>o(69708),c=()=>o(100622),d=()=>o(284371),p=()=>o(562969),u=()=>o(187820),m=o(474848);function g({collectionStore:e,hideCollectionViewBlockIcon:t}){const o=(0,l().tz)(),g=(0,p().useCollectionNameOrDefault)(e),{collectionIcon:f,collectionViewBlockStore:h}=(0,n().K8)((()=>({collectionIcon:e.getIcon(),collectionViewBlockStore:e.getParentCollectionViewBlockStore()})),[e]),v=(0,n().K8)((()=>!(null!=h&&h.hasSingleSourceAndNoLinkedCollections())),[h]),y=(0,n().K8)((()=>({title:(null==h?void 0:h.getRenderTitleWithPlaceholder({userTimeZone:(0,s().P)(),intl:o}))??o.formatMessage(r().zgg.messages.untitled),icon:null==h?void 0:h.getIcon()})),[h,o]),x=(0,a().IS)((()=>({container:{display:"flex",alignItems:"center",gap:8,flex:1,minWidth:0,overflow:"hidden"},pathDivider:{color:c().Tj.text.tertiary},collectionViewBlockTitle:{...d().RC,minWidth:50,flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"fit-content"},collectionName:{...d().RC,flexShrink:1,minWidth:100},blockTooltipTitle:{maxWidth:200}})),[]);return(0,m.jsxs)("div",{style:x.container,children:[v?(0,m.jsxs)(m.Fragment,{children:[t?void 0:(0,m.jsx)(u().B6,{icon:y.icon,iconRecordCategory:"collectionViewBlock",size:20,disabled:!0,isEmptyPage:!1}),(0,m.jsx)("span",{style:x.collectionViewBlockTitle,children:(0,m.jsx)(i().j,{tooltipStyle:x.blockTooltipTitle,children:y.title})}),(0,m.jsx)("span",{style:x.pathDivider,children:"/"})]}):void 0,(0,m.jsx)(u().B6,{icon:f,iconRecordCategory:"collection",size:20,disabled:!0,isEmptyPage:!0}),(0,m.jsx)("span",{style:x.collectionName,children:g})]})}},327165:(e,t,o)=>{o.d(t,{A:()=>l});o(296540);var n=()=>o(726637),a=()=>o(718827),i=()=>o(160432),s=()=>o(100622),r=o(474848);const l=function({onClick:e,disabled:t,title:n}){return(0,r.jsx)(o(424400).Ay,{title:(0,r.jsx)(c,{onClick:e,disabled:t,title:n})})};function c({onClick:e,disabled:t,title:o}){const l={width:"100%",color:s().oZ.blue};return n().A.isMobile?(0,r.jsx)(a().Ay,{onClick:e,disabled:t,style:l,children:o}):(0,r.jsx)(i().A,{colorPalette:"blue",onClick:e,disabled:t,style:{width:"100%",maxWidth:300,display:"flex",margin:"auto"},children:o})}},328384:(e,t,o)=>{o.d(t,{A:()=>Tt,h:()=>kt});o(581454);var n=o(296540),a=()=>o(907258),i=()=>o(59226),s=()=>o(726637),r=()=>o(484714),l=()=>o(590526),c=()=>o(401497),d=()=>o(807449),p=()=>o(302501),u=()=>o(584262),m=()=>o(869190),g=()=>o(187174),f=()=>o(886358),h=()=>o(69708),v=()=>o(100622),y=()=>o(676510),x=()=>o(496603),S=()=>o(284371),I=()=>o(559926),b=()=>o(769864),j=()=>o(933922),A=()=>o(107975),w=()=>o(89383),C=()=>o(509778),k=(o(944114),o(898992),o(354520),()=>o(710515)),T=()=>o(249046),M=()=>o(631524),P=()=>o(160432),_=()=>o(493552),B=()=>o(338862),F=()=>o(863330),E=()=>o(984645),R=()=>o(989133),O=()=>o(465960),L=()=>o(898808),D=o(474848);const V={privateSpaceLabel:{id:"confluenceMultiSpaceImport.teamspaceMapper.privateSpace",defaultMessage:"Private",description:"Label for private space option"},newTeamspaceLabel:{id:"confluenceMultiSpaceImport.teamspaceMapper.newTeamspace",defaultMessage:"Create new teamspace",description:"Label for creating new teamspace option"},mappingTitle:{id:"confluenceMultiSpaceImport.teamspaceMapper.title",defaultMessage:"Choose where to import each Confluence space",description:"Title for teamspace mapping step"},mappingDescription:{id:"confluenceMultiSpaceImport.teamspaceMapper.description",defaultMessage:"Each Confluence space will be imported into the Notion teamspace you choose.",description:"Description for teamspace mapping step"},backButton:{id:"confluenceMultiSpaceImport.teamspaceMapper.back",defaultMessage:"Back",description:"Back button text"},importButton:{id:"confluenceMultiSpaceImport.teamspaceMapper.import",defaultMessage:"Import {count, plural, one {# space} other {# spaces}}",description:"Import button text with count"},accessNote:{id:"confluenceMultiSpaceImport.teamspaceMapper.accessNote",defaultMessage:"Imported content will be accessible to all users who have access to the selected teamspace.",description:"Note about teamspace access permissions for imported content"}};function z({analyticsFrom:e}){const t=(0,r().v3)(),o=(0,h().tz)(),{selectedSpaces:i,spaceToTeamspaceMapping:s}=(0,l().O$)(C().Q),c=(0,l().K8)((()=>{const e=a().default.state.sidebarSpaceViewStore,t=e?(0,k().r)(e).map((e=>e.canAddOrRemoveTopLevelPages()?{id:e.id,name:e.getName(),icon:(0,D.jsx)(L().x,{disabled:!0,store:e})}:null)).filter((e=>null!==e)):void 0,n=[];return t&&n.push(...t.map((e=>{var t;return{key:e.id,searchTerm:(null===(t=e.name)||void 0===t?void 0:t.split(" "))||void 0,icon:e.icon,name:e.name||""}}))),n.push({key:"private",searchTerm:["private"],icon:(0,D.jsx)(d().I,{icon:B().lockFillSmallIcon,size:"sm"}),name:o.formatMessage(V.privateSpaceLabel)}),n.push({key:"create",searchTerm:["new","create"],icon:(0,D.jsx)(d().I,{icon:F().plusSmallIcon,size:"sm"}),name:o.formatMessage(V.newTeamspaceLabel)}),n}),[o]),p=(0,n.useCallback)(((e,t)=>{if("create"===t)return void O().vn("confluence_importer",{onClose:t=>{w().a6({confluenceSpaceId:e,notionTeamspaceId:t})}});const o="private"===t?null:t;w().a6({confluenceSpaceId:e,notionTeamspaceId:o})}),[]),u=(0,n.useCallback)((()=>{w().Oo()}),[]),m=(0,n.useCallback)((async()=>{var e;const o=null===(e=a().default.state.sidebarSpaceViewStore)||void 0===e?void 0:e.getSpaceStore(),n=a().default.state.sidebarSpaceViewStore;o&&n&&await w().DJ({environment:t,spaceStore:o,spaceViewStore:n})}),[t]),g=(0,l().K8)((()=>(0,R().u7)()),[]),f=(0,l().K8)((()=>(0,R().oX)()),[]);return(0,D.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,D.jsxs)("div",{style:{flex:1,overflowY:"auto",padding:24,paddingBottom:0},children:[(0,D.jsxs)("div",{style:{marginBottom:24},children:[(0,D.jsx)("div",{style:{marginBottom:8},children:(0,D.jsx)(_().D,{styleKey:"titleSmSemibold",children:(0,D.jsx)(h().sA,{...V.mappingTitle})})}),(0,D.jsx)("div",{style:{marginBottom:8},children:(0,D.jsx)(_().D,{styleKey:"bodyRegular",colorVariant:"secondary",children:(0,D.jsx)(h().sA,{...V.mappingDescription})})}),(0,D.jsx)("div",{style:{paddingTop:4,paddingBottom:20},children:(0,D.jsx)(_().D,{styleKey:"bodyRegular",colorVariant:"tertiary",children:(0,D.jsx)(h().sA,{...V.accessNote})})})]}),(0,D.jsx)("div",{style:{marginBottom:24},children:i.map((e=>(0,D.jsx)(N,{confluenceSpace:e,currentMapping:s[e.id],teamspaceOptions:c,onTeamspaceSelect:t=>p(e.id,t)},e.id)))})]}),(0,D.jsx)("div",{style:{borderTop:"1px solid rgba(55, 53, 47, 0.09)",padding:24,paddingTop:16},children:(0,D.jsxs)(T().Ye,{justifyContent:"space-between",alignItems:"center",children:[(0,D.jsx)(M().p,{onClick:u,children:(0,D.jsx)(h().sA,{...V.backButton})}),(0,D.jsx)(P().A,{colorPalette:"blue",onClick:m,disabled:!f,children:(0,D.jsx)(h().sA,{...V.importButton,values:{count:g}})})]})})]})}function N({confluenceSpace:e,currentMapping:t,teamspaceOptions:o,onTeamspaceSelect:n}){return(0,D.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 0",borderBottom:"1px solid rgba(55, 53, 47, 0.09)"},children:[(0,D.jsxs)("div",{style:{flex:1},children:[(0,D.jsxs)(T().Ye,{alignItems:"center",gap:8,children:[(0,D.jsx)(_().D,{styleKey:"bodySemibold",children:e.name}),void 0!==e.count?(0,D.jsxs)(p().A,{isSmall:!0,children:[e.count," ","pages"]}):void 0]}),(0,D.jsx)("div",{style:{marginTop:4},children:(0,D.jsx)(_().D,{styleKey:"captionRegular",colorVariant:"secondary",children:e.key})})]}),(0,D.jsx)("div",{style:{flex:1},children:(0,D.jsx)(E().c,{onSelectOption:n,options:o,currentOption:(()=>{const e=null==t?void 0:t.notionTeamspaceId;if(void 0!==e)return null===e?"private":e})(),style:"full"})})]})}function U({analyticsFrom:e}){const t=(0,h().tz)(),o=(0,l().K8)((()=>C().Q.state.isModalOpen),[]),a=(0,n.useCallback)((()=>{w().Oo(),C().Q.resetImport()}),[]),i=(0,n.useCallback)((()=>(0,D.jsx)(z,{analyticsFrom:e})),[e]);return(0,D.jsx)(A().a,{ariaLabel:t.formatMessage({id:"confluenceMultiSpaceImportModal.modal.ariaLabel",defaultMessage:"Confluence multi-space import modal"}),open:o,showCloseIcon:!0,innerStyle:{width:900,height:"calc(100vh - 100px)",overflow:"hidden",borderRadius:12,maxHeight:675},render:()=>(0,D.jsx)(j().A,{capture:!0,allowEsc:!0,render:()=>i()}),onDismiss:a})}var W=()=>o(317182),H=()=>o(477293),q=()=>o(919960),K=()=>o(404141),$=()=>o(797180),Y=()=>o(283080),Z=()=>o(394888),G=()=>o(699143),J=()=>o(84569),Q=()=>o(686452),X=()=>o(10896);function ee(){return(0,D.jsx)(X().h,{icon:Q().asanaIcon,title:(0,D.jsx)(h().sA,{id:"asanaImport.asanaImportsTab.selectAccount.tabTitle",defaultMessage:"Import Asana"}),description:(0,D.jsx)(h().sA,{id:"asanaImport.asanaImportsTab.selectAccount.tabDescription",defaultMessage:"Import your projects and tasks into Notion"}),onClose:()=>J().Y.close({type:"canceled"}),showImportIntoNotionIconSection:!0,children:(0,D.jsx)("div",{children:"Asana"})})}o(823215),o(672577),o(737550);var te=()=>o(312788),oe=()=>o(718827),ne=()=>o(98126),ae=()=>o(406094),ie=()=>o(287188),se=()=>o(26697),re=()=>o(148307),le=()=>o(921940),ce=()=>o(349679),de=()=>o(995847),pe=()=>o(206267),ue=()=>o(179034),me=()=>o(534177),ge=()=>o(690197),fe=()=>o(843878),he=()=>o(232930),ve=()=>o(963411),ye=()=>o(191227),xe=()=>o(876712),Se=()=>o(600875),Ie=()=>o(835539),be=(o(908872),()=>o(874832)),je=()=>o(642557),Ae=()=>o(255043),we=()=>o(249117),Ce=()=>o(709438),ke=()=>o(420802),Te=()=>o(606273);function Me({getIdentifier:e,onSelectRow:t,rows:o,title:n,renderRow:a,onToggleGroup:i,onSelectGroup:s,collapsed:r,groupCheckedState:l,rowCheckedState:d,disabled:p,rowStyles:u={},rowsContainerStyles:m={},loadMoreButton:g,checkboxStyles:f={},loading:h}){const y=(0,c().IS)((()=>({row:{display:"flex",cursor:"pointer",alignItems:"center",gap:6,height:24,marginTop:4,marginInlineStart:40},loadingRow:{gap:6,alignItems:"center",marginTop:4,height:19.6}})),[]);if(h){const e=(null==u?void 0:u.lineHeight)||14;return(0,D.jsxs)("div",{children:[(0,D.jsxs)(T().Ye,{style:{paddingInlineStart:6,paddingInlineEnd:8,...y.loadingRow},children:[(0,D.jsx)(be().P,{style:{height:14,width:34}}),(0,D.jsx)(be().P,{style:{height:e,width:200}})]}),(0,D.jsxs)("div",{style:{...y.row,...u},children:[(0,D.jsx)(be().P,{style:{height:14,width:14}}),(0,D.jsx)(be().P,{style:{height:e,width:64}})]}),(0,D.jsxs)("div",{style:{...y.row,...u},children:[(0,D.jsx)(be().P,{style:{height:14,width:14}}),(0,D.jsx)(be().P,{style:{height:e,width:96}})]})]})}return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(M().p,{onClick:i,pressedStyle:{background:"transparent"},ignoreLocalHoverState:!0,children:(0,D.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:6},children:[(0,D.jsx)(Te().f,{disabled:!0,style:{pointerEvents:"none"},isSidebar:!1,open:!r,fill:!1,onClick:e=>{e.stopPropagation(),i()},icon:"chevron"}),(0,D.jsx)(ke().S,{disabled:p,onClick:s,checked:l,style:{borderRadius:2,...f},size:14,checkedColor:p?v().IF.blueWithAlpha(.3):v().oZ.blue}),n]})}),r?void 0:(0,D.jsxs)("div",{style:m,children:[o.map((o=>(0,D.jsxs)("div",{style:{...y.row,...u},onClick:p?void 0:()=>{t(o)},children:[(0,D.jsx)(ke().S,{style:{marginInlineEnd:1,borderRadius:2,...f},onClick:e=>{e.stopPropagation(),t(o)},disabled:p,checked:d(o),size:14,checkedColor:p?v().IF.blueWithAlpha(.3):v().oZ.blue}),a(o)]},e(o)))),g&&!p?(0,D.jsx)("div",{style:y.row,children:g}):void 0]})]})}const Pe=(0,h().YK)({selectWorkspace:{id:"asanaImporter.chooseWorkspace.chooseWorkspacePlaceholder",defaultMessage:"Choose a workspace"},selectProjectHeading:{id:"asanaImport.importsTab.chooseWorkspace.selectProjects",defaultMessage:"Choose projects to import"},mapTeamspacesDescription:{id:"asanaImport.importsTab.chooseWorkspace.tabDescription",defaultMessage:"You can give each Asana team a Notion teamspace to collaborate in. Each teamspace has a Projects database, where your imported projects will live."},filterWorkspaces:{id:"asanaImport.importsTab.chooseWorkspace.searchAsanaWorkspaces",defaultMessage:"Filter workspaces..."},newTeamspaceLabel:{id:"asanaImport.importsTab.chooseWorkspace.newTeamspace",defaultMessage:"New teamspace"},privateSpaceLabel:{id:"asanaImport.importsTab.chooseWorkspace.privateSpaceTitle",defaultMessage:"Private"},completedProjectLabel:{id:"asanaImport.importsTab.chooseWorkspace.completedHelperText",defaultMessage:" (Completed)"}});function _e(){const e=(0,r().v3)(),t=(0,h().tz)(),o=(0,l().O$)($().Z),{isLoadingProjects:a,selectedWorkspace:i,teamsAndProjects:s,workspaces:c}=o;return(0,n.useEffect)((()=>{i&&ve().D5({selectedWorkspace:i,environment:e}).catch((()=>{}))}),[i,e]),(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(T().Ye,{alignItems:"center",gap:8,children:[(0,D.jsx)("img",{src:re().A.images.import.asanaPng,width:16,height:16,alt:"Asana"}),(0,D.jsx)(Ae().r,{searchThreshold:5,onSelectOption:e=>{$().Z.setState({...o,selectedProjectsAndTeamspaces:{},selectedWorkspace:e})},options:c.map((e=>({key:e.gid,name:e.name,searchTerm:e.name.split(" ")}))),currentOption:i,placeHolder:t.formatMessage(Pe.selectWorkspace),inputProps:{placeholder:t.formatMessage(Pe.filterWorkspaces)},selectorButtonStyle:"workspace"})]}),i?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(p().A,{style:{font:"SF Pro",fontWeight:"590",fontSize:"17px",marginTop:"12px",lineHeight:"22px"},children:(0,D.jsx)(h().sA,{...Pe.selectProjectHeading})}),(0,D.jsx)(p().A,{style:{font:"SF Pro",fontWeight:S().Wy.regular,fontSize:"14px",lineHeight:"19.6px",whiteSpace:"normal",wordWrap:"break-word",paddingTop:4,paddingBottom:20},children:(0,D.jsx)(h().sA,{...Pe.mapTeamspacesDescription})})]}):void 0,a?(0,D.jsx)(Ee,{}):s.filter((e=>0!==e.projects.length)).map((e=>(0,D.jsx)(Be,{asanaTeam:e},`${e.gid}-table`)))]})}function Be({asanaTeam:e}){const t=(0,E().A)(),o=(0,h().tz)(),i=(0,l().O$)($().Z),s=(0,l().K8)((()=>{const e=a().default.state.sidebarSpaceViewStore,t=e?(0,k().r)(e).map((e=>e.canAddOrRemoveTopLevelPages()?{id:e.id,name:e.getName(),icon:(0,D.jsx)(L().x,{disabled:!0,store:e})}:null)).filter(me().Pe):void 0,n=[];return t&&n.push(...t.map((e=>{var t;return{key:e.id,searchTerm:(null===(t=e.name)||void 0===t?void 0:t.split(" "))||void 0,icon:e.icon,name:e.name}}))),n.push({key:"private",searchTerm:["private"],icon:(0,D.jsx)(d().I,{icon:je().lockSmallIcon,size:"xs",colorVariant:"secondary"}),name:o.formatMessage(Pe.privateSpaceLabel)}),n.push({key:"create",searchTerm:["New"],icon:(0,D.jsx)(d().I,{icon:F().plusSmallIcon,size:"sm",colorVariant:"secondary"}),name:o.formatMessage(Pe.newTeamspaceLabel)}),n}),[o]),{importCompletedTasks:r,selectedProjectsAndTeamspaces:c}=i,u=(0,n.useMemo)((()=>c[e.gid]||{projects:[],notionTeamspaceId:void 0}),[c,e.gid]),[m,g]=(0,n.useState)(u.notionTeamspaceId),f=(0,l().K8)((()=>{var e;return null===(e=a().AppStoreSidebarSpaceViewStore.state)||void 0===e?void 0:e.id}),[]),v=(0,n.useCallback)((t=>{if(m===t)return ve().$8({teamId:e.gid,spaceId:null}),void g(void 0);if("create"===t)return void O().vn("asana_importer",{onClose:t=>{ve().$8({teamId:e.gid,spaceId:t}),g(t)}});let o;if("private"===t){if(!f)return;o=f}else o=t;ve().$8({teamId:e.gid,spaceId:o}),g(t)}),[f,e.gid,m]),y=(0,n.useCallback)((t=>{const o={...c[e.gid]||{projects:[],notionTeamspaceId:void 0}},{notionTeamspaceId:n,projects:a}=o;let s=a;"all"===s&&(s=e.projects.map((e=>e.gid))),"in_complete"===s&&(s=e.projects.filter((e=>!e.completed)).map((e=>e.gid))),s=s.includes(t.gid)?s.filter((e=>e!==t.gid)):s.concat(t.gid),$().Z.setState({...i,selectedProjectsAndTeamspaces:{...c,[e.gid]:{notionTeamspaceId:n,projects:s}}})}),[e.gid,e.projects,i,c]),x=(0,n.useMemo)((()=>{const{projects:t}=u;return 0!==t.length&&(t.length===e.projects.length||"partial")}),[u,e.projects]),S=(0,n.useCallback)((()=>{var t;let o=[];0===u.projects.length?(o=e.projects.filter((e=>!e.completed)).map((e=>e.gid)),0===o.length&&(o=e.projects.map((e=>e.gid)))):o=u.projects.length===e.projects.length?[]:e.projects.map((e=>e.gid)),$().Z.setState({...i,selectedProjectsAndTeamspaces:{...c,[e.gid]:{notionTeamspaceId:null===(t=c[e.gid])||void 0===t?void 0:t.notionTeamspaceId,projects:o}}})}),[u.projects,e.projects,e.gid,i,c]),I=(0,n.useMemo)((()=>{const t=i.importCompletedTasks;let o=e.projects;return"in_complete"===u.projects?o=o.filter((e=>!e.completed)):"all"!==u.projects&&u.projects.length!==o.length&&(o=o.filter((e=>u.projects.includes(e.gid)))),{projects:o.length,tasks:o.reduce(((e,o)=>e+(t?o.task_counts.num_tasks:o.task_counts.num_incomplete_tasks)),0)}}),[u.projects,e.projects,i.importCompletedTasks]),[b,j]=(0,n.useState)(!1);return(0,D.jsx)("div",{style:t.asanaTeamSectionContainer,children:(0,D.jsxs)(we().xA,{gap:8,children:[(0,D.jsx)(we().LX,{row:1,col:1,children:(0,D.jsx)("div",{style:t.teamAndProjectsCollapse,children:(0,D.jsx)(Fe,{team:e,importCompletedTasks:r,collapsed:b,onToggle:()=>j((e=>!e)),checked:e=>"all"===u.projects||"in_complete"===u.projects&&!1===e.completed||u.projects.includes(e.gid),onSelectProject:y,onSelectGroup:S,groupCheckState:x})})}),(0,D.jsx)(we().LX,{row:1,col:2,children:(0,D.jsx)(E().c,{onSelectOption:v,options:s,currentOption:m,style:b?"compact":"full",children:(0,D.jsx)(p().A,{style:{fontSize:"14px",paddingInlineStart:b?"8px":0},children:(0,D.jsx)(h().sA,{id:"asanaImport.importsTab.chooseWorkspace.totalProjectsAndTasks",defaultMessage:"Import {nProjects} projects, {nTasks} tasks to",values:{nProjects:I.projects,nTasks:I.tasks}})})})})]})})}function Fe({team:e,collapsed:t,onToggle:o,importCompletedTasks:a,onSelectProject:i,onSelectGroup:s,groupCheckState:l,checked:c}){const d=(0,E().A)(),u=(0,h().tz)(),m=(0,r().v3)(),[g,v]=(0,n.useState)(!1);return(0,D.jsx)(Me,{getIdentifier:e=>e.gid,onSelectRow:i,rows:e.projects,loadMoreButton:(0,me().O9)(e.nextPage)&&(0,D.jsx)(M().p,{style:{padding:0,width:"60%",height:20},hoveredStyle:{background:"transparent"},onClick:async()=>{v(!0),await ve().Oh({team:e,environment:m}),v(!1)},iconLeading:g?void 0:{icon:f().arrowStraightDownFillSmallIcon,size:"xs",colorVariant:"secondary"},children:g?(0,D.jsx)(be().P,{style:{height:14,width:"100%"}}):(0,D.jsx)(p().A,{style:d.loadMoreLabel,children:(0,D.jsx)(h().sA,{id:"asanaImport.importsTab.chooseWorkspace.loadMoreProjects",defaultMessage:"Load more projects"})})}),title:(0,D.jsx)("div",{style:{lineHeight:"20px",fontSize:"14px"},children:e.name}),renderRow:e=>(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(Ce().m,{color:e.color,size:14,style:{borderRadius:"15%"}}),(0,D.jsxs)(p().A,{style:{...e.completed?d.projectNameCompleted:{},maxWidth:220},children:[e.name,e.completed?u.formatMessage(Pe.completedProjectLabel):void 0]}),(0,D.jsxs)(p().A,{isSmall:!0,style:{color:y().$.light.gray[400]},children:[a?e.task_counts.num_tasks:e.task_counts.num_incomplete_tasks,(0,D.jsx)(h().sA,{id:"asanaImport.importsTab.chooseWorkspace.tasksHelperText",defaultMessage:" tasks"})]})]}),onToggleGroup:o,onSelectGroup:s,collapsed:t,groupCheckedState:l,rowCheckedState:c})}function Ee(){const e=(0,E().A)();return(0,D.jsxs)(we().xA,{gap:8,children:[(0,D.jsxs)(we().LX,{row:1,col:1,children:[(0,D.jsxs)(T().Ye,{style:{paddingInlineStart:6,paddingInlineEnd:8,...e.loadingRow},children:[(0,D.jsx)(be().P,{style:{height:14,width:34}}),(0,D.jsx)(be().P,{style:{height:14,width:200}})]}),(0,D.jsx)(be().P,{style:{marginInlineStart:40,marginTop:10,height:14,width:180}}),(0,D.jsx)(be().P,{style:{marginInlineStart:40,marginTop:12,height:14,width:240}})]}),(0,D.jsx)(we().LX,{row:1,col:2,children:(0,D.jsxs)(T().Ye,{flexDirection:"column",alignItems:"center",children:[(0,D.jsx)(be().P,{style:{marginInlineStart:40,marginTop:12,height:14,width:200}}),(0,D.jsx)(be().P,{style:{marginInlineStart:40,marginTop:12,height:14,width:140}})]})})]})}var Re=()=>o(695115),Oe=()=>o(412532),Le=()=>o(569397),De=()=>o(450424);function Ve(){const e=(0,l().K8)((()=>$().Z.state.result),[]);return e?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(p().A,{isMultiline:!0,children:(0,D.jsx)(h().sA,{id:"asanaImport.importsTab.confirm.subtitle",defaultMessage:"The following data has been successfully imported."})}),(0,D.jsx)("div",{style:{marginTop:32},children:e.map((e=>(0,D.jsx)(ze,{importStatus:e},e.asanaTeamId)))})]}):null}function ze({importStatus:e}){const t=(0,h().tz)(),[o,i]=(0,n.useState)(!1),s=(0,l().O$)(a().AppStoreSidebarSpaceStore),r=(0,l().K8)((()=>$().Z.state.teamsAndProjects),[]),c=(0,l().O$)(a().AppStoreSidebarSpaceViewStore),u=(0,l().K8)((()=>{if(!c)return;const e=(0,k().r)(c).map((e=>({id:e.id,name:e.getName(),icon:(0,D.jsx)(L().x,{disabled:!0,store:e})})));return s?(e||[]).concat({id:c.id,name:"Private",icon:(0,D.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:18,height:18,borderRadius:"0.25em",backgroundColor:y().$.light.gray[75]},children:(0,D.jsx)(d().I,{icon:je().lockSmallIcon,size:"xs",colorVariant:"secondary"})})}):e}),[c,s]),{notionTeamspaceName:m,notionTeamspaceIcon:g}=(0,n.useMemo)((()=>{const t=null==u?void 0:u.find((t=>t.id===e.notionTeamSpaceId));return t?{notionTeamspaceName:t.name,notionTeamspaceIcon:t.icon}:{notionTeamspaceName:void 0,notionTeamspaceIcon:void 0}}),[u,e]),f=(0,n.useMemo)((()=>{const t=r.find((t=>t.gid===e.asanaTeamId));return null==t?void 0:t.name}),[r,e]);return(0,D.jsxs)(T().Ye,{style:{marginTop:16},children:[(0,D.jsx)(Re().A,{ariaLabel:t.formatMessage({id:"asanaImport.importsTab.collapseToggle",defaultMessage:"Collapse toggle"}),icon:Oe().l,onClick:()=>i((e=>!e)),style:{transform:o?"rotate(90deg)":"rotate(180deg)",marginInlineEnd:8,marginTop:4},iconStyle:{width:10,height:10}}),(0,D.jsx)(W().A,{tableStyle:{borderTop:0},cellStyle:{verticalAlign:"middle"},columns:[{key:"team",header:(0,D.jsx)(T().Ye,{alignItems:"center",gap:2,children:(0,D.jsx)(p().A,{isSmall:!0,style:{width:280,textOverflow:"ellipsis"},children:f})}),style:{width:300}},{key:"importedInto",header:(0,D.jsxs)(T().Ye,{gap:4,children:[(0,D.jsxs)(T().Ye,{style:{alignItems:"center",gap:4},children:[(0,D.jsx)(p().A,{isSmall:!0,children:(0,D.jsx)(h().sA,{id:"asanaImport.importsTab.selectData.importedInto",defaultMessage:"Imported into"})}),(0,D.jsx)(d().I,{icon:Le().arrowStraightRightSmallIcon,size:"xs"})]}),(0,D.jsxs)(T().Ye,{style:{alignItems:"center",gap:4},children:[g,m]})]}),style:{width:300}}],rows:function({collapsed:t}){return t?[]:e.numberOfTasksPerProject.map((e=>({key:e.projectId,columns:[(0,D.jsxs)(T().Ye,{gap:8,alignItems:"center",children:[(0,D.jsx)(d().I,{icon:De().checkmarkCircleFillSmallIcon,size:"sm",colorPalette:"green",colorVariant:"accentPrimary"}),(0,D.jsx)(p().A,{isMultiline:!0,style:{wordWrap:"break-word",width:300},children:e.name})]},e.projectId),(0,D.jsxs)(p().A,{isSmall:!0,children:[e.numberOfTasks,(0,D.jsx)(h().sA,{id:"asanaImport.importsTab.selectData.tasksHelperText",defaultMessage:" tasks"})]},`${e.projectId}-tasks-count`)]})))}({collapsed:o})})]})}o(803949);var Ne=()=>o(416783),Ue=()=>o(8741),We=()=>o(508485);function He(){const e=(0,l().K8)((()=>$().Z.state.result),[]);if(!e)return null;let t=0;return e.forEach((e=>{t+=e.numberOfProjects})),(0,D.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:2},children:[(0,D.jsx)(p().A,{isMultiline:!0,style:{font:"SF Pro",fontWeight:S().Wy.semibold,fontSize:"16px",paddingTop:8},children:(0,D.jsx)(h().sA,{id:"asanaImport.importsTab.importComplete.subtitle",defaultMessage:"Imported {projectCount} projects into Notion",values:{projectCount:t}})}),(0,D.jsx)("div",{style:{marginTop:20},children:e.map((e=>(0,D.jsx)(qe,{importStatus:e},e.asanaTeamId)))})]})}function qe({importStatus:e}){const t=(0,l().O$)(a().AppStoreSidebarSpaceStore),o=(0,l().K8)((()=>$().Z.state.teamsAndProjects),[]),i=(0,r().v3)(),c=(0,l().O$)(a().AppStoreSidebarSpaceViewStore),m=(0,l().K8)((()=>{if(!c)return;const e=(0,k().r)(c).map((e=>({id:e.id,name:e.getName(),icon:(0,D.jsx)(L().x,{disabled:!0,store:e})})));return t?(e||[]).concat({id:c.id,name:"Private",icon:(0,D.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:18,height:18,borderRadius:"0.25em",backgroundColor:y().$.light.gray[75]},children:(0,D.jsx)(d().I,{icon:B().lockFillSmallIcon,size:"sm",colorVariant:"secondary"})})}):e}),[c,t]),{notionTeamspaceName:g,notionTeamspaceIcon:f}=(0,n.useMemo)((()=>{const t=null==m?void 0:m.find((t=>t.id===e.notionTeamSpaceId));return t?{notionTeamspaceName:t.name,notionTeamspaceIcon:t.icon}:{notionTeamspaceName:void 0,notionTeamspaceIcon:void 0}}),[m,e]),v=(0,n.useMemo)((()=>{const t=o.find((t=>t.gid===e.asanaTeamId));return null==t?void 0:t.name}),[o,e]);return(0,D.jsx)(T().Ye,{style:{marginTop:16},children:(0,D.jsx)(W().A,{tableStyle:{borderTop:0,gap:10},cellStyle:{verticalAlign:"middle"},columns:[{key:"team",header:(0,D.jsx)(T().Ye,{children:(0,D.jsx)(T().Ye,{alignItems:"center",gap:2,children:(0,D.jsx)(p().A,{isSmall:!0,style:{width:280,textOverflow:"ellipsis",font:"SF Pro",fontWeight:S().Wy.regular,fontSize:"14px"},children:(0,D.jsx)(h().sA,{id:"asanaImport.importsTab.importComplete.importFrom",defaultMessage:"From {asanaTeamName} in Asana",values:{asanaTeamName:v}})})})}),style:{width:300}},{key:"seperator",header:(0,D.jsx)(T().Ye,{style:{alignItems:"center",gap:4},children:(0,D.jsx)(p().A,{isMultiline:!0,style:{fontWeight:S().Wy.regular,font:"SF Pro",fontSize:"14px",color:"rgba(172, 171, 169, 1)"},children:"→"})}),style:{width:13,height:18,paddingInlineEnd:20}},{key:"importedInto",header:(0,D.jsxs)(T().Ye,{style:{alignItems:"center",gap:4},children:[f,(0,D.jsx)(p().A,{style:{font:"SF Pro",fontWeight:S().Wy.medium,fontSize:"14px"},children:g}),(0,D.jsx)(p().A,{style:{fontWeight:S().Wy.regular,fontSize:"14px",font:"SF Pro Text",color:"rgba(172, 171, 169, 1)"},children:"/"}),(0,D.jsx)(d().I,{icon:We().R,size:"lg",colorVariant:"secondary"}),(0,D.jsx)(p().A,{style:{font:"SF Pro",fontWeight:S().Wy.medium,fontSize:"14px"},children:(0,D.jsx)(h().sA,{id:"asanaImport.importsTab.importComplete.projectLabel",defaultMessage:"Projects"})})]}),style:{width:300}}],rows:e.numberOfTasksPerProject.map((e=>({key:e.projectId,columns:[(0,D.jsxs)(T().Ye,{gap:8,alignItems:"start",flexDirection:"column",children:[(0,D.jsx)(p().A,{isMultiline:!0,style:{wordWrap:"break-word",width:300,fontWeight:S().Wy.medium,font:"SF Pro",fontSize:"14px"},children:e.name}),(0,D.jsxs)(p().A,{isSmall:!0,children:[e.numberOfTasks,(0,D.jsx)(h().sA,{id:"asanaImport.importsTab.importConfir,.tasksHelperText",defaultMessage:" tasks"})]},`${e.projectId}-tasks-count`)]},e.projectId),(0,D.jsx)(T().Ye,{},`${e.projectId}-seperator`),(0,D.jsx)(T().Ye,{children:(0,D.jsxs)("div",{children:[(0,D.jsxs)("div",{style:{display:"flex",gap:4,paddingBottom:6},children:[(0,D.jsx)(d().I,{icon:We().R,size:"lg",colorVariant:"secondary"}),(0,D.jsx)(Ne().V,{href:e.notionProjectId?(0,le().A)({pageId:e.notionProjectId,pageModel:i.defaultRecordCache.inMemoryRecordCache.getRecordModel({pointer:{table:ue().ev,id:e.notionProjectId},userId:i.currentUser.id}),baseUrl:s().A.domainBaseUrl,pageVisitSource:u().y8.Import}):void 0,style:{wordWrap:"break-word",fontWeight:S().Wy.medium,font:"SF Pro",fontSize:"14px",textDecorationLine:"underline",textDecorationColor:"rgba(227, 226, 224, 1)"},disableHover:!0,children:e.name})]}),(0,D.jsxs)("div",{style:{display:"flex",gap:10},children:[(0,D.jsx)(d().I,{icon:Ue().arrowDiagonalUpRightSmallIcon,size:"sm",colorVariant:"secondary"}),(0,D.jsxs)(Ne().V,{href:e.notionProjectId?(0,le().A)({pageId:e.notionProjectId,pageModel:i.defaultRecordCache.inMemoryRecordCache.getRecordModel({pointer:{table:ue().ev,id:e.notionProjectId},userId:i.currentUser.id}),baseUrl:s().A.domainBaseUrl,pageVisitSource:u().y8.Import}):void 0,style:{color:"rgba(120, 119, 116, 1)",font:"SF Pro",fontSize:"12px",fontWeight:S().Wy.regular},disableUnderline:!0,disableHover:!0,children:[e.numberOfTasks,(0,D.jsx)(h().sA,{id:"asanaImport.importsTab.importConfir,.tasksHelperText",defaultMessage:" tasks"})]},`${e.projectId}-tasks-count`)]})]})},`${e.projectId}-notionProjects`)]})))})})}var Ke=()=>o(250910),$e=()=>o(546926),Ye=()=>o(890492),Ze=()=>o(81068),Ge=()=>o(663639),Je=()=>o(736847),Qe=()=>o(324254);function Xe(){const e=(0,r().v3)(),t=(0,h().tz)(),o=(0,l().O$)($().Z),{isLoadingProjects:a,workspaces:i,selectedWorkspace:s,teamsAndProjects:c}=o;return(0,n.useEffect)((()=>{s&&ve().D5({selectedWorkspace:s,environment:e}).catch((()=>{}))}),[s,e]),(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(p().A,{isSmall:!0,style:{paddingTop:4,paddingBottom:4},children:(0,D.jsx)(h().sA,{id:"asanaImport.importsTab.selectData.workspaceChoiceHelperText",defaultMessage:"Only one workspace can be imported at a time."})}),(0,D.jsx)(tt,{onSelectOption:e=>{$().Z.setState({...o,selectedProjectsAndTeamspaces:{},selectedWorkspace:e})},options:i.map((e=>({key:e.gid,label:e.name}))),currentOption:s,placeHolder:t.formatMessage({id:"asanaImporter.selectData.selectWorkspacePlaceholder",defaultMessage:"Select a workspace"})}),s?(0,D.jsx)(p().A,{style:{fontWeight:S().Wy.semibold,marginTop:18},children:(0,D.jsx)(h().sA,{id:"asanaImport.importsTab.selectData.selectProjects",defaultMessage:"Select projects"})}):null,a?(0,D.jsxs)(T().Ye,{style:{gap:8,marginTop:32,alignItems:"center"},children:[(0,D.jsx)(ne().A,{size:"sm"}),(0,D.jsx)(p().A,{isSmall:!0,style:{color:y().$.light.gray[400]},children:(0,D.jsx)(h().sA,{id:"asanaImport.importsTab.selectData.loadingProjectsHelperText",defaultMessage:"Loading projects in the workspace..."})})]}):c.filter((e=>0!==e.projects.length)).map((e=>(0,D.jsx)(et,{team:e,selectedWorkspace:s},`${e.gid}-table`)))]})}function et({team:e,selectedWorkspace:t}){var o;const i=(0,r().v3)(),s=(0,h().tz)(),[c,u]=(0,n.useState)(!1),[m,g]=(0,n.useState)(!1),[f,x]=(0,n.useState)(),I=(0,l().O$)($().Z),{importCompletedTasks:b,selectedProjectsAndTeamspaces:j}=I,A=(0,l().O$)(a().AppStoreSidebarSpaceViewStore),w=(0,l().K8)((()=>{if(A)return(0,k().r)(A).map((e=>({id:e.id,name:e.getName(),icon:(0,D.jsx)(L().x,{disabled:!0,store:e})})))}),[A]);(0,n.useEffect)((()=>{if(!w||!A)return;if(!j[e.gid]){x("private"),ve().$8({teamId:e.gid,spaceId:null==A?void 0:A.id});for(const n of w){var t,o;if((null===(t=n.name)||void 0===t?void 0:t.toLowerCase())===(null===(o=e.name)||void 0===o?void 0:o.toLowerCase())){x(n.id),ve().$8({teamId:e.gid,spaceId:n.id});break}}}}),[w,e,A,j]);const C=(0,n.useCallback)((t=>{ve().$8({teamId:e.gid,spaceId:t}),x(t)}),[e.gid]),M=(0,n.useCallback)((t=>{if("create"===t)return void O().vn("asana_importer",{onClose:C});let o;if("private"===t){if(null==A||!A.id)return;o=A.id}else o=t;ve().$8({teamId:e.gid,spaceId:o}),x(t)}),[null==A?void 0:A.id,e.gid,C]),P=[{key:"private",searchTerm:"private",label:(0,D.jsxs)(T().Ye,{alignItems:"center",style:{gap:8},children:[(0,D.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:16,height:16,borderRadius:"0.25em",backgroundColor:y().$.light.gray[75]},children:(0,D.jsx)(d().I,{icon:je().lockSmallIcon,size:"xs",colorVariant:"secondary"})}),(0,D.jsx)(p().A,{style:{fontWeight:S().Wy.regular},children:(0,D.jsx)(h().sA,{id:"asanaImport.importsTab.selectData.privateSpaceTitle",defaultMessage:"Private"})})]})}];return w&&P.push(...w.map((e=>({key:e.id,searchTerm:e.name,label:(0,D.jsxs)(T().Ye,{alignItems:"center",style:{gap:8},children:[e.icon,e.name]})})))),P.push({key:"create",searchTerm:"New teamspace",label:(0,D.jsxs)(T().Ye,{alignItems:"center",style:{gap:4},children:[(0,D.jsx)(d().I,{icon:F().plusSmallIcon,size:"sm",colorVariant:"secondary"}),(0,D.jsx)(p().A,{children:(0,D.jsx)(h().sA,{id:"asanaImport.importsTab.selectData.newTeamspace",defaultMessage:"New teamspace"})})]})}),(0,D.jsxs)(T().Ye,{style:{marginInlineStart:-18},children:[(0,D.jsx)(Re().A,{ariaLabel:s.formatMessage({id:"asanaImport.importsTab.collapseToggle",defaultMessage:"Collapse toggle"}),icon:Oe().l,onClick:()=>u((e=>!e)),style:{transform:c?"rotate(90deg)":"rotate(180deg)",marginInlineEnd:8,marginTop:24,width:10,height:10},hoveredStyle:{background:"transparent"},pressedStyle:{background:"transparent"},iconStyle:{width:12,height:12}}),(0,D.jsx)(W().A,{tableStyle:{borderTop:0},cellStyle:{verticalAlign:"middle"},columns:[{key:"team",header:(0,D.jsxs)(T().Ye,{alignItems:"center",gap:2,children:[(0,D.jsx)(ot,{onSelectOption:t=>{var o;$().Z.setState({...I,selectedProjectsAndTeamspaces:{...j,[e.gid]:{notionTeamspaceId:null===(o=j[e.gid])||void 0===o?void 0:o.notionTeamspaceId,projects:t}}})},options:[{key:"in_complete",label:"Exclude completed projects"},{key:"all",label:"Select all projects"}],currentOption:(t=>{const o=null===(t=j[e.gid])||void 0===t?void 0:t.projects;return"string"==typeof o?o:null!=o&&o.length?"specific":void 0})()}),(0,D.jsx)(p().A,{style:{width:280,textOverflow:"ellipsis"},children:e.name})]}),style:{width:300}},{key:"importInto",header:(0,D.jsxs)(T().Ye,{style:{alignItems:"center"},children:[(0,D.jsx)("div",{children:(0,D.jsx)(h().sA,{id:"asanaImport.importsTab.selectData.importInto",defaultMessage:"Import into"})}),(0,D.jsx)("div",{style:{marginInlineEnd:16,marginInlineStart:8},children:(0,D.jsx)(d().I,{icon:Le().arrowStraightRightSmallIcon,size:"xs"})}),(0,D.jsxs)(T().Ye,{style:{alignItems:"center",gap:8},children:[(0,D.jsx)("img",{src:re().A.emails.notionLogoBlackSmallPng,height:18,alt:"Notion logo"}),(0,D.jsx)(tt,{options:P,onSelectOption:M,currentOption:null===(o=P.find((e=>e.key===f)))||void 0===o?void 0:o.key,narrow:!0,allowSearch:!0,placeHolder:s.formatMessage({id:"asanaImport.importsTab.selectData.selectATeamspace",defaultMessage:"Select a teamspace"})})]})]}),style:{width:"50%"}}],rows:function({collapsed:o}){if(o)return[];const n=e.projects.map((t=>({key:t.gid,columns:[(0,D.jsxs)(T().Ye,{alignItems:"center",gap:6,style:{marginInlineStart:20},children:[(0,D.jsx)(ke().S,{style:{marginInlineEnd:2},onClick:()=>{const o={...j[e.gid]||{projects:[],notionTeamspaceId:void 0}},{notionTeamspaceId:n,projects:a}=o;let i;i="all"===a||"in_complete"===a?[]:a.includes(t.gid)?a.filter((e=>e!==t.gid)):a.concat(t.gid),$().Z.setState({...I,selectedProjectsAndTeamspaces:{...j,[e.gid]:{notionTeamspaceId:n,projects:i}}})},checked:(()=>{const o={...j[e.gid]||{projects:[],notionTeamspaceId:void 0}};return"all"===o.projects||"in_complete"===o.projects&&!1===t.completed||o.projects.includes(t.gid)})(),size:14}),(0,D.jsx)(Ce().m,{color:t.color,size:6}),(0,D.jsx)("div",{style:{width:240,wordWrap:"break-word"},children:t.completed?(0,D.jsxs)(p().A,{isMultiline:!0,style:{color:v().Tj.text.tertiary},children:[t.name,(0,D.jsx)(h().sA,{id:"asanaImport.importsTab.selectData.completedHelperText",defaultMessage:" (Completed)"})]}):(0,D.jsx)(p().A,{isMultiline:!0,children:t.name})})]},`${t.gid}-container`),(0,D.jsxs)(p().A,{isSmall:!0,children:[b?t.task_counts.num_tasks:t.task_counts.num_incomplete_tasks,(0,D.jsx)(h().sA,{id:"asanaImport.importsTab.selectData.tasksHelperText",defaultMessage:" tasks"})]},`${e.gid}-tasks-count`)]})));return e.nextPage&&n.push({key:"loadMore",columns:[(0,D.jsx)(oe().Ay,{disabled:m,style:{marginInlineStart:20,color:y().$.light.gray[400]},hoveredStyle:{background:"transparent"},pressedStyle:{background:"transparent"},onClick:async()=>{t&&(g(!0),await ve().Oh({team:e,environment:i}),g(!1))},children:m?(0,D.jsxs)(T().Ye,{alignItems:"center",gap:8,children:[(0,D.jsx)(ne().A,{size:"sm"}),(0,D.jsx)(h().sA,{id:"asanaImport.importsTab.selectData.loadingMoreProjects",defaultMessage:"Loading more projects..."})]}):(0,D.jsx)(h().sA,{id:"asanaImport.importsTab.selectData.loadMoreProjects",defaultMessage:"Load more projects..."})},`${e.gid}-loadmore`)]}),n}({collapsed:c})})]})}function tt(e){var t;const{onSelectOption:o,options:a,currentOption:i,placeHolder:s,narrow:r,allowSearch:l}=e,c=(0,h().tz)(),[d,u]=(0,n.useState)(""),m=null===(t=a.find((({key:e})=>e===i)))||void 0===t?void 0:t.label;return(0,D.jsx)(Ke().A,{popupType:Ke().z.Popup,placementToOrigin:"bottom",renderOrigin:e=>(0,D.jsx)(M().p,{...e,style:{paddingTop:r?2:8,paddingBottom:r?2:8,paddingInlineStart:8,paddingInlineEnd:8,opacity:1,width:250,border:`1px solid ${y().$.light.gray[100]}`,justifyContent:"space-between",marginTop:8,marginBottom:8,background:i?void 0:y().$.light.gray[75],color:i?void 0:y().$.light.gray[300]},disabled:!1,iconTrailing:{icon:Qe().arrowChevronSingleDownSmallIcon,colorVariant:"tertiary",size:"xs"},children:(0,D.jsx)(p().A,{style:{textOverflow:"ellipsis"},children:m||s})}),render:e=>{const t={menuType:$e().gu.Popup,width:250,left:50},n=[{key:"asanaImport.dropdown.menuList",render:e=>(0,D.jsx)(Je().A,{...e}),items:(d.trim()?a.filter((e=>{var t;return null===(t=e.searchTerm)||void 0===t?void 0:t.toLowerCase().includes(d.toLowerCase())})):a).map((({key:t,label:n})=>({key:t,action:()=>{o(t),e.close()},render:e=>(0,D.jsx)(Ze().A,{...e,title:n,shouldWrapCaption:!0,isChecked:m===n})})))}];return(0,D.jsxs)(D.Fragment,{children:[l?(0,D.jsx)("input",{style:{width:"100%",borderRadius:0,backgroundColor:y().$.light.gray[200],paddingTop:2,paddingBottom:2,paddingInlineStart:8,paddingInlineEnd:8,opacity:1,border:`1px solid ${y().$.light.gray[100]}`,justifyContent:"space-between",background:y().$.light.gray[75],fontSize:"14px",textOverflow:"ellipses"},placeholder:c.formatMessage({id:"asanaImport.importsTab.selectData.searchTeamspacePlaceholder",defaultMessage:"Search for a teamspace"}),onChange:e=>u(e.target.value),value:d}):null,(0,D.jsx)(Ye().A,{...t,children:(0,D.jsx)(Ge().A,{type:Ge().O.Vertical,sections:n,initialFocus:void 0,style:{position:"relative",alignItems:"flex-end"}})})]})}})}function ot(e){var t;const{onSelectOption:o,options:a,currentOption:i}=e,s=null===(t=a.find((({key:e})=>e===i)))||void 0===t?void 0:t.label,r=(0,n.useMemo)((()=>void 0!==i&&"specific"!==i&&("all"===i||"partial")),[i]);return(0,D.jsx)(Ke().A,{popupType:Ke().z.Popup,placementToOrigin:"bottom",alignmentToOrigin:"start",renderOrigin:e=>(0,D.jsx)(M().p,{...e,style:{padding:0,margin:0,marginInlineEnd:4,height:14},hoveredStyle:{},children:(0,D.jsx)(ke().S,{checked:r,disabled:!0,size:14})}),render:e=>{const t={menuType:$e().gu.Popup,width:250,left:50},n=[{key:"asanaImport.checkboxDropdown.menuList",render:e=>(0,D.jsx)(Je().A,{...e}),items:a.map((({key:t,label:n})=>({key:t,action:()=>{o(t),e.close()},render:e=>(0,D.jsx)(Ze().A,{...e,title:n,shouldWrapCaption:!0,isChecked:s===n})})))}];return(0,D.jsx)(Ye().A,{...t,children:(0,D.jsx)(Ge().A,{type:Ge().O.Vertical,sections:n,initialFocus:void 0,style:{position:"relative",alignItems:"flex-end"}})})}})}var nt=()=>o(668601),at=()=>o(463438),it=()=>o(484392),st=()=>o(852424),rt=()=>o(340498);const lt=(0,h().YK)({selectProperties:{id:"asanaImport.selectProperties.subtitleForSelectPropertiesTab",defaultMessage:"By default, all Asana task properties will be imported. You can customize this for each teamspace below"},keepAllPropertiesDescription:{id:"asanaImport.selectProperties.keepAllPropertiesDescription",defaultMessage:"Add {count} properties from Asana into your Notion tasks"},customPropertiesLabel:{id:"asanaImport.selectProperties.customPropertiesLabel",defaultMessage:"Custom Properties"},defaultPropertiesLabel:{id:"asanaImport.selectProperties.defaultPropertiesLabel",defaultMessage:"Default Properties"},privateSpaceLabel:{id:"asanaImport.importsTab.chooseWorkspace.privateSpaceTitle",defaultMessage:"Private"}});function ct(){var e;const t=(0,r().v3)(),o=(0,h().tz)(),i=ut(),[s,c]=(0,n.useState)(0),[{status:u}]=(0,g().Yb)((async()=>ve().kV(t,$().Z.state.selectedProjectsAndTeamspaces)),[t]),m=(0,l().K8)((()=>{var e;const t=(0,x().sb)(Object.values($().Z.state.selectedProjectsAndTeamspaces).filter((e=>e.projects.length>0)).map((e=>e.notionTeamspaceId)).filter(me().O9)),n=a().default.state.sidebarSpaceViewStore,i=n?(0,k().r)(n):void 0,s=null===(e=a().default.state.sidebarSpaceViewStore)||void 0===e?void 0:e.id;return t.map((e=>{const t=null==i?void 0:i.find((t=>t.id===e));return t||e!==s?{teamSpaceId:e,name:null==t?void 0:t.getName(),icon:(0,D.jsx)(L().x,{disabled:!0,store:t})}:{teamSpaceId:s,icon:(0,D.jsx)(d().I,{icon:je().lockSmallIcon,size:"xs",colorVariant:"secondary"}),name:o.formatMessage(lt.privateSpaceLabel)}}))}),[o]);return(0,D.jsxs)("div",{style:{paddingBottom:20},children:[(0,D.jsx)(p().A,{style:i.header,children:(0,D.jsx)(h().sA,{...lt.selectProperties})}),(0,D.jsx)(at().LZ,{style:{padding:0},tabs:m.map((e=>(0,D.jsxs)(T().Ye,{alignItems:"center",gap:8,children:[e.icon,e.name]},e.name))),selectedIndex:s,onChange:c}),(0,D.jsx)(dt,{propertiesLoadStatus:u,currentTeamSpaceId:null===(e=m[s])||void 0===e?void 0:e.teamSpaceId})]})}function dt({propertiesLoadStatus:e,currentTeamSpaceId:t}){const o=(0,h().tz)(),{selectionMode:a,properties:i}=(0,l().K8)((()=>{if("resolved"!==e||!t)return{selectionMode:"all",properties:[]};const o=$().Z.state.useSectionAsStatus,{selectionMode:n,properties:a}=$().Z.state.selectedTeamspacesAndProperties[t],i=a.slice(),s=i.find((e=>"Completed?"===e.asanaFieldName)),r=i.find((e=>"Section"===e.asanaFieldName));return s&&r&&(o?(s.notionFieldType="checkbox",r.notionFieldType="status"):(s.notionFieldType="status",r.notionFieldType="select")),{selectionMode:n,properties:i}}),[t,e]),s=(0,n.useCallback)((e=>{const o=$().Z.state;$().Z.setState({...o,selectedTeamspacesAndProperties:{...o.selectedTeamspacesAndProperties,[t]:{...o.selectedTeamspacesAndProperties[t],properties:e}}})}),[t]),r=(0,n.useCallback)((e=>{$().Z.setState({...$().Z.state,selectedTeamspacesAndProperties:{...$().Z.state.selectedTeamspacesAndProperties,[t]:{selectionMode:e,properties:i.map((t=>({...t,isSelected:t.isDefault||"all"===e})))}}})}),[t,i]),c=(0,n.useCallback)((e=>{const t=i.map((t=>t.asanaFieldName===e.asanaFieldName?{...t,isSelected:!t.isSelected}:t));s(t)}),[i,s]),d=(0,n.useCallback)((e=>{let t=!0,o=!0;const n=i.filter((t=>t.isDefault===("default"===e)));return n.length>0&&(n.forEach((e=>{e.isSelected?o=!1:t=!1})),!!t||!o&&"partial")}),[i]),u=(0,n.useCallback)((e=>{const t=!0===d(e),o=i.map((e=>({...e,isSelected:e.isDefault||!t})));s(o)}),[d,i,s]),[m,g]=(0,n.useState)(!1),[f,v]=(0,n.useState)(!0);return(0,n.useEffect)((()=>{"resolved"===e&&0===(null==i?void 0:i.filter((e=>!e.isDefault)).length)&&g(!0)}),[e,i]),(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(T().Ye,{gap:8,style:{marginTop:10,width:"100%"},children:[(0,D.jsx)(nt().a,{name:"select-all-properties",selectType:"radio",label:"Select all properties",disabled:"pending"===e,value:"all",description:o.formatMessage(lt.keepAllPropertiesDescription,{count:Object.keys(i).length||"all"}),isSelected:"all"===a,style:{flexGrow:1,maxWidth:"50%"},onChange:()=>r("all")}),(0,D.jsx)(nt().a,{name:"customise-properties",selectType:"radio",disabled:"pending"===e,label:"Customize properties",value:"custom",description:"Choose which properties you want to keep",isSelected:"custom"===a,style:{flexGrow:1,maxWidth:"50%"},onChange:()=>r("custom")})]}),(0,D.jsx)("div",{style:{marginTop:8},children:(0,D.jsx)(Me,{title:(0,D.jsx)(T().Ye,{gap:4,children:(0,D.jsx)(p().A,{children:(0,D.jsx)(h().sA,{...lt.defaultPropertiesLabel})})}),rows:i.filter((e=>e.isDefault)),loading:"pending"===e,getIdentifier:e=>e.asanaFieldName,onToggleGroup:()=>g((e=>!e)),collapsed:!m,onSelectGroup:()=>{},onSelectRow:()=>{},groupCheckedState:!0,rowCheckedState:e=>e.isSelected||!1,renderRow:e=>(0,D.jsx)(pt,{property:e}),rowsContainerStyles:{display:"grid",gap:6},disabled:!0,rowStyles:{marginTop:4,height:24}})}),(0,D.jsx)("div",{style:{marginTop:8},children:(null==i?void 0:i.filter((e=>!e.isDefault)).length)>0?(0,D.jsx)(Me,{title:(0,D.jsx)(T().Ye,{gap:4,children:(0,D.jsx)(p().A,{children:(0,D.jsx)(h().sA,{...lt.customPropertiesLabel})})}),rows:i.filter((e=>!e.isDefault)),loading:"pending"===e,disabled:"all"===a,getIdentifier:e=>e.asanaFieldName,onToggleGroup:()=>v((e=>!e)),collapsed:!f,onSelectGroup:()=>u("custom"),onSelectRow:e=>c(e),groupCheckedState:d("custom"),rowCheckedState:e=>e.isSelected||!1,renderRow:e=>(0,D.jsx)(pt,{property:e}),rowsContainerStyles:{display:"grid",gap:6},rowStyles:{marginTop:4,height:24}}):void 0})]})}function pt({property:e,style:t}){const o=ut();return(0,D.jsxs)(n.Fragment,{children:[(0,D.jsx)(T().Ye,{gap:12,alignItems:"center",style:{marginInlineStart:2,width:"250px",paddingTop:6,paddingInlineEnd:0,paddingBottom:6,paddingInlineStart:0,...t},children:(0,D.jsx)("span",{style:o.propertyLabel,children:e.asanaFieldName})}),(0,D.jsxs)(T().Ye,{style:{padding:"6px 6px"},gap:8,alignItems:"center",children:[(0,D.jsx)("span",{style:{marginTop:2,marginInlineEnd:12},children:(0,D.jsx)(d().I,{icon:Le().arrowStraightRightSmallIcon,size:"xxs",colorVariant:"tertiary"})}),st().LE[e.notionFieldType]({width:rt().Ev.sm,fill:v().oZ.uiGray}),(0,D.jsx)("span",{style:o.propertyLabel,children:e.notionFieldType.split("_").map(it().A).join(" ")})]})]},e.asanaFieldName)}function ut(){return(0,c().IS)((()=>({teamSpaceLabel:{width:24,height:24,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4},header:{font:"SF Pro",fontWeight:S().Wy.regular,fontSize:"14px",lineHeight:"19.6px",whiteSpace:"normal",wordWrap:"break-word",paddingTop:4,paddingBottom:20},propertyLabel:{fontSize:"14px",color:v().Tj.text.primary,lineHeight:"19.6px"}})),[])}const mt=(0,h().YK)({failed:{defaultMessage:"Some problems occurred while importing data from your Asana workspace.",id:"Asanaimport.importingData.failed.problemsOccured"},chooseWorkspaceTabLabel:{id:"asanaImport.asanaImportsTab.stepIndicator.chooseWorkspaceTab",defaultMessage:"Choose what to import"},importTabLabel:{id:"asanaImport.asanaImportsTab.stepIndicator.importTab",defaultMessage:"Import"},customizeTabLabel:{id:"asanaImport.asanaImportsTab.stepIndicator.selectPropertiesTab",defaultMessage:"Customize"},chooseWorkspaceNextButtonLabel:{id:"asanaImportsTab.chooseWorkspace.nextButtonText",defaultMessage:"Next"},chooseWorkspaceBackButtonLabel:{id:"asanaImport.chooseWorkspace.backButtonText",defaultMessage:"Back"},selectPropertiesBackButtonText:{id:"asanaImportsTab.selectProperties.backButtonText",defaultMessage:"Back"},startImportButtonText:{id:"asanaImportsTab.selectProperties.nextButtonText",defaultMessage:"Import"}});function gt(e){switch(e){case"selectData":return(0,D.jsx)(p().A,{style:{paddingBottom:8,fontSize:18,fontWeight:S().Wy.semibold,width:"100%"},children:(0,D.jsx)(h().sA,{id:"asanaImport.asanaImportsTab.selectData.tabHeader",defaultMessage:"Select Asana workspace"})});case"chooseWorkspace":return(0,D.jsx)(p().A,{style:{font:"SF Pro",fontWeight:"590",fontSize:"17px",marginTop:"12px",lineHeight:"22px"},children:(0,D.jsx)(h().sA,{id:"asanaImport.asanaImportsTab.chooseWorkspace.tabTitle",defaultMessage:"Choose Asana workspace"})});case"selectProperties":return(0,D.jsx)(p().A,{style:{font:"SF Pro",fontWeight:"590",fontSize:"17px",marginTop:"12px",lineHeight:"22px"},children:(0,D.jsx)(h().sA,{id:"asanaImport.asanaImportsTab.selectProperties.tabTitle",defaultMessage:"Select properties"})});default:return null}}function ft({useV2Styles:e}={useV2Styles:!1}){return(0,c().IS)((()=>({stepIndicatorLabel:{font:"SF Pro",fontWeight:S().Wy.medium,fontSize:"14px"},stepIndicatorContainer:{height:32,borderRadius:6,padding:"6px"},closeButton:{zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:v().Tj.buttonHoveredBackground,width:20,height:20,padding:4},closeButtonHover:{background:v().Tj.buttonPressedBackground},helpCenterButtonStytles:{display:"flex",alignItems:"baseline",justifyContent:"center",alignContent:"center",fontSize:"14px",paddingTop:"6px,",paddingInlineEnd:"0px,",paddingBottom:"0px,",paddingInlineStart:0,borderRadius:6,color:v().Tj.text.secondary,marginTop:2,width:298,height:28,gap:"4px",lineHeight:"18px"},externalLinkIcon:{width:"16px",height:"16px",paddingTop:"1px",paddingInlineEnd:"0px,",paddingBottom:"0px,",paddingInlineStart:0,gap:"8px"},tabNotStarted:{color:v().Tj.text.tertiary},tabInProgress:{background:v().Tj.buttonHoveredBackground,color:v().Tj.text.primary},tabDone:{color:v().Tj.text.secondary}})),[])}const ht=[["chooseWorkspace",mt.chooseWorkspaceTabLabel],["selectProperties",mt.customizeTabLabel],["importingData",mt.importTabLabel],["importComplete",null]];function vt({tab:e}){const t=ft(),o=(0,n.useCallback)((t=>{const o=ht.findIndex((([t,o])=>t===e)),n=ht.findIndex((([e,o])=>e===t));return(0,me().O9)(o)?n<o?"done":n===o?"in-progress":"not-started":"not-started"}),[e]),a=(0,n.useCallback)((e=>{switch(e){case"done":return t.tabDone;case"in-progress":return t.tabInProgress;default:return t.tabNotStarted}}),[t]);return(0,D.jsx)(T().Ye,{gap:12,alignContent:"center",alignItems:"center",style:{marginTop:10,marginBottom:10},children:ht.map((([e,n])=>{const i=o(e);return n?(0,D.jsxs)(T().Ye,{alignContent:"center",alignItems:"center",justifyContent:"center",style:{...t.stepIndicatorContainer,...a(i)},gap:8,children:["done"===i?(0,D.jsx)(d().I,{icon:ce().checkmarkSmallIcon,size:"sm",colorVariant:"tertiary"}):void 0,(0,D.jsx)(p().A,{style:{...t.stepIndicatorLabel},children:(0,D.jsx)(h().sA,{...n})})]},e):null}))})}function yt({tab:e,fetchActiveImportTasks:t,analyticsFrom:o}){const{navigate:i}=(0,n.useContext)(te().E),c=(0,h().tz)(),m=(0,r().v3)(),g=(0,l().O$)(a().AppStoreSidebarSpaceStore),f=(0,l().O$)(a().AppStoreSidebarSpaceViewStore),v=(0,l().O$)($().Z),y=(0,l().K8)((()=>ye().A.state.flowId),[])||pe().JW(),{importCompletedTasks:x,useSectionAsStatus:S,loggerPageId:b,selectedProjectsAndTeamspaces:j,selectedWorkspace:A,templateCreationInProgress:w,result:C,workspaces:k}=v,M=(0,n.useCallback)((e=>{switch(e){case"selectProperties":return!0;case"chooseWorkspace":const e=Object.values(j);return e.length&&!e.every((e=>0===e.projects.length&&void 0===e.notionTeamspaceId))&&!e.some((e=>0!==e.projects.length&&!e.notionTeamspaceId))&&!e.some((e=>e.notionTeamspaceId&&0===e.projects.length));case"selectData":return Object.values(j).some((e=>0!==e.projects.length));default:return!1}}),[j]),_=ft();let B=e;return"selectData"===e?B="chooseWorkspace":"confirm"===e&&(B="importComplete"),(0,D.jsxs)(fe().Ay,{controlRow:(e=>"selectData"===e?(0,D.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,D.jsx)(ae().A,{size:"lg",style:{border:0},disabled:!k.length,onClick:()=>{t(),$().Z.resetImport()},children:(0,D.jsx)(h().sA,{id:"asanaImport.selectData.backButtonText",defaultMessage:"Back"})}),(0,D.jsxs)(T().Ye,{alignItems:"center",gap:8,children:[A?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(ie().A,{on:x,onClick:()=>$().Z.setState({...v,importCompletedTasks:!x})}),(0,D.jsx)(p().A,{children:(0,D.jsx)(h().sA,{id:"asanaImportsTab.selectData.importCompletedTasks",defaultMessage:"Import completed tasks"})})]}):void 0,(0,D.jsx)("div",{style:{gap:2},children:(0,D.jsx)(P().A,{colorPalette:"blue",style:{marginInlineStart:16},disabled:!M(e),onClick:()=>{g&&f&&(ve().Xn({environment:m,spaceViewStore:f,spaceStore:g,flowId:y}).catch((()=>{})),I().eH(m,{import_source:"asana",from:o}))},children:w?(0,D.jsxs)(T().Ye,{alignItems:"center",gap:2,children:[(0,D.jsx)(ne().A,{onDarkBackground:!0}),(0,D.jsx)(h().sA,{id:"asanaImportsTab.selectData.creatingTemplates",defaultMessage:"Creating templates"})]}):(0,D.jsx)(h().sA,{id:"asanaImportsTab.selectData.nextButtonText",defaultMessage:"Import"})})})]})]}):"chooseWorkspace"===e?(0,D.jsx)(Ie().s,{left:(0,D.jsx)(xt,{}),next:{disabled:!M(e),onClick:ve().uA,message:c.formatMessage(mt.chooseWorkspaceNextButtonLabel),renderTooltip:M(e)?void 0:()=>(0,D.jsx)(h().sA,{id:"asanaImportsTab.selectData.ImportConfirmationTooltip",defaultMessage:"Please select projects and a teamspace to import into"})},back:{disabled:!1,onClick:()=>{t(),$().Z.resetImport()},message:c.formatMessage(mt.chooseWorkspaceBackButtonLabel)},children:A?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(ie().A,{on:x,onClick:()=>$().Z.setState({...v,importCompletedTasks:!x})}),(0,D.jsx)(p().A,{children:(0,D.jsx)(h().sA,{id:"asanaImportsTab.chooseWorkspace.chooseImportCompletedTasks",defaultMessage:"Import completed tasks"})})]}):void 0}):"selectProperties"===e?(0,D.jsx)(Ie().s,{left:(0,D.jsx)(xt,{}),next:{disabled:!M(e),onClick:()=>{g&&f&&(ve().Xn({environment:m,spaceViewStore:f,navigateBeforeTemplateCreation:!0,spaceStore:g,flowId:y}).catch((()=>{})),I().eH(m,{import_source:"asana",from:o,flowId:y}))},message:c.formatMessage(mt.startImportButtonText)},back:{disabled:!1,onClick:()=>{$().Z.setState({...v,currentTab:"chooseWorkspace"})},message:c.formatMessage(mt.selectPropertiesBackButtonText)},children:(0,D.jsx)(se().m,{textWrap:!0,renderTooltip:e=>(0,D.jsx)(h().sA,{...e,id:"asanaImportsTab.selectProperties.selectPropertiesTooltip",defaultMessage:"Asana completed field is imported as status in Notion. Switch to importing sections as status and completed as checkboxes.",description:"Tooltip explaining the switcher to map completion to status."}),render:e=>(0,D.jsxs)("div",{...e,style:{display:"flex",gap:8},children:[(0,D.jsx)(ie().A,{on:S,onClick:()=>$().Z.setState({...v,useSectionAsStatus:!S})}),(0,D.jsx)(p().A,{children:(0,D.jsx)(h().sA,{id:"asanaImportsTab.selectProperties.selectPropertiesStatusMapping",defaultMessage:"Import Section as Status"})})]})})}):"importingData"===e?(0,D.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,D.jsx)(xt,{}),(0,D.jsx)(ae().A,{size:"lg",disabled:!k.length||w,onClick:()=>{t(),$().Z.resetImport()},children:(0,D.jsx)(h().sA,{id:"asanaImportsTab.importingData.closeButtonText",defaultMessage:"Close"})})]}):"confirm"===e?(0,D.jsx)("div",{style:{display:"flex",justifyContent:"right"},children:(0,D.jsx)(P().A,{colorPalette:"blue",onClick:()=>{b&&i({url:(0,le().A)({pageId:b,pageModel:m.defaultRecordCache.inMemoryRecordCache.getRecordModel({pointer:{table:ue().ev,id:b},userId:m.currentUser.id}),baseUrl:s().A.domainBaseUrl,pageVisitSource:u().y8.Import}),environment:m}),$().Z.resetImport(),K().Ay.reset()},children:(0,D.jsx)(h().sA,{id:"asanaImportsTab.confirm.doneText",defaultMessage:"Done"})})}):"failure"===e?(0,D.jsx)("div",{style:{display:"flex",justifyContent:"right"},children:(0,D.jsx)(ae().A,{size:"lg",disabled:!k.length,onClick:()=>{t(),$().Z.resetImport()},children:(0,D.jsx)(h().sA,{id:"asanaImportsTab.importingData.closeButtonText",defaultMessage:"Close"})})}):"importComplete"===e?(0,D.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",height:48,paddingTop:35,paddingBottom:28,border:"1px, 0px, 0px, 0px"},children:[(0,D.jsx)(xt,{}),(0,D.jsx)(P().A,{colorPalette:"blue",style:{width:"181px",height:"32px",paddingTop:"0px,",paddingInlineEnd:"0px,",paddingBottom:"0px,",paddingInlineStart:8,borderRadius:"4px",gap:"4px"},onClick:()=>{if(null!=C&&C.length&&b){const e=C.find((e=>void 0!==e.projectCollectionPageId)),t=(null==e?void 0:e.projectCollectionPageId)||b;i({url:(0,le().A)({pageId:t,pageModel:void 0===t?void 0:m.defaultRecordCache.inMemoryRecordCache.getRecordModel({pointer:{table:ue().ev,id:t},userId:m.currentUser.id}),baseUrl:s().A.domainBaseUrl,pageVisitSource:u().y8.Import}),environment:m})}$().Z.resetImport(),K().Ay.reset()},children:(0,D.jsx)(h().sA,{id:"asanaImportsTab.confirm.viewImportedProjects",defaultMessage:"View imported projects"})})]}):void 0)(B),controlRowPaddingTopBottom:"confirm"===e?0:10,removeBoxShadow:"confirm"===e,contentPaddingLeftRight:25,controlRowPaddingLeftRight:15,contentPaddingTopBottom:2,children:[(0,D.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[(0,D.jsx)(vt,{tab:B}),(0,D.jsx)("div",{style:{position:"absolute",top:12,insetInlineEnd:12},children:(0,D.jsx)(oe().Ay,{onClick:()=>{t(),$().Z.resetImport()},style:_.closeButton,hoveredStyle:_.closeButtonHover,children:(0,D.jsx)(d().I,{icon:de().xMarkSmallIcon,size:"sm",colorVariant:"secondary"})})})]}),gt(B),(e=>"selectData"===e?(0,D.jsx)(Xe,{}):"importingData"===e?(0,D.jsx)(Se().A,{assetSrc:re().A.images.import.asanaPng}):"confirm"===e?(0,D.jsx)(Ve,{}):"failure"===e?(0,D.jsx)(xe().A,{assetSrc:re().A.images.import.asanaPng,loggerPageId:b,failedMessage:c.formatMessage(mt.failed)}):"chooseWorkspace"===e?(0,D.jsx)(_e,{}):"selectProperties"===e?(0,D.jsx)(ct,{}):"importComplete"===e?(0,D.jsx)(He,{}):void 0)(B)]})}function xt(){return(0,D.jsx)(ge().A,{buttonStyle:{height:28,paddingInlineStart:4},title:(0,D.jsx)(h().sA,{id:"asanaImportsTab.confirm.helpCenter",defaultMessage:"Learn more about importing from Asana"}),href:(0,he().x)("guides.importAsana"),analyticsFrom:"import",style:{marginInlineStart:-4}})}function St({fetchActiveImportTasks:e,analyticsFrom:t}){const o=(0,i().X)("use_asana_import_v3"),a=(0,l().O$)($().Z),s=(0,l().K8)((()=>J().Y.state.currentTab),[]),r=(0,l().K8)((()=>J().Y.state.isModalOpen),[]),{isModalOpen:c}=a,d=(0,n.useCallback)((()=>{$().Z.resetImport()}),[]),p=(0,n.useCallback)((()=>{J().Y.resetImport()}),[]),u=(0,n.useCallback)((()=>{const{currentTab:o}=a;return(0,D.jsx)(yt,{fetchActiveImportTasks:e,tab:o,analyticsFrom:t})}),[a,e,t]),m=(0,n.useMemo)((()=>({width:{type:"fixed",length:500}})),[]);return o&&r?(0,D.jsx)(Z().s,{isOpen:!0,areaConstraint:m,onDismiss:p,onClosed:p,backgroundAppearance:"wash",render:({sizeRange:e})=>(0,D.jsx)(G().Y1,{style:e,children:(0,D.jsx)(It,{currentModalStep:s,analyticsFrom:t})})}):c?(0,D.jsx)(A().a,{open:c,innerStyle:{height:"calc(100vh - 100px)",overflow:"hidden",maxHeight:675,borderRadius:12,width:900},render:()=>(0,D.jsx)(j().A,{capture:!0,allowEsc:!0,render:()=>u()}),onDismiss:d,ariaLabelledBy:"Asana Import Modal"}):null}function It({currentModalStep:e,analyticsFrom:t}){return"selectAccount"===e?(0,D.jsx)(ee,{}):null}var bt=()=>o(79926);const jt=new(bt().O2)("FileImportOption",(()=>Promise.all([o.e(55162),o.e(72252),o.e(89133)]).then(o.bind(o,270797)))),At=(0,bt()._h)(jt,(e=>e.FileImportOption),{renderLoading:()=>null});var wt=()=>o(270948);const Ct=function({fetchActiveImportTasks:e,analyticsFrom:t}){const a=(0,l().O$)(wt().A),i=(0,n.useCallback)((()=>{wt().A.resetImport()}),[]),s=(0,l().K8)((()=>(0,o(164367).G)()),[]),r=(0,n.useCallback)((()=>{let{currentTab:n}=a;return s?"selectData"===n&&(n="chooseWorkspace"):wt().A.setState({...a,selectedImportType:"ProjectsAndTasks"}),(0,D.jsx)(o(405748).A,{fetchActiveImportTasks:e,tab:n,analyticsFrom:t})}),[s,e,a,t]),c=(0,h().tz)();return(0,D.jsx)(A().a,{ariaLabel:c.formatMessage({id:"mondayImportModal.modal.ariaLabel",defaultMessage:"Monday import modal"}),open:a.isModalOpen,innerStyle:{width:800,height:"calc(100vh - 100px)",overflow:"hidden",borderRadius:5,maxHeight:675,...s?{borderRadius:12,width:900}:{}},render:()=>(0,D.jsx)(j().A,{capture:!0,allowEsc:!0,render:()=>r()}),onDismiss:i})};const kt=(0,h().YK)({tabTitle:{id:"importsTab.title",defaultMessage:"Import data"},importOrMigrateTitle:{id:"importsTab.importOrMigrateTitle",defaultMessage:"Import or migrate"},tabSubtitle:{id:"importsTab.subtitle",defaultMessage:"Import data from other apps and files into Notion"},unsupportedImportsHelperText:{id:"importsTab.unsupportedImportsHelperText",defaultMessage:"If your data is located somewhere we don’t support yet, you can try importing it via CSV file."},zipImportTitle:{id:"importsTab.zipImport.title",defaultMessage:"Don’t see the app you use? Import a ZIP file, and Notion will convert DOCX, CSV, Text, Markdown, HTML and EPUB files into Notion pages."},activeImportsAndSyncsTitle:{id:"importsTab.activeImportsAndSyncs.title",defaultMessage:"Active imports & syncs"},activeImportsTitle:{id:"importsTab.activeImports.title",defaultMessage:"Active Imports"},activeImportsImportTime:{id:"importsTab.activeImports.importTime",defaultMessage:"Time"},activeImportsImportFrom:{id:"importsTab.activeImports.importFrom",defaultMessage:"From"},activeImportsImportStatus:{id:"importsTab.activeImports.importStatus",defaultMessage:"Status"},activeImportsTableNoActiveImports:{id:"importsTab.activeImportsTable.noActiveImports",defaultMessage:"There are no ongoing imports associated with your account."},activeImportsStatusInProgress:{id:"activeImports.status.inProgress",defaultMessage:"In progress"}}),Tt=function(e){const t=(0,h().tz)(),{sidebarSpaceStore:j,mainEditorCurrentBlockStore:A,sidebarSpaceViewStore:w,currentUserSettingsStore:C}=(0,l().K8)((()=>({sidebarSpaceStore:(0,o(755531).S)(),mainEditorCurrentBlockStore:a().default.state.mainEditorCurrentBlockStore,sidebarSpaceViewStore:a().default.state.sidebarSpaceViewStore,currentUserSettingsStore:a().default.state.currentUserSettingsStore})),[]),k=(0,l().K8)((()=>K().Ay.state.openedFrom),[]),T=(0,l().K8)((()=>$().Z.state.isAccountLinkingInProgress),[]),M=(0,l().K8)((()=>Y().A.state.linkingAccount),[]),P=k??"modal",_=(0,r().v3)(),B="dark"===(0,c().eP)(),[F,E]=(0,n.useState)([]),R=(0,n.useCallback)((async()=>{if(null==j||!j.id)return;const e=await b().callApi({eventName:"getActiveImportTasks",environment:_,data:{spaceId:j.id}});"success"===e.type&&E(e.data)}),[j,_]);(0,n.useEffect)((()=>{R().catch((()=>{}));const e=setInterval(R,6e4);return()=>clearInterval(e)}),[j,_,R]),(0,n.useEffect)((()=>{let e;const t=async n=>{const a=await b().callApi({eventName:"getAsanaWorkspacesNames",environment:_,data:{}});if(n+=1,"success"===a.type)if(null!=a&&a.data.account){var i;$().Z.setState({...$().Z.state,account:a.data.account,workspaces:a.data.workspaces,isLoadingAsanaWorkspaces:!1,isAccountLinkingInProgress:!1,currentTab:"selectData",selectedWorkspace:(null===(i=a.data)||void 0===i||null===(i=i.workspaces[0])||void 0===i?void 0:i.gid)||void 0,isModalOpen:!0})}else{if(n>o)return;e=setTimeout((()=>t(n)),2e3)}},o=180;if(T){t(0).catch((()=>{}))}return()=>{clearTimeout(e)}}),[T,_]),(0,g().Yb)((async()=>{let e;const t=async a=>{var i;const s=await b().callApi({eventName:"getEvernoteAccount",environment:_,data:{}});if(a+=1,"success"===s.type)if(null!=s&&s.data&&null!==(i=s.data)&&void 0!==i&&i.userInfo){Y().A.setState({...Y().A.state,isFetchingNotebooks:!0,showLoader:!0,linkingAccount:!1});const e=await b().callApi({eventName:"getEvernoteNotebooks",environment:_,data:{}});"success"===e.type&&Y().A.setState({...Y().A.state,notebooksResponse:e.data,isFetchingNotebooks:!1,showLoader:!1}),o(247402).A.setState({open:!0})}else{if(a>n)return;e=setTimeout((async()=>await t(a)),2e3)}},n=180;if(M){const e=0;await t(e).catch((()=>{}))}return()=>{clearTimeout(e)}}),[M,_]);const O=(0,i().X)("enable_file_importer_v2"),L=(0,c().IS)((()=>({activeImportAndSyncTitle:{fontSize:S().J.UIRegular.mobile,fontWeight:S().Wy.medium,lineHeight:S().K_.UIRegular.mobile},activeImportsStatusTimeDiv:{display:"flex",alignItems:"center",flexDirection:"row",gap:4},importTabSubtitle:{display:"flex",alignItems:"center",gap:6},importLearnMoreLink:{color:v().Tj.blue.text.accentPrimary,fontSize:14,fontWeight:500}})),[]),V=(0,D.jsx)(h().sA,{id:"importsTab.activeImportsAndSyncs.title",defaultMessage:"Active imports & syncs"}),z=(e,t,n)=>{I().eH(_,{from:P,import_source:t,flowId:n}),o(857783).uK({environment:_,store:e,pageVisitSource:u().y8.Import}),K().Ay.reset()};if(!(j&&w&&w&&C))return null;const N=e.zipImporterEnabled&&!Boolean(O);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(o(8178).A,{large:!s().A.isMobile||void 0,divider:s().A.isMobile?void 0:"full",children:t.formatMessage(kt.importOrMigrateTitle)}),(0,D.jsxs)("div",{style:L.importTabSubtitle,children:[(0,D.jsx)(p().A,{isSecondaryColor:!0,children:t.formatMessage(kt.tabSubtitle)}),(0,D.jsx)(o(552712).N,{style:L.importLearnMoreLink,href:"https://www.notion.com/help/import-data-into-notion",metaHref:"https://www.notion.com/help/import-data-into-notion",external:!0,children:(0,D.jsx)(h().sA,{id:"importsTab.learnMoreCta",defaultMessage:"Learn more",values:{boldtext:e=>(0,D.jsx)("span",{style:{fontWeight:500},children:e})}})})]}),(0,D.jsx)(Mt,{}),O?(0,D.jsx)("div",{style:{marginTop:48,marginBottom:48,width:"100%",overflow:"hidden"},children:(0,D.jsx)(At,{onComplete:z,analyticsFrom:P,pageStore:A,spaceStore:j,spaceViewStore:w})}):N?(0,D.jsx)("div",{style:{marginTop:18,width:"100%",gap:10,overflow:"hidden"},children:(0,D.jsx)(o(555012).A,{onComplete:z,analyticsFrom:P})}):void 0,(0,D.jsxs)("div",{style:{width:"100%",overflow:"hidden"},children:[(0,D.jsx)(o(641001).A,{pageStore:A,spaceStore:j,spaceViewStore:w,userSettingsStore:C,analyticsFrom:P,onComplete:z,readOnlyCreditButton:!1}),(0,D.jsx)(St,{fetchActiveImportTasks:R,analyticsFrom:P}),(0,D.jsx)(U,{analyticsFrom:P}),(0,D.jsx)(Ct,{fetchActiveImportTasks:R,analyticsFrom:P}),(0,D.jsx)(o(866741).CsvImportModal,{pageStore:A,spaceStore:j,spaceViewStore:w,analyticsFrom:P})]}),(null==F?void 0:F.length)>0?(0,D.jsxs)("div",{style:{marginTop:32},children:[(0,D.jsx)(p().A,{isMultiline:!0,style:L.activeImportAndSyncTitle,children:V}),(0,D.jsx)(W().A,{tableStyle:{borderTop:0},columns:[{key:"importTime",header:(0,D.jsxs)("div",{style:L.activeImportsStatusTimeDiv,children:[t.formatMessage(kt.activeImportsImportTime),(0,D.jsx)(d().I,{icon:f().arrowStraightDownFillSmallIcon,size:"xs",colorVariant:"secondary"})]})},{key:"importFrom",header:t.formatMessage(kt.activeImportsImportFrom)},{key:"importStatus",header:t.formatMessage(kt.activeImportsImportStatus)}],rows:F.map((e=>({key:`table-${e.taskId}`,columns:[e.startedAt?`${(0,m().W_)(e.startedAt,"long",t.locale)} ${(0,m().W_)(e.startedAt,"time",t.locale)}`:"",(0,x().ZH)(e.source),(0,D.jsx)(o(881690).A,{isRound:!0,showRemoveButton:!1,value:(0,D.jsx)(p().A,{children:t.formatMessage(kt.activeImportsStatusInProgress)}),backgroundColor:B?y().$.dark.blue[200]:y().$.light.blue[200],showColoredDot:"blue",format:o(784892).NY.Small,isSingle:!0},`progress-${e.taskId}`)]})))}),F.length?(0,D.jsx)(D.Fragment,{}):(0,D.jsx)(p().A,{isSmall:!0,style:{marginTop:16},children:t.formatMessage(kt.activeImportsTableNoActiveImports)})]}):(0,D.jsx)(D.Fragment,{})]})};function Mt(){const e=(0,H().r)("settings_imports_consultant_callout");return"control"===e?null:(0,D.jsx)("div",{style:{marginTop:16},children:(0,D.jsx)(q().c,{type:e,placement:"imports-settings"})})}},344482:(e,t,o)=>{o.d(t,{A:()=>a});o(898992),o(672577);class n extends(()=>o(959180))().A{findTableHeaderCell(e,t){return this.find((o=>o.collectionContextStore===e&&o.property===t))}}const a=new n},405748:(e,t,o)=>{o.d(t,{W:()=>de,A:()=>pe});o(898992),o(672577),o(737550);var n=o(296540),a=()=>o(907258),i=()=>o(484714),s=()=>o(590526),r=()=>o(249046),l=()=>o(695115),c=()=>o(98126),d=()=>o(406094),p=()=>o(160432),u=()=>o(302501),m=()=>o(148307),g=()=>o(69708),f=()=>o(100622),h=()=>o(284371),v=()=>o(690197),y=()=>o(713972),x=()=>o(270948),S=(o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(581454),o(354520),o(908872),()=>o(710515)),I=()=>o(420802),b=()=>o(807449),j=()=>o(631524),A=()=>o(26697),w=()=>o(921030),C=()=>o(642557),k=()=>o(863330),T=()=>o(948316),M=()=>o(676510),P=()=>o(249117),_=()=>o(317182),B=()=>o(606273),F=()=>o(465960),E=()=>o(898808),R=()=>o(984645),O=()=>o(300474),L=()=>o(412532),D=()=>o(569397),V=()=>o(250910),z=()=>o(546926),N=()=>o(890492),U=()=>o(81068),W=()=>o(663639),H=()=>o(736847),q=()=>o(324254),K=o(474848);const $=function(){const e=(0,i().v3)(),t=(0,g().tz)(),o=(0,O().r)(),a=(0,s().O$)(x().A),{workspaces:r,selectedWorkspace:l,selectedImportType:c}=a;return(0,n.useEffect)((()=>{}),[c,l,e,o]),(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(u().A,{isSmall:!0,style:{paddingTop:4,paddingBottom:4},children:(0,K.jsx)(g().sA,{id:"mondayImport.importsTab.selectData.workspaceChoiceHelperText",defaultMessage:"Only one workspace can be imported at a time."})}),(0,K.jsx)(Y,{onSelectOption:e=>{x().A.setState({...a,selectedProjectsAndTeamspaces:{},selectedBoardIdsForFullImport:new Set,selectedFolderIdsForFullImport:new Set,selectedTeamspacesForFullImport:{},fetchedHierarchy:!1,mondayFoldersDetailsMap:{},mondayBoardsDetailsMap:{},selectedWorkspace:e})},options:r.map((e=>({key:e.id,label:e.name}))),currentOption:a.selectedWorkspace,placeHolder:t.formatMessage(y().$b.selectWorkSpaceV1)}),(0,K.jsx)(Z,{})]})};function Y(e){var t;const{onSelectOption:o,options:a,currentOption:i,placeHolder:s,narrow:r,allowSearch:l,shouldBeDisabled:c}=e,d=(0,g().tz)(),[p,m]=(0,n.useState)(""),f=null===(t=a.find((({key:e})=>e===i)))||void 0===t?void 0:t.label;return(0,K.jsx)(V().A,{popupType:V().z.Popup,placementToOrigin:"bottom",disabled:c,renderOrigin:e=>(0,K.jsx)(j().p,{...e,style:{paddingTop:r?2:8,paddingBottom:r?2:8,paddingInlineStart:8,paddingInlineEnd:8,opacity:1,width:250,border:`1px solid ${M().$.light.gray[100]}`,justifyContent:"space-between",marginTop:8,marginBottom:8,background:i?void 0:M().$.light.gray[75],color:i?void 0:M().$.light.gray[300]},disabled:!1,iconTrailing:{icon:q().arrowChevronSingleDownSmallIcon,colorVariant:"tertiary",size:"xs"},children:(0,K.jsx)(u().A,{style:{textOverflow:"ellipsis"},children:f||s})}),render:e=>{const t={menuType:z().gu.Popup,width:250,left:50},n=[{key:"mondayImport.dropdown.menuList",render:e=>(0,K.jsx)(H().A,{...e}),items:(p.trim()?a.filter((e=>{var t;return null===(t=e.searchTerm)||void 0===t?void 0:t.toLowerCase().includes(p.toLowerCase())})):a).map((({key:t,label:n})=>({key:t,action:()=>{o(t),e.close()},render:e=>(0,K.jsx)(U().A,{...e,title:n,shouldWrapCaption:!0,isChecked:f===n})})))}];return(0,K.jsxs)(K.Fragment,{children:[l?(0,K.jsx)("input",{style:{width:"100%",borderRadius:0,backgroundColor:M().$.light.gray[200],paddingTop:2,paddingBottom:2,paddingInlineStart:8,paddingInlineEnd:8,opacity:1,border:`1px solid ${M().$.light.gray[100]}`,justifyContent:"space-between",background:M().$.light.gray[75],fontSize:h().J.UIRegular.desktop,textOverflow:"ellipses"},placeholder:d.formatMessage(y().$b.chooseTeamspace),onChange:e=>m(e.target.value),value:p}):(0,K.jsx)(K.Fragment,{}),(0,K.jsx)(N().A,{...t,children:(0,K.jsx)(W().A,{type:W().O.Vertical,sections:n,initialFocus:void 0,style:{position:"relative",alignItems:"flex-end"}})})]})}})}const Z=function(){const e=(0,i().v3)(),t=(0,O().r)(),o=(0,s().O$)(x().A),{selectedWorkspace:a,mondayFoldersAndBoards:l}=o;return(0,n.useEffect)((()=>{a&&y().g3({environment:e,spaceId:t,selectedWorkspace:a}).catch((()=>{}))}),[a,e,t]),(0,K.jsxs)(K.Fragment,{children:[o.selectedWorkspace?(0,K.jsx)(u().A,{style:{fontWeight:h().Wy.semibold,marginTop:18},children:(0,K.jsx)(g().sA,{id:"mondayImport.importsTab.selectData.selectProjects",defaultMessage:"Select projects"})}):(0,K.jsx)(K.Fragment,{}),o.isLoadingProjects?(0,K.jsxs)(r().Ye,{style:{gap:8,marginTop:32,alignItems:"center"},children:[(0,K.jsx)(c().A,{size:"sm"}),(0,K.jsx)(u().A,{isSmall:!0,style:{color:M().$.light.gray[400]},children:(0,K.jsx)(g().sA,{id:"mondayImport.importsTab.selectData.loadingProjectsHelperText",defaultMessage:"Loading projects in the workspace..."})})]}):null==l?void 0:l.map((e=>(0,K.jsx)(G,{mondayFolderAndBoards:e},`${e.folderId}-table`)))]})};function G({mondayFolderAndBoards:e}){const t=(0,g().tz)(),o=(0,s().O$)(x().A),[i,l]=(0,n.useState)(),c=(0,s().O$)(a().AppStoreSidebarSpaceViewStore),d=(0,s().K8)((()=>{if(c)return(0,S().r)(c).map((e=>e.canAddOrRemoveTopLevelPages()?{id:e.id,name:e.getName(),icon:(0,K.jsx)(E().x,{disabled:!0,store:e})}:null)).filter((e=>null!==e))}),[c]);(0,n.useEffect)((()=>{if(!d||!c)return;if(!o.selectedProjectsAndTeamspaces[e.folderId]){l("private"),y().No({folderId:e.folderId,spaceId:null==c?void 0:c.id});for(const o of d){var t,n;if((null===(t=o.name)||void 0===t?void 0:t.toLowerCase())===(null===(n=e.folderName)||void 0===n?void 0:n.toLowerCase())){l(o.id),y().No({folderId:e.folderId,spaceId:o.id});break}}}}),[d,e,c,o.selectedProjectsAndTeamspaces,l]);const p=[{key:"private",searchTerm:"private",label:(0,K.jsxs)(r().Ye,{alignItems:"center",style:{gap:8},children:[(0,K.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:16,height:16,borderRadius:"0.25em",backgroundColor:M().$.light.gray[75]},children:(0,K.jsx)(b().I,{icon:C().lockSmallIcon,size:"xs",colorVariant:"secondary"})}),(0,K.jsx)(u().A,{style:{fontWeight:h().Wy.regular},children:t.formatMessage(y().$b.privateSpaceLabel)})]})}];d&&p.push(...d.map((e=>({key:e.id,searchTerm:e.name,label:(0,K.jsxs)(r().Ye,{alignItems:"center",style:{gap:8},children:[e.icon,e.name]})})))),p.push({key:"create",searchTerm:"New teamspace",label:(0,K.jsxs)(r().Ye,{alignItems:"center",style:{gap:4},children:[(0,K.jsx)(b().I,{icon:k().plusSmallIcon,size:"sm",colorVariant:"secondary"}),(0,K.jsx)(u().A,{children:t.formatMessage(y().$b.newTeamspaceLabel)})]})});const m=!(e.projects.length||e.taskBoards.length);return(0,K.jsx)(A().m,{disableTooltip:!m,renderTooltip:()=>(0,K.jsx)(u().A,{style:{color:f().oZ.white},isSmall:!0,children:(0,K.jsx)(g().sA,{id:"mondayImport.importsTab.selectData.tooltipForDisabledFolder",defaultMessage:"This folder has no boards with Item type Projects or Tasks. Other types are not supported."})}),render:t=>(0,K.jsx)("div",{...t,children:(0,K.jsx)(Q,{mondayFolderAndBoards:e,teamsOptions:p,setSelectedTeam:l,selectedTeam:i,mondayImportStoreState:o})})})}function J({collapsed:e,mondayFolderAndBoards:t,mondayImportStoreState:o,isMondayV2Flow:n}){if(e)return[];const a=t.projects.map((e=>({key:e.id,columns:[(0,K.jsxs)(r().Ye,{alignItems:"center",gap:6,style:{marginInlineStart:20},children:[(0,K.jsx)(I().S,{style:{marginInlineEnd:2},onClick:()=>{const n={...o.selectedProjectsAndTeamspaces[t.folderId]||{projects:[],notionTeamspaceId:void 0}},{notionTeamspaceId:a,projects:i}=n;let s;s=i.find((t=>t.mondayProjectId===e.id))?i.filter((t=>t.mondayProjectId!==e.id)):i.concat({name:e.name,mondayProjectId:e.id,mondayBoardId:e.boardId,collectionType:"projects"}),x().A.setState({...o,selectedProjectsAndTeamspaces:{...o.selectedProjectsAndTeamspaces,[t.folderId]:{notionTeamspaceId:a,projects:s}}})},checked:{...o.selectedProjectsAndTeamspaces[t.folderId]||{projects:[],notionTeamspaceId:void 0}}.projects.some((t=>t.mondayProjectId===e.id)),size:14}),(0,K.jsx)("div",{style:{width:240,wordWrap:"break-word"},children:(0,K.jsx)(u().A,{isMultiline:!0,style:n?{lineHeight:"20px",fontSize:"14px"}:{},children:e.name})})]},`${e.id}-container`)]}))),i=t.taskBoards.map((e=>({key:e.id,columns:[(0,K.jsxs)(r().Ye,{alignItems:"center",gap:6,style:{marginInlineStart:20},children:[(0,K.jsx)(I().S,{style:{marginInlineEnd:2},onClick:()=>{const n={...o.selectedProjectsAndTeamspaces[t.folderId]||{projects:[],notionTeamspaceId:void 0}},{notionTeamspaceId:a,projects:i}=n;let s;s=i.find((t=>t.mondayProjectId===e.id))?i.filter((t=>t.mondayProjectId!==e.id)):i.concat({name:e.name,mondayProjectId:e.id,collectionType:"tasks"}),x().A.setState({...o,selectedProjectsAndTeamspaces:{...o.selectedProjectsAndTeamspaces,[t.folderId]:{notionTeamspaceId:a,projects:s}}})},checked:{...o.selectedProjectsAndTeamspaces[t.folderId]||{projects:[],notionTeamspaceId:void 0}}.projects.some((t=>t.mondayProjectId===e.id)),size:14}),(0,K.jsx)("div",{style:{width:240,wordWrap:"break-word"},children:(0,K.jsx)(u().A,{isMultiline:!0,style:n?{lineHeight:"20px",fontSize:"14px"}:{},children:e.name})})]},`${e.id}-container`)]})));return[...a,...i]}function Q({mondayFolderAndBoards:e,selectedTeam:t,setSelectedTeam:o,teamsOptions:i,mondayImportStoreState:c}){var d;const[p,h]=(0,n.useState)(!1),v=!(e.projects.length||e.taskBoards.length),S=(0,s().K8)((()=>{var e;return null===(e=a().AppStoreSidebarSpaceViewStore.state)||void 0===e?void 0:e.id}),[]),j=(0,g().tz)(),A=(0,n.useCallback)((t=>{y().No({folderId:e.folderId,spaceId:t}),o(t)}),[e.folderId,o]),w=(0,n.useCallback)((t=>{if("create"===t)return void F().vn("monday_importer",{onClose:A});let n;if("private"===t){if(!S)return;n=S}else n=t;y().No({folderId:e.folderId,spaceId:n}),o(t)}),[e.folderId,o,A,S]);return(0,K.jsxs)(r().Ye,{style:v?{color:f().Tj.text.secondary,fill:f().Tj.icon.secondary,opacity:.4,marginInlineStart:-18}:{marginInlineStart:-18},children:[(0,K.jsx)(l().A,{ariaLabel:j.formatMessage({id:"mondayImport.importsTab.selectData.collapseToggle",defaultMessage:"Collapse toggle"}),icon:L().l,onClick:()=>h((e=>!e)),style:{transform:p?"rotate(90deg)":"rotate(180deg)",marginInlineEnd:8,marginTop:15,width:10,height:10},hoveredStyle:{background:"transparent"},pressedStyle:{background:"transparent"},iconStyle:{width:12,height:12}}),(0,K.jsx)(_().A,{tableStyle:{borderTop:0},cellStyle:{verticalAlign:"middle"},columns:[{key:"team",header:(0,K.jsxs)(r().Ye,{alignItems:"center",gap:2,children:[(0,K.jsx)(I().S,{style:{marginInlineEnd:4,height:14},disabled:v,checked:(()=>{const t={...c.selectedProjectsAndTeamspaces[e.folderId]||{projects:[],notionTeamspaceId:void 0,isEntireFolderSelected:void 0}};return Boolean(t.isEntireFolderSelected)})(),size:14,onClick:()=>{const t={...c.selectedProjectsAndTeamspaces[e.folderId]||{projects:[],notionTeamspaceId:void 0,isEntireFolderSelected:void 0}},{notionTeamspaceId:o,isEntireFolderSelected:n}=t;let a,i;if(n)a=[],i=!1;else{a=[...e.projects.map((e=>({name:e.name,mondayProjectId:e.id,mondayBoardId:e.boardId,collectionType:"projects"}))),...e.taskBoards.map((e=>({name:e.name,mondayProjectId:e.id,collectionType:"tasks"})))],i=!0}x().A.setState({...c,selectedProjectsAndTeamspaces:{...c.selectedProjectsAndTeamspaces,[e.folderId]:{notionTeamspaceId:o,projects:a,isEntireFolderSelected:i}}})}}),(0,K.jsx)(u().A,{style:{width:280,textOverflow:"ellipsis"},children:e.folderName})]}),style:{width:300}},...i?[{key:"importInto",header:(0,K.jsxs)(r().Ye,{style:{alignItems:"center"},children:[(0,K.jsx)("div",{children:(0,K.jsx)(g().sA,{id:"mondayImport.importsTab.selectData.importInto",defaultMessage:"Import into"})}),(0,K.jsx)("div",{style:{marginInlineEnd:16,marginInlineStart:8},children:(0,K.jsx)(b().I,{icon:D().arrowStraightRightSmallIcon,size:"xs"})}),(0,K.jsxs)(r().Ye,{style:{alignItems:"center",gap:8},children:[(0,K.jsx)("img",{src:m().A.emails.notionLogoBlackSmallPng,height:18}),(0,K.jsx)(Y,{options:i,onSelectOption:w,currentOption:null===(d=i.find((e=>e.key===t)))||void 0===d?void 0:d.key,narrow:!0,allowSearch:!0,placeHolder:j.formatMessage({id:"mondayImport.importsTab.selectData.selectATeamspace",defaultMessage:"Select a teamspace"}),shouldBeDisabled:v})]})]}),style:{width:"50%"}}]:[]],rows:J({collapsed:p,mondayFolderAndBoards:e,mondayImportStoreState:c,isMondayV2Flow:!1})})]})}function X(){const e=(0,s().O$)(x().A),t=(0,g().tz)(),o=(0,s().K8)((()=>{const e=a().default.state.sidebarSpaceViewStore,o=e?(0,S().r)(e).map((e=>e.canAddOrRemoveTopLevelPages()?{id:e.id,name:e.getName(),icon:(0,K.jsx)(E().x,{disabled:!0,store:e})}:null)).filter((e=>null!==e)):void 0,n=[];return o&&n.push(...o.map((e=>{var t;return{key:e.id,searchTerm:(null===(t=e.name)||void 0===t?void 0:t.split(" "))||void 0,icon:e.icon,name:e.name}}))),n.push({key:"private",searchTerm:["private"],icon:(0,K.jsx)(b().I,{icon:C().lockSmallIcon,size:"xs",colorVariant:"secondary"}),name:t.formatMessage(y().$b.privateSpaceLabel)}),n.push({key:"create",searchTerm:["New"],icon:(0,K.jsx)(b().I,{icon:k().plusSmallIcon,size:"sm",colorVariant:"secondary"}),name:t.formatMessage(y().$b.newTeamspaceLabel)}),n}),[t]),{mondayFoldersDetailsMap:n,selectedImportType:i,isLoadingHierarchy:l,mondayFoldersAndBoards:d,isLoadingProjects:p}=e;return"FullImport"===i?l?(0,K.jsxs)(r().Ye,{style:{gap:8,marginTop:32,alignItems:"center"},children:[(0,K.jsx)(c().A,{size:"sm"}),(0,K.jsx)(u().A,{isSmall:!0,style:{color:M().$.light.gray[400]},children:(0,K.jsx)(g().sA,{id:"mondayImport.importsTab.selectData.loadingBoardsHelperText",defaultMessage:"Loading boards in the workspace..."})})]}):(0,K.jsx)(K.Fragment,{children:Object.entries(n).filter((([,e])=>!e.parent)).map((([e,t])=>(0,K.jsx)(te,{currentFolderId:t.folderId,notionTeamspaceOptions:o},`${e}-table`)))}):"ProjectsAndTasks"===i?p?(0,K.jsxs)(r().Ye,{style:{gap:8,marginTop:32,alignItems:"center"},children:[(0,K.jsx)(c().A,{size:"sm"}),(0,K.jsx)(u().A,{isSmall:!0,style:{color:M().$.light.gray[400]},children:(0,K.jsx)(g().sA,{id:"mondayImport.importsTab.selectData.loadingProjectsHelperText",defaultMessage:"Loading projects in the workspace..."})})]}):(0,K.jsx)(K.Fragment,{children:null==d?void 0:d.map((e=>(0,K.jsx)(oe,{mondayFolderAndBoards:e,notionTeamspaceOptions:o},e.folderId)))}):null}const ee=function(){const e=(0,i().v3)(),t=(0,s().O$)(a().AppStoreSidebarSpaceStore),n=(0,s().O$)(x().A),{selectedWorkspace:r,fetchedHierarchy:l,selectedImportType:c,isLoadingHierarchy:d}=n;return(0,o(187174).Yb)((async()=>{if(r&&c&&t)if("FullImport"===c){if(d||l)return;await y().nM({environment:e,spaceId:t.getSpaceId(),selectedWorkspace:r})}else"ProjectsAndTasks"===c&&await y().g3({environment:e,spaceId:null==t?void 0:t.id,selectedWorkspace:r})}),[e,l,d,c,r,t]),(0,K.jsx)(X,{})};function te({currentFolderId:e,notionTeamspaceOptions:t}){const o=(0,g().tz)(),[i,l]=(0,n.useState)(!1),[d,p]=(0,n.useState)(),m=(0,s().O$)(x().A),{mondayFoldersDetailsMap:h,mondayBoardsDetailsMap:v,excludeProjectsAndTasks:S,selectedBoardIdsForFullImport:j,selectedFolderIdsForFullImport:C,isLoadingBoards:k}=m,M=null==h?void 0:h[e],B=(0,s().O$)(a().AppStoreSidebarSpaceViewStore);(0,n.useEffect)((()=>{if(!B||!M||!B.getSpaceId())return;m.selectedFolderIdsForFullImport.has(M.folderId)||p("private")}),[M,B,m.selectedFolderIdsForFullImport]);const E=(0,n.useCallback)((e=>{M&&(y().Mi({folderId:M.folderId,notionTeamspaceId:e,notionRootTableName:"team"}),p(e))}),[M]),O=(0,n.useCallback)((e=>{if(M)if("create"!==e){if("private"===e){if(null==B||!B.getSpaceId()||!M)return;y().Mi({folderId:M.folderId,notionTeamspaceId:B.getSpaceId(),notionRootTableName:"space"})}else y().Mi({folderId:M.folderId,notionTeamspaceId:e,notionRootTableName:"team"});p(e)}else F().vn("monday_importer",{onClose:E})}),[M,E,B]),L=(0,n.useMemo)((()=>C?{boardsCount:y().Wh(e,j,h,v,S)}:{boardsCount:0}),[e,S,v,h,j,C]),D=(0,n.useMemo)((()=>({boardsCount:y().nP(e,h,v,S)})),[e,S,v,h]),V=!(M.boards.length||M.subFolders.length),z=(0,n.useMemo)((()=>y().p7({currentfolderId:e,mondayFolderDetails:h,mondayBoardDetails:v,excludeProjectsAndTasks:S})),[e,S,v,h]),N={color:f().Tj.text.secondary,fill:f().Tj.icon.secondary,opacity:.4};function U({mondayFoldersMap:e,mondayBoardsMap:t,currentFolderId:n,excludeProjectsAndTasks:a}){if(i)return[];const s=e[n];return[...s.boards.map((e=>{const n=t[e];if(!n||!s)return null;const i=y().dJ({excludeProjectsAndTasks:a,board:n});return{key:e,columns:[(0,K.jsxs)(r().Ye,{alignItems:"center",gap:6,style:{marginInlineStart:20},children:[(0,K.jsx)(I().S,{style:i?{color:f().Tj.text.secondary,fill:f().Tj.icon.secondary,opacity:.4,marginInlineEnd:2}:{marginInlineEnd:2},onClick:()=>{y().$A(e)},checked:j.has(e),size:14,disabled:i}),(0,K.jsx)(A().m,{disableTooltip:!i,renderTooltip:()=>(0,K.jsx)(u().A,{style:{color:f().oZ.white},isSmall:!0,children:o.formatMessage(y().$b.projectsAndTasksExcludedToolTip)}),render:e=>(0,K.jsx)("div",{...e,children:(0,K.jsx)("div",{style:i?{color:f().Tj.text.secondary,fill:f().Tj.icon.secondary,opacity:.4,width:240,wordWrap:"break-word"}:{width:240,wordWrap:"break-word"},children:(0,K.jsxs)(u().A,{style:{lineHeight:"20px",fontSize:"14px"},children:[(0,K.jsx)("div",{style:{display:"inline-block",paddingInlineEnd:"4px"},children:(0,K.jsx)(b().I,{style:{display:"inline-block"},icon:T().C,size:"xxs",colorVariant:"secondary"})}),n.name]})})})})]},`${e}-container`)]}})).filter((e=>null!==e)),...s.subFolders.map((o=>{const n=e[o];return n?{key:o,columns:[(0,K.jsx)(r().Ye,{alignItems:"center",gap:6,style:{marginInlineStart:20,marginTop:"4px"},children:(0,K.jsx)(_().A,{hideTopBorderForHeader:!0,tableStyle:{borderRadius:2,borderTop:void 0,borderBottom:void 0},cellStyle:{paddingTop:4,paddingBottom:4,verticalAlign:"middle"},rowStyle:{borderTop:void 0},columns:[{key:"team",header:(0,K.jsxs)(r().Ye,{alignItems:"center",gap:2,children:[(0,K.jsx)(I().S,{style:k?{...N,marginInlineEnd:4,height:14}:{marginInlineEnd:4,height:14},checked:C.has(o),size:14,disabled:k,onClick:()=>y().TJ(o,e,t,a)}),(0,K.jsx)(b().I,{icon:w().F,size:"sm",colorVariant:"secondary",fitToViewBox:"horizontal"}),(0,K.jsx)(u().A,{style:{width:280,textOverflow:"ellipsis"},children:n.folderName})]}),style:{width:300,paddingBottom:0}}],rows:U({mondayFoldersMap:e,mondayBoardsMap:t,currentFolderId:o,excludeProjectsAndTasks:a})})},`${o}-container`)]}:null})).filter((e=>null!==e)).flat()]}return M&&v&&z?(0,K.jsx)(A().m,{disableTooltip:!V,renderTooltip:()=>(0,K.jsx)(u().A,{style:{color:f().oZ.white},isSmall:!0,children:o.formatMessage(y().$b.noBoardsTooltipMessage)}),render:e=>{var n;return(0,K.jsx)("div",{...e,children:(0,K.jsx)("div",{style:{marginBottom:10},children:(0,K.jsxs)(P().xA,{gap:8,children:[(0,K.jsx)(P().LX,{row:1,col:1,children:(0,K.jsx)(ne,{shouldBeDisabled:V,collapsed:i,onCollapse:()=>l((e=>!e)),columns:[{key:"team",header:(0,K.jsxs)(r().Ye,{alignItems:"center",gap:2,children:[(0,K.jsx)(I().S,{style:{marginInlineEnd:4,height:14},disabled:V||k,checked:m.selectedFolderIdsForFullImport.has(M.folderId),size:14,onClick:()=>y().TJ(M.folderId,h,v,S)}),(0,K.jsx)(b().I,{icon:w().F,size:"sm",fitToViewBox:"horizontal"}),(0,K.jsxs)(r().Ye,{alignItems:"center",gap:6,children:[(0,K.jsx)(u().A,{style:k?{...N,textOverflow:"ellipsis"}:{textOverflow:"ellipsis"},children:M.folderName}),k?(0,K.jsx)(c().A,{size:"sm"}):void 0,(0,K.jsxs)(u().A,{isSmall:!0,children:[D.boardsCount,o.formatMessage(y().$b.boardsKeyWord)]})]})]}),style:{width:300,paddingBottom:0}}],rows:U({mondayFoldersMap:h,mondayBoardsMap:v,currentFolderId:M.folderId,excludeProjectsAndTasks:S})})}),(0,K.jsx)(P().LX,{row:1,col:2,children:(0,K.jsx)(R().c,{onSelectOption:O,options:t,currentOption:null===(n=t.find((e=>e.key===d)))||void 0===n?void 0:n.key,style:i?"compact":"full",children:(0,K.jsx)(u().A,{style:{fontSize:"14px",paddingInlineStart:i?"8px":0},children:(0,K.jsx)(g().sA,{id:"mondayImport.importsTab.chooseWorkspace.totalBoards",defaultMessage:"Import {boardsCount} boards to",values:{boardsCount:L.boardsCount}})})})})]})})})}}):null}function oe({mondayFolderAndBoards:e,notionTeamspaceOptions:t}){const o=(0,R().A)(),[i,l]=(0,n.useState)(!1),[c,d]=(0,n.useState)(),p=(0,s().O$)(x().A),m=(0,s().O$)(a().AppStoreSidebarSpaceViewStore),h=(0,s().K8)((()=>{if(m)return(0,S().r)(m).map((e=>({id:e.id,name:e.getName(),icon:(0,K.jsx)(E().x,{disabled:!0,store:e})})))}),[m]);(0,n.useEffect)((()=>{if(!h||!m)return;if(!p.selectedProjectsAndTeamspaces[e.folderId]){d("private"),y().No({folderId:e.folderId,spaceId:null==m?void 0:m.id});for(const n of h){var t,o;if((null===(t=n.name)||void 0===t?void 0:t.toLowerCase())===(null===(o=e.folderName)||void 0===o?void 0:o.toLowerCase())){d(n.id),y().No({folderId:e.folderId,spaceId:n.id});break}}}}),[e,m,p.selectedProjectsAndTeamspaces,h]);const v=!(e.projects.length||e.taskBoards.length),b=(0,n.useCallback)((t=>{y().No({folderId:e.folderId,spaceId:t}),d(t)}),[e.folderId]),j=(0,n.useCallback)((t=>{if("create"===t)return void F().vn("monday_importer",{onClose:b});let o;if("private"===t){if(null==m||!m.id)return;o=m.id}else o=t;y().No({folderId:e.folderId,spaceId:o}),d(t)}),[null==m?void 0:m.id,e.folderId,b]),w=(0,g().tz)(),C=(0,n.useMemo)((()=>({projectsCount:e.projects.length,tasksCount:e.taskBoards.length})),[e.projects.length,e.taskBoards.length]),k=(0,n.useMemo)((()=>{var t;const o=null===(t=p.selectedProjectsAndTeamspaces[e.folderId])||void 0===t?void 0:t.projects,[n,a]=o?o.reduce((([e,t],o)=>"projects"===o.collectionType?[e+1,t]:[e,t+1]),[0,0]):[0,0];return{projectsCount:n,tasksCount:a}}),[e.folderId,p.selectedProjectsAndTeamspaces]);return(0,K.jsx)(A().m,{disableTooltip:!v,renderTooltip:()=>(0,K.jsx)(u().A,{style:{color:f().oZ.white},isSmall:!0,children:(0,K.jsx)(g().sA,{id:"mondayImport.importsTab.selectData.tooltipForDisabledFolder",defaultMessage:"This folder has no boards with Item type Projects or Tasks. Other types are not supported."})}),render:n=>{var a;return(0,K.jsx)("div",{...n,children:(0,K.jsx)("div",{style:o.asanaTeamSectionContainer,children:(0,K.jsxs)(P().xA,{gap:8,children:[(0,K.jsx)(P().LX,{row:1,col:1,children:(0,K.jsx)(ne,{shouldBeDisabled:v,collapsed:i,onCollapse:()=>l((e=>!e)),columns:[{key:"team",header:(0,K.jsxs)(r().Ye,{alignItems:"center",gap:2,children:[(0,K.jsx)(I().S,{style:{marginInlineEnd:4,height:14},disabled:v,checked:(()=>{const t={...p.selectedProjectsAndTeamspaces[e.folderId]||{projects:[],notionTeamspaceId:void 0,isEntireFolderSelected:void 0}};return Boolean(t.isEntireFolderSelected)})(),size:14,onClick:()=>{const t={...p.selectedProjectsAndTeamspaces[e.folderId]||{projects:[],notionTeamspaceId:void 0,isEntireFolderSelected:void 0}},{notionTeamspaceId:o,isEntireFolderSelected:n}=t;let a,i;if(n)a=[],i=!1;else{a=[...e.projects.map((e=>({name:e.name,mondayProjectId:e.id,mondayBoardId:e.boardId,collectionType:"projects"}))),...e.taskBoards.map((e=>({name:e.name,mondayProjectId:e.id,collectionType:"tasks"})))],i=!0}x().A.setState({...p,selectedProjectsAndTeamspaces:{...p.selectedProjectsAndTeamspaces,[e.folderId]:{notionTeamspaceId:o,projects:a,isEntireFolderSelected:i}}})}}),(0,K.jsxs)(r().Ye,{alignItems:"center",gap:6,children:[(0,K.jsx)(u().A,{style:{textOverflow:"ellipsis"},children:e.folderName}),(0,K.jsx)(A().m,{renderTooltip:()=>(0,K.jsx)(u().A,{style:{color:f().oZ.white},isSmall:!0,children:w.formatMessage(y().$b.projectsAndTasksCountTooltip)}),render:e=>(0,K.jsx)("div",{...e,children:(0,K.jsxs)(u().A,{isSmall:!0,children:[C.projectsCount+C.tasksCount,w.formatMessage(y().$b.projectsKeyWord)]})})})]})]}),style:{width:300,paddingBottom:0}}],rows:J({collapsed:i,mondayFolderAndBoards:e,mondayImportStoreState:p,isMondayV2Flow:!0})})}),(0,K.jsx)(P().LX,{row:1,col:2,children:(0,K.jsx)(R().c,{onSelectOption:j,options:t,currentOption:null===(a=t.find((e=>e.key===c)))||void 0===a?void 0:a.key,style:i?"compact":"full",children:(0,K.jsx)(u().A,{style:{fontSize:"14px",paddingInlineStart:i?"8px":0},children:(0,K.jsx)(g().sA,{id:"mondayImport.importsTab.chooseWorkspace.totalprojectsAnsTasks",defaultMessage:"Import {projectsCount} Projects to",values:{projectsCount:k.projectsCount+k.tasksCount}})})})})]})})})}})}function ne({columns:e,rows:t,shouldBeDisabled:o,collapsed:n,onCollapse:a}){const i=(0,R().A)();return(0,K.jsx)("div",{style:i.teamAndProjectsCollapse,children:(0,K.jsxs)(r().Ye,{style:o?{color:f().Tj.text.secondary,fill:f().Tj.icon.secondary,opacity:.4}:{},children:[(0,K.jsx)("div",{style:{marginTop:6},children:(0,K.jsx)(j().p,{onClick:()=>a(),pressedStyle:{background:"transparent"},ignoreLocalHoverState:!0,children:(0,K.jsx)(B().f,{disabled:!0,style:{pointerEvents:"none"},isSidebar:!1,open:!n,fill:!1,onClick:e=>{e.stopPropagation(),a()},icon:"chevron"})})}),(0,K.jsx)(_().A,{hideTopBorderForHeader:!0,tableStyle:{borderRadius:2,borderTop:void 0,borderBottom:void 0},cellStyle:{paddingTop:4,paddingBottom:4,verticalAlign:"middle"},rowStyle:{borderTop:void 0},columns:e,rows:t})]})})}const ae=function(e){const{spaceStore:t}=e,n=(0,g().tz)(),a=(0,s().O$)(x().A),i=y().P0(),{selectedWorkspace:l,workspaces:c,selectedImportType:d,excludeProjectsAndTasks:p}=a,m="FullImport"===d?{on:p,title:n.formatMessage(y().$b.excludeProjectsAndTasks),focused:!0,onClick:()=>x().A.setState({...a,excludeProjectsAndTasks:!p,selectedFolderIdsForFullImport:new Set,selectedBoardIdsForFullImport:new Set,selectedTeamspacesForFullImport:{}})}:void 0,f=[];return m&&f.push({key:"monday-exclude-projects-and-asks",props:m}),(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(r().Ye,{alignItems:"center",gap:8,children:(0,K.jsx)(o(255043).r,{searchThreshold:5,onSelectOption:e=>{x().A.setState({...a,selectedProjectsAndTeamspaces:{},selectedBoardIdsForFullImport:new Set,selectedFolderIdsForFullImport:new Set,selectedTeamspacesForFullImport:{},fetchedHierarchy:!1,mondayFoldersDetailsMap:{},mondayBoardsDetailsMap:{},selectedWorkspace:e})},options:c.map((e=>({key:e.id,name:e.name,searchTerm:[e.name,...e.name.split(" ")]}))),currentOption:l,placeHolder:n.formatMessage(y().$b.selectWorkspaceV2),inputProps:{placeholder:n.formatMessage(y().$b.searchWorkspaces)},selectorButtonStyle:"workspace"})}),l?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(u().A,{style:{font:"SF Pro",fontWeight:"590",fontSize:"17px",marginTop:"12px",lineHeight:"22px"},children:n.formatMessage(y().$b.chooseImportType)}),(0,K.jsx)(r().Ye,{alignItems:"left",gap:8,children:(0,K.jsx)(o(702723).A,{spaceStore:t,type:"dropdown",currentOption:d,options:Object.entries(i).map((([e,t])=>({key:e,label:n.formatMessage(t.title),caption:n.formatMessage(t.description)}))),buttonStyle:{paddingInlineStart:"0px",marginInlineStart:"0px"},menuStyle:{width:"300px"},onSelectOption:e=>{x().A.setState({...a,selectedImportType:e,selectedProjectsAndTeamspaces:{},selectedBoardIdsForFullImport:new Set,selectedFolderIdsForFullImport:new Set,selectedTeamspacesForFullImport:{},fetchedHierarchy:!1,mondayFoldersDetailsMap:{},mondayBoardsDetailsMap:{}})},switcherButtons:f})})]}):void 0,l&&d?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(u().A,{style:{font:"SF Pro",fontWeight:"590",fontSize:"17px",marginTop:"12px",lineHeight:"22px"},children:n.formatMessage(y().$b.selectBoardsHeading)}),(0,K.jsx)(u().A,{style:{font:"SF Pro",fontWeight:h().Wy.regular,fontSize:h().J.UIRegular.desktop,lineHeight:"19.6px",whiteSpace:"normal",wordWrap:"break-word",paddingTop:4,paddingBottom:20},children:n.formatMessage(y().$b.mapTeamspacesDescription)})]}):void 0,(0,K.jsx)(ee,{})]})};var ie=()=>o(450424);const se=function(){const e=(0,s().K8)((()=>x().A.state.result),[]);return e?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(u().A,{isMultiline:!0,children:(0,K.jsx)(g().sA,{id:"mondayImport.importsTab.confirm.subtitle",defaultMessage:"The following data has been successfully imported."})}),(0,K.jsx)("div",{style:{marginTop:32},children:e.map((e=>(0,K.jsx)(re,{importStatus:e},e.mondayFolderId)))})]}):(0,K.jsx)(K.Fragment,{})};function re({importStatus:e}){const t=(0,g().tz)(),[o,i]=(0,n.useState)(!1),c=(0,s().O$)(a().AppStoreSidebarSpaceStore),d=(0,s().K8)((()=>x().A.state.mondayFoldersAndBoards),[]),p=(0,s().O$)(a().AppStoreSidebarSpaceViewStore),m=(0,s().K8)((()=>{if(!p)return;const e=(0,S().r)(p).map((e=>({id:e.id,name:e.getName(),icon:(0,K.jsx)(E().x,{disabled:!0,store:e})})));return c?(e||[]).concat({id:p.id,name:"Private",icon:(0,K.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:18,height:18,borderRadius:"0.25em",backgroundColor:M().$.light.gray[75]},children:(0,K.jsx)(b().I,{icon:C().lockSmallIcon,size:"xs",colorVariant:"secondary"})})}):e}),[p,c]),{notionTeamspaceName:f,notionTeamspaceIcon:h}=(0,n.useMemo)((()=>{const t=null==m?void 0:m.find((t=>t.id===e.notionTeamSpaceId));return t?{notionTeamspaceName:t.name,notionTeamspaceIcon:t.icon}:{notionTeamspaceName:void 0,notionTeamspaceIcon:void 0}}),[m,e]),v=(0,n.useMemo)((()=>{var t;return null==d||null===(t=d.find((t=>t.folderId===e.mondayFolderId)))||void 0===t?void 0:t.folderName}),[d,e]);return(0,K.jsxs)(r().Ye,{style:{marginTop:16},children:[(0,K.jsx)(l().A,{ariaLabel:t.formatMessage({id:"mondayImport.importsTab.confirm.collapseToggle",defaultMessage:"Collapse toggle"}),icon:L().l,onClick:()=>i((e=>!e)),style:{transform:o?"rotate(90deg)":"rotate(180deg)",marginInlineEnd:8,marginTop:4},iconStyle:{width:10,height:10}}),(0,K.jsx)(_().A,{tableStyle:{borderTop:0},cellStyle:{verticalAlign:"middle"},columns:[{key:"team",header:(0,K.jsx)(r().Ye,{alignItems:"center",gap:2,children:(0,K.jsx)(u().A,{isSmall:!0,style:{width:280,textOverflow:"ellipsis"},children:v})}),style:{width:300}},{key:"importedInto",header:(0,K.jsxs)(r().Ye,{gap:4,children:[(0,K.jsxs)(r().Ye,{style:{alignItems:"center",gap:4},children:[(0,K.jsx)(u().A,{isSmall:!0,children:(0,K.jsx)(g().sA,{id:"mondayImport.importsTab.selectData.importedInto",defaultMessage:"Imported into"})}),(0,K.jsx)(b().I,{icon:D().arrowStraightRightSmallIcon,size:"xs"})]}),(0,K.jsxs)(r().Ye,{style:{alignItems:"center",gap:4},children:[h,f]})]}),style:{width:300}}],rows:function({collapsed:t}){return t?[]:e.projects.map((e=>({key:e.projectId,columns:[(0,K.jsxs)(r().Ye,{gap:8,alignItems:"center",children:[(0,K.jsx)(b().I,{icon:ie().checkmarkCircleFillSmallIcon,size:"sm",colorPalette:"green",colorVariant:"accentPrimary"}),(0,K.jsx)(u().A,{isMultiline:!0,style:{wordWrap:"break-word",width:300},children:e.name})]},e.projectId)]})))}({collapsed:o})})]})}const le=(0,g().YK)({failed:{defaultMessage:"Some problems occurred while importing data from your Monday workspace.",id:"Mondayimport.importingData.failed.problemsOccured"}});function ce(e,t){switch(e){case"selectData":return(0,K.jsx)(u().A,{style:{paddingBottom:8,fontSize:18,width:"100%",fontWeight:h().Wy.semibold},children:t.formatMessage(y().$b.selectWorkSpaceV1)});case"chooseWorkspace":return(0,K.jsx)(u().A,{style:{font:"SF Pro",fontWeight:"590",fontSize:"17px",marginTop:"12px",lineHeight:"22px"},children:t.formatMessage(y().$b.chooseWorkSpace)});default:return(0,K.jsx)(K.Fragment,{})}}function de({style:e}){return(0,K.jsx)(v().A,{title:(0,K.jsx)(g().sA,{id:"mondayAuthentication.helpButton.caption",defaultMessage:"Learn more about importing from Monday.com"}),href:"https://www.notion.so/help/monday",analyticsFrom:"import",style:e})}const pe=function({tab:e,fetchActiveImportTasks:t,analyticsFrom:u}){const{navigate:h}=(0,n.useContext)(o(312788).E),v=(0,g().tz)(),S=(0,i().v3)(),I=(0,s().O$)(a().AppStoreSidebarSpaceStore),b=(0,s().O$)(a().AppStoreSidebarSpaceViewStore),j=(0,s().O$)(x().A),A=(0,s().K8)((()=>o(191227).A.state.flowId),[])||o(206267).JW(),{workspaces:w}=j,C=(0,n.useCallback)((()=>{if("FullImport"===j.selectedImportType)return j.selectedBoardIdsForFullImport.size>0||j.selectedFolderIdsForFullImport.size>0;return Object.values(j.selectedProjectsAndTeamspaces).some((e=>0!==e.projects.length))}),[j.selectedProjectsAndTeamspaces,j.selectedFolderIdsForFullImport,j.selectedBoardIdsForFullImport,j.selectedImportType]),k=(0,n.useCallback)((()=>{I&&b&&("FullImport"===j.selectedImportType?(y().oz({environment:S,spaceStore:I,flowId:A,spaceViewStore:b}).catch((()=>{})),o(559926).eH(S,{import_source:"monday",from:u,flowId:A})):y().i_({environment:S,spaceStore:I,currentSpaceViewStore:b,flowId:A}).catch((()=>{})))}),[b,S,A,j.selectedImportType,I,u]),T=(0,o(401497).IS)((()=>({closeButton:{zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:f().Tj.buttonHoveredBackground,width:20,height:20,padding:4},closeButtonHover:{background:f().Tj.buttonPressedBackground},closeButtonIcon:{fill:f().Tj.text.secondary}})),[]),M=(0,n.useMemo)((()=>"chooseWorkspace"===e),[e]);return(0,K.jsxs)(o(843878).Ay,{controlRow:(e=>"chooseWorkspace"===e?(0,K.jsx)(o(835539).s,{left:(0,K.jsx)(de,{}),next:{disabled:!C()||j.templateCreationInProgress,onClick:k,message:v.formatMessage(y().$b.nextButton)},back:{disabled:!w.length,onClick:()=>{t(),x().A.resetImport()},message:v.formatMessage(y().$b.backButton)}}):"selectData"===e?(0,K.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,K.jsx)(d().A,{size:"lg",style:{border:0},disabled:!w.length,onClick:()=>{t(),x().A.resetImport()},children:v.formatMessage(y().$b.backButton)}),(0,K.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,K.jsx)(r().Ye,{alignItems:"center",gap:8,children:(0,K.jsx)(p().A,{colorPalette:"blue",style:{marginInlineStart:16},disabled:!C()||j.templateCreationInProgress,onClick:()=>{k()},children:j.templateCreationInProgress?(0,K.jsxs)(r().Ye,{alignItems:"center",gap:2,children:[(0,K.jsx)(c().A,{onDarkBackground:!0}),v.formatMessage(y().$b.creatingTemplate)]}):(0,K.jsx)(K.Fragment,{children:v.formatMessage(y().$b.nextButton)})})})})]}):"importingData"===e?(0,K.jsx)("div",{style:{display:"flex",justifyContent:"right"},children:(0,K.jsx)(d().A,{size:"lg",disabled:!w.length,onClick:()=>{t(),x().A.resetImport()},children:(0,K.jsx)(g().sA,{id:"importsTab.importingData.closeButtonText",defaultMessage:"Close"})})}):"confirm"===e?(0,K.jsx)("div",{style:{display:"flex",justifyContent:"right"},children:(0,K.jsx)(p().A,{colorPalette:"blue",onClick:()=>{var e;if(null!==(e=j.result)&&void 0!==e&&e.length&&j.loggerPageId){const e=j.result.find((e=>void 0!==e.projectCollectionPageId)),t=(null==e?void 0:e.projectCollectionPageId)||j.loggerPageId;h({url:(0,o(921940).A)({pageId:t,pageModel:void 0===t?void 0:S.defaultRecordCache.inMemoryRecordCache.getRecordModel({pointer:{table:o(179034).ev,id:t},userId:S.currentUser.id}),baseUrl:o(726637).A.domainBaseUrl,pageVisitSource:o(584262).y8.Import}),environment:S})}x().A.resetImport(),o(404141).Ay.reset()},children:(0,K.jsx)(g().sA,{id:"importsTab.confirm.doneText",defaultMessage:"Done"})})}):"failure"===e?(0,K.jsx)("div",{style:{display:"flex",justifyContent:"right"},children:(0,K.jsx)(d().A,{size:"lg",disabled:!w.length,onClick:()=>{t(),x().A.resetImport()},children:(0,K.jsx)(g().sA,{id:"importsTab.importingData.closeButtonText",defaultMessage:"Close"})})}):void 0)(e),controlRowPaddingTopBottom:M?10:20,contentPaddingLeftRight:M?25:void 0,controlRowPaddingLeftRight:M?15:void 0,contentPaddingTopBottom:M?2:void 0,children:[(0,K.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:(0,K.jsx)("div",{style:{position:"absolute",top:12,insetInlineEnd:12},children:(0,K.jsx)(l().A,{ariaLabel:v.formatMessage({id:"mondayImportStepTab.closeButton.ariaLabel",defaultMessage:"Close"}),onClick:()=>{t(),x().A.resetImport()},style:T.closeButton,hoveredStyle:T.closeButtonHover,icon:o(995847).xMarkSmallIcon,iconStyle:T.closeButtonIcon})})}),ce(e,v),(e=>"selectData"===e?(0,K.jsx)($,{}):"chooseWorkspace"===e?(0,K.jsx)(ae,{spaceStore:I}):"importingData"===e?(0,K.jsx)(o(600875).A,{assetSrc:m().A.images.import.mondayPng}):"confirm"===e?(0,K.jsx)(se,{}):"failure"===e?(0,K.jsx)(o(876712).A,{assetSrc:m().A.images.import.mondayPng,loggerPageId:j.loggerPageId,failedMessage:v.formatMessage(le.failed)}):void 0)(e)]})}},412532:(e,t,o)=>{o.d(t,{l:()=>a});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"2.03 2.29 11.93 10.46",svg:(0,o(474848).jsx)("path",{d:"M13.165 12.75a.8.8 0 0 0 .69-1.203L8.692 2.693a.8.8 0 0 0-1.382 0l-5.165 8.854a.8.8 0 0 0 .691 1.203z"})},a=(0,o(340498).wt)("arrowCaretUpFillSmall",n,"fillSmall")},423173:(e,t,o)=>{o.r(t),o.d(t,{giphyTintableIcon:()=>a,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.49 0.36 15 19.29",svg:(0,o(474848).jsx)("path",{fillRule:"evenodd",d:"M13.208 2.507h2.143v2.142h2.142v15h-15V.364h10.715zm-8.571 15H15.35V6.793h-4.286V2.507H4.637z",clipRule:"evenodd"})},a=(0,o(340498).wt)("giphyTintable",n,"tintable")},424139:(e,t,o)=>{o.r(t),o.d(t,{emojiFaceIcon:()=>i,iconDefinition:()=>a});o(296540);var n=o(474848);const a={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M8.045 11.706a.625.625 0 0 0-1.036.698A3.6 3.6 0 0 0 10.005 14c1.245 0 2.35-.637 2.996-1.596a.625.625 0 0 0-1.036-.698 2.37 2.37 0 0 1-1.96 1.044 2.36 2.36 0 0 1-1.96-1.044m-.68-2.041c.49 0 .88-.46.88-1.02s-.39-1.02-.88-1.02-.88.46-.88 1.02.39 1.02.88 1.02m6.15-1.02c0 .56-.39 1.02-.88 1.02s-.88-.46-.88-1.02.39-1.02.88-1.02.88.46.88 1.02"}),(0,n.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25M3.625 10a6.375 6.375 0 1 1 12.75 0 6.375 6.375 0 0 1-12.75 0"})]})},i=(0,o(340498).wt)("emojiFace",a,"default")},484595:(e,t,o)=>{o.d(t,{A:()=>l,p:()=>s});var n=o(296540),a=()=>o(100622),i=o(474848);const s=8;function r({isSelected:e,radioButtonColor:t="blue"},n){const{radioButtonStyle:r,dotStyle:l}=(0,o(401497).IS)((()=>{const o="blue"===t?a().Tj.blue.icon.accentPrimary:a().Tj.red.icon.accentPrimary;return{radioButtonStyle:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:16,height:16,borderRadius:16,marginInlineEnd:s,background:e?o:a().Tj.whiteButtonBackground,border:e?"none":`1px solid ${a().Tj.radioButtonBorder}`,transition:"background 100ms ease-out"},dotStyle:{width:6,height:6,borderRadius:6,background:a().Tj.text.inversePrimary,transition:"opacity 100ms ease-out",opacity:e?1:0}}}),[e,t]);return(0,i.jsx)("div",{ref:n,style:r,children:(0,i.jsx)("div",{style:l})})}const l=n.forwardRef(r)},487542:(e,t,o)=>{o.d(t,{B:()=>a});o(944114);var n=()=>o(620333);function a(e){const t=[];return e.match(n().U7)&&t.push("literal"),e.match(n().fo)&&t.push("negation"),t}},489538:(e,t,o)=>{o.d(t,{o:()=>a});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.12 3.12 13.76 13.75",directional:!0,svg:(0,o(474848).jsx)("path",{d:"M3.75 3.125c.345 0 .625.28.625.625v7.097l3.016-2.639a.625.625 0 0 1 .854.028l3.036 3.037 3.485-3.485H12.75a.625.625 0 1 1 0-1.25h3.5c.345 0 .625.28.625.625v3.5a.625.625 0 1 1-1.25 0V8.696l-3.902 3.902a.625.625 0 0 1-.884 0L7.774 9.534l-3.399 2.974v2.242c0 .483.392.875.875.875h11a.625.625 0 1 1 0 1.25h-11a2.125 2.125 0 0 1-2.125-2.125v-11c0-.345.28-.625.625-.625"})},a=(0,o(340498).wt)("chartLineUptrend",n,"default")},507807:(e,t,o)=>{o.d(t,{S:()=>m,f:()=>g});o(944114);var n=o(296540),a=()=>o(484714),i=()=>o(590526),s=()=>o(165358),r=(o(16280),()=>o(770063)),l=()=>o(439180),c=()=>o(547149);var d=()=>o(878423),p=()=>o(733539),u=()=>o(246125);function m(e,{canUndo:t,shouldPersistOperation:o}){const m=(0,a().v3)(),g=(0,n.useRef)([]).current,f=(0,n.useCallback)((e=>{g.push(...e)}),[g]),h=(0,n.useCallback)((e=>{o&&!o(e)||f([e])}),[f,o]),v=(0,u().l)(e,{cacheFallback:m.defaultRecordCache.inMemoryRecordCache,isTemporaryData:!0,onOperationCallback:h});(0,n.useEffect)((()=>{d().A.initializeCache(e,v)}),[e,v]);const y=(0,n.useCallback)((()=>{p().default.reset(),d().A.clearCache(e)}),[e]);(0,n.useEffect)((()=>(p().default.reset(),()=>{p().default.reset(),d().A.expire(e)})),[e]);const x=(0,i().K8)((()=>p().default.state.undoStack.length>0),[]);(0,n.useEffect)((()=>{d().A.updateUnsavedCacheState(e,x)}),[e,x]);const S=(0,n.useCallback)((async e=>{if(0===g.length)return void 0;v.assertUnexpired(),function(e){for(const t of p().default.state.undoStack)for(const o of t.transactions)for(const t of o.stores)if(t.inMemoryRecordCache!==e&&!t.inMemoryRecordCache.isMockTextStore&&!t.inMemoryRecordCache.isTemporaryData){const n=o.getUserActionForAnalyticsPurposesOnly(),a=t.inMemoryRecordCache.name,i=e.name,r=`Undoable user action "${n}" was applied to cache "${a}", but only operations in the cache "${i}" should be in the undo stack!`;(0,s().log)({from:"useLocalDraft",type:"invalidStoreInRevisionStack",level:"error",data:{message:r,miscDataToConvertToString:{userAction:n,inMemoryRecordCacheName:a,expectedInMemoryRecordCacheName:i}}})}}(v);const{serverCommitResult:o}=c().createAndCommit({environment:m,userAction:e,perform(e){!function({environment:e,transaction:t,operationsWithStores:o}){for(const{operation:n,store:a}of o){if(!(a instanceof r().pm))continue;const o=a.clone(e.defaultRecordCache.inMemoryRecordCache);(0,l().ph)(n)?c().applyCrdtTextOperation({store:a,operation:n,transaction:t,invertedOperation:void 0}):c().applyOperation({transaction:t,store:o,operation:n})}}({environment:m,transaction:e,operationsWithStores:g}),e.postSubmitCallbacks.push((e=>{e||(v.expire(),p().default.reset())}))},canUndo:t});return o}),[e,t,m,g,v]);return(0,n.useMemo)((()=>({cache:v,hasChanges:x,persist:S,reset:y})),[x,S,y,v])}function g(e,t){return(0,i().K8)((()=>t.clone(e.cache)),[t,e.cache])}},509659:(e,t,o)=>{o.d(t,{f:()=>P});o(898992),o(354520),o(430670),o(803949),o(581454);var n=()=>o(203066),a=()=>o(153321),i=o(296540),s=()=>o(300474),r=()=>o(907258),l=()=>o(590526),c=()=>o(401497),d=()=>o(755222),p=()=>o(34179),u=()=>o(97879),m=()=>o(302996),g=()=>o(959044),f=()=>o(204384),h=()=>o(96689),v=()=>o(496603),y=()=>o(534177),x=()=>o(56086),S=()=>o(299545),I=()=>o(179534);o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);class b extends(()=>o(757695))().Store{getInitialState(){return{emojisBySpace:{}}}addEmojis(e,t){this.update((o=>{const n=o.emojisBySpace[t]||[],a=new Set(n),i=e.filter((e=>!a.has(e)));if(i.length>0){const e=10-n.length,a=i.slice(0,e);if(a.length>0)return{emojisBySpace:{...o.emojisBySpace,[t]:[...n,...a]}}}return o}))}popEmoji(e){const t=this.state.emojisBySpace[e]||[],o=t[t.length-1];return o&&this.update((o=>({emojisBySpace:{...o.emojisBySpace,[e]:t.slice(0,-1)}}))),o}getEmojis(e){return this.state.emojisBySpace[e]||[]}clearEmojis(e){this.update((t=>({emojisBySpace:{...t.emojisBySpace,[e]:[]}})))}}const j=new b;var A=o(474848);const w=.8,C=1,k=24,T=432,M=1;function P(e){const{children:t}=e,[o,b]=(0,i.useState)(!1),[P,_]=(0,i.useState)(void 0),B=(0,l().K8)((()=>d().A.state.isVisible),[]);(0,l().K8)((()=>{const e=I().A.state.results,t=r().default.state.currentUserRootStore,o=d().A.state.isVisible;t&&o&&e.forEach((e=>{var o;const n=(null===(o=e.unreceived)||void 0===o?void 0:o.notificationIds)||[],a=e.spaceId;if(!a||!n.length)return;const i=m().SpaceStore.createChildStore(t,{table:h().NX,id:a});if(!i)return;I().A.markNotificationsAsReceived(a,n);const s=n.map((e=>p().T.createChildStore(i,{table:g()._p,id:e,spaceId:a}))),r=v().oE(s.map((e=>{const t=S().g5(e);if(null!=t&&t.isReady())return t}))).filter((e=>"reacted"===(null==e?void 0:e.getType()))).filter((e=>!(null!=e&&e.getInvalid()))).sort(((e,t)=>{const o=Number(null==e?void 0:e.getEndTime())||0;return(Number(null==t?void 0:t.getEndTime())||0)-o})).flatMap((e=>{const t=((null==e?void 0:e.getEdits())||[]).filter((e=>e&&"reaction_id"in e&&"reaction-created"===e.type)).sort(((e,t)=>{const o=(null==e?void 0:e.timestamp)??0;return((null==t?void 0:t.timestamp)??0)-o}))[0];return(null==t?void 0:t.reaction_id)??[]})).map((e=>u().L.createChildStore(i,{table:f().ez,id:e}))).map((e=>null==e?void 0:e.getIcon())).filter(y().O9);r.length>0&&j.addEmojis(r,a)}))}),[]);const F=(0,s().r)(),E=i.useRef(),R=i.useRef(),O=(0,i.useCallback)((()=>{E.current&&(clearTimeout(E.current),E.current=void 0),R.current&&(clearTimeout(R.current),R.current=void 0),b(!1),_(void 0)}),[]),L=(0,i.useCallback)((()=>{if(!B)return void O();if(!F)return void O();const e=j.popEmoji(F);_(e),e?(b(!0),E.current=setTimeout((()=>{b(!1),R.current=setTimeout((()=>{L()}),1e3*w)}),1e3*C)):O()}),[O,B,F]);(0,l().K8)((()=>{if(!F)return;j.getEmojis(F).length>0&&!o&&!E.current&&L()}),[o,L,F]),(0,i.useEffect)((()=>O),[O]);const D=(0,c().IS)((()=>({container:{display:"flex",alignItems:"center",justifyContent:"center"},badge:{display:"flex",alignItems:"center"}})),[]);return(0,A.jsx)("div",{style:D.container,children:(0,A.jsx)(n().N,{mode:"wait",children:P?(0,A.jsx)(a().P.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},transition:{duration:w,type:"spring",damping:k,stiffness:T,mass:M},children:(0,A.jsx)(x().A,{char:P,size:18})},`emoji-${P}`):(0,A.jsx)(a().P.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},transition:{duration:w,type:"spring",damping:k,stiffness:T,mass:M},style:D.badge,children:t},"number")})})}},515918:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=()=>o(401497),a=()=>o(970236),i=()=>o(69708),s=o(474848);function r(e){const{style:t}=e,o=(0,n().IS)((()=>({badge:{letterSpacing:0,whiteSpace:"nowrap",width:"fit-content",...t}})),[t]);return(0,s.jsx)(a().E,{color:"blue",style:o.badge,content:(0,s.jsx)(i().sA,{id:"newBadgeComponent.label",defaultMessage:"New"})})}},519116:(e,t,o)=>{o.d(t,{A:()=>u});o(581454);var n=o(296540),a=()=>o(383036),i=()=>o(590526),s=()=>o(250910),r=()=>o(663639),l=()=>o(634201),c=()=>o(486666),d=o(474848);const p=(0,n.forwardRef)((function(e,t){const{variations:n,emoji:a,focused:s,onClick:r,onMouseEnter:l,insertEmoji:c,showTooltip:p,id:u,role:g}=e,f=(0,i().uB)(void 0,o(118307).A);return void 0===(0,i().K8)((()=>(0,o(712030).bb)()),[])&&n&&n.length>0?(0,d.jsx)(h,{role:g,id:u,buttonPopupStore:f,emoji:a,focused:s,insertEmoji:c,onClick:r,onMouseEnter:l,showTooltip:p,variations:n,ref:t}):(0,d.jsx)(m,{role:g,id:u,emoji:a,focused:s,onClick:r,onMouseEnter:l,ref:t,showTooltip:p})})),u=p,m=(0,n.forwardRef)((function({events:e,emoji:t,focused:s,onClick:r,onMouseEnter:p,showTooltip:u,id:m,role:g},f){const h=l().qg.isCustomEmojiString(t),{isMenuListFocusVisible:v}=(0,n.useContext)(o(85229).V),y=s&&v,x=(0,o(401497).IS)((()=>({emojiButton:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,...o(726637).A.isMobile?{width:c().UA,height:c().UA,fontSize:c().ru}:{width:c().Sq,height:c().Sq,fontSize:c().Zl},...y&&{boxShadow:o(100622).Tj.buttonBlueFocusRing}}})),[y]),S=x.emojiButton.fontSize,I=(0,i().K8)((()=>{if(h){const e=l().qg.fromCustomEmojiString(t);return(0,o(87878).nA)({parentStore:void 0,pointer:e.pointer})}}),[t,h]),b=(0,i().K8)((()=>h?null==I?void 0:I.getName():l().Yf(t,o(267419).A.state)),[I,t,h]);return(0,d.jsx)(o(26697).m,{forceVisibleState:!!y||void 0,placement:y?"bottom":void 0,allowHover:u,renderTooltip:()=>b,closeDelay:0,disableTooltip:!u,render:n=>(0,d.jsx)(o(718827).Ay,{role:g,ariaLabel:b,ref:f,id:m,focused:s,onClick:r,...(0,a().A)(e||{},(0,a().A)({onMouseEnter:p},n)),ignoreLocalHoverState:!0,style:x.emojiButton,disallowTabbing:!0,children:h?I?(0,d.jsx)(o(448664).A,{size:S,emojiStore:I}):null:(0,d.jsx)(o(56086).A,{size:S,char:t})},t)})}));function g({props:e}){return(0,d.jsx)("div",{style:{display:"flex",padding:4},children:e.children})}function f(e){const{parent:t,emoji:n,variations:a,insertEmoji:i}=e,s=(0,o(484714).v3)(),l=(a&&a.length>0?[n,...a]:[n]).map(((n,r)=>({key:n,action:e=>{t.close(),(null==a?void 0:a.length)===o(637997).aI&&(0,o(210741).l)({environment:s,skinTone:r}),i(n,r)},render:t=>(0,d.jsx)(p,{...e,...t,emoji:n,variations:void 0,showTooltip:!1})})));return(0,d.jsx)(o(717137).A,{debugName:"EmojiPickerMenuItem",capture:!0,allowEsc:!0,children:(0,d.jsx)(r().A,{type:r().O.Horizontal,initialFocus:0,sections:[{key:"variations",render:e=>(0,d.jsx)(g,{props:e}),items:l}]})})}const h=(0,n.forwardRef)((function(e,t){const{emoji:a,focused:i,onClick:r,onMouseEnter:l,showTooltip:c,variations:p,insertEmoji:u,buttonPopupStore:g,id:h,role:v}=e,y=(0,n.useCallback)((()=>function(e){e.setState({...e.state,open:!1})}(g)),[g]),x=(0,n.useCallback)((e=>function(e,t){var o;null===(o=e.preventDefault)||void 0===o||o.call(e),t.setState({...t.state,open:!0})}(e,g)),[g]);return(0,d.jsx)(o(782482).N,{debugName:"EmojiPickerMenuItem",capture:i,onEnter:x,onEsc:y,children:(0,d.jsx)(s().A,{buttonPopupStore:g,popupType:s().z.Popup,renderOrigin:e=>(0,d.jsx)(m,{ref:t,emoji:a,focused:i,onClick:r,onMouseEnter:l,showTooltip:c,events:e,id:h,role:v}),render:e=>(0,d.jsx)(f,{parent:e,emoji:a,variations:p,insertEmoji:u})})},a)}))},520287:(e,t,o)=>{o.d(t,{W:()=>i});o(296540);var n=o(474848);const a={viewBox:"0 0 16 16",fittedViewBox:"2.57 1.02 10.86 12.6",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M7.96 1.025a.625.625 0 0 0-.625.625v6.421l-.913-.913a.625.625 0 1 0-.884.884l2 2c.244.244.64.244.884 0l2-2a.625.625 0 1 0-.884-.884l-.953.953V1.65a.625.625 0 0 0-.625-.625"}),(0,n.jsx)("path",{d:"M4.4 3.975A1.825 1.825 0 0 0 2.575 5.8v6c0 1.008.817 1.825 1.825 1.825h7.2a1.825 1.825 0 0 0 1.825-1.825v-6A1.825 1.825 0 0 0 11.6 3.975H9.385v1.25H11.6c.318 0 .575.257.575.575v6a.575.575 0 0 1-.575.575H4.4a.575.575 0 0 1-.575-.575v-6c0-.318.257-.575.575-.575h2.135v-1.25z"})]})},i=(0,o(340498).wt)("squareAndArrowDownSmall",a,"small")},524658:(e,t,o)=>{o.r(t),o.d(t,{circleFillIcon:()=>a,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,o(474848).jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25"})},a=(0,o(340498).wt)("circleFill",n,"fill")},536583:(e,t,o)=>{o.d(t,{d:()=>a});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.88 2.32 14.24 15.36",svg:(0,o(474848).jsx)("path",{d:"M9.294 2.325h3.103c.484 0 .948.192 1.29.534l2.897 2.898c.343.342.535.806.535 1.29v5.903a1.825 1.825 0 0 1-1.825 1.825H12.53v1.075a1.825 1.825 0 0 1-1.825 1.825h-6A1.825 1.825 0 0 1 2.88 15.85v-8.8c0-1.008.817-1.825 1.825-1.825H7.47V4.15c0-1.008.817-1.825 1.825-1.825M9.1 5.76l2.897 2.897c.342.342.534.806.534 1.29v3.578h2.763a.575.575 0 0 0 .575-.575V7.3h-1.975a1.75 1.75 0 0 1-1.75-1.75V3.575h-2.85a.575.575 0 0 0-.575.575v1.318q.208.12.38.292m6.16.44-2.016-2.016V5.55c0 .359.29.65.65.65zm-10.554.275a.575.575 0 0 0-.575.575v8.8c0 .318.258.575.575.575h6a.575.575 0 0 0 .575-.575V10.2H9.306a1.75 1.75 0 0 1-1.75-1.75V6.475zm3.95.609V8.45c0 .359.291.65.65.65h1.366z"})},a=(0,o(340498).wt)("docOnDoc",n,"default")},538739:(e,t,o)=>{o.d(t,{A:()=>i});o(296540);var n=()=>o(100622),a=o(474848);const i=function(e){const{style:t}=(0,o(401497).IS)((()=>({style:{display:"inline-block",textAlign:"center",color:e.disabled?n().Tj.text.tertiary:n().Tj.text.secondary,userSelect:"none",WebkitUserSelect:"none",width:8,...e.style}})),[e.disabled,e.style]);return(0,a.jsx)("div",{style:t,children:"·"})}},555012:(e,t,o)=>{o.d(t,{A:()=>y,Q:()=>x});o(296540);var n=()=>o(907258),a=()=>o(675133),i=()=>o(792057),s=()=>o(302501),r=()=>o(416845),l=()=>o(69708),c=()=>o(100622),d=()=>o(559926),p=()=>o(37450),u=()=>o(114282),m=()=>o(191227);class g extends(()=>o(757695))().Store{getInitialState(){return{isDragOverActive:!1}}}const f=new g;var h=o(474848);const v=(0,l().YK)({invalidFileFormat:{id:"zipImportOptions.invalidFile",defaultMessage:"Unsupported file format, Please drag and drop a ZIP file"}});const y=function(e){const t=(0,o(484714).v3)(),m=(0,o(401497).IS)((()=>({containerStyle:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",paddingInlineStart:12,paddingInlineEnd:12,paddingTop:18,paddingBottom:18,marginBottom:32,borderColor:c().Tj.blue.border.accentPrimary,borderStyle:"dashed",borderWidth:1,borderRadius:6,gap:4,background:c().Tj.blue.background.primaryTranslucent},iconStyle:{width:24,height:24,marginBottom:8},zipContentContainerStyle:{display:"flex",alignItems:"center",justifyContent:"center"},zipContentStyle:{display:"block",maxWidth:480,paddingInlineStart:4,paddingInlineEnd:4,whiteSpace:"normal",wordBreak:"break-word",textAlign:"center"},zipContentChildrenStyle:{overflow:"visible",whiteSpace:"normal",marginInlineEnd:4},zipTitleStyle:{color:c().Tj.text.primary,fontWeight:500,fontSize:14},boldTextStyle:{fontWeight:500},zipTextStyle:{color:c().Tj.text.secondary,fontSize:12,overflow:"visible"},zipButtonStyle:{display:"inline-block"},buttonContainerStyle:{display:"inline-block",alignItems:"center",justifyContent:"center",background:"none"},zipButtonTextStyle:{color:c().Tj.blue.text.accentPrimary}})),[]),g=e=>{f.setState({...f.state,isDragOverActive:e})};return(0,h.jsxs)("div",{style:m.containerStyle,onDrop:o=>{o.preventDefault(),g(!1);const s=o.dataTransfer.files[0];(async function(e,t,o,s){var l;if(1!==t.length)return;if("zip"!==(null===(l=t[0].name.split(".").pop())||void 0===l?void 0:l.toLowerCase())){const e=a().A.formatMessage(v.invalidFileFormat);throw i().f1(e),new(r().yI4)("Invalid file format, please upload it as a zip file")}const{mainEditorCurrentBlockStore:c,sidebarSpaceStore:m,sidebarSpaceViewStore:g}=n().default.state;if(!m||!g||!c)return;const f=S(),h="zip";d().fJ(e,{import_source:h,from:s,import_type:"file",flowId:f});const y=await u().lD({environment:e,pageStore:c,spaceStore:m,spaceViewStore:g,analyticsFrom:s,uploadType:"genericImporter",flowId:S()},t);y&&(p().vH(e,{from:"import",type:"page",new_page_id:y.id,creating_block_id:y.id,parent_collection_id:y.getParentCollectionIdUpToTwoLevels()}),o(y,h,f))})(t,[s],e.onComplete,e.analyticsFrom).then((()=>{})).catch((()=>{}))},onDragOver:e=>{e.preventDefault(),e.stopPropagation(),g(!0)},onDragLeave:e=>{e.preventDefault(),g(!1)},children:[(0,h.jsx)("img",{style:m.iconStyle,alt:"Zip upload icon",src:o(148307).A.images.import.zipCloudPng}),(0,h.jsx)(s().A,{isSecondaryColor:!0,style:m.zipTitleStyle,children:(0,h.jsx)(l().sA,{id:"zipImport.convertZipToPages",defaultMessage:"Convert Zip to pages"})}),(0,h.jsx)("div",{style:m.zipContentContainerStyle,children:(0,h.jsxs)("div",{style:m.zipContentStyle,children:[(0,h.jsx)(s().A,{isInline:!0,isSecondaryColor:!0,style:{...m.zipTextStyle,...m.zipContentChildrenStyle},children:(0,h.jsx)(l().sA,{id:"zipImport.convertZipToPagesDescription",defaultMessage:"Import a zip file that contains DOCX, CSV, Text, Markdown, HTML and EPUB files to convert to pages"})}),(0,h.jsx)(s().A,{isInline:!0,isSecondaryColor:!0,style:{...m.zipTextStyle,...m.boldTextStyle,...m.zipContentChildrenStyle},children:(0,h.jsx)(l().sA,{id:"zipImport.dragAndDropZip",defaultMessage:"Drag and drop a Zip file"})}),(0,h.jsx)(s().A,{isInline:!0,isSecondaryColor:!0,style:{...m.zipTextStyle,...m.zipContentChildrenStyle},children:(0,h.jsx)(l().sA,{id:"zipImport.dragAndDropOr",defaultMessage:"or"})}),(0,h.jsx)(o(718827).Ay,{onClick:()=>x(t,"genericImporter",e.onComplete,e.analyticsFrom,"zip"),style:{...m.buttonContainerStyle,...m.zipContentChildrenStyle,...m.zipButtonStyle},hoveredStyle:m.buttonContainerStyle,pressedStyle:m.buttonContainerStyle,children:(0,h.jsx)("div",{style:{minWidth:0,width:"100%"},children:(0,h.jsx)("div",{style:{display:"flex"},children:(0,h.jsx)("div",{style:{...m.zipTextStyle,...m.boldTextStyle,...m.zipButtonTextStyle},children:(0,h.jsx)(l().sA,{id:"zipImport.chooseFile",defaultMessage:"Choose file"})})})})})]})}),(0,h.jsx)(s().A,{isSecondaryColor:!0,style:m.zipTextStyle,children:(0,h.jsx)(l().sA,{id:"zipImport.maxFileSize",defaultMessage:"Maximum zip file size: 5GB"})})]})};async function x(e,t,o,a,i){const s=n().default.state,{mainEditorCurrentBlockStore:r,sidebarSpaceStore:l,sidebarSpaceViewStore:c}=s;if(!l||!c||!r)return;const m=S(),g=i??("genericImporter"===t?"zip":t);d().fJ(e,{import_source:g,from:a,import_type:"file",flowId:m});const f=await u().un({environment:e,pageStore:r,spaceStore:l,spaceViewStore:c,analyticsFrom:a,uploadType:t,flowId:m,allowMultiple:!1});f&&(p().vH(e,{from:"import",type:"page",new_page_id:f.id,creating_block_id:f.id,parent_collection_id:f.getParentCollectionIdUpToTwoLevels()}),o(f,g,m))}function S(){return m().A.getOrCreateFlowId()}},557504:(e,t,o)=>{o.d(t,{z:()=>s});function n(e){return Boolean(e&&e.length>0)}function a(e){return Boolean(e)}function i(e){return Boolean(e.starting||e.ending)}const s={requireEditPermissions:a,isDeletedOnly:a,excludeTemplates:a,navigableBlockContentOnly:a,ancestors:n,parentId:function(e){return void 0!==e},createdBy:n,editedBy:n,verificationOwners:n,lastEditedTime:i,createdTime:i,isAdminModeDeletedPageSearch:a,blockTypes:function(e){return Boolean(e&&e.length>0)},inTeams:function(e){return n(o(245241).fg(e))},includePublicPagesWithoutExplicitAccess:a,audience:function(e){return Boolean(e)},dev_excludedPages:n,dev_excludedTeams:n,databaseType:n,adminContentSearchDeletionStatus:n,isOfflineOnly:a,legalHoldIds:n,excludeSurrogateCollections:a,excludedParentCollectionIds:n,contentStatusFilter:function(e){return void 0!==e&&"all_without_archived"!==e}}},566254:(e,t,o)=>{o.d(t,{HC:()=>c,Pz:()=>p,_s:()=>r,ml:()=>u,rA:()=>d,x_:()=>l});var n=()=>o(559926),a=()=>o(666803),i=()=>o(769864),s=()=>o(908928);async function r(e,t){const o=await i().callApi({eventName:"getConnectedAppsStatus",environment:e,data:{spaceId:t}});if("failed"===o.type){const e=o.error;return console.error(e),{drive:[],evernote:void 0,trello:void 0,asana:void 0,confluence:void 0}}return o.data}async function l(e,t){await i().callApi({eventName:"disconnectTrello",environment:e,data:{}}),await t.refresh(),n().kO(e,{integration_name:"trello"})}async function c(e,t){await i().callApi({eventName:"disconnectAsana",environment:e,data:{}}),await t.refresh(),n().kO(e,{integration_name:"asana"})}async function d(e,t){await i().callApi({eventName:"disconnectEvernote",environment:e,data:{}}),await t.refresh(),n().kO(e,{integration_name:"evernote"})}async function p(e,t,o){await i().callApi({eventName:"disconnectConfluence",environment:e,data:{spaceId:o}}),await t.refresh(),n().kO(e,{integration_name:"confluence"})}async function u(e){const{environment:t,requestStore:o,botId:i}=e;await s().KA({environment:t,botId:i,onSuccess:()=>{!async function(e){const{environment:t,requestStore:o}=e;await o.refresh();const i=a().Ay.getInitialState();a().Ay.setState(i),n().kO(t,{integration_name:"jira"})}({environment:t,requestStore:o})}})}},566910:(e,t,o)=>{o.d(t,{e:()=>i});o(296540);var n=o(474848);const a={viewBox:"0 0 20 20",fittedViewBox:"0.97 2.72 18.06 14.56",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M3.893 2.875a.626.626 0 0 1 .79-.02l.092.088.126.146.016.035.072.105 11.273 13.15a.624.624 0 0 1-1.036.678l-1.615-1.884c-1.12.408-2.339.633-3.611.633-3.757 0-7.049-1.946-8.707-4.843l-.155-.283a1.46 1.46 0 0 1 0-1.359l.155-.283c.89-1.554 2.249-2.835 3.898-3.688L3.826 3.757l-.072-.105a.626.626 0 0 1 .14-.777M6.031 6.33c-1.564.744-2.842 1.913-3.653 3.33l-.134.243a.21.21 0 0 0 0 .197l.134.243c1.426 2.49 4.292 4.214 7.622 4.214.958 0 1.877-.144 2.734-.406l-1.1-1.284a3.3 3.3 0 0 1-1.634.438l-.17-.004a3.307 3.307 0 0 1-3.132-3.133l-.004-.17c0-.777.269-1.492.718-2.056zm2.904 3.387q-.037.135-.038.281a1.104 1.104 0 0 0 1.218 1.097zM10 4.194c3.878 0 7.26 2.075 8.862 5.127l.074.164c.125.332.125.7 0 1.032l-.074.163a9.3 9.3 0 0 1-2.987 3.327l-.82-.955c1.15-.764 2.084-1.779 2.7-2.953l.02-.048a.2.2 0 0 0 0-.1l-.02-.049C16.382 7.282 13.438 5.445 10 5.445q-.705 0-1.378.1l-.94-1.098A10.7 10.7 0 0 1 10 4.194"}),(0,n.jsx)("path",{d:"M10.17 6.694a3.307 3.307 0 0 1 3.136 3.303l-.005.17a3.3 3.3 0 0 1-.116.702L9.624 6.713A3 3 0 0 1 10 6.691z"})]})},i=(0,o(340498).wt)("eyeSlash",a,"default")},569397:(e,t,o)=>{o.r(t),o.d(t,{arrowStraightRightSmallIcon:()=>a,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"2.12 3.05 11.76 9.9",directional:!0,svg:(0,o(474848).jsx)("path",{d:"M9.372 3.238a.625.625 0 1 0-.884.884l3.253 3.253H2.75a.625.625 0 0 0 0 1.25h8.991l-3.253 3.253a.625.625 0 0 0 .884.884l4.32-4.32a.625.625 0 0 0 0-.884z"})},a=(0,o(340498).wt)("arrowStraightRightSmall",n,"small")},570191:(e,t,o)=>{o.r(t),o.d(t,{arrowLineDownFillIcon:()=>a,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.27 2.15 13.45 15.7",svg:(0,o(474848).jsx)("path",{d:"M10 2.15c.483 0 .875.392.875.875v9.362l2.906-2.906a.875.875 0 1 1 1.238 1.238l-4.4 4.4a.875.875 0 0 1-1.238 0l-4.4-4.4A.875.875 0 0 1 6.22 9.48l2.906 2.906V3.025c0-.483.392-.875.875-.875M4.15 16.1a.875.875 0 1 0 0 1.75h11.7a.875.875 0 1 0 0-1.75z"})},a=(0,o(340498).wt)("arrowLineDownFill",n,"fill")},578465:(e,t,o)=>{o.d(t,{J:()=>i});var n=()=>o(907258),a=()=>o(590526);function i(){return(0,a().K8)((()=>{var e;return Boolean(null===(e=n().default.state.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.setup_session_booked)}),[])}},583550:(e,t,o)=>{o.r(t),o.d(t,{SidebarAiButton:()=>P,getTooltipDescriptionForAi:()=>_,sidebarAiButtonMessages:()=>B});var n=o(296540),a=()=>o(230711),i=()=>o(484714),s=()=>o(590526),r=()=>o(401497),l=()=>o(929219),c=()=>o(699143),d=()=>o(996332),p=()=>o(807449),u=()=>o(26697),m=()=>o(529099),g=()=>o(848538),f=()=>o(69708),h=()=>o(47373),v=()=>o(797730),y=()=>o(644914),x=()=>o(317705),S=()=>o(118884),I=()=>o(695115),b=()=>o(274570),j=()=>o(554283),A=()=>o(770906),w=()=>o(539412),C=()=>o(907893),k=o(474848);function T(e){const{sidebarItemHoverStore:t,sidebarTooltipStore:o}=e,a=(0,i().v3)(),l=(0,f().tz)(),c=(0,s().O$)(t),d=c.isSidebarItemHovered||c.isSidebarItemFocused,p=(0,C().Kd)(),u=(0,r().IS)((()=>({button:{...p.button,height:24,width:24,margin:0},iconContainer:{opacity:d?1:0,padding:0,margin:0,transition:"opacity 0.1s ease-in-out"}})),[p.button,d]);(0,S().X)((()=>{t.setState({...t.state,isActionButtonHovered:!1,isActionButtonFocused:!1})}));const m=(0,n.useCallback)((()=>{o.reset(),(0,A().ZT)({environment:a,contentType:"assistant"})}),[a,o]),[g,h]=(0,j().B)();(0,n.useEffect)((()=>{t.setState({...t.state,isActionButtonHovered:h})}),[h,t]);const v=(0,n.useCallback)((()=>{t.setState({...t.state,isActionButtonFocused:!0})}),[t]),y=(0,n.useCallback)((()=>{t.setState({...t.state,isActionButtonFocused:!1})}),[t]);if((0,w().x9)())return null;const x=l.formatMessage({id:"aiSidebarItem.askNotionAi.history.tooltip",defaultMessage:"Chat history"});return(0,k.jsx)("div",{ref:g,style:u.iconContainer,children:(0,k.jsx)(I().A,{onFocus:v,onBlur:y,icon:{icon:b().clockIcon,size:"default"},style:u.button,ariaLabel:x,onClick:m})})}var M=()=>o(804319);function P(e){const t=(0,i().v3)(),o=(0,f().tz)(),g=(0,s().K8)((()=>"ai"===t.RouterStore.state.route.name),[t]),h=!(0,s().O$)(l().e),{sidebarTooltipStore:S,sidebarItemHoverStore:I,handleFocus:b,handleBlur:j,handleMouseMove:A,handleMouseLeave:w}=(0,x().W)(),C=(0,y().ab)(),P=(0,r().IS)((()=>({linkBoxStyle:{...C.baseSidebarItem,...g&&C.currentSelectedSidebarItem},iconWrapper:{position:"relative"}})),[g,C.baseSidebarItem,C.currentSelectedSidebarItem]),{isActionButtonFocused:F,isActionButtonHovered:E,isSidebarItemFocused:R,isSidebarItemHovered:O}=(0,s().O$)(I),L=(O||R)&&!h,D=(0,a().U2)(),V=(0,s().K8)((()=>_(D)),[D]),z=(0,n.useCallback)((()=>h?(0,k.jsx)("div",{children:o.formatMessage(B.offlineTooltip)}):E||F?(0,k.jsx)(f().sA,{...B.chatHistoryTooltip}):(0,k.jsx)("div",{children:o.formatMessage(V)})),[o,F,E,V,h]);return(0,k.jsx)(u().m,{store:S,renderTooltip:z,originGap:6,placement:"right",render:t=>{var n;return(0,k.jsx)(d().Q,{style:P.linkBoxStyle,href:"/ai",hoveredStyle:null===(n=e.styles)||void 0===n?void 0:n.buttonHoveredStyle,...t,onFocus:e=>{var o;null===(o=t.onFocus)||void 0===o||o.call(t,e),b(e)},onBlur:e=>{var o;null===(o=t.onBlur)||void 0===o||o.call(t,e),j()},testId:"sidebar-ai-button",disabled:h,disabledFeedback:h,children:(0,k.jsx)(M().A,{left:(0,k.jsx)("div",{style:P.iconWrapper,children:(0,k.jsx)(p().I,{icon:m().aiFaceIcon,colorVariant:"secondary",size:"lg"})}),right:L&&(0,k.jsx)("div",{style:{display:"flex",flexDirection:"row",marginInlineEnd:-4,justifyContent:"center",gap:3},children:(0,k.jsx)(T,{sidebarItemHoverStore:I,sidebarTooltipStore:S})}),onMouseMove:A,onMouseLeave:w,children:(0,k.jsx)(c().Y1,{direction:"horizontal",gap:4,align:"center-left",children:o.formatMessage(v().D.notionAi)})})})}})}function _(e){const t=(0,h().$6)(),o=(0,g().Wf)(null==e?void 0:e.getMembershipType());return t&&o?B.tooltipAiAndAgents:B.tooltipAiOnly}const B=(0,f().YK)({tooltipAiAndAgents:{id:"sidebar.agents.tooltipAiAndAgents",defaultMessage:"Work with AI and manage your agents"},tooltipAiOnly:{id:"sidebar.agents.tooltipAiOnly",defaultMessage:"Ask, search & create with AI"},offlineTooltip:{id:"sidebar.ai.offlineTooltip",defaultMessage:"Unavailable while offline"},chatHistoryTooltip:{id:"aiSidebarItem.askNotionAi.history.tooltip",defaultMessage:"Chat history"}})},600875:(e,t,o)=>{o.d(t,{A:()=>c});var n=o(296540),a=()=>o(249046),i=()=>o(302501),s=()=>o(69708),r=(o(581454),o(474848));const l=function(e){const{dotCount:t=6,speed:i=800}=e,[s,l]=(0,n.useState)(1);return(0,n.useEffect)((()=>{const e=setInterval((()=>l((e=>e<t?e+1:1))),i);return()=>clearInterval(e)}),[t,i]),(0,r.jsx)(a().Ye,{style:{gap:8,marginTop:32,marginBottom:32,alignItems:"center"},children:Array.from({length:t},((e,t)=>t+1)).map((e=>(0,r.jsx)("div",{children:(0,r.jsx)(o(807449).I,{icon:o(156252).l,size:"sm",fitToViewBox:"horizontal",colorVariant:s===e?"secondary":"disabled"})},e)))})};const c=function(e){const t=(0,o(590526).K8)((()=>o(797180).Z.state.templateCreationInProgress),[]),n=(0,o(401497).IS)((()=>({lightText:{color:o(100622).Tj.text.tertiary}})),[]);return(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%"},children:[(0,r.jsxs)(a().Ye,{style:{gap:8,marginTop:32,marginBottom:32,alignItems:"center"},children:[(0,r.jsx)("img",{style:{width:32,height:32,marginInlineEnd:8},src:e.assetSrc}),(0,r.jsx)(l,{}),(0,r.jsx)("img",{style:{width:32,height:32,marginInlineStart:8},src:o(148307).A.images.notionLogoPng})]}),t?(0,r.jsx)(i().A,{style:n.lightText,children:(0,r.jsx)(s().sA,{id:"import.importingData.settingUpWorkspace",defaultMessage:"Creating templates for your projects and tasks."})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a().Ye,{children:(0,r.jsx)(i().A,{style:n.lightText,children:(0,r.jsx)(s().sA,{id:"import.importingData.feelFreeToLeave",defaultMessage:"Data is being imported. Feel free to leave this window."})})}),(0,r.jsx)(a().Ye,{children:(0,r.jsx)(i().A,{style:n.lightText,children:(0,r.jsx)(s().sA,{id:"import.importingData.sendEmail",defaultMessage:"We will send you an email when the import is complete or if any problems occur."})})})]})]})}},609819:(e,t,o)=>{o.d(t,{Z:()=>J,c:()=>Q});o(898992),o(354520),o(581454);var n=o(296540),a=()=>o(484714),i=()=>o(590526),s=()=>o(401497),r=()=>o(611648),l=()=>o(699143),c=()=>o(302501),d=()=>o(292985),p=()=>o(887957),u=()=>o(591779),m=()=>o(100622),g=()=>o(485569),f=()=>o(376254),h=()=>o(106412),v=()=>o(344482),y=()=>o(902842),x=(o(672577),()=>o(180762)),S=()=>o(458097);var I=()=>o(663077),b=()=>o(254497),j=()=>o(312296),A=()=>o(999140),w=()=>o(799832),C=()=>o(547149),k=()=>o(101926),T=()=>o(290966),M=()=>o(913454),P=()=>o(204067);function _({environment:e,collectionTemplate:t,featureTemplate:o,collectionViewBlockStore:n,previousFeatureSelections:a,examplePageStores:i}){var s;const r=null==n?void 0:n.getCollectionStoreIfSingleSource();if(!r)return;const l=(0,P().Zp)({environment:e,scopeStore:r,templateId:o.templateId});if(l&&!(0,P().DM)(l))return;(null===(s=a.find((e=>e.template.templateId===o.templateId)))||void 0===s?void 0:s.selected)??!1?l&&C().createAndCommit({userAction:"workflowTemplatesOnboardingPreview.removeFeatureTemplate",environment:e,canUndo:!1,perform:t=>{E({environment:e,transaction:t,collectionViewBlockStore:n,collectionStore:r,instancePointer:l,previousSelectionIds:a.map((e=>e.template.templateId))})}}):C().createAndCommit({userAction:"workflowTemplatesOnboardingPreview.addFeatureTemplate",environment:e,canUndo:!1,perform:a=>{B({environment:e,transaction:a,collectionViewBlockStore:n,collectionStore:r,collectionTemplate:t,featureTemplate:o,existingInstancePointer:l,examplePageStores:i})}})}function B({environment:e,transaction:t,collectionViewBlockStore:o,collectionStore:n,featureTemplate:a,existingInstancePointer:i,examplePageStores:s,collectionTemplate:r}){if(!o||!(0,I().Jb)(a))return;const l=i&&(0,P().aI)({environment:e,instancePointer:i,inMemoryRecordCache:n.inMemoryRecordCache});if(!l||"compound"===i.type)if(l&&"compound"===i.type)for(const c of i.instancePointers)if("property"===c.type)R({environment:e,transaction:t,propertyId:c.id,collectionStore:n});else{const a=(0,P().Fy)({environment:e,collectionStore:n,instancePointerId:c.id});if(!a)return;B({environment:e,transaction:t,collectionViewBlockStore:o,collectionStore:n,collectionTemplate:r,featureTemplate:a,existingInstancePointer:c,examplePageStores:s})}else if(!F({environment:e,transaction:t,collectionViewBlockStore:o,collectionStore:n,featureTemplate:a})){if("compound"===a.type)for(const i of a.value.templateItems){const a=M().globalWorkflowTemplates.fromId(i.pointer);"property"===a.type&&F({environment:e,transaction:t,collectionViewBlockStore:o,collectionStore:n,featureTemplate:a})}(0,k().ai)({environment:e,transaction:t,collectionStore:n,template:a,logger:new(M().WorkflowTemplateLogger),origin:"onboarding_preview",preserveCollectionFeatureOrdering:r,examplePageStores:s})}}function F(e){var t,o;const{environment:n,transaction:a,collectionStore:i,collectionViewBlockStore:s,featureTemplate:r}=e,l=null===(t=(0,w().U)(s))||void 0===t?void 0:t.normalizedDeletedSchemaStore.state,c=l&&(null===(o=Object.entries(l))||void 0===o?void 0:o.find((([e,t])=>{var o;return(null==t||null===(o=t.workflow_template_instance)||void 0===o?void 0:o.template_id)===r.templateId})));return!!c&&(R({environment:n,transaction:a,propertyId:c[0],collectionStore:i}),!0)}function E({environment:e,transaction:t,collectionViewBlockStore:o,collectionStore:n,instancePointer:a,previousSelectionIds:i}){"compound"===a.type?function({environment:e,transaction:t,collectionViewBlockStore:o,collectionStore:n,instancePointer:a,previousSelectionIds:i}){if("compound"!==a.type)return;const s=(0,P().FE)({environment:e,collectionStore:n}).find((e=>e.instancePointer.id===a.id));if(!s)return;const r=(0,P().aL)({environment:e,collectionStore:n,compoundTemplateInstancesToDelete:[s]}).filter((t=>{const o=(0,P().Fy)({environment:e,collectionStore:n,instancePointerId:t.id});return o&&!i.includes(o.templateId)}));for(const l of r)E({environment:e,transaction:t,collectionViewBlockStore:o,collectionStore:n,instancePointer:l,previousSelectionIds:i});(0,T().HQ)({environment:e,transaction:t,collectionStore:n,instance:a})}({environment:e,transaction:t,collectionViewBlockStore:o,collectionStore:n,instancePointer:a,previousSelectionIds:i}):(0,k().Z5)({environment:e,transaction:t,collectionViewBlockStore:o,collectionStore:n,instancePointer:a})}function R({environment:e,transaction:t,collectionStore:o,propertyId:n}){const a=A().KA({deletedSchema:o.getDeletedSchema(),property:n});a&&((0,j().F)({environment:e,collectionStore:o,update:a.updateSchema,transaction:t}),(0,b().E)({collectionStore:o,update:a.updateDeletedSchema,transaction:t}))}function O(){const e=(0,a().v3)(),{featureTemplateSelections:t,prevFeatureTemplateSelections:o}=(0,i().K8)((()=>{const e=S().default.state;return e.open&&e.collectionTemplate?{featureTemplateSelections:e.userCustomizations.featureTemplateSelections,prevFeatureTemplateSelections:e.userCustomizations.prevFeatureTemplateSelections}:{}}),[]);(0,n.useEffect)((()=>{o&&function({environment:e,featureTemplateSelections:t,prevFeatureTemplateSelections:o}){const n=S().default.state;if(!n.open||!n.collectionTemplate||!n.previewCollectionInfo)return;const{collectionTemplate:a,previewCollectionInfo:i}=n,s=o.filter((e=>{const o=t.find((t=>t.template.templateId===e.template.templateId));return o&&o.selected!==e.selected}));for(const r of s)_({environment:e,collectionTemplate:a,featureTemplate:r.template,previousFeatureSelections:o,collectionViewBlockStore:i.collectionViewBlockStore,examplePageStores:i.examplePageStores})}({environment:e,featureTemplateSelections:t,prevFeatureTemplateSelections:o})}),[e,t,o])}var L=()=>o(766854),D=()=>o(512039),V=()=>o(342),z=()=>o(507807),N=()=>o(253141);const U=3;o(430670),o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(737550);var W=()=>o(534177);function H({normalizedSchema:e,collectionView:t,considerGroupByAsVisible:o=!1}){const n=function({collectionView:e,includeGroupByProperties:t=!1}){const o={},n=e=>{if(e)for(const t of e)o[t.property]||(o[t.property]=[]),o[t.property].push(t)},a=e.getType(),i=e.getFormatStore();switch(a){case"board":if(n(i.getKeyValue("board_properties")),t){const e=i.getKeyValue("board_columns_by");e&&n([{property:e.property,visible:!0}])}break;case"calendar":n(i.getKeyValue("calendar_properties"));break;case"gallery":n(i.getKeyValue("gallery_properties"));break;case"list":n(i.getKeyValue("list_properties"));break;case"timeline":n(i.getKeyValue("timeline_properties")),n(i.getKeyValue("timeline_table_properties"));break;case"table":n(i.getKeyValue("table_properties"));break;case"chart":case"chat":case"feed":case"page":case"form_editor":case"map":case"custom":case"dashboard":case"teamspace_directory":case"library_external_pages":break;default:(0,W().HB)(a)}if(t){const e=i.getKeyValue("collection_group_by");e&&n([{property:e.property,visible:!0}])}return o}({collectionView:t,includeGroupByProperties:o}),a={visibleProperties:new Set,invisibleProperties:new Set};for(const i of Object.keys(e)){const e=n[i];(null==e?void 0:e.some((e=>e.visible)))??!1?a.visibleProperties.add(i):a.invisibleProperties.add(i)}return a}var q=()=>o(852424),K=()=>o(284371),$=o(474848);function Y({collectionContextStore:e}){const t=(0,i().K8)((()=>{var t;const o=e.collectionStore(),n=null===(t=e.collectionViewStore())||void 0===t?void 0:t.getModel();if(!o||!n)return[];const{invisibleProperties:a}=H({normalizedSchema:o.getSchema(),collectionView:n,considerGroupByAsVisible:!0});return Array.from(a)}),[e]),n=t.length,a=(0,s().IS)((()=>({container:{position:"absolute",zIndex:1,bottom:0,insetInlineEnd:0,margin:8,color:m().Tj.text.primary,opacity:0===n?0:1,transition:0===n?"opacity 0s ease":"opacity 0.1s ease"},button:{backdropFilter:"blur(40px)"}})),[n]);return(0,$.jsx)("div",{style:a.container,children:(0,$.jsx)(o(26697).m,{alignment:"start",renderTooltip:()=>(0,$.jsx)(Z,{collectionContextStore:e,invisibleProperties:t}),render:e=>(0,$.jsx)(o(631524).p,{hovered:!0,disabled:!0,...e,style:a.button,children:(0,$.jsx)(o(493552).D,{styleKey:"captionMedium",colorVariant:"secondary",children:(0,$.jsx)(o(69708).sA,{id:"hiddenPropertiesIndicator.hiddenCount",defaultMessage:"{numHiddenProperties, plural, one {1 hidden property} other {# hidden properties}}",values:{numHiddenProperties:n}})})})})})}function Z({collectionContextStore:e,invisibleProperties:t}){const o=(0,s().IS)((()=>({container:{display:"flex",flexDirection:"column",gap:4,marginTop:2,marginBottom:2},propertyContainer:{display:"flex",flexDirection:"row",alignItems:"center",gap:2},propertyIcon:{verticalAlign:"middle",display:"inline-block",marginInlineEnd:3,marginBottom:2},propertyName:{maxWidth:150,...K().RC}})),[]),n=(0,i().K8)((()=>{var o;const n=(null===(o=e.collectionStore())||void 0===o?void 0:o.getSchema())??{},a={};for(const e of t){const t=n[e];t&&(a[e]=t)}return a}),[e,t]),a=(0,s().DP)();return(0,$.jsx)("div",{style:o.container,children:t.flatMap((e=>{const t=n[e];return t?[(0,$.jsxs)("div",{style:o.propertyContainer,children:[(0,$.jsx)(q().zB,{icon:t.icon,type:t.type,size:14,style:o.propertyIcon,theme:a,willShowOnTooltip:!0}),(0,$.jsx)("span",{style:o.propertyName,children:t.name})]},t.name)]:[]}))})}const G=n.memo(Y);function J({collectionTemplate:e,flowId:t}){const o=(0,a().v3)(),{isPhone:d}=(0,a().Y0)(),p=d?10:32,v=(0,n.useMemo)((()=>({flowId:t,location:"workflow_templates_onboarding",isPreviewing:!0,disableHeaderPointerEvents:!0,disableEditsAndConfiguration:!0,disableContentPointerEvents:!0,disablePageLinks:!0,hideAggregation:!0,hideViewBlockSource:!0,enableHorizontalScroll:!1})),[t]),I=function(){const e=(0,a().v3)(),t=(0,z().S)(V().Zu,{canUndo:!0}),o=(0,n.useRef)(void 0),s=(0,i().O$)(S().default);return(0,n.useEffect)((()=>{if(s.open&&s.collectionTemplate&&s.parentStore&&!o.current){var n;const{performResult:{collectionStore:a,collectionViewBlockStore:i,collectionViewStore:r,examplePageStores:l}}=C().createAndCommit({userAction:"workflowTemplateCustomizationOnboarding.previewCollection",environment:e,perform:o=>{const{collectionStore:n,collectionViewBlockStore:a,collectionViewStore:i,examplePageStores:r}=(0,N().mm)({environment:e,existingCollectionInfo:void 0,inMemoryRecordCache:t.cache,parentStore:s.parentStore.clone(t.cache),template:s.collectionTemplate,transaction:o,logger:new(M().WorkflowTemplateLogger)});if(0===r.length){const t=new(D().B)(e);for(let a=0;a<U;a++)(0,L().Q)({environment:e,collectionContextStore:t,groupsPointer:[],insertAtIndex:0,shouldCoerce:!0,templateStore:t.defaultPageTemplateStore.state,transaction:o,from:{createBlock:"workflow_template"},inMemoryRecordCache:n.inMemoryRecordCache})}return{collectionViewBlockStore:a,collectionViewStore:i,collectionStore:n,examplePageStores:r}},canUndo:!1});o.current={collectionStore:a,collectionViewBlockStore:i,collectionViewStore:r},S().default.setState({...s,previewCollectionInfo:{collectionViewBlockStore:i,examplePageStores:l,collectionContextStore:void 0,focusViewTemplateId:null===(n=s.previewCollectionInfo)||void 0===n?void 0:n.focusViewTemplateId}})}}),[s,t,e]),o.current}(),b=(0,i().K8)((()=>S().default.getPreviewCollectionContextStore()),[]),j=(0,i().K8)((()=>{const e=null==b?void 0:b.getViewType();return"gallery"===e||"list"===e?p:0}),[b,p]),A=(0,i().K8)((()=>I?function({collectionStore:e,collectionViewStore:t}){const o=e.getSchema(),n=t.getFormat().table_properties;return null==n?void 0:n.filter((({property:e})=>e in o)).map((({property:e})=>e))}(I):void 0),[I]),w=(0,u().ZC)(A),k=(0,n.useCallback)((e=>{S().default.updatePreviewCollectionContextStore(e)}),[]);O(),function(){const{viewTemplateId:e,collectionViewBlockStore:t,collectionContextStore:o}=(0,i().K8)((()=>{var e;const t=S().default.state;return t.open&&t.collectionTemplate&&null!==(e=t.previewCollectionInfo)&&void 0!==e&&e.collectionContextStore?{viewTemplateId:t.previewCollectionInfo.focusViewTemplateId,collectionViewBlockStore:t.previewCollectionInfo.collectionViewBlockStore,collectionContextStore:t.previewCollectionInfo.collectionContextStore}:{viewTemplateId:void 0,collectionViewBlockStore:void 0,collectionContextStore:void 0}}),[]),s=(0,u().ZC)(e),r=(0,a().v3)();(0,n.useEffect)((()=>{var n;if(e===s)return;if((null==o||null===(n=o.collectionViewStore())||void 0===n||null===(n=n.getFormat().workflow_template_instance)||void 0===n?void 0:n.template_id)===e)return;const a=null==t?void 0:t.getCollectionViewStores().find((t=>{var o;return(null===(o=t.getFormat().workflow_template_instance)||void 0===o?void 0:o.template_id)===e}));a&&o&&(0,x().t)({environment:r,collectionContextStore:o,collectionViewId:a.id,isFullScreen:!1,isRootChild:!1,isInPeekRenderer:!1})}),[e,s,t,o,r])}(),(0,n.useEffect)((()=>{!function({collectionContextStore:e,previousPropertyIds:t,propertyIds:o,environment:n}){const a=null==e?void 0:e.collectionViewStore(),i=e&&"table"===(null==a?void 0:a.getType())&&o&&t&&o!==t;if(!i)return;if(o.length===t.length)return;if(o.length<t.length){const a=t.findIndex((e=>!o.includes(e)));Q({propertyId:0===a?o[0]:o[a-1],collectionContextStore:e,environment:n})}else{const a=o.filter((e=>!t.includes(e)));Q({propertyId:a[a.length-1],collectionContextStore:e,environment:n})}}({collectionContextStore:b,previousPropertyIds:w,propertyIds:A,environment:o})}),[b,w,A,o]);const T=(0,s().IS)((()=>({container:{position:"relative",backgroundColor:m().Tj.background.primary,paddingTop:p,overflowY:"auto",borderRadius:12,border:`1px solid ${m().Tj.border.primary}`},titleWrapper:{display:"flex",alignItems:"center",paddingInlineStart:d?p+10:p+8,margin:"8px 0"},titleText:{fontSize:24,fontWeight:700,lineHeight:"26px",whiteSpace:"pre-line",marginInlineStart:12,overflow:"initial"},collectionViewScroller:{height:"100%",paddingBottom:p-8}})),[p,d]);return e?(0,$.jsxs)(l().Y1,{height:"fill",style:T.container,children:[(0,$.jsxs)("div",{style:T.titleWrapper,children:[(0,$.jsx)(y().z,{template:e,size:28}),(0,$.jsx)(c().A,{style:T.titleText,children:e.value.targetCollection.name})]}),(0,$.jsx)(f().H,{type:r().A.All,style:T.collectionViewScroller,children:(0,$.jsx)(h().tx,{value:v,children:I?(0,$.jsx)(g().dN,{store:I.collectionViewBlockStore,disabled:!0,productUseCase:"preview_collection",forceLocalQueryCollection:!0,headerActionsBehavior:"hidden",overridePaddingLeft:d?p+4:p,overridePaddingRight:j,setCollectionContextStore:k}):void 0})}),b?(0,$.jsx)(G,{collectionContextStore:b}):void 0]}):(0,$.jsx)(l().Y1,{height:"fill",style:T.container})}function Q({propertyId:e,collectionContextStore:t,environment:o,padding:n=150}){const a=v().A.findTableHeaderCell(t,e);if(!a)return;const i=a.getNode();if(!i)return;const s=(0,p().T8)(i);if(!s)return;const r=i.getBoundingClientRect(),l=s.getBoundingClientRect(),c=r.left-l.left,u=r.right-l.left,m=s.clientWidth;let g;u>m-n?g=u-m+n:c<n&&(g=c-n),g&&(0,d().V)({element:s,environment:o,options:{left:s.scrollLeft+g,behavior:"smooth"}})}},613735:(e,t,o)=>{o.d(t,{b:()=>r});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);var n=()=>o(278238),a=()=>o(945778),i=()=>o(536504),s=()=>o(267419);function r({icon:e,themeMode:t}){if(e){if((0,a().A)(e))return s().A.state.emojiByColorProcessed[e];if((0,i().MP)(e)){const{color:t}=(0,i().uX)(e);return(0,i().hI)(t)}return(0,n().T8)(e)?function({uri:e,themeMode:t}){var o;const a=null===(o=e.match(/\/icons\/[\w\-]*_(.+)\.svg/))||void 0===o?void 0:o[1];if(!function(e){if(!e)return!1;return l.has(e)}(a))return;return n().l8[t][a]}({uri:e,themeMode:t}):void 0}}const l=new Set((0,o(534177).uv)(n().l8.light))},623875:(e,t,o)=>{o.d(t,{U:()=>f,p:()=>h});o(296540);var n=()=>o(590526),a=()=>o(401497),i=()=>o(807449),s=()=>o(278238),r=()=>o(281844),l=()=>o(945778),c=()=>o(751735),d=()=>o(100622),p=()=>o(187820),u=()=>o(613735),m=()=>o(947993),g=o(474848);const f=24;function h(e){const{config:t,size:o=f,shortcutHealthStatus:h}=e,v=(0,n().K8)((()=>{var e;return"custom"!==t.type||null===(e=t.store.getAutomationStore())||void 0===e?void 0:e.getIconStore().getValue()}),[t]),y=function(e){const{config:t,size:o,possibleCustomIcon:i}=e,r=(0,n().K8)((()=>{if("custom"===t.type){return t.store.getFormat().block_color??"default"}return t.color}),[t]),p=(0,a().eP)(),g=(0,n().K8)((()=>{if("default"!==t.type)return function(e){const{icon:t,mode:o}=e;if(!t||0===t.length)return;if((0,l().A)(t)){const e=(0,u().b)({icon:t,themeMode:o});return e?(0,c().X4)(e,m().VN):void 0}const n=(0,s().Sp)(t);if(void 0===n)return;return(0,s().u9)({color:n,useLightGrayColor:!1,mode:o})}({mode:p,icon:i})}),[t.type,i,p]),f=(0,a().DP)();return(0,a().IS)((()=>{let e;e="default"===t.type?"light"===p?d().Tj.palette[t.color][100]:d().Tj.palette[t.color][300]:i&&0!==i.length?g:d().Tj.gray.background.secondaryTranslucent;const n=(0,d().eA)(r,f);return{iconContainer:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:6,width:o,height:o,backgroundColor:e},iconFill:{fill:n.fill}}}),[r,t,g,i,o,p,f])}({config:t,size:o,possibleCustomIcon:v}),x=(0,n().K8)((()=>{var e;if("default"===t.type)return!0;const o=null===(e=t.store.getAutomationStore())||void 0===e?void 0:e.getIconStore().getValue();return!o||0===o.length||Boolean(y.iconContainer.backgroundColor)}),[t,y.iconContainer.backgroundColor])?Math.floor(.7*o):o,S=(0,n().K8)((()=>{const e={largeIcon:!0,disabled:!0,isEmptyPage:!1,size:x,isLarge:!0,style:{width:o,height:o}};if("default"===t.type)return(0,g.jsx)(p().B6,{...e,defaultIcon:(0,g.jsx)(i().I,{icon:t.icon,colorVariant:"secondary",size:x,style:y.iconFill})});if("custom"===t.type){var n;const o=null===(n=t.store.getAutomationStore())||void 0===n?void 0:n.getIconStore().getValue();return o?(0,g.jsx)(p().B6,{...e,icon:{icon:o,pointer:t.store.pointer}}):(0,g.jsx)(p().B6,{...e,defaultIcon:(0,g.jsx)(i().I,{icon:r().v,colorVariant:"needs_setup"===h?"disabled":"secondary",size:x})})}}),[x,o,t,y.iconFill,h]);return(0,g.jsx)("div",{style:y.iconContainer,children:S})}},626001:(e,t,o)=>{o.d(t,{Af:()=>k,Bw:()=>M,Cs:()=>S,Oq:()=>f,Re:()=>v,X4:()=>h,YJ:()=>w,ZB:()=>C,Zd:()=>T,d2:()=>y,dd:()=>b,in:()=>x,kQ:()=>A});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(581454),o(737550);var n=()=>o(68169),a=()=>o(799288),i=()=>o(696706),s=()=>o(179034),r=()=>o(798880),l=()=>o(743246),c=()=>o(201980),d=()=>o(724639),p=()=>o(496603),u=()=>o(534177),m=()=>o(27267),g=()=>o(166442);function f(e,t){const o=g().UserChatPreferenceLocalStorageStore.getState();g().UserChatPreferenceLocalStorageStore.setState({...o,[e]:{...null==o?void 0:o[e],...t}})}function h(e){return e.some((e=>"in_progress"===e.status))}function v(e){return e.some((e=>"complete"===e.status&&"risky"===e.attachmentRisk))}function y(e,t){const o=c().w9s(e),n=((null==t?void 0:t.length)??0)>0;return!o||n}function x(e){const t=S({config:e,includeWeb:!1});return 1===t.length?t[0]:void 0}function S(e){const{config:t,includeWeb:o}=e,n=[];if("search"===t.type)n.push(t.scopeForNextSearch);else if("researcher"===t.type&&t.searchScope)n.push(t.searchScope);else{if("workflow"!==t.type)return[];n.push(...(0,d().n_)({config:t,modules:[]})??[])}return o&&t.useWebSearch&&n.push({type:"web"}),n}function I(e){const{botId:t,spaceStore:o,userStore:n}=e,a=m().R.getCachedWorkflowData(n.id,o.id);if(a)for(const s of a.workflowStores){var i;const e=s.getDraftData();if("bot"===(null==e||null===(i=e.runtime_actor_pointer)||void 0===i?void 0:i.table)&&e.runtime_actor_pointer.id===t)return s.id}}function b(e,t,o){if(!e)return[];const i=c().moK(e),s=c().Fbh(e).map((e=>({table:r().oo,id:e}))),d=c().jgW(e);return[...i,...s,...t&&o?d.map((e=>{if((0,a().ut)(e))return{table:l().C0,id:n().Lj,spaceId:t.id};const i=I({spaceStore:t,botId:e,userStore:o});return i?{table:l().C0,id:i,spaceId:t.id}:void 0})).filter(u().O9):[]]}function j(e,t){const o=new Set(e.map((e=>i().L3.toIdTableKey(e)))),n=new Set(t.map((e=>i().L3.toIdTableKey(e))));return{added:t.filter((e=>!o.has(i().L3.toIdTableKey(e)))),removed:e.filter((e=>!n.has(i().L3.toIdTableKey(e)))),unchanged:e.filter((e=>n.has(i().L3.toIdTableKey(e))))}}function A(e){const{currentTextMentionPointers:t,inputMentionPointers:o,allMentionPointers:n}=e;let a,s;const{added:r}=j(Array.from(n),t),{removed:l,unchanged:c}=j(o,t),d=r.length>0,p=l.length>0;if(d||p){let e=Array.from(n);if(p){const t=new Set(l.map((e=>i().L3.toIdTableKey(e))));e=e.filter((e=>!t.has(i().L3.toIdTableKey(e))))}d&&(e=[...e,...r]),a=e,s=[...c,...r]}return{newMentionPointers:a,newInputMentionPointers:s}}function w(e,t){return(0,p().n4)(e,t)}function C(e){return!!e&&("workspace"===e.type||"teamspace"===e.type||"collection"===e.type||"page"===e.type)}function k(e){const{currentScopes:t,scope:o,isMultiScopeEnabled:n}=e;let a=[];if("everything"===o.type)a=[{type:"everything"}];else if(n){const e=t.filter((e=>"everything"!==e.type));if(e.some((e=>w(e,o))))a=e.filter((e=>!w(e,o)));else if("notion"===o.type){a=[...e.filter((e=>!C(e))),o]}else if(C(o)){a=[...e.filter((e=>"notion"!==e.type)),o]}else a=[...e,o]}else a=[o];return 0===a.length?[{type:"everything"}]:a}function T(e,t){switch(e.type){case"workflow":return{...e,searchScopes:t};case"search":return{...e,scopeForNextSearch:t[0]};case"researcher":return{...e,searchScope:t[0]};default:return e}}function M(e,t,o,i){if(!c().qXl(e))return!1;const d=c().uPN(e);for(const p of d)if(t.table===r().oo&&c().rie(p)){if(c().NcG(p)===t.id)return!0}else if(t.table===s().ev&&c().jIt(p)){const e=c().i$F(p);if(e&&e.id===t.id)return!0}else if(t.table===l().C0&&c().XkZ(p)){const e=c().vjW(p);if(e&&(0,a().ut)(e)&&t.id===n().Lj)return!0;if(e&&o&&i){if(I({spaceStore:o,botId:e,userStore:i})===t.id)return!0}}return!1}},641001:(e,t,o)=>{o.d(t,{A:()=>Fo});o(581454);var n=o(296540),a=()=>o(564884),i=()=>o(59226),s=()=>o(484714),r=()=>o(590526),l=()=>o(401497),c=()=>o(929219),d=()=>o(442610),p=()=>o(249046),u=()=>o(127833),m=()=>o(250910),g=()=>o(695115),f=()=>o(552712),h=()=>o(98126),v=()=>o(546926),y=()=>o(493552),x=()=>o(26697),S=()=>o(890492),I=()=>o(81068),b=()=>o(663639),j=()=>o(736847),A=()=>o(148307),w=()=>o(187174),C=()=>o(570191),k=()=>o(126617),T=()=>o(721479),M=()=>o(206267),P=()=>o(490884),_=()=>o(69708),B=()=>o(100622),F=()=>o(559926),E=()=>o(37450),R=()=>o(251126),O=(o(944114),o(898992),o(672577),o(737550),()=>o(726637)),L=()=>o(566254),D=()=>o(485444),V=()=>o(62368),z=()=>o(807449),N=()=>o(284371),U=()=>o(970236),W=o(474848);function H(e){const{style:t}=e,o=(0,l().IS)((()=>({baseBadgeStyle:{letterSpacing:0,whiteSpace:"nowrap",width:"fit-content",...t}})),[t]);return(0,W.jsx)(U().E,{color:"blue",style:{...o.baseBadgeStyle,...e.style},content:(0,W.jsx)(_().sA,{id:"syncBadgeComponent.label",defaultMessage:"Sync"})})}const q={fontSize:14,fontWeight:N().Wy.medium},K=24;const $=function({title:e,actionButton:t,onClick:n,tooltipEvents:a,icon:i,logo:s,caption:r,shouldWrapCaption:l,showSyncBadge:c,showNewBadge:d,showBetaBadge:p,tooltip:u,whiteIconBackground:m}){return(0,W.jsx)(o(718827).Ay,{...a,onClick:n,style:{display:"flex",alignItems:"center",padding:12,borderRadius:4,marginBottom:12,cursor:"pointer",boxShadow:B().Tj.shadowXS,transition:"background 200ms ease-out",background:B().Tj.background.elevated},children:(0,W.jsxs)("div",{style:{width:"100%",display:"flex",alignItems:"center",flexWrap:"wrap"},children:[(0,W.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%",justifyContent:"space-between"},children:[(0,W.jsx)(Z,{icon:i,logo:s,whiteIconBackground:m}),(0,W.jsx)("div",{style:{minWidth:0,width:"100%"},children:(0,W.jsxs)("div",{style:{display:"flex",gap:6},children:[(0,W.jsx)("div",{style:q,children:e}),c?(0,W.jsx)(H,{}):void 0,d?(0,W.jsx)(o(515918).A,{}):void 0,p?(0,W.jsx)(o(13898).A,{}):void 0,(0,W.jsx)("div",{style:{marginInlineStart:"auto"},children:t})]})})]}),r?(0,W.jsxs)("div",{style:{flex:"1 0 100%",marginTop:6,display:"flex",alignItems:"center",justifyContent:"flex-start"},children:[(0,W.jsx)(G,{caption:r,shouldWrapCaption:!0}),u]}):void 0]})})};function Y(e){return{fontSize:12,color:B().Tj.text.secondary,lineHeight:"16px",wordBreak:"keep-all",...!e&&{...N().RC}}}function Z({icon:e,logo:t,whiteIconBackground:o}){return t?(0,W.jsx)("img",{style:(n=o,{flexShrink:0,width:K,height:K,borderRadius:4,marginInlineEnd:10,...n&&{background:B().oZ.white}}),src:t}):e?(0,W.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,marginInlineEnd:8,background:B().Tj.background.secondary},children:(0,W.jsx)(z().I,{icon:e,colorVariant:"secondary",size:"lg"})}):null;var n}function G({caption:e,shouldWrapCaption:t}){return e?(0,W.jsx)("div",{style:Y(t),children:e}):null}var J=()=>o(191227),Q=()=>o(666803);const X=function(e){const t=(0,s().v3)(),{jiraResult:n,spaceStore:i,requestStore:l,analyticsFrom:c}=e,d=(0,r().K8)((()=>(0,V().p)(i)),[i]),p=(0,r().K8)((()=>(0,o(272509).I)(i)),[i]),{account:u,isOwner:g}=(0,r().K8)((()=>{const e=n.account;if(e){const t=o(365917).A.state;if(t.loaded){const o=e.find((e=>t.externalAuthentications.some((t=>t.id===e.id))));return o?{account:o,isOwner:Boolean(o)}:{account:e[0],isOwner:!1}}}return{}}),[n]),f=(0,_().tz)(),h=[{name:f.formatMessage({id:"jiraImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another instance"}),action:()=>{D().j({environment:t,from:"import_settings",action:"add_account"});const e=Q().Ay.createNewFlowId();(0,a().u)({environment:t,event:{eventName:"external_sync_entry_point",eventProperties:{integration:"jira",from:"imports_tab",flowId:e}}})}}];u&&g&&h.push({name:f.formatMessage({id:"jiraImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove"}),action:()=>{L().ml({environment:t,requestStore:l,botId:u.id})}});const v=(null==u?void 0:u.site)??f.formatMessage({id:"jiraImportOption.actionsMenu.defaultCaption",defaultMessage:"Import your issues and projects"}),y={title:"Jira",logo:A().A.images.externalIntegrations.jiraIconPng,onClick:()=>{},caption:v,actionButton:d&&u?e.renderItemActionsButton(h):null,showNewBadge:e.showNewBadge,showSyncBadge:e.showSyncBadge};return p?(0,W.jsx)(W.Fragment,{}):(0,W.jsx)(m().A,{renderOrigin:({onClick:e})=>(0,W.jsx)($,{...y,onClick:()=>{const e=J().A.getOrCreateFlowId();F().fJ(t,{import_source:"jira",from:c,userId:t.currentUser.id,spaceId:i.id,flowId:e}),Q().Ay.setState({...Q().Ay.state,flowId:e,spaceId:i.id,botId:null==u?void 0:u.id}),D().j({environment:t,from:"import_settings",action:"show_teamspaces"}),(0,a().u)({environment:t,event:{eventName:"external_sync_entry_point",eventProperties:{integration:"jira",from:"imports_tab",flowId:e}}})}}),popupType:O().A.isMobile?m().z.SlideUp:m().z.Popup,render:()=>(0,W.jsx)(W.Fragment,{})})};var ee=()=>o(267584),te=()=>o(874096),oe=()=>o(232930),ne=()=>o(404141),ae=()=>o(963411),ie=()=>o(792057),se=()=>o(769864),re=()=>o(496414),le=()=>o(757695);class ce extends le().Store{getInitialState(){return{}}}const de=new ce;var pe=()=>o(773248);async function ue(e){const{environment:t,spaceId:o,requestStore:n}=e;if(!t.currentUser.id)return ie().rG({message:"Invalid details"}),void re().V();de.setState({...de.state,[o]:{...de.state[o],showLoader:!0}});const a=await se().callApi({eventName:"getConfluenceSpaces",environment:t,data:{spaceId:o}});if(await(null==n?void 0:n.refresh()),de.setState({...de.state,[o]:{...de.state[o],showLoader:!1}}),"failed"!==a.type)return a.data.account?(de.setState({...de.state,[o]:{...de.state[o],spacesResult:a.data}}),a.data):(pe().A.setState({open:!1}),de.setState({...de.state,[o]:{...de.state[o],open:!0}}),a.data);console.error(a.error),ie().Qg(a),re().V()}var me=()=>o(181015),ge=()=>o(137432),fe=()=>o(172252),he=()=>o(114282),ve=()=>o(713972),ye=()=>o(755934),xe=()=>o(989133),Se=()=>o(175167),Ie=()=>o(352442),be=()=>o(684840),je=()=>o(65975),Ae=()=>o(164367),we=()=>o(242422);var Ce=()=>o(797180);class ke extends le().Store{getInitialState(){return{isModalOpen:!1,currentTab:"selectAccount",parentId:void 0,parentTable:void 0,spaceId:void 0,analyticsFrom:void 0,notebooksResponse:void 0,isFetchingNotebooks:!1,selectedNotebookGuids:[]}}open(e){this.setState({...this.getInitialState(),isModalOpen:!0,analyticsFrom:null==e?void 0:e.analyticsFrom})}setParent(e,t){this.setState({...this.state,parentId:e,parentTable:t})}setSpaceId(e){this.setState({...this.state,spaceId:e})}setCurrentTab(e){this.setState({...this.state,currentTab:e})}setNotebooksResponse(e){this.setState({...this.state,notebooksResponse:e})}setIsFetchingNotebooks(e){this.setState({...this.state,isFetchingNotebooks:e})}setSelectedNotebookGuids(e){this.setState({...this.state,selectedNotebookGuids:e})}resetImport(){const{isModalOpen:e,parentId:t,parentTable:o,spaceId:n,analyticsFrom:a}=this.getState();this.setState({...this.getInitialState(),isModalOpen:e,parentId:t,parentTable:o,spaceId:n,analyticsFrom:a})}close(e){this.setState(this.getInitialState())}}const Te=new ke;(0,o(852832).exposeDebugValue)("EvernoteV2ImportStore",Te);var Me=()=>o(247402),Pe=()=>o(892232),_e=()=>o(270948),Be=()=>o(728066),Fe=()=>o(575143),Ee=()=>o(84569);var Re=()=>o(118307);const Oe=new(Re().A),Le={whiteSpace:"pre-wrap"};function De(e){const{spaceStore:t}=e,o=(0,r().O$)(Ce().Z),a=(0,i().X)("use_asana_import_v3"),{account:l,isLoadingAsanaWorkspaces:c,isAccountDelinkingInProgress:d,isAccountLinkingInProgress:p}=o,f=(0,s().v3)(),y=(0,_().tz)(),x=(0,r().O$)(J().A),I=x.flowId||M().JW();(0,n.useEffect)((()=>{x.flowId||J().A.setState({flowId:I})}),[I,x]);const w={title:y.formatMessage({id:"asanaImportOption.asanaButton.title",defaultMessage:"Asana"}),logo:A().A.images.import.asanaPng,caption:p?y.formatMessage({id:"asanaImportOption.asanaButton.accountLinkingInProgress",defaultMessage:"Authenticating..."}):d?y.formatMessage({id:"asanaImportOption.asanaButton.accountDelinkingInProgress",defaultMessage:"Removing account..."}):l??y.formatMessage({id:"asanaImportOption.asanaButton.defaultCaption",defaultMessage:"Migrate your projects and tasks"}),actionButton:l?(C=[{name:y.formatMessage({id:"asanaImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another account"}),captionText:y.formatMessage({id:"asanaImportOption.connectAnotherAccount.captionText",defaultMessage:"Ensure you are logged into the new Asana account in your browser"}),action:()=>ae().x3({environment:f,flowId:I}).catch((()=>{}))},{name:y.formatMessage({id:"asanaImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove"}),action:()=>ae().bk({environment:f})}],(0,W.jsx)(m().A,{popupType:u().nl.Popup,renderOrigin:e=>c?(0,W.jsx)(h().k,{}):(0,W.jsx)(g().A,{ariaLabel:y.formatMessage({id:"asanaImportOption.asanaButton.ariaLabel",defaultMessage:"Import from Asana button"}),icon:k().ellipsisSmallIcon,...e}),render:e=>{const t=C.map((({name:t,captionText:o,action:n})=>{const a={key:t,render:e=>(0,W.jsx)(Fe().A,{...e,title:t,caption:o,captionStyle:o?Le:void 0}),action:()=>{n(),e.close()}};return a})),o={key:"section",render:e=>(0,W.jsx)(j().A,{...e}),items:t};return(0,W.jsx)(S().A,{menuType:v().gu.Popup,width:200,children:(0,W.jsx)(b().A,{type:b().O.Vertical,initialFocus:void 0,sections:[o]})})}})):void 0,onClick:()=>{}};var C;return(0,W.jsx)(m().A,{onClick:async()=>{if(F().fJ(f,{import_source:"asana",from:"settings_modal",userId:f.currentUser.id,spaceId:t.id,flowId:I}),a)Ee().Y.resetImport(),Ee().Y.setState({...Ee().Y.state,isModalOpen:!0});else{if(Ce().Z.resetImport(),c||p||d)return;if(!l)return void ae().x3({environment:f,flowId:I}).catch((()=>{}));await ae().xd({environment:f}),ae().qf()}},popupType:O().A.isMobile?m().z.BottomSheet:m().z.Popup,buttonPopupStore:Oe,renderOrigin:e=>(0,W.jsx)($,{...w,onClick:t=>e.onClick(t)}),render:()=>null})}var Ve=()=>o(717137),ze=()=>o(107975),Ne=()=>o(388926),Ue=()=>o(31511),We=()=>o(406094),He=()=>o(631524),qe=()=>o(160432),Ke=()=>o(324254),$e=()=>o(395546),Ye=()=>o(89383),Ze=()=>o(690197),Ge=(o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(354520),o(430670),o(803949),()=>o(852507)),Je=()=>o(420802),Qe=()=>o(302501),Xe=()=>o(449279),et=()=>o(778078),tt=()=>o(290913),ot=()=>o(419357);class nt extends le().Store{getInitialState(){return{searchQuery:"",selection:new Set}}}const at=nt;function it({checked:e,enableMultiSelect:t,onClick:o}){return t?(0,W.jsx)(Je().S,{size:16,checked:e,onClick:e=>{e.stopPropagation(),null==o||o()}}):null}const st=function({searchInputPlaceholder:e,sections:t,noSearchResultsPlaceholder:o,handleClickImportConfluenceWorkspace:a,onComplete:i}){const s=(0,r().uB)(void 0,at),l=(0,xe().HW)(),c=(0,r().K8)((()=>s.state.selection),[s]),d=(0,n.useCallback)((()=>{const e=t.flatMap((e=>e.items)).filter((e=>c.has(e.key)));i(e)}),[t,c,i]),p=(0,n.useCallback)((()=>{s.setState({...s.state,selection:new Set})}),[s]),u=l?(0,W.jsxs)(j().A,{topBorder:!0,style:{padding:8,justifyContent:"space-between",display:"flex",flexDirection:"row"},children:[(0,W.jsx)(He().p,{onClick:p,disabled:0===c.size,children:(0,W.jsx)(_().sA,{id:"confluenceImportPopup.clearSelection",defaultMessage:"Clear"})}),(0,W.jsx)(qe().A,{colorPalette:"blue",onClick:d,disabled:0===c.size,children:(0,W.jsx)(_().sA,{id:"confluenceImportPopup.applySelection",defaultMessage:"Apply"})})]}):void 0;return(0,Ge().l)((()=>{const e=s.state.selection;if(!l){const[o]=t;if(o){const[t]=o.items;t&&e.add(t.key)}}s.emit()})),(0,W.jsx)(S().A,{menuType:v().gu.Popup,header:(0,W.jsx)(rt,{searchInputPlaceholder:e,store:s,enableMultiSelect:l}),footer:u,width:280,maxHeight:350,children:(0,W.jsx)(lt,{sections:t,noSearchResultsPlaceholder:o,handleClickImportConfluenceWorkspace:a,onComplete:i,store:s,enableMultiSelect:l})})};function rt({searchInputPlaceholder:e,store:t,enableMultiSelect:o}){const n=(0,_().tz)(),a=(0,r().uB)(t,at),i=(0,r().K8)((()=>a.state.searchQuery),[a]),s=(0,r().K8)((()=>a.state.selection),[a]);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(j().A,{isInput:!0,desktopStyle:{paddingBottom:2},children:(0,W.jsx)(ot().Ay,{focus:!0,focusAfterAnimation:!0,value:i,onChange:e=>{a.setState({...a.state,searchQuery:e.target.value})},placeholder:e})}),o?(0,W.jsx)(j().A,{desktopStyle:{paddingTop:6,paddingBottom:8},children:(0,W.jsx)("div",{style:{fontSize:12,color:"rgba(55, 53, 47, 0.65)",paddingInlineStart:12},children:s.size>0?n.formatMessage({id:"confluenceImportPopup.selectedSpacesWithLimit",defaultMessage:"{count} {count, plural, one {space selected} other {spaces selected}} (max {limit})"},{count:s.size,limit:tt().w}):(0,W.jsx)(_().sA,{id:"confluenceImportOption.search.title.multiSelect",defaultMessage:"Select spaces to import"})})}):void 0]})}function lt({sections:e,noSearchResultsPlaceholder:t,handleClickImportConfluenceWorkspace:o,onComplete:n,store:a,enableMultiSelect:i}){const s=(0,_().tz)(),l=(0,r().uB)(a,at),c=(0,r().K8)((()=>l.state.searchQuery),[l]),d=(0,r().K8)((()=>l.state.selection),[l]),u=e.map((e=>{const t=(0,et().Ay)(c,e.items,(t=>`${t.key} ${t.name} ${e.name}`));return{...e,items:t}})).filter((e=>e.items.length>0));if(0===u.length)return(0,W.jsx)(j().A,{children:(0,W.jsx)(Xe().u,{title:t})});const m=u.map((t=>{const a=t.items.map((e=>e.name)),r={};return a.forEach((e=>{r[e]=r[e]?r[e]+1:1})),{key:t.name,render:o=>(0,W.jsx)(j().A,{...o,title:e.length>1?t.name:void 0}),items:t.items.map((e=>{const t=d.has(e.key),a=()=>{!function(e,t,o,n){if(n){const t=o.state.selection,n=t.has(e.key),a=new Set(t);if(n)a.delete(e.key);else{if(t.size>=tt().w)return;a.add(e.key)}o.setState({...o.state,selection:a})}else t([e])}(e,n,l,i)},c=(0,W.jsxs)(p().Ye,{gap:6,alignItems:"center",children:[(0,W.jsx)(it,{checked:t,enableMultiSelect:i,onClick:a}),(0,W.jsxs)(p().Ye,{gap:2,alignItems:"center",children:[e.name,r[e.name]>1?(0,W.jsx)(x().m,{placement:"right",renderTooltip:()=>e.key,render:t=>(0,W.jsx)(g().A,{ariaLabel:s.formatMessage({id:"integrationConfluenceImportPopup.associatedSpaceKey",defaultMessage:"Associated space key: {key}"},{key:e.key}),disableBackground:!0,icon:$e().infoCircleSmallIcon,...t})}):void 0]})]});return{key:e.key,render:t=>(0,W.jsx)(I().A,{...t,title:c,right:void 0!==e.count?(0,W.jsx)(Qe().A,{isSmall:!0,children:e.count}):null}),action:()=>{i?a():(o(e.key,e.name),n([e]))}}}))}}));return(0,W.jsx)(b().A,{type:b().O.Vertical,initialFocus:void 0,sections:m})}const ct={whiteSpace:"pre-wrap"};function dt(e){const{key:t,value:o,spaceId:n}=e;de.setState({...de.state,[n]:{...de.state[n],[t]:o}})}function pt(e){var t,o;const n=(0,_().tz)(),a=(0,r().O$)(de),{spaceStore:i,flowId:l}=e,c=(0,xe().HW)(),d=[{name:n.formatMessage({id:"confluenceImportOption.actionsMenu.importViaApi",defaultMessage:"Import via API"}),captionText:n.formatMessage({id:"confluenceImportOption.actionsMenu.importViaApi.message",defaultMessage:"Recommended for the best import experience"}),action:()=>{e.handleApiImportClick("confluence",l),dt({key:"open",value:!0,spaceId:i.id})}},{name:n.formatMessage({id:"confluenceImportOption.actionsMenu.importViaFile",defaultMessage:"Import via file"}),captionText:n.formatMessage({id:"confluenceImportOption.actionsMenu.importViaFile.message",defaultMessage:"Best for importing partial workspace content"}),action:()=>e.handleFileUploadClick("confluence",l)}],u=(0,s().v3)(),{confluenceResult:f,onComplete:y,requestStore:I,spaceViewStore:w}=e,{account:C}=f,k={spacesResult:void 0,showLoader:!1},{showLoader:T}=a[i.id]||k;function P(e,t){F().mM(u,{import_source:"confluence",data:{spaceKey:e,spaceName:t},flowId:l})}function B(e){return(0,W.jsx)("div",{children:(0,W.jsx)(st,{searchInputPlaceholder:n.formatMessage({id:"confluenceImportOption.search.placeholder",defaultMessage:"Search for a Space"}),noSearchResultsPlaceholder:n.formatMessage({id:"confluenceImportOption.search.noResultsPlaceholder",defaultMessage:"No Spaces"}),sections:[e],onComplete:async e=>{await async function(e){const{environment:t,onComplete:o,selectedSpaces:n,spaceStore:a,spaceViewStore:i,flowId:s}=e,r=(0,xe().ic)(a);if(r)Ye().hi(n),Ye().qf(o);else{const e=n[0];o(await he().Od({environment:t,spaceStore:a,spaceViewStore:i,space:e,flowId:s||M().JW()}),"confluence")}}({environment:u,onComplete:y,selectedSpaces:e,spaceStore:i,spaceViewStore:w,flowId:l})},handleClickImportConfluenceWorkspace:P})})}const E={title:"Confluence",logo:A().A.images.import.confluencePng,caption:C??n.formatMessage({id:"confluenceImportOption.actionsMenu.defaultCaption",defaultMessage:"Transfer your team's documentation"}),actionButton:C&&T?(0,W.jsx)("div",{style:{width:24,height:24,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,W.jsx)(h().k,{size:16})}):C&&e.renderItemActionsButton([{name:n.formatMessage({id:"confluenceImportOption.actionsMenu.importViaFile",defaultMessage:"Import via file"}),action:()=>e.handleFileUploadClick("confluence",l)},{name:n.formatMessage({id:"confluenceImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another instance"}),action:()=>{e.handleApiImportClick("confluence",l),dt({key:"open",value:!0,spaceId:i.id})}},{name:n.formatMessage({id:"confluenceImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove"}),action:()=>async function(e){const{environment:t,spaceId:o,requestStore:n}=e;de.setState({...de.state,[o]:{...de.state[o],showLoader:!1}}),await L().Pz(t,n,o)}({environment:u,spaceId:i.id,requestStore:I})}]),onClick:()=>{}},R=(null===(t=a[i.id])||void 0===t||null===(t=t.spacesResult)||void 0===t?void 0:t.spaces)||[],D={key:"default",name:n.formatMessage({id:"confluenceImportOption.spacesProperty.defaultName",defaultMessage:"Spaces"}),items:R.map((e=>({id:e.id,key:e.key,name:e.name})))},V=d.map((({name:e,captionText:t,action:o})=>{const n={key:e,render:o=>(0,W.jsx)(Fe().A,{...o,title:e,caption:t,captionStyle:t?ct:void 0}),action:o};return n})),z={key:"section",render:e=>(0,W.jsx)(j().A,{...e}),items:V},N=n.formatMessage({id:"confluenceAuthentication.emailHelpText",defaultMessage:"Email address of the Confluence user importing the data"}),U=n.formatMessage({id:"confluenceAuthentication.instanceHelperText",defaultMessage:"On Confluence, click 'Help', the (?) next to your profile, then click on 'About Confluence' this will tell you if it is a Server, Cloud or Data Center"}),H=n.formatMessage({id:"confluenceAuthentication.siteHelperText",defaultMessage:"The base URL that is used to access Confluence. If you are running on a non-standard port, please provide the input in host:port format"}),q=n.formatMessage({id:"confluenceAuthentication.stepsToGetConfluenceAccessToken.captions",defaultMessage:"Click to learn how to get access token from Confluence cloud"}),K=n.formatMessage({id:"confluenceAuthentication.stepsToGetConfluencePAT.caption",defaultMessage:"Click to learn how to get personal authentication token from Confluence server"}),Y=n.formatMessage({id:"confluenceAuthentication.stepsToGetConfluenceVersion.captions",defaultMessage:"Click to learn how to know the version of Confluence you are running"}),Z=n.formatMessage({id:"confluenceAuthentication.usernameHelpText",defaultMessage:"Username of the Confluence user importing the data"}),G=n.formatMessage({id:"confluenceAuthentication.passwordHelpText",defaultMessage:"Password of the Confluence user importing the data"});return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(m().A,{popupType:O().A.isMobile?m().z.SlideUp:m().z.Popup,onClick:()=>{F().fJ(u,{import_source:"confluence",from:"settings_modal",import_type:"api",import_sub_type:c?"multispace":void 0,userId:u.currentUser.id,spaceId:i.id,flowId:l}),C&&ue({environment:u,requestStore:I,spaceId:i.id}).catch((()=>{}))},buttonPopupStore:pe().A,render:e=>C?function(e){return T?(0,W.jsx)(W.Fragment,{}):B(e)}(D):(0,W.jsx)(S().A,{menuType:v().gu.Popup,width:200,children:(0,W.jsx)(b().A,{onAccept:e.close,type:b().O.Vertical,initialFocus:void 0,sections:[z]})}),renderOrigin:({onClick:e})=>(0,W.jsx)($,{...E,onClick:e})}),(0,W.jsx)(ze().a,{open:null===(o=a[i.id])||void 0===o?void 0:o.open,innerStyle:{width:600,maxWidth:"calc(100vw - 100px)",overflow:"hidden",borderRadius:5,maxHeight:"90vh"},onDismiss:()=>{dt({key:"open",value:!1,spaceId:i.id})},render:()=>(0,W.jsx)(gt,{hidePopup:()=>{dt({key:"open",value:!1,spaceId:i.id})},environment:u,title:(0,W.jsx)(_().sA,{id:"confluenceAuthentication.titleMessage",defaultMessage:"Authentication details"}),email:(0,W.jsxs)(p().Ye,{style:{alignItems:"center",gap:2},children:[(0,W.jsx)(_().sA,{id:"confluenceAuthentication.emailMessage",defaultMessage:"Email"}),(0,W.jsx)(x().m,{placement:"right",renderTooltip:()=>N,render:e=>(0,W.jsx)(g().A,{ariaLabel:N,disableBackground:!0,icon:$e().infoCircleSmallIcon,...e})})]}),accountType:(0,W.jsxs)(p().Ye,{style:{alignItems:"center",gap:2},children:[(0,W.jsx)(_().sA,{id:"confluenceAuthentication.instanceMessage",defaultMessage:"Confluence instance"}),(0,W.jsx)(x().m,{style:{width:300,whiteSpace:"normal"},placement:"right",renderTooltip:()=>U,render:e=>(0,W.jsx)(g().A,{ariaLabel:U,disableBackground:!0,icon:$e().infoCircleSmallIcon,...e})})]}),site:(0,W.jsxs)(p().Ye,{style:{alignItems:"center",gap:2},children:[(0,W.jsx)(_().sA,{id:"confluenceAuthentication.siteMessage",defaultMessage:"Site"}),(0,W.jsx)(x().m,{style:{width:300,whiteSpace:"normal"},placement:"right",renderTooltip:()=>H,render:e=>(0,W.jsx)(g().A,{ariaLabel:H,disableBackground:!0,icon:$e().infoCircleSmallIcon,...e})})]}),APIToken:(0,W.jsxs)(p().Ye,{style:{alignItems:"center",gap:2},children:[(0,W.jsx)(_().sA,{id:"confluenceAuthentication.apiTokenMessage",defaultMessage:"API token"}),(0,W.jsx)(x().m,{placement:"right",renderTooltip:()=>q,render:e=>(0,W.jsx)(g().A,{ariaLabel:q,onClick:()=>{window.open("https://support.atlassian.com/atlassian-account/docs/manage-api-tokens-for-your-atlassian-account","_blank")},icon:$e().infoCircleSmallIcon,...e})})]}),personalAccessToken:(0,W.jsxs)(p().Ye,{style:{alignItems:"center",gap:2},children:[(0,W.jsx)(_().sA,{id:"confluenceAuthentication.personalAccessTokenMessage",defaultMessage:"Personal Access Token"}),(0,W.jsx)(x().m,{placement:"right",style:{width:300,whiteSpace:"normal"},renderTooltip:()=>K,render:e=>(0,W.jsx)(g().A,{ariaLabel:K,onClick:()=>{window.open("https://confluence.atlassian.com/enterprise/using-personal-access-tokens-1026032365.html","_blank")},icon:$e().infoCircleSmallIcon,...e})})]}),confluenceVersion:(0,W.jsxs)(p().Ye,{style:{alignItems:"center",gap:2},children:[(0,W.jsx)(_().sA,{id:"confluenceAuthentication.confluenceVersion",defaultMessage:"Confluence version"}),(0,W.jsx)(x().m,{style:{width:300,whiteSpace:"normal"},placement:"right",renderTooltip:()=>Y,render:e=>(0,W.jsx)(g().A,{ariaLabel:Y,onClick:()=>{window.open("https://confluence.atlassian.com/confkb/how-do-i-know-what-version-of-confluence-is-running-179441565.html","_blank")},icon:$e().infoCircleSmallIcon,...e})})]}),username:(0,W.jsxs)(p().Ye,{style:{alignItems:"center",gap:2},children:[(0,W.jsx)(_().sA,{id:"confluenceAuthentication.username",defaultMessage:"Username"}),(0,W.jsx)(x().m,{placement:"right",renderTooltip:()=>Z,render:e=>(0,W.jsx)(g().A,{ariaLabel:Z,disableBackground:!0,icon:$e().infoCircleSmallIcon,...e})})]}),password:(0,W.jsxs)(p().Ye,{style:{alignItems:"center",gap:2},children:[(0,W.jsx)(_().sA,{id:"confluenceAuthentication.password",defaultMessage:"Password"}),(0,W.jsx)(x().m,{placement:"right",renderTooltip:()=>G,render:e=>(0,W.jsx)(g().A,{ariaLabel:G,disableBackground:!0,icon:$e().infoCircleSmallIcon,...e})})]}),spaceId:i.id,flowId:l,requestStore:I})})]})}function ut(e){var t;const{onSelectOption:o,options:n,currentOption:a}=e,i=null===(t=n.find((({key:e})=>e===a)))||void 0===t?void 0:t.label;return(0,W.jsx)(m().A,{popupType:m().z.Popup,placementToOrigin:"left",renderOrigin:e=>(0,W.jsx)(He().p,{...e,size:"lg",style:{opacity:1},disabled:!1,iconTrailing:{icon:Ke().arrowChevronSingleDownSmallIcon,colorVariant:"tertiary",size:"xs"},children:i}),render:e=>{const t={menuType:v().gu.Popup,width:250,left:50},a=[{key:"settings-item-section",render:e=>(0,W.jsx)(j().A,{...e}),items:n.map((({key:t,label:n})=>({key:t,action:()=>{o(t),e.close()},render:e=>(0,W.jsx)(I().A,{...e,title:n,shouldWrapCaption:!0,isChecked:i===n})})))}];return(0,W.jsx)(S().A,{...t,children:(0,W.jsx)(b().A,{type:b().O.Vertical,sections:a,initialFocus:void 0,style:{position:"relative",alignItems:"flex-end"}})})}})}async function mt(e){await async function(e){const{environment:t,requestStore:o,userEmail:n,site:a,access_token:i,instance:s,spaceId:r,username:l,password:c,flowId:d}=e;if(F()._$(t,{import_source:"confluence",data:{import_type:"api",status:"initiated"},flowId:d}),!t.currentUser.id)return ie().rG({message:"Invalid details"}),void re().V();const p=await se().callApi({eventName:"authenticateConfluenceUser",environment:t,data:{userEmail:n,site:a,access_token:i,instance:s,userId:t.currentUser.id,spaceId:r,username:l,password:c}});await o.refresh(),"failed"===p.type?(F()._$(t,{import_source:"confluence",data:{import_type:"api",status:"failure",error:p.error},flowId:d}),console.error(p.error),ie().Qg(p)):(F()._$(t,{import_source:"confluence",data:{import_type:"api",status:"success"},flowId:d}),ie().rG({message:"Successfully connected confluence instance."}),await ue({environment:t,requestStore:o,spaceId:r})),re().V()}(e)}function gt({environment:e,title:t,email:o,accountType:n,site:a,APIToken:i,personalAccessToken:s,confluenceVersion:c,username:d,password:p,hidePopup:u,spaceId:m,flowId:g,requestStore:f}){const h=(0,r().O$)(de),v=(0,l().IS)((()=>({title:{fontWeight:N().Wy.semibold},inputLabels:{fontSize:"14px",fontWeight:"400"}})),[]);return(0,W.jsx)(Ve().A,{debugName:"ConfluenceImportOption",capture:!0,children:(0,W.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%",padding:20,width:"100%"},children:[(0,W.jsxs)("div",{style:{overflowY:"scroll"},children:[(0,W.jsxs)("div",{style:{marginBottom:24},children:[(0,W.jsx)("div",{style:v.title,children:t}),(0,W.jsx)(Ze().A,{title:(0,W.jsx)(_().sA,{id:"confluenceAuthentication.helpButton.caption",defaultMessage:"Learn more about importing from Confluence"}),href:"https://www.notion.so/help/import-from-confluence",analyticsFrom:"import",style:{marginTop:8,marginInlineStart:-4}})]}),(0,W.jsxs)("div",{children:[(0,W.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",flexDirection:"row"},children:[(0,W.jsx)("label",{htmlFor:"accountType",style:{...v.inputLabels},children:n}),(0,W.jsx)(ut,{onSelectOption:e=>{dt({key:"instanceValue",value:e,spaceId:m})},options:[{key:"Cloud",label:(0,W.jsx)(_().sA,{id:"confluenceAuthentication.accountTypeDropdownCloudOption.label",defaultMessage:"Cloud"})},{key:"Server",label:(0,W.jsx)(_().sA,{id:"confluenceAuthentication.accountTypeDropdownServerOption.label",defaultMessage:"Server/On-Premise"})}],currentOption:h[m].instanceValue??"Cloud"})]}),(0,W.jsx)(Ne().A,{size:12,isHidden:!0}),(0,W.jsx)("div",{children:"Server"===h[m].instanceValue?(0,W.jsxs)("div",{children:[(0,W.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",flexDirection:"row",alignItems:"center"},children:[(0,W.jsx)("label",{htmlFor:"confluenceVersion",style:{...v.inputLabels},children:c}),(0,W.jsx)(ut,{onSelectOption:e=>{dt({key:"confluenceAuthenticationTypeValue",value:e,spaceId:m})},options:[{key:"OAuth2.0",label:(0,W.jsx)(_().sA,{id:"confluenceAuthentication.confluenceVersionDropdownNewVersionOption.label",defaultMessage:"7.9 or later"})},{key:"Basic",label:(0,W.jsx)(_().sA,{id:"confluenceAuthentication.confluenceVersionDropdownOlderVersionOption.label",defaultMessage:"Prior to 7.9"})}],currentOption:h[m].confluenceAuthenticationTypeValue??"OAuth2.0"})]}),(0,W.jsx)(Ne().A,{size:12,isHidden:!0})]}):void 0}),(0,W.jsx)("label",{htmlFor:"email",style:{...v.inputLabels},children:o}),(0,W.jsx)(Ue().A,{id:"email",value:h[m].emailValue,autoComplete:"off",autoCapitalize:"off",onChange:e=>{dt({key:"emailValue",value:e.target.value,spaceId:m})},showClearButton:!0,placeholder:"notion@acmelabs.com",inputElementAttributes:{minLength:4}}),(0,W.jsx)(Ne().A,{size:12,isHidden:!0}),(0,W.jsxs)("div",{children:[(0,W.jsx)("label",{htmlFor:"site",style:{...v.inputLabels},children:a}),(0,W.jsx)(Ue().A,{id:"site",value:h[m].siteValue,onChange:e=>dt({key:"siteValue",value:e.target.value,spaceId:m}),showClearButton:!0,placeholder:"Cloud"===h[m].instanceValue?"https://confluence.atlassian.net":"https://domain.com",inputElementAttributes:{minLength:4}}),(0,W.jsx)(Ne().A,{size:12,isHidden:!0}),"Cloud"===h[m].instanceValue?(0,W.jsxs)("div",{children:[(0,W.jsx)("label",{htmlFor:"APIToken",style:{...v.inputLabels},children:i}),(0,W.jsx)(Ue().A,{id:"AccessToken",type:"password",value:h[m].tokenValue,onChange:e=>{dt({key:"tokenValue",value:e.target.value,spaceId:m})},showClearButton:!0,placeholder:"Paste your token here",inputElementAttributes:{minLength:4}})]}):(0,W.jsx)("div",{children:(0,W.jsx)("div",{children:"Basic"===h[m].confluenceAuthenticationTypeValue?(0,W.jsxs)("div",{children:[(0,W.jsx)("label",{htmlFor:"username",style:{...v.inputLabels},children:d}),(0,W.jsx)(Ue().A,{id:"username",value:h[m].usernameValue,onChange:e=>{dt({key:"usernameValue",value:e.target.value,spaceId:m})},showClearButton:!0,placeholder:"confluenceUser",inputElementAttributes:{minLength:1}}),(0,W.jsx)(Ne().A,{size:12,isHidden:!0}),(0,W.jsx)("label",{htmlFor:"password",style:{...v.inputLabels},children:p}),(0,W.jsx)(Ue().A,{type:"password",id:"password",value:h[m].passwordValue,onChange:e=>{dt({key:"passwordValue",value:e.target.value,spaceId:m})},showClearButton:!0,placeholder:"P@S$w0rd",inputElementAttributes:{minLength:1}})]}):(0,W.jsxs)("div",{children:[(0,W.jsx)("label",{htmlFor:"AccessToken",style:{fontSize:"14px",fontWeight:"400"},children:s}),(0,W.jsx)(Ue().A,{id:"AccessToken",type:"password",value:h[m].tokenValue,onChange:e=>{dt({key:"tokenValue",value:e.target.value,spaceId:m})},showClearButton:!0,placeholder:"Paste your token here",inputElementAttributes:{minLength:4}})]})})})]})]})]}),(0,W.jsxs)("div",{style:{flexGrow:0,flexShrink:0},children:[(0,W.jsx)(Ne().A,{size:24}),(0,W.jsx)(qe().A,{colorPalette:"blue",size:"lg",onClick:async()=>{const t=h[m].instanceValue??"Cloud",o=h[m].confluenceAuthenticationTypeValue??"OAuth2.0";await mt({environment:e,userEmail:h[m].emailValue,site:"/"===h[m].siteValue[h[m].siteValue.length-1]?h[m].siteValue.slice(0,-1):h[m].siteValue,access_token:"Server"===t&&"Basic"===o?void 0:h[m].tokenValue,instance:h[m].instanceValue??"Cloud",username:"Basic"===o?h[m].usernameValue:void 0,password:"Basic"===o?h[m].passwordValue:void 0,spaceId:m,flowId:g,requestStore:f}),u(),pe().A.setState({open:!0})},children:(0,W.jsx)(_().sA,{id:"confluenceAuthentication.authenticateButton.label",defaultMessage:"Authenticate"})}),(0,W.jsx)(We().A,{size:"lg",style:{marginInlineStart:12},onClick:()=>{u()},children:(0,W.jsx)(_().sA,{id:"confluenceAuthentication.cancelButton.label",defaultMessage:"Cancel"})})]})]})})}var ft=()=>o(161479),ht=()=>o(496603),vt=()=>o(283080),yt=()=>o(752860);function xt(e){const{intl:t,environment:o,requestStore:n,onImport:a,openNotebooksPopupAfterAuth:i=!0}=e;return[{name:t.formatMessage({id:"evernoteImportOption.actionsMenu.learnMore",defaultMessage:"Learn more"}),action:()=>(0,yt().L)({environment:o,url:(0,oe().x)("guides.importEvernote")})},{name:t.formatMessage({id:"evernoteImportOption.actionsMenu.import",defaultMessage:"Import"}),action:a},{name:t.formatMessage({id:"evernoteImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another account"}),action:()=>{ge().J({environment:o,requestStore:n,openNotebooksPopupAfterAuth:i})}},{name:t.formatMessage({id:"evernoteImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove"}),action:()=>{(async()=>{await o.api.callApi({eventName:"disconnectEvernote",environment:o,data:{}}),vt().A.setState({notebooksResponse:{notebooks:[]},isFetchingNotebooks:!0,showLoader:!1}),await n.refresh(),F().kO(o,{integration_name:"evernote"})})()}}]}var St=()=>o(424400),It=()=>o(538739);const bt=function({analyticsName:e,sections:t,searchInputPlaceholder:o,onComplete:n,noSearchResultsPlaceholder:a}){const i=(0,r().uB)(void 0,at);return(0,Ge().l)((()=>{const e=i.state.selection,[o]=t;if(o){const[t]=o.items;t&&e.add(t.key)}i.emit()})),(0,W.jsx)(S().A,{menuType:v().gu.Popup,header:(0,W.jsx)(jt,{analyticsName:e,sections:t,searchInputPlaceholder:o,store:i}),footer:(0,W.jsx)(At,{sections:t,onComplete:n,store:i}),width:280,maxHeight:350,children:(0,W.jsx)(wt,{sections:t,noSearchResultsPlaceholder:a,analyticsName:e,store:i})})};function jt({analyticsName:e,sections:t,searchInputPlaceholder:o,store:a}){const i=(0,s().v3)(),l=(0,n.useCallback)((()=>function(e,t,o){const{selection:n}=o.state;n.clear(),o.emit(),F().aq(e,{integration_name:t})}(i,e,a)),[i,e,a]),c=(0,n.useCallback)((()=>function(e,t,o,n){const{selection:a}=n.state;for(const i of t)for(const e of i.items)a.add(e.key);n.emit(),F().V(e,{integration_name:o})}(i,t,e,a)),[i,t,e,a]),d=(0,r().K8)((()=>a.state.searchQuery),[a]),p=Boolean(d);return(0,W.jsxs)(j().A,{isInput:!0,desktopStyle:{paddingBottom:2},children:[(0,W.jsx)(ot().Ay,{focus:!0,focusAfterAnimation:!0,value:d,onChange:e=>{a.setState({...a.state,searchQuery:e.target.value})},placeholder:o}),(0,W.jsx)(St().Ay,{isTokenTitle:!0,style:{marginTop:2},title:(0,W.jsxs)("div",{style:{marginInlineStart:-3},children:[(0,W.jsx)(He().p,{colorPalette:"gray",size:"xs",onClick:c,disabled:p,disabledFeedback:!0,children:(0,W.jsx)(_().sA,{id:"importPopup.selectAll",defaultMessage:"Select all"})}),(0,W.jsx)(It().A,{disabled:p}),(0,W.jsx)(He().p,{colorPalette:"gray",size:"xs",onClick:l,disabled:p,disabledFeedback:!0,children:(0,W.jsx)(_().sA,{id:"importPopup.deselectAll",defaultMessage:"Deselect all"})})]})})]})}function At({sections:e,onComplete:t,store:o}){const a=(0,n.useCallback)((()=>function(e,t,o){const{selection:n}=o.state,a=ht().Bq(e.map((e=>e.items))),i=[];n.forEach((e=>{const t=a.find((t=>t.key===e));t&&i.push(t)})),t(i)}(e,t,o)),[e,t,o]),i=0===(0,r().K8)((()=>o.state.selection.size),[o]);return(0,W.jsx)(j().A,{topBorder:!0,desktopStyle:{paddingTop:8,paddingBottom:8},children:(0,W.jsx)(St().Ay,{title:(0,W.jsx)(qe().A,{colorPalette:"blue",disabled:i,onClick:a,children:(0,W.jsx)(_().sA,{id:"integrationImportPopup.importButton.label",defaultMessage:"Import"})})})})}function wt({sections:e,noSearchResultsPlaceholder:t,analyticsName:o,store:n}){const a=(0,s().v3)(),{searchQuery:i,selection:l}=(0,r().K8)((()=>{const{searchQuery:e,selection:t}=n.state;return{searchQuery:e,selection:t}}),[n]),c=e.map((e=>{const t=(0,et().Ay)(i,e.items,(t=>`${t.name} ${e.name}`));return{...e,items:t}})).filter((e=>e.items.length>0));if(0===c.length)return(0,W.jsx)(j().A,{children:(0,W.jsx)(Xe().u,{title:t})});const d=c.map((t=>({key:t.name,render:o=>(0,W.jsx)(j().A,{...o,title:e.length>1?t.name:void 0}),items:t.items.map((e=>{const t=()=>function(e,t,o,n){const{selection:a}=n.state;a.has(e.key)?(a.delete(e.key),F().VW(t,{integration_name:o})):(a.add(e.key),F().q5(t,{integration_name:o})),n.emit()}(e,a,o,n);return{key:e.key,render:o=>(0,W.jsx)(I().A,{...o,title:e.name,icon:(0,W.jsx)(Je().S,{checked:l.has(e.key),size:16,onClick:t}),right:void 0!==e.count&&(0,W.jsx)(Qe().A,{isSmall:!0,children:e.count})}),action:t}}))})));return(0,W.jsx)(b().A,{type:b().O.Vertical,initialFocus:void 0,sections:d})}const Ct=function({requestStore:e,analyticsFrom:t,evernoteResult:o,renderItemActionsButton:a,defaultActionButton:i,spaceStore:l,spaceViewStore:c,userSettingsStore:d,onComplete:p}){const u=(0,s().v3)(),g=(0,_().tz)(),f=(0,r().O$)(vt().A),v=(0,n.useCallback)((()=>async function(e,t,o){const{isFetchingNotebooks:n}=o;n&&await ge().p({environment:e,requestStore:t})}(u,e,f)),[u,e,f]),{userInfo:y}=o,{notebooksResponse:x,showLoader:S}=f,I=(null==x?void 0:x.notebooks)||[],b=ht().$z(I,(e=>e.stack||""));(0,w().Yb)((async()=>{f.linkingAccount||(await e.refresh(),re().V())}),[f.linkingAccount,e]);const j=Object.keys(b).map((e=>{const t=e||"Top-Level";return{key:t,name:t,items:(b[e]||[]).map((e=>({key:e.guid,name:e.title,count:e.noteCount})))}})),C={title:"Evernote",logo:A().A.images.import.evernotePng,shouldWrapCaption:!y,caption:y?y.name||y.username||y.email:g.formatMessage({id:"evernoteImportOption.actionsMenu.defaultCaption",defaultMessage:"Bring your notes and notebooks"}),actionButton:y&&S?(0,W.jsx)(h().k,{}):y?a(xt({intl:g,environment:u,requestStore:e,onImport:()=>Me().A.setState({open:!0})})):i,onClick:()=>{}};return(0,W.jsx)(m().A,{popupType:O().A.isMobile?m().z.SlideUp:m().z.Popup,buttonPopupStore:Me().A,onClick:v,render:()=>S?(0,W.jsx)(W.Fragment,{}):(0,W.jsx)(bt,{searchInputPlaceholder:g.formatMessage({id:"evernoteImportOption.search.placeholder",defaultMessage:"Search for a notebook…"}),noSearchResultsPlaceholder:g.formatMessage({id:"evernoteImportOption.search.noResultsPlaceholder",defaultMessage:"No notebooks"}),analyticsName:"evernote",sections:j,onComplete:e=>{!async function(e,t,o,n,a,i,s){const{notebooks:r}=e,l=r.filter((e=>Boolean(t.find((t=>t.key===e.guid))))),c=J().A.getOrCreateFlowId();F().Pd(s,{import_source:"evernote",count:t.length,flowId:c});const d=await he().U7({environment:s,spaceStore:o,spaceViewStore:n,userSettingsStore:a,notebooks:l,flowId:c});F().mM(s,{import_source:"evernote",data:{notebooks:l.map((e=>e.guid)),userId:s.currentUser.id,spaceId:(0,ft().e)(o.id)},flowId:c}),i(d,"evernote",c)}(x,e,l,c,d,p,u)}}),renderOrigin:({onClick:t})=>(0,W.jsx)($,{...C,onClick:async()=>{const o=J().A.getOrCreateFlowId();F().fJ(u,{import_source:"evernote",from:"settings_modal",userId:u.currentUser.id,spaceId:l.id,flowId:o}),y?t():await ge().J({environment:u,requestStore:e})}})})};var kt=()=>o(135168),Tt=()=>o(394888),Mt=()=>o(699143),Pt=()=>o(534177),_t=()=>o(943322),Bt=()=>o(10896);function Ft(){return(0,W.jsx)(Bt().h,{icon:_t().evernoteIcon,title:(0,W.jsx)(_().sA,{id:"evernoteImportV2.selectAccount.title",defaultMessage:"Import Evernote"}),description:(0,W.jsx)(_().sA,{id:"evernoteImportV2.selectAccount.description",defaultMessage:"Import your notes and notebooks into Notion"}),onClose:()=>Te.close({type:"canceled"}),showImportIntoNotionIconSection:!0,children:(0,W.jsx)("div",{children:"Evernote"})})}function Et(){return null}function Rt(e){const t=(0,r().O$)(Te);(0,n.useEffect)((()=>{if(t.isModalOpen){const t=(0,kt().f)(e.pageStore)||e.spaceStore;if(!t)return;const o=t.id;Te.setSpaceId(o),e.pageStore?Te.setParent(e.pageStore.id,"block"):Te.setParent(o,"space")}}),[t.isModalOpen,e.pageStore,e.spaceStore]);const o=(0,n.useCallback)((()=>{t.isModalOpen&&Te.close({type:"canceled"})}),[t]),a=(0,n.useMemo)((()=>t.isModalOpen?t.currentTab:void 0),[t]),i=(0,n.useCallback)((()=>{Te.close({type:"canceled"})}),[]),s=(0,n.useMemo)((()=>({width:{type:"fixed",length:500}})),[]);return a&&t.isModalOpen?(0,W.jsx)(Tt().s,{isOpen:!0,areaConstraint:s,onDismiss:o,onClosed:i,backgroundAppearance:"wash",render:({sizeRange:e})=>(0,W.jsx)(Mt().Y1,{style:e,children:(0,W.jsx)(Ot,{currentModalStep:a})})}):null}function Ot({currentModalStep:e}){if(!(0,r().K8)((()=>Te.state.isModalOpen),[]))return null;switch(e){case"selectAccount":return(0,W.jsx)(Ft,{});case"selectNotebooks":case"importSuccess":case"importFailure":return null;case"importInProgress":return(0,W.jsx)(Et,{});default:(0,Pt().HB)(e)}}var Lt=()=>o(31009),Dt=()=>o(397740),Vt=()=>o(91867);const zt=new(Re().A);const Nt=function({requestStore:e,renderItemActionsButton:t,spaceStore:o,spaceViewStore:a,pageStore:i,analyticsFrom:l,onComplete:c}){const d=(0,s().v3)(),p=(0,_().tz)(),{loading:u,areAccountsFetched:g,accountsResponse:f,selectedFileId:h}=(0,r().K8)((()=>{const{loading:e,areAccountsFetched:t,accountsResponse:o,selectedFileId:n}=Dt().A.state;return{loading:e,areAccountsFetched:t,accountsResponse:o,selectedFileId:n}}),[]),v=(0,r().K8)((()=>zt.state.open),[]),y=f.accounts,x=(0,n.useCallback)((async()=>{await Wt({environment:d,requestStore:e,areAccountsFetched:g,analyticsFrom:l,googleDriveResponse:f,pageStore:i,spaceStore:o,spaceViewStore:a,onComplete:c,selectedFileId:h})}),[d,e,g,l,i,c,a,o,f,h]),S={title:"Google Docs",logo:A().A.images.import.googleDocsPng,actionButton:y&&y.length>0&&t([{name:p.formatMessage({id:"googleDocImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another account"}),action:()=>async function(e){const{requestStore:t,spaceStore:o,spaceViewStore:n,environment:a,analyticsFrom:i,pageStore:s,onComplete:r}=e,l=J().A.getOrCreateFlowId();F()._$(a,{import_source:"googleDocs",data:{import_type:"api",status:"initiated"},flowId:l});const c=await Vt().W3(a);c?(F()._$(a,{import_source:"googleDocs",data:{import_type:"api",status:"success"},flowId:l}),await t.refresh(),ne().Ay.setState({...ne().Ay.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:void 0}),await Wt({environment:a,requestStore:t,areAccountsFetched:!1,analyticsFrom:i,googleDriveResponse:void 0,spaceStore:o,spaceViewStore:n,onComplete:r,pageStore:s})):F()._$(a,{import_source:"googleDocs",data:{import_type:"api",status:"failure"},flowId:l})}({environment:d,requestStore:e,analyticsFrom:l,pageStore:i,spaceStore:o,spaceViewStore:a,onComplete:c})},{name:p.formatMessage({id:"googleDocImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove All Accounts"}),action:()=>async function(e,t,o){if(!o||0===o.length)return;o.forEach((async e=>{await se().callApi({eventName:"disconnectDrive",environment:t,data:{googleUserId:e.accountId}})})),Dt().A.setState({...Dt().A.state,accountsResponse:{accounts:[]},loading:!1}),await e.refresh()}(e,d,y)}]),onClick:()=>{},caption:p.formatMessage({id:"googleDocsImportOption.actionsMenu.defaultCaption",defaultMessage:"Import your documents seamlessly"})},I={type:"drive",title:(0,W.jsx)(_().sA,{defaultMessage:"Browse Google Drive",id:"googleDriveBlock.mediaPicker.googleDriveTab.title"}),onSelect:async t=>await Ut({account:t,onComplete:c,requestStore:e,spaceStore:o,spaceViewStore:a,analyticsFrom:l,pageStore:i,environment:d,selectedFileId:h})};return(0,W.jsx)(m().A,{open:v,popupType:O().A.isMobile?m().z.SlideUp:m().z.Popup,buttonPopupStore:zt,onClick:x,onClose:()=>{Dt().A.setState({...Dt().A.state,selectedFileId:void 0})},render:()=>u?(0,W.jsx)(W.Fragment,{}):(0,W.jsx)(Lt().HR,{tab:I,accounts:y,type:Lt().aD.Docs}),renderOrigin:({onClick:e})=>(0,W.jsx)($,{...S,onClick:e})})};async function Ut(e){const{account:t,requestStore:o,spaceStore:n,spaceViewStore:a,environment:i,analyticsFrom:s,pageStore:r,onComplete:l,selectedFileId:c}=e;t&&t.token||await async function(e){const{requestStore:t,spaceStore:o,spaceViewStore:n,environment:a,analyticsFrom:i,pageStore:s,onComplete:r,selectedFileId:l}=e;await Vt().W3(a),await t.refresh(),await Wt({environment:a,requestStore:t,areAccountsFetched:!1,analyticsFrom:i,googleDriveResponse:void 0,spaceStore:o,spaceViewStore:n,onComplete:r,pageStore:s,selectedFileId:l})}({environment:i,requestStore:o,analyticsFrom:s,spaceStore:n,spaceViewStore:a,onComplete:l,pageStore:r,selectedFileId:c}),t&&t.token&&(c?await Ht({fileId:c,token:t.token,environment:i,spaceStore:n,spaceViewStore:a,analyticsFrom:s,onComplete:l,pageStore:r}):await(0,be().openGoogleDriveFilePicker)({environment:i,accessToken:t.token.accessToken,viewType:"documents",from:"import_google_doc",mimeType:"application/vnd.google-apps.document",callback:async e=>{await Ht({fileId:e,token:t.token,environment:i,spaceStore:n,spaceViewStore:a,analyticsFrom:s,onComplete:l,pageStore:r})}}),zt.setState({...zt.state,open:!1}))}async function Wt(e){const{requestStore:t,spaceStore:o,spaceViewStore:n,environment:a,analyticsFrom:i,pageStore:s,onComplete:r,googleDriveResponse:l,areAccountsFetched:c,selectedFileId:d}=e,p=J().A.getOrCreateFlowId();F().fJ(a,{import_source:"googleDocs",from:i,userId:a.currentUser.id,spaceId:o.id,flowId:p});let u=l;c||(Dt().A.setState({...Dt().A.state,loading:!0}),u=await Vt().QZ(a),u&&u.accounts&&Dt().A.setState({...Dt().A.state,accountsResponse:u,areAccountsFetched:!0,loading:!1}));const m=u&&1===u.accounts.length?u.accounts[0]:void 0;return m?await Ut({account:m,onComplete:r,requestStore:t,spaceStore:o,spaceViewStore:n,analyticsFrom:i,pageStore:s,environment:a,selectedFileId:d}):(zt.setState({...zt.state,open:!0}),await t.refresh()),u}async function Ht(e){const{fileId:t,token:o,environment:n,spaceStore:a,spaceViewStore:i,analyticsFrom:s,onComplete:r,pageStore:l}=e;if(!l)return;Dt().A.setState({...Dt().A.state,loading:!0});const c=J().A.getOrCreateFlowId();await he().ZB({environment:n,fileId:t,token:o,spaceStore:a,spaceViewStore:i,pageStore:l,analyticsFrom:s,flowId:c}).then((e=>{r(e,"googleDocs",c),e&&E().vH(n,{from:"import",type:"page",new_page_id:e.id,creating_block_id:e.id,parent_collection_id:e.getParentCollectionIdUpToTwoLevels()})})).catch((()=>{})),Dt().A.setState({...Dt().A.state,loading:!1,selectedFileId:void 0})}var qt=()=>o(405748);const Kt={whiteSpace:"pre-wrap"};function $t(e){const t=(0,_().tz)(),o=(0,r().O$)(_e().A),{environment:n,spaceStore:a,flowId:i}=e,s=t.formatMessage({id:"mondayAuthentication.emailHelpText",defaultMessage:"Email address of the Monday.com user importing the data"}),l=t.formatMessage({id:"mondayAuthentication.stepsToGetMondayAPIToken.captions",defaultMessage:"Click to learn how to get API token from Monday.com"});return(0,W.jsx)(ze().a,{open:o.showAuthPopup,innerStyle:{width:600,maxWidth:"calc(100vw - 100px)",overflow:"hidden",borderRadius:5,maxHeight:"90vh"},onDismiss:()=>{_e().A.setState({..._e().A.state,showAuthPopup:!1})},render:()=>(0,W.jsx)(Yt,{hidePopup:()=>{_e().A.setState({..._e().A.state,showAuthPopup:!1})},environment:n,title:(0,W.jsx)(_().sA,{id:"mondayAuthentication.titleMessage",defaultMessage:"Authentication details"}),email:(0,W.jsxs)(p().Ye,{style:{alignItems:"center",gap:2},children:[(0,W.jsx)(_().sA,{id:"mondayAuthentication.emailMessage",defaultMessage:"Email"}),(0,W.jsx)(x().m,{placement:"right",renderTooltip:()=>s,render:e=>(0,W.jsx)(g().A,{...e,ariaLabel:s,disableBackground:!0,icon:$e().infoCircleSmallIcon})})]}),APIToken:(0,W.jsxs)(p().Ye,{style:{alignItems:"center",gap:2},children:[(0,W.jsx)(_().sA,{id:"mondayAuthentication.apiTokenMessage",defaultMessage:"API token"}),(0,W.jsx)(x().m,{placement:"right",renderTooltip:()=>l,render:e=>(0,W.jsx)(g().A,{...e,ariaLabel:l,onClick:()=>{window.open("https://developer.monday.com/api-reference/docs/authentication#accessing-api-tokens","_blank")},icon:$e().infoCircleSmallIcon})})]}),flowId:i,spaceStore:a})})}function Yt({environment:e,title:t,email:o,APIToken:n,hidePopup:a,flowId:i,spaceStore:s}){const c=(0,r().O$)(_e().A),d=(0,l().IS)((()=>({title:{fontWeight:N().Wy.semibold},inputLabels:{fontSize:"14px",fontWeight:"400"}})),[]);return(0,W.jsx)(Ve().A,{debugName:"MondayImportOption",capture:!0,children:(0,W.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%",padding:20,width:"100%"},children:[(0,W.jsxs)("div",{style:{overflowY:"scroll"},children:[(0,W.jsxs)("div",{style:{marginBottom:24},children:[(0,W.jsx)("div",{style:d.title,children:t}),(0,W.jsx)(qt().W,{style:{marginInlineStart:-4}})]}),(0,W.jsxs)("div",{children:[(0,W.jsx)("label",{htmlFor:"email",style:{...d.inputLabels},children:o}),(0,W.jsx)(Ue().A,{id:"email",value:c.email,autoComplete:"off",autoCapitalize:"off",onChange:e=>{_e().A.setState({..._e().A.state,email:e.target.value})},showClearButton:!0,placeholder:"notion@acmelabs.com",inputElementAttributes:{minLength:4}}),(0,W.jsx)(Ne().A,{size:12,isHidden:!0}),(0,W.jsxs)("div",{children:[(0,W.jsx)("label",{htmlFor:"APIToken",style:{...d.inputLabels},children:n}),(0,W.jsx)(Ue().A,{id:"AccessToken",type:"password",value:c.APIToken,onChange:e=>{_e().A.setState({..._e().A.state,APIToken:e.target.value})},showClearButton:!0,placeholder:"Paste your token here",inputElementAttributes:{minLength:4}})]})]})]}),(0,W.jsxs)("div",{style:{flexGrow:0,flexShrink:0},children:[(0,W.jsx)(Ne().A,{size:24}),(0,W.jsx)(qe().A,{colorPalette:"blue",size:"lg",onClick:async()=>{await ve().Sq({environment:e,userEmail:c.email,APIToken:c.APIToken,flowId:i,spaceId:s.id}),a(),await ve().Jq({environment:e,spaceId:s.id}),ve().qf()},children:(0,W.jsx)(_().sA,{id:"mondayAuthentication.authenticateButton.label",defaultMessage:"Authenticate"})}),(0,W.jsx)(We().A,{size:"lg",style:{marginInlineStart:12},onClick:()=>{a()},children:(0,W.jsx)(_().sA,{id:"mondayAuthentication.cancelButton.label",defaultMessage:"Cancel"})})]})]})})}const Zt=function(e){const t=(0,r().O$)(_e().A),o=(0,r().O$)(J().A),{account:a,isLoadingMondayWorkspaces:i}=t,{spaceStore:l}=e,c=(0,s().v3)(),d=(0,_().tz)(),p=o.flowId||M().JW();(0,n.useEffect)((()=>{o.flowId||J().A.setState({flowId:p})}),[p,o]);const f={title:d.formatMessage({id:"mondayImportOption.mondayButton.title",defaultMessage:"Monday.com"}),logo:A().A.images.import.mondayPng,showNewBadge:!1,caption:a??d.formatMessage({id:"mondayImportOption.actionsMenu.defaultCaption",defaultMessage:"Migrate your workspaces and tasks"}),actionButton:a?(y=[{name:d.formatMessage({id:"mondayImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another account"}),action:()=>{_e().A.setState({..._e().A.state,showAuthPopup:!0})}},{name:d.formatMessage({id:"mondayImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove"}),action:()=>ve().pX({environment:c,spaceId:l.id})}],(0,W.jsx)(m().A,{popupType:u().nl.Popup,renderOrigin:e=>i?(0,W.jsx)(h().k,{}):(0,W.jsx)(g().A,{ariaLabel:d.formatMessage({id:"mondayImportOption.mondayButton.ariaLabel",defaultMessage:"Import from Monday.com button"}),icon:k().ellipsisSmallIcon,...e}),render:e=>{const t=y.map((({name:t,captionText:o,action:n})=>{const a={key:t,render:e=>(0,W.jsx)(Fe().A,{...e,title:t,caption:o,captionStyle:o?Kt:void 0}),action:()=>{n(),e.close()}};return a})),o={key:"section",render:e=>(0,W.jsx)(j().A,{...e}),items:t};return(0,W.jsx)(S().A,{menuType:v().gu.Popup,width:200,children:(0,W.jsx)(b().A,{type:b().O.Vertical,initialFocus:void 0,sections:[o]})})}})):void 0,onClick:()=>{}};var y;return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(m().A,{onClick:async()=>{F().fJ(c,{import_source:"monday",from:e.analyticsFrom,userId:c.currentUser.id,spaceId:l.id,flowId:p}),_e().A.resetImport(),a?(await ve().Jq({environment:c,spaceId:l.id}),ve().qf()):_e().A.setState({..._e().A.state,showAuthPopup:!0})},popupType:O().A.isMobile?m().z.SlideUp:m().z.Popup,buttonPopupStore:Oe,renderOrigin:({onClick:e})=>(0,W.jsx)($,{...f,onClick:e}),render:()=>null}),(0,W.jsx)($t,{environment:c,spaceStore:l,flowId:p})]})};var Gt=()=>o(675133),Jt=()=>o(416783),Qt=()=>o(940563),Xt=()=>o(995847),eo=()=>o(340498),to=()=>o(997769),oo=()=>o(182183),no=(o(16280),()=>o(295633)),ao=()=>o(179034),io=()=>o(319625);const so=(0,o(583835).Dv)("importQuip");class ro extends le().Store{getInitialState(){return{showAuthPopup:!1,email:void 0,spaceId:void 0,personalAccessToken:void 0,companyId:void 0,account:void 0,accountEmail:void 0,isFetchingAccount:!1,authResponse:void 0,invalidFields:[]}}resetImport(){const{account:e,accountEmail:t}=this.getState();this.setState({...this.getInitialState(),account:e,accountEmail:t})}}const lo=new ro;var co=()=>o(357625);const po=(0,_().YK)({importFailed:{id:"quipActions.importFailedError.message",defaultMessage:"Import failed"},importingFromQuipMessage:{id:"quipActions.importingFromQuip.loadingMessage",defaultMessage:"Importing from quip."}});async function uo(e){const{environment:t,spaceStore:o}=e;if(!t.currentUser.id)throw new Error("User does not exist");let n,a;re().m({message:po.importingFromQuipMessage}),lo.setState({...lo.state});try{const e=await se().callApi({eventName:"getQuipAccount",environment:t,data:{spaceId:o.id}});if("success"!==e.type)throw new Error("User account does not exist");n=e.data.email;const i=(0,co().UT)(t,so,{userId:t.currentUser.id,email:n,page:{spaceId:o.id}},{spaceIds:[]});for await(const t of i){if(t.error)throw t.error;t.value.isComplete||(t.value.rootPageId&&(a=t.value.rootPageId),re().m(t.value.status))}if(!a)throw new Error("No root page");re().V();return no().B.createChildStore(o,{id:a,table:ao().ev,spaceId:o.id})}catch(i){throw ie().f1(Gt().A.formatMessage(po.importFailed)),re().V(),new Error((0,io().A)(i).message)}}const mo={whiteSpace:"pre-wrap"},go=(0,_().YK)({authenticationFailed:{id:"quipActions.authenticationFailed.message",defaultMessage:"Authentication Failed (Please check user details)"},disconnectFailed:{id:"quipActions.disconnectFailed.message",defaultMessage:"Disconnect Account Failed"},headerTitle:{id:"quipActions.header.title",defaultMessage:"Import from Quip"},importCta:{id:"quipActions.importCta",defaultMessage:"Import"}});function fo(){return(0,l().IS)((()=>({title:{fontWeight:N().Wy.semibold},inputLabels:{fontSize:N().J.UISmall.desktop,fontWeight:N().Wy.semibold,font:"SF Pro",lineHeight:N().K_.UISmall.desktop,color:B().Tj.text.tertiary},placeHolder:{font:"SF Pro",fontWeight:N().Wy.regular,fontSize:N().J.UIRegular.desktop,lineHeight:N().K_.UISmall.desktop},helpText:{textAlign:"center",marginTop:"5px",lineHeight:"15px",fontSize:12,color:B().Tj.text.tertiary},inputBox:{width:"100%",height:28,padding:4,gap:4},captionText:{font:"SF Pro",fontWeight:N().Wy.regular,lineHeight:N().K_.UISmall.desktop,fontSize:N().J.UISmall.desktop,color:B().Tj.text.tertiary},spinner:{width:"100%",height:"100%",backgroundColor:B().Tj.modalUnderlayBackground,position:"absolute",top:0,insetInlineStart:0},wrapper:{paddingTop:20,paddingInlineEnd:14,paddingBottom:10,paddingInlineStart:14,height:"100%",display:"flex",flexDirection:"column"},header:{fontWeight:N().Wy.medium,fontSize:17,textAlign:"center",marginTop:8},description:{fontWeight:N().Wy.regular,color:B().Tj.text.secondary,fontSize:N().J.UIRegular.desktop,maxHeight:72,textAlign:"center",padding:"0px 68px",marginBottom:24},icon:{height:40,width:40},iconGroup:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gridColumnGap:9,marginBottom:9},arrowRight:{opacity:.4,fontWeight:N().Wy.bold,padding:3},notionLogo:{height:40,width:40,color:B().Tj.icon.primary},closeButton:{position:"absolute",top:14,insetInlineEnd:14,zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:B().Tj.buttonHoveredBackground,width:20,height:20},closeButtonHover:{background:B().Tj.buttonPressedBackground},closeButtonIcon:{width:eo().Ev.xs,height:eo().Ev.xs,fill:B().Tj.text.secondary},headerWrapper:{marginBottom:18},invalidInput:{boxShadow:B().Tj.inputRedFocusRing},buttonItem:{color:B().Tj.text.secondary}})),[])}function ho(e){const t=(0,r().O$)(lo),o=fo(),{isFetchingAccount:n}=t,{environment:a,spaceStore:i,onComplete:s}=e;return(0,W.jsx)(ze().a,{open:t.showAuthPopup,innerStyle:{width:450,height:"fit-content",overflow:"scroll",borderRadius:5,maxHeight:675,minHeight:300,padding:6},onDismiss:()=>{lo.setState({...lo.state,invalidFields:[],showAuthPopup:!1,personalAccessToken:"",email:""})},render:()=>n?(0,W.jsx)(vo,{loading:t.isFetchingAccount}):(0,W.jsxs)("div",{style:o.wrapper,children:[(0,W.jsx)(xo,{handleModalClose:()=>{lo.setState({...lo.state,showAuthPopup:!1})}}),(0,W.jsx)(yo,{email:(0,W.jsx)(p().Ye,{style:{alignItems:"center",gap:2},children:(0,W.jsx)(_().sA,{id:"quipAuthentication.emailMessage",defaultMessage:"Email"})}),personalAccessToken:(0,W.jsx)(p().Ye,{style:{alignItems:"center",gap:2},children:(0,W.jsx)(_().sA,{id:"quipAuthentication.personalAccessTokenMessage",defaultMessage:"Personal Access Token"})})}),(0,W.jsx)(So,{children:(0,W.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,W.jsx)(qe().A,{colorPalette:"blue",onClick:async()=>{await async function(e){const{environment:t,email:o,personalAccessToken:n,spaceStore:a,companyId:i,account:s}=e,r=function(e){const{email:t,personalAccessToken:o}=e,n=[];t&&to().t6(t,"email")||n.push("email");o||n.push("personalAccessToken");return n}({email:o,personalAccessToken:n});if(r.length)return void lo.setState({...lo.state,showAuthPopup:!0,isFetchingAccount:!1,invalidFields:r});if(s){if(!(await jo({environment:t,spaceStore:a})))return}const l=await async function(e){const{environment:t,email:o,personalAccessToken:n,spaceId:a,companyId:i}=e;if(lo.setState({...lo.state,isFetchingAccount:!0}),!(t.currentUser.id&&o&&a&&n))return;const s=await se().callApi({eventName:"authenticateQuipUser",environment:t,data:{userId:t.currentUser.id,email:o,personalAccessToken:n,spaceId:a,companyId:i}});return s&&"failed"!==s.type?s.data:void 0}({environment:t,email:o,personalAccessToken:n,spaceId:a.id,companyId:i});void 0===l?(ie().rG({message:Gt().A.formatMessage(go.authenticationFailed)}),lo.setState({...lo.state,showAuthPopup:!0,isFetchingAccount:!1})):lo.setState({...lo.state,showAuthPopup:!1,isFetchingAccount:!1})}({environment:a,email:t.email,spaceStore:i,personalAccessToken:t.personalAccessToken,companyId:t.companyId,account:t.account});const e=await uo({environment:a,spaceStore:i});s(e,"quip")},children:(0,W.jsx)(_().sA,{...go.importCta})})})})]})})}function vo(e){const t=fo();return(0,W.jsx)(W.Fragment,{children:e.loading?(0,W.jsx)("div",{style:t.spinner,children:(0,W.jsx)(h().A,{style:{position:"absolute",top:"50%",insetInlineStart:"50%"}})}):void 0})}function yo({email:e,personalAccessToken:t}){const o=(0,r().O$)(lo),n=fo();return(0,W.jsx)(Ve().A,{debugName:"QuipImportOption",capture:!0,children:(0,W.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%",width:"100%"},children:(0,W.jsx)("div",{style:{overflowY:"scroll"},children:(0,W.jsxs)("div",{style:{padding:2},children:[(0,W.jsxs)("div",{children:[(0,W.jsx)("label",{htmlFor:"email",style:{...n.inputLabels},children:e}),(0,W.jsx)(Ne().A,{size:8,isHidden:!0}),(0,W.jsx)(Ue().A,{id:"email",value:o.email,autoComplete:"off",autoCapitalize:"off",onChange:e=>{lo.setState({...lo.state,email:e.target.value,invalidFields:[]})},showClearButton:!0,placeholder:"notion@acmelabs.com",style:{...n.inputBox,...o.invalidFields.includes("email")&&n.invalidInput}})]}),(0,W.jsx)(Ne().A,{size:14,isHidden:!0}),(0,W.jsxs)("div",{children:[(0,W.jsx)("label",{htmlFor:"personalAccessToken",style:{...n.inputLabels},children:t}),(0,W.jsx)(Ne().A,{size:8,isHidden:!0}),(0,W.jsx)(Ue().A,{id:"personalAccessToken",type:"password",value:o.personalAccessToken,showClearButton:!0,onChange:e=>{lo.setState({...lo.state,personalAccessToken:e.target.value,invalidFields:[]})},placeholder:"Paste your token here",inputElementAttributes:{minLength:4},style:{...n.inputBox,...o.invalidFields.includes("personalAccessToken")&&n.invalidInput}}),(0,W.jsx)(Ne().A,{size:8,isHidden:!0}),(0,W.jsx)("div",{style:{...n.captionText,marginBottom:18},children:(0,W.jsx)(_().sA,{id:"quipAuthentication.stepsToGetPersonalAccessToken",defaultMessage:"<getapitokenlink>Get Personal Access Token</getapitokenlink>",values:{getapitokenlink:(...e)=>(0,W.jsx)(Jt().V,{external:!0,href:"https://quip.com/dev/token",onClick:()=>{},children:e})}})})]})]})})})})}function xo({handleModalClose:e,caption:t,title:o}){const n=(0,_().tz)(),a=fo(),i=o||go.headerTitle;return(0,W.jsxs)("div",{style:a.headerWrapper,children:[(0,W.jsx)(g().A,{ariaLabel:n.formatMessage({id:"quipImportOption.header.closeButton.ariaLabel",defaultMessage:"Close"}),onClick:e,style:a.closeButton,hoveredStyle:a.closeButtonHover,icon:Xt().xMarkSmallIcon,iconStyle:a.closeButtonIcon}),(0,W.jsxs)("div",{style:a.iconGroup,children:[(0,W.jsx)("img",{style:a.icon,src:A().A.images.import.quipPng,alt:"Quip Icon"}),(0,W.jsx)(z().I,{icon:Qt().arrowStraightRightIcon,style:a.arrowRight}),(0,oo().notionTintableIcon)(a.notionLogo)]}),(0,W.jsx)("div",{style:a.header,children:(0,W.jsx)(_().sA,{...i})}),t]})}function So(e){return(0,W.jsx)("div",{children:e.children})}const Io=function(e){const t=(0,r().O$)(J().A),o=(0,r().O$)(lo),{spaceStore:a,onComplete:i}=e,{account:l,authResponse:c,accountEmail:d}=o,p=(0,s().v3)(),f=(0,_().tz)(),h=fo(),y=(0,n.useCallback)((async()=>{await async function(e){const{environment:t,spaceStore:o,account:n,authResponse:a}=e;if(n)lo.setState({...lo.state,showAuthPopup:!1,personalAccessToken:void 0,email:void 0,companyId:void 0});else{lo.setState({...lo.state,isFetchingAccount:!0});let e=a;void 0===e&&(e=await async function(e){const{environment:t,spaceId:o}=e;let n={account:"",email:""};try{const e=await se().callApi({eventName:"getQuipAccount",environment:t,data:{spaceId:o}});"success"===e.type&&(n=e.data)}catch(a){}finally{return n}}({environment:t,spaceId:o.id})),e&&""!==e.account?lo.setState({...lo.state,showAuthPopup:!1,personalAccessToken:void 0,email:void 0,companyId:void 0,account:e.account,accountEmail:e.email}):lo.setState({...lo.state,isFetchingAccount:!1,showAuthPopup:!0})}}({environment:p,account:l,spaceStore:a,authResponse:c})}),[p,l,a,c]),x=t.flowId||M().JW();(0,n.useEffect)((()=>{t.flowId||J().A.setState({flowId:x})}),[x,t]);const w={title:f.formatMessage({id:"quipImportOption.quipButton.title",defaultMessage:"Quip"}),logo:A().A.images.import.quipPng,caption:l??f.formatMessage({id:"quipImportOption.actionsMenu.defaultCaption",defaultMessage:"Import your collaborative documents"}),actionButton:l?(C=[{name:f.formatMessage({id:"quipImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another account"}),action:()=>{bo({})}},{name:f.formatMessage({id:"quipImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove account"}),action:async()=>{await jo({environment:p,spaceStore:a})}}],(0,W.jsx)(m().A,{popupType:u().nl.Popup,renderOrigin:e=>(0,W.jsx)(g().A,{ariaLabel:f.formatMessage({id:"quipImportOption.quipButton.ariaLabel",defaultMessage:"Import from Quip.com button"}),icon:k().ellipsisSmallIcon,...e}),render:e=>{const t=C.map((({name:t,captionText:o,action:n})=>{const a={key:t,render:e=>(0,W.jsx)(Fe().A,{...e,title:t,caption:o,captionStyle:o?mo:void 0}),action:()=>{n(),e.close()}};return a})),o={key:"section",render:e=>(0,W.jsx)(j().A,{...e}),items:t};return(0,W.jsx)(S().A,{menuType:v().gu.Popup,width:200,children:(0,W.jsx)(b().A,{type:b().O.Vertical,initialFocus:void 0,sections:[o]})})}})):void 0,onClick:()=>{}};var C;return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(m().A,{onClick:y,popupType:O().A.isMobile?m().z.SlideUp:m().z.Popup,renderOrigin:({onClick:e})=>(0,W.jsx)($,{...w,onClick:e}),render:()=>l?(0,W.jsxs)(n.Fragment,{children:[(0,W.jsx)(j().A,{children:(0,W.jsx)(I().A,{title:(0,W.jsx)(_().sA,{defaultMessage:"Import from {email}",id:"quipImportOption.menuItem.email.label",values:{email:d}}),onClick:async()=>{const e=await uo({environment:p,spaceStore:a});i(e,"quip")},focused:!1})}),(0,W.jsx)(j().A,{topBorder:!0,children:(0,W.jsx)(I().A,{title:(0,W.jsx)(_().sA,{defaultMessage:"Connect another account",id:"quipImportOption.menuItem.connectAnotherQuipAccount.label"}),onClick:()=>bo({}),style:h.buttonItem,focused:!1})})]}):null}),(0,W.jsx)(ho,{environment:p,spaceStore:a,flowId:x,onComplete:i})]})};function bo(e){lo.setState({...lo.state,isFetchingAccount:!1,showAuthPopup:!0,personalAccessToken:void 0,email:void 0,companyId:void 0})}async function jo(e){const{environment:t,spaceStore:o}=e,n=await async function(e){const{environment:t,spaceId:o}=e,n=await se().callApi({eventName:"disconnectQuipAccount",environment:t,data:{spaceId:o}});if(n&&"failed"!==n.type)return n.data}({environment:t,spaceId:o.id});return void 0===n?(ie().rG({message:Gt().A.formatMessage(go.disconnectFailed)}),!1):(lo.setState({...lo.state,account:void 0,accountEmail:void 0}),!0)}const Ao=function({requestStore:e,analyticsFrom:t,trelloResult:o,renderItemActionsButton:a,spaceStore:i,spaceViewStore:l,onComplete:c}){const d=(0,s().v3)(),p=(0,_().tz)(),{boardsResponse:u,showLoader:g,isFetchingBoards:f}=(0,r().K8)((()=>{const{boardsResponse:e,showLoader:t,isFetchingBoards:o}=Be().A.state;return{boardsResponse:e,showLoader:t,isFetchingBoards:o}}),[]),v=(0,n.useCallback)((()=>async function(e,t,o,n){const a=J().A.getOrCreateFlowId();F().fJ(e,{import_source:"trello",from:o,flowId:a}),n&&await ye()._(e,t).then((()=>{Pe().A.setState({open:!0})})).catch((()=>{Be().A.setState({...Be().A.state,isFetchingBoards:!0,showLoader:!1}),Pe().A.setState({open:!1})}))}(d,e,t,f)),[d,e,t,f]),{account:y}=o,x=u.boards,S={key:"default",name:p.formatMessage({id:"trelloImportOption.boardProperty.defaultName",defaultMessage:"Boards"}),items:x.map((e=>({key:e.id,name:e.name})))},I={title:"Trello",logo:A().A.images.import.trelloPng,caption:y??p.formatMessage({id:"trelloImportOption.actionsMenu.defaultCaption",defaultMessage:"Move over your boards and cards"}),actionButton:y&&g?(0,W.jsx)(h().k,{}):y&&a([{name:p.formatMessage({id:"trelloImportOption.actionsMenu.import",defaultMessage:"Import"}),action:()=>Pe().A.setState({open:!0})},{name:p.formatMessage({id:"trelloImportOption.actionsMenu.connectAnotherAccount",defaultMessage:"Connect another account"}),action:()=>wo(e,d)},{name:p.formatMessage({id:"trelloImportOption.actionsMenu.removeIntegration",defaultMessage:"Remove"}),action:()=>async function(e,t){await se().callApi({eventName:"disconnectTrello",environment:t,data:{}}),Be().A.setState({boardsResponse:{boards:[]},isFetchingBoards:!0,showLoader:!1}),await e.refresh(),F().kO(t,{integration_name:"trello"})}(e,d)}]),onClick:()=>{}};return(0,W.jsx)(m().A,{popupType:O().A.isMobile?m().z.SlideUp:m().z.Popup,buttonPopupStore:Pe().A,onClick:v,render:()=>g?(0,W.jsx)(W.Fragment,{}):(0,W.jsx)(bt,{searchInputPlaceholder:p.formatMessage({id:"trelloImportOption.search.placeholder",defaultMessage:"Search for a board…"}),noSearchResultsPlaceholder:p.formatMessage({id:"trelloImportOption.search.noResultsPlaceholder",defaultMessage:"No boards found."}),analyticsName:"trello",sections:[S],onComplete:e=>async function(e,t,o,n,a,i){const{boards:s}=e,r=s.filter((e=>Boolean(t.find((t=>t.key===e.id))))),l=J().A.getOrCreateFlowId();F().Pd(i,{import_source:"trello",count:t.length,flowId:l});const c=await he().MW({environment:i,spaceStore:o,spaceViewStore:n,boards:r,flowId:l});F().mM(i,{import_source:"trello",data:{notebooks:r.map((e=>e.id)),userId:i.currentUser.id,spaceId:(0,ft().e)(o.id)},flowId:l}),a(c,"trello",l)}(u,e,i,l,c,d)}),renderOrigin:({onClick:t})=>(0,W.jsx)($,{...I,onClick:y?t:()=>wo(e,d)})})};async function wo(e,t){await ye().P({environment:t,requestStore:e})}var Co=()=>o(555012);const ko=(0,_().YK)({learnAboutImport:{id:"importOptions.helpButton.tooltip",defaultMessage:"Learn about how to import"},moreActions:{id:"importOptions.actionsButton.ariaLabel",defaultMessage:"More actions"}}),To={display:"flex",alignItems:"center",justifyContent:"center",minHeight:240,width:"100%",overflow:"hidden"},Mo=["csv","pdf","markdown","html","word"],Po=["asana","confluence","trello","workflowy","evernote","jira","monday","quip","googleDoc"];function _o({analyticsFrom:e,spaceStore:t,onComplete:o,spaceViewStore:a,userSettingsStore:l,pageStore:p}){const u=(0,s().v3)(),[m,g]=(0,n.useState)(!1),f=(0,r().uB)(void 0,d().A),v=(0,r().uB)(void 0,d().A),y=(0,r().uB)(void 0,d().A),x=(0,r().uB)(void 0,d().A),S=(0,r().uB)(void 0,d().A),I=(0,r().O$)(c().e),b=(0,r().K8)((()=>ne().Ay.getState().defaultSubtab),[]),j=(0,n.useCallback)((e=>{v.refresh=e.confluence,y.refresh=e.evernote,S.refresh=e.googleDoc,f.refresh=e.jira,x.refresh=e.trello}),[v,y,S,f,x]),A=(0,r().K8)((()=>Lo()),[]),w=(0,i().X)("enable_file_importer_v2"),C=(0,i().X)("use_evernote_import_v2"),k=(0,n.useCallback)((n=>n?(m||(g(!0),Eo({defaultSubtab:b,pageStore:p,spaceStore:t,spaceViewStore:a,trelloRequestStore:x,evernoteRequestStore:y,confluenceRequestStore:v,googleDocRequestStore:S,result:n,environment:u,onComplete:o,analyticsFrom:e,flowId:A,isFileImporterV2Enabled:w,isEvernoteImportV2Enabled:C})),ne().Ay.setState({...ne().Ay.state,defaultSubtab:void 0}),(0,W.jsx)("div",{style:To,children:(0,W.jsx)(Zo,{analyticsFrom:e,onComplete:o,spaceStore:t,spaceViewStore:a,userSettingsStore:l,pageStore:p,trelloRequestStore:x,evernoteRequestStore:y,confluenceRequestStore:v,jiraRequestStore:f,googleDocRequestStore:S,result:n})})):(0,W.jsx)("div",{style:"onboarding"===e?{}:To,children:(0,W.jsx)(h().k,{})})),[e,C,w,v,u,y,A,S,f,o,p,b,t,a,x,l,m]);return I?(0,W.jsx)(Uo,{spaceStore:t,setRefreshers:j,renderChildren:k}):(0,W.jsx)("div",{style:{...To,fontSize:14,color:B().Tj.text.secondary},children:(0,W.jsx)(_().sA,{id:"importOptions.offlineErrorMessage",defaultMessage:"Please go online to import."})})}function Bo({analyticsFrom:e,spaceStore:t,onComplete:o,spaceViewStore:n,userSettingsStore:a,pageStore:l}){const p=(0,s().v3)(),u=(0,r().uB)(void 0,d().A),m=(0,r().uB)(void 0,d().A),g=(0,r().uB)(void 0,d().A),f=(0,r().uB)(void 0,d().A),v=(0,r().uB)(void 0,d().A),y=(0,r().uB)(void 0,d().A),x=(0,r().uB)(void 0,d().A),S=(0,r().O$)(c().e),I=(0,r().K8)((()=>ne().Ay.getState().defaultSubtab),[]),b=(0,r().K8)((()=>Lo()),[]),j=(0,i().X)("enable_file_importer_v2"),A=(0,i().X)("use_evernote_import_v2");return S?(0,W.jsx)(Wo,{spaceStore:t,trelloRequestStore:y,asanaRequestStore:v,evernoteRequestStore:f,confluenceRequestStore:g,mondayRequestStore:m,jiraRequestStore:u,googleDocRequestStore:x,renderChildren:i=>i?(Eo({defaultSubtab:I,pageStore:l,spaceStore:t,spaceViewStore:n,trelloRequestStore:y,evernoteRequestStore:f,confluenceRequestStore:g,googleDocRequestStore:x,result:i,environment:p,onComplete:o,analyticsFrom:e,flowId:b,isFileImporterV2Enabled:j,isEvernoteImportV2Enabled:A}),ne().Ay.setState({...ne().Ay.state,defaultSubtab:void 0}),(0,W.jsx)("div",{style:To,children:(0,W.jsx)(Zo,{analyticsFrom:e,onComplete:o,spaceStore:t,spaceViewStore:n,userSettingsStore:a,pageStore:l,trelloRequestStore:y,evernoteRequestStore:f,confluenceRequestStore:g,jiraRequestStore:u,googleDocRequestStore:x,result:i})})):(0,W.jsx)("div",{style:"onboarding"===e?{}:To,children:(0,W.jsx)(h().k,{})})}):(0,W.jsx)("div",{style:{...To,fontSize:14,color:B().Tj.text.secondary},children:(0,W.jsx)(_().sA,{id:"importOptions.offlineErrorMessage",defaultMessage:"Please go online to import."})})}const Fo=function(e){return(0,i().X)("use_new_import_options")?(0,W.jsx)(_o,{...e}):(0,W.jsx)(Bo,{...e})};function Eo({defaultSubtab:e,environment:t,pageStore:o,spaceStore:n,spaceViewStore:i,trelloRequestStore:s,evernoteRequestStore:r,confluenceRequestStore:l,googleDocRequestStore:c,result:d,onComplete:p,analyticsFrom:u,flowId:m,isFileImporterV2Enabled:g,isEvernoteImportV2Enabled:f}){if(e){if(!P().fF.includes(e)||"googleDocs"===e&&d.googleDocResult.isGoogleDocImporterEnabled||"csv"===e&&(0,Se().v)())switch(e){case"trello":!function(e,t,o,n){const a=o.account;a?ye()._(e,t).then((()=>{Pe().A.setState({open:!0})})).catch((()=>{Be().A.setState({...Be().A.state,isFetchingBoards:!0,showLoader:!1}),Pe().A.setState({open:!1})})):ye().P({environment:e,requestStore:t}).then((()=>{})).catch((()=>{}))}(t,s,d.trelloResult);break;case"evernote":!function(e,t,o,n,a){const{userInfo:i}=o;i?a?Te.open({analyticsFrom:n}):ge().p({environment:e,requestStore:t}).then((()=>{Me().A.setState({open:!0})})).catch((()=>{})):ge().J({environment:e,requestStore:t,openNotebooksPopupAfterAuth:!a}).then((()=>{})).catch((()=>{}))}(t,r,d.evernoteResult,u,f);break;case"monday":!function(e,t,o,n){t.user?ve().Jq({environment:e,spaceId:o}).then((()=>{_e().A.setState({..._e().A.state,currentTab:"selectData",isModalOpen:!0})})).catch((()=>{})):_e().A.setState({..._e().A.state,showAuthPopup:!0})}(t,d.mondayResult,n.id);break;case"confluenceApi":!function(e,t,o,n,a){const{account:i}=t;ne().Ay.setState({...ne().Ay.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:void 0}),i?ue({environment:e,requestStore:n,spaceId:o}).then((e=>{null!=e&&e.account&&pe().A.setState({open:!0})})).catch((()=>{de.setState({...de.state,[o]:{...de.state[o],showLoader:!1}})})):de.setState({...de.state,[o]:{...de.state[o],open:!0}})}(t,d.confluenceResult,n.id,l);break;case"asana":!function(e,t,o){const{account:n}=t;n?ae().xd({environment:e}).then((()=>{Ce().Z.setState({...Ce().Z.state,isModalOpen:!0})})).catch((()=>{Ce().Z.setState({...Ce().Z.state,isAccountLinkingInProgress:!1,isModalOpen:!1})})):ae().x3({environment:e,flowId:M().JW()}).then((()=>{})).catch((()=>{}))}(t,d.asanaResult);break;case"jira":!function(e,t,o){const{account:n}=t;if(!n)return;const i=Q().Ay.getState(),s=Q().Ay.createNewFlowId();n.length?(Q().Ay.setState({...i,type:"teamspace-selection",open:!0}),(0,a().u)({environment:e,event:{eventName:"external_sync_teamspace_selection",eventProperties:{integration:"jira",actionType:"teamspace_modal_render",flowId:s}}})):(Q().Ay.setState({...i,type:"auth",open:!0}),(0,a().u)({environment:e,event:{eventName:"external_sync_auth",eventProperties:{integration:"jira",actionType:"admin_auth_render",flowId:s}}}));ne().Ay.setState(ne().Ay.getInitialState())}(t,d.jiraResult);break;case"googleDocs":!function(e){const{requestStore:t,spaceStore:o,spaceViewStore:n,environment:a,analyticsFrom:i,pageStore:s,onComplete:r,areAccountsFetched:l,googleDriveResponse:c,selectedFileId:d}=e;Wt({environment:a,requestStore:t,areAccountsFetched:l,analyticsFrom:i,googleDriveResponse:c,pageStore:s,spaceStore:o,spaceViewStore:n,selectedFileId:d,onComplete:r}).then((()=>{})).catch((()=>{}))}({environment:t,requestStore:c,analyticsFrom:u,pageStore:o,onComplete:p,spaceStore:n,spaceViewStore:i,areAccountsFetched:d.googleDocResult.areAccountsFetched,googleDriveResponse:d.googleDocResult.accountsResponse,selectedFileId:d.googleDocResult.selectedFileId});break;case"csv":me().Z({importType:"import",spaceId:n.id,parentId:(null==o?void 0:o.id)??"",parentTable:"block",analyticsFrom:u,importLocation:"new"})}else if(g){const t=function(e){return e?!(t=e)||"html"!==t&&"markdown"!==t&&"csv"!==t&&"docx"!==t&&"googleDocs"!==t&&"dropbox"!==t&&"quip"!==t&&"workflowy"!==t&&"confluence"!==t&&"genericImporter"!==t&&"pdf"!==t?"genericImporter":e:"genericImporter";var t}(e);fe().y({fileType:t,spaceId:n.id,analyticsFrom:u,pageStore:o,importLocation:null!=o&&o.id?{type:"block",pointer:o.pointer}:void 0})}else!function({environment:e,pageStore:t,spaceStore:o,spaceViewStore:n,uploadType:a,onComplete:i,analyticsFrom:s,flowId:r}){if(!t)return;he().un({environment:e,pageStore:t,spaceStore:o,spaceViewStore:n,analyticsFrom:s,uploadType:a,flowId:r}).then((t=>{t&&(E().vH(e,{from:"import",type:"page",new_page_id:t.id,creating_block_id:t.id,parent_collection_id:t.getParentCollectionIdUpToTwoLevels()}),i(t,a,r))})).catch((()=>{}))}({pageStore:o,spaceStore:n,spaceViewStore:i,environment:t,uploadType:e,onComplete:p,analyticsFrom:u,flowId:m});"googleDocs"!==e&&F().fJ(t,{import_source:"confluenceApi"===e?"confluence":e,from:u,flowId:m,userId:t.currentUser.id,spaceId:n.id})}}function Ro({url:e,helpButtonMessage:t,helpMessageWidth:o,disableBackground:n,marginLeft:a}){const i=(0,_().tz)();return(0,W.jsx)(x().m,{renderTooltip:()=>t??i.formatMessage(ko.learnAboutImport),style:{width:o??"max-content"},textWrap:!0,render:t=>(0,W.jsx)(f().N,{external:!0,href:e,style:{marginInlineStart:a??"auto"},...t,children:(0,W.jsx)(g().A,{icon:T().questionMarkCircleSmallIcon,disableBackground:n??!1,ariaLabel:i.formatMessage(ko.learnAboutImport)})})})}function Oo({actions:e}){const t=(0,_().tz)();return(0,W.jsx)(m().A,{popupType:u().nl.Popup,renderOrigin:e=>(0,W.jsx)(g().A,{icon:k().ellipsisSmallIcon,ariaLabel:t.formatMessage(ko.moreActions),...e}),render:t=>{const o={key:"section",render:e=>(0,W.jsx)(j().A,{...e}),items:e.map((({name:e,action:o})=>({key:e,render:t=>(0,W.jsx)(I().A,{...t,title:e}),action:()=>{o(),t.close()}})))};return(0,W.jsx)(S().A,{menuType:v().gu.Popup,width:200,children:(0,W.jsx)(b().A,{type:b().O.Vertical,initialFocus:void 0,sections:[o]})})}})}function Lo(){return J().A.state.flowId||M().JW()}async function Do(e,t,o,n,a,i,s,r){F().fJ(i,{import_source:e,from:t,import_type:"file",flowId:r});const l=await he().un({environment:i,pageStore:s,spaceStore:o,spaceViewStore:n,analyticsFrom:t,uploadType:e,flowId:r});l&&(E().vH(i,{from:"import",type:"page",new_page_id:l.id,creating_block_id:l.id,parent_collection_id:l.getParentCollectionIdUpToTwoLevels()}),a(l,e,r))}function Vo({flowId:e,analyticsFrom:t,spaceStore:o,spaceViewStore:n,onComplete:a,pageStore:i}){const r=(0,s().v3)();return(0,W.jsx)($,{title:"Confluence",logo:A().A.images.import.confluencePng,onClick:()=>Do("confluence",t,o,n,a,r,i,e),actionButton:(0,W.jsx)(Ro,{url:(0,oe().x)("guides.importConfluence")})})}function zo({analyticsFrom:e,spaceStore:t,spaceViewStore:o,onComplete:a,pageStore:i}){const l=(0,s().v3)(),c=(0,_().tz)(),d=(0,r().K8)((()=>Lo()),[]),p=(0,n.useCallback)((()=>{F().fJ(l,{import_source:"csv",from:e,import_type:"file",flowId:d,userId:l.currentUser.id,spaceId:t.id}),me().Z({importType:"import",spaceId:t.id,parentId:(null==i?void 0:i.id)??"",parentTable:null!=i&&i.id?"block":"space",analyticsFrom:e})}),[t.id,null==i?void 0:i.id,e,l,d]);return(0,W.jsx)($,{title:"CSV",logo:A().A.images.import.csvPng,onClick:p,whiteIconBackground:!0,caption:c.formatMessage({id:"importOptions.csv.defaultCaption",defaultMessage:"Import structured data from spreadsheets"})})}function No({analyticsFrom:e,spaceStore:t,spaceViewStore:o,onComplete:n,pageStore:a}){const i=(0,s().v3)(),r=(0,_().tz)();return(0,W.jsx)(x().m,{placement:"bottom",render:s=>(0,W.jsx)($,{tooltipEvents:s,title:"CSV",logo:A().A.images.import.csvPng,onClick:()=>Do("csv",e,t,o,n,i,a,void 0),whiteIconBackground:!0,caption:r.formatMessage({id:"importOptions.csv.defaultCaption",defaultMessage:"Import structured data from spreadsheets"})}),renderTooltip:()=>(0,W.jsx)(_().sA,{id:"importOptions.csvImport.tooltip",defaultMessage:"Ensure first row in the CSV is the header"})})}function Uo(e){const{renderChildren:t,spaceStore:o,setRefreshers:a}=e,i=(0,s().v3)(),l=o.id,[c,d]=(0,w().Yb)((()=>(0,je().L)(i)),[i]),[p,u]=(0,w().Yb)((()=>(0,je().fG)(i,l)),[i,l]),[m,g]=(0,w().Yb)((()=>(0,je().PV)(i)),[i]),[f,h]=(0,w().Yb)((()=>(0,je().wc)()),[]),[v,y]=(0,w().Yb)((()=>(0,je().D1)(i,l)),[i,l]),[x,S]=(0,w().Yb)((()=>(0,je().$d)(i,l)),[i,l]),[I,b]=(0,w().Yb)((()=>(0,je().p1)(i)),[i]);(0,n.useEffect)((()=>{a({confluence:async()=>{await u()},evernote:async()=>{await g()},googleDoc:async()=>{await h()},jira:async()=>{await y()},trello:async()=>{await b()}})}),[a,d,u,g,h,y,S,b]);return(0,r().K8)((()=>t(I.value&&c.value&&m.value&&p.value&&x.value&&v.value&&f.value?{trelloResult:I.value,asanaResult:c.value,evernoteResult:m.value,confluenceResult:p.value,mondayResult:x.value,jiraResult:v.value,googleDocResult:f.value}:void 0)),[t,I,c,m,p,x,v,f])}function Wo({renderChildren:e,spaceStore:t,trelloRequestStore:o,asanaRequestStore:n,evernoteRequestStore:a,confluenceRequestStore:i,mondayRequestStore:r,jiraRequestStore:l,googleDocRequestStore:c}){const d=(0,s().v3)();return(0,W.jsx)(R().A,{request:d,performRequest:je().p1,requestStore:o,render:(o,s)=>(0,W.jsx)(R().A,{request:d,performRequest:je().L,requestStore:n,render:(o,n)=>(0,W.jsx)(R().A,{request:d,performRequest:je().PV,requestStore:a,render:(o,a)=>(0,W.jsx)(R().A,{request:d,performRequest:()=>(0,je().fG)(d,t.id),requestStore:i,render:(o,i)=>(0,W.jsx)(R().A,{request:d,performRequest:()=>(0,je().$d)(d,t.id),requestStore:r,render:(o,r)=>(0,W.jsx)(R().A,{request:d,performRequest:()=>(0,je().D1)(d,t.id),requestStore:l,render:(t,o)=>(0,W.jsx)(R().A,{request:d,performRequest:je().wc,requestStore:c,render:(t,l)=>e(s&&n&&a&&i&&r&&o&&l?{trelloResult:s,asanaResult:n,evernoteResult:a,confluenceResult:i,mondayResult:r,jiraResult:o,googleDocResult:l}:void 0)})})})})})})})}function Ho({analyticsFrom:e,onComplete:t,spaceStore:o,spaceViewStore:n,userSettingsStore:a,googleDocRequestStore:i,pageStore:s}){return(0,W.jsx)(Nt,{renderItemActionsButton:e=>(0,W.jsx)(Oo,{actions:e}),onComplete:t,requestStore:i,spaceStore:o,spaceViewStore:n,userSettingsStore:a,pageStore:s,analyticsFrom:e})}function qo({trelloResult:e,analyticsFrom:t,onComplete:o,spaceStore:n,spaceViewStore:a,userSettingsStore:i,trelloRequestStore:s}){return(0,W.jsx)(Ao,{trelloResult:e,analyticsFrom:t,renderItemActionsButton:e=>(0,W.jsx)(Oo,{actions:e}),onComplete:o,requestStore:s,spaceStore:n,spaceViewStore:a,userSettingsStore:i})}function Ko({confluenceResult:e,flowId:t,analyticsFrom:o,onComplete:n,spaceStore:a,spaceViewStore:i,userSettingsStore:r,pageStore:l,confluenceRequestStore:c}){const d=(0,s().v3)();return(0,W.jsx)(pt,{confluenceResult:e,analyticsFrom:o,flowId:t,renderItemActionsButton:e=>(0,W.jsx)(Oo,{actions:e}),onComplete:n,spaceStore:a,requestStore:c,spaceViewStore:i,userSettingsStore:r,handleFileUploadClick:(e,t)=>Do(e,o,a,i,n,d,l,t),handleApiImportClick:(e,t)=>function(e,t,o,n,a,i){F().fJ(a,{import_source:e,from:n,import_type:"api",flowId:i})}(e,0,0,o,d,t)})}function $o({evernoteResult:e,onComplete:t,spaceStore:o,spaceViewStore:n,userSettingsStore:a,evernoteRequestStore:i}){return(0,W.jsx)(Ct,{evernoteResult:e,analyticsFrom:"onboarding",renderItemActionsButton:e=>(0,W.jsx)(Oo,{actions:e}),onComplete:t,requestStore:i,spaceStore:o,spaceViewStore:n,userSettingsStore:a})}function Yo({analyticsFrom:e,environment:t,evernoteRequestStore:o,evernoteResult:n}){const a=(0,_().tz)(),{userInfo:i}=n,s=i?i.name||i.username||i.email:a.formatMessage({id:"evernoteImportOption.actionsMenu.defaultCaption",defaultMessage:"Bring your notes and notebooks"}),r=i?(0,W.jsx)(Oo,{actions:xt({intl:a,environment:t,requestStore:o,onImport:()=>Te.open({analyticsFrom:e}),openNotebooksPopupAfterAuth:!1})}):void 0;return(0,W.jsx)($,{title:"Evernote",logo:A().A.images.import.evernotePng,shouldWrapCaption:!i,caption:s,actionButton:r,onClick:()=>{i?Te.open({analyticsFrom:e}):ge().J({environment:t,requestStore:o,openNotebooksPopupAfterAuth:!1}).then((()=>{})).catch((()=>{}))}})}function Zo({result:e,analyticsFrom:t,onComplete:o,spaceStore:a,spaceViewStore:c,userSettingsStore:d,pageStore:u,trelloRequestStore:m,evernoteRequestStore:g,confluenceRequestStore:f,jiraRequestStore:h,googleDocRequestStore:v}){const x=(0,s().v3)(),S=(0,r().K8)((()=>Lo()),[]),I=(0,r().K8)((()=>(0,xe().n0)(x)),[x]),b=(0,r().K8)((()=>(0,Ae().c)()),[]),j=(0,r().K8)((()=>we().default.checkGate({gateName:"quip_importer"})),[]),w=(0,r().K8)((()=>(0,Ie().LB)()),[]),k=(0,r().K8)((()=>(0,Ie().jw)()),[]),T=(0,r().K8)((()=>(0,V().p)(a)),[a]),M=(0,r().K8)((()=>(0,ee().yX)()),[])&&!T,P=(0,r().K8)((()=>(0,te().s)()),[]),B=(0,r().K8)((()=>(0,be().V)()),[]),F=(0,r().K8)((()=>(0,Se().v)()),[]),E=(0,i().X)("use_evernote_import_v2"),R=(0,_().tz)(),O=(0,l().IS)((()=>({importTypeSection:{display:"flex",flexDirection:"column",gap:6}})),[]),L=(0,i().X)("enable_file_importer_v2"),D=(0,r().K8)((()=>({asana:(0,W.jsx)(De,{spaceStore:a}),confluence:I?(0,W.jsx)(Ko,{analyticsFrom:t,onComplete:o,spaceStore:a,spaceViewStore:c,userSettingsStore:d,pageStore:u,confluenceRequestStore:f,confluenceResult:e.confluenceResult,flowId:S}):(0,W.jsx)(Vo,{analyticsFrom:t,spaceStore:a,spaceViewStore:c,onComplete:o,pageStore:u,flowId:S}),googleDoc:B?(0,W.jsx)(Ho,{onComplete:o,spaceStore:a,spaceViewStore:c,userSettingsStore:d,googleDocRequestStore:v,pageStore:u,analyticsFrom:t}):(0,W.jsx)($,{title:"Google Docs",caption:R.formatMessage({id:"googleDocsImportOption.actionsMenu.defaultCaption",defaultMessage:"Import your documents seamlessly"}),logo:A().A.images.import.googleDocsPng,actionButton:(0,W.jsx)(Ro,{url:(0,oe().x)("guides.importGoogleDocs")}),onClick:()=>Do("googleDocs",t,a,c,o,x,u,S)}),pdf:P&&(0,W.jsx)($,{title:"PDF",showBetaBadge:!1,logo:A().A.images.import.pdfSvg,whiteIconBackground:!0,caption:R.formatMessage({id:"importOptions.pdf.defaultCaption",defaultMessage:"Extract content from PDF documents"}),onClick:()=>{L?fe().y({fileType:"pdf",spaceId:a.id,analyticsFrom:t,pageStore:u}):Do("pdf",t,a,c,o,x,u,S)}}),csv:F?(0,W.jsx)(zo,{analyticsFrom:t,spaceStore:a,spaceViewStore:c,onComplete:o,pageStore:u}):(0,W.jsx)(No,{analyticsFrom:t,spaceStore:a,spaceViewStore:c,onComplete:o,pageStore:u}),markdown:(0,W.jsx)($,{title:(0,W.jsx)(_().sA,{id:"importOptions.textMarkdown.title",defaultMessage:"Text & Markdown"}),logo:A().A.images.import.textPng,whiteIconBackground:!0,caption:R.formatMessage({id:"importOptions.textMarkdown.defaultCaption",defaultMessage:"Import plain text and formatted notes"}),onClick:()=>{L?fe().y({fileType:"markdown",spaceId:a.id,analyticsFrom:t,pageStore:u}):Do("markdown",t,a,c,o,x,u,S)}}),html:(0,W.jsx)($,{title:"HTML",logo:A().A.images.import.htmlPng,whiteIconBackground:!0,caption:R.formatMessage({id:"importOptions.html.defaultCaption",defaultMessage:"Import web pages and structured content"}),onClick:()=>{L?fe().y({fileType:"html",spaceId:a.id,analyticsFrom:t,pageStore:u}):Do("html",t,a,c,o,x,u,S)}}),word:(0,W.jsx)($,{title:"Word",logo:A().A.images.import.wordPng,caption:R.formatMessage({id:"importOptions.word.defaultCaption",defaultMessage:"Bring your Word documents into Notion"}),onClick:()=>{L?fe().y({fileType:"docx",spaceId:a.id,analyticsFrom:t,pageStore:u}):Do("docx",t,a,c,o,x,u,S)}}),dropbox:(0,W.jsx)($,{title:"Dropbox Paper",logo:A().A.images.import.dropboxPaperPng,onClick:()=>Do("dropbox",t,a,c,o,x,u,S),caption:R.formatMessage({id:"dropboxImportOption.actionsMenu.defaultCaption",defaultMessage:"Bring in your stored files and docs"})}),trello:(0,W.jsx)(qo,{analyticsFrom:t,onComplete:o,spaceStore:a,spaceViewStore:c,userSettingsStore:d,trelloRequestStore:m,trelloResult:e.trelloResult}),evernote:E?(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(Yo,{analyticsFrom:t,environment:x,evernoteRequestStore:g,evernoteResult:e.evernoteResult}),(0,W.jsx)(Rt,{pageStore:u,spaceStore:a,spaceViewStore:c,analyticsFrom:t})]}):(0,W.jsx)($o,{onComplete:o,spaceStore:a,spaceViewStore:c,userSettingsStore:d,evernoteRequestStore:g,evernoteResult:e.evernoteResult}),monday:b&&(0,W.jsx)(Zt,{spaceStore:a,analyticsFrom:t,flowId:S}),quip:j?(0,W.jsx)(Io,{spaceStore:a,analyticsFrom:t,flowId:S,onComplete:o}):(0,W.jsx)($,{title:"Quip",logo:A().A.images.import.quipPng,onClick:()=>Do("quip",t,a,c,o,x,u,S),caption:R.formatMessage({id:"quipImportOption.actionsMenu.defaultCaption",defaultMessage:"Import your collaborative documents"})}),workflowy:(0,W.jsx)($,{title:"Workflowy",logo:A().A.images.import.workflowyPng,caption:R.formatMessage({id:"workflowyImportOption.actionsMenu.defaultCaption",defaultMessage:"Import your outlines and lists"}),onClick:()=>Do("workflowy",t,a,c,o,x,u,S)}),generic:w&&!k&&(0,W.jsx)($,{title:(0,W.jsx)(_().sA,{id:"importOptions.genericImporter.title",defaultMessage:"Universal import"}),icon:C().arrowLineDownFillIcon,onClick:()=>Do("genericImporter",t,a,c,o,x,u,S),actionButton:(0,W.jsx)(Ro,{url:"",helpButtonMessage:(0,W.jsx)(_().sA,{id:"importOptions.universalImport.tooltip",defaultMessage:"Import any ZIP file that contains text, Markdown, CSV, HTML, and other files"}),helpMessageWidth:240,disableBackground:!0})}),jira:!M&&(0,W.jsx)(X,{flowId:S,spaceStore:a,showNewBadge:!1,showSyncBadge:!1,requestStore:h,jiraResult:e.jiraResult,renderItemActionsButton:e=>(0,W.jsx)(Oo,{actions:e}),analyticsFrom:t}),zip:(0,W.jsx)($,{title:"Zip",logo:A().A.images.import.zipPng,caption:R.formatMessage({id:"importOptions.zip.defaultCaption",defaultMessage:"Import zip file to pages"}),onClick:()=>(0,Co().Q)(x,"genericImporter",o,t,"zip"),tooltip:(0,W.jsx)(Ro,{url:"",helpButtonMessage:(0,W.jsx)(_().sA,{id:"importOptions.zipImport.tooltip",defaultMessage:"Upload a zip file containing DOCX, MD, HTML, CSV, EPUB files and we will convert them into pages"}),helpMessageWidth:240,disableBackground:!0,marginLeft:"unset"})})})),[t,f,g,S,v,h,a,c,m,d,F,w,B,b,P,j,k,M,x,R,o,u,e,I,E,L]),z=[(0,n.useMemo)((()=>(0,W.jsxs)(p().wt,{gap:20,children:[(0,W.jsxs)("div",{style:O.importTypeSection,children:[(0,W.jsx)(y().D,{styleKey:"bodyMedium",colorVariant:"primary",children:(0,W.jsx)(_().sA,{id:"importOptions.fileBasedImports.title",defaultMessage:"File-based imports"})}),(0,W.jsx)(y().D,{styleKey:"captionRegular",colorVariant:"secondary",children:(0,W.jsx)(_().sA,{id:"importOptions.fileBasedImports.description",defaultMessage:"Import DOCX, CSV, PDF, Text, Markdown, HTML or EPUB file to convert to pages."})})]}),(0,W.jsx)(Go,{children:Mo.map((e=>{const t=D[e];return t||null}))})]})),[O,D]),(0,n.useMemo)((()=>(0,W.jsxs)(p().wt,{gap:20,children:[(0,W.jsxs)("div",{style:O.importTypeSection,children:[(0,W.jsx)(y().D,{styleKey:"bodyMedium",colorVariant:"primary",children:(0,W.jsx)(_().sA,{id:"importOptions.thirdPartyImports.title",defaultMessage:"3rd-party imports"})}),(0,W.jsx)(y().D,{styleKey:"captionRegular",colorVariant:"secondary",children:(0,W.jsx)(_().sA,{id:"importOptions.thirdPartyImports.description",defaultMessage:"Migrate content from 3rd-party apps"})})]}),(0,W.jsx)(Go,{children:Po.map((e=>{const t=D[e];return t||null}))})]})),[D,O])];return(0,W.jsx)("div",{style:{width:"100%",display:"flex",flexDirection:"column",gap:48},children:z.map((e=>e))})}function Go({children:e}){return(0,W.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",overflow:"hidden",gridAutoRows:"auto",gap:"4px 20px",padding:2,width:"100%"},children:e})}},641934:(e,t,o)=>{o.d(t,{H:()=>i});o(898992),o(354520);var n=()=>o(245241),a=()=>o(691865);function i(e){const{intentBasedGrouping:t,localResults:o,serverResults:i}=e,s=(0,a().y)({localResults:o,serverResults:i})??[],r=s.filter((e=>e.sources.includes(n().Ni.ElasticsearchUniqueID))),l=s.filter((e=>!e.sources.includes(n().Ni.ElasticsearchUniqueID)));return t?{type:"intent-based-grouping",sections:{uniqueIdSearchResults:r,jumpBackInSearchResults:l.filter((e=>e.sources.includes(n().Ni.Local))),serverOnlySearchResults:l.filter((e=>!e.sources.includes(n().Ni.Local)))},allSearchResults:s}:r.length>0?{type:"unique-id",sections:{uniqueIdSearchResults:r,nonUniqueIdSearchResults:l},allSearchResults:s}:{type:"all",sections:{allSearchResults:s},allSearchResults:s}}},649495:(e,t,o)=>{o.d(t,{U:()=>f,W:()=>g});o(296540);var n=()=>o(242422),a=()=>o(484714),i=()=>o(590526),s=()=>o(996332),r=()=>o(807449),l=()=>o(26697),c=()=>o(357927),d=()=>o(69708),p=()=>o(981084),u=()=>o(804319),m=o(474848);function g(e){const{styles:t}=e,o=(0,a().v3)(),g=(0,d().tz)(),h=(0,i().K8)((()=>{const{RouterStore:e}=o;return e.state.route.name}),[o]),v=(0,i().K8)((()=>n().default.getEligibleGroup({experimentId:"inapp_marketplace_entrypoint_copy",defaultGroup:"control"})),[]),y=(0,p().U)("marketplace_sidebar_option_click");return(0,m.jsx)(l().m,{renderTooltip:()=>g.formatMessage(f.templatesMwnTooltip),originGap:6,placement:"right",render:e=>(0,m.jsx)(s().Q,{style:t.sidebarItemButtonStyle,hoveredStyle:t.buttonHoveredStyle,onClick:y,...e,children:(0,m.jsx)(u().A,{left:(0,m.jsx)(r().I,{icon:c().templatesIcon,colorVariant:"secondary",size:"lg"}),isBottomItem:!0,style:"gallery"===h?t.sidebarItemActiveStyle:{},children:"on"===v?g.formatMessage(f.marketplaceTitle):g.formatMessage(f.title)})})})}const f=(0,d().YK)({templatesMwnTooltip:{defaultMessage:"Find all the best templates and set-ups built by Notion’s community",id:"sidebar.openTemplatePickerButton.tooltip.mwn"},title:{defaultMessage:"Templates",id:"sidebar.openTemplatePickerButton"},marketplaceTitle:{defaultMessage:"Marketplace",id:"sidebar.openMarketplaceButton"}})},656894:(e,t,o)=>{o.d(t,{J:()=>a});o(898992),o(737550);var n=()=>o(850913);function a(e){const t=(0,n().u)(e);return Object.values(t).some((e=>Boolean(e)))}},660571:(e,t,o)=>{o.d(t,{e:()=>s});var n=()=>o(245241),a=()=>o(825972),i=()=>o(466088);function s(e){const{environment:t,input:o,spaceId:s,publicAccessPermissionAncestorBlockId:r,searchSessionId:l,searchSessionFlowNumber:c,source:d,forcedClusterPattern:p,searchExperimentOverrides:u,recentPagesForBoosting:m,forcedBlockIds:g,excludedBlockIds:f}=e,{query:h,limit:v,debug:y}=o;return(0,i().w)(t)||!s?r?{type:n().Vz.BlocksInAncestor,query:h.text.trim(),ancestorId:r,filters:h.filters,sort:h.sort,limit:v,source:d||"quick_find_public",debug:y,searchExperimentOverrides:u,searchSessionId:l,searchSessionFlowNumber:c,forcedClusterPattern:p,forcedBlockIds:g,excludedBlockIds:f}:void 0:{type:n().Vz.BlocksInSpace,query:h.text.trim(),spaceId:s,limit:v,filters:h.filters,sort:h.sort,source:d||"quick_find",debug:y,searchExperimentOverrides:u,searchSessionId:l,searchSessionFlowNumber:c,forcedClusterPattern:p,recentPagesForBoosting:(0,a().cs)(m),forcedBlockIds:g,excludedBlockIds:f}}},661291:(e,t,o)=>{o.d(t,{$Q:()=>i,hW:()=>a});o(16280);var n=()=>o(242422);function a(e){switch(e){case"browse-templates":return"navigate";case"create-page":case"create-database":case"create-meeting":return"create";case"custom":return"custom";default:throw new Error(`Unhandled shortcut action type: ${e}`)}}function i(){return"on"===n().default.getEligibleGroup({experimentId:"home_shortcut_actions",defaultGroup:"control"})}},668577:(e,t,o)=>{o.d(t,{Z:()=>n,o:()=>i});const n=100;class a extends(()=>o(757695))().Store{getInitialState(){return{stores:{}}}getStore(e){if(e)return this.state.stores[e]||(this.state.stores[e]=new(o(29923).R)({key:`emojiFrecency:${e}`,namespace:o(553737).Bq,important:!0,trackingType:"necessary"})),this.state.stores[e]}getEmojiFrecencyMap(e){const t=this.getStore(e);if(!t)return{};return t.state??{}}}const i=new a},680451:(e,t,o)=>{o.d(t,{R:()=>a});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.12 3.12 13.75 13.75",svg:(0,o(474848).jsx)("path",{d:"M3.125 5.25c0-1.174.951-2.125 2.125-2.125h9.5c1.174 0 2.125.951 2.125 2.125v9.5a2.125 2.125 0 0 1-2.125 2.125h-9.5a2.125 2.125 0 0 1-2.125-2.125zm2.125-.875a.875.875 0 0 0-.875.875v9.5c0 .483.392.875.875.875h9.5a.875.875 0 0 0 .875-.875v-9.5a.875.875 0 0 0-.875-.875z"})},a=(0,o(340498).wt)("square",n,"default")},686832:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,phoneIcon:()=>a});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.58 2.77 14.78 14.57",svg:(0,o(474848).jsx)("path",{d:"M4.84 3.093a1.34 1.34 0 0 1 1.881.158l2.52 2.96a1.524 1.524 0 0 1-.083 2.066l-1.22 1.22 2.715 2.717 1.221-1.221a1.525 1.525 0 0 1 2.066-.084l2.962 2.517a1.29 1.29 0 0 1 .16 1.805l-.559.678a3.94 3.94 0 0 1-3.447 1.414l-.16-.016A11.564 11.564 0 0 1 2.614 7.299 3.88 3.88 0 0 1 3.97 3.822zm.93.969a.09.09 0 0 0-.128-.011l-.869.729a2.63 2.63 0 0 0-.919 2.358 10.314 10.314 0 0 0 9.17 8.925l.16.017a2.7 2.7 0 0 0 2.355-.966l.558-.678a.04.04 0 0 0-.005-.057l-2.961-2.517a.275.275 0 0 0-.373.015l-1.663 1.663a.625.625 0 0 1-.884 0l-3.6-3.6a.625.625 0 0 1 0-.884l1.663-1.663a.275.275 0 0 0 .015-.373z"})},a=(0,o(340498).wt)("phone",n,"default")},691865:(e,t,o)=>{o.d(t,{y:()=>n});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577),o(581454);function n(e){const{localResults:t,serverResults:o}=e;if(t||o){if(t&&o){const e=new Set(t.map((e=>e.id)));return t.map((e=>{const t=(n=e.id,null==o?void 0:o.find((e=>e.id===n)));var n;const a=(null==(i=t)?void 0:i.originalPosition)??e.originalPosition;var i;const s=[...new Set([...e.badges??[],...(null==t?void 0:t.badges)??[]])];return{...e,originalPosition:a,serverEventProperties:(null==t?void 0:t.serverEventProperties)??e.serverEventProperties,sources:[...e.sources,...(r=t,(null==r?void 0:r.sources)??[])],badges:s};var r})).concat(o.filter((t=>!e.has(t.id))))}return t??o}}},712341:(e,t,o)=>{o.d(t,{Cx:()=>k,Dr:()=>R,If:()=>T,aZ:()=>E,n9:()=>O});var n=o.n(o(794148)),a=o(296540),i=()=>o(564884),s=()=>o(560533),r=()=>o(484714),l=()=>o(590526),c=()=>o(401497),d=()=>o(611648),p=()=>o(988083),u=()=>o(699143),m=()=>o(807449),g=()=>o(631524),f=()=>o(160432),h=()=>o(493552),v=()=>o(884189),y=()=>o(62900),x=()=>o(995847),S=()=>o(69708),I=()=>o(376254),b=()=>o(239924),j=()=>o(466934),A=()=>o(458097),w=()=>o(609819),C=o(474848);function k(e){const{sidebar:t,cornerButton:o,preview:n,featuresStep:i}=e,{isPhone:s}=(0,r().Y0)(),m=(0,r().v3)(),g=(0,c().IS)((()=>({scroller:{margin:"0 auto",width:"90%",maxWidth:"100%"}})),[]),f=(0,a.useRef)(null),h=(0,l().K8)((()=>p().A.keyboardHeight()),[]);return(0,a.useEffect)((()=>{h>0&&f.current&&(0,v().$)({element:f.current,environment:m})}),[h,m]),(0,C.jsxs)(C.Fragment,{children:[o,(0,C.jsx)(u().Y1,{direction:s?"vertical":"horizontal",height:"fill",padding:s?32:24,gap:s?28:24,style:{minHeight:s?"100vh":0},children:s?(0,C.jsxs)(I().H,{type:d().A.Y,style:g.scroller,children:[n?(0,C.jsx)(u().Y1,{width:"fill",height:450,padding:"60px 0 16px 0",style:{maxWidth:s?"100%":400,minHeight:`max(${i?"49vh":"54vh"}, 250px)`},children:n}):void 0,t?(0,C.jsx)(u().Y1,{width:"fill",height:320,gap:25,style:{flexShrink:0,maxWidth:s?"100%":400,minHeight:`max(${i?"51vh":"46vh"}, 250px)`},children:t}):void 0,(0,C.jsx)("div",{ref:f})]}):(0,C.jsxs)(C.Fragment,{children:[t?(0,C.jsx)(u().Y1,{width:320,height:"fill",padding:"60px 0 0 0",gap:25,style:{flexShrink:0},children:t}):void 0,n]})})]})}function T({children:e,overrides:t={hideCornerButton:!1},featuresStep:o}){const{isPhone:n}=(0,r().Y0)(),a=(0,c().IS)((()=>({sidebarFooter:{flexShrink:0,position:"relative",top:n?-16:void 0}})),[n]),i=(0,l().O$)(A().default);if(!i.open||!i.collectionTemplate)return null;const s=(0,C.jsx)(w().Z,{collectionTemplate:i.collectionTemplate,flowId:i.flowId},i.collectionTemplate.setupId);return(0,C.jsx)(k,{sidebar:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(u().Y1,{height:n?300:"fill",padding:2,children:e}),(0,C.jsx)(u().Y1,{style:a.sidebarFooter,children:(0,C.jsx)(P,{modalState:i})})]}),cornerButton:t.hideCornerButton?null:(0,C.jsx)(R,{modalState:i}),preview:s,featuresStep:o})}const M=!1;function P({modalState:e}){const t=(0,S().tz)(),{isPhone:o}=(0,r().Y0)(),{isOnFirstModalStep:n,isOnLastModalStep:a}=(0,l().K8)((()=>({isOnFirstModalStep:!(0,j().pp)(e,o),isOnLastModalStep:!(0,j().Rh)(e,o)})),[e,o]),i=(0,l().K8)((()=>{if(e.isSaving)return!1;const{setupGenerator:t}=e;return!t||(!e.isFollowUpInputFocused||!t.store.derivedUiStore.getState().canFollowUp)&&!t.store.state.isBusy}),[e]);if(!e.collectionTemplate)return null;const s=t.formatMessage({id:"workflowTemplatesOnboardingModalStep.getStarted",defaultMessage:"Get started"}),c=n&&a;return a?(0,C.jsx)(F,{disabled:!i,label:c?s:(0,C.jsx)(S().sA,{id:"workflowTemplatesOnboardingModalStep.done",defaultMessage:"Done"})}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(_,{disabled:!i,modalState:e,label:n?s:t.formatMessage({id:"workflowTemplatesOnboardingModalStep.continue",defaultMessage:"Continue"})}),M&&!c?(0,C.jsx)(B,{}):void 0]})}function _({modalState:e,label:t,isLoading:o,disabled:n,onClick:a}){const s=(0,c().IS)((()=>({button:{padding:10,width:"100%",height:32,borderRadius:8}})),[]),l=(0,r().v3)(),{isPhone:d}=(0,r().Y0)();return e.collectionTemplate?(0,C.jsx)(f().A,{colorPalette:"blue",style:s.button,isLoading:o,disabled:n,onClick:async()=>{A().default.update((e=>({...e,isSaving:!0})));const t=await(null==a?void 0:a());if(A().default.update((e=>({...e,isSaving:!1}))),!1===t)return;const o=(0,j().aO)(e,d);o>=0&&((0,i().u)({environment:l,event:{eventName:"workflow_template_onboarding_next_step",eventProperties:{next_step:(0,j().Wm)(e)[o],step:(0,j().hq)(e),...(0,j().gM)(e)}}}),A().default.update((e=>({...e,currentStepIndex:o}))))},children:t}):null}function B(){const e=(0,r().v3)(),t=(0,l().O$)(A().default);return n()(t.open,"Modal should always be open for this to render."),(0,C.jsx)(g().p,{colorPalette:"gray",style:{height:32,borderRadius:8,justifyContent:"center",marginTop:8},isLoading:t.isSaving,disabled:t.isSaving,onClick:()=>(0,b().createCollectionTemplateFromModalState)({environment:e,modalState:t}),children:(0,C.jsx)("span",{children:"Customize later"})})}function F(e){const{label:t,disabled:o}=e,i=(0,r().v3)(),s=(0,l().O$)(A().default);n()(s.open,"Modal should always be open for this to render.");const c=(0,a.useCallback)((()=>{(0,b().createCollectionTemplateFromModalState)({environment:i,modalState:s})}),[i,s]);return(0,C.jsx)(f().A,{colorPalette:"blue",style:{height:32,borderRadius:8},isLoading:s.isSaving,disabled:o,onClick:c,children:t})}function E({title:e,caption:t}){var o;const n=(0,l().O$)(A().default),a=n.open?null===(o=n.collectionTemplate)||void 0===o?void 0:o.value.targetCollection.name:void 0,i=(0,c().IS)((()=>({title:{whiteSpace:"pre-line",hangingPunctuation:"first",textWrap:"balance"}})),[]);return(0,C.jsx)("div",{style:{flexShrink:0},children:(0,C.jsxs)(u().Y1,{gap:4,children:[(0,C.jsx)(h().D,{styleKey:"titleLgSemibold",style:i.title,children:e??(0,C.jsx)(S().sA,{id:"workflowTemplatesOnboardingModal.customizeCollection",defaultMessage:"Customize {collectionName}",values:{collectionName:a}})}),t?(0,C.jsx)(h().D,{styleKey:"bodyRegular",colorVariant:"secondary",children:t}):null]})})}function R(e){const{modalState:t}=e;return 0===t.currentStepIndex?(0,C.jsx)(L,{}):(0,C.jsx)(D,{modalState:t})}function O(e){const{iconFn:t,onClick:o,style:n}=e,{isPhone:a}=(0,r().Y0)(),i=(0,r().v3)(),s=(0,l().K8)((()=>i.WindowSizeStore.isLandscape()),[i.WindowSizeStore]),d=(0,c().IS)((()=>({button:{position:"absolute",top:a&&!s?56:20,insetInlineStart:20,zIndex:1,height:26,paddingInlineStart:5,paddingInlineEnd:5,...n}})),[a,s,n]);return(0,C.jsx)(g().p,{onClick:o,style:d.button,children:(0,C.jsx)(m().I,{icon:t,size:a?"default":"sm",colorVariant:"secondary"})})}function L(){const e=(0,a.useContext)(s().e);return(0,C.jsx)(O,{iconFn:x().xMarkSmallIcon,onClick:()=>null==e?void 0:e()})}function D(e){const{modalState:t,style:o}=e,n=(0,r().v3)(),{isPhone:s}=(0,r().Y0)(),l=(0,a.useCallback)((()=>{const e=t.currentStepIndex,o=Math.max(0,t.currentStepIndex-1);(0,b().moveToPreviousOnboardingStep)(s),(0,i().u)({environment:n,event:{eventName:"workflow_template_onboarding_previous_step",eventProperties:{previous_step:(0,j().Wm)(t)[o],step:(0,j().Wm)(t)[e],...(0,j().gM)(t)}}})}),[n,t,s]);return t.collectionTemplate?(0,C.jsx)(O,{style:o,iconFn:y().arrowStraightLeftSmallIcon,onClick:l}):null}},713972:(e,t,o)=>{o.d(t,{Sq:()=>L,pX:()=>D,g3:()=>z,nM:()=>W,P0:()=>R,Jq:()=>V,Wh:()=>G,nP:()=>Z,$A:()=>X,TJ:()=>ee,i_:()=>U,oz:()=>J,$b:()=>E,qf:()=>O,dJ:()=>$,p7:()=>te,No:()=>N,Mi:()=>q});o(16280),o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(672577),o(430670),o(803949),o(581454);var n=()=>o(907258),a=()=>o(726637),i=()=>o(675133),s=()=>o(792057),r=()=>o(584262),l=()=>o(433337),c=()=>o(921940),d=()=>o(165358),p=()=>o(416845),u=()=>o(179034),m=()=>o(161479),g=()=>o(96689),f=()=>o(319625),h=()=>o(583835);const v=(0,h().Dv)("mondayFullImport"),y=(0,h().Dv)("parallelMondayImport");var x=()=>o(559926),S=()=>o(769864),I=()=>o(357625),b=()=>o(496414),j=()=>o(553003),A=()=>o(601734),w=()=>o(246766),C=()=>o(404141),k=()=>o(51781),T=()=>o(547149),M=()=>o(164367),P=()=>o(270858),_=()=>o(191227),B=()=>o(270948),F=()=>o(114282);const E=(0,o(69708).YK)({projectsAndTasksCountTooltip:{id:"mondayImport.importsTab.selectData.tooltipForProjectsAndTasksCount",defaultMessage:"Counts each item in the project board and each task board as a separate project"},boardsKeyWord:{id:"mondayImport.importsTab.selectData.boardsKeyWord",defaultMessage:" boards"},projectsKeyWord:{id:"mondayImport.importsTab.selectData.projectsKeyWord",defaultMessage:" projects"},projectsAndTasksExcludedToolTip:{id:"mondayImport.importsTab.selectData.tooltipForDisabledProjectsAndTasks",defaultMessage:"Project and task boards are excluded."},noBoardsTooltipMessage:{id:"mondayImport.importsTab.selectData.tooltipForDisabledFolderV2",defaultMessage:"This folder has no boards."},successfullyConnected:{id:"mondayActions.successfullyConnected.message",defaultMessage:"Successfully connected monday.com instance."},fullImport:{defaultMessage:"Full Import",id:"mondayImport.importsTab.chooseWorkspace.chooseImportType.fullImport"},fullImportDescription:{defaultMessage:"Import all Monday board types as Notion databases. Recommended for a full migration.",id:"mondayImport.importsTab.chooseWorkspace.chooseImportType.fullImport.description"},projectsAndTasks:{defaultMessage:"Projects & Tasks only",id:"mondayImport.importsTab.chooseWorkspace.chooseImportType.projectsAndTasks"},projectsAndTasksDescription:{defaultMessage:"Import project and task boards from Monday into Notion Projects. Recommended for Project management only.",id:"mondayImport.importsTab.chooseWorkspace.chooseImportType.projectsAndTasks.description"},newTeamspaceLabel:{id:"mondayImport.importsTab.selectData.newTeamspace",defaultMessage:"New teamspace"},privateSpaceLabel:{id:"mondayImport.importsTab.selectData.privateSpaceTitle",defaultMessage:"Private"},selectBoardsHeading:{id:"mondayImport.importsTab.chooseWorkspace.selectBoards",defaultMessage:"Choose boards to import"},selectWorkspaceV2:{id:"mondayImporter.selectData.selectWorkspacePlaceholder",defaultMessage:"Select a workspace"},chooseImportType:{id:"mondayImport.importsTab.chooseWorkspace.chooseImportType",defaultMessage:"Choose Import Type"},mapTeamspacesDescription:{id:"mondayImport.importsTab.chooseWorkspace.tabDescription",defaultMessage:"You can give each Monday folder a Notion teamspace to collaborate in."},searchWorkspaces:{id:"mondayImport.importsTab.chooseWorkspace.searchWorkspaces",defaultMessage:"Search workspaces..."},chooseWorkSpace:{id:"mondayImport.importsTab.chooseWorkspace.tabTitle",defaultMessage:"Choose Monday workspace"},chooseTeamspace:{id:"mondayImport.importsTab.selectData.searchTeamspacePlaceholder",defaultMessage:"Search for a teamspace"},excludeProjectsAndTasks:{id:"mondayImport.importsTab.selectData.excludeProjectsAndTasks",defaultMessage:"Exclude projects & tasks boards"},selectWorkSpaceV1:{id:"MondayImport.importsTab.selectData.tabTitle",defaultMessage:"Select Monday.com workspace"},backButton:{id:"mondayImport.selectData.backButtonText",defaultMessage:"Back"},creatingTemplate:{id:"importsTab.selectData.creatingTemplates",defaultMessage:"Creating templates"},nextButton:{id:"importsTab.selectData.nextButtonText",defaultMessage:"Next"}});function R(){return{ProjectsAndTasks:{title:E.projectsAndTasks,description:E.projectsAndTasksDescription},FullImport:{title:E.fullImport,description:E.fullImportDescription}}}function O(){B().A.setState({...B().A.state,isModalOpen:!0})}async function L(e){const{environment:t,userEmail:o,APIToken:n,flowId:a,spaceId:r}=e;if(x()._$(t,{import_source:"monday",data:{import_type:"api",status:"initiated"},flowId:a}),!t.currentUser.id||!o||!n)return s().rG({message:"Invalid details"}),void b().V();const l=await S().callApi({eventName:"authenticateMondayUser",environment:t,data:{userId:t.currentUser.id,spaceId:r,userEmail:o,APIToken:n}});"failed"===l.type?(x()._$(t,{import_source:"monday",data:{import_type:"api",status:"failure",error:l.error},flowId:a}),console.error(l.error),s().Qg(l)):(x()._$(t,{import_source:"monday",data:{import_type:"api",status:"success"},flowId:a}),B().A.setState({...B().A.state,account:o}),s().rG({message:i().A.formatMessage(E.successfullyConnected)})),b().V()}async function D(e){const{environment:t,spaceId:o}=e,n=await S().callApi({eventName:"disconnectMonday",environment:t,data:{spaceId:o}});"failed"===n.type?s().Qg(n):(x().kO(t,{integration_name:"monday.com"}),"success"===n.type&&B().A.setState({...B().A.state,account:void 0,workspaces:[]}))}async function V(e){const{environment:t,spaceId:o}=e;B().A.setState({...B().A.state,isLoadingMondayWorkspaces:!0});const n=await S().callApi({eventName:"getMondayWorkspaces",environment:t,data:{spaceId:o}});"success"===n.type&&B().A.setState({...B().A.state,workspaces:n.data.workspaces,isLoadingMondayWorkspaces:!1})}async function z(e){const{environment:t,spaceId:o,selectedWorkspace:n}=e;if(!o)return;B().A.setState({...B().A.state,isLoadingProjects:!0});const a=await S().callApi({eventName:"getMondayFoldersAndBoards",environment:t,data:{spaceId:o,selectedWorkspace:n}});"success"===a.type&&B().A.setState({...B().A.state,mondayFoldersAndBoards:a.data.mondayFoldersAndBoards,isLoadingProjects:!1})}function N({folderId:e,spaceId:t}){var o,n;const a=B().A.state.selectedProjectsAndTeamspaces;B().A.setState({...B().A.state,selectedProjectsAndTeamspaces:{...a,[e]:{projects:(null===(o=a[e])||void 0===o?void 0:o.projects)||[],notionTeamspaceId:t,isEntireFolderSelected:null===(n=a[e])||void 0===n?void 0:n.isEntireFolderSelected}}})}async function U(e){const{environment:t,spaceStore:o,currentSpaceViewStore:a,flowId:i}=e,{appTemplatesSetupActions:s,appConfigs:r}=await A().Aw.load(),c=B().A.state.selectedWorkspace;if(!c)return;B().A.setState({...B().A.state,templateCreationInProgress:!0});const p={},u={},g=[],f=new Set;try{for(const e in B().A.state.selectedProjectsAndTeamspaces){const n=B().A.state.selectedProjectsAndTeamspaces[e].projects;if(0===n.length)continue;let i;g.push(...n.map((e=>e.mondayProjectId)));const c=B().A.state.selectedProjectsAndTeamspaces[e],{notionTeamspaceId:d}=c;if(!d)continue;f.add(d);const m=(0,k().getTeamStore)({teamId:d,spaceStore:o});if(i=m||o,!p[d]){const{serverCommitResult:e,performResult:o}=T().createAndCommit({environment:t,perform:e=>{var o;const n=l().tP,c=null===(o=(0,j().B)(r(),n))||void 0===o?void 0:o.uri;if(!c)return;const d=r().find((e=>e.uri===c));if(null==d?void 0:d.presets.find((e=>e.uri===n))){return s.initializeApp({environment:t,spaceViewStore:a,appParentStore:i,appUri:c,presetUri:n,transaction:e,from:"monday_import"})}return[]},canUndo:!0,userAction:"importActions.importMonday"});p[d]=o,await e}u.hasOwnProperty(d)?u[d]=[...u[d],{mondayFolderId:e,projects:n}]:u[d]=[{mondayFolderId:e,projects:n}]}}catch(C){return void B().A.setState({...B().A.state,templateCreationInProgress:!1,currentTab:"failure"})}const h=[],v=n().default.state.sidebarSpaceViewStore;if(!v)return;const S=F().mD({environment:t,spaceStore:o,spaceViewStore:v,append:!0,mondayV2:(0,M().G)()});await S.deferred.promise;const b=S.pageId;B().A.setState({...B().A.state,loggerPageId:b});for(const[n,l]of Object.entries(u)){const e=p[n];e&&h.push({collectionViewBlocks:e.map((e=>({id:e.id,spaceId:(0,m().e)(o.id)}))),notionTeamSpaceId:n,mondayProjectsAndFolders:l})}x().Pd(t,{import_source:"monday",flowId:i,import_sub_type:"projectsAndTasksOnly"});const w=(0,I().UT)(t,y,{importParams:h,loggerPageId:b,spaceId:o.id,flowId:i,importId:P().R.getOrCreateImportId()},{spaceIds:[o.id]});B().A.setState({...B().A.state,templateCreationInProgress:!1,currentTab:"importingData"}),_().A.reset(),c&&function(e,t,o){try{x().mM(e,{import_source:"monday",data:t,flowId:o})}catch(n){d().log({level:"error",from:"mondayActions",type:"parallelMondayImport",error:{miscDataString:JSON.stringify({error:n,message:"Errored in tracking import_source_input event."})}})}}(t,{workspaceId:c,projects:g,numberOfTeamspacesUsed:f.size,userId:t.currentUser.id,spaceId:(0,m().e)(o.id)},i);for await(const n of w){if(!B().A.state.isModalOpen)break;if(n.error)return void B().A.setState({...B().A.state,currentTab:"failure"});"success"===n.taskStatus&&B().A.setState({...B().A.state,currentTab:"confirm",result:n.value.status,isComplete:!0})}}async function W(e){const{environment:t,spaceId:o,selectedWorkspace:n}=e;B().A.setState({...B().A.state,isLoadingHierarchy:!0,isLoadingBoards:!0});try{const e=await S().callApi({eventName:"getMondayFoldersWithHierarchy",environment:t,data:{spaceId:o,selectedWorkspace:n},headers:{}});if("success"===e.type){const a=e.data.mondayFoldersDetailsMap;let i,s={},r=1,l=!0,c=B().A.getState();for(;l&&c.selectedWorkspace===n&&"FullImport"===c.selectedImportType&&!c.templateCreationInProgress;){const e=await S().callApi({eventName:"getMondayBoards",environment:t,data:{spaceId:o,selectedWorkspace:n,page:r},headers:{}});if("success"!==e.type){H();break}i=e.data.mondayBoardsDetailsMap,s={...s,...i},l=e.data.hasMoreBoards;for(const[t,o]of Object.entries(i))a[o.folderId].boards.push(t);B().A.setState({...B().A.state,isLoadingHierarchy:!1,fetchedHierarchy:!0,mondayBoardsDetailsMap:s,mondayFoldersDetailsMap:a}),r++,c=B().A.getState()}B().A.setState({...B().A.state,isLoadingBoards:!1})}else H()}catch(a){H()}}function H(){B().A.setState({...B().A.state,isLoadingHierarchy:!1,isLoadingBoards:!1,fetchedHierarchy:!1})}function q({folderId:e,notionTeamspaceId:t,notionRootTableName:o}){B().A.setState({...B().A.state,selectedTeamspacesForFullImport:{...B().A.state.selectedTeamspacesForFullImport,[e]:{notionTeamspaceId:t,notionRootTableName:o}}})}function K(e){const{mondayFolderDetails:t,currentfolderId:o}=e,n=[],a=[o];for(;a.length>0;){const e=a.pop();if(!e)continue;const o=t[e];if(o&&o.subFolders)for(const t of o.subFolders)n.push(t),a.push(t)}return n}function $(e){const{excludeProjectsAndTasks:t,board:o}=e;return t&&("task"===o.boardType||"project"===o.boardType)}function Y(e){const{mondayFolderDetails:t,folderIds:o,excludeProjectsAndTasks:n,mondayBoardDetails:a}=e,i=[];for(;o.length>0;){const e=o.pop();if(!e)continue;const s=t[e];if(s&&s.boards)for(const t of s.boards)$({excludeProjectsAndTasks:n,board:a[t]})||i.push(t)}return i}function Z(e,t,o,n){return Y({folderIds:[e,...K({currentfolderId:e,mondayFolderDetails:t})],mondayFolderDetails:t,mondayBoardDetails:o,excludeProjectsAndTasks:n}).length}function G(e,t,o,n,a){const i=Y({folderIds:[e,...K({currentfolderId:e,mondayFolderDetails:o})],mondayFolderDetails:o,mondayBoardDetails:n,excludeProjectsAndTasks:a});let s=0;return i.forEach((e=>{t.has(e)&&(s+=1)})),s}async function J(e){const{environment:t,spaceStore:o,flowId:n,spaceViewStore:l}=e,d=B().A.state;if(!d.selectedWorkspace||!d.mondayFoldersDetailsMap)return;B().A.setState({...B().A.state,templateCreationInProgress:!0});const{selectedFolderIdsForFullImport:m,selectedBoardIdsForFullImport:h,mondayFoldersDetailsMap:y,mondayBoardsDetailsMap:S,excludeProjectsAndTasks:b}=d,j=Object.entries(d.mondayFoldersDetailsMap).flatMap((([e,t])=>t.parent?[]:[e])),A=new Map,k={notionTeamspaceId:o.getSpaceId(),notionRootTableName:g().NX},T=(e,t,o)=>{o.forEach((t=>{const o=m.has(t),n=y[t];if(o){const o={id:t,name:n.folderName,boards:[],folders:[]};T(o,n.boards,n.subFolders),e.folders.push(o)}else T(e,n.boards,n.subFolders)})),t.forEach((t=>{if(!h.has(t))return;const o=S[t];e.boards.push({id:t,name:o.name})}))};try{for(;j.length;){const e=j.pop();if(!e)break;const t=y[e];if(m.has(e)&&"null"!==e){const t=y[e],o={id:e,name:t.folderName,boards:[],folders:[]};T(o,t.boards,t.subFolders);const n=Q(e,k),a=A.get(n)??{boards:new Array,folders:new Array};a.folders.push(o),A.set(n,a)}else{for(const e of t.boards){if(!h.has(e))continue;const o=S[e],n=Q(t.folderId,k),a=A.get(n)??{boards:new Array,folders:new Array},i={id:e,name:o.name};a.boards.push(i),A.set(n,a)}j.push(...t.subFolders)}}}catch(O){return void B().A.setState({...B().A.state,templateCreationInProgress:!1,currentTab:"failure"})}const M=Array.from(A.entries(),(([e,t])=>({notionRootTableId:e.notionTeamspaceId,notionRootTableName:e.notionRootTableName,mondayBoards:t.boards,mondayFolders:t.folders}))),E=F().mD({environment:t,spaceStore:o,spaceViewStore:l,append:!0,mondayV2:!0});await E.deferred.promise;const R=E.pageId;B().A.setState({...B().A.state,loggerPageId:R}),x().Pd(t,{import_source:"monday",flowId:n,import_sub_type:"fullImport"});try{const e=(0,I().UT)(t,v,{importParams:M,loggerPageId:R,spaceId:o.id,flowId:n,excludeProjectsAndTasks:b,importId:P().R.getOrCreateImportId()},{spaceIds:[o.id]});B().A.setState({...B().A.state,templateCreationInProgress:!1,currentTab:"importingData"}),_().A.reset();for await(const t of e){if(!B().A.state.isModalOpen)break;if(t.error)throw B().A.setState({...B().A.state,currentTab:"failure",loggerPageId:R}),t.error}}catch(L){const e=L instanceof p().X5e?L.body.clientData:void 0;if(e&&"code"in e&&"mondayImportError"===e.code){const e=i().A.formatMessage(F().DZ.importFailedWithError,{error:(0,f().A)(L).message});s().f1(e)}throw new Error((0,f().A)(L).message)}(0,w().navigate)({url:(0,c().A)({pageId:R,pageModel:t.defaultRecordCache.inMemoryRecordCache.getRecordModel({pointer:{table:u().ev,id:R},userId:t.currentUser.id}),baseUrl:a().A.domainBaseUrl,pageVisitSource:r().y8.Import}),environment:t}),B().A.resetImport(),C().Ay.reset()}function Q(e,t){const{selectedTeamspacesForFullImport:o,mondayFoldersDetailsMap:n}=B().A.state;let a=e;for(;a;){var i;if(a in o)return o[a];a=null===(i=n[a])||void 0===i?void 0:i.parent}return t}function X(e){const t=new Set(B().A.state.selectedBoardIdsForFullImport);t.has(e)?t.delete(e):t.add(e),B().A.setState({...B().A.state,selectedBoardIdsForFullImport:t})}function ee(e,t,o,n){const a=B().A.state.selectedFolderIdsForFullImport.has(e);!function(e){const{mondayFolderDetails:t,currentfolderId:o,select:n,mondayBoardDetails:a,excludeProjectsAndTasks:i}=e,s=K({currentfolderId:o,mondayFolderDetails:t}),r=Y({folderIds:[o,...s],mondayFolderDetails:t,mondayBoardDetails:a,excludeProjectsAndTasks:i}),{selectedFolderIdsForFullImport:l,selectedBoardIdsForFullImport:c}=B().A.state,d=(e,t)=>{t.forEach((t=>{n?e.add(t):e.delete(t)}))};d(l,s),d(c,r),B().A.setState({...B().A.state,selectedBoardIdsForFullImport:c,selectedFolderIdsForFullImport:l})}({currentfolderId:e,mondayFolderDetails:t,mondayBoardDetails:o,select:!a,excludeProjectsAndTasks:n});const i=new Set(B().A.state.selectedFolderIdsForFullImport);a?i.delete(e):i.add(e),B().A.setState({...B().A.state,selectedFolderIdsForFullImport:i})}function te(e){const{currentfolderId:t,mondayFolderDetails:o,mondayBoardDetails:n,excludeProjectsAndTasks:a}=e,i=Y({folderIds:[t,...K({currentfolderId:t,mondayFolderDetails:o})],mondayFolderDetails:o,mondayBoardDetails:n,excludeProjectsAndTasks:a});let s=!1;return i.forEach((e=>{$({excludeProjectsAndTasks:a,board:n[e]})||(s=!0)})),s}},720321:(e,t,o)=>{o.r(t),o.d(t,{circleFillSmallIcon:()=>a,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"1.95 1.94 12.11 12.1",svg:(0,o(474848).jsx)("path",{d:"M8 1.95a6.05 6.05 0 1 0 0 12.1 6.05 6.05 0 0 0 0-12.1"})},a=(0,o(340498).wt)("circleFillSmall",n,"fillSmall")},728066:(e,t,o)=>{o.d(t,{A:()=>a});class n extends(()=>o(757695))().Store{getInitialState(){return{boardsResponse:{boards:[]},isFetchingBoards:!0,showLoader:!1}}}const a=new n},729970:(e,t,o)=>{function n(e){var t;if(void 0!==(null==e?void 0:e.highlightBlockId)&&void 0===(null===(t=e.highlight)||void 0===t?void 0:t.title))return e.highlightBlockId}o.d(t,{p:()=>n})},754199:(e,t,o)=>{function n(e){return/^(\+\d{1,2}[\s.-])?\(?\d{3}\)?[\s.-]\d{3}[\s.-]\d{4}$/.test(e)}function a(e){return/^[0-9 .()\-\+]{7,}$/.test(e)}o.d(t,{W:()=>n,e:()=>a})},755934:(e,t,o)=>{o.d(t,{P:()=>y,_:()=>x});var n=()=>o(836095),a=()=>o(726637),i=()=>o(792057),s=()=>o(651784),r=()=>o(939768),l=()=>o(559926),c=()=>o(769864),d=()=>o(496414),p=()=>o(61958),u=()=>o(725951),m=()=>o(404141),g=()=>o(191227),f=()=>o(892232),h=()=>o(728066);const v=(0,o(69708).YK)({authenticatingWithTrello:{id:"trelloActions.authenticatingWithTrello.loadingMessage",defaultMessage:"Authenticating with Trello…"},titleMessage:{defaultMessage:"Trello login",id:"trelloActions.loginPopupModal.title"}});async function y(e){const{environment:t,requestStore:o}=e,y=g().A.getOrCreateFlowId();l()._$(t,{import_source:"trello",data:{import_type:"api",status:"initiated",userId:t.currentUser.id},flowId:y});const S=(0,u().LX)(t);let I=(0,s().bQ)(a().A.domainBaseUrl,{authType:S,userId:t.currentUser.id,isElectronDevice:t.device.isElectron});if(I=S.redirectToAuth?I:await(0,u().YN)(t,I),t.device.isElectron)return void(0,n().P)(I);const b=await p().P(t,{width:580,height:700,url:I,titleMessage:v.titleMessage});if(!b)return;const j=r().qg(b),A=j.query.oauth_token,w=j.query.oauth_verifier;if(!A||!w)return;d().m({message:v.authenticatingWithTrello});const C=await c().callApi({eventName:"authWithTrello",environment:t,data:{requestToken:A,verifier:w}});"failed"===C.type?(l()._$(t,{import_source:"trello",data:{import_type:"api",status:"failure",error:C.error,userId:t.currentUser.id},flowId:y}),console.error(C.error),i().Qg(C),d().V()):(l()._$(t,{import_source:"trello",data:{import_type:"api",status:"success",userId:t.currentUser.id},flowId:y}),l().mu(t,{integration_name:"trello"}),await o.refresh(),m().Ay.setState({...m().Ay.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:void 0}),await x(t,o).then((()=>{f().A.setState({open:!0})})).catch((()=>{h().A.setState({...h().A.state,isFetchingBoards:!0,showLoader:!1}),f().A.setState({open:!1})})),d().V())}async function x(e,t){h().A.setState({...h().A.state,isFetchingBoards:!0,showLoader:!0});const o=await c().callApi({eventName:"getTrelloBoards",environment:e,data:{}});if(await t.refresh(),"success"===o.type)return h().A.setState({...h().A.state,boardsResponse:o.data,isFetchingBoards:!1,showLoader:!1}),o.data;throw console.error(o.error),i().Qg(o),o.error}},769314:(e,t,o)=>{o.d(t,{A:()=>g});o(944114),o(581454);var n=o(296540),a=()=>o(726637),i=()=>o(401497),s=()=>o(663639),r=()=>o(278238),l=()=>o(69708),c=()=>o(486666),d=o(474848);const p=(0,l().YK)({selectColorLabel:{defaultMessage:"Set color as {color}",id:"horizontalColorPicker.selectColor"}});function u(e){const{parent:t,currentColor:n,onColorSelected:a,additionalItems:c}=e,p=(0,o(484714).v3)(),u=(0,l().tz)(),g=(0,i().IS)((()=>({menu:{padding:4,...e.menuStyle}})),[e.menuStyle]),f=r().v3.map((e=>({key:e,action:o=>{t.close(),a({environment:p,color:e})},render:t=>(0,d.jsx)(o(26697).m,{renderTooltip:()=>u.formatMessage(r().jd[e]),placement:"bottom",render:o=>(0,d.jsx)(m,{ref:t.ref,color:e,tooltipEvents:o,menuListProps:t,currentColor:n})})})));return c&&f.push(...c),(0,d.jsx)(o(717137).A,{debugName:"ColorPicker",capture:!0,allowEsc:!0,children:(0,d.jsx)(s().A,{type:s().O.Grid,getItemsPerRowForSection:()=>5,initialFocus:n?Math.max(r().v3.indexOf(n),0):10,sections:[{key:"variations",render:e=>(0,d.jsx)("div",{...e}),items:f}],renderRow:(t,o)=>{var n;return(0,d.jsx)("div",{role:"row",style:{display:"flex",padding:4,gap:4,justifyContent:"center",...(null===(n=e.rowStyle)||void 0===n?void 0:n.call(e,o))??{}},children:t},o)},style:g.menu})})}const m=n.forwardRef((function(e,t){const{color:s,tooltipEvents:u,menuListProps:m,currentColor:g}=e,f=(0,l().tz)(),[h,v]=(0,n.useState)(!1),{isMenuListFocusVisible:y}=(0,n.useContext)(o(85229).V),x=m.focused&&y,S=(0,i().eP)(),I=(0,i().IS)((()=>({colorPickerItem:{display:"grid",gridTemplateColumns:"1fr",cursor:void 0!==g?"pointer":void 0},icon:{height:a().A.isMobile?28:20,width:a().A.isMobile?28:20,stroke:r().l8[S][s],fill:r().l8[S][s]},iconButton:{width:a().A.isMobile?c().UA:22,height:a().A.isMobile?c().UA:22,gridRowStart:1,gridColumnStart:1,...x&&{boxShadow:o(100622).Tj.buttonBlueFocusRing}},selectedCircleWrapper:{width:a().A.isMobile?c().UA:22,height:a().A.isMobile?c().UA:22,gridRowStart:1,gridColumnStart:1,display:"flex",alignItems:"center",justifyContent:"center"},selectedCircle:{width:a().A.isMobile?30:22,height:a().A.isMobile?30:22,borderRadius:"100%",border:`1.5px solid ${r().l8[S][s]}`,opacity:h?.5:1}})),[h,s,x,g,S]),b=(0,n.useCallback)((e=>{v(!0),m.onMouseEnter&&m.onMouseEnter(e),u.onMouseEnter&&u.onMouseEnter(e)}),[m,u]),j=(0,n.useCallback)((e=>{v(!1),u.onMouseLeave&&u.onMouseLeave(e)}),[u]);return(0,d.jsxs)("div",{style:I.colorPickerItem,...(0,o(383036).A)(u,{onClick:void 0!==g?m.onClick:void 0}),onMouseEnter:b,onMouseLeave:j,children:[(0,d.jsx)(o(695115).A,{ref:t,disabled:void 0===g,ariaLabel:f.formatMessage(p.selectColorLabel,{color:f.formatMessage(r().jd[s])}),style:I.iconButton,icon:o(524658).circleFillIcon,iconStyle:I.icon,hovered:h,role:m.role,id:m.id,disallowTabbing:!0}),g===s||void 0!==g&&(h||x)?(0,d.jsx)("div",{style:I.selectedCircleWrapper,children:(0,d.jsx)("div",{style:I.selectedCircle})}):void 0]})})),g=n.memo(u)},770167:(e,t,o)=>{o.d(t,{S6:()=>Y,dB:()=>Z,wn:()=>J,Lj:()=>Q,Nu:()=>K,nR:()=>$});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(803949),o(581454),o(908872);var n=()=>o(230711),a=()=>o(907258),i=()=>o(755531),s=()=>o(242422),r=()=>o(484714),l=()=>o(590526),c=()=>o(929219),d=()=>o(675133),p=()=>o(711339),u=()=>o(295633),m=()=>o(187174),g=()=>o(179034),f=()=>o(620333),h=()=>o(245241),v=()=>o(496603),y=()=>o(763824),x=()=>o(534177),S=()=>o(222917),I=()=>o(466088),b=()=>o(798693),j=()=>o(487542);var A=()=>o(641934),w=()=>o(906783),C=()=>o(656894),k=()=>o(873049);var T=()=>o(113416),M=()=>o(475553),P=()=>o(981342),_=()=>o(617711),B=()=>o(109054),F=()=>o(884211),E=()=>o(5844),R=()=>o(499233),O=()=>o(671199),L=()=>o(461131),D=()=>o(87573),V=()=>o(905487),z=()=>o(384565),N=()=>o(287234),U=()=>o(21899),W=()=>o(303742),H=()=>o(326589),q=()=>o(968172);function K(e){const t=(0,r().v3)(),o=(0,M().y)();return(0,l().K8)((()=>{const n=Boolean(c().A.state.online);let s=N().Ay.state.query;!n&&o&&(s={...s,filters:{...s.filters,isOfflineOnly:!0}});const{hasPublicAccessPermission:r,publicAccessPermissionAncestorBlockId:l}=(0,b().E)(t);return{isOnline:n,limit:N().Ay.state.limit,parentStore:e,hasPublicAccessPermission:r,publicAccessPermissionAncestorBlockId:l,currentSpaceStore:(0,i().S)(),debug:L().Ay.getDebugLevel(),openAsPage:V().default.state.openAsPage,currentSpaceViewStore:a().default.state.sidebarSpaceViewStore,query:s,localSearchablePagesStore:O().A}}),[t,e,o])}function $({dependencies:e,debugColumnStore:t,localDebounce:o=75,serverSearchFn:n,searchResultStore:a,permanentFilterOverride:i,enabled:c,preventUpdateSearchMetrics:d}){const u=(0,r().v3)(),g=(0,l().K8)((()=>function(e){const{debugColumnStore:t}=e,o=t.state.searchExperimentOverrides;function n(e){return(null==o?void 0:o[e])??s().default.getEligibleGroup({experimentId:e,defaultGroup:"control",disableExposureLogging:!0})}function a(e,t,n="control"){const a=null==o?void 0:o[e];if(a)return a;const i=s().default.getEligibleGroup({experimentId:e,parameter:t,defaultGroup:n});return void 0===i?"control":i}return{isLocalBlendingDisabled:"on"===n("search-no-local-blending"),shouldUseNewRerankerDebugOverrideEnabled:"on"===a("search-use-local-reranker-layered","shouldUseLocalReranker","control"),forcedClusterPattern:t.state.forcedClusterPattern,searchExperimentOverrides:t.state.searchExperimentOverrides,forcedBlockIds:t.state.forcedBlockIds}}({debugColumnStore:t})),[t]);(0,m().Yb)((()=>c?async function(e){const{query:t,openAsPage:o,store:n,environment:a,serverSearchFn:i}=e;if(o&&v().n4(t,n.state.selectedQueryResultQuery))return;const s=Date.now(),r=V().default.state.searchMode;if(function(e){const{parentStore:t,environment:o,query:n,debug:a,limit:i,hasPublicAccessPermission:s,isOnline:r,store:l,permanentFilterOverride:c,preventUpdateSearchMetrics:d,now:u,shouldUseNewRerankerDebugOverrideEnabled:m,searchMode:g,localSearchablePagesStore:f,currentSpaceStore:h}=e,v=p().default.mark("rum.local_quick_search_query"),y=f.state.localSearchableBlocksCache,x=(0,R().PE)({environment:o,overrideCurrentUserId:o.currentUser.id,overrideSpaceId:null==h?void 0:h.id,overrideLocalSearchableBlocksCache:y});if("quick_find_scroll"===N().Ay.state.source)return;let I;const b={...n,filters:{...n.filters,...c}},{text:A,sort:w}=b,C=(0,j().B)(A);C.length>0&&S().o(o,{operations:C,searchSessionId:S().wr()});const k="nav-local-only"!==g,M=e.isLocalBlendingDisabled||"full-content"===g;if((0,T().B)({isLocalBlendingDisabled:M,queryOperations:C,queryText:A,querySort:w})){var P;I=function(e){if(e&&!e.error)return e.value}(Y({parentStore:t,spaceStore:h,environment:o,requestInput:{query:b,debug:a,limit:i},hasPublicAccessPermission:s,isOnline:r,localSearchCache:y,shouldUseNewRerankerDebugOverrideEnabled:m,shouldLimitLocalResultsWhenOnline:k})),p().default.measure(v,{environment:o,data:{success:Boolean(I),start_time:v.startTime,surface:"quick_search",num_results:(null===(P=I)||void 0===P||null===(P=P.results)||void 0===P?void 0:P.length)||0,search_session_id:V().default.state.sessionId,local_cache_metadata:x,local_cache_readiness_timings:(0,R().Yp)(),query_length:A.length}}),d||z().default.update((e=>({...e,numLocalRequests:e.numLocalRequests+1})))}else I=void 0;l.update((e=>{var t;return null===(t=I)||void 0===t||t.results.forEach((t=>e.timesToRender.set(t.id,Date.now()-u))),{...e,localResults:I}}))}({...e,now:s,searchMode:r}),J({query:t.text,store:n,environment:a,searchMode:r}),"nav-local-only"===r)n.update((e=>({...e,serverResults:void 0})));else{var l;const t=new Set;null===(l=n.state.localResults)||void 0===l||l.results.forEach((e=>t.add(e.id)));const o="default"!==r?Q:i;await o({...e,now:s,excludedBlockIds:[...t],searchMode:r})}}({...e,...g,store:a,serverSearchFn:n,environment:u,permanentFilterOverride:i,preventUpdateSearchMetrics:d}):Promise.resolve()),[e,g,a,n,u,i,c,d],{debounce:o})}function Y(e){const{parentStore:t,spaceStore:o,requestInput:n,isOnline:a,environment:i,hasPublicAccessPermission:s,localSearchCache:r,forceLocalCacheUsage:l,shouldUseNewRerankerDebugOverrideEnabled:c,shouldLimitLocalResultsWhenOnline:p}=e,{query:u}=n;if(!r)return;if(!u.text.trim()&&!l)return;if(s)return;const m=(0,F().getLocalFrecencyRankedSearchResultsWithStore)({query:n,localCachedPages:r,parentStore:t,spaceStore:o,environment:i,isOnline:a,shouldLimitLocalResultsWhenOnline:p,applyScoreThresholdWhenOnline:!0,canUseLtr:!0,shouldUseNewRerankerDebugOverrideEnabled:c});return!m||null!=m&&m.error||m.value.results.forEach((e=>{const t=[];if(Boolean(e.store.isTemplate())){const e={type:"is_template",properties:{},label:d().A.formatMessage(h().Nz.template)};t.push(e)}if(e.workflowData){const e={type:"agent",properties:{},label:d().A.formatMessage(h().Nz.agent)};t.push(e)}e.badges=e.badges?[...e.badges,...t]:t})),m}function Z(e){const{environment:t,spaceId:o}=e,{publicAccessPermissionAncestorBlockId:n}=(0,b().E)(t),a=(0,I().w)(t),i=(0,H().g)(),s=void 0!==n;return{shouldIncludePublicPages:(a||i)&&s,isPublicAncestorSearch:(a||!o)&&s,publicAccessPermissionAncestorBlockId:n}}async function G(e){const{parentStore:t,currentSpaceStore:o,requestInput:n,isOnline:a,environment:i,publicAccessPermissionAncestorBlockId:s,searchSessionId:r,searchSessionFlowNumber:l,source:c,spaceId:d,searchExperimentOverrides:p,forcedClusterPattern:m,forcedBlockIds:f,excludedBlockIds:v}=e;if(!a)return{error:h().yq.Offline};const{shouldIncludePublicPages:y}=Z({environment:i,spaceId:d});y&&(n.query.filters.includePublicPagesWithoutExplicitAccess=!0);const S=await(0,w().U)({environment:i,input:n,spaceId:d,publicAccessPermissionAncestorBlockId:s,searchSessionId:r,searchSessionFlowNumber:l,source:c,searchExperimentOverrides:p,forcedClusterPattern:m,recentPagesForBoosting:d&&"on"!==(null==p?void 0:p["search-debug-only-no-recent-boosting"])?q().A.getWithoutSubscribing(d):[],forcedBlockIds:f,excludedBlockIds:v});if(!S)return;if("failed"===S.type)return S.offline?{error:h().yq.Offline}:{error:h().yq.RequestFailed};const{trackEventProperties:I,results:b,total:j,debug:A,clusterInfo:C}=S.data,k=(0,x().MU)((0,x().WP)(I).map((([e,t])=>[`server-${e}`,t]))),T=b.map(((e,o)=>({...e,serverEventProperties:k,originalPosition:o,store:u().B.createChildStore(t,{table:g().ev,id:e.id})})));let M=T;if(o){const e=(0,_().$e)(o),t=(0,P().jj)(o);t&&e||(M=T.filter((o=>(0,B().oU)({blockStore:o.store,shouldShowPeopleCollection:t,shouldShowUserProfiles:e}))))}return{value:{results:M,total:j,debugInfo:A,serverEventProperties:k,clusterInfo:C}}}function J(e){const{query:t,store:o,environment:a}=e,r=s().default.checkGate({gateName:"search-custom-action-results"}),l=a.currentUser.isLoggedIn();if(!r||!l)return;const c=Boolean(V().default.state.isNewElectronTab),d=(0,n().sE)((0,i().S)(),a.currentUser.id),p=(0,E().n)({query:t,environment:a,isNewElectronTab:c,spaceUserStore:d});return null==o||o.update((e=>({...e,queryBasedActionResults:p}))),p}async function Q({parentStore:e,environment:t,query:o,debug:n,isOnline:i,publicAccessPermissionAncestorBlockId:s,currentSpaceStore:r,currentSpaceViewStore:l,searchExperimentOverrides:c,forcedClusterPattern:d,store:u,forcedBlockIds:m,limit:g,permanentFilterOverride:x,excludedBlockIds:I,preventUpdateSearchMetrics:b,now:j,searchMode:w}){var T,M,P,_,B,F,E,R;const O=p().default.mark("rum.server_quick_search_query"),L=p().default.mark("time_to_render_search_results"),H={...o,filters:{...o.filters,...x}};if(!H.text.trim()&&!(0,C().J)(H.filters))return;const q=N().Ay.state.source,K="quick_find_scroll"===q,$=K||0===z().default.state.numServerRequests&&"full-content"!==w;u.update((e=>{var o;return{...e,serverResultsLoading:!0,...$?{serverResults:e.serverResults,serverEventProperties:null===(o=e.serverResults)||void 0===o?void 0:o.serverEventProperties}:{serverResults:void 0,serverEventProperties:void 0},timeToRenderServerResultsMetric:{eventName:L,environment:t,query_length:H.text.length,source:q,search_session_id:V().default.state.sessionId||"",is_search_modal_v2:!1}}})),b||z().default.update((e=>({...e,numServerRequests:e.numServerRequests+1})));const Y=(0,f().mk)({searchSessionId:V().default.state.sessionId,searchSessionFlowNumber:z().default.state.numServerRequests}),Z={query:H,debug:n,limit:g};let J;if((0,W().o)(l)){const{currentUserRootStore:o}=a().default.state,n=(0,v().oE)(o?(0,U().f)({currentUserRootStore:o}).map((e=>e.getSpaceId())):[null==r?void 0:r.id]);J=await async function(e){const{spaceIds:t,...o}=e,n=await(0,y().lX)(t,10,(e=>G({spaceId:e,...o}))),a=(0,v().oE)(n.filter((e=>!(null!=e&&e.error))));return 0===a.length?n[0]:a.reduce(((e,t)=>({value:{results:e.value.results.concat(t.value.results),total:e.value.total+t.value.total}})))}({parentStore:e,currentSpaceStore:r,environment:t,requestInput:Z,spaceIds:n,searchSessionId:V().default.state.sessionId,searchSessionFlowNumber:z().default.state.numServerRequests,publicAccessPermissionAncestorBlockId:s,isOnline:i,source:q,searchExperimentOverrides:c,forcedClusterPattern:d,forcedBlockIds:m,excludedBlockIds:I})}else J=await G({parentStore:e,currentSpaceStore:r,environment:t,requestInput:Z,spaceId:null==r?void 0:r.id,searchSessionId:V().default.state.sessionId,searchSessionFlowNumber:z().default.state.numServerRequests,publicAccessPermissionAncestorBlockId:s,isOnline:i,source:q,searchExperimentOverrides:c,forcedClusterPattern:d,forcedBlockIds:m,excludedBlockIds:I});if(Y!==(0,f().mk)({searchSessionId:V().default.state.sessionId,searchSessionFlowNumber:z().default.state.numServerRequests}))return;if(!J||J.error)return u.update((e=>{var t;return{...e,serverError:null===(t=J)||void 0===t?void 0:t.error,serverResultsLoading:!1,serverResults:void 0,serverEventProperties:void 0}}));const Q=K?function(e){const{existingResults:t,newPageResults:o}=e;if(void 0!==t||void 0!==o){if(t&&o){const e=[...t.results],n=new Set(t.results.map((e=>(0,k().a)(e))));return e.push(...o.results.filter((e=>!(e.sources.includes(h().Ni.ElasticsearchRandom)&&e.originalPosition<t.results.length||n.has((0,k().a)(e)))))),{...o,results:e,total:o.total}}return t??o}}({existingResults:u.state.serverResults,newPageResults:J.value}):J.value;p().default.measure(O,{environment:t,data:{start_time:O.startTime,success:!0,surface:"quick_find",num_results:(null===(T=u.state.serverResults)||void 0===T?void 0:T.results.length)||0,search_session_id:V().default.state.sessionId,search_session_flow_number:z().default.state.numServerRequests,query_length:H.text.length}}),u.update((e=>{var t;return J.value.results.forEach((t=>e.timesToRender.set(t.id,Date.now()-j))),{...e,serverError:null===(t=J)||void 0===t?void 0:t.error,serverResultsLoading:!1,serverResults:Q,serverResultsAllLoaded:J.value.results.length<g,serverEventProperties:J.value.serverEventProperties}}));const X=(null===(M=u.state.serverResults)||void 0===M?void 0:M.results.map((e=>{var t;return{id:e.id,badges:(null===(t=e.badges)||void 0===t?void 0:t.map((e=>e.type)))??[]}})))??[],ee=new Map;for(const{badges:a}of X)for(const e of a){const t=ee.get(e)??0;ee.set(e,t+1)}const{sections:te}=(0,A().H)({intentBasedGrouping:(0,D().Y)(),localResults:null===(P=u.state.localResults)||void 0===P?void 0:P.results,serverResults:null===(_=u.state.serverResults)||void 0===_?void 0:_.results}),oe={};for(const[a,p]of Object.entries(te))oe[a]=p.map((e=>e.id));S().fe(t,{numLocalResults:(null===(B=u.state.localResults)||void 0===B?void 0:B.results.length)||0,localResultsIds:(null===(F=u.state.localResults)||void 0===F?void 0:F.results.map((e=>e.id)))||[],totalLocalResultIds:(null===(E=u.state.localResults)||void 0===E?void 0:E.totalResultIds)||[],numServerResults:(null===(R=u.state.serverResults)||void 0===R?void 0:R.results.length)||0,...u.state.serverEventProperties,badgeCounts:ee,badgesByResultId:X,idsBySection:oe,timeToRenderById:[...u.state.timesToRender.entries()].map((([e,t])=>({id:e,timeToRender:t})))})}},797730:(e,t,o)=>{o.d(t,{D:()=>n,P:()=>a});const n=(0,o(69708).YK)({agents:{id:"sidebar.agents.button",defaultMessage:"Agents"},notionAi:{id:"sidebar.notionAi.button",defaultMessage:"Notion AI"},inbox:{id:"sidebar.inbox.button",defaultMessage:"Inbox"},messages:{id:"sidebar.messages.button",defaultMessage:"Messages"},feed:{id:"sidebarFeedButton.label",defaultMessage:"Feed"},meetings:{id:"sidebar.meetings.button",defaultMessage:"Meetings"},trial:{id:"sidebar.trial.button",defaultMessage:"Trial Home"}}),a={inbox:o(829548).y,feed:o(925695).N,present:o(822295).presentIcon}},806638:(e,t,o)=>{o.d(t,{P:()=>i});var n=()=>o(427704),a=()=>o(246766);function i(e){const{environment:t}=e;(0,a().navigate)({environment:t,url:n().JZ.marketplace,redirect:!1})}},820579:(e,t,o)=>{o.r(t),o.d(t,{arrowLineDownIcon:()=>a,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.52 2.39 12.95 15.21",svg:(0,o(474848).jsx)("path",{d:"M10 2.4c.345 0 .625.28.625.625v9.966l3.333-3.333a.625.625 0 1 1 .884.884l-4.4 4.4a.625.625 0 0 1-.884 0l-4.4-4.4a.625.625 0 0 1 .884-.884l3.333 3.333V3.025c0-.345.28-.625.625-.625M4.15 16.35a.625.625 0 1 0 0 1.25h11.7a.625.625 0 0 0 0-1.25z"})},a=(0,o(340498).wt)("arrowLineDown",n,"default")},822295:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,presentIcon:()=>a});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"2.72 1.77 14.56 15.51",svg:(0,o(474848).jsx)("path",{d:"M4.625 4.535a2.765 2.765 0 0 1 3.307-2.711l.07.014a3.26 3.26 0 0 1 2.01 1.297 3.34 3.34 0 0 1 2.044-1.309c1.706-.34 3.319.96 3.319 2.71 0 .558-.166 1.079-.452 1.514h.777c.87 0 1.575.705 1.575 1.575v1.9c0 .613-.35 1.144-.861 1.404V15.7c0 .87-.705 1.575-1.575 1.575H5.16c-.87 0-1.575-.705-1.575-1.575v-4.77a1.58 1.58 0 0 1-.861-1.405v-1.9c0-.87.705-1.575 1.575-1.575h.776a2.75 2.75 0 0 1-.451-1.515m6 2.765v2.55H15.7c.18 0 .325-.145.325-.325v-1.9A.325.325 0 0 0 15.7 7.3zm-1.25 0H4.3a.325.325 0 0 0-.325.325v1.9c0 .18.145.325.325.325h5.075zm0-1.25V5.038c0-.96-.678-1.786-1.618-1.974l-.07-.014a1.515 1.515 0 1 0-.297 3zm3.25 0c.83-.008 1.5-.683 1.5-1.515 0-.95-.882-1.671-1.824-1.483a2.084 2.084 0 0 0-1.676 2.035v.963zm-2 5.05v4.925h4.214c.18 0 .325-.145.325-.325v-4.6zm-1.25 0h-4.54v4.6c0 .18.146.325.326.325h4.214z"})},a=(0,o(340498).wt)("present",n,"default")},826693:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>a,notionTemplateIcon:()=>i});o(296540);var n=o(474848);const a={viewBox:"0 0 20 20",fittedViewBox:"1.58 3 16.83 14",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{fill:"#FFB110",fillRule:"evenodd",d:"M6.014 16.338a4.43 4.43 0 0 0 4.43-4.48H8.88c-.254 0-.512 0-.732-.018a2.3 2.3 0 0 1-.86-.226 2.24 2.24 0 0 1-.979-.979 2.3 2.3 0 0 1-.226-.86 10 10 0 0 1-.018-.731V7.48a4.44 4.44 0 0 1 2.297.678 4.431 4.431 0 0 0-6.777 3.751 4.43 4.43 0 0 0 4.43 4.43z",clipRule:"evenodd"}),(0,n.jsx)("path",{fill:"#097FE8",d:"M12.902 11.044c.463-.802.694-1.203.997-1.338a1.02 1.02 0 0 1 .828 0c.302.135.534.536.996 1.338l2.028 3.512c.463.802.695 1.203.66 1.532-.03.287-.18.548-.414.718-.267.194-.73.194-1.656.194h-4.057c-.925 0-1.388 0-1.656-.194a1.02 1.02 0 0 1-.414-.718c-.035-.329.197-.73.66-1.532z"}),(0,n.jsx)("path",{fill:"#F64932",fillRule:"evenodd",d:"M7.287 4.63c0-.571 0-.856.111-1.074.098-.192.254-.347.445-.445C8.061 3 8.346 3 8.916 3h4.38c.57 0 .854 0 1.072.111.191.098.347.253.445.445.11.218.11.503.11 1.073v3.852a2.24 2.24 0 0 0-1.52.109c-.46.204-.75.56-.94.83q-.318.472-.595.97l-.024.043-.118.203h-2.81c-.57 0-.855 0-1.073-.11a1 1 0 0 1-.445-.445c-.11-.218-.11-.503-.11-1.074z",clipRule:"evenodd"})]})},i=(0,o(340498).wt)("notionTemplate",a,"default")},828265:(e,t,o)=>{o.d(t,{D:()=>re,p:()=>de});o(944114),o(269479),o(898992),o(823215),o(354520),o(672577),o(430670),o(803949),o(581454),o(737550);var n=()=>o(651220),a=o(296540),i=()=>o(135168),s=()=>o(755531),r=()=>o(726637),l=()=>o(17022),c=()=>o(484714),d=()=>o(852507),p=()=>o(590526),u=()=>o(718827),m=()=>o(807449),g=()=>o(546926),f=()=>o(26697),h=()=>o(663639),v=()=>o(736847),y=()=>o(452004),x=()=>o(637997),S=()=>o(669729),I=()=>o(634201),b=()=>o(340498),j=o(474848);const A={viewBox:"0 0 20 20",fittedViewBox:"2.39 3.05 15.76 13.89",svg:(0,j.jsx)("path",{d:"M5.29 3.366a.63.63 0 0 1 .54-.311h2.81c.182 0 .356.08.474.218l4.023 4.692h2.983c1.112 0 2.025.897 2.025 2.025v.02a2.03 2.03 0 0 1-2.025 2.025h-2.983l-4.023 4.692a.63.63 0 0 1-.474.218H5.83a.625.625 0 0 1-.542-.936l2.274-3.974H6.496l-1.949 1.358-.026.017c-.24.15-.533.255-.851.255h-.65a.625.625 0 0 1-.597-.81L3.306 10l-.883-2.855a.625.625 0 0 1 .597-.81h.65c.298 0 .61.079.883.276l1.943 1.354h1.066L5.288 3.99a.63.63 0 0 1 .001-.624m1.618.939 2.274 3.974a.625.625 0 0 1-.542.936H6.3a.63.63 0 0 1-.357-.112L3.896 7.677l.661 2.138a.63.63 0 0 1 0 .37l-.661 2.138 2.047-1.426a.63.63 0 0 1 .357-.112h2.34a.625.625 0 0 1 .542.935l-2.274 3.975h1.445l4.023-4.692a.63.63 0 0 1 .474-.218h3.27a.78.78 0 0 0 .775-.775v-.02a.773.773 0 0 0-.775-.775h-3.27a.63.63 0 0 1-.474-.218L8.353 4.305z"})},w=(0,b().wt)("airplane",A,"default"),C={viewBox:"0 0 20 20",fittedViewBox:"1.67 1.55 16.78 16.78",svg:(0,j.jsx)("path",{d:"M11.375 5.413a4.5 4.5 0 0 1-.152-1.177c0-1.482.673-2.683 1.504-2.683.742 0 1.358.957 1.481 2.217.898-.62 1.846-.767 2.318-.296.471.472.324 1.42-.296 2.318 1.26.123 2.217.74 2.217 1.481 0 .83-1.201 1.504-2.683 1.504a4.5 4.5 0 0 1-1.177-.152 3.23 3.23 0 0 1-1.378 3.606l-9.233 5.853c-1.346.852-2.912-.714-2.06-2.06L7.77 6.791a3.23 3.23 0 0 1 3.606-1.378m.517 1.708a1.976 1.976 0 0 0-3.067.339l-.175.276 1.232 1.232a.55.55 0 1 1-.777.778L8.047 8.688l-.467.736 1.306 1.307a.55.55 0 1 1-.778.778l-1.132-1.132-4.004 6.317a.23.23 0 0 0-.042.16.26.26 0 0 0 .075.14.26.26 0 0 0 .141.076.23.23 0 0 0 .16-.042l3.221-2.042-.561-.561a.55.55 0 1 1 .778-.778l.735.736 5.06-3.208a1.976 1.976 0 0 0 .34-3.067z"})},k=(0,b().wt)("carrot",C,"default");const T={viewBox:"0 0 20 20",fittedViewBox:"1.92 3.31 16.8 14.56",svg:(0,j.jsx)("path",{d:"M2.545 3.31a.625.625 0 0 0-.625.625c0 5.882 4.312 10.763 9.765 10.763h3.581c.737.8 1.472 1.718 2.306 2.88a.624.624 0 1 0 1.012-.728c-.947-1.32-1.78-2.344-2.621-3.232C15.747 7.94 11.518 3.31 6.207 3.31zm12.024 8.956c-1.239-1.104-2.624-2.118-4.489-3.483l-1.023-.75a.62.62 0 0 0-.872.134.63.63 0 0 0 .137.875l1.013.742c2.007 1.47 3.42 2.505 4.68 3.664h-2.33c-4.46 0-8.208-3.871-8.497-8.888h3.019c4.102 0 7.602 3.276 8.362 7.706"})},M=(0,b().wt)("leaf",T,"default");var P=()=>o(863330);const _={viewBox:"0 0 20 20",fittedViewBox:"1.87 1.87 16.26 16.26",svg:(0,j.jsx)("path",{d:"M10 1.875a8.125 8.125 0 1 0 0 16.25 8.125 8.125 0 0 0 0-16.25M4.896 5.393a6.9 6.9 0 0 1 2.298-1.671L9.45 5.36v1.35L7.04 8.46l-1.283-.417zm-1.733 5.334L5.417 9.09l1.284.417.92 2.833-.793 1.091H4.04a6.8 6.8 0 0 1-.878-2.703m5.416 6.001-.861-2.651.793-1.092h2.978l.793 1.092-.861 2.651a6.9 6.9 0 0 1-2.842 0m7.38-3.298h-2.787l-.793-1.091.92-2.833 1.284-.417 2.254 1.638a6.8 6.8 0 0 1-.878 2.703m-.855-8.037-.861 2.65-1.283.417-2.41-1.75V5.36l2.256-1.638c.879.393 1.66.966 2.298 1.671"})},B=(0,b().wt)("soccerBall",_,"default");var F=()=>o(69708),E=()=>o(100622),R=()=>o(496603),O=()=>o(534177),L=()=>o(284371),D=()=>o(901997),V=()=>o(736767),z=()=>o(486674),N=()=>o(87878),U=()=>o(63467),W=()=>o(486666),H=()=>o(948033),q=()=>o(423219),K=()=>o(797162),$=()=>o(712030);const Y=1,Z=6048e5;function G(e,t,o){if(void 0===e||void 0===t)return 0;const n=o-t,a=e*Math.pow(.5,n/Z);return Math.round(a)}var J=()=>o(668577);var Q=()=>o(267419),X=()=>o(401497),ee=()=>o(695115),te=()=>o(680451);function oe(e){const t=(0,F().tz)(),o=(0,X().IS)((()=>({wrapper:{borderTop:`solid 1px ${E().Tj.border.secondary}`,display:"flex",justifyContent:"space-between",paddingTop:8,paddingBottom:10,paddingInlineStart:12,paddingInlineEnd:12}})),[]);return(0,j.jsx)("div",{style:o.wrapper,children:re.map(((o,n)=>e.isHidden(o)?null:(0,j.jsx)(f().m,{alignment:"start",placement:"bottom",render:n=>(0,a.createElement)(ee().A,{focused:e.isFocused(o),disabled:e.isDisabled(o),"aria-pressed":e.isFocused(o),...n,key:o.id,ariaLabel:t.formatMessage({id:"emojiPicker.category.label",defaultMessage:"Jump to category: {category}"},{category:o.category??o.id}),icon:{icon:o.icon??te().R,size:"lg",colorVariant:"secondary"},style:{width:32,height:32},onClick:t=>{e.onCategoryClick(o,t)}}),renderTooltip:e=>(0,j.jsx)("div",{...e,children:o.title})},o.id)))})}var ne=()=>o(519116);const ae=(0,F().YK)({noResults:{defaultMessage:"No results",id:"emojiPicker.noResults.message"}}),ie=(0,j.jsx)(F().sA,{id:"emojiPicker.addCustomEmoji",defaultMessage:"Add emoji"}),se="__ADD_CUSTOM_EMOJI__",re=[{id:"recent",title:(0,j.jsx)(F().sA,{id:"emojiPicker.section.recent",defaultMessage:"Recent"}),icon:o(274570).clockIcon},{id:"callout",title:(0,j.jsx)(F().sA,{id:"emojiPicker.section.callout",defaultMessage:"Callout"})},{id:"people",category:"People & Body",title:(0,j.jsx)(F().sA,{id:"emojiPicker.section.people",defaultMessage:"People"}),icon:o(424139).emojiFaceIcon},{id:"nature",category:"Animals & Nature",title:(0,j.jsx)(F().sA,{id:"emojiPicker.section.animals",defaultMessage:"Animals and nature"}),icon:M},{id:"food",category:"Food & Drink",title:(0,j.jsx)(F().sA,{id:"emojiPicker.section.food",defaultMessage:"Food and drink"}),icon:k},{id:"activities",category:"Activities",title:(0,j.jsx)(F().sA,{id:"emojiPicker.section.activity",defaultMessage:"Activity"}),icon:B},{id:"travel",category:"Travel & Places",title:(0,j.jsx)(F().sA,{id:"emojiPicker.section.travel",defaultMessage:"Travel and places"}),icon:w},{id:"objects",category:"Objects",title:(0,j.jsx)(F().sA,{id:"emojiPicker.section.objects",defaultMessage:"Objects"}),icon:o(123411).lightBulbBrightIcon},{id:"symbols",category:"Symbols",title:(0,j.jsx)(F().sA,{id:"emojiPicker.section.symbols",defaultMessage:"Symbols"}),icon:o(671089).checkmarkCircleIcon},{id:"flags",category:"Flags",title:(0,j.jsx)(F().sA,{id:"emojiPicker.section.flags",defaultMessage:"Flags"}),icon:o(748054).M},{id:"custom",title:(0,j.jsx)(F().sA,{id:"emojiPicker.section.custom",defaultMessage:"Custom"}),icon:o(858141).squareGrid2X2Icon},{id:"add",title:ie,icon:o(480034).q}],le=Object.fromEntries(re.map((e=>[e.id,e]))),ce=["💡","👉","☝","👌","🔑","🚧","⚠️","🔥","📌","✂️","❓","🚫","⛔","⏰","☎️","🚨","♻️","✅","🔒","📎","📖","🗣","➡️","📢","🛠","⚙"];function de(e){const{onSubmit:t,isInline:o,onUpload:b,iconLoggingData:A,comboboxProps:w,hideCustomEmoji:C}=e,k=(0,p().K8)((()=>{const e=(0,z().a)();return(0,i().f)(e)??(0,s().S)()}),[]),T=(0,c().v3)(),M=(0,F().tz)(),_=(0,c().Y0)(),B=(0,g().Tf)(),Z=(0,p().K8)((()=>Math.floor((0,H().so)(T,e.menuRef,B))),[T,e.menuRef,B]),X=(0,p().K8)((()=>(0,H().uu)()),[]),ee=(0,p().K8)((()=>(0,N().wA)({spaceStore:(0,N().vZ)()})),[]),te=_.isDesktop&&ee&&!C,re=(0,a.useMemo)((()=>l().e.withListenerIgnored((()=>J().o.getEmojiFrecencyMap(null==k?void 0:k.id)))),[null==k?void 0:k.id]),de=(0,a.useMemo)((()=>Object.keys(re).sort(((e,t)=>re[t].f!==re[e].f?re[t].f-re[e].f:re[t].u-re[e].u)).slice(0,W().Te*Z)),[re,Z]),fe=(0,p().K8)((()=>{var e;return null!=k&&k.id?(null===(e=q().A.getData(T,{spaceId:k.id}))||void 0===e?void 0:e.pointers.map((e=>I().qg.toString(I().qg.fromPointer(e)))))??[]:[]}),[T,null==k?void 0:k.id]),he=(0,a.useCallback)((e=>{t(e),function(e,t){const o=J().o.getStore(t);if(!o)return;let n=o.state??{};const a=Date.now();for(const s in n)n[s].f=G(n[s].f,n[s].u,a);const i=(0,$().t4)(e);if(i in n?(n[i].f+=Y,n[i].u=a):n[i]={f:Y,u:a},Object.keys(n).length>J().Z){const e=Object.entries(n);e.sort(((e,t)=>e[1].f!==t[1].f?t[1].f-e[1].f:t[1].u-e[1].u)),n=Object.fromEntries(e.slice(0,J().Z))}o.setState(n)}(e,null==k?void 0:k.id),A&&D().aU(T,"pick_emoji",{icon:e,...A})}),[t,A,T,null==k?void 0:k.id]),ve=(0,Q()._)(),ye=(0,p().K8)($().bb,[]),xe=(0,a.useCallback)((e=>{const t=void 0===ye?I().Fq(e,ve):[];return{key:e,action:()=>{0===t.length&&he(e)},render:o=>(0,j.jsx)(ne().A,{...o,emoji:e,showTooltip:!0,variations:t,insertEmoji:he})}}),[he,ve,ye]),Se=(0,p().K8)((()=>{const t=function(e){const{environment:t,filter:o,isCallout:n,maxEmojisPerSection:a,showCategoriesThreshold:i,customEmojiStrings:s,shouldShowCustomAddButton:r,frequentlyUsedEmojis:l,emojiFrecencyMap:c,hideCustomEmoji:d}=e,p=function(e){return R().oE([e.filterIsEmpty?le.recent:void 0,e.isCallout?le.callout:void 0,le.people,le.nature,le.food,le.activities,le.travel,le.objects,le.symbols,le.flags,e.hideCustomEmoji?void 0:le.custom])}({filterIsEmpty:!(null!=o&&o.trim()),isCallout:n,hideCustomEmoji:d}),u=I().f7(o)??"",m=o.split(" ").filter(Boolean),g=p.map((e=>{const o=function(e,t,o){return"recent"===e.id?o:"callout"===e.id?ce:"custom"===e.id?t:Q().A.state.emojiByCategory[e.category]||[]}(e,s,l),n=function(e,t,o,n,a,i){const s=R().oE(t.map((t=>{if(i&&I().qg.isCustomEmojiString(t))return;if(""===o)return{rank:100,emoji:t};const s=(0,S().$)(t,Q().A.state);let r=[];if(s&&s.keywords)r=s.keywords||[];else if(I().qg.isCustomEmojiString(t)){var l;const o=I().qg.fromCustomEmojiString(t).pointer,n=e.currentUser.id;if(!n)return;const a=null===(l=e.defaultRecordCache.inMemoryRecordCache.getRecord({pointer:o,userId:n}))||void 0===l?void 0:l.value;if(!a||!a.alive)return;r=I().AP(a.name)}const c=o.length<3||o.includes(" ")?r:r.map((e=>e.replaceAll(" ",""))),d=o.indexOf(t);if(-1!==d)return{rank:100-d+ue(t,a),emoji:t};const p=":",u=c.findIndex((e=>e===`${p}${o}`));if(-1!==u)return{rank:100-u+ue(t,a),emoji:t};const m=c.findIndex((e=>e===o));if(-1!==m)return{rank:10*(10-m)+ue(t,a),emoji:t};const g=c.findIndex((e=>e.startsWith(o)));if(-1!==g)return{rank:10-g+ue(t,a),emoji:t};if(n.length>1){const e=s&&s.uniqueKeywords||[];if(n.every((t=>e.find((e=>e.startsWith(t))))))return{rank:n.length+ue(t,a),emoji:t}}return c.some((e=>e.includes(o)))?{rank:1+ue(t,a),emoji:t}:void 0})));return s.sort(((e,t)=>t.rank-e.rank))}(t,o,u,m,c,d);return{category:e,emojis:n.map((e=>({rank:e.rank,emoji:me(e.emoji)})))}})),f=[];let h=0;for(const{category:y,emojis:x}of g){if(r&&"custom"===y.id){const e={rank:-1/0,emoji:se};x.unshift(e)}let e=0;for(;e<x.length;){const t=x.slice(e,e+a);f.push({id:y.id,title:0===e?y.title:void 0,emojis:t}),e+=t.length}h+=x.length}if(""===o||h>i){return f.map((e=>({...e,emojis:e.emojis.map((({emoji:e})=>e))})))}const v=R().Ul(f.flatMap((e=>e.emojis)),(e=>-e.rank)).map((({emoji:e})=>e));if(0===v.length)return[];return[{emojis:v}]}({environment:T,filter:e.filter,isCallout:e.isCallout??!1,maxEmojisPerSection:Z,showCategoriesThreshold:Math.floor(Z*X/2),customEmojiStrings:fe,shouldShowCustomAddButton:te,frequentlyUsedEmojis:de,emojiFrecencyMap:re,hideCustomEmoji:C});return t}),[T,e.filter,e.isCallout,Z,X,te,fe,de,re,C]),Ie=(0,a.useRef)(null),be=(0,a.useMemo)((()=>{const e=[];for(const[t,o]of Se.entries()){let n;n=r().A.isMobile?W().UA:W().Sq;const a=void 0!==o.title,i=t===Se.length-1||void 0!==Se[t+1].title;a&&(r().A.isMobile?n+=47.5:n+=33.5),i&&r().A.isMobile&&(n+=10),e.push(n)}return e}),[Se]),je=(0,n().Te)({count:Se.length,getScrollElement:()=>Ie.current,estimateSize:e=>be[e]}),Ae=(0,a.useCallback)((e=>{const t=Se.findIndex((t=>t.id===e));-1!==t&&je.scrollToIndex(t,{behavior:"auto",align:"start"})}),[je,Se]),we=(0,a.useRef)(null);(0,d().w)((()=>{!async function(){await(0,U().y)(),await async function(){if(!pe){await Q().A.waitUntilLoaded();for(const t in Q().A.state.positionalEmojiData){var e;const o=null===(e=(0,S().$)(t,Q().A.state))||void 0===e?void 0:e.keywords;o&&(x().fB[t]={...x().fB[t],uniqueKeywords:R().sb(o.flatMap((e=>e.split(" "))))})}pe=!0}}()}()}));const Ce=(0,p().uB)(void 0,y().$);(0,d().l)((()=>{Ce.setState({...Ce.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}));const ke=te?1===Se.length&&Se[0].emojis[0]===se:0===Se.length;(0,a.useEffect)((()=>{ke?Ce.unsetFocus():Ce.setState({...Ce.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}),[e.filter,Ce,ke]);const Te=(0,a.useMemo)((()=>te?{key:"custom-emoji-add",action:()=>{we.current&&K().A.setState({open:!0,isEditing:!1,entrypoint:"picker",originRect:we.current.getBoundingClientRect(),uploadFileEventHandlers:b})},render:e=>(0,j.jsx)(f().m,{renderTooltip:()=>ie,render:t=>(0,j.jsx)(u().Ay,{...e,...t,ref:we,ignoreLocalHoverState:!1,style:{width:28,height:28,margin:2,display:"flex",justifyContent:"center",alignItems:"center",border:`1px solid ${E().Tj.border.primary}`,cursor:"pointer",borderRadius:15},children:(0,j.jsx)(m().I,{icon:P().plusSmallIcon,size:"sm",colorVariant:"secondary"})})})}:null),[b,te]),Me=[];let Pe,_e=!1;if(ke)Me.push({key:"no results",items:[{key:"no results",action:()=>{we.current&&te&&K().A.setState({open:!0,isEditing:!1,entrypoint:"no_results",originRect:we.current.getBoundingClientRect(),uploadFileEventHandlers:b})},render:(e,t)=>(0,j.jsxs)("div",{style:{...o&&{width:"100%"},display:"flex",flexDirection:o?"row":"column"},children:[(0,j.jsx)(V().A,{...!te&&e,caption:M.formatMessage(ae.noResults),style:{fontWeight:L().Wy.medium,marginBottom:2,marginInlineStart:2,height:20,boxSizing:"content-box"}}),te?(0,j.jsxs)(u().Ay,{...e,ref:we,style:{display:"flex",alignItems:"center",gap:6,padding:"4px 8px",margin:o?"2px 8px":"0 12px",height:28,borderRadius:6,border:`1px solid ${E().Tj.border.primary}`,fontWeight:L().Wy.medium,fontSize:L().J.UIRegular.desktop,whiteSpace:"nowrap"},children:[(0,j.jsx)(m().I,{icon:P().plusSmallIcon,size:"sm",colorVariant:"primary"}),ie]}):null]})}],render:e=>(0,j.jsx)(v().A,{...e})});else if(1===Se.length&&void 0===Se[0].id){const e=R().sb(Se[0].emojis).map((e=>e===se?Te:xe(e))).filter(O().Pe);Me.push({key:"search-results",items:e,render:e=>(0,j.jsx)(v().A,{shouldShowBottomDivider:!0,children:(0,j.jsx)("div",{style:(0,H().ze)(T,B),children:e.children})},e.key)})}else _e=!0,je.getVirtualItems().map((e=>{var t;const{key:o,index:n,start:a,end:i,size:s}=e,l=Se[n],c=void 0!==l.title,d=n===Se.length-1||void 0!==Se[n+1].title,[p,u]=[je.scrollOffset??0,(je.scrollOffset??0)+((null===(t=je.scrollRect)||void 0===t?void 0:t.height)??0)];u<a||p>=i||void 0===Pe&&(Pe=l.id);const m=l.emojis.map((e=>e===se?Te:xe(e))).filter(O().Pe);return{key:o.toString(),items:m,render:e=>(0,j.jsx)("div",{style:{position:"absolute",top:0,insetInlineStart:0,width:"100%",height:s,transform:`translateY(${a}px)`},children:(0,j.jsx)("div",{"data-index":n,children:(0,j.jsx)(v().A,{title:l.title,disableDesktopPadding:!0,disableMobilePadding:!0,disableMobileBorders:!0,mobileTitleStyle:{...c?{paddingTop:16}:{}},desktopTitleStyle:{...c?{paddingTop:6,lineHeight:"100%"}:{}},style:{display:"flex",flexDirection:"column",alignItems:"stretch"},children:(0,j.jsx)("div",{style:{...(0,H().ze)(T,B),...c&&r().A.isMobile?{paddingTop:10}:{},...d&&r().A.isMobile?{paddingBottom:10}:{},..._.isPhone&&{boxShadow:ge({isFirstRowInSection:c,isLastRowInSection:d})}},children:e.children})})},o.toString())},n)}})).forEach((e=>e&&Me.push(e)));const Be=_.isDesktop&&Me.length>0?0:void 0,Fe=(0,j.jsx)(h().A,{style:{alignItems:"stretch",width:"100%",position:"relative",height:"100%"},type:h().O.Grid,getItemsPerRowForSection:()=>Z,renderRow:(e,t)=>(0,j.jsx)("div",{role:"row",style:{display:"flex"},children:e},t),store:Ce,initialFocus:Be,sections:Me,disableKeyboardArrowWrap:!0,unfocusOnScroll:r().A.isMobile,performHandleEnterOnTab:o,comboboxProps:w,captureKeyboardOnlyWhenFocused:!o});if(!_e)return(0,j.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:(0,j.jsx)("div",{style:{width:"100%",flexGrow:1},children:Fe})});const Ee=(0,j.jsx)(oe,{isHidden:e=>{switch(e.id){case"callout":return!0;case"custom":return C||!ee&&0===fe.length;case"add":return!te;default:return!1}},isFocused:e=>Pe===e.id,isDisabled:e=>{if(["custom","add"].includes(e.id))return!1;const t=Se.find((t=>t.id===e.id));return void 0===t||0===t.emojis.length},onCategoryClick:(e,t)=>{"add"===e.id?K().A.setState({open:!0,isEditing:!1,entrypoint:"categories_bar",originRect:t.currentTarget.getBoundingClientRect(),uploadFileEventHandlers:b}):Ae(e.id)}});return(0,j.jsxs)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:[(0,j.jsx)("div",{style:{width:"100%",flexGrow:1,maxHeight:_.isDesktop?W().w$:void 0,overflowX:"hidden",overflowY:"auto",paddingBottom:6},ref:Ie,children:(0,j.jsx)("div",{style:{height:je.getTotalSize(),width:"100%",position:"relative"},children:Fe})}),Ee]})}let pe=!1;function ue(e,t){const o=t[e];return o?100*o.f:0}function me(e){var t;const o=(0,$().bb)();if(!(void 0!==o&&0!==o))return e;const n=null===(t=(0,S().$)(e,Q().A.state))||void 0===t?void 0:t.variations;return 5===(null==n?void 0:n.length)||"🤝"===e?(null==n?void 0:n[o-1])??e:e}function ge(e){const{isFirstRowInSection:t,isLastRowInSection:o}=e;return t&&o?`0 1px 0 ${E().Tj.border.secondaryTranslucent}, 0 -1px 0 ${E().Tj.border.secondaryTranslucent}`:t?`0 -1px 0 ${E().Tj.border.secondaryTranslucent}`:o?`0 1px 0 ${E().Tj.border.secondaryTranslucent}`:"none"}},835539:(e,t,o)=>{o.d(t,{s:()=>l});o(296540);var n=()=>o(249046),a=()=>o(406094),i=()=>o(160432),s=()=>o(26697),r=o(474848);function l({left:e,next:t,back:o,children:l}){return(0,r.jsxs)(n().Ye,{justifyContent:"space-between",alignItems:"center",children:[e,(0,r.jsxs)(n().Ye,{alignItems:"center",gap:12,children:[l,(0,r.jsxs)("div",{style:{gap:2},children:[(0,r.jsx)(s().m,{placement:"top",alignment:"end",render:e=>(0,r.jsx)(a().A,{size:"lg",style:{border:0},disabled:o.disabled,onClick:o.onClick,...e,children:o.message}),disableTooltip:!o.renderTooltip,renderTooltip:o.renderTooltip||(()=>null)}),(0,r.jsx)(s().m,{placement:"top",alignment:"end",render:e=>(0,r.jsx)(i().A,{colorPalette:"blue",style:{marginInlineStart:16},disabled:t.disabled,onClick:t.onClick,...e,children:t.message}),disableTooltip:!t.renderTooltip,renderTooltip:t.renderTooltip||(()=>null)})]})]})]})}},850913:(e,t,o)=>{o.d(t,{D:()=>i,u:()=>a});o(898992),o(737550);var n=()=>o(557504);function a(e){return e?{requireEditPermissions:n().z.requireEditPermissions(e.requireEditPermissions),isDeletedOnly:n().z.isDeletedOnly(e.isDeletedOnly),excludeTemplates:n().z.excludeTemplates(e.excludeTemplates),navigableBlockContentOnly:n().z.navigableBlockContentOnly(e.navigableBlockContentOnly),ancestors:n().z.ancestors(e.ancestors),parentId:n().z.parentId(e.parentId),createdBy:n().z.createdBy(e.createdBy),editedBy:n().z.editedBy(e.editedBy),createdTime:n().z.createdTime(e.createdTime),lastEditedTime:n().z.lastEditedTime(e.lastEditedTime),blockTypes:n().z.blockTypes(e.blockTypes),inTeams:n().z.inTeams(e.inTeams),dev_excludedPages:n().z.dev_excludedPages(e.dev_excludedPages),dev_excludedTeams:n().z.dev_excludedTeams(e.dev_excludedTeams),verificationOwners:n().z.verificationOwners(e.verificationOwners),isOfflineOnly:n().z.isOfflineOnly(e.isOfflineOnly),excludedParentCollectionIds:n().z.excludedParentCollectionIds(e.excludedParentCollectionIds),contentStatusFilter:n().z.contentStatusFilter(e.contentStatusFilter)}:{requireEditPermissions:!1,isDeletedOnly:!1,excludeTemplates:!1,navigableBlockContentOnly:!1,ancestors:!1,parentId:!1,createdBy:!1,editedBy:!1,createdTime:!1,lastEditedTime:!1,blockTypes:!1,inTeams:!1,dev_excludedPages:!1,dev_excludedTeams:!1,verificationOwners:!1,isOfflineOnly:!1,excludedParentCollectionIds:!1,contentStatusFilter:!1}}function i(e){const t=a(e);return Object.values(t).some((e=>Boolean(e)))}},866741:(e,t,o)=>{o.r(t),o.d(t,{CsvImportModal:()=>Pt});var n=o(296540),a=()=>o(135168),i=()=>o(590526),s=()=>o(394888),r=()=>o(699143),l=()=>o(534177),c=()=>o(683522),d=(o(16280),o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577),o(430670),o(803949),o(581454),o(737550),()=>o(971752)),p=()=>o(484714),u=()=>o(401497),m=()=>o(757695),g=()=>o(295633),f=()=>o(732810),h=()=>o(569797),v=()=>o(249046),y=()=>o(807449),x=()=>o(98126),S=()=>o(406094),I=()=>o(631524),b=()=>o(160432),j=()=>o(493552),A=()=>o(287188),w=()=>o(584262),C=()=>o(898244),k=()=>o(258035),T=()=>o(165358),M=()=>o(416504),P=()=>o(187174),_=()=>o(52404),B=()=>o(940563),F=()=>o(206267),E=()=>o(754199),R=()=>o(179034),O=()=>o(519831),L=()=>o(869558),D=()=>o(69708),V=()=>o(100622),z=()=>o(319625),N=()=>o(229833),U=()=>o(498212),W=()=>o(183558),H=()=>o(284371);const q=(0,o(583835).Dv)("importCSVPartial");var K=()=>o(609316),$=()=>o(559926),Y=()=>o(357625),Z=()=>o(722101),G=()=>o(44729),J=()=>o(384944),Q=()=>o(185544),X=()=>o(907808),ee=()=>o(339798),te=()=>o(58415),oe=()=>o(680288),ne=()=>o(403905),ae=()=>o(586481),ie=()=>o(492414),se=()=>o(171598),re=()=>o(404141),le=()=>o(547149),ce=()=>o(712341),de=()=>o(609819),pe=()=>o(114282),ue=()=>o(175167),me=()=>o(238643);const ge=4194304;function fe(e){const t=new TextEncoder,o=e.map((e=>e.includes(",")||e.includes("\n")||e.includes('"')?`"${e.replace(/"/g,'""')}"`:e)).join(",");return t.encode(o).byteLength}function he(e,t,o=100){if(0===e.length)return o;const n=Math.min(5,e.length),a=function(e,t){const o=new TextEncoder;let n=0;for(const a of e)n+=850+80*t.length,a.forEach(((e,a)=>{e&&e.trim()&&(n+=o.encode(t[a]||"").byteLength,n+=o.encode(e).byteLength+20)}));return n+=2e3,n}(e.slice(0,n),t),i=a/n,s=.8*(0,me().He)(),r=Math.floor(s/i);return Math.max(10,Math.min(r,o))}var ve=()=>o(270858),ye=()=>o(191227),xe=()=>o(611648),Se=()=>o(302501),Ie=()=>o(566910),be=()=>o(421559),je=()=>o(485569),Ae=()=>o(376254),we=()=>o(106412),Ce=o(474848);const ke=36,Te=(0,D().YK)({previewDefaultName:{id:"csvImport.preview.defaultName",defaultMessage:"Preview"}});function Me({previewCollection:e,onSetCollectionContextStore:t,validationState:o}){const a=(0,i().O$)(c().fu),s=(0,D().tz)(),l=(0,n.useMemo)((()=>({location:"csv_import",isPreviewing:!0,disableHeaderPointerEvents:!0,disableEditsAndConfiguration:!0,disableContentPointerEvents:!0,disablePageLinks:!0,hideAggregation:!0,hideViewBlockSource:!0,enableHorizontalScroll:!1})),[]),d=(0,n.useCallback)((e=>{t&&t(e)}),[t]),p=(0,u().IS)((()=>({container:{position:"relative",backgroundColor:V().Tj.background.primary,height:"100%",paddingTop:ke,overflowY:"auto",borderRadius:12,border:`1px solid ${V().Tj.border.primary}`},titleWrapper:{display:"flex",alignItems:"center",paddingInlineStart:ke,marginTop:4,marginInlineEnd:0,marginBottom:12,marginInlineStart:0,gap:12},titleText:{fontSize:20,fontWeight:600,lineHeight:"26px",whiteSpace:"pre-line",marginInlineStart:0},previewScroller:{height:"100%",paddingBottom:ke-8},errorPreview:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"calc(100% - 60px)",color:V().Tj.text.secondary,fontSize:16,gap:9},errorMessage:{textAlign:"center",maxWidth:"80%",color:V().Tj.text.secondary},errorTitle:{color:V().Tj.text.secondary,textAlign:"center",fontSize:14,fontWeight:H().Wy.medium,lineHeight:"20px"}})),[]);return a.open?o?(0,Ce.jsx)(r().Y1,{height:"fill",style:p.container,children:(0,Ce.jsxs)(v().wt,{style:p.errorPreview,children:[(0,Ce.jsx)(y().I,{icon:Ie().e,size:"xl",colorPalette:"gray",colorVariant:"disabled"}),(0,Ce.jsx)(Se().A,{style:p.errorTitle,children:(0,Ce.jsx)(D().sA,{id:"csv-import-preview.error.title",defaultMessage:"Preview Unavailable"})}),(0,Ce.jsx)(Se().A,{style:p.errorMessage,children:o.multipleTitle?(0,Ce.jsx)(D().sA,{id:"csv-import-preview.error.multipleTitle",defaultMessage:"You can only have one Title property."}):o.noTitle?(0,Ce.jsx)(D().sA,{id:"csv-import-preview.error.noTitle",defaultMessage:"At least one column must be set as a Title property."}):(0,Ce.jsx)(D().sA,{id:"csv-import-preview.error.invalidPropertyConfiguration",defaultMessage:"Invalid property configuration. Please check your column mappings."})})]})}):e?(0,Ce.jsxs)(r().Y1,{height:"fill",style:p.container,children:[(0,Ce.jsxs)("div",{style:p.titleWrapper,children:[(0,Ce.jsx)(y().I,{icon:be().T,size:"xl",colorVariant:"primary"}),(0,Ce.jsx)(Se().A,{style:p.titleText,children:a.fileName.replace(/\.csv$/i,"")||s.formatMessage(Te.previewDefaultName)})]}),(0,Ce.jsx)(Ae().H,{type:xe().A.All,style:p.previewScroller,children:(0,Ce.jsx)(we().tx,{value:l,children:(0,Ce.jsx)(je().dN,{store:e.collectionViewBlockStore,disabled:!0,forceLocalQueryCollection:!0,headerActionsBehavior:"hidden",overridePaddingLeft:ke,overridePaddingRight:ke,setCollectionContextStore:d,productUseCase:"preview_collection"})})})]}):(0,Ce.jsx)(r().Y1,{height:"fill",style:p.container,children:(0,Ce.jsxs)("div",{style:p.titleWrapper,children:[(0,Ce.jsx)(y().I,{icon:be().T,size:"xl",colorVariant:"primary"}),(0,Ce.jsx)(Se().A,{style:p.titleText,children:a.fileName.replace(/\.csv$/i,"")||s.formatMessage(Te.previewDefaultName)})]})}):null}function Pe(e){const{schema:t,rowData:o,headers:n,userPropertyMapping:a,selectOptionTracker:i,pendingSelectOptionAdds:s}=e,r={},l=new Map(a.map((e=>[e.headerName,e])));return n.forEach(((e,n)=>{const a=o[n];if(!a||""===a.trim())return;const c=l.get(e);if("dont_import"===(null==c?void 0:c.propertyType))return;let d,p=null==c?void 0:c.propertyId;if(p&&(d=t[p]),!d){const o=Object.entries(t).find((([,t])=>(null==t?void 0:t.name)===e));o&&(p=o[0],d=o[1])}if(!d&&"title"===(null==c?void 0:c.propertyType)){const e=Object.entries(t).find((([,e])=>"title"===(null==e?void 0:e.type)));e&&(p=e[0],d=e[1])}if(!p||!d)return;const u=a.trim();if(""!==u)switch(d.type){case"multi_select":{var m;const e=u.split(",").map((e=>e.trim())).filter(Boolean);if(0===e.length)break;const t=i.get(p)??new Set((null===(m=d.options)||void 0===m?void 0:m.map((e=>e.value)))??[]),o=s.get(p)??new Set;e.forEach((e=>{t.has(e)||(t.add(e),o.add(e))})),i.set(p,t),o.size>0&&s.set(p,o),r[p]=e.map((e=>[e]));break}case"select":case"status":{var g;const e=i.get(p)??new Set((null===(g=d.options)||void 0===g?void 0:g.map((e=>e.value)))??[]);if(!e.has(u)){e.add(u),i.set(p,e);const t=s.get(p)??new Set;t.add(u),s.set(p,t)}r[p]=[[u]];break}case"checkbox":{const e=u.toLowerCase(),t=new Set(["true","yes","1","✓","checked"]);r[p]=t.has(e)?[["Yes"]]:[["No"]];break}case"number":{const e=Number(u);r[p]=[[Number.isNaN(e)?u:String(e)]];break}case"url":{const e=/^(?:[a-z]+:\/\/)/i.test(u)?u:`https://${u}`;r[p]=[[e]];break}default:r[p]=[[u]]}})),r}function _e(e){const{collectionStore:t,pendingSelectOptionAdds:o,transaction:n}=e;if(0===o.size)return;const a=t.getKeyStore("schema").getValue();if(!a)return;const i={};o.forEach(((e,t)=>{if(0===e.size)return;const o=a[t];if(!o||!("options"in o)||!Array.isArray(o.options))return;const n=o.options??[],s=new Set(n.map((e=>e.value.toLowerCase()))),r=[];e.forEach((e=>{const t=e.trim();if(!t||s.has(t.toLowerCase()))return;const o=[...n,...r];r.push({id:(0,W().Ay)(),value:t,color:(0,C().Zd)(o)}),s.add(t.toLowerCase())})),r.length>0&&(i[t]={...o,options:[...n,...r]})})),0!==Object.keys(i).length&&J().zv({store:t,data:{schema:{...a,...i}},transaction:n})}o(823215);var Be=()=>o(512039),Fe=()=>o(342),Ee=()=>o(507807);function Re(e,t,o,n){if(!e||!t)return[];const a=t.findIndex((e=>e===o));if(void 0===a||-1===a||0===e.length)return[];const i=e.map((e=>e[a])).filter((e=>"string"==typeof e&&""!==e)),s="multi_select"===n?i.flatMap((e=>e.split(","))).map((e=>e.trim())).filter((e=>""!==e)):i.map((e=>e.trim())).filter((e=>""!==e)),r=new Set;return s.filter((e=>{const t=e.toLowerCase();return!r.has(t)&&(r.add(t),!0)})).map((e=>({id:(0,W().Ay)(),value:e,color:(0,C().Zd)([])})))}function Oe(e){const{spaceStore:t}=e,o=(0,p().v3)(),a=(0,D().tz)(),s=(0,i().O$)(c().fu),[r,l]=(0,n.useState)(void 0),d=(0,Ee().S)(Fe().o8,{canUndo:!0}),u=(0,n.useRef)(void 0),m=(0,n.useRef)(void 0),[v,y]=(0,n.useState)(void 0),x=(0,n.useRef)([]),S=(0,n.useRef)(!1),[I,b]=(0,n.useState)(void 0),j=(0,n.useCallback)(((e=[])=>{const t=x.current.find((e=>"title"===e.propertyType)),o=e.find((e=>"title"===e.propertyType));return(null==t?void 0:t.headerName)!==(null==o?void 0:o.headerName)||t&&e.find((e=>e.headerName===t.headerName&&"dont_import"===e.propertyType))}),[]),A=(0,n.useCallback)((()=>{u.current=void 0,S.current=!1,y(void 0),d.reset(),c().fu.setPreviewCollectionInfo(void 0)}),[d]);return(0,n.useEffect)((()=>{if(!s.open)return void b(void 0);const e=s;if("merge"!==e.importType||!e.importLocation||!e.spaceId)return void b(void 0);let t=!1;return(async()=>{try{const n=new(f().m)(o,{id:e.importLocation,spaceId:e.spaceId,table:O().Vl});if(await n.load(),!t){const e=n.getSchema(),t={};for(const[o,n]of Object.entries(e))n&&(t[o]=n);b(t)}}catch(n){t||b(void 0)}})(),()=>{t=!0}}),[s,o]),(0,n.useEffect)((()=>{if(!s.open||!s.csvHeaders||!s.csvSampleRows||0===s.csvHeaders.length)return;const e=s.userPropertyMapping||[],n=e.filter((e=>"title"===e.propertyType)),i=0===n.length,r=n.length>1;if(i&&"merge"!==s.importType||r)return l({noTitle:"merge"!==s.importType&&i,multipleTitle:r}),void A();l(void 0);const p=j(e),f="merge"===s.importType&&Boolean(I),v=f&&!S.current,b=s.userPropertyMapping||[];let w=!1;const C=m.current;if(C)if(b.length!==C.length)w=!0;else for(const t of b){const e=C.find((e=>e.headerName===t.headerName));if(!e){w=!0;break}const o="dont_import"===e.propertyType,n="dont_import"===t.propertyType;if(e.propertyId!==t.propertyId||o!==n){w=!0;break}}x.current=[...e];const k=!u.current||p||v||w;if(s.csvHeaders.every((t=>{const o=e.find((e=>e.headerName===t));return"dont_import"===(null==o?void 0:o.propertyType)})))return void A();if(u.current&&!k)return;k&&u.current&&A();const{performResult:T}=(0,le().createAndCommit)({userAction:"csvImport.previewCollection",environment:o,perform:e=>{const n=J().Wv({environment:o,type:"collection_view_page",inMemoryRecordCache:d.cache,transaction:e});if(!t)throw new Error("No space store");const i=t.id,{parentId:r,parentTable:l}=s,c=r||i,p=l||"space";let u;J().zv({store:n,data:{parent_id:c,parent_table:p,space_id:i,alive:!0},transaction:e});const m=s.userPropertyMapping||[];if("merge"===s.importType&&I){var f;u={};const e=new Set,t=t=>{if(!e.has(t)){const o=I[t];o&&(u[t]=o,e.add(t))}};null===(f=s.csvHeaders)||void 0===f||f.forEach((o=>{const n=m.find((e=>e.headerName===o));if("dont_import"===(null==n?void 0:n.propertyType))return;if(null!=n&&n.propertyId&&I[n.propertyId])return void t(n.propertyId);const a=Object.entries(I).find((([e,t])=>(null==t?void 0:t.name)===o));if(a)return void t(a[0]);const i=(null==n?void 0:n.propertyType)||"text",r=(0,W().Ay)(),l="select"===i||"multi_select"===i?{name:o,type:i,options:Re(s.csvSampleRows,s.csvHeaders,o,i)}:{name:o,type:i};u[r]=l,e.add(r)})),Object.keys(I).forEach((e=>{t(e)}))}else{var v;u={};const e=m.find((e=>"title"===e.propertyType));let t=null==e?void 0:e.headerName;!t&&s.csvHeaders&&s.csvHeaders.length>0&&(t=s.csvHeaders[0]),u.title={name:t||"Title",type:"title"},null===(v=s.csvHeaders)||void 0===v||v.forEach((e=>{if(e===t)return;const o=m.find((t=>t.headerName===e)),n=(null==o?void 0:o.propertyType)||"text";if("dont_import"===n)return;const a=(0,W().Ay)();let i;switch(n){case"select":case"multi_select":i={name:e,type:n,options:Re(s.csvSampleRows,s.csvHeaders,e,n)};break;case"checkbox":case"number":case"date":case"email":case"phone_number":case"url":case"person":i={name:e,type:n};break;default:i={name:e,type:"text"}}u[a]=i}))}const y=(0,te().E)({environment:o,collectionViewBlockStore:n,transaction:e,collectionValue:{name:[["CSV Preview"]],schema:u}}),x=(0,U().Ay)(),S=h().p.createChildStore(n,{table:L().Gy,id:x});J().zv({store:S,data:{id:x,version:1,type:"table",name:a.formatMessage(ne().X.table),format:{table_wrap:!0,table_properties:Object.entries(u).map((([e,t])=>({property:e,visible:!0,width:250}))),collection_pointer:{id:y.id,table:O().Vl,spaceId:i}},parent_id:n.id,parent_table:"block",space_id:i,alive:!0,query2:{aggregations:[],sort:[],filter:{operator:"and",filters:[]}}},transaction:e}),Z().BC({parentStore:n.getCollectionViewsStore(),appendStore:S,transaction:e});const b=[];if(new(Be().B)(o).setContext({type:"collectionView",collectionViewBlockStore:n,collectionStore:y,collectionViewStore:S,pageVisitSourceOverride:void 0}),s.csvSampleRows&&s.csvSampleRows.length>0){s.csvSampleRows.slice(0,5).forEach(((t,n)=>{const a=(0,U().Ay)();b.push(a);const r=new(g().B)(o,{table:R().ev,id:a},{inMemoryRecordCache:d.cache}),l=function(e,t,o,n){const a={},i=new Map;return n.forEach((e=>{i.set(e.headerName,{propertyId:e.propertyId})})),o.forEach(((o,n)=>{if(n>=t.length)return;const s=t[n];if(!s||""===s.trim())return;let r,l;const c=i.get(o);if(null!=c&&c.propertyId&&e[c.propertyId])r=c.propertyId,l=e[r];else{const t=Object.entries(e).find((([e,t])=>t.name===o));t&&(r=t[0],l=t[1])}if(r&&l)try{switch(l.type){case"title":case"text":case"date":default:a[r]=[[s]];break;case"number":const e=parseFloat(s);a[r]=isNaN(e)?[[s]]:[[e.toString()]];break;case"select":{const e=s.trim();a[r]=[[e]];break}case"multi_select":{const e=s.split(",").map((e=>e.trim())).filter((e=>""!==e));e.length>0&&(a[r]=e.map((e=>[e])));break}case"checkbox":const t=s.toLowerCase().trim(),o="true"===t||"yes"===t||"1"===t||"✓"===t||"checked"===t;a[r]=o?[["Yes"]]:[["No"]];break;case"url":let n=s.trim();n&&!n.match(/^[a-zA-Z]+:\/\//)&&(n=`https://${n}`),a[r]=[[n]];break;case"email":case"phone_number":case"person":a[r]=[[s.trim()]]}}catch(d){a[r]=[[s]]}})),a}(u,t,s.csvHeaders||[],s.userPropertyMapping||[]);J().zv({store:r,data:{id:a,version:1,type:"page",parent_id:y.id,parent_table:"collection",space_id:i,alive:!0},transaction:e}),l&&Object.keys(l).length>0&&ae().C({environment:o,store:r,properties:l,transaction:e}),G().X$({parentStore:y,childStore:r,transaction:e})}))}return{collectionStore:y,collectionViewBlockStore:n,collectionViewStore:S}},canUndo:!0});T&&(u.current=T,S.current=f,y(T),c().fu.setPreviewCollectionInfo(T),m.current=JSON.parse(JSON.stringify(b)))}),[s,o,d,t,A,j,I,a]),{previewCollection:v,validationState:r}}var Le=()=>o(250910),De=()=>o(546926),Ve=()=>o(890492),ze=()=>o(81068),Ne=()=>o(663639),Ue=()=>o(736847),We=()=>o(852424),He=()=>o(597777),qe=()=>o(340498),Ke=()=>o(419357),$e=()=>o(662971);const Ye=(0,D().YK)({searchPlaceholder:{id:"csvImport.mapFieldsStep.searchPlaceholder",defaultMessage:"Search property types..."},titleBadge:{id:"csvImport.mapFieldsStep.titleBadge",defaultMessage:"Title"},existingPropertyHeader:{id:"csvImport.mapFieldsStep.existingPropertyHeader",defaultMessage:"Existing property"}});function Ze(e,t){const o=t.find((t=>t.type===e&&!t.isExistingProperty));return(null==o?void 0:o.name)||"Text"}const Ge=n.memo((function({index:e,header:t,selectedType:a,selectedPropertyId:i,inferredType:s,onSelectType:r,allPropertyTypes:l=k().Pl,isMergeFlow:c,selectedFormat:d}){const p=(0,u().DP)(),m=(0,D().tz)(),g=(()=>{if(i){const e=l.find((e=>e.propertyId===i&&e.isExistingProperty));if(e)return e.name}const e=a?Ze(a,l):s?Ze(s,l):m.formatMessage(Je.dontImport);if(("date"===a||!a&&"date"===s)&&d){return`${e} • ${m.formatMessage(He().xz[d])}`}return e})(),[f,h]=(0,n.useState)(""),x=(0,n.useMemo)((()=>f?l.filter((({name:e})=>e.toLowerCase().includes(f.toLowerCase()))):l),[l,f]);function S(){if("dont_import"===a)return(0,Ce.jsx)(y().I,{icon:Ie().e,size:16,colorVariant:"tertiary"});if(i){const e=l.find((e=>e.propertyId===i&&e.isExistingProperty));if(e)return"dont_import"===e.type?(0,Ce.jsx)(y().I,{icon:Ie().e,size:16,colorVariant:"tertiary"}):(0,Ce.jsx)(We().zB,{type:e.type,size:qe().Ev.sm,icon:void 0,theme:p})}return(0,Ce.jsx)(We().zB,{type:a||s||"text",size:qe().Ev.sm,icon:void 0,theme:p})}return(0,Ce.jsx)(Le().A,{popupType:Le().z.Popup,placementToOrigin:"right",renderOrigin:e=>(0,Ce.jsxs)(I().p,{...e,style:{width:"100%",padding:"2px 6px",border:`1px solid ${V().Tj.border.primary}`,borderRadius:4,justifyContent:"space-between",height:32,background:V().Tj.background.elevated},children:[(0,Ce.jsxs)(v().Ye,{style:{gap:8,flex:1,overflow:"hidden"},children:[S(),(0,Ce.jsx)("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:"dont_import"===a?V().Tj.text.tertiary:void 0},children:g})]}),(0,Ce.jsx)(y().I,{icon:o(324254).arrowChevronSingleDownSmallIcon,size:"xxs",colorVariant:"secondary"})]}),render:t=>{const n={menuType:De().gu.Popup,width:240},l=x.find((e=>"dont_import"===e.type&&!e.isExistingProperty)),d=x.filter((e=>!(e.isExistingProperty||"dont_import"===e.type||!c&&"status"===e.type||!c&&"person"===e.type||c&&"title"===e.type))).map((({type:o,name:n})=>({key:o,action:()=>{"date"!==o&&(r(e,n),t.close())},render:l=>"date"===o?(0,Ce.jsx)($e().A,{...l,renderOrigin:(e,t)=>(0,Ce.jsx)(ze().A,{...e,ref:t,title:n,icon:(0,Ce.jsx)(We().zB,{type:o,size:qe().Ev.sm,icon:void 0,theme:p}),isChecked:!i&&(a===o||!a&&s===o)}),renderExtension:(o,a)=>{const i=He().wJ.filter((e=>"relative"!==e)).map((o=>({key:o,action:()=>{r(e,n,void 0,o),a.close(),t.close()},render:e=>(0,Ce.jsx)(ze().A,{...e,title:m.formatMessage(He().xz[o])})})));return(0,Ce.jsx)(Ve().A,{menuType:De().gu.Popup,width:240,...o,children:(0,Ce.jsx)(Ne().A,{type:Ne().O.Vertical,initialFocus:0,sections:[{key:"dateFormats",render:e=>(0,Ce.jsx)(Ue().A,{...e}),items:i}]})})},onFocus:()=>{}}):(0,Ce.jsx)(ze().A,{...l,title:n,icon:(0,Ce.jsx)(We().zB,{type:o,size:qe().Ev.sm,icon:void 0,theme:p}),isChecked:!i&&(a===o||!a&&s===o)})}))),u=l?{key:"dont_import",action:()=>{r(e,l.name),t.close()},render:e=>(0,Ce.jsx)(ze().A,{...e,title:l.name,titleStyle:{color:V().Tj.text.primary},icon:(0,Ce.jsx)(y().I,{icon:Ie().e,size:16,colorVariant:"secondary"}),isChecked:!i&&"dont_import"===a})}:null,g=x.filter((e=>e.isExistingProperty&&null!==e)).map((({type:n,name:a,propertyId:s})=>({key:`existing-${s}`,action:()=>{r(e,a,s),t.close()},render:e=>(0,Ce.jsx)(ze().A,{...e,title:a,icon:"dont_import"===n?(0,Ce.jsx)(y().I,{icon:Ie().e,size:16,colorVariant:"tertiary"}):(0,Ce.jsx)(We().zB,{type:n,size:qe().Ev.sm,icon:void 0,theme:p}),isChecked:i===s,badge:"title"===n?(0,Ce.jsx)(o(970236).E,{content:m.formatMessage(Ye.titleBadge),color:"gray"}):void 0})}))),v=[];if(c){const e=[];u&&e.push(u),e.push(...g),e.length>0&&v.push({key:"existingProperties",render:e=>(0,Ce.jsx)(Ue().A,{...e,title:m.formatMessage(Ye.existingPropertyHeader)}),items:e});const t={key:"add-new-property",action:()=>{},render:e=>(0,Ce.jsx)($e().A,{...e,renderOrigin:(e,t)=>(0,Ce.jsx)(ze().A,{...e,ref:t,icon:(0,Ce.jsx)(y().I,{icon:o(617668).plusIcon}),title:"Add new property"}),renderExtension:(e,t)=>{const o=d.map((e=>({...e,action:()=>{e.action(),t.close()}})));return(0,Ce.jsx)(Ve().A,{menuType:De().gu.Popup,width:240,...e,children:(0,Ce.jsx)(Ne().A,{type:Ne().O.Vertical,initialFocus:0,sections:[{key:"newPropertyTypes",render:e=>(0,Ce.jsx)(Ue().A,{...e}),items:o}]})})},onFocus:()=>{}})};v.push({key:"addNewPropertySection",render:t=>(0,Ce.jsx)(Ue().A,{...t,topBorder:e.length>0}),items:[t]})}else{const e=[];u&&e.push(u),e.push(...d),v.push({key:"basePropertyTypes",render:e=>(0,Ce.jsx)(Ue().A,{...e}),items:e})}return(0,Ce.jsxs)(Ve().A,{...n,children:[(0,Ce.jsx)(Ue().A,{shouldShowBottomDivider:!1,children:(0,Ce.jsx)(Ke().Ay,{focusInitial:!0,value:f,onChange:e=>h(e.target.value),placeholder:m.formatMessage(Ye.searchPlaceholder),showClearButton:!0})}),(0,Ce.jsx)(Ne().A,{type:Ne().O.Vertical,initialFocus:0,sections:v})]})}})})),Je=(0,D().YK)({heading:{id:"csvImport.mapFieldsStep.heading",defaultMessage:"Setup CSV columns"},description:{id:"csvImport.mapFieldsStep.description",defaultMessage:"Choose the property type for each column\nin your CSV file"},useFirstRowAsHeaders:{id:"csvImport.mapFieldsStep.useFirstRowAsHeaders",defaultMessage:"Use first row as headers"},importButton:{id:"csvImport.mapFieldsStep.importButton",defaultMessage:"Import CSV"},cancelButton:{id:"csvImport.mapFieldsStep.cancelButton",defaultMessage:"Cancel"},csvFileColumnsHeader:{id:"csvImport.mapFieldsStep.csvFileColumnsHeader",defaultMessage:"CSV File Columns"},propertyTypeHeader:{id:"csvImport.mapFieldsStep.propertyTypeHeader",defaultMessage:"Property Type"},processingFile:{id:"csvImport.mapFieldsStep.processingFile",defaultMessage:"Processing file..."},processingLargeFile:{id:"csvImport.mapFieldsStep.processingLargeFile",defaultMessage:"Processing large file..."},dontImport:{id:"csvImport.mapFieldsStep.dontImport",defaultMessage:"Don’t import"}}),Qe=100;function Xe(e){const t=(0,i().O$)(c().fu),o=(0,p().v3)(),a=(0,n.useMemo)((()=>m().Store.createValue({open:!1,stack:[],closeOnEscape:!0})),[]),[s,r]=(0,n.useState)([]),[me,xe]=(0,n.useState)({}),[Se,Ie]=(0,n.useState)({}),[be,je]=(0,n.useState)(""),[Ae,we]=(0,n.useState)(!0),[ke,Te]=(0,n.useState)(!1),[Be,Fe]=(0,n.useState)(void 0),[Ee,Le]=(0,n.useState)(void 0),[De,Ve]=(0,n.useState)(!1),[ze,Ne]=(0,n.useState)({}),[Ue,We]=(0,n.useState)({}),He=(0,n.useRef)(!1),qe=(0,D().tz)(),Ke=(0,ue()._)(),$e=(0,n.useRef)(!0);(0,n.useEffect)((()=>()=>{$e.current=!1}),[]);const Ye=(0,n.useRef)(void 0),Ze=(0,n.useRef)(void 0),{pageStore:Xe,spaceStore:et,spaceViewStore:tt,analyticsFrom:ot}=e,{previewCollection:nt,validationState:at}=Oe({spaceStore:et}),it=t.open?t:void 0,st=null==it?void 0:it.csvHeaders,rt=null==it?void 0:it.csvSampleRows;(0,P().Yb)((async()=>{await(async()=>{if("merge"===(null==it?void 0:it.importType)&&it.importLocation&&it.spaceId)try{Ve(!0);const e=new(f().m)(o,{id:it.importLocation,spaceId:it.spaceId,table:O().Vl});await e.load();const t=e.getSchema();Le(t)}catch(e){je(`Failed to load target collection properties: ${(0,z().A)(e).message}`)}finally{Ve(!1)}})()}),[null==it?void 0:it.importType,null==it?void 0:it.importLocation,null==it?void 0:it.spaceId,o]),(0,n.useEffect)((()=>{if(t.open&&st&&!He.current)try{const e=(null==it?void 0:it.userPropertyMapping)||[];if(void 0!==(null==it?void 0:it.firstRowAsHeader)&&we(it.firstRowAsHeader),st&&st.length>0){if(r(st),!rt)return;const t=(0,k().HL)({body:rt.map((e=>e.map((e=>({text:e}))))),intl:qe,randomShortID:W().Ay,isPhoneNumber:E().W,useCsvAdaptiveSchema:!1});let o=!1;const n={};st.forEach(((e,a)=>{let i=t.types[a].schema.type||"text";o||"text"!==i||(i="title",o=!0),n[e]=i})),Ie(n);const a={},i={},s={};e.length>0?st.forEach(((t,o)=>{const r=e.find((e=>e.headerName===t));if(r){const e=k().Pl.find((e=>e.type===r.propertyType));e&&(a[o]=e.type,r.propertyId&&(i[o]=r.propertyId),r.format&&(s[o]=r.format))}else{const e=n[t];"date"===e?(a[o]="date",s[o]="ll",c().fu.updatePropertyMapping(t,"date",void 0,"ll")):e&&(a[o]=e)}})):st.forEach(((e,t)=>{const o=n[e];"date"===o?(a[t]="date",s[t]="ll",c().fu.updatePropertyMapping(e,"date",void 0,"ll")):o&&(a[t]=o,c().fu.updatePropertyMapping(e,o))})),xe(a),Ne(i),We(s),He.current=!0}}catch(be){r([]),xe({}),Ie({})}}),[t,st,rt,it,qe]);const lt=(0,u().IS)((()=>({container:{height:"100%",overflow:"hidden"},headerContainer:{display:"flex",width:"100%",flexDirection:"column",alignItems:"flex-start",gap:24,overflow:"hidden",paddingInlineStart:24,paddingInlineEnd:24,paddingBottom:24,paddingTop:40},header:{color:V().Tj.text.primary,textAlign:"center",fontSize:26,fontStyle:"normal",fontWeight:H().Wy.semibold,letterSpacing:.208},description:{alignSelf:"stretch",color:V().Tj.text.secondary,fontFeatureSettings:"case on",fontSize:14,fontStyle:"normal",fontWeight:H().Wy.regular},headerToggleRow:{display:"flex",alignItems:"center",width:"100%"},toggleLabel:{color:V().Tj.text.secondary,fontSize:14,fontWeight:H().Wy.regular,paddingInlineStart:8},mappingFrame:{flex:1,overflowY:"auto",padding:"0px 24px",width:"100%"},customGrid:{display:"grid",gridTemplateColumns:"1fr 16px 1fr",gap:8,width:"100%",height:28},arrowCell:{display:"flex",alignItems:"center",justifyContent:"center"},headerButton:{width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",height:32,border:`1px solid ${V().Tj.border.primary}`,justifyContent:"flex-start",background:"rgba(0, 0, 0, 0.1)"},headerButtonText:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block",color:V().Tj.text.secondary,fontSize:14,fontWeight:H().Wy.regular,lineHeight:20},buttonContainer:{marginTop:16,display:"flex",justifyContent:"center",gap:8,width:"100%",paddingInlineStart:24,paddingInlineEnd:24,paddingBottom:24},leftContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:8,position:"relative",height:"100%",minHeight:0,width:"37%",paddingTop:10},rightContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:8,padding:8,paddingInlineStart:0,height:"100%",flex:1,width:"58%"},columnHeading:{width:"100%",fontSize:12,fontWeight:H().Wy.regular,color:V().Tj.text.secondary},backButton:{borderRadius:"100%",top:1,insetInlineStart:1},backButtonContainer:{position:"absolute",top:12,insetInlineStart:12,display:"flex",width:24,height:24,justifyContent:"center",alignItems:"center",gap:8,flexShrink:0,borderRadius:12,backdropFilter:"blur(16px)",zIndex:10}})),[]),ct=(0,n.useCallback)((()=>{const e=!Ae;we(e),c().fu.updateUseFirstRowAsHeaders(e)}),[Ae]),dt=(0,n.useCallback)((async()=>{const e=performance.now();let t;$().eH(o,{from:ot,import_source:"csv",flowId:ye().A.getOrCreateFlowId()});let n=!1;try{if(Te(!0),Fe(void 0),!it)return je("Something went wrong. Please close the modal and try again."),void Te(!1);const r=it.userPropertyMapping||[];let l=0;const d={columnHeaders:s.flatMap((e=>{const t=r.find((t=>t.headerName===e)),o=(null==t?void 0:t.propertyType)||Se[e]||"text";if(e=Ae||"dont_import"===o?e:"Column "+ ++l,"dont_import"===o)return[{headerName:e,doNotImport:!0}];if("place"===o)return[];if("date"===o){const n=(null==t?void 0:t.format)||"ll";return[{headerName:e,propertyType:o,format:n,doNotImport:!1,...(null==t?void 0:t.propertyId)&&{mapTo:t.propertyId}}]}return[{headerName:e,propertyType:o,doNotImport:!1,...(null==t?void 0:t.propertyId)&&{mapTo:t.propertyId}}]})),useFirstRowAsHeaders:it.firstRowAsHeader??Ae},p="merge"===it.importType,u=it.csvFullFileData||[],m=Ae?u.slice(1):u,f=function(e,t=4194304,o=3e3){if(0===e.length)return o;const n=Math.min(10,e.length),a=e.slice(0,n);let i=0,s=0;for(const d of a){const e=fe(d);i+=e,s=Math.max(s,e)}const r=i/n,l=1.25*Math.max(r,s),c=Math.floor(t/l);return Math.max(100,Math.min(c,o))}(m,ge,c().Et),v=m.slice(0,f),y=m.length>f,x=Boolean(nt&&s.length>0),S=Boolean(it.fileUrl&&it.signedToken&&it.spaceId);if(!(!p&&Ke&&x&&u.length>0&&(!y||S))){const e=ye().A.getOrCreateFlowId(),n=ve().R.getOrCreateImportId(),r=F().JW();let l,p=null;if("merge"===it.importType){if(!it.importLocation||!it.spaceId)return je("Collection ID or Space ID is missing for merge operation."),void Te(!1);l={importType:"MergeIntoCollection",collection:{id:it.importLocation,spaceId:it.spaceId},fileName:it.fileName||"",fileURL:it.fileUrl||"",spaceId:it.spaceId,metadata:{csv:d},flowId:e,importId:n,importInstanceId:r,userTimeZone:(0,M().P)(),signedToken:it.signedToken||""},p={pageId:it.importLocation,spaceId:it.spaceId}}else{const a="slash_command"===ot,i=await pe().n3({environment:o,spaceStore:et,spaceViewStore:tt,uploadType:"csv",fileCount:1,fileName:it.fileName,pageStore:Xe,isTeamPage:!1,importAsSubPage:a});t=i.createdPage,p={pageId:i.pageId,spaceId:i.spaceId},l={fileURL:it.fileUrl||"",fileName:it.fileName||"",importType:i.importType,block:{id:i.pageId,spaceId:i.spaceId},spaceId:i.spaceId,metadata:{csv:d},flowId:e,importId:n,importInstanceId:r,userTimeZone:(0,M().P)(),signedToken:it.signedToken||""}}$().mM(o,{import_source:"csv",flowId:e,data:l}),$().Pd(o,{import_source:"csv",flowId:e,import_instance_id:r,first_row_as_headers:Ae,num_of_properties:s.length,collection_id:"merge"===it.importType?it.importLocation:void 0,import_sub_type:"merge"===it.importType?"merge":"new"});const u=(0,Y().UT)(o,K().V,l,{spaceIds:[l.spaceId]});let m=!1;for await(const t of u){var a,i;if(t.error)throw t.error;if(("merge"!==it.importType&&"status"in t.value&&"created_collection"===(null===(a=t.value.status)||void 0===a?void 0:a.message)||"merge"===it.importType&&"status"in t.value&&"updated_collection"===(null===(i=t.value.status)||void 0===i?void 0:i.message)||"success"===t.taskStatus)&&!m&&p){const e=p.pageId,t=g().B.createChildStore(et,{table:R().ev,id:e}),n=(0,ie().Ay)({store:t,preferPublicLink:!1,pageVisitSource:w().y8.Import});"merge"!==it.importType&&(0,se().navigateOnBaseUrl)({environment:o,url:n}),m=!0,c().fu.close({type:"merge"===it.importType?"merged":"imported"}),re().Ay.reset()}}return}if(!nt)return je("Preview is not ready. Please go back and re-open the modal."),void Te(!1);if(0===v.length)return je("This file does not contain any rows to import."),void Te(!1);n=!0;const I=ye().A.getOrCreateFlowId(),b=ve().R.getOrCreateImportId(),j=F().JW(),A=nt.collectionStore.getSchema(),k="slash_command"===ot&&Boolean(Xe),P=(0,le().createAndCommit)({userAction:"csvImport.initializeCollectionPage",environment:o,canUndo:!0,perform:e=>{let t;k&&Xe?(t=J().Wv({environment:o,type:"collection_view_page",spaceId:et.id,inMemoryRecordCache:et.inMemoryRecordCache,transaction:e}),J().zv({store:t,data:{id:t.id,space_id:et.id,parent_id:Xe.id,parent_table:"block",alive:!0},transaction:e}),G().NI({parentStore:Xe.getContentStore(),childStore:t,transaction:e})):(t=J().Wv({environment:o,type:"collection_view_page",spaceId:et.id,inMemoryRecordCache:et.inMemoryRecordCache,transaction:e}),Q().yM({environment:o,spaceStore:et,spaceViewStore:tt,pageStore:t,isPrivate:!0,transaction:e})),ae().C({environment:o,store:t,properties:{title:[[it.fileName||"Imported CSV"]]},transaction:e});const n=(0,te().E)({environment:o,collectionViewBlockStore:t,transaction:e,collectionValue:{name:[[it.fileName||"Imported CSV"]],schema:A}}),a=(0,U().Ay)(),i=h().p.createChildStore(t,{table:L().Gy,id:a});return J().zv({store:i,data:{id:a,version:1,type:"table",name:qe.formatMessage(ne().X.table),format:{table_wrap:!0,table_properties:Object.entries(A).map((([e,t])=>({property:e,visible:!0,width:250}))),collection_pointer:{id:n.id,table:O().Vl,spaceId:et.id}},parent_id:t.id,parent_table:"block",space_id:et.id,alive:!0,query2:{aggregations:[],sort:[],filter:{operator:"and",filters:[]}}},transaction:e}),Z().BC({parentStore:t.getCollectionViewsStore(),appendStore:i,transaction:e}),{collectionStore:n,collectionViewStore:i,collectionViewBlockStore:t}}}),_=P.performResult;if(!_)throw new Error("Failed to initialize collection page");const{collectionStore:B,collectionViewStore:E,collectionViewBlockStore:D}=_;t=D,await P.serverCommitResult;const V=new Map;Object.entries(B.getSchema()).forEach((([e,t])=>{t&&"options"in t&&Array.isArray(t.options)&&V.set(e,new Set((t.options||[]).map((e=>e.value))))}));const z={importType:"ReplaceBlock",block:{id:D.id,spaceId:et.id},fileName:it.fileName||"",fileURL:it.fileUrl||"",spaceId:et.id,metadata:{csv:d},flowId:I,importId:b,userTimeZone:(0,M().P)(),signedToken:it.signedToken||""};$().mM(o,{import_source:"csv",flowId:I,data:z}),$().Pd(o,{import_source:"csv",flowId:I,first_row_as_headers:Ae,num_of_properties:s.length,import_sub_type:"new",is_client_side_import:!0,total_rows:m.length,client_side_rows:v.length,needs_queue_task:y});const W=he(v.slice(0,Math.min(10,v.length)),s,Qe),H=[];for(let e=0;e<v.length;e+=W){const t=v.slice(e,e+W);Fe(f<m.length?qe.formatMessage(Je.processingLargeFile):qe.formatMessage(Je.processingFile)),await new Promise((e=>setTimeout(e,0))),(0,le().createAndCommit)({userAction:"csvImport.clientBatch",environment:o,canUndo:!0,perform:e=>{const n=new Map;t.forEach((t=>{const a=J().Wv({environment:o,spaceId:et.id,type:"page",inMemoryRecordCache:et.inMemoryRecordCache,transaction:e});H.push(a.id),J().zv({store:a,data:{id:a.id,space_id:et.id,alive:!0},transaction:e}),G().X$({parentStore:B,childStore:a,transaction:e});const i=Pe({schema:B.getSchema(),rowData:t,headers:s,userPropertyMapping:r,selectOptionTracker:V,pendingSelectOptionAdds:n});Object.keys(i).length>0&&ae().C({environment:o,store:a,properties:i,transaction:e})})),_e({collectionStore:B,pendingSelectOptionAdds:n,transaction:e})}})}if(Fe(void 0),!y&&H.length>0&&(0,le().createAndCommit)({userAction:"csvImport.setPageSort",environment:o,canUndo:!0,perform:e=>{J().zv({store:E,data:{page_sort:H.slice(0,C().WF)},transaction:e})}}),y&&it.fileUrl&&it.signedToken){const e=f+(Ae?1:0),t={fileURL:it.fileUrl,collectionId:B.id,collectionViewBlockId:D.id,spaceId:et.id,startRow:e,metadata:d,importId:b,flowId:I,importInstanceId:j,userTimeZone:(0,M().P)(),signedToken:it.signedToken};(async()=>{try{const e=(0,Y().UT)(o,q,t,{spaceIds:[et.id]});for await(const t of e);}catch(e){T().log({level:"error",from:"CsvImportMapFieldsStep",type:"importCSVPartial.enqueueFailed",error:(0,N().convertErrorToLog)(e)})}})()}y||$().$g(o,{completed:!0,import_source:"csv",rootPageId:D.id,spaceId:et.id,totalTimeMs:performance.now()-e,import_type:"file",import_sub_type:"new",is_client_side_import:!0,flowId:I,import_id:b,import_instance_id:j});const X=(0,ie().Ay)({store:D,preferPublicLink:!1,pageVisitSource:w().y8.Import});(0,se().navigateOnBaseUrl)({environment:o,url:X}),c().fu.close({type:"imported"}),re().Ay.reset()}catch(be){T().log({level:"error",from:"CsvImportMapFieldsStep",type:"handleImport",error:(0,N().convertErrorToLog)(be),data:{importType:null==it?void 0:it.importType}}),t&&(0,le().createAndCommit)({userAction:"importActions.importFiles",environment:o,canUndo:!0,perform:e=>{var o;const n=null===(o=t)||void 0===o?void 0:o.getParentStore();n&&t&&G().zz({parentStore:n,childStore:t,transaction:e})}});let i=qe.formatMessage(pe().DZ.importFailed);const s=(0,z().A)(be);if("CsvImportError"===s.message?i=qe.formatMessage(d().m.csv_import_inconsistent_columns):"ImportFileSizeTooLargeError"===s.message?i=qe.formatMessage(pe().DZ.fileImportFailedSizeTooLarge):"ImportcsvTooManyColumns"===s.message?i=qe.formatMessage(pe().DZ.csvImportFailedColumnsTooLarge):"ImportcsvTooManyRows"===s.message&&(i=qe.formatMessage(pe().DZ.csvImportFailedRowsTooLarge)),je(i),n){var r;const n=ye().A.getOrCreateFlowId(),a=ve().R.getOrCreateImportId(),i=F().JW();$().$g(o,{completed:!1,import_source:"csv",rootPageId:(null===(r=t)||void 0===r?void 0:r.id)||(null==Xe?void 0:Xe.id)||"",spaceId:et.id,totalTimeMs:performance.now()-e,import_type:"file",import_sub_type:"new",is_client_side_import:!0,flowId:n,import_id:a,import_instance_id:i})}}finally{Te(!1),Fe(void 0)}}),[s,Se,it,o,Xe,et,tt,ot,Ae,qe,nt,Ke]),pt=(0,n.useCallback)((()=>{je(""),c().fu.close({type:"canceled"})}),[]),ut=(0,n.useCallback)(((e,t)=>{if(!nt)return;const{collectionStore:n}=nt,a=n.getSchema();let i;const s=e.trim().toLowerCase();for(const[o,c]of Object.entries(a)){if(!c||"object"!=typeof c)continue;const t=c,n=String(t.name||"");if(t.name===e||n.trim().toLowerCase()===s){i=[o,c];break}}if(!i)return;const[r,l]=i;if(l&&l.type!==t&&((0,le().createAndCommit)({userAction:"csvImport.updatePropertyType",environment:o,perform:a=>{if("select"===t||"multi_select"===t){const i=Re((null==it?void 0:it.csvSampleRows)||[],(null==it?void 0:it.csvHeaders)||[],e,t);(0,X().H)({environment:o,collectionStore:n,property:r,type:t,transaction:a});const s=n.getKeyStore("schema").getValue();if(s&&s[r]){const e=s[r];if(e&&"options"in e&&("select"===e.type||"multi_select"===e.type||"status"===e.type)){const t={...e,options:i},o={...s,[r]:t};J().zv({store:n,data:{schema:o},transaction:a})}}}else(0,X().H)({environment:o,collectionStore:n,property:r,type:t,transaction:a})},canUndo:!0}),Ye.current)){const e=Ye.current;setTimeout((()=>{(0,de().c)({propertyId:r,collectionContextStore:e,environment:o,padding:50})}),100)}}),[nt,o,null==it?void 0:it.csvSampleRows,null==it?void 0:it.csvHeaders]),mt=(0,n.useCallback)(((e,t)=>{if(!nt)return;const{collectionStore:n,collectionViewStore:a}=nt,i=n.getSchema(),s=Object.entries(i).find((([t,o])=>(null==o?void 0:o.name)===e));if(!s||!s[1])return;const[r]=s;(0,le().createAndCommit)({userAction:"csvImport.updatePropertyVisibility",environment:o,perform:e=>{const o=a.getFormat()||{},n=o.table_properties||[],i=n.findIndex((e=>e.property===r));if(-1===i)return;const s=[...n];s[i]={...s[i],visible:t},J().zv({store:a,data:{format:{...o,table_properties:s}},transaction:e})},canUndo:!0})}),[nt,o]),gt=(0,n.useCallback)((()=>{const e=k().Pl.map((e=>"dont_import"===e.type?{...e,name:qe.formatMessage(Je.dontImport)}:{...e,name:(0,oe().GN)(qe,e.type)}));if("merge"===(null==it?void 0:it.importType)&&Ee){const t=Ee,o=Object.entries(t).map((([e,t])=>{if(!t||"object"!=typeof t)return null;const o=t;if(!o.type||"string"!=typeof o.type)return null;const n=o.type;if(!ft(n))return null;return{type:n,name:`${String(o.name||"")}`,propertyId:e,isExistingProperty:!0}})).filter((e=>null!==e));if(o.length>0)return[...e,...o]}return e}),[null==it?void 0:it.importType,Ee,qe]),ft=e=>"status"===e||k().Pl.some((t=>t.type===e)),ht=(0,n.useCallback)(((e,t,o,n)=>{const i=gt().find((e=>e.name===t));if(!i)return;const r=s[e];if(!r)return;const d=me[e];let p=o;if(!p&&"title"===i.type&&"merge"===(null==it?void 0:it.importType)&&Ee){const e=Object.entries(Ee).find((([e,t])=>"title"===(null==t?void 0:t.type)));e&&(p=e[0])}if(p){var u;const t=null===(u=Object.entries(ze).find((([t,o])=>o===p&&Number(t)!==e)))||void 0===u?void 0:u[0];if(t){const o=Number(t),a=s[o],l=ze[e];l?(Ne((t=>({...t,[e]:p,[o]:l}))),xe((t=>({...t,[e]:i.type,[o]:me[e]||"text"}))),c().fu.updatePropertyMapping(r,i.type,p,n),c().fu.updatePropertyMapping(a,me[e]||"text",l)):(Ne((t=>{const n={...t,[e]:p};return delete n[o],n})),c().fu.updatePropertyMapping(r,i.type,p,n),c().fu.updatePropertyMapping(a,me[e]||"text",void 0))}else Ne((t=>({...t,[e]:p}))),c().fu.updatePropertyMapping(r,i.type,p,n)}else ze[e]&&Ne((t=>{const{[e]:o,...n}=t;return n})),c().fu.updatePropertyMapping(r,i.type,void 0,n);xe((t=>({...t,[e]:i.type}))),n?We((t=>({...t,[e]:n}))):"date"!==i.type&&We((t=>{const o={...t};return delete o[e],o})),nt&&("dont_import"===i.type?mt(r,!1):("dont_import"===d&&mt(r,!0),setTimeout((()=>{const e="dont_import"===(t=i.type)?"dont_import":(0,l().Xk)(C().Pl,t)?t:"text";var t;e&&"dont_import"!==e&&ut(r,e)}),100))),Ze.current=r,ee().os({collectionSettingsStore:a})}),[a,s,nt,ut,me,ze,mt,gt,null==it?void 0:it.importType,Ee]),vt=(0,n.useCallback)((e=>{Ye.current=e}),[]),yt=(0,n.useRef)(!1);return(0,n.useEffect)((()=>{if(yt.current||"merge"!==(null==it?void 0:it.importType)||!Ee||0===s.length)return;const e=Object.entries(Ee),t={},o={};s.forEach(((n,a)=>{const i=n.trim().toLowerCase(),s=e.find((([e,t])=>{if(!t||"object"!=typeof t)return!1;return String(t.name||"").trim().toLowerCase()===i}));if(s){const[e,i]=s;if(!i)return;const r=i.type;if(!ft(r))return;c().fu.updatePropertyMapping(n,r,e),t[a]=e,o[a]=r}}));const n=e.find((([,e])=>"title"===(null==e?void 0:e.type)));if(n){const[e]=n;for(let n=0;n<s.length;n++){if(ze[n])continue;const a=s[n];if("title"===me[n]||"title"===Se[a]){c().fu.updatePropertyMapping(a,"title",e),t[n]=e,o[n]="title";break}}}Object.keys(t).length>0&&(Ne((e=>({...e,...t}))),xe((e=>({...e,...o})))),yt.current=!0}),[null==it?void 0:it.importType,Ee,s,nt,Se,ze,me]),(0,n.useEffect)((()=>{if(!Ze.current||!Ye.current||!nt)return;const e=Ze.current,{collectionStore:t}=nt,n=t.getSchema(),a=Object.entries(n).find((([t,o])=>{if(!o||"object"!=typeof o)return!1;return o.name===e}));if(!a)return void(Ze.current=void 0);const[i]=a;setTimeout((()=>{Ye.current&&(0,de().c)({propertyId:i,collectionContextStore:Ye.current,environment:o,padding:50}),Ze.current=void 0}),200)}),[nt,o]),(0,Ce.jsxs)(v().Ye,{style:lt.container,children:[(0,Ce.jsxs)(v().wt,{style:lt.leftContainer,children:[(0,Ce.jsx)(v().Ye,{style:lt.backButtonContainer,children:(0,Ce.jsx)(ce().n9,{iconFn:_().arrowStraightLeftFillIcon,onClick:()=>{je(""),c().fu.previousStep()},style:lt.backButton})}),(0,Ce.jsxs)(v().wt,{style:lt.headerContainer,children:[(0,Ce.jsx)(j().D,{styleKey:"title2xlSemibold",style:lt.header,children:qe.formatMessage(Je.heading)}),(0,Ce.jsx)(j().D,{styleKey:"bodyMedium",style:lt.description,children:qe.formatMessage(Je.description)}),(0,Ce.jsxs)(v().Ye,{style:lt.headerToggleRow,children:[(0,Ce.jsx)(A().A,{on:Ae,onClick:ct}),(0,Ce.jsx)(j().D,{styleKey:"bodyMedium",style:lt.toggleLabel,children:qe.formatMessage(Je.useFirstRowAsHeaders)})]})]}),(0,Ce.jsx)(v().wt,{style:lt.mappingFrame,children:(0,Ce.jsxs)("div",{style:lt.customGrid,children:[(0,Ce.jsx)("div",{style:lt.columnHeading,children:qe.formatMessage(Je.csvFileColumnsHeader)}),(0,Ce.jsx)("div",{children:null}),(0,Ce.jsx)("div",{style:lt.columnHeading,children:qe.formatMessage(Je.propertyTypeHeader)}),s.map(((e,t)=>(0,Ce.jsxs)(n.Fragment,{children:[(0,Ce.jsx)(S().A,{disabled:!0,style:lt.headerButton,children:(0,Ce.jsx)("span",{style:lt.headerButtonText,children:e})}),(0,Ce.jsx)("div",{style:lt.arrowCell,children:(0,Ce.jsx)(y().I,{icon:B().arrowStraightRightIcon,size:"sm",colorVariant:"secondary"})}),(0,Ce.jsx)(Ge,{index:t,header:e,selectedType:me[t],selectedPropertyId:ze[t],inferredType:Se[e],onSelectType:ht,allPropertyTypes:gt(),isMergeFlow:"merge"===(null==it?void 0:it.importType),selectedFormat:Ue[t]})]},t)))]})}),(0,Ce.jsxs)(v().wt,{style:lt.buttonContainer,children:[be?(0,Ce.jsx)(v().wt,{children:(0,Ce.jsx)(j().D,{styleKey:"captionRegular",colorPalette:"yellow",colorVariant:"secondary",children:be})}):void 0,Be?(0,Ce.jsx)(j().D,{styleKey:"captionRegular",colorPalette:"gray",colorVariant:"secondary",children:Be}):void 0,(0,Ce.jsx)(b().A,{colorPalette:"blue",disabled:ke||void 0!==at||De,onClick:dt,style:{height:36,fontWeight:H().Wy.regular},children:ke||De?(0,Ce.jsx)(x().k,{}):qe.formatMessage(Je.importButton)}),(0,Ce.jsx)(I().p,{colorPalette:"gray",style:{paddingInlineStart:"44%",height:32},onClick:pt,disabled:ke||De,children:qe.formatMessage(Je.cancelButton)})]})]}),(0,Ce.jsx)(v().wt,{style:lt.rightContainer,children:(0,Ce.jsx)(Me,{previewCollection:nt,onSetCollectionContextStore:vt,validationState:at})})]})}var et=()=>o(483226),tt=()=>o(124092),ot=()=>o(373009),nt=()=>o(416845),at=()=>o(20179),it=()=>o(721479),st=()=>o(520287),rt=()=>o(297813),lt=()=>o(72135),ct=()=>o(979340),dt=()=>o(892632),pt=()=>o(484595),ut=()=>o(718827),mt=()=>o(695115),gt=()=>o(920495),ft=()=>o(609616),ht=()=>o(599813);const vt=30,yt=(0,D().YK)({clearFile:{id:"fileUploader.clearFile",defaultMessage:"Clear file"}});function xt(e){return e?e.length<=vt?e:`${e.slice(0,vt-3)}...`:""}function St({label:e,uploadButtonText:t,onOpenFilePicker:o,uploadProgressText:a,processingText:i,fileName:s,onFileSelect:r,onFileClear:l,error:c,accept:d,externalProgress:p=0,isExternalUploading:m=!1,clearAriaLabel:g}){const f=(0,D().tz)(),[h,x]=(0,n.useState)(0),[S,I]=(0,n.useState)(!1),[b,A]=(0,n.useState)(!1),[w,C]=(0,n.useState)(""),k=m?p:h,T=c||w,M=(0,u().IS)((()=>({container:{width:"100%"},subheader:{color:V().Tj.text.secondary,fontSize:12,fontStyle:"normal",fontWeight:H().Wy.regular,marginBottom:6},fileNameDisplayContainer:{...(0,ut().qq)({size:"lg",shape:"default",hasIconOnly:!1,isButtonGapEnabled:!0}),width:"100%",minWidth:0,overflow:"hidden",background:V().Tj.background.tertiaryTranslucent}})),[]);return(0,Ce.jsxs)("div",{style:M.container,children:[(0,Ce.jsx)(Se().A,{style:M.subheader,children:e}),(0,Ce.jsxs)("div",{style:{position:"relative",width:"100%"},children:[s&&!S?(0,Ce.jsxs)("div",{style:M.fileNameDisplayContainer,children:[(0,Ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,flex:1,minWidth:0},children:[(0,Ce.jsx)(y().I,{icon:gt().pageIcon,size:"default",colorVariant:"primary"}),(0,Ce.jsx)("span",{style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",display:"block",minWidth:0,flex:1},children:xt(s)})]}),(0,Ce.jsx)(mt().A,{icon:ht().xMarkIcon,size:"sm",colorVariant:"secondary",onClick:e=>{e.stopPropagation(),l(),C("")},ariaLabel:g??f.formatMessage(yt.clearFile)})]}):(0,Ce.jsx)(ot().E,{style:{width:"100%"},size:"lg",onClick:()=>{null==o||o();const e=document.createElement("input");e.type="file",e.accept=d||"*",e.onchange=async()=>{const t=e.files;if(!t||0===t.length)return;const o=t[0];I(!0),C("");try{await r({file:o,setProgress:x,setProcessing:A,setError:C})}catch(c){}finally{I(!1),A(!1)}},e.click()},disabled:S||b||m,iconLeading:S||b||m?void 0:ft().o,children:S||m?a(k):b?i:t}),S||m?(0,Ce.jsx)("div",{style:{position:"absolute",insetInlineStart:0,top:0,height:"100%",width:`${k}%`,backgroundColor:"rgba(0,0,0,0.1)",borderRadius:4,transition:"width 0.3s ease"}}):void 0]}),T?(0,Ce.jsx)(v().wt,{style:{paddingTop:4},children:(0,Ce.jsx)(j().D,{styleKey:"captionRegular",colorPalette:"yellow",colorVariant:"secondary",children:T})}):void 0]})}const It=(0,D().YK)({title:{id:"csvImport.uploadStep.title",defaultMessage:"Import CSV into Notion"},description:{id:"csvImport.uploadStep.description",defaultMessage:"Create a new database with your CSV or merge it into an existing one"},uploadButton:{id:"csvImport.uploadStep.uploadButton",defaultMessage:" Choose file"},mapHeadersButton:{id:"csvImport.uploadStep.mapHeadersButton",defaultMessage:"Map CSV headers"},uploadHeader:{id:"csvImport.uploadStep.uploadHeader",defaultMessage:"Upload CSV"},uploadProgress:{id:"csvImport.uploadStep.uploadProgress",defaultMessage:"Uploading... {percentComplete}%"},processingCsv:{id:"csvImport.uploadStep.processingCsv",defaultMessage:"Processing CSV..."},learnAboutImports:{id:"csvImport.uploadStep.learnAboutImports",defaultMessage:"Learn about imports"},selectDatabase:{id:"csvImport.uploadStep.selectDatabase",defaultMessage:"Select database"},selectDatabaseHeader:{id:"csvImport.uploadStep.selectDatabaseHeader",defaultMessage:"Import Location"},importMethodHeader:{id:"csvImport.uploadStep.importMethodHeader",defaultMessage:"Import method"},createNewDatabase:{id:"csvImport.uploadStep.createNewDatabase",defaultMessage:"Create a new database"},createNewDatabaseSubtitle:{id:"csvImport.uploadStep.createNewDatabaseSubtitle",defaultMessage:"Start fresh with a new database from your CSV data"},importIntoExisting:{id:"csvImport.uploadStep.importIntoExisting",defaultMessage:"Import into existing database"},importIntoExistingSubtitle:{id:"csvImport.uploadStep.importIntoExistingSubtitle",defaultMessage:"Add your CSV data to an existing database"},csvEmptyFile:{id:"csvImport.uploadStep.errors.emptyFile",defaultMessage:"Your file is empty. Please upload a file that contains data"},csvHeadersOnly:{id:"csvImport.uploadStep.errors.headersOnly",defaultMessage:"Your file has headers but no data rows. Add rows and try again"},csvParseError:{id:"csvImport.uploadStep.errors.parseError",defaultMessage:"We couldn’t read the file. Please make sure it’s in a valid CSV format"},csvTooManyColumns:{id:"csvImport.uploadStep.errors.tooManyColumns",defaultMessage:"Your file has too many columns. The maximum allowed is 999"},databaseRequired:{id:"csvImport.uploadStep.errors.databaseRequired",defaultMessage:"Please select a database to merge with"},invalidFileFormat:{id:"csvImport.uploadStep.errors.invalidFileFormat",defaultMessage:"Invalid file type. Only .csv files are supported"},newTableDefaultName:{id:"csvImport.uploadStep.newTableDefaultName",defaultMessage:"New table"},clearFileName:{id:"csvImport.uploadStep.clearFileName",defaultMessage:"Clear file"}}),bt=999;function jt({isMergeMode:e,onSelectCollection:t,selectedCollection:a,onMenuOpenChange:s,selectedCollectionViewBlockStore:r,spaceStore:l}){const c=(0,p().v3)(),[d,m]=(0,n.useState)(""),[g,h]=(0,n.useState)(!1),[v,x]=(0,n.useState)([]),S=(0,n.useRef)(crypto.randomUUID()).current,I=(0,i().uB)(void 0,o(118307).A),b=(0,i().uB)(void 0,o(452004).$),j=(0,i().K8)((()=>I.state.open),[I]);(0,n.useEffect)((()=>{null==s||s(j)}),[j,s]);const A=(0,n.useCallback)((async t=>{if(e){const e=(null==r?void 0:r.getOwnedAndLinkedCollectionStores().map((e=>{var t;return{id:e.id,title:(null===(t=e.getName())||void 0===t?void 0:t.toString())||"Untitled",icon:e.getIcon(),store:e}})))??[],n=e.find((e=>e.id===(null==a?void 0:a.id)));return t?(0,o(778078).Ay)(t,e,(e=>e.title)):[...n?[n]:[],...e.filter((e=>e.id!==(null==a?void 0:a.id)))]}const n=o(907258).default.state.mainEditorCurrentBlockStore;if(!n)return[];const i=await o(106628).T.searchActions.load(),s=await i.searchCollectionsWithRecents({environment:c,collectionViewBlockStore:void 0,parentStore:n,spaceStore:l,query:t,limit:10,requireEditPermissions:!0,searchSessionId:S,peopleBlocksToInclude:"none"}),d=[];for(const e of s.results){const t=f().m.createChildStore(n,{table:"collection",id:e});if(!t)continue;const o=t.getName()||"Untitled";d.push({id:e,title:o.toString(),icon:t.getIcon(),store:t})}return d}),[c,l,e,r,S,null==a?void 0:a.id]),w=(0,n.useCallback)((async e=>{h(!0);try{const t=await A(e);x(t)}catch(t){x([])}finally{h(!1)}}),[A]);(0,n.useEffect)((()=>{const e=setTimeout((()=>{j&&w(d)}),300);return()=>clearTimeout(e)}),[d,j,w]),(0,n.useEffect)((()=>{j&&w("")}),[j,w]);const[C,k]=(0,n.useState)(!1);(0,n.useEffect)((()=>{A("").then((e=>{k(e.length<=1)}))}),[A]);const T=(0,u().IS)((()=>({container:{width:"100%",position:"relative",zIndex:10},selectedDataSourceButton:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",minHeight:36,padding:"6px 12px",borderRadius:6,border:`1px solid ${V().Tj.border.primary}`,background:V().Tj.background.elevated,overflow:"hidden",opacity:C?.4:1},placeholder:{color:V().Tj.text.secondary,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},subheader:{color:V().Tj.text.secondary,fontSize:12,fontStyle:"normal",fontWeight:H().Wy.regular,marginBottom:6},menuItemWrapper:{width:"100%",paddingInlineStart:8,paddingInlineEnd:8,boxSizing:"border-box"}})),[C]),M=(0,n.useCallback)((e=>{t(e),I.setState({open:!1}),m("")}),[I,t]),P={key:"results",items:g?[{key:"loading",render:()=>(0,Ce.jsx)("div",{style:{...T.subheader,textAlign:"center"},children:(0,Ce.jsx)(D().sA,{defaultMessage:"Searching...",id:"database.csvImport.searchingDatabases"})}),action:()=>{}}]:0===v.length?[{key:"noResults",render:()=>(0,Ce.jsx)("div",{style:{...T.subheader,textAlign:"center"},children:(0,Ce.jsx)(D().sA,{defaultMessage:"No databases found",id:"database.csvImport.noDatabasesFound"})}),action:()=>{}}]:v.map((e=>({key:e.id,render:t=>(0,Ce.jsx)("div",{style:T.menuItemWrapper,children:(0,Ce.jsx)(o(305390).A,{...t,store:e.store,isChecked:e.id===(null==a?void 0:a.id)})}),action:()=>{M(e)}}))),render:e=>(0,Ce.jsx)(Ue().A,{...e})};return(0,Ce.jsxs)("div",{style:T.container,children:[(0,Ce.jsx)(Se().A,{style:T.subheader,children:(0,Ce.jsx)(D().sA,{...It.selectDatabaseHeader})}),(0,Ce.jsx)(Le().A,{buttonPopupStore:I,placementToOrigin:"bottom",popupType:o(726637).A.isMobile?Le().z.BottomSheet:Le().z.Popup,originGap:4,sameWidthAsOrigin:!0,disabled:C,renderOrigin:e=>(0,Ce.jsxs)(tt().p,{disabled:C,style:T.selectedDataSourceButton,...e,children:[a?(0,Ce.jsx)(o(301879).G,{collectionStore:a.store}):(0,Ce.jsx)("span",{style:T.placeholder,children:(0,Ce.jsx)(D().sA,{...It.selectDatabase})}),(0,Ce.jsx)(y().I,{icon:o(515187).w,size:"sm",colorVariant:"secondary"})]}),render:()=>{const e={menuType:De().gu.Popup,maxHeight:350};return(0,Ce.jsx)(Ve().A,{...e,children:(0,Ce.jsxs)("div",{style:{width:"100%"},children:[(0,Ce.jsx)(Ue().A,{shouldShowBottomDivider:!1,children:(0,Ce.jsx)(Ke().Ay,{value:d,onChange:e=>{m(e.target.value),b.setState({focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})},focusInitial:!0,placeholder:"Search databases...",showClearButton:!0})}),(0,Ce.jsx)("div",{style:{maxHeight:300,overflowY:"auto"},children:(0,Ce.jsx)(Ne().A,{type:Ne().O.Vertical,initialFocus:0,sections:[P]})})]})})}})]})}const At=n.memo(jt);function wt({spaceStore:e,collectionViewBlockStore:t,analyticsFrom:o}){const a=(0,i().O$)(c().fu),s=(0,p().v3)(),r=(0,D().tz)(),[l,d]=(0,n.useState)(!1),[m,g]=(0,n.useState)(!1),[h,x]=(0,n.useState)(""),S=a.open?a.uploadProgress:0,I=!!a.open&&a.isLoading&&!l,A=n.useRef(!0),[w,C]=(0,n.useState)(null),[T,M]=(0,n.useState)("create"),P="slash_command"===o||"space_switcher"===o,_=a.open&&a.fileName?a.fileName:"";(0,n.useEffect)((()=>{A.current=a.open}),[a.open]);const B=a.open&&"merge"===a.importType,F=(0,n.useMemo)((()=>B&&"database_create_empty_state"!==o?"create"!==T:!B&&"existing"===T),[B,o,T]),E=(0,n.useMemo)((()=>{const e=a.open&&a.isLoading;if(!_||e||!m)return!0;return!(!B&&"existing"!==T||w)}),[_,a,m,B,T,w]);(0,n.useEffect)((()=>{B&&M("existing")}),[B]);const R=a.open&&a.importLocation?a.importLocation:void 0;(0,n.useEffect)((()=>{if(!B||w||!R)return;const t=R;(async()=>{const o=await async function(){try{const o=f().m.createChildStore(e,{table:"collection",id:t,spaceId:e.id});return await o.load(),o}catch{return}}();o&&C({id:o.id,title:(o.getName()||"Untitled").toString(),icon:o.getIcon(),store:o})})()}),[B,R,w,e,s]),(0,n.useEffect)((()=>{a.open&&a.csvHeaders&&a.csvSampleRows&&g(!0)}),[a]),(0,n.useEffect)((()=>{w&&B&&c().fu.setImportLocation(w.id)}),[w,B]);const O=(0,n.useCallback)((e=>{}),[]),L=(0,n.useCallback)((()=>{a.open&&c().fu.setState({...a,fileName:"",fileUrl:"",fileSize:0,csvHeaders:void 0,csvSampleRows:void 0,userPropertyMapping:[]}),g(!1)}),[a]),N=(0,n.useCallback)((()=>{$().Df(s,{import_source:"csv",flowId:ye().A.getOrCreateFlowId()})}),[s]),U=(0,n.useCallback)((async({file:t,setProgress:o,setProcessing:n,setError:a})=>{try{g(!1),d(!0);const i=t.name.toLowerCase();if("csv"!==i.split(".").pop())return a(r.formatMessage(It.invalidFileFormat)),d(!1),void $().lJ(s,{import_source:"csv",flowId:ye().A.getOrCreateFlowId(),is_success:!1,error_type:"invalid_file_format"});const l=(0,et().AI)();if(t.size>(0,ct().HG)(l))throw $().lJ(s,{import_source:"csv",flowId:ye().A.getOrCreateFlowId(),is_success:!1,error_type:"file_size_too_large"}),new(nt().s76)("ImportFileSizeTooLargeError",{clientData:{type:"upload_file_size_exceeded",code:"fileImportError",messageValues:{maxSize:lt().z3((0,ct().HG)(l),{decimals:1})}}});n(!0);const p=new FileReader,u=new Promise((e=>{p.onload=t=>{try{var o;const n=null===(o=t.target)||void 0===o?void 0:o.result;if("string"==typeof n){const t=(0,k().CO)(n);if(t.length>0){const o=t[0],n=t.slice(1,Math.min(t.length,c().A1+1)),a=o.map(((e,t)=>""===e.trim()?`column ${t+1}`:e));return void e({headers:a,sampleRows:n})}}e(null)}catch(h){e(null)}},p.onerror=()=>{e(null)}})),m=t.slice(0,c().F$);p.readAsText(m);const f=await new Promise(((n,a)=>{dt().Zn({environment:s,uploadType:"csv",files:[t],bucket:"temporary",bypassFreeFileUploadLimitCheck:!0,spaceId:e.id,onBatchStart:()=>{o(0)},onBatchProgress:({progressPercent:e})=>{o(e??0)},onBatchCompleteWithToken:e=>{o(100),n(e)},onBatchError:e=>{a(e)}})})),v=await u;if(n(!1),0===t.size)return a(r.formatMessage(It.csvEmptyFile)),void d(!1);if(!v)return a(r.formatMessage(It.csvParseError)),d(!1),void $().lJ(s,{import_source:"csv",flowId:ye().A.getOrCreateFlowId(),is_success:!1,error_type:"csv_parse_error"});if(0===v.headers.length)return a(r.formatMessage(It.csvEmptyFile)),d(!1),void $().lJ(s,{import_source:"csv",flowId:ye().A.getOrCreateFlowId(),is_success:!1,error_type:"csv_empty_file"});if(0===v.sampleRows.length)return a(r.formatMessage(It.csvHeadersOnly)),d(!1),void $().lJ(s,{import_source:"csv",flowId:ye().A.getOrCreateFlowId(),is_success:!1,error_type:"csv_header_row_only"});if(v.headers.length>bt)return a(r.formatMessage(It.csvTooManyColumns)),d(!1),void $().lJ(s,{import_source:"csv",flowId:ye().A.getOrCreateFlowId(),is_success:!1,error_type:"csv_too_many_columns"});if(!A.current)return d(!1),n(!1),void $().lJ(s,{import_source:"csv",flowId:ye().A.getOrCreateFlowId(),is_success:!1,error_type:"csv_modal_closed"});A.current&&c().fu.setFileMetadata(t.name,f[0].fileUrl,t.size,f[0].signedToken),v&&(c().fu.setCsvData(v.headers,v.sampleRows),g(!0),$().lJ(s,{import_source:"csv",flowId:ye().A.getOrCreateFlowId(),is_success:!0}),A.current&&(async()=>{try{const e=await t.text(),o=(0,k().CO)(e);if(!A.current)return;c().fu.setCsvFullFileData(o)}catch(h){}})()),d(!1)}catch(h){if(!A.current)return;const t=(0,z().A)(h);if(t instanceof nt().s76&&"upload_file_size_exceeded"===t.body.clientData.type&&"messageValues"in t.body.clientData){a(r.formatMessage(pe().DZ.fileImportFailedCustomSizeTooLarge,{maxSize:t.body.clientData.messageValues.maxSize}))}else{a(r.formatMessage(pe().DZ.importFailedWithError))}d(!1),n(!1),g(!1),$().lJ(s,{import_source:"csv",flowId:ye().A.getOrCreateFlowId(),is_success:!1,error_type:"csv_upload_error"})}}),[s,e.id,r]),W=(0,n.useCallback)((()=>{const e="create"===T,t="existing"===T&&w;"existing"!==T||w?($().ZW(s,{import_source:"csv",flowId:ye().A.getOrCreateFlowId(),import_sub_type:B?"merge":"new"}),a.open&&(e?c().fu.setState({...a,importType:"import",importLocation:"new"}):t&&c().fu.setState({...a,importType:"merge",importLocation:w.id})),c().fu.nextStep()):x(r.formatMessage(It.databaseRequired))}),[w,T,r,a,s,B]),q=(0,n.useCallback)((()=>{c().fu.close({type:"canceled"})}),[]),K=(0,u().IS)((()=>({container:{display:"flex",width:"87%",flexDirection:"column",alignItems:"flex-start",gap:8,marginInlineStart:24,marginInlineEnd:24,flexShrink:0},title:{color:V().Tj.text.primary,textAlign:"center",fontSize:26,fontStyle:"normal",fontWeight:H().Wy.semibold,letterSpacing:.208},description:{alignSelf:"stretch",color:V().Tj.text.secondary,fontFeatureSettings:"case on",fontStyle:"normal",fontWeight:H().Wy.regular},closeButton:{position:"absolute",top:12,insetInlineStart:12,display:"flex",width:24,height:24,justifyContent:"center",alignItems:"center",gap:8,flexShrink:0,borderRadius:12,backdropFilter:"blur(16px)",zIndex:10},leftContainer:{display:"flex",flexDirection:"column",height:"100%",width:"37%",position:"relative",overflow:"hidden"},leftContentArea:{display:"flex",flexDirection:"column",flex:1,minHeight:0,overflowY:"auto",overflowX:"hidden",paddingBottom:16,paddingTop:52},subheader:{color:V().Tj.text.secondary,fontSize:12,fontStyle:"normal",fontWeight:H().Wy.regular,marginBottom:6},buttonContainer:{display:"flex",justifyContent:"center",gap:8,width:"87%",marginInlineStart:24,marginInlineEnd:24,paddingTop:16,paddingBottom:24,flexShrink:0},databaseSelectorContainer:{width:"87%",marginInlineStart:24,marginInlineEnd:24,flexDirection:"column"}})),[]);return a.open?(0,Ce.jsxs)(v().Ye,{style:{height:"100%",minHeight:0,overflow:"hidden"},children:[(0,Ce.jsxs)(v().wt,{style:K.leftContainer,children:[(0,Ce.jsx)(v().Ye,{style:K.closeButton,children:(0,Ce.jsx)(ce().n9,{iconFn:rt().xMarkFillIcon,onClick:q,style:{insetInlineStart:1,top:1}})}),(0,Ce.jsxs)(v().wt,{style:{...K.leftContentArea,gap:24},children:[(0,Ce.jsxs)(v().Ye,{style:K.container,children:[(0,Ce.jsx)(j().D,{styleKey:"title2xlSemibold",colorVariant:"primary",style:K.title,children:(0,Ce.jsx)(D().sA,{...It.title})}),(0,Ce.jsx)(j().D,{styleKey:"bodyMedium",colorVariant:"secondary",style:K.description,children:(0,Ce.jsx)(D().sA,{...It.description})})]}),(0,Ce.jsx)(v().Ye,{style:{width:"87%",marginInlineStart:24,marginInlineEnd:24,flexDirection:"column"},children:(0,Ce.jsx)(St,{label:r.formatMessage(It.uploadHeader),uploadButtonText:r.formatMessage(It.uploadButton),onOpenFilePicker:N,uploadProgressText:e=>r.formatMessage(It.uploadProgress,{percentComplete:e}),processingText:r.formatMessage(It.processingCsv),fileName:_,onFileSelect:U,onFileClear:L,error:h,accept:".csv",externalProgress:S,isExternalUploading:I,clearAriaLabel:r.formatMessage(It.clearFileName)})}),P?(0,Ce.jsxs)(v().Ye,{style:{width:"87%",marginInlineStart:24,marginInlineEnd:24,flexDirection:"column"},children:[(0,Ce.jsx)(Se().A,{style:K.subheader,children:(0,Ce.jsx)(D().sA,{...It.importMethodHeader})}),(0,Ce.jsxs)(v().wt,{style:{gap:8},children:[(0,Ce.jsx)(Ct,{radioItem:{key:"create",title:r.formatMessage(It.createNewDatabase),subtitle:r.formatMessage(It.createNewDatabaseSubtitle),icon:at().addSquareRoundedSmallIcon},isSelected:"create"===T,onSelectRadio:()=>M("create")}),(0,Ce.jsx)(Ct,{radioItem:{key:"existing",title:r.formatMessage(It.importIntoExisting),subtitle:r.formatMessage(It.importIntoExistingSubtitle),icon:st().W},isSelected:"existing"===T,onSelectRadio:()=>M("existing")})]})]}):void 0,F?(0,Ce.jsx)(v().Ye,{style:K.databaseSelectorContainer,children:(0,Ce.jsx)(At,{spaceStore:e,isMergeMode:!P,selectedCollection:w,onSelectCollection:C,onMenuOpenChange:O,selectedCollectionViewBlockStore:t})}):void 0]}),(0,Ce.jsxs)(v().wt,{style:K.buttonContainer,children:[(0,Ce.jsx)(b().A,{colorPalette:"blue",onClick:W,disabled:E,style:{gap:6,height:36,fontWeight:H().Wy.regular},children:(0,Ce.jsx)(D().sA,{...It.mapHeadersButton})}),(0,Ce.jsxs)(tt().p,{colorPalette:"gray",style:{paddingInlineStart:"27%",gap:6,height:32},onClick:()=>window.open("https://www.notion.com/help/import-data-into-notion#csv","_blank"),children:[(0,Ce.jsx)(y().I,{icon:it().questionMarkCircleSmallIcon,size:"sm"}),(0,Ce.jsx)(D().sA,{...It.learnAboutImports})]})]})]}),(0,Ce.jsx)(Tt,{fileName:_})]}):null}function Ct({radioItem:e,isSelected:t,onSelectRadio:o,isDisabled:n}){const a=(0,u().IS)((()=>({button:{display:"flex",justifyContent:"space-between",gap:10,height:"auto",minHeight:70,borderRadius:8,paddingTop:12,paddingBottom:12,paddingInlineStart:14,paddingInlineEnd:14-pt().p,border:void 0,boxShadow:t?`inset 0 0 0 1px ${V().Tj.blue.icon.accentPrimary}`:`inset 0 0 0 1px ${V().Tj.border.primary}`,overflow:"hidden"},buttonText:{display:"flex",flexDirection:"column",gap:2,minWidth:0,overflow:"hidden"},optionTitle:{fontWeight:H().Wy.medium,fontSize:14,fontStyle:"normal",color:V().Tj.text.primary,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},optionSubtitle:{whiteSpace:"normal",color:V().Tj.text.secondary,fontSize:12,fontStyle:"normal",fontWeight:H().Wy.regular,overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},iconAndText:{display:"flex",alignItems:"flex-start",gap:8,flex:1,minWidth:0,overflow:"hidden"},iconContainer:{flexShrink:0},radioIconContainer:{flexShrink:0,marginInlineStart:8}})),[t]);return(0,Ce.jsxs)(S().A,{size:"lg",onClick:()=>o(e.key),style:a.button,disabled:n,children:[(0,Ce.jsxs)("div",{style:a.iconAndText,children:[e.icon?(0,Ce.jsx)("div",{style:a.iconContainer,children:(0,Ce.jsx)(y().I,{icon:e.icon,size:"default",colorVariant:"secondary"})}):void 0,(0,Ce.jsxs)("div",{style:a.buttonText,children:[(0,Ce.jsx)(Se().A,{style:a.optionTitle,children:e.title}),e.subtitle?(0,Ce.jsx)(Se().A,{isSmall:!0,isMultiline:!0,style:a.optionSubtitle,children:e.subtitle}):void 0]})]}),(0,Ce.jsx)("div",{style:a.radioIconContainer,children:(0,Ce.jsx)(pt().A,{isSelected:t})})]})}const kt={type:"spring",stiffness:150,damping:20,delay:.5},Tt=n.memo((function({fileName:e}){const t=(0,D().tz)(),a=(0,u().eP)(),i=(0,u().IS)((()=>({rightContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:8,height:"100%",flex:1,paddingTop:8,paddingBottom:8,paddingInlineEnd:8},shimmerContainer:{borderRadius:12,border:`1px solid ${V().Tj.border.secondary}`,backgroundColor:"dark"===a?V().Tj.popoverWaxPaperBackground:void 0,backgroundImage:`url(${o(148307).A.images.workflowTemplates.bgDotsPng})`,backgroundRepeat:"repeat",backgroundSize:"70px 70px",backgroundPosition:"0% 0%",backgroundBlendMode:"multiply",position:"absolute",userSelect:"none",inset:0,zIndex:10,padding:36},header:{opacity:.6,paddingBottom:20,borderBottom:`1px solid ${V().Tj.border.primary}`},columns:{display:"grid",gridTemplateColumns:"3fr 2fr 2fr",gap:45},shimmer:{width:"50%",height:9,borderRadius:5,background:"#A6A6A6"},shimmerWide:{width:"100%",height:9,borderRadius:5,background:"#A6A6A6"}})),[a]),s=(0,n.useMemo)((()=>xt(e.replace(/\.csv$/i,"")||t.formatMessage(It.newTableDefaultName))),[e,t]);return(0,Ce.jsx)(v().wt,{style:i.rightContainer,children:(0,Ce.jsx)(o(153321).P.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:kt,style:{width:"100%",height:"100%",position:"relative"},children:(0,Ce.jsxs)(r().Y1,{direction:"vertical",height:"fill",width:"fill",padding:"36px 38px",style:i.shimmerContainer,gap:30,children:[(0,Ce.jsxs)(r().Y1,{direction:"horizontal",align:"center-left",gap:12,height:50,style:i.header,children:[(0,Ce.jsx)(y().I,{icon:be().T,size:"xl",colorVariant:"secondary"}),(0,Ce.jsx)(j().D,{styleKey:"titleLgBold",colorVariant:"secondary",style:{fontWeight:H().Wy.semibold},children:s})]}),(0,Ce.jsx)("div",{style:i.columns,children:Array.from({length:3}).map(((e,t)=>(0,Ce.jsxs)(r().Y1,{direction:"vertical",gap:25,children:[(0,Ce.jsx)(ot().E,{disabled:!0,style:i.shimmer}),Array.from({length:5}).map(((e,t)=>(0,Ce.jsx)(ot().E,{disabled:!0,style:i.shimmerWide},t)))]},t)))})]})})})}));function Mt(){return null}function Pt(e){const t=(0,i().O$)(c().fu);(0,n.useEffect)((()=>{if(t.open){const t=(0,a().f)(e.pageStore)||e.spaceStore;if(!t)return;const o=t.id;c().fu.setSpaceId(o),e.pageStore?c().fu.setParent(e.pageStore.id,"block"):c().fu.setParent(o,"space")}}),[t.open,e.pageStore,e.spaceStore]);const o=(0,n.useCallback)((()=>{t.open&&c().fu.close({type:"canceled"})}),[t]),l=(0,i().K8)((()=>t.open?c().fu.getCurrentStep():void 0),[t]),d=(0,n.useCallback)((()=>{c().fu.close({type:"canceled"})}),[]),p=(0,n.useMemo)((()=>({width:{type:"fixed",length:1e3},height:{type:"fixed",length:650}})),[]);return l&&t.open?(0,Ce.jsx)(s().s,{isOpen:!0,areaConstraint:p,onDismiss:o,onClosed:d,backgroundAppearance:"wash",render:({sizeRange:o})=>(0,Ce.jsx)(r().Y1,{style:o,children:(0,Ce.jsx)(_t,{currentModalStep:l,pageStore:e.pageStore,spaceStore:e.spaceStore,spaceViewStore:e.spaceViewStore,analyticsFrom:e.analyticsFrom,collectionViewBlockStore:t.collectionViewBlockStore})})}):null}function _t({currentModalStep:e,pageStore:t,spaceStore:o,spaceViewStore:n,analyticsFrom:a,collectionViewBlockStore:s}){if(!(0,i().K8)((()=>c().fu.state.open),[]))return null;switch(e){case"uploadFile":return(0,Ce.jsx)(wt,{spaceStore:o,collectionViewBlockStore:s,analyticsFrom:a});case"mapFieldsForImport":case"mapFieldsForMerge":return(0,Ce.jsx)(Xe,{pageStore:t,spaceStore:o,spaceViewStore:n,analyticsFrom:a});case"importing":return(0,Ce.jsx)(Mt,{});default:(0,l().HB)(e)}}},873049:(e,t,o)=>{function n(e){return e.isSurrogateCollection&&e.collectionId?`collection_${e.collectionId}`:`block_${e.id}`}o.d(t,{a:()=>n})},876712:(e,t,o)=>{o.d(t,{A:()=>c});o(581454),o(296540);var n=()=>o(807449),a=()=>o(302501),i=()=>o(156252),s=()=>o(69708),r=()=>o(100622),l=o(474848);const c=function(e){var t;const c=(0,o(401497).IS)((()=>({lightText:{color:r().Tj.text.tertiary}})),[]);return(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%"},children:[(0,l.jsxs)(o(249046).Ye,{style:{gap:8,marginTop:32,marginBottom:32,alignItems:"center"},children:[(0,l.jsx)("img",{style:{width:32,height:32,marginInlineEnd:8},src:e.assetSrc}),Array.from({length:3}).map(((e,t)=>(0,l.jsx)(n().I,{icon:i().l,size:"sm",fitToViewBox:"horizontal",colorVariant:"tertiary"},`dot-before-${t}`))),(0,l.jsx)(n().I,{icon:o(637433).xMarkCircleFillIcon,colorPalette:"red",colorVariant:"accentPrimary"}),Array.from({length:3}).map(((e,t)=>(0,l.jsx)(n().I,{icon:i().l,size:"sm",fitToViewBox:"horizontal",colorVariant:"tertiary"},`dot-after-${t}`))),(0,l.jsx)("img",{src:o(148307).A.images.notionLogoPng,style:{width:32,height:32,marginInlineStart:8}})]}),(0,l.jsx)(a().A,{style:c.lightText,children:e.failedMessage}),(0,l.jsx)(a().A,{style:c.lightText,children:(0,l.jsx)(s().sA,{id:"import.importingData.failed.viewLoggerPage",defaultMessage:"Please try again or read the {link} to troubleshoot.",values:{link:(0,l.jsx)("a",{style:{color:r().oZ.black,cursor:"pointer"},href:`/${null===(t=e.loggerPageId)||void 0===t?void 0:t.replaceAll("-","")}`,children:(0,l.jsx)(s().sA,{id:"import.importingData.failed.linkText",defaultMessage:"import logs"})})}})})]})}},884189:(e,t,o)=>{o.d(t,{$:()=>r});var n=()=>o(534177),a=()=>o(925832),i=()=>o(292985);function s({start:e,end:t,scrollStart:o,scrollEnd:a,containerSize:i,alignment:s}){switch(s){case"start":return e;case"end":return t-i;case"center":return e+(t-e)/2-i/2;case"nearest":const r=t-e>i,l=Math.abs(e-o)<Math.abs(t-a);return r||l?e:t-i;default:(0,n().HB)(s)}}function r(e){const{element:t,environment:o,additionalPadding:n={},blockAlignment:r,inlineAlignment:l,behavior:c="smooth",verticalVisibilityRequirement:d="topAndBottomVisible",horizontalVisibilityRequirement:p="leftAndRightVisible"}=e,{top:u=0,bottom:m=0,left:g=0,right:f=0}=n,h=(0,a().s)(t)[0],v=t.getBoundingClientRect(),y=v.top-u,x=v.bottom+m,S=v.left-g,I=v.right+f;if(!h)return;const b=h.getBoundingClientRect(),j=y>=b.top,A=x<=b.bottom,w=S>=b.left,C=I<=b.right,k=j&&A,T=w&&C;if(("topAndBottomVisible"===d?k:"topVisible"===d?j:"bottomVisible"!==d||A)&&("leftAndRightVisible"===p?T:"leftVisible"===p?w:"rightVisible"!==p||C))return;const M=h.scrollTop,P=h.scrollTop+h.clientHeight,_=h.scrollLeft,B=h.scrollLeft+h.clientWidth,F=s({start:k?M:M+(y-b.top),end:k?P:P+(x-b.bottom),scrollStart:M,scrollEnd:P,containerSize:h.clientHeight,alignment:r??"nearest"}),E=s({start:T?_:_+(S-b.left),end:T?B:B+(I-b.right),scrollStart:_,scrollEnd:B,containerSize:h.clientWidth,alignment:l??"nearest"});(0,i().V)({element:h,environment:o,options:{top:F,left:E,behavior:c}})}},884211:(e,t,o)=>{o.r(t),o.d(t,{getLocalFrecencyRankedSearchResultsWithStore:()=>le,searchAndRerankLocalPages:()=>re});o(898992),o(823215),o(354520),o(672577),o(430670),o(803949),o(581454),o(737550);var n=()=>o(314529),a=()=>o(242422),i=()=>o(295633),s=()=>o(730240),r=()=>o(179034),l=()=>o(282834),c=()=>o(245241),d=()=>o(778078),p=()=>o(496603),u=()=>o(498212),m=()=>o(534177),g=()=>o(222917),f=(o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),()=>o(144213)),h=()=>o(604995),v=()=>o(416504),y=()=>o(470928);class x{constructor(e){this.startingTimestamp=void 0,this.endingTimestamp=void 0,this.startingTimestamp=e.starting&&h().ln(e.starting,(0,v().P)()),this.endingTimestamp=e.ending&&h().ln(e.ending,(0,v().P)())}matches(e){return void 0!==e&&(!(void 0!==this.startingTimestamp&&e<this.startingTimestamp)&&!(void 0!==this.endingTimestamp&&e>this.endingTimestamp))}}class S{constructor(e){this.filters=void 0,this.activeFilters=void 0,this.ancestorFilterIds=void 0,this.parentFilterId=void 0,this.createdTimeMatcher=void 0,this.lastEditedTimeMatcher=void 0,this.teamFilterIds=void 0,this.dev_notInTeamFilterIds=void 0,this.dev_notInPagesFilterIds=void 0,this.excludedParentCollectionIds=void 0,this.filters=e,this.activeFilters=(0,o(850913).u)(e),this.ancestorFilterIds=new Set(e.ancestors),this.parentFilterId=e.parentId,this.createdTimeMatcher=new x(e.createdTime),this.lastEditedTimeMatcher=new x(e.lastEditedTime),this.teamFilterIds=new Set(c().fg(e.inTeams)??[]),this.dev_notInTeamFilterIds=new Set(e.dev_excludedTeams),this.dev_notInPagesFilterIds=new Set(e.dev_excludedPages),this.excludedParentCollectionIds=new Set(e.excludedParentCollectionIds)}matches({blockModel:e,blockStore:t,path:n,source:a}){if(!Boolean(this.activeFilters.isDeletedOnly)!==e.alive)return!1;if(this.activeFilters.excludeTemplates&&e.is_template)return!1;if(this.activeFilters.isOfflineOnly){if(!(0,o(968913).Bd)(e.id))return!1}else if(1===a.size&&a.has("offlinePage"))return!1;if(this.activeFilters.editedBy){const t=e.last_edited_by_id||e.last_edited_by;if(!t||!this.filters.editedBy.includes(t))return!1}if(this.activeFilters.createdBy){const t=e.created_by_id||e.created_by;if(!t||!this.filters.createdBy.includes(t))return!1}if(this.activeFilters.ancestors&&!n.some((({value:e})=>this.ancestorFilterIds.has(e.id))))return!1;if(this.activeFilters.parentId){if(n.length<2)return!1;const[e,{value:{id:t}}]=n;return this.parentFilterId===t}if(this.activeFilters.lastEditedTime&&!this.lastEditedTimeMatcher.matches(e.last_edited_time))return!1;if(this.activeFilters.createdTime&&!this.createdTimeMatcher.matches(e.created_time))return!1;if(this.activeFilters.inTeams){var i;const e=(0,f().u)(n),t=null==e||null===(i=e.value)||void 0===i?void 0:i.id;if(!t||!this.teamFilterIds.has(t))return!1}if(this.activeFilters.blockTypes){const t=this.filters.blockTypes;if(!t)return!0;if(!t.includes(e.type))return!1}if(this.activeFilters.verificationOwners){if(!t)return!1;const{verificationOwners:e}=(0,y().h4)({blockStore:t});if(!e.some((e=>(this.filters.verificationOwners||[]).includes(e.id))))return!1}if(this.activeFilters.excludedParentCollectionIds){if(!t)return!1;const e=t.getAssociatedCollectionId();if(e&&this.excludedParentCollectionIds.has(e))return!1}return!0}}var I=()=>o(613885),b=()=>o(981342),j=()=>o(617711);o(944114);async function A(e){const{spaceId:t,userId:n,blocks:a,environment:i}=e,s=a.map((e=>e.blockModel.id));if(!t||!n||!(0,m().EI)(s))return;const r=await o(769864).callApi({eventName:"getPageSignals",environment:i,data:{spaceId:t,pageIds:s,includeRecords:!0,signals:[{name:"pageAuthorityV1"}]}});if("success"===r.type){const e=s.map((e=>({})));r.data.signals.forEach((t=>{if("success"===t.status){const{name:o,data:n}=t;n.forEach(((t,n)=>{e[n][o]=t}))}}));const o=(0,m().MU)(e.map(((e,t)=>[s[t],e]))),a=C.getKey(t,n);C.update((e=>{const t=e.pageSignals.get(a),n=e.pageSignals.set(a,{...t,...o});return{...e,pageSignals:n}}))}}class w extends(()=>o(757695))().Store{getInitialState(){return{pageSignals:new Map}}getKey(e,t){return`${e}:${t}`}getPageSignals({spaceId:e,userId:t}){if(!e||!t)return;const o=this.getKey(e,t),n=this.state.pageSignals.get(o);return n||void 0}async updatePageSignals(e){const{spaceId:t,userId:o,blocks:n}=e;if(!t||!o)return;const a=this.getPageSignals(e),i=void 0===a?n:n.filter((e=>!a.hasOwnProperty(e.blockModel.id)));if(i.length>0&&await A({...e,blocks:i}),a){const e=Object.keys(a).length+i.length;if(e>2048){const i=e-2048,s=new Set(n.map((e=>e.blockModel.id)));!function(e){const{spaceId:t,userId:o,pageIds:n}=e,a=C.getKey(t,o);C.update((e=>{const t={...e.pageSignals.get(a)};n.forEach((e=>delete t[e]));const o=e.pageSignals.set(a,t);return{...e,pageSignals:o}}))}({spaceId:t,userId:o,pageIds:Object.keys(a).filter((e=>!s.has(e))).slice(0,i)})}}}}const C=new w;class k{constructor(e,t,n){var a;this.featuresets=void 0,this.queryLower=void 0,this.userId=void 0,this.spaceId=void 0,this.currentTimeMs=void 0,this.currentDateMs=void 0,this.pageSignals=void 0,this.resultsFeatureMetadata={},this.recentPagesMap=void 0,this.featuresets=e,this.queryLower=n.toLowerCase();const i=t.currentUser.id,s=null===(a=(0,o(755531).S)())||void 0===a?void 0:a.id;this.userId=i,this.spaceId=s,this.currentTimeMs=Date.now(),this.currentDateMs=new Date(new Date(this.currentTimeMs).toDateString()).getTime(),this.pageSignals=C.getPageSignals({spaceId:this.spaceId,userId:this.userId}),this.recentPagesMap=p().Bj((()=>{const e=(s?o(968172).A.get(s):[])??[];return new Map(e.map((e=>[e.pageId,e.visitedAt])))}))}searchFrecencyVisits(e){const{spaceId:t,userId:n}=this;if(t&&n)return(0,o(478988).C8)({spaceId:t,userId:n,pageId:e})}searchSimilarUserVisits(e){const{spaceId:t,userId:n}=this;if(t&&n)return function(e){const{spaceId:t,userId:n,pageId:a}=e,i=o(314648).default.getUserSignals({spaceId:t,userId:n});if(!i)return;return i.similarUserRecentPages[a]}({spaceId:t,userId:n,pageId:e})}extractFeatureGroup(e){const t=[];for(const o of this.featuresets){const n={groupName:o.name,features:[]};for(const t of o.features)n.features.push(t({result:e,featureExtractor:this}));t.push(n)}return t}}var T=()=>o(720665),M=()=>o(523584);function P(e){return Number.isFinite(e)?e:0}const _={name:"CLIENT_FEATURESET_RELEVANCY_MODEL",features:[function({result:e,featureExtractor:t}){return{name:"TIME_SINCE_LAST_EDIT",value:t.currentTimeMs-e.block.blockModel.last_edited_time}},function({result:e,featureExtractor:t}){return{name:"IS_LAST_EDITED_BY_ME",value:t.userId&&e.block.blockModel.last_edited_by_id===t.userId?1:0}},function({result:e,featureExtractor:t}){return{name:"IS_CREATED_BY_ME",value:t.userId&&e.block.blockModel.created_by_id===t.userId?1:0}},...c().jp.map((e=>({result:t})=>({name:`BLOCK_SOURCE_${e}`,value:t.block.source.has(e)?1:0}))),function({result:e,featureExtractor:t}){var o;return{name:"PAGE_AUTHORITY_V1",value:t.pageSignals?null===(o=t.pageSignals[e.block.blockModel.id])||void 0===o?void 0:o.pageAuthorityV1:void 0}},function({result:e}){return{name:"TITLE_LENGTH",value:e.block.text.length}},function({result:{terms:e},featureExtractor:{queryLower:t}}){return{name:"TERMS_COUNT_NORMALIZED",value:P(e.length/(0,M().Bj)(t).length)}},function({result:{terms:e},featureExtractor:{queryLower:t}}){const o=(0,M().Bj)(t),n=new Set(e);return{name:"FULL_MATCH_TERM_COUNT_NORMALIZED",value:P(o.filter((e=>n.has(e))).length/o.length)}},function({result:{terms:e,block:{text:t}}}){const o=(0,M().Bj)(t.toLowerCase());return{name:"MATCHING_PERCENTAGE_OF_TITLE",value:P(e.length/o.length)}}]},B={name:"CLIENT_FEATURESET_RELEVANCY_MODEL_UNIFIED",features:[function({result:e,featureExtractor:t}){const o=e.block.blockModel.id,n=t.recentPagesMap().get(o),a=t.currentDateMs,i=Math.max(n??-1);return i<0?{name:"RECENT_VISIT_SCORE",value:R}:{name:"RECENT_VISIT_SCORE",value:1+F({nowDateMs:a,visitedAt:i})}},function({result:e,featureExtractor:t}){const o=e.block.blockModel.id,n=t.searchFrecencyVisits(o),a=t.currentDateMs;if(!n)return{name:"SEARCH_FRECENCY_SCORE",value:R};const i=n.visits.map((e=>F({nowDateMs:a,visitedAt:e}))),s=(0,p().cz)(i)/i.length;return{name:"SEARCH_FRECENCY_SCORE",value:1+n.totalVisits*s}},function({result:e,featureExtractor:t}){const o=e.block.blockModel.id,n=t.searchSimilarUserVisits(o);return n&&n.sortedSimilarUserSignals.length?{name:"SIMILAR_USER_VISIT_SCORE",value:1+n.sortedSimilarUserSignals[0].similarity}:{name:"SIMILAR_USER_VISIT_SCORE",value:0}},function({result:e,featureExtractor:t}){return{name:"MINISEARCH_SCORE",value:e.minisearchScore}},function({result:e,featureExtractor:t}){return{name:"MINISEARCH_SCORE_BOOST",value:e.score/e.minisearchScore}}]};function F({nowDateMs:e,visitedAt:t}){const o=new Date(new Date(t).toDateString()).getTime(),n=Math.max(Math.round((e-o)/T().nD),0);return E[Math.min(n,119)]??0}const E=[1,.434123725,.2014437701,.1884654745,.15822173,.1422946031,.142166057,.1585730404,.104180793,.08345552147,.08087231107,.07897914664,.07896564574,.08624855475,.1008828419,.07266583529,.06040518516,.05852083656,.05753743353,.05815673014,.0642358674,.07381557067,.05695876233,.04843320955,.0470903377,.0466126019,.04746668155,.05325934739,.06307552903,.04855074175,.04160564903,.04030096372,.0391499705,.03939387352,.04339750927,.04955280165,.03917733172,.03338547498,.03209648275,.03168258564,.03227832486,.03591521672,.04128251996,.03310833841,.02833391706,.0272294016,.02689436518,.02729836191,.03046923141,.03441215965,.02831271484,.02449716514,.02354647072,.02317412649,.02358864378,.0263629034,.03012237319,.02459941584,.02126459634,.02046809053,.02030330894,.02052315898,.0228313469,.02579947184,.02105456017,.01811545682,.01734374938,.01698213336,.01714570426,.01897155626,.02136217635,.01769765159,.01529119728,.01463419502,.01431262545,.01444443674,.0159017961,.01772871671,.01474489776,.01280999558,.01220517103,.01190906906,.01197576757,.01314474565,.01475010088,.01212414472,.01051461218,.009996802444,.009711358103,.009723316362,.01077170102,.01191292066,.009778124374,.008391943098,.007831708926,.007399958434,.007365904844,.008059776794,.008782521067,.007061224987,.006022772552,.005622109974,.005249218012,.005053326649,.005458692089,.005740997442,.004543123306,.00380476497,.003402129751,.003036012596,.002836157214,.00291875208,.00288708271,.002093633442,.001635128163,.001354411665,.001031197037,.0007361583583,.0005966154595,.000366973101],R=.4558522322;var O=()=>o(939504);o(16280),o(908872);function L(e,t){return D(e,t,0)}function D(e,t,o){const n=t[o];if("value"in n)return n.value;const{feature:a,threshold:i,left:s,right:r}=n;return e[a]<=i?D(e,t,r):D(e,t,s)}const V=[{feature:"NUMBER_OF_BLOCK_SOURCES",threshold:.9803883731365204,left:1,right:64},{feature:"NUMBER_OF_BLOCK_SOURCES",threshold:-.02051524817943573,left:2,right:33},{feature:"TITLE_LENGTH",threshold:-.9804741442203522,left:3,right:18},{feature:"BLOCK_SOURCE_frecencyStore",threshold:.5,left:4,right:11},{feature:"PAGE_AUTHORITY_V1",threshold:.9929431676864624,left:5,right:8},{feature:"BLOCK_SOURCE_recentVisit",threshold:.5,left:6,right:7},{value:.055661729574773056},{value:.11489805030510493},{feature:"IS_LAST_EDITED_BY_ME",threshold:.5,left:9,right:10},{value:.1303473491773309},{value:.2761679479597871},{feature:"PAGE_AUTHORITY_V1",threshold:.7070983946323395,left:12,right:15},{feature:"BLOCK_SOURCE_recentVisit",threshold:.5,left:13,right:14},{value:.15403218305273927},{value:.2901420576840293},{feature:"BLOCK_SOURCE_recentVisit",threshold:.5,left:16,right:17},{value:.3969548667754214},{value:.5434689507494647},{feature:"BLOCK_SOURCE_frecencyStore",threshold:.5,left:19,right:26},{feature:"PAGE_AUTHORITY_V1",threshold:-9373319335297929e-20,left:20,right:23},{feature:"BLOCK_SOURCE_recentVisit",threshold:.5,left:21,right:22},{value:.019246861924686193},{value:.0422577337207315},{feature:"MATCHING_PERCENTAGE_OF_TITLE",threshold:.38750000298023224,left:24,right:25},{value:.04463445567238064},{value:.08163417730973187},{feature:"PAGE_AUTHORITY_V1",threshold:.9430259466171265,left:27,right:30},{feature:"BLOCK_SOURCE_recentVisit",threshold:.5,left:28,right:29},{value:.04921499627799959},{value:.11522081288769559},{feature:"BLOCK_SOURCE_recentVisit",threshold:.5,left:31,right:32},{value:.15812057498390902},{value:.26642904878592116},{feature:"TITLE_LENGTH",threshold:-.8644499182701111,left:34,right:49},{feature:"PAGE_AUTHORITY_V1",threshold:.7071063816547394,left:35,right:42},{feature:"TIME_SINCE_LAST_EDIT",threshold:-.9999998509883881,left:36,right:39},{feature:"MATCHING_PERCENTAGE_OF_TITLE",threshold:.7386363744735718,left:37,right:38},{value:.5046524356869184},{value:.6139737991266375},{feature:"MATCHING_PERCENTAGE_OF_TITLE",threshold:.9545454680919647,left:40,right:41},{value:.35265916931762176},{value:.4631217838765009},{feature:"IS_LAST_EDITED_BY_ME",threshold:.5,left:43,right:46},{feature:"BLOCK_SOURCE_teamPage",threshold:.5,left:44,right:45},{value:.5826717293752157},{value:.3459669582118562},{feature:"MATCHING_PERCENTAGE_OF_TITLE",threshold:.9285714328289032,left:47,right:48},{value:.6696084874659657},{value:.7931906286870049},{feature:"PAGE_AUTHORITY_V1",threshold:.7071079015731812,left:50,right:57},{feature:"TIME_SINCE_LAST_EDIT",threshold:-.7071194350719452,left:51,right:54},{feature:"TITLE_LENGTH",threshold:.0027717105112969875,left:52,right:53},{value:.3084340622029064},{value:.20221830985915493},{feature:"TITLE_LENGTH",threshold:.0014528378378599882,left:55,right:56},{value:.19599360481519798},{value:.12874983418294833},{feature:"BLOCK_SOURCE_frecencyStore",threshold:.5,left:58,right:61},{feature:"MATCHING_PERCENTAGE_OF_TITLE",threshold:.3484848588705063,left:59,right:60},{value:.1674727932285369},{value:.2761101463656661},{feature:"MATCHING_PERCENTAGE_OF_TITLE",threshold:.3229166716337204,left:62,right:63},{value:.31311018131101814},{value:.4333284274045184},{feature:"TITLE_LENGTH",threshold:-.8199742436408997,left:65,right:96},{feature:"PAGE_AUTHORITY_V1",threshold:.9987315237522125,left:66,right:81},{feature:"TIME_SINCE_LAST_EDIT",threshold:-.7075438499450684,left:67,right:74},{feature:"TERMS_COUNT_NORMALIZED",threshold:.7859025001525879,left:68,right:71},{feature:"NUMBER_OF_BLOCK_SOURCES",threshold:1.0080004930496216,left:69,right:70},{value:.6666666666666666},{value:.5572065378900446},{feature:"MATCHING_PERCENTAGE_OF_TITLE",threshold:.8090909123420715,left:72,right:73},{value:.730962836028703},{value:.82483781278962},{feature:"TERMS_COUNT_NORMALIZED",threshold:.7750000059604645,left:75,right:78},{feature:"BLOCK_SOURCE_defaultRecordCache",threshold:.5,left:76,right:77},{value:.5598243688254665},{value:.3112244897959184},{feature:"BLOCK_SOURCE_frecencyStore",threshold:.5,left:79,right:80},{value:.48986486486486486},{value:.6522655426765016},{feature:"TIME_SINCE_LAST_EDIT",threshold:-.9759486615657806,left:82,right:89},{feature:"IS_CREATED_BY_ME",threshold:.5,left:83,right:86},{feature:"BLOCK_SOURCE_frecencyStore",threshold:.5,left:84,right:85},{value:.7596830985915493},{value:.8754666411409974},{feature:"TERMS_COUNT_NORMALIZED",threshold:.7750000059604645,left:87,right:88},{value:.8577648766328012},{value:.9412431085265464},{feature:"TERMS_COUNT_NORMALIZED",threshold:.9000000059604645,left:90,right:93},{feature:"MATCHING_PERCENTAGE_OF_TITLE",threshold:.7083333432674408,left:91,right:92},{value:.7364085667215815},{value:.4639175257731959},{feature:"BLOCK_SOURCE_frecencyStore",threshold:.5,left:94,right:95},{value:.7003610108303249},{value:.8495272810115048},{feature:"PAGE_AUTHORITY_V1",threshold:.9999995827674866,left:97,right:112},{feature:"TITLE_LENGTH",threshold:1.0038834810256958,left:98,right:105},{feature:"BLOCK_SOURCE_frecencyStore",threshold:.5,left:99,right:102},{feature:"BLOCK_SOURCE_recentVisit",threshold:.5,left:100,right:101},{value:.18298261665141813},{value:.34929850024189646},{feature:"TIME_SINCE_LAST_EDIT",threshold:-.7071070969104767,left:103,right:104},{value:.5148422178641469},{value:.42366514623021195},{feature:"NUMBER_OF_BLOCK_SOURCES",threshold:1.3351261019706726,left:106,right:109},{feature:"TITLE_LENGTH",threshold:1.4187065362930298,left:107,right:108},{value:.2810958904109589},{value:.14157014157014158},{feature:"BLOCK_SOURCE_frecencyStore",threshold:.5,left:110,right:111},{value:.19499105545617174},{value:.40776554596846176},{feature:"BLOCK_SOURCE_frecencyStore",threshold:.5,left:113,right:120},{feature:"PAGE_AUTHORITY_V1",threshold:1.4150558710098267,left:114,right:117},{feature:"TITLE_LENGTH",threshold:.09616653248667717,left:115,right:116},{value:.5727355901189387},{value:.4002079002079002},{feature:"TITLE_LENGTH",threshold:.36996421217918396,left:118,right:119},{value:.3089700996677741},{value:.10194174757281553},{feature:"PAGE_AUTHORITY_V1",threshold:1.000001072883606,left:121,right:124},{feature:"MATCHING_PERCENTAGE_OF_TITLE",threshold:.22649572789669037,left:122,right:123},{value:.6954795357361027},{value:.7911777488048675},{feature:"TITLE_LENGTH",threshold:-.2670345604419708,left:125,right:126},{value:.7278492480521833},{value:.5908471377647305}],z=["PAGE_AUTHORITY_V1"],N=["TIME_SINCE_LAST_EDIT"],U=["TIME_SINCE_LAST_EDIT","PAGE_AUTHORITY_V1","TITLE_LENGTH","NUMBER_OF_BLOCK_SOURCES"];class W extends Error{constructor(e,t){super(e),this.name="MathError",this.cause=void 0,this.cause=t}}function H(e){if(0===e.length)throw new Error("Can't compute std of an empty array.");const t=(0,p().i2)(e),o=(0,p().cz)(e.map((e=>Math.pow(e-t,2))))/e.length;return Math.sqrt(o)}const q=[function(e){return{name:"NUMBER_OF_BLOCK_SOURCES",value:e.reduce(((e,{name:t,value:o})=>void 0!==o&&t.startsWith("BLOCK_SOURCE")?e+o:e),0)}}];function K(e){return[...e,...q.map((t=>t(e)))]}const $={TIME_SINCE_LAST_EDIT:-.17725330223424154,IS_LAST_EDITED_BY_ME:.16176141450635628,IS_CREATED_BY_ME:.0593282388860205,BLOCK_SOURCE_spacePage:-.1800298837847493,BLOCK_SOURCE_recentVisit:.38019907955270416,BLOCK_SOURCE_bookmarkedPage:.2273554336295929,BLOCK_SOURCE_sharedPage:-.11405912441003871,BLOCK_SOURCE_frecencyStore:.7303811564943883,BLOCK_SOURCE_teamPage:-.3886937481702676,BLOCK_SOURCE_defaultRecordCache:-.08630181620439217,BLOCK_SOURCE_similarUser1dRecentPages:.1516065982402135,BLOCK_SOURCE_topPages7dPageView:.04024980669809112,BLOCK_SOURCE_editedPages1d:-.12760596916369363,BLOCK_SOURCE_similarUsersEditedPages1d:-.209104241796053,BLOCK_SOURCE_customAgent:0,BLOCK_SOURCE_offlinePage:0,BLOCK_SOURCE_unknown:0,PAGE_AUTHORITY_V1:.4303514640388112,TITLE_LENGTH:-.4316382562266375,TERMS_COUNT_NORMALIZED:-.1032745452783248,FULL_MATCH_TERM_COUNT_NORMALIZED:.18313025417928205,MATCHING_PERCENTAGE_OF_TITLE:1.0003388486917193,NUMBER_OF_BLOCK_SOURCES:.7940652678793755,BLOCK_SOURCE_inboxPage:0},Y=-2.48072057;function Z(e){const t=e.map((({name:e,value:t})=>$[e]*(t??0)));return o=(0,p().cz)([Y,...t]),1/(1+Math.exp(-o/2));var o}function G(e){if(e.some((({value:e})=>void 0===e)))return 0;const t=(0,m().MU)(e.map((({name:e,value:t})=>[e,t]))),o=[V].map((e=>L(t,e)));return(0,p().i2)([...o,Z(e)])}var J=()=>o(109054);const Q=1.25,X=[_],ee=0;function te(e){const{results:t,featureGroups:o,shouldCalculateRelevancies:n}=e,a=t.map(((e,t)=>{const n=e.block.workflowStore;let a;const{block:i,score:r,personalizationBoost:l,rendered:d,terms:p}=e,u={text:d};if(n){var m;a=(0,O().getAvailableWorkflowData)(n);const e=n.getCreatedByPointer(),t=e?(0,s().JQ)({parentStore:n,pointer:e}):void 0,o=`${(null==t?void 0:t.getName())??""}`;u.title=null===(m=a)||void 0===m?void 0:m.name,u.pathText=o,u.text=d}return{sources:[c().Ni.Local],id:i.blockModel.id,collectionId:i.collectionModel?i.collectionModel.id:void 0,isSurrogateCollection:void 0!==i.collectionModel,spaceId:i.blockModel.space_id,score:r,localSource:i.source,personalizationBoost:l,terms:p,highlight:u,featureGroups:o[t],workflowData:a}})),i=n?function(e){const t=X.map(((t,o)=>{const n=e.map((({featureGroups:e})=>{var t;return null===(t=e[o])||void 0===t?void 0:t.features}));if(n.some((e=>void 0===e)))return;return function(e){const t=(0,p().mg)(e);for(const i of t)for(const e of i)(0,m().Xk)(z,e.name)?e.value??=0:(0,m().Xk)(N,e.name)&&(e.value=Math.log(e.value??1));const o=new Map,n=new Map,a=new Map;for(const i of t)for(const e of i)if(void 0!==e.value&&(0,m().Xk)(U,e.name)){o.has(e.name)||o.set(e.name,[]);const t=o.get(e.name);t&&t.push(e.value)}for(const[i,s]of o.entries())n.set(i,(0,p().i2)(s)),a.set(i,H(s));for(const i of t)for(const e of i)if((0,m().Xk)(U,e.name)){const t=n.get(e.name),o=a.get(e.name);if(void 0===e.value||void 0===t||void 0===o)throw new W(`Couldn't scale feature ${e.name}`);e.value=0===o?0:(e.value-t)/o}return t}(n.map(K)).map(G)}));if(!t.some((e=>void 0===e)))return(0,p().$1)(t.filter(m().O9))}(a):void 0;return a.map(((e,t)=>({...e,localRelevancies:void 0!==i?i[t]:void 0})))}function oe(e,t,o){const n=e=>o.matches(e.block),a=(0,l().qw)(t);if(1===a.length)return e.search(t,{filter:n,prefix:!0,fields:["text","inits"]});const i=e.search(t,{filter:n,combineWith:"AND",fields:["text"]});if(i.length>0)return i;const s=a.filter((e=>e.length>=M().k2)),r=(c=s.length,Math.round(.6*c+.5));var c;return e.search(t,{filter:e=>e.queryTerms.length>=r&&n(e)})}function ne(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ae(e){const{block:t,score:o,terms:n}=e,{source:a,text:i}=t,s=function(e,t){const o=t.map(ne).join("|"),n=new RegExp(o,"ig");return t.length>0?e.replaceAll(n,`${c().$8}$&${c()._x}`):e}(i,n);var r;return{block:t,rendered:s,score:o,personalizationBoost:(r=a).has("recentVisit")||r.has("frecencyStore")||r.has("bookmarkedPage")||r.has("defaultRecordCache")||r.has("inboxPage")?Q:1,terms:n,minisearchScore:e.minisearchScore??o}}function ie(e,t,o){const{blocks:n,getAllBlocks:a}=e,i=o.text.trim(),s=(0,u().dY)(i),r=s.length>0?s.join(" "):i,l=new S(t);return r.length>0?function(e){const{blocksIndex:t,queryString:o,filterMatcher:n}=e,a=oe(t,o,n),i={exactMatch:d().gK,prefixMatch:1.5,wordPrefixMatch:1.25,substringMatch:1,dateMatch:d().tz};return a.map((e=>{const t=(0,M().B1)(o,e.block.text,i);return ae({...e,score:e.score*t,minisearchScore:e.score})}))}({blocksIndex:n,queryString:r,filterMatcher:l}):a().filter((e=>l.matches(e.block))).map(ae)}const se=(0,p().sg)(((e,t)=>{t[0].featureGroups.forEach((({groupName:o},a)=>{const i=t.map((e=>({features:e.featureGroups[a].features,id:e.id})));(0,n().DO_NOT_USE_trackLegacy)(e,"search_local_result_features",{search_session_id:g().wr(),group_name:o,results_features:i})}))}),1e3,{leading:!1,trailing:!0});function re({query:e,localCachedPages:t,userId:o,includeRecordMap:n,environment:s,shouldUseNewRerankerDebugOverrideEnabled:l,spaceStore:c}){const{query:d,limit:u}=e,{filters:m,sort:g}=d,f=ie(t,m,d);if(0===f.length)return;const h=function(e,t){const{field:o}=e,n="relevance"===o||"desc"===e.direction?-1:1;switch(o){case"lastEdited":case"scroll":return(0,p().Ul)(t,(({block:{blockModel:e}})=>n*(e.last_edited_time||0)));case"created":return(0,p().Ul)(t,(({block:{blockModel:e}})=>n*(e.created_time||0)));default:return(0,p().Ul)(t,(({score:e})=>n*e))}}(g,f),v="relevance"===g.field,x=l||"on"===a().default.getEligibleGroup({experimentId:"search-use-local-reranker-layered",parameter:"shouldUseLocalReranker",defaultGroup:"control"}),S=function(e,t,o,n){const a=new k(t,e,o);return n.map((e=>a.extractFeatureGroup(e)))}(s,x?[_,B]:[B],e.query.text,h),I=te({results:h,featureGroups:S,shouldCalculateRelevancies:x}),A=x&&I.every((({localRelevancies:e})=>void 0!==e&&e.length>0&&void 0!==e[ee])),w=v?A?(C=ee,I.sort((({localRelevancies:e},{localRelevancies:t})=>(t??[])[C]-(e??[])[C]))):function(e){const t=e.map((e=>{const t=e.featureGroups.flatMap((e=>e.groupName===B.name?e.features:[])).find((e=>"SEARCH_FRECENCY_SCORE"===e.name)),o=t?t.value:void 0;return o&&(e.score*=o),e}));return(0,p().Ul)(t,(({score:e})=>-1*e))}(I):I;var C;let T=w;if(c){const e=(0,j().$e)(c),t=(0,b().jj)(c),o=m.contentStatusFilter;let n=!1;void 0!==o&&(n="all_without_archived"===o||"verified_only"===o);const a="verified_only"===o;t&&e&&!n&&!a||(T=T.filter((o=>{const s=i().B.createChildStore(c,{table:r().ev,id:o.id}),l=(0,y().i1)(s);return(!n||"archived"!==l.type)&&((!a||"verified"===l.type)&&(0,J().oU)({blockStore:s,shouldShowPeopleCollection:t,shouldShowUserProfiles:e}))})))}const M=T.slice(0,u);return(0,y().EG)({results:M,recordMap:t.recordMap}),{total:f.length,results:M,recordMap:n??1?t.recordMap.toJson():{},trackEventProperties:void 0,allMatchingResultIds:w.map((e=>e.id))}}function le({query:e,localCachedPages:t,parentStore:o,spaceStore:a,isOnline:s,environment:l,shouldLimitLocalResultsWhenOnline:d,canUseLtr:u,shouldUseNewRerankerDebugOverrideEnabled:f}){const h=re({query:e,localCachedPages:t,userId:l.currentUser.id,environment:l,shouldUseNewRerankerDebugOverrideEnabled:f,spaceStore:a});if(!h)return;if(0===h.results.length)return{error:c().yq.NoResults};const v=h.results.map(((e,t)=>{var n;const a=i().B.createChildStore(o,{table:r().ev,id:e.id}),s=a.isCollectionView()?null===(n=a.getCollectionPointerIfSingleSource())||void 0===n?void 0:n.id:void 0;return{...e,originalPosition:t,store:a,serverEventProperties:void 0,collectionId:e.collectionId??s}})),y=s&&d,x=(y?e=>(0,I().k)(l,e):e=>e)(v);if(0===x.length)return{error:c().yq.NoResults};const S=v.map((({localRelevancies:e})=>e)),b=(0,p().$1)(S.filter(m().O9)),j=b.map(p().i2),A=(0,p().$1)(x.map((({localRelevancies:e})=>e)).filter(m().O9)).map(p().i2),w=S.some(m().O9)?{...(0,m().MU)(b.map(((e,t)=>[`result_relevancies_${t}`,e]))),result_relevancies_means:j,visible_result_relevancy_means:A}:{},C=e.query.text.length>1&&u;return(0,n().DO_NOT_USE_trackLegacy)(l,"search_local_recall_results",{results:v.map(ce),search_session_id:g().wr(),num_local_results:x.length,are_results_limited:y,...w}),C&&se(l,x),{value:{total:v.length,totalResultIds:v.map((e=>e.id)),allMatchingResultIds:h.allMatchingResultIds,results:x,debugInfo:void 0}}}function ce(e){const{id:t,localSource:o}=e;return{id:t,localSource:[...o??[]]}}},902842:(e,t,o)=>{o.d(t,{n:()=>w,z:()=>j});o(16280),o(296540);var n=()=>o(590526),a=()=>o(401497),i=()=>o(807449),s=()=>o(663077),r=()=>o(632625),l=()=>o(852424),c=()=>o(278238),d=()=>o(529099),p=()=>o(167170),u=()=>o(199483),m=()=>o(235773),g=()=>o(100622),f=()=>o(534177),h=()=>o(745266),v=()=>o(231314),y=()=>o(3486),x=()=>o(913454),S=o(474848);const I=16;function b({icon:e,themeMode:t,size:o,style:n}){const i=(0,a().IS)((()=>({icon:{fill:(0,y()._)(e,t),...n}})),[e,n,t]);return(0,S.jsx)(r().p,{icon:e,themeMode:t,size:o,style:i.icon})}function j({template:e,size:t,iconStyle:o}){var n;const r=t??I,l=(0,a().IS)((()=>({icon:{width:r,height:r,...o}})),[r,o]),g=(0,a().eP)();if((0,s().cB)(e.templateId))return(0,S.jsx)(i().I,{icon:d().aiFaceIcon,style:l.icon});const{type:v}=e;switch(v){case"property":return(0,S.jsx)(A,{template:e,iconSize:r,styles:l});case"collection_view":return(0,S.jsx)(h().h,{viewIcon:null===(n=e.value.format)||void 0===n?void 0:n.collection_view_icon,viewType:e.value.type,color:"lightGray",style:l.icon});case"layout":return(0,S.jsx)(i().I,{style:l.icon,icon:p()._});case"block":return(0,S.jsx)(S.Fragment,{children:(0,m().notionTemplateTintableIcon)(l.icon)});case"collection":case"compound":const t="collection"===e.type?e.value.targetCollection.icon:e.icon;if(!(0,c().T8)(t))throw new Error("Only Notion static icons are allowed for template icons");return(0,S.jsx)(b,{icon:t,themeMode:g,size:r,style:l.icon});case"automation":return(0,S.jsx)(i().I,{icon:u().o,style:l.icon});default:(0,f().HB)(v)}}function A({template:e,iconSize:t,styles:o}){const i=(0,a().DP)(),s=(0,n().K8)((()=>{const{relatedCollectionTemplateId:t}=e;if("relation"===e.value.type&&t){return x().globalWorkflowTemplates.fromIdOfType({templateId:t,type:"collection"}).value.targetCollection.icon}return e.value.icon}),[e]);return(0,S.jsx)(l().zB,{type:e.value.type,icon:s,size:t,style:o.icon,theme:i})}function w({template:e,backgroundSize:t}){const o=(0,a().IS)((()=>({iconContainer:{background:C({template:e})[30]},icon:{fill:C({template:e})[400]}})),[e]);return(0,S.jsx)(v().y,{backgroundColor:o.iconContainer.background,backgroundSize:t,icon:(0,S.jsx)(j,{template:e,iconStyle:o.icon})})}function C({template:e}){const{type:t}=e;switch(t){case"collection_view":case"automation":return g().Tj.palette.blue;case"property":return"relation"===e.value.type?g().Tj.palette.yellow:g().Tj.palette.red;case"layout":return g().Tj.palette.orange;case"block":return g().Tj.palette.purple;case"compound":return g().Tj.palette.green;case"collection":return g().Tj.palette.pink;default:(0,f().HB)(t)}}},906783:(e,t,o)=>{o.d(t,{U:()=>s});var n=()=>o(769864),a=()=>o(486674),i=()=>o(660571);function s(e){var t;const{environment:o}=e,s=e.spaceId??(null===(t=(0,a().a)())||void 0===t?void 0:t.pointer.spaceId),r=(0,i().e)(e);return!!r&&(s?n().callCellCompatibleApi({eventName:"search",environment:o,data:r,cellNavigation:{spaceId:s}}):n().callApi({eventName:"search",environment:o,data:r}))}},908928:(e,t,o)=>{o.d(t,{GO:()=>V,Ju:()=>D,KA:()=>L,L2:()=>$,MN:()=>z,Q0:()=>H,dA:()=>N,gI:()=>O,gX:()=>K,iN:()=>q,jw:()=>Y,oG:()=>W,sK:()=>U});o(898992),o(354520),o(803949),o(296540);var n=()=>o(891317),a=()=>o(675133),i=()=>o(792057),s=()=>o(128933),r=()=>o(295633),l=()=>o(457205),c=()=>o(807449),d=()=>o(493552),p=()=>o(302501),u=()=>o(243581),m=()=>o(433847),g=()=>o(68263),f=()=>o(388821),h=()=>o(179034),v=()=>o(824862),y=()=>o(161479),x=()=>o(96689),S=()=>o(798880),I=()=>o(69708),b=()=>o(763824),j=()=>o(534177),A=()=>o(855801),w=()=>o(594794),C=()=>o(499764),k=()=>o(547149),T=()=>o(964556),M=()=>o(769864),P=()=>o(496414),_=()=>o(579627),B=()=>o(384944),F=o(474848);const E=(0,I().YK)({duplicatingTemplate:{id:"botActions.duplicatingTemplate.loadingMessage",defaultMessage:"Duplicating template..."},duplicatingTemplateError:{id:"botActions.duplicateTemplateAndShareWithBot.snackbar.failure",defaultMessage:"Failed to duplicate template for to your workspace"},removeInheritedConnectionTitle:{id:"botActions.removeInheritedConnection.title",defaultMessage:"Disconnect {botName} and unlink share settings from parent page?"},removeInheritedConnectionDescription:{id:"botActions.removeInheritedConnection.description",defaultMessage:"This page will no longer inherit share settings from its parent. Admins can still restore settings later."},removeInheritedConnectionAcceptLabel:{id:"botActions.removeInheritedConnection.acceptLabel",defaultMessage:"Disconnect and unlink"}});function R(e,t){const{environment:o,spaceStore:n,membershipType:a}=t,i=function(e){const{name:t,spaceStore:o,userId:n,icon:a,type:i,environment:s}=e,r=Date.now(),l={name:t,created_at:r,created_by_table:S().oo,created_by_id:n,alive:!0,icon:a,space_id:o.id,last_edited_at:r,last_edited_by_id:n,last_edited_by_table:S().oo};switch(i){case"guest":return{...l,type:"guest",capabilities:e.capabilities,parent_table:x().NX,parent_id:o.id,integration_id:void 0};case"scim":return{...l,id:(0,w().Z1)({environment:s,table:v().GP,spaceId:o.id}),type:"scim",parent_table:S().oo,parent_id:n};default:(0,j().HB)(i)}}(t),s=B().eC({environment:o,table:v().GP,value:i,inMemoryRecordCache:o.defaultRecordCache.inMemoryRecordCache,transaction:e});return _().yG({environment:o,spaceStore:n,actors:[{type:"bot",membershipType:a,botId:s.id,parent:void 0}],transaction:e}),{botStore:s}}function O(e){const{environment:t}=e,{serverCommitResult:o,performResult:{botStore:n}}=k().createAndCommit({userAction:"botActions.createSpaceBot",environment:t,canUndo:!0,perform:t=>R(t,e)});return{botStore:n,transactionPromise:o}}async function L(e){const{environment:t,botId:o,onSuccess:n}=e,a=await M().callApi({eventName:"deleteBot",environment:t,data:{botId:o}});"failed"===a.type?i().Qg(a):"success"===a.type&&n&&(await T().refreshExternalIntegrationStore({environment:t}),n())}async function D(e){const{environment:t,table:o,id:a,type:s}=e;let r;return r=o===x().NX?await M().callCellCompatibleApi({eventName:"getBots",environment:t,data:{table:o,id:a,type:s},cellNavigation:{spaceId:a}}):await M().callApi({eventName:"getBots",environment:t,data:{table:o,id:a,type:s}}),"failed"===r.type?(i().Qg(r),{botIds:[],recordMap:{}}):(r.data.integrationManagementPermissions&&n().bM.updatePermissions(r.data.integrationManagementPermissions),{botIds:r.data.botIds,recordMap:r.data.recordMap})}async function V(e){const{environment:t,spaceStore:o,botIds:a}=e;if(!o)return;const s=await M().callApi({eventName:"getBotSharedPageIds",environment:t,data:{spaceId:o.id,botIds:a}});if("failed"!==s.type)return function(e){const{integrationManagementPermissions:t}=e;t&&Object.keys(t).length>0&&n().bM.updatePermissions(t)}({integrationManagementPermissions:s.data.integrationManagementPermissions}),s.data;i().Qg(s)}async function z(e){const{environment:t,spaceStore:o,botIds:n}=e;if(!o)return;const a=await M().callApi({eventName:"getBotSharedAgentIds",environment:t,data:{spaceId:o.id,botIds:n}});if("failed"!==a.type)return a.data;i().Qg(a)}async function N(e){const{environment:t,botId:o}=e,n=await M().callApi({eventName:"getBotToken",environment:t,data:{botId:o}});if("failed"!==n.type)return n.data.token;i().Qg(n)}function U(e){const{botValue:t,store:o,environment:n}=e,{id:a,parent_id:i,parent_table:s,capabilities:r}=t,l={type:"bot_permission",bot_id:a,parent_id:i,parent_table:s,role:(0,m().MD)(r)};k().createAndCommit({userAction:"TopbarMoreButton.handleAddingConnection",environment:n,canUndo:!0,perform:e=>{_().zP({environment:n,store:o,permissionItems:[l],transaction:e})}})}function W(e){const{botId:t,store:o,environment:n}=e,a=o.getPermissionItems().filter((e=>!!(0,g().P3)(e)));for(const i of a)if(i.bot_id===t){const e={...i,role:"none"};k().createAndCommit({userAction:"TopbarMoreButton.handleRemovingConnection",environment:n,canUndo:!0,perform:t=>{_().zP({environment:n,store:o,permissionItems:[e],transaction:t})}})}}async function H(e){const{botId:t,botName:o,store:n,environment:s}=e,r={type:"bot_permission",bot_id:t,role:"none"},l=(await i().Gh({message:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(d().D,{styleKey:"titleSmSemibold",children:a().A.formatMessage(E.removeInheritedConnectionTitle,{botName:o})}),(0,F.jsx)(p().A,{isSmall:!0,isMultiline:!0,style:{marginTop:8},children:(0,F.jsx)(I().sA,{...E.removeInheritedConnectionDescription})})]}),acceptLabel:a().A.formatMessage(E.removeInheritedConnectionAcceptLabel),icon:(0,F.jsx)(c().I,{icon:u().arrowBranchIcon,size:"xl"})})).accept;return l&&k().createAndCommit({userAction:"TopbarMoreButton.handleRemovingInheritedConnection",environment:s,canUndo:!0,perform:e=>{_().wW({environment:s,store:n,permissionItem:r,shouldInherit:!0,transaction:e})}}),l}async function q(e){const{environment:t,spaceStore:o,botStore:n,pageIdAndOperations:a,effectiveAdminOnly:i}=e;return(0!==a.length||void 0!==i)&&(await M().callApi({eventName:"setBotPermissionsForPages",environment:t,data:{spaceId:o.getSpaceId(),botId:n.id,pageOperations:a,effectiveAdminOnly:i}}),!0)}async function K(e){const{environment:t,spaceStore:o,botStore:n,agentOperations:a}=e;return 0!==a.length&&(await M().callApi({eventName:"setBotPermissionsForAgents",environment:t,data:{spaceId:o.getSpaceId(),botId:n.id,agentOperations:a}}),!0)}async function $(e){const{environment:t,spaceStore:o,spaceViewStore:n,templatePageId:i,botValue:c,pages:d}=e;if(!o)return;const p=l().v.createChildStore(o,{table:v().GP,id:c.id});if(i)return await async function(e){const{environment:t,spaceStore:o,spaceViewStore:n,templatePageId:i,botStore:r}=e;if(!o||!n)return;try{P().m({message:E.duplicatingTemplate});const e=await M().callCellCompatibleApi({eventName:"loadBlockSubtree",environment:t,data:{block:{id:i,spaceId:(0,y().e)(void 0)},shallow:!1},cellNavigation:{recordId:i}});if("failed"===e.type)return;const a=f().RecordMapWithRole.create(e.data.subtreeRecordMap),{createAndDuplicatePageInSpace:s}=await(0,A().nd)(),{performResult:l}=k().createAndCommit({userAction:"botActions.duplicateTemplateAndShareWithBot",environment:t,canUndo:!0,perform:e=>{const l=s({environment:t,recordMap:a,copyPageId:i,isPrivate:!0,spaceStore:o,spaceViewStore:n,transaction:e,allowCopyExternalObjectInstances:!1}),c=n.getPrivatePageIds();c.length>0&&B().zv({store:n,data:{private_pages:[l.id,...c]},transaction:e});const d=(0,C().Ws)({botStore:r,addPermission:!0});return _().zP({environment:t,store:l,permissionItems:[d],transaction:e}),l}});return l}catch(l){s().D6({label:a().A.formatMessage(E.duplicatingTemplateError)})}finally{P().V()}}({environment:t,templatePageId:i,botStore:p,spaceStore:o,spaceViewStore:n});!function(e){const{spaceStore:t,environment:o,pages:n,botStore:a,addPermission:i}=e;if(!t)return;const s=(0,C().Ws)({botStore:a,addPermission:i});n.forEach((e=>{const n=r().B.createChildStore(t,{table:h().ev,id:e,spaceId:t.getSpaceId()});k().createAndCommit({userAction:"botActions.updateBlockPermissionsForBot",environment:o,canUndo:!0,perform:e=>{_().zP({environment:o,store:n,permissionItems:[s],transaction:e})}})}))}({environment:t,spaceStore:o,botStore:p,pages:d,addPermission:!0})}async function Y({botIds:e,environment:t}){e&&0!==e.length&&await(0,b().lX)(e,5,(async e=>L({environment:t,botId:e,onSuccess:()=>{}})))}},919960:(e,t,o)=>{o.d(t,{c:()=>j});o(814603),o(147566),o(198721),o(296540);var n=()=>o(564884),a=()=>o(907258),i=()=>o(755531),s=()=>o(726637),r=()=>o(484714),l=()=>o(590526),c=()=>o(401497),d=()=>o(807449),p=()=>o(406094),u=()=>o(493552),m=()=>o(686832),g=()=>o(69708),f=()=>o(100622),h=()=>o(534177),v=()=>o(578465),y=o(474848);const x={"connections-settings":"integration","imports-settings":"migration"};function S({title:e,description:t,action:o}){const n=(0,c().IS)((()=>({container:{display:"flex",alignItems:"center",justifyContent:"center",gap:12,backgroundColor:f().Tj.background.secondary,borderRadius:12,padding:"16px 12px",marginBottom:12},iconContainer:{width:32,height:32,backgroundColor:f().Tj.background.tertiary,borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center"},content:{display:"flex",flexDirection:"column",gap:3,flex:"auto"}})),[]);return(0,y.jsxs)("div",{style:n.container,children:[(0,y.jsx)("div",{style:n.iconContainer,children:(0,y.jsx)(d().I,{icon:m().phoneIcon})}),(0,y.jsxs)("div",{style:n.content,children:[(0,y.jsx)(u().D,{styleKey:"bodyMedium",children:(0,y.jsx)(g().sA,{...e})}),(0,y.jsx)(u().D,{styleKey:"bodyRegular",colorVariant:"secondary",children:(0,y.jsx)(g().sA,{...t})})]}),(0,y.jsx)(p().A,{...o.buttonProps,children:(0,y.jsx)(g().sA,{...o.label})})]})}function I({placement:e}){const t=C[e],o=A({type:"setup-sessions",placement:e}),n=(0,v().J)(),r=function(e){const t=(0,g().tz)(),{userId:o,email:n,firstName:r,lastName:c}=(0,l().K8)((()=>{var e;const o=a().default.state.currentUserStore,n=null==o?void 0:o.id,i=null==o?void 0:o.getEmail(),s=(null==o||null===(e=o.getFullName(t))||void 0===e?void 0:e.trim())||"";let r=s,l="";const c=s.indexOf(" ");return-1!==c&&(r=s.slice(0,c),l=s.slice(c+1)),{userId:n,email:i,firstName:r,lastName:l}}),[t]),d=(0,l().K8)((()=>{const e=(0,i().S)();return null==e?void 0:e.getSubscriptionTier()}),[]),p=`${s().A.domainBaseUrl}/setup-sessions`,u=new URL(p);o&&u.searchParams.set("User-ID",o);n&&u.searchParams.set("email",n);u.searchParams.set("firstName",r),u.searchParams.set("lastName",c),u.searchParams.set("utm_source","consultant_callout"),u.searchParams.set("utm_campaign",e),d&&u.searchParams.set("Plan",d);return u.toString()}(e);return n?null:(0,y.jsx)(S,{title:t.title,description:t.setupSessionsDescription,action:{label:w.setupSessionsActionLabel,buttonProps:{external:!0,href:r,onClick:o}}})}function b({placement:e}){const t=C[e],o=x[e],n=A({type:"consultant-directory",placement:e});return(0,y.jsx)(S,{title:t.title,description:t.consultantDirectoryDescription,action:{label:w.consultantDirectoryActionLabel,buttonProps:{external:!0,href:`/marketplace/consultants?serviceTypes=${o}`,onClick:n}}})}function j({type:e,placement:t}){switch(e){case"setup-sessions":return(0,y.jsx)(I,{placement:t});case"consultant-directory":return(0,y.jsx)(b,{placement:t});default:(0,h().HB)(e)}}function A({type:e,placement:t}){const o=(0,r().v3)();return()=>{(0,n().u)({environment:o,event:{eventName:"marketplace_consultant_callout_click",eventProperties:{placement:t,type:e}}})}}const w=(0,g().YK)({setupSessionsActionLabel:{id:"consultantCallout.setupSessions.actionLabel",defaultMessage:"Book call"},consultantDirectoryActionLabel:{id:"consultantCallout.consultantDirectory.actionLabel",defaultMessage:"Find expert"}}),C={"connections-settings":(0,g().YK)({title:{id:"spaceConnectionsSettings.consultantCallout.title",defaultMessage:"Need help with connections?"},setupSessionsDescription:{id:"spaceConnectionsSettings.consultantCallout.setupSessions.description",defaultMessage:"Claim your free 30 minute session to get help connecting your tools"},consultantDirectoryDescription:{id:"spaceConnectionsSettings.consultantCallout.consultantDirectory.description",defaultMessage:"Find a certified expert to build custom connections"}}),"imports-settings":(0,g().YK)({title:{id:"importsTab.consultantCallout.title",defaultMessage:"Need help migrating?"},setupSessionsDescription:{id:"importsTab.consultantCallout.setupSessions.description",defaultMessage:"Claim your free 30 minute session to get help importing your data"},consultantDirectoryDescription:{id:"importsTab.consultantCallout.consultantDirectory.description",defaultMessage:"Find a certified expert to plan and execute complex migrations"}})}},921030:(e,t,o)=>{o.d(t,{F:()=>a});o(296540);const n={viewBox:"0 0 16 16",fittedViewBox:"2.12 2.73 11.71 9.9",svg:(0,o(474848).jsx)("path",{d:"M3.25 2.73c-.621 0-1.125.504-1.125 1.125V10.5c0 1.174.951 2.125 2.125 2.125h7.458a2.125 2.125 0 0 0 2.125-2.125V6.184a2.125 2.125 0 0 0-2.125-2.125H7.374l-.744-.914a1.13 1.13 0 0 0-.872-.415zm.125 3.445V3.98h2.324l.744.914c.213.263.534.415.872.415h4.393c.48 0 .87.387.875.866zm0 4.325V7.325h9.208V10.5a.875.875 0 0 1-.875.875H4.25a.875.875 0 0 1-.875-.875"})},a=(0,o(340498).wt)("folderSmall",n,"small")},943322:(e,t,o)=>{o.r(t),o.d(t,{evernoteIcon:()=>a,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"1.25 0 16.95 20",svg:(0,o(474848).jsx)("path",{fill:"#00A82D",d:"M6.56 4.494c0 .199-.016.53-.213.746-.214.199-.543.215-.74.215H3.502c-.608 0-.97 0-1.216.034-.132.016-.296.083-.378.116-.033.016-.033 0-.017-.017L6.692.663c.017-.016.033-.016.017.017a1.8 1.8 0 0 0-.116.381c-.032.249-.032.614-.032 1.227zm4.473 14.89c-.56-.364-.855-.845-.97-1.144a2.4 2.4 0 0 1-.181-.912 2.505 2.505 0 0 1 2.499-2.504.74.74 0 0 1 .74.747.73.73 0 0 1-.379.646 1 1 0 0 1-.279.1c-.082.016-.395.05-.543.182a.77.77 0 0 0-.296.58c0 .25.1.481.263.647a1.56 1.56 0 0 0 1.118.465 2.03 2.03 0 0 0 2.023-2.04c0-1.011-.674-1.907-1.562-2.305-.132-.066-.345-.116-.543-.166a7 7 0 0 0-.493-.083c-.69-.083-2.417-.63-2.532-2.172 0 0-.51 2.322-1.529 2.952-.099.05-.23.1-.378.132a2 2 0 0 1-.362.05c-1.66.1-3.42-.431-4.636-1.691 0 0-.822-.68-1.25-2.587-.098-.464-.296-1.293-.41-2.073-.05-.282-.067-.497-.083-.696 0-.813.493-1.36 1.118-1.443h3.354c.575 0 .904-.15 1.118-.348.28-.266.345-.647.345-1.095V1.127C7.268.515 7.81 0 8.615 0h.395c.165 0 .362.017.543.033.131.017.246.05.444.1C11 .38 11.213 1.409 11.213 1.409l2.845.498c.904.166 3.14.315 3.568 2.587 1.002 5.406.394 10.646.345 10.646-.707 5.107-4.916 4.858-4.916 4.858a3.34 3.34 0 0 1-2.022-.614m3.781-10.86c-.543-.05-1.003.165-1.167.58-.033.082-.066.182-.05.232.017.05.05.066.083.083.197.1.526.149 1.003.199s.805.083 1.019.05c.033 0 .066-.017.099-.067s.016-.15.016-.232c-.066-.448-.46-.78-1.003-.846"})},a=(0,o(340498).wt)("evernote",n,"default")},947993:(e,t,o)=>{o.d(t,{Lq:()=>r,QG:()=>f,Uk:()=>u,VN:()=>d,_O:()=>l,de:()=>m,dn:()=>c,lK:()=>s,tH:()=>p,vY:()=>g});var n=()=>o(751735),a=()=>o(100622),i=()=>o(284371);const s=28,r=44,l=144,c=144,d=.1,p=124,u=118;function m({dominantColorFromIcon:e,height:t,width:o}){return{container:{position:"relative",width:o,height:t,display:"flex",justifyContent:"stretch"},coverAndIconContainer:{position:"relative",width:o,marginBottom:16},emptyGalleryCoverStyle:{border:"unset",background:e?(0,n().X4)(e,d):a().Tj.home.cards.coverPhoto.base}}}const g={titleWrap:{width:"100%",minHeight:72,paddingTop:10,paddingBottom:12,paddingInlineStart:16,paddingInlineEnd:16,position:"relative",display:"flex",flexDirection:"column",justifyContent:"space-between",gap:10,flexGrow:1},titleText:{fontWeight:i().Wy.medium,fontSize:i().J.UIRegular.desktop,lineHeight:"normal",width:"auto",whiteSpace:"pre-wrap",...(0,o(115512).pA)(2)}},f={position:"absolute",bottom:-s/2,insetInlineStart:16,width:s,height:s,display:"flex",justifyContent:"flex-start"}},948033:(e,t,o)=>{o.d(t,{$n:()=>d,b0:()=>c,so:()=>u,uu:()=>m,ze:()=>p});var n=()=>o(726637),a=()=>o(484714),i=()=>o(590526),s=()=>o(401497),r=()=>o(100622),l=()=>o(486666);function c(){const{device:e,WindowSizeStore:t}=(0,a().v3)(),o=(0,i().K8)((()=>e.isPhone),[e]),{phonePaddingLeft:n,phonePaddingRight:l}=(0,i().K8)((()=>({phonePaddingLeft:t.getSafePaddingLeftCSS(14),phonePaddingRight:t.getSafePaddingRightCSS(14)})),[t]);return(0,s().IS)((()=>({galleryWrap:{display:"flex",flexWrap:"wrap",alignContent:"flex-start",background:r().Tj.popoverBackground,paddingTop:o?12:0,paddingBottom:o?12:0,paddingInlineStart:o?n:12,paddingInlineEnd:o?l:12,boxShadow:o?`0 1px 0 ${r().Tj.border.secondaryTranslucent}`:""}})),[o,n,l])}function d(){return{display:"flex",alignItems:"center",justifyContent:"center",minHeight:320,flex:1}}function p(e,t){const{device:o,WindowSizeStore:n}=e;return{display:"flex",flexDirection:"column",flexWrap:"wrap",...t?{}:{alignItems:"flex-start"},...o.isPhone?t?{background:r().oZ.transparent,paddingInlineStart:n.getSafePaddingLeftCSS(0),paddingInlineEnd:n.getSafePaddingRightCSS(0)}:{background:r().Tj.popoverBackground,paddingInlineStart:n.getSafePaddingLeftCSS(l().H),paddingInlineEnd:n.getSafePaddingRightCSS(l().MP)}:o.isTablet?{background:r().oZ.transparent,paddingInlineStart:l().FU,paddingInlineEnd:l().FU}:{background:r().oZ.transparent,paddingInlineStart:l().zG,paddingInlineEnd:l().zG}}}function u(e,t,o){var n,a;const{device:i,WindowSizeStore:s}=e;if(i.isPhone){const e=o?0:l().H,t=o?0:l().MP;return(window.innerWidth-s.getSafePaddingLeftPx(e)-s.getSafePaddingRightPx(t))/l().UA}return i.isTablet?l().Vq:null!=t&&null!==(n=t.current)&&void 0!==n&&n.offsetWidth?((null==t||null===(a=t.current)||void 0===a?void 0:a.offsetWidth)-2*l().zG)/l().Sq:l().bc}function m(){return n().A.isMobile?l().zR:l().zf}},963411:(e,t,o)=>{o.d(t,{x3:()=>k,bk:()=>T,D5:()=>M,uA:()=>R,xd:()=>B,kV:()=>_,Xn:()=>F,Oh:()=>P,qf:()=>O,$8:()=>E});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(672577),o(581454);var n=()=>o(907258),a=()=>o(836095),i=()=>o(726637),s=()=>o(792057),r=()=>o(165358),l=()=>o(206267),c=()=>o(651784),d=()=>o(806080),p=()=>o(534177),u=()=>o(939768);const m=(0,o(583835).Dv)("parallelAsanaImport");var g=()=>o(559926),f=()=>o(357625),h=()=>o(61958),v=()=>o(553003),y=()=>o(601734),x=()=>o(725951),S=()=>o(51781),I=()=>o(547149),b=()=>o(797180),j=()=>o(270858),A=()=>o(191227),w=()=>o(114282);const C=(0,o(69708).YK)({titleMessage:{id:"asanaActions.loginWithAsanaPopupModal.title",defaultMessage:"Asana login"}});async function k(e){const{environment:t,flowId:o}=e;g()._$(t,{import_source:"asana",data:{import_type:"api",status:"initiated"},flowId:o}),await t.api.callApi({eventName:"disconnectAsana",environment:t,data:{}});const n=(0,x().LX)(t);let r=(0,c().Rq)(i().A.domainBaseUrl,{authType:n,userId:t.currentUser.id});if(r=n.redirectToAuth?r:await(0,x().YN)(t,r),t.device.isElectron)return b().Z.setState({...b().Z.state,isAccountLinkingInProgress:!0}),void(0,a().P)(r);const l=await h().P(t,{width:580,height:800,url:r,titleMessage:C.titleMessage});if(!l)return;const d=u().qg(l);if(!d.query.code||!d.query.state)return;b().Z.setState({...b().Z.state,isAccountLinkingInProgress:!0});const p=await t.api.callApi({eventName:"authWithAsana",environment:t,data:{code:d.query.code,encryptedState:d.query.state}}),m=await t.api.callApi({eventName:"getAsanaWorkspacesNames",environment:t,data:{}});if("failed"===p.type)g()._$(t,{import_source:"asana",data:{import_type:"api",status:"failure",error:p.error},flowId:o}),console.error(p.error),s().Qg(p);else if(g()._$(t,{import_source:"asana",data:{import_type:"api",status:"success"},flowId:o}),"success"===m.type){const{data:{account:e,workspaces:t}}=m;b().Z.setState({...b().Z.state,isAccountLinkingInProgress:!1,account:e,workspaces:t,currentTab:"selectData",isModalOpen:!0})}}async function T(e){const{environment:t}=e;b().Z.setState({...b().Z.state,isAccountDelinkingInProgress:!0});const o=await t.api.callApi({eventName:"disconnectAsana",environment:t,data:{}});"failed"===o.type?(console.error(o.error),s().Qg(o)):(g().kO(t,{integration_name:"asana"}),"success"===o.type&&b().Z.setState({...b().Z.state,isAccountDelinkingInProgress:!1,account:void 0,workspaces:[]}))}async function M(e){const{selectedWorkspace:t,environment:o,forceReload:n=!0}=e;if(n||!b().Z.state.teamsAndProjects.length){b().Z.setState({...b().Z.state,isLoadingProjects:!0});const e=await o.api.callApi({eventName:"getTeamsAndProjectsInAsanaWorkspace",environment:o,data:{workspaceId:t,size:5}});"success"===e.type&&b().Z.setState({...b().Z.state,teamsAndProjects:e.data,isLoadingProjects:!1})}}async function P(e){const{team:t,environment:o}=e,n=b().Z.getState(),{selectedWorkspace:a,teamsAndProjects:i,loadMoreClicks:s}=n;if(!a)return;const r=await o.api.callApi({eventName:"getTeamsAndProjectsInAsanaWorkspace",environment:o,data:{workspaceId:a,teamId:t.gid,size:5,nextPage:t.nextPage}}),l=i.findIndex((e=>e.gid===t.gid));if(-1!==l&&"success"===r.type){const e=r.data.find((e=>e.gid===t.gid));if(!e)return;const o={...i[l],projects:[...i[l].projects,...e.projects],nextPage:e.nextPage},a=i.slice(0,l).concat(o,i.slice(l+1));b().Z.setState({...n,teamsAndProjects:a,loadMoreClicks:s+1})}}async function _(e,t){const o=[];for(const a of Object.keys(t)){const{notionTeamspaceId:e,projects:n}=t[a];!(0,d().Kg)(n)&&(0,p().O9)(e)&&o.push({asanaTeamId:a,projectIds:n,notionTeamSpaceId:e})}const n=await e.api.callApi({eventName:"getAsanaTaskProperties",environment:e,data:o});if("success"===n.type){const{selectedTeamspacesAndProperties:e}=b().Z.state;for(const{notionTeamSpaceId:t,properties:o}of n.data.data)o&&(e[t]={selectionMode:"all",properties:o.map((e=>({...e,isSelected:!0})))});b().Z.setState({...b().Z.state,selectedTeamspacesAndProperties:e})}}async function B({environment:e}){b().Z.setState({...b().Z.state,isLoadingAsanaWorkspaces:!0});const t=await e.api.callApi({eventName:"getAsanaWorkspacesNames",environment:e,data:{}});var o;"success"===t.type&&b().Z.setState({...b().Z.state,account:t.data.account,workspaces:t.data.workspaces,selectedWorkspace:null===(o=t.data)||void 0===o||null===(o=o.workspaces[0])||void 0===o?void 0:o.gid,isLoadingAsanaWorkspaces:!1})}async function F({environment:e,spaceStore:t,spaceViewStore:o,flowId:a,navigateBeforeTemplateCreation:i}){const{appTemplatesSetupActions:s,appConfigs:c}=await y().Aw.load(),d=b().Z.state.selectedWorkspace;if(!d)return;b().Z.setState({...b().Z.state,...i&&{currentTab:"importingData"},templateCreationInProgress:!0});const p={},u={};try{for(const n in b().Z.state.selectedProjectsAndTeamspaces){if(0===b().Z.state.selectedProjectsAndTeamspaces[n].projects.length)continue;let a;const i=b().Z.state.selectedProjectsAndTeamspaces[n],{notionTeamspaceId:r}=i;if(!r)continue;const l=(0,S().getTeamStore)({teamId:r,spaceStore:t});if(a=l.isDefined()?l:t,u[r])p[n]=u[r];else{const{serverCommitResult:t,performResult:i}=I().createAndCommit({environment:e,perform:t=>{var n;const i="notion://projects/project_management_importers_preset",r=null===(n=(0,v().B)(c(),i))||void 0===n?void 0:n.uri;if(!r)return;const l=c().find((e=>e.uri===r));if(null==l?void 0:l.presets.find((e=>e.uri===i))){const n=s.initializeApp({environment:e,spaceViewStore:o,appParentStore:a,appUri:r,presetUri:i,transaction:t,from:"asana_import"});if(2!==(null==n?void 0:n.length))return;return n}},canUndo:!0,userAction:"importActions.importAsana"});p[n]=i,u[r]=i,await t}}}catch(F){return void b().Z.setState({...b().Z.state,templateCreationInProgress:!1,currentTab:"failure"})}const h=[],x=n().default.state.sidebarSpaceViewStore;if(!x)return;const C=w().mD({environment:e,spaceStore:t,spaceViewStore:x,append:!0});await C.deferred.promise;const k=C.pageId;b().Z.setState({...b().Z.state,loggerPageId:k});const T=new Set,M=[],P=[];for(const n in p){const e=b().Z.state.selectedProjectsAndTeamspaces[n],o=p[n];if(!(o&&e.notionTeamspaceId&&e.projects.length))continue;const a="string"==typeof e.projects?[]:e.projects;M.push(...a);const i=b().Z.state.selectedTeamspacesAndProperties[e.notionTeamspaceId];i&&(i.useSectionAsStatus=b().Z.state.useSectionAsStatus),T.add(e.notionTeamspaceId),P.push(n),h.push({collectionViewBlocks:[{id:o[0].id,spaceId:t.id},{id:o[1].id,spaceId:t.id}],projectIds:a,asanaTeamId:n,notionTeamSpaceId:e.notionTeamspaceId,propertySelection:i,importAllProjects:"all"===e.projects,importOnlyIncompleteProjects:"in_complete"===e.projects})}g().Pd(e,{import_source:"asana",flowId:a});const _=(0,f().UT)(e,m,{importParams:h,spaceId:t.id,asanaWorkspaceId:d,importCompletedTasks:b().Z.state.importCompletedTasks,loggerPageId:k,flowId:a||l().JW(),importId:j().R.getOrCreateImportId()},{spaceIds:[]});b().Z.setState({...b().Z.state,templateCreationInProgress:!1,currentTab:"importingData",choosingWorkspacesCompleted:!0}),A().A.reset();const B=b().Z.state.workspaces.find((e=>e.gid===d));B&&function(e,t,o){try{g().mM(e,{import_source:"asana",data:t,flowId:o})}catch(n){r().log({level:"error",from:"asanaV2Actions",type:"parallelAsanaImport",error:{miscDataString:JSON.stringify({error:n,message:"Errored in tracking import_source_input event."})}})}}(e,{workspaceName:B.name,teams:P,projects:M,numberOfTeamspacesUsed:T.size,completedTasks:b().Z.state.importCompletedTasks,userId:e.currentUser.id,spaceId:t.id},a);for await(const n of _){if(!b().Z.state.isModalOpen)break;if(n.error)return void b().Z.setState({...b().Z.state,currentTab:"failure"});"success"===n.taskStatus&&b().Z.setState({...b().Z.state,currentTab:"confirm",result:n.value.status,isComplete:!0})}}function E({teamId:e,spaceId:t}){var o;b().Z.setState({...b().Z.state,selectedProjectsAndTeamspaces:{...b().Z.state.selectedProjectsAndTeamspaces,[e]:{projects:(null===(o=b().Z.state.selectedProjectsAndTeamspaces[e])||void 0===o?void 0:o.projects)||[],notionTeamspaceId:t||void 0}}})}function R(){b().Z.setState({...b().Z.state,currentTab:"selectProperties"})}function O(){b().Z.setState({...b().Z.state,isModalOpen:!0})}},981084:(e,t,o)=>{o.d(t,{U:()=>d});var n=o(296540),a=()=>o(564884),i=()=>o(560533),s=()=>o(312788),r=()=>o(484714),l=()=>o(427704),c=()=>o(806638);function d(e,t){const{navigate:o}=(0,n.useContext)(s().E),d=(0,r().v3)(),{isPhone:p}=(0,r().Y0)(),u=(0,n.useContext)(i().e);return(0,n.useCallback)((n=>{if((0,a().u)({environment:d,event:{eventName:e,eventProperties:{}}}),p)null==u||u(),o({environment:d,url:"/nativetab/templates",redirect:!0});else{const e="click"===n.type&&(n.metaKey||n.ctrlKey);(null==t?void 0:t.forceOpenInNewTab)||e?o({environment:d,url:l().JZ.marketplace,openInNew:"tab",makeTabActive:!e&&d.device.isDesktop}):(0,c().P)({environment:d})}}),[d,e,t,p,u,o])}},984645:(e,t,o)=>{o.d(t,{A:()=>m,c:()=>g});o(296540);var n=()=>o(401497),a=()=>o(249046),i=()=>o(807449),s=()=>o(569397),r=()=>o(69708),l=()=>o(100622),c=()=>o(676510),d=()=>o(255043),p=o(474848);const u=(0,r().YK)({chooseTeamspaceOption:{id:"asanaImport.importsTab.chooseWorkspace.selectTeamspace",defaultMessage:"Choose a teamspace"},filterTeams:{id:"asanaImport.importsTab.chooseWorkspace.filterTeams",defaultMessage:"Filter teamspaces..."}});function m(){return(0,n().IS)((()=>({loadingRow:{gap:6,alignItems:"center",marginTop:4,height:19.6},workspaceSelectorButton:{paddingTop:8,paddingBottom:8,paddingInlineStart:8,paddingInlineEnd:8,opacity:1,width:376,border:`1px solid ${c().$.light.gray[100]}`,justifyContent:"space-between",marginTop:8,marginBottom:8},projectNameCompleted:{color:l().Tj.text.tertiary},menuChevonDownIcon:{width:12,height:12,marginInlineStart:4,fill:l().Tj.icon.tertiary},asanaTeamSectionContainer:{marginBottom:20},teamAndProjectsCollapse:{paddingTop:8,paddingBottom:8},teamSpaceContainer:{height:"100%",border:`1px solid ${l().Tj.outlineButtonBorder}`,borderRadius:4,padding:"8px 2px",gap:8,position:"relative"},arrowIconStyles:{position:"absolute",top:"50%",insetInlineStart:0,transform:"translate(-64%, -50%)",width:12,height:28,color:l().Tj.selectLightGray[700],backgroundColor:l().Tj.background.elevated},loadMoreLabel:{color:l().Tj.selectLightGray[700]},teamSpaceLabel:{display:"flex",justifyContent:"center",alignItems:"center",width:16,height:16,borderRadius:"0.25em",backgroundColor:c().$.light.gray[75]}})),[])}function g({onSelectOption:e,options:t,currentOption:o,children:n,style:l}){const c=(0,r().tz)(),g=m();return(0,p.jsxs)(a().Ye,{flexDirection:"compact"===l?"row":"column",alignItems:"center",justifyContent:"center",style:g.teamSpaceContainer,children:[(0,p.jsx)(i().I,{icon:s().arrowStraightRightSmallIcon,size:"xs",style:g.arrowIconStyles}),n,(0,p.jsx)(d().r,{onSelectOption:e,options:t,iconOnly:"compact"===l,currentOption:o,placeHolder:c.formatMessage(u.chooseTeamspaceOption),searchThreshold:5,menuProps:{maxWidth:300,maxHeight:400,left:50},inputProps:{placeholder:c.formatMessage(u.filterTeams)},selectorButtonStyle:"teamspace"})]})}},988770:(e,t,o)=>{o.d(t,{N:()=>a});var n=()=>o(496603);function a(e){const{messages:t,values:o}=e;return n().LG(t,(e=>({...e,interpolatedValues:o})))}},992933:(e,t,o)=>{o.d(t,{A:()=>r,O:()=>s});var n=o(296540),a=()=>o(69708),i=o(474848);const s=(0,a().YK)({settingsAndMembers:{id:"sidebarSettingsButton.settingsAndMembers",defaultMessage:"Settings & members"},settings:{id:"sidebarSettingsButton.settings",defaultMessage:"Settings"},tooltip:{id:"sidebarSettingsButton.tooltip",defaultMessage:"Manage your account and settings"}}),r=function(e){const{buttonStyles:t}=e,r=(0,a().tz)(),l=r.formatMessage(s.settings),c=(0,o(644914).ab)(),d=(0,n.useCallback)((()=>{o(209660).Ow({openedFrom:"sidebar",currentTab:"user_settings"})}),[]);return(0,i.jsx)(o(26697).m,{renderTooltip:()=>r.formatMessage(s.tooltip),originGap:6,textWrap:!0,placement:"right",render:e=>(0,i.jsx)(o(718827).Ay,{...e,onClick:d,style:c.baseSidebarItem,hoveredStyle:null==t?void 0:t.hoveredStyle,children:(0,i.jsx)(o(804319).A,{left:(0,i.jsx)(o(807449).I,{icon:o(212727).gearIcon,colorVariant:"secondary",size:"lg"}),children:l})})})}}}]);