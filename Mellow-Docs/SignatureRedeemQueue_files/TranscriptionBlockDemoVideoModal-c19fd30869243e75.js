"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[14889,97651,99171],{10123:(e,t,o)=>{o.d(t,{A:()=>i});var n=()=>o(570551);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){(0,n().A)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===r(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}},24126:(e,t,o)=>{o.d(t,{c:()=>r});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"3.9 2.75 12.18 14.49",svg:(0,o(474848).jsx)("path",{d:"M12.626 2.768a.625.625 0 0 1 0 1.224l-.126.013h-.125v4.794l3.366 5.159c.893 1.369-.03 3.17-1.623 3.281l-.156.006H6.039c-1.688 0-2.703-1.873-1.78-3.287l3.366-5.157V4.005H7.5a.625.625 0 0 1 0-1.25h5zM8.875 9.173l-.102.156-1.567 2.401h5.589l-1.569-2.403-.101-.156V4.005h-2.25z"})},r=(0,o(340498).wt)("beaker",n,"default")},25500:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=o(474848);function r(e){return(0,n.jsx)("div",{style:{width:"100%",position:"relative",paddingBottom:100*e.ratio+"%"},children:e.children})}},28834:(e,t,o)=>{o.d(t,{Nr:()=>m,Q:()=>u});o(16280),o(944114),o(816573),o(878100),o(177936),o(748140),o(821903),o(491134),o(128845),o(237467),o(444732),o(979577),o(898992),o(823215),o(672577),o(430670),o(803949),o(581454);var n=()=>o(564884);class r{constructor(e,t){this._inputSampleRate=void 0,this._outputSampleRate=void 0,this._inputSampleRate=e,this._outputSampleRate=t}downsample(e){return this.downSampleAudioFrame(e,this._inputSampleRate,this._outputSampleRate)}downSampleAudioFrame(e,t,o){if(o===t||o>t)return e;const n=t/o,r=Math.round(e.length/n),i=new Float32Array(r);let a=0,s=0;for(;s<r;){const t=Math.round((s+1)*n);let o=0,r=0;for(;a<t&&a<e.length;)o+=e[a++],r++;i[s++]=o/r}return i}}var i=()=>o(165358),a=()=>o(229833),s=()=>o(909557),c=()=>o(673903),d=()=>o(426175),l=()=>o(524007);o(814603),o(147566),o(198721);const u="ms_change";class m{constructor(e){this._mediaStreams=void 0,this._emitter=void 0,this.recorder=void 0,this.onDataReceived=void 0,this.onStop=void 0,this.environment=void 0,this.startController=void 0,this.audioBuffer=[],this.currentStreamId=null,this.sampleRate=void 0,this.includeSystemAudio=void 0,this.saveAudioFileMetadata=void 0,this.handleDeviceChange=async()=>{var e;const t=null===(e=this.mediaStreams)||void 0===e||null===(e=e.flatMap((e=>e.getAudioTracks())))||void 0===e||null===(e=e.map((e=>e.getSettings())))||void 0===e?void 0:e.find((e=>void 0!==e)),n=this.getPreferredOrDefaultDevice();if(!t||n&&(n.deviceId!==t.deviceId||n.groupId!==t.groupId)){this.stop({triggerOnStop:!1,triggerFlushToOPFS:!0});try{await this.start()}catch(r){this.destroy((0,o(319625).A)(r))}}},this._emitter=(0,o(827380).A)(),this.recorder=new p,this.onDataReceived=e.onDataReceived,this.onStop=e.onStop,this.includeSystemAudio=e.includeSystemAudio,this.environment=e.environment,this.sampleRate=e.sampleRate??16e3,this.saveAudioFileMetadata=e.saveAudioFileMetadata}setOnDataReceived(e){this.onDataReceived=e}get emitter(){return this._emitter}get isStoringLocalAudio(){return void 0!==this.saveAudioFileMetadata&&void 0!==m.meetingNotesCache}set mediaStreams(e){if(this._mediaStreams)for(const o of this._mediaStreams)for(const e of o.getTracks())e.stop();for(const n of e??[])for(const e of n.getTracks())e.addEventListener("ended",(async()=>{if(n.getTracks().every((e=>"ended"===e.readyState))){"denied"===(await o(927648).Ay.checkPermissions(this.includeSystemAudio)).audio&&this.stop({triggerOnStop:!0,error:new(s().d1)("Audio permission denied")})}}));for(const n of e??[]){var t;const e=null==n||null===(t=n.getAudioTracks()[0])||void 0===t?void 0:t.getSettings();o(964576).A.setState(d().X8.state.find((t=>t.deviceId===(null==e?void 0:e.deviceId))))}this._mediaStreams=e,this._emitter.emit(u)}get mediaStreams(){return this._mediaStreams}getPreferredOrDefaultDevice(){var e;return(null===(e=d().X8.state)||void 0===e?void 0:e.find((e=>{var t;return e.deviceId===(null===(t=l().d.state)||void 0===t?void 0:t.deviceId)})))??d().X8.state[0]}async start(){if(void 0===this.startController||this.startController.signal.aborted){this.startController=new AbortController;const t=this.startController.signal;if(null===this.currentStreamId){this.currentStreamId=(0,o(206267).JW)().slice(-4);try{m.meetingNotesCache&&void 0!==this.saveAudioFileMetadata&&await m.meetingNotesCache.trimCache(9)}catch(e){i().log({level:"error",from:"audioRecorderHelpers",type:"trimCacheError",error:(0,a().convertErrorToLog)(e)})}}this.audioBuffer=[];const r=this.getPreferredOrDefaultDevice(),u=(0,c().E)();let p;this.environment.device.isBrowser&&(0,n().u)({environment:this.environment,event:{eventName:"ai_meeting_notes_permission_requested",eventProperties:{permission_type:"microphone"}}});const h=Date.now();try{p=await u.getUserMedia({audio:{deviceId:r?{exact:r.deviceId}:void 0,echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1,channelCount:1}});const e=Date.now()-h;this.environment.device.isBrowser&&(0,n().u)({environment:this.environment,event:{eventName:"ai_meeting_notes_permission_result",eventProperties:{permission_type:"microphone",result:"granted",elapsed_ms_since_request:e,likely_user_was_prompted:e>=600}}})}catch(e){if(e instanceof Error&&this.environment.device.isBrowser){const t=Date.now()-h,o="NotAllowedError"===e.name?"denied":"NotFoundError"===e.name||"OverconstrainedError"===e.name?"no_devices":"unknown_error";(0,n().u)({environment:this.environment,event:{eventName:"ai_meeting_notes_permission_result",eventProperties:{permission_type:"microphone",result:o,elapsed_ms_since_request:t,likely_user_was_prompted:t>=300}}})}throw e}if(await d().Ay.updateMediaDevices(),this.includeSystemAudio){i().log({level:"info",from:"audioRecorderHelpers",type:"getDisplayMediaAttempt",data:{miscDataToConvertToString:{includeSystemAudio:this.includeSystemAudio}}});const e=await(0,o(532313).L5)({fn:async(e,t)=>{const n=u.getDisplayMedia({audio:!0,systemAudio:this.includeSystemAudio?"include":void 0}),r=performance.now(),a=await(0,o(763824).nQ)(5e3,n);if(a.timeout)throw n.then((e=>{const o=performance.now()-r;i().log({level:"info",from:"audioRecorderHelpers",type:"getDisplayMediaSuccessAfterTimeout",data:{miscDataToConvertToString:{attempt:t+1,elapsedMs:o}}});for(const t of e.getTracks())t.stop()})),i().log({level:"warning",from:"audioRecorderHelpers",type:"getDisplayMediaTimeout",data:{miscDataToConvertToString:{attempt:t+1}}}),new(s().Tn);const c=performance.now()-r;return i().log({level:"info",from:"audioRecorderHelpers",type:"getDisplayMediaSuccess",data:{miscDataToConvertToString:{elapsedMs:c,attempt:t+1}}}),a.result},handleError:(e,t,o)=>e instanceof s().Tn?t?{status:"throw",error:e}:{status:"retry"}:(i().log({level:"error",from:"audioRecorderHelpers",type:"getDisplayMediaFailed",error:(0,a().convertErrorToLog)(e),data:{miscDataToConvertToString:{includeSystemAudio:this.includeSystemAudio,attempt:o+1}}}),e instanceof Error&&"NotReadableError"===e.name?{status:"throw",error:new(s().$W)}:{status:"throw",error:new(s().Yh)}),retryAttemptsMS:[1e3,1e3],retryAttemptRandomOffsetMS:200,initialInput:void 0});for(const t of e.getVideoTracks())e.removeTrack(t),t.stop();this.mediaStreams=[p,e]}else this.mediaStreams=[p];if(t.aborted){for(const e of this.mediaStreams??[])for(const t of e.getTracks())t.stop();return}if(await this.recorder.record(this.mediaStreams??[],(e=>{t.aborted||(void 0!==this.saveAudioFileMetadata&&(this.audioBuffer.push(...e),this.maybeWriteAudioBufferToOPFS({forceWrite:!1})),this.onDataReceived(e))}),this.sampleRate),t.aborted)return this.recorder.releaseMediaResources(),void(this.mediaStreams=void 0);l().d.addListener(this.handleDeviceChange),d().X8.addListener(this.handleDeviceChange)}}maybeWriteAudioBufferToOPFS(e){const t=10*this.sampleRate;if(void 0!==this.saveAudioFileMetadata&&(e.forceWrite||this.audioBuffer.length>t)&&m.meetingNotesCache&&this.environment.currentUser.id&&this.currentStreamId){var n;const{blockStore:e}=this.saveAudioFileMetadata,t=e.id,r=null===(n=(0,o(192359).y1)(e,"transcript"))||void 0===n?void 0:n.id;if(void 0===r)return;m.meetingNotesCache.write((0,o(631616).G9)({userId:this.environment.currentUser.id,blockId:t,transcriptTabId:r,recordingId:this.currentStreamId,fileType:"PCM_F32_16000_MONO"}),new Float32Array(this.audioBuffer).buffer).catch((e=>{i().log({level:"error",from:"audioRecorderHelpers",type:"writeToOPFSFailed",error:(0,a().convertErrorToLog)(e),data:{miscDataToConvertToString:{rootBlockId:t}}})})),this.audioBuffer=[]}}stop(e){const{error:t,triggerOnStop:o=!0,triggerFlushToOPFS:n=!1}=e||{};if(void 0!==this.startController&&!this.startController.signal.aborted){var r;if(this.startController.abort(),this.recorder.releaseMediaResources(),this.mediaStreams=void 0,(o||n)&&this.maybeWriteAudioBufferToOPFS({forceWrite:!0}),o)this.currentStreamId=null,null===(r=this.onStop)||void 0===r||r.call(this,t);l().d.removeListener(this.handleDeviceChange),d().X8.removeListener(this.handleDeviceChange)}}destroy(e){l().d.removeListener(this.handleDeviceChange),d().X8.removeListener(this.handleDeviceChange),this.stop({triggerOnStop:!0,error:e})}}m.meetingNotesCache=(0,o(870991).bB)();class p{constructor(){this._audioWorkletNode=void 0,this._sourceNodes=void 0,this._audioContext=void 0}set sourceNodes(e){this._sourceNodes&&this._sourceNodes.forEach((e=>e.disconnect())),this._sourceNodes=e}set audioWorkletNode(e){this._audioWorkletNode&&this._audioWorkletNode.disconnect(),this._audioWorkletNode=e}set audioContext(e){this._audioContext&&this._audioContext.close(),this._audioContext=e}get audioContext(){return this._audioContext}async record(e,t,n){if(this.releaseMediaResources(),this.audioContext=(0,c().G)(n),Boolean(this.audioContext.audioWorklet))try{const i=new r(this.audioContext.sampleRate,n),a=this.audioContext,s=e.map((e=>a.createMediaStreamSource(e)));await this.audioContext.audioWorklet.addModule(new URL(o(986850),o.b));const c=new AudioWorkletNode(this.audioContext,"pcm-processor");c.port.onmessage=e=>{if(e.data){const o=e.data,n=i.downsample(o);t(n)}},s.forEach((e=>e.connect(c))),this._audioWorkletNode=c,this._sourceNodes=s}catch{console.info("unable to create worklet"),this.releaseMediaResources()}else this.releaseMediaResources()}releaseMediaResources(){this.sourceNodes=void 0,this.audioWorkletNode=void 0,this.audioContext=void 0}}},107620:(e,t,o)=>{o.d(t,{y:()=>r});o(296540);const n={viewBox:"0 0 20 20",fittedViewBox:"1.81 2.89 16.38 15.08",svg:(0,o(474848).jsx)("path",{d:"M16.938 9.853c0-2.97-2.539-5.54-6.545-5.697L10 4.148c-4.232 0-6.938 2.639-6.938 5.705 0 1.438.583 2.752 1.617 3.76a.63.63 0 0 1 .18.546 7.3 7.3 0 0 1-.89 2.528c1.108-.13 2.12-.614 3.01-1.344l.063-.044a.63.63 0 0 1 .505-.073 9 9 0 0 0 2.454.333l.392-.007c4.006-.158 6.545-2.728 6.545-5.699m1.25 0c0 3.803-3.234 6.766-7.747 6.948l-.44.008a10.2 10.2 0 0 1-2.485-.299c-1.349 1.022-2.985 1.62-4.826 1.428a.625.625 0 0 1-.406-1.033c.712-.817 1.096-1.737 1.284-2.642-1.116-1.197-1.756-2.733-1.756-4.41 0-3.925 3.447-6.955 8.189-6.955l.44.009c4.512.181 7.747 3.143 7.747 6.946"})},r=(0,o(340498).wt)("chatBubble",n,"default")},135428:(e,t,o)=>{o.d(t,{Vj:()=>s,ax:()=>c,iI:()=>d,iw:()=>a,u3:()=>i,uJ:()=>l,zw:()=>u});o(898992),o(354520),o(581454),o(737550);var n=()=>o(906745),r=()=>o(604995);const i="–",a=" ";function s({start:e,end:t,locale:o,timeZone:r}){const s=n().DateTime.fromISO(e),d=n().DateTime.fromISO(t),l=function({start:e,end:t}){const o=t.diff(e);if(o.as("hours")>12)return!0;const n=e.hour<12,r=t.hour<12;return n!==r}({start:s,end:d}),u=c({time:s,showAmPm:l,locale:o,timeZone:r}),m=c({time:d,showAmPm:!0,locale:o,timeZone:r});return`${u}${a}${i}${a}${m}`}function c({time:e,showAmPm:t,locale:o,timeZone:i}){const s=d(o),c=0!==e.minute||!s,l={...n().DateTime.TIME_SIMPLE,hour:"numeric",minute:c?"2-digit":void 0,timeZone:(0,r().lW)(i)};return s&&!t?e.setLocale(o).toLocaleParts(l).filter((e=>"dayPeriod"!==e.type)).map((e=>e.value.trim())).join(""):e.toLocaleString({...l,hour12:s},{locale:o}).replace(" ",a)}const d=(0,o(496603).Bj)((function(e){return n().DateTime.fromObject({hour:13}).setLocale(e).toLocaleParts(n().DateTime.TIME_SIMPLE).some((e=>"dayPeriod"===e.type))}));function l({time:e,locale:t,timeZone:o}){const i=d(t);return e.toLocaleString({...n().DateTime.DATETIME_MED,hour:"numeric",minute:"2-digit",year:void 0,month:void 0,day:void 0,timeZone:(0,r().lW)(o),hour12:i},{locale:t}).replaceAll(" ",a)}function u({startTime:e,endTime:t}){const o=t.diff(e).shiftTo("hours","minutes"),n=Math.floor(o.hours),r=Math.round(o.minutes);return 0===n?`${r}min`:0===r?`${n}h`:`${n}h ${r}min`}},175882:(e,t,o)=>{o.r(t),o.d(t,{exclamationMarkTriangleSmallIcon:()=>i,iconDefinition:()=>r});o(296540);var n=o(474848);const r={viewBox:"0 0 16 16",fittedViewBox:"1.49 1.87 13.01 11.75",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M7.9 5.281a.625.625 0 0 0-.625.625v2.5a.625.625 0 0 0 1.25 0v-2.5a.625.625 0 0 0-.625-.625m0 4.7a.725.725 0 1 0 0 1.45.725.725 0 0 0 0-1.45"}),(0,n.jsx)("path",{d:"M9.58 2.788c-.702-1.217-2.458-1.217-3.16 0l-4.677 8.1c-.702 1.216.176 2.737 1.58 2.737h9.354c1.405 0 2.283-1.52 1.58-2.738zm-2.078.625a.575.575 0 0 1 .996 0l4.677 8.1a.575.575 0 0 1-.498.862H3.324a.575.575 0 0 1-.498-.863z"})]})},i=(0,o(340498).wt)("exclamationMarkTriangleSmall",r,"small")},201891:(e,t,o)=>{o.d(t,{B:()=>i});var n=()=>o(748197);class r extends(()=>o(757695))().Store{getInitialState(){return{isOpen:!1,blockStore:void 0,showAudioAlert:!1}}open(e){this.setState({isOpen:!0,blockStore:e,showAudioAlert:!1}),n().c.openDemoVideoModal(e.id)}close(){this.setState({isOpen:!1,blockStore:void 0,showAudioAlert:!1}),n().c.closeDemoVideoModal()}setShowAudioAlert(e){this.setState({...this.state,showAudioAlert:e})}}const i=new r},252688:(e,t,o)=>{o.d(t,{h:()=>i});o(296540);var n=o(474848);const r={viewBox:"0 0 16 16",fittedViewBox:"2.27 0.93 12.24 14.12",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M13.527 10.988a.55.55 0 0 1 .904.625 3.9 3.9 0 0 1-2.651 1.641v.705h1.718a.55.55 0 0 1 0 1.1H8.962a.55.55 0 0 1 0-1.1h1.718v-.705a3.9 3.9 0 0 1-2.652-1.641.55.55 0 0 1 .904-.625 2.79 2.79 0 0 0 2.297 1.206c.952 0 1.794-.476 2.298-1.206"}),(0,n.jsx)("path",{d:"M10.03.94c.966.001 1.75.784 1.75 1.75v2.435a2.8 2.8 0 0 0-1.1 0V2.69a.65.65 0 0 0-.65-.65h-6a.65.65 0 0 0-.65.65v8.8c0 .359.291.65.65.65h3.209l.007.012c.273.395.604.75.981 1.048l-.061.04H4.03a1.75 1.75 0 0 1-1.75-1.75v-8.8c0-.966.784-1.75 1.75-1.75z"}),(0,n.jsx)("path",{d:"M11.23 6.021c1 0 1.81.81 1.81 1.81v2.016a1.811 1.811 0 0 1-3.62 0V7.831c0-1 .81-1.81 1.81-1.81m0 1.1a.71.71 0 0 0-.71.71v2.016a.71.71 0 0 0 1.42 0V7.831a.71.71 0 0 0-.71-.71M7.202 5.41a.55.55 0 0 1 0 1.1H5.03a.55.55 0 1 1 0-1.1zm1.828-2a.55.55 0 1 1 0 1.1h-4a.55.55 0 1 1 0-1.1z"})]})},i=(0,o(340498).wt)("paperMicrophoneSmall",r,"small")},348869:(e,t,o)=>{o.d(t,{g:()=>s});o(944114);var n=()=>o(792057),r=()=>o(785728),i=()=>o(532659),a=()=>o(769864);async function s(e){const{environment:t,onResponse:o,data:s,userId:c,tracking:d,abortSignal:l}=e,u=await a().callStreamApi({eventName:"runInferenceTranscript",environment:t,data:s,userId:c,tracking:d,abortSignal:l,headers:(0,r().WS)({spaceId:s.spaceId})});if("success"!==u.type)return null!=l&&l.aborted?{error:{message:"Aborted",code:0}}:(n().Qg(u),{error:{message:u.error.message,code:u.status}});const m=[];if(i().hS.is(u.data))for await(const n of u.data){if("error"===n.type)return{error:{message:n.message,code:n.errorCode}};null==o||o(n),m.push(n)}return{value:m}}},362075:(e,t,o)=>{o.d(t,{AB:()=>c,BU:()=>s,Ru:()=>d,f1:()=>u,yz:()=>l});var n=()=>o(907258),r=()=>o(242422),i=()=>o(590526),a=()=>o(209199);function s(){var e;const t=(null===(e=n().default.state.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.preferred_locale)??a().q;if("en"===(0,a().o_)(t)){return"play_audio"===r().default.getEligibleGroup({experimentId:"audio_consent_on_transcription_experiment",defaultGroup:"control"})}return!1}function c(){return(0,i().K8)((()=>s()),[])}function d(){var e;const t=n().AppStoreSidebarSpaceStore.state;return(null==t||null===(e=t.getSettingsStore())||void 0===e||null===(e=e.getKeyStore("audio_consent_on_transcription"))||void 0===e?void 0:e.getValue())??!1}function l(){const e=s();if(!e)return!1;if(!n().AppStoreSidebarSpaceViewStore.getState())return!1;const t=d(),o=function(){var e;const t=n().AppStoreSidebarSpaceViewStore.getState();return!!t&&((null===(e=t.getSettings())||void 0===e?void 0:e.audio_consent_on_transcription)??!0)}();return e&&(t||o)}function u(){return(0,i().K8)((()=>l()),[])}},362750:(e,t,o)=>{o.d(t,{Zl:()=>r,lH:()=>i,oV:()=>n});o(16280),o(410838),o(944114),o(581454);const n=12e3;function r(e){const t=[];for(const o of e){const e=t[t.length-1];e?"text"===o.type&&"text"===e.type?t[t.length-1]={type:"text",content:e.content+o.content}:"thinking"!==o.type||"thinking"!==e.type||o.encryptedContent||e.encryptedContent||o.signature&&e.signature||o.modelProvider!==e.modelProvider||o.notionModelName!==e.notionModelName?"tool_use"===o.type&&"tool_use"===e.type&&o.id===e.id?t[t.length-1]={type:"tool_use",id:o.id,name:o.name,content:e.content+o.content,signature:o.signature||e.signature}:t.push({...o}):t[t.length-1]={type:"thinking",content:e.content+o.content,id:o.id||e.id,signature:o.signature||e.signature,encryptedContent:o.encryptedContent||e.encryptedContent,modelProvider:o.modelProvider||e.modelProvider,notionModelName:o.notionModelName||e.notionModelName}:t.push({...o})}return t}function i(e){return"string"==typeof e?[{type:"text",content:e}]:e??[]}},424641:(e,t,o)=>{o.d(t,{Gj:()=>u,Jx:()=>l,RN:()=>g,_X:()=>y,sM:()=>S,sR:()=>f,vZ:()=>m,xy:()=>b,y6:()=>v});o(944114),o(898992),o(823215),o(354520),o(672577);var n=()=>o(906745),r=()=>o(726637),i=()=>o(295633),a=()=>o(761940),s=()=>o(651784),c=()=>o(179034),d=()=>o(615234);function l(e){return"owner"===e.accessRole||"writer"===e.accessRole}function u(e){const t=n().DateTime.fromMillis(e.startUnixTimestampMS),o=e.endUnixTimestampMS?n().DateTime.fromMillis(e.endUnixTimestampMS):void 0,r=n().DateTime.fromMillis(e.startOfWeekUnixTimestampMS),i=n().DateTime.fromMillis(e.endOfWeekUnixTimestampMS),a=t.startOf("day"),s=n().DateTime.max(r,a),c=Math.ceil(s.diff(r,"days").get("days"));let d=1;if(o){const e=o.endOf("day"),t=n().DateTime.min(i,e);d=Math.ceil(t.diff(s,"days").get("days"))}return{start:t,end:o,startOfWeek:r,endOfWeek:i,startColumn:c,columnCount:d}}function m(e){const t=(e.attendees||[]).filter((e=>!e.self&&!e.resource));return e.hasParticipants&&t.length>0&&t.every((e=>"declined"===e.responseStatus))}const p={upcomingMinsThreshold:10,startingMinsThreshold:5,startedMinsThreshold:15},h={upcomingMinsThreshold:10,startingMinsThreshold:5,startedMinsThreshold:5},f={upcomingMinsThreshold:10,startingMinsThreshold:15,startedMinsThreshold:15};function v(e){const{events:t,accounts:o,thresholds:r=p,filters:i}=e,s=t.filter((e=>{if(!(e.conferencing||null!=i&&i.includeEventsWithoutConferencing))return!1;const t=o.find((t=>t.id===e.accountId));return!(null==t||!t.email)&&(!!(0,a().Ko)(e,t.email)&&(!function(e){if("declined"===e)return!0;return!1}(e.responseStatus??"declined")&&!e.isAllDay))}));if(0===s.length)return[];const{upcomingMinsThreshold:c,startingMinsThreshold:l,startedMinsThreshold:u}=r,m=n().DateTime.now(),h=void 0!==(null==i?void 0:i.maxDaysInFuture)?i.maxDaysInFuture*d().XQ:void 0,f=void 0!==(null==i?void 0:i.maxDaysInPast)?i.maxDaysInPast*d().XQ:void 0,v=[],g=[],y=[],S=[],b=[],w=[];for(const n of s){if(n.isAllDay)continue;const e=_(n),t=m.diff(e.end,"minutes").minutes;if(void 0!==f&&t>f)continue;if(null!=i&&i.excludeEventsOnDifferentDays){if(m.setZone(e.start.zone).toISODate()!==e.start.toISODate())continue}const o=e.start.diff(m,"minutes").minutes;if(!(void 0!==h&&o>h))if(o>=0&&o<=c)v.push(n);else if(o<0){const r=-o,i=t>=0?t:void 0;r>0&&r<=l?y.push(n):r>l&&r<=u?S.push(n):e.contains(m)?g.push(n):void 0!==f&&void 0!==i&&i<=f&&b.push(n)}else w.push(n)}g.sort(((e,t)=>{const o=n().DateTime.fromISO(e.start.dateTime,{zone:e.start.timeZone});return n().DateTime.fromISO(t.start.dateTime,{zone:t.start.timeZone}).diff(o).toMillis()})),b.length>1&&b.sort(((e,t)=>{const o=n().DateTime.fromISO(e.end.dateTime,{zone:e.end.timeZone});return n().DateTime.fromISO(t.end.dateTime,{zone:t.end.timeZone}).diff(o).toMillis()}));return[...v,...y,...S,...null!=i&&i.excludeInProgressEvents?[]:g,...b,...null!=i&&i.excludeUpcomingLaterEvents?[]:w]}function g(e,t){return v({events:e,accounts:t,thresholds:p,filters:void 0})[0]}function y(e,t){return S(e,t)[0]}function S(e,t,o){return v({events:e,accounts:t,thresholds:h,filters:{excludeUpcomingLaterEvents:!0,...o}})}function _(e){const t=n().DateTime.fromISO(e.start.dateTime,{zone:e.start.timeZone}),o=n().DateTime.fromISO(e.end.dateTime,{zone:e.end.timeZone});return n().IX.fromDateTimes(t,o)}function b(e){const{spaceStore:t}=e;let o=e.fileUrl;if(!t)return;const n=(0,s().parseRoute)({url:o,isMobile:r().A.isMobile,baseUrl:r().A.domainBaseUrl,publicDomainName:r().A.publicDomainName,protocol:r().A.protocol,currentUrl:window.location.href}),a="page"===n.name?n.blockId:void 0;if(!a)return;const d=i().B.createChildStore(t,{table:c().ev,id:a});return d.load(),d}},426175:(e,t,o)=>{o.d(t,{Ay:()=>d,X8:()=>s,dc:()=>c});o(944114),o(898992),o(354520),o(672577),o(908872);var n=()=>o(140934),r=()=>o(673903);class i extends(()=>o(757695))().Store{async updateMediaDevices(){try{const e=await async function(){const e=(0,r().E)();return(await e.enumerateDevices()).reduce(((e,t)=>{if(t.kind&&t.label&&t.deviceId&&t.groupId)switch(t.kind){case"videoinput":e.videoInput.push(t);break;case"audioinput":e.audioInput.push(t);break;case"audiooutput":e.audioOutput.push(t)}return e}),{videoInput:[],audioInput:[],audioOutput:[]})}();this.setState(e)}catch{}}constructor(){super();try{(0,r().E)().addEventListener("devicechange",(()=>{this.updateMediaDevices()}))}catch{}o(927648).Ay.addListener((()=>{this.updateMediaDevices()}))}getInitialState(){return{videoInput:[],audioInput:[],audioOutput:[]}}}const a=new i,s=new(n().ComputedStore)((()=>{var e,t;return(null===(e=a.state)||void 0===e||null===(e=e.audioInput)||void 0===e||null===(t=e.filter)||void 0===t?void 0:t.call(e,(e=>null==e?void 0:e.label)))??[]}),{debugName:"AudioInputDevicesStore"}),c=new(n().ComputedStore)((()=>{var e;const t=o(964576).A.state,n=null===(e=o(524007).d.state)||void 0===e?void 0:e.label,r=s.state.find((e=>e.label===n));return t||(r||s.state[0])}),{debugName:"SelectedAudioInputDeviceStore"}),d=a},448529:(e,t,o)=>{o.r(t),o.d(t,{TranscriptionBlockDemoVideoModal:()=>I});var n=o(296540),r=()=>o(564884),i=()=>o(484714),a=()=>o(590526),s=()=>o(401497),c=()=>o(609679),d=()=>o(231940),l=()=>o(577914),u=()=>o(69708),m=()=>o(100622),p=()=>o(687039),h=()=>o(486674),f=()=>o(116730),v=()=>o(192359),g=()=>o(615234),y=()=>o(866515),S=()=>o(964345),_=()=>o(201891),b=()=>o(249696);var w=()=>o(748197),x=(o(581454),()=>o(547149));const k={"start-transcription":(e,t)=>{(0,f().startTranscription)({environment:e,blockStore:t,from:"demo_video",audioConsentEnabled:!1})},"switch-to-transcript":(e,t)=>{const o=(0,v().y1)(t,"transcript");o&&w().c.setTabState(t.id,o.id)},"switch-to-notes":(e,t)=>{const o=(0,v().y1)(t,"notes");o&&w().c.setTabState(t.id,o.id)},"add-note":(e,t,n)=>{const r=(0,v().y1)(t,"notes");if(r){const t=null==n?void 0:n.noteContent;if(!t)return;const i=x().createAndCommit({userAction:"transcriptionBlockDemoActions.addNotesContent",environment:e,canUndo:!1,perform:t=>{const n=o(384944).Wv({environment:e,type:o(700500).xd.text,inMemoryRecordCache:r.inMemoryRecordCache,transaction:t,spaceId:r.pointer.spaceId});return o(44729).Ti({parentStore:r,childStore:n,transaction:t}),n}}),a=i.performResult;let s=0;const c=()=>{if(s<t.length&&a){const n=t[s];x().createAndCommit({userAction:"transcriptionBlockDemoActions.typeCharacter",environment:e,canUndo:!1,perform:t=>{o(295304).yr({environment:e,store:a.getBlockTitleStore(),tokens:[[n]],index:s,transaction:t})}}),s++;const r=50*Math.random()+30;setTimeout(c,r)}};setTimeout(c,100)}},stop:(e,t)=>{(0,f().stopTranscription)({environment:e,blockStore:t,from:"demo_video"})}},T={full:{steps:[{key:"start-transcription",triggerTime:.5},{key:"switch-to-transcript",triggerTime:1},{key:"switch-to-notes",triggerTime:13},{key:"add-note",triggerTime:14,metadata:{noteContent:"Here, you can take notes on what's important to you."}},{key:"stop",triggerTime:25}]}};function A(e,t){return function(e,t,o){return o.steps.map(((o,n)=>({key:o.key,triggerTime:o.triggerTime,action:()=>{(0,r().u)({environment:e,event:{eventName:"transcription_demo_step_start",eventProperties:{demo_step_key:o.key,demo_step_index:n,step_trigger_time:o.triggerTime,block_id:t.id}}});const i=k[o.key];i&&i(e,t,o.metadata)}})))}(e,t,T.full)}o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);class M{constructor(e){this.actions=void 0,this.executedActions=new Set,this.isActive=!1,this.actions=[...e].sort(((e,t)=>e.triggerTime-t.triggerTime))}start(){this.isActive=!0,this.executedActions.clear()}resume(){this.isActive=!0}pause(){this.isActive=!1}stop(){this.isActive=!1,this.executedActions.clear()}onTimeUpdate(e){if(this.isActive)for(const t of this.actions)this.executedActions.has(t.key)||e>=t.triggerTime&&(t.action(),this.executedActions.add(t.key))}reset(){this.executedActions.clear()}restart(){this.isActive=!1,this.executedActions.clear()}isComplete(){return this.executedActions.size===this.actions.length}getExecutedActions(){return Array.from(this.executedActions)}}var D=o(474848);function I({onPlay:e,onPause:t,onEnd:o}={}){const x=(0,n.useRef)(null),k=(0,i().v3)(),T=(0,u().tz)(),I=(0,n.useRef)(0),[C,E]=(0,n.useState)(null),R=(0,a().K8)((()=>w().c.state.demoVideoModalOpenForBlockId),[]),P=void 0!==R,j=(0,a().K8)((()=>_().B.state.blockStore),[]),B=(0,n.useMemo)((()=>{if(!j)return;const e=A(k,j);return new M(e)}),[k,j]);!function(e){const t=(0,i().v3)(),o=(0,b().W)(),r=(0,a().O$)(S().ei),s=(0,a().K8)((()=>{var e;return _().B.state.isOpen&&(null===(e=_().B.state.blockStore)||void 0===e?void 0:e.id)===(null==r?void 0:r.id)}),[null==r?void 0:r.id]),c=(0,a().K8)((()=>!(null==r||!r.isTranscriptionBlock())&&"transcribing"===(0,v().by)(r).state),[r]),d=(0,n.useCallback)((()=>{if(!s||!c||!e)return;const o=S().Ay.state.lastReceivedTranscriptionAt;o&&Date.now()-o>=4*g().TD&&(e.pause().catch((()=>{})),r&&(0,f().pauseTranscription)({environment:t,blockStore:r,shouldStopDictation:!0,from:"demo_video"}).catch((()=>{})),_().B.setShowAudioAlert(!0))}),[s,c,e,t,r]);(0,y().n)(d,2*g().TD,Boolean(s&&c&&o&&e))}(C);const N=(0,s().IS)((()=>({overlay:{position:"fixed",bottom:"80px",insetInlineEnd:"20px",width:400,height:225,zIndex:111,borderRadius:8,boxShadow:"0 8px 32px rgba(0,0,0,0.2)",backgroundColor:m().Tj.background.primary,overflow:"hidden"},videoContainer:{position:"relative",backgroundColor:m().Tj.background.tertiary},video:{width:"100%",height:"100%"},dismissButton:{position:"absolute",top:8,insetInlineEnd:8}})),[]),O=(0,n.useCallback)((async e=>{if(null==B||B.stop(),j&&(0,r().u)({environment:k,event:{eventName:"transcription_demo_stop",eventProperties:{stop_reason:e,demo_video_duration_seconds:I.current,block_id:j.id}}}),I.current=0,w().c.closeDemoVideoModal(),j){"transcribing"===(0,v().by)(j).state&&await(0,f().stopTranscription)({environment:k,blockStore:j,from:"demo_video"})}}),[B,k,j]);(0,n.useEffect)((()=>(P||null==B||B.reset(),()=>null==B?void 0:B.reset())),[P,B]);const W=(0,a().K8)((()=>{var e;const t=null===(e=(0,h().a)())||void 0===e?void 0:e.id;if(!R||!j)return!0;if(j.pathIsDead())return!1;const o=(0,d().N)(j);return t&&o&&t===o.id}),[R,j]);if((0,n.useEffect)((()=>{if(R&&P&&!W){const e=null==j?void 0:j.pathIsDead();O(e?"block_deleted":"navigation_away")}}),[R,P,W,O,j]),!P)return null;const F=p().VH[c().locale]||"en";return(0,D.jsx)("div",{style:N.overlay,children:(0,D.jsxs)("div",{style:N.videoContainer,children:[(0,D.jsx)(p().Ay,{ref:x,src:"https://player.vimeo.com/video/1125229375?h=0d906bbe0c",defaultTextTrack:F,style:N.video,onPlay:t=>{if(j){(0,r().u)({environment:k,event:{eventName:"transcription_demo_video_start",eventProperties:{block_id:j.id}}});const e=(null==B?void 0:B.getExecutedActions())||[],t=e[e.length-1]||"start";(0,r().u)({environment:k,event:{eventName:"transcription_demo_user_interaction",eventProperties:{interaction_type:"play",interaction_target:"play_button",demo_step_active:t,block_id:j.id}}})}I.current=t.seconds,0===(null==B?void 0:B.getExecutedActions().length)?null==B||B.start():null==B||B.resume(),null==e||e(t)},onPause:e=>{if(I.current=e.seconds,j){const e=(null==B?void 0:B.getExecutedActions())||[],t=e[e.length-1]||"start";(0,r().u)({environment:k,event:{eventName:"transcription_demo_video_pause",eventProperties:{interruption_reason:"user_action",demo_step_interrupted_at:t,demo_video_duration_seconds:I.current,block_id:j.id}}}),(0,r().u)({environment:k,event:{eventName:"transcription_demo_user_interaction",eventProperties:{interaction_type:"pause",interaction_target:"pause_button",demo_step_active:t,block_id:j.id}}})}null==B||B.pause(),null==t||t(e)},onEnd:e=>{I.current=e.seconds,null==B||B.stop(),j&&(0,r().u)({environment:k,event:{eventName:"transcription_demo_complete",eventProperties:{demo_video_duration_seconds:e.seconds,block_id:j.id}}}),null==o||o(e),I.current=0,w().c.closeDemoVideoModal()},onTimeUpdate:e=>{I.current=e.seconds,null==B||B.onTimeUpdate(e.seconds)},onPlayerReady:E,options:{playsinline:!0,autoplay:!1,muted:!1},customPlayButton:T.formatMessage({id:"transcriptionBlockDemoVideoModal.startDemo",defaultMessage:"Start"})}),(0,D.jsx)(l().R,{onClick:()=>{O("user_manual_stop")},style:N.dismissButton})]})})}},460957:(e,t,o)=>{o.d(t,{E:()=>a});o(581454);var n=()=>o(201980),r=()=>o(718957),i=()=>o(29554);function a(e){const{multiSelection:t}=e;return(0,r().$W)(t).map((({store:e,selection:t})=>{const o=(0,n().RQ)(e.getValue()),r=(0,n().xbM)(o,t),{tokensInsideRange:a}=(0,n().AI5)(o,r.startIndex,r.endIndex);return(0,i().r4)(a,e)})).join("\n\n")}},524007:(e,t,o)=>{o.d(t,{d:()=>n});const n=new(o(29923).R)({key:"preferred_audio_input_device",namespace:o(553737).cd,important:!0,trackingType:"preference"})},569243:(e,t,o)=>{o.d(t,{Pf:()=>c,QL:()=>a,Sk:()=>s});const n={1:e=>e.orange.background.accentSecondary,2:e=>e.red.background.accentSecondary,3:e=>e.red.background.accentSecondary,4:e=>e.orange.background.accentSecondary,5:e=>e.orange.background.accentSecondary,6:e=>e.orange.background.accentSecondary,7:e=>e.green.background.accentSecondary,8:e=>e.green.background.accentSecondary,9:e=>e.green.background.accentSecondary,10:e=>e.green.background.accentSecondary,11:e=>e.yellow.background.accentSecondary,12:e=>e.yellow.background.accentSecondary,13:e=>e.green.background.accentSecondary,14:e=>e.blue.background.accentSecondary,15:e=>e.blue.background.accentSecondary,16:e=>e.blue.background.accentSecondary,17:e=>e.purple.background.accentSecondary,18:e=>e.purple.background.accentSecondary,19:e=>e.gray.background.accentSecondary,20:e=>e.gray.background.accentSecondary,21:e=>e.pink.background.accentSecondary,22:e=>e.pink.background.accentSecondary,23:e=>e.purple.background.accentSecondary,24:e=>e.purple.background.accentSecondary},r={1:e=>e.purple.background.accentSecondary,2:e=>e.green.background.accentSecondary,3:e=>e.pink.background.accentSecondary,4:e=>e.red.background.accentSecondary,5:e=>e.yellow.background.accentSecondary,6:e=>e.orange.background.accentSecondary,7:e=>e.blue.background.accentSecondary,8:e=>e.gray.background.accentSecondary,9:e=>e.blue.background.accentSecondary,10:e=>e.green.background.accentSecondary,11:e=>e.red.background.accentSecondary};function i({theme:e,color:t}){if("preset"===t.type){var o,i;if("calendar"===t.colorType)return null===(o=n[t.colorId])||void 0===o?void 0:o.call(n,e);if("event"===t.colorType)return null===(i=r[t.colorId])||void 0===i?void 0:i.call(r,e)}var a;if("custom"===t.type)return null===(a=t.colorHexes)||void 0===a?void 0:a[e.mode].backgroundPrimary}function a({theme:e,calendarColor:t}){const o=t&&i({theme:e,color:t});return o||e.blue.background.accentSecondary}function s({theme:e,eventColor:t,calendarColor:o}){const n=t&&i({theme:e,color:t});return n||a({theme:e,calendarColor:o})}function c(e){const{colorType:t,color:o,colorId:n}=e;return n?{type:"preset",colorId:n,colorType:t}:o?{type:"custom",colorHexes:o}:void 0}},570551:(e,t,o)=>{function n(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}o.d(t,{A:()=>n})},592933:(e,t,o)=>{o.d(t,{G1:()=>i,Pn:()=>a,Vf:()=>n,yD:()=>r});o(410838),o(813451),o(944114),o(898992),o(354520),o(672577),o(803949),o(581454),o(737550);function n(e){return"inference"!==e.type&&"queue-handoff"!==e.type&&"reenqueue-with-delay"!==e.type&&"record-map"!==e.type&&"patch-start"!==e.type&&"patch"!==e.type&&"agent-search-extracted-results"!==e.type}function r(e){return"patch"===e.type||"patch-start"===e.type}function i(e){return function(e){const t=e.find((e=>"context"===e.type));return"daily_brief_reminder"===(null==t?void 0:t.value.surface)}(e)&&function(e){return e.filter((e=>"user"===e.type||"user-injected"===e.type)).length}(e)<=1}function a(e){let t=0;const o=e.findLastIndex((e=>"user"===e.type));-1!==o&&(t=o+1);return e.slice(t)}},606982:(e,t,o)=>{o.d(t,{A:()=>i});var n=()=>o(10123),r=()=>o(570551);function i(e,t){(0,r().A)(2,arguments);var o=(0,n().A)(e),i=(0,n().A)(t),a=o.getTime()-i.getTime();return a<0?-1:a>0?1:a}},613016:(e,t,o)=>{o.d(t,{a:()=>r});var n=()=>o(907258);function r(){const{sidebarSpaceStore:e}=n().default.getState();return e?e.id:void 0}},671089:(e,t,o)=>{o.r(t),o.d(t,{checkmarkCircleIcon:()=>i,iconDefinition:()=>r});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M12.876 7.982a.625.625 0 1 0-1.072-.644L9.25 11.595 7.815 9.92a.625.625 0 0 0-.95.813l2 2.334a.625.625 0 0 0 1.01-.085z"}),(0,n.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25M3.625 10a6.375 6.375 0 1 1 12.75 0 6.375 6.375 0 0 1-12.75 0"})]})},i=(0,o(340498).wt)("checkmarkCircle",r,"default")},673903:(e,t,o)=>{o.d(t,{E:()=>n,G:()=>r});o(16280);function n(){const e=navigator.mediaDevices;if(e instanceof MediaDevices)return e;throw new Error("Media devices unavailable in current context.")}function r(e){const t=window.AudioContext||window.webkitAudioContext||!1;var o;if(Boolean(t))return new t({...(null===(o=navigator)||void 0===o||null===(o=o.mediaDevices)||void 0===o?void 0:o.getSupportedConstraints().sampleRate)&&{sampleRate:e}});throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}},687039:(e,t,o)=>{o.d(t,{Ay:()=>s,VH:()=>i});o(898992),o(803949),o(814603),o(147566),o(198721);var n=o(296540),r=o(474848);const i={"en-US":"en","ja-JP":"ja","ko-KR":"ko","fr-FR":"fr","de-DE":"de","pt-BR":"pt-BR","es-ES":"es-ES"};function a(e){return e.src?(0,r.jsx)("img",{alt:"",style:e.style,src:e.src}):null}const s=n.forwardRef((function(e,t){var i;const s=n.useRef(e);s.current=e;const c=n.useRef(void 0),[d,l]=n.useState(Boolean(e.customPlayButton)),[u,m]=n.useState(!1);n.useEffect((()=>{let t,o=!0;const n=()=>{const r=window.Vimeo;if(!r||!o)return;const i=document.getElementById(e.src);if(i)try{var a,d;if(t=new r.Player(i,{logging:!1}),c.current=t,!o||!t)return;t.on("play",(e=>{var t,o;l(!1),null===(t=(o=s.current).onPlay)||void 0===t||t.call(o,e)})),t.on("pause",(e=>{var t,o;null===(t=(o=s.current).onPause)||void 0===t||t.call(o,e)})),t.on("ended",(e=>{var t,o;null===(t=(o=s.current).onEnd)||void 0===t||t.call(o,e)})),null===(a=(d=s.current).onPlayerReady)||void 0===a||a.call(d,t),t.on("timeupdate",(e=>{var t,o;null===(t=(o=s.current).onTimeUpdate)||void 0===t||t.call(o,e)}))}catch(u){}else setTimeout(n,50)};if(window.Vimeo)n();else{const e=document.createElement("script");e.src="https://player.vimeo.com/api/player.js",e.onload=n,document.body.appendChild(e)}return()=>{if(o=!1,c.current=void 0,t)try{t.off("play"),t.off("pause"),t.off("ended"),t.off("timeupdate")}catch(e){}}}),[e.src]);const p=n.useCallback((()=>{const e=c.current;e&&(m(!0),e.play().catch((e=>{o(165358).log({level:"error",from:"VimeoVideoPlayer",type:"vimeo_play_failed",error:e})})))}),[]),h=function(e,t){const n=new URL(e);return(0,(()=>o(534177))().WP)(t).forEach((([e,t])=>{void 0!==t&&n.searchParams.set(e,String(t))})),n.toString()}(e.src,{texttrack:e.defaultTextTrack,playsinline:!1,dnt:(null===(i=e.options)||void 0===i?void 0:i.dnt)??!0,...e.options}),f=(0,o(401497).IS)((()=>({innerStyle:{position:"absolute",top:0,insetInlineStart:0,width:"100%",height:"100%",border:0,boxShadow:`0 1px 0 0 ${o(100622).Tj.border.secondary}`},customPlayButtonOverlay:{position:"absolute",top:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.4)",opacity:u?0:1,transition:"opacity 0.15s ease-out",pointerEvents:u?"none":"auto"}})),[u]);return(0,r.jsxs)(o(25500).A,{ratio:e.aspectRatioOverride??9/16,children:[(0,r.jsx)(a,{style:{...f.innerStyle,...e.preloadThumbnailStyle},src:e.preloadThumbnailSrc}),(0,r.jsx)("iframe",{ref:t,id:e.src,className:e.className,allowFullScreen:!0,src:h,style:{...f.innerStyle,...e.style}}),d&&e.customPlayButton?(0,r.jsx)("div",{style:f.customPlayButtonOverlay,children:(0,r.jsx)(o(160432).A,{onClick:p,size:"lg",colorPalette:"blue",children:e.customPlayButton})}):void 0]})}))},738508:(e,t,o)=>{o.r(t),o.d(t,{cursorIcon:()=>i,iconDefinition:()=>r});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",fittedViewBox:"1.25 0 17.5 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("g",{className:"logo-light-mode",children:[(0,n.jsxs)("g",{clipPath:"url(#clip0_16020_205)",children:[(0,n.jsx)("path",{fill:"#757575",d:"m9.995 9.987 8.658 4.999a.6.6 0 0 1-.226.226l-8.092 4.672a.68.68 0 0 1-.68 0l-8.092-4.672a.6.6 0 0 1-.226-.226z"}),(0,n.jsx)("path",{fill:"#525252",d:"M9.995 0v9.987l-8.658 4.999a.6.6 0 0 1-.082-.309v-9.38c0-.22.117-.424.308-.534L9.655.09a.7.7 0 0 1 .34-.09"}),(0,n.jsx)("path",{fill:"#404040",d:"M18.652 4.989a.6.6 0 0 0-.225-.226L10.334.09A.7.7 0 0 0 9.995 0v9.987l8.658 4.999a.6.6 0 0 0 .083-.309v-9.38c0-.11-.03-.216-.083-.308"}),(0,n.jsx)("path",{fill:"#D9D9D9",d:"M18.047 5.339a.29.29 0 0 1 0 .29l-7.859 13.61c-.053.093-.193.055-.193-.05v-8.97a.4.4 0 0 0-.054-.201z"}),(0,n.jsx)("path",{fill:"#fff",d:"m18.047 5.339-8.106 4.68a.4.4 0 0 0-.147-.147L2.027 5.387c-.092-.053-.054-.193.052-.193h15.717c.111 0 .202.06.25.145"})]}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"clip0_16020_205",children:(0,n.jsx)("path",{fill:"#fff",d:"M1.255 0h17.49v20H1.256z"})})})]}),(0,n.jsxs)("g",{className:"logo-dark-mode",children:[(0,n.jsxs)("g",{clipPath:"url(#clip0_16020_213)",children:[(0,n.jsx)("path",{fill:"#6E6E6E",d:"m9.995 9.987 8.658 4.999a.6.6 0 0 1-.226.226l-8.092 4.672a.68.68 0 0 1-.68 0l-8.092-4.672a.6.6 0 0 1-.226-.226z"}),(0,n.jsx)("path",{fill:"#4A4A4A",d:"M9.995 0v9.987l-8.658 4.999a.6.6 0 0 1-.082-.309v-9.38c0-.22.117-.424.308-.534L9.655.09a.7.7 0 0 1 .34-.09"}),(0,n.jsx)("path",{fill:"#383838",d:"M18.652 4.989a.6.6 0 0 0-.225-.226L10.334.09A.7.7 0 0 0 9.995 0v9.987l8.658 4.999a.6.6 0 0 0 .083-.309v-9.38c0-.11-.03-.216-.083-.308"}),(0,n.jsx)("path",{fill:"#C9C9C9",d:"M18.047 5.339a.29.29 0 0 1 0 .29l-7.859 13.61c-.053.093-.193.055-.193-.05v-8.97a.4.4 0 0 0-.054-.201z"}),(0,n.jsx)("path",{fill:"#fff",d:"m18.047 5.339-8.106 4.68a.4.4 0 0 0-.147-.147L2.027 5.387c-.092-.053-.054-.193.052-.193h15.717c.111 0 .202.06.25.145"})]}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"clip0_16020_213",children:(0,n.jsx)("path",{fill:"#fff",d:"M1.255 0h17.49v20H1.256z"})})})]})]})},i=(0,o(340498).wt)("cursor",r,"default")},827380:(e,t,o)=>{function n(e){return{all:e=e||new Map,on:function(t,o){var n=e.get(t);n?n.push(o):e.set(t,[o])},off:function(t,o){var n=e.get(t);n&&(o?n.splice(n.indexOf(o)>>>0,1):e.set(t,[]))},emit:function(t,o){var n=e.get(t);n&&n.slice().map((function(e){e(o)})),(n=e.get("*"))&&n.slice().map((function(e){e(t,o)}))}}}o.d(t,{A:()=>n})},866515:(e,t,o)=>{o.d(t,{n:()=>r});var n=o(296540);function r(e,t,o){const r=(0,n.useRef)(e),i=(0,n.useRef)(null);(0,n.useEffect)((()=>{r.current=e}),[e]),(0,n.useEffect)((()=>{const e=async()=>{i.current&&(clearTimeout(i.current),i.current=null),o&&(await r.current(),i.current=setTimeout(e,t))};return o&&e(),()=>{i.current&&(clearTimeout(i.current),i.current=null)}}),[o,t])}},909557:(e,t,o)=>{o.d(t,{$W:()=>a,Dg:()=>l,E6:()=>u,Rv:()=>d,Tn:()=>s,XG:()=>c,Yh:()=>i,d1:()=>r,eY:()=>m});var n=()=>o(416845);class r extends n().WXf{constructor(e){super({level:"error",status:500,name:"DictationAudioRecorderFailedError",message:e||"Audio recorder failed",retryable:!1})}}class i extends n().WXf{constructor(){super({level:"error",status:500,name:"DictationSystemAudioFailedError",message:"System audio failed",retryable:!1})}}class a extends n().WXf{constructor(){super({level:"error",status:500,name:"DictationSystemAudioHardwareError",message:"System audio hardware error",retryable:!1})}}class s extends n().WXf{constructor(){super({level:"error",status:500,name:"DictationStartTimeoutError",message:"Dictation start timeout",retryable:!0})}}class c extends n().WXf{constructor(e){super({level:"error",status:429,name:"DictationRateLimitError",message:e||"Rate limit exceeded",retryable:!1})}}class d extends n().WXf{constructor(e){super({level:"error",status:403,name:"DictationForbiddenError",message:e||"Access forbidden",retryable:!1})}}class l extends n().WXf{constructor(e){super({level:"error",status:403,name:"DictationUpgradeRequiredError",message:e||"Workspace upgrade required",retryable:!1})}}class u extends n().WXf{constructor(e,t){super({level:"error",status:t&&(0,o(513416).Mh)(t)?t:500,name:"DictationOpenAIError",message:e,retryable:!0})}}class m extends n().WXf{constructor(e){super({level:"error",status:400,name:"DictationMissingUserOrSpaceError",message:e||"Missing user or space information",retryable:!1})}}},927648:(e,t,o)=>{o.d(t,{Ay:()=>p,Kj:()=>l});o(16280);var n=()=>o(165358),r=()=>o(496603),i=()=>o(229833),a=()=>o(914649),s=()=>o(673903);function c(e){for(const t of e.getTracks())t.stop()}const d=(0,r().nF)((async function(){if(!window.isSecureContext)return a().wv;try{const e=(0,s().E)();return c(await e.getUserMedia({video:!1,audio:!0})),a().a3}catch(e){const{displayDictationPermissionSnackbar:t}=await Promise.all([o.e(35530),o.e(9773),o.e(55373),o.e(36192),o.e(27992),o.e(63452),o.e(66249),o.e(92845),o.e(87249),o.e(79022),o.e(44854),o.e(87017),o.e(34877),o.e(11676),o.e(61165),o.e(94522),o.e(44584),o.e(40992),o.e(88455),o.e(49021),o.e(71136),o.e(86341),o.e(13131),o.e(4902)]).then(o.bind(o,872903));if(e instanceof Error)switch(e.name){case a().nY:return t(a().JS),a().JS;case a().V9:case a().mL:return t(a().rP),a().rP}return t(a().JC),a().JC}}),1e3);async function l(){if(!window.isSecureContext)return a().wv;try{const e=(0,s().E)();return c(await e.getDisplayMedia({audio:!0,systemAudio:"include"})),a().a3}catch(e){return n().log({level:"error",from:"checkScreenRecordingPermissionsByTesting",error:(0,i().convertErrorToLog)(e),type:"checkScreenRecordingPermissionsByTestingUnableToCaptureSystemAudio"}),a().JC}}const u=(0,r().nF)(l,1e3);class m extends(()=>o(757695))().Store{async checkPermissions(e){const t=await d(),o=e?await u():a().wg;return this.setState({...this.state,audio:t,screenRecording:o}),{audio:t,screenRecording:o}}getHasAttemptedScreenRecordingPermissions(){return this.state.hasAttemptedScreenRecordingPermissions}setHasAttemptedScreenRecordingPermissions(e){this.setState({...this.state,hasAttemptedScreenRecordingPermissions:e})}getInitialState(){const e=window.isSecureContext?a().wg:a().wv;return{audio:e,screenRecording:e,hasAttemptedScreenRecordingPermissions:void 0}}}const p=new m},962753:(e,t,o)=>{o.d(t,{EH:()=>y,FO:()=>v,P$:()=>g,VA:()=>h,h0:()=>l,lM:()=>u,mq:()=>f});o(898992),o(581454),o(737550);var n=()=>o(907258),r=()=>o(242422),i=()=>o(763765),a=()=>o(613848),s=()=>o(496603),c=()=>o(534177),d=()=>o(822789);function l(e){const{currentUserRootStore:t}=n().default.state;if(!t)return!1;const o=t.getSpaceViewStores();return(0,s().oE)(null==o?void 0:o.map((e=>e.getSpaceId()))).map((t=>a().A.getData(e,{spaceId:t,userId:e.currentUser.id}))).some((e=>m(e)))}function u(e,t){return m(a().A.getData(e,{spaceId:t,userId:e.currentUser.id}))}function m(e){switch(null==e?void 0:e.membershipType){case void 0:case"none":case"page_guest":return!1;case"restricted_member":case"member":case"membership_admin":case"owner":return!0===e.is_sales_assisted;default:(0,c().HB)(e)}}function p(e,t){if(!t)return"control";if(u(e,t))return"control";const o=r().default.getEligibleGroup({experimentId:"ai_product_retention_simplified_input",defaultGroup:"control"});return"input"===o||"input_and_ask_mode"===o?o:"control"}function h(){switch(r().default.getEligibleGroup({experimentId:"ai_product_retention_agent_follow_ups",defaultGroup:"control"})){case"button_nudge":return["button","nudge"];case"button_control":return["button","default"];case"nudge":return["nudge"];default:return}}function f(e,t){const o=r().default.checkGate({gateName:"agent_deep_find"}),n=void 0!==t&&u(e,t),a=e.currentUser.id,s=!t||!a||i().t.USEWITHCAUTION_isFetchedForSpaceAndUserId({spaceId:t,userId:a}),c=o||!n&&s&&"on"===r().default.getEligibleGroup({experimentId:"ai_product_retention_deepfind",defaultGroup:"control"}),d=g(e,t);return{agentDeepFindEnabled:c,useReadOnlyMode:c&&d}}function v(e,t){if(t?(0,d().vp)(t):(0,d().hw)())return!0;return"control"!==p(e,t)}function g(e,t){return"input_and_ask_mode"===p(e,t)}function y(){return"on"===r().default.getEligibleGroup({experimentId:"ai_product_retention_agent_speculative_search",defaultGroup:"control"})}},964576:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().Store{constructor(){super()}getInitialState(){}}const r=new n},986850:(e,t,o)=>{e.exports=o.p+"dbc10b469ee58d20.js"}}]);