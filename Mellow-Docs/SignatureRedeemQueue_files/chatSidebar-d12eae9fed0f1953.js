"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[2703],{257819:(e,a,i)=>{i.r(a),i.d(a,{MobileChatModal:()=>S});var t=i(296540),s=()=>i(870956),o=()=>i(756117),n=()=>i(782482),l=()=>i(401497),r=()=>i(15258),d=()=>i(396406),u=()=>i(100622),c=()=>i(996958),h=()=>i(826573),p=()=>i(380295),b=()=>i(275598),f=()=>i(706959),m=()=>i(350605),g=i(474848);const M="full",v="agent_mobile";function S({visibility:e,routeData:a,fromSurface:i="corner"}){const t=(0,r().lW)(),{onDismiss:s,onDismissed:o,isOpen:n}=(0,f().c)(),l={width:{min:t.width,max:t.width,value:t.width,resizeMode:"none"},height:{min:t.height,max:t.height,value:t.height,resizeMode:"none"}};return a?(0,g.jsx)(x,{visibility:e,ariaLabel:(0,h().Hv)(M),ariaDescribedBy:(0,h().q8)(M),dataTestId:"ai-mobile-chat",onDismiss:s,onDismissed:o,isOpen:n,children:(0,g.jsx)(m().u,{chatPanelState:a,chatPanelMode:M,panelSize:l,onDismiss:s,onEsc:s,fromSurface:i,aiChatFeature:v})}):null}function x({visibility:e,children:a,ariaLabel:i,ariaLabelledBy:r,ariaDescribedBy:h,dataTestId:f,onDismiss:m,onDismissed:v,isOpen:S}){(0,b().N)(!0,e);const x=(0,c().N)({chatPanelMode:M,chatPanelVisibility:e}),{handleAnimationEnd:C}=(0,p().m)({shouldAnimateRef:(0,t.useRef)(!1),chatPanelMode:M,chatPanelVisibility:e,onClosingFinished:v}),y=(0,t.useCallback)((a=>{a||"closing"!==e||C()}),[e,C]),P=(0,l().IS)((()=>({container:{position:"fixed",top:0,insetInlineStart:0,insetInlineEnd:0,bottom:0,backgroundColor:u().Tj.background.primary,zIndex:999,width:"100vw",height:"100dvh",display:"flex",flexDirection:"column"}})),[]);return"closed"===e?null:(0,g.jsx)(d().O,{open:S,trapFocus:S,children:(0,g.jsx)(n().N,{capture:"open"===e,debugName:"MobilePopup",onEsc:m,onBackButton:m,children:(0,g.jsx)(o().A,{visible:"open"===e,...x,onAnimationEnd:y,forceCompositeLayer:!0,style:P.container,role:"dialog","aria-label":i,"aria-modal":S,"aria-labelledby":r,"aria-describedby":h,...(0,s().A)(!0),children:a})})})}},258522:(e,a,i)=>{i.d(a,{q:()=>o});i(296540);var t=i(474848);const s={viewBox:"0 0 20 20",fittedViewBox:"2.37 4.12 15.25 11.75",directional:!0,svg:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("path",{d:"M11.93 9.125a.5.5 0 0 0-.5.5v3.75a.5.5 0 0 0 .5.5h3.145a.5.5 0 0 0 .5-.5v-3.75a.5.5 0 0 0-.5-.5z"}),(0,t.jsx)("path",{d:"M4.5 4.125A2.125 2.125 0 0 0 2.375 6.25v7.5c0 1.174.951 2.125 2.125 2.125h11a2.125 2.125 0 0 0 2.125-2.125v-7.5A2.125 2.125 0 0 0 15.5 4.125zM3.625 6.25c0-.483.392-.875.875-.875h11c.483 0 .875.392.875.875v7.5a.875.875 0 0 1-.875.875h-11a.875.875 0 0 1-.875-.875z"})]})},o=(0,i(340498).wt)("peekCorner",s,"default")},826573:(e,a,i)=>{i.d(a,{Hv:()=>d,JX:()=>c,q8:()=>u});var t=()=>i(675133),s=()=>i(258522),o=()=>i(177256),n=()=>i(69708);const l=(0,n().YK)({sidebar:{defaultMessage:"Sidebar",id:"chatSidebar.mode.sidebar"},popup:{defaultMessage:"Floating",id:"chatSidebar.mode.popup"},full:{defaultMessage:"Full",id:"chatSidebar.mode.full"}}),r=(0,n().YK)({sidebar:{defaultMessage:"Chat appears as a sidebar on the right",id:"chatSidebar.mode.description.sidebar"},popup:{defaultMessage:"Chat appears as a floating popup",id:"chatSidebar.mode.description.popup"},full:{defaultMessage:"Full",id:"chatSidebar.mode.full"}});function d(e){switch(e){case"sidebar":return t().A.formatMessage(l.sidebar);case"popup":return t().A.formatMessage(l.popup);case"full":return t().A.formatMessage(l.full)}}function u(e){switch(e){case"sidebar":return t().A.formatMessage(r.sidebar);case"popup":return t().A.formatMessage(r.popup);case"full":return t().A.formatMessage(r.full)}}function c(e){switch(e){case"sidebar":return o().A;case"popup":case"full":return s().q}}},942646:(e,a,i)=>{i.r(a),i.d(a,{ChatSidebar:()=>c,DockedSidebar:()=>l().DockedSidebar,MobileChatModal:()=>r().MobileChatModal});var t=i(296540),s=()=>i(484714),o=()=>i(965454),n=()=>i(981475),l=()=>i(217609),r=()=>i(257819),d=i(474848);const u="corner";const c=(h=function({aiChatFeature:e}){const a=(0,i(770160).useChatPanelState)(),c=(0,s().Y0)(),h=(0,t.useMemo)((()=>new(o().rz)),[]),{visibility:p,mode:b,onDismissed:f,isOpen:m}=(0,i(706959).c)(),g=(0,i(304261).yr)();return(0,i(852507).w)((()=>{let e=g.chatPanelMode;c.isPhone?e="full":c.isTablet&&(e="popup"),n().globalChatPanelRuntimeStore.update((a=>({...a,chatPanelMode:e})))})),(0,t.useEffect)((()=>{null!=a&&a.isOpen&&"closed"===p?n().globalChatPanelRuntimeStore.update((e=>({...e,chatPanelVisibility:"opening"}))):null!=a&&a.isOpen||"open"!==p||(n().globalChatPanelRuntimeStore.update((e=>({...e,chatPanelVisibility:"closing"}))),f())}),[a,p,f,m]),"closed"===p?null:a?(0,d.jsx)(o().XN.Provider,{value:h,children:c.isPhone?(0,d.jsx)(r().MobileChatModal,{routeData:a,visibility:p,fromSurface:u}):(0,d.jsx)(l().DockedSidebar,{aiChatFeature:e,visibility:p,routeData:a,mode:b,fromSurface:u})}):null},function(e){const a=(0,s().Y0)(),t=a.isMobileNative&&a.isPhone,o=a.isPhone&&a.isMobileBrowser,n=(0,i(59226).X)("agent_mobile_web_app_promo");return t||o&&n?null:(0,d.jsx)(h,{...e})});var h}}]);