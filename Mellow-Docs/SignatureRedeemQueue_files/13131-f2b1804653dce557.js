"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[13131],{122406:(e,t,n)=>{n.d(t,{e:()=>o});n(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"1.68 2.37 17.01 15.26",svg:(0,n(474848).jsx)("path",{d:"M8 2.375c-1.137 0-2.054.47-2.674 1.242-.608.757-.9 1.765-.9 2.824s.292 2.066.9 2.824c.62.772 1.537 1.241 2.674 1.241s2.055-.469 2.675-1.241c.608-.758.9-1.766.9-2.824 0-1.059-.292-2.067-.9-2.824-.62-.773-1.538-1.242-2.675-1.242M5.676 6.441c0-.842.233-1.554.624-2.042.38-.473.937-.774 1.7-.774s1.32.301 1.7.774c.391.488.624 1.2.624 2.042s-.233 1.554-.624 2.041c-.38.473-.937.774-1.7.774s-1.32-.3-1.7-.774c-.391-.487-.624-1.2-.624-2.041M8 11.63c-2.7 0-5.101 1.315-6.12 3.305-.361.706-.199 1.421.23 1.923.412.48 1.06.767 1.74.767h8.3c.68 0 1.328-.287 1.74-.767.429-.502.591-1.217.23-1.923C13.1 12.945 10.7 11.63 8 11.63m-5.007 3.875c.761-1.488 2.672-2.626 5.007-2.626s4.246 1.138 5.007 2.626c.105.204.07.378-.067.54-.156.182-.448.33-.79.33h-8.3c-.342 0-.634-.148-.79-.33-.138-.162-.172-.336-.067-.54m15.493-8.568a.625.625 0 0 1 0 .884L16.807 9.5l1.68 1.68a.625.625 0 1 1-.884.883l-1.68-1.68-1.68 1.68a.625.625 0 0 1-.883-.884L15.04 9.5l-1.68-1.68a.625.625 0 1 1 .884-.883l1.68 1.68 1.678-1.68a.625.625 0 0 1 .884 0"})},o=(0,n(340498).wt)("personXmark",i,"default")},321172:(e,t,n)=>{n.d(t,{XP:()=>g,T:()=>f,Tk:()=>u});n(898992),n(354520),n(581454),n(296540);var i=()=>n(792057),o=()=>n(179034),a=()=>n(69708),r=()=>n(314529);var c=()=>n(998992),s=()=>n(544198),d=()=>n(380682),l=()=>n(712505),_=()=>n(212640),p=()=>n(538233),m=()=>n(437487),v=n(474848);function u(e){const{environment:t,store:n}=e;m().Ay.reset(),l().default.state.open?_().A.setState({..._().A.state,open:!0}):p().A.setState({...p().A.state,open:!0}),function(e,t){(0,r().DO_NOT_USE_trackLegacy)(e,"open_page_share",t)}(t,{share_menu_session_id:m().Ay.state.sessionId,...n&&n.table===o().ev&&n.isCollectionView()?{collection_view_block_id:n.id,...(0,s().P)(n,{skipPages:!1})}:{}})}function g(e){const{environment:t,store:n}=e;l().default.state.open?_().A.setState({..._().A.state,open:!1}):p().A.setState({...p().A.state,open:!1}),d().A.setState({...d().A.state,siteSettingContentType:"initial"});const{collection_view_block_id:i,collection_view_id:a,collection_id:v,owned_collection_count:u,linked_collection_count:g}=(()=>{if(n&&n.table===o().ev&&n.isCollectionView()){const e=(0,s().P)(n,{skipPages:!1});return{collection_view_block_id:n.id,collection_view_id:(0,c().I)(n,t),collection_id:e.collectionId,owned_collection_count:e.ownedCollectionCount,linked_collection_count:e.linkedCollectionCount}}return{collection_view_block_id:void 0,collection_view_id:void 0,collection_id:void 0,owned_collection_count:void 0,linked_collection_count:void 0}})();!function(e,t){(0,r().DO_NOT_USE_trackLegacy)(e,"close_page_share",t)}(t,{share_menu_session_id:m().Ay.state.sessionId,collection_id:v,collection_view_id:a,collection_view_block_id:i,owned_collection_count:u,linked_collection_count:g})}async function f(e){const{inviteTargetsStore:t}=e,n=(0,v.jsx)(a().sA,{id:"shareMenu.closeInviteDialog.confirmationMessage",defaultMessage:"Your changes have not been saved. Discard changes?"}),o=(0,v.jsx)(a().sA,{id:"shareMenu.closeInviteDialog.confirmationButton.label",defaultMessage:"Yes"}),r=(0,v.jsx)(a().sA,{id:"shareMenu.closeInviteDialog.cancelButton.label",defaultMessage:"Cancel"});if(t.state.inviteTargets.length>0){return(await i().Gh({message:n,acceptLabel:o,cancelLabel:r})).accept}return!1}},380682:(e,t,n)=>{n.d(t,{A:()=>o});class i extends(()=>n(757695))().Store{getInitialState(){return{siteSettingContentType:"initial"}}}const o=new i},402528:(e,t,n)=>{n.d(t,{D6:()=>U,Jf:()=>C,Zr:()=>E,_:()=>N,bO:()=>j,kO:()=>x,nT:()=>O,p5:()=>F});n(410838),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(672577),n(581454),n(737550);var i=()=>n(564884),o=()=>n(755531),a=()=>n(140934),r=()=>n(675133),c=()=>n(128933),s=()=>n(849829),d=()=>n(295633),l=()=>n(849255),_=()=>n(56268),p=()=>n(584262),m=()=>n(165358),v=()=>n(970412),u=()=>n(769864),g=()=>n(410624),f=()=>n(328194),k=()=>n(854513),b=()=>n(192359),w=()=>n(362075),y=()=>n(966509),h=()=>n(488776),S=()=>n(752860),B=()=>n(321172),T=()=>n(644914),A=()=>n(712505),M=()=>n(402602),I=()=>n(649021);const P=(0,n(69708).YK)({unableToCreateTranscriptionBlockForCalendarEvent:{id:"calendarEventActions.unableToCreateTranscriptionBlockForCalendarEvent",defaultMessage:"A transcription block could not be created for this calendar event."},sharedBlockWithParticipants:{id:"upcomingMeetings.sharedBlockWithParticipants",defaultMessage:"Participants in your workspace have edit access to this page."},sharedBlockWithParticipantsCta:{id:"upcomingMeetings.sharedBlockWithParticipants.cta",defaultMessage:"Manage access"},transcriptionBlockAlreadyExists:{id:"upcomingMeetings.transcriptionBlockAlreadyExists",defaultMessage:"A meeting note already exists for this calendar event."},transcriptionBlockAlreadyStarted:{id:"calendarEventActions.transcriptionBlockAlreadyStarted",defaultMessage:"This meeting is already being transcribed."},transcriptionBlockAlreadyStartedByUser:{id:"calendarEventActions.transcriptionBlockAlreadyStartedByUser",defaultMessage:"{transcriberName} is already transcribing"}});function N(e){const{environment:t,transcriptionBlockStore:n}=e;(0,s().L)({item:{label:r().A.formatMessage(P.sharedBlockWithParticipants)},showButton:!0,buttonText:r().A.formatMessage(P.sharedBlockWithParticipantsCta),onClick:()=>{(0,B().Tk)({environment:t,store:n})}})}async function C(e){const{environment:t,event:n,from:i,parent:a,peekMode:s,method:d}=e;let l=!1;const v=(0,o().S)();if(!v)return{createdNewTranscriptionBlock:!1};let u=await E({event:n,environment:t,spaceStore:v});if(u){(await k().$.load()).navigateToTranscriptionBlock({environment:t,blockStore:u,pageVisitSource:p().y8.UpcomingMeetingCalendarEvent,peekMode:s})}else{if(u=await async function(e){const{environment:t,from:n,event:i,parent:o,peekMode:a}=e,s=(0,M().W)(),d=(await k().$.load()).createAndNavigateToTranscriptionBlock({environment:t,from:n,title:"title_with_event",pageVisitSource:p().y8.UpcomingMeetingCalendarEvent,peekMode:a,calendarEvent:i,...s?{sharedNote:!0}:{},parent:o});return d||(m().log({level:"error",from:"calendarEventActions",type:"unableToCreateTranscriptionBlockForCalendarEvent",data:{miscDataToConvertToString:{eventId:i.id,from:n,parentId:o&&"string"!=typeof o?o.id:o}}}),void c().D6({label:r().A.formatMessage(P.unableToCreateTranscriptionBlockForCalendarEvent)}))}({environment:t,from:i,event:n,parent:a,peekMode:s}),!u)return{createdNewTranscriptionBlock:!1};l=!0}return"side_peek"===s&&await A().default.waitUntil((()=>{var e;return A().default.isSidePeekOpen()&&Boolean(null===(e=A().default.peekTargetStore.state)||void 0===e?void 0:e.isReady())})),"upcoming_meeting_create_meeting_note"!==i||l||c().D6({label:r().A.formatMessage(P.transcriptionBlockAlreadyExists)}),async function(e){const{environment:t,event:n,transcriptionBlockStore:i,createdNewTranscriptionBlock:o}=e;if(!o||!i)return;if(!(0,M().W)())return;i.isReady()||await i.load();const a=(0,_().r)({environment:t,store:i});if(a)return;if(!j(n))return;N({environment:t,transcriptionBlockStore:i})}({environment:t,event:n,createdNewTranscriptionBlock:l,transcriptionBlockStore:u}),(0,y().R)({environment:t,data:{type:"track",payload:{event:"meetingNoteClicked",eventId:n.id,product:"notion",from:i,method:d}}}),{createdNewTranscriptionBlock:l,transcriptionBlockStore:u}}async function x(e){const{environment:t,event:n,from:i,peekMode:o,autoStart:a=!0,method:s}=e,{createdNewTranscriptionBlock:d,transcriptionBlockStore:_}=await C({environment:t,from:i,event:n,peekMode:o,method:s});if(_){if("initial"!==(0,b().by)(_).state){var p;const e=null===(p=_.getModel())||void 0===p||null===(p=p.getFormat().transcription_state_history)||void 0===p?void 0:p.findLast((e=>"transcribing"===e.state));if(e){const n=r().A.getIntl(),i=new(l().L)(t,{id:e.actor_id,table:e.actor_table}).getDisplayName(n);c().D6({label:r().A.formatMessage(P.transcriptionBlockAlreadyStartedByUser,{transcriberName:i})})}else c().D6({label:r().A.formatMessage(P.transcriptionBlockAlreadyStarted)});return{createdNewTranscriptionBlock:d,transcriptionBlockStore:_}}}if(a&&_){const e=await f().w.load();await e.startTranscription({environment:t,blockStore:_,from:i,audioConsentEnabled:(0,w().yz)()})}else if(a){const e=await g().k.load();await e.startTranscribingBlockOnPageFromTrustedSource({environment:t,from:i})}return{createdNewTranscriptionBlock:d,transcriptionBlockStore:_}}async function E(e){const{event:t,spaceStore:n,environment:i}=e,{blockAttachments:o}=t;let a;const r=u().callApi({environment:i,eventName:"getTranscriptionBlockForEvent",data:{eventUid:t.uid,spaceId:n.id}});null!=o&&o.length&&(a=L({event:t,spaceStore:n}));const c=await r;if("failed"===c.type)return a;const s=c.data.transcriptionBlockPointers,d=new Set(s.map((e=>e.id))),l=new Set((null==o?void 0:o.map((e=>e.id)))??[]),_=(0,v()._)(d,l);return 0===_.size||(m().log({level:"warning",from:"maybeGetTranscriptionBlockStoreFromEvent",type:"missingTranscriptionRecordPointer",data:{miscDataToConvertToString:{missingPointers:Array.from(_),verifiedPointers:Array.from(d),localPointers:Array.from(l),eventId:t.id,spaceId:n.id}}}),(0,h().Y)().update((e=>{const i=null==e?void 0:e.events.find((e=>e.accountId===t.accountId&&e.calendarId===t.calendarId&&e.id===t.id));return i?(i.blockAttachments=[...Array.from(_).map((e=>({spaceId:n.id,table:"block",id:e}))),...i.blockAttachments??[]],e):e})),a=L({event:t,spaceStore:n})),a}const D=4e3;async function L(e){var t,n;const{event:i,spaceStore:o,timeoutMs:r=D}=e,c=(null===(t=i.blockAttachments)||void 0===t?void 0:t.map((e=>d().B.createChildStore(o,e))))??[];if(0===c.length)return;const s=new(a().ComputedStore)((()=>(0,I().gw)({event:i,transcriptionBlockStores:c})),{debugName:`getPrimaryTranscriptionBlockStoreFromEvent-${i.uid}`});let l=s.getState();return"LOADING"===l.reason&&(l=await new Promise((e=>{const t=window.setTimeout((()=>{e(void 0),s.removeListener(n)}),r),n=i=>{"LOADING"!==i.getState().reason&&(e(i.getState()),clearTimeout(t),s.removeListener(n))};s.addListener(n)}))),null!==(n=l)&&void 0!==n&&n.primaryTranscriptionBlockStore?l.primaryTranscriptionBlockStore:void 0}function j(e){var t;return null===(t=e.attendees)||void 0===t?void 0:t.some((e=>e.notionUserId&&!e.self))}async function O(e){const{event:t,from:n,environment:o,calendarBotId:a,peekMode:r}=e,c=!(await C({environment:o,from:n,event:t,peekMode:r??"side_peek"})).createdNewTranscriptionBlock,s=function(e){const{from:t,environment:n,eventProperties:i}=e,o=(0,T().KB)(n);switch(t){case"upcoming_meeting":return{eventName:"ai_meetings_tab_upcoming_meetings_event_clicked",eventProperties:i};case"upcoming_meeting_primary_note":return{eventName:"ai_meetings_tab_upcoming_meetings_event_primary_note_clicked",eventProperties:i};case"in_app_meeting_notification_upcoming_stage":return{eventName:"in_app_meeting_notification_upcoming_stage_event_clicked",eventProperties:{...i,is_sidebar_expanded:o}};default:return}}({from:n,environment:o,eventProperties:{calendar_event_id:t.id,has_existing_meeting_note:c}});s&&(0,i().u)({environment:o,event:s}),a&&(0,y().R)({environment:o,data:{type:"track",payload:{event:"meetingNoteOpened",eventId:t.id,calendarId:t.calendarId,from:n,hasExistingNote:c}},botId:a})}async function U(e){const{event:t,from:n,environment:o,calendarBotId:a,peekMode:r}=e,c=!(await x({environment:o,event:t,from:n,peekMode:r??"side_peek"})).createdNewTranscriptionBlock,s=function(e){const{from:t,environment:n,eventProperties:i}=e,o=(0,T().KB)(n);switch(t){case"upcoming_meeting_start_transcribing":return{eventName:"ai_meetings_tab_upcoming_meetings_event_start_transcribing_clicked",eventProperties:i};case"in_app_meeting_notification_upcoming_stage_start_transcribing":return{eventName:"in_app_meeting_notification_upcoming_stage_start_transcribing_clicked",eventProperties:{...i,is_sidebar_expanded:o,from:"primary_transcribe_button"}};case"in_app_meeting_notification_upcoming_stage_join_and_start_transcribing":return{eventName:"in_app_meeting_notification_upcoming_stage_start_transcribing_clicked",eventProperties:{...i,is_sidebar_expanded:o,from:"primary_join_and_transcribe_button"}};case"in_app_meeting_notification_upcoming_stage_start_transcribing_only":return{eventName:"in_app_meeting_notification_upcoming_stage_start_transcribing_clicked",eventProperties:{...i,is_sidebar_expanded:o,from:"dropdown_transcribe_only_button"}};default:return}}({from:n,environment:o,eventProperties:{calendar_event_id:t.id,has_existing_meeting_note:c}});s&&(0,i().u)({environment:o,event:s}),a&&(0,y().R)({environment:o,data:{type:"track",payload:{event:"meetingTranscriptionStarted",eventId:t.id,calendarId:t.calendarId,from:n,hasExistingNote:c}},botId:a})}function F(e){var t,n;const{event:o,from:a,environment:r,calendarBotId:c}=e,s=null===(t=o.conferencing)||void 0===t?void 0:t.providerName,d=function(e){const{from:t,environment:n,eventProperties:i}=e,o=(0,T().KB)(n);switch(t){case"upcoming_meetings":return{eventName:"ai_meetings_tab_upcoming_meetings_event_join_meeting_clicked",eventProperties:i};case"in_app_meeting_notification_upcoming_stage_join_and_transcribe":return{eventName:"in_app_meeting_notification_upcoming_stage_join_meeting_clicked",eventProperties:{...i,is_sidebar_expanded:o,from:"primary_join_and_transcribe_button"}};case"in_app_meeting_notification_upcoming_stage_join_meeting_only":return{eventName:"in_app_meeting_notification_upcoming_stage_join_meeting_clicked",eventProperties:{...i,is_sidebar_expanded:o,from:"dropdown_join_meeting_only_button"}};default:return}}({from:a,environment:r,eventProperties:{calendar_event_id:o.id,conferencing_provider:s}});d&&(0,i().u)({environment:r,event:d}),c&&(0,y().R)({environment:r,data:{type:"track",payload:{event:"joinMeeting",eventId:o.id,calendarId:o.calendarId,conferencingProvider:s,method:a}},botId:c}),null!==(n=o.conferencing)&&void 0!==n&&n.url&&(0,S().L)({environment:r,url:o.conferencing.url})}},402602:(e,t,n)=>{n.d(t,{V:()=>s,W:()=>c});var i=()=>n(907258),o=()=>n(59226),a=()=>n(242422),r=()=>n(590526);function c(){if(!a().default.checkGate({gateName:"meeting_notes_auto_share_setting"}))return!0;const e=i().default.state.sidebarSpaceViewStore,t=null==e?void 0:e.getSettings();return!((null==t?void 0:t.disable_auto_share_meeting_notes)??1)}function s(){const e=(0,o().X)("meeting_notes_auto_share_setting"),t=(0,r().O$)(i().AppStoreSidebarSpaceViewStore);return(0,r().K8)((()=>{if(!e)return!0;const n=null==t?void 0:t.getSettings();return!((null==n?void 0:n.disable_auto_share_meeting_notes)??1)}),[t,e])}},998992:(e,t,n)=>{n.d(t,{I:()=>o});var i=()=>n(907258);function o(e,t){if(function(e){return e===i().default.state.mainEditorCurrentBlockStore}(e)){const{RouterStore:e}=t,n=e.state.route;if("page"===n.name)return n.collectionViewId}}}}]);