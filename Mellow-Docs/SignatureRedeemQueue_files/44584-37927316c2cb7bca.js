"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[44584],{45313:(e,t,n)=>{n.d(t,{d:()=>s});n(296540);const a={viewBox:"0 0 20 20",fittedViewBox:"2.27 4.37 15.45 11.25",directional:!0,svg:(0,n(474848).jsx)("path",{d:"M2.9 4.375a.625.625 0 1 0 0 1.25h14.2a.625.625 0 1 0 0-1.25zm0 3.333a.625.625 0 0 0 0 1.25h9.457a.625.625 0 1 0 0-1.25zM2.275 15c0-.345.28-.625.625-.625h9.457a.625.625 0 1 1 0 1.25H2.9A.625.625 0 0 1 2.275 15m.625-3.958a.625.625 0 1 0 0 1.25h14.2a.625.625 0 0 0 0-1.25z"})},s=(0,n(340498).wt)("textAlignLeft",a,"default")},90244:(e,t,n)=>{n.d(t,{O:()=>i});n(296540);var a=n(474848);const s={viewBox:"0 0 20 20",fittedViewBox:"0.73 3.36 18.53 13.28",svg:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("path",{d:"M13.004 6.123a3.588 3.588 0 0 1 6.175.032.624.624 0 1 1-1.079.63 2.338 2.338 0 0 0-4.024-.02L9.264 14.8l3.682.596a.626.626 0 0 1-.2 1.235l-4.591-.744a.625.625 0 0 1-.436-.939zm-8.269 6.688a.625.625 0 1 1 0 1.25H1.36a.625.625 0 0 1 0-1.25zM6.079 9.53a.625.625 0 0 1 0 1.25H1.36a.625.625 0 0 1 0-1.25z"}),(0,a.jsx)("path",{d:"M14.146 8.918a1.061 1.061 0 1 1 2.095.34 1.061 1.061 0 0 1-2.095-.34m-5.59-.906a1.061 1.061 0 1 1 2.095.34 1.061 1.061 0 0 1-2.095-.34M5.235 6.249a.625.625 0 1 1 0 1.25H1.36a.625.625 0 0 1 0-1.25zm2.188-1.974a3.59 3.59 0 0 1 5.104.325.625.625 0 0 1-.944.82 2.34 2.34 0 0 0-3.326-.213.625.625 0 0 1-.834-.932"})]})},i=(0,n(340498).wt)("aiDescription",s,"default")},101078:(e,t,n)=>{n.d(t,{$R:()=>h,E4:()=>I,AV:()=>v,DW:()=>A});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(672577),n(581454),n(908872),n(737550);var a=()=>n(498212),s=()=>n(534177),i=()=>n(832443),o=()=>n(416845),r=()=>n(435386),d=()=>n(933528),c=()=>n(362750),l=()=>n(365646),u=()=>n(128424),m=()=>n(687249);const g=["numDatabasesCreated","numDatabasesEdited","numDatabasesDeleted","numViewsCreated","numPropertiesCreated","numPropertiesDeleted","numPagesCreated","numPagesEdited","numPagesDeleted","numFormsCreated","numFormulasUpdated"];function _(e){if("object"!=typeof(t=e)||null===t||Array.isArray(t))return!1;var t;let n=!1;for(const a of g){if(!(a in e))continue;n=!0;const t=e[a];if(void 0!==t&&"number"!=typeof t)return!1}return!!n}const p={numToolRun:0,numToolCalls:0,numUndoableToolRun:0,pageCreated:!1,pageEdited:!1,pageDeleted:!1,databaseCreated:!1,databaseEdited:!1,databaseDeleted:!1,numFormulasUpdated:0,numFormsCreated:0,numDatabasesCreated:0,numDatabasesEdited:0,numDatabasesDeleted:0,numViewsCreated:0,numPropertiesCreated:0,numPropertiesDeleted:0,numPagesCreated:0,numPagesEdited:0,numPagesDeleted:0,numToolStepsWithErrors:0,numErrorSteps:0,numUpsells:0};function f(e){var t,n,a,i;const{metrics:o,step:r}=e;if("agent-tool-result"!==r.type){if("agent-inference"!==r.type)"premium-feature-unavailable"!==r.type?"error"===r.type&&(o.numErrorSteps+=1):o.numUpsells+=1;else if(Array.isArray(r.value))for(const s of r.value)"tool_use"===s.type&&(o.numToolCalls+=1)}else{const e=(0,l().G1)(r);switch(o.numToolRun+=1,o.toolTypes.push(e.toolType),(0,s().Xk)(l().MV,e.toolType)&&(o.numUndoableToolRun+=1,o.undoableToolTypes.push(e.toolType)),e.error&&(o.numToolStepsWithErrors+=1),e.toolType){case"create-database":o.databaseCreated=!0,o.numFormulasUpdated+=(null===(t=e.result)||void 0===t?void 0:t.numFormulasUpdated)??0,o.numFormsCreated+=(null===(n=e.result)||void 0===n?void 0:n.numFormsCreated)??0;break;case"update-database":o.databaseEdited=!0,o.numFormulasUpdated+=(null===(a=e.result)||void 0===a?void 0:a.numFormulasUpdated)??0,o.numFormsCreated+=(null===(i=e.result)||void 0===i?void 0:i.numFormsCreated)??0;break;case"create-pages":o.pageCreated=!0;break;case"update-page":case"update-page-v2":o.pageEdited=!0;break;case"delete-pages":o.pageDeleted=!0}const d=e.result;_(d)&&(o.numDatabasesCreated+=d.numDatabasesCreated??0,o.numDatabasesEdited+=d.numDatabasesEdited??0,o.numDatabasesDeleted+=d.numDatabasesDeleted??0,o.numViewsCreated+=d.numViewsCreated??0,o.numPropertiesCreated+=d.numPropertiesCreated??0,o.numPropertiesDeleted+=d.numPropertiesDeleted??0,o.numPagesCreated+=d.numPagesCreated??0,o.numPagesEdited+=d.numPagesEdited??0,o.numPagesDeleted+=d.numPagesDeleted??0,(d.numPagesCreated??0)>0&&(o.pageCreated=!0),(d.numPagesEdited??0)>0&&(o.pageEdited=!0),(d.numPagesDeleted??0)>0&&(o.pageDeleted=!0),(d.numDatabasesCreated??0)>0&&(o.databaseCreated=!0),(d.numDatabasesEdited??0)>0&&(o.databaseEdited=!0),(d.numDatabasesDeleted??0)>0&&(o.databaseDeleted=!0))}}function h(e){const t={...p,toolTypes:[],undoableToolTypes:[]};if(!e)return t;for(const n of e)f({metrics:t,step:n});return t}function v(e){var t,n;const o=e.find((e=>"search"===e.type)),r="search"===(null==o?void 0:o.type)&&"results"in o?o.results:void 0,d=e.find((e=>"search-chat"===e.type)),c=r?(0,s().s8)(r,((e,t)=>(null==e?void 0:e.length)??0)):void 0,l=/\[\]\((.*?)\)/g,u=d?(null===(t=d.value.match(l))||void 0===t?void 0:t.length)??0:0,m=(null===(n=Array.from((null==d?void 0:d.value.matchAll(l))??[]))||void 0===n?void 0:n.map((e=>e[1])))??[],g=new Set;return{numCitations:u,citationsBySource:m.reduce(((e,t)=>{if((0,a().iv)(t))e.notion=(e.notion??0)+1,g.add(t);else{const n=i().tD.parseAssistantHref(t);if(n){const t=n.type;e[t]=(e[t]??0)+1}}return e}),{}),resultsBySource:c,maybeSearchStep:o,maybeSearchChatStep:d,citationPageIds:Array.from(g)}}function A(e,t){if(!e)return{numCitations:0,citationsByType:{},numResults:0,resultsByType:{},citationPageIds:[]};const n=(0,u().P)({transcript:e,domainBaseUrl:t.domainBaseUrl});let a=0,s=0;const i={},o={},r=new Set,d=/\[\^([^\]]+)\]/g;for(const c of e){if("agent-inference"===c.type){const e=y(c.value),s=Array.from(e.matchAll(d));a+=s.length;for(const a of s){const e=a[1];if(e){const{citationType:a,blockId:s}=S(e,t,n);s&&r.add(s),i[a]=(i[a]||0)+1}}}if("agent-tool-result"===c.type){const e=(0,l().G1)(c);if("search"===e.toolType&&e.result&&e.result.extractedResults)for(const t of e.result.extractedResults){const e=t.searchSourceType;s+=1,o[e]=(o[e]||0)+1}}}return{numCitations:a,citationsByType:i,numResults:s,resultsByType:o,citationPageIds:Array.from(r)}}function y(e){if("string"==typeof e)return e;return(0,c().lH)(e).filter((e=>"text"===e.type)).map((e=>e.content)).join(" ")}function S(e,t,n){const a=(0,r().w)({url:e,config:t});if(a)return{citationType:"block",blockId:a};const s=(0,m().cy)(e);if(s)return{citationType:s.type};const i=null==n?void 0:n[e];if(!i)return{citationType:"unknown"};const o=(0,d().f9)(i.id);return o?{citationType:o.type}:{citationType:"unknown"}}function I(e){const{stepsFromTurn:t,isError:n}=e;return t.some(k)?"payment_error":n||t.some(b)?"error":"success"}function k(e){return"premium-feature-unavailable"===e.type||"error"===e.type&&e.errorCode===o()._D_}function b(e){return"error"===e.type||("agent-debug-error"===e.type||"agent-tool-result"===e.type&&"applied:error"===(0,l().Gu)(e))}},128424:(e,t,n)=>{n.d(t,{P:()=>g});n(944114),n(581454);var a=()=>n(534177),s=()=>n(671593),i=()=>n(208685),o=()=>n(252050),r=()=>n(413113),d=()=>n(933528),c=()=>n(902006),l=()=>n(241178),u=()=>n(365646),m=()=>n(806551);function g(e){const{transcript:t,domainBaseUrl:n}=e,a={};return t.map((e=>{var t;if("agent-tool-result"!==(null==e?void 0:e.type)||!((0,u().gY)(e,"search")||(0,u().gY)(e,"queryCalendar")||(0,u().gY)(e,"queryMail")))return void("agent-tool-result"===(null==e?void 0:e.type)&&(0,u().gY)(e,"callFunction")&&function(e){var t,n;const{step:a,searchContext:i}=e;if("connections.search.autosearch"!==(null===(t=a.input)||void 0===t?void 0:t.function))return;const o=function(e){if("string"!=typeof e)return;let t;try{t=JSON.parse(e)}catch{return}const n=(0,s().Qq)(r().bS,t);if(!n)return;const a=[];for(const s of n.results)"string"==typeof s.url&&a.push({...s,url:s.url});return a}(null===(n=a.result)||void 0===n?void 0:n.output);if(!o)return;for(const s of o){const e=s.url;if(!e)continue;const t=_(s);t&&(i[e]=t)}}({step:e,searchContext:a}));const i=[...(null===(t=e.result)||void 0===t?void 0:t.extractedResults)??[],...(0,u().gY)(e,"search")?(0,m().S)(e.result??{}):[]];for(const s of i){let e,t;e="notion"===s.searchSourceType?{type:"block",blockId:(0,o().ew)(s.id)}:(0,d().f9)(s.id);try{t=(0,l().uf)({type:s.searchSourceType,baseUrl:n,citation:e})}catch(c){}t&&(a[t]=s)}})),a}function _(e){if((0,c().SC)(e.type)){const t={...e,type:e.type};return(0,i().v)(e.type).buildAgentSearchResultFromAutosearchResult(t)}switch(e.type){case"page":case"block":case"properties":return{searchSourceType:"notion",id:e.id,isUser:!1};case"webpage":return{searchSourceType:"webpage",id:e.id,title:e.title,lastEdited:e.lastEdited};case"helpdoc":return{searchSourceType:"helpdocs",id:e.id,title:e.title,path:e.path,lastEdited:e.lastEdited};case"helpdoc-section":return{searchSourceType:"helpdoc-section",id:e.id,title:e.title,path:e.path,lastEdited:e.lastEdited};default:(0,a().HB)(e.type)}}},158469:(e,t,n)=>{n.d(t,{f:()=>i});n(296540);var a=n(474848);const s={viewBox:"0 0 20 20",fittedViewBox:"2.62 2.62 15.26 15.26",svg:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("path",{d:"M8.387 5.933c.115-.523.861-.523.976 0l.202.918a1.75 1.75 0 0 0 1.334 1.334l.918.202c.523.115.523.861 0 .976l-.918.202a1.75 1.75 0 0 0-1.334 1.334l-.202.918c-.115.523-.861.523-.976 0l-.202-.918a1.75 1.75 0 0 0-1.334-1.334l-.918-.202c-.523-.115-.523-.861 0-.976l.918-.202a1.75 1.75 0 0 0 1.334-1.334z"}),(0,a.jsx)("path",{d:"M8.875 2.625a6.25 6.25 0 1 0 3.955 11.09l3.983 3.982a.625.625 0 1 0 .884-.884l-3.983-3.982a6.25 6.25 0 0 0-4.84-10.205m-5 6.25a5 5 0 1 1 10 0 5 5 0 0 1-10 0"})]})},i=(0,n(340498).wt)("sparkleMagnifyingGlass",s,"default")},200582:(e,t,n)=>{n.d(t,{m:()=>s});n(296540);const a={viewBox:"0 0 20 20",fittedViewBox:"4.62 1.77 10.75 15.98",svg:(0,n(474848).jsx)("path",{d:"M11.633 1.812c.263.096.43.354.41.632l-.392 5.51h3.099a.625.625 0 0 1 .506.992l-6.18 8.54a.625.625 0 0 1-1.13-.412l.402-5.5H5.25a.625.625 0 0 1-.507-.99l6.17-8.55a.625.625 0 0 1 .72-.222m-5.161 8.513H9.02a.625.625 0 0 1 .623.67l-.29 3.976 4.173-5.766H10.98a.625.625 0 0 1-.623-.67l.284-3.987z"})},s=(0,n(340498).wt)("lightning",a,"default")},469635:(e,t,n)=>{n.d(t,{t:()=>s});n(296540);const a={viewBox:"0 0 20 20",fittedViewBox:"2.27 7.7 15.45 4.59",svg:(0,n(474848).jsx)("path",{d:"M2.9 7.708a.625.625 0 0 0 0 1.25h14.2a.625.625 0 1 0 0-1.25zm0 3.334a.625.625 0 1 0 0 1.25h9.457a.625.625 0 0 0 0-1.25z"})},s=(0,n(340498).wt)("textShort",a,"default")},551222:(e,t,n)=>{n.d(t,{q:()=>s});n(296540);const a={viewBox:"0 0 20 20",fittedViewBox:"3.12 3.12 13.75 13.75",svg:(0,n(474848).jsx)("path",{d:"M13.125 4.25c0-.621.504-1.125 1.125-1.125h1.5c.621 0 1.125.504 1.125 1.125v11.5c0 .621-.504 1.125-1.125 1.125h-1.5a1.125 1.125 0 0 1-1.125-1.125zm1.25.125v11.25h1.25V4.375zm-6.25 6.375c0-.621.504-1.125 1.125-1.125h1.5c.621 0 1.125.504 1.125 1.125v5c0 .621-.504 1.125-1.125 1.125h-1.5a1.125 1.125 0 0 1-1.125-1.125zm1.25.125v4.75h1.25v-4.75zM4.25 5.625c-.621 0-1.125.504-1.125 1.125v9c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-9c0-.621-.504-1.125-1.125-1.125zm.125 10v-8.75h1.25v8.75z"})},s=(0,n(340498).wt)("chartBarXAxis",a,"default")},680209:(e,t,n)=>{n.d(t,{R:()=>i});n(296540);var a=n(474848);const s={viewBox:"0 0 20 20",fittedViewBox:"1 0.12 17.94 19.75",svg:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("path",{d:"M7.733.203a.626.626 0 0 1 .87.286l2.567 5.583 1.41.777 1.722-2.257a.55.55 0 0 1 .874.668l-1.624 2.125 3.87 2.135c.198.11.322.32.322.547v5.648a.63.63 0 0 1-.323.547l-6.408 3.535a.63.63 0 0 1-.604 0l-6.407-3.535a.63.63 0 0 1-.323-.547V10.58L1.054 4.534a.625.625 0 0 1 .271-.795zM4.929 15.346l5.232 2.887v-4.307L4.93 11.04zm6.332-1.42v4.307l5.233-2.887v-4.307zM5.519 10.11l5.192 2.864 5.192-2.864-3.117-1.72-1.75 2.295a.55.55 0 0 1-.875-.668l1.652-2.164-1.102-.608zM2.426 4.557l2.042 4.705 5.419-2.99-2.14-4.65zm14.706.177 1.364.314a.55.55 0 1 1-.248 1.071l-1.364-.314a.55.55 0 0 1 .248-1.071"}),(0,a.jsx)("path",{d:"M12.873 1.548a.55.55 0 0 1 .753.192l.684 1.15a.55.55 0 0 1-.946.561l-.683-1.149a.55.55 0 0 1 .192-.754m3.802-.041a.55.55 0 0 1 .889.649l-.871 1.193a.55.55 0 0 1-.89-.649z"})]})},i=(0,n(340498).wt)("boxOpenSparkle",s,"default")},806551:(e,t,n)=>{n.d(t,{S:()=>c});n(944114),n(581454);var a=()=>n(496603),s=()=>n(534177);function i(e){var t,n;return{score:e.score,cohereRelevanceScoreForRanking:null===(t=e.metadata)||void 0===t?void 0:t.cohereRelevanceScoreForRanking,isPrimarySource:null===(n=e.metadata)||void 0===n?void 0:n.isPrimarySource}}function o(e){return e?e.flat().map((e=>({searchSourceType:"webpage",id:e.id,title:e.title,score:e.score,lastEdited:e.lastEdited,...i(e)}))):[]}function r(e){if(!e)return[];const t=[];for(const n of e)for(const[e,a]of(0,s().WP)(n))if(a)if("notion"===e)for(const n of a)"page"!==n.result.type&&"properties"!==n.result.type&&"block"!==n.result.type||t.push({searchSourceType:"notion",id:n.result.id,score:n.result.score,isUser:!1,...i(n.result)});else if("webpage"===e)for(const n of a)"webpage"===n.result.type&&t.push({searchSourceType:"webpage",id:n.result.id,title:n.result.title,score:n.result.score,lastEdited:n.result.lastEdited,...i(n.result)});else if("slack"===e){for(const n of a)if("slack"===n.result.type){const e={searchSourceType:"slack",id:n.result.id,channel:n.result.channel,text:n.result.text,title:n.result.title,score:n.result.score,lastEdited:n.result.lastEdited,...i(n.result)};t.push(e),n.result.messages&&t.push(...n.result.messages.map((t=>({...e,id:t.messageId,text:t.text}))))}}else if("gmail"===e)for(const n of a)"gmail"===n.result.type&&t.push({searchSourceType:"gmail",id:n.result.id,title:n.result.title,path:n.result.path,lastEdited:n.result.lastEdited,score:n.result.score,...i(n.result)});else if("salesforce"===e)for(const n of a)"salesforce"===n.result.type&&t.push({searchSourceType:"salesforce",id:n.result.id,title:n.result.title,path:n.result.path,lastEdited:n.result.lastEdited,objectType:n.result.objectType??"",score:n.result.score,...i(n.result)});else for(const n of a)"page"!==n.result.type&&"properties"!==n.result.type&&"block"!==n.result.type&&"webpage"!==n.result.type&&"gmail"!==n.result.type&&"slack"!==n.result.type&&"salesforce"!==n.result.type&&t.push({searchSourceType:e,id:n.result.id,title:n.result.title,path:n.result.path,score:n.result.score,lastEdited:n.result.lastEdited,...i(n.result)});return t}function d(e){return e?e.flat().map((e=>({searchSourceType:"notion",id:e.id,score:void 0,isUser:!0}))):[]}function c(e){const{webResults:t,userResults:n,internalResults:s,defaultResults:i}=e,c=[...o(t),...r(s),...r(i),...d(n)];return a().hS(c,(e=>e.id))}},934257:(e,t,n)=>{n.d(t,{CN:()=>D,LG:()=>R,MY:()=>x});n(898992),n(354520),n(581454),n(737550);var a=()=>n(907258),s=()=>n(350013),i=()=>n(90244),o=()=>n(383567),r=()=>n(607567),d=()=>n(551222),c=()=>n(425940),l=()=>n(671089),u=(n(296540),n(474848));const m={viewBox:"0 0 20 20",svg:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("path",{d:"M8.04761 1.40332L8.29565 1.41797C9.5354 1.51917 10.7877 2.05748 11.5691 3.03418C12.4248 4.10414 12.576 5.59336 12.2527 6.84082C12.1648 7.17964 12.0368 7.51547 11.8699 7.83496C12.4573 7.95393 13.014 8.1496 13.5232 8.44336C14.1514 8.80586 14.6705 9.29599 15.0779 9.90723C15.4453 9.55352 15.8874 9.31134 16.3923 9.24805H16.3933C17.0674 9.16392 17.7001 9.43393 18.1248 9.95508C18.5282 10.4502 18.698 11.1051 18.698 11.79C18.698 12.8535 18.6409 14.7357 17.2517 16.2207C15.8442 17.7246 13.3476 18.5467 9.17065 18.2373C7.03585 18.0791 5.40971 17.5784 4.25854 16.792C3.08147 15.9878 2.43669 14.9037 2.28296 13.7256C2.05362 11.9659 2.93173 10.2243 4.21851 9.04883C3.75332 9.08904 3.22319 9.06701 2.60327 9.00293H2.60229C2.07328 8.94808 1.55858 8.78222 1.15112 8.47656L0.983154 8.33691C0.529882 7.91784 0.255671 7.2623 0.478271 6.55469C0.679436 5.91656 1.20941 5.4862 1.77222 5.2207C2.19407 5.0218 2.70477 4.87921 3.29761 4.79395C3.48184 4.15662 3.79961 3.54947 4.24194 3.01855C5.2426 1.81786 6.70976 1.35719 8.04761 1.40332Z",fill:"white",stroke:"white",strokeWidth:"1.2"}),(0,u.jsx)("path",{d:"M2.71145 7.95867C0.896282 7.771 0.784523 5.97447 4.07815 5.7696C4.79543 6.02556 6.62315 6.09221 5.94924 6.85552C5.10685 7.80966 4.8839 8.18328 2.71145 7.95867Z",fill:"white",stroke:"black",strokeWidth:"1"}),(0,u.jsx)("path",{d:"M9.24829 17.1903C1.14829 16.5903 2.64829 10.8903 5.94829 9.09026C3.84832 7.89022 3.66342 5.35224 5.04832 3.69029C6.54832 1.89022 9.54832 2.19024 10.7483 3.69024C11.9483 5.19024 11.3483 8.19021 9.24829 8.79026C12.2483 8.49026 14.3483 9.39026 14.9483 12.3903C15.5483 9.69026 17.6483 9.69019 17.6483 11.7902C17.6483 13.8902 17.3483 17.7903 9.24829 17.1903Z",fill:"#FFB110",stroke:"black",strokeWidth:"1",strokeLinejoin:"round"}),(0,u.jsx)("path",{d:"M5.76867 6.1671C5.52984 5.87387 5.90069 4.67884 6.46816 5.14099C7.11453 5.6674 6.37472 6.91121 5.76867 6.1671Z",fill:"black"})]})},g=(0,n(340498).wt)("duck",m,"default");var _=()=>n(876544),p=()=>n(170350),f=()=>n(212727),h=()=>n(200582),v=()=>n(594088),A=()=>n(105819),y=()=>n(158469),S=()=>n(824375),I=()=>n(45313),k=()=>n(469635),b=()=>n(877235),C=()=>n(42583),T=()=>n(421559),w=()=>n(534177),P=()=>n(299545);const z=(0,n(69708).YK)({search:{defaultMessage:"Search for anything",id:"AgentSuggestedActions.search"},analyzePdfsOrImages:{defaultMessage:"Analyze PDFs or images",id:"AgentSuggestedActions.analyzePdfsOrImages"},summarizeCurrentProjects:{defaultMessage:"Summarize my current projects",id:"AgentSuggestedActions.summarizeProjects"},planATrip:{defaultMessage:"Help me plan a trip",id:"AgentSuggestedActions.planATrip"},draftProjectPlan:{defaultMessage:"Draft a project plan",id:"AgentSuggestedActions.draftProjectPlan"},translateThisPage:{defaultMessage:"Translate this page",id:"AgentSuggestedActions.translateThisPage"},summarizeThisPage:{defaultMessage:"Summarize this page",id:"AgentSuggestedActions.summarizeThisPage"},findActionItems:{defaultMessage:"Find action items",id:"AgentSuggestedActions.findActionItems"},makeMoreConcise:{defaultMessage:"Make this page shorter",id:"AgentSuggestedActions.makeMoreConcise"},makeShorter:{defaultMessage:"Make shorter",id:"AgentSuggestedActions.makeShorter"},createTaskTracker:{defaultMessage:"Create a task tracker",id:"AgentSuggestedActions.createTaskTracker"},brainstormWritingIdeas:{defaultMessage:"Brainstorm writing ideas",id:"AgentSuggestedActions.brainstormWritingIdeas"},writeMeetingAgenda:{defaultMessage:"Write meeting agenda",id:"AgentSuggestedActions.writeMeetingAgenda"},analyzePageForInsights:{defaultMessage:"Analyze for insights",id:"AgentSuggestedActions.analyzeForInsights"},analyzeDataForInsights:{defaultMessage:"Analyze data for insights",id:"AgentSuggestedActions.analyzeDataForInsights"},createChart:{defaultMessage:"Create a chart",id:"AgentSuggestedActions.createChart"},filterAndSortData:{defaultMessage:"Filter and sort data",id:"AgentSuggestedActions.filterAndSortData"},helpMeSetUpThisDatabase:{defaultMessage:"Help me set up this database",id:"AgentSuggestedActions.helpMeSetUpThisDatabase"},generateSampleRows:{defaultMessage:"Generate sample rows",id:"AgentSuggestedActions.generateSampleRows"},createCustomAgent:{defaultMessage:"Create custom agent",id:"AgentSuggestedActions.createCustomAgent"},createDatabaseAgent:{defaultMessage:"Help me create a database autofill",id:"AgentSuggestedActions.createDatabaseAgent"},translateDatabaseAgent:{defaultMessage:"Help me create a database agent for translation",id:"AgentSuggestedActions.translateDatabaseAgent"},summarizeDatabaseAgent:{defaultMessage:"Help me create a database agent for summarization",id:"AgentSuggestedActions.summarizeDatabaseAgent"},helpCreateDatabaseAgentWithAi:{defaultMessage:"Help me fix my database agent",id:"AgentSuggestedActions.helpCreateDatabaseAgentWithAi"},addEmojiTriggerToSlack:{defaultMessage:"Add an emoji trigger to Slack",id:"AgentSuggestedActions.addEmojiTriggerToSlack"},scheduleRecurringReport:{defaultMessage:"Schedule a recurring report",id:"AgentSuggestedActions.scheduleRecurringReport"},helpMeUpdateInstructions:{defaultMessage:"Help me update instructions",id:"AgentSuggestedActions.helpMeUpdateInstructions"},updateAgentFromTemplate:{defaultMessage:"Update a newly duplicated agent from a template",id:"AgentSuggestedActions.updateAgentFromTemplate"},whatsNewInAgent:{defaultMessage:"Whatâ€™s new in Notion AI",id:"AgentSuggestedActions.whatsNewInAgent"},personalizeYourNotionAI:{defaultMessage:"Personalize your Notion AI",id:"AgentSuggestedActions.personalizeYourNotionAI"},summarizeDiscussions:{defaultMessage:"Summarize page comments",id:"AgentSuggestedActions.summarizeDiscussions"},improveWriting:{defaultMessage:"Improve writing",id:"AgentSuggestedActions.improveWriting"},fixSpellingGrammar:{defaultMessage:"Proofread",id:"AgentSuggestedActions.fixSpellingGrammar"},explainThis:{defaultMessage:"Explain",id:"AgentSuggestedActions.explainThis"},addSummary:{defaultMessage:"Add a summary",id:"AgentSuggestedActions.addSummary"},reformat:{defaultMessage:"Reformat",id:"AgentSuggestedActions.reformat"},continueWriting:{defaultMessage:"Continue writing",id:"AgentSuggestedActions.continueWriting"},generateImagePrompt:{defaultMessage:"Generate image",id:"AgentSuggestedActions.generateImagePrompt"},testCustomAgentTrigger:{defaultMessage:"Test this trigger",id:"AgentSuggestedActions.testCustomAgentTrigger"},updateCustomAgentWithMemories:{defaultMessage:"Update a custom agent with memories",id:"AgentSuggestedActions.updateCustomAgentWithMemories"},askAI:{defaultMessage:"Ask AI",id:"AgentSuggestedActions.askAI"}}),M={search:{message:z.search,icon:n(207207).magnifyingGlassIcon},summarize_current_projects:{message:z.summarizeCurrentProjects,icon:I().d},plan_a_trip:{message:z.planATrip,icon:c().a},draft_project_plan:{message:z.draftProjectPlan,icon:A().pencilLineIcon},translate:{message:z.translateThisPage,icon:b().textTranslateIcon},summarize:{message:z.summarizeThisPage,icon:I().d},add_action_items:{message:z.findActionItems,icon:c().a},brainstorm_ideas:{message:z.brainstormWritingIdeas,icon:S().sparklesIcon},make_more_concise:{message:z.makeMoreConcise,icon:A().pencilLineIcon},create_task_tracker:{message:z.createTaskTracker,icon:l().checkmarkCircleIcon},write_meeting_agenda:{message:z.writeMeetingAgenda,icon:i().O},analyze_page_for_insights:{message:z.analyzePageForInsights,icon:y().f},analyze_database_for_insights:{message:z.analyzeDataForInsights,icon:y().f},visualize_with_a_chart:{message:z.createChart,icon:d().q},filter_and_sort_data:{message:z.filterAndSortData,icon:p().filterIcon},help_me_set_up_this_database:{message:z.helpMeSetUpThisDatabase,icon:f().gearIcon},generate_sample_rows:{message:z.generateSampleRows,icon:v().A},create_custom_agent_from_modal:{message:z.createCustomAgent,icon:S().sparklesIcon},create_custom_agent:{message:z.createCustomAgent,icon:o().F},create_database_agent:{message:z.createDatabaseAgent,icon:f().gearIcon},translate_database_agent:{message:z.translateDatabaseAgent,icon:b().textTranslateIcon},summarize_database_agent:{message:z.summarizeDatabaseAgent,icon:I().d},help_create_database_agent_with_ai:{message:z.helpCreateDatabaseAgentWithAi,icon:f().gearIcon},add_emoji_trigger_to_slack:{message:z.addEmojiTriggerToSlack,icon:h().m},schedule_recurring_report:{message:z.scheduleRecurringReport,icon:d().q},help_me_update_instructions:{message:z.helpMeUpdateInstructions,icon:A().pencilLineIcon},update_agent_from_template:{message:z.updateAgentFromTemplate,icon:A().pencilLineIcon},update_agent_template_for_slack_task_triager:{message:z.updateAgentFromTemplate,icon:A().pencilLineIcon},update_agent_template_for_weekly_project_update:{message:z.updateAgentFromTemplate,icon:A().pencilLineIcon},whats_new_in_agent:{message:z.whatsNewInAgent,icon:n(680209).R},summarize_discussions:{message:z.summarizeDiscussions,icon:n(107620).y},improve_writing:{message:z.improveWriting,icon:n(116089).x,iconColor:"purple"},fix_spelling_grammar:{message:z.fixSpellingGrammar,icon:n(29037).checkmarkIcon,iconColor:"purple"},make_shorter:{message:z.makeShorter,icon:k().t,iconColor:"purple"},explain_this:{message:z.explainThis,icon:n(406533).questionMarkCircleIcon,iconColor:"green"},add_summary:{message:z.addSummary,icon:n(37719).P,iconColor:"purple"},continue_writing:{message:z.continueWriting,icon:A().pencilLineIcon,iconColor:"purple"},reformat:{message:z.reformat,icon:S().sparklesIcon,iconColor:"purple"},generate_image_prompt:{message:z.generateImagePrompt,icon:S().sparklesIcon},test_custom_agent:{message:z.testCustomAgentTrigger,icon:h().m,iconColor:"blue"},update_custom_agent_with_memories:{message:z.updateCustomAgentWithMemories,icon:A().pencilLineIcon,iconColor:"purple"},ask_ai:{message:z.askAI,icon:o().F}};function D(e){return M[e]}function x({store:e,hasCollectionContent:t,loadAttachmentData:n,handlePromptSubmit:i,intl:o,canShowPersonalizationSettingsModal:r,openFaceCustomizationModal:d,isAiLandingPage:c,enableWhatsNewEducationAction:l,enableCreateCustomAgentAction:u}){if(e instanceof s().N)return function({handlePromptSubmit:e,intl:t}){return[{message:z.addEmojiTriggerToSlack,icon:h().m,prebuiltPromptType:"add_emoji_trigger_to_slack"},{message:z.scheduleRecurringReport,icon:C().D,prebuiltPromptType:"schedule_recurring_report"},{message:z.helpMeUpdateInstructions,icon:A().pencilLineIcon,prebuiltPromptType:"help_me_update_instructions"}].map((({message:n,icon:a,prebuiltPromptType:s})=>{const i=t.formatMessage(n);return{type:s,suggestedAction:i,icon:a,handleClick:()=>e({text:i,prebuiltPromptType:s})}}))}({handlePromptSubmit:i,intl:o});const m=c?E:null!=e&&e.isCollectionView()?function({hasCollectionContent:e,enableCreateCustomAgentAction:t}){if(e)return["search","analyze_database_for_insights","visualize_with_a_chart","filter_and_sort_data"];if(t)return["create_custom_agent","search","help_me_set_up_this_database","generate_sample_rows"];return["search","load_attachment","help_me_set_up_this_database","generate_sample_rows"]}({hasCollectionContent:t,enableCreateCustomAgentAction:u}):function({pageStore:e,enableCreateCustomAgentAction:t}){if(function(e){if(void 0===e)return!1;return R(e)>0}(e))return["summarize","summarize_discussions","translate","create_task_tracker"];if(function(e){if(void 0===e||e.isType("personal_home_page"))return!1;const t=e.getContentStores();if(0===t.length)return!1;return t.some((e=>!e.isEmptyTitle()||e.hasContent()))}(e)){return["summarize","translate","analyze_page_for_insights","create_task_tracker"]}if(t)return["create_custom_agent","search","write_meeting_agenda","load_attachment"];return["search","write_meeting_agenda","load_attachment","create_task_tracker"]}({pageStore:e,enableCreateCustomAgentAction:u}),_=m.map((e=>{if("load_attachment"===e)return function({loadAttachmentData:e,intl:t}){return e?{type:"load_attachment",suggestedAction:t.formatMessage(z.analyzePdfsOrImages),icon:F(z.analyzePdfsOrImages),handleClick:()=>{e.uploadFiles()}}:void 0}({loadAttachmentData:n,intl:o});const{message:t,icon:a}=D(e),s=o.formatMessage(t);return{type:e,suggestedAction:s,icon:a,handleClick:()=>i({text:s,prebuiltPromptType:e}),isNew:N(e)}})).filter(w().O9);if(!c&&r&&d&&!function(){var e,t;const{sidebarSpaceViewStore:n}=a().default.state,s=null==n||null===(e=n.getSettings())||void 0===e?void 0:e.agent_personalization_settings;return Boolean((null==s?void 0:s.name)||(null==s||null===(t=s.customization_items)||void 0===t?void 0:t.length))}()&&_.length>0&&(_[0]={type:"change_my_look",suggestedAction:o.formatMessage(z.personalizeYourNotionAI),icon:g,handleClick:d,isNew:!0}),!c&&l&&_.length>0){const{message:e,icon:t}=D("whats_new_in_agent"),n=o.formatMessage(e),a={type:"whats_new_in_agent",suggestedAction:n,icon:t,handleClick:()=>i({text:n,prebuiltPromptType:"whats_new_in_agent"}),isNew:N("whats_new_in_agent")};_[_.length-1]=a}return _}const E=["whats_new_in_agent","write_meeting_agenda","load_attachment","create_task_tracker"];function N(e){switch(e){case"create_task_tracker":case"analyze_page_for_insights":case"analyze_database_for_insights":case"visualize_with_a_chart":case"filter_and_sort_data":case"help_me_set_up_this_database":case"generate_sample_rows":case"summarize_current_projects":case"plan_a_trip":case"draft_project_plan":case"whats_new_in_agent":case"summarize_discussions":case"create_custom_agent":return!0;case"make_shorter":case"search":case"summarize":case"translate":case"add_action_items":case"brainstorm_ideas":case"make_more_concise":case"write_meeting_agenda":case"load_attachment":case"create_custom_agent_from_modal":case"add_emoji_trigger_to_slack":case"schedule_recurring_report":case"help_me_update_instructions":case"update_agent_from_template":case"update_agent_template_for_slack_task_triager":case"update_agent_template_for_weekly_project_update":case"update_custom_agent_with_memories":case"improve_writing":case"fix_spelling_grammar":case"explain_this":case"add_summary":case"continue_writing":case"reformat":case"create_database_agent":case"translate_database_agent":case"summarize_database_agent":case"help_create_database_agent_with_ai":case"generate_image_prompt":case"test_custom_agent":case"ask_ai":return!1;default:(0,w().HB)(e)}}function R(e){if(void 0===e)return 0;return P().Bw(e,{recursivelyLoadAllDiscussions:!0}).filter((e=>!e.getResolved())).length}function F(e){switch(e.id){case"AgentSuggestedActions.analyzePdfsOrImages":return _().U;case"AgentSuggestedActions.summarizeThisPage":default:return I().d;case"AgentSuggestedActions.findActionItems":return c().a;case"AgentSuggestedActions.makeMoreConcise":case"AgentSuggestedActions.helpMeUpdateInstructions":return A().pencilLineIcon;case"AgentSuggestedActions.makeShorter":return k().t;case"AgentSuggestedActions.createTaskTracker":return l().checkmarkCircleIcon;case"AgentSuggestedActions.brainstormWritingIdeas":return S().sparklesIcon;case"AgentSuggestedActions.writeMeetingAgenda":return i().O;case"AgentSuggestedActions.analyzeDataForInsights":return y().f;case"AgentSuggestedActions.createChart":return d().q;case"AgentSuggestedActions.enrichWithWebSearch":return r().Z;case"AgentSuggestedActions.filterAndSortData":return p().filterIcon;case"AgentSuggestedActions.helpMeSetUpThisDatabase":return f().gearIcon;case"AgentSuggestedActions.generateSampleRows":return v().A;case"AgentSuggestedActions.customizeDatabaseViews":return T().T;case"AgentSuggestedActions.addEmojiTriggerToSlack":return h().m;case"AgentSuggestedActions.scheduleRecurringReport":return C().D}}},944584:(e,t,n)=>{n.r(t),n.d(t,{calculateMetricsFromTranscript:()=>z,getInferenceDataFromThreadId:()=>P,getInferenceIdFromThreadId:()=>T,getSessionAndInferenceIdsFromEnvironment:()=>C,getStepSummaries:()=>M,getThreadDraftTraceId:()=>w,trackAgentChatHistoryItemClicked:()=>ve,trackAgentClosed:()=>x,trackAgentEndTurn:()=>R,trackAgentFollowUpAction:()=>W,trackAgentOpened:()=>D,trackAgentPersonalizationAssetSelected:()=>oe,trackAgentPersonalizationChangeProfileClicked:()=>de,trackAgentPersonalizationExistingPageSelected:()=>le,trackAgentPersonalizationMarketplaceTemplateSelected:()=>me,trackAgentPersonalizationModalClosed:()=>_e,trackAgentPersonalizationModalOpened:()=>ie,trackAgentPersonalizationRemoveProfileClicked:()=>ue,trackAgentPersonalizationResetClicked:()=>ge,trackAgentPersonalizationSetupProfileClicked:()=>re,trackAgentPersonalizationTemplateSelected:()=>ce,trackAgentPrebuiltPromptShownToUser:()=>te,trackAgentQuickAccessTypingStarted:()=>ee,trackAgentRetryButtonClicked:()=>q,trackAgentSearchResultClicked:()=>Y,trackAgentSearchStepToggleResults:()=>G,trackAgentSlopeSidebarChatExpanded:()=>pe,trackAgentSlopeSidebarTabClicked:()=>fe,trackAgentStartTurn:()=>N,trackAgentTimeToRender:()=>E,trackAgentToggleChatMode:()=>se,trackAgentUserActionOnRiskyAttachments:()=>ae,trackAgentUserIntent:()=>ne,trackAiOpened:()=>Ae,trackAnswerCopied:()=>B,trackAttachFileOpened:()=>j,trackCitationClicked:()=>Q,trackConnectAppsClicked:()=>L,trackFollowUpButtonClicked:()=>J,trackFollowUpButtonsImpression:()=>$,trackGetHelpButtonImpression:()=>X,trackMentionAdded:()=>O,trackMentionMenuOpened:()=>H,trackMobileAgentAppPromoSheetDownloadClicked:()=>ye,trackPillsClicked:()=>U,trackSlipperySlopePreferenceToggled:()=>he,trackSourceMenuOpened:()=>F,trackThumbsUpDownClicked:()=>Z,trackToggleToolCard:()=>V,trackUndoClicked:()=>K});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(672577),n(581454);var a=()=>n(564884),s=()=>n(907258),i=()=>n(755531),o=()=>n(242422),r=()=>n(711339),d=()=>n(463086),c=()=>n(101078),l=()=>n(365646),u=()=>n(362750),m=()=>n(878456),g=()=>n(234459),_=()=>n(201980),p=()=>n(955104),f=()=>n(7331),h=()=>n(534177),v=()=>n(791256),A=()=>n(166442),y=()=>n(445560),S=()=>n(770160),I=()=>n(981475),k=()=>n(934257),b=()=>n(94522);function C(e){const{environment:t,maybeThreadId:n}=e,{RouterStore:a}=t;if(!(0,i().S)())return{aiSessionId:"unknown",aiInferenceId:"unknown",aiDraftInferenceId:"unknown",model:void 0,modelFromUser:void 0,searchSessionId:void 0};const s=a.state.route;let o;"chat"===s.name?o=s.threadId:"page"===s.name?o=s.chatThreadId:"nativeTab"===s.name&&"assistant"===s.tab&&(o=y().X.state.threadId);const r=void 0===o||o===S().NEW_CHAT_THREAD_ID?n:o;return r?P(r):{aiSessionId:"unknown",aiInferenceId:"unknown",aiDraftInferenceId:"unknown",model:void 0,modelFromUser:void 0,searchSessionId:void 0}}function T(e){return A().defaultClientAIChatStore.getOrCreateClientAIChatThreadStore(e).state.traceId??"unknown"}function w(e){return A().defaultClientAIChatStore.getOrCreateClientAIChatThreadStore(e).getOrCreateDraftTraceId()}function P(e){let t,n,a;const s=T(e),o=w(e);try{const r=(0,i().S)();if(!r)return{aiSessionId:e,aiInferenceId:s,aiDraftInferenceId:o,model:n,modelFromUser:a,searchSessionId:t};const c=d().E.createChildStore(r,{table:g().To,id:e,spaceId:r.id}),l=c.getTranscript().find((e=>"config"===e.type));if(t=(0,m().sQ)(null==l?void 0:l.value),"workflow"===(null==l?void 0:l.value.type)&&(a=Boolean(l.value.modelFromUser)),"workflow"===(null==l?void 0:l.value.type)&&l.value.modelFromUser){const e=(0,f().kD)(l.value);n=null==e?void 0:e.type}}catch(r){n=void 0,a=void 0,t=void 0}return{aiSessionId:e,aiInferenceId:s,aiDraftInferenceId:o,model:n,modelFromUser:a,searchSessionId:t}}function z(e){return(0,c().$R)(e)}function M(e){return e.map((e=>{if("agent-inference"===e.type){const t=[],n=(0,u().lH)(e.value);let a=!1;for(const e of n)"tool_use"===e.type||"registered_tool_use"===e.type?t.push(e.name):"text"===e.type&&(a=a||e.content.trim().length>0);return{type:"agent-inference",toolCalls:t,hasAgentOutput:a}}return"agent-tool-result"===e.type?{type:"agent-tool-result",toolType:e.toolType,state:(0,l().Gu)(e),hasError:Boolean(e.error)}:{type:e.type}}))}function D(e){const{leftNotionSidebarOpenState:t,from:n,environment:s,chatMode:i,threadId:o}=e,{aiSessionId:r,model:d}=C({environment:s});(0,a().u)({environment:s,event:{eventName:"agent_sidebar_toggle_visibility",eventProperties:{ai_session_id:o??r,from:n,state:"open",left_notion_sidebar_open_state:t,model:d,chat_mode:i??I().globalChatPanelRuntimeStore.state.chatPanelMode}}})}function x(e){var t;const{leftNotionSidebarOpenState:n,from:i,environment:o,threadId:r,chatMode:d}=e,{model:c}=C({environment:o});(0,a().u)({environment:o,event:{eventName:"agent_sidebar_toggle_visibility",eventProperties:{ai_session_id:r??"unknown",from:i,state:"closed",left_notion_sidebar_open_state:n,model:c,chat_mode:d??I().globalChatPanelRuntimeStore.state.chatPanelMode}}});((null===(t=s().default.state.currentUserSettingsStore)||void 0===t||null===(t=t.getSettings())||void 0===t?void 0:t.started_agent_chat_thread)??!1)||p().u4({name:"agent_close_without_starting_chat"})}function E(e){const{environment:t,metric:n,from:a,threadStore:s}=e,{aiSessionId:i,model:o}=C({environment:t});r().default.measure(n,{environment:t,data:{ai_session_id:i,from:a,thread_type:s?"existing_thread":"new_thread",model:o}})}function N(e){const{aiSessionId:t,aiInferenceId:n,model:s}=C({environment:e.environment,maybeThreadId:e.threadId}),i=(0,m().sQ)(e.config),o={ai_session_id:t,ai_inference_id:n,from:e.from,search_sources:e.searchSources,action_card_id:e.actionCardId,model:s,chat_mode:I().globalChatPanelRuntimeStore.state.chatPanelMode,is_custom_agent:e.isCustomAgent,is_database_agent:e.isDatabaseAgent,suggested_prompt:e.suggestedPrompt,is_retry:e.isRetry??!1,allow_edits_enabled:e.allowEditsEnabled,search_session_id:i,workflow_id:e.workflowId,has_mail_trigger:e.hasMailTrigger,mail_trigger_types:e.mailTriggerTypes,input_modality:e.inputModality};(0,a().u)({environment:e.environment,event:{eventName:"agent_start_turn",eventProperties:o}})}function R(e){const{aiSessionId:t,aiInferenceId:n,model:s,modelFromUser:i,searchSessionId:r}=C({environment:e.environment,maybeThreadId:e.threadId});let d;switch(e.from){case"writer":case"rich_text_menu":d=void 0;break;default:d=I().globalChatPanelRuntimeStore.state.chatPanelMode}const c=o().default.getEligibleGroup({experimentId:"ai_product_retention_agent_todos_v2"})??"none",l=Array.from(new Set(e.toolTypes));(0,a().u)({environment:e.environment,event:{eventName:"agent_end_turn",eventProperties:{ai_session_id:t,ai_inference_id:n,from:e.from,checklist_id:e.checklistId,checklist_step_id:e.checklistStepId,search_sources:e.searchSources,num_user_steps:e.numUserStepsInTranscript,num_tool_calls:e.numToolCalls,num_tool_run:e.numToolRun,num_tool_steps_with_errors:e.numToolStepsWithErrors,num_error_steps:e.numErrorSteps,num_upsells:e.numUpsells,tool_types:l,num_undoable_tool_run:e.numUndoableToolRun,undoable_tool_types:e.undoableToolTypes,page_created:e.pageCreated,page_edited:e.pageEdited,page_deleted:e.pageDeleted,database_created:e.databaseCreated,database_edited:e.databaseEdited,database_deleted:e.databaseDeleted,num_formulas_updated:e.numFormulasUpdated,num_forms_created:e.numFormsCreated,num_databases_created:e.numDatabasesCreated,num_databases_edited:e.numDatabasesEdited,num_databases_deleted:e.numDatabasesDeleted,num_views_created:e.numViewsCreated,num_properties_created:e.numPropertiesCreated,num_properties_deleted:e.numPropertiesDeleted,num_pages_created:e.numPagesCreated,num_pages_edited:e.numPagesEdited,num_pages_deleted:e.numPagesDeleted,num_citations:e.numCitations,citations_by_type:e.citationsByType,num_results:e.numResults,results_by_type:e.resultsByType,client_time_to_start_stream:e.clientTimeToStartStream,client_time_to_first_token:e.clientTimeToFirstToken,client_time_to_flush_ui_updates:e.clientTimeToFlushUiUpdates,client_total_turn_duration:e.clientTotalTurnDuration,search_session_id:r,model:s,default_model_used:!i,chat_mode:d,is_custom_agent:e.isCustomAgent,is_database_agent:e.isDatabaseAgent,cached_tokens_read:e.cachedTokensRead,num_user_prompt_characters:e.numUserPromptCharacters,num_user_prompt_words:e.numUserPromptWords,result:e.result,forcefully_stopped_by_user:e.forcefullyStoppedByUser,is_retry:e.isRetry??!1,allow_edits_enabled:e.allowEditsEnabled,follow_up_variation:e.followupVariation??"default",todos_group:c,context_selection:e.hasAnySelectionContext,context_page:e.hasAnyPageContext,prompt_key:e.promptKey,speculative_search_triggered:e.speculativeSearchTriggered??!1,speculative_search_results_used:e.speculativeSearchResultsUsed??!1}}}),3===e.numUserStepsInTranscript&&p().u4({name:"agent_third_turn_completed"})}function F(e){const{aiSessionId:t,model:n,aiDraftInferenceId:s}=e.inferenceInfo,i=e.model??n;(0,a().u)({environment:e.environment,event:{eventName:"agent_input_menu_button_click",eventProperties:{ai_session_id:t,ai_inference_id:s,button_name:e.button_name,from:e.from,model:i}}})}function U({environment:e,prompt:t,model:n,aiModule:s,inferenceInfo:i,blockStore:o}){const{aiSessionId:r,model:d,aiDraftInferenceId:c}=i,l=s?"ai_module":I().globalChatPanelRuntimeStore.state.chatPanelMode,u=n??d,{type:m}=t;if("string"===m||"text-value"===m){const n="string"===m?t.text:(0,_().q4_)(t.text??[]);(0,a().u)({environment:e,event:{eventName:"agent_pills_click",eventProperties:{ai_session_id:r,ai_inference_id:c,pill_text:n,model:u,chat_mode:l}}})}else"prebuilt-prompt"===m?(0,a().u)({environment:e,event:{eventName:"agent_pills_click",eventProperties:{ai_session_id:r,ai_inference_id:c,pill_text:t.text,prompt_type:t.promptType,model:u,chat_mode:l,..."summarize_discussions"===t.promptType?{num_discussions:(0,k().LG)(o)}:{}}}}):(0,h().HB)(m)}function j(e){const{aiSessionId:t,model:n,aiDraftInferenceId:s}=e.inferenceInfo,i=e.model??n;(0,a().u)({environment:e.environment,event:{eventName:"agent_input_menu_button_click",eventProperties:{ai_session_id:t,ai_inference_id:s,button_name:"attach_file",from:e.from,model:i}}})}function B(e){const{aiSessionId:t,aiInferenceId:n,model:s}=C({environment:e.environment});(0,a().u)({environment:e.environment,event:{eventName:"agent_copy_answer",eventProperties:{ai_session_id:t,ai_inference_id:n,model:s}}})}function W(e){(0,a().u)({environment:e.environment,event:{eventName:"clicked_ai_chat_follow_up",eventProperties:{thread_id:e.threadId,trace_id:T(e.threadId),mode:e.mode,action:e.action}}})}function H(e){const{aiSessionId:t,model:n,aiDraftInferenceId:s}=e.inferenceInfo,i=e.model??n;(0,a().u)({environment:e.environment,event:{eventName:"agent_input_menu_button_click",eventProperties:{ai_session_id:t,ai_inference_id:s,button_name:"mention_menu",from:e.from,model:i}}})}function O(e){const{aiSessionId:t,model:n,aiDraftInferenceId:s}=e.inferenceInfo,i=e.model??n;(0,a().u)({environment:e.environment,event:{eventName:"agent_input_menu_mention_added",eventProperties:{ai_session_id:t,ai_inference_id:s,mention_type:e.mention.table,model:i}}})}function L(e){const{aiSessionId:t,aiDraftInferenceId:n,model:s}=e.inferenceInfo;(0,a().u)({environment:e.environment,event:{eventName:"agent_connect_apps",eventProperties:{ai_session_id:t,ai_inference_id:n,from:e.from,model:s}}})}function V(e){const{aiSessionId:t,aiInferenceId:n,model:s}=C({environment:e.environment});(0,a().u)({environment:e.environment,event:{eventName:"agent_toggle_tool_card",eventProperties:{ai_session_id:t,ai_inference_id:n,step_id:e.stepId,show_results:e.showResults,from:e.from,tool_card_type:e.toolCardType,model:s,workflow_id:e.workflowId}}})}function G(e){const{environment:t,threadStore:n,traceId:s,showResults:i,from:o}=e,r=(0,v().L2)(n),d=(0,m().sQ)(r);(0,a().u)({environment:t,event:{eventName:"ai_search_step_toggle_results",eventProperties:{search_session_id:d,thread_id:n.id,show_results:i,trace_id:s,from:o,workflow_id:(0,b().i4)(n)}}})}function q(e){const{aiSessionId:t,aiInferenceId:n,model:s}=C({environment:e.environment});(0,a().u)({environment:e.environment,event:{eventName:"agent_retry_button_clicked",eventProperties:{ai_session_id:t,ai_inference_id:n,model:s,step_id:e.stepId,prompt_key:e.promptKey,has_undo:Boolean(e.hasUndo),undone_tool_types:e.undoneToolTypes??[]}}})}function Y(e){const{environment:t,threadStore:n,resultId:s,searchSourceType:i,source:o,position:r,traceId:d,stepId:c}=e,{aiSessionId:l,aiInferenceId:u,model:g}=C({environment:t,maybeThreadId:n.id}),_=(0,v().L2)(n),p={ai_session_id:l,ai_inference_id:u,clicked_result_id:s,source:o,search_source_type:i,model:g,position:r,trace_id:d,step_id:c,search_session_id:(0,m().sQ)(_)};(0,a().u)({environment:t,event:{eventName:"agent_result_clicked",eventProperties:p}})}function Q(e){const{aiSessionId:t,aiInferenceId:n,model:s,searchSessionId:i}=C({environment:e.environment}),o={ai_session_id:t,ai_inference_id:n,result_type:e.resultType,source:e.source,model:s,search_session_id:i,position:e.position};(0,a().u)({environment:e.environment,event:{eventName:"agent_click_citation",eventProperties:o}})}function Z(e){const{aiSessionId:t,aiInferenceId:n,model:s}=C({environment:e.environment,maybeThreadId:e.threadId});(0,a().u)({environment:e.environment,event:{eventName:"ai_feedback_given",eventProperties:{feature:e.feature??"agent",ai_session_id:t,ai_inference_id:n,sentiment:e.sentiment,model:s,prompt_key:e.promptKey}}})}function K(e){const{aiSessionId:t,aiInferenceId:n,model:s}=C({environment:e.environment});(0,a().u)({environment:e.environment,event:{eventName:"agent_undo",eventProperties:{ai_session_id:t,ai_inference_id:n,from:e.from,undone_tool_types:e.undoneToolTypes,num_tools_undone:e.undoneToolTypes.length,model:s}}})}function X(e){const{aiSessionId:t,aiInferenceId:n,model:s}=e.threadId?P(e.threadId):C({environment:e.environment});(0,a().u)({environment:e.environment,event:{eventName:"agent_get_help_button_impression",eventProperties:{ai_session_id:t,ai_inference_id:n,model:s}}})}function $(e){const t=e.threadId?P(e.threadId):C({environment:e.environment,maybeThreadId:e.threadId}),{aiSessionId:n,aiInferenceId:s}=t,i=e.aiInferenceId??s;(0,a().u)({environment:e.environment,event:{eventName:"agent_follow_up_buttons_impression",eventProperties:{ai_session_id:n,ai_inference_id:i,follow_up_count:e.followUpCount,variant:e.variant}}})}function J(e){const t=e.threadId?P(e.threadId):C({environment:e.environment,maybeThreadId:e.threadId}),{aiSessionId:n,aiInferenceId:s}=t,i=e.aiInferenceId??s;(0,a().u)({environment:e.environment,event:{eventName:"agent_follow_up_button_clicked",eventProperties:{ai_session_id:n,ai_inference_id:i,follow_up_count:e.followUpCount,follow_up_index:e.followUpIndex,variant:e.variant,option:e.option}}})}function ee(e){(0,a().u)({environment:e.environment,event:{eventName:"agent_quick_access_typing_started",eventProperties:{from:e.from}}})}function te(e){const{aiSessionId:t,aiDraftInferenceId:n}=e.inferenceInfo;(0,a().u)({environment:e.environment,event:{eventName:"agent_prebuilt_prompt_shown_to_user",eventProperties:{prompt_types:e.promptTypes,ai_session_id:t,ai_inference_id:n}}})}function ne(e){const{aiSessionId:t,aiInferenceId:n,model:s}=C({environment:e.environment});(0,a().u)({environment:e.environment,event:{eventName:"agent_user_intent",eventProperties:{ai_session_id:t,ai_inference_id:n,from:e.from,intent_type:e.intentType,model:s}}})}function ae(e){(0,a().u)({environment:e.environment,event:{eventName:"agent_user_action_on_risky_attachments",eventProperties:{action:e.action,num_files:e.numFiles,file_types:e.fileTypes}}})}function se(e){const{aiSessionId:t}=C({environment:e.environment});(0,a().u)({environment:e.environment,event:{eventName:"agent_toggle_chat_mode",eventProperties:{ai_session_id:t,chat_mode:e.chatMode}}})}function ie(e){(0,a().u)({environment:e.environment,event:{eventName:"agent_personalization_modal_opened",eventProperties:{customization_session_id:e.customizationSessionId,from:e.from}}})}function oe(e){(0,a().u)({environment:e.environment,event:{eventName:"agent_personalization_asset_selected",eventProperties:{customization_session_id:e.customizationSessionId,asset_type:e.assetType,is_selected:e.isSelected}}})}function re(e){(0,a().u)({environment:e.environment,event:{eventName:"agent_personalization_setup_profile_clicked",eventProperties:{customization_session_id:e.customizationSessionId}}})}function de(e){(0,a().u)({environment:e.environment,event:{eventName:"agent_personalization_change_profile_clicked",eventProperties:{customization_session_id:e.customizationSessionId}}})}function ce(e){(0,a().u)({environment:e.environment,event:{eventName:"agent_personalization_template_selected",eventProperties:{customization_session_id:e.customizationSessionId,default_template_name:e.templateName}}})}function le(e){(0,a().u)({environment:e.environment,event:{eventName:"agent_personalization_existing_page_selected",eventProperties:{customization_session_id:e.customizationSessionId,page_id:e.pageId,is_from_recently_used:e.isFromRecentlyUsed}}})}function ue(e){(0,a().u)({environment:e.environment,event:{eventName:"agent_personalization_remove_profile_clicked",eventProperties:{customization_session_id:e.customizationSessionId}}})}function me(e){(0,a().u)({environment:e.environment,event:{eventName:"agent_personalization_marketplace_template_selected",eventProperties:{customization_session_id:e.customizationSessionId,template_id:e.templateId}}})}function ge(e){(0,a().u)({environment:e.environment,event:{eventName:"agent_personalization_reset_clicked",eventProperties:{customization_session_id:e.customizationSessionId}}})}function _e(e){(0,a().u)({environment:e.environment,event:{eventName:"agent_personalization_modal_closed",eventProperties:{customization_session_id:e.customizationSessionId,custom_name_is_set:e.customNameIsSet,selected_accessory:e.selectedAccessory,profile_page_id:e.profilePageId}}})}function pe(e){(0,a().u)({environment:e.environment,event:{eventName:"agent_slope_sidebar_chat_expanded",eventProperties:{trigger_variant:e.triggerVariant}}})}function fe(e){(0,a().u)({environment:e.environment,event:{eventName:"agent_slope_sidebar_tab_clicked",eventProperties:{tab:e.tab}}})}function he(e){(0,a().u)({environment:e.environment,event:{eventName:"slippery_slope_preference_toggled",eventProperties:{slippery_slope_enabled:e.slipperySlopeEnabled,from:e.from}}})}function ve(e){(0,a().u)({environment:e.environment,event:{eventName:"agent_chat_history_item_clicked",eventProperties:{ai_session_id:e.threadId,from:e.from,model:e.model,chat_mode:I().globalChatPanelRuntimeStore.state.chatPanelMode}}})}function Ae(e){(0,a().u)({environment:e.environment,event:{eventName:"ai_opened",eventProperties:{agent_enabled:e.agentEnabled,surface:e.surface,corner_surface:e.cornerSurface}}})}function ye(e){(0,a().u)({environment:e.environment,event:{eventName:"agent_mobile_app_promo_sheet_download_clicked",eventProperties:{}}})}}}]);