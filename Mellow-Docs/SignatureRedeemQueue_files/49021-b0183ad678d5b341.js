"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[49021],{216296:(e,t,n)=>{n.r(t),n.d(t,{circleIcon:()=>o,iconDefinition:()=>i});n(296540);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.26 15.25",svg:(0,n(474848).jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})},o=(0,n(340498).wt)("circle",i,"default")},649021:(e,t,n)=>{n.d(t,{AD:()=>T,dh:()=>m,gw:()=>f});n(944114),n(898992),n(823215),n(354520),n(581454);var i=()=>n(906745),o=()=>n(907258),r=()=>n(295633),s=()=>n(416504),a=()=>n(192359),l=()=>n(743444),c=()=>n(684475),d=()=>n(833733);const u=i().dw.fromObject({hours:6}),v=i().dw.fromObject({hours:24});function m(e){const{spaceStore:t,events:n}=e,i=c().Ku.getLastEvaluatedNow(),o=(0,s().P)(),a=i.minus(u),d=i.plus(v),m={};for(const s of n){const e=(0,l().S6)(s,o),n=(0,l().JF)(s,o);if(!(e<a||n>d))for(const i of s.blockAttachments??[])m[s.id]??={event:s,transcriptionBlockStores:[]},m[s.id].transcriptionBlockStores.push(r().B.createChildStore(t,i))}return m}function T(){const e=o().AppStoreSidebarSpaceStore.state;if(!e)return{};const t=m({spaceStore:e,events:d().w.getState()}),n={};for(const i in t){const e=t[i];n[i]=f(e)}return n}function f(e){const{event:t,transcriptionBlockStores:n}=e;if(0===n.length)return{primaryTranscriptionBlockStore:void 0,lastTranscriptionState:void 0,reason:"NO_ALIVE_TRANSCRIPTION_BLOCKS"};if(!function(e){return e.every((e=>e.isReady()))}(n))return{primaryTranscriptionBlockStore:void 0,lastTranscriptionState:void 0,reason:"LOADING"};const i=function(e){return e.filter((e=>e.isTranscriptionBlock()&&e.canEdit()&&!e.pathIsDead()))}(n);if(0===i.length)return{primaryTranscriptionBlockStore:void 0,lastTranscriptionState:void 0,reason:"NO_ALIVE_TRANSCRIPTION_BLOCKS"};if(1===i.length){const e=i[0],t=(0,a().u7)(e);return void 0===t?{primaryTranscriptionBlockStore:void 0,lastTranscriptionState:void 0,reason:"ERR_NO_LAST_TRANSCRIPTION_STATE"}:{primaryTranscriptionBlockStore:e,lastTranscriptionState:t,liveTranscriptionBlockStores:i,reason:"ONLY_ONE_TRANSCRIPTION_BLOCK"}}const o=function(e){return e.filter((e=>"transcribing"===(0,a().by)(e).state))}(n);if(1===o.length){const e=o[0],t=(0,a().u7)(e);return void 0===t?{primaryTranscriptionBlockStore:void 0,lastTranscriptionState:void 0,reason:"ERR_NO_LAST_TRANSCRIPTION_STATE"}:{primaryTranscriptionBlockStore:e,lastTranscriptionState:t,liveTranscriptionBlockStores:i,reason:"ACTIVE_TRANSCRIBING"}}const r=0===o.length?i:o;if(!function(e){return e.every((e=>e.getPermissionItemsStore().isReady()))}(r))return{primaryTranscriptionBlockStore:void 0,lastTranscriptionState:void 0,reason:"LOADING"};const s=function(e,t){var n,i;const o=null===(n=t.attendees)||void 0===n?void 0:n.map((e=>e.notionUserId)).filter((e=>void 0!==e));let r;for(const l of e){var s;let e=0;for(const n of o??[])l.getUserPermissionForId(n)&&e++;const t=(null===(s=r)||void 0===s?void 0:s.overlappingPermissions)??0;var a;e!==t?e>t&&(r={stores:[l],overlappingPermissions:e}):(r??={stores:[],overlappingPermissions:e},null===(a=r)||void 0===a||a.stores.push(l))}return(null===(i=r)||void 0===i?void 0:i.stores)??[]}(r,t);if(1===s.length){const e=s[0],t=(0,a().u7)(e);return void 0===t?{primaryTranscriptionBlockStore:void 0,lastTranscriptionState:void 0,reason:"ERR_NO_LAST_TRANSCRIPTION_STATE"}:{primaryTranscriptionBlockStore:e,lastTranscriptionState:t,liveTranscriptionBlockStores:i,reason:"MOST_PERMISSIVE"}}const l=function(e){var t;let n;for(const r of e){var i,o;const e=null===(i=r.getModel())||void 0===i?void 0:i.getCreatedTime();void 0!==e&&(e>((null===(o=n)||void 0===o?void 0:o.createdTime)??0)&&(n={blockStore:r,createdTime:e}))}return null===(t=n)||void 0===t?void 0:t.blockStore}(r);if(void 0===l)return{primaryTranscriptionBlockStore:void 0,lastTranscriptionState:void 0,reason:"NO_ALIVE_TRANSCRIPTION_BLOCKS"};const c=l,d=(0,a().u7)(c);return void 0===d?{primaryTranscriptionBlockStore:void 0,lastTranscriptionState:void 0,reason:"ERR_NO_LAST_TRANSCRIPTION_STATE"}:{primaryTranscriptionBlockStore:c,lastTranscriptionState:d,liveTranscriptionBlockStores:i,reason:"MOST_RECENT"}}},684475:(e,t,n)=>{n.d(t,{Ku:()=>c});n(18107),n(944114);var i=()=>n(906745),o=()=>n(20022),r=()=>n(165358);const s={START:[-10,-5,-4,-3,-2,-1,0,5,10],END:[0,1]},a=30*n(615234).TD;class l extends(()=>n(769985))().u{constructor(e){const t=()=>{var e;null===(e=this.clearNextTickTimeout)||void 0===e||e.call(this),this.clearNextTickTimeout=void 0,this.maybeScheduleNextTick()};super({getInitialState:()=>({lastEvaluatedNowMillis:Date.now()}),effect:()=>(this.clearNextTickTimeout||this.maybeScheduleNextTick(),this.calendarMeetingsStore.addListener(t),()=>{this.listenerCount()>0||(this.calendarMeetingsStore.removeListener(t),this.clearNextTickTimeout&&(this.clearNextTickTimeout(),this.clearNextTickTimeout=void 0))})}),this.clearNextTickTimeout=void 0,this.stalledActiveTabTimeoutCount=0,this.activeTabTimeoutCount=0,this.lastLoggedTimerSuccessTime=0,this.calendarMeetingsStore=e}getLastEvaluatedNow(){return i().DateTime.fromMillis(this.getState().lastEvaluatedNowMillis)}maybeScheduleNextTick(){this.clearNextTickTimeout||0!==this.listenerCount()&&0!==this.calendarMeetingsStore.getState().length&&this.scheduleNextTick()}scheduleNextTick(){const e=this.calendarMeetingsStore.getState(),t=i().DateTime.now();let n;for(const r of e){const e=[{anchorTime:r.start.dateTime,offsets:s.START},{anchorTime:r.end.dateTime,offsets:s.END}];for(const{anchorTime:o,offsets:r}of e)for(const e of r){const r=i().DateTime.fromISO(o).plus({minutes:e});r<t||(n??=r,n.diff(r).as("seconds")>=0&&(n=r))}}if(!n)return;const o=n.diff(i().DateTime.now()).as("milliseconds");this.clearNextTickTimeout=this.setTimeoutWithThrottlingObserver((()=>{this.clearNextTickTimeout=void 0,this.setState({lastEvaluatedNowMillis:i().DateTime.now().toMillis()}),this.maybeScheduleNextTick()}),o)}setTimeoutWithThrottlingObserver(e,t){if(null===o().Ht||void 0===o().Ht||!o().Ht.powerSuspend||null===o().Ht||void 0===o().Ht||!o().Ht.powerResume){const n=setTimeout((()=>{e()}),t);return()=>{clearTimeout(n)}}const s=[],l=[],c=[],d=i().DateTime.now();!function({timeoutStart:e,cleanupFns:t,visibilityHistory:n}){n.push({timestamp:0,visibility:document.visibilityState});const o=()=>{n.push({timestamp:i().DateTime.now().diff(e).toMillis(),visibility:document.visibilityState})};document.addEventListener("visibilitychange",o),t.push((()=>{document.removeEventListener("visibilitychange",o)}))}({timeoutStart:d,visibilityHistory:c,cleanupFns:s}),function({timeoutStart:e,cleanupFns:t,powerEventHistory:n}){const r=()=>{n.push({timestamp:i().DateTime.now().diff(e).toMillis(),powerEvent:"suspend"})},s=()=>{n.push({timestamp:i().DateTime.now().diff(e).toMillis(),powerEvent:"resume"})};var a,l,c,d;null!==o().Ht&&void 0!==o().Ht&&o().Ht.powerSuspend&&t.push(null===(a=(l=o().Ht.powerSuspend).addListener)||void 0===a?void 0:a.call(l,r));null!==o().Ht&&void 0!==o().Ht&&o().Ht.powerResume&&t.push(null===(c=(d=o().Ht.powerResume).addListener)||void 0===c?void 0:c.call(d,s))}({timeoutStart:d,powerEventHistory:l,cleanupFns:s});const u=i().DateTime.now().plus({milliseconds:t}),v=setTimeout((async()=>{const o=i().DateTime.now();if(e(),!n(92697).A.state.isActiveTab)return void s.forEach((e=>null==e?void 0:e()));this.activeTabTimeoutCount++;const v=[...c],m=[...l];await n(763824).wR(1e3),s.forEach((e=>null==e?void 0:e()));const T=l.at(-1),f=o.diff(d);if("resume"===(null==T?void 0:T.powerEvent)&&T.timestamp>f.minus({seconds:30}).toMillis())return;const p=o.diff(u).as("milliseconds"),h={documentVisibilityState:document.visibilityState,miscDataToConvertToString:{timeSinceExpectedExecutionTime:p,expectedExecutionTime:t,actualExecutionTime:f,visibilityHistory:v,powerEventHistory:m,stalledActiveTabTimeoutCount:this.stalledActiveTabTimeoutCount,activeTabTimeoutCount:this.activeTabTimeoutCount,stalledTimerRate:this.activeTabTimeoutCount>0?this.stalledActiveTabTimeoutCount/this.activeTabTimeoutCount:0}};p>a?(this.stalledActiveTabTimeoutCount++,r().log({level:"warning",from:"CalendarEventTickerStore",type:"timerStalled",data:h})):this.lastLoggedTimerSuccessTime<i().DateTime.now().minus({minutes:30}).toMillis()&&(this.lastLoggedTimerSuccessTime=i().DateTime.now().toMillis(),r().log({level:"info",from:"CalendarEventTickerStore",type:"timerSuccess",data:h}))}),t);return()=>{clearTimeout(v),s.forEach((e=>null==e?void 0:e()))}}}const c=new l(n(833733).w);(0,n(852832).exposeDebugValue)("CalendarEventTickerStore",c)},705295:(e,t,n)=>{n.d(t,{zP:()=>c,J4:()=>m,En:()=>v});var i=()=>n(907258),o=()=>n(675133);n(296540);const r={viewBox:"0 0 20 20",fittedViewBox:"2.05 2.53 15.65 15.64",svg:(0,n(474848).jsx)("path",{d:"M6.421 3.657a.55.55 0 0 1 .776.06l.222.258.012.017 8.777 10.24a.55.55 0 0 1-.847.701l-1.167-1.361-1.37 3.56c-.536 1.392-2.506 1.387-3.035-.008l-1.616-4.26c-.14-.368-.43-.66-.797-.8l-4.268-1.618c-1.395-.53-1.398-2.501-.006-3.036l4.37-1.681-1.11-1.296a.55.55 0 0 1 .059-.776M3.55 8.577a.375.375 0 0 0 .002.7l4.267 1.619a2.63 2.63 0 0 1 1.523 1.523l1.615 4.262a.375.375 0 0 0 .701.002l1.613-4.19-4.935-5.756zm11.942-5.931c1.314-.505 2.605.787 2.1 2.1l-2.5 6.492-.924-1.078 2.257-5.862a.375.375 0 0 0-.485-.484l-5.425 2.084L9.65 4.89z"})},s=(0,n(340498).wt)("pointerSlash",r,"default");var a=()=>n(534177);const l=(0,n(69708).YK)({allDayEvents:{id:"NotionCalendarSettingsContent.allDayEvents",defaultMessage:"All-day events"},eventsWithoutParticipants:{id:"NotionCalendarSettingsContent.eventsWithoutParticipants",defaultMessage:"Events without participants"},eventsWithoutLocation:{id:"NotionCalendarSettingsContent.eventsWithoutLocation",defaultMessage:"Events without conferencing / location"}}),c={all_day_events:{title:o().A.formatMessage(l.allDayEvents),icon:n(216296).circleIcon},events_without_participants:{title:o().A.formatMessage(l.eventsWithoutParticipants),icon:n(122406).e},events_without_location:{title:o().A.formatMessage(l.eventsWithoutLocation),icon:s}},d={all_day_events:!0,events_without_participants:!0,events_without_location:!0},u={all_day_events:!1,events_without_participants:!0,events_without_location:!0};function v(e,t){const{sidebarSpaceViewStore:n}=i().default.state;switch(t){case"personal_home":return(null==n?void 0:n.getHomeCalendarFilter(e))??d[e];case"upcoming_meetings":return(null==n?void 0:n.getUpcomingMeetingsEventFilter(e))??u[e];default:(0,a().HB)(t)}}function m({event:e,eventFilters:t}){return(!1!==t.all_day_events||!e.isAllDay)&&(!(!1===t.events_without_participants&&!e.hasParticipants)&&!(!1===t.events_without_location&&!e.hasConferencingOrLocation))}},743444:(e,t,n)=>{n.d(t,{b7:()=>w,gM:()=>M,JF:()=>N,SG:()=>h,ft:()=>R,S6:()=>_,xG:()=>A,g2:()=>C,FC:()=>O,$z:()=>D,IC:()=>S});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(672577),n(803949),n(581454);var i=()=>n(906745);n(16280);class o{get length(){return this.orderedKeys.length}constructor(e,t){if(this.orderedKeys=void 0,this.keysToValues=void 0,!e&&!t)return this.orderedKeys=[],void(this.keysToValues={});if(!e||!t)throw new Error("Missing values or keyGetter in OrderedMap constructor");this.orderedKeys=e.map(t),this.keysToValues={};for(const n of e)this.keysToValues[t(n)]=n}append(e,t,{keepOrdering:n}={keepOrdering:!1}){if(e in this.keysToValues){if(this.keysToValues[e]=t,n)return;this.orderedKeys=[...this.orderedKeys.filter((t=>t!==e)),e]}else this.orderedKeys.push(e),this.keysToValues[e]=t}delete(e){this.orderedKeys=this.orderedKeys.filter((t=>t!==e)),delete this.keysToValues[e]}get(e){return this.keysToValues[e]}getOrderedValues(){return this.orderedKeys.map((e=>this.keysToValues[e]))}hasKey(e){return e in this.keysToValues}toJSON(){return this.orderedKeys.map((e=>[e,this.keysToValues[e]]))}static fromJSON(e){const t=new o;return t.orderedKeys=e.map((([e])=>e)),t.keysToValues=Object.fromEntries(e),t}}var r=()=>n(165358),s=()=>n(798880),a=()=>n(100622),l=()=>n(496603),c=()=>n(534177),d=()=>n(488776),u=()=>n(569243),v=()=>n(705295),m=()=>n(812109),T=()=>n(606982),f=()=>n(823115);function p(e){if(e.isAllDay){const{date:t}=e.start;return(0,f().V$)(t,"UTC")}{const{dateTime:t}=e.start;return i().DateTime.fromISO(t,{zone:"UTC"})}}function h(e){if("object"==typeof e&&null!==e&&"enqueuedAt"in e&&"number"==typeof e.enqueuedAt)return e.enqueuedAt}function S({botId:e,accounts:t,calendars:n,events:i,emailToUserId:r,transcriptionBlockPointersByEventUId:s,timeMin:a,timeMax:l}){const c=new o(n.map(y),m().N);return{botId:e,accounts:t,calendars:c.getOrderedValues(),events:g({events:i,emailToUserId:r,transcriptionBlockPointersByEventUId:s}).sort(w(c.getOrderedValues())),timeMin:a,timeMax:l,lastSeenReasonEnqueuedAt:{}}}function y(e){return{...e,color:(0,u().Pf)({color:e.color,colorId:e.colorId,colorType:"calendar"}),colorId:void 0,primary:e.primary}}function g(e){const{events:t,emailToUserId:n,transcriptionBlockPointersByEventUId:o}=e;return t.map((e=>function(e){var t,n,o,s,a,l;const{event:c,emailToUserId:d,transcriptionBlockPointers:v}=e;let m;const T=I(null===(t=c.start)||void 0===t?void 0:t.timeZone),p=I(null===(n=c.end)||void 0===n?void 0:n.timeZone),h=(null===(o=c.start)||void 0===o?void 0:o.date)??(null===(s=c.start)||void 0===s?void 0:s.dateTime)??void 0,S=(null===(a=c.end)||void 0===a?void 0:a.date)??(null===(l=c.end)||void 0===l?void 0:l.dateTime)??void 0;if(!h||!S)return;const y=()=>{r().log({level:"error",from:"toHydratedEvent",type:"invalidDate",data:{miscDataToConvertToString:{accountId:c.accountId,calendarId:c.calendarId,eventId:c.id,start:h,end:S}}})};if(c.isAllDay){let e,t;try{e=(0,f().J_)(h,T||"UTC"),t=(0,f().J_)(S,T||"UTC")}catch(g){return void y()}m={isAllDay:!0,start:{date:e},end:{date:t}}}else{const e=i().DateTime.fromISO(h,{zone:T}),t=i().DateTime.fromISO(S,{zone:p});if(!e.isValid||!t.isValid)return void y();m={isAllDay:!1,start:{dateTime:h,timeZone:T},end:{dateTime:S,timeZone:p}}}return{...c,...m,attendees:E({emailToUserId:d,attendees:c.attendees}),blockAttachments:v,color:(0,u().Pf)({colorId:c.colorId,colorType:"event"})}}({event:e,emailToUserId:n,transcriptionBlockPointers:null==o?void 0:o[e.uid]}))).filter(c().O9)}function I(e){if(e)return i().R2.normalizeZone(e).isValid?e:void 0}function E(e){const{emailToUserId:t,attendees:n}=e;if(!n)return;const i=e=>e?null==t?void 0:t.get(e):void 0,o=[],r=new Set,s=new Set;for(const a of n)a.groupMembers?a.groupMembers.forEach((e=>s.add(e))):(a.email&&r.add(a.email),o.push({...a,notionUserId:i(a.email)}));for(const a of s)r.has(a)||o.push({email:a,notionUserId:i(a),responseStatus:"unknown"});return o}function D({events:e,updatedCalendarAndAccountIds:t,newEvents:n,calendars:i}){const o=new Set(t.map(m().N));return function(e,t,n){const i=[];let o=0,r=0;for(;o<e.length&&r<t.length;){n(e[o],t[r])<=0?(i.push(e[o]),o++):(i.push(t[r]),r++)}o<e.length?i.push(...e.slice(o)):r<t.length&&i.push(...t.slice(r));return i}(e.filter((e=>!o.has((0,m().N)(e)))),[...n].sort(w(i)),w(i))}function w(e){const t=t=>e.find((e=>e.id===t.calendarId&&e.accountId===t.accountId));return(e,n)=>function({aCalendar:e,aEvent:t,aStartTimeOverride:n,bCalendar:i,bEvent:o,bStartTimeOverride:r}){let s=n,a=r;if(!s&&t.start&&(s=p(t)),!a&&o.start&&(a=p(o)),!s)return 1;if(!a)return-1;let l=(0,T().A)(s.toMillis(),a.toMillis());if(0===l){var c,d;const n=Boolean(null==e?void 0:e.primary),r=Boolean(null==i?void 0:i.primary),s=Boolean(null===(c=t.conferencing)||void 0===c?void 0:c.providerName),a=Boolean(t.hasParticipants),u=s&&a,v=Boolean(null===(d=o.conferencing)||void 0===d?void 0:d.providerName),m=Boolean(o.hasParticipants),T=v&&m,f="accepted"===t.responseStatus,p="accepted"===o.responseStatus,h="needsAction"===t.responseStatus,S="needsAction"===o.responseStatus,y="tentative"===t.responseStatus,g="tentative"===o.responseStatus;n&&!r?l=-1:r&&!n?l=1:u&&!T?l=-1:T&&!u?l=1:s&&!v?l=-1:v&&!s?l=1:a&&!m?l=-1:m&&!a?l=1:f&&!p?l=-1:p&&!f?l=1:!h||p||S?!S||f||h?y&&!(p||S||g)?l=-1:g&&!(f||h||y)&&(l=1):l=1:l=-1}return l}({aEvent:e,bEvent:n,aCalendar:t(e),bCalendar:t(n)})}function k(e,t){return(0,f().V$)(e,t).minus({days:1}).toISODate()}function C({events:e,getCalendarVisibility:t,calendars:n,startDate:i,endDateInclusive:r,eventFilters:s,timeZone:a}){const c=i.toISODate(),d=r.toISODate(),u=[...e].sort(w(n??[])),v=new o([],(({baseEvent:e})=>e.id));for(const o of u){const e=null==n?void 0:n.find((e=>e.id===o.calendarId&&e.accountId===o.accountId));if(!e||!t(e)||!b({event:o,minDate:c,maxDateInclusive:d,eventFilters:s,timeZone:a}))continue;const i=v.get(o.id);if(i)i.allSquashedEvents=(0,l().hS)([...i.allSquashedEvents,o],(e=>(0,m().z)(e)));else if(o.cronSyncOriginalEventData){const e=o.cronSyncOriginalEventData.eventId,t=v.get(e);t&&(t.allSquashedEvents=(0,l().hS)([...t.allSquashedEvents,o],m().z))}else v.append(o.id,{baseEvent:o,allSquashedEvents:[o]})}const T=new o((0,f().$D)(c,d,a).map((e=>({date:e,allDayEvents:[],timedEvents:[]}))),(({date:e})=>e));for(const{baseEvent:o,allSquashedEvents:l}of v.getOrderedValues())if(o.isAllDay){const e=(0,f().RY)({eventStartDate:o.start.date,eventEndDateInclusive:k(o.end.date,a),minDate:c,maxDateInclusive:d,timeZone:a});for(const t of e){const e=T.get(t);e&&e.allDayEvents.push({baseEvent:o,allSquashedEvents:l})}}else{const e=(0,f().J_)(o.start.dateTime,a),t=T.get(e);if(!t)continue;t.timedEvents.push({baseEvent:o,allSquashedEvents:l})}return T.getOrderedValues()}function b({event:e,minDate:t,maxDateInclusive:n,eventFilters:i,timeZone:o}){if(function(e){switch(e.responseStatus){case"declined":return!0;case"needsAction":case"tentative":case"accepted":case void 0:return!1;default:(0,c().HB)(e.responseStatus)}}(e))return!1;if(!(0,v().J4)({event:e,eventFilters:i}))return!1;const{start:r,end:s}=function(e,t){return e.isAllDay?{start:e.start.date,end:k(e.end.date,t)}:{start:(0,f().J_)(e.start.dateTime,t),end:(0,f().J_)(e.end.dateTime,t)}}(e,o);return!(r>n||s<t)&&(0,v().J4)({event:e,eventFilters:i})}function A({day:e,now:t,timeZone:n}){return function(e){return[...e.allDayEvents,...e.timedEvents]}(e).filter((({baseEvent:e})=>!O(e,t,n)))}function _(e,t){const n=e.isAllDay?e.start.date:e.start.dateTime;return i().DateTime.fromISO(n,{zone:t})}function N(e,t){const n=e.isAllDay?e.end.date:e.end.dateTime;return i().DateTime.fromISO(n,{zone:t})}function O(e,t,n){return N(e,n)<t}function R(e){if(e.isAllDay)return;const t=(0,d().Y)().getCalendar({calendarId:e.calendarId,accountId:e.accountId});if(!t)return;const n=(0,u().Sk)({theme:(0,a().O4)({theme:"light"}),eventColor:e.color,calendarColor:t.color}),i=(0,u().Sk)({theme:(0,a().O4)({theme:"dark"}),eventColor:e.color,calendarColor:t.color});return{accountId:e.accountId,calendarId:e.calendarId,id:e.id,startTime:e.start.dateTime,endTime:e.end.dateTime,responseStatus:e.responseStatus??"needsAction",colorHex:{light:n,dark:i},conferencing:e.conferencing}}function M(e){const{environment:t,events:n}=e,i=t.defaultRecordCache.inMemoryRecordCache,o=t.currentUser.id,r=new Map;for(const a of n)if(a.attendees)for(const e of a.attendees)if(e.notionUserId&&e.email){const t={pointer:{table:s().oo,id:e.notionUserId},userId:o};i.hasRecord(t)&&r.set(e.email,e.notionUserId)}return r}},812109:(e,t,n)=>{function i(e){return"string"==typeof e?e:"calendarId"in e?`${e.accountId}:${e.calendarId}`:`${e.accountId}:${e.id}`}function o({id:e,accountId:t,calendarId:n}){return`${t}:${n}:${e}`}n.d(t,{N:()=>i,z:()=>o})},823115:(e,t,n)=>{n.d(t,{$D:()=>r,J_:()=>a,RY:()=>o,V$:()=>s,cK:()=>l,qi:()=>c});n(16280),n(944114),n(581454);var i=()=>n(906745);function o({eventStartDate:e,eventEndDateInclusive:t,minDate:n,maxDateInclusive:i,timeZone:o}){const s=function({startAndEndDaysRange:e,minAndMaxDaysRange:t}){if(e.end<t.min)return;if(e.start>t.max)return;const{start:n,end:i}=e,{min:o,max:r}=t,s=n<o?o:n,a=i>r?r:i;return{start:s,end:a}}({startAndEndDaysRange:{start:a(e,o),end:a(t,o)},minAndMaxDaysRange:{min:a(n,o),max:a(i,o)}});if(!s)return[];const{start:l,end:c}=s;return r(l,c,o)}function r(e,t,n){const i=a(t,n);let o=a(e,n);const r=[];for(;o<=i;)r.push(o),o=s(o,n).plus({days:1}).toISODate();return r}function s(e,t){const[n,o,r]=a(e,t).split("-").map(Number);return i().DateTime.fromObject({year:n,month:o,day:r},{zone:t})}function a(e,t){const n=i().DateTime.fromISO(e,{zone:t});if(!n.isValid)throw new Error(`Invalid date string: ${e}`);return e.includes("T")?n.toISODate():e}function l(e,t){const n="en-US";return i().DateTime.fromISO(e,{zone:"UTC"}).setLocale(n).toLocaleString(i().DateTime.DATE_SHORT)===t.setLocale(n).toLocaleString(i().DateTime.DATE_SHORT)}function c(e,t,n){const i=s(e,n);return s(t,n).diff(i,"days").days}},833733:(e,t,n)=>{n.d(t,{w:()=>r});n(944114);var i=()=>n(761940),o=()=>n(488776);const r=new(n(140934).ComputedStore)((()=>{var e;const t=(0,o().Y)().getDateTimeEvents(),r=null===(e=n(907258).default.state.currentUserStore)||void 0===e?void 0:e.getEmail();if(!r)return[];const{allEligibleCalendars:s}=(0,i().RM)({currentUserEmail:r,calendars:(0,o().Y)().getCurrentCalendars()??[],accounts:(0,o().Y)().getCurrentAccounts()}),a=[];for(const n of t)(0,i().xM)({event:n,currentUserEmail:r,eligibleCalendars:s})&&a.push(n);return a}),{debugName:"CalendarMeetingsStore",equalityFn:n(821062).k})}}]);