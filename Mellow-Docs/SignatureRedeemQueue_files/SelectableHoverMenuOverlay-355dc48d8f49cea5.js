(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[5834,14344,32626,51646,59028,86477,99171],{267:(e,t,n)=>{"use strict";n.d(t,{_:()=>r});var o=()=>n(230711),i=()=>n(907258);function r(e){var t;const{sidebarSpaceStore:n}=i().default.state,{currentUser:r}=e.environment;return void 0!==r.id&&Boolean(null===(t=(0,o().sE)(n,r.id))||void 0===t?void 0:t.isWorkspaceOwner())}},3284:(e,t,n)=>{"use strict";n.r(t),n.d(t,{arrowSquarePathUpDownIcon:()=>i,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"0.64 3.12 18.71 13.76",svg:(0,n(474848).jsx)("path",{d:"M6.475 3.125a.625.625 0 1 0 0 1.25h7.975c.65 0 1.175.526 1.175 1.175v6.057l-1.408-1.408a.625.625 0 1 0-.884.884l2.475 2.475a.625.625 0 0 0 .884 0l2.475-2.475a.625.625 0 0 0-.884-.884l-1.408 1.408V5.55a2.425 2.425 0 0 0-2.425-2.425zM3.308 6.442a.625.625 0 0 1 .884 0l2.475 2.475a.625.625 0 1 1-.884.884L4.375 8.393v6.057c0 .649.526 1.175 1.175 1.175h7.975a.625.625 0 0 1 0 1.25H5.55a2.425 2.425 0 0 1-2.425-2.425V8.393L1.717 9.801a.625.625 0 1 1-.884-.884z"})},i=(0,n(340498).wt)("arrowSquarePathUpDown",o,"default")},12956:(e,t,n)=>{"use strict";n.d(t,{u:()=>S});n(296540);var o=()=>n(383036),i=()=>n(26697),r=()=>n(81068),a=()=>n(575143),s=()=>n(662971),l=()=>n(484714),c=()=>n(590526),d=()=>n(283163),u=()=>n(245720),p=()=>n(546926),m=()=>n(890492),f=()=>n(69708),g=()=>n(636714),v=n(474848);function h(e){const{context:t,extensionMenuParent:n,actionMenuListParent:o,popupEvents:i,displayName:r,width:a,initialFocus:s,subActions:h}=e,{isPhone:b}=(0,l().Y0)(),S=(0,p().Tf)();let y;y=b?S?{menuType:p().gu.Modal,onClickLeft:n.close,left:(0,v.jsx)(d().h,{}),enableMobileRefresh:S,paddingTop:10,title:(0,v.jsx)(f().sA,{...r}),...i}:{menuType:p().gu.Modal,right:(0,v.jsx)(f().sA,{...u().W.done}),onClickRight:n.close,...i}:{menuType:p().gu.Popup,width:a??220,...i};const x=(0,c().K8)((()=>h(t)),[t,h]);return(0,v.jsx)(m().A,{...y,children:(0,v.jsx)(g().A,{initialFocus:s??0,context:t,sections:x,onAccept:o.onAccept})})}var b=()=>n(267271);function S(e){const{key:t,displayName:n,displayNameInterpolatedValues:l,subTitle:c,analyticsName:d,validators:u,subActions:p,collapseSubActionsIntoParent:m,hideSubActions:f,svg:g,icon:S,right:y,rightStyle:x,renderTooltip:w,disableTooltip:A,tooltipPlacement:I,width:k,initialFocus:M,clientSkill:C,fuzzySearchKeywordsArray:T,disabled:_,bottomSheetInitialState:j}=e,B=(0,b().Ls)({clientSkill:C,key:`extension ${t}`,displayName:n,displayNameInterpolatedValues:l,analyticsName:d,validators:u,subActions:p,collapseSubActionsIntoParent:m,hideSubActions:f,fuzzySearchKeywordsArray:T,closeParentMenu:!0,disabled:_,action:()=>{},render:(t,l,d)=>(0,v.jsx)(i().m,{render:i=>{var u;const m=null===(u=e.disabled)||void 0===u?void 0:u.call(e,l);return(0,v.jsx)(s().A,{...t,disabled:m,disabledFeedback:m,renderOrigin:(e,t)=>{const n={...(0,o().A)(e,i),title:c?(0,v.jsx)(b().fh,{subTitle:c(l),children:B.displayName}):B.displayName,right:y,rightStyle:x};return g?(0,v.jsx)(a().A,{...n,svg:g,ref:t}):(0,v.jsx)(r().A,{...n,icon:S,ref:t})},onFocus:d.onFocus,renderExtension:(e,t)=>(0,v.jsx)(h,{context:l,extensionMenuParent:t,actionMenuListParent:d,popupEvents:e,displayName:n,width:k,initialFocus:M,subActions:p}),bottomSheetInitialState:j})},renderTooltip:()=>(0,v.jsx)("div",{style:b().FG,children:null==w?void 0:w({context:l,title:B.displayName})}),disableTooltip:!w||(null==A?void 0:A(l)),placement:I})});return B}},13898:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});n(296540);var o=()=>n(970236),i=()=>n(69708),r=n(474848);function a(e){return(0,r.jsx)(o().E,{color:"blue",style:e.style,content:(0,r.jsx)(i().sA,{id:"betaBadgeComponent.label",defaultMessage:"Beta"})})}},24126:(e,t,n)=>{"use strict";n.d(t,{c:()=>i});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"3.9 2.75 12.18 14.49",svg:(0,n(474848).jsx)("path",{d:"M12.626 2.768a.625.625 0 0 1 0 1.224l-.126.013h-.125v4.794l3.366 5.159c.893 1.369-.03 3.17-1.623 3.281l-.156.006H6.039c-1.688 0-2.703-1.873-1.78-3.287l3.366-5.157V4.005H7.5a.625.625 0 0 1 0-1.25h5zM8.875 9.173l-.102.156-1.567 2.401h5.589l-1.569-2.403-.101-.156V4.005h-2.25z"})},i=(0,n(340498).wt)("beaker",o,"default")},27356:(e,t,n)=>{"use strict";n.r(t),n.d(t,{UISpacePermissionGroupToken:()=>b});var o=n(296540),i=()=>n(726637),r=()=>n(484714),a=()=>n(590526),s=()=>n(401497),l=()=>n(942194),c=()=>n(784892),d=()=>n(437607),u=()=>n(914462),p=()=>n(69708),m=()=>n(100622),f=()=>n(284371),g=()=>n(848401),v=()=>n(580648),h=n(474848);function b(e){const{parentStore:t,style:n,format:b}=e,S=e.groupPointer.id,y=e.groupPointer.spaceId,x=(0,d().S4)({spacePermissionGroupId:S,spaceId:y}),w=(0,a().K8)((()=>{if(e.groupModel)return e.groupModel;if(!t)return;return l().C.createChildStore(t,x).getModel()}),[t,x,e.groupModel]),A=(0,r().Y0)(),{outerStyle:I,avatarWrapStyle:k}=(0,s().IS)((()=>({outerStyle:{display:"flex",alignItems:"center",minWidth:0},avatarWrapStyle:{width:"none",minHeight:"none",marginInlineEnd:6},badgeStyle:{borderRadius:4,background:m().Tj.legacyDefaultSelectColor,fontSize:i().A.isMobile?11:9,lineHeight:A.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em"}})),[A]),M=(0,p().tz)(),C=(0,a().K8)((()=>(0,u().n)({intl:M,permissionGroupModel:w})),[M,w]),T=(0,o.useCallback)((e=>b===c().NY.Inline?(0,h.jsx)(v().o,{group:w,size:e}):(0,h.jsxs)("div",{style:I,children:[(0,h.jsx)("div",{style:k,children:(0,h.jsx)(v().o,{group:w,size:e})}),(0,h.jsx)("div",{style:{...f().RC},children:C})]})),[b,I,k,w,C]);return(0,h.jsx)(g().Ay,{...e,style:{margin:0,...n},renderAvatar:T})}},43972:(e,t,n)=>{"use strict";n.d(t,{w:()=>l});n(296540);var o=()=>n(764880),i=()=>n(534177),r=()=>n(256863),a=()=>n(453697),s=n(474848);function l(e){const{actor:t}=e,n={size:e.size??14,style:{marginInlineEnd:2,...e.style}};return(0,o().H3)(t)?(0,s.jsx)(r().A,{botValue:t.asActor,...n}):(0,o().ps)(t)?(0,s.jsx)(a().A,{userValue:t.asActor,...n}):(0,o().h2)(t)?(0,s.jsx)(a().A,{userValue:void 0,...n}):void(0,i().HB)(t)}},53528:(e,t,n)=>{"use strict";n.d(t,{OH:()=>s,T2:()=>l,do:()=>c});var o=()=>n(597777),i=()=>n(869190),r=()=>n(604995),a=()=>n(416504);function s(e){const{dateTime:t,intl:n,shortenDateAndRange:o}=e,a=r().C6.toPersistedDate(t.valueOf());return i().ZF({value:a,allowRelativeDates:!0,intl:n,shortenDateAndRange:o,displayInUserTimezone:!0})}function l(e){const{dateTime:t,intl:n,userTimeZone:o,displayInUserTimezone:a,alwaysIncludeTimezone:s}=e,l=r().C6.toPersistedDateTime(t.valueOf(),t.zoneName);return i().ZF({value:l,allowRelativeDates:!0,intl:n,userTimeZone:o,displayInUserTimezone:a,alwaysIncludeTimezone:s})}function c(e){const{luxonRange:t,intl:n}=e,s=r().C6.toPersistedDateRange(t),l=i().ZF({value:s,allowRelativeDates:!1,shortenDateAndRange:!0,intl:n,displayInUserTimezone:!0}),c=t.end.setZone((0,a().P)()),d=i().fU({start_time:c.toFormat(o().GE),humanReadable:!1,intl:n});return n.formatMessage({id:"verification.timeRange",defaultMessage:"{formattedDateRange} at {formattedEndTime}"},{formattedDateRange:l,formattedEndTime:d})}},65402:(e,t,n)=>{"use strict";n.d(t,{D:()=>o});const o=(0,n(69708).YK)({inputPlaceholder:{defaultMessage:"Filter by…",id:"database.viewSettings.createFilterTab.inputPlaceholder"},propertyInputPlaceholder:{defaultMessage:"Search for a property…",id:"database.viewSettings.mobileSheet.propertyInputPlaceholder"},sortTitle:{defaultMessage:"Sort",id:"database.viewSettings.mainTab.sortButton.title"},advancedFilterTitle:{defaultMessage:"Advanced filter",id:"database.viewSettings.createFilterTab.advancedFilterTitle"},addAdvancedFilterTitle:{defaultMessage:"Add advanced filter",id:"database.viewSettings.createFilterTab.addAdvancedFilter.title"},advancedFilterRulesCount:{defaultMessage:"{ruleCount, plural, one {{ruleCount} rule} other {{ruleCount} rules}}",id:"database.viewSettings.createFilterTab.advancedFilterRulesCount.title"},filterButtonTitle:{defaultMessage:"Filter",id:"database.viewSettings.mainTab.filterButton.title"},learnMoreAboutScimAttributes:{defaultMessage:"Learn about SCIM attributes",id:"database.viewSettings.scimPropertiesTab.learnMoreAboutScimAttributes"},loadingDataMessage:{defaultMessage:"It might take a couple of seconds for the data to load into the database",id:"database.viewSettings.scimPropertiesTab.loadingDataMessage"},numberOfFiltersTitle:{defaultMessage:"{numberOfFilters, plural, one {{numberOfFilters} filter} other {{numberOfFilters} filters}}",id:"database.viewSettings.mainTab.filterButton.filters.title"},noFiltersTitle:{defaultMessage:"No filters",id:"database.viewSettings.mainTab.filterButton.noFilters.title"},openFullscreenButton:{defaultMessage:"Open as full page",id:"database.collectionViewBlock.openFullscreenButton.label"},lockDatabaseMultiSourceTooltip:{defaultMessage:"Lock views and data sources in this database",id:"database.lockDatabase.multiSourceTooltip"},lockDatabaseViewsTooltip:{defaultMessage:"Lock all views in this database",id:"database.lockDatabaseViews.tooltip"},visibleToAllWorkspaceMembers:{defaultMessage:"Visible to all workspace members",id:"database.viewSettings.scimPropertiesTab.visibleToAllWorkspaceMembers"}})},79877:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var o=n(296540),i=()=>n(597777),r=()=>n(869190),a=()=>n(604995),s=()=>n(416504),l=()=>n(100622),c=n(474848);const d=function(e){const t=(0,n(69708).tz)(),d=(0,n(396182).I)(),m=(0,o.useRef)(),f=(0,o.useCallback)((()=>{const t=e.value;if(!t)return;const o=a().q8(t,(0,s().P)());if(!o)return;const i=o.valueOf(),r=i-Date.now();r<0||r>n(720665).nD||m.current&&m.current.timestamp===i||(m.current&&clearTimeout(m.current.timer),m.current={timestamp:i,timer:setTimeout((()=>d("DateBox","DateBox/createReminderTimer")),r)})}),[d,e.value]),g=(0,o.useCallback)((()=>{m.current&&(clearTimeout(m.current.timer),m.current=void 0)}),[]);(0,o.useEffect)((()=>{f()}),[f]),(0,o.useEffect)((()=>()=>{g()}),[g]);const{value:v,withComma:h}=e,b=(0,n(590526).K8)((()=>v?(0,r().ZF)({value:v,date_format:e.dateFormat,time_format:e.timeFormat,userTimeZone:(0,s().P)(),allowRelativeDates:!0,intl:t,shortenDateAndRange:e.shortenDateAndRange,displayInUserTimezone:e.displayInUserTimezone,getToday:n(847109).x1}):void 0),[t,e.dateFormat,e.displayInUserTimezone,e.shortenDateAndRange,e.timeFormat,v]);if(!v)return null;const S=a().AA(v,(0,s().P)(),n(609679).locale);let y;if((0,i().Lh)(v)){const e=a().Zs(v,(0,s().P)());y=e?{color:l().Tj.red.text.accentPrimary}:{color:l().oZ.blue}}const x=(0,c.jsxs)(c.Fragment,{children:[b,(0,i().Lh)(v)?(0,c.jsx)(n(807449).I,{icon:n(472219).alarmSmallIcon,style:{display:"inline-block",width:"1.2em",marginInlineStart:5,marginInlineEnd:2,paddingBottom:3,verticalAlign:"middle"}}):void 0,h?", ":null]});return e.disableTooltip?(0,c.jsx)("div",{className:e.className,style:{...e.style,...y},children:x}):(0,c.jsx)(n(26697).m,{renderTooltip:()=>(0,c.jsxs)(c.Fragment,{children:[e.tooltipHeader,(0,c.jsxs)("div",{style:p(e.tooltipHeader),children:[u(S.start),S.end?` → ${u(S.end)}`:""]})]}),render:t=>(0,c.jsx)("div",{className:e.className,style:{...e.style,...y},...t,children:x}),placement:e.tooltipPlacement})};function u(e){return(0,r().eV)({value:e,preset:"medium"})}function p(e){return e?{color:l().Tj.text.inverseSecondary}:{}}},89849:(e,t,n)=>{"use strict";n.r(t),n.d(t,{eyeIcon:()=>r,iconDefinition:()=>i});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"0.96 4.19 18.07 11.62",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M10.17 6.694a3.307 3.307 0 0 1 3.135 3.303l-.005.17a3.305 3.305 0 0 1-3.3 3.137l-.17-.004a3.307 3.307 0 0 1-3.132-3.133l-.004-.17A3.307 3.307 0 0 1 10 6.69zm-.17 2.2a1.104 1.104 0 0 0 0 2.207 1.103 1.103 0 0 0 0-2.207"}),(0,o.jsx)("path",{d:"M10 4.194c3.878 0 7.26 2.075 8.862 5.127l.073.163c.126.333.126.7 0 1.033l-.073.163c-1.602 3.052-4.984 5.126-8.862 5.126-3.757 0-7.049-1.946-8.707-4.843l-.156-.283a1.46 1.46 0 0 1 0-1.359l.156-.283C2.95 6.141 6.243 4.194 10 4.194m0 1.251c-3.33 0-6.196 1.724-7.622 4.214l-.134.243a.21.21 0 0 0 0 .197l.134.243c1.426 2.49 4.292 4.214 7.622 4.214 3.437 0 6.38-1.837 7.756-4.457l.018-.048a.2.2 0 0 0 0-.1l-.018-.049C16.38 7.282 13.437 5.445 10 5.445"})]})},r=(0,n(340498).wt)("eye",i,"default")},103448:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});n(296540);var o=()=>n(284371),i=n(474848);const r=function({imageURL:e,imageWidth:t,imageHeight:o,caption:r,title:s,imageContainerStyle:l}){if(e){const c=(0,n(478184).L)(e);return(0,i.jsxs)("div",{style:{width:t||200,marginTop:4,marginBottom:4},children:[(0,i.jsx)("div",{style:{width:"100%",height:o||100,borderRadius:4,backgroundImage:`url(${c})`,backgroundSize:"cover",marginBottom:6,...l}}),(0,i.jsx)(a,{caption:r,title:s})]})}return(0,i.jsx)(a,{caption:r,title:s,style:{width:t}})};function a({style:e,caption:t,title:n}){return(0,i.jsxs)("div",{style:{whiteSpace:"normal",lineHeight:1.4,...e},children:[n?(0,i.jsx)("header",{style:{fontWeight:o().Wy.bold,marginBottom:4},children:n}):void 0,t]})}},173783:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});n(296540);var o=()=>n(807449),i=()=>n(888867),r=()=>n(497577),a=n(474848);function s(e){const t=(0,r().E)(e);return(0,a.jsx)("div",{style:t.iconContainer,children:(0,a.jsx)(o().I,{icon:i().s,size:t.icon.width,colorVariant:"secondary"})})}},192421:(e,t,n)=>{"use strict";n.d(t,{F:()=>d});n(296540);var o=()=>n(726637),i=()=>n(493552),r=()=>n(424400),a=()=>n(433847),s=()=>n(69708),l=()=>n(583690),c=n(474848);function d(e){const{role:t}=e,n=(0,s().tz)(),d=(0,l().I2)(t);return(0,c.jsx)(r().Ay,{...e,title:(0,c.jsx)(i().D,{styleKey:"captionMedium",colorVariant:"secondary",children:n.formatMessage((0,a().sK)(t,void 0).label)}),shouldWrapCaption:!0,style:o().A.isMobile?{padding:"12px 4px"}:{padding:4,marginTop:2,marginBottom:2},captionStyle:{marginTop:4},caption:(0,c.jsx)("div",{children:d})})}},200582:(e,t,n)=>{"use strict";n.d(t,{m:()=>i});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"4.62 1.77 10.75 15.98",svg:(0,n(474848).jsx)("path",{d:"M11.633 1.812c.263.096.43.354.41.632l-.392 5.51h3.099a.625.625 0 0 1 .506.992l-6.18 8.54a.625.625 0 0 1-1.13-.412l.402-5.5H5.25a.625.625 0 0 1-.507-.99l6.17-8.55a.625.625 0 0 1 .72-.222m-5.161 8.513H9.02a.625.625 0 0 1 .623.67l-.29 3.976 4.173-5.766H10.98a.625.625 0 0 1-.623-.67l.284-3.987z"})},i=(0,n(340498).wt)("lightning",o,"default")},216128:(e,t,n)=>{"use strict";n.d(t,{R:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 16 16",fittedViewBox:"3.41 3.05 9.98 9.9",directional:!0,svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M4.482 3.238a.625.625 0 1 0-.884.884L7.476 8l-3.878 3.878a.625.625 0 0 0 .884.884l4.32-4.32a.625.625 0 0 0 0-.884z"}),(0,o.jsx)("path",{d:"M8.882 3.238a.625.625 0 0 0-.884.884L11.876 8l-3.878 3.878a.625.625 0 0 0 .884.884l4.32-4.32a.625.625 0 0 0 0-.884z"})]})},r=(0,n(340498).wt)("arrowChevronDoubleForwardSmall",i,"small")},231536:(e,t,n)=>{"use strict";n.d(t,{Y:()=>a,G:()=>r});var o=()=>n(534177);const i={clipboardActions:n(884107).R.clipboardActions,duplicationActions:n(855801).VI.duplicateActions,formulasModule:n(862292).T.formulas,markdownLinkifyIt:n(659602).g,tinyMceMicrosoftWordPasteFilter:n(335722).S};function r(...e){for(const t of e)i[t].load()}function a(e){const t=i[e].getLoadingState();if("idle"===t.status)r(e);else if("pending"===t.status||"rejected"===t.status);else{if("resolved"===t.status)return t.value;(0,o().HB)(t)}}},243581:(e,t,n)=>{"use strict";n.r(t),n.d(t,{arrowBranchIcon:()=>i,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"3.48 3.92 13.04 12.85",svg:(0,n(474848).jsx)("path",{d:"M3.483 4.55c0-.345.28-.625.625-.625h3.5a.625.625 0 1 1 0 1.25H5.617L8.86 8.42A6 6 0 0 1 10 10.007a6 6 0 0 1 1.14-1.588l3.243-3.244h-1.99a.625.625 0 1 1 0-1.25h3.5c.344 0 .624.28.624.625v3.5a.625.625 0 0 1-1.25 0V6.06l-3.243 3.244a4.78 4.78 0 0 0-1.399 3.358v4.108h-1.25v-4.108a4.78 4.78 0 0 0-1.398-3.358L4.733 6.059V8.05a.625.625 0 1 1-1.25 0z"})},i=(0,n(340498).wt)("arrowBranch",o,"default")},245720:(e,t,n)=>{"use strict";n.d(t,{W:()=>o});const o=(0,n(69708).YK)({done:{id:"modal.doneButton",defaultMessage:"Done"},cancel:{id:"modal.cancelButton",defaultMessage:"Cancel"},back:{id:"modal.backButton",defaultMessage:"Back"}})},247123:(e,t,n)=>{"use strict";n.d(t,{QU:()=>f,f2:()=>m,r6:()=>g});n(581454),n(296540);var o=()=>n(907258),i=()=>n(590526),r=()=>n(401497),a=()=>n(611648),s=()=>n(69708),l=()=>n(100622),c=()=>n(534177),d=()=>n(805181),u=()=>n(376254),p=n(474848);function m(e){const{openState:t}=e,{mainEditorCurrentBlockStore:n,currentSpaceStore:s}=(0,i().K8)((()=>{const{mainEditorCurrentBlockStore:e,sidebarSpaceStore:t}=o().default.state;return{mainEditorCurrentBlockStore:e,currentSpaceStore:t}}),[]),c=(0,r().IS)((()=>({scroller:{display:"flex",flexDirection:"column",maxHeight:290,border:`1px solid ${l().Tj.border.secondaryTranslucent}`,borderRadius:6,paddingTop:8,paddingInlineStart:12,paddingInlineEnd:12,paddingBottom:12,marginTop:15,marginBottom:5,marginInlineStart:-12,marginInlineEnd:-12},editContainer:{marginTop:2,marginBottom:2,color:l().Tj.text.primary}})),[]);if(!n||!s)return null;const m=Date.now();return(0,p.jsx)(u().H,{type:a().A.Y,style:c.scroller,children:t.permissionChanges.map((([e,t],o)=>{const i={timestamp:m,space_id:s.id,type:"permission-changed",permission_data:{before:e,after:t}};return(0,p.jsx)("div",{style:c.editContainer,children:(0,p.jsx)(d().A,{rootStore:n,edit:i})},`${e.type}-${o}`)}))})}function f(e){return["remove","restrict"].includes(e.type)?(0,p.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.actionButton.restrictAccessV2",defaultMessage:"Change and unlink"}):(0,p.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.actionButton.relink",defaultMessage:"Relink"})}function g(e){switch(e.type){case"remove":case"restrict":return(0,p.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.remove.descriptionV2",defaultMessage:"Change access and unlink share settings from parent page?"});case"restore":case"restoreTeamPermissions":return(0,p.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.relink.description",defaultMessage:"Relink share settings?"});default:throw c().HB(e)}}},256016:(e,t,n)=>{"use strict";n.d(t,{i:()=>i});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"6.24 2.75 7.51 14.51",svg:(0,n(474848).jsx)("path",{d:"M6.25 4a1.25 1.25 0 1 0 2.5 0 1.25 1.25 0 0 0-2.5 0m5 0a1.25 1.25 0 1 0 2.5 0 1.25 1.25 0 0 0-2.5 0m1.25 7.25a1.25 1.25 0 1 1 0-2.5 1.25 1.25 0 0 1 0 2.5M6.25 10a1.25 1.25 0 1 0 2.5 0 1.25 1.25 0 0 0-2.5 0m6.25 7.25a1.25 1.25 0 1 1 0-2.5 1.25 1.25 0 0 1 0 2.5M6.25 16a1.25 1.25 0 1 0 2.5 0 1.25 1.25 0 0 0-2.5 0"})},i=(0,n(340498).wt)("dragHandle",o,"default")},256863:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});n(296540);var o=()=>n(590526),i=()=>n(824862),r=n(474848);const a=function(e){const{botValue:t,botStore:a,showActiveDot:s,style:l,size:c}=e,d=(0,n(69708).tz)(),u=(0,o().K8)((()=>{if(a){const e=a.getIcon();if(e)return{pointer:{table:i().GP,id:a.id,spaceId:a.getSpaceId()},icon:e}}else if(null!=t&&t.icon)return{pointer:{table:i().GP,id:t.id,spaceId:t.space_id},icon:t.icon}}),[a,t]),p=(0,o().K8)((()=>(null==a?void 0:a.getDisplayName(d))??(0,n(799288).Hg)(t)),[a,t,d]),{activeDotStyle:m}=(0,n(401497).IS)((()=>({activeDotStyle:{height:10,width:10,backgroundColor:n(100622).Tj.palette.green[400],border:"2px solid white",borderRadius:"50%",position:"absolute",insetInlineStart:11,top:11}})),[]);return(0,r.jsxs)("div",{style:l,children:[(0,r.jsx)(n(187820).B6,{icon:u,title:p,size:c||18,disabled:!0,isEmptyPage:!1,useInvertedColors:!0}),s?(0,r.jsx)("div",{style:m}):void 0]})}},261403:(e,t,n)=>{"use strict";n.d(t,{R:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"2.62 2.62 15.26 15.26",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M8.875 5.75c.345 0 .625.28.625.625V8.25h1.875a.625.625 0 1 1 0 1.25H9.5v1.875a.625.625 0 1 1-1.25 0V9.5H6.375a.625.625 0 1 1 0-1.25H8.25V6.375c0-.345.28-.625.625-.625"}),(0,o.jsx)("path",{d:"M8.875 2.625a6.25 6.25 0 1 0 3.955 11.09l3.983 3.982a.625.625 0 1 0 .884-.884l-3.983-3.982a6.25 6.25 0 0 0-4.84-10.205m-5 6.25a5 5 0 1 1 10 0 5 5 0 0 1-10 0"})]})},r=(0,n(340498).wt)("magnifyingGlassPlus",i,"default")},275143:(e,t,n)=>{"use strict";n.d(t,{y:()=>i});n(898992),n(737550);var o=()=>n(602098);function i(e){return e.blocks.some(o().u)}},283163:(e,t,n)=>{"use strict";n.d(t,{h:()=>a});n(296540);var o=()=>n(473541),i=()=>n(807449),r=n(474848);function a(){return(0,r.jsx)(i().I,{icon:o().w,size:"lg",colorVariant:"primary"})}},299177:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});class o extends(()=>n(757695))().Store{getInitialState(){return{}}}const i=new o;n(852832).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",i);const r=i},300985:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"2.49 2.37 15.01 15.25",svg:(0,n(474848).jsx)("path",{d:"M7.154 3.625h1.23a.625.625 0 1 0 0-1.25h-1.23A2.625 2.625 0 0 0 4.529 5v2.069c0 .9-.508 1.722-1.313 2.124l-.317.159a.725.725 0 0 0 0 1.297l.317.158a2.38 2.38 0 0 1 1.313 2.124V15a2.625 2.625 0 0 0 2.625 2.625h1.23a.625.625 0 1 0 0-1.25h-1.23c-.76 0-1.375-.616-1.375-1.375v-2.069c0-1.17-.564-2.256-1.492-2.931a3.63 3.63 0 0 0 1.492-2.931V5c0-.76.615-1.375 1.375-1.375m5.692 12.75h-1.23a.625.625 0 1 0 0 1.25h1.23A2.625 2.625 0 0 0 15.471 15v-2.069c0-.9.508-1.722 1.313-2.124l.317-.159a.725.725 0 0 0 0-1.296l-.317-.159a2.38 2.38 0 0 1-1.313-2.124V5a2.625 2.625 0 0 0-2.625-2.625h-1.23a.625.625 0 1 0 0 1.25h1.23c.76 0 1.375.616 1.375 1.375v2.069c0 1.17.564 2.256 1.492 2.931a3.63 3.63 0 0 0-1.492 2.931V15c0 .76-.615 1.375-1.375 1.375"})},i=(0,n(340498).wt)("curlyBraces",o,"default")},314638:(e,t,n)=>{"use strict";n.d(t,{G:()=>s,e:()=>a});var o=n(296540),i=()=>n(401497),r=n(474848);let a=function(e){return e[e.Name=0]="Name",e}({});const s=o.forwardRef((function(e,t){const{propertySchema:o,format:s}=e,{name:l,type:c,icon:d}=o,u=(0,i().IS)((()=>({propertyIcon:{fill:n(100622).Tj.icon.primary,marginInlineStart:6,marginInlineEnd:2}})),[]),p=(0,i().DP)(),m=s===a.Name?l:n(680288).dC[c];return(0,r.jsx)(n(81068).A,{title:m,icon:(0,r.jsx)(n(852424).zB,{icon:d,type:c,size:n(726637).A.isMobile?18:16,theme:p,style:u.propertyIcon}),...e})}))},332751:(e,t,n)=>{"use strict";n.d(t,{I:()=>r});var o=()=>n(170722),i=()=>n(369241);function r(){o().A.state.isActive&&(i().A.setState({...i().A.state,open:!1}),o().A.setState({...o().A.state,isActive:!1,isAnimatingClosed:!0}))}},334684:(e,t,n)=>{"use strict";n.d(t,{$:()=>s});var o=()=>n(898244),i=()=>n(713998),r=()=>n(534177);const a=["button","formula","auto_increment_id","file"];function s(e){const{propertyType:t,propertySchema:n,allowAIProperty:s}=e,l=(0,r().O9)(n)&&(0,o().$M)(n)&&(0,r().O9)((0,o().om)(n)),c=!s&&l,d=(0,r().O9)((0,i().Dz)(n));return a.includes(t)||c||d}},369241:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o=new(n(118307).A)},375078:(e,t,n)=>{"use strict";n.r(t),n.d(t,{maybeTurnCollectionViewIntoCollectionViewPage:()=>M,transformBlocks:()=>k,transformIntoColumnList:()=>C});n(898992),n(354520),n(581454);var o=()=>n(242422),i=()=>n(908006),r=()=>n(784326),a=()=>n(295633),s=()=>n(755125),l=()=>n(301809),c=()=>n(700500),d=()=>n(179034),u=()=>n(743246),p=()=>n(496603),m=()=>n(722101),f=()=>n(44729),g=()=>n(863168),v=()=>n(384944),h=()=>n(391214),b=()=>n(62287),S=()=>n(87017),y=()=>n(594794),x=()=>n(299545),w=()=>n(440024),A=()=>n(747674),I=()=>n(547149);function k(e){const{environment:t,blockType:n,transaction:r}=e,k=e.blocks.filter((e=>e.getParentTable()!==u().C0));if(0!==k.length)if(n!==c().xd.transclusionContainer)if(n===c().xd.callout&&o().default.checkGate({gateName:"create_v2_callouts"}))!function(e){const{environment:t,blocks:n,transaction:o}=e,i=n[0];if(!i)return;const r=i.getRecordStoreUIParent();if(!r||!(0,x().iU)(r))return;const l=r.getRecordStoreUIParent();if(!(l&&l instanceof a().B))return;const u=(0,y().Z1)({environment:t,table:d().ev,spaceId:l.getSpaceId()}),p=v().Wv({environment:t,id:u,type:c().xd.callout,inMemoryRecordCache:r.inMemoryRecordCache,transaction:o,spaceId:l.getSpaceId(),format:{callout_version:2}});f().NI({parentStore:r,childStore:p,after:i.id,transaction:o});T({newParentStore:p.getContentStore(),blocks:n,transaction:o}),g().s4({store:p,transaction:o}),(0,s().clear)({environment:t}),(0,w().I)({environment:t}),(0,A().t)({environment:t,stores:[p]})}({environment:t,blocks:k,transaction:r});else if(n!==c().xd.columnList)if(n!==c().xd.slide)if((0,c().ZK)(n)){const e=parseInt(n.replace("column","").replace("block","")),o=p().oE(p().Hn(e-1,(()=>S().insertTextBelow({environment:t,blocks:k,transaction:r})))),a=[...k,...o],s=C({environment:t,blocks:a,transaction:r});i().default.afterNextFlush((()=>{(0,l().e)({store:s[0].getBlockTitleStore()})}))}else for(const o of k)if(o.isCalloutV2()){const e=o.getParentBlockStore();if(e){const a=o.getContentStores();I().applyOperation({store:e,operation:{pointer:e.pointer,path:["content"],command:"insertChildrenAfter",args:{ids:a.map((e=>e.id)),after:o.id}},transaction:r}),f().zz({parentStore:e.getContentStore(),childStore:o,transaction:r});for(const e of a)b().pd({environment:t,block:e,blockType:n,transaction:r,isMultiBlockTransformation:k.length>1});i().default.afterNextFlush((()=>{h().dL(t,a.map((e=>e.id)))}))}}else b().pd({environment:t,block:o,blockType:n,transaction:r,isMultiBlockTransformation:k.length>1});else!function(e){const{environment:t,blocks:n,transaction:o}=e,i=n[0];if(!i)return;const r=i.getRecordStoreUIParent();if(!r||!(0,x().iU)(r))return;const l=r.getRecordStoreUIParent();if(!(l&&l instanceof a().B))return;const u=(0,y().Z1)({environment:t,table:d().ev,spaceId:l.getSpaceId()}),p=v().Wv({environment:t,id:u,type:c().xd.slide,inMemoryRecordCache:r.inMemoryRecordCache,transaction:o,spaceId:l.getSpaceId()});f().NI({parentStore:r,childStore:p,after:i.id,transaction:o});T({newParentStore:p.getContentStore(),blocks:n,transaction:o}),(0,s().clear)({environment:t}),(0,w().I)({environment:t}),(0,A().t)({environment:t,stores:[p]})}({environment:t,blocks:k,transaction:r});else C({environment:t,blocks:k,transaction:r});else!function(e){const{environment:t,blocks:n,transaction:o}=e,i=n[0];if(!i)return;const r=i.getRecordStoreUIParent();if(!r||!(0,x().iU)(r))return;const a=r.getRecordStoreUIParent();if(!a||!(0,x()._p)(a))return;if(!a.isDefined())return;const l=(0,y().Z1)({environment:t,table:d().ev,spaceId:a.getSpaceId()}),u=v().Wv({environment:t,id:l,type:c().xd.transclusionContainer,inMemoryRecordCache:r.inMemoryRecordCache,transaction:o,spaceId:a.getSpaceId()});m().WH({parentStore:r,insertStore:u,afterStore:i,transaction:o});T({newParentStore:u.getContentStore(),blocks:n,transaction:o}),(0,s().clear)({environment:t}),(0,w().I)({environment:t}),(0,A().t)({environment:t,stores:[u]})}({environment:t,blocks:k,transaction:r})}function M({environment:e,blocks:t,transaction:n}){(function(e){return 1===e.length&&"collection_view"===e[0].getType()})(t)&&k({environment:e,blocks:t,blockType:"collection_view_page",transaction:n})}function C(e){const{environment:t,blocks:n,transaction:o}=e,i=n[0];if(!i)return[];const a=i.recordStoreUIParentStore;if(null==a||!a.valueIs(r()._))return[];const s=(0,y().Z1)({environment:t,table:d().ev,spaceId:i.getSpaceId()}),l=v().Wv({environment:t,id:s,type:c().xd.columnList,inMemoryRecordCache:i.inMemoryRecordCache,transaction:o,spaceId:i.getSpaceId()}),{childStore:u}=m().nc({parentStore:a,insertStore:l,beforeStore:i,transaction:o});return n.map((e=>{const n=(0,y().Z1)({environment:t,table:d().ev,spaceId:i.getSpaceId()}),r=v().Wv({environment:t,id:n,type:c().xd.column,inMemoryRecordCache:i.inMemoryRecordCache,transaction:o,spaceId:i.getSpaceId()}),{childStore:s}=m().TF({parentStore:a,childToRemoveStore:e,transaction:o}),{childStore:l}=m().WH({parentStore:u.getContentStore(),insertStore:r,transaction:o}),{childStore:p}=m().WH({parentStore:l.getContentStore(),insertStore:s,transaction:o});return p}))}function T(e){const{newParentStore:t,blocks:n,transaction:o}=e;for(const i of n){const e=i.getRecordStoreUIParent();null!=e&&e.valueIs(r()._)&&(m().TF({parentStore:e,childToRemoveStore:i,transaction:o}),m().BC({parentStore:t,appendStore:i,transaction:o}))}}},375308:(e,t,n)=>{"use strict";n.d(t,{v:()=>a});n(898992),n(737550);var o=()=>n(457419),i=()=>n(486674),r=()=>n(478726);function a(e){return e.blocks.some((e=>{const t=(0,i().a)();return!(!t||!(0,r().fc)(t))||!(!(0,o().S)(t)||null==t||!t.uiContains(e)||t===e)}))}},375555:(e,t,n)=>{"use strict";function o(e,t){const{device:n}=e;n.isAndroid&&t.focus(),t.select()}n.d(t,{G:()=>o})},377114:(e,t,n)=>{"use strict";n.r(t),n.d(t,{arrowLeftRightIcon:()=>i,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"3.26 2.25 13.47 15.5",svg:(0,n(474848).jsx)("path",{d:"M3.45 5.925a.625.625 0 0 0 0 .884l3.499 3.497a.625.625 0 1 0 .884-.883L5.402 6.992h10.705a.625.625 0 0 0 0-1.25H5.402l2.43-2.431a.625.625 0 0 0-.883-.884zm8.717 11.648a.625.625 0 0 1 0-.884l2.431-2.43H3.893a.625.625 0 1 1 0-1.25h10.705l-2.43-2.431a.625.625 0 0 1 .883-.884l3.498 3.497a.625.625 0 0 1 0 .884l-3.498 3.498a.625.625 0 0 1-.884 0"})},i=(0,n(340498).wt)("arrowLeftRight",o,"default")},378409:(e,t,n)=>{"use strict";n.r(t),n.d(t,{iconDefinition:()=>i,xMarkCircleIcon:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.26 15.25",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M12.817 7.183a.625.625 0 0 1 0 .884L10.884 10l1.933 1.933a.625.625 0 1 1-.884.884L10 10.884l-1.933 1.933a.625.625 0 1 1-.884-.884L9.116 10 7.183 8.067a.625.625 0 1 1 .884-.884L10 9.116l1.933-1.933a.625.625 0 0 1 .884 0"}),(0,o.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},r=(0,n(340498).wt)("xMarkCircle",i,"default")},381684:(e,t,n)=>{"use strict";n.d(t,{b:()=>y,g:()=>S});n(296540);var o=()=>n(484714),i=()=>n(590526),r=()=>n(401497),a=()=>n(609679),s=()=>n(730240),l=()=>n(26697),c=()=>n(302501),d=()=>n(424400),u=()=>n(736847),p=()=>n(764880),m=()=>n(869190),f=()=>n(69708),g=()=>n(311337),v=()=>n(706965),h=()=>n(715011),b=n(474848);function S(e){const{store:t,showWordCount:n}=e,a=(0,o().v3)(),s=(0,o().WS)(),m=(0,f().tz)(),S=(0,i().K8)((()=>y({store:t,intl:m})),[t,m]),x=(0,r().IS)((()=>({label:{marginTop:s?8:4,marginBottom:s?8:4}})),[s]);return(0,i().K8)((()=>(0,g().y)(a)),[a])||S&&!S.canAccess?null:(0,b.jsx)(u().A,{topBorder:!0,children:(0,b.jsx)(d().Ay,{shouldWrapTitle:!0,title:S?(0,b.jsx)(l().m,{placement:"right",render:e=>(0,b.jsxs)("div",{...e,children:[n?(0,b.jsx)(c().A,{isSmall:!0,isSecondaryColor:!0,isMultiline:!0,style:x.label,children:(0,b.jsx)(f().sA,{id:"pageMoreButton.wordCount.caption",defaultMessage:"Word count: {count}",values:{count:(0,b.jsx)(h().A,{store:t})}})}):void 0,(0,b.jsx)(c().A,{isSmall:!0,isSecondaryColor:!0,isMultiline:!0,style:x.label,children:(0,b.jsx)(f().sA,{id:"blockAuthorInfo.label",defaultMessage:"Last edited by {author}",values:{author:S.lastEditedBy.asActor?(0,p().lR)(m,S.lastEditedBy):void 0}})}),(0,b.jsx)(c().A,{isSmall:!0,isSecondaryColor:!0,style:x.label,children:S.lastEditedTime})]}),renderTooltip:()=>(0,b.jsx)(v().A,{store:t,compactFormat:!0})}):void 0,loading:!S})})}function y(e){const{store:t,intl:n}=e,o=t.getCreatedByPointer(),i=t.getCreatedTime(),r=t.getLastEditedByPointer(),l=t.getLastEditedTime();if(!t.canRead())return{canAccess:!1};if(o&&i&&l&&r){const e=(0,s().vt)({parentStore:t,pointer:o}),c=(0,m().jE)(i,a().locale,n),d=(0,s().vt)({parentStore:t,pointer:r}),u=(0,m().jE)(l,a().locale,n);if(!d)return;return{canAccess:!0,createdBy:e,createdTime:c,lastEditedBy:d,lastEditedTime:u}}}},383567:(e,t,n)=>{"use strict";n.d(t,{F:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"3.26 1.98 16.32 17.52",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M15.825 12a3.75 3.75 0 1 1-.001 7.501 3.75 3.75 0 0 1 0-7.501m0 1.325a.55.55 0 0 0-.55.55V15.2H13.95a.55.55 0 0 0-.001 1.1h1.326v1.325a.55.55 0 0 0 1.1 0V16.3h1.324a.55.55 0 0 0 0-1.1h-1.325v-1.325a.55.55 0 0 0-.55-.55M9.702 5.022a3.918 3.918 0 0 1 6.742.036.626.626 0 0 1-1.08.63 2.667 2.667 0 0 0-4.59-.023L5.376 14.68l4.19.678a.626.626 0 0 1-.2 1.235l-5.1-.827a.625.625 0 0 1-.437-.938z"}),(0,o.jsx)("path",{d:"M10.912 8.094a1.178 1.178 0 1 1 2.326.377 1.178 1.178 0 0 1-2.326-.377M4.7 7.087a1.178 1.178 0 1 1 2.327.377A1.178 1.178 0 0 1 4.7 7.087M3.488 2.985a3.92 3.92 0 0 1 5.572.357.625.625 0 0 1-.944.818 2.67 2.67 0 0 0-3.796-.243.625.625 0 1 1-.832-.932"})]})},r=(0,n(340498).wt)("aiFacePlus",i,"default")},404783:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});class o extends(()=>n(757695))().Store{constructor(e,t){super(),this.environment=void 0,this.spaceId=void 0,this.environment=e,this.spaceId=t,this.reset()}getInitialState(){if(!this.environment)return;const e=new(n(221844).A)({name:"DiscussionInputStore",isTemporaryData:!0});return{textStore:new(n(770063).pm)({environment:this.environment,pointer:(0,n(594794).zP)({environment:this.environment,table:n(343666).SN,spaceId:this.spaceId}),path:["text"],recordStoreOptions:{inMemoryRecordCache:e}}),localRecordCache:e,files:[],showAttachFileIntro:!1,renderFileAttachIntro:!1}}isEmpty(){const e=this.state.textStore.getValue();return!e||0===e.length}hasNewLineCharacter(){const e=this.state.textStore.getValue();return n(201980).q4_(e).includes("\n")}}const i=o},405981:(e,t,n)=>{"use strict";n.d(t,{HR:()=>p,_y:()=>m});var o=()=>n(907258),i=()=>n(675133),r=()=>n(792057),a=()=>n(534177),s=()=>n(878523),l=()=>n(116008),c=()=>n(681634),d=()=>n(938045);const u=(0,n(69708).YK)({discardCommentConfirmationPrompt:{id:"newDiscussionMenu.discardCommentConfirmationDialog.prompt",defaultMessage:"Do you want to discard the comment?"},discardCommentButtonLabel:{id:"newDiscussionMenu.discardCommentConfirmationDialog.discardButton.label",defaultMessage:"Discard"},draftCommentConfirmationPromptTitle:{id:"newDiscussionMenu.draftCommentConfirmationDialogTitle.prompt",defaultMessage:"Finish your draft comment?"},draftCommentConfirmationStartingNewDescription:{id:"newDiscussionMenu.draftCommentConfirmationStartingNewDescription.prompt",defaultMessage:"You have a draft comment that will be lost if you start a new one"},draftCommentConfirmationNavigateAwayPromptDescription:{id:"newDiscussionMenu.draftCommentConfirmationNavigateAwayPromptDescription.prompt",defaultMessage:"You have a draft comment that will be lost if you leave the page"},returnToPageButtonLabel:{id:"newDiscussionMenu.discardCommentConfirmationDialog.returnToPage.label",defaultMessage:"Return to draft"}});function p(e){const{discussionInputStore:t,environment:n,discussionHelpers:o,reason:a}=e;l().A.isComposingNewDiscussion()?m({environment:n,reason:a??"navigating_away"}):o.hasCommentChanged(t)?(s().yO(n),r().ui({message:i().A.formatMessage(u.discardCommentConfirmationPrompt),showCancel:!0,handleCancel:()=>s().Ie(n),keepFocus:!0,items:[{label:i().A.formatMessage(u.discardCommentButtonLabel),color:"red",onAccept:()=>{s().QP(n),(0,c().c)()}}]})):(0,c().c)()}function m(e){const{environment:t}=e;if(!l().A.isDraftCommentOnValidSelection())return;const n=l().A.getDiscussionInputStore();s().yO(t),r().ui({message:i().A.formatMessage(u.draftCommentConfirmationPromptTitle),description:(()=>{switch(e.reason){case"starting_new":return i().A.formatMessage(u.draftCommentConfirmationStartingNewDescription);case"navigating_away":return i().A.formatMessage(u.draftCommentConfirmationNavigateAwayPromptDescription);default:(0,a().HB)(e.reason)}})(),keepFocus:!0,innerStyle:{textAlign:"center"},showCancel:!1,shouldRenderDraftCommentIcon:!0,items:[{label:i().A.formatMessage(u.returnToPageButtonLabel),buttonType:"solid",color:"blue",onAccept:()=>{(0,d().x)({currentBlockStore:o().default.state.mainEditorCurrentBlockStore,discussionInputStore:n,environment:t}),s().Ie(t)}},{label:i().A.formatMessage(u.discardCommentButtonLabel),color:"red",buttonType:"outline",onAccept:()=>{s().QP(t),(0,c().c)()}}]})}},409268:(e,t,n)=>{"use strict";n.d(t,{s:()=>r});n(898992),n(672577);var o=n.n(n(791611)),i=()=>n(961232);function r(e){const t=i().A.find((t=>t.store===e));if(t){const e=t.getContentWrapEl();if(e)return o()(e.innerText)}return 0}},412532:(e,t,n)=>{"use strict";n.d(t,{l:()=>i});n(296540);const o={viewBox:"0 0 16 16",fittedViewBox:"2.03 2.29 11.93 10.46",svg:(0,n(474848).jsx)("path",{d:"M13.165 12.75a.8.8 0 0 0 .69-1.203L8.692 2.693a.8.8 0 0 0-1.382 0l-5.165 8.854a.8.8 0 0 0 .691 1.203z"})},i=(0,n(340498).wt)("arrowCaretUpFillSmall",o,"fillSmall")},412975:(e,t,n)=>{"use strict";n.r(t),n.d(t,{arrowTurnDownLeftIcon:()=>i,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"2.12 4.12 14.76 12.16",directional:!0,svg:(0,n(474848).jsx)("path",{d:"M15.63 4.75a.625.625 0 1 1 1.25 0v5a2.125 2.125 0 0 1-2.125 2.125H4.264l3.333 3.333a.625.625 0 0 1-.884.884l-4.4-4.4a.625.625 0 0 1 0-.884l4.4-4.4a.625.625 0 0 1 .884.884l-3.333 3.333h10.49a.875.875 0 0 0 .876-.875z"})},i=(0,n(340498).wt)("arrowTurnDownLeft",o,"default")},419357:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>y,KF:()=>S,LG:()=>v,Zf:()=>b,yD:()=>h});var o=n(296540),i=()=>n(484714),r=()=>n(401497),a=()=>n(718827),s=()=>n(695115),l=()=>n(31511),c=()=>n(546926),d=()=>n(424400),u=()=>n(340498),p=()=>n(100622),m=()=>n(496603),f=()=>n(284371),g=n(474848);const v=30,h=28;function b(e){const{icon:t}=e;return t({fill:p().Tj.icon.secondary,width:u().Ev.sm,height:u().Ev.sm,flexGrow:0,flexShrink:0})}function S(e){const t=(0,i().WS)(),n=(0,r().eP)(),o=(0,r().IS)((()=>({outlineButton:{...(0,a().qq)({shape:"default",size:"sm",hasIconOnly:!0,isButtonGapEnabled:!0}),fontWeight:f().Wy.medium,lineHeight:1.2,border:`1px solid ${p().Tj.border.primaryTranslucent}`,background:e.hasBackground?p().Tj.background.primary:void 0},outlineButtonHovered:{background:p().Tj.background.secondary},outlineButtonPressed:{background:(0,a().yZ)({color:p().Tj.background.primary,mode:n})}})),[e.hasBackground,n]);return(0,g.jsx)(s().A,{size:"xs",colorVariant:"primary",...e,ariaLabel:e.ariaLabel,style:{...o.outlineButton,...e.style,height:t?v:h,width:t?v:h},hoveredStyle:o.outlineButtonHovered,pressedStyle:o.outlineButtonPressed})}const y=o.forwardRef((function({preventCaptureArrowShortcuts:e,preventCaptureDeleteWhenEmpty:t,preventCaptureClipboardShortcuts:i,preventCaptureSpacebarWhenEmpty:r,...a},s){const{left:l,right:u,inputLeft:p,inputRight:f,inputRightStyle:v,disableInput:h,inputOuterStyle:b,rightMobileEditLabel:S,mobileKeyboardOnDismiss:y,style:x,value:I,onChange:k,autosize:M,autosizeMinHeight:C,autosizeMaxHeight:T,customElementAttributes:_,disabled:j,format:B,id:P,placeholder:R,type:D,autoFocus:E,focus:V,focusInitial:F,focusAfterAnimation:L,forceShowClearButton:z,ignoreKeyboardMode:N,inputElementAttributes:O,inputStyle:H,isRightLastElementOfInput:U,maxlength:K,min:W,max:G,selectAll:Z,showClearButton:Y,suppressFocusRing:$,textarea:Q,textareaSubmitOnEnter:q,onBlur:X,onCancel:J,onClearButtonClick:ee,onClick:te,onFocus:ne,onKeyDown:oe,onSubmit:ie,...re}=a,[ae,se]=(0,o.useState)((()=>Boolean(V||F)));(0,o.useEffect)((()=>{void 0!==V&&se(V)}),[V]);const le=e?void 0:m().D_,ce=!t||I.length>0?m().D_:void 0,de=i?void 0:m().D_,ue=!r||I.length>0?m().D_:void 0,pe=(0,c().Tf)(),me=(0,o.useContext)(c().xu),fe=(0,o.useRef)(null),ge={value:I,onChange:k,autosize:M,autosizeMinHeight:C,autosizeMaxHeight:T,customElementAttributes:_,disabled:j,format:B,id:P,placeholder:R,type:D,autoFocus:E,focus:V,focusInitial:F,focusAfterAnimation:L,forceShowClearButton:z,ignoreKeyboardMode:N,inputElementAttributes:O,inputStyle:H,isRightLastElementOfInput:U,maxlength:K,min:W,max:G,selectAll:Z,showClearButton:Y,suppressFocusRing:$,textarea:Q,textareaSubmitOnEnter:q,onBlur:X,onCancel:J,onClearButtonClick:ee,onClick:te,onFocus:ne,onKeyDown:oe,onSubmit:ie};return(0,g.jsx)(n(782482).N,{debugName:"InputMenuItem",capture:!0,onUntab:m().D_,onTab:m().D_,onSelectAll:m().D_,onRedo:m().D_,onUndo:m().D_,onToggleBold:m().D_,onToggleItalics:m().D_,onToggleCode:m().D_,onCut:de,onCopy:de,onPaste:de,onKeypress:m().D_,onLeft:le,onRight:le,onDelete:ce,onBackspace:ce,onSpace:ue,children:n(726637).A.isMobile?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(d().Ay,{ref:s,...re,itemMarginLeft:pe?8:void 0,style:x,title:(0,g.jsx)(A,{ref:fe,left:l,right:u,inputLeft:p,inputRight:f,inputRightStyle:v,disableInput:h,inputOuterStyle:b,rightMobileEditLabel:S,isFocused:ae,setIsFocused:se,...ge})}),(0,g.jsx)(n(797324).A,{show:ae&&me.menuType!==c().gu.ActionSheet,onDismiss:y,inputRef:fe})]}):(0,g.jsx)(d().Ay,{ref:s,...re,left:l,right:u,isTokenTitle:!0,title:(0,g.jsx)(w,{ref:fe,disableInput:h,inputOuterStyle:b,inputRight:f,inputRightStyle:v,inputLeft:p,...ge}),style:{paddingTop:4,paddingBottom:4,...x}})})}));function x({rightMobileEditLabel:e,inputRef:t}){const r=(0,i().v3)(),s=(0,o.useCallback)((e=>{e.preventDefault();const o=t.current;o&&(0,n(375555).G)(r,o)}),[r,t]);return(0,g.jsx)(a().Ay,{onClick:s,style:{color:p().Tj.text.secondary},children:e})}const w=o.forwardRef((function(e,t){const{disabled:n,disableInput:o,inputOuterStyle:i,inputRight:r,inputRightStyle:a,inputLeft:s,min:c,textarea:d,...u}=e;return(0,g.jsx)(l().A,{...u,ref:t,disabled:n||o,style:{height:d?void 0:28,padding:"3px 6px",...i},left:s,right:r,rightStyle:a,min:c,textarea:d})})),A=o.forwardRef((function(e,t){const{left:i,right:r,inputLeft:a,inputRight:s,inputRightStyle:c,disableInput:d,inputOuterStyle:u,rightMobileEditLabel:p,isFocused:m,setIsFocused:f,disabled:v,showClearButton:h,onBlur:b,onFocus:S,...y}=e,w=(0,o.useCallback)((e=>{f(!1),b&&b(e)}),[b,f]),A=(0,o.useCallback)((e=>{f(!0),S&&S(e)}),[S,f]),I=(0,o.useRef)(null),k=(0,n(93583).A)(I,t),M=p&&!m?(0,g.jsx)(x,{rightMobileEditLabel:p,inputRef:I}):null;return(0,g.jsx)(l().A,{...y,ref:k,format:"transparent",style:{fontSize:16,...u},onFocus:A,onBlur:w,showClearButton:!1!==h,disabled:v||d,left:a||i,right:M||s||r,rightStyle:c})}))},424139:(e,t,n)=>{"use strict";n.r(t),n.d(t,{emojiFaceIcon:()=>r,iconDefinition:()=>i});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.26",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M8.045 11.706a.625.625 0 0 0-1.036.698A3.6 3.6 0 0 0 10.005 14c1.245 0 2.35-.637 2.996-1.596a.625.625 0 0 0-1.036-.698 2.37 2.37 0 0 1-1.96 1.044 2.36 2.36 0 0 1-1.96-1.044m-.68-2.041c.49 0 .88-.46.88-1.02s-.39-1.02-.88-1.02-.88.46-.88 1.02.39 1.02.88 1.02m6.15-1.02c0 .56-.39 1.02-.88 1.02s-.88-.46-.88-1.02.39-1.02.88-1.02.88.46.88 1.02"}),(0,o.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25M3.625 10a6.375 6.375 0 1 1 12.75 0 6.375 6.375 0 0 1-12.75 0"})]})},r=(0,n(340498).wt)("emojiFace",i,"default")},427636:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});n(296540);var o=()=>n(100622),i=n(474848);const r=function(e){const{botStore:t,avatarSize:r,shouldShowBadge:a,style:s,inline:l}=e,c=(0,n(69708).tz)(),d=(0,n(484714).Y0)(),u=(0,n(590526).K8)((()=>null==t?void 0:t.getDisplayName(c)),[t,c]),{outerStyle:p,avatarWrapStyle:m,badgeStyle:f}=(0,n(401497).IS)((()=>({outerStyle:{display:"flex",alignItems:"center",minWidth:0,...s},avatarWrapStyle:l?{width:"none",minHeight:"none",marginInlineEnd:6}:{marginInlineEnd:6},badgeStyle:{padding:"2px 6px",borderRadius:4,color:o().Tj.text.secondary,background:o().Tj.legacyDefaultSelectColor,fontSize:n(726637).A.isMobile?11:9,lineHeight:d.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em",marginInlineStart:8,marginTop:1}})),[s,l,d]);return(0,i.jsxs)("div",{style:p,children:[(0,i.jsx)("div",{style:m,children:(0,i.jsx)(n(256863).A,{botStore:t,size:r})}),(0,i.jsx)("div",{style:{...n(284371).RC},children:u}),a?(0,i.jsx)("div",{style:f,children:"Bot"}):void 0]})}},441467:(e,t,n)=>{"use strict";n.d(t,{DZ:()=>z,Ek:()=>K,hN:()=>O,i5:()=>H,of:()=>N});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(672577),n(803949);var o=()=>n(779315),i=()=>n(675133),r=()=>n(489295),a=()=>n(295633),s=()=>n(86159),l=()=>n(292985),c=()=>n(700500),d=()=>n(179034),u=()=>n(197959),p=()=>n(161479),m=()=>n(798880),f=()=>n(201980),g=()=>n(878523),v=()=>n(182641),h=()=>n(383594),b=()=>n(384944),S=()=>n(332751),y=()=>n(538527),x=()=>n(892632),w=()=>n(594794),A=()=>n(299545),I=()=>n(486666),k=()=>n(372154),M=()=>n(718957),C=()=>n(547149),T=()=>n(404783),_=()=>n(555776),j=()=>n(116008),B=()=>n(543225),P=()=>n(59320),R=()=>n(528787),D=()=>n(681634),E=()=>n(583824),V=()=>n(36088),F=()=>n(807060),L=()=>n(405981);const z=(0,n(69708).YK)({emojiPicker:{defaultMessage:"Reaction",id:"ReactionBar.emojiModalMenu.title"},emojiTitle:{id:"recordIcon.emojiTab.title",defaultMessage:"Emoji"}});function N(e){const{environment:t,blockStore:n,multiSelection:o,rect:r,formulasModule:a}=e;let l=r;if(!l){const e=s().get();if(!e)return;l=s().getRect(e)}if(!l)return;const c=l.width,d=l.height,u=l.right-c;j().A.setState({open:!0,rect:new DOMRect(u,l.top,c,d),type:"inline",content:"reaction",blockStore:n,blockId:n.id,multiSelection:o,emoji:void 0}),h().W(t,{originGap:4,originRect:l,popupWidth:I().jv,popupHeight:I().GF,isSmallWidth:!1,title:i().A.formatMessage(z.emojiPicker),currentTab:"emoji",onCancel:()=>j().A.reset(),tabs:[{type:"emoji",title:i().A.formatMessage(z.emojiTitle),hideRandomButton:!0,onChange:e=>{const n=j().A.state;n.open&&"reaction"===n.content&&(j().A.setState({...n,emoji:e}),H({environment:t,formulasModule:a}),h().I())}}]})}async function O(e){var t;const{environment:n,blockStore:i,multiSelection:r,rect:a,from:c,property_id:d}=e;if(j().A.hasContent())return void(0,L()._y)({environment:n,reason:"starting_new"});let u=a;if(!u){const e=s().get();if(!e)return;u=s().getRect(e)}if(!u)return;const m=u.width,f=u.height,v=u.right-m,h=new(T().A)(n,(0,p().e)(i.pointer.spaceId));j().A.setState({open:!0,rect:new DOMRect(v,u.top,m,f),type:"inline",content:"comment",blockStore:i,lastKnownBlockStore:i,blockId:i.id,multiSelection:r,lastEditables:(0,M().$W)(r),discussionInputStore:h,property_id:d,from:c}),(0,l().V)({element:null===(t=o().A.UpdateSidebarCommentScroller)||void 0===t?void 0:t.getNode(),environment:n,options:{top:0,behavior:"smooth"}}),_().A.setActiveWithSource("text_annotation"),S().I(),await(0,V().M)({discussionInputStore:h,environment:n}),g().z0(n,{from:c})}function H(e){const{environment:t,allowActionsWhileCommenting:n,skipOpeningDiscussion:o,formulasModule:i}=e,s=j().A.state;if(s.open){const e="comment"===s.content?s.property_id:void 0,l=j().A.getBlockStore()??j().A.getLastKnownBlockStore();if(j().A.hasContent()&&(!n||l))if("inline"===s.type)C().createAndCommit({userAction:"newDiscussionMenuActions.submitNewDiscussion",environment:t,canUndo:!0,perform:o=>{const i=function(e){const{environment:t,multiSelection:n,transaction:o,allowActionsWhileCommenting:i}=e,{id:s}=t.currentUser;if(!s)return;const l=i?j().A.getLastSelectedEditables():(0,M().$W)(n).filter((({store:e})=>e.table===d().ev));if(!l||0===l.length)return;const p=(0,r().zH)(l[0].store),m=(0,w().Z1)({environment:t,table:u().$Y,spaceId:p.pointer.spaceId}),g=[],v=new Set;l.forEach((({store:e,selection:n},i)=>{v.add(e.id);const s=(0,r().zH)(e);if(!(s instanceof a().B))return;const l=s.getType(),d=s.getFormat();if(l&&(0,c().pD)(l,d))return;let u=e.getValue();const p=f().xbM(u,n);y().Mw({environment:t,store:e,selection:p,annotation:[f().Ifu.Discussion,m],transaction:o}),u=e.getValue();const h=f().Ffo(u,p.startIndex,p.endIndex),b=0===i?[]:[f().Ey_("\n")];g.push(...b,...h)}));const h=(0,M().ZS)({multiSelection:n,filterCommonAncestors:!1,focus:void 0});if(h)for(const r of h.stores){if(v.has(r.id))continue;const e=r.getType(),t=r.getFormat();e&&(0,c().pD)(e,t)||(0,B().B)({blockStore:r,discussionId:m,transaction:o})}return{blockStore:p,context:g,discussionId:m}}({environment:t,multiSelection:s.multiSelection,transaction:o,allowActionsWhileCommenting:n});if(!i)return;const{context:p,blockStore:m,discussionId:v}=i;if("comment"===s.content){const i=s.discussionInputStore.state.textStore.getValue()||[],r=s.discussionInputStore.state.files,{discussionStore:a,commentStore:c}=(0,P().G)({createDiscussionArgs:{type:"default",context:p,property_id:e},blockStore:m,environment:t,transaction:o,commentTextValue:i,files:x().JC(r),discussionId:v});(0,B().B)({transaction:o,blockStore:m,discussionId:v});const{property_type:d,collection_id:u,collection_view_id:f,view_type:h,collection_view_block_id:b}=(0,F().q)(e,l);g().bJ(t,{discussion_id:a.id,discussion_type:a.getType(),comment_id:c.id,parent_block_id:a.getParentId(),from:j().A.state.open&&"comment"===j().A.state.content?j().A.state.from:void 0,property_id:e,property_type:d,collection_view_id:f,view_type:h,collection_id:u,collection_view_block_id:b}),n&&k().A.addNewDiscussionId(v)}else s.emoji&&U({context:p,blockStore:m,environment:t,transaction:o,icon:s.emoji,discussionId:v})},skipUpdatingEditedMetadata:!0});else if("block"===s.type)if("comment"===s.content){const o=s.discussionInputStore.state.textStore.getValue()||[],r=s.discussionInputStore.state.files;n?l&&C().createAndCommit({userAction:"newDiscussionMenuActions.submitNewDiscussion",environment:t,canUndo:!0,perform:n=>{(0,E().i)({environment:t,type:"default",blockStore:l,commentTextValue:o||[],files:r,transaction:n,property_id:e,formulasModule:i})},skipUpdatingEditedMetadata:!0}):C().createAndCommit({userAction:"newDiscussionMenuActions.submitNewDiscussion",environment:t,canUndo:!0,perform:n=>{(0,E().i)({environment:t,type:"default",blockStore:s.blockStore,commentTextValue:o||[],files:r,transaction:n,property_id:e,formulasModule:i})},skipUpdatingEditedMetadata:!0})}else{const e=t.currentUser.id,{emoji:n,blockStore:o}=s,i=A().O3(o,{recursivelyLoadAllDiscussions:!1}).find((e=>e.getReactions().length>0));n&&e&&C().createAndCommit({userAction:"newDiscussionMenuActions.submitNewDefaultDiscussion.addReaction",environment:t,canUndo:!0,perform:r=>{null!=i&&i.isDefined()?R().createReaction({environment:t,transaction:r,store:i,icon:n,currentActorPointer:{table:m().oo,id:e},discussionLocation:"block_menu"}):U({context:void 0,blockStore:o,environment:t,transaction:r,icon:n})},skipUpdatingEditedMetadata:!0})}(0,D().c)();const p=n?l&&l.getAssociatedCollectionStore():s.blockStore.getAssociatedCollectionStore();o||e||!p||v().B4({environment:t,blockStore:n?l??s.blockStore:s.blockStore,shouldFocusDiscussion:!0,analyticsFrom:"db_page_comments",rect:j().A.state.rect,recursivelyLoadAllDiscussions:!1})}}function U(e){const{context:t,blockStore:n,environment:o,transaction:i,icon:r}=e,a=e.discussionId??(0,w().Z1)({environment:o,table:u().$Y,spaceId:n.pointer.spaceId});if(void 0===o.currentUser.id)return;const s=b().vt({environment:o,table:"discussion",args:{type:"default",id:a,parent:n.pointer,context:t,space_id:(0,p().e)(n.pointer.spaceId)},inMemoryRecordCache:n.inMemoryRecordCache,transaction:i});(0,B().B)({transaction:i,blockStore:n,discussionId:s.id});const l={table:m().oo,id:o.currentUser.id};return R().createReaction({environment:o,transaction:i,store:s,icon:r,currentActorPointer:l,discussionLocation:"block_menu"}),s}function K(e){const{environment:t}=e;if(!t.currentUser.id)return;const n=j().A.getPropertyId();if(n){var o;const e=null===(o=j().A.getBlockStore())||void 0===o?void 0:o.getPropertyStore(n);if(e)return{blockStore:e,context:e.getValue()}}const i=j().A.getLastSelectedEditables();if(!i||0===i.length)return;const s=(0,r().zH)(i[0].store),l=[],d=new Set;return i.forEach((({store:e,selection:t},n)=>{d.add(e.id);const o=(0,r().zH)(e);if(!(o instanceof a().B))return;const i=o.getType(),s=o.getFormat();if(i&&(0,c().pD)(i,s))return;const u=e.getValue(),p=f().xbM(u,t),m=f().Ffo(u,p.startIndex,p.endIndex),g=0===n?[]:[f().Ey_("\n")];l.push(...g,...m)})),{blockStore:s,context:l}}},448801:(e,t,n)=>{"use strict";n.d(t,{i:()=>i});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);var o=()=>n(371562);o();function i(e,t){const n=o().create({arrays:{detectMove:!1,includeValueOnMove:!0}}).diff(e,t);if(!n)return{beforeOps:{},removeOps:new Set};let i=[],r=[];for(const o in n)"_t"!==o&&("_"===o[0]?i.push(parseInt(o.slice(1),10)):1===n[o].length&&r.push({index:parseInt(o,10),value:n[o][0]}));const a={},s=new Set,l=[...e];i=i.sort(((e,t)=>e-t));for(let o=i.length-1;o>=0;o--){const e=i[o],t=l.splice(e,1)[0];s.add(t)}r=r.sort(((e,t)=>e.index-t.index));for(let o=0;o<r.length;o++){const e=r[o];a[e.value]=l[e.index],l.splice(e.index,0,e.value)}return{beforeOps:a,removeOps:s}}},454503:(e,t,n)=>{"use strict";n.r(t),n.d(t,{arrowUTurnUpLeftIcon:()=>i,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"2.12 3.72 15.76 12.16",directional:!0,svg:(0,n(474848).jsx)("path",{d:"M7.592 4.792a.625.625 0 1 0-.884-.884l-4.4 4.4a.625.625 0 0 0 0 .884l4.4 4.4a.625.625 0 1 0 .884-.884L4.259 9.375H14a2.625 2.625 0 0 1 0 5.25h-1.42a.625.625 0 1 0 0 1.25H14a3.875 3.875 0 0 0 0-7.75H4.259z"})},i=(0,n(340498).wt)("arrowUTurnUpLeft",o,"default")},460957:(e,t,n)=>{"use strict";n.d(t,{E:()=>a});n(581454);var o=()=>n(201980),i=()=>n(718957),r=()=>n(29554);function a(e){const{multiSelection:t}=e;return(0,i().$W)(t).map((({store:e,selection:t})=>{const n=(0,o().RQ)(e.getValue()),i=(0,o().xbM)(n,t),{tokensInsideRange:a}=(0,o().AI5)(n,i.startIndex,i.endIndex);return(0,r().r4)(a,e)})).join("\n\n")}},462853:(e,t,n)=>{"use strict";n.d(t,{l:()=>r});var o=()=>n(617871);const i={[o().e1]:"collection_connected_property_figma",[o().Hd]:"collection_connected_property_google_drive",[o().ob]:"collection_connected_property_github",[o().k0]:"collection_connected_property_zendesk",[o().bh]:"collection_synced_database_github",[o().MN]:"collection_synced_database_asana",[o().Fo]:"collection_synced_database_gitlab",[o().me]:"collection_synced_database_jira",[o().F6]:"collection_synced_database_jira_workspace",[o().Fv]:"collection_synced_database_jira_datacenter",[o().mn]:"collection_synced_database_salesforce_workspace"};function r(e){if(e)return i[e]}},473541:(e,t,n)=>{"use strict";n.d(t,{w:()=>i});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"5.87 3.72 7.16 12.56",directional:!0,svg:(0,n(474848).jsx)("path",{d:"M6.131 9.381a.875.875 0 0 0 0 1.238l5.4 5.4a.875.875 0 1 0 1.238-1.238L7.987 10l4.782-4.781A.875.875 0 0 0 11.53 3.98z"})},i=(0,n(340498).wt)("arrowChevronSingleLeftFill",o,"fill")},482871:(e,t,n)=>{"use strict";n.d(t,{z:()=>d});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(430670),n(581454);var o=()=>n(770063),i=()=>n(898244),r=()=>n(448801),a=()=>n(179034),s=()=>n(722101),l=(n(354520),()=>n(496603));function c(e){const{collectionContextStore:t,collectionViewStore:n,transaction:r}=e,c=n.getPageSortStore(),d=c.getValue(),u=t.groupsStore.getAllGroupStates(),p=function(e){const{pageSort:t,currentResults:n}=e;if(!t||t.length<=i().WF)return[];const o=t.filter((e=>!n.has(e)));return l().sb([...o.reverse(),...l().o8(t).reverse()]).slice(0,t.length-i().WF)}({pageSort:d,currentResults:new Set(u.flatMap((e=>e.resultsStore.state.map((e=>e.id)))))});for(const i of p)s().TF({parentStore:c,childToRemoveStore:(0,o().v3)(c,{table:a().ev,id:i}),transaction:r})}function d(e){const{resultIds:t,collectionViewStore:n,collectionContextStore:l,transaction:d}=e,u=n.getPageSortStore(),p=u.getValue()||[],{beforeOps:m}=(0,r().i)(p,t.slice(0,i().WF));for(const[i,r]of Object.entries(m))if(r){const e=(0,o().v3)(n,{table:a().ev,id:r});s().nc({parentStore:u,insertStore:(0,o().v3)(n,{table:a().ev,id:i}),beforeStore:e,transaction:d})}else{const e=t.findIndex((e=>e===i)),r=t[e-1],l=r?(0,o().v3)(n,{table:a().ev,id:r}):void 0;s().WH({parentStore:u,insertStore:(0,o().v3)(n,{table:a().ev,id:i}),afterStore:l,transaction:d})}c({collectionContextStore:l,collectionViewStore:n,transaction:d})}},491848:(e,t,n)=>{"use strict";n.d(t,{w:()=>i});n(898992),n(672577);var o=()=>n(541199);function i({collectionContextStore:e,transaction:t}){const n="collectionTypedView"===e.contextTypeFromStoreState,i=e.databaseTypeFromStoreState,r=e.collectionStoresStore.state,a=r.find((e=>e.canEdit()||e.canEditCollection()||e.canEditContentOnly()))||r[0];!n&&a&&(0,o().e)({transaction:t,databaseType:i,collectionId:a.id,spaceId:a.getSpaceId()})}},497577:(e,t,n)=>{"use strict";n.d(t,{E:()=>r});var o=()=>n(401497),i=()=>n(100622);function r(e){const{size:t,style:n}=e;return(0,o().IS)((()=>({icon:{width:.6*t,height:.6*t,fill:i().Tj.text.secondary},iconContainer:{width:t,height:t,borderRadius:"100%",background:i().Tj.border.secondaryTranslucent,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,...n}})),[t,n])}},515918:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});n(296540);var o=()=>n(401497),i=()=>n(970236),r=()=>n(69708),a=n(474848);function s(e){const{style:t}=e,n=(0,o().IS)((()=>({badge:{letterSpacing:0,whiteSpace:"nowrap",width:"fit-content",...t}})),[t]);return(0,a.jsx)(i().E,{color:"blue",style:n.badge,content:(0,a.jsx)(r().sA,{id:"newBadgeComponent.label",defaultMessage:"New"})})}},517288:(e,t,n)=>{"use strict";n.d(t,{O:()=>c});var o=()=>n(675133),i=()=>n(383594),r=()=>n(486666),a=()=>n(129522),s=()=>n(116008),l=()=>n(441467);function c(e){const{environment:t,blockStore:n,rect:c,skipOpeningDiscussionOnSubmit:d,formulasModule:u}=e,p=c??a().K.getRect(n);if(!p)return;const m=p.width,f=p.height,g=p.right-m;s().A.setState({open:!0,rect:new DOMRect(g,p.top,m,f),type:"block",content:"reaction",blockStore:n,blockId:n.id,emoji:void 0}),i().W(t,{originGap:4,originRect:p,popupWidth:r().jv,popupHeight:r().GF,isSmallWidth:!1,title:o().A.formatMessage(l().DZ.emojiPicker),currentTab:"emoji",onCancel:()=>s().A.reset(),tabs:[{type:"emoji",title:o().A.formatMessage(l().DZ.emojiTitle),hideRandomButton:!0,onChange:e=>{const n=s().A.state;n.open&&"reaction"===n.content&&(s().A.setState({...n,emoji:e}),(0,l().i5)({environment:t,skipOpeningDiscussion:d,formulasModule:u}),i().I())}}]})}},523195:(e,t,n)=>{"use strict";n.d(t,{o:()=>i});var o=()=>n(486674);function i(){const e=(0,o().a)();return!e||!e.isLocked()}},526278:(e,t,n)=>{"use strict";n.r(t),n.d(t,{arrowStraightLeftIcon:()=>i,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"2.37 3.97 15.26 12.06",directional:!0,svg:(0,n(474848).jsx)("path",{d:"M2.411 9.79a.6.6 0 0 1 .147-.232l5.4-5.4a.625.625 0 1 1 .884.884L4.509 9.375H17a.625.625 0 1 1 0 1.25H4.509l4.333 4.333a.625.625 0 1 1-.884.884l-5.4-5.4a.62.62 0 0 1-.147-.651"})},i=(0,n(340498).wt)("arrowStraightLeft",o,"default")},528787:(e,t,n)=>{"use strict";n.r(t),n.d(t,{createReaction:()=>w,toggleReaction:()=>x});n(898992),n(354520),n(672577),n(581454),n(737550);var o=()=>n(770063),i=()=>n(97879),r=()=>n(785082),a=()=>n(343666),s=()=>n(197959),l=()=>n(204384),c=()=>n(161479),d=()=>n(798880),u=()=>n(534177),p=()=>n(878523),m=()=>n(722101),f=()=>n(384944),g=()=>n(279922),v=()=>n(594794),h=()=>n(547149),b=()=>n(741817),S=()=>n(725332),y=()=>n(807060);function x(e){const{discussionLocation:t,environment:n,transaction:a,store:m,icon:f}=e,v=function({store:e,icon:t}){const n=(0,o().G_)(e,e.pointer,"reactions").getValue();if(void 0===n)return;return n.map((t=>{const n=i().L.createChildStore(e,{table:l().ez,id:t,spaceId:(0,c().e)(e.pointer.spaceId)});if(n.isDefined())return n})).filter(u().O9).find((e=>e.getIcon()===t))}({store:m,icon:f});if(void 0===n.currentUser.id)return;const y={table:d().oo,id:n.currentUser.id};return null!=v&&v.isDefined()?function({store:e,actorPointer:t,transaction:n,environment:o,discussionLocation:a}){var l;const c={store:e,actorPointer:t,transaction:n,environment:o,discussionLocation:a},d=e.getParentStore(),u=(null==d?void 0:d.table)===s().$Y?d:null==d?void 0:d.getParentStore(),m=(null===(l=e.getActors())||void 0===l?void 0:l.some((e=>e.id===t.id)))??!1;u&&A(u,d)&&(0,S().U)({transaction:n,discussionStore:u});return m?(function(e){var t,n;const{store:o,actorPointer:a,discussionLocation:l,transaction:c,environment:d}=e;if(!o.isDefined())return;const u=o.getParentStore(),m=(null==u?void 0:u.table)===s().$Y?u:null==u?void 0:u.getParentStore(),f=r().eR.includes(l),v=null==m||null===(t=m.getParentStore())||void 0===t?void 0:t.getNavigableBlockStore(),S=i().L.getUserVisibleReactions(u),y=1===S.length&&1===o.getActors().length&&o.getActors()[0].id===d.currentUser.id;p().fq({environment:d,reaction_value:o.getIcon(),comment_id:o.getParentId(),discussion_id:null==m?void 0:m.id,discussion_type:null==m?void 0:m.getType(),parent_block_id:null==m?void 0:m.getParentId(),parent_collection_id:null==m||null===(n=m.getParentStore())||void 0===n?void 0:n.getParentCollectionIdUpToTwoLevels(),reaction_count:o.getActors().length??0,from:l,...f&&{inbox_session_id:g().Ay.state.sessionId,notification_page_id:null==v?void 0:v.id}});const x=o.getModel();h().applyOperation({transaction:c,store:o,operation:x.ops.removeActor(a)}),y&&u&&u.table===s().$Y&&(0,b().v)({environment:d,discussionStore:u,transaction:c})}(c),"Removed"):(function(e){var t,n;const{store:o,actorPointer:i,discussionLocation:a,transaction:l,environment:c}=e;if(!o.isDefined())return;const d=o.getParentStore(),u=(null==d?void 0:d.table)===s().$Y?d:null==d?void 0:d.getParentStore(),m=r().eR.includes(a),f=null==u||null===(t=u.getParentStore())||void 0===t?void 0:t.getNavigableBlockStore();p().MP({environment:c,reaction_value:o.getIcon(),comment_id:o.getParentId(),discussion_id:null==u?void 0:u.id,discussion_type:null==u?void 0:u.getType(),parent_block_id:null==u?void 0:u.getParentId(),parent_collection_id:null==u||null===(n=u.getParentStore())||void 0===n?void 0:n.getParentCollectionIdUpToTwoLevels(),reaction_count:o.getActors().length??0,from:a,...m&&{inbox_session_id:g().Ay.state.sessionId,notification_page_id:null==f?void 0:f.id}});const v=o.getModel();h().applyOperation({transaction:l,store:o,operation:v.ops.appendActor(i)})}(c),"Added")}({environment:n,store:v,actorPointer:y,transaction:a,discussionLocation:t}):(w({environment:n,transaction:a,store:m,icon:f,currentActorPointer:y,discussionLocation:t}),"Added")}function w({environment:e,transaction:t,store:n,icon:i,currentActorPointer:a,discussionLocation:d}){var u,h;const b=(0,v().JH)({environment:e,table:l().ez,spaceId:(0,c().e)(n.pointer.spaceId)}),x=n.table===s().$Y?n:n.getParentStore(),w=r().eR.includes(d),I=null==x||null===(u=x.getParentStore())||void 0===u?void 0:u.getNavigableBlockStore(),k=null==x?void 0:x.getPropertyId(),M=null==x?void 0:x.getParentStore(),{property_type:C,collection_id:T,collection_view_id:_,view_type:j,collection_view_block_id:B}=(0,y().q)(k,M);p().MP({environment:e,reaction_value:i,comment_id:n.id,discussion_id:null==x?void 0:x.id,discussion_type:null==x?void 0:x.getType(),parent_block_id:null==x?void 0:x.getParentId(),parent_collection_id:null==x||null===(h=x.getParentStore())||void 0===h?void 0:h.getParentCollectionIdUpToTwoLevels(),reaction_count:0,from:d,...w&&{inbox_session_id:g().Ay.state.sessionId,notification_page_id:null==I?void 0:I.id},property_type:C,collection_id:T,collection_view_id:_,view_type:j,collection_view_block_id:B});const P=f().vt({environment:e,table:b.table,args:{id:b.id,spaceId:b.spaceId,commentId:n.id,icon:i,actorPointer:a},inMemoryRecordCache:n.inMemoryRecordCache,transaction:t}),R=(0,o().G_)(n,n.pointer,"reactions");m().BC({parentStore:R,appendStore:P,transaction:t}),x&&A(x,n)&&(0,S().U)({transaction:t,discussionStore:x})}function A(e,t){var n;if(!e||!t||t.table!==a().SN)return!1;const o=null===(n=e.getUserSeenRecordStore())||void 0===n?void 0:n.getLastSeenAt();return!o||o<t.getCreatedTime()}},529099:(e,t,n)=>{"use strict";n.r(t),n.d(t,{aiFaceIcon:()=>r,iconDefinition:()=>i});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"4.13 2.52 13.27 14.61",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M12.758 9.976a1.178 1.178 0 1 0 .377-2.326 1.178 1.178 0 0 0-.377 2.326M6.547 8.97a1.178 1.178 0 1 0 .377-2.327 1.178 1.178 0 0 0-.377 2.326"}),(0,o.jsx)("path",{d:"M10.573 5.554a3.917 3.917 0 0 1 6.743.035.625.625 0 1 1-1.08.63 2.667 2.667 0 0 0-4.591-.023l-5.398 9.015 4.192.68a.625.625 0 0 1-.2 1.233l-5.102-.827a.625.625 0 0 1-.436-.938zM4.36 3.517a3.92 3.92 0 0 1 5.572.356.625.625 0 1 1-.945.818 2.67 2.67 0 0 0-3.795-.243.625.625 0 1 1-.833-.931"})]})},r=(0,n(340498).wt)("aiFace",i,"default")},536583:(e,t,n)=>{"use strict";n.d(t,{d:()=>i});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"2.88 2.32 14.24 15.36",svg:(0,n(474848).jsx)("path",{d:"M9.294 2.325h3.103c.484 0 .948.192 1.29.534l2.897 2.898c.343.342.535.806.535 1.29v5.903a1.825 1.825 0 0 1-1.825 1.825H12.53v1.075a1.825 1.825 0 0 1-1.825 1.825h-6A1.825 1.825 0 0 1 2.88 15.85v-8.8c0-1.008.817-1.825 1.825-1.825H7.47V4.15c0-1.008.817-1.825 1.825-1.825M9.1 5.76l2.897 2.897c.342.342.534.806.534 1.29v3.578h2.763a.575.575 0 0 0 .575-.575V7.3h-1.975a1.75 1.75 0 0 1-1.75-1.75V3.575h-2.85a.575.575 0 0 0-.575.575v1.318q.208.12.38.292m6.16.44-2.016-2.016V5.55c0 .359.29.65.65.65zm-10.554.275a.575.575 0 0 0-.575.575v8.8c0 .318.258.575.575.575h6a.575.575 0 0 0 .575-.575V10.2H9.306a1.75 1.75 0 0 1-1.75-1.75V6.475zm3.95.609V8.45c0 .359.291.65.65.65h1.366z"})},i=(0,n(340498).wt)("docOnDoc",o,"default")},555102:(e,t,n)=>{"use strict";n.d(t,{BX:()=>M,Jv:()=>I,Kf:()=>x,WM:()=>S,Xd:()=>T,Xw:()=>_,bX:()=>h,uP:()=>w,yQ:()=>C});n(944114),n(898992),n(354520),n(803949),n(581454);var o=()=>n(906745),i=()=>n(242422),r=()=>n(158489),a=()=>n(416504),s=()=>n(179034),l=()=>n(155792),c=()=>n(201980),d=()=>n(534177),u=()=>n(799832),p=()=>n(594794),m=()=>n(460957),f=()=>n(968172),g=()=>n(712505),v=()=>n(718957);const h=new(n(140934).ComputedStore)((()=>{const{sidebarSpaceStore:e,currentUserStore:t,sidebarSpaceViewStore:o,mainEditorCurrentBlockStore:i}=n(907258).default.state;if(e&&t&&o)return{spaceStore:e,userStore:t,spaceViewStore:o,blockStore:i,peekStore:g().default.state.open?g().default.state.targetStore:void 0,workflowStore:(0,n(207214).k)(e.environment)}}),{debugName:"defaultInferenceContextStore"});function b(e){const t={};if(e.isCollectionView()){const n=(0,u().U)(e),o=null==n?void 0:n.collectionViewStore();o&&(t[e.id]=o.id)}else e.getContentStores().forEach((e=>{if(e.isCollectionView()){const n=(0,u().U)(e),o=null==n?void 0:n.collectionViewStore();o&&(t[e.id]=o.id)}}));return t}function S(e){const{environment:t,surface:n,inferenceContext:r,config:s,invokedFromBlockId:c,checklistId:d,checklistStepId:u}=e,{userStore:m,spaceStore:g,spaceViewStore:v,blockStore:h,peekStore:S,workflowStore:y}=r,x=(0,p().Z1)({environment:t,table:l().mS,spaceId:g.id}),w={...h&&h.isCollectionView()?{collectionViewBlockId:h.id,visibleCollectionViewIds:b(h)}:void 0,...h&&!h.isCollectionView()&&"personal_home_page"!==h.getType()&&"daily_brief_reminder"!==n?{blockId:h.id,visibleCollectionViewIds:b(h)}:void 0,...S?{peekBlockId:S.id,visibleCollectionViewIds:b(S)}:void 0,...y?{workflowId:y.id}:void 0},A={};if("workflow"!==s.type||!s.isCustomAgent){const e=v.getSettings(),t=null==e?void 0:e.agent_personalization_settings;var I;if(t)t.name&&(A.agentName=t.name),null!==(I=t.customization_items)&&void 0!==I&&I[0]&&(A.agentAccessory=t.customization_items[0]),t.context_page_id&&(A.context_page_id=t.context_page_id)}if(i().default.checkGate({gateName:"workflows_inference_replay"}))return{id:x,type:"context",value:{timezone:"America/Los_Angeles",userName:"Test User",userEmail:"test@example.com",userId:"test-user-id",spaceName:"Test Space",spaceId:g.id,spaceViewId:v.id,currentDatetime:"2024-01-01T00:00:00.000Z",surface:n,...w,invokedFromBlockId:c,..."onboarding_checklist"===n&&d&&u?{checklistId:d,checklistStepId:u}:{},...A}};const k=i().default.checkGate({gateName:"agent_user_session_context"})?function(e){const{spaceId:t,limit:n=10}=e,o=f().A.getWithoutSubscribing(t);return o.map((({pageId:e,visitedAt:t})=>({pageId:e,visitedAt:t}))).slice(0,n)}({spaceId:g.id}):void 0;return{id:x,type:"context",value:{timezone:(0,a().P)(),userName:m.getName(),userId:m.id,userEmail:m.getEmail(),spaceName:g.getName(),spaceId:g.id,spaceViewId:v.id,currentDatetime:o().DateTime.now().toISO(),surface:n,...w,invokedFromBlockId:c,..."onboarding_checklist"===n&&d&&u?{checklistId:d,checklistStepId:u}:{},...A,recentPageVisits:k}}}function y(e){const{environment:t,spaceStore:n,config:o}=e;return{id:(0,p().Z1)({environment:t,table:l().mS,spaceId:n.id}),type:"config",value:o}}function x(e){const{environment:t,spaceStore:n,value:i,userStore:r}=e,a=A(i);return{id:(0,p().Z1)({environment:t,table:l().mS,spaceId:n.id}),type:"user",value:a,userId:r.id,createdAt:o().DateTime.now().toISO()}}function w(e){const{environment:t,spaceStore:n,actualMessage:i,displayMessage:r,userStore:a}=e,s=A(i)??[],c=A(r);return{id:(0,p().Z1)({environment:t,table:l().mS,spaceId:n.id}),type:"user-injected",actualMessage:s,displayMessage:c,userId:a.id,createdAt:o().DateTime.now().toISO()}}function A(e){if(e)return(0,c().bBR)((0,c().ooo)(e))}function I({environment:e,spaceStore:t,userStore:n,promptType:o,value:i,locale:r,args:a}){return{id:(0,p().Z1)({environment:e,table:l().mS,spaceId:t.id}),type:"agent-prebuilt-prompt",promptType:o,userId:n.id,createdAt:Date.now(),value:i,locale:r,isEdited:!1,args:a}}const k=1200;function M(e){const{environment:t,spaceId:n,pointers:o,selectedBlockStores:i,textSelection:r,blockSelectionContext:a,textSelectionContext:c}=e;let d,u;if(a)d=a;else if(i&&i.length>0){const e=(0,v().BO)(i);e&&(d={type:"blocks",value:i.map((e=>e.pointer)),text:(0,m().E)({mode:"editing",multiSelection:e,forceExtendAnnotations:{}}).slice(0,k)})}if(c?u=c:r&&r.start.store.pointer.table===s().ev&&r.end.store.pointer.table===s().ev&&(u={type:"text",value:{start:{pointer:r.start.store.pointer,index:r.start.index},end:{pointer:r.end.store.pointer,index:r.end.index}},text:(0,m().E)({mode:"editing",multiSelection:r,forceExtendAnnotations:{}}).slice(0,k)}),0!==o.length||d||u)return{id:(0,p().Z1)({environment:t,table:l().mS,spaceId:n}),type:"user-specified-context",value:{pointers:o,blockSelection:d,textSelection:u}}}function C(e){const{activeRecordPointers:t,inactiveRecordPointers:n,environment:o,recordMap:i,spaceStore:a}=e;return{activeRecordPointers:t,inactiveRecordPointers:n,id:(0,p().Z1)({environment:o,spaceId:a.id,table:l().mS}),threadRecordMap:i&&i.getSize()>0?(0,r().he)(i):void 0,type:"agent-integration"}}function T(e){const{environment:t,inferenceContext:n,config:o,addSteps:i,surface:r,invokedFromBlockId:a,checklistId:s,checklistStepId:l}=e,c=[y({environment:t,spaceStore:n.spaceStore,config:o}),S({environment:t,inferenceContext:n,surface:r,config:o,invokedFromBlockId:a,checklistId:s,checklistStepId:l})];return i&&c.push(...i),c.filter(d().O9)}function _(e){const{environment:t,spaceId:n,message:o,notificationType:i="info",metadata:r}=e;return{id:(0,p().Z1)({environment:t,table:l().mS,spaceId:n}),type:"system-notification",message:o,notificationType:i,metadata:r}}},560595:(e,t,n)=>{"use strict";n.d(t,{f:()=>a});var o=()=>n(232615),i=()=>n(496603),r=()=>n(486674);function a(){const e=(0,r().a)(),t=o().default.state;if("editing"!==t.mode)return!1;const n=t.multiSelection.start.store;return Boolean(e&&e.id===n.id&&(e.getBlockTitleStore()===n||i().n4(e.getBlockTitleStore().path,n.path)))}},563692:(e,t,n)=>{"use strict";n.r(t),n.d(t,{iconDefinition:()=>o,xMarkFillSmallIcon:()=>i});n(296540);const o={viewBox:"0 0 16 16",fittedViewBox:"3.03 3.03 9.94 9.94",svg:(0,n(474848).jsx)("path",{d:"M12.73 4.33a.75.75 0 1 0-1.06-1.06L8 6.94 4.33 3.27a.75.75 0 1 0-1.06 1.06L6.94 8l-3.67 3.67a.75.75 0 1 0 1.06 1.06L8 9.06l3.67 3.67a.75.75 0 0 0 1.06-1.06L9.06 8z"})},i=(0,n(340498).wt)("xMarkFillSmall",o,"fillSmall")},569397:(e,t,n)=>{"use strict";n.r(t),n.d(t,{arrowStraightRightSmallIcon:()=>i,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 16 16",fittedViewBox:"2.12 3.05 11.76 9.9",directional:!0,svg:(0,n(474848).jsx)("path",{d:"M9.372 3.238a.625.625 0 1 0-.884.884l3.253 3.253H2.75a.625.625 0 0 0 0 1.25h8.991l-3.253 3.253a.625.625 0 0 0 .884.884l4.32-4.32a.625.625 0 0 0 0-.884z"})},i=(0,n(340498).wt)("arrowStraightRightSmall",o,"small")},580648:(e,t,n)=>{"use strict";n.d(t,{o:()=>c});n(296540);var o=()=>n(590526),i=()=>n(914462),r=()=>n(69708),a=()=>n(173783),s=()=>n(187820),l=n(474848);function c(e){const{group:t}=e,n=e.size??20,c=(0,r().tz)(),d=(0,o().K8)((()=>{if(t&&t.icon)return{pointer:t.pointer,icon:t.icon}}),[t]),u=(0,o().K8)((()=>(0,i().n)({intl:c,permissionGroupModel:t})),[c,t]);return(0,l.jsx)("div",{children:d?(0,l.jsx)(s().B6,{disabled:!0,size:n,icon:d,isEmptyPage:!1,title:u}):(0,l.jsx)(a().A,{size:n})})}},583690:(e,t,n)=>{"use strict";n.d(t,{AC:()=>m,I2:()=>u,YC:()=>p});n(296540);var o=()=>n(396896),i=()=>n(807449),r=()=>n(493552),a=()=>n(349679),s=()=>n(995847),l=()=>n(69708),c=n(474848);function d(e){const{enabled:t,labelIfEnabled:n,labelIfDisabled:l}=e;return(0,c.jsx)(o().fI,{gap:4,alignItems:"center",children:t?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(i().I,{icon:a().checkmarkSmallIcon,size:"sm",colorPalette:"blue",colorVariant:"accentPrimary"}),(0,c.jsx)(r().D,{styleKey:"captionRegular",colorVariant:"secondary",children:n})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(i().I,{icon:s().xMarkSmallIcon,size:"sm",colorVariant:"tertiary"}),(0,c.jsx)(r().D,{styleKey:"captionRegular",colorVariant:"tertiary",children:l})]})})}function u(e){const t="none"!==e;return[(0,c.jsx)(d,{enabled:t&&e.read_content,labelIfEnabled:(0,c.jsx)(l().sA,{id:"capabilitiesTooltip.mixedAccess.readContent.enabled",defaultMessage:"Can read content"}),labelIfDisabled:(0,c.jsx)(l().sA,{id:"capabilitiesTooltip.mixedaccess.readContent.disabled",defaultMessage:"Cannot read content"})},"read_content"),(0,c.jsx)(d,{enabled:t&&e.insert_content,labelIfEnabled:(0,c.jsx)(l().sA,{id:"capabilitiesTooltip.mixedaccess.insertContent.enabled",defaultMessage:"Can insert content"}),labelIfDisabled:(0,c.jsx)(l().sA,{id:"capabilitiesTooltip.mixedaccess.insertContent.disabled",defaultMessage:"Cannot insert content."})},"insert_content"),(0,c.jsx)(d,{enabled:t&&e.update_content,labelIfEnabled:(0,c.jsx)(l().sA,{id:"capabilitiesTooltip.mixedaccess.updateContent.enabled",defaultMessage:"Can update content"}),labelIfDisabled:(0,c.jsx)(l().sA,{id:"capabilitiesTooltip.mixedaccess.updateContent.disabled",defaultMessage:"Cannot update content"})},"update_content"),(0,c.jsx)(d,{enabled:t&&e.insert_comment,labelIfEnabled:(0,c.jsx)(l().sA,{id:"capabilitiesTooltip.insertComment.enabled",defaultMessage:"Can comment"}),labelIfDisabled:(0,c.jsx)(l().sA,{id:"capabilitiesTooltip.insertComment.disabled",defaultMessage:"Cannot comment"})},"insert_comment"),(0,c.jsx)(d,{enabled:t&&e.read_comment,labelIfEnabled:(0,c.jsx)(l().sA,{id:"capabilitiesTooltip.readComment.enabled",defaultMessage:"Can read comments"}),labelIfDisabled:(0,c.jsx)(l().sA,{id:"capabilitiesTooltip.readComment.disabled",defaultMessage:"Cannot read comments"})},"read_comment")]}function p(e){return[(0,c.jsx)(d,{enabled:e.read_user_without_email,labelIfEnabled:(0,c.jsx)(l().sA,{id:"capabilitiesTooltip.userAccess.readUsers.enabled",defaultMessage:"Can view users"}),labelIfDisabled:(0,c.jsx)(l().sA,{id:"capabilitiesTooltip.userAccess.readUsers.disabled",defaultMessage:"Cannot view users"})},"read_user_without_email"),(0,c.jsx)(d,{enabled:e.read_user_with_email,labelIfEnabled:(0,c.jsx)(l().sA,{id:"capabilitiesTooltip.userAccess.readUserEmailAddresses.enabled",defaultMessage:"Can view user email addresses"}),labelIfDisabled:(0,c.jsx)(l().sA,{id:"capabilitiesTooltip.userAccess.readUserEmailAddresses.disabled",defaultMessage:"Cannot view user email addresses"})},"read_user_with_email")]}function m(e){return[(0,c.jsx)(d,{enabled:e.link_preview,labelIfEnabled:(0,c.jsx)(l().sA,{id:"capabilitiesTooltip.linkPreview.enabled",defaultMessage:"Can preview links."}),labelIfDisabled:(0,c.jsx)(l().sA,{id:"capabilitiesTooltip.linkPreview.disabled",defaultMessage:"Cannot preview links."})},"link_preview"),(0,c.jsx)(d,{enabled:e.synced_database,labelIfEnabled:(0,c.jsx)(l().sA,{id:"capabilitiesTooltip.syncedDatabase.enabled",defaultMessage:"Can sync databases."}),labelIfDisabled:(0,c.jsx)(l().sA,{id:"capabilitiesTooltip.syncedDatabase.disabled",defaultMessage:"Cannot sync databases."})},"synced_database")]}},589407:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ellipsisIcon:()=>i,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"2.62 8.62 14.76 2.76",svg:(0,n(474848).jsx)("path",{d:"M4 11.375a1.375 1.375 0 1 0 0-2.75 1.375 1.375 0 0 0 0 2.75m6 0a1.375 1.375 0 1 0 0-2.75 1.375 1.375 0 0 0 0 2.75m6 0a1.375 1.375 0 1 0 0-2.75 1.375 1.375 0 0 0 0 2.75"})},i=(0,n(340498).wt)("ellipsis",o,"default")},609316:(e,t,n)=>{"use strict";n.d(t,{V:()=>o});const o=(0,n(583835).Dv)("importFile")},613016:(e,t,n)=>{"use strict";n.d(t,{a:()=>i});var o=()=>n(907258);function i(){const{sidebarSpaceStore:e}=o().default.getState();return e?e.id:void 0}},625194:(e,t,n)=>{"use strict";n.d(t,{m:()=>a});var o=n(296540),i=()=>n(96330),r=n(474848);const a=o.memo((function(e){const{textValue:t}=e,n=(0,o.useMemo)((()=>(0,i().X1)((0,i().eC)(t))),[t]);return(0,r.jsx)("span",{children:n})}))},631438:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>te});var o=n(296540),i=()=>n(590526),r=()=>n(232615),a=()=>n(807990),s=(n(898992),n(672577),()=>n(755877)),l=()=>n(578510),c=()=>n(484714),d=()=>n(401497),u=()=>n(887957),p=()=>n(555776),m=()=>n(863484),f=()=>n(836724),g=()=>n(792485),v=()=>n(26697),h=()=>n(206267),b=()=>n(69708),S=()=>n(100622),y=()=>n(314529);var x=()=>n(516430),w=()=>n(87017),A=()=>n(478726),I=()=>n(299545),k=()=>n(938201),M=()=>n(518489),C=()=>n(77246),T=()=>n(547149),_=n(474848);const j=(0,b().YK)({ariaLabelApple:{id:"block.selectableAddMenu.ariaLabel.apple",defaultMessage:"Click to add below. Option-click to add a block above"},ariaLabelWindows:{id:"block.selectableAddMenu.ariaLabel.windows",defaultMessage:"Click to add below. Alt-click to add a block above"}}),B=(0,o.forwardRef)((function({store:e,nodeRect:t,containerRect:o,selectable:r},s){const l=(0,b().tz)(),d=(0,c().v3)(),u=(0,c().WS)(),p=(0,g().S)(),m=(0,i().K8)((()=>{var t;return"editor"===e.getRole()||"read_and_write"===e.getRole()||"edit"===(null==p||null===(t=p.publicEditModeStore.state)||void 0===t?void 0:t.permission)}),[null==p?void 0:p.publicEditModeStore,e]),S=(0,i().K8)((()=>{var t,n;return"comment_only"===(null===(t=e.getNavigableBlockStore({skipCurrent:!0}))||void 0===t?void 0:t.getRole())||"comment"===(null==p||null===(n=p.publicEditModeStore.state)||void 0===n?void 0:n.permission)}),[null==p?void 0:p.publicEditModeStore,e]),B=(0,i().K8)((()=>"suggest"===C().Uv.getMode(e)),[e]),D=(0,i().K8)((()=>e.isFirstBlockInCalloutV2Block()),[e]),E=(0,i().K8)((()=>{var t;const o=p&&(0,n(696746).Nh)(p.pageStore.id),i=e.getType();return(!i||!["column_list","external_object_instance_page"].includes(i))&&(!u&&(!(0,k().r)(e)||"collection"===(null===(t=e.getParentStore())||void 0===t?void 0:t.table))&&(m||S&&B)&&!e.isNavigableAncestorExternallyImportedPage()&&!o&&!D&&!e.isPersonProfile())}),[S,m,D,u,B,p,e]),V=(0,i().K8)((()=>{var t;return null===(t=e.getSpaceStore())||void 0===t?void 0:t.getFreezeSettings()}),[e]),F="active"===(0,n(973454).p)(V),L=(0,n(677610).y)();return!E||F?null:(0,_.jsx)(v().m,{placement:"bottom",delayThreshold:300,renderTooltip:()=>(0,_.jsx)(R,{}),render:i=>(0,_.jsx)(n(718827).Ay,{ref:s,disallowTabbing:!0,onClick:()=>{const t=(0,n(135168).f)(e);if(!(0,n(957763).E)(d,t))return(0,n(598729).Q)(d,t);!function(e,t,o){const i="above"===o,r=C().Uv.getMode(t),s=f().T.findSelectablesFromStore(t).find((e=>Boolean(e.props.onInsertRowBelow)));if((0,A().fc)(t))return;i?s&&s.props.onInsertRowAbove?T().createAndCommit({userAction:"SelectableAddMenu.handleClick.onInsertRowBelow",environment:e,canUndo:!0,perform:e=>{s.props.onInsertRowAbove&&s.props.onInsertRowAbove({transaction:e})}}):T().createAndCommit({environment:e,userAction:"SelectableAddMenu.handleClick.addAbove",canUndo:!0,perform:n=>{const o=w().insertTextAbove({environment:e,blocks:[t],transaction:n,skipAnalytics:!0});if("suggest"===r&&o){const t=x().RR(e,n,o);x().tM(n,o,{id:h().JW(),type:"insert",discussionId:t.id}),x().c3({environment:e,transaction:n,discussionStore:t,addModifiedBlockIdsAfter:[o.id]})}}}):I().wm(t)?(0,n(905073).z)({environment:e,blockStore:t,insertedTextBlockLocation:"none",editSelection:M().h,getRectFromStore:f().T.getRectFromStore.bind(f().T)}):s&&s.props.onInsertRowBelow?T().createAndCommit({userAction:"SelectableAddMenu.handleClick.onInsertRowBelow",environment:e,canUndo:!0,perform:e=>{s.props.onInsertRowBelow&&s.props.onInsertRowBelow({transaction:e})}}):T().createAndCommit({environment:e,userAction:"SelectableAddMenu.handleClick.addBelow",canUndo:!0,perform:n=>{const o=w().insertTextBelow({environment:e,blocks:[t],transaction:n,skipAnalytics:!0});if("suggest"===r&&o){const t=x().RR(e,n,o);x().tM(n,o,{id:h().JW(),type:"insert",discussionId:t.id}),x().c3({environment:e,transaction:n,discussionStore:t,addModifiedBlockIdsAfter:[o.id]})}}});(function(e){(0,y().DO_NOT_USE_trackLegacy)(e,"click_add_menu")})(e),a().default.reset()}(d,e,(0,n(744619).r)().option?"above":"below")},style:P(e,d,t,o,r,L),ariaLabel:l.formatMessage(d.device.isApple?j.ariaLabelApple:j.ariaLabelWindows),...i,children:(0,_.jsx)(n(807449).I,{icon:n(617668).plusIcon})})})}));function P(e,t,n,o,i,r){const a=(0,m().qg)({marginItemType:"plus_button",store:e,environment:t,nodeRect:n,containerRect:o,selectable:i});return{display:"flex",alignItems:"center",justifyContent:"center",fill:S().Tj.icon.tertiary,position:"absolute",insetInlineStart:a,width:24,height:24,borderRadius:4,pointerEvents:"auto",...r?{}:{cursor:"-webkit-grab"}}}function R(){const e=(0,c().v3)(),t={color:S().Tj.text.inverseSecondary};return(0,_.jsxs)("div",{style:{textAlign:"center"},children:[(0,_.jsx)(b().sA,{defaultMessage:"Click <mediumcolor>to add below</mediumcolor>",id:"block.selectableAddMenu.tooltip.addBlockBelow",values:{mediumcolor:e=>(0,_.jsx)("span",{style:t,children:e})}}),(0,_.jsx)("div",{children:e.device.isApple?(0,_.jsx)(b().sA,{defaultMessage:"Option-click <mediumcolor>to add above</mediumcolor>",id:"block.selectableAddMenu.tooltip.addAbove",values:{mediumcolor:e=>(0,_.jsx)("span",{style:t,children:e})}}):(0,_.jsx)(b().sA,{defaultMessage:"Alt-click <mediumcolor>to add a block above</mediumcolor>",id:"block.selectableAddMenu.tooltip.addAbove.windows",values:{mediumcolor:e=>(0,_.jsx)("span",{style:t,children:e})}})})]})}n(354520),n(737550);var D=()=>n(726637),E=()=>n(700500);const V={viewBox:"0 0 16 16",fittedViewBox:"2.12 2.57 11.75 11.7",svg:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("path",{d:"M8 4.575a.625.625 0 0 0-.625.625v1.375H6a.625.625 0 1 0 0 1.25h1.375V9.2a.625.625 0 0 0 1.25 0V7.825H10a.625.625 0 1 0 0-1.25H8.625V5.2A.625.625 0 0 0 8 4.575"}),(0,_.jsx)("path",{d:"M4 2.575c-1.036 0-1.875.84-1.875 1.875v5.5c0 1.036.84 1.875 1.875 1.875h.466v1.822a.625.625 0 0 0 1.019.485l2.84-2.307H12c1.036 0 1.875-.84 1.875-1.875v-5.5c0-1.035-.84-1.875-1.875-1.875zM3.375 4.45c0-.345.28-.625.625-.625h8c.345 0 .625.28.625.625v5.5c0 .345-.28.625-.625.625H8.102a.63.63 0 0 0-.394.14l-1.992 1.619V11.2a.625.625 0 0 0-.625-.625H4a.625.625 0 0 1-.625-.625z"})]})},F=(0,n(340498).wt)("commentAddSmall",V,"small");const L=(0,o.forwardRef)((function(e,t){const s=(0,c().v3)(),l=(0,b().tz)(),{selectable:u,store:f,containerRect:g}=e,h=(0,i().K8)((()=>f.isFirstBlockInCalloutV2Block()),[f]),S=(0,i().K8)((()=>{var e;if(!u||D().A.isMobile||!u.props.shouldShowCommentMenu||h)return!1;if(Boolean(n(94953).A.getFirstSelectedDiscussionId()||n(372154).A.getFramePageFirstSelectedDiscussionId()||p().A.state.isActivelyComposing))return!1;if(f.getDiscussionStores().filter((e=>!e.getResolved())).length>0)return!1;if(n(116008).A.getBlockStore()===f)return!1;const t=f.getType();if(t&&["video","image"].includes(t))return!1;if("toggle"===t&&!n(468484).A.isOpen(f.id)&&(0,I().O3)(f,{recursivelyLoadAllDiscussions:!0}).length>0)return!1;if((0,k().O)(f)||f.isEmptyTitle())return!1;const o="empty"!==r().default.state.mode&&r().default.state.multiSelection;if(o&&(0,n(77311).k)(o))return!0;return!(o?(null===(e=(0,n(718957).ZS)({multiSelection:o,filterCommonAncestors:!1,focus:"end"}))||void 0===e?void 0:e.stores)??[]:[]).some((e=>e.id===f.id))}),[f,u,h]),y=(0,i().K8)((()=>{var e;const t=(0,n(124007).Z)(),o=null==t||null===(e=t.getContentWrapEl())||void 0===e?void 0:e.getBoundingClientRect();return(0,m().jU)({marginItemType:"add_comment",nodeRect:o,containerRect:g})}),[g]),x=(0,d().IS)((()=>({container:{position:"relative",insetInlineEnd:y},iconButton:{paddingInlineStart:6,paddingInlineEnd:6}})),[y]),w=(0,o.useCallback)((async()=>{if(f.isType(E().uP)){const e=f.getBlockTitleStore(),t=a().default.state,o=t.isOpen?t.selectableBoundingRect:void 0,i=n(543119).m(e);if(i){const t=await n(862292).T.formulas.load();n(441467).hN({environment:s,blockStore:f,multiSelection:{start:{index:i.startIndex,store:e},end:{index:i.endIndex,store:e}},rect:o,from:"right_margin",formulasModule:t})}}else(0,n(730307).l)({environment:s,blockStore:f,from:"right_margin"})}),[s,f]),A=(0,o.useCallback)((e=>{e?p().A.setHoverWithSource("right_margin_button"):p().A.resetHoverSource("right_margin_button")}),[]),M=(0,o.useCallback)((()=>A(!0)),[A]),C=(0,o.useCallback)((()=>A(!1)),[A]);return S?(0,_.jsx)("div",{style:x.container,onMouseDown:n(519200).t,children:(0,_.jsx)(v().m,{placement:"bottom",delayThreshold:300,renderTooltip:()=>(0,_.jsx)(b().sA,{defaultMessage:"Comment",id:"selectableCommentMenu.commentPrompt.tooltip"}),render:e=>(0,_.jsx)("div",{onMouseOver:M,onMouseLeave:C,children:(0,_.jsx)(n(695115).A,{ref:t,ariaLabel:l.formatMessage({id:"selectableCommentMenu.iconButton",defaultMessage:"Comment"}),disallowTabbing:!0,icon:F,style:x.iconButton,onClick:w,...e})})})}):null}));var z=()=>n(988083),N=()=>n(250910);var O=()=>n(546926),H=()=>n(736847),U=()=>n(863687),K=()=>n(419357),W=()=>n(962036),G=()=>n(232930),Z=()=>n(206051);const Y=(0,b().YK)({filterActions:{defaultMessage:"Search actions…",id:"selectableHoverMenu.filterActions.placeholder"}});function $(e){const{hasEditorPermissions:t,isWorkspaceAdmin:r,store:a,onDismiss:s,containerRef:l,query:d,setQuery:u}=e,p=(0,c().v3)(),m=(0,c().WS)(),f=(0,i().K8)((()=>Z().default.state.stores),[]),v=(0,g().S)(),h=(0,i().K8)((()=>{var e;return{environment:p,blocks:Z().default.state.stores.length?Z().default.state.stores:[a],originRect:null===(e=l.current)||void 0===e?void 0:e.getBoundingClientRect(),publicEditMode:void 0,analyticsFrom:"selection_menu",pageContext:v}}),[p,a,l,v]),b=(0,i().K8)((()=>(0,k().r)(a)),[a]),S=(0,i().K8)((()=>(0,A().yU)(a)),[a]),[y,x]=(0,n(791177).$)(),w=(0,o.useCallback)((e=>{const t=f[0];if(t){const o=t.getType();if(o){const i=(0,n(799832).U)(t),r=(0,n(390650).sl)(i)||{};(0,n(278634).N)(p,{analyticsName:e.analyticsName,action_type:e.analyticsActionType,from:"selection_menu",block_id:t.id,block_type:o,is_toggleable:(0,E().Yt)(o,t.getFormat()),parent_collection_id:t.getParentCollectionIdUpToTwoLevels(),...r})}}e.closeParentMenu&&s()}),[p,s,f]),I=(0,i().K8)((()=>a.isCollectionView()),[a]),M=(0,n(891078).i0)(a),C=!m&&t&&!b&&!S&&!M,T=C&&(0,_.jsx)(Q,{filter:d,setQuery:u,inputComboboxProps:y});let j;j=m?{menuType:O().gu.ActionSheet,header:T}:{menuType:O().gu.Popup,width:265,header:T};const B=(0,i().K8)((()=>void 0!==a.getAssociatedCollectionStore()),[a]),P=(0,i().K8)((()=>a.isInLibraryBlock()),[a]),R=(0,i().K8)((()=>P?U().Bf:B?U().SH:(0,U().A2)()),[P,B]);return(0,_.jsxs)(n(890492).A,{...j,children:[(0,_.jsx)(n(636714).A,{filter:d,initialFocus:d?0:void 0,sections:R,context:h,onAccept:w,comboboxProps:C?x:void 0,shouldShowBlockTypeTitle:!0}),d||!t&&!r?void 0:(0,_.jsx)(n(381684).g,{store:a}),d?void 0:(0,_.jsx)(n(817148).A,{store:a}),!d&&I?(0,_.jsx)(q,{}):void 0]})}function Q(e){const{filter:t,setQuery:n,inputComboboxProps:o}=e,i=(0,b().tz)();return(0,_.jsx)(H().A,{isInput:!0,children:(0,_.jsx)(K().Ay,{value:t,onChange:e=>n(e.target.value),focus:!D().A.isMobile||void 0,focusAfterAnimation:!0,placeholder:i.formatMessage(Y.filterActions),preventCaptureDeleteWhenEmpty:!0,preventCaptureClipboardShortcuts:!0,preventCaptureSpacebarWhenEmpty:!0,...o})})}function q(){return(0,_.jsx)(H().A,{topBorder:!0,children:(0,_.jsx)(W().g,{title:(0,_.jsx)(b().sA,{defaultMessage:"Learn about databases",id:"blocks.hoverBlockMenu.collectionHelpButton"}),href:(0,G().x)("guides.database"),analyticsFrom:"selectable_hover_menu"})})}const X=(0,o.forwardRef)((function(e,t){var r;const{selectable:s,store:l,isWorkspaceAdmin:u,nodeRect:p,containerRect:f}=e,v=(0,c().v3)(),h=(0,c().WS)(),b=(0,g().S)(),S=(0,o.useRef)(null),x=(0,i().K8)((()=>(0,n(444570).zb)()),[]),w=n(327994).j,A=(0,i().K8)((()=>(0,m().qg)({marginItemType:"drag_handle",store:l,environment:v,nodeRect:p,containerRect:f,selectable:s})),[l,v,p,f,s]),I=(0,i().K8)((()=>(0,k().r)(l)&&!l.isInsideCollection()),[l]),M=(0,i().K8)((()=>{var e;return"editor"===l.getRole()||"read_and_write"===l.getRole()||"edit"===(null==b||null===(e=b.publicEditModeStore.state)||void 0===e?void 0:e.permission)}),[null==b?void 0:b.publicEditModeStore,l]),T=(0,i().K8)((()=>"suggest"===C().Uv.getMode(l)),[l]),j=(0,i().K8)((()=>l.isInLibraryBlock()),[l]),B=(0,i().K8)((()=>{var e;return(0,n(288157).w$)()&&(null==s||null===(e=s.props)||void 0===e?void 0:e.canDrag)}),[null==s||null===(r=s.props)||void 0===r?void 0:r.canDrag]),P=j?B:M&&!I&&!T,R=(0,d().IS)((()=>({div:{position:"absolute",insetInlineStart:A,width:x,height:w,pointerEvents:"auto",cursor:P?"-webkit-grab":void 0},popup:{width:265,overflow:"hidden"}})),[A,x,w,P]),[D,E]=(0,o.useState)(""),V=(0,i().K8)((()=>{const e=a().default.state;return e.isOpen&&e.menuIsOpen&&e.currentStore===l}),[l]);(0,o.useEffect)((()=>()=>{V&&a().default.reset()}),[]);const F=(0,o.useCallback)((()=>{const e=a().default.state,t=z().A.state;if(e.isOpen){E(""),h&&t.phase===z().i.shown?z().A.onHide((()=>a().default.setState({...e,menuIsOpen:!0}))):a().default.setState({...e,menuIsOpen:!0}),(0,n(970501).L)({environment:v,store:l});const o=l.getType();o&&function(e,t){(0,y().DO_NOT_USE_trackLegacy)(e,"click_selection_menu",{block_type:t.blockType})}(v,{blockType:o})}}),[v,h,l]),L=(0,o.useCallback)((()=>a().default.reset()),[]);return(0,i().K8)((()=>{if(!s||!s.props.shouldShowHoverMenu||h)return!1;const e=l.getType();return!e||!["column_list"].includes(e)}),[l,s,h])?(0,_.jsx)("div",{style:R.div,ref:S,children:(0,_.jsx)(n(127833).zD,{popupType:h?N().z.SlideUp:N().z.Popup,open:V,placementToOrigin:"left",alignmentToOrigin:"center",onDismiss:L,originGap:5,forceInitialInbound:!0,style:R.popup,render:()=>(0,_.jsx)($,{hasEditorPermissions:M,isWorkspaceAdmin:u,store:l,onDismiss:L,containerRef:S,query:D,setQuery:E}),origin:(0,_.jsx)(n(692763).Ay,{className:n(882722).LpV,store:l,isHoverMenu:!0,canDrag:P,canSelect:!1,analyticsName:"selection_menu",disableForceTouch:!0,disableHorizontalDragEdgeScroll:!0,children:(0,_.jsx)(n(923744).j,{ref:t,width:x,height:w,disallowTabbing:!0,onClick:F,disableDrag:!P})}),trapFocus:V})}):null})),J=o.forwardRef((function(e,t){var r;const g=(0,c().v3)(),{exactTargetBlockStore:v,container:h}=e,{targetSelectable:b,targetBlockStore:S}=(0,i().K8)((()=>({targetSelectable:f().T.findSelectablesFromStore(v).find((e=>Boolean(e.props.shouldShowHoverMenu||e.props.shouldShowCommentMenu))),targetBlockStore:v})),[v]),[y,x]=(0,o.useState)(null==b||null===(r=b.getNode())||void 0===r?void 0:r.getBoundingClientRect()),w=(0,i().K8)((()=>{if(!v)return!1;if(null!=v&&v.pathIsDead())return!0;const e=(0,n(231940).N)(v);return e&&(0,n(715142).pQ)(e.id)}),[v]);(0,o.useEffect)((()=>{if(!b)return;const e=b.getNode();if(!e)return;const t=()=>{x(e.getBoundingClientRect())},n=(0,u().NM)(e);n&&(0,s().P)(n,"scroll",t);const o=(0,u().T8)(e);return o&&o!==n&&(0,s().P)(o,"scroll",t),t(),()=>{n&&(0,l().O)(n,"scroll",t),o&&(0,l().O)(o,"scroll",t)}}),[b]);const A=(0,i().K8)((()=>(0,n(511393).h)(g)),[g]),I=(0,i().K8)((()=>{var e;return a().default.state.isOpen&&(null===(e=a().default.state.currentStore)||void 0===e?void 0:e.id)===S.id}),[S]),k=(0,i().K8)((()=>{if(!a().default.isRightMarginCommentHovered())return!1;const e=S.getNavigableBlockStore();return!Boolean(null==e?void 0:e.isDraft())}),[S]),M=!k&&(null==b?void 0:b.props.shouldShowHoverMenu)&&I,C=(0,i().K8)((()=>S.isInLibraryBlock()),[S]),T=M&&!C;(0,o.useEffect)((()=>{!k&&p().A.state.isHovered&&p().A.resetHoverSource("right_margin_button")}),[k]);const j=null==h?void 0:h.getBoundingClientRect(),P=(0,i().K8)((()=>(0,m().ac)({marginItemType:"selectable_hover_menu_overlay_item",store:S,nodeRect:y,containerRect:j,environment:g})),[S,y,j,g]),R=(0,d().IS)((()=>({container:{position:"absolute",top:P,...e.style},commentMenu:{marginInlineStart:4}})),[e.style,P]);return w?null:(0,n(691809).A)((e=>(0,_.jsxs)("div",{style:R.container,ref:t,...e,children:[k?(0,_.jsx)("div",{style:R.commentMenu,children:(0,_.jsx)(L,{selectable:b,store:S,containerRect:j})}):void 0,M?(0,_.jsx)(X,{selectable:b,store:S,isWorkspaceAdmin:A,nodeRect:y,containerRect:j}):void 0,T?(0,_.jsx)(B,{store:S,nodeRect:y,containerRect:j,selectable:b}):void 0]})))})),ee={position:"absolute",top:0,insetInlineStart:0,zIndex:99};const te=function(e){const t=(0,o.useRef)(null),{isOpen:s,container:l,currentStore:c}=(0,i().K8)((()=>{const e=a().default.getState();return{isOpen:e.isOpen,container:e.isOpen&&e.container,currentStore:e.isOpen&&e.currentStore}}),[]),d=(0,i().K8)((()=>!(!s||l!==e.selectableContainer)&&((!n(170722).A.state.isActive||"editing"!==r().default.state.mode||!(0,n(843427).K)(r().default.state.multiSelection))&&"closed"===n(525569).default.state.type)),[s,l,e.selectableContainer]),u=(0,i().K8)((()=>{if(s&&l===e.selectableContainer)return c}),[c,s,l,e.selectableContainer]),p=(0,o.useCallback)((()=>d&&u?[(0,_.jsx)(n(756117).A,{tag:J,animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},exactTargetBlockStore:u,container:t.current??void 0,config:{timingFunction:"ease-out"}},u.id)]:[]),[u,d]);return(0,_.jsx)("div",{style:ee,ref:t,children:(0,_.jsx)(n(93263).A,{className:n(686131).zN,render:p})})}},636714:(e,t,n)=>{"use strict";n.d(t,{A:()=>x});n(898992),n(354520),n(581454);var o=n(296540),i=()=>n(590526),r=()=>n(182412),a=()=>n(683021),s=()=>n(498521),l=()=>n(449279),c=()=>n(663639),d=()=>n(922931),u=()=>n(535393),p=()=>n(736847),m=()=>n(452004),f=()=>n(69708),g=()=>n(231536),v=()=>n(671894),h=n(474848);const b=25,S=200,y=n(757695).Store.createClass(b,{name:"limitStore"});function x({topBorder:e,context:t,onAccept:n,onFocus:x,empty:w,keyboardPriority:A,disableKeyboard:I,initialFocus:k,onEmptyEnter:M,comboboxProps:C,useLimit:T,onFilteredSectionsChange:_,filter:j,sections:B,menuListStore:P,resetInitialFocusOnSectionChangeAlways:R,resetFocusOnMouseOut:D,role:E,showNoResultsMessage:V,onFooterEnter:F,filterSections:L,flattenSectionsOnSearch:z,renderItemStyles:N,shouldShowBlockTypeTitle:O}){const H=(0,i().uB)(void 0,y),U=(0,i().uB)(P,m().$),[K,W,G]=(0,i().K8)((()=>{let e=0;const n=(0,v().js)({sections:j&&L?L:B,context:t,query:j||"",shouldShowBlockTypeTitle:O});for(const t of n)e+=t.actions.length;return[T?(0,v().Le)(n,H.state):n,e,n]}),[B,t,j,T,H,L,O]);(0,o.useEffect)((()=>{a().Ay.state.open&&a().rA.setState(0===G.length)}),[G]),(0,o.useEffect)((()=>{null==_||_(K)}),[_,K]);const Z=(0,o.useRef)(j),Y=(0,o.useCallback)((e=>{e<S&&H.state<W&&H.setState(H.state+b)}),[H,W]),$=Boolean(z&&j),Q=(0,o.useMemo)((()=>{const e=new Map;for(const t of G)if(t.key!==r().IZ)for(const n of t.actions)e.set(n.key,t.title);return e}),[G]),{menuItemActionMap:q,menuItemSectionKeyMap:X,menuListSections:J}=(0,o.useMemo)((()=>{const o=new Map,i=new Map,a=K.map((a=>{const s=a.key.toString();return{key:a.key,render:t=>a.render({...t,topBorder:!$&&(0!==t.index||Boolean(e)),title:a.title,hideTitle:$}),items:a.actions.map((e=>{e.lazyDependencyKeys&&(0,g().G)(...e.lazyDependencyKeys);const l={key:e.key,render:(o,i)=>{const l=a.key===r().IZ?Q.get(e.key):a.title,c=$||a.key===r().IZ;return e.render(o,t,{onAccept:(e,t,o)=>{null==n||n(e,t,o,s)},onFocus:i.onFocus,sectionTitle:l,extendItemTitle:c,styles:N})},action:({event:n})=>{e.action(t,n)}};return o.set(l,e),i.set(l,s),l}))}}));return{menuItemActionMap:o,menuItemSectionKeyMap:i,menuListSections:a}}),[K,$,e,Q,t,N,n]);(0,o.useEffect)((()=>{if(j!==Z.current&&0===k){Z.current=j;if(Boolean(F)&&0===u().i2(J))return d().rd({store:U});U.setState({...U.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}}),[j,k,J,U,F]);const ee=(0,o.useCallback)(((e,o)=>{if(n){const r=q.get(e),a=X.get(e);if(r){var i;if(null!==(i=r.isDisabled)&&void 0!==i&&i.call(r,t))return;n(r,t,o.event,a,o.index)}}}),[n,t,q,X]),te=(0,o.useCallback)((e=>{let n;var o;(e.indexLocal&&(n=u().SG(e.indexLocal,J)),e.indexGlobal)&&(n=null===(o=u().e7(e.indexGlobal,J))||void 0===o?void 0:o.item);if(!n)return;const i=q.get(n),r=X.get(n);i&&(null==x||x(i,t,r))}),[q,X,x,J,t]);return(0,h.jsxs)(h.Fragment,{children:[Boolean(V)&&0===K.length?(0,h.jsx)(p().A,{children:(0,h.jsx)(l().u,{title:w||(0,h.jsx)(f().sA,{id:"action.search.noResults",defaultMessage:"No results"})})}):void 0,(0,h.jsx)(c().A,{type:c().O.Vertical,role:E,priority:A,store:U,disableKeyboard:I,sections:J,initialFocus:k,onEmptyEnter:M,onAccept:ee,onFocus:te,comboboxProps:C,resetInitialFocusOnSectionChangeAlways:R,resetFocusOnMouseOut:D,onFooterEnter:F}),T?(0,h.jsx)(s().A,{onChange:Y}):void 0]})}},645266:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});class o extends(()=>n(757695))().Store{getInitialState(){return{open:!1}}}const i=new o},654774:(e,t,n)=>{"use strict";n.d(t,{x:()=>d});var o=()=>n(115438),i=()=>n(906536),r=()=>n(232615),a=()=>n(355110),s=()=>n(184033),l=()=>n(238121),c=()=>n(718957);function d(e){var t;(0,o().l)();const{environment:n,store:d,canSelectAllBlocks:u}=e,p=(0,s().s)(d),m={startIndex:0,endIndex:p?p.endIndex:0};u&&"empty"!==r().default.state.mode&&(0,l().G)(null===(t=(0,c().cR)("textSelectionActions",r().default.state.multiSelection))||void 0===t?void 0:t.selection,m)?(0,a().U)(n):(0,i().t)({store:d,selection:m})}},655923:(e,t,n)=>{"use strict";n.r(t),n.d(t,{arrowStraightDownIcon:()=>i,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"3.97 2.37 12.06 15.26",svg:(0,n(474848).jsx)("path",{d:"M10.625 3a.625.625 0 1 0-1.25 0v12.491l-4.333-4.333a.625.625 0 1 0-.884.884l5.4 5.4a.62.62 0 0 0 .884 0l5.4-5.4a.625.625 0 1 0-.884-.884l-4.333 4.333z"})},i=(0,n(340498).wt)("arrowStraightDown",o,"default")},658012:(e,t,n)=>{"use strict";n.r(t),n.d(t,{canMoveDown:()=>Ue,canMoveUp:()=>He,canShowMobileActionBar:()=>je,canTriggerBlockActions:()=>Ve,canTriggerTextActions:()=>Fe,getOpenPropertyValueOverlaySchema:()=>pt,handleAi:()=>Ge,handleComment:()=>Je,handleDatabaseDiscoveryModal:()=>nt,handleDelete:()=>Ke,handleDismissKeyboard:()=>ct,handleEmojiPicker:()=>rt,handleEquation:()=>tt,handleFilePicker:()=>at,handleIndent:()=>Le,handleLink:()=>Xe,handleMention:()=>We,handleMoreClick:()=>st,handleMoveDown:()=>Oe,handleMoveUp:()=>Ne,handleReaction:()=>et,handleRedo:()=>Qe,handleSetMenu:()=>Ye,handleSetSubMenu:()=>$e,handleTeamspaceSelector:()=>lt,handleTemplate:()=>it,handleTemplates:()=>ot,handleTextAnnotation:()=>Ze,handleUndo:()=>qe,handleUnindent:()=>ze,isEditingCollectionTextProperty:()=>Pe,mobileActionBarRenderAvailability:()=>Be,shouldPreserveExistingSelection:()=>Ee,shouldShowTemplatesButton:()=>Re,shouldShowTextActions:()=>De,trackItemTap:()=>dt,updateDebugShouldShow:()=>_e});n(18107),n(944114),n(967357),n(898992),n(581454),n(737550);var o=()=>n(907258),i=()=>n(242422),r=()=>n(726637),a=()=>n(908006),s=()=>n(110750),l=()=>n(675133),c=()=>n(201794),d=()=>n(489295),u=()=>n(598790),p=()=>n(587031),m=()=>n(172489),f=()=>n(77311),g=()=>n(232615),v=()=>n(960955),h=()=>n(713998),b=()=>n(165358),S=()=>n(416504),y=()=>n(179034),x=()=>n(797573),w=()=>n(201980),A=()=>n(328523),I=()=>n(160568),k=()=>n(901265),M=()=>n(448619),C=()=>n(501666),T=()=>n(829300),_=()=>n(44729),j=()=>n(495262),B=()=>n(391214),P=()=>n(261156),R=()=>n(662453),D=()=>n(286088),E=()=>n(483730),V=()=>n(37450),F=()=>n(543886),L=()=>n(441467),z=()=>n(517288),N=()=>n(730307),O=()=>n(158658),H=()=>n(523195),U=()=>n(560595),K=()=>n(401040),W=()=>n(499764),G=()=>n(460957),Z=()=>n(993130),Y=()=>n(673477),$=()=>n(952412),Q=()=>n(905487),q=()=>n(440024),X=()=>n(518489),J=()=>n(582783),ee=()=>n(747674),te=()=>n(206051),ne=()=>n(644914),oe=()=>n(749687),ie=()=>n(875827),re=()=>n(857048),ae=()=>n(525569),se=()=>n(777932);const le={pageTemplateModalActions:new(n(79926).O2)("pageTemplateModalActions",(async()=>Promise.all([n.e(35530),n.e(9773),n.e(36556),n.e(40537),n.e(27992),n.e(63452),n.e(66249),n.e(92845),n.e(44854),n.e(87017),n.e(47668),n.e(48486),n.e(34208)]).then(n.bind(n,69660))))};var ce=()=>n(127581),de=()=>n(295304),ue=()=>n(654774),pe=()=>n(184033),me=()=>n(341880),fe=()=>n(318880),ge=()=>n(718957),ve=()=>n(547149),he=()=>n(839754),be=()=>n(922952),Se=()=>n(373444),ye=()=>n(98244),xe=()=>n(892632),we=()=>n(144440),Ae=()=>n(120672),Ie=()=>n(18387),ke=()=>n(299545);var Me=()=>n(645266),Ce=()=>n(900442);let Te=!1;function _e(e){Te=e}function je(e,t,n,o){var a;const{device:l,TabbedRouterStore:c}=e,d=Te||Boolean(Ce().A.state.enableShouldShowDebugging);if(!r().A.isMobile)return ut(d,"canShowMobileActionBar = false (reason: !config.isMobile)"),!1;if((0,Z().A)(e)&&i().default.checkGate({gateName:"mab_consider_navigation_top_page"})){const e=(0,s().Xz)(c.state);if("web"!==e.type||"page"!==(0,s().AE)(e).route.name)return ut(d,"canShowMobileActionBar = false (reason: top page is not a web page)"),!1}if(Q().default.state.open)return ut(d,"canShowMobileActionBar = false (reason: quickFindOpen)"),!1;if(!l.isMobileNative&&Y().Ay.state.open)return ut(d,"canShowMobileActionBar = false (reason: !device.isMobileNative && MentionMenuStore.state.open)"),!1;if(g().default.isEditingComment())return ut(d,"canShowMobileActionBar = false (reason: TextSelectionStore.isEditingComment())"),!1;const u=(0,D().SB)(ae().default.state),p=null===(a=E().default.getActiveSession())||void 0===a?void 0:a.hasPendingOperations();if(u||p)return ut(d,"canShowMobileActionBar = false (reason: isCompletionsPopupActive || hasPendingEdits)"),!1;if(!F().A.state.isOpen&&e.device.isMobileNative&&v().A.hasOpenPopups())return ut(d,"canShowMobileActionBar = false (reason: !PageTemplateModalStore.state.open && environment.device.isMobileNative && GlobalPopupStore.hasOpenPopups() > 0)"),!1;if(F().A.state.isOpen){const t=pt(F().A.state);if(!t)return ut(d,"canShowMobileActionBar = false (reason: PageBlockPropertyValueOverlayStore.state.isOpen && propertySchema === undefined)"),!1;switch(t.type){case"text":if(t.ai_inference)return ut(d,"canShowMobileActionBar = false (reason: PageBlockPropertyValueOverlayStore.state.isOpen && propertySchema.ai_inference !== undefined)"),!1;break;case"number":if(!function(e){const{device:t}=e,{isIOS:n,isIpad:o}=t;return n&&!o&&i().default.checkGate({gateName:"ios_number_property_mab"})}({device:e.device}))return ut(d,'canShowMobileActionBar = false (reason: PageBlockPropertyValueOverlayStore.state.isOpen && propertySchema.type == "number")'),!1;break;default:return ut(d,`canShowMobileActionBar = false (reason: PageBlockPropertyValueOverlayStore.state.isOpen && propertySchema.type == "${t.type}`),!1}}if(t.isFormBlock())return!1;const m="editing"===g().default.state.mode;if(ne().KB(e)&&oe().sidebarOpenStore.state&&!m)return ut(d,"canShowMobileActionBar = false (reason: sidebarHelpers.sidebarIsExpanded(environment) && sidebarOpenStore.get() && !isCurrentlyEditing"),!1;if(!(0,H().o)())return ut(d,"canShowMobileActionBar = false (reason: !currentPageIsNotLocked())"),!1;return!!(0,O().p)({environment:e,blocks:[t],publicEditMode:n,pageContext:o})||(ut(d,"canShowMobileActionBar = false (reason: !_canEdit)"),!1)}function Be(e,t,n,o){var i,r;const a=Te||Boolean(Ce().A.state.enableShouldShowDebugging);if(!je(e,t,n,o))return ut(a,"shouldShowMobileActionBar = false (reason: !canShowMobileActionBar)"),{canShow:!1,canShowNativeBar:!1,shouldShow:!1};const s=e.device.isMobileNative;if(null!==(i=Ce().A.state.menu)&&void 0!==i&&i.type&&!(0,U().f)())return ut(a,"shouldShowMobileActionBar = true (reason: NativeMobileActionBarStore && NativeMobileActionBarStore.state.menu?.type"),{canShow:!0,canShowNativeBar:s,shouldShow:!0};const l=g().default.state;if("editing"!==l.mode)return ut(a,"shouldShowMobileActionBar = false (reason: TextSelectionStore.state.mode !== editing"),{canShow:!0,canShowNativeBar:s,shouldShow:!1};const c=l.multiSelection,d=(0,ge().$W)(c),u=d.some((e=>e.editable.props.disableStyleAnnotations)),p=d.some((e=>e.editable.props.disableMobileActionBar)),m=d.some((e=>e.editable.props.disableComment));return d&&p?(ut(a,"shouldShowMobileActionBar = false (reason: !renderedBlocks || !disableMobileActionBar)"),{canShow:!0,canShowNativeBar:s,shouldShow:!1}):(ut(a,"shouldShowMobileActionBar = true"),{shouldShow:!0,canShowNativeBar:s,disableStyleAnnotations:u,disableComment:m,isEmpty:(0,f().k)(c)&&0===c.end.index&&0===(null===(r=(0,pe().s)(c.end.store))||void 0===r?void 0:r.endIndex)})}function Pe(){var e;const t=F().A.state;if(!t.isOpen)return!1;const n=null===(e=t.collectionContextStore)||void 0===e?void 0:e.normalizedSchemaStore.state;if(!n)return!1;const o=(0,h()._g)({schema:n,property:t.property});return"text"===(null==o?void 0:o.type)}function Re(e){const{environment:t,store:n}=e,{isPhone:i}=t.device,r=t.currentUser.isLoggedIn(),a=n.isCollectionView(),s=n.getAssociatedCollectionStore(),l=ce().A.state.open,c=o().default.state.currentLoadingContainerStore,d=n.getContentStores()[0],u=d&&!d.isEmptyTextBlock();return Boolean(i&&n.isDefined()&&n.canEdit()&&r&&!s&&!a&&!l&&!u&&c&&c.state.ready)}function De(e,t){const n=g().default.state;if("editing"===n.mode)return!t.state.isComposing&&!(0,f().k)(n.multiSelection)||void 0!==re().wg();const o=e.state.savedTextSelectionStoreState;return!(!o||"editing"!==o.mode)&&!(0,f().k)(o.multiSelection)}function Ee(e){var t;const{device:n}=e;return Boolean((null===(t=Ce().A.state.menu)||void 0===t?void 0:t.type)&&!n.isTablet&&!n.isAndroid&&!(0,c().T)("supportsMobileActionBarNativeActionMenuWithoutIgnoreSelectionArea"))}function Ve(e){if((0,W().QT)(e))return!1;const{stores:t}=te().default.state;return t.length>0&&t[0].canEdit()&&!t[0].isNavigableBlock()&&!Boolean(re().wg())}function Fe(e,t){return!(0,W().QT)(e)&&t.canEdit()}function Le(e){"editing"===g().default.state.mode&&(ve().createAndCommit({userAction:"mobileActionBarHelpers.handleIndent",environment:e,canUndo:!0,perform:t=>{de().Mf({environment:e,transaction:t,shiftKey:!1})}}),dt(e,"indent"))}function ze(e){"editing"===g().default.state.mode&&(ve().createAndCommit({userAction:"mobileActionBarHelpers.handleUnindent",environment:e,canUndo:!0,perform:t=>{de().Mf({environment:e,transaction:t,shiftKey:!0})}}),dt(e,"unindent"))}function Ne(e){ve().createAndCommit({userAction:"mobileActionBarHelpers.handleMoveUp",environment:e,canUndo:!0,perform:t=>{de().$P({environment:e,transaction:t,direction:"up",maintainParent:!0})}}),dt(e,"move-up")}function Oe(e){ve().createAndCommit({userAction:"mobileActionBarHelpers.handleMoveDown",environment:e,canUndo:!0,perform:t=>{de().$P({environment:e,transaction:t,direction:"down",maintainParent:!0})}}),dt(e,"move-down")}function He(e){if(!e)return!1;const t=e.getRecordStoreUIParent();if(null==t||!t.isTable(y().ev))return!1;const n=(0,d().zH)(t);if(null==n||!n.isDefined())return!1;return n.getContentIds().indexOf(e.id)>0}function Ue(e){if(!e)return!1;const t=e.getRecordStoreUIParent();if(null==t||!t.isTable(y().ev))return!1;const n=(0,d().zH)(t);if(null==n||!n.isDefined())return!1;const o=n.getContentIds(),i=o.indexOf(e.id);return i>=0&&i<o.length-1}function Ke(e){const t=te().default.state.stores[0],n=g().default.state;if(t&&"editing"===n.mode){const{multiSelection:o}=n,i=(0,me().J)(o.end.store)||(0,fe().H)(o.start.store),r=t.getParentBlockStore(),a=r&&r.isCalloutV2()&&1===r.getContentLength();ve().createAndCommit({userAction:"mobileActionBarHelpers.handleDelete",environment:e,canUndo:!0,perform:e=>{if(a){const t=r.getParentBlockStore();t&&_().zz({childStore:r,parentStore:t,transaction:e})}else B().TF({store:t,transaction:e})}});if(re().wg())ve().createAndCommit({userAction:"mobileActionBarHelpers.handleDelete",environment:e,canUndo:!0,perform:t=>{(0,ie().x)({environment:e,transaction:t})}});else if(i){const t=(0,u().T)(i);(0,X().h)({environment:e,store:t}),(0,J().Z)(e)}else(0,q().I)({environment:e});dt(e,"remove")}}function We(e,t){T().Gf({spaceStore:t,environment:e,mentionTypes:{page:!0,collection:!0,heading:!0,createPage:!0,user:!0,inviteUserToWorkspace:!1,inviteUserToPage:!0,bot:!0,date:!0,reminder:!0,templateVariable:!0,group:!0,team:!0,formulaContextVariable:!0,slackSpecialMention:!1,property:!1}}),dt(e,"mention")}function Ge(e){const t=g().default.state;if("editing"===t.mode&&(0,f().k)(t.multiSelection)){const t=te().default.state.stores.at(0),n=null==t?void 0:t.getTitleStore();t&&n&&!t.isEmptyTextBlock()&&(0,ue().x)({environment:e,store:n,canSelectAllBlocks:!0})}if(i().default.checkGate({gateName:"agent_writer"})&&e.device.isMobileNative){const t=(0,K().G)();if(t&&(0,c().T)("supportsNativeAgent")){var n;const o=[];if("textSelection"===t.type){const e=(0,G().E)({mode:"editing",multiSelection:t.textSelection,forceExtendAnnotations:{}}),n=t.textSelection.start.store.pointer,i=t.textSelection.end.store.pointer;n.table===y().ev&&i.table===y().ev&&o.push({textSelection:{type:"text",value:{start:{pointer:n,index:t.textSelection.start.index},end:{pointer:i,index:t.textSelection.end.index}},text:e.slice(0,1200)}})}if("blockSelection"===t.type){const e=(0,ge().BO)(t.stores),n=e?(0,G().E)({mode:"editing",multiSelection:e,forceExtendAnnotations:{}}):"";o.push({blockSelection:{type:"blocks",value:t.stores.map((e=>e.pointer)),text:n.slice(0,1200)}})}null===(n=e.mobileNative)||void 0===n||n.openNewAgentChat({mode:"writer",userSpecifiedContextValues:o.length>0?o:void 0}),dt(e,"ai")}}else!async function(e){const{completionInitialPromptActions:t}=await R().aiDependency.load();await t.toggleInitialPrompt(e)}({from:"mobile_action_bar",environment:e}),dt(e,"ai")}function Ze(e,t){P().po({environment:e,annotation:t}),dt(e,t[0])}function Ye(e,t,n){Ce().A.update((e=>({...e,menu:t,shouldRestoreSelectionForMenu:n})))}function $e(e,t,n){Ce().A.update((e=>({...e,isSubMenuOverridden:n,subMenu:t}))),void 0===t?(0,p().V)({environment:e,dismissed:!0,trackCreateBlock:V().vH}):dt(e,t.type)}function Qe(e){j().ZS({environment:e}),dt(e,"redo")}function qe(e){j().tN({environment:e,preventSelectText:!1}),dt(e,"undo")}function Xe(e){C().fi({type:"focusOnly",focus:!0}),dt(e,w().Ifu.Link)}function Je(e,t,n){const o=te().default.state.stores[0];if(!o)return;const i=g().default.state,r="empty"!==i.mode&&i.multiSelection;r&&!(0,f().k)(r)?(L().hN({environment:e,blockStore:o,multiSelection:r,formulasModule:n}),dt(e,"comment",t)):((0,N().l)({environment:e,blockStore:o}),dt(e,"discuss",t))}function et(e,t,n,o){(0,z().O)({environment:e,blockStore:n,from:"right_margin",formulasModule:o}),dt(e,"react",t)}function tt(e){M().Wx({environment:e,analyticsFrom:"rich_text_menu"}),dt(e,"equation")}async function nt(e,t){i().default.checkGate({gateName:"mobile_discovery_modal_restore_selection_killswitch"})&&((0,q().I)({environment:e}),(0,m().k)());const n=t.getParentStore();if(n&&(0,be().u)(n)){const{openTemplateOnboardingModal:o,getTemplateOnboardingVersion:i}=await Se().O.load();o({parentStore:n,template:void 0,version:i({template:void 0}),origin:"mobile_new_page_pills",navigateToOnFinish:"created_collection",onClose:n=>{(0,he()._M)({environment:e,newPageStore:t,result:n})}})}else dt(e,"databaseDiscoveryModal")}function ot(e){i().default.checkGate({gateName:"mobile_template_gallery_restore_selection_killswitch"})&&((0,q().I)({environment:e}),(0,m().k)()),Me().A.setState({open:!0}),dt(e,"templates")}async function it(e,t){var n;const{sidebarSpaceViewStore:i,sidebarSpaceStore:r,mainEditorCurrentBlockStore:a}=o().default.state;if(!i||!r||!a)return;const s=l().A.getIntl(),c=(0,S().P)(),d=(0,x().B)(t,s),u=((null===(n=a.getModel())||void 0===n||null===(n=n.getRenderTitle({getRecordModel:a.getRecordModel,userTimeZone:c,intl:s}))||void 0===n?void 0:n.length)??0)>0;let p=!1;const m=Date.now();try{se().A.setState({isDuplicating:!0});const t=await le.pageTemplateModalActions.load();await t.loadAndDuplicatePageTemplate({environment:e,isPrivate:!1,item:d,spaceStore:r,spaceViewStore:i,useMinimalTemplates:!1,initializeStore:a}),p=!0}finally{se().A.setState({isDuplicating:!1});const t=Date.now()-m;I().hB(e,{from:"mobileApp",success:p,context:"template_pill",template_block_id:d.rootId,target_space_id:r.id,template_duplication_duration_ms:t,public_template_name:d.name,has_existing_title:u})}}function rt(e){!async function(e){var t;if(!e.mobileNative)return;const n=g().default.state;if("editing"!==n.mode)return;const o=null===(t=await e.mobileNative.openEmojiPicker())||void 0===t?void 0:t.emoji;o&&ve().createAndCommit({userAction:"mobileActions.pickEmoji",environment:e,canUndo:!0,perform:t=>{ye().Yf({environment:e,multiSelection:n.multiSelection,isFromInsertion:!1}),ye().Ju({environment:e,emoji:o,transaction:t}),ye().VN()}})}(e),dt(e,"pick_emoji")}function at(e){!async function(e){const t=te().default.state.stores,n=e.device.isIOS,o=await xe().dA({environment:e,supportsMobileNativeFileUpload:!0,multiple:!0,accept:n?"*/*":"image/*, video/*"}),i=te().default.getCurrentRecordCache(),r=(0,Ae().y)(e);o&&0!==o.length&&i&&ve().createAndCommit({userAction:"mobileActions.takePicture",environment:e,canUndo:!0,perform:n=>{var a;const s=we().$C({environment:e,files:o,inMemoryRecordCache:i,pageWidth:r,transaction:n,spaceId:0!==t.length?t[0].pointer.spaceId:null===(a=(0,Ie().Z)())||void 0===a?void 0:a.pointer.spaceId});1===t.length&&t[0]&&(0,ke().wm)(t[0])?B().t1({environment:e,blocks:s,selection:t,transaction:n,preventSetSelection:!0}):(B().LE({environment:e,blocksToInsert:s,target:t,transaction:n,replaceEmptyTextBlock:!0}),(0,q().I)({environment:e}))}})}(e),dt(e,"take_picture")}function st(e){const{device:t}=e,n=t.isMobileNative&&t.isIOS&&t.isPhone;n||(0,ee().t)({environment:e,stores:te().default.state.stores}),k().WU({environment:e,stores:te().default.state.stores,actionSectionGroupKey:"default",showInput:!1,analyticsFrom:"mobile_more_menu"}),dt(e,"more"),a().default.afterNextFlush((()=>{n&&(0,m().k)()}))}function lt(e){const{device:t}=e,n=t.isMobileNative&&t.isIOS&&t.isPhone;n||(0,ee().t)({environment:e,stores:te().default.state.stores}),$().u.openTeamTargetMobilePopup(),dt(e,"teamspaceSelector"),a().default.afterNextFlush((()=>{n&&(0,m().k)()}))}function ct(e,t){(0,q().I)({environment:t}),e.store.setState({...e.store.state,isInsertOpen:!1}),dt(t,"hide_keyboard"),(0,m().k)()}function dt(e,t,n){A().np(e,{itemName:t,from:n})}function ut(e,t){e&&(console.log(t),b().log({level:"info",from:"mobileActionBarHelpers.ts",type:"logShouldShowReason",data:{message:t}}))}function pt(e){var t;if(!e.isOpen)return;const n=null===(t=e.collectionContextStore)||void 0===t?void 0:t.normalizedSchemaStore.state;return n?(0,h()._g)({schema:n,property:e.property}):void 0}},662971:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var o=n(296540),i=()=>n(30537);const r=function(){const[e,t]=o.useState({x:0,y:0});return o.useEffect((()=>{const e=e=>{t({x:e.clientX,y:e.clientY})};return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}}),[]),e};var a=n(474848);function s({x:e,mouseX:t}){return t>e?void 0:-Math.max(e-t,10)+"px"}function l({x:e,width:t,mouseX:n}){return n>e?-Math.max(n-(e+t),10)+"px":void 0}function c({x:e,width:t,mouseX:n}){return n>e?`${Math.max(n-(e+t),10)}px`:`${Math.max(e-n,10)}px`}function d({x:e,y:t,height:n,mouseX:o,mouseY:i}){return o>e?`polygon(0% 0%, 0% 100%, 100% ${100*(i-t)/n}%)`:`polygon(100% 0%, 0% ${100*(i-t)/n}%, 100% 100%)`}function u(e){const{x:t=0,y:n=0,height:i=0,width:u=0}=e.el.getBoundingClientRect()||{},{x:p,y:m}=r(),f={x:t,y:n,height:i,width:u,mouseX:p,mouseY:m},g=(0,o.useRef)(null),v=o.useCallback((e=>{if(g.current){g.current.style.pointerEvents="none";const t=document.elementFromPoint(e.clientX,e.clientY);if(g.current.style.pointerEvents="auto",t){const n=new MouseEvent(e.nativeEvent.type,e.nativeEvent);t.dispatchEvent(n)}}}),[]),h={insetInlineEnd:l(f),insetInlineStart:s(f),height:i,width:c(f),clipPath:d(f)};return(0,a.jsx)("div",{ref:g,onClick:v,style:{cursor:"pointer",position:"absolute",pointerEvents:"auto",top:0,...h}})}function p({onClick:e,renderOrigin:t,renderExtension:r,allowOptionalExtensionMenu:s,...l},c){const{disabled:d,disableDefaultClick:p,onFocus:m,focused:f,openOnFocus:g,placementToOrigin:v,alignmentToOrigin:h,disableCloseOnEnter:b,bottomSheetInitialState:S,popupTypeOverride:y}=l,x=(0,n(484714).WS)(),w=(0,n(546926).Tf)(),[A,I]=(0,o.useState)(!1),k=(0,o.useRef)(null),M=(0,o.useRef)(null),C=(0,o.useRef)(null),T=(0,o.useRef)(null),_=(0,o.useCallback)((()=>{C.current&&window.clearTimeout(C.current),T.current&&window.clearTimeout(T.current),C.current=null,T.current=null}),[]),j=(0,o.useCallback)((()=>{_(),d||I(!0)}),[d,_]),B=(0,o.useCallback)((()=>{_(),I(!1)}),[_]),P=(0,o.useCallback)((e=>{_(),A||(e&&e.preventDefault&&e.preventDefault(),C.current=window.setTimeout(j,120))}),[A,_,j]),R=(0,o.useCallback)((()=>{_(),A&&(T.current=window.setTimeout(B,100))}),[A,B,_]),D=(0,o.useCallback)((t=>{m(),j(),s&&(null==e||e(t),B())}),[m,j,s,e,B]),E=(0,o.useCallback)((()=>{P()}),[P]),V=(0,o.useCallback)((()=>{m(),P()}),[m,P]),F=(0,o.useCallback)((e=>{if(n(726637).A.isMobile)return;const t=k.current;A&&t&&!t.contains(e.target)&&B()}),[A,B]),L=(0,o.useCallback)((e=>{13===e.keyCode&&A&&!b&&B()}),[A,B,b]);(0,o.useEffect)((()=>{if(!Boolean(p))return window.addEventListener("click",F),()=>{window.removeEventListener("click",F)}}),[p,F]),(0,o.useEffect)((()=>(window.addEventListener("keydown",L),()=>{window.removeEventListener("keydown",L)})),[L]);const z=(0,o.useRef)(f);(0,o.useEffect)((()=>{g&&!z.current&&f?P():!f&&z.current&&R(),z.current=f}),[f,g,P,R]);const N=(0,n(401497).IS)((()=>({mobilePopupStyle:{borderRadius:12,backgroundColor:n(100622).Tj.background.secondary}})),[]),O={...(0,n(383036).A)({onMouseEnter:E,onClick:D},l),showExtensionArrow:!0};let H=i().n.Popup;return y?H=y:x&&(H=w?i().n.BottomSheet:i().n.SlideUp),(0,a.jsx)(n(782482).N,{debugName:"ExtensionMenuItem",capture:f,onEnter:A?void 0:P,onRight:P,onLeft:A?R:void 0,onEsc:A?R:void 0,children:(0,a.jsx)(n(127833).zD,{popupType:H,bottomSheetInitialState:S,open:A,origin:t(O,c),placementToOrigin:v??"right",alignmentToOrigin:h??"center",originGap:0,disableMouseCapture:!0,preventBlockRenderQueueOnEnter:!0,preventScaleTransition:!x,preventCaptureEsc:!0,ref:k,render:()=>(0,a.jsxs)(a.Fragment,{children:[!x&&M.current?(0,a.jsx)(u,{el:M.current}):null,(0,a.jsx)("div",{ref:M,style:{height:"100%"},children:r({onMouseEnter:V},{close:R})})]}),style:{overflow:"visible",...x&&N.mobilePopupStyle},trapFocus:!0,onDismiss:B})})}const m=o.forwardRef(p)},668346:(e,t,n)=>{"use strict";n.d(t,{K:()=>i});var o=()=>n(242422);function i(){return[o().default.checkGate({gateName:"agent_writer"})?"commandAltJ":"commandJ"]}},671894:(e,t,n)=>{"use strict";n.d(t,{hS:()=>y,o2:()=>x,js:()=>b,Le:()=>S,F6:()=>w});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(823215),n(354520),n(581454);var o=()=>n(675133),i=()=>n(69708),r=()=>n(778078),a=()=>n(496603),s=(n(296540),()=>n(736847)),l=()=>n(589407),c=()=>n(12956),d=n(474848);const u=(0,i().YK)({moreOptions:{id:"action.moreOptions",defaultMessage:"More options"}});var p=()=>n(431404),m=()=>n(680288),f=()=>n(129522);const g=25,v=5,h=(0,i().YK)({mixedBlocks:{id:"actionMenuHelpers.mixedBlocks.title",defaultMessage:"{count, plural, one {{count} block} other {{count} blocks}}"}});function b(e){const t=o().A.getIntl(),{sections:n,context:i,query:b,shouldShowBlockTypeTitle:S}=e;let y=b.trim().toLowerCase();y.startsWith("/")&&(y=y.slice(1));const A=x(n,i).map(((e,n)=>{let{actions:o,title:r}=e;const a=o.length-v;if(e.shouldShowMoreOptions&&a>1){const e=function(e){return(0,c().u)({key:"more options",displayName:u.moreOptions,analyticsName:u.moreOptions.defaultMessage,svg:l().ellipsisIcon,validators:[],subActions:()=>[{key:0,title:void 0,render:e=>(0,d.jsx)(s().A,{...e}),actions:e}]})}(o.slice(v));o=[...o.slice(0,v),e]}const g=i.blocks[0];if(g){const e=g.getType();if(S&&e&&0===n){const n=i.blocks.every((t=>t.getType()===e))?(0,p().Z)(e):h.mixedBlocks;if(n){var b;r=t.formatMessage(n,{count:i.blocks.length});const e=null===(b=f().K.findCollectionViewBlockFromStore(g))||void 0===b?void 0:b.collectionContextStore.getViewType();if(e){const t=m().to[e];t&&(r+=` · ${t}`)}}}}return{...e,actions:o,title:r}}));if(!y)return A;const I=function(e){return e.map((e=>({...e,actions:e.actions.map((t=>{const n=t.searchName||t.displayName||"",o=[n,e.searchTitle||e.title||"",n].join(" ");return{...t,searchName:o}}))})))}(function(e,t){const n=[];for(const o of e){const e={...o,actions:[]};for(const i of o.actions)if(w(i,t))if(i.subActions){const r=x(i.subActions(t),t);if(i.hideSubActions){e.actions.push(i);continue}if(i.collapseSubActionsIntoParent){for(const t of r)for(const n of t.actions)e.actions.push(n);continue}const a=r.map((e=>({...e,key:`${o.key} ${i.key} ${e.key}`,title:e.title||i.displayName,searchTitle:[i.searchName||i.displayName,e.searchTitle||e.title].filter(Boolean).join(" ")})));for(const e of a)n.push(e)}else e.actions.push(i);e.actions.length&&n.push(e)}return n}(n,i)),k=[],M=new Map;for(const o of I)for(const e of o.actions)M.set(e,o),k.push(e);const C=(0,r().Ay)(y,k,(e=>e.searchName||""),{minScore:g,getSortScore:e=>-e.score*(e.original.sortScoreMultiplier??1)}),T=new Set(C),_=k.filter((e=>Boolean(e.alwaysShowInSearch)&&!T.has(e))),j=_.filter((e=>"start"===e.alwaysShowInSearch)),B=_.filter((e=>"end"===e.alwaysShowInSearch)),P=a().$z([...j,...C,...B],(e=>{const t=M.get(e);if(t)return t.title})),R=[];for(const o of Object.keys(P)){const e=P[o],t=M.get(e[0]);t&&R.push({...t,actions:e})}return R}function S(e,t){if(!t)return e;let n=0;const o=[];for(const i of e){if(n>=t)break;const e=i.actions.slice(0,t-n);e.length>0&&(n+=e.length,o.push({...i,actions:e}))}return o}function y(e,t){const n=[];for(const o of e){const e=o.actions.filter(t);e.length>0&&n.push({...o,actions:e})}return n}function x(e,t){return y(e,(e=>w(e,t)))}function w(e,t){if(e.validators){return e.validators.every((e=>e(t)))}return!0}},689825:(e,t,n)=>{"use strict";n.d(t,{U:()=>i});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.25 15.25",directional:!0,svg:(0,n(474848).jsx)("path",{d:"M10 17.625a7.625 7.625 0 1 1 0-15.25 7.625 7.625 0 0 1 0 15.25m-1.046-4.769 3.834-2.236a.718.718 0 0 0 0-1.24L8.954 7.144a.718.718 0 0 0-1.079.62v4.472c0 .554.6.9 1.08.62"})},i=(0,n(340498).wt)("arrowTriangleRightCircleFill",o,"fill")},701751:(e,t,n)=>{"use strict";n.d(t,{p:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"3.97 1.94 14.91 15.66",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M10.55 12.808a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 1 0 1.1 0z"}),(0,o.jsx)("path",{d:"M15.4 1.95a3.48 3.48 0 0 0-3.48 3.48v1.92H6.4a2.425 2.425 0 0 0-2.425 2.425v5.4A2.425 2.425 0 0 0 6.4 17.6h7.2a2.425 2.425 0 0 0 2.425-2.425v-5.4A2.425 2.425 0 0 0 13.6 7.35h-.43V5.43a2.23 2.23 0 1 1 4.46 0v2.095a.625.625 0 1 0 1.25 0V5.43a3.48 3.48 0 0 0-3.48-3.48M5.225 9.775c0-.649.526-1.175 1.175-1.175h7.2c.649 0 1.175.526 1.175 1.175v5.4c0 .649-.526 1.175-1.175 1.175H6.4a1.175 1.175 0 0 1-1.175-1.175z"})]})},r=(0,n(340498).wt)("lockOpen",i,"default")},706965:(e,t,n)=>{"use strict";n.d(t,{A:()=>v});n(296540);var o=()=>n(230711),i=()=>n(590526),r=()=>n(764880),a=()=>n(310442),s=()=>n(824862),l=()=>n(798880),c=()=>n(69708),d=()=>n(100622),u=()=>n(534177),p=()=>n(284371),m=()=>n(815585),f=()=>n(43972),g=n(474848);function v(e){const{store:t}=e,n=(0,c().tz)(),v=(0,i().K8)((()=>t.getCreatedTime()),[t]),h=(0,i().K8)((()=>t.getLastEditedTime()),[t]),b=(0,i().K8)((()=>{const e=t.getCreatedByPointer();if(e)return(0,r().xC)({pointer:e,getRecordValue:t.getRecordValue})}),[t]),S=(0,i().K8)((()=>{const e=t.getLastEditedByPointer();if(e)return(0,r().xC)({pointer:e,getRecordValue:t.getRecordValue})}),[t]),y=(0,i().K8)((()=>{const e=t.getSpaceStore();if(!e)return!1;const n=null==b?void 0:b.asActor;if(!n)return!1;const i=n.table;switch(i){case l().oo:return(0,o().dp)(e,n.id).isMember();case s().GP:return(0,o().Ts)(e,n.id).isMember();case a().yj:return!1;default:(0,u().HB)(i)}}),[t,b]),x=v?(0,m().nl)(v,{useCompactFormat:!0,useLowercase:!0}):"",w=h?(0,m().nl)(h,{useLowercase:!0,useCompactFormat:!0}):"";if(!(h?(0,m().nl)(h,{useLowercase:!0,useCompactFormat:!0,roundDownYears:!0}):""))return null;const A={display:"flex",gap:4,color:d().Tj.text.inverseSecondary,height:16,fontSize:12},I={size:14,style:{marginInlineEnd:2}};return(0,g.jsxs)(g.Fragment,{children:[(e=>{let t;if(null!=S&&S.asActor)t=(0,g.jsx)(c().sA,{defaultMessage:"Edited by {editor} {timestamp}",id:"pagePropertiesHeader.editedBy.label",values:{editor:(0,g.jsx)("span",{style:{fontWeight:p().Wy.medium,color:d().Tj.text.inversePrimary},children:(0,g.jsxs)("span",{style:{display:"flex"},children:[e?void 0:(0,f().w)({actor:S,...I}),(0,r().lR)(n,S)]})}),timestamp:w}});else{if(!w)return;o=w,t=(0,g.jsx)(c().sA,{defaultMessage:"Edited {timestamp}",id:"pagePropertiesHeader.edited.label",values:{timestamp:o}})}var o;return(0,g.jsx)("div",{style:{...A,marginTop:3,marginBottom:3},children:t})})(e.compactFormat),(e=>{let t;if(null!=b&&b.asActor&&y)t=(0,g.jsx)(c().sA,{id:"pagePropertiesHeader.createdBy.label",defaultMessage:"Created by {creator} {timestamp}",values:{creator:(0,g.jsx)("span",{style:{fontWeight:p().Wy.medium,color:d().Tj.text.inversePrimary},children:(0,g.jsxs)("span",{style:{display:"flex"},children:[e?void 0:(0,f().w)({actor:b,...I}),(0,r().lR)(n,b)]})}),timestamp:x}});else{if(!x)return;t=(0,g.jsx)(c().sA,{id:"pagePropertiesHeader.created.label",defaultMessage:"Created {timestamp}",values:{timestamp:x}})}return(0,g.jsx)("div",{style:{...A,marginBottom:4},children:t})})(e.compactFormat)]})}},715011:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var o=n(296540),i=()=>n(69708),r=()=>n(409268),a=n(474848);function s(e){const t=(0,o.useMemo)((()=>(0,r().s)(e.store)),[e.store]);return(0,a.jsx)(i().sA,{id:"pageWordCount.wordCount",defaultMessage:"{count, plural, one {# word} other {# words}}",values:{count:t}})}},730307:(e,t,n)=>{"use strict";n.d(t,{l:()=>m});var o=()=>n(779315),i=()=>n(292985),r=()=>n(161479),a=()=>n(878523),s=()=>n(129522),l=()=>n(404783),c=()=>n(555776),d=()=>n(116008),u=()=>n(36088),p=()=>n(405981);async function m(e){var t;const{environment:n,blockStore:m,rect:f,property_id:g,from:v}=e;if(d().A.hasContent())return void(0,p()._y)({environment:n,reason:"starting_new"});const h=s().K.getRect(m);if(!h)return;const b=new(l().A)(n,(0,r().e)(m.pointer.spaceId)),S=h.width,y=h.height,x=h.right-S;d().A.setState({open:!0,rect:f||new DOMRect(x,h.top,S,y),type:"block",content:"comment",blockStore:m,blockId:m.id,discussionInputStore:b,property_id:g,lastKnownBlockStore:m,from:v}),(0,i().V)({element:null===(t=o().A.UpdateSidebarCommentScroller)||void 0===t?void 0:t.getNode(),environment:n,options:{top:0,behavior:"smooth"}}),c().A.setActiveWithSource("text_annotation"),await(0,u().M)({discussionInputStore:b,environment:n}),a().j4(n,{from:v})}},738508:(e,t,n)=>{"use strict";n.r(t),n.d(t,{cursorIcon:()=>r,iconDefinition:()=>i});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"1.25 0 17.5 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("g",{className:"logo-light-mode",children:[(0,o.jsxs)("g",{clipPath:"url(#clip0_16020_205)",children:[(0,o.jsx)("path",{fill:"#757575",d:"m9.995 9.987 8.658 4.999a.6.6 0 0 1-.226.226l-8.092 4.672a.68.68 0 0 1-.68 0l-8.092-4.672a.6.6 0 0 1-.226-.226z"}),(0,o.jsx)("path",{fill:"#525252",d:"M9.995 0v9.987l-8.658 4.999a.6.6 0 0 1-.082-.309v-9.38c0-.22.117-.424.308-.534L9.655.09a.7.7 0 0 1 .34-.09"}),(0,o.jsx)("path",{fill:"#404040",d:"M18.652 4.989a.6.6 0 0 0-.225-.226L10.334.09A.7.7 0 0 0 9.995 0v9.987l8.658 4.999a.6.6 0 0 0 .083-.309v-9.38c0-.11-.03-.216-.083-.308"}),(0,o.jsx)("path",{fill:"#D9D9D9",d:"M18.047 5.339a.29.29 0 0 1 0 .29l-7.859 13.61c-.053.093-.193.055-.193-.05v-8.97a.4.4 0 0 0-.054-.201z"}),(0,o.jsx)("path",{fill:"#fff",d:"m18.047 5.339-8.106 4.68a.4.4 0 0 0-.147-.147L2.027 5.387c-.092-.053-.054-.193.052-.193h15.717c.111 0 .202.06.25.145"})]}),(0,o.jsx)("defs",{children:(0,o.jsx)("clipPath",{id:"clip0_16020_205",children:(0,o.jsx)("path",{fill:"#fff",d:"M1.255 0h17.49v20H1.256z"})})})]}),(0,o.jsxs)("g",{className:"logo-dark-mode",children:[(0,o.jsxs)("g",{clipPath:"url(#clip0_16020_213)",children:[(0,o.jsx)("path",{fill:"#6E6E6E",d:"m9.995 9.987 8.658 4.999a.6.6 0 0 1-.226.226l-8.092 4.672a.68.68 0 0 1-.68 0l-8.092-4.672a.6.6 0 0 1-.226-.226z"}),(0,o.jsx)("path",{fill:"#4A4A4A",d:"M9.995 0v9.987l-8.658 4.999a.6.6 0 0 1-.082-.309v-9.38c0-.22.117-.424.308-.534L9.655.09a.7.7 0 0 1 .34-.09"}),(0,o.jsx)("path",{fill:"#383838",d:"M18.652 4.989a.6.6 0 0 0-.225-.226L10.334.09A.7.7 0 0 0 9.995 0v9.987l8.658 4.999a.6.6 0 0 0 .083-.309v-9.38c0-.11-.03-.216-.083-.308"}),(0,o.jsx)("path",{fill:"#C9C9C9",d:"M18.047 5.339a.29.29 0 0 1 0 .29l-7.859 13.61c-.053.093-.193.055-.193-.05v-8.97a.4.4 0 0 0-.054-.201z"}),(0,o.jsx)("path",{fill:"#fff",d:"m18.047 5.339-8.106 4.68a.4.4 0 0 0-.147-.147L2.027 5.387c-.092-.053-.054-.193.052-.193h15.717c.111 0 .202.06.25.145"})]}),(0,o.jsx)("defs",{children:(0,o.jsx)("clipPath",{id:"clip0_16020_213",children:(0,o.jsx)("path",{fill:"#fff",d:"M1.255 0h17.49v20H1.256z"})})})]})]})},r=(0,n(340498).wt)("cursor",i,"default")},741817:(e,t,n)=>{"use strict";n.d(t,{v:()=>a});var o=()=>n(18387),i=()=>n(299545),r=()=>n(588836);function a(e){const{discussionStore:t,transaction:n}=e,a=i().No(t);a&&(0,r().u)({discussionIds:[t.id],transaction:n,blockStore:a});const s=(0,o().Z)();if(s){const e=i().zo({blockStore:s,transclusionReferences:"recurseInto",childPages:"omit"});for(const o of e){if(a&&o.table===a.table&&o.id===a.id)continue;const e=i().bN(o).getValue();null!=e&&e.includes(t.id)&&(0,r().u)({discussionIds:[t.id],transaction:n,blockStore:o})}}}},766854:(e,t,n)=>{"use strict";n.d(t,{H:()=>w,Q:()=>x});n(898992),n(672577);var o=()=>n(230711),i=()=>n(907258),r=()=>n(135168),a=()=>n(242422),s=()=>n(929219),l=()=>n(711339),c=()=>n(295633),d=()=>n(700500),u=()=>n(179034),p=()=>n(201980),m=()=>n(384944),f=()=>n(649813),g=()=>n(390650),v=()=>n(381678),h=()=>n(622811),b=()=>n(491848),S=()=>n(482871);function y(e,t,n){const i=(0,v()._)(e),r=null==i?void 0:i.id;if(!r||!n)return;if(!a().default.checkGate({gateName:"full_access_for_created_collection_pages"}))return;if(t.canAdmin())return;const s=t.getSpaceStore();return s&&(0,o().dp)(s,r).isMember()?[{role:"editor",type:"user_permission",user_id:r}]:void 0}function x(e){const{collectionContextStore:t,transaction:n}=e;return(0,b().w)({collectionContextStore:t,transaction:n}),w(e)}function w(e){var t,n,o;const{environment:v,collectionContextStore:b,groupsPointer:x,insertAtIndex:w,shouldCoerce:A,templateStore:I,transaction:k,from:M,tracker:C,inMemoryRecordCache:T,isKeyboard:_,title:j}=e,B=l().default.DO_NOT_USE_markLegacy("collections.add_item_lag");l().default.DO_NOT_USE_measureAfterNextFlushLegacy(B,{environment:v,getData:()=>({...g().kz(b),from:M.createBlock})});const P="collectionTypedView"===b.contextTypeFromStoreState,R=b.databaseTypeFromStoreState,D=b.collectionStoresStore.state,E=D.find((e=>e.canEdit()||e.canEditCollection()||e.canEditContentOnly()))||D[0],V=null===(t=(0,r().f)(E))||void 0===t?void 0:t.id,F=i().default.state.currentUserSettingsStore,L=P&&R&&V&&F&&[...F.getAllPreferredCollections(V),...F.getPreferredCollectionsOfType(V,R)]||[];let z;const N=x[0];if("group_header"===M.createBlock&&"location"===N.value.type){const e=N.value.value;if(e){z=D.find((t=>t.id===e.id&&(t.canEdit()||t.canEditCollection()||t.canEditContentOnly())))}}else z=function(e,t){for(const n of e){const e=t.find((e=>e.id===n&&(e.canEdit()||e.canEditCollection()||e.canEditContentOnly())));if(e)return e}}(L,D);const O=z??E,H=null==O?void 0:O.getSpaceId(),U=b.collectionViewStore(),K=b.getViewType(),W=m().Wv({environment:v,type:d().xd.page,inMemoryRecordCache:T,transaction:k,spaceId:H,tracker:C,permissions:y(v,O,H),properties:{title:(0,p().x9d)(j)}});if(!O||!U||!K)return{coercionSucceeded:!0,newStore:W};const G=null===(n=b.groupsStore.getGroupState(x))||void 0===n?void 0:n.groupUiParentStore;if(!G)return{coercionSucceeded:!0,newStore:W};const Z=c().B.createChildStore(G,{table:u().ev,id:W.id});I&&s().A.state.online&&f().TB({title:"template",environment:v,store:W,templateStore:I,isKeyboard:_??!1,isCreateIn:!1,transaction:k,from:M.initCollection??"collection_group_actions"});const Y=(0,h().j)({environment:v,store:W,collectionStore:O,collectionContextStore:b,groupsPointer:x,shouldCoerce:A,transaction:k}),$=(null===(o=b.groupsStore.getGroupState(x))||void 0===o||null===(o=o.reducerResultStore.state)||void 0===o?void 0:o.blockIds)||[],Q=void 0!==w?w:$.length,q=b.permissionScopesStore.state;if((a().default.checkGate({gateName:"can_create_pages_in_collection_permission"})?q.canCreatePagesInCollection:q.canEditContent)||P){const e=[...$.slice(0,Q),Z.id,...$.slice(Q)];(0,S().z)({resultIds:e,collectionViewStore:U,collectionContextStore:b,transaction:k})}return{coercionSucceeded:Y,newStore:Z}}},777932:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});class o extends(()=>n(757695))().Store{getInitialState(){return{isDuplicating:!1}}}const i=new o},791177:(e,t,n)=>{"use strict";n.d(t,{$:()=>i});var o=n(296540);function i(){const[e,t]=(0,o.useState)({inputElementAttributes:void 0,suppressFocusRing:!1}),[n,i]=(0,o.useState)(!1),[r,a]=(0,o.useState)(!1);(0,o.useEffect)((()=>{if(n){function e(){a(!1)}function t(e){"ArrowDown"!==e.key&&"ArrowUp"!==e.key||a(!0)}return window.addEventListener("pointerdown",e),window.addEventListener("keydown",t),()=>{window.removeEventListener("pointerdown",e),window.removeEventListener("keydown",t)}}}),[n]);return[(0,o.useMemo)((()=>({inputElementAttributes:e.inputElementAttributes,suppressFocusRing:e.suppressFocusRing&&r,onFocus:()=>{i(!0)},onBlur:()=>{i(!1)}})),[e,r]),(0,o.useMemo)((()=>({setComboboxState:t,isFocusVisible:r,isComboboxFocused:n,onItemHover:()=>{a(!1)}})),[r,n])]}},791611:e=>{var t=/[a-zA-Z0-9_\u0392-\u03c9\u00c0-\u00ff\u0600-\u06ff]+|[\u4e00-\u9fff\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g;e.exports=function(e){var n=e.match(t),o=0;if(!n)return 0;for(var i=0;i<n.length;i++)n[i].charCodeAt(0)>=19968?o+=n[i].length:o+=1;return o}},797324:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var o=n(296540),i=()=>n(560520),r=()=>n(484714),a=()=>n(790748),s=()=>n(581010),l=()=>n(69708),c=()=>n(100622),d=()=>n(284371),u=()=>n(396406),p=()=>n(718827),m=()=>n(843798),f=n(474848);function g(e){const{onDismiss:t,inputRef:n}=e,g=(0,r().Y0)(),v=(0,o.useRef)(null),h=g.isMobileNative&&g.isIOS,b=h&&e.show;(0,a().b)(s().A,(()=>({getNode:()=>v.current,isShown:()=>b})),[b]);const S=(0,i().n)(),y=(0,o.useCallback)((()=>{var e;null==n||null===(e=n.current)||void 0===e||e.focus(),t&&t();const o=document.activeElement;o instanceof HTMLElement&&o.blur()}),[n,t]);if(!h)return null;const x=b?-(m().j+S):0;return(0,f.jsx)(u().O,{open:!0,children:(0,f.jsx)("div",{style:{position:"fixed",top:"100vh",width:"100%",height:m().j,display:b?"flex":"none",alignItems:"center",justifyContent:"flex-end",backgroundColor:c().Tj.keyboardDoneBarBackground,transform:`translateY(${x}px)`,transition:b?"ease-out":"ease-in",boxShadow:b?`\n\t\t\t\t\t\t\t\t0 -1px 0 ${c().Tj.border.primaryTranslucent}\n\t\t\t\t\t\t\t`:void 0},ref:v,children:(0,f.jsx)(p().Ay,{style:{display:"flex",alignItems:"center",marginInlineEnd:16,color:c().oZ.blue,fontWeight:d().Wy.semibold},onTouchEnd:()=>{y()},children:(0,f.jsx)(l().sA,{defaultMessage:"Done",id:"mobile.dismissKeyboardBar.button.label"})})})})}},797573:(e,t,n)=>{"use strict";n.d(t,{B:()=>r,o:()=>i});n(581454);var o=()=>n(402390);function i(e,t){return e.map((e=>r(e,t)))}function r(e,t){const{nameMessage:n,descriptionMessage:i,...r}=e,{rootId:a,previewRootId:s,spaceId:l}=function(e,t){const n=(0,o().H)(t);return e.sources[n]||e.sources[o().q]}(e,t);return{...r,id:n.id,rootId:a,spaceId:l,previewRootId:s,name:t.formatMessage(n),description:i?t.formatMessage(i):void 0}}},817148:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var o=n(296540),i=()=>n(590526),r=()=>n(792057),a=()=>n(153953),s=()=>n(834051),l=()=>n(302501),c=()=>n(433847),d=()=>n(69708),u=()=>n(100622),p=()=>n(579627),m=()=>n(247123),f=()=>n(574357);n(898992),n(823215);function g(e){return e.blocks.every((e=>e.isRestricted()))}var v=()=>n(598101),h=n(474848);const b=function({store:e}){const t=(0,n(484714).v3)(),b=(0,n(792485).S)(),S=(0,o.useMemo)((()=>({environment:t,blocks:[e],publicEditMode:void 0,pageContext:b})),[t,e,b]),y=(0,i().K8)((()=>(0,f().U)([g,(0,v().A)(n(158658).p)])(S)),[S]),x=(0,i().K8)((()=>(0,f().U)([n(267)._,(0,v().A)(n(77295).K)])(S)),[S]);return y?(0,h.jsx)("div",{style:{backgroundColor:u().Tj.sidebarSecondaryBackground,boxShadow:`0 -1px 0 ${u().Tj.border.secondaryTranslucent}`,marginTop:n(726637).A.isMobile?28:1},children:(0,h.jsxs)(n(718827).Ay,{disabled:!x,style:{padding:12},onClick:()=>async function(e,t){if(!e.isDefined())return;const n=e.getPermissionItems(),o=(0,a().K)(e),i=o?c().wD((0,s().E)(o)):[],l=c().Cd(e.getModel(),n,i),u={type:"restore",permissionChanges:l},{accept:f}=await r().Gh({message:(0,m().r6)(u),acceptLabel:(0,m().QU)(u),cancelLabel:(0,h.jsx)(d().sA,{id:"restrictedPermissionConfirmationModal.actionButton.close",defaultMessage:"Close"}),description:(0,h.jsx)(m().f2,{openState:u})});f&&p().YD({environment:t,store:e})}(e,t),children:[(0,h.jsx)(l().A,{isMultiline:!0,isSmall:!0,children:(0,h.jsx)(d().sA,{id:"blockMenuRestrictedMessage.label",defaultMessage:"You don’t have permission to edit this block because it is restricted."})}),x?(0,h.jsx)(l().A,{style:{marginTop:6,fontWeight:n(284371).Wy.semibold},children:(0,h.jsx)(d().sA,{id:"blockMenuRestrictedMessage.adminRestoreAction.label",defaultMessage:"Restore permissions"})}):void 0]})}):null}},820579:(e,t,n)=>{"use strict";n.r(t),n.d(t,{arrowLineDownIcon:()=>i,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"3.52 2.39 12.95 15.21",svg:(0,n(474848).jsx)("path",{d:"M10 2.4c.345 0 .625.28.625.625v9.966l3.333-3.333a.625.625 0 1 1 .884.884l-4.4 4.4a.625.625 0 0 1-.884 0l-4.4-4.4a.625.625 0 0 1 .884-.884l3.333 3.333V3.025c0-.345.28-.625.625-.625M4.15 16.35a.625.625 0 1 0 0 1.25h11.7a.625.625 0 0 0 0-1.25z"})},i=(0,n(340498).wt)("arrowLineDown",o,"default")},839754:(e,t,n)=>{"use strict";n.d(t,{Bi:()=>k,My:()=>I,ZM:()=>C,_M:()=>M,navigateToWorkflowTemplateOnboardingModal:()=>T});n(16280),n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(672577),n(581454);var o=()=>n(907258),i=()=>n(295633),r=()=>n(584262),a=()=>n(663077),s=()=>n(179034),l=()=>n(201980),c=()=>n(749750),d=()=>n(896628),u=()=>n(384944),p=()=>n(857783),m=()=>n(730969),f=()=>n(840153),g=()=>n(339798),v=()=>n(180762),h=()=>n(799832),b=()=>n(111379),S=()=>n(295304),y=()=>n(547149),x=()=>n(373444),w=()=>n(165592),A=()=>n(204067);function I({transaction:e,collectionStore:t,propertyTemplates:n}){var o;const i=(null===(o=t.getParentBlockStore())||void 0===o?void 0:o.getCollectionViewStores().filter((e=>"table"===e.getType())))??[];if(0===i.length)return;const r=[];for(const l of n){const e=(0,A().S1)({collectionStore:t,templateId:l.templateId,instancePointerType:"property"});e&&r.push({property:e.id,visible:!(0,a().Sz)(l),...l.tablePropertyFormat})}if(0!==r.length)for(const a of i){var s;const t=(null===(s=a.getPropertyFormatsStore("table_properties"))||void 0===s?void 0:s.getValue())??[],n=new Set(t.map((e=>e.property))),o=r.filter((e=>!n.has(e.property)));0!==o.length&&d().zA({stores:[a],update:{table_properties:[...t,...o]},transaction:e})}}function k({transaction:e,collectionStore:t,propertyTemplates:n}){const o=[];for(const s of n){const e=(0,A().S1)({collectionStore:t,templateId:s.templateId,instancePointerType:"property"});e&&o.push({property:e.id,visible:!0})}const i=t.getFormat().collection_page_properties??[],r=new Set(i.map((e=>e.property))),a=o.filter((e=>!r.has(e.property)));a.length&&d().zA({stores:[t],update:{collection_page_properties:[...i,...a]},transaction:e})}function M({environment:e,newPageStore:t,result:n}){"accepted_template"!==n.type&&"accepted_empty_collection"!==n.type||y().createAndCommit({environment:e,canUndo:!1,perform:o=>{const r=t.getTitleValue();if(u().zv({store:t,transaction:o,data:{alive:!1}}),"accepted_empty_collection"===n.type&&!(0,l().w9s)(r)){const a=i().B.createChildStore(t,{table:"block",id:n.blockId}).getTitleStore();a&&S().yr({environment:e,transaction:o,tokens:r,index:0,store:a})}const a=t.getParentStore();if((null==a?void 0:a.table)===s().ev){const e=a.getContentIds();u().zv({store:a,transaction:o,data:{content:e.filter((e=>e!==t.id))}})}},userAction:"clean_up_empty_new_page"})}function C({environment:e,userAction:t,result:n,existingCollectionViewBlockStore:o,existingCollectionStore:i}){if("canceled"!==n.type){if("accepted_empty_collection"===n.type&&i){const o=i.getKeyStore("name"),r=(0,l().x9d)(n.newCollectionTitle);o&&y().createAndCommit({userAction:t,environment:e,canUndo:!0,perform:t=>S().R9({environment:e,store:o,transaction:t,value:r})})}if(o){var r;const e=null===(r=(0,h().U)(o))||void 0===r?void 0:r.settingsStore;e&&g().os({collectionSettingsStore:e})}if("accepted_template"===n.type&&null!=o&&o.isCollectionView()&&(null==o||!o.hasSingleSourceAndNoLinkedCollections())){const t=(0,h().U)(o),i=o.getCollectionViewStores().find((e=>{var t;return(null===(t=e.getCollectionStore())||void 0===t?void 0:t.id)===n.collectionId}));if(!t||!i)return;(0,v().t)({environment:e,collectionContextStore:t,collectionViewId:i.id,isFullScreen:t.isFullScreenStore.state,isRootChild:t.isRootChildStore.state,isInPeekRenderer:t.isInPeekRendererStore.state})}}}async function T({environment:e,collectionViewBlockStore:t}){const n=t.id;if(!t.isDefined()){const o=await c().$f({environment:e,blockId:n});if(!o)return;e=await f().T({environment:e,newCurrentUserId:o}),t=new(i().B)(e,{table:s().ev,id:n}),await t.load()}const a=t.getSpaceId();if(!a)throw new Error("Space ID not found for collection block");const l=(0,b().k)(a);if(!l)throw new Error(`Space view not found for space ID: ${a}`);const{sidebarSpaceStore:d}=o().default.state;(null==d?void 0:d.id)!==a&&await(0,m().y)({environment:e,spaceViewStore:l});const u=t.getFormat();if("workflow_template_placeholder"===(null==u?void 0:u.collection_view_sub_type)&&null!=u&&u.placeholder_workflow_template_id&&t.isCollectionView()){const{getCollectionTemplateFromId:n}=await w().t.load(),o=n(u.placeholder_workflow_template_id);if(!o)throw new Error(`Collection template "${u.placeholder_workflow_template_id}" not found`);const{onNavigateToPlaceholderWorkflowTemplateBlock:i}=await x().O.load();i({environment:e,collectionTemplate:o,collectionViewBlockStore:t})}else p().uK({environment:e,store:t,pageVisitSource:r().y8.WorkflowTemplatesDeeplink})}},848401:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>g,mI:()=>m,vb:()=>f});n(296540);var o=()=>n(401497),i=()=>n(718827),r=()=>n(807449),a=()=>n(784892),s=()=>n(563692),l=()=>n(340498),c=()=>n(69708),d=()=>n(284371),u=n(474848);const p=(0,c().YK)({removeTokenLabel:{defaultMessage:"Remove {title}",id:"uiGenericToken.removeTokenLabel"},removeTokenLabelGeneric:{defaultMessage:"Remove Item",id:"uiGenericToken.removeTokenLabelGeneric"}}),m=a().NY,f={[a().NY.ExtremeSmall]:{height:12,fontSize:10,margin:"0 4px 0 0",marginEditState:"0 6px 0 0",closeIconSize:l().Ev.xxs,avatarSize:14},[a().NY.ExtraSmall]:{height:14,fontSize:12,margin:"0 6px 0 0",marginEditState:"0 6px 0 0",closeIconSize:l().Ev.xxs,avatarSize:14},[a().NY.Small]:{height:18,fontSize:12,margin:"0 6px 6px 0",marginEditState:"0 6px 6px 0",closeIconSize:l().Ev.xxs,avatarSize:16},[a().NY.CompactEssential]:{height:20,fontSize:14,margin:"0 10px 6px 0",marginEditState:"0 6px 6px 0",closeIconSize:l().Ev.xxs,avatarSize:20},[a().NY.Medium]:{height:20,fontSize:14,margin:"0 10px 6px 0",marginEditState:"0 6px 6px 0",closeIconSize:l().Ev.xxs,avatarSize:20},[a().NY.Inline]:{height:20,fontSize:14,closeIconSize:l().Ev.xxs,avatarSize:20,margin:"0 -5px 0 0",marginEditState:"0 6px 0 0"},[a().NY.Large]:{height:24,fontSize:16,margin:"0 8px 8px 0",marginEditState:"0 8px 8px 0",closeIconSize:l().Ev.sm,avatarSize:24}};function g({avatarSize:e,format:t,isSingle:n,onClickRemove:a,renderAvatar:l,showRemoveButton:m,shouldShrink:g,style:v,title:h}){const b=(0,c().tz)(),{height:S,fontSize:y,margin:x,marginEditState:w,closeIconSize:A,avatarSize:I}=f[t],k=e??I,M=(0,o().IS)((()=>({root:{display:"flex",alignItems:"center",flexShrink:g?1:0,minWidth:0,height:S,borderRadius:6,fontSize:y,lineHeight:"120%",margin:n?0:m?w:x,...v}})),[y,S,n,x,w,g,m,v]);return(0,u.jsxs)("div",{style:M.root,children:[null==l?void 0:l(k),(0,u.jsx)("div",{className:"notranslate",style:{...d().RC},children:h}),m?(0,u.jsx)(i().Ay,{ariaLabel:void 0!==h?b.formatMessage(p.removeTokenLabel,{title:h}):b.formatMessage(p.removeTokenLabelGeneric),onClick:a,style:{display:"flex",alignItems:"center",justifyContent:"center",width:S,height:S,marginInlineStart:2,marginInlineEnd:2,flexGrow:0,flexShrink:0,borderRadius:6},children:(0,u.jsx)(r().I,{icon:s().xMarkFillSmallIcon,size:A,style:{opacity:.5}})}):null]})}},859384:(e,t,n)=>{"use strict";n.d(t,{M:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"3.12 2.99 13.88 13.88",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"m16.774 4.341-.59.589-1.109-1.11.596-.594a.784.784 0 0 1 1.103 0c.302.302.302.8 0 1.102zM8.65 12.462l6.816-6.813-1.11-1.11-6.822 6.808a1.1 1.1 0 0 0-.236.393l-.289.932c-.052.196.131.38.315.314l.932-.288a.9.9 0 0 0 .394-.236"}),(0,o.jsx)("path",{d:"M4.375 6.25c0-1.036.84-1.875 1.875-1.875H11a.625.625 0 1 0 0-1.25H6.25A3.125 3.125 0 0 0 3.125 6.25v7.5c0 1.726 1.4 3.125 3.125 3.125h7.5c1.726 0 3.125-1.4 3.125-3.125V9a.625.625 0 1 0-1.25 0v4.75c0 1.036-.84 1.875-1.875 1.875h-7.5a1.875 1.875 0 0 1-1.875-1.875z"})]})},r=(0,n(340498).wt)("compose",i,"default")},870310:(e,t,n)=>{"use strict";n.d(t,{A:()=>j});n(898992),n(354520),n(581454);var o=n(296540),i=()=>n(484714),r=()=>n(951500),a=()=>n(590526),s=()=>n(401497),l=()=>n(79926),c=()=>n(295633),d=()=>n(807449),u=()=>n(26697),p=()=>n(898244),m=()=>n(713998),f=()=>n(416504),g=()=>n(187174),v=()=>n(216128),h=()=>n(906380),b=()=>n(450648),S=()=>n(179034),y=()=>n(201980),x=()=>n(69708),w=()=>n(100622),A=()=>n(534177),I=()=>n(284371),k=()=>n(815585);const M={diffHelpers:new(l().O2)("async-diffs",(async()=>await Promise.all([n.e(16471),n.e(79254)]).then(n.bind(n,501770))))};var C=()=>n(462685),T=n(474848);const _=(0,x().YK)({intermediateChanges:{id:"editPropertyDiff.intermediateChanges",defaultMessage:"{count, plural, one {# change} other {# changes}}"}});function j(e){const t=p().QP(e.propertySchema);switch(t){case"text":return(0,T.jsx)(B,{...e});case"relation":return(0,T.jsx)(D,{propertySchema:e.propertySchema,beforeValue:e.beforeValue,afterValue:e.afterValue,rootStore:e.rootStore});case"arrow":return(0,T.jsx)(E,{...e});default:(0,A().HB)(t)}}function B(e){const t=(0,i().v3)(),n=(0,r().l)(R(e.beforeValue.value)),o=(0,r().l)(R(e.afterValue.value)),a=(0,l().fJ)(M.diffHelpers).value,[s]=(0,g().Yb)((async()=>{if(a)return await a.diffTextValueAsync({environment:t,from:"textPropertyDiff",before:n,after:o,insertionAnnotation:[y().Ifu.Inserted],deletionAnnotation:[y().Ifu.Deleted]})}),[t,n,o,a],{});if(void 0===s.value)return(0,T.jsx)(P,{});const c={value:s.value,spaceId:e.beforeValue.spaceId};return(0,T.jsx)(C().A,{value:c,propertySchema:e.propertySchema,rootStore:e.rootStore})}const P=o.memo((function(){return(0,T.jsx)(n(874832).P,{style:{display:"inline-block",verticalAlign:"baseline",width:"60%",height:14,borderRadius:4}})}));function R(e){return y().JG8(e,1e3,[y().Ey_("…")])}function D(e){const{beforeValue:t,afterValue:n,propertySchema:o,rootStore:i}=e,r=(0,a().K8)((()=>m().tH({beforeValue:t.value,afterValue:n.value,propertySchema:o,getRecordModel:i.getRecordModel,getBlockTitle:e=>c().B.createChildStore(i,{table:S().ev,id:e.id}).getPropertyValue("title")})),[t,n,o,i]);return(0,T.jsx)(C().A,{value:{value:r,spaceId:t.spaceId},propertySchema:{type:"title",name:"Title"},rootStore:i})}function E(e){const t=(0,s().IS)((()=>({arrowDiffWrap:{display:"inline-flex",alignItems:"center",overflow:"hidden",flexWrap:"wrap",rowGap:6}})),[]),n=e.intermediateChanges&&e.intermediateChanges.length>0;return(0,T.jsxs)("div",{style:t.arrowDiffWrap,children:[(0,T.jsx)(C().A,{value:e.beforeValue,propertySchema:e.propertySchema,rootStore:e.rootStore}),n?(0,T.jsx)(F,{intermediateChanges:e.intermediateChanges,propertySchema:e.propertySchema,rootStore:e.rootStore,latestTimestamp:e.latestIntermediateTimestamp}):(0,T.jsx)(V,{}),(0,T.jsx)(C().A,{value:e.afterValue,propertySchema:e.propertySchema,rootStore:e.rootStore})]})}function V(){const e=(0,s().IS)((()=>({container:{padding:"0px 6px"}})),[]);return(0,T.jsx)("div",{style:e.container,children:(0,T.jsx)(d().I,{icon:h().arrowChevronSingleRightSmallIcon,size:"xs",colorVariant:"tertiary"})})}function F(e){const t=(0,x().tz)(),n=(0,s().IS)((()=>({container:{padding:"4px 8px"},tooltipContent:{display:"flex",flexDirection:"column",alignItems:"flex-start"},tooltipTitle:{fontWeight:500,maxWidth:264,...I().RC},tooltipBody:{color:w().Tj.text.secondary,display:"flex",flexDirection:"row"},tooltipSeperatorDot:{margin:"0px 4px"}})),[]),o=e=>{if(e)return(0,k().nl)(e,{useCompactFormat:!0})},i=(0,a().K8)((()=>{const n=(0,f().P)();return e.intermediateChanges.map((o=>{const i=(0,b().r4)({textValue:o.value.value,getRecordModel:e.rootStore.getRecordModel,userTimeZone:n,intl:t,disableAnnotationPrefix:!0,deterministic:!0});return"date"===e.propertySchema.type?i:i.replace(/,/g," / ")})).filter(Boolean).join(", ")||""}),[e.intermediateChanges,e.rootStore.getRecordModel,e.propertySchema.type,t]);return(0,T.jsx)(u().m,{placement:"top",renderTooltip:t=>(0,T.jsxs)("div",{...t,style:n.tooltipContent,children:[(0,T.jsx)("div",{style:n.tooltipTitle,children:i}),(0,T.jsxs)("div",{style:n.tooltipBody,children:[(0,T.jsx)(x().sA,{..._.intermediateChanges,values:{count:e.intermediateChanges.length}}),(0,T.jsx)("div",{style:n.tooltipSeperatorDot,children:"•"}),o(e.latestTimestamp)]})]}),render:e=>(0,T.jsx)("div",{...e,style:n.container,children:(0,T.jsx)(d().I,{icon:v().R,size:"xs",colorVariant:"tertiary"})})})}},877788:(e,t,n)=>{"use strict";n.d(t,{w:()=>i});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"2.4 2.39 15.2 14.52",svg:(0,n(474848).jsx)("path",{d:"M10 2.399c.27 0 .51.174.594.432l1.507 4.636h4.874a.625.625 0 0 1 .367 1.13L13.4 11.462l1.506 4.636a.625.625 0 0 1-.962.699L10 13.932l-3.943 2.865a.625.625 0 0 1-.962-.699L6.6 11.462 2.658 8.597a.625.625 0 0 1 .367-1.13h4.874L9.406 2.83A.625.625 0 0 1 10 2.399m0 2.647L8.948 8.285a.625.625 0 0 1-.595.432H4.95l2.754 2c.22.16.31.442.227.7l-1.052 3.238 2.755-2.001a.625.625 0 0 1 .734 0l2.755 2-1.052-3.237a.625.625 0 0 1 .227-.7l2.754-2h-3.405a.625.625 0 0 1-.594-.432z"})},i=(0,n(340498).wt)("star",o,"default")},888325:(e,t,n)=>{"use strict";function o(e){return`${e.table}:${e.id}`}n.d(t,{_:()=>o})},907487:(e,t,n)=>{"use strict";n.d(t,{J:()=>i,X:()=>r});var o=()=>n(598101);const i=[function(e){var t,o;return(0,n(68465).ZE)(e.publicEditMode,1===(null===(t=e.blocks)||void 0===t?void 0:t.length)?e.blocks[0]:null===(o=e.pageContext)||void 0===o?void 0:o.pageStore)},n(158658).p,(0,o().A)(n(462580).J)],r=[...i,(0,o().A)(n(375308).v),(0,o().A)(n(275143).y),function(e){return e.blocks.length>0}]},908928:(e,t,n)=>{"use strict";n.d(t,{GO:()=>z,Ju:()=>L,KA:()=>F,L2:()=>Z,MN:()=>N,Q0:()=>K,dA:()=>O,gI:()=>V,gX:()=>G,iN:()=>W,jw:()=>Y,oG:()=>U,sK:()=>H});n(898992),n(354520),n(803949),n(296540);var o=()=>n(891317),i=()=>n(675133),r=()=>n(792057),a=()=>n(128933),s=()=>n(295633),l=()=>n(457205),c=()=>n(807449),d=()=>n(493552),u=()=>n(302501),p=()=>n(243581),m=()=>n(433847),f=()=>n(68263),g=()=>n(388821),v=()=>n(179034),h=()=>n(824862),b=()=>n(161479),S=()=>n(96689),y=()=>n(798880),x=()=>n(69708),w=()=>n(763824),A=()=>n(534177),I=()=>n(855801),k=()=>n(594794),M=()=>n(499764),C=()=>n(547149),T=()=>n(964556),_=()=>n(769864),j=()=>n(496414),B=()=>n(579627),P=()=>n(384944),R=n(474848);const D=(0,x().YK)({duplicatingTemplate:{id:"botActions.duplicatingTemplate.loadingMessage",defaultMessage:"Duplicating template..."},duplicatingTemplateError:{id:"botActions.duplicateTemplateAndShareWithBot.snackbar.failure",defaultMessage:"Failed to duplicate template for to your workspace"},removeInheritedConnectionTitle:{id:"botActions.removeInheritedConnection.title",defaultMessage:"Disconnect {botName} and unlink share settings from parent page?"},removeInheritedConnectionDescription:{id:"botActions.removeInheritedConnection.description",defaultMessage:"This page will no longer inherit share settings from its parent. Admins can still restore settings later."},removeInheritedConnectionAcceptLabel:{id:"botActions.removeInheritedConnection.acceptLabel",defaultMessage:"Disconnect and unlink"}});function E(e,t){const{environment:n,spaceStore:o,membershipType:i}=t,r=function(e){const{name:t,spaceStore:n,userId:o,icon:i,type:r,environment:a}=e,s=Date.now(),l={name:t,created_at:s,created_by_table:y().oo,created_by_id:o,alive:!0,icon:i,space_id:n.id,last_edited_at:s,last_edited_by_id:o,last_edited_by_table:y().oo};switch(r){case"guest":return{...l,type:"guest",capabilities:e.capabilities,parent_table:S().NX,parent_id:n.id,integration_id:void 0};case"scim":return{...l,id:(0,k().Z1)({environment:a,table:h().GP,spaceId:n.id}),type:"scim",parent_table:y().oo,parent_id:o};default:(0,A().HB)(r)}}(t),a=P().eC({environment:n,table:h().GP,value:r,inMemoryRecordCache:n.defaultRecordCache.inMemoryRecordCache,transaction:e});return B().yG({environment:n,spaceStore:o,actors:[{type:"bot",membershipType:i,botId:a.id,parent:void 0}],transaction:e}),{botStore:a}}function V(e){const{environment:t}=e,{serverCommitResult:n,performResult:{botStore:o}}=C().createAndCommit({userAction:"botActions.createSpaceBot",environment:t,canUndo:!0,perform:t=>E(t,e)});return{botStore:o,transactionPromise:n}}async function F(e){const{environment:t,botId:n,onSuccess:o}=e,i=await _().callApi({eventName:"deleteBot",environment:t,data:{botId:n}});"failed"===i.type?r().Qg(i):"success"===i.type&&o&&(await T().refreshExternalIntegrationStore({environment:t}),o())}async function L(e){const{environment:t,table:n,id:i,type:a}=e;let s;return s=n===S().NX?await _().callCellCompatibleApi({eventName:"getBots",environment:t,data:{table:n,id:i,type:a},cellNavigation:{spaceId:i}}):await _().callApi({eventName:"getBots",environment:t,data:{table:n,id:i,type:a}}),"failed"===s.type?(r().Qg(s),{botIds:[],recordMap:{}}):(s.data.integrationManagementPermissions&&o().bM.updatePermissions(s.data.integrationManagementPermissions),{botIds:s.data.botIds,recordMap:s.data.recordMap})}async function z(e){const{environment:t,spaceStore:n,botIds:i}=e;if(!n)return;const a=await _().callApi({eventName:"getBotSharedPageIds",environment:t,data:{spaceId:n.id,botIds:i}});if("failed"!==a.type)return function(e){const{integrationManagementPermissions:t}=e;t&&Object.keys(t).length>0&&o().bM.updatePermissions(t)}({integrationManagementPermissions:a.data.integrationManagementPermissions}),a.data;r().Qg(a)}async function N(e){const{environment:t,spaceStore:n,botIds:o}=e;if(!n)return;const i=await _().callApi({eventName:"getBotSharedAgentIds",environment:t,data:{spaceId:n.id,botIds:o}});if("failed"!==i.type)return i.data;r().Qg(i)}async function O(e){const{environment:t,botId:n}=e,o=await _().callApi({eventName:"getBotToken",environment:t,data:{botId:n}});if("failed"!==o.type)return o.data.token;r().Qg(o)}function H(e){const{botValue:t,store:n,environment:o}=e,{id:i,parent_id:r,parent_table:a,capabilities:s}=t,l={type:"bot_permission",bot_id:i,parent_id:r,parent_table:a,role:(0,m().MD)(s)};C().createAndCommit({userAction:"TopbarMoreButton.handleAddingConnection",environment:o,canUndo:!0,perform:e=>{B().zP({environment:o,store:n,permissionItems:[l],transaction:e})}})}function U(e){const{botId:t,store:n,environment:o}=e,i=n.getPermissionItems().filter((e=>!!(0,f().P3)(e)));for(const r of i)if(r.bot_id===t){const e={...r,role:"none"};C().createAndCommit({userAction:"TopbarMoreButton.handleRemovingConnection",environment:o,canUndo:!0,perform:t=>{B().zP({environment:o,store:n,permissionItems:[e],transaction:t})}})}}async function K(e){const{botId:t,botName:n,store:o,environment:a}=e,s={type:"bot_permission",bot_id:t,role:"none"},l=(await r().Gh({message:(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(d().D,{styleKey:"titleSmSemibold",children:i().A.formatMessage(D.removeInheritedConnectionTitle,{botName:n})}),(0,R.jsx)(u().A,{isSmall:!0,isMultiline:!0,style:{marginTop:8},children:(0,R.jsx)(x().sA,{...D.removeInheritedConnectionDescription})})]}),acceptLabel:i().A.formatMessage(D.removeInheritedConnectionAcceptLabel),icon:(0,R.jsx)(c().I,{icon:p().arrowBranchIcon,size:"xl"})})).accept;return l&&C().createAndCommit({userAction:"TopbarMoreButton.handleRemovingInheritedConnection",environment:a,canUndo:!0,perform:e=>{B().wW({environment:a,store:o,permissionItem:s,shouldInherit:!0,transaction:e})}}),l}async function W(e){const{environment:t,spaceStore:n,botStore:o,pageIdAndOperations:i,effectiveAdminOnly:r}=e;return(0!==i.length||void 0!==r)&&(await _().callApi({eventName:"setBotPermissionsForPages",environment:t,data:{spaceId:n.getSpaceId(),botId:o.id,pageOperations:i,effectiveAdminOnly:r}}),!0)}async function G(e){const{environment:t,spaceStore:n,botStore:o,agentOperations:i}=e;return 0!==i.length&&(await _().callApi({eventName:"setBotPermissionsForAgents",environment:t,data:{spaceId:n.getSpaceId(),botId:o.id,agentOperations:i}}),!0)}async function Z(e){const{environment:t,spaceStore:n,spaceViewStore:o,templatePageId:r,botValue:c,pages:d}=e;if(!n)return;const u=l().v.createChildStore(n,{table:h().GP,id:c.id});if(r)return await async function(e){const{environment:t,spaceStore:n,spaceViewStore:o,templatePageId:r,botStore:s}=e;if(!n||!o)return;try{j().m({message:D.duplicatingTemplate});const e=await _().callCellCompatibleApi({eventName:"loadBlockSubtree",environment:t,data:{block:{id:r,spaceId:(0,b().e)(void 0)},shallow:!1},cellNavigation:{recordId:r}});if("failed"===e.type)return;const i=g().RecordMapWithRole.create(e.data.subtreeRecordMap),{createAndDuplicatePageInSpace:a}=await(0,I().nd)(),{performResult:l}=C().createAndCommit({userAction:"botActions.duplicateTemplateAndShareWithBot",environment:t,canUndo:!0,perform:e=>{const l=a({environment:t,recordMap:i,copyPageId:r,isPrivate:!0,spaceStore:n,spaceViewStore:o,transaction:e,allowCopyExternalObjectInstances:!1}),c=o.getPrivatePageIds();c.length>0&&P().zv({store:o,data:{private_pages:[l.id,...c]},transaction:e});const d=(0,M().Ws)({botStore:s,addPermission:!0});return B().zP({environment:t,store:l,permissionItems:[d],transaction:e}),l}});return l}catch(l){a().D6({label:i().A.formatMessage(D.duplicatingTemplateError)})}finally{j().V()}}({environment:t,templatePageId:r,botStore:u,spaceStore:n,spaceViewStore:o});!function(e){const{spaceStore:t,environment:n,pages:o,botStore:i,addPermission:r}=e;if(!t)return;const a=(0,M().Ws)({botStore:i,addPermission:r});o.forEach((e=>{const o=s().B.createChildStore(t,{table:v().ev,id:e,spaceId:t.getSpaceId()});C().createAndCommit({userAction:"botActions.updateBlockPermissionsForBot",environment:n,canUndo:!0,perform:e=>{B().zP({environment:n,store:o,permissionItems:[a],transaction:e})}})}))}({environment:t,spaceStore:n,botStore:u,pages:d,addPermission:!0})}async function Y({botIds:e,environment:t}){e&&0!==e.length&&await(0,w().lX)(e,5,(async e=>F({environment:t,botId:e,onSuccess:()=>{}})))}},922952:(e,t,n)=>{"use strict";n.d(t,{u:()=>a});var o=()=>n(295633),i=()=>n(302996),r=()=>n(723085);function a(e){return e instanceof r().h||e instanceof i().SpaceStore||e instanceof o().B}},923744:(e,t,n)=>{"use strict";n.d(t,{j:()=>s});var o=n(296540),i=()=>n(69708),r=()=>n(486678),a=n(474848);const s=(0,o.forwardRef)((function(e,t){const s=(0,i().tz)(),l=(0,n(484714).v3)(),c=e["aria-label"],{disableDrag:d,hideClickMessage:u}=e,p=(0,o.useMemo)((()=>{if(void 0!==c)return c;const e=!d,t=!u;return e&&t?s.formatMessage({id:"dragHandleButton.ariaLabel.dragAndClick",defaultMessage:"Drag to move, click to open menu"}):e?s.formatMessage({id:"dragHandleButton.ariaLabel.dragOnly",defaultMessage:"Drag to move"}):t?s.formatMessage({id:"dragHandleButton.ariaLabel.clickOnly",defaultMessage:"Click to open menu"}):""}),[c,d,u,s]),m=(0,n(401497).IS)((()=>({buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",cursor:e.disableDrag?"pointer":"grab",width:e.width??r().Z,height:e.height??r().S,borderRadius:4,...e.style},text:{color:n(100622).Tj.text.inverseSecondary}})),[e.disableDrag,e.width,e.height,e.style]);const{onClick:f}=e,g=(0,o.useCallback)((e=>{f&&(e.preventDefault(),f(e))}),[f]),v=(0,o.useCallback)((o=>(0,a.jsx)(n(718827).Ay,{ref:t,ariaLabel:p,role:e.role,style:m.buttonStyle,onClick:e.onClick,onContextMenu:g,disallowTabbing:e.disallowTabbing,...o,children:(0,a.jsx)(n(807449).I,{icon:n(256016).i,colorVariant:"tertiary"})})),[p,g,e.disallowTabbing,e.onClick,e.role,t,m.buttonStyle]);return e.disableTooltip?v({}):(0,a.jsx)(n(26697).m,{placement:e.tooltipPlacement??"bottom",delayThreshold:300,renderTooltip:function(){const t=l.device.isMac?"⌘/":"ctrl/";return(0,a.jsxs)("div",{style:{textAlign:"center"},children:[e.disableDrag?void 0:void 0!==e.dragTooltipMessage?e.dragTooltipMessage:(0,a.jsx)(i().sA,{defaultMessage:"Drag <medium>to move</medium>",id:"dragHandleButton.dragPrompt.text",values:{medium:e=>(0,a.jsx)("span",{style:m.text,children:e})}}),e.hideClickMessage?void 0:(0,a.jsx)("div",{children:(0,a.jsx)(i().sA,{defaultMessage:"Click <medium>or</medium> <kbd>⌘/</kbd> <medium>to open menu</medium>",id:"dragHandleButton.clickPrompt.text",values:{medium:e=>(0,a.jsx)("span",{style:m.text,children:e}),kbd:()=>(0,a.jsx)("kbd",{children:t})}})})]})},render:v})}))},952412:(e,t,n)=>{"use strict";n.d(t,{u:()=>i});class o extends(()=>n(757695))().Store{getInitialState(){return{selectedTeamStore:void 0,subscribedUserTeamStores:void 0,collectionContextStore:void 0,isPostsCollectionLoaded:!1,setComposerStyle:void 0,teamTargetMobilePopupOpen:!1}}openTeamTargetMobilePopup(){this.setState({...this.state,teamTargetMobilePopupOpen:!0})}closeTeamTargetMobilePopup(){this.setState({...this.state,teamTargetMobilePopupOpen:!1})}reset(){this.setState({selectedTeamStore:void 0,subscribedUserTeamStores:void 0,collectionContextStore:void 0,isPostsCollectionLoaded:!1,setComposerStyle:void 0,teamTargetMobilePopupOpen:!1})}}const i=new o},962036:(e,t,n)=>{"use strict";n.d(t,{g:()=>u});n(296540);var o=()=>n(484714),i=()=>n(807449),r=()=>n(493552),a=()=>n(81068),s=()=>n(406533),l=()=>n(284371),c=()=>n(148024),d=n(474848);function u(e){const t=(0,o().v3)();return(0,d.jsx)(a().A,{focused:!1,href:e.href,external:!0,onClick:()=>c().FH(t,{from:e.analyticsFrom}),icon:(0,d.jsx)(i().I,{icon:s().questionMarkCircleIcon,colorVariant:"secondary"}),title:(0,d.jsx)(r().D,{colorPalette:"gray",colorVariant:"secondary",children:e.title}),style:l().RC})}},970236:(e,t,n)=>{"use strict";n.d(t,{E:()=>s});n(296540);var o=()=>n(401497),i=()=>n(100622),r=()=>n(284371),a=n(474848);function s(e){const{color:t="gray",style:n,content:s,...l}=e,c=(0,o().IS)((()=>({badge:{alignSelf:"center",padding:"2px 4px",background:i().Tj[t].background.secondaryTranslucent,color:i().Tj[t].text.accentPrimary,borderRadius:4,fontSize:11,fontWeight:r().Wy.medium,lineHeight:1.3,...n}})),[t,n]);return(0,a.jsx)("div",{style:c.badge,...l,children:s})}},973238:(e,t,n)=>{"use strict";n.r(t),n.d(t,{arrowInCircleDownIcon:()=>r,iconDefinition:()=>i});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"2.37 2.37 15.26 15.25",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M6.958 10.446a.625.625 0 0 1 .884 0l1.533 1.533V6.513a.625.625 0 1 1 1.25 0v5.466l1.533-1.533a.625.625 0 1 1 .884.883l-2.6 2.6a.625.625 0 0 1-.884 0l-2.6-2.6a.625.625 0 0 1 0-.883"}),(0,o.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},r=(0,n(340498).wt)("arrowInCircleDown",i,"default")},973454:(e,t,n)=>{"use strict";n.d(t,{p:()=>l,A:()=>c});var o=n(296540),i=()=>n(615234);const r=24*i().pT;function a(e){return s(e).status}function s(e){if(null==e||!e.enabled)return{status:"disabled"};const t=e.start_ts?1e3*e.start_ts-Date.now():0;return t<=0?{status:"active"}:t<=r?{status:"warning",nextUpdateInMs:t}:{status:"scheduled",nextUpdateInMs:t-r}}function l(e){const[t,n]=(0,o.useState)((()=>a(e)));return(0,o.useEffect)((()=>{if(null==e||!e.enabled)return;let t;return function o(){t=void 0;const{status:i,nextUpdateInMs:r}=s(e);n(i),r&&(t=setTimeout(o,r))}(),()=>{t&&(clearTimeout(t),t=void 0)}}),[e]),t}function c(e){const[t,n]=(0,o.useState)((()=>Date.now())),r=(null==e?void 0:e.enabled)&&e.start_ts;return(0,o.useEffect)((()=>{if("number"!=typeof r)return;const e=r;let t;return function o(){const r=Date.now();n(r);const a=e*i().TD-r;if(a>0){const e=a%i().Xb,n=0===e?i().Xb:e;t=setTimeout(o,n)}else t=void 0}(),()=>{t&&(clearTimeout(t),t=void 0)}}),[r]),{freezeStatus:a(e),minUntilFreeze:r?Math.floor((r*i().TD-t)/i().Xb):void 0}}},994006:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});n(296540);var o=n(474848);const i=function(e){const t={marginInlineEnd:e.avatarMarginRight??6,alignSelf:"center"},i={display:"flex",alignItems:"center",minWidth:0,...e.style},r=e.inline?{...t,width:"none",minHeight:"none"}:t,{userStore:a,avatarShouldShowShadow:s,avatarSize:l,hasTooltip:c,tooltipHeader:d,hasPersonHoverCard:u,spaceStore:p}=e,m=(0,n(69708).tz)(),f=(0,n(590526).K8)((()=>null==a?void 0:a.getDisplayName(m)),[a,m]),g=(0,o.jsxs)("div",{style:i,children:[(0,o.jsx)("div",{style:r,children:(0,o.jsx)(n(453697).A,{userStore:a,avatarShouldShowShadow:s,size:l,hasTooltip:c&&!u,hasPersonHoverCard:!1,tooltipHeader:d})}),(0,o.jsx)("div",{className:"notranslate",style:{...n(284371).RC},children:f})]});return u?(0,o.jsx)(n(436525).D,{userStore:a,spaceStore:p,children:g}):g}}}]);