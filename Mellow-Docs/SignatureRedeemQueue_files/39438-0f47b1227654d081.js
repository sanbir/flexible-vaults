"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[39438],{1195:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().Store{getInitialState(){return{trustedDomainPointers:[],enabledTrustedEmailDomains:[],trustedDomains:[],lastEmitData:{value:-1,spaceId:void 0}}}getForSpace(e){if(!e)return;const{enabledTrustedEmailDomains:t,trustedDomainPointers:n,trustedDomains:o,lastEmitData:i}=this.state;return i.spaceId===e.id?{enabledTrustedEmailDomains:t,trustedDomainPointers:n,trustedDomains:o}:void 0}shouldRefetchTrustedDomains({currentSpaceId:e,emitValue:t}){const{spaceId:n,value:o}=this.state.lastEmitData;return e!==n||t!==o}}const i=o},5580:(e,t,n)=>{n.d(t,{n:()=>a});var o=()=>n(907258),i=()=>n(590526),s=()=>n(209199);function a(){return(0,i().K8)((()=>{var e;const t=(null===(e=o().default.state.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.preferred_locale)??s().q;return(0,s().o_)(t)}),[])}},22634:(e,t,n)=>{n.d(t,{O:()=>s});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"4.42 3.97 12.16 12.06",directional:!0,svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"m5.492 4.158 5.4 5.4a.625.625 0 0 1 0 .884l-5.4 5.4a.625.625 0 1 1-.884-.884L9.566 10 4.608 5.042a.625.625 0 1 1 .884-.884"}),(0,o.jsx)("path",{d:"m16.392 10.442-5.4 5.4a.625.625 0 0 1-.884-.884L15.066 10l-4.958-4.958a.625.625 0 0 1 .884-.884l5.4 5.4a.625.625 0 0 1 0 .884"})]})},s=(0,n(340498).wt)("arrowChevronDoubleForward",i,"default")},58180:(e,t,n)=>{n.d(t,{E:()=>i});var o=()=>n(310526);function i(e,t){var n;if(!t)return!1;if(!(0,o().U)(t))return!1;const i=null===(n=e.getTopLevelAncestorBlockStore())||void 0===n?void 0:n.id;return!!i&&!!t.getPrivatePageIds().includes(i)}},200688:(e,t,n)=>{n.d(t,{B:()=>c,S:()=>r});n(898992),n(354520);var o=()=>n(590526),i=()=>n(79926),s=()=>n(774733),a=()=>n(655236);function r(e,t){const{value:n}=(0,i().fJ)(s().commentsDependency);return(0,o().K8)((()=>e&&n?n.discussionHelpers.getDiscussionsForSidebar({blockStore:e,currentUserId:e.userId,ignoreAfterTime:t??Date.now()}).filter((e=>e.isDefined()&&e.getCommentPointers().length>0)):[]),[n,e,t])}function c({navigableBlockStore:e}){const t=r(e);return(0,o().K8)((()=>t.filter((t=>(0,a().s)({discussionStore:t,navigableBlockStore:e})))),[t,e])}},204263:(e,t,n)=>{n.d(t,{A:()=>s});n(296540);var o=()=>n(69708),i=n(474848);const s=function(){const e=(0,o().tz)(),t=(0,n(484714).v3)(),s=(0,o().YK)({helpTitle:{defaultMessage:"Learn about tasks",id:"myTasks.helpTooltip.title"}}),a=(0,n(863059).gQ)();return(0,i.jsx)(n(26697).m,{placement:"bottom",renderTooltip:t=>e.formatMessage(s.helpTitle),render:o=>(0,i.jsx)(n(695115).A,{icon:n(406533).questionMarkCircleIcon,iconStyle:a.icon,ariaLabel:e.formatMessage(s.helpTitle),style:{width:a.iconButton.width,height:a.iconButton.height},onClick:e=>{e.preventDefault(),(0,n(752860).L)({environment:t,url:n(696746).hI,targetSelf:!1})},...o})})}},277201:(e,t,n)=>{n.d(t,{I:()=>T,i:()=>x});var o=n(296540),i=()=>n(756117),s=()=>n(726637),a=()=>n(484714),r=()=>n(590526),c=()=>n(401497),d=()=>n(75435),l=()=>n(882722),u=()=>n(695115),p=()=>n(26697),g=()=>n(387964),m=()=>n(69708),f=()=>n(100622),v=()=>n(180252),S=()=>n(869562),b=()=>n(749687),h=()=>n(35392),y=n(474848);function T(e){const t=(0,a().v3)(),n=(0,a().Y0)(),o=(0,m().tz)(),i=(0,r().O$)(b().sidebarMouseEnteredStore),s=(0,r().O$)(d().b),c=(0,r().O$)((0,v().$o)(t)),l=o.formatMessage({defaultMessage:"Close sidebar",id:"sidebarUnexpandButton.closeSidebar.tooltip"}),u=(!n.isElectronMac||!c)&&!s&&i;return(0,y.jsx)(x,{isVisible:u,icon:g().S,caption:l,onClick:()=>{S().closeSidebarFromTopbarUnexpandButton(t)},keyboardShortcutName:"toggleSidebar",style:e.style,hoveredStyle:e.hoveredStyle})}function x(e){const t=(0,a().Y0)(),n=(0,c().IS)((()=>({keyboardShortcut:{color:f().Tj.text.inverseSecondary},button:{fill:f().Tj.icon.secondary}})),[]),r=(0,o.useMemo)((()=>({position:"relative",marginInlineStart:10,...s().A.isMobile&&{height:"100%"},...n.button,...e.style})),[e.style,n.button]);return e.isVisible?(0,y.jsx)(p().m,{renderTooltip:()=>(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{children:e.caption}),e.keyboardShortcutName?(0,y.jsx)(h().A,{style:n.keyboardShortcut,name:e.keyboardShortcutName}):void 0]}),originGap:6,placement:t.isElectron?"right":"bottom",render:t=>(0,y.jsx)(i().A,{tag:u().A,animate:{opacity:e.isVisible?1:0},ariaLabel:e.caption,disabled:!e.isVisible,icon:{icon:e.icon,size:"lg",style:{fill:"inherit"}},style:r,hoveredStyle:e.hoveredStyle,onClick:e.onClick,className:l().P7S,...t})}):null}},361946:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(296540),i=()=>n(590526),s=()=>n(69708),a=()=>n(645302),r=()=>n(525569),c=()=>n(712505),d=n(474848);const l=function(e){const{store:t,shouldShowMoveToMenu:l,iconStyle:u,style:p}=e,g=(0,n(484714).v3)(),m=(0,s().tz)(),f=(0,i().K8)((()=>{const e=r().default.state;if("agentCompletionPopup"===e.type&&e.context.origin instanceof n(295633).B)return e.context.origin.id}),[]),v=(0,i().K8)((()=>(0,n(492414).Ay)({store:t,fullyQualified:!1,pageVisitSource:n(584262).y8.Expand,scrollToBlockId:f})),[t,f]),S=(0,n(401497).IS)((()=>({keyboardShortcut:{color:n(100622).Tj.text.inverseSecondary},iconButtonWrapper:{height:24}})),[]),b=(0,o.useCallback)((()=>{r().default.setDidTransitionFromPeekToFullPage(!0)}),[]),h=(0,o.useCallback)((()=>{var e,t,o;"agentCompletionPopup"===r().default.state.type&&r().default.updateScrollerStore(n(166972).A),a().uO(g,{isNewPage:l,peek_mode:c().default.state.mode,from:"topbar_button",target_page_id:null===(e=c().default.peekTargetStore.state)||void 0===e?void 0:e.id}),a().Zh(g,{peek_mode:c().default.state.mode,from:"topbar_open_as_page_button",target_page_id:null===(t=c().default.peekTargetStore.state)||void 0===t?void 0:t.id,target_parent_id:null===(o=c().default.peekTargetStore.state)||void 0===o?void 0:o.getParentId()})}),[g,l]);return(0,d.jsx)(n(26697).m,{renderTooltip:()=>(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{children:(0,d.jsx)(s().sA,{defaultMessage:"Open in full page",id:"peekTopbar.navigateToPage.tooltip"})}),(0,d.jsx)(n(35392).A,{style:S.keyboardShortcut,name:"commandEnter"})]}),render:t=>(0,d.jsx)("div",{style:S.iconButtonWrapper,children:(0,d.jsx)(n(695115).A,{...t,onMouseDown:b,icon:n(89956).p,iconStyle:u,hasBackground:e.hasBackground,href:v,onClick:h,ariaLabel:m.formatMessage({id:"peekTopbar.navigateToPage.tooltip",defaultMessage:"Open in full page"}),style:p})})})}},378941:(e,t,n)=>{n.d(t,{J7:()=>u,XC:()=>g,hs:()=>p});n(898992),n(354520),n(581454);var o=()=>n(700511),i=()=>n(165358),s=()=>n(792071),a=()=>n(277816),r=()=>n(798880),c=()=>n(229833),d=()=>n(534177),l=()=>n(769864);function u({trustedDomainIds:e,spaceStore:t}){return e.map((e=>{const n=o().L.createChildStore(t,{table:a().A,id:e,spaceId:t.id});if(n.canRead())return n})).filter(d().O9)}async function p({environment:e,spaceId:t,currentUserId:n,organizationId:o}){const s=await l().callApi({eventName:"getTrustedDomainsNumberOfMembers",environment:e,data:{spaceId:t,organizationId:o},userId:n});return"failed"===s.type?(i().rateLimitedLog({from:"trustedDomainHelpers",level:"error",type:"getTrustedDomainsNumberOfMembersForSpaceFailed",spaceId:t,actor:n?{id:n,table:r().oo}:void 0,error:(0,c().convertErrorToLog)(s.error)}),[]):s.data.results}async function g({environment:e,spaceId:t}){const n=await l().callApi({eventName:"getTrustedDomainsForSpace",environment:e,data:{spaceId:t}});if("success"!==n.type)return[];return n.data.results.filter((e=>e.domain_link_sharing_enabled)).map((e=>s().Bj6.fromValue(a().A,e)))}},387964:(e,t,n)=>{n.d(t,{S:()=>s});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",fittedViewBox:"3.42 3.97 12.16 12.06",directional:!0,svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M3.608 10.442a.625.625 0 0 1 0-.884l5.4-5.4a.625.625 0 0 1 .884.884L4.934 10l4.958 4.958a.625.625 0 1 1-.884.884z"}),(0,o.jsx)("path",{d:"m14.508 4.158-5.4 5.4a.625.625 0 0 0 0 .884l5.4 5.4a.625.625 0 1 0 .884-.884L10.434 10l4.958-4.958a.625.625 0 1 0-.884-.884"})]})},s=(0,n(340498).wt)("arrowChevronDoubleBackward",i,"default")},462113:(e,t,n)=>{n.d(t,{A:()=>g});var o=n(296540),i=()=>n(726637),s=()=>n(590526),a=()=>n(695115),r=()=>n(26697),c=()=>n(340498),d=()=>n(69708),l=()=>n(100622),u=n(474848);const p=(0,d().YK)({edit:{id:"FormEmbedActionButtons.edit",defaultMessage:"Edit form"},copyLink:{id:"FormEmbedActionButtons.link",defaultMessage:"Copy link to form"},copiedLink:{id:"FormTopbarActionButtons.copiedLinkToForm.tooltip",defaultMessage:"Copied"}}),g=function(e){const t=(0,n(484714).v3)(),g=(0,d().tz)(),m=(0,o.useRef)(null),{formBlockStore:f,inPeekMode:v}=e,S=(0,s().O$)(n(907258).AppStoreSidebarSpaceViewStore),b=(0,s().K8)((()=>!!S&&(0,n(245128).A)({spaceViewStore:S,pageId:f.id})),[S,f]),h=(0,n(401497).IS)((()=>{const e=v?c().Ev.sm:c().Ev.default;return{actionButtonStyle:{width:v?24:32,height:v?"auto":28,marginInlineStart:v?0:4,marginInlineEnd:0},actionIconStyle:{width:e,height:e,fill:v?l().Tj.icon.secondary:l().Tj.icon.primary}}}),[v]),[y,T]=(0,o.useState)(!1),x=(0,s().K8)((()=>f.getIsFormPublic()),[f]),k=(0,s().K8)((()=>{var e;return!x&&!i().A.isMobile&&(t.currentUser.id===f.getCreatedById()&&Boolean(null===(e=f.getFormBlockParentBlockStore())||void 0===e?void 0:e.canEditCollection()))}),[t.currentUser.id,f,x]),w=(0,o.useMemo)((()=>async()=>{T(!0);const e=(0,n(465741).px)(f);(await(0,n(212497).jd)())({stringValue:e,environment:t,copiedMessage:i().A.isMobile?n(614787).l.copiedLinkToForm:void 0}),setTimeout((()=>{T(!1)}),1e3)}),[f,t]);function j(){const e=f.getFormBlockParentBlockStore();var o;e&&n(857783).uK({environment:t,store:e,collectionViewId:null===(o=f.getParentStore())||void 0===o?void 0:o.id,pageVisitSource:n(584262).y8.FormInternalPage})}const I=(0,u.jsxs)(u.Fragment,{children:[k?(0,u.jsx)(r().m,{renderTooltip:()=>(0,u.jsx)(u.Fragment,{children:g.formatMessage(p.edit)}),render:e=>(0,u.jsx)(a().A,{...e,style:{...h.actionButtonStyle,marginInlineEnd:void 0},icon:n(105819).pencilLineIcon,iconStyle:h.actionIconStyle,ariaLabel:g.formatMessage(p.edit),onClick:j})}):void 0,(0,u.jsx)(r().m,{originGap:t.device.isElectronWindows?10:void 0,forceVisibleState:!!y||void 0,renderTooltip:()=>(0,u.jsx)(d().sA,{...y?p.copiedLink:p.copyLink}),render:e=>(0,u.jsx)(a().A,{...e,style:h.actionButtonStyle,icon:n(742852).linkIcon,iconStyle:h.actionIconStyle,ariaLabel:g.formatMessage(p.copyLink),onClick:w})}),x?void 0:(0,u.jsx)(n(487146).TopbarFavoriteButton,{store:f,useDefaultTooltipPlacement:!0,iconStyle:{...h.actionIconStyle,fill:b?l().Tj.topbarFavorite:h.actionIconStyle.fill},buttonStyle:h.actionButtonStyle,spaceViewStore:S}),v?(0,u.jsx)(n(361946).A,{store:f,shouldShowMoveToMenu:!1,hasBackground:!0,iconStyle:h.actionIconStyle,style:{width:24}}):void 0]});return v?(0,u.jsx)("div",{ref:m,children:(0,u.jsx)(n(886025).Y,{align:"right",containerRef:m,height:28,style:{position:"absolute",borderRadius:1,marginTop:6,marginInlineEnd:10},children:I})}):I}},465505:(e,t,n)=>{n.d(t,{P:()=>i});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"2.72 1.77 14.55 16.45",svg:(0,n(474848).jsx)("path",{d:"M10.302 1.853a.63.63 0 0 0-.604 0l-6.65 3.669c-.2.11-.323.32-.323.547v7.862c0 .228.124.437.323.547l6.65 3.67a.63.63 0 0 0 .604 0l6.65-3.67c.2-.11.323-.32.323-.547V6.069a.63.63 0 0 0-.323-.547zM3.975 7.127l5.4 2.98v6.434l-5.4-2.98zm6.65 9.414v-6.434l5.4-2.98v6.435zM15.356 6.07 10 9.024 4.644 6.069 10 3.114z"})},i=(0,n(340498).wt)("cube",o,"default")},473975:(e,t,n)=>{n.r(t),n.d(t,{DiscussionFormat:()=>B,anyDiscussionCommentsLoading:()=>z,commentComparator:()=>E,discussionLocationToDiscussionFormat:()=>Z,formatFileSize:()=>G,getAndSortCommentStoresByTime:()=>L,getDiscussions:()=>A,getDiscussionsForSidebar:()=>_,getFirstComment:()=>F,getIcon:()=>I,getLatestRelevantComment:()=>C,getSetOfUsersInDiscussions:()=>R,hasCommentChanged:()=>N,inputIsEmpty:()=>U,isCommentAllEmojis:()=>$,lineClampForCommentCount:()=>D,sortDiscussionStoresByLatestComment:()=>O});n(898992),n(354520),n(803949),n(581454),n(737550);var o=()=>n(730240),i=()=>n(764880);n(296540);const s={viewBox:"0 0 20 20",fittedViewBox:"1.79 1.87 16.47 15.5",svg:(0,n(474848).jsx)("path",{d:"M9.66 1.977a.63.63 0 0 1 .785.08l2.647 2.647.08.097a.626.626 0 0 1-.866.867l-.098-.08-1.579-1.58v6.95l6.018 3.475-.577-2.155a.626.626 0 0 1 1.207-.324l.97 3.615.019.121a.625.625 0 0 1-.462.645l-3.614.967a.625.625 0 0 1-.325-1.207l2.158-.579-6.015-3.472-5.97 3.55 2.165.55.118.043a.626.626 0 0 1-.301 1.188l-.125-.02-3.627-.922a.625.625 0 0 1-.451-.76l.921-3.626a.625.625 0 0 1 1.212.308L3.4 14.52l5.98-3.554V4.008L7.8 5.588l-.099.08a.626.626 0 0 1-.786-.964l2.647-2.647z"})},a=(0,n(340498).wt)("arrow3D",s,"default");var r=()=>n(300985),c=()=>n(575157),d=()=>n(177148),l=()=>n(251254),u=()=>n(11356),p=()=>n(435644),g=()=>n(421559),m=()=>n(973231),f=()=>n(578717),v=()=>n(916813),S=()=>n(630417),b=()=>n(811563),h=()=>n(201980),y=()=>n(496603),T=()=>n(534177),x=()=>n(939768),k=()=>n(299545);const w=()=>n(43371),j={doc:c().D,docx:c().D,pages:c().D,md:c().D,txt:c().D,rtf:c().D,xls:g().T,xlsx:g().T,csv:g().T,tsv:g().T,ods:g().T,pdf:n(199103).H,pptx:u().G,ppt:u().G,zip:f().p,br:f().p,bz2:f().p,gz:f().p,"7z":f().p,dmg:f().p,pkg:f().p,jar:f().p,rar:f().p,tar:f().p,xar:f().p,stl:a,obj:a,fbx:a,amf:a,iges:a,mp3:m().$,m4a:m().$,wav:m().$,aac:m().$,ogg:m().$,flac:m().$,alac:m().$,wma:m().$,mp4:l().C,m4v:l().C,gifv:l().C,webm:l().C,mkv:l().C,mov:l().C,qt:l().C,avi:l().C,wmv:l().C,asf:l().C,flv:l().C,f4v:l().C,mpeg:l().C,amv:l().C,exe:n(465505).P,otf:p().a,ttf:p().a,woff:p().a,eof:p().a,py:r().Z,java:r().Z,js:r().Z,ts:r().Z,tsx:r().Z,c:r().Z,h:r().Z,cpp:r().Z,go:r().Z,rs:r().Z,css:r().Z,php:r().Z,swift:r().Z,kt:r().Z,lua:r().Z,m:r().Z,bash_profile:r().Z,bashrc:r().Z,zshrc:r().Z,vimrc:r().Z,vim:r().Z};function I(e){const t=function(e){if(!e)return"";const{pathname:t}=x().qg(e);if(!t)return"";const n=t.split(".");return n[n.length-1]}(e).toLowerCase();return j[t]??d().Y}let B=function(e){return e[e.Menu=0]="Menu",e[e.Page=1]="Page",e[e.Sidebar=2]="Sidebar",e[e.Margin=3]="Margin",e[e.Unfurl=4]="Unfurl",e}({});function C({recordStore:e,currentUserId:t,timestamp:n}){return K({recordStore:e,currentUserId:t,timestamp:n})||F(e)}const P=6,M=3;function D(e){return e>1?M:P}function A(e){return e?k().Bw(e,{recursivelyLoadAllDiscussions:!0,includeLoadingDiscussions:!0}):[]}function _({blockStore:e,currentUserId:t,ignoreAfterTime:n}){if(!e)return[];const o=k().Bw(e,{recursivelyLoadAllDiscussions:!0,includeLoadingDiscussions:!0,includePropertyDiscussions:!0}),i=new Map;return o.forEach((e=>{const o=C({recordStore:e,currentUserId:t,timestamp:n});i.set(e.id,o)})),o.sort(((e,t)=>{const n=i.get(e.id),o=i.get(t.id);return null!=n&&n.isDefined()?null!=o&&o.isDefined()?-(n.getCreatedTime()-o.getCreatedTime()):1:-1}))}function E(e,t){return e&&e.isDefined()?t&&t.isDefined()?e.getCreatedTime()-t.getCreatedTime():1:-1}function L(e){return k().wc(e).sort(((e,t)=>E(e,t)))}function F(e){return L(e)[0]}function V(e){return K({recordStore:e,currentUserId:void 0})}function K({recordStore:e,currentUserId:t,timestamp:n}){const o=k().wc(e).filter((e=>n?e.isDefined()&&e.getCreatedTime()<n:e.isDefined())).sort(((e,t)=>E(e,t)));return o[o.length-1]}function O(e){return e.sort(((e,t)=>E(V(e),V(t))))}function U(e){const t=e.state.textStore.getValue(),n=(e.state.files??[]).length>0,o=t&&t.length>0;return!n&&!o}function N(e,t){const n=e.state.textStore.getValue(),o=e.state.files;if(!t)return n&&0!==n.length||o&&o.length>0;const i=k().gp(t).getValue();return!y().n4(i,n)||function(e,t){const n=e.state.files,o=k().dd(t);if(o.length!==n.length)return!0;return o.some(((e,t)=>e.id!==n[t].id))}(e,t)}function z(e){if(e.some((e=>!e.isReady())))return!0;return!!e.map((e=>k().wc(e))).flat().some((e=>!e.isReady()||!e.getCreatedTime()))}function Z(e){switch(e){case"block_menu":case"ai_reject_all_suggestions":case"reply_menu_mentions_comments":case"reply_menu_all_updates":case"reply_menu_archive":case"reply_menu_updates_sidebar":case"updates_menu_mentions_comments":case"updates_menu_all_updates":case"updates_menu_archive":return B.Menu;case"page_discussion":case"feed_item_top_level_discussion":return B.Page;case"updates_sidebar":return B.Sidebar;case"margin_comments":case"new_discussions_sheet":return B.Margin;case"comment_unfurl":return B.Unfurl;default:(0,T().HB)(e)}}function R(e){return y().hS(y().qI(e,(e=>k().wc(e).map((e=>({store:e,pointer:e.getCreatedByPointer()}))))),(e=>{var t;return null===(t=e.pointer)||void 0===t?void 0:t.id})).filter((e=>(0,T().O9)(e.pointer))).map((({store:e,pointer:t})=>(0,o().JQ)({parentStore:e,pointer:t}))).map((e=>e.getModel())).filter(T().O9).map((e=>e instanceof b().F?(0,i().A7)(e):e instanceof S().Hj?(0,i().qt)(e):e instanceof v().T?(0,i().Mq)(e):void(0,T().HB)(e))).filter(T().O9)}function $(e){for(const n of e){if(!n.length)return!1;if(!n[1]||!n[1].some(h().nNl)){var t;const e=n[0].trim(),o=w()();if((null===(t=e.match(o))||void 0===t?void 0:t.join(""))!==e)return!1}}return!0}function G(e){return((null==e?void 0:e.match(/[0-9.]+|[a-z]+/gi))??[]).join(" ")}},487146:(e,t,n)=>{n.r(t),n.d(t,{TopbarFavoriteButton:()=>I});var o=n(296540),i=()=>n(314529),s=()=>n(907258),a=()=>n(484714),r=()=>n(590526),c=()=>n(401497),d=()=>n(882722),l=()=>n(695115),u=()=>n(26697),p=()=>n(877788),g=()=>n(773126),m=()=>n(69708),f=()=>n(100622),v=()=>n(245128),S=()=>n(440024),b=()=>n(303742),h=()=>n(111232),y=()=>n(547149),T=()=>n(35392),x=()=>n(978578),k=()=>n(863059),w=n(474848);const j=(0,m().YK)({isBookmarkedMessage:{defaultMessage:"Favorited",id:"topbar.favoriteButton.activeTitle"},isNotBookmarkedMessage:{defaultMessage:"Favorite",id:"topbar.favoriteButton.title"},isBookmarkedTooltip:{defaultMessage:"Remove from your favorites",id:"topbar.favoriteButton.activeTooltip1"},isNotBookmarkedTooltip:{defaultMessage:"Add to your favorites",id:"topbar.favoriteButton.tooltip1"}});function I({spaceViewStore:e,store:t,iconStyle:n,buttonStyle:T,showKeyboardShortcut:I,useDefaultTooltipPlacement:C,isTablet:P}){const M=(0,a().v3)(),D=(0,m().tz)(),A=(0,r().K8)((()=>{const e=s().default.state.sidebarSpaceViewStore;return(0,b().o)(e)}),[]),_=(0,r().K8)((()=>!!e&&(0,v().A)({spaceViewStore:e,pageId:t.id})),[e,t]),E=_?g().F:p().w,L=(0,o.useMemo)((()=>_?()=>function(e,t,n){if(!n)return;(0,S().I)({environment:t}),(0,i().DO_NOT_USE_trackLegacy)(t,"unbookmark",{from:"topbar"}),y().createAndCommit({userAction:"TopbarFavoriteButton.handleUnbookmarkClick",environment:t,canUndo:!0,perform:t=>{(0,h().s)({modificationType:"remove",spaceViewStore:n,storesToModify:[e],transaction:t})}})}(t,M,e):()=>function(e,t,n){if(!n)return;(0,S().I)({environment:t}),(0,i().DO_NOT_USE_trackLegacy)(t,"bookmark",{from:"topbar"}),y().createAndCommit({userAction:"TopbarFavoriteButton.handleBookmarkClick",environment:t,canUndo:!0,perform:t=>{(0,h().s)({modificationType:"add",spaceViewStore:n,storesToModify:[e],transaction:t})}})}(t,M,e)),[_,t,M,e]),F=(0,k().gQ)(),V=(0,c().IS)((()=>({icon:{...P?F.tabletIcon:F.icon,..._?{fill:f().Tj.topbarFavorite}:void 0,...n},button:{...F.iconButton,...T}})),[F.icon,F.tabletIcon,F.iconButton,_,n,T,P]),K=(0,c().IS)((()=>({iconContainer:(0,x().aD)().iconContainer})),[]);return A?null:(0,w.jsx)(u().m,{placement:C?void 0:"bottom",originGap:M.device.isElectronWindows?10:void 0,renderTooltip:()=>(0,w.jsx)(B,{isBookmarked:_,showKeyboardShortcut:I}),render:e=>(0,w.jsx)(l().A,{...e,className:d().ZEs,icon:E,style:P?K.iconContainer:V.button,iconStyle:V.icon,onClick:L,ariaLabel:D.formatMessage(_?j.isBookmarkedMessage:j.isNotBookmarkedMessage)})})}function B({isBookmarked:e,showKeyboardShortcut:t}){return(0,w.jsxs)("div",{style:{textAlign:"center"},children:[(0,w.jsx)("div",{children:(0,w.jsx)(m().sA,{...e?j.isBookmarkedTooltip:j.isNotBookmarkedTooltip})}),t?(0,w.jsx)(T().A,{style:{color:f().Tj.text.inverseSecondary},name:"toggleFavorite"}):void 0]})}},488134:(e,t,n)=>{n.d(t,{n:()=>s});var o=()=>n(79926);const i={TopbarLayoutInfoButton:new(o().O2)("TopbarLayoutInfoButton",(async()=>n.e(2597).then(n.bind(n,650432))))},s=(0,o()._h)(i.TopbarLayoutInfoButton,(e=>e.TopbarLayoutInfoButton))},490287:(e,t,n)=>{n.d(t,{Yj:()=>S,bQ:()=>b,ju:()=>v,oo:()=>h});var o=()=>n(484714),i=()=>n(590526),s=()=>n(79926),a=()=>n(743246),r=()=>n(774733),c=()=>n(473975),d=()=>n(947682),l=()=>n(764172),u=()=>n(499764),p=()=>n(359941),g=()=>n(58180),m=()=>n(311337),f=()=>n(77246);function v(e){const{blockStore:t,spaceViewStore:n}=e;return(0,i().K8)((()=>(0,d().shouldShowTopbarMoreButton)({blockType:t.getType(),systemBlockType:t.getSystemBlockTypeStore().getValue(),isGuestPrivatePage:(0,g().E)(t,n)})),[t,n])}function S(e){const{blockStore:t}=e,{value:n}=(0,s().fJ)(r().commentsDependency),o=(0,i().K8)((()=>{if(!n)return 0;return(0,c().getDiscussions)(t).length}),[n,t]);return(0,i().K8)((()=>(0,l().xG)({blockType:t.getType(),systemBlockType:t.getSystemBlockTypeStore().getValue(),discussionCount:o,isDraftPage:t.isDraft(),isCollectionViewPageWithContent:t.isCollectionViewPageWithContent()})),[t,o])}function b(e){const{blockStore:t}=e,n=(0,o().v3)(),s=(0,i().K8)((()=>(0,m().y)(n)),[n]);return(0,i().K8)((()=>(0,d().shouldShowTopbarPresence)({canEditPage:t.canEdit(),blockType:t.getType(),systemBlockType:t.getSystemBlockTypeStore().getValue(),isTeamPost:t.isTeamPost(),userIsViewingAsPublicShareLink:s})),[t,s])}function h(e){const{spaceStore:t,blockStore:n,spaceViewStore:s}=e,r=(0,o().v3)(),c=(0,i().K8)((()=>t?!t.canEdit():void 0),[t]),l=(0,p().V)({spaceStore:t}),v=(0,i().K8)((()=>Boolean((0,u().qb)(r,n,n.getSpaceStore()))),[r,n]),S=(0,i().K8)((()=>(0,m().y)(r)),[r]);return(0,i().K8)((()=>{var e;const o=null===(e=f().Uv.getStateForBlock(n.id))||void 0===e?void 0:e.mode,i=!!t&&t.id!==n.getSpaceId(),r=!!s&&(0,g().E)(n,s),u=n.getParentTable()===a().C0;return(0,d().shouldShowTopbarShareMenu)({isSpaceGuest:c,canEditPage:n.canEdit(),blockType:n.getType(),systemBlockType:n.getSystemBlockTypeStore().getValue(),isTranslated:"translate_locked"===o,isCrossSpaceBlock:i,shouldShowPeopleCollection:l,hasPermissionViaPublicAccess:v,isPublicShareLink:S,isGuestPrivatePage:r,isCustomAgentInstructionsPage:u})}),[n,t,v,l,c,S,s])}},514799:(e,t,n)=>{n.d(t,{H:()=>r});var o=()=>n(484714),i=()=>n(590526),s=()=>n(185078),a=()=>n(910302);function r(e){const{detectedLanguage:t,canSuggestInConfidence:n}=function(e){const{pageStore:t,enabled:n,forceUpdate:s=!1}=e,r=(0,o().v3)();return(0,i().K8)((()=>n&&t?a().bY({pageStore:t,environment:r,enabled:n,forceUpdate:s}):{detectedLanguage:void 0,canSuggestInConfidence:!1}),[t,r,n,s])}(e);return t&&!(0,s().cE)(t)?{detectedLanguage:void 0,canSuggestInConfidence:!1}:{detectedLanguage:t,canSuggestInConfidence:n}}},586252:(e,t,n)=>{n.d(t,{V:()=>m});var o=n(296540),i=()=>n(564884),s=()=>n(907258),a=()=>n(484714),r=()=>n(590526),c=()=>n(591779),d=()=>n(185078),l=()=>n(5580),u=()=>n(514799);var p=()=>n(383070),g=()=>n(77246);function m(e){const t=(0,a().v3)(),n=(0,r().K8)((()=>{var t;return null===(t=g().Uv.getStateForBlock(e.id))||void 0===t?void 0:t.mode}),[e]),m=(0,r().K8)((()=>p().zD.isFullPageTranslateEnabled()),[]),f=(0,r().K8)((()=>{const e=s().default.state.currentUserSettingsStore;return!!e&&void 0===e.getSettingsStore().getKeyStore("ai_page_translation_dismissed_at").getValue()}),[]),v=m&&f,{detectedPageLanguage:S,suggestedPageTranslationLanguage:b,canSuggestInConfidence:h}=function(e){const{pageStore:t,enabled:n}=e,{detectedLanguage:o,canSuggestInConfidence:i}=(0,u().H)({pageStore:t,enabled:n}),s=(0,l().n)();return o&&o!==s&&(0,d().FM)(s)?{detectedPageLanguage:o,suggestedPageTranslationLanguage:s,canSuggestInConfidence:i}:{detectedPageLanguage:void 0,suggestedPageTranslationLanguage:void 0,canSuggestInConfidence:!1}}({pageStore:e,enabled:v}),[y,T]=(0,o.useState)(!1);(0,c().ZC)(e.id)!==e.id&&y&&T(!1);const x=Boolean(h&&!y&&v&&b&&(void 0===n||"default"===n));return(0,o.useEffect)((()=>{x&&S&&b&&function({environment:e,detectedLanguage:t,suggestedLanguage:n}){(0,i().u)({environment:e,event:{eventName:"suggested_page_translation",eventProperties:{detected_language:t,suggested_language:n}}})}({environment:t,detectedLanguage:S,suggestedLanguage:b})}),[x]),{suggestTranslation:x,detectedPageLanguage:S,suggestedPageTranslationLanguage:b,setTranslationSuggestionDismissed:T}}},614787:(e,t,n)=>{n.d(t,{l:()=>o});const o=(0,n(69708).YK)({copiedLinkToForm:{id:"FormActionButtons.copiedLinkToForm",defaultMessage:"Copied link to form"}})},657982:(e,t,n)=>{n.d(t,{Z6:()=>s,rN:()=>a});var o=()=>n(79926);const i={translation:new(o().O2)("translation",(()=>Promise.all([n.e(42660),n.e(5181),n.e(25700),n.e(87287),n.e(3773),n.e(8340)]).then(n.bind(n,136768)))),TranslateBanner:new(o().O2)("TranslateBanner",(async()=>await Promise.all([n.e(42660),n.e(5181),n.e(25700),n.e(87287),n.e(3773)]).then(n.bind(n,151985))))},s=(0,o()._h)(i.translation,(e=>e.TopbarAmbientSuggestTranslateButton)),a=(0,o()._h)(i.TranslateBanner,(e=>e.TranslateBanner))},716883:(e,t,n)=>{n.d(t,{y:()=>_});var o=n(296540),i=()=>n(484714),s=()=>n(590526),a=()=>n(401497),r=()=>n(807449),c=()=>n(19238),d=()=>n(631524),l=()=>n(493552),u=()=>n(26697),p=()=>n(29037),g=()=>n(69708),m=()=>n(815585),f=()=>n(899905),v=()=>n(130119),S=(n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),()=>n(852273)),b=()=>n(165358),h=()=>n(921997),y=()=>n(720665),T=()=>n(671593),x=()=>n(128295),k=()=>n(638681);const w=k().object({required:{state:k().object({required:{completedRecords:k().number(),status:k().literals("failure","pending","running","success"),timestamp:k().number(),totalRecords:k().number()},optional:{}})},optional:{}}),j=5e3;function I(e){const t=(0,i().v3)(),[n,a]=(0,o.useState)({}),r=(0,o.useRef)({}),c=(0,o.useRef)(e.id),d=(0,s().K8)((()=>{const t=function(e){var t;if(!e.isDefined())return;const n=[];n.push(...(null===(t=e.getFormat())||void 0===t?void 0:t.duplication_job_ids)||[]);for(const o of(0,x().mG)(e))"team"!==o.table&&"collection"!==o.table&&"workflow"!==o.table&&n.push(...o.getFormat().duplication_job_ids||[]);return(0,y().sb)(n)}(e);if(!t)return;const o=c.current!==e.id;c.current=e.id;for(const e of Object.keys(n))t.includes(e)||(o?a((({[e]:t,...n})=>n)):(t.push(e),r.current[e]||(r.current[e]=setTimeout((()=>{delete r.current[e],a((({[e]:t,...n})=>n))}),j))));return t}),[e,n]);(0,o.useEffect)((()=>{const e=r.current;return()=>{for(const t of Object.values(e))clearTimeout(t)}}),[]);const l=(0,o.useRef)({});(0,o.useEffect)((()=>{void 0!==d&&function({duplicationJobIds:e,jobSubscriptionMap:t,setJobStateMap:n,environment:o}){const i=new Set(e);for(const[s,a]of Object.entries(t))i.has(s)||S().Ay.removeListener({key:(0,h().B5)(s),subscriptionId:a},o),delete t[s];for(const s of e){if(t[s])continue;const e=(0,h().B5)(s),i=S().Ay.addListener(e,void 0,(({value:e})=>{var t;const o=null===(t=(0,T().Qq)(w,e))||void 0===t?void 0:t.state;o?n((e=>{const t=e[s];return t&&t.timestamp&&t.timestamp>o.timestamp?e:{...e,[s]:o}})):(0,b().log)({from:"useDuplicationStatus",level:"error",type:"invalid_job_state",data:{miscDataToConvertToString:e}})}),void 0,o);i?t[s]=i.subscriptionId:(0,b().log)({from:"useDuplicationStatus",level:"error",type:"failed_to_add_listener",data:{miscDataToConvertToString:{jobId:s}}})}}({duplicationJobIds:d,jobSubscriptionMap:l.current,environment:t,setJobStateMap:a})}),[d,t,l]),(0,o.useEffect)((()=>{const e=l.current;return()=>{for(const[n,o]of Object.entries(e))S().Ay.removeListener({key:(0,h().B5)(n),subscriptionId:o},t)}}),[l,t]);const u={...n};if(d)for(const o of d)u[o]||(u[o]={status:"pending",totalRecords:0,completedRecords:0,timestamp:Date.now()});return void 0===d?void 0:function(e){if(0===Object.keys(e).length)return{status:"none"};let t=0,n=0,o=!0;for(const i of Object.values(e))"success"!==i.status&&"failure"!==i.status&&(o=!1),t+="success"===i.status||"failure"===i.status?i.completedRecords:i.totalRecords,n+=i.completedRecords;return o?{status:"complete"}:{status:"duplicating",progressPercentage:0===t?0:Math.min(Math.floor(100*n/t),99)}}(u)}var B=()=>n(869562),C=()=>n(737230),P=()=>n(706965),M=n(474848);const D=150,A=3e3;function _(e){const{store:t,isExpanded:n,isWindowSmall:i,isElectron:s,isShowingTabBar:r,style:c,testOverrideStatus:d}=e,u=(0,a().IS)((()=>({container:{display:"flex",alignItems:"center",whiteSpace:"nowrap"}})),[]),[p,g]=(0,o.useState)("none"),[m,f]=(0,o.useState)("none"),v=I(t),{status:S,progressPercentage:b}=d??v??{};return(0,o.useEffect)((function(){let e;return n?g("none"):i?(g("hidden"),e=setTimeout((()=>{g("none")}),D)):(g("hidden"),e=setTimeout((()=>{g("visible")}),D)),()=>clearTimeout(e)}),[n,i]),(0,o.useEffect)((function(){let e;const t=S;return t&&"none"!==t?"duplicating"===t?f("visible"):"complete"===t&&(f("visible"),e=setTimeout((()=>{f("hidden"),e=setTimeout((()=>{f("none")}),D)}),A)):f("none"),()=>clearTimeout(e)}),[S]),S?(0,M.jsx)(l().D,{colorPalette:"gray",colorVariant:"tertiary",styleKey:"bodyRegular",style:{...u.container,...c},children:"none"===m?(0,M.jsx)(E,{visibility:p,children:(0,M.jsx)(F,{store:t,isElectron:s,isShowingTabBar:r})}):(0,M.jsx)(E,{visibility:m,children:(0,M.jsx)(L,{status:S,progressPercentage:b})})}):null}function E({visibility:e,children:t}){const n=(0,a().IS)((()=>({container:{display:"none"===e?"none":"flex",opacity:"visible"===e?1:0,transition:`opacity ${D}ms linear`,alignItems:"center",whiteSpace:"nowrap"}})),[e]);return(0,M.jsx)("div",{style:n.container,children:t})}function L({status:e,progressPercentage:t=0}){const n=(0,a().IS)((()=>({container:{display:"flex",alignItems:"center",gap:6}})),[]);return"none"===e?null:"duplicating"===e?(0,M.jsxs)("div",{style:n.container,children:[(0,M.jsx)(g().sA,{defaultMessage:"Duplicating",id:"pageFreshnessMetadata.duplicating"}),t>0?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(c().E,{progressPercentage:t,size:12}),(0,M.jsx)(g().sA,{defaultMessage:"{progressPercentage}%",id:"pageFreshnessMetadata.duplicating.progress",values:{progressPercentage:t}})]}):void 0]}):(0,M.jsxs)("div",{style:n.container,children:[(0,M.jsx)(r().I,{icon:p().checkmarkIcon,colorPalette:"gray",colorVariant:"tertiary"}),(0,M.jsx)(g().sA,{defaultMessage:"Duplicated",id:"pageFreshnessMetadata.duplicated"})]})}function F({store:e,isElectron:t,isShowingTabBar:n}){const a=(0,i().v3)(),r=(0,s().K8)((()=>{const t=e.getLastEditedTime();return t?(0,m().nl)(t,{useLowercase:!0,useCompactFormat:!0,roundDownYears:!0,nowOverrideMs:(0,f().m)().state.timeNow}):""}),[e]),c=(0,o.useCallback)((()=>{B().handleSidebarButtonClick(a,e,C().tF.Updates,"topbar"),C().Ay.setState({...C().Ay.state,updatesSubTab:C().VE.Updates})}),[a,e]);return r?(0,M.jsx)("div",{style:{display:"flex",flexFlow:"wrap"},children:(0,M.jsx)(u().m,{placement:"bottom",alignment:"start",renderTooltip:()=>(0,M.jsx)(P().A,{store:e,compactFormat:!0}),render:e=>(0,M.jsx)(d().p,{...e,onClick:c,colorVariant:"tertiary",style:{...(0,v().g)({noDrag:t&&!n})},children:(0,M.jsx)(g().sA,{defaultMessage:"Edited {timestamp}",id:"pagePropertiesHeader.edited.label",values:{timestamp:r}})})})}):null}},726360:(e,t,n)=>{n.d(t,{H:()=>s,U:()=>i});var o=n(296540);const i=(0,o.createContext)(new(n(1195).A));function s(){return(0,o.useContext)(i)}i.displayName="TrustedDomainsContext"},764172:(e,t,n)=>{n.d(t,{Ay:()=>S,xG:()=>b});var o=n(296540),i=()=>n(726637),s=()=>n(590526),a=()=>n(401497),r=()=>n(700500),c=()=>n(90023),d=()=>n(69708),l=()=>n(100622),u=()=>n(774733),p=()=>n(644914),g=()=>n(712505),m=n(474848);const f=(0,d().YK)({updates:{id:"topbar.commentsButton.title",defaultMessage:"Comments"},closeDiscussions:{defaultMessage:"Close all discussions",id:"topbar.commentsButton.closeSidebarTooltip"},openDiscussions:{defaultMessage:"View all discussions",id:"topbar.commentsButton.openSidebarTooltip"},unreadDiscussionsPopupMessage:{defaultMessage:"View all new discussions",id:"topbar.commentsButton.openDiscussionsPopupTooltip"}});function v(){const{dot:e}=(0,a().IS)((()=>({dot:{position:"absolute",top:i().A.isMobile?0:1.8,insetInlineEnd:i().A.isMobile?12:5.5,height:11,width:11,border:`2px solid ${l().Tj.whiteButtonBackground}`,borderRadius:12,background:l().oZ.red,pointerEvents:"none"}})),[]);return(0,m.jsx)("div",{style:e})}const S=function({blockStore:e,unreadDiscussionsPopupStore:t}){const i=(0,n(200688).B)({navigableBlockStore:e}),a=(0,d().tz)(),r=(0,n(484714).v3)(),c=i.length>0,{value:l}=(0,n(79926).fJ)(u().commentsDependency),{isSidebarCommentsTabExpanded:S,isSidebarUpdatesExpanded:b}=(0,s().K8)((()=>({isSidebarCommentsTabExpanded:p().me(r),isSidebarUpdatesExpanded:p().Nk(r)})),[r]),h=(0,s().K8)((()=>{const e=g().default.state.open;return n(455994).A.getPanelState(e?"peek":"mainPage").isOpen}),[]),y=(0,n(863059).gQ)(),T=!b,x=(0,s().K8)((()=>t.state.open),[t]),k=(0,o.useCallback)((()=>{var o;const i=null==l||null===(o=l.discussionHelpers)||void 0===o?void 0:o.getDiscussions,s=!!i&&i(e).length>0;(0,n(564884).u)({environment:r,event:{eventName:"topbar_comments_menu_click",eventProperties:{has_discussions:s,has_unread_indicator:c}}}),T?x?t.reset():x||t.setState({open:!0}):(t.reset(),n(869562).handleSidebarButtonClick(r,e,n(737230).tF.Comments,"topbar"))}),[r,e,l,T,c,x,t]),w=S?a.formatMessage(f.closeDiscussions):T?a.formatMessage(f.unreadDiscussionsPopupMessage):a.formatMessage(f.openDiscussions),j=(0,m.jsx)(n(26697).m,{placement:"bottom",renderTooltip:()=>(0,m.jsx)("div",{style:{textAlign:"center"},children:w}),render:e=>(0,m.jsxs)("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[(0,m.jsx)(n(695115).A,{...e,icon:n(49621).h,iconStyle:y.icon,onClick:k,style:y.iconButton,ariaLabel:a.formatMessage(f.updates),hovered:S&&!h&&!g().default.state.open||x,className:n(882722).rm}),c?(0,m.jsx)(v,{}):void 0]})});return(0,m.jsx)(n(250910).A,{buttonPopupStore:t,render:()=>(0,m.jsx)(u().j9,{blockStore:e,unreadDiscussionsPopupStore:t}),popupType:n(127833).nl.Popup,renderOrigin:()=>j,placementToOrigin:"bottom",alignmentToOrigin:"end",originGap:8})};function b(e){const{blockType:t,systemBlockType:n,discussionCount:o,isDraftPage:i,isCollectionViewPageWithContent:s}=e;if(!t)return!1;const a=t!==r().xd.form,d=(0,c().SF)(n),l=o>0,u=t===r().xd.collectionView||t===r().xd.collectionViewPage;return a&&d&&l&&(!u||s)&&!i}},773126:(e,t,n)=>{n.d(t,{F:()=>i});n(296540);const o={viewBox:"0 0 20 20",fittedViewBox:"2.4 2.39 15.2 14.52",svg:(0,n(474848).jsx)("path",{d:"M10.594 2.83a.625.625 0 0 0-1.188 0L7.899 7.468H3.025a.625.625 0 0 0-.367 1.13L6.6 11.462l-1.506 4.636a.625.625 0 0 0 .962.699L10 13.932l3.943 2.865a.625.625 0 0 0 .962-.699L13.4 11.462l3.943-2.865a.625.625 0 0 0-.367-1.13H12.1z"})},i=(0,n(340498).wt)("starFill",o,"fill")},783423:(e,t,n)=>{n.d(t,{M:()=>s});var o=()=>n(79926);const i=new(o().O2)("topbarStopSuggestModeButton",(async()=>await Promise.all([n.e(75134),n.e(35530),n.e(9773),n.e(36556),n.e(55373),n.e(36192),n.e(40537),n.e(71562),n.e(96346),n.e(44711),n.e(53321),n.e(51220),n.e(16471),n.e(37353),n.e(37571),n.e(29151),n.e(40118),n.e(50397),n.e(62475),n.e(3151),n.e(98629),n.e(22926),n.e(22900),n.e(42838),n.e(85128),n.e(49889),n.e(20108),n.e(46174),n.e(27992),n.e(63452),n.e(66249),n.e(92845),n.e(87249),n.e(79022),n.e(44854),n.e(34877),n.e(46414),n.e(11676),n.e(61165),n.e(47668),n.e(94522),n.e(44584),n.e(24587),n.e(67494),n.e(3651),n.e(38293),n.e(40992),n.e(88455),n.e(64556),n.e(33893),n.e(91793),n.e(55162),n.e(71003),n.e(32370),n.e(26264),n.e(36437),n.e(50363),n.e(42660),n.e(44590),n.e(55113),n.e(85071),n.e(7914),n.e(25588),n.e(68637),n.e(23640),n.e(72252),n.e(93134),n.e(12452),n.e(52871),n.e(29351),n.e(18825),n.e(71853),n.e(93049),n.e(22582),n.e(18636),n.e(87289),n.e(16060),n.e(34281),n.e(48376),n.e(35279),n.e(80229),n.e(77754),n.e(71309),n.e(74562),n.e(39986),n.e(47431),n.e(47160),n.e(76677),n.e(68609),n.e(37384),n.e(15553),n.e(77345),n.e(67720),n.e(37759),n.e(41423),n.e(13955),n.e(42056),n.e(14699),n.e(57924),n.e(5181),n.e(3261),n.e(19456),n.e(17729),n.e(45147),n.e(65375),n.e(32116),n.e(94995),n.e(98339),n.e(51240),n.e(82641),n.e(20029),n.e(68395),n.e(81803),n.e(96654),n.e(68643),n.e(32625),n.e(63687),n.e(95885),n.e(27083),n.e(78999),n.e(11424),n.e(40119),n.e(54742),n.e(38946),n.e(90880),n.e(49175),n.e(8852),n.e(5331),n.e(92924),n.e(71381),n.e(1947),n.e(96385),n.e(80326),n.e(53352),n.e(2373),n.e(5315),n.e(995),n.e(76690),n.e(60713),n.e(31106),n.e(63248),n.e(54719),n.e(48570),n.e(78862),n.e(54234),n.e(85160),n.e(15381),n.e(50525),n.e(15922),n.e(77651),n.e(51204),n.e(34974),n.e(58672),n.e(95103),n.e(58071),n.e(75681)]).then(n.bind(n,271459)))),s=(0,o()._h)(i,(e=>e.TopbarStopSuggestModeButton))},813401:(e,t,n)=>{n.d(t,{E:()=>s});var o=()=>n(79926);const i=new(o().O2)("topbarShareButton",(async()=>await Promise.all([n.e(75134),n.e(35530),n.e(9773),n.e(36556),n.e(55373),n.e(36192),n.e(40537),n.e(71562),n.e(96346),n.e(44711),n.e(53321),n.e(51220),n.e(16471),n.e(37353),n.e(37571),n.e(29151),n.e(40118),n.e(50397),n.e(62475),n.e(3151),n.e(98629),n.e(22926),n.e(22900),n.e(42838),n.e(85128),n.e(49889),n.e(20108),n.e(46174),n.e(27992),n.e(63452),n.e(66249),n.e(92845),n.e(87249),n.e(79022),n.e(44854),n.e(34877),n.e(46414),n.e(11676),n.e(61165),n.e(47668),n.e(94522),n.e(44584),n.e(24587),n.e(67494),n.e(3651),n.e(38293),n.e(40992),n.e(88455),n.e(64556),n.e(33893),n.e(91793),n.e(55162),n.e(71003),n.e(32370),n.e(26264),n.e(36437),n.e(50363),n.e(42660),n.e(44590),n.e(55113),n.e(85071),n.e(7914),n.e(25588),n.e(68637),n.e(23640),n.e(72252),n.e(93134),n.e(12452),n.e(52871),n.e(29351),n.e(18825),n.e(71853),n.e(93049),n.e(22582),n.e(18636),n.e(87289),n.e(16060),n.e(34281),n.e(48376),n.e(35279),n.e(80229),n.e(77754),n.e(71309),n.e(74562),n.e(39986),n.e(47431),n.e(47160),n.e(76677),n.e(68609),n.e(37384),n.e(15553),n.e(77345),n.e(67720),n.e(37759),n.e(41423),n.e(13955),n.e(42056),n.e(14699),n.e(57924),n.e(5181),n.e(3261),n.e(19456),n.e(17729),n.e(45147),n.e(65375),n.e(32116),n.e(94995),n.e(98339),n.e(51240),n.e(82641),n.e(20029),n.e(68395),n.e(81803),n.e(96654),n.e(68643),n.e(32625),n.e(63687),n.e(95885),n.e(27083),n.e(78999),n.e(11424),n.e(40119),n.e(54742),n.e(38946),n.e(90880),n.e(49175),n.e(8852),n.e(5331),n.e(92924),n.e(71381),n.e(1947),n.e(96385),n.e(80326),n.e(53352),n.e(2373),n.e(5315),n.e(995),n.e(76690),n.e(60713),n.e(31106),n.e(63248),n.e(54719),n.e(48570),n.e(78862),n.e(54234),n.e(85160),n.e(15381),n.e(50525),n.e(15922),n.e(77651),n.e(51204),n.e(34974),n.e(58672),n.e(95103),n.e(58071),n.e(75681)]).then(n.bind(n,136805)))),s=(0,o()._h)(i,(e=>e.TopbarShareButton))},869609:(e,t,n)=>{n.d(t,{u:()=>s});var o=()=>n(79926);const i=new(o().O2)("topbarMoreButton",(async()=>await Promise.all([n.e(75134),n.e(35530),n.e(9773),n.e(36556),n.e(55373),n.e(36192),n.e(40537),n.e(71562),n.e(96346),n.e(44711),n.e(53321),n.e(51220),n.e(16471),n.e(37353),n.e(37571),n.e(29151),n.e(40118),n.e(50397),n.e(62475),n.e(3151),n.e(98629),n.e(22926),n.e(22900),n.e(42838),n.e(85128),n.e(49889),n.e(20108),n.e(46174),n.e(27992),n.e(63452),n.e(66249),n.e(92845),n.e(87249),n.e(79022),n.e(44854),n.e(34877),n.e(46414),n.e(11676),n.e(61165),n.e(47668),n.e(94522),n.e(44584),n.e(24587),n.e(67494),n.e(3651),n.e(38293),n.e(40992),n.e(88455),n.e(64556),n.e(33893),n.e(91793),n.e(55162),n.e(71003),n.e(32370),n.e(26264),n.e(36437),n.e(50363),n.e(42660),n.e(44590),n.e(55113),n.e(85071),n.e(7914),n.e(25588),n.e(68637),n.e(23640),n.e(72252),n.e(93134),n.e(12452),n.e(52871),n.e(29351),n.e(18825),n.e(71853),n.e(93049),n.e(22582),n.e(18636),n.e(87289),n.e(16060),n.e(34281),n.e(48376),n.e(35279),n.e(80229),n.e(77754),n.e(71309),n.e(74562),n.e(39986),n.e(47431),n.e(47160),n.e(76677),n.e(68609),n.e(37384),n.e(15553),n.e(77345),n.e(67720),n.e(37759),n.e(41423),n.e(13955),n.e(42056),n.e(14699),n.e(57924),n.e(5181),n.e(3261),n.e(19456),n.e(17729),n.e(45147),n.e(65375),n.e(32116),n.e(94995),n.e(98339),n.e(51240),n.e(82641),n.e(20029),n.e(68395),n.e(81803),n.e(96654),n.e(68643),n.e(32625),n.e(63687),n.e(95885),n.e(27083),n.e(78999),n.e(11424),n.e(40119),n.e(54742),n.e(38946),n.e(90880),n.e(49175),n.e(8852),n.e(5331),n.e(92924),n.e(71381),n.e(1947),n.e(96385),n.e(80326),n.e(53352),n.e(2373),n.e(5315),n.e(995),n.e(76690),n.e(60713),n.e(31106),n.e(63248),n.e(54719),n.e(48570),n.e(78862),n.e(54234),n.e(85160),n.e(15381),n.e(50525),n.e(15922),n.e(77651),n.e(51204),n.e(34974),n.e(58672),n.e(95103),n.e(58071),n.e(75681)]).then(n.bind(n,905246)))),s=(0,o()._h)(i,(e=>e.TopbarMoreButton))},899905:(e,t,n)=>{n.d(t,{m:()=>s});class o extends(()=>n(757695))().Store{constructor(){super(),setInterval((()=>{this.setState({timeNow:Date.now()})}),3e4)}getInitialState(){return{timeNow:Date.now()}}}let i=null;function s(){return i||(i=new o),i}},947682:(e,t,n)=>{n.r(t),n.d(t,{TopbarActionButtons:()=>Ce,shouldShowTopbarMoreButton:()=>De,shouldShowTopbarPresence:()=>Me,shouldShowTopbarShareMenu:()=>Pe});var o=n(296540),i=()=>n(907258),s=()=>n(59226),a=()=>n(726637),r=()=>n(968578),c=()=>n(484714),d=()=>n(792485),l=()=>n(590526),u=()=>n(401497),p=()=>n(75435),g=()=>n(876338),m=()=>n(795732),f=()=>n(882722),v=()=>n(700500),S=()=>n(90023),b=()=>n(22634),h=()=>n(743246),y=()=>n(175947),T=()=>n(69708),x=()=>n(100622),k=()=>n(534177),w=()=>n(770160),j=()=>n(981475),I=()=>n(462113),B=()=>n(835066),C=()=>n(594251),P=()=>n(869609),M=()=>n(813401),D=()=>n(783423),A=()=>n(964345),_=()=>n(180252),E=()=>n(635462),L=()=>n(490287),F=()=>n(204263),V=()=>n(696746),K=()=>n(58180),O=()=>n(311337),U=()=>n(869562),N=()=>n(644914),z=()=>n(737230),Z=()=>n(77246),R=()=>n(795179),$=()=>n(538233),G=()=>n(135082),W=()=>n(657982),Y=(n(581454),()=>n(852273)),H=()=>n(921997),q=()=>n(277816),J=()=>n(378941),Q=()=>n(1195);function X({spaceId:e,trustedDomainsStore:t,trustedDomains:n,value:o}){const i=n.map((t=>({table:q().A,id:t.id,spaceId:e}))),s=n.map((e=>e.getEmailDomain()));t.setState({trustedDomainPointers:i,enabledTrustedEmailDomains:s,trustedDomains:n,lastEmitData:{value:o,spaceId:e}})}var ee=()=>n(726360),te=(n(18107),n(967357),()=>n(929219)),ne=()=>n(463086),oe=()=>n(807449),ie=()=>n(631524),se=()=>n(26697),ae=()=>n(187174),re=()=>n(529099),ce=()=>n(179034),de=()=>n(96689),le=()=>n(234459),ue=()=>n(615234),pe=()=>n(769864),ge=()=>n(703748),me=()=>n(990402),fe=n(474848);const ve=(0,T().YK)({openAgent:{id:"workflows.topbar.agentButton.openAgent",defaultMessage:"Chat with Notion AI"}});function Se(e){const t=(0,c().v3)(),n=(0,T().tz)(),s=(0,u().IS)((()=>({button:{height:28,width:"auto",paddingTop:0,paddingInlineEnd:8,paddingBottom:0,paddingInlineStart:6,display:"flex",alignItems:"center",justifyContent:"center",gap:6},text:{fontSize:14}})),[]),a=(0,l().K8)((()=>{const{sidebarSpaceStore:t}=i().default.state;if(t)return e.store?{table:ce().ev,id:e.store.pointer.id,spaceId:t.id}:{table:de().NX,id:t.id,spaceId:t.id}}),[e.store]),[{value:r}]=(0,ae().Yb)((async()=>{const{sidebarSpaceStore:n}=i().default.state;if(!a||!te().A.state.online||!n)return;const o=await pe().callApi({eventName:"getInferenceTranscriptsForUser",environment:t,data:{threadParentPointer:a}});if("failed"===o.type)return;const s=o.data.transcripts.at(0);if(!s)return;const r=ne().E.createChildStore(e.store,{table:le().To,id:s.id,spaceId:n.id});await r.load();const c=r.getMessageStores().at(-1);if(!c)return;await c.load();return c.getCreatedTime()>Date.now()-ue().Xb?r.id:void 0}),[a,t,e.store]),d=(0,o.useCallback)((()=>{(0,ge().openChatPanel)({environment:t,store:e.store,chatPanelState:r?{isOpen:!0,threadId:r}:{isOpen:!0,isNewThread:!0}})}),[t,e.store,r]);return(0,l().K8)((()=>(0,me().G)(e.store)),[e.store])?(0,fe.jsx)(se().m,{placement:"bottom",originGap:t.device.isElectronWindows?10:void 0,renderTooltip:()=>(0,fe.jsx)(T().sA,{...ve.openAgent}),render:e=>(0,fe.jsxs)(ie().p,{...e,onClick:d,style:s.button,"aria-label":n.formatMessage(ve.openAgent),children:[(0,fe.jsx)(oe().I,{icon:re().aiFaceIcon,size:"lg"}),(0,fe.jsx)("span",{style:s.text,children:"Chat"})]})}):null}var be=()=>n(716883),he=()=>n(764172),ye=()=>n(965833),Te=()=>n(487146),xe=()=>n(488134),ke=()=>n(126126),we=()=>n(277201),je=()=>n(586252),Ie=()=>n(863059);const Be=5;function Ce(e){const t=(0,c().v3)(),{device:n}=t,v=(0,T().tz)(),{store:S}=e,k=(0,s().X)("top_corner_agent_entry_point"),q=(0,l().K8)((()=>j().globalChatPanelRuntimeStore.state.chatPanelMode),[]),te=(0,l().K8)((()=>(0,w().getIsChatPanelOpen)(t)),[t]),ne=(0,l().K8)((()=>S.canEdit()),[S]),[oe,ie]=(0,l().$y)(void 0,r().A),[se,ae]=(0,o.useState)(!1),re=(0,l().K8)((()=>(0,E().s)(S.id)),[S.id]),ce=(0,d().S)(),{spaceStore:de,spaceViewStore:le,pageVisitStore:ue,presenceStore:pe}=(0,l().K8)((()=>({spaceStore:(0,g().$)(ce),spaceViewStore:i().default.state.sidebarSpaceViewStore,pageVisitStore:i().default.state.pageVisitStore,presenceStore:i().default.state.presenceStore})),[ce]),ge=(0,l().K8)((()=>{var e;return null===(e=Z().Uv.getStateForBlock(S.id))||void 0===e?void 0:e.mode}),[S.id]),me=(0,l().K8)((()=>(0,V().Nh)(S.id)),[S.id]),ve=(0,l().K8)((()=>(0,O().y)(t)),[t]),{isTeamPost:Ce,isFormBlock:Pe,isPageBlock:Me,isEOIPBlock:De}=(0,l().K8)((()=>({isTeamPost:S.isTeamPost(),isFormBlock:S.isFormBlock(),isPageBlock:S.isPageBlock(),isEOIPBlock:S.isExternalObjectInstancePageBlockStore()})),[S]),Ae=(0,l().K8)((()=>(0,N().Nk)(t)),[t]),_e=(0,l().K8)((()=>(0,B().xK)(t,!1)<1150),[t]),Ee=(0,L().oo)({blockStore:S,spaceStore:de,spaceViewStore:le});(0,o.useEffect)((()=>{ae(!Ae)}),[Ae]);const{canShowUpdateSidebarUnexpander:Le,shouldShowUpdateSidebarUnexpander:Fe}=(0,l().K8)((()=>{const e=!se&&Ae;return{canShowUpdateSidebarUnexpander:e,shouldShowUpdateSidebarUnexpander:e&&(z().Ay.state.mouseEntered||oe.mouseEntered)}}),[se,Ae,oe]),Ve=(0,l().K8)((()=>Le?z().Ay.state.width:void 0),[Le]),{sidebarExpanded:Ke,sidebarIsAnimating:Oe}=(0,l().K8)((()=>({sidebarExpanded:z().Ay.state.expanded,sidebarIsAnimating:z().Ay.state.isAnimating})),[]),Ue=(0,l().O$)((0,_().$o)(t)),Ne=(0,L().Yj)({blockStore:S}),ze=(0,l().O$)(A().gZ),{suggestTranslation:Ze,suggestedPageTranslationLanguage:Re,detectedPageLanguage:$e,setTranslationSuggestionDismissed:Ge}=(0,je().V)(S),We=(0,L().bQ)({blockStore:S}),Ye=(0,L().ju)({blockStore:S,spaceViewStore:le}),He=(0,l().K8)((()=>{const e=S.getType(),t=S.pathIsDead(),n=S.isFormBlock(),o="translate_locked"===ge,i=S.getParentTable()===h().C0;return!(!e||t||n||o||i)}),[S,ge]),qe=!a().A.isMobile&&(Me||De)&&!Pe,Je=(0,l().O$)(p().b),Qe=function({spaceId:e}){const t=(0,c().v3)(),[n]=(0,o.useState)(new(Q().A));return(0,o.useEffect)((()=>{if(!e)return;(0,J().XC)({environment:t,spaceId:e}).then((t=>X({spaceId:e,trustedDomainsStore:n,trustedDomains:t,value:0})));const o=Y().Ay.addListener((0,H()._i)({spaceId:e}),void 0,(async({value:o})=>{if(n.shouldRefetchTrustedDomains({currentSpaceId:e,emitValue:o})){const i=await(0,J().XC)({environment:t,spaceId:e});X({spaceId:e,trustedDomainsStore:n,trustedDomains:i,value:o})}}),void 0,t);return()=>{o&&Y().Ay.removeListener(o,t)}}),[t,e,n]),n}({spaceId:null==de?void 0:de.id}),Xe=(0,l().K8)((()=>(0,K().E)(S,le)),[S,le]),et=(0,Ie().Nq)(),tt=(0,u().IS)((()=>({actionButtonsWrapStyle:{flexGrow:0,flexShrink:0,display:"flex",alignItems:"center",paddingInlineEnd:a().A.isMobile?4:0,paddingInlineStart:et,width:Ve,justifyContent:"space-between",zIndex:101,height:y().ek(t.device.isElectronMac),opacity:Ue?0:1,transition:`\n\t\t\t\t\topacity ${ye().L}ms,\n\t\t\t\t\tcolor ${ye().L}ms\n\t\t\t\t`},rightButtonsContainer:{display:"flex",alignItems:"center"},pageFreshnessContainer:Ee?{}:{marginInlineEnd:12},agentDivider:{width:1,height:20,margin:"0 8px",backgroundColor:x().Tj.border.primary}})),[et,Ve,t.device.isElectronMac,Ue,Ee]);if(e.isInvalidPage)return null;const nt=(!n.isElectronMac||!Ue)&&Le&&(n.isElectron||Fe)&&!Oe;return(0,fe.jsx)(ee().U.Provider,{value:Qe,children:(0,fe.jsxs)("div",{style:tt.actionButtonsWrapStyle,onMouseMove:()=>{ie({...oe,mouseEntered:!0})},onMouseLeave:()=>{ie({...oe,mouseEntered:!1})},className:f()._6K,children:[nt?(0,fe.jsx)(we().i,{isVisible:nt,icon:b().O,caption:v.formatMessage({defaultMessage:"Close panel",id:"updateSidebarUnexpandButton.closePanel.tooltip"}),onClick:()=>{ae(!0),U().setUpdateExpand({environment:t,isExpanded:!1,from:"close_for_space",saveDetailsSidebarPreference:!0})},keyboardShortcutName:"toggleUpdateSidebar"}):(0,fe.jsx)("div",{}),(0,fe.jsxs)("div",{style:tt.rightButtonsContainer,children:[Re&&$e?(0,fe.jsx)(W().Z6,{store:S,isVisible:Ze,setTranslationSuggestionDismissed:()=>Ge(!0),suggestedPageTranslationLanguage:Re,detectedPageLanguage:$e}):void 0,(0,fe.jsx)(D().M,{store:S,isVisible:"suggest"===ge&&!Pe}),me||Pe||ze||Ze||"suggest"===ge?void 0:(0,fe.jsx)(be().y,{store:S,isExpanded:Ae,isWindowSmall:_e,isElectron:n.isElectron,style:tt.pageFreshnessContainer,isShowingTabBar:Je}),We&&ne&&!Ce&&ue&&pe&&!Pe&&!ve?(0,fe.jsx)(ke().Ay,{rootStore:S,pageVisitStore:ue,presenceStore:pe,maxUsers:Ke?Be:void 0}):void 0,Ee?(0,fe.jsx)(M().E,{store:S,buttonPopupStore:$().A}):void 0,qe?(0,fe.jsx)(xe().n,{blockStore:S,buttonPopupStore:G().A,pageViewBlockContext:m().R.Frame}):void 0,Ne?(0,fe.jsx)(he().Ay,{blockStore:S,unreadDiscussionsPopupStore:C().Z}):void 0,He?(0,fe.jsx)(Te().TopbarFavoriteButton,{store:S,spaceViewStore:le}):void 0,re?(0,fe.jsx)(F().A,{}):void 0,Pe&&!Xe?(0,fe.jsx)(I().A,{formBlockStore:S,inPeekMode:!1}):void 0,Ye?(0,fe.jsx)(P().u,{store:S,buttonPopupStore:R().A}):void 0,k&&"sidebar"===q&&!te?(0,fe.jsxs)(fe.Fragment,{children:[(0,fe.jsx)("div",{style:tt.agentDivider}),(0,fe.jsx)(Se,{store:S})]}):void 0]})]})})}function Pe(e){const{isSpaceGuest:t,canEditPage:n,blockType:o,systemBlockType:i,isTranslated:s,shouldShowPeopleCollection:r,isCrossSpaceBlock:c,hasPermissionViaPublicAccess:d,isPublicShareLink:l,isGuestPrivatePage:u,isCustomAgentInstructionsPage:p}=e;if(!o)return!1;if(a().A.isAdminMode)return!0;const g=o!==v().xd.form,m=(0,S().Oz)(i,r);let f=!0;return(0,k().O9)(t)&&(f=!t||n),!p&&(!u&&(g&&m&&(f&&!d||l)&&!c&&!s))}function Me(e){const{blockType:t,systemBlockType:n,canEditPage:o,isTeamPost:i,userIsViewingAsPublicShareLink:s}=e;if(!t)return!1;const a=t!==v().xd.form,r=(0,S().D7)(n);return o&&a&&r&&!i&&!s}function De(e){const{blockType:t,systemBlockType:n,isGuestPrivatePage:o}=e;if(!t)return!1;if(o)return!1;const i=t!==v().xd.form,s=(0,S().dy)(n);return i&&s}},978578:(e,t,n)=>{n.d(t,{MS:()=>c,aD:()=>r,bu:()=>a,uO:()=>s,uZ:()=>d});var o=()=>n(911988),i=()=>n(100622);function s(e=!0,t=!1){return{flex:1,marginInlineStart:e?0:8,overflow:"hidden",marginInlineEnd:t?16:8,whiteSpace:"nowrap",height:"100%",minWidth:0,maxWidth:"100%",textOverflow:"ellipsis"}}const a=36;function r(){return{iconStyle:{height:26,width:26,fill:i().Tj.icon.primary},iconContainer:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",marginInlineEnd:14,color:i().Tj.icon.secondary,width:26},redesignedIconStyle:{height:24,width:24,fill:i().Tj.icon.primary},redesignedCircleIconContainer:{background:i().Tj.background.primary,color:i().Tj.icon.primary,display:"inline-flex",justifyContent:"center",alignItems:"center",borderRadius:18,width:a,height:a},redesignedCoverPhotoIconContainer:{background:i().Tj.background.primary,color:i().Tj.icon.primary,display:"inline-flex",justifyContent:"center",alignItems:"center",borderRadius:18,width:a,height:a,boxShadow:"0px 2px 4px -1px rgba(0, 0, 0, 0.06), 0px 14px 28px -6px rgba(0, 0, 0, 0.10)"}}}function c(e){const{WindowSizeStore:t}=e;return{marginTop:t.state.paddingTop,paddingInlineStart:t.getSafePaddingLeftPx(0),paddingInlineEnd:t.getSafePaddingRightPx(0)}}function d(e=o().s1,t=!0){const n=1/(window.devicePixelRatio||1);return{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",maxWidth:"100%",height:e,boxShadow:t?`0 ${n}px 0 ${i().Tj.border.secondaryTranslucent}`:"none",background:i().Tj.background.primary,transition:"box-shadow 300ms",WebkitUserSelect:"none",cursor:"pointer"}}},990402:(e,t,n)=>{n.d(t,{G:()=>s,m:()=>i});var o=()=>n(46986);function i(e){return e.canEdit()&&(0,o().re)()}function s(e){return e.canEdit()&&!e.isSystemBlock()&&(0,o().re)()}}}]);