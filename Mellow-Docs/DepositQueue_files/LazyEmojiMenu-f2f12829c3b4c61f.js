"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[90012],{471945:(e,t,n)=>{n.d(t,{v:()=>r});var o=()=>n(916694),i=()=>n(626652);function r(e,t,n){const r=(0,i().a)(e,t,n?"@":"");return(0,o().m)(e,r)}},730967:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});n(898992),n(354520);var o=n(296540),i=()=>n(484714),r=()=>n(590526),l=()=>n(471945),u=()=>n(465628),p=()=>n(232615),s=()=>n(127833),a=()=>n(30537),c=()=>n(546926),d=()=>n(890492),m=()=>n(201980),f=()=>n(98244),h=()=>n(486666),S=()=>n(797162),g=()=>n(547149),v=()=>n(97270),x=()=>n(828265),T=n(474848);function b(){const e=(0,i().Y0)(),{open:t,filter:n,emojiTextStore:c,popupOpen:d,originRect:h,alwaysShowPopup:g}=(0,r().K8)((()=>{const e=v().A.state,t=e.open;if(!t)return{open:t,popupOpen:!1};const n=function(e){if(!e.textStore)return;return(0,l().v)(e.textStore,e.oldTextValue,!0)}(e)||"",{textStore:o,showPopupWithEmptyFilter:i,selectionRect:r}=e,u=Boolean(i);return{open:t,filter:n,emojiTextStore:o,popupOpen:n.length>0||u,originRect:r,alwaysShowPopup:u}}),[]),{textMode:x,prevChar:b,singleTextSelectionStore:j}=(0,r().K8)((()=>{var e;const t=p().default.state,{mode:n}=t;if("editing"!==n)return{mode:n};const{multiSelection:o}=t,i=m().qAZ(o.start.store.getValue());return{textMode:n,prevChar:i?i[o.start.index-1]:void 0,singleTextSelectionStore:null===(e=(0,u().H)(o))||void 0===e?void 0:e.store}}),[]),y=(0,r().K8)((()=>S().A.state.open),[]);return(0,o.useEffect)((()=>{t&&!y&&("editing"!==x||!n&&":"!==b||j!==c||void 0===n||":"===n||n.startsWith(" ")||n.includes("\n"))&&f().VN()}),[c,n,y,t,b,j,x]),(0,T.jsx)(s().zD,{popupType:e.isMobileNative&&!e.isTablet?a().n.SlideUp:a().n.Popup,open:d,originRect:h,placementToOrigin:"bottom",alignmentToOrigin:"start",originGap:4,disableMouseCapture:!0,disableContentScroll:!0,onDismiss:C,render:()=>(0,T.jsx)(w,{open:t,filter:n||"",alwaysShowPopup:g}),keepFocus:!0})}function w({open:e,filter:t,alwaysShowPopup:n}){const r=(0,i().v3)(),l=(0,i().Y0)(),u=(0,o.useRef)(null),p=l.isMobileNative&&!l.isTablet?{menuType:c().gu.ActionSheet}:{menuType:c().gu.Popup,width:h().jv,onClickOutside:f().VN};return e?!Boolean(n)&&t.length<1?null:(0,T.jsx)(d().A,{innerRef:u,...p,children:(0,T.jsx)(x().p,{filter:t,onSubmit:e=>j(e,r),isCallout:!1,menuRef:u,isInline:!0,onUpload:{onComplete:e=>{j(e,r)}}})}):null}function C(){f().VN()}function j(e,t){g().createAndCommit({userAction:"EmojiMenu.handleSubmit",environment:t,canUndo:!0,perform:n=>{f().Ju({environment:t,emoji:e,transaction:n})}})}}}]);